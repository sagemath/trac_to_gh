# Issue 19870: Add experimental gap3_jm package

archive/issues_019870.json:
```json
{
    "body": "CC:  @saliola @tscrim jmichel simonking\n\nKeywords: gap3, experimental package\n\nWe have been trying to have an optional GAP3 package for a while now. Instead of the official GAP3, we instead use a forked package [gap3_jm](https://webusers.imj-prg.fr/~jean.michel/gap3/) which has regularly been updated.\n\nPreviously, this was made a Sage package (#8906) but it contained binaries, so it was removed again (#19164).\n\nI removed all binaries, and prepared a new tarball at \u200bhttp://downloads.findstat.org/gap3-jm5-2015-02-01.tar.gz .\n\nIssue created by migration from https://trac.sagemath.org/ticket/20107\n\n",
    "closed_at": "2016-04-04T21:32:53Z",
    "created_at": "2016-02-24T10:34:27Z",
    "labels": [
        "component: packages: experimental"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.2",
    "title": "Add experimental gap3_jm package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19870",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```
CC:  @saliola @tscrim jmichel simonking

Keywords: gap3, experimental package

We have been trying to have an optional GAP3 package for a while now. Instead of the official GAP3, we instead use a forked package [gap3_jm](https://webusers.imj-prg.fr/~jean.michel/gap3/) which has regularly been updated.

Previously, this was made a Sage package (#8906) but it contained binaries, so it was removed again (#19164).

I removed all binaries, and prepared a new tarball at ​http://downloads.findstat.org/gap3-jm5-2015-02-01.tar.gz .

Issue created by migration from https://trac.sagemath.org/ticket/20107





---

archive/issue_comments_272850.json:
```json
{
    "body": "How do I actually find all binaries? Such as\n\n```\ngap3_test$ grep -r -m 1 \"^\"  . | grep \"^Binary file\"\nBinary file ./pkg/monoid/doc/manual.dvi matches\nBinary file ./pkg/anusq/bin/Sq matches\nBinary file ./pkg/anusq/doc/sq94.dvi matches\nBinary file ./pkg/anusq/doc/sqn92.dvi matches\nBinary file ./pkg/nq/bin/nq matches\nBinary file ./pkg/cryst/doc/paper.dvi matches\nBinary file ./pkg/meataxe/tests/m11.2 matches\nBinary file ./pkg/meataxe/tests/Mat9 matches\nBinary file ./pkg/meataxe/tests/a2 matches\nBinary file ./pkg/meataxe/tests/a1 matches\nBinary file ./pkg/meataxe/tests/Mat256 matches\nBinary file ./pkg/meataxe/tests/Perm2 matches\nBinary file ./pkg/meataxe/tests/Mat25 matches\nBinary file ./pkg/meataxe/tests/Mat125 matches\nBinary file ./pkg/meataxe/tests/ac.2 matches\nBinary file ./pkg/meataxe/tests/Mat67 matches\nBinary file ./pkg/meataxe/tests/Perm1 matches\nBinary file ./pkg/meataxe/tests/Mat5 matches\nBinary file ./pkg/meataxe/tests/C0.2 matches\nBinary file ./pkg/meataxe/tests/C0.1 matches\nBinary file ./pkg/meataxe/tests/Mat2 matches\nBinary file ./pkg/meataxe/tests/ac.1 matches\nBinary file ./pkg/meataxe/tests/m11.1 matches\nBinary file ./pkg/sisyphos/bin/sis-i586-unknown-linux matches\nBinary file ./pkg/sisyphos/doc/sisman.0.8.3.dvi matches\nBinary file ./pkg/ve/examples/meout.pb matches\nBinary file ./pkg/ve/bin/qme matches\nBinary file ./pkg/ve/bin/me matches\nBinary file ./pkg/ve/docs/nme.dvi matches\nBinary file ./pkg/arep/bin/leonin matches\nBinary file ./pkg/arep/bin/desauto matches\nBinary file ./pkg/arep/bin/leonout matches\nBinary file ./pkg/arep/src/leon/doc/manual.dvi matches\nBinary file ./manual.pdf matches\nBinary file ./bin/gapdjg.exe matches\nBinary file ./bin/gap.mac matches\nBinary file ./bin/gap.x86linux64 matches\nBinary file ./bin/gapcyg.exe matches\nBinary file ./bin/gap.macx86 matches\nBinary file ./bin/gap.x86linux matches\nBinary file ./bin/gapdjg.pif matches\nBinary file ./bin/cygwin1.dll matches\n```\nAre any of these okay to keep, such as the dvi files?",
    "created_at": "2016-02-24T10:59:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272850",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

How do I actually find all binaries? Such as

```
gap3_test$ grep -r -m 1 "^"  . | grep "^Binary file"
Binary file ./pkg/monoid/doc/manual.dvi matches
Binary file ./pkg/anusq/bin/Sq matches
Binary file ./pkg/anusq/doc/sq94.dvi matches
Binary file ./pkg/anusq/doc/sqn92.dvi matches
Binary file ./pkg/nq/bin/nq matches
Binary file ./pkg/cryst/doc/paper.dvi matches
Binary file ./pkg/meataxe/tests/m11.2 matches
Binary file ./pkg/meataxe/tests/Mat9 matches
Binary file ./pkg/meataxe/tests/a2 matches
Binary file ./pkg/meataxe/tests/a1 matches
Binary file ./pkg/meataxe/tests/Mat256 matches
Binary file ./pkg/meataxe/tests/Perm2 matches
Binary file ./pkg/meataxe/tests/Mat25 matches
Binary file ./pkg/meataxe/tests/Mat125 matches
Binary file ./pkg/meataxe/tests/ac.2 matches
Binary file ./pkg/meataxe/tests/Mat67 matches
Binary file ./pkg/meataxe/tests/Perm1 matches
Binary file ./pkg/meataxe/tests/Mat5 matches
Binary file ./pkg/meataxe/tests/C0.2 matches
Binary file ./pkg/meataxe/tests/C0.1 matches
Binary file ./pkg/meataxe/tests/Mat2 matches
Binary file ./pkg/meataxe/tests/ac.1 matches
Binary file ./pkg/meataxe/tests/m11.1 matches
Binary file ./pkg/sisyphos/bin/sis-i586-unknown-linux matches
Binary file ./pkg/sisyphos/doc/sisman.0.8.3.dvi matches
Binary file ./pkg/ve/examples/meout.pb matches
Binary file ./pkg/ve/bin/qme matches
Binary file ./pkg/ve/bin/me matches
Binary file ./pkg/ve/docs/nme.dvi matches
Binary file ./pkg/arep/bin/leonin matches
Binary file ./pkg/arep/bin/desauto matches
Binary file ./pkg/arep/bin/leonout matches
Binary file ./pkg/arep/src/leon/doc/manual.dvi matches
Binary file ./manual.pdf matches
Binary file ./bin/gapdjg.exe matches
Binary file ./bin/gap.mac matches
Binary file ./bin/gap.x86linux64 matches
Binary file ./bin/gapcyg.exe matches
Binary file ./bin/gap.macx86 matches
Binary file ./bin/gap.x86linux matches
Binary file ./bin/gapdjg.pif matches
Binary file ./bin/cygwin1.dll matches
```
Are any of these okay to keep, such as the dvi files?



---

archive/issue_comments_272851.json:
```json
{
    "body": "Replying to [ticket:20107 stumpc5]:\n> * Download GAP3 from https://webusers.imj-prg.fr/~jean.michel/gap3/\n\n\nI think this is the problem: it doesn't seem to be the \"official\" GAP3 package, just some random repackaging of GAP3.",
    "created_at": "2016-02-25T10:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272851",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [ticket:20107 stumpc5]:
> * Download GAP3 from https://webusers.imj-prg.fr/~jean.michel/gap3/


I think this is the problem: it doesn't seem to be the "official" GAP3 package, just some random repackaging of GAP3.



---

archive/issue_comments_272852.json:
```json
{
    "body": "Replying to [comment:2 jdemeyer]:\n> I think this is the problem: it doesn't seem to be the \"official\" GAP3 package, just some random repackaging of GAP3.\n\n\nThe development of GAP3 has stopped a long time ago. But there are several GAP3 packages that have never been ported to GAP4, and which are still developed.\n\nFrom that webpage:\n\n```\nTo help people who are just interested in GAP3 because they need a package\nwhich has not been ported to GAP4, I have prepared an easy-to install\nminimal GAP3 distribution containing an up-to-date versions of the packages.\n```\n\nSo this is the only place where we can find up-to-date versions of the GAP3 package *chevie* to work with unitary reflection groups and their representation theory.\n\nI fail to see what might be wrong with adding support for those packages using that \"random repackaging\" since I and several others need them.\n\nI install the packages myself and then use them from within Sage, but since several things inside Sage are about to depend on that package - see #11187, #11010, #10819 - I think it is worth providing the option for others to automatically install that version of GAP3 with the newest *chevie* package.",
    "created_at": "2016-02-25T11:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272852",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:2 jdemeyer]:
> I think this is the problem: it doesn't seem to be the "official" GAP3 package, just some random repackaging of GAP3.


The development of GAP3 has stopped a long time ago. But there are several GAP3 packages that have never been ported to GAP4, and which are still developed.

From that webpage:

```
To help people who are just interested in GAP3 because they need a package
which has not been ported to GAP4, I have prepared an easy-to install
minimal GAP3 distribution containing an up-to-date versions of the packages.
```

So this is the only place where we can find up-to-date versions of the GAP3 package *chevie* to work with unitary reflection groups and their representation theory.

I fail to see what might be wrong with adding support for those packages using that "random repackaging" since I and several others need them.

I install the packages myself and then use them from within Sage, but since several things inside Sage are about to depend on that package - see #11187, #11010, #10819 - I think it is worth providing the option for others to automatically install that version of GAP3 with the newest *chevie* package.



---

archive/issue_comments_272853.json:
```json
{
    "body": "Replying to [comment:3 stumpc5]:\n> Replying to [comment:2 jdemeyer]:\n> > I think this is the problem: it doesn't seem to be the \"official\" GAP3 package, just some random repackaging of GAP3.\n\n> \n> The development of GAP3 has stopped a long time ago. But there are several GAP3 packages that have never been ported to GAP4, and which are still developed.\n> \n> From that webpage:\n> \n> ```\n> To help people who are just interested in GAP3 because they need a package\n> which has not been ported to GAP4, I have prepared an easy-to install\n> minimal GAP3 distribution containing an up-to-date versions of the packages.\n> ```\n\n\nAll the above doesn't explain why you use the repackaged version and not the official GAP 3 release from [http://www.gap-system.org/Gap3/Download3/download.html](http://www.gap-system.org/Gap3/Download3/download.html)\n\n> So this is the only place where we can find up-to-date versions of the GAP3 package *chevie* to work with unitary reflection groups and their representation theory.\n\n\nNo, the official `gap3r4p4` release also contains chevie.\n\n> I fail to see what might be wrong with adding support for those packages using that \"random repackaging\" since I and several others need them.\n\n\nBecause the repackaging seems to made in a messy way, see #19164.",
    "created_at": "2016-02-25T13:03:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272853",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:3 stumpc5]:
> Replying to [comment:2 jdemeyer]:
> > I think this is the problem: it doesn't seem to be the "official" GAP3 package, just some random repackaging of GAP3.

> 
> The development of GAP3 has stopped a long time ago. But there are several GAP3 packages that have never been ported to GAP4, and which are still developed.
> 
> From that webpage:
> 
> ```
> To help people who are just interested in GAP3 because they need a package
> which has not been ported to GAP4, I have prepared an easy-to install
> minimal GAP3 distribution containing an up-to-date versions of the packages.
> ```


All the above doesn't explain why you use the repackaged version and not the official GAP 3 release from [http://www.gap-system.org/Gap3/Download3/download.html](http://www.gap-system.org/Gap3/Download3/download.html)

> So this is the only place where we can find up-to-date versions of the GAP3 package *chevie* to work with unitary reflection groups and their representation theory.


No, the official `gap3r4p4` release also contains chevie.

> I fail to see what might be wrong with adding support for those packages using that "random repackaging" since I and several others need them.


Because the repackaging seems to made in a messy way, see #19164.



---

archive/issue_comments_272854.json:
```json
{
    "body": "Frank L\u00fcbeck's page [How to get CHEVIE](http://www.math.rwth-aachen.de/~CHEVIE/how-get.html) also says to download the official GAP3 release and doesn't talk about the \"repackaged\" version.",
    "created_at": "2016-02-25T13:07:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272854",
    "user": "https://github.com/jdemeyer"
}
```

Frank Lübeck's page [How to get CHEVIE](http://www.math.rwth-aachen.de/~CHEVIE/how-get.html) also says to download the official GAP3 release and doesn't talk about the "repackaged" version.



---

archive/issue_comments_272855.json:
```json
{
    "body": "Replying to [comment:5 jdemeyer]:\n> Frank L\u00fcbeck's page [How to get CHEVIE](http://www.math.rwth-aachen.de/~CHEVIE/how-get.html) also says to download the official GAP3 release and doesn't talk about the \"repackaged\" version.\n\n\nNeither this nor the above is up-to-date. Afaik, Jean Michel is the only person still actively developing *chevie* and his website is the only place where these new versions can be found. E.g., I found a small bug in chevie last month (so years after the release of `gap3r4p4`) through my Sage usage -- Jean fixed it within a few hours and posted the new version on his website.\n\nUsing any other version of gap3 and chevie will result in running into old mistakes that will slow down my understanding of research problems I compute!",
    "created_at": "2016-02-25T13:14:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272855",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:5 jdemeyer]:
> Frank Lübeck's page [How to get CHEVIE](http://www.math.rwth-aachen.de/~CHEVIE/how-get.html) also says to download the official GAP3 release and doesn't talk about the "repackaged" version.


Neither this nor the above is up-to-date. Afaik, Jean Michel is the only person still actively developing *chevie* and his website is the only place where these new versions can be found. E.g., I found a small bug in chevie last month (so years after the release of `gap3r4p4`) through my Sage usage -- Jean fixed it within a few hours and posted the new version on his website.

Using any other version of gap3 and chevie will result in running into old mistakes that will slow down my understanding of research problems I compute!



---

archive/issue_comments_272856.json:
```json
{
    "body": "> Jean fixed it within a few hours and posted the new version on his website.\n\n\nWith \"new version\", I guess you mean a new version of the repackaged GAP3?\n\nIt should be possible to just get the up-to-date chevie sources without all the extra clutter.",
    "created_at": "2016-02-25T16:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272856",
    "user": "https://github.com/jdemeyer"
}
```

> Jean fixed it within a few hours and posted the new version on his website.


With "new version", I guess you mean a new version of the repackaged GAP3?

It should be possible to just get the up-to-date chevie sources without all the extra clutter.



---

archive/issue_comments_272857.json:
```json
{
    "body": "From my email discussion with Jean Michel:\n\n```\n>> These  days I sometimes change files in other places than Chevie, so indeed\n>> each  time I change something one must take the whole distribution (however\n>> I  almost  never  change  the  C  sources).\n\n> Is the stuff that you change in other places needed for chevie to run?\n\nWell,  yes. There were  patches to the  library loaded when loading Chevie.\nSince  I maintain the whole distribution, I  decided it makes more sense to\n*do*  these  patches  to  the  library  once  and  for  all (this could fix\nundiscovered  bugs in other  packages). So the  correct behaviour of Chevie\ndepends on having my version of gap3/lib.\n```\n\n`@`Jeroen, what do you think how to proceed from here?",
    "created_at": "2016-02-26T13:21:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272857",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

From my email discussion with Jean Michel:

```
>> These  days I sometimes change files in other places than Chevie, so indeed
>> each  time I change something one must take the whole distribution (however
>> I  almost  never  change  the  C  sources).

> Is the stuff that you change in other places needed for chevie to run?

Well,  yes. There were  patches to the  library loaded when loading Chevie.
Since  I maintain the whole distribution, I  decided it makes more sense to
*do*  these  patches  to  the  library  once  and  for  all (this could fix
undiscovered  bugs in other  packages). So the  correct behaviour of Chevie
depends on having my version of gap3/lib.
```

`@`Jeroen, what do you think how to proceed from here?



---

archive/issue_comments_272858.json:
```json
{
    "body": "First of all, thanks for the clarifications!\n\nI think that somebody (either Jean Michel himself or somebody on this Sage ticket) needs to package a source-only repackaged GAP3.\n\nFurther questions to be asked to Jean Michel:\n\n1. Could he state more clearly on his website that his version is not just a repackaged GAP3, it's really a fork of GAP3 with additional fixes which are not in GAP3 proper.\n\n2. Can he provide a clean source-only repackaged GAP3?\n\n3. If no to the previous question: is he willing to host such a source-only repackaged GAP3 on his website, if it is created by some Sage contributor?",
    "created_at": "2016-02-26T13:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272858",
    "user": "https://github.com/jdemeyer"
}
```

First of all, thanks for the clarifications!

I think that somebody (either Jean Michel himself or somebody on this Sage ticket) needs to package a source-only repackaged GAP3.

Further questions to be asked to Jean Michel:

1. Could he state more clearly on his website that his version is not just a repackaged GAP3, it's really a fork of GAP3 with additional fixes which are not in GAP3 proper.

2. Can he provide a clean source-only repackaged GAP3?

3. If no to the previous question: is he willing to host such a source-only repackaged GAP3 on his website, if it is created by some Sage contributor?



---

archive/issue_comments_272859.json:
```json
{
    "body": "Replying to [comment:9 jdemeyer]:\n> I think that somebody (either Jean Michel himself or somebody on this Sage ticket) needs to package a source-only repackaged GAP3.\n\n\nI don't understand how this differs from my initial suggestion on this ticket.",
    "created_at": "2016-02-26T13:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272859",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:9 jdemeyer]:
> I think that somebody (either Jean Michel himself or somebody on this Sage ticket) needs to package a source-only repackaged GAP3.


I don't understand how this differs from my initial suggestion on this ticket.



---

archive/issue_comments_272860.json:
```json
{
    "body": "Replying to [comment:11 stumpc5]:\n> I don't understand how this differs from my initial suggestion on this ticket.\n\n\nIt does not differ. It's just that the situation has been clarified, making sure that your initial suggestion is the right thing to do.",
    "created_at": "2016-02-26T13:42:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272860",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:11 stumpc5]:
> I don't understand how this differs from my initial suggestion on this ticket.


It does not differ. It's just that the situation has been clarified, making sure that your initial suggestion is the right thing to do.



---

archive/issue_comments_272861.json:
```json
{
    "body": "Dear Christian,\nI cannot post directly on sage-trac so I reply to you.\n\nFurther questions to be asked to Jean Michel:\n\n> 1.  Could he state  more clearly on  his website that  his version is not\n> just  a repackaged GAP3, it's really a fork of GAP3 with additional fixes\n> which are not in GAP3 proper.\n\n\nOK,  I will try to be clear on my webpages. The fact is I do not distribute\na  complete GAP3 distribution (all packages,  all libraries) to save space.\nPerhaps I should distribute a complete distribution and this would obsolete\nthe St Andrews distribution -- it would go from 15MB to 70MB.\n\n> 2. Can he provide a clean source-only repackaged GAP3?\n\n\nI  could  try  if  I  understand  exactly  what this means. But this should\ncertainly  not be the  default distribution since  my distribution contains\nMac  and Windows executables (and executables  for some packages which have\nexecutables  separate from the gap3 executable). We thus have to agree to a\nname  for this  for-Sage distribution  which I  will keep separate from the\ndefault distribution.\n\n> 3.  If no to the previous question: is  he willing to host such a source-\n> only  repackaged  GAP3  on  his  website,  if  it is created by some Sage\n> contributor?\n\n\nYes.",
    "created_at": "2016-02-26T13:45:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272861",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Dear Christian,
I cannot post directly on sage-trac so I reply to you.

Further questions to be asked to Jean Michel:

> 1.  Could he state  more clearly on  his website that  his version is not
> just  a repackaged GAP3, it's really a fork of GAP3 with additional fixes
> which are not in GAP3 proper.


OK,  I will try to be clear on my webpages. The fact is I do not distribute
a  complete GAP3 distribution (all packages,  all libraries) to save space.
Perhaps I should distribute a complete distribution and this would obsolete
the St Andrews distribution -- it would go from 15MB to 70MB.

> 2. Can he provide a clean source-only repackaged GAP3?


I  could  try  if  I  understand  exactly  what this means. But this should
certainly  not be the  default distribution since  my distribution contains
Mac  and Windows executables (and executables  for some packages which have
executables  separate from the gap3 executable). We thus have to agree to a
name  for this  for-Sage distribution  which I  will keep separate from the
default distribution.

> 3.  If no to the previous question: is  he willing to host such a source-
> only  repackaged  GAP3  on  his  website,  if  it is created by some Sage
> contributor?


Yes.



---

archive/issue_comments_272862.json:
```json
{
    "body": "Replying to [comment:14 stumpc5]:\n> I  could  try  if  I  understand  exactly  what this means.\n\n\nIt means: delete all binaries (i.e. system-specific) from the package. Make sure that the package has a build system such that it can be built/installed in a standard Unix environment.\n\n> We thus have to agree to a name for this for-Sage distribution which I will keep separate from the default distribution.\n\n\nWell, I wouldn't call it a \"for-Sage distribution\". Call it a \"source distribution\". The actual filename doesn't matter much, most likely we will rename it for Sage anyway.",
    "created_at": "2016-02-26T14:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272862",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:14 stumpc5]:
> I  could  try  if  I  understand  exactly  what this means.


It means: delete all binaries (i.e. system-specific) from the package. Make sure that the package has a build system such that it can be built/installed in a standard Unix environment.

> We thus have to agree to a name for this for-Sage distribution which I will keep separate from the default distribution.


Well, I wouldn't call it a "for-Sage distribution". Call it a "source distribution". The actual filename doesn't matter much, most likely we will rename it for Sage anyway.



---

archive/issue_comments_272863.json:
```json
{
    "body": "Replying to [comment:16 jdemeyer]:\n> It means: delete all binaries (i.e. system-specific) from the package. Make sure that the package has a build system such that it can be built/installed in a standard Unix environment.\n\n\nI will try to do that.",
    "created_at": "2016-02-26T15:20:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272863",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:16 jdemeyer]:
> It means: delete all binaries (i.e. system-specific) from the package. Make sure that the package has a build system such that it can be built/installed in a standard Unix environment.


I will try to do that.



---

archive/issue_comments_272864.json:
```json
{
    "body": "Also (this is mostly a comment for Jean Michel): ideally the binary distribution would be made from the source distribution, not the other way around.",
    "created_at": "2016-02-27T10:00:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272864",
    "user": "https://github.com/jdemeyer"
}
```

Also (this is mostly a comment for Jean Michel): ideally the binary distribution would be made from the source distribution, not the other way around.



---

archive/issue_comments_272865.json:
```json
{
    "body": "I prepared a first version by\n\n1. taking the tarball from 2016-02-01 from Jean Michel's website\n2. deleting all binaries that were listed using `grep -r -m 1 \"^\"  . | grep \"Binary file\"`\n3. putting the result into a new tarball with the name `gap3-jm5-2015-02-01.tar.gz`, this can be downloaded at https://drive.google.com/file/d/0B1POEh8bhq1fLXdfTEZkZjVLOGs/view?usp=sharing\n4. preparing an optional package using this upstream tarball. This was basically a blind trip through the documentation for creating packages + looking at the old optional package patch #8906.\n\n`@`jdemeyer and `@`tscrim: I would very much appreciate if you could have a look!\n\nIf the linked tarball is okay, I would discuss with Jean Michel whether he could provide such a source distribution directly on his website.\n\n---\nNew commits:",
    "created_at": "2016-03-09T11:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272865",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

I prepared a first version by

1. taking the tarball from 2016-02-01 from Jean Michel's website
2. deleting all binaries that were listed using `grep -r -m 1 "^"  . | grep "Binary file"`
3. putting the result into a new tarball with the name `gap3-jm5-2015-02-01.tar.gz`, this can be downloaded at https://drive.google.com/file/d/0B1POEh8bhq1fLXdfTEZkZjVLOGs/view?usp=sharing
4. preparing an optional package using this upstream tarball. This was basically a blind trip through the documentation for creating packages + looking at the old optional package patch #8906.

`@`jdemeyer and `@`tscrim: I would very much appreciate if you could have a look!

If the linked tarball is okay, I would discuss with Jean Michel whether he could provide such a source distribution directly on his website.

---
New commits:



---

archive/issue_comments_272866.json:
```json
{
    "body": "This is far from an exhaustive list:\n\n```diff\n+if [[ $UNAME == 'Linux' ]]; then\n+    if [[ $(uname -m) == 'x86_64' ]]; then\n+        MAKE_COMMAND='x86linux-gcc64'\n+    else\n+        MAKE_COMMAND='x86linux-gcc'\n+    fi;\n+elif [[ $UNAME == 'Darwin' ]]; then\n+        MAKE_COMMAND='macosx-gcc'\n+fi\n```\n\nIs gap3 only supported on those architectures? In that case, it will need to be an experimental package.",
    "created_at": "2016-03-10T08:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272866",
    "user": "https://github.com/jdemeyer"
}
```

This is far from an exhaustive list:

```diff
+if [[ $UNAME == 'Linux' ]]; then
+    if [[ $(uname -m) == 'x86_64' ]]; then
+        MAKE_COMMAND='x86linux-gcc64'
+    else
+        MAKE_COMMAND='x86linux-gcc'
+    fi;
+elif [[ $UNAME == 'Darwin' ]]; then
+        MAKE_COMMAND='macosx-gcc'
+fi
```

Is gap3 only supported on those architectures? In that case, it will need to be an experimental package.



---

archive/issue_comments_272867.json:
```json
{
    "body": "You should check for errors in `spkg-install`.",
    "created_at": "2016-03-10T08:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272867",
    "user": "https://github.com/jdemeyer"
}
```

You should check for errors in `spkg-install`.



---

archive/issue_comments_272868.json:
```json
{
    "body": "Replying to [comment:23 jdemeyer]:\n> This is far from an exhaustive list:\n\n\nI get\n\n```\ngap3_source/src$ make\nusage: 'make <target>' where target is one of\n'x86linux-gcc64'   for x86linux with gcc\n'x86linux-gcc'     for x86linux with gcc in 32bit mode\n'macosx-gcc'       for mac os x with gcc\n'x86bsd-gcc'       for x86BSD with gcc\n'sun-sparc-solaris-gcc' for SUN under Solaris with GNU cc\n'sun-sparc-solaris-cc'  for SUN under Solaris with cc\n'bsd'\t\t       for others under Berkeley UNIX with cc\n\t\n\t  additional C compiler and linker flags can be passed with\n\t  'make <target> COPTS=<compiler-opts> LOPTS=<linker-opts>',\n\t  i.e., 'make x86linux-gcc COPTS=-g LOPTS=-g for debug'\n```\nand the GAP3 download page (http://www.gap-system.org/Gap3/Download3/download.html) does not say anything about other hardware.\n\nCan you tell me how to extend that `if ... elif ... fi` statement to also support these other options -- and if that is enough for the package to be `optional` rather than `experimental`?\n\nMany thanks!",
    "created_at": "2016-03-10T08:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272868",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:23 jdemeyer]:
> This is far from an exhaustive list:


I get

```
gap3_source/src$ make
usage: 'make <target>' where target is one of
'x86linux-gcc64'   for x86linux with gcc
'x86linux-gcc'     for x86linux with gcc in 32bit mode
'macosx-gcc'       for mac os x with gcc
'x86bsd-gcc'       for x86BSD with gcc
'sun-sparc-solaris-gcc' for SUN under Solaris with GNU cc
'sun-sparc-solaris-cc'  for SUN under Solaris with cc
'bsd'		       for others under Berkeley UNIX with cc
	
	  additional C compiler and linker flags can be passed with
	  'make <target> COPTS=<compiler-opts> LOPTS=<linker-opts>',
	  i.e., 'make x86linux-gcc COPTS=-g LOPTS=-g for debug'
```
and the GAP3 download page (http://www.gap-system.org/Gap3/Download3/download.html) does not say anything about other hardware.

Can you tell me how to extend that `if ... elif ... fi` statement to also support these other options -- and if that is enough for the package to be `optional` rather than `experimental`?

Many thanks!



---

archive/issue_comments_272869.json:
```json
{
    "body": "Personally, I think it is better to have a look at the `Makefile` in gap3_jm and see why it so platform-dependent. Because there is very likely no fundamental reason why the platform should be given explicitly.",
    "created_at": "2016-03-10T08:35:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272869",
    "user": "https://github.com/jdemeyer"
}
```

Personally, I think it is better to have a look at the `Makefile` in gap3_jm and see why it so platform-dependent. Because there is very likely no fundamental reason why the platform should be given explicitly.



---

archive/issue_comments_272870.json:
```json
{
    "body": "The critical part of the `Makefile` is\n\n```\nx86linux-gcc:\n\t@$(MAKE) system.o   CC=gcc  CFLAGS=\"$(COPTS) -m32 -O2 -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSYS_HAS_SIGNAL_PROTO -DSYS_HAS_IOCTL_PROTO\"\n\t@$(MAKE) gap CC=gcc CFLAGS=\"$(COPTS) -m32 -O \" SYS_FILE=system.o LOPTS=\"$(LOPTS) -m32 -static\"\n\tstrip gap\n\tmv gap ../bin/gap.x86linux\n\nx86linux-gccd:\n\t@$(MAKE) system.o   CC=gcc  CFLAGS=\"-g -m32 -O2 -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSYS_HAS_SIGNAL_PROTO -DSYS_HAS_IOCTL_PROTO\"\n\t@$(MAKE) gap CC=gcc CFLAGS=\"-g -m32 -O \" SYS_FILE=system.o LOPTS=\"-g -m32 -static\"\n\nx86linux-gcc64:\n\t@$(MAKE) system.o   CC=gcc  CFLAGS=\"$(COPTS) -O -DSYS_IS_64_BIT -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSYS_HAS_SIGNAL_PROTO -DSYS_HAS_IOCTL_PROTO\"\n\t@$(MAKE) gap CC=gcc CFLAGS=\"$(COPTS) -O -DSYS_IS_64_BIT \" SYS_FILE=system.o LOPTS=\"$(LOPTS) -static\"\n\tstrip gap\n\tmv gap ../bin/gap.x86linux64\n\nx86-dos-djgpp:\n\t@$(MAKE) system.o   CC=gcc  CFLAGS=\"$(COPTS) -DSYS_IS_MSDOS_DJGPP -DSYS_HAS_MISC_PROTO\"\n\t@$(MAKE) gapdjg.exe CC=gcc  CFLAGS=\"$(COPTS) -O1\"  SYS_FILE=system.o  LOPTS=\"$(LOPTS)\"\n\nx86-dos-djgppcross:\n\t@$(MAKE) system.o   CC=dos-gcc\tCFLAGS=\"$(COPTS) -DSYS_IS_MSDOS_DJGPP -DSYS_HAS_MISC_PROTO\"\n\t@$(MAKE) gapdjg.exe CC=dos-gcc\tCFLAGS=\"$(COPTS) -O1\"  SYS_FILE=system.o  LOPTS=\"$(LOPTS)\"\n\n# sbrk doesn't work in macosx so we need to use vm_allocate\nmacosx-gcc:\n\t@$(MAKE) system.o   CC=gcc  CFLAGS=\"$(COPTS) -m32 -DSYS_IS_MACOSX -DARCH_INCLUDE -DSYS_HAS_IOCTL_PROTO\"\n\t@$(MAKE) gap\t    CC=gcc  CFLAGS=\"$(COPTS) -m32 -O2\"  SYS_FILE=system.o  LOPTS=\"$(LOPTS) -m32\"\n\n# sbrk doesn't work in macosx so we need to use vm_allocate\n# This is using Frank Luebeck's optimized compile....but it doesn't\n# change the GAPstones for the files in ../tst\nmacosx-gcc-686-optimized:\n\t@$(MAKE) system.o   CC=gcc  CFLAGS=\"$(COPTS) -m32 -fomit-frame-pointer -pipe -fno-strength-reduce -march=i686 -falign-loops=2 -falign-jumps=2 -falign-functions=2 -DCPU=686 -g -O2 -DSYS_IS_MACOSX -DARCH_INCLUDE -DSYS_HAS_IOCTL_PROTO\"\n\t@$(MAKE) gap\t    CC=gcc  CFLAGS=\"$(COPTS) -m32 -fomit-frame-pointer -pipe -fno-strength-reduce -march=i686 -falign-loops=2 -falign-jumps=2 -falign-functions=2 -DCPU=686 -g -O3\"  SYS_FILE=system.o  LOPTS=\"$(LOPTS) -m32\"\n\nsun-sparc-solaris-cc:\n\t@$(MAKE) system.o   CC=cc  CFLAGS=\"$(COPTS) -O -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSOLARIS2\"\n\t@echo \"Don't worry about 'out of range' and 'overflow' warnings\"\n\t@echo \"(29 in total)\"\n\t@$(MAKE) gap\t    CC=cc  CFLAGS=\"$(COPTS) -O2\"  SYS_FILE=system.o  LOPTS=\"$(LOPTS)\"\n\nsun-sparc-solaris-gcc2:\t\t\t\t\t\t   \n\t@$(MAKE) system.o   CC=gcc  CFLAGS=\"$(COPTS)  -O6 -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSOLARIS2\"\t\t\t\t\t\t       \n\t@$(MAKE) gap\t    CC=gcc  CFLAGS=\"$(COPTS)  -O6\"  SYS_FILE=system.o LOPTS=\"$(LOPTS)\"\t\t\t\t\t\t\t\t     \n\n# 'sys/times.h' claims 'times' returns 'clock_t' (how shall it return -1?)\nsun-sparc-sunos-gcc:\n\t@$(MAKE) system.o   CC=gcc  CFLAGS=\"$(COPTS) -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSYS_HAS_SIGNAL_PROTO\"\n\t@$(MAKE) gap\t    CC=gcc  CFLAGS=\"$(COPTS) -O2\"  SYS_FILE=system.o  LOPTS=\"$(LOPTS)\"\n\n# 'sys/times.h' claims 'times' returns 'clock_t' (how shall it return -1?)\nsun-sparc-sunos-cc:\n\t@$(MAKE) system.o   CFLAGS=\"$(COPTS) -DSYS_IS_USG -DSYS_HAS_TIME_PROTO\"\n\t@$(MAKE) gap\t    CFLAGS=\"$(COPTS) -O\"  SYS_FILE=system.o  LOPTS=\"$(LOPTS)\"\n\nbsd:\n\t@$(MAKE) system.o   CC=$(CC)  CFLAGS=\"$(COPTS) -DSYS_IS_BSD\"\n\t@$(MAKE) gap\t    CC=$(CC)  CFLAGS=\"$(COPTS) -O\"  SYS_FILE=system.o  LOPTS=\"$(LOPTS)\"\n```\nI have no idea what of that is necessary and what can be simplified... Do you know?",
    "created_at": "2016-03-10T08:43:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272870",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

The critical part of the `Makefile` is

```
x86linux-gcc:
	@$(MAKE) system.o   CC=gcc  CFLAGS="$(COPTS) -m32 -O2 -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSYS_HAS_SIGNAL_PROTO -DSYS_HAS_IOCTL_PROTO"
	@$(MAKE) gap CC=gcc CFLAGS="$(COPTS) -m32 -O " SYS_FILE=system.o LOPTS="$(LOPTS) -m32 -static"
	strip gap
	mv gap ../bin/gap.x86linux

x86linux-gccd:
	@$(MAKE) system.o   CC=gcc  CFLAGS="-g -m32 -O2 -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSYS_HAS_SIGNAL_PROTO -DSYS_HAS_IOCTL_PROTO"
	@$(MAKE) gap CC=gcc CFLAGS="-g -m32 -O " SYS_FILE=system.o LOPTS="-g -m32 -static"

x86linux-gcc64:
	@$(MAKE) system.o   CC=gcc  CFLAGS="$(COPTS) -O -DSYS_IS_64_BIT -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSYS_HAS_SIGNAL_PROTO -DSYS_HAS_IOCTL_PROTO"
	@$(MAKE) gap CC=gcc CFLAGS="$(COPTS) -O -DSYS_IS_64_BIT " SYS_FILE=system.o LOPTS="$(LOPTS) -static"
	strip gap
	mv gap ../bin/gap.x86linux64

x86-dos-djgpp:
	@$(MAKE) system.o   CC=gcc  CFLAGS="$(COPTS) -DSYS_IS_MSDOS_DJGPP -DSYS_HAS_MISC_PROTO"
	@$(MAKE) gapdjg.exe CC=gcc  CFLAGS="$(COPTS) -O1"  SYS_FILE=system.o  LOPTS="$(LOPTS)"

x86-dos-djgppcross:
	@$(MAKE) system.o   CC=dos-gcc	CFLAGS="$(COPTS) -DSYS_IS_MSDOS_DJGPP -DSYS_HAS_MISC_PROTO"
	@$(MAKE) gapdjg.exe CC=dos-gcc	CFLAGS="$(COPTS) -O1"  SYS_FILE=system.o  LOPTS="$(LOPTS)"

# sbrk doesn't work in macosx so we need to use vm_allocate
macosx-gcc:
	@$(MAKE) system.o   CC=gcc  CFLAGS="$(COPTS) -m32 -DSYS_IS_MACOSX -DARCH_INCLUDE -DSYS_HAS_IOCTL_PROTO"
	@$(MAKE) gap	    CC=gcc  CFLAGS="$(COPTS) -m32 -O2"  SYS_FILE=system.o  LOPTS="$(LOPTS) -m32"

# sbrk doesn't work in macosx so we need to use vm_allocate
# This is using Frank Luebeck's optimized compile....but it doesn't
# change the GAPstones for the files in ../tst
macosx-gcc-686-optimized:
	@$(MAKE) system.o   CC=gcc  CFLAGS="$(COPTS) -m32 -fomit-frame-pointer -pipe -fno-strength-reduce -march=i686 -falign-loops=2 -falign-jumps=2 -falign-functions=2 -DCPU=686 -g -O2 -DSYS_IS_MACOSX -DARCH_INCLUDE -DSYS_HAS_IOCTL_PROTO"
	@$(MAKE) gap	    CC=gcc  CFLAGS="$(COPTS) -m32 -fomit-frame-pointer -pipe -fno-strength-reduce -march=i686 -falign-loops=2 -falign-jumps=2 -falign-functions=2 -DCPU=686 -g -O3"  SYS_FILE=system.o  LOPTS="$(LOPTS) -m32"

sun-sparc-solaris-cc:
	@$(MAKE) system.o   CC=cc  CFLAGS="$(COPTS) -O -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSOLARIS2"
	@echo "Don't worry about 'out of range' and 'overflow' warnings"
	@echo "(29 in total)"
	@$(MAKE) gap	    CC=cc  CFLAGS="$(COPTS) -O2"  SYS_FILE=system.o  LOPTS="$(LOPTS)"

sun-sparc-solaris-gcc2:						   
	@$(MAKE) system.o   CC=gcc  CFLAGS="$(COPTS)  -O6 -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSOLARIS2"						       
	@$(MAKE) gap	    CC=gcc  CFLAGS="$(COPTS)  -O6"  SYS_FILE=system.o LOPTS="$(LOPTS)"								     

# 'sys/times.h' claims 'times' returns 'clock_t' (how shall it return -1?)
sun-sparc-sunos-gcc:
	@$(MAKE) system.o   CC=gcc  CFLAGS="$(COPTS) -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSYS_HAS_SIGNAL_PROTO"
	@$(MAKE) gap	    CC=gcc  CFLAGS="$(COPTS) -O2"  SYS_FILE=system.o  LOPTS="$(LOPTS)"

# 'sys/times.h' claims 'times' returns 'clock_t' (how shall it return -1?)
sun-sparc-sunos-cc:
	@$(MAKE) system.o   CFLAGS="$(COPTS) -DSYS_IS_USG -DSYS_HAS_TIME_PROTO"
	@$(MAKE) gap	    CFLAGS="$(COPTS) -O"  SYS_FILE=system.o  LOPTS="$(LOPTS)"

bsd:
	@$(MAKE) system.o   CC=$(CC)  CFLAGS="$(COPTS) -DSYS_IS_BSD"
	@$(MAKE) gap	    CC=$(CC)  CFLAGS="$(COPTS) -O"  SYS_FILE=system.o  LOPTS="$(LOPTS)"
```
I have no idea what of that is necessary and what can be simplified... Do you know?



---

archive/issue_comments_272871.json:
```json
{
    "body": "Does this `Makefile` come from `gap` upstream or from `gap3_jm`?\n\nTo start with, I would remove these: `mv gap ../bin/gap.x86linux`. Then at least the name of the executable won't be system-dependent.\n\nSecond, are the `x86linux-gcc` and `x86linux-gcc64` rules really `x86`-specific? At first sight, this doesn't seem to be the case: I think it is just 32-bit Linux and 64-bit Linux.",
    "created_at": "2016-03-10T13:10:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272871",
    "user": "https://github.com/jdemeyer"
}
```

Does this `Makefile` come from `gap` upstream or from `gap3_jm`?

To start with, I would remove these: `mv gap ../bin/gap.x86linux`. Then at least the name of the executable won't be system-dependent.

Second, are the `x86linux-gcc` and `x86linux-gcc64` rules really `x86`-specific? At first sight, this doesn't seem to be the case: I think it is just 32-bit Linux and 64-bit Linux.



---

archive/issue_comments_272872.json:
```json
{
    "body": "This `Makefile` comes from `gap3_jm`, the `Makefile` in the last official version is this + even more options.\n\n> To start with, I would remove these: mv gap ../bin/gap.x86linux. Then at least the name of the executable won't be system-dependent.\n\n\nOkay, no problem.\n\n> Second, are the x86linux-gcc and x86linux-gcc64 rules really x86-specific? At first sight, this doesn't seem to be the case: I think it is just 32-bit Linux and 64-bit Linux.\n\n\nIs there a way to find that out? I compiled `GAP3` for the first time ever to get this optional package.",
    "created_at": "2016-03-10T13:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272872",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

This `Makefile` comes from `gap3_jm`, the `Makefile` in the last official version is this + even more options.

> To start with, I would remove these: mv gap ../bin/gap.x86linux. Then at least the name of the executable won't be system-dependent.


Okay, no problem.

> Second, are the x86linux-gcc and x86linux-gcc64 rules really x86-specific? At first sight, this doesn't seem to be the case: I think it is just 32-bit Linux and 64-bit Linux.


Is there a way to find that out? I compiled `GAP3` for the first time ever to get this optional package.



---

archive/issue_comments_272873.json:
```json
{
    "body": "Replying to [comment:29 stumpc5]:\n> Is there a way to find that out?\n\n\nAssume that it works like I said and we'll see if it breaks.",
    "created_at": "2016-03-10T13:24:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272873",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:29 stumpc5]:
> Is there a way to find that out?


Assume that it works like I said and we'll see if it breaks.



---

archive/issue_comments_272874.json:
```json
{
    "body": "I wanted to modify the `Makefile` accordingly, but it didn't work along the lines\n\n```\nARCH = $(shell getconf LONG_BIT)\nUNAME_S = $(shell uname -s)\n\nifeq ($(UNAME_S),Linux)\n    ifeq ($(ARCH),32)\n        # do foo\n    endif\n    ifeq ($(ARCH),64)\n        # do bar\n    endif\nendif\nifeq ($(UNAME_S),Darwin)\n    # do foobar\nendif\n\nunknown:\n    ...\n```\nbut I got many different type of errors that I wasn't able to resolve. Some were caused by tabs vs. spaces, others by the recursive calling of the makefile. Could you help me getting it correct?",
    "created_at": "2016-03-11T08:57:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272874",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

I wanted to modify the `Makefile` accordingly, but it didn't work along the lines

```
ARCH = $(shell getconf LONG_BIT)
UNAME_S = $(shell uname -s)

ifeq ($(UNAME_S),Linux)
    ifeq ($(ARCH),32)
        # do foo
    endif
    ifeq ($(ARCH),64)
        # do bar
    endif
endif
ifeq ($(UNAME_S),Darwin)
    # do foobar
endif

unknown:
    ...
```
but I got many different type of errors that I wasn't able to resolve. Some were caused by tabs vs. spaces, others by the recursive calling of the makefile. Could you help me getting it correct?



---

archive/issue_comments_272875.json:
```json
{
    "body": "Replying to [comment:31 stumpc5]:\n> I wanted to modify the `Makefile` accordingly, but it didn't work along the lines\n\n\nOkay, I think I got it now, I had to further mess with tabs vs spaces... I am going to upload a new version soon.",
    "created_at": "2016-03-11T10:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272875",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:31 stumpc5]:
> I wanted to modify the `Makefile` accordingly, but it didn't work along the lines


Okay, I think I got it now, I had to further mess with tabs vs spaces... I am going to upload a new version soon.



---

archive/issue_comments_272876.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-11T10:43:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272876",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272877.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-11T10:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272877",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272878.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-11T10:50:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272878",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272879.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-03-11T10:51:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272879",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_272880.json:
```json
{
    "body": "I took care of the two suggestions by Jeroen and now think it is ready for review -- many thanks!",
    "created_at": "2016-03-11T10:51:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272880",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

I took care of the two suggestions by Jeroen and now think it is ready for review -- many thanks!



---

archive/issue_comments_272881.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-03-11T11:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272881",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_272882.json:
```json
{
    "body": "`spkg-check` doesn't actually do anything...\n\nDoes GAP3 have a testsuite?",
    "created_at": "2016-03-11T11:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272882",
    "user": "https://github.com/jdemeyer"
}
```

`spkg-check` doesn't actually do anything...

Does GAP3 have a testsuite?



---

archive/issue_comments_272883.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-11T11:07:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272883",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272884.json:
```json
{
    "body": "I installed it once on OSX, then I decided to redo it with SAGE_CHECK=yes, and got\n\n```\n###########################################################\n#  Building complete, you can run GAP3 from './../bin/gap3'\n###########################################################\nInstalling (copying) files...\ncp: symlink: me: File exists\ncp: symlink: qme: File exists\nError installing (copying) gap3 files.\n```\n\nThis comes from copying executables of ve package, `me` and `qme` somewhere; probably by the ve installation script.\n\nyou need to use the corresponding flag, `-f`, to avoid this trouble.",
    "created_at": "2016-03-16T23:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272884",
    "user": "https://github.com/dimpase"
}
```

I installed it once on OSX, then I decided to redo it with SAGE_CHECK=yes, and got

```
###########################################################
#  Building complete, you can run GAP3 from './../bin/gap3'
###########################################################
Installing (copying) files...
cp: symlink: me: File exists
cp: symlink: qme: File exists
Error installing (copying) gap3 files.
```

This comes from copying executables of ve package, `me` and `qme` somewhere; probably by the ve installation script.

you need to use the corresponding flag, `-f`, to avoid this trouble.



---

archive/issue_comments_272885.json:
```json
{
    "body": "It would also be great if you host the tarball on a \"real\" server. Some browsers would automatically untar this file, and this is no good. So I had to get the tarball on a Linux machine, and copy it to the OSX machine for testing (oh the joy of this...)\n\nAnd the release manager will be very, very unhappy, too, without a wget-able link for the tarball.",
    "created_at": "2016-03-16T23:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272885",
    "user": "https://github.com/dimpase"
}
```

It would also be great if you host the tarball on a "real" server. Some browsers would automatically untar this file, and this is no good. So I had to get the tarball on a Linux machine, and copy it to the OSX machine for testing (oh the joy of this...)

And the release manager will be very, very unhappy, too, without a wget-able link for the tarball.



---

archive/issue_comments_272886.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-17T10:44:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272886",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272887.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-17T10:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272887",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_272888.json:
```json
{
    "body": "Replying to [comment:40 dimpase]:\n\nThanks for the testing!\n\n> I installed it once on OSX, then I decided to redo it with SAGE_CHECK=yes\n\n\nI was not able to reproduce the error, but I added the `-f` flag to the `cp` command. Does that solve the issue?\n\n> And the release manager will be very, very unhappy, too, without a wget-able link for the tarball.\n\n\nthat's very true, I changed the download accordingly.",
    "created_at": "2016-03-17T10:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272888",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:40 dimpase]:

Thanks for the testing!

> I installed it once on OSX, then I decided to redo it with SAGE_CHECK=yes


I was not able to reproduce the error, but I added the `-f` flag to the `cp` command. Does that solve the issue?

> And the release manager will be very, very unhappy, too, without a wget-able link for the tarball.


that's very true, I changed the download accordingly.



---

archive/issue_comments_272889.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-03-17T11:00:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272889",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_272890.json:
```json
{
    "body": "Replying to [comment:44 jdemeyer]:\n\nI only copied the skpg-check from the first version of the gap3 package. What should I change there -- or can I even remove it?",
    "created_at": "2016-03-17T11:12:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272890",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:44 jdemeyer]:

I only copied the skpg-check from the first version of the gap3 package. What should I change there -- or can I even remove it?



---

archive/issue_comments_272891.json:
```json
{
    "body": "Does GAP3 have a testsuite?",
    "created_at": "2016-03-17T11:18:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272891",
    "user": "https://github.com/jdemeyer"
}
```

Does GAP3 have a testsuite?



---

archive/issue_comments_272892.json:
```json
{
    "body": "I am not sure, but I don't think so.",
    "created_at": "2016-03-17T11:20:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272892",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

I am not sure, but I don't think so.



---

archive/issue_comments_272893.json:
```json
{
    "body": "If not, then remove `spkg-check`.",
    "created_at": "2016-03-17T12:49:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272893",
    "user": "https://github.com/jdemeyer"
}
```

If not, then remove `spkg-check`.



---

archive/issue_comments_272894.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-17T13:45:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272894",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272895.json:
```json
{
    "body": "done.\n\n---\nNew commits:",
    "created_at": "2016-03-17T13:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272895",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

done.

---
New commits:



---

archive/issue_comments_272896.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-17T13:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272896",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_272897.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-03-17T22:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272897",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_272898.json:
```json
{
    "body": "there is some weirdness with installation of GAP packages. There are packages that need to be compiled, e.g. ve.\nAlso, there  some weird dangling symlinks in ve/bin:\n\n```\n...pkg/ve/bin$ ls -l\ntotal 48\nlrwxr-xr-x  1 dima  admin    2 Mar  9 08:38 me.exe -> me\n-rw-r--r--  1 dima  admin  115 Aug  3  2014 me.sgl\n-rw-r--r--  1 dima  admin  804 Aug  3  2014 me.sh\nlrwxr-xr-x  1 dima  admin    3 Mar  9 08:38 qme.exe -> qme\n-rw-r--r--  1 dima  admin  773 Aug  3  2014 qme.sh\n-rw-r--r--  1 dima  admin  773 Aug  3  2014 zme.sh\n```\nwhen I see \"building complete\" message, only the main GAP system was built, but no packages. Then I see\n\n```\nmv gap ../bin/gap3\n###########################################################\n#  Building complete, you can run GAP3 from './../bin/gap3'\n###########################################################\nInstalling (copying) files...\ncp: pkg/ve/bin/me.exe: No such file or directory\ncp: pkg/ve/bin/qme.exe: No such file or directory\nError installing (copying) gap3 files.\n```\n\n\n\nI also notice that gcc is called with option -m32 on the 64-bit OSX 10.11:\n\n```\n...\ngcc -m32 -O2   -c -o coding.o coding.c\ngcc -m32 -o gap gap.o system.o gasman.o scanner.o idents.o read.o eval.o integer.o rational.o cyclotom.o unknown.o finfield.o polynom.o permutat.o word.o costab.o tietze.o agcollec.o aggroup.o pcpresen.o list.o plist.o set.o vector.o vecffe.o range.o blister.o string.o record.o statemen.o function.o coding.o\nld: warning: ignoring file /Volumes/Sage/sage/local/lib/libgcc_ext.10.5.dylib, missing required architecture i386 in file /Volumes/Sage/sage/local/lib/libgcc_ext.10.5.dylib (1 slices)\n```\nand this looks wrong.",
    "created_at": "2016-03-17T22:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272898",
    "user": "https://github.com/dimpase"
}
```

there is some weirdness with installation of GAP packages. There are packages that need to be compiled, e.g. ve.
Also, there  some weird dangling symlinks in ve/bin:

```
...pkg/ve/bin$ ls -l
total 48
lrwxr-xr-x  1 dima  admin    2 Mar  9 08:38 me.exe -> me
-rw-r--r--  1 dima  admin  115 Aug  3  2014 me.sgl
-rw-r--r--  1 dima  admin  804 Aug  3  2014 me.sh
lrwxr-xr-x  1 dima  admin    3 Mar  9 08:38 qme.exe -> qme
-rw-r--r--  1 dima  admin  773 Aug  3  2014 qme.sh
-rw-r--r--  1 dima  admin  773 Aug  3  2014 zme.sh
```
when I see "building complete" message, only the main GAP system was built, but no packages. Then I see

```
mv gap ../bin/gap3
###########################################################
#  Building complete, you can run GAP3 from './../bin/gap3'
###########################################################
Installing (copying) files...
cp: pkg/ve/bin/me.exe: No such file or directory
cp: pkg/ve/bin/qme.exe: No such file or directory
Error installing (copying) gap3 files.
```



I also notice that gcc is called with option -m32 on the 64-bit OSX 10.11:

```
...
gcc -m32 -O2   -c -o coding.o coding.c
gcc -m32 -o gap gap.o system.o gasman.o scanner.o idents.o read.o eval.o integer.o rational.o cyclotom.o unknown.o finfield.o polynom.o permutat.o word.o costab.o tietze.o agcollec.o aggroup.o pcpresen.o list.o plist.o set.o vector.o vecffe.o range.o blister.o string.o record.o statemen.o function.o coding.o
ld: warning: ignoring file /Volumes/Sage/sage/local/lib/libgcc_ext.10.5.dylib, missing required architecture i386 in file /Volumes/Sage/sage/local/lib/libgcc_ext.10.5.dylib (1 slices)
```
and this looks wrong.



---

archive/issue_comments_272899.json:
```json
{
    "body": "I think it is best to never use `-m32` or `-m64` options and use the GCC default. That is how most other packages are compiled and that seems to work fine.",
    "created_at": "2016-03-18T08:36:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272899",
    "user": "https://github.com/jdemeyer"
}
```

I think it is best to never use `-m32` or `-m64` options and use the GCC default. That is how most other packages are compiled and that seems to work fine.



---

archive/issue_comments_272900.json:
```json
{
    "body": "Replying to [comment:52 jdemeyer]:\n> I think it is best to never use `-m32` or `-m64` options and use the GCC default. That is how most other packages are compiled and that seems to work fine.\n\n\nthat makefile is 20+ years old, with minor tweaks only, you know...\n\nAnd as I already said, it does not build packages. (Even on GAP4 it is not the case). Each package that needs something compiled has its own makefile, and one needs to run make in each of the corresponding subdirectories in pkg/.",
    "created_at": "2016-03-18T10:45:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272900",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:52 jdemeyer]:
> I think it is best to never use `-m32` or `-m64` options and use the GCC default. That is how most other packages are compiled and that seems to work fine.


that makefile is 20+ years old, with minor tweaks only, you know...

And as I already said, it does not build packages. (Even on GAP4 it is not the case). Each package that needs something compiled has its own makefile, and one needs to run make in each of the corresponding subdirectories in pkg/.



---

archive/issue_comments_272901.json:
```json
{
    "body": "Replying to [comment:53 dimpase]:\n> Replying to [comment:52 jdemeyer]:\n> > I think it is best to never use `-m32` or `-m64` options and use the GCC default. That is how most other packages are compiled and that seems to work fine.\n\n> \n> that makefile is 20+ years old, with minor tweaks only, you know...\n\nThat doesn't really matter. It's trivial to just remove `-m32` and `-m64` everywhere.",
    "created_at": "2016-03-18T11:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272901",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:53 dimpase]:
> Replying to [comment:52 jdemeyer]:
> > I think it is best to never use `-m32` or `-m64` options and use the GCC default. That is how most other packages are compiled and that seems to work fine.

> 
> that makefile is 20+ years old, with minor tweaks only, you know...

That doesn't really matter. It's trivial to just remove `-m32` and `-m64` everywhere.



---

archive/issue_comments_272902.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-19T07:19:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272902",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272903.json:
```json
{
    "body": "to [comment:54 jdemeyer]:\n> That doesn't really matter. It's trivial to just remove `-m32` and `-m64` everywhere.\n\n\nI updated the `Makefile` and removed all `-m32` options. The two `make`s for linux are now\n\n```\n@$(MAKE) system.o   CC=gcc  CFLAGS=\"$(COPTS) -O -DSYS_IS_64_BIT -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSYS_HAS_SIGNAL_PROTO -DSYS_HAS_IOCTL_PROTO\"\n@$(MAKE) gap CC=gcc CFLAGS=\"$(COPTS) -O -DSYS_IS_64_BIT \" SYS_FILE=system.o LOPTS=\"$(LOPTS) -static\"\n```\nvs\n\n```\n@$(MAKE) system.o   CC=gcc  CFLAGS=\"$(COPTS) -O2 -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSYS_HAS_SIGNAL_PROTO -DSYS_HAS_IOCTL_PROTO\"\n@$(MAKE) gap CC=gcc CFLAGS=\"$(COPTS) -O \" SYS_FILE=system.o LOPTS=\"$(LOPTS) -static\"\n```\n\nDo you know if I can also remove the `-O -DSYS_IS_64_BIT` vs `-O2` option to completely get rid of the distinction between 32 and 64 bit versions ?",
    "created_at": "2016-03-19T07:22:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272903",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

to [comment:54 jdemeyer]:
> That doesn't really matter. It's trivial to just remove `-m32` and `-m64` everywhere.


I updated the `Makefile` and removed all `-m32` options. The two `make`s for linux are now

```
@$(MAKE) system.o   CC=gcc  CFLAGS="$(COPTS) -O -DSYS_IS_64_BIT -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSYS_HAS_SIGNAL_PROTO -DSYS_HAS_IOCTL_PROTO"
@$(MAKE) gap CC=gcc CFLAGS="$(COPTS) -O -DSYS_IS_64_BIT " SYS_FILE=system.o LOPTS="$(LOPTS) -static"
```
vs

```
@$(MAKE) system.o   CC=gcc  CFLAGS="$(COPTS) -O2 -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSYS_HAS_SIGNAL_PROTO -DSYS_HAS_IOCTL_PROTO"
@$(MAKE) gap CC=gcc CFLAGS="$(COPTS) -O " SYS_FILE=system.o LOPTS="$(LOPTS) -static"
```

Do you know if I can also remove the `-O -DSYS_IS_64_BIT` vs `-O2` option to completely get rid of the distinction between 32 and 64 bit versions ?



---

archive/issue_comments_272904.json:
```json
{
    "body": "Replying to [comment:51 dimpase]:\n> there is some weirdness with installation of GAP packages. There are packages that need to be compiled, e.g. ve.\n> Also, there  some weird dangling symlinks in ve/bin:\n\n\nJean Michel wrote about deleting the binaries of the packages:\n\n```\nYou can get rid of all of them since they are little-used packages, or the\nbinaries provide additionnal functionality and are not essential.\n```\nSo I decided to not touch that part -- if the functionality is wanted at some point, we can still try to figure how to handle them properly...",
    "created_at": "2016-03-19T07:26:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272904",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:51 dimpase]:
> there is some weirdness with installation of GAP packages. There are packages that need to be compiled, e.g. ve.
> Also, there  some weird dangling symlinks in ve/bin:


Jean Michel wrote about deleting the binaries of the packages:

```
You can get rid of all of them since they are little-used packages, or the
binaries provide additionnal functionality and are not essential.
```
So I decided to not touch that part -- if the functionality is wanted at some point, we can still try to figure how to handle them properly...



---

archive/issue_comments_272905.json:
```json
{
    "body": "Replying to [comment:56 stumpc5]:\n>  to [comment:54 jdemeyer]:\n\n> > That doesn't really matter. It's trivial to just remove `-m32` and `-m64` everywhere.\n> \n> I updated the `Makefile` and removed all `-m32` options. The two `make`s for linux are now\n> \n> ```\n> @$(MAKE) system.o   CC=gcc  CFLAGS=\"$(COPTS) -O -DSYS_IS_64_BIT -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSYS_HAS_SIGNAL_PROTO -DSYS_HAS_IOCTL_PROTO\"\n> @$(MAKE) gap CC=gcc CFLAGS=\"$(COPTS) -O -DSYS_IS_64_BIT \" SYS_FILE=system.o LOPTS=\"$(LOPTS) -static\"\n> ```\n> vs\n> \n> ```\n> @$(MAKE) system.o   CC=gcc  CFLAGS=\"$(COPTS) -O2 -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSYS_HAS_SIGNAL_PROTO -DSYS_HAS_IOCTL_PROTO\"\n> @$(MAKE) gap CC=gcc CFLAGS=\"$(COPTS) -O \" SYS_FILE=system.o LOPTS=\"$(LOPTS) -static\"\n> ```\n> \n> Do you know if I can also remove the `-O -DSYS_IS_64_BIT` vs `-O2` option to completely get rid of the distinction between 32 and 64 bit versions ?\n\n\nwhile `-O2` is almost harmless (OK, the resulting executable might get slower), `SYS_IS_64_BIT` and other `SYS_` variables are poor man's way to pass system parameters to the source code; if you just blindly remove them, you might easily get broken code, as the default might be, say, 32-bit, and this will break low-level stuff that is not platform-independent in this sense. (Have a look at the source, some of these variables are used very heavily). \n\nA proper way to handle these flags is to figure out their values in spkg-install; you can certainly find tests for system being 32- or 64-bit in other spkg-install scripts.\n\nSome other `SYS_` things are clearly obsolete, on the other hand, i.e. they specify whether or not system has a feature certainly present on any system supported by Sage...",
    "created_at": "2016-03-19T08:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272905",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:56 stumpc5]:
>  to [comment:54 jdemeyer]:

> > That doesn't really matter. It's trivial to just remove `-m32` and `-m64` everywhere.
> 
> I updated the `Makefile` and removed all `-m32` options. The two `make`s for linux are now
> 
> ```
> @$(MAKE) system.o   CC=gcc  CFLAGS="$(COPTS) -O -DSYS_IS_64_BIT -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSYS_HAS_SIGNAL_PROTO -DSYS_HAS_IOCTL_PROTO"
> @$(MAKE) gap CC=gcc CFLAGS="$(COPTS) -O -DSYS_IS_64_BIT " SYS_FILE=system.o LOPTS="$(LOPTS) -static"
> ```
> vs
> 
> ```
> @$(MAKE) system.o   CC=gcc  CFLAGS="$(COPTS) -O2 -DSYS_IS_USG -DSYS_HAS_TIME_PROTO -DSYS_HAS_SIGNAL_PROTO -DSYS_HAS_IOCTL_PROTO"
> @$(MAKE) gap CC=gcc CFLAGS="$(COPTS) -O " SYS_FILE=system.o LOPTS="$(LOPTS) -static"
> ```
> 
> Do you know if I can also remove the `-O -DSYS_IS_64_BIT` vs `-O2` option to completely get rid of the distinction between 32 and 64 bit versions ?


while `-O2` is almost harmless (OK, the resulting executable might get slower), `SYS_IS_64_BIT` and other `SYS_` variables are poor man's way to pass system parameters to the source code; if you just blindly remove them, you might easily get broken code, as the default might be, say, 32-bit, and this will break low-level stuff that is not platform-independent in this sense. (Have a look at the source, some of these variables are used very heavily). 

A proper way to handle these flags is to figure out their values in spkg-install; you can certainly find tests for system being 32- or 64-bit in other spkg-install scripts.

Some other `SYS_` things are clearly obsolete, on the other hand, i.e. they specify whether or not system has a feature certainly present on any system supported by Sage...



---

archive/issue_comments_272906.json:
```json
{
    "body": "Replying to [comment:58 dimpase]:\n> A proper way to handle these flags is to figure out their values in spkg-install; you can certainly find tests for system being 32- or 64-bit in other spkg-install scripts.\n> \n> Some other `SYS_` things are clearly obsolete, on the other hand, i.e. they specify whether or not system has a feature certainly present on any system supported by Sage...\n\n\nOkay, I would then rather leave things as they are. Moving the testing to `spkg-install` might be cleaner, but the `Makefile` is designed to call itself and I would prefer not to mess with it even more.",
    "created_at": "2016-03-19T08:25:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272906",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:58 dimpase]:
> A proper way to handle these flags is to figure out their values in spkg-install; you can certainly find tests for system being 32- or 64-bit in other spkg-install scripts.
> 
> Some other `SYS_` things are clearly obsolete, on the other hand, i.e. they specify whether or not system has a feature certainly present on any system supported by Sage...


Okay, I would then rather leave things as they are. Moving the testing to `spkg-install` might be cleaner, but the `Makefile` is designed to call itself and I would prefer not to mess with it even more.



---

archive/issue_comments_272907.json:
```json
{
    "body": "Replying to [comment:57 stumpc5]:\n> Replying to [comment:51 dimpase]:\n> > there is some weirdness with installation of GAP packages. There are packages that need to be compiled, e.g. ve.\n> > Also, there  some weird dangling symlinks in ve/bin:\n\n> \n> Jean Michel wrote about deleting the binaries of the packages:\n> \n> ```\n> You can get rid of all of them since they are little-used packages, or the\n> binaries provide additionnal functionality and are not essential.\n> ```\n> So I decided to not touch that part -- if the functionality is wanted at some point, we can still try to figure how to handle them properly...\n\n\nwell, \"handle them properly\" is not straightforward. Actually, I did port ve and anusq to modern world systems; I do use them in my research; the main issue was the reliance on an very old obsolete version of GMP. See\nhttp://github.com/gap-packages/ve and https://github.com/dimpase/anusq\n\nAnd Simon King has a lot of experience with meataxe - maybe he can tell you how to deal with it.\n\n(anusq, meataxe, and ve are all useless without their binary components).",
    "created_at": "2016-03-19T08:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272907",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:57 stumpc5]:
> Replying to [comment:51 dimpase]:
> > there is some weirdness with installation of GAP packages. There are packages that need to be compiled, e.g. ve.
> > Also, there  some weird dangling symlinks in ve/bin:

> 
> Jean Michel wrote about deleting the binaries of the packages:
> 
> ```
> You can get rid of all of them since they are little-used packages, or the
> binaries provide additionnal functionality and are not essential.
> ```
> So I decided to not touch that part -- if the functionality is wanted at some point, we can still try to figure how to handle them properly...


well, "handle them properly" is not straightforward. Actually, I did port ve and anusq to modern world systems; I do use them in my research; the main issue was the reliance on an very old obsolete version of GMP. See
http://github.com/gap-packages/ve and https://github.com/dimpase/anusq

And Simon King has a lot of experience with meataxe - maybe he can tell you how to deal with it.

(anusq, meataxe, and ve are all useless without their binary components).



---

archive/issue_comments_272908.json:
```json
{
    "body": "Replying to [comment:60 dimpase]:\n> And Simon King has a lot of experience with meataxe - maybe he can tell you how to deal with it.\n\n\nMy only experience is to provide an optional meataxe package for Sage. It does install libmtx.a and meataxe.h and the meataxe binaries. I don't know if that's enough for GAP to pick it up. Also note that I currently try to upgrade the optional meataxe package to fix some build issues --- see #20136.",
    "created_at": "2016-03-19T12:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272908",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:60 dimpase]:
> And Simon King has a lot of experience with meataxe - maybe he can tell you how to deal with it.


My only experience is to provide an optional meataxe package for Sage. It does install libmtx.a and meataxe.h and the meataxe binaries. I don't know if that's enough for GAP to pick it up. Also note that I currently try to upgrade the optional meataxe package to fix some build issues --- see #20136.



---

archive/issue_comments_272909.json:
```json
{
    "body": "Replying to [comment:61 SimonKing]:\n> Replying to [comment:60 dimpase]:\n> > And Simon King has a lot of experience with meataxe - maybe he can tell you how to deal with it.\n\n> \n> My only experience is to provide an optional meataxe package for Sage. It does install libmtx.a and meataxe.h and the meataxe binaries. I don't know if that's enough for GAP to pick it up. Also note that I currently try to upgrade the optional meataxe package to fix some build issues --- see #20136.\n\n\nthey ship meataxe version 2.2.3. How far from this your meataxe is?\nIn principle, GAP3 meataxe needs executables, that's all.",
    "created_at": "2016-03-19T14:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272909",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:61 SimonKing]:
> Replying to [comment:60 dimpase]:
> > And Simon King has a lot of experience with meataxe - maybe he can tell you how to deal with it.

> 
> My only experience is to provide an optional meataxe package for Sage. It does install libmtx.a and meataxe.h and the meataxe binaries. I don't know if that's enough for GAP to pick it up. Also note that I currently try to upgrade the optional meataxe package to fix some build issues --- see #20136.


they ship meataxe version 2.2.3. How far from this your meataxe is?
In principle, GAP3 meataxe needs executables, that's all.



---

archive/issue_comments_272910.json:
```json
{
    "body": "Replying to [comment:62 dimpase]:\n> they ship meataxe version 2.2.3. How far from this your meataxe is?\n\n\nNow that's ironic.\n\nIn my good old-style group cohomology spkg, I used meataxe-2.2.4, which is identical with version 2.2.3 except for its licence, which is about a decade old.\n\nBut old-style spkgs got broken on purpose, hence, I now try to create a new style cohomology spkg, and while I am at it I try to use a more recent version of meataxe. The current release (which is several years old) is version 2.4.24, and the current snapshot (which also includes one of my patches) is 2.5.0. \n\n> In principle, GAP3 meataxe needs executables, that's all.\n\n\nWhat is the difference between 2.2.4 and 2.4.24? Well, the good news is that the executables kept their names, and the storage format has not changed. Hence, if GAP3 merely needs the executables then using the new meataxe should be fine.\n\nThe bad news --- for me! --- is that basically all function names and all type names have changed, the offset of counting matrix rows and columns has changed (in 2.2.4 it started counting with 1, now it starts with 0), and occasionally the semantics of the functions has changed as well. That's why creating a group cohomology package based on the new meataxe is a pain in the neck: I need to rebase someone else's C code, which thus is even more difficult than rebasing my own code.\n\nSigh.",
    "created_at": "2016-03-19T20:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272910",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:62 dimpase]:
> they ship meataxe version 2.2.3. How far from this your meataxe is?


Now that's ironic.

In my good old-style group cohomology spkg, I used meataxe-2.2.4, which is identical with version 2.2.3 except for its licence, which is about a decade old.

But old-style spkgs got broken on purpose, hence, I now try to create a new style cohomology spkg, and while I am at it I try to use a more recent version of meataxe. The current release (which is several years old) is version 2.4.24, and the current snapshot (which also includes one of my patches) is 2.5.0. 

> In principle, GAP3 meataxe needs executables, that's all.


What is the difference between 2.2.4 and 2.4.24? Well, the good news is that the executables kept their names, and the storage format has not changed. Hence, if GAP3 merely needs the executables then using the new meataxe should be fine.

The bad news --- for me! --- is that basically all function names and all type names have changed, the offset of counting matrix rows and columns has changed (in 2.2.4 it started counting with 1, now it starts with 0), and occasionally the semantics of the functions has changed as well. That's why creating a group cohomology package based on the new meataxe is a pain in the neck: I need to rebase someone else's C code, which thus is even more difficult than rebasing my own code.

Sigh.



---

archive/issue_comments_272911.json:
```json
{
    "body": "The tarball should extract to its own top-level directory, instead of having many top-level directories like `doc` and `src`.\n\nAnd the strangest thing: the tarball even contains a broken copy of itself!",
    "created_at": "2016-03-21T11:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272911",
    "user": "https://github.com/jdemeyer"
}
```

The tarball should extract to its own top-level directory, instead of having many top-level directories like `doc` and `src`.

And the strangest thing: the tarball even contains a broken copy of itself!



---

archive/issue_comments_272912.json:
```json
{
    "body": "The current tarball still contains binaries: `src/*.o` and `bin/gap.x86linux64` and `bin/gap3`.",
    "created_at": "2016-03-21T11:31:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272912",
    "user": "https://github.com/jdemeyer"
}
```

The current tarball still contains binaries: `src/*.o` and `bin/gap.x86linux64` and `bin/gap3`.



---

archive/issue_comments_272913.json:
```json
{
    "body": "This should go the description, it is not an !Update/Build Instruction:\n\n```\n## Special Update/Build Instructions\n\nThis is a minimal GAP3 distribution containing packages that have\nno equivalent in GAP4.\n```",
    "created_at": "2016-03-21T11:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272913",
    "user": "https://github.com/jdemeyer"
}
```

This should go the description, it is not an !Update/Build Instruction:

```
## Special Update/Build Instructions

This is a minimal GAP3 distribution containing packages that have
no equivalent in GAP4.
```



---

archive/issue_comments_272914.json:
```json
{
    "body": "You really need to document how you obtained the tarball. Ideally, it would just be a semi-official tarball from Jean Michel.",
    "created_at": "2016-03-21T11:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272914",
    "user": "https://github.com/jdemeyer"
}
```

You really need to document how you obtained the tarball. Ideally, it would just be a semi-official tarball from Jean Michel.



---

archive/issue_comments_272915.json:
```json
{
    "body": "You need to check for errors in `spkg-install`.",
    "created_at": "2016-03-21T12:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272915",
    "user": "https://github.com/jdemeyer"
}
```

You need to check for errors in `spkg-install`.



---

archive/issue_comments_272916.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-23T20:42:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272916",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272917.json:
```json
{
    "body": "Replying to [comment:68 jdemeyer]:\n> The current tarball still contains binaries: src/*.o and bin/gap.x86linux64 and bin/gap3. \n> And the strangest thing: the tarball even contains a broken copy of itself\n\n\nI accidentally `tar`'ed the wrong folder when updating the tarball, so it was completely corrupted. I hope it is now the correct one without binaries or broken copies of itself...\n\n> You need to check for errors in `spkg-install`.\n\n\nIf you mean that the package didn't install, this was due to my wrong tarball. Otherwise, I don't know what you mean here.\n\n> The tarball should extract to its own top-level directory, instead of having many top-level directories like doc and src.\n\n\nDone.\n\n> This should go the description, it is not an !Update/Build Instruction:\n\n\nDone.",
    "created_at": "2016-03-24T05:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272917",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:68 jdemeyer]:
> The current tarball still contains binaries: src/*.o and bin/gap.x86linux64 and bin/gap3. 
> And the strangest thing: the tarball even contains a broken copy of itself


I accidentally `tar`'ed the wrong folder when updating the tarball, so it was completely corrupted. I hope it is now the correct one without binaries or broken copies of itself...

> You need to check for errors in `spkg-install`.


If you mean that the package didn't install, this was due to my wrong tarball. Otherwise, I don't know what you mean here.

> The tarball should extract to its own top-level directory, instead of having many top-level directories like doc and src.


Done.

> This should go the description, it is not an !Update/Build Instruction:


Done.



---

archive/issue_comments_272918.json:
```json
{
    "body": "Replying to [comment:67 jdemeyer]:\n> You really need to document how you obtained the tarball. Ideally, it would just be a semi-official tarball from Jean Michel.\n\n\nI have added it to the documentation. I used `grep -r -m 1 \"^\"  . | grep \"^Binary file\"` to identify all binaries and then deleted them. This is the only difference to Jean Michel's tarball. At some point, it might be good to have this version semi-official from Jean.",
    "created_at": "2016-03-24T05:32:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272918",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:67 jdemeyer]:
> You really need to document how you obtained the tarball. Ideally, it would just be a semi-official tarball from Jean Michel.


I have added it to the documentation. I used `grep -r -m 1 "^"  . | grep "^Binary file"` to identify all binaries and then deleted them. This is the only difference to Jean Michel's tarball. At some point, it might be good to have this version semi-official from Jean.



---

archive/issue_comments_272919.json:
```json
{
    "body": "Replying to [comment:70 stumpc5]: \n> > You need to check for errors in `spkg-install`.\n\n> \n> If you mean that the package didn't install, this was due to my wrong tarball. Otherwise, I don't know what you mean here.\n\n\nFor example:\n\n```\nif [ \"x$SAGE_CHECK\" = xyes ]; then\n    $MAKE check\nelse\n    $MAKE install\nfi\n\nif [ $? -ne 0 ]; then\n    echo >&2 \"Error installing Foo.\"\n    exit 1\nfi\n```\n\nThe check for errors is in the last \"if\"-clause. Without that text, the install script would report a successful installation of the package, even if building or testing it gave an error.",
    "created_at": "2016-03-24T06:26:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272919",
    "user": "https://github.com/simon-king-jena"
}
```

Replying to [comment:70 stumpc5]: 
> > You need to check for errors in `spkg-install`.

> 
> If you mean that the package didn't install, this was due to my wrong tarball. Otherwise, I don't know what you mean here.


For example:

```
if [ "x$SAGE_CHECK" = xyes ]; then
    $MAKE check
else
    $MAKE install
fi

if [ $? -ne 0 ]; then
    echo >&2 "Error installing Foo."
    exit 1
fi
```

The check for errors is in the last "if"-clause. Without that text, the install script would report a successful installation of the package, even if building or testing it gave an error.



---

archive/issue_comments_272920.json:
```json
{
    "body": "PS: That's my guess what is meant by \"check for errors\", I didn't look up what your spkg-install looks like.",
    "created_at": "2016-03-24T06:27:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272920",
    "user": "https://github.com/simon-king-jena"
}
```

PS: That's my guess what is meant by "check for errors", I didn't look up what your spkg-install looks like.



---

archive/issue_comments_272921.json:
```json
{
    "body": "Yes, you need to ensure that, if `$MAKE` fails, then `spkg-install` exits with an error message. Usually this is done by something like\n\n```\n$MAKE\nif [ $? -ne 0 ]; then\n    echo >&2 \"Error installing Foo.\"\n    exit 1\nfi\n```",
    "created_at": "2016-03-24T08:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272921",
    "user": "https://github.com/jdemeyer"
}
```

Yes, you need to ensure that, if `$MAKE` fails, then `spkg-install` exits with an error message. Usually this is done by something like

```
$MAKE
if [ $? -ne 0 ]; then
    echo >&2 "Error installing Foo."
    exit 1
fi
```



---

archive/issue_comments_272922.json:
```json
{
    "body": "Replying to [comment:70 stumpc5]:\n> I accidentally `tar`'ed the wrong folder when updating the tarball, so it was completely corrupted.\n\n\nThis is why it's a good idea to script such tarball changes, then mistakes like this cannot happen. Usually this is done by a `spkg-src` script. For a good example, see `build/pkgs/ecl/spkg-src` after applying #13044.\n\nI'm not saying that such a `spkg-src` is *required* for an optional package but it's at least *recommended*.",
    "created_at": "2016-03-24T08:21:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272922",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:70 stumpc5]:
> I accidentally `tar`'ed the wrong folder when updating the tarball, so it was completely corrupted.


This is why it's a good idea to script such tarball changes, then mistakes like this cannot happen. Usually this is done by a `spkg-src` script. For a good example, see `build/pkgs/ecl/spkg-src` after applying #13044.

I'm not saying that such a `spkg-src` is *required* for an optional package but it's at least *recommended*.



---

archive/issue_comments_272923.json:
```json
{
    "body": "Replying to [comment:71 stumpc5]:\n> Replying to [comment:67 jdemeyer]:\n> > You really need to document how you obtained the tarball. Ideally, it would just be a semi-official tarball from Jean Michel.\n\n> \n> I have added it to the documentation.\n\n\nGood, but put this in the `Special Update/Build Instructions` block in `SPKG.txt`.",
    "created_at": "2016-03-24T08:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272923",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:71 stumpc5]:
> Replying to [comment:67 jdemeyer]:
> > You really need to document how you obtained the tarball. Ideally, it would just be a semi-official tarball from Jean Michel.

> 
> I have added it to the documentation.


Good, but put this in the `Special Update/Build Instructions` block in `SPKG.txt`.



---

archive/issue_comments_272924.json:
```json
{
    "body": "The tarball looks good now.",
    "created_at": "2016-03-24T09:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272924",
    "user": "https://github.com/jdemeyer"
}
```

The tarball looks good now.



---

archive/issue_comments_272925.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-24T09:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272925",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272926.json:
```json
{
    "body": "I think the `spkg-src` file is now working, but I still have two issues:\n\n* I get a different checksum, even though I do not see what I did differently than before.\n* The command `grep -r -m 1 \"^\"  . | grep \"^Binary file\" | xargs rm` is not very clean because of the error\n\n```\nrm: cannot remove \u2018Binary\u2019: No such file or directory\nrm: cannot remove \u2018file\u2019: No such file or directory\nrm: cannot remove \u2018matches\u2019: No such file or directory\n```\n  Do you know how to do that better?\n\nThanks!",
    "created_at": "2016-03-24T09:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272926",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

I think the `spkg-src` file is now working, but I still have two issues:

* I get a different checksum, even though I do not see what I did differently than before.
* The command `grep -r -m 1 "^"  . | grep "^Binary file" | xargs rm` is not very clean because of the error

```
rm: cannot remove ‘Binary’: No such file or directory
rm: cannot remove ‘file’: No such file or directory
rm: cannot remove ‘matches’: No such file or directory
```
  Do you know how to do that better?

Thanks!



---

archive/issue_comments_272927.json:
```json
{
    "body": "Replying to [comment:79 stumpc5]:\n> I think the `spkg-src` file is now working, but I still have two issues:\n> \n> * I get a different checksum, even though I do not see what I did differently than before.\n\n\nMost likely different timestamps.",
    "created_at": "2016-03-24T10:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272927",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:79 stumpc5]:
> I think the `spkg-src` file is now working, but I still have two issues:
> 
> * I get a different checksum, even though I do not see what I did differently than before.


Most likely different timestamps.



---

archive/issue_comments_272928.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-24T10:17:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272928",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272929.json:
```json
{
    "body": "Okay, the two tarballs contain the same files of the same sizes, so I expect `spkg-src` to actually do what it should. I uploaded the auto-generated tarball and updated the checksum.",
    "created_at": "2016-03-24T10:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272929",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Okay, the two tarballs contain the same files of the same sizes, so I expect `spkg-src` to actually do what it should. I uploaded the auto-generated tarball and updated the checksum.



---

archive/issue_comments_272930.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-24T10:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272930",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_272931.json:
```json
{
    "body": "I now have\n\n```\npatching file gap3/src/Makefile\nHunk #1 succeeded at 48 (offset 2 lines).\nHunk #2 succeeded at 108 (offset 2 lines).\n```\nthat I need to fix.",
    "created_at": "2016-03-24T10:24:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272931",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

I now have

```
patching file gap3/src/Makefile
Hunk #1 succeeded at 48 (offset 2 lines).
Hunk #2 succeeded at 108 (offset 2 lines).
```
that I need to fix.



---

archive/issue_comments_272932.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-24T10:40:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272932",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272933.json:
```json
{
    "body": "The tarball is gone (404: Not Found)\n\nAlso don't forget your author name.",
    "created_at": "2016-03-25T09:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272933",
    "user": "https://github.com/jdemeyer"
}
```

The tarball is gone (404: Not Found)

Also don't forget your author name.



---

archive/issue_comments_272934.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-03-25T09:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272934",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_272935.json:
```json
{
    "body": "Changing keywords from \"\" to \"gap3, optional package\".",
    "created_at": "2016-03-25T11:13:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272935",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing keywords from "" to "gap3, optional package".



---

archive/issue_comments_272936.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-25T11:14:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272936",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272937.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-25T11:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272937",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_272938.json:
```json
{
    "body": "I had to fix one more issue (I missed to update the gap3 folder structure in `gap.sh`). I also updated the tarball with several changes in Jean Michel's original tarball from the past few days.\n\nI hope I have not forgot to update anything else, and mark it again as `needs review` -- thanks!",
    "created_at": "2016-03-25T11:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272938",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

I had to fix one more issue (I missed to update the gap3 folder structure in `gap.sh`). I also updated the tarball with several changes in Jean Michel's original tarball from the past few days.

I hope I have not forgot to update anything else, and mark it again as `needs review` -- thanks!



---

archive/issue_comments_272939.json:
```json
{
    "body": "Asking the question about how to properly delete the binary files at http://stackoverflow.com/questions/36221028",
    "created_at": "2016-03-25T13:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272939",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Asking the question about how to properly delete the binary files at http://stackoverflow.com/questions/36221028



---

archive/issue_comments_272940.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-03-25T13:41:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272940",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_272941.json:
```json
{
    "body": "```\nsage -t src/sage/interfaces/gap3.py\n**********************************************************************\nFile \"src/sage/interfaces/gap3.py\", line 400, in sage.interfaces.gap3.Gap3._execute_line\nFailed example:\n    f([1,2,3])                                   #optional - gap3\nExpected:\n    Traceback (most recent call last):\n    ...\n    RuntimeError: Gap3 produced error output\n    Error, List Element: <position> must be a positive integer at\n    return L[0] ... in\n    ... called from\n    main loop\n    brk> quit;\n    ...\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.gap3.Gap3._execute_line[3]>\", line 1, in <module>\n        f([Integer(1),Integer(2),Integer(3)])                                   #optional - gap3\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 805, in __call__\n        return getattr(P, self.name())(*args)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 607, in __call__\n        return self._parent.function_call(self._name, list(args), kwds)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/interfaces/gap.py\", line 921, in function_call\n        res = self.eval(marker+cmd)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/interfaces/gap.py\", line 573, in eval\n        result = Expect.eval(self, input_line, **kwds)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 1239, in eval\n        for L in code.split('\\n') if L != ''])\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/interfaces/gap.py\", line 771, in _eval_line\n        raise RuntimeError(message)\n    RuntimeError: Gap3 produced error output\n    Error, Function: <function> must be a function\n    <BLANKLINE>\n       executing __SAGE_LAST__:=\"__SAGE_LAST__\";;x(sage0);;\n**********************************************************************\nFile \"src/sage/interfaces/gap3.py\", line 447, in sage.interfaces.gap3.Gap3.help\nFailed example:\n    m                                        #optional - gap3\nExpected:\n    [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]\nGot:\n    <BLANKLINE>\n**********************************************************************\nFile \"src/sage/interfaces/gap3.py\", line 449, in sage.interfaces.gap3.Gap3.help\nFailed example:\n    m.Print()                                #optional - gap3\nExpected:\n    [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]\nGot:\n    \"__SAGE_LAST__\"\n**********************************************************************\nFile \"src/sage/interfaces/gap3.py\", line 453, in sage.interfaces.gap3.Gap3.help\nFailed example:\n    m                                        #optional - gap3\nExpected:\n    [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]\nGot:\n    <BLANKLINE>\n**********************************************************************\nFile \"src/sage/interfaces/gap3.py\", line 455, in sage.interfaces.gap3.Gap3.help\nFailed example:\n    m.Print()                                #optional - gap3\nExpected:\n    [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]\nGot:\n    \"__SAGE_LAST__\"\n**********************************************************************\n```",
    "created_at": "2016-03-25T13:41:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272941",
    "user": "https://github.com/jdemeyer"
}
```

```
sage -t src/sage/interfaces/gap3.py
**********************************************************************
File "src/sage/interfaces/gap3.py", line 400, in sage.interfaces.gap3.Gap3._execute_line
Failed example:
    f([1,2,3])                                   #optional - gap3
Expected:
    Traceback (most recent call last):
    ...
    RuntimeError: Gap3 produced error output
    Error, List Element: <position> must be a positive integer at
    return L[0] ... in
    ... called from
    main loop
    brk> quit;
    ...
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.gap3.Gap3._execute_line[3]>", line 1, in <module>
        f([Integer(1),Integer(2),Integer(3)])                                   #optional - gap3
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 805, in __call__
        return getattr(P, self.name())(*args)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 607, in __call__
        return self._parent.function_call(self._name, list(args), kwds)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/interfaces/gap.py", line 921, in function_call
        res = self.eval(marker+cmd)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/interfaces/gap.py", line 573, in eval
        result = Expect.eval(self, input_line, **kwds)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 1239, in eval
        for L in code.split('\n') if L != ''])
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/interfaces/gap.py", line 771, in _eval_line
        raise RuntimeError(message)
    RuntimeError: Gap3 produced error output
    Error, Function: <function> must be a function
    <BLANKLINE>
       executing __SAGE_LAST__:="__SAGE_LAST__";;x(sage0);;
**********************************************************************
File "src/sage/interfaces/gap3.py", line 447, in sage.interfaces.gap3.Gap3.help
Failed example:
    m                                        #optional - gap3
Expected:
    [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]
Got:
    <BLANKLINE>
**********************************************************************
File "src/sage/interfaces/gap3.py", line 449, in sage.interfaces.gap3.Gap3.help
Failed example:
    m.Print()                                #optional - gap3
Expected:
    [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]
Got:
    "__SAGE_LAST__"
**********************************************************************
File "src/sage/interfaces/gap3.py", line 453, in sage.interfaces.gap3.Gap3.help
Failed example:
    m                                        #optional - gap3
Expected:
    [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]
Got:
    <BLANKLINE>
**********************************************************************
File "src/sage/interfaces/gap3.py", line 455, in sage.interfaces.gap3.Gap3.help
Failed example:
    m.Print()                                #optional - gap3
Expected:
    [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]
Got:
    "__SAGE_LAST__"
**********************************************************************
```



---

archive/issue_comments_272942.json:
```json
{
    "body": "Given that this package contains chevie, I guess you should replace\n\n```\n# optional - chevie\n```\nby\n\n```\n# optional - gap3\n```",
    "created_at": "2016-03-25T13:43:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272942",
    "user": "https://github.com/jdemeyer"
}
```

Given that this package contains chevie, I guess you should replace

```
# optional - chevie
```
by

```
# optional - gap3
```



---

archive/issue_comments_272943.json:
```json
{
    "body": "There seems to be several problems with the `GAP3` interface, partially described in #18971:\n\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath Version 7.1.beta6, Release Date: 2016-03-03               \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage:  \nsage: gap3\nGap3\nsage: gap3.execute(\"1+1\")\n''\nsage: gap3.execute(\"1+1\")\n'2'\nsage: \nsage: gap3.execute(\"1+1\")\n'2'\nsage: gap3\nGap3\nsage: gap3.eval('VERSION')[1:-1]\n''\nsage: gap3.eval('VERSION')[1:-1]\n'lib: jm 12Mar2016, src: jm 28Feb2015, sys: usg gcc 64'\nsage: gap3.execute(\"1+1\")\n'\"lib: jm 12Mar2016, src: jm 28Feb2015, sys: usg gcc 64\"'\nsage: gap3.execute(\"1+1\")\n'2'\n```",
    "created_at": "2016-03-25T13:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272943",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

There seems to be several problems with the `GAP3` interface, partially described in #18971:

```
┌────────────────────────────────────────────────────────────────────┐
│ SageMath Version 7.1.beta6, Release Date: 2016-03-03               │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
sage:  
sage: gap3
Gap3
sage: gap3.execute("1+1")
''
sage: gap3.execute("1+1")
'2'
sage: 
sage: gap3.execute("1+1")
'2'
sage: gap3
Gap3
sage: gap3.eval('VERSION')[1:-1]
''
sage: gap3.eval('VERSION')[1:-1]
'lib: jm 12Mar2016, src: jm 28Feb2015, sys: usg gcc 64'
sage: gap3.execute("1+1")
'"lib: jm 12Mar2016, src: jm 28Feb2015, sys: usg gcc 64"'
sage: gap3.execute("1+1")
'2'
```



---

archive/issue_comments_272944.json:
```json
{
    "body": "Replying to [comment:91 jdemeyer]:\n> {{{\n> sage -t src/sage/interfaces/gap3.py\n> }}}\n\n\nThese doctests actually also did not work before either: I installed gap3 myself and made it start on the command-line using the command `gap3`. I then did\n\n```\n$ sage -t src/sage/interfaces/gap3.py \ntoo few successful tests, not using stored timings\nRunning doctests with ID 2016-03-25-15-51-57-0530368e.\nGit branch: findstat/main\nUsing --optional=dot2tex,mpir,python2,sage,scons\nDoctesting 1 file.\nsage -t src/sage/interfaces/gap3.py\n    [12 tests, 6.03 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 6.2 seconds\n    cpu time: 0.2 seconds\n    cumulative wall time: 6.0 seconds\n```\nand then\n\n```\n$ sage -t --optional=dot2tex,mpir,python2,sage,scons,gap3,chevie src/sage/interfaces/gap3.py \ntoo few successful tests, not using stored timings\nRunning doctests with ID 2016-03-25-15-52-25-c372d3dc.\nGit branch: findstat/main\nUsing --optional=chevie,dot2tex,gap3,mpir,python2,sage,scons\nDoctesting 1 file.\nsage -t src/sage/interfaces/gap3.py\n**********************************************************************\nFile \"src/sage/interfaces/gap3.py\", line 174, in sage.interfaces.gap3\nFailed example:\n    gap3.RequirePackage('\"chevie\"')             #optional - gap3 chevie\nExpected:\n    W...  to  the  CHEVIE  package, ...\nGot:\n    <BLANKLINE>\n**********************************************************************\nFile \"src/sage/interfaces/gap3.py\", line 397, in sage.interfaces.gap3.Gap3._execute_line\nFailed example:\n    f([1,2,3])                                   #optional - gap3\nExpected:\n    Traceback (most recent call last):\n    ...\n    RuntimeError: Gap3 produced error output\n    Error, List Element: <position> must be a positive integer at\n    return L[0] ... in\n    ... called from\n    main loop\n    brk> quit;\n    ...\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/home/stumpc5/progs/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/stumpc5/progs/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.gap3.Gap3._execute_line[3]>\", line 1, in <module>\n        f([Integer(1),Integer(2),Integer(3)])                                   #optional - gap3\n      File \"/home/stumpc5/progs/sage/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 805, in __call__\n        return getattr(P, self.name())(*args)\n      File \"/home/stumpc5/progs/sage/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 607, in __call__\n        return self._parent.function_call(self._name, list(args), kwds)\n      File \"/home/stumpc5/progs/sage/local/lib/python2.7/site-packages/sage/interfaces/gap.py\", line 894, in function_call\n        ['%s=%s'%(key,value.name()) for key, value in kwds.items()])))\n      File \"/home/stumpc5/progs/sage/local/lib/python2.7/site-packages/sage/interfaces/gap.py\", line 569, in eval\n        result = Expect.eval(self, input_line, **kwds)\n      File \"/home/stumpc5/progs/sage/local/lib/python2.7/site-packages/sage/interfaces/expect.py\", line 1244, in eval\n        for L in code.split('\\n') if L != ''])\n      File \"/home/stumpc5/progs/sage/local/lib/python2.7/site-packages/sage/interfaces/gap.py\", line 767, in _eval_line\n        raise RuntimeError(message)\n    RuntimeError: Gap3 produced error output\n    Error, Function: <function> must be a function\n    <BLANKLINE>\n       executing x(sage0);\n**********************************************************************\nFile \"src/sage/interfaces/gap3.py\", line 444, in sage.interfaces.gap3.Gap3.help\nFailed example:\n    m                                        #optional - gap3\nExpected:\n    [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]\nGot:\n    <BLANKLINE>\n**********************************************************************\nFile \"src/sage/interfaces/gap3.py\", line 446, in sage.interfaces.gap3.Gap3.help\nFailed example:\n    m.Print()                                #optional - gap3\nExpected:\n    [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]\nGot:\n    \"__SAGE_LAST__\"\n**********************************************************************\nFile \"src/sage/interfaces/gap3.py\", line 450, in sage.interfaces.gap3.Gap3.help\nFailed example:\n    m                                        #optional - gap3\nExpected:\n    [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]\nGot:\n    <BLANKLINE>\n**********************************************************************\nFile \"src/sage/interfaces/gap3.py\", line 452, in sage.interfaces.gap3.Gap3.help\nFailed example:\n    m.Print()                                #optional - gap3\nExpected:\n    [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]\nGot:\n    \"__SAGE_LAST__\"\n**********************************************************************\n3 items had failures:\n   1 of  34 in sage.interfaces.gap3\n   1 of   5 in sage.interfaces.gap3.Gap3._execute_line\n   4 of  10 in sage.interfaces.gap3.Gap3.help\n    [107 tests, 6 failures, 4.20 s]\n----------------------------------------------------------------------\nsage -t src/sage/interfaces/gap3.py  # 6 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 4.4 seconds\n    cpu time: 0.8 seconds\n    cumulative wall time: 4.2 seconds\n```",
    "created_at": "2016-03-25T14:56:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272944",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:91 jdemeyer]:
> {{{
> sage -t src/sage/interfaces/gap3.py
> }}}


These doctests actually also did not work before either: I installed gap3 myself and made it start on the command-line using the command `gap3`. I then did

```
$ sage -t src/sage/interfaces/gap3.py 
too few successful tests, not using stored timings
Running doctests with ID 2016-03-25-15-51-57-0530368e.
Git branch: findstat/main
Using --optional=dot2tex,mpir,python2,sage,scons
Doctesting 1 file.
sage -t src/sage/interfaces/gap3.py
    [12 tests, 6.03 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 6.2 seconds
    cpu time: 0.2 seconds
    cumulative wall time: 6.0 seconds
```
and then

```
$ sage -t --optional=dot2tex,mpir,python2,sage,scons,gap3,chevie src/sage/interfaces/gap3.py 
too few successful tests, not using stored timings
Running doctests with ID 2016-03-25-15-52-25-c372d3dc.
Git branch: findstat/main
Using --optional=chevie,dot2tex,gap3,mpir,python2,sage,scons
Doctesting 1 file.
sage -t src/sage/interfaces/gap3.py
**********************************************************************
File "src/sage/interfaces/gap3.py", line 174, in sage.interfaces.gap3
Failed example:
    gap3.RequirePackage('"chevie"')             #optional - gap3 chevie
Expected:
    W...  to  the  CHEVIE  package, ...
Got:
    <BLANKLINE>
**********************************************************************
File "src/sage/interfaces/gap3.py", line 397, in sage.interfaces.gap3.Gap3._execute_line
Failed example:
    f([1,2,3])                                   #optional - gap3
Expected:
    Traceback (most recent call last):
    ...
    RuntimeError: Gap3 produced error output
    Error, List Element: <position> must be a positive integer at
    return L[0] ... in
    ... called from
    main loop
    brk> quit;
    ...
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/home/stumpc5/progs/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/stumpc5/progs/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.gap3.Gap3._execute_line[3]>", line 1, in <module>
        f([Integer(1),Integer(2),Integer(3)])                                   #optional - gap3
      File "/home/stumpc5/progs/sage/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 805, in __call__
        return getattr(P, self.name())(*args)
      File "/home/stumpc5/progs/sage/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 607, in __call__
        return self._parent.function_call(self._name, list(args), kwds)
      File "/home/stumpc5/progs/sage/local/lib/python2.7/site-packages/sage/interfaces/gap.py", line 894, in function_call
        ['%s=%s'%(key,value.name()) for key, value in kwds.items()])))
      File "/home/stumpc5/progs/sage/local/lib/python2.7/site-packages/sage/interfaces/gap.py", line 569, in eval
        result = Expect.eval(self, input_line, **kwds)
      File "/home/stumpc5/progs/sage/local/lib/python2.7/site-packages/sage/interfaces/expect.py", line 1244, in eval
        for L in code.split('\n') if L != ''])
      File "/home/stumpc5/progs/sage/local/lib/python2.7/site-packages/sage/interfaces/gap.py", line 767, in _eval_line
        raise RuntimeError(message)
    RuntimeError: Gap3 produced error output
    Error, Function: <function> must be a function
    <BLANKLINE>
       executing x(sage0);
**********************************************************************
File "src/sage/interfaces/gap3.py", line 444, in sage.interfaces.gap3.Gap3.help
Failed example:
    m                                        #optional - gap3
Expected:
    [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]
Got:
    <BLANKLINE>
**********************************************************************
File "src/sage/interfaces/gap3.py", line 446, in sage.interfaces.gap3.Gap3.help
Failed example:
    m.Print()                                #optional - gap3
Expected:
    [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]
Got:
    "__SAGE_LAST__"
**********************************************************************
File "src/sage/interfaces/gap3.py", line 450, in sage.interfaces.gap3.Gap3.help
Failed example:
    m                                        #optional - gap3
Expected:
    [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]
Got:
    <BLANKLINE>
**********************************************************************
File "src/sage/interfaces/gap3.py", line 452, in sage.interfaces.gap3.Gap3.help
Failed example:
    m.Print()                                #optional - gap3
Expected:
    [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]
Got:
    "__SAGE_LAST__"
**********************************************************************
3 items had failures:
   1 of  34 in sage.interfaces.gap3
   1 of   5 in sage.interfaces.gap3.Gap3._execute_line
   4 of  10 in sage.interfaces.gap3.Gap3.help
    [107 tests, 6 failures, 4.20 s]
----------------------------------------------------------------------
sage -t src/sage/interfaces/gap3.py  # 6 doctests failed
----------------------------------------------------------------------
Total time for all tests: 4.4 seconds
    cpu time: 0.8 seconds
    cumulative wall time: 4.2 seconds
```



---

archive/issue_comments_272945.json:
```json
{
    "body": "It might or might not be related to #18971, but I currently do not know how to fix the issues (except that I could just copy the not correct output into the doctest).",
    "created_at": "2016-03-25T14:56:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272945",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

It might or might not be related to #18971, but I currently do not know how to fix the issues (except that I could just copy the not correct output into the doctest).



---

archive/issue_comments_272946.json:
```json
{
    "body": "Alternatively, you could make gap3 an experimental package now and move it to optional in #18971.\n\nOne detail I just saw: `spkg-src` still mentions ECL :-)\n\nAnd don't forget to fix the optional tags referring to chevie.",
    "created_at": "2016-03-25T15:25:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272946",
    "user": "https://github.com/jdemeyer"
}
```

Alternatively, you could make gap3 an experimental package now and move it to optional in #18971.

One detail I just saw: `spkg-src` still mentions ECL :-)

And don't forget to fix the optional tags referring to chevie.



---

archive/issue_comments_272947.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-25T15:54:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272947",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272948.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-25T16:18:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272948",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272949.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-25T16:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272949",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272950.json:
```json
{
    "body": "Replying to [comment:96 jdemeyer]:\n> Alternatively, you could make gap3 an experimental package now and move it to optional in #18971.\n\n\nI would _really_ like to get this as an optional package before we have a week meeting here in Berlin to work on (and hopefully finalize!) #11187 in two weeks from now.",
    "created_at": "2016-03-25T16:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272950",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:96 jdemeyer]:
> Alternatively, you could make gap3 an experimental package now and move it to optional in #18971.


I would _really_ like to get this as an optional package before we have a week meeting here in Berlin to work on (and hopefully finalize!) #11187 in two weeks from now.



---

archive/issue_comments_272951.json:
```json
{
    "body": "One issue, one ticket.\n\nLet's keep the \"adding a gap3 package\" and \"fixing the gap3 interface\" separate tickets.",
    "created_at": "2016-03-25T16:41:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272951",
    "user": "https://github.com/jdemeyer"
}
```

One issue, one ticket.

Let's keep the "adding a gap3 package" and "fixing the gap3 interface" separate tickets.



---

archive/issue_comments_272952.json:
```json
{
    "body": "That being said, if you find a reviewer who is willing to review your two-tickets-in-one branch (not me), it doesn't really matter.",
    "created_at": "2016-03-25T16:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272952",
    "user": "https://github.com/jdemeyer"
}
```

That being said, if you find a reviewer who is willing to review your two-tickets-in-one branch (not me), it doesn't really matter.



---

archive/issue_comments_272953.json:
```json
{
    "body": "there are too many question marks now that need to be resolved before it can move on to become an optional package. Besides, the differences in functionality are very minor.",
    "created_at": "2016-03-25T16:45:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272953",
    "user": "https://github.com/dimpase"
}
```

there are too many question marks now that need to be resolved before it can move on to become an optional package. Besides, the differences in functionality are very minor.



---

archive/issue_comments_272954.json:
```json
{
    "body": "IMvHO it is better to invest time into porting chevie to GAP4 than into this...",
    "created_at": "2016-03-25T16:48:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272954",
    "user": "https://github.com/dimpase"
}
```

IMvHO it is better to invest time into porting chevie to GAP4 than into this...



---

archive/issue_comments_272955.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-25T17:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272955",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272956.json:
```json
{
    "body": "Replying to [comment:102 jdemeyer]:\n> That being said, if you find a reviewer who is willing to review your two-tickets-in-one branch (not me), it doesn't really matter.\n\n\nI didn't start doing anything concerning the other ticket in this branch, did I?",
    "created_at": "2016-03-25T17:04:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272956",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:102 jdemeyer]:
> That being said, if you find a reviewer who is willing to review your two-tickets-in-one branch (not me), it doesn't really matter.


I didn't start doing anything concerning the other ticket in this branch, did I?



---

archive/issue_comments_272957.json:
```json
{
    "body": "Replying to [comment:104 dimpase]:\n> IMvHO it is better to invest time into porting chevie to GAP4 than into this...\n\n\nJean Michel clearly has a meaning about that, after not doing it in 20 years...",
    "created_at": "2016-03-25T17:05:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272957",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:104 dimpase]:
> IMvHO it is better to invest time into porting chevie to GAP4 than into this...


Jean Michel clearly has a meaning about that, after not doing it in 20 years...



---

archive/issue_comments_272958.json:
```json
{
    "body": "Changing component from packages: optional to packages: experimental.",
    "created_at": "2016-03-25T17:06:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272958",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing component from packages: optional to packages: experimental.



---

archive/issue_comments_272959.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-25T17:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272959",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272960.json:
```json
{
    "body": "Replying to [comment:103 dimpase]:\n> there are too many question marks now that need to be resolved before it can move on to become an optional package.\n\n\nJust so I understand it: is it correct that for a package to be optional one needs all doctests with the optional package flag to pass? And in this specific case, the optional doctests in `interfaces/gap3.py` do not pass (for whatever reason) so this cannot be an optional package for now?",
    "created_at": "2016-03-25T17:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272960",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:103 dimpase]:
> there are too many question marks now that need to be resolved before it can move on to become an optional package.


Just so I understand it: is it correct that for a package to be optional one needs all doctests with the optional package flag to pass? And in this specific case, the optional doctests in `interfaces/gap3.py` do not pass (for whatever reason) so this cannot be an optional package for now?



---

archive/issue_comments_272961.json:
```json
{
    "body": "Replying to [comment:110 stumpc5]:\n> Replying to [comment:103 dimpase]:\n> > there are too many question marks now that need to be resolved before it can move on to become an optional package.\n\n> \n> Just so I understand it: is it correct that for a package to be optional one needs all doctests with the optional package flag to pass? And in this specific case, the optional doctests in `interfaces/gap3.py` do not pass (for whatever reason) so this cannot be an optional package for now?\n\n\nindeed it is a necessary condition. And of course removing tests won't fly, one really needs to dig up the real reasons for them to fail; all that \"GAP3 does not do a thing on the 1st call\".",
    "created_at": "2016-03-25T17:16:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272961",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:110 stumpc5]:
> Replying to [comment:103 dimpase]:
> > there are too many question marks now that need to be resolved before it can move on to become an optional package.

> 
> Just so I understand it: is it correct that for a package to be optional one needs all doctests with the optional package flag to pass? And in this specific case, the optional doctests in `interfaces/gap3.py` do not pass (for whatever reason) so this cannot be an optional package for now?


indeed it is a necessary condition. And of course removing tests won't fly, one really needs to dig up the real reasons for them to fail; all that "GAP3 does not do a thing on the 1st call".



---

archive/issue_comments_272962.json:
```json
{
    "body": "Replying to [comment:107 stumpc5]:\n> Replying to [comment:104 dimpase]:\n> > IMvHO it is better to invest time into porting chevie to GAP4 than into this...\n\n> \n> Jean Michel clearly has a meaning about that, after not doing it in 20 years...\n\n\nI asked for a new password, so I can reply myself.\nI examined several times over the past 15 years a possible port of Chevie to GAP4.\nMy conclusions:\n-it would be as much work as rewriting everything completely, thus it would take several months of my life.\n-I do not see any benefit for me doing that, and I do not see, if I rewrite everything, why GAP4 would be the best target. Maybe sage would be a better target.\n-On the other hand, I would benefit from an optional gap3 package in sage, would it be only to use the nice notebook interface to pepare my presentations about chevie. I would do it myself if I knew more about what is needed, and I thank Christian Stump for doing it. I will help him as I can.",
    "created_at": "2016-03-25T17:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272962",
    "user": "https://trac.sagemath.org/admin/accounts/users/jmichel"
}
```

Replying to [comment:107 stumpc5]:
> Replying to [comment:104 dimpase]:
> > IMvHO it is better to invest time into porting chevie to GAP4 than into this...

> 
> Jean Michel clearly has a meaning about that, after not doing it in 20 years...


I asked for a new password, so I can reply myself.
I examined several times over the past 15 years a possible port of Chevie to GAP4.
My conclusions:
-it would be as much work as rewriting everything completely, thus it would take several months of my life.
-I do not see any benefit for me doing that, and I do not see, if I rewrite everything, why GAP4 would be the best target. Maybe sage would be a better target.
-On the other hand, I would benefit from an optional gap3 package in sage, would it be only to use the nice notebook interface to pepare my presentations about chevie. I would do it myself if I knew more about what is needed, and I thank Christian Stump for doing it. I will help him as I can.



---

archive/issue_comments_272963.json:
```json
{
    "body": "Replying to [comment:112 jmichel]:\n> Replying to [comment:107 stumpc5]:\n> > Replying to [comment:104 dimpase]:\n> > > IMvHO it is better to invest time into porting chevie to GAP4 than into this...\n\n> > \n> > Jean Michel clearly has a meaning about that, after not doing it in 20 years...\n\n> \n> I asked for a new password, so I can reply myself.\n> I examined several times over the past 15 years a possible port of Chevie to GAP4.\n> My conclusions:\n> -it would be as much work as rewriting everything completely,\n\n\nReally? What are the crucial features you miss in GAP4 that are used in Chevie?\n\nI use GAP (and hack a bit on it, too) for some 23 years, and I saw transitions of packages like GRAPE from GAP3 to GAP4 without too much pain. You don't need to make use of new GAP4 features, good old records are still there.\n\nI (half)ported ve and anusq to GAP4, it was certainly not very trivial, but quite doable and quick. (they are now useful in GAP4, although not as \"proper\" packages, but as collections of functions).",
    "created_at": "2016-03-25T17:43:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272963",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:112 jmichel]:
> Replying to [comment:107 stumpc5]:
> > Replying to [comment:104 dimpase]:
> > > IMvHO it is better to invest time into porting chevie to GAP4 than into this...

> > 
> > Jean Michel clearly has a meaning about that, after not doing it in 20 years...

> 
> I asked for a new password, so I can reply myself.
> I examined several times over the past 15 years a possible port of Chevie to GAP4.
> My conclusions:
> -it would be as much work as rewriting everything completely,


Really? What are the crucial features you miss in GAP4 that are used in Chevie?

I use GAP (and hack a bit on it, too) for some 23 years, and I saw transitions of packages like GRAPE from GAP3 to GAP4 without too much pain. You don't need to make use of new GAP4 features, good old records are still there.

I (half)ported ve and anusq to GAP4, it was certainly not very trivial, but quite doable and quick. (they are now useful in GAP4, although not as "proper" packages, but as collections of functions).



---

archive/issue_comments_272964.json:
```json
{
    "body": "Replying to [comment:113 dimpase]:\n> Replying to [comment:112 jmichel]:\n> > Replying to [comment:107 stumpc5]:\n> > > Replying to [comment:104 dimpase]:\n> > > > IMvHO it is better to invest time into porting chevie to GAP4 than into this...\n\n> > > \n> > > Jean Michel clearly has a meaning about that, after not doing it in 20 years...\n\n> > \n> > I asked for a new password, so I can reply myself.\n> > I examined several times over the past 15 years a possible port of Chevie to GAP4.\n> > My conclusions:\n> > -it would be as much work as rewriting everything completely,\n\n> \n> Really? What are the crucial features you miss in GAP4 that are used in Chevie?\n> \n> I use GAP (and hack a bit on it, too) for some 23 years, and I saw transitions of packages like GRAPE from GAP3 to GAP4 without too much pain. You don't need to make use of new GAP4 features, good old records are still there.\n\n\nFirst, I should tell you that I looked at the problem of porting chevie with Frank Luebeck, and he agrees with my conclusions. This is not the place/time to give a detailed answer, but roughly:\nchevie contains about a hundred different types of mathematical objects, which in gap3 are just records with a certain .operations fields, and methods are just functions which dispatch based\non various features, and then call the appropriate component field of the .operations record. The way a new type of objects or a method is constructed in GAP4 is completely different. The worst of it is that any effort (which has been done by various people) to port any substantial part of chevie (a few hundred lines) to gap4 almost always produce longer and uglier code. \n \n> I (half)ported ve and anusq to GAP4, it was certainly not very trivial, but quite doable and quick.\n\n\nI wanted to thank you for your modifications to the makefile in ve (It seems you did not change anything else?). It also seems that you changed a few lines in one gap function in anusq to translate it to gap4. I am sorry to say that this is completely trivial compared to rewriting the several hundred thousand lines of chevie.",
    "created_at": "2016-03-25T17:58:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272964",
    "user": "https://trac.sagemath.org/admin/accounts/users/jmichel"
}
```

Replying to [comment:113 dimpase]:
> Replying to [comment:112 jmichel]:
> > Replying to [comment:107 stumpc5]:
> > > Replying to [comment:104 dimpase]:
> > > > IMvHO it is better to invest time into porting chevie to GAP4 than into this...

> > > 
> > > Jean Michel clearly has a meaning about that, after not doing it in 20 years...

> > 
> > I asked for a new password, so I can reply myself.
> > I examined several times over the past 15 years a possible port of Chevie to GAP4.
> > My conclusions:
> > -it would be as much work as rewriting everything completely,

> 
> Really? What are the crucial features you miss in GAP4 that are used in Chevie?
> 
> I use GAP (and hack a bit on it, too) for some 23 years, and I saw transitions of packages like GRAPE from GAP3 to GAP4 without too much pain. You don't need to make use of new GAP4 features, good old records are still there.


First, I should tell you that I looked at the problem of porting chevie with Frank Luebeck, and he agrees with my conclusions. This is not the place/time to give a detailed answer, but roughly:
chevie contains about a hundred different types of mathematical objects, which in gap3 are just records with a certain .operations fields, and methods are just functions which dispatch based
on various features, and then call the appropriate component field of the .operations record. The way a new type of objects or a method is constructed in GAP4 is completely different. The worst of it is that any effort (which has been done by various people) to port any substantial part of chevie (a few hundred lines) to gap4 almost always produce longer and uglier code. 
 
> I (half)ported ve and anusq to GAP4, it was certainly not very trivial, but quite doable and quick.


I wanted to thank you for your modifications to the makefile in ve (It seems you did not change anything else?). It also seems that you changed a few lines in one gap function in anusq to translate it to gap4. I am sorry to say that this is completely trivial compared to rewriting the several hundred thousand lines of chevie.



---

archive/issue_comments_272965.json:
```json
{
    "body": "Replying to [comment:114 jmichel]:\n> Replying to [comment:113 dimpase]:\n> > Replying to [comment:112 jmichel]:\n> > > Replying to [comment:107 stumpc5]:\n> > > > Replying to [comment:104 dimpase]:\n> > > > > IMvHO it is better to invest time into porting chevie to GAP4 than into this...\n\n> > > > \n> > > > Jean Michel clearly has a meaning about that, after not doing it in 20 years...\n\n> > > \n> > > I asked for a new password, so I can reply myself.\n> > > I examined several times over the past 15 years a possible port of Chevie to GAP4.\n> > > My conclusions:\n> > > -it would be as much work as rewriting everything completely,\n\n> > \n> > Really? What are the crucial features you miss in GAP4 that are used in Chevie?\n> > \n> > I use GAP (and hack a bit on it, too) for some 23 years, and I saw transitions of packages like GRAPE from GAP3 to GAP4 without too much pain. You don't need to make use of new GAP4 features, good old records are still there.\n\n> \n> First, I should tell you that I looked at the problem of porting chevie with Frank Luebeck, and he agrees with my conclusions. This is not the place/time to give a detailed answer, but roughly:\n> chevie contains about a hundred different types of mathematical objects, which in gap3 are just records with a certain .operations fields, and methods are just functions which dispatch based\n> on various features, and then call the appropriate component field of the .operations record. The way a new type of objects or a method is constructed in GAP4 is completely different. \n\n\nBut you don't need this new type of objects!\n\n>The worst of it is that any effort (which has been done by various people) to port any substantial part of chevie (a few hundred lines) to gap4 almost always produce longer and uglier code. \n>  \n> > I (half)ported ve and anusq to GAP4, it was certainly not very trivial, but quite doable and quick.\n> \n> I wanted to thank you for your modifications to the makefile in ve (It seems you did not change anything else?). It also seems that you changed a few lines in one gap function in anusq to translate it to gap4. I am sorry to say that this is completely trivial compared to rewriting the several hundred thousand lines of chevie.  \n\n\nWow, I really appreciate the way you talk about my work :-)\nIf you cared to look at the diff of my changes to ve you could have seen the changes done in full glory, OK? \nhttps://github.com/gap-packages/ve/commits/master\n(the are mostly about switching to modern GMP, if you must know)\n\nWhereas your GAP3 code would just work in GAP4, with very minimal and trivial changes.",
    "created_at": "2016-03-25T18:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272965",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:114 jmichel]:
> Replying to [comment:113 dimpase]:
> > Replying to [comment:112 jmichel]:
> > > Replying to [comment:107 stumpc5]:
> > > > Replying to [comment:104 dimpase]:
> > > > > IMvHO it is better to invest time into porting chevie to GAP4 than into this...

> > > > 
> > > > Jean Michel clearly has a meaning about that, after not doing it in 20 years...

> > > 
> > > I asked for a new password, so I can reply myself.
> > > I examined several times over the past 15 years a possible port of Chevie to GAP4.
> > > My conclusions:
> > > -it would be as much work as rewriting everything completely,

> > 
> > Really? What are the crucial features you miss in GAP4 that are used in Chevie?
> > 
> > I use GAP (and hack a bit on it, too) for some 23 years, and I saw transitions of packages like GRAPE from GAP3 to GAP4 without too much pain. You don't need to make use of new GAP4 features, good old records are still there.

> 
> First, I should tell you that I looked at the problem of porting chevie with Frank Luebeck, and he agrees with my conclusions. This is not the place/time to give a detailed answer, but roughly:
> chevie contains about a hundred different types of mathematical objects, which in gap3 are just records with a certain .operations fields, and methods are just functions which dispatch based
> on various features, and then call the appropriate component field of the .operations record. The way a new type of objects or a method is constructed in GAP4 is completely different. 


But you don't need this new type of objects!

>The worst of it is that any effort (which has been done by various people) to port any substantial part of chevie (a few hundred lines) to gap4 almost always produce longer and uglier code. 
>  
> > I (half)ported ve and anusq to GAP4, it was certainly not very trivial, but quite doable and quick.
> 
> I wanted to thank you for your modifications to the makefile in ve (It seems you did not change anything else?). It also seems that you changed a few lines in one gap function in anusq to translate it to gap4. I am sorry to say that this is completely trivial compared to rewriting the several hundred thousand lines of chevie.  


Wow, I really appreciate the way you talk about my work :-)
If you cared to look at the diff of my changes to ve you could have seen the changes done in full glory, OK? 
https://github.com/gap-packages/ve/commits/master
(the are mostly about switching to modern GMP, if you must know)

Whereas your GAP3 code would just work in GAP4, with very minimal and trivial changes.



---

archive/issue_comments_272966.json:
```json
{
    "body": "> Wow, I really appreciate the way you talk about my work :-)\n> If you cared to look at the diff of my changes to ve you could have seen the changes done in full glory, OK? \n> https://github.com/gap-packages/ve/commits/master\n\n\nSorry. I went to https://github.com/gap-packages/ve and used the option \"download zip\"\nand did not see that many changes. Either you changes are quite old (several years ago) and I already got them without noticing, or I did something wrong. Anyway, please stick to technical points.\n\n> Whereas your GAP3 code would just work in GAP4, with very minimal and trivial changes.\n\n\nNo. But if you think otherwise, just do some non-trivial example and show me.",
    "created_at": "2016-03-25T19:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272966",
    "user": "https://trac.sagemath.org/admin/accounts/users/jmichel"
}
```

> Wow, I really appreciate the way you talk about my work :-)
> If you cared to look at the diff of my changes to ve you could have seen the changes done in full glory, OK? 
> https://github.com/gap-packages/ve/commits/master


Sorry. I went to https://github.com/gap-packages/ve and used the option "download zip"
and did not see that many changes. Either you changes are quite old (several years ago) and I already got them without noticing, or I did something wrong. Anyway, please stick to technical points.

> Whereas your GAP3 code would just work in GAP4, with very minimal and trivial changes.


No. But if you think otherwise, just do some non-trivial example and show me.



---

archive/issue_comments_272967.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-26T07:50:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272967",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272968.json:
```json
{
    "body": "Changing keywords from \"gap3, optional package\" to \"gap3, experimental package\".",
    "created_at": "2016-03-26T08:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272968",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing keywords from "gap3, optional package" to "gap3, experimental package".



---

archive/issue_comments_272969.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-26T08:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272969",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_272970.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-03-26T12:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272970",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_272971.json:
```json
{
    "body": "1. [comment:92]\n\n2. In the documentation, use `:trac:`20107` instead of `#20107`.",
    "created_at": "2016-03-26T12:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272971",
    "user": "https://github.com/jdemeyer"
}
```

1. [comment:92]

2. In the documentation, use `:trac:`20107` instead of `#20107`.



---

archive/issue_comments_272972.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-26T14:02:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272972",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272973.json:
```json
{
    "body": "Replying to [comment:119 jdemeyer]:\n> 1. [comment:92]\n\n\nI didn't realize you want me to do this also in ` combinat/root_system/coxeter_group.py`. Done now...\n\n> 2. In the documentation, use `:trac:`20107` instead of `#20107`.\n\n\nFixed.",
    "created_at": "2016-03-26T14:03:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272973",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:119 jdemeyer]:
> 1. [comment:92]


I didn't realize you want me to do this also in ` combinat/root_system/coxeter_group.py`. Done now...

> 2. In the documentation, use `:trac:`20107` instead of `#20107`.


Fixed.



---

archive/issue_comments_272974.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-26T14:03:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272974",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_272975.json:
```json
{
    "body": "Just to quickly recheck: is there anything else I should prepare to get this ticket a positive review?",
    "created_at": "2016-03-30T11:42:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272975",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Just to quickly recheck: is there anything else I should prepare to get this ticket a positive review?



---

archive/issue_events_054730.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-03-30T13:51:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "milestone": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19870#event-54730"
}
```



---

archive/issue_comments_272976.json:
```json
{
    "body": "About packages that need to be built:\nthese ones which are pretty useless without this ought to be just removed.",
    "created_at": "2016-03-30T13:51:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272976",
    "user": "https://github.com/dimpase"
}
```

About packages that need to be built:
these ones which are pretty useless without this ought to be just removed.



---

archive/issue_comments_272977.json:
```json
{
    "body": "still does not install on OSX:\n\n```\n###########################################################\n#  Building complete, you can run GAP3 from './../bin/gap3'\n###########################################################\nInstalling (copying) files...\ncp: gap3/pkg/ve/bin/me.exe: No such file or directory\ncp: gap3/pkg/ve/bin/qme.exe: No such file or directory\nError installing (copying) gap3 files.\n\nreal\t0m18.661s\nuser\t0m26.515s\nsys\t0m2.467s\n************************************************************************\nError installing package gap3-jm5-2015-02-01\n```",
    "created_at": "2016-03-30T13:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272977",
    "user": "https://github.com/dimpase"
}
```

still does not install on OSX:

```
###########################################################
#  Building complete, you can run GAP3 from './../bin/gap3'
###########################################################
Installing (copying) files...
cp: gap3/pkg/ve/bin/me.exe: No such file or directory
cp: gap3/pkg/ve/bin/qme.exe: No such file or directory
Error installing (copying) gap3 files.

real	0m18.661s
user	0m26.515s
sys	0m2.467s
************************************************************************
Error installing package gap3-jm5-2015-02-01
```



---

archive/issue_comments_272978.json:
```json
{
    "body": "Replying to [comment:116 jmichel]:\n> \n>  \n> > Wow, I really appreciate the way you talk about my work :-)\n> > If you cared to look at the diff of my changes to ve you could have seen the changes done in full glory, OK? \n> > https://github.com/gap-packages/ve/commits/master\n\n> \n> Sorry. I went to https://github.com/gap-packages/ve and used the option \"download zip\"\n> and did not see that many changes. Either you changes are quite old (several years ago) and I already got them without noticing, or I did something wrong. Anyway, please stick to technical points.\n> \n> > Whereas your GAP3 code would just work in GAP4, with very minimal and trivial changes.\n\n> \n> No. But if you think otherwise, just do some non-trivial example and show me.\n\n\nEarlier releases of GAP4 had GAP3 compatibility modes (a choice of various options).\nDid you try any of these?",
    "created_at": "2016-03-30T14:02:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272978",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:116 jmichel]:
> 
>  
> > Wow, I really appreciate the way you talk about my work :-)
> > If you cared to look at the diff of my changes to ve you could have seen the changes done in full glory, OK? 
> > https://github.com/gap-packages/ve/commits/master

> 
> Sorry. I went to https://github.com/gap-packages/ve and used the option "download zip"
> and did not see that many changes. Either you changes are quite old (several years ago) and I already got them without noticing, or I did something wrong. Anyway, please stick to technical points.
> 
> > Whereas your GAP3 code would just work in GAP4, with very minimal and trivial changes.

> 
> No. But if you think otherwise, just do some non-trivial example and show me.


Earlier releases of GAP4 had GAP3 compatibility modes (a choice of various options).
Did you try any of these?



---

archive/issue_comments_272979.json:
```json
{
    "body": "Replying to [comment:123 dimpase]:\n> About packages that need to be built:\n> these ones which are pretty useless without this ought to be just removed.\n\n\nJean, it is okay to comment out the lines\n\n```\n#RequirePackage(\"anusq\");\n#RequirePackage(\"arep\");\n#RequirePackage(\"meataxe\");\n#RequirePackage(\"nq\");\n#RequirePackage(\"sisyphos\");\n#RequirePackage(\"ve\");\n```\nin `init.g` and delete those folders in `gap3/pkg`, without getting into any trouble for `chevie`?\n\nOtherwise, I could also try to build those packages that needs compilation, but already `meataxe` failed on a first try.",
    "created_at": "2016-03-30T14:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272979",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:123 dimpase]:
> About packages that need to be built:
> these ones which are pretty useless without this ought to be just removed.


Jean, it is okay to comment out the lines

```
#RequirePackage("anusq");
#RequirePackage("arep");
#RequirePackage("meataxe");
#RequirePackage("nq");
#RequirePackage("sisyphos");
#RequirePackage("ve");
```
in `init.g` and delete those folders in `gap3/pkg`, without getting into any trouble for `chevie`?

Otherwise, I could also try to build those packages that needs compilation, but already `meataxe` failed on a first try.



---

archive/issue_comments_272980.json:
```json
{
    "body": "> Jean, it is okay to comment out the lines\n> \n> ```\n> #RequirePackage(\"anusq\");\n> #RequirePackage(\"arep\");\n> #RequirePackage(\"meataxe\");\n> #RequirePackage(\"nq\");\n> #RequirePackage(\"sisyphos\");\n> #RequirePackage(\"ve\");\n> ```\n> in `init.g` and delete those folders in `gap3/pkg}}, without getting into any trouble for {{{chevie`?\n> \n> Otherwise, I could also try to build those packages that needs compilation, but already `meataxe` failed on a first try.\n\n\nYou can comment out all of them but arep.g\nThe function MovedPointsPerm defined in arep/lib/tools.g is used in various places including chevie. \n\nGenerally speaking, arep has some functionality which does not need its binaries. You could delete the subdirectories bin and src of arep if you keep the rest.\n\nIn the version I am preparing (complete gap3 distribution), I will make sure all included packages can be compiled\nand work on x86 64bits at least.",
    "created_at": "2016-03-30T14:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272980",
    "user": "https://trac.sagemath.org/admin/accounts/users/jmichel"
}
```

> Jean, it is okay to comment out the lines
> 
> ```
> #RequirePackage("anusq");
> #RequirePackage("arep");
> #RequirePackage("meataxe");
> #RequirePackage("nq");
> #RequirePackage("sisyphos");
> #RequirePackage("ve");
> ```
> in `init.g` and delete those folders in `gap3/pkg}}, without getting into any trouble for {{{chevie`?
> 
> Otherwise, I could also try to build those packages that needs compilation, but already `meataxe` failed on a first try.


You can comment out all of them but arep.g
The function MovedPointsPerm defined in arep/lib/tools.g is used in various places including chevie. 

Generally speaking, arep has some functionality which does not need its binaries. You could delete the subdirectories bin and src of arep if you keep the rest.

In the version I am preparing (complete gap3 distribution), I will make sure all included packages can be compiled
and work on x86 64bits at least.



---

archive/issue_comments_272981.json:
```json
{
    "body": "> Earlier releases of GAP4 had GAP3 compatibility modes (a choice of various options).\n> Did you try any of these?\n\n\nOf course. They do not deal at all with the operations records which is the crux of the matter.",
    "created_at": "2016-03-30T14:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272981",
    "user": "https://trac.sagemath.org/admin/accounts/users/jmichel"
}
```

> Earlier releases of GAP4 had GAP3 compatibility modes (a choice of various options).
> Did you try any of these?


Of course. They do not deal at all with the operations records which is the crux of the matter.



---

archive/issue_comments_272982.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-30T16:08:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272982",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272983.json:
```json
{
    "body": "Dima, thanks for checking!\n\nI deleted all packages that need compilation. This solved your request on this behalf.\n\nI would appreciate if you could retry to build it on OSX (don't forget to download the new tarball first); at least the two broken symlinks\n\n```\ncp: gap3/pkg/ve/bin/me.exe: No such file or directory\ncp: gap3/pkg/ve/bin/qme.exe: No such file or directory\n```\nare now gone together with the complete package.",
    "created_at": "2016-03-30T16:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272983",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Dima, thanks for checking!

I deleted all packages that need compilation. This solved your request on this behalf.

I would appreciate if you could retry to build it on OSX (don't forget to download the new tarball first); at least the two broken symlinks

```
cp: gap3/pkg/ve/bin/me.exe: No such file or directory
cp: gap3/pkg/ve/bin/qme.exe: No such file or directory
```
are now gone together with the complete package.



---

archive/issue_comments_272984.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-02T15:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272984",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272985.json:
```json
{
    "body": "it does not fly on OSX:\n\n```\nsage: gap3_console()\n             ########            Lehrstuhl D fuer Mathematik, RWTH Aachen\n           ###    ####             #######            #########          \n          ##         ##           #      ##          ## #     ##         \n         ##          #           #       ##             #      ##        \n        ##                       ##       #             #      ##        \n        ##           #           ##      ##             ##    ##         \n        ####        ##            #########             #######          \n         #####     ###                                  #                \n           ######### #  Version 3 Release 4.4 18 Apr 97 #                \n                     #                                  #                \n                    ##  Alice Niemeyer, Werner Nickel,  Martin Schoenert \n                   ###  Johannes Meier, Alex Wegner,    Thomas Bischops  \n                  ## #  Frank Celler,   Juergen Mnich,  Udo Polis        \n                 ##  #  Thomas Breuer,  Goetz Pfeiffer, Hans U. Besche   \n                ##   #  Volkmar Felsch, Heiko Theissen, Alexander Hulpke \n               ##    #  Ansgar Kaup,    Akos Seress,    Erzsebet Horvath \n              ##     #  Bettina Eick                                     \n              ###   ##  \n               ######   For help enter: ?<return>                        \n lib: jm 12Mar2016, src: jm 28Feb2015, sys: macosx gcc\n gap3-jm5 final 21Mar2016 -- see webusers.imj-prg.fr/~jmichel/gap3\n Minimal distribution -- loading the following packages:\n--- Loading package arep --------- version 1.0, 16Mar1998--------------------\n(C) Sebastian Egner, Markus Pueschel -- Abstract REPresentations\n--- Loading package autag -------- version Jan1997---------------------------\nGasman: last bag of type integer (> 2^28) and size       16 has overwritten the free bag.\nsage: \n```",
    "created_at": "2016-04-02T20:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272985",
    "user": "https://github.com/dimpase"
}
```

it does not fly on OSX:

```
sage: gap3_console()
             ########            Lehrstuhl D fuer Mathematik, RWTH Aachen
           ###    ####             #######            #########          
          ##         ##           #      ##          ## #     ##         
         ##          #           #       ##             #      ##        
        ##                       ##       #             #      ##        
        ##           #           ##      ##             ##    ##         
        ####        ##            #########             #######          
         #####     ###                                  #                
           ######### #  Version 3 Release 4.4 18 Apr 97 #                
                     #                                  #                
                    ##  Alice Niemeyer, Werner Nickel,  Martin Schoenert 
                   ###  Johannes Meier, Alex Wegner,    Thomas Bischops  
                  ## #  Frank Celler,   Juergen Mnich,  Udo Polis        
                 ##  #  Thomas Breuer,  Goetz Pfeiffer, Hans U. Besche   
                ##   #  Volkmar Felsch, Heiko Theissen, Alexander Hulpke 
               ##    #  Ansgar Kaup,    Akos Seress,    Erzsebet Horvath 
              ##     #  Bettina Eick                                     
              ###   ##  
               ######   For help enter: ?<return>                        
 lib: jm 12Mar2016, src: jm 28Feb2015, sys: macosx gcc
 gap3-jm5 final 21Mar2016 -- see webusers.imj-prg.fr/~jmichel/gap3
 Minimal distribution -- loading the following packages:
--- Loading package arep --------- version 1.0, 16Mar1998--------------------
(C) Sebastian Egner, Markus Pueschel -- Abstract REPresentations
--- Loading package autag -------- version Jan1997---------------------------
Gasman: last bag of type integer (> 2^28) and size       16 has overwritten the free bag.
sage: 
```



---

archive/issue_comments_272986.json:
```json
{
    "body": "The reason for this must be that the flag  `-DSYS_IS_64_BIT` is not passed during compilation on OSX. Indeed, `gap3_makefile.patch` has no `ifeq ($(ARCH),64/32)` block for `Darwin`. Fixed in this branch.\n\n---\nNew commits:",
    "created_at": "2016-04-02T23:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272986",
    "user": "https://github.com/dimpase"
}
```

The reason for this must be that the flag  `-DSYS_IS_64_BIT` is not passed during compilation on OSX. Indeed, `gap3_makefile.patch` has no `ifeq ($(ARCH),64/32)` block for `Darwin`. Fixed in this branch.

---
New commits:



---

archive/issue_comments_272987.json:
```json
{
    "body": "also, is this meant to fail:\n\n```\n$ sage -tp --optional=ccache,gap_packages,mpir,python2,gap3,sage src/sage/combinat/root_system/coxeter_group.py \ntoo few successful tests, not using stored timings\nRunning doctests with ID 2016-04-03-00-22-03-2f808575.\nGit branch: g3\nUsing --optional=ccache,gap3,gap_packages,mpir,python2,sage\nDoctesting 1 file using 4 threads.\nsage -t src/sage/combinat/root_system/coxeter_group.py\n**********************************************************************\nFile \"src/sage/combinat/root_system/coxeter_group.py\", line 226, in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup._element_class\nFailed example:\n    W._element_class() is W.element_class                      # optional - gap3\nException raised:\n    Traceback (most recent call last):\n      File \"/home/dima/software/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/dima/software/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup._element_class[1]>\", line 1, in <module>\n        W._element_class() is W.element_class                      # optional - gap3\n      File \"sage/structure/parent.pyx\", line 854, in sage.structure.parent.Parent.__getattr__ (build/cythonized/sage/structure/parent.c:7994)\n        attr = getattr_from_other_class(self, self._category.parent_class, name)\n      File \"sage/structure/misc.pyx\", line 253, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1666)\n        raise dummy_attribute_error\n    AttributeError: 'CoxeterMatrixGroup_with_category' object has no attribute '_element_class'\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup._element_class\n    [53 tests, 1 failure, 3.95 s]\n----------------------------------------------------------------------\nsage -t src/sage/combinat/root_system/coxeter_group.py  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 13.2 seconds\n    cpu time: 0.8 seconds\n    cumulative wall time: 3.9 seconds\n```",
    "created_at": "2016-04-02T23:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272987",
    "user": "https://github.com/dimpase"
}
```

also, is this meant to fail:

```
$ sage -tp --optional=ccache,gap_packages,mpir,python2,gap3,sage src/sage/combinat/root_system/coxeter_group.py 
too few successful tests, not using stored timings
Running doctests with ID 2016-04-03-00-22-03-2f808575.
Git branch: g3
Using --optional=ccache,gap3,gap_packages,mpir,python2,sage
Doctesting 1 file using 4 threads.
sage -t src/sage/combinat/root_system/coxeter_group.py
**********************************************************************
File "src/sage/combinat/root_system/coxeter_group.py", line 226, in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup._element_class
Failed example:
    W._element_class() is W.element_class                      # optional - gap3
Exception raised:
    Traceback (most recent call last):
      File "/home/dima/software/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/dima/software/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup._element_class[1]>", line 1, in <module>
        W._element_class() is W.element_class                      # optional - gap3
      File "sage/structure/parent.pyx", line 854, in sage.structure.parent.Parent.__getattr__ (build/cythonized/sage/structure/parent.c:7994)
        attr = getattr_from_other_class(self, self._category.parent_class, name)
      File "sage/structure/misc.pyx", line 253, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1666)
        raise dummy_attribute_error
    AttributeError: 'CoxeterMatrixGroup_with_category' object has no attribute '_element_class'
**********************************************************************
1 item had failures:
   1 of   3 in sage.combinat.root_system.coxeter_group.CoxeterGroupAsPermutationGroup._element_class
    [53 tests, 1 failure, 3.95 s]
----------------------------------------------------------------------
sage -t src/sage/combinat/root_system/coxeter_group.py  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 13.2 seconds
    cpu time: 0.8 seconds
    cumulative wall time: 3.9 seconds
```



---

archive/issue_comments_272988.json:
```json
{
    "body": "Replying to [comment:134 dimpase]:\n\nThanks for rechecking and for fixing the make target for osx!\n\n```\n----------------------------------------------------------------------\nsage -t src/sage/combinat/root_system/coxeter_group.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nI doubt this worked before, I only replaced `# optional - chevie` by `# optional - gap3`. It has been there since 2013:\n\n```\n$ git blame -L220,+10 src/sage/combinat/root_system/coxeter_group.py\ndb0cda35 (Anne Schilling 2013-01-22 15:31:57 -0800 220)         A temporary workaround for compatibility with Sage's\ndb0cda35 (Anne Schilling 2013-01-22 15:31:57 -0800 221)         permutation groups\ndb0cda35 (Anne Schilling 2013-01-22 15:31:57 -0800 222) \ndb0cda35 (Anne Schilling 2013-01-22 15:31:57 -0800 223)         TESTS::\ndb0cda35 (Anne Schilling 2013-01-22 15:31:57 -0800 224) \n1452e665 (Jeroen Demeyer 2013-03-02 13:53:59 +0100 225)             sage: W = CoxeterGroup([\"H\",3])                                  # optional - chevi\n1452e665 (Jeroen Demeyer 2013-03-02 13:53:59 +0100 226)             sage: W._element_class() is W.element_class                      # optional - chevi\ndb0cda35 (Anne Schilling 2013-01-22 15:31:57 -0800 227)             True\ndb0cda35 (Anne Schilling 2013-01-22 15:31:57 -0800 228)         \"\"\"\ndb0cda35 (Anne Schilling 2013-01-22 15:31:57 -0800 229)         return self.element_class\n```\nGetting this properly working will be part of our *finally-get-reflection-groups-smoothly-in-sage-days next week*.",
    "created_at": "2016-04-03T07:57:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272988",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Replying to [comment:134 dimpase]:

Thanks for rechecking and for fixing the make target for osx!

```
----------------------------------------------------------------------
sage -t src/sage/combinat/root_system/coxeter_group.py  # 1 doctest failed
----------------------------------------------------------------------
```
I doubt this worked before, I only replaced `# optional - chevie` by `# optional - gap3`. It has been there since 2013:

```
$ git blame -L220,+10 src/sage/combinat/root_system/coxeter_group.py
db0cda35 (Anne Schilling 2013-01-22 15:31:57 -0800 220)         A temporary workaround for compatibility with Sage's
db0cda35 (Anne Schilling 2013-01-22 15:31:57 -0800 221)         permutation groups
db0cda35 (Anne Schilling 2013-01-22 15:31:57 -0800 222) 
db0cda35 (Anne Schilling 2013-01-22 15:31:57 -0800 223)         TESTS::
db0cda35 (Anne Schilling 2013-01-22 15:31:57 -0800 224) 
1452e665 (Jeroen Demeyer 2013-03-02 13:53:59 +0100 225)             sage: W = CoxeterGroup(["H",3])                                  # optional - chevi
1452e665 (Jeroen Demeyer 2013-03-02 13:53:59 +0100 226)             sage: W._element_class() is W.element_class                      # optional - chevi
db0cda35 (Anne Schilling 2013-01-22 15:31:57 -0800 227)             True
db0cda35 (Anne Schilling 2013-01-22 15:31:57 -0800 228)         """
db0cda35 (Anne Schilling 2013-01-22 15:31:57 -0800 229)         return self.element_class
```
Getting this properly working will be part of our *finally-get-reflection-groups-smoothly-in-sage-days next week*.



---

archive/issue_comments_272989.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-03T14:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272989",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272990.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-04-03T14:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272990",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_272991.json:
```json
{
    "body": "Many thanks to both of you for your reviewing work on this ticket!",
    "created_at": "2016-04-04T07:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272991",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Many thanks to both of you for your reviewing work on this ticket!



---

archive/issue_comments_272992.json:
```json
{
    "body": "Replying to [comment:135 stumpc5]:\n> I doubt this worked before, I only replaced `# optional - chevie` by `# optional - gap3`.\n\n\nExactly. This ticket is not about fixing all doctests, just about adding the package.",
    "created_at": "2016-04-04T11:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272992",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:135 stumpc5]:
> I doubt this worked before, I only replaced `# optional - chevie` by `# optional - gap3`.


Exactly. This ticket is not about fixing all doctests, just about adding the package.



---

archive/issue_comments_272993.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-04-04T21:32:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272993",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_054731.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-04-04T21:32:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19870#event-54731"
}
```



---

archive/issue_comments_272994.json:
```json
{
    "body": "`gap3` is currently broken: #21722",
    "created_at": "2016-10-18T14:50:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19870",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19870#issuecomment-272994",
    "user": "https://github.com/jdemeyer"
}
```

`gap3` is currently broken: #21722
