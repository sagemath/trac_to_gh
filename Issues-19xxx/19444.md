# Issue 19444: sage.misc.functional.log(float(3)) raises an AttributeError

archive/issues_019207.json:
```json
{
    "assignees": [],
    "body": "`import_statements` suggest to import `log` this way:\n\n```\nsage: import_statements('log')\n# **Warning**: distinct objects with name 'log' in:\n#   - sage.functions.log\n#   - math\n#   - sage.functions\n#   - sage.misc.functional\nfrom sage.misc.functional import log\n```\n\nWhile those works:\n\n```\nsage: math.log(float(3))\n1.0986122886681098\nsage: sage.functions.log.log(float(3))\n1.0986122886681098\n```\n\nThis one raises an `AttributeError`:\n\n```\nsage: sage.misc.functional.log(float(3))\nTraceback (most recent call last):\n...\nAttributeError: 'sage.rings.real_double.RealDoubleElement' object has no attribute '_log_base'\n```\n\nA subquestion is why do we have two implementations of `log`?\n\nCC:  @tscrim @jdemeyer @jhpalmieri\n\nBranch/Commit: **[d2f7962](https://github.com/sagemath/sagetrac-mirror/commit/d2f7962a6ee8a2e6e0b174083a44b4ed067b5785)**\n\nReviewer: **S\u00e9bastien Labb\u00e9**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nComponent: **basic arithmetic**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19444_\n\n",
    "closed_at": "2017-09-15T07:47:39Z",
    "created_at": "2015-10-21T08:07:02Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sage.misc.functional.log(float(3)) raises an AttributeError",
    "type": "issue",
    "updated_at": "2017-09-15T07:47:39Z",
    "url": "https://github.com/sagemath/sage/issues/19444",
    "user": "https://github.com/seblabbe"
}
```
`import_statements` suggest to import `log` this way:

```
sage: import_statements('log')
# **Warning**: distinct objects with name 'log' in:
#   - sage.functions.log
#   - math
#   - sage.functions
#   - sage.misc.functional
from sage.misc.functional import log
```

While those works:

```
sage: math.log(float(3))
1.0986122886681098
sage: sage.functions.log.log(float(3))
1.0986122886681098
```

This one raises an `AttributeError`:

```
sage: sage.misc.functional.log(float(3))
Traceback (most recent call last):
...
AttributeError: 'sage.rings.real_double.RealDoubleElement' object has no attribute '_log_base'
```

A subquestion is why do we have two implementations of `log`?

CC:  @tscrim @jdemeyer @jhpalmieri

Branch/Commit: **[d2f7962](https://github.com/sagemath/sagetrac-mirror/commit/d2f7962a6ee8a2e6e0b174083a44b4ed067b5785)**

Reviewer: **Sébastien Labbé**

Author: **Frédéric Chapoton**

Component: **basic arithmetic**

_Issue created by migration from https://trac.sagemath.org/ticket/19444_





---

archive/issue_events_275629.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-10-21T08:07:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275629"
}
```



---

archive/issue_events_275630.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-10-21T08:07:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "c: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275630"
}
```



---

archive/issue_events_275631.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-10-21T08:07:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275631"
}
```



---

archive/issue_events_275632.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2015-10-21T08:07:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275632"
}
```



---

archive/issue_events_275633.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-09-03T19:59:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275633"
}
```



---

archive/issue_events_275634.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-09-03T19:59:07Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275634"
}
```



---

archive/issue_events_275635.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-09-03T19:59:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275635"
}
```



---

archive/issue_comments_276379.json:
```json
{
    "body": "Author: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2017-09-03T19:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276379",
    "user": "https://github.com/fchapoton"
}
```

Author: **Frédéric Chapoton**



---

archive/issue_comments_276380.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nDone. This should be an easy review.\n\nNOTA BENE: Getting rid of this log function (in favor of the one in functions.log) should be done in another ticket. I tried to do that, but sutmbled on the infamous import hell (import cycles everywhere).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4c012de47d26ab2fabb24266805ac6dccd5a8cb\">f4c012d</a></td><td><code>fixing the behaviour of misc.functional.log</code></td></tr></table>\n",
    "created_at": "2017-09-03T19:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276380",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1" align="right">comment:1</div>

Done. This should be an easy review.

NOTA BENE: Getting rid of this log function (in favor of the one in functions.log) should be done in another ticket. I tried to do that, but sutmbled on the infamous import hell (import cycles everywhere).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4c012de47d26ab2fabb24266805ac6dccd5a8cb">f4c012d</a></td><td><code>fixing the behaviour of misc.functional.log</code></td></tr></table>




---

archive/issue_comments_276381.json:
```json
{
    "body": "Branch: **[u/chapoton/19444](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/19444)**",
    "created_at": "2017-09-03T19:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276381",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/19444](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/19444)**



---

archive/issue_comments_276382.json:
```json
{
    "body": "Commit: **[f4c012d](https://github.com/sagemath/sagetrac-mirror/commit/f4c012de47d26ab2fabb24266805ac6dccd5a8cb)**",
    "created_at": "2017-09-03T19:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276382",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[f4c012d](https://github.com/sagemath/sagetrac-mirror/commit/f4c012de47d26ab2fabb24266805ac6dccd5a8cb)**



---

archive/issue_comments_276383.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThis implementation is very weak. How can you assume that this is supposed to be the real logarithm?\n\n```\nsage: sage.misc.functional.log(complex(3j))\nTraceback (most recent call last):\n...\nTypeError: can't convert complex to float\n```\nversus\n\n```\nsage: sage.misc.functional.log(CDF(0,3))\n1.0986122886681098 + 1.5707963267948966*I\n```",
    "created_at": "2017-09-03T21:09:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276383",
    "user": "https://github.com/videlec"
}
```

<div id="comment:2" align="right">comment:2</div>

This implementation is very weak. How can you assume that this is supposed to be the real logarithm?

```
sage: sage.misc.functional.log(complex(3j))
Traceback (most recent call last):
...
TypeError: can't convert complex to float
```
versus

```
sage: sage.misc.functional.log(CDF(0,3))
1.0986122886681098 + 1.5707963267948966*I
```



---

archive/issue_comments_276384.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThere is no need to make another perfect log, there is one already in functions.log, which is the one we provide as \"log\" in the global namespace. We should fix the issue raised here. And later get rid of this function, which is only used 10 times or so.",
    "created_at": "2017-09-04T05:56:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276384",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">comment:3</div>

There is no need to make another perfect log, there is one already in functions.log, which is the one we provide as "log" in the global namespace. We should fix the issue raised here. And later get rid of this function, which is only used 10 times or so.



---

archive/issue_comments_276385.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nWhat is the point of fixing an issue on a useless function? If I open a ticket for the complex case will you fix it ;-? If useless, the log from functional would better be deprecated and this ticket closed as invalid.\n\nAnyway, the complaint is about `import_statements` that is not fixed by your branch.",
    "created_at": "2017-09-04T06:06:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276385",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

What is the point of fixing an issue on a useless function? If I open a ticket for the complex case will you fix it ;-? If useless, the log from functional would better be deprecated and this ticket closed as invalid.

Anyway, the complaint is about `import_statements` that is not fixed by your branch.



---

archive/issue_comments_276386.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAnd indeed, there is something wrong with `find_objects_from_name`\n\n```\nsage: \nsage: from sage.misc.dev_tools import find_objects_from_name\nsage: find_objects_from_name('log')\n[<function log at ...>,\n <function log at ...>,\n log,\n <built-in function log>,\n <module 'sage.functions.log' from '/opt/sage/local/lib/python2.7/site-packages/sage/functions/log.pyc'>]\n```\nThe above is wrong since `log` is in the global namespace and the answer should have been the log from the global namespace...",
    "created_at": "2017-09-04T06:11:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276386",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

And indeed, there is something wrong with `find_objects_from_name`

```
sage: 
sage: from sage.misc.dev_tools import find_objects_from_name
sage: find_objects_from_name('log')
[<function log at ...>,
 <function log at ...>,
 log,
 <built-in function log>,
 <module 'sage.functions.log' from '/opt/sage/local/lib/python2.7/site-packages/sage/functions/log.pyc'>]
```
The above is wrong since `log` is in the global namespace and the answer should have been the log from the global namespace...



---

archive/issue_comments_276387.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nAnd indeed, `globals()` is restricted to the module where the function is defined... so that its usage is wrong.",
    "created_at": "2017-09-04T06:14:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276387",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

And indeed, `globals()` is restricted to the module where the function is defined... so that its usage is wrong.



---

archive/issue_comments_276388.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nSee #23779 for the fix to `import_statements`",
    "created_at": "2017-09-04T06:42:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276388",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">comment:7</div>

See #23779 for the fix to `import_statements`



---

archive/issue_comments_276389.json:
```json
{
    "body": "Changed commit from **[f4c012d](https://github.com/sagemath/sagetrac-mirror/commit/f4c012de47d26ab2fabb24266805ac6dccd5a8cb)** to **[02e1fc0](https://github.com/sagemath/sagetrac-mirror/commit/02e1fc084228ff509b6927ce82190acb55426caf)**",
    "created_at": "2017-09-04T07:03:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276389",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f4c012d](https://github.com/sagemath/sagetrac-mirror/commit/f4c012de47d26ab2fabb24266805ac6dccd5a8cb)** to **[02e1fc0](https://github.com/sagemath/sagetrac-mirror/commit/02e1fc084228ff509b6927ce82190acb55426caf)**



---

archive/issue_comments_276390.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0aa14ffe38fb646f1cb1f1d5c692a1f96dbf36d\">b0aa14f</a></td><td><code>test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02e1fc084228ff509b6927ce82190acb55426caf\">02e1fc0</a></td><td><code>trac 19444 avoid circular imports</code></td></tr></table>\n",
    "created_at": "2017-09-04T07:03:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276390",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0aa14ffe38fb646f1cb1f1d5c692a1f96dbf36d">b0aa14f</a></td><td><code>test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02e1fc084228ff509b6927ce82190acb55426caf">02e1fc0</a></td><td><code>trac 19444 avoid circular imports</code></td></tr></table>




---

archive/issue_comments_276391.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nok, done",
    "created_at": "2017-09-04T07:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276391",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">comment:9</div>

ok, done



---

archive/issue_comments_276392.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1a85c98b3d957bc23f9002de7db6cc54e52dce0\">b1a85c9</a></td><td><code>trac 19444 fixing another log import</code></td></tr></table>\n",
    "created_at": "2017-09-04T11:23:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276392",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1a85c98b3d957bc23f9002de7db6cc54e52dce0">b1a85c9</a></td><td><code>trac 19444 fixing another log import</code></td></tr></table>




---

archive/issue_comments_276393.json:
```json
{
    "body": "Changed commit from **[02e1fc0](https://github.com/sagemath/sagetrac-mirror/commit/02e1fc084228ff509b6927ce82190acb55426caf)** to **[b1a85c9](https://github.com/sagemath/sagetrac-mirror/commit/b1a85c98b3d957bc23f9002de7db6cc54e52dce0)**",
    "created_at": "2017-09-04T11:23:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276393",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[02e1fc0](https://github.com/sagemath/sagetrac-mirror/commit/02e1fc084228ff509b6927ce82190acb55426caf)** to **[b1a85c9](https://github.com/sagemath/sagetrac-mirror/commit/b1a85c98b3d957bc23f9002de7db6cc54e52dce0)**



---

archive/issue_comments_276394.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nIf it turns out that for some reason I have used the bad log function in my code and I now get the following error message:\n\n```\nDeprecationWarning: this version of log is no longer used\n```\nI will not understand and I will lose time to understand what is happening.\n\nI much prefer\n\n```\nDeprecationWarning: function sage.misc.functional.log is deprecated, use sage.functions.log or log from the global sage namespace instead\n```",
    "created_at": "2017-09-04T12:07:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276394",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:11" align="right">comment:11</div>

If it turns out that for some reason I have used the bad log function in my code and I now get the following error message:

```
DeprecationWarning: this version of log is no longer used
```
I will not understand and I will lose time to understand what is happening.

I much prefer

```
DeprecationWarning: function sage.misc.functional.log is deprecated, use sage.functions.log or log from the global sage namespace instead
```



---

archive/issue_events_275636.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-09-04T12:07:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275636"
}
```



---

archive/issue_events_275637.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-09-04T12:07:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275637"
}
```



---

archive/issue_comments_276395.json:
```json
{
    "body": "Reviewer: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2017-09-04T12:07:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276395",
    "user": "https://github.com/seblabbe"
}
```

Reviewer: **Sébastien Labbé**



---

archive/issue_comments_276396.json:
```json
{
    "body": "Changed commit from **[b1a85c9](https://github.com/sagemath/sagetrac-mirror/commit/b1a85c98b3d957bc23f9002de7db6cc54e52dce0)** to **[465125e](https://github.com/sagemath/sagetrac-mirror/commit/465125e6133b5f33493d1f78b98237228bb7dae4)**",
    "created_at": "2017-09-04T12:10:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276396",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b1a85c9](https://github.com/sagemath/sagetrac-mirror/commit/b1a85c98b3d957bc23f9002de7db6cc54e52dce0)** to **[465125e](https://github.com/sagemath/sagetrac-mirror/commit/465125e6133b5f33493d1f78b98237228bb7dae4)**



---

archive/issue_comments_276397.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/465125e6133b5f33493d1f78b98237228bb7dae4\">465125e</a></td><td><code>trac 19444 better deprecation message</code></td></tr></table>\n",
    "created_at": "2017-09-04T12:10:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276397",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/465125e6133b5f33493d1f78b98237228bb7dae4">465125e</a></td><td><code>trac 19444 better deprecation message</code></td></tr></table>




---

archive/issue_comments_276398.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nDone",
    "created_at": "2017-09-04T12:11:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276398",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:13" align="right">comment:13</div>

Done



---

archive/issue_events_275638.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-09-04T12:11:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275638"
}
```



---

archive/issue_events_275639.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-09-04T12:11:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275639"
}
```



---

archive/issue_comments_276399.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThis is wrong:\n\n```diff\n-        k = int(ceil(log(n,2)))\n+        k = int(ceil(RDF(n).log(2)))\n```\nDo not use floating-point computations when you want an exact answer.\n\nAn exception to this would be MPFR (used in Sage by `RR`) because that does give a guarantee of exactness if possible.\n\nSo, you should either use `ZZ` or `RR` to do this computation.",
    "created_at": "2017-09-04T12:16:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276399",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

This is wrong:

```diff
-        k = int(ceil(log(n,2)))
+        k = int(ceil(RDF(n).log(2)))
```
Do not use floating-point computations when you want an exact answer.

An exception to this would be MPFR (used in Sage by `RR`) because that does give a guarantee of exactness if possible.

So, you should either use `ZZ` or `RR` to do this computation.



---

archive/issue_events_275640.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-09-04T12:16:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275640"
}
```



---

archive/issue_events_275641.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-09-04T12:16:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275641"
}
```



---

archive/issue_comments_276400.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI would replace `ceil(log(n,2))` by `(ZZ(n) - 1).nbits()` which is guaranteed to be correct and reasonably fast.",
    "created_at": "2017-09-04T12:21:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276400",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

I would replace `ceil(log(n,2))` by `(ZZ(n) - 1).nbits()` which is guaranteed to be correct and reasonably fast.



---

archive/issue_comments_276401.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59f1ee4a0b5f3fc937a78fe7b5232937a5e0f2c3\">59f1ee4</a></td><td><code>trac 19444 using nbits</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e09327389baa0b96060ac5ea36cf77b69ee6dab6\">e093273</a></td><td><code>Merge branch 'u/chapoton/19444'</code></td></tr></table>\n",
    "created_at": "2017-09-04T18:48:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276401",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59f1ee4a0b5f3fc937a78fe7b5232937a5e0f2c3">59f1ee4</a></td><td><code>trac 19444 using nbits</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e09327389baa0b96060ac5ea36cf77b69ee6dab6">e093273</a></td><td><code>Merge branch 'u/chapoton/19444'</code></td></tr></table>




---

archive/issue_comments_276402.json:
```json
{
    "body": "Changed commit from **[465125e](https://github.com/sagemath/sagetrac-mirror/commit/465125e6133b5f33493d1f78b98237228bb7dae4)** to **[e093273](https://github.com/sagemath/sagetrac-mirror/commit/e09327389baa0b96060ac5ea36cf77b69ee6dab6)**",
    "created_at": "2017-09-04T18:48:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276402",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[465125e](https://github.com/sagemath/sagetrac-mirror/commit/465125e6133b5f33493d1f78b98237228bb7dae4)** to **[e093273](https://github.com/sagemath/sagetrac-mirror/commit/e09327389baa0b96060ac5ea36cf77b69ee6dab6)**



---

archive/issue_comments_276403.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nok ; but now there remains an RDF in \"src/sage/rings/finite_rings/element_ntl_gf2e.pyx\"",
    "created_at": "2017-09-04T20:14:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276403",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:18" align="right">comment:18</div>

ok ; but now there remains an RDF in "src/sage/rings/finite_rings/element_ntl_gf2e.pyx"



---

archive/issue_comments_276404.json:
```json
{
    "body": "Changed commit from **[e093273](https://github.com/sagemath/sagetrac-mirror/commit/e09327389baa0b96060ac5ea36cf77b69ee6dab6)** to **[5489453](https://github.com/sagemath/sagetrac-mirror/commit/5489453100b096923d1376b82139c4d3952edd83)**",
    "created_at": "2017-09-06T11:50:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276404",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e093273](https://github.com/sagemath/sagetrac-mirror/commit/e09327389baa0b96060ac5ea36cf77b69ee6dab6)** to **[5489453](https://github.com/sagemath/sagetrac-mirror/commit/5489453100b096923d1376b82139c4d3952edd83)**



---

archive/issue_comments_276405.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed4e22ab48087e7ee884d2a7b36ef9e83267a920\">ed4e22a</a></td><td><code>Merge branch 'u/chapoton/19444' in 8.1.b4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5489453100b096923d1376b82139c4d3952edd83\">5489453</a></td><td><code>trac 19444 do not use RDF().log()</code></td></tr></table>\n",
    "created_at": "2017-09-06T11:50:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276405",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed4e22ab48087e7ee884d2a7b36ef9e83267a920">ed4e22a</a></td><td><code>Merge branch 'u/chapoton/19444' in 8.1.b4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5489453100b096923d1376b82139c4d3952edd83">5489453</a></td><td><code>trac 19444 do not use RDF().log()</code></td></tr></table>




---

archive/issue_events_275642.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-09-06T11:50:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275642"
}
```



---

archive/issue_events_275643.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-09-06T11:50:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275643"
}
```



---

archive/issue_comments_276406.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nshould be good now",
    "created_at": "2017-09-06T11:50:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276406",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:20" align="right">comment:20</div>

should be good now



---

archive/issue_comments_276407.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nIn the light of `__future__ division`, it is better to use `// 8` instead of `/ 8`.",
    "created_at": "2017-09-06T11:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276407",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

In the light of `__future__ division`, it is better to use `// 8` instead of `/ 8`.



---

archive/issue_comments_276408.json:
```json
{
    "body": "Changed commit from **[5489453](https://github.com/sagemath/sagetrac-mirror/commit/5489453100b096923d1376b82139c4d3952edd83)** to **[d2f7962](https://github.com/sagemath/sagetrac-mirror/commit/d2f7962a6ee8a2e6e0b174083a44b4ed067b5785)**",
    "created_at": "2017-09-06T14:05:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276408",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5489453](https://github.com/sagemath/sagetrac-mirror/commit/5489453100b096923d1376b82139c4d3952edd83)** to **[d2f7962](https://github.com/sagemath/sagetrac-mirror/commit/d2f7962a6ee8a2e6e0b174083a44b4ed067b5785)**



---

archive/issue_comments_276409.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d2f7962a6ee8a2e6e0b174083a44b4ed067b5785\">d2f7962</a></td><td><code>trac 19444 double //</code></td></tr></table>\n",
    "created_at": "2017-09-06T14:05:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276409",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d2f7962a6ee8a2e6e0b174083a44b4ed067b5785">d2f7962</a></td><td><code>trac 19444 double //</code></td></tr></table>




---

archive/issue_comments_276410.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\ndone",
    "created_at": "2017-09-06T14:05:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276410",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:23" align="right">comment:23</div>

done



---

archive/issue_comments_276411.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nbot is morally green",
    "created_at": "2017-09-06T16:21:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276411",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:24" align="right">comment:24</div>

bot is morally green



---

archive/issue_events_275644.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-09-11T13:19:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275644"
}
```



---

archive/issue_events_275645.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-09-11T13:19:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275645"
}
```



---

archive/issue_events_275646.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-15T07:47:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275646"
}
```



---

archive/issue_events_275647.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1582809e517d8c8b3ee0abf4088fb2faa79a6cef",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-09-15T07:47:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19444#event-275647"
}
```



---

archive/issue_comments_276412.json:
```json
{
    "body": "Changed branch from **[u/chapoton/19444](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/19444)** to **[d2f7962](https://github.com/sagemath/sagetrac-mirror/commit/d2f7962a6ee8a2e6e0b174083a44b4ed067b5785)**",
    "created_at": "2017-09-15T07:47:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19444#issuecomment-276412",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/19444](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/19444)** to **[d2f7962](https://github.com/sagemath/sagetrac-mirror/commit/d2f7962a6ee8a2e6e0b174083a44b4ed067b5785)**
