# Issue 19169: Create has_cm() function for modular forms

archive/issues_018932.json:
```json
{
    "assignees": [],
    "body": "A modular form f has complex multiplication (cm) if there is a quadratic character \\epsilon such that\n\na(p,f) = \\epsilon(p)*a(p,f)\n\nfor all but finitely many primes p (those dividing the level of f).  (Here, a(p,f) are the Fourier coefficients of f.)  This patch creates a method for the modular forms class in Sage to test whether a given modular form has cm.  \n\nI will post code shortly.\n\nKeywords: **modular form, cm, complex multiplication, sd69, sd87**\n\nBranch/Commit: **[849c048](https://github.com/sagemath/sagetrac-mirror/commit/849c0483b12c58efe6919cf9aaba443dc20fa2ec)**\n\nReviewer: **Aly Deines, David Loeffler, John Cremona**\n\nAuthor: **Jaclyn Lang, Amy Feaver, Lubjana Beshaj, Michelle Kovesi**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19169_\n\n",
    "closed_at": "2017-12-14T12:40:11Z",
    "created_at": "2015-09-08T22:01:12Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20modular%20forms",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Create has_cm() function for modular forms",
    "type": "issue",
    "updated_at": "2017-12-14T12:40:11Z",
    "url": "https://github.com/sagemath/sage/issues/19169",
    "user": "https://github.com/sagetrac-jlang"
}
```
A modular form f has complex multiplication (cm) if there is a quadratic character \epsilon such that

a(p,f) = \epsilon(p)*a(p,f)

for all but finitely many primes p (those dividing the level of f).  (Here, a(p,f) are the Fourier coefficients of f.)  This patch creates a method for the modular forms class in Sage to test whether a given modular form has cm.  

I will post code shortly.

Keywords: **modular form, cm, complex multiplication, sd69, sd87**

Branch/Commit: **[849c048](https://github.com/sagemath/sagetrac-mirror/commit/849c0483b12c58efe6919cf9aaba443dc20fa2ec)**

Reviewer: **Aly Deines, David Loeffler, John Cremona**

Author: **Jaclyn Lang, Amy Feaver, Lubjana Beshaj, Michelle Kovesi**

_Issue created by migration from https://trac.sagemath.org/ticket/19169_





---

archive/issue_events_254338.json:
```json
{
    "actor": "https://github.com/sagetrac-jlang",
    "created_at": "2015-09-08T22:01:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254338"
}
```



---

archive/issue_events_254339.json:
```json
{
    "actor": "https://github.com/sagetrac-jlang",
    "created_at": "2015-09-08T22:01:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20modular%20forms",
    "label_color": "0000ff",
    "label_name": "component: modular forms",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254339"
}
```



---

archive/issue_events_254340.json:
```json
{
    "actor": "https://github.com/sagetrac-jlang",
    "created_at": "2015-09-08T22:01:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254340"
}
```



---

archive/issue_events_254341.json:
```json
{
    "actor": "https://github.com/sagetrac-jlang",
    "created_at": "2015-09-08T22:01:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254341"
}
```



---

archive/issue_comments_273815.json:
```json
{
    "body": "Changed author from **Jaclyn Lang, Amy Feaver, Lubjana Beshaj** to **Jaclyn Lang, Amy Feaver, Lubjana Beshaj, Michelle Kovesi**",
    "created_at": "2015-09-08T22:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273815",
    "user": "https://github.com/sagetrac-jlang"
}
```

Changed author from **Jaclyn Lang, Amy Feaver, Lubjana Beshaj** to **Jaclyn Lang, Amy Feaver, Lubjana Beshaj, Michelle Kovesi**



---

archive/issue_comments_273816.json:
```json
{
    "body": "Changed keywords from **modular form, cm, sd69** to **modular form, cm, complex multiplication, sd69**",
    "created_at": "2015-09-08T22:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273816",
    "user": "https://github.com/sagetrac-jlang"
}
```

Changed keywords from **modular form, cm, sd69** to **modular form, cm, complex multiplication, sd69**



---

archive/issue_comments_273817.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n-A modular form $f$ has complex multiplication (cm) if there is a quadratic character $\\epsilon$ such that\n-\\[\n-a_p(f) = \\epsilon a_p(f)\n-\\]\n-for all but finitely many primes $p$ (those dividing the level of $f$).  (Here, $a_p(f$) are the Fourier coefficients of $f$.)  This patch creates a method for the modular forms class in Sage to test whether a given modular form has cm.  \n+A modular form f has complex multiplication (cm) if there is a quadratic character \\epsilon such that\n \n+a(p,f) = \\epsilon(p)*a(p,f)\n+\n+for all but finitely many primes p (those dividing the level of f).  (Here, a(p,f) are the Fourier coefficients of f.)  This patch creates a method for the modular forms class in Sage to test whether a given modular form has cm.  \n+\n+I will post code shortly.\n``````\n",
    "created_at": "2015-09-08T22:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273817",
    "user": "https://github.com/sagetrac-jlang"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
-A modular form $f$ has complex multiplication (cm) if there is a quadratic character $\epsilon$ such that
-\[
-a_p(f) = \epsilon a_p(f)
-\]
-for all but finitely many primes $p$ (those dividing the level of $f$).  (Here, $a_p(f$) are the Fourier coefficients of $f$.)  This patch creates a method for the modular forms class in Sage to test whether a given modular form has cm.  
+A modular form f has complex multiplication (cm) if there is a quadratic character \epsilon such that
 
+a(p,f) = \epsilon(p)*a(p,f)
+
+for all but finitely many primes p (those dividing the level of f).  (Here, a(p,f) are the Fourier coefficients of f.)  This patch creates a method for the modular forms class in Sage to test whether a given modular form has cm.  
+
+I will post code shortly.
``````




---

archive/issue_comments_273818.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nAny progress on this code?",
    "created_at": "2017-02-06T17:44:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273818",
    "user": "https://github.com/roed314"
}
```

<div id="comment:2" align="right">Comment 2</div>

Any progress on this code?



---

archive/issue_comments_273819.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nReplying to [@roed314](#comment%3A2):\n> Any progress on this code?\n\nThe code was ready to go as of September 2015, but I had trouble getting a working version of Sage downloaded onto my computer.  (I have very minimal experience with all things computer-related.)  I still have the file with the code in it, and I am happy to send it to anyone who wants to try getting it into Sage.  I don't have the time or expertise to try again.",
    "created_at": "2017-02-06T19:20:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273819",
    "user": "https://github.com/sagetrac-jlang"
}
```

<div id="comment:3" align="right">Comment 3</div>

Replying to [@roed314](#comment%3A2):
> Any progress on this code?

The code was ready to go as of September 2015, but I had trouble getting a working version of Sage downloaded onto my computer.  (I have very minimal experience with all things computer-related.)  I still have the file with the code in it, and I am happy to send it to anyone who wants to try getting it into Sage.  I don't have the time or expertise to try again.



---

archive/issue_comments_273820.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nOne option to make sure that the code doesn't get lost is to to attach it to this ticket.  Someone else can then make it into a git branch.",
    "created_at": "2017-02-06T19:54:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273820",
    "user": "https://github.com/roed314"
}
```

<div id="comment:4" align="right">Comment 4</div>

One option to make sure that the code doesn't get lost is to to attach it to this ticket.  Someone else can then make it into a git branch.



---

archive/issue_comments_273821.json:
```json
{
    "body": "As of September 2015, this was supposed to be the code to add the function has_CM to Sage.  It may be out of date now.",
    "created_at": "2017-02-06T20:00:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273821",
    "user": "https://github.com/sagetrac-jlang"
}
```

As of September 2015, this was supposed to be the code to add the function has_CM to Sage.  It may be out of date now.



---

archive/issue_comments_273822.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nAttachment: **[element.py.gz](https://github.com/sagemath/sage/files/ticket19169/element.py.gz)**\n\nReplying to [@roed314](#comment%3A4):\n> One option to make sure that the code doesn't get lost is to to attach it to this ticket.  Someone else can then make it into a git branch.\n\nThanks for the suggestion; I didn't realize that was an option!  I have attached the code that I have to this ticket.",
    "created_at": "2017-02-06T20:02:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273822",
    "user": "https://github.com/sagetrac-jlang"
}
```

<div id="comment:5" align="right">Comment 5</div>

Attachment: **[element.py.gz](https://github.com/sagemath/sage/files/ticket19169/element.py.gz)**

Replying to [@roed314](#comment%3A4):
> One option to make sure that the code doesn't get lost is to to attach it to this ticket.  Someone else can then make it into a git branch.

Thanks for the suggestion; I didn't realize that was an option!  I have attached the code that I have to this ticket.



---

archive/issue_comments_273823.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\njlang, it would be great to have this in Sage -- any chance you could provide your code according to the usual development process, which is to give a link to a new git branch (see the developers' manual)?  Someone can help you do that.  I can see that your attached file is an edited version of src/sage/modular/modform/element.py which has had some other changes sine you wrote your new functions, so it will not be possible to simply replace it.  What you (or someone) should do is: check out the latest development branch; create a new branch called (say) cm_forms; in the branch add your new functions (methods) ( _q_expansion_bound(), _candidate_characters(), has_cm(); test, commit and push to the trac server.",
    "created_at": "2017-07-18T12:53:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273823",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:6" align="right">Comment 6</div>

jlang, it would be great to have this in Sage -- any chance you could provide your code according to the usual development process, which is to give a link to a new git branch (see the developers' manual)?  Someone can help you do that.  I can see that your attached file is an edited version of src/sage/modular/modform/element.py which has had some other changes sine you wrote your new functions, so it will not be possible to simply replace it.  What you (or someone) should do is: check out the latest development branch; create a new branch called (say) cm_forms; in the branch add your new functions (methods) ( _q_expansion_bound(), _candidate_characters(), has_cm(); test, commit and push to the trac server.



---

archive/issue_comments_273824.json:
```json
{
    "body": "Commit: **[cf7374c](https://github.com/sagemath/sagetrac-mirror/commit/cf7374ccebcb8f2c686226b1699f7d2036bdbbc1)**",
    "created_at": "2017-07-18T14:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273824",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[cf7374c](https://github.com/sagemath/sagetrac-mirror/commit/cf7374ccebcb8f2c686226b1699f7d2036bdbbc1)**



---

archive/issue_events_254342.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-18T14:03:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254342"
}
```



---

archive/issue_comments_273825.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nDone.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf7374ccebcb8f2c686226b1699f7d2036bdbbc1\">cf7374c</a></td><td><code>trac 19169 has_cm for modular forms</code></td></tr></table>\n",
    "created_at": "2017-07-18T14:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273825",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">Comment 7</div>

Done.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf7374ccebcb8f2c686226b1699f7d2036bdbbc1">cf7374c</a></td><td><code>trac 19169 has_cm for modular forms</code></td></tr></table>




---

archive/issue_comments_273826.json:
```json
{
    "body": "Branch: **[u/chapoton/19169](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/19169)**",
    "created_at": "2017-07-18T14:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273826",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/19169](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/19169)**



---

archive/issue_events_254343.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-18T14:04:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254343"
}
```



---

archive/issue_events_254344.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-07-18T14:04:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254344"
}
```



---

archive/issue_comments_273827.json:
```json
{
    "body": "Changed keywords from **modular form, cm, complex multiplication, sd69** to **modular form, cm, complex multiplication, sd69, sd87**",
    "created_at": "2017-07-18T18:11:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273827",
    "user": "https://github.com/sagetrac-christelle"
}
```

Changed keywords from **modular form, cm, complex multiplication, sd69** to **modular form, cm, complex multiplication, sd69, sd87**



---

archive/issue_comments_273828.json:
```json
{
    "body": "Reviewer: **Aly Deines**",
    "created_at": "2017-07-18T20:11:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273828",
    "user": "https://github.com/adeines"
}
```

Reviewer: **Aly Deines**



---

archive/issue_comments_273829.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nLooks good.",
    "created_at": "2017-07-18T20:11:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273829",
    "user": "https://github.com/adeines"
}
```

<div id="comment:10" align="right">Comment 10</div>

Looks good.



---

archive/issue_events_254345.json:
```json
{
    "actor": "https://github.com/adeines",
    "created_at": "2017-07-18T20:11:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254345"
}
```



---

archive/issue_events_254346.json:
```json
{
    "actor": "https://github.com/adeines",
    "created_at": "2017-07-18T20:11:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254346"
}
```



---

archive/issue_comments_273830.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nI have two suggestions to make, though I did not get fast enough and see that there is now a positive review.\n(1) You test all quadratic characters.  It would be enough to test those whose conductor's square divides the level.  And only odd characters (since it is *complex* multiplication).\n(2) Before testing any characters I would do some local tests.  (I just implemented a similar thing for CM testing for elliptic curves, see #23454 -- in fact I found this ticket when doing a search before creating that one).   The idea is to compute `a_p<sup>2-4*p</sup>(k-1)` for a lot of good primes p for which a_p is nonzero.  If the form is CM these will all have the same square-free part, so non-CM forms will be eliminated very quickly, and for forms which pass this test, you would only have *one* character to test.\n\nI am going to take the liberty of setting this back to needs_work but if someone wants to over-rule that and put it back to positive review, with a new ticket for what I have suggested, that is OK with me.",
    "created_at": "2017-07-20T13:05:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273830",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:11" align="right">Comment 11</div>

I have two suggestions to make, though I did not get fast enough and see that there is now a positive review.
(1) You test all quadratic characters.  It would be enough to test those whose conductor's square divides the level.  And only odd characters (since it is *complex* multiplication).
(2) Before testing any characters I would do some local tests.  (I just implemented a similar thing for CM testing for elliptic curves, see #23454 -- in fact I found this ticket when doing a search before creating that one).   The idea is to compute `a_p<sup>2-4*p</sup>(k-1)` for a lot of good primes p for which a_p is nonzero.  If the form is CM these will all have the same square-free part, so non-CM forms will be eliminated very quickly, and for forms which pass this test, you would only have *one* character to test.

I am going to take the liberty of setting this back to needs_work but if someone wants to over-rule that and put it back to positive review, with a new ticket for what I have suggested, that is OK with me.



---

archive/issue_events_254347.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2017-07-20T13:05:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254347"
}
```



---

archive/issue_events_254348.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2017-07-20T13:05:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254348"
}
```



---

archive/issue_comments_273831.json:
```json
{
    "body": "Changed commit from **[cf7374c](https://github.com/sagemath/sagetrac-mirror/commit/cf7374ccebcb8f2c686226b1699f7d2036bdbbc1)** to **[a9b8ca8](https://github.com/sagemath/sagetrac-mirror/commit/a9b8ca849cd0ceda0667be4f5d17fca12a9a1020)**",
    "created_at": "2017-08-26T14:14:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273831",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cf7374c](https://github.com/sagemath/sagetrac-mirror/commit/cf7374ccebcb8f2c686226b1699f7d2036bdbbc1)** to **[a9b8ca8](https://github.com/sagemath/sagetrac-mirror/commit/a9b8ca849cd0ceda0667be4f5d17fca12a9a1020)**



---

archive/issue_comments_273832.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e185c4554b2bc4ffb52a0cf3c0d6277b3a7672a9\">e185c45</a></td><td><code>Merge branch 'u/chapoton/19169' in 8.1.b3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9b8ca849cd0ceda0667be4f5d17fca12a9a1020\">a9b8ca8</a></td><td><code>trac 19169 test less characters (only odd ones)</code></td></tr></table>\n",
    "created_at": "2017-08-26T14:14:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273832",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12" align="right">Comment 12</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e185c4554b2bc4ffb52a0cf3c0d6277b3a7672a9">e185c45</a></td><td><code>Merge branch 'u/chapoton/19169' in 8.1.b3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9b8ca849cd0ceda0667be4f5d17fca12a9a1020">a9b8ca8</a></td><td><code>trac 19169 test less characters (only odd ones)</code></td></tr></table>




---

archive/issue_comments_273833.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nIs my last commit correct ?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e185c4554b2bc4ffb52a0cf3c0d6277b3a7672a9\">e185c45</a></td><td><code>Merge branch 'u/chapoton/19169' in 8.1.b3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9b8ca849cd0ceda0667be4f5d17fca12a9a1020\">a9b8ca8</a></td><td><code>trac 19169 test less characters (only odd ones)</code></td></tr></table>\n",
    "created_at": "2017-08-26T14:14:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273833",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:13" align="right">Comment 13</div>

Is my last commit correct ?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e185c4554b2bc4ffb52a0cf3c0d6277b3a7672a9">e185c45</a></td><td><code>Merge branch 'u/chapoton/19169' in 8.1.b3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9b8ca849cd0ceda0667be4f5d17fca12a9a1020">a9b8ca8</a></td><td><code>trac 19169 test less characters (only odd ones)</code></td></tr></table>




---

archive/issue_events_254349.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-08-26T14:14:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254349"
}
```



---

archive/issue_events_254350.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-08-26T14:14:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254350"
}
```



---

archive/issue_comments_273834.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nThe new code is correct for weight k>=2, probably not for weight 1 but I think that we don't have any weight one forms anyway.",
    "created_at": "2017-08-30T13:55:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273834",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:14" align="right">Comment 14</div>

The new code is correct for weight k>=2, probably not for weight 1 but I think that we don't have any weight one forms anyway.



---

archive/issue_comments_273835.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d2ec9e7a3a3b342bee1f0661827655207445c5b\">0d2ec9e</a></td><td><code>Merge branch 'u/chapoton/19169' in 8.1.b6</code></td></tr></table>\n",
    "created_at": "2017-09-23T19:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273835",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15" align="right">Comment 15</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d2ec9e7a3a3b342bee1f0661827655207445c5b">0d2ec9e</a></td><td><code>Merge branch 'u/chapoton/19169' in 8.1.b6</code></td></tr></table>




---

archive/issue_comments_273836.json:
```json
{
    "body": "Changed commit from **[a9b8ca8](https://github.com/sagemath/sagetrac-mirror/commit/a9b8ca849cd0ceda0667be4f5d17fca12a9a1020)** to **[0d2ec9e](https://github.com/sagemath/sagetrac-mirror/commit/0d2ec9e7a3a3b342bee1f0661827655207445c5b)**",
    "created_at": "2017-09-23T19:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273836",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a9b8ca8](https://github.com/sagemath/sagetrac-mirror/commit/a9b8ca849cd0ceda0667be4f5d17fca12a9a1020)** to **[0d2ec9e](https://github.com/sagemath/sagetrac-mirror/commit/0d2ec9e7a3a3b342bee1f0661827655207445c5b)**



---

archive/issue_comments_273837.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nHold it, the new code is *not* correct, because the assertion \"if f has CM by chi, then the square of the conductor of chi divides the level\" is not true; it only works for forms of trivial character (and even for those I'm a little wary about powers of 2). \n\nThe simplest counterexample I could find was this one:\n\n```\nsage: G = DirichletGroup(21)          # note squarefree level\nsage: eps = G.0 * G.1\nsage: f = Newforms(eps,2)[0]; f\nq + (-zeta6 - 1)*q^3 + (2*zeta6 - 2)*q^4 + O(q^6)\nsage: [f[p] for p in prime_range(200) if kronecker_character(-3)(p) == -1]\n[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n```",
    "created_at": "2017-11-12T15:03:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273837",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:16" align="right">Comment 16</div>

Hold it, the new code is *not* correct, because the assertion "if f has CM by chi, then the square of the conductor of chi divides the level" is not true; it only works for forms of trivial character (and even for those I'm a little wary about powers of 2). 

The simplest counterexample I could find was this one:

```
sage: G = DirichletGroup(21)          # note squarefree level
sage: eps = G.0 * G.1
sage: f = Newforms(eps,2)[0]; f
q + (-zeta6 - 1)*q^3 + (2*zeta6 - 2)*q^4 + O(q^6)
sage: [f[p] for p in prime_range(200) if kronecker_character(-3)(p) == -1]
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
```



---

archive/issue_comments_273838.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nOK I submit.  I must have been thinking of trivial character.  So this would be correct if we fixed it so that for trivial character (nebentypus)  it only checks quadratic characters whose conductor square divides the level, otherwise the larger set of characters?  Is there a similar restriction we can impose for the general case?",
    "created_at": "2017-11-12T16:02:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273838",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:17" align="right">Comment 17</div>

OK I submit.  I must have been thinking of trivial character.  So this would be correct if we fixed it so that for trivial character (nebentypus)  it only checks quadratic characters whose conductor square divides the level, otherwise the larger set of characters?  Is there a similar restriction we can impose for the general case?



---

archive/issue_comments_273839.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nI suspect this won't make much difference in practice; the running time will be overwhelmingly dominated by the computation of Fourier coefficients anyway. \n\nHowever, I think the code can be much speeded up by not computing all the coefficients up to `bound` at once but rather doing this in a loop computing coefficients one at a time and checking them against the candidate characters; if doesn't have CM, then we will almost certainly spot this long before we get up to `bound`. One can also rule out some trivial cases early on (e.g. if there is any prime q which exactly divides the level and which doesn't divide the nebentype conductor, then f can't be CM). \n\n(Also, in the code for `q_expansion_bound`, did someone really seriously think that the best way to loop over the divisors of M was to loop over `prime_range(M+1)` and ignore all primes which don't divide M?)",
    "created_at": "2017-11-12T19:20:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273839",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:18" align="right">Comment 18</div>

I suspect this won't make much difference in practice; the running time will be overwhelmingly dominated by the computation of Fourier coefficients anyway. 

However, I think the code can be much speeded up by not computing all the coefficients up to `bound` at once but rather doing this in a loop computing coefficients one at a time and checking them against the candidate characters; if doesn't have CM, then we will almost certainly spot this long before we get up to `bound`. One can also rule out some trivial cases early on (e.g. if there is any prime q which exactly divides the level and which doesn't divide the nebentype conductor, then f can't be CM). 

(Also, in the code for `q_expansion_bound`, did someone really seriously think that the best way to loop over the divisors of M was to loop over `prime_range(M+1)` and ignore all primes which don't divide M?)



---

archive/issue_comments_273840.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nHi David, while you are correct (that is not a good way to iterate over the divisors of M), the authors are new contributors.  If we want to foster new developers it is perhaps better to phrase things so that they can learn better coding practices as opposed to making fun of them in a public forum.  Also, this is partially my fault as the original reviewer.  I should have caught this and mentioned a better way to iterate.\n\n\nReplying to [@loefflerd](#comment%3A18):\n> I suspect this won't make much difference in practice; the running time will be overwhelmingly dominated by the computation of Fourier coefficients anyway. \n> \n> However, I think the code can be much speeded up by not computing all the coefficients up to `bound` at once but rather doing this in a loop computing coefficients one at a time and checking them against the candidate characters; if doesn't have CM, then we will almost certainly spot this long before we get up to `bound`. One can also rule out some trivial cases early on (e.g. if there is any prime q which exactly divides the level and which doesn't divide the nebentype conductor, then f can't be CM). \n> \n> (Also, in the code for `q_expansion_bound`, did someone really seriously think that the best way to loop over the divisors of M was to loop over `prime_range(M+1)` and ignore all primes which don't divide M?)",
    "created_at": "2017-11-13T21:21:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273840",
    "user": "https://github.com/adeines"
}
```

<div id="comment:19" align="right">Comment 19</div>

Hi David, while you are correct (that is not a good way to iterate over the divisors of M), the authors are new contributors.  If we want to foster new developers it is perhaps better to phrase things so that they can learn better coding practices as opposed to making fun of them in a public forum.  Also, this is partially my fault as the original reviewer.  I should have caught this and mentioned a better way to iterate.


Replying to [@loefflerd](#comment%3A18):
> I suspect this won't make much difference in practice; the running time will be overwhelmingly dominated by the computation of Fourier coefficients anyway. 
> 
> However, I think the code can be much speeded up by not computing all the coefficients up to `bound` at once but rather doing this in a loop computing coefficients one at a time and checking them against the candidate characters; if doesn't have CM, then we will almost certainly spot this long before we get up to `bound`. One can also rule out some trivial cases early on (e.g. if there is any prime q which exactly divides the level and which doesn't divide the nebentype conductor, then f can't be CM). 
> 
> (Also, in the code for `q_expansion_bound`, did someone really seriously think that the best way to loop over the divisors of M was to loop over `prime_range(M+1)` and ignore all primes which don't divide M?)



---

archive/issue_comments_273841.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nHi Aly: that's a fair point. I didn't realise the original authors were first-time contributors, and I apologise for any offence caused. \n\nJust in case any of the original authors are still reading this: a faster and simpler way of iterating over the prime factors of M would be  is something like\n\n```\nfor p in M.prime_divisors():\n    ...\n```",
    "created_at": "2017-11-14T09:46:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273841",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:20" align="right">Comment 20</div>

Hi Aly: that's a fair point. I didn't realise the original authors were first-time contributors, and I apologise for any offence caused. 

Just in case any of the original authors are still reading this: a faster and simpler way of iterating over the prime factors of M would be  is something like

```
for p in M.prime_divisors():
    ...
```



---

archive/issue_comments_273842.json:
```json
{
    "body": "Changed branch from **[u/chapoton/19169](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/19169)** to **[public/19169-has_cm_method](https://github.com/sagemath/sagetrac-mirror/tree/public/19169-has_cm_method)**",
    "created_at": "2017-11-14T17:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273842",
    "user": "https://github.com/loefflerd"
}
```

Changed branch from **[u/chapoton/19169](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/19169)** to **[public/19169-has_cm_method](https://github.com/sagemath/sagetrac-mirror/tree/public/19169-has_cm_method)**



---

archive/issue_comments_273843.json:
```json
{
    "body": "Changed commit from **[0d2ec9e](https://github.com/sagemath/sagetrac-mirror/commit/0d2ec9e7a3a3b342bee1f0661827655207445c5b)** to **[d893f92](https://github.com/sagemath/sagetrac-mirror/commit/d893f9286c280de96c49c5d987f52bb1d9aa7fd9)**",
    "created_at": "2017-11-14T17:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273843",
    "user": "https://github.com/loefflerd"
}
```

Changed commit from **[0d2ec9e](https://github.com/sagemath/sagetrac-mirror/commit/0d2ec9e7a3a3b342bee1f0661827655207445c5b)** to **[d893f92](https://github.com/sagemath/sagetrac-mirror/commit/d893f9286c280de96c49c5d987f52bb1d9aa7fd9)**



---

archive/issue_comments_273844.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nI've just uploaded a new git branch which is based on the original code by Lang et al, but with some of the efficiency improvements we discussed added. (I also moved the code from `ModularFormElement` to `ModularForm_abstract`, since `Newform` objects don't inherit from `ModularFormElement`.) \n\nAly, John: can you check and see if it looks kosher? It would be good to get this function into Sage at last, since it is nearly 2 years since the original code was submitted.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc97ae9a1fde23632c7f8123c1c55b0938bd353d\">dc97ae9</a></td><td><code>Update upstream to 8.1.rc0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d893f9286c280de96c49c5d987f52bb1d9aa7fd9\">d893f92</a></td><td><code>Trac 19169: efficiency improvements, added cm_discriminant function</code></td></tr></table>\n",
    "created_at": "2017-11-14T17:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273844",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:22" align="right">Comment 22</div>

I've just uploaded a new git branch which is based on the original code by Lang et al, but with some of the efficiency improvements we discussed added. (I also moved the code from `ModularFormElement` to `ModularForm_abstract`, since `Newform` objects don't inherit from `ModularFormElement`.) 

Aly, John: can you check and see if it looks kosher? It would be good to get this function into Sage at last, since it is nearly 2 years since the original code was submitted.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc97ae9a1fde23632c7f8123c1c55b0938bd353d">dc97ae9</a></td><td><code>Update upstream to 8.1.rc0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d893f9286c280de96c49c5d987f52bb1d9aa7fd9">d893f92</a></td><td><code>Trac 19169: efficiency improvements, added cm_discriminant function</code></td></tr></table>




---

archive/issue_events_254351.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2017-11-14T17:11:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254351"
}
```



---

archive/issue_events_254352.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2017-11-14T17:11:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254352"
}
```



---

archive/issue_comments_273845.json:
```json
{
    "body": "Changed reviewer from **Aly Deines** to **Aly Deines, David Loeffler**",
    "created_at": "2017-11-14T17:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273845",
    "user": "https://github.com/loefflerd"
}
```

Changed reviewer from **Aly Deines** to **Aly Deines, David Loeffler**



---

archive/issue_comments_273846.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nThe Sage patch-bot (which automatically tests code from \"needs review\" tickets) seems to be ignoring this ticket. I suspect this is because it (stupidly) ignores code by new Sage users.\n\nHence I am **temporarily removing** most of the authors from the ticket \"Authors\" field. I am leaving Amy Feaver because the patchbot apparently knows who she is already.  The missing authors (Jaclyn Lang, Lubjana Beshaj, Michelle Kovesi) should be restored before this ticket is marked closed. \n\nJaclyn, Lubjana, Michelle: please don't take this personally -- the patchbot is a strange and clunky piece of software!",
    "created_at": "2017-11-14T20:50:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273846",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:23" align="right">Comment 23</div>

The Sage patch-bot (which automatically tests code from "needs review" tickets) seems to be ignoring this ticket. I suspect this is because it (stupidly) ignores code by new Sage users.

Hence I am **temporarily removing** most of the authors from the ticket "Authors" field. I am leaving Amy Feaver because the patchbot apparently knows who she is already.  The missing authors (Jaclyn Lang, Lubjana Beshaj, Michelle Kovesi) should be restored before this ticket is marked closed. 

Jaclyn, Lubjana, Michelle: please don't take this personally -- the patchbot is a strange and clunky piece of software!



---

archive/issue_comments_273847.json:
```json
{
    "body": "Changed author from **Jaclyn Lang, Amy Feaver, Lubjana Beshaj, Michelle Kovesi** to **Amy Feaver**",
    "created_at": "2017-11-14T20:50:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273847",
    "user": "https://github.com/loefflerd"
}
```

Changed author from **Jaclyn Lang, Amy Feaver, Lubjana Beshaj, Michelle Kovesi** to **Amy Feaver**



---

archive/issue_comments_273848.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nYou can easily bypass that by running your own patchbot client..",
    "created_at": "2017-11-14T21:14:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273848",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:24" align="right">Comment 24</div>

You can easily bypass that by running your own patchbot client..



---

archive/issue_comments_273849.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nThis:\n\n```\n`self`\n```\nis wrong, and should be instead\n\n```\n``self``\n```\nIf you feel you do not master the rst syntax, then you should build the doc and look at  it.",
    "created_at": "2017-11-14T21:16:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273849",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:25" align="right">Comment 25</div>

This:

```
`self`
```
is wrong, and should be instead

```
``self``
```
If you feel you do not master the rst syntax, then you should build the doc and look at  it.



---

archive/issue_comments_273850.json:
```json
{
    "body": "Changed commit from **[d893f92](https://github.com/sagemath/sagetrac-mirror/commit/d893f9286c280de96c49c5d987f52bb1d9aa7fd9)** to **[849c048](https://github.com/sagemath/sagetrac-mirror/commit/849c0483b12c58efe6919cf9aaba443dc20fa2ec)**",
    "created_at": "2017-11-15T07:05:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273850",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d893f92](https://github.com/sagemath/sagetrac-mirror/commit/d893f9286c280de96c49c5d987f52bb1d9aa7fd9)** to **[849c048](https://github.com/sagemath/sagetrac-mirror/commit/849c0483b12c58efe6919cf9aaba443dc20fa2ec)**



---

archive/issue_comments_273851.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/849c0483b12c58efe6919cf9aaba443dc20fa2ec\">849c048</a></td><td><code>Fix tiny documentation glitches spotted by patchbot</code></td></tr></table>\n",
    "created_at": "2017-11-15T07:05:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273851",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26" align="right">Comment 26</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/849c0483b12c58efe6919cf9aaba443dc20fa2ec">849c048</a></td><td><code>Fix tiny documentation glitches spotted by patchbot</code></td></tr></table>




---

archive/issue_comments_273852.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\n> If you feel you do not master the rst syntax, then you should build the doc and look at it.\n\nThis is actually rather difficult to do if you don't have direct access to a machine powerful enough to run Sage; I do all my Sage hacking via SSH to a remote server, and reading the doc output is difficult under those circumstances. (There are tricks with HTTP over SSH tunnels etc, but it's fiddly to set up.)\n\nIt used to be possible at least to run the docbuild script and look at the output logs, but this has been made much more difficult by the switch to parallel building of the documentation: this has meant that the output of the docbuild script is now almost completely incomprehensible, with any ReST formatting error messages swamped in huge amounts of routine junk output. \n\nAnyway, I have uploaded a patch with precisely 3 bytes of changes, fixing the issues identified by the patchbot.",
    "created_at": "2017-11-15T07:15:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273852",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:27" align="right">Comment 27</div>

> If you feel you do not master the rst syntax, then you should build the doc and look at it.

This is actually rather difficult to do if you don't have direct access to a machine powerful enough to run Sage; I do all my Sage hacking via SSH to a remote server, and reading the doc output is difficult under those circumstances. (There are tricks with HTTP over SSH tunnels etc, but it's fiddly to set up.)

It used to be possible at least to run the docbuild script and look at the output logs, but this has been made much more difficult by the switch to parallel building of the documentation: this has meant that the output of the docbuild script is now almost completely incomprehensible, with any ReST formatting error messages swamped in huge amounts of routine junk output. 

Anyway, I have uploaded a patch with precisely 3 bytes of changes, fixing the issues identified by the patchbot.



---

archive/issue_comments_273853.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\n(The ticket now has a green light from patchbot, so I am restoring the missing authors.)",
    "created_at": "2017-11-15T09:03:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273853",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:28" align="right">Comment 28</div>

(The ticket now has a green light from patchbot, so I am restoring the missing authors.)



---

archive/issue_comments_273854.json:
```json
{
    "body": "Changed author from **Amy Feaver** to **Jaclyn Lang, Amy Feaver, Lubjana Beshaj, Michelle Kovesi**",
    "created_at": "2017-11-15T09:03:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273854",
    "user": "https://github.com/loefflerd"
}
```

Changed author from **Amy Feaver** to **Jaclyn Lang, Amy Feaver, Lubjana Beshaj, Michelle Kovesi**



---

archive/issue_comments_273855.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nI wrote some minor comments yesterday, but today they are not here, and I am not going to repeat them.  As soon as the light goes green again I am happy for this to be merged.",
    "created_at": "2017-11-19T15:41:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273855",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:29" align="right">Comment 29</div>

I wrote some minor comments yesterday, but today they are not here, and I am not going to repeat them.  As soon as the light goes green again I am happy for this to be merged.



---

archive/issue_comments_273856.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\n> As soon as the light goes green again I am happy for this to be merged.\n\nIt won't, because of the two patchbot runs with the current version of the code, one succeeded and the other failed due to a totally unrelated error:\n\n```\nsage -t --long src/sage/graphs/matchpoly.pyx  # Timed out\n```\nSince this obviously has nothing to do with the present ticket I am interpreting your comment as a positive review.",
    "created_at": "2017-11-19T17:58:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273856",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:30" align="right">Comment 30</div>

> As soon as the light goes green again I am happy for this to be merged.

It won't, because of the two patchbot runs with the current version of the code, one succeeded and the other failed due to a totally unrelated error:

```
sage -t --long src/sage/graphs/matchpoly.pyx  # Timed out
```
Since this obviously has nothing to do with the present ticket I am interpreting your comment as a positive review.



---

archive/issue_comments_273857.json:
```json
{
    "body": "Changed reviewer from **Aly Deines, David Loeffler** to **Aly Deines, David Loeffler, John Cremona**",
    "created_at": "2017-11-19T17:58:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273857",
    "user": "https://github.com/loefflerd"
}
```

Changed reviewer from **Aly Deines, David Loeffler** to **Aly Deines, David Loeffler, John Cremona**



---

archive/issue_events_254353.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2017-11-19T17:58:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254353"
}
```



---

archive/issue_events_254354.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2017-11-19T17:58:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254354"
}
```



---

archive/issue_events_254355.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-14T12:40:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254355"
}
```



---

archive/issue_events_254356.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "73e046c10086eb9632dfac06ba7e76d9edfd4633",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-12-14T12:40:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19169#event-254356"
}
```



---

archive/issue_comments_273858.json:
```json
{
    "body": "Changed branch from **[public/19169-has_cm_method](https://github.com/sagemath/sagetrac-mirror/tree/public/19169-has_cm_method)** to **[849c048](https://github.com/sagemath/sagetrac-mirror/commit/849c0483b12c58efe6919cf9aaba443dc20fa2ec)**",
    "created_at": "2017-12-14T12:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19169#issuecomment-273858",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/19169-has_cm_method](https://github.com/sagemath/sagetrac-mirror/tree/public/19169-has_cm_method)** to **[849c048](https://github.com/sagemath/sagetrac-mirror/commit/849c0483b12c58efe6919cf9aaba443dc20fa2ec)**
