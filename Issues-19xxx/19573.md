# Issue 19573: Natural coercion from Integers(p*k) to GF(p) for prime p

archive/issues_019336.json:
```json
{
    "body": "If `p` is a prime divisor of `m` there is currently no natural coercion morphism from `Integers(m)` to `GF(p)` when `p` is a prime that divides `m`:\n\n```\nsage: Integers(9).hom(GF(3))\n---------------------------------------------------------------------------\nTypeError [...]\n```\n\nI don't see why there shouldn't be: there is a natural coercion morphism from `Integers(p)` to `GF(p)` and there is one from `Integers(m)` to `Integers(p)`.\n\nAlso it seems like to change it would just involve changing one line of code.\n\n**CC:**  @tscrim\n\n**Keywords:** coercion, rings\n\n**Branch/Commit:** [28824ef550ef3ffdf457cd66090665f36c0ca73e](https://github.com/sagemath/sagetrac-mirror/commit/28824ef550ef3ffdf457cd66090665f36c0ca73e)\n\n**Reviewer:** Jeroen Demeyer\n\n**Author:** Stefan Witzel\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19573\n\n",
    "closed_at": "2017-06-29T06:46:48Z",
    "created_at": "2015-11-12T10:24:52Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Natural coercion from Integers(p*k) to GF(p) for prime p",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19573",
    "user": "https://trac.sagemath.org/admin/accounts/users/switzel"
}
```
If `p` is a prime divisor of `m` there is currently no natural coercion morphism from `Integers(m)` to `GF(p)` when `p` is a prime that divides `m`:

```
sage: Integers(9).hom(GF(3))
---------------------------------------------------------------------------
TypeError [...]
```

I don't see why there shouldn't be: there is a natural coercion morphism from `Integers(p)` to `GF(p)` and there is one from `Integers(m)` to `Integers(p)`.

Also it seems like to change it would just involve changing one line of code.

**CC:**  @tscrim

**Keywords:** coercion, rings

**Branch/Commit:** [28824ef550ef3ffdf457cd66090665f36c0ca73e](https://github.com/sagemath/sagetrac-mirror/commit/28824ef550ef3ffdf457cd66090665f36c0ca73e)

**Reviewer:** Jeroen Demeyer

**Author:** Stefan Witzel

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/19573





---

archive/issue_comments_354687.json:
```json
{
    "body": "**Branch:** [u/switzel/natural_coercion_from_integers_p_l__to_gf_p__for_prime_p](https://github.com/sagemath/sagetrac-mirror/tree/u/switzel/natural_coercion_from_integers_p_l__to_gf_p__for_prime_p)",
    "created_at": "2015-11-12T13:56:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354687",
    "user": "https://trac.sagemath.org/admin/accounts/users/switzel"
}
```

**Branch:** [u/switzel/natural_coercion_from_integers_p_l__to_gf_p__for_prime_p](https://github.com/sagemath/sagetrac-mirror/tree/u/switzel/natural_coercion_from_integers_p_l__to_gf_p__for_prime_p)



---

archive/issue_comments_354688.json:
```json
{
    "body": "**Commit:** [449c826bda89aae879a81b9def76228397f0e4f1](https://github.com/sagemath/sagetrac-mirror/commit/449c826bda89aae879a81b9def76228397f0e4f1)",
    "created_at": "2015-11-12T14:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354688",
    "user": "https://trac.sagemath.org/admin/accounts/users/switzel"
}
```

**Commit:** [449c826bda89aae879a81b9def76228397f0e4f1](https://github.com/sagemath/sagetrac-mirror/commit/449c826bda89aae879a81b9def76228397f0e4f1)



---

archive/issue_comments_354689.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2015-11-12T14:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354689",
    "user": "https://trac.sagemath.org/admin/accounts/users/switzel"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_354690.json:
```json
{
    "body": "**Author:** Stefan Witzel",
    "created_at": "2015-11-12T14:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354690",
    "user": "https://trac.sagemath.org/admin/accounts/users/switzel"
}
```

**Author:** Stefan Witzel



---

archive/issue_comments_354691.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2015-11-12T23:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354691",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_354692.json:
```json
{
    "body": "<a id='comment:3'></a>\n1. I would put the test you added in the `EXAMPLES` block, not `TESTS`.\n\n2. Add a test showing that there is no coercion from `Integers(9)` to `GF(5)` for example.\n\n3. Ideally it would also work for non-prime finite fields: there should be coercion from `Integers(p*k)` to `GF(p^n)` (I'm not saying you must fix this on this ticket, it's just a suggestion).",
    "created_at": "2015-11-12T23:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354692",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
1. I would put the test you added in the `EXAMPLES` block, not `TESTS`.

2. Add a test showing that there is no coercion from `Integers(9)` to `GF(5)` for example.

3. Ideally it would also work for non-prime finite fields: there should be coercion from `Integers(p*k)` to `GF(p^n)` (I'm not saying you must fix this on this ticket, it's just a suggestion).



---

archive/issue_comments_354693.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2015-11-12T23:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354693",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_events_061211.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "rename": {
        "from": "Natural coercion from Integers(p*l) to GF(p) for prime p",
        "to": "Natural coercion from Integers(p*k) to GF(p) for prime p"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19573#event-61211"
}
```



---

archive/issue_comments_354694.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2017-05-03T19:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354694",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_354695.json:
```json
{
    "body": "<a id='comment:4'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/733c4d9f97a1b08620287dd36537486cab7b1364\">733c4d9</a></td><td><code>Merge branch 'u/switzel/natural_coercion_from_integers_p_l__to_gf_p__for_prime_p' in 8.0.b4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28824ef550ef3ffdf457cd66090665f36c0ca73e\">28824ef</a></td><td><code>trac 19573 one more doctest</code></td></tr></table>\n",
    "created_at": "2017-05-03T19:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354695",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/733c4d9f97a1b08620287dd36537486cab7b1364">733c4d9</a></td><td><code>Merge branch 'u/switzel/natural_coercion_from_integers_p_l__to_gf_p__for_prime_p' in 8.0.b4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28824ef550ef3ffdf457cd66090665f36c0ca73e">28824ef</a></td><td><code>trac 19573 one more doctest</code></td></tr></table>




---

archive/issue_comments_354696.json:
```json
{
    "body": "**Changing commit** from \"[449c826bda89aae879a81b9def76228397f0e4f1](https://github.com/sagemath/sagetrac-mirror/commit/449c826bda89aae879a81b9def76228397f0e4f1)\" to \"[28824ef550ef3ffdf457cd66090665f36c0ca73e](https://github.com/sagemath/sagetrac-mirror/commit/28824ef550ef3ffdf457cd66090665f36c0ca73e)\".",
    "created_at": "2017-05-03T19:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354696",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[449c826bda89aae879a81b9def76228397f0e4f1](https://github.com/sagemath/sagetrac-mirror/commit/449c826bda89aae879a81b9def76228397f0e4f1)" to "[28824ef550ef3ffdf457cd66090665f36c0ca73e](https://github.com/sagemath/sagetrac-mirror/commit/28824ef550ef3ffdf457cd66090665f36c0ca73e)".



---

archive/issue_comments_354697.json:
```json
{
    "body": "**Changing branch** from \"[u/switzel/natural_coercion_from_integers_p_l__to_gf_p__for_prime_p](https://github.com/sagemath/sagetrac-mirror/tree/u/switzel/natural_coercion_from_integers_p_l__to_gf_p__for_prime_p)\" to \"[public/19573](https://github.com/sagemath/sagetrac-mirror/tree/public/19573)\".",
    "created_at": "2017-05-03T19:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354697",
    "user": "https://github.com/fchapoton"
}
```

**Changing branch** from "[u/switzel/natural_coercion_from_integers_p_l__to_gf_p__for_prime_p](https://github.com/sagemath/sagetrac-mirror/tree/u/switzel/natural_coercion_from_integers_p_l__to_gf_p__for_prime_p)" to "[public/19573](https://github.com/sagemath/sagetrac-mirror/tree/public/19573)".



---

archive/issue_events_061212.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-03T20:00:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19573#event-61212"
}
```



---

archive/issue_comments_354698.json:
```json
{
    "body": "<a id='comment:7'></a>\ngreen bot, please review",
    "created_at": "2017-05-09T19:08:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354698",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
green bot, please review



---

archive/issue_comments_354699.json:
```json
{
    "body": "<a id='comment:8'></a>\nping ?",
    "created_at": "2017-05-12T20:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354699",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
ping ?



---

archive/issue_comments_354700.json:
```json
{
    "body": "<a id='comment:9'></a>\nDo you understand the purpose of the check\n\n```\n(not isinstance(S, ResidueField_generic) or\n                     S.degree() == 1)):\n```\nIf `is_instance(S, IntegerModRing_generic)` is True, then I think `S.degree()==1` always, and furthermore I don't see how `not isinstance(S, ResidueField_generic)` could be False. I would be tempted to just delete this, but I don't know this code well.",
    "created_at": "2017-05-12T20:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354700",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>
Do you understand the purpose of the check

```
(not isinstance(S, ResidueField_generic) or
                     S.degree() == 1)):
```
If `is_instance(S, IntegerModRing_generic)` is True, then I think `S.degree()==1` always, and furthermore I don't see how `not isinstance(S, ResidueField_generic)` could be False. I would be tempted to just delete this, but I don't know this code well.



---

archive/issue_comments_354701.json:
```json
{
    "body": "<a id='comment:10'></a>\nWell, I do see how `not isinstance(S, ResidueField_generic)` can be false: `R = ZZ.residue_field(2)` (but I still do not see how `S.degree() == 1` could be false). This residue field does not have good coercion properties, either: as far as I can tell, there is no coercion map from either `ZZ.residue_field(p)` to `Integers(p)`, or from `GF(p)` to `Integers(p)`. Not that this is directly part of this ticket...",
    "created_at": "2017-05-12T20:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354701",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'></a>
Well, I do see how `not isinstance(S, ResidueField_generic)` can be false: `R = ZZ.residue_field(2)` (but I still do not see how `S.degree() == 1` could be false). This residue field does not have good coercion properties, either: as far as I can tell, there is no coercion map from either `ZZ.residue_field(p)` to `Integers(p)`, or from `GF(p)` to `Integers(p)`. Not that this is directly part of this ticket...



---

archive/issue_comments_354702.json:
```json
{
    "body": "<a id='comment:11'></a>\nI also don't understand why `ZZ.residue_field(5)` does not just return the same thing as `Integers(5)`, but I'm not a number theorist.",
    "created_at": "2017-05-12T22:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354702",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:11'></a>
I also don't understand why `ZZ.residue_field(5)` does not just return the same thing as `Integers(5)`, but I'm not a number theorist.



---

archive/issue_comments_354703.json:
```json
{
    "body": "<a id='comment:12'></a>\nSo my very loose understanding is that they all should essentially be the same objects, but they are all considered as different constructions.\n\nFor [comment:9](#comment%3A9), it could be something like `GF(5)`, but that also seems to force a degree of 1. So I think you're right, that we don't need that extra check. However, I also don't know the code enough, but we could just remove it and see if anything breaks.\n\nI agree that the coercion issues should be dealt with, but on another ticket.",
    "created_at": "2017-05-21T06:03:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354703",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>
So my very loose understanding is that they all should essentially be the same objects, but they are all considered as different constructions.

For [comment:9](#comment%3A9), it could be something like `GF(5)`, but that also seems to force a degree of 1. So I think you're right, that we don't need that extra check. However, I also don't know the code enough, but we could just remove it and see if anything breaks.

I agree that the coercion issues should be dealt with, but on another ticket.



---

archive/issue_comments_354704.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2017-06-26T15:14:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354704",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_061213.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-29T06:46:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19573#event-61213"
}
```



---

archive/issue_comments_354705.json:
```json
{
    "body": "**Changing branch** from \"[public/19573](https://github.com/sagemath/sagetrac-mirror/tree/public/19573)\" to \"[28824ef550ef3ffdf457cd66090665f36c0ca73e](https://github.com/sagemath/sagetrac-mirror/commit/28824ef550ef3ffdf457cd66090665f36c0ca73e)\".",
    "created_at": "2017-06-29T06:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354705",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/19573](https://github.com/sagemath/sagetrac-mirror/tree/public/19573)" to "[28824ef550ef3ffdf457cd66090665f36c0ca73e](https://github.com/sagemath/sagetrac-mirror/commit/28824ef550ef3ffdf457cd66090665f36c0ca73e)".



---

archive/issue_comments_354706.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2017-06-29T06:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19573",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19573#issuecomment-354706",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed
