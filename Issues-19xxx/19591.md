# Issue 19591: Zoom+move a Graph d3js representation

archive/issues_019354.json:
```json
{
    "body": "This branch adds a zoom+move feature to Graph.show(method='js').\n\nA graphical bug remains when moving the whole graph after moving a specific vertex, but I have no idea how to fix that and the feature is really useful, even like that `:-/`\n\nNathann\n\nCC:  @fchapoton @dcoudert\n\nReviewer: Nico Van Cleemput\n\nAuthor: Nathann Cohen\n\nBranch: e8cf47fc703ae0fccda1b21981215e904411b114\n\nCommit: e8cf47fc703ae0fccda1b21981215e904411b114\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19591\n\n",
    "closed_at": "2016-02-13T23:56:13Z",
    "created_at": "2015-11-16T22:58:23Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Zoom+move a Graph d3js representation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19591",
    "user": "https://github.com/nathanncohen"
}
```
This branch adds a zoom+move feature to Graph.show(method='js').

A graphical bug remains when moving the whole graph after moving a specific vertex, but I have no idea how to fix that and the feature is really useful, even like that `:-/`

Nathann

CC:  @fchapoton @dcoudert

Reviewer: Nico Van Cleemput

Author: Nathann Cohen

Branch: e8cf47fc703ae0fccda1b21981215e904411b114

Commit: e8cf47fc703ae0fccda1b21981215e904411b114

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19591





---

archive/issue_comments_265579.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2015-11-16T22:59:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19591#issuecomment-265579",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_265580.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-16T22:59:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19591#issuecomment-265580",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_265581.json:
```json
{
    "body": "<a id='comment:2'></a>hmm, how is it supposed to work ? I am not able to zoom.",
    "created_at": "2015-11-21T17:35:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19591#issuecomment-265581",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>hmm, how is it supposed to work ? I am not able to zoom.



---

archive/issue_comments_265582.json:
```json
{
    "body": "<a id='comment:3'></a>ok, works. A bit rough, certainly. Jumps in strange ways. And the size of vertices\ngrows with the zoom, as well as the width of the edges. So it is not very useful\nto see large graphs more clearly. Still interesting to have, I would say, but this\nreally breaks the nice smoothness of the existing viewer.\n\nBy the way, may we close #13418, now that there is method='js' ?",
    "created_at": "2015-11-21T19:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19591#issuecomment-265582",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>ok, works. A bit rough, certainly. Jumps in strange ways. And the size of vertices
grows with the zoom, as well as the width of the edges. So it is not very useful
to see large graphs more clearly. Still interesting to have, I would say, but this
really breaks the nice smoothness of the existing viewer.

By the way, may we close #13418, now that there is method='js' ?



---

archive/issue_comments_265583.json:
```json
{
    "body": "<a id='comment:4'></a>I use it to visualize very large graphs. Some of them are a bit like that:\n\n```\nsage: g = Graph()\nsage: g.add_cycle(range(1000))\nsage: g.show(method='js')\n```\n\nAs you can see, without a zoom this javascript visualization is totally useless.\n\nThe zoom, as you noticed, is a 'graphical' zoom and not a 'semantic' zoom. Another zoom that adapts the size of nodes may be doable (I don't know much about javascript), though perhaps 'zooming out' to visualize the whole graph (as you can don on the example I gave) would become useless, with too big vertices that would then hide the actual graph. I don't know.\n\n> By the way, may we close #13418, now that there is method='js' ?\n\n\n+1 from me.\n\nNathann",
    "created_at": "2015-11-21T23:36:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19591#issuecomment-265583",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>I use it to visualize very large graphs. Some of them are a bit like that:

```
sage: g = Graph()
sage: g.add_cycle(range(1000))
sage: g.show(method='js')
```

As you can see, without a zoom this javascript visualization is totally useless.

The zoom, as you noticed, is a 'graphical' zoom and not a 'semantic' zoom. Another zoom that adapts the size of nodes may be doable (I don't know much about javascript), though perhaps 'zooming out' to visualize the whole graph (as you can don on the example I gave) would become useless, with too big vertices that would then hide the actual graph. I don't know.

> By the way, may we close #13418, now that there is method='js' ?


+1 from me.

Nathann



---

archive/issue_comments_265584.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-29T10:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19591#issuecomment-265584",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_265585.json:
```json
{
    "body": "<a id='comment:6'></a>Here is a very very small commit that changes the default list of colors used by d3js. We used to select \"category20\" but as you can see consecutive colors can be very close to each other, and it made visualization more difficult.\n\nhttp://bl.ocks.org/aaizemberg/78bd3dade9593896a59d\n\nNow this looks better:\n\n```\nsage: graphs.PathGraph(10).show(method='js',vertex_partition=[[i] for i in range(10)])\n```",
    "created_at": "2015-11-29T10:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19591#issuecomment-265585",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>Here is a very very small commit that changes the default list of colors used by d3js. We used to select "category20" but as you can see consecutive colors can be very close to each other, and it made visualization more difficult.

http://bl.ocks.org/aaizemberg/78bd3dade9593896a59d

Now this looks better:

```
sage: graphs.PathGraph(10).show(method='js',vertex_partition=[[i] for i in range(10)])
```



---

archive/issue_comments_265586.json:
```json
{
    "body": "<a id='comment:7'></a>It would be cool if somebody could review this. I keep reaplying it over and over each time I am done with my work on another branch, that's how useful this thing is to me.\n\nNathann",
    "created_at": "2015-12-29T10:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19591#issuecomment-265586",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>It would be cool if somebody could review this. I keep reaplying it over and over each time I am done with my work on another branch, that's how useful this thing is to me.

Nathann



---

archive/issue_comments_265587.json:
```json
{
    "body": "<a id='comment:8'></a>How is the zoom supposed to work? I tried everything, but no change.",
    "created_at": "2016-02-11T17:49:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19591#issuecomment-265587",
    "user": "https://github.com/nvcleemp"
}
```

<a id='comment:8'></a>How is the zoom supposed to work? I tried everything, but no change.



---

archive/issue_comments_265588.json:
```json
{
    "body": "<a id='comment:9'></a>Nevermind, I forgot to rebuild Sage. :-/",
    "created_at": "2016-02-11T17:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19591#issuecomment-265588",
    "user": "https://github.com/nvcleemp"
}
```

<a id='comment:9'></a>Nevermind, I forgot to rebuild Sage. :-/



---

archive/issue_comments_265589.json:
```json
{
    "body": "<a id='comment:10'></a>OK, I got it working now. The added code is short and does what it advertises. For me this is OK, but it should probably be reapplied to the latest version. I actually have no immediate clue of how to reapply, so if you reapply it, I'll re-review it immediately.",
    "created_at": "2016-02-11T21:36:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19591#issuecomment-265589",
    "user": "https://github.com/nvcleemp"
}
```

<a id='comment:10'></a>OK, I got it working now. The added code is short and does what it advertises. For me this is OK, but it should probably be reapplied to the latest version. I actually have no immediate clue of how to reapply, so if you reapply it, I'll re-review it immediately.



---

archive/issue_comments_265590.json:
```json
{
    "body": "<a id='comment:11'></a>Hellooooooo !\n\nThanks for having looked at this ticket.\n\nWhat do you mean by 'reapply it to the latest version' ? The git branch is a bit old indeed but that file has not been touched since, and the fact that the branch's name appears in green in the ticket means that it is still compatible with the latest beta.\n\nI can add a merge commit if you prefer, but that's technically useless.\n\nNathann",
    "created_at": "2016-02-12T09:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19591#issuecomment-265590",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>Hellooooooo !

Thanks for having looked at this ticket.

What do you mean by 'reapply it to the latest version' ? The git branch is a bit old indeed but that file has not been touched since, and the fact that the branch's name appears in green in the ticket means that it is still compatible with the latest beta.

I can add a merge commit if you prefer, but that's technically useless.

Nathann



---

archive/issue_comments_265591.json:
```json
{
    "body": "<a id='comment:12'></a>Hmm, it's been a long week with many early mornings and late evenings, and I guess I was half a sleep yesterday evening. Don't mind my gibberish. I had a new look at your code (since I don't trust my ability to make a good judgement yesterday), and the code looks OK.\n\nCheers\nNico",
    "created_at": "2016-02-12T10:32:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19591#issuecomment-265591",
    "user": "https://github.com/nvcleemp"
}
```

<a id='comment:12'></a>Hmm, it's been a long week with many early mornings and late evenings, and I guess I was half a sleep yesterday evening. Don't mind my gibberish. I had a new look at your code (since I don't trust my ability to make a good judgement yesterday), and the code looks OK.

Cheers
Nico



---

archive/issue_comments_265592.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-12T10:32:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19591#issuecomment-265592",
    "user": "https://github.com/nvcleemp"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_265593.json:
```json
{
    "body": "<a id='comment:13'></a>Thaaaaaaaanks for the review !!! If this code is as useful to others as it is to me, I swear that it is a good addition `:-)`\n\nNathann",
    "created_at": "2016-02-12T11:01:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19591#issuecomment-265593",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>Thaaaaaaaanks for the review !!! If this code is as useful to others as it is to me, I swear that it is a good addition `:-)`

Nathann



---

archive/issue_comments_265594.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-02-13T23:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19591#issuecomment-265594",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_053889.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-13T23:56:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19591",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19591#event-53889"
}
```
