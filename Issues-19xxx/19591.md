# Issue 19591: Zoom+move a Graph d3js representation

archive/issues_019354.json:
```json
{
    "assignees": [],
    "body": "This branch adds a zoom+move feature to Graph.show(method='js').\n\nA graphical bug remains when moving the whole graph after moving a specific vertex, but I have no idea how to fix that and the feature is really useful, even like that `:-/`\n\nNathann\n\nCC:  @fchapoton @dcoudert\n\nBranch/Commit: **[e8cf47f](https://github.com/sagemath/sagetrac-mirror/commit/e8cf47fc703ae0fccda1b21981215e904411b114)**\n\nReviewer: **Nico Van Cleemput**\n\nAuthor: **Nathann Cohen**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19591_\n\n",
    "closed_at": "2016-02-13T23:56:13Z",
    "created_at": "2015-11-16T22:58:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Zoom+move a Graph d3js representation",
    "type": "issue",
    "updated_at": "2016-02-13T23:56:13Z",
    "url": "https://github.com/sagemath/sage/issues/19591",
    "user": "https://github.com/nathanncohen"
}
```
This branch adds a zoom+move feature to Graph.show(method='js').

A graphical bug remains when moving the whole graph after moving a specific vertex, but I have no idea how to fix that and the feature is really useful, even like that `:-/`

Nathann

CC:  @fchapoton @dcoudert

Branch/Commit: **[e8cf47f](https://github.com/sagemath/sagetrac-mirror/commit/e8cf47fc703ae0fccda1b21981215e904411b114)**

Reviewer: **Nico Van Cleemput**

Author: **Nathann Cohen**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/19591_





---

archive/issue_events_277480.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-11-16T22:58:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19591#event-277480"
}
```



---

archive/issue_events_277481.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-11-16T22:58:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19591#event-277481"
}
```



---

archive/issue_events_277482.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-11-16T22:58:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19591#event-277482"
}
```



---

archive/issue_events_277483.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-11-16T22:58:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19591#event-277483"
}
```



---

archive/issue_comments_279279.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef54a760ab2cc9f7c86fe5b0cb527915a4b06750\">ef54a76</a></td><td><code>trac #19591: Zoom+move a Graph d3js representation</code></td></tr></table>\n",
    "created_at": "2015-11-16T22:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279279",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef54a760ab2cc9f7c86fe5b0cb527915a4b06750">ef54a76</a></td><td><code>trac #19591: Zoom+move a Graph d3js representation</code></td></tr></table>




---

archive/issue_events_277484.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-11-16T22:59:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19591#event-277484"
}
```



---

archive/issue_comments_279280.json:
```json
{
    "body": "Branch: **[public/19591](https://github.com/sagemath/sagetrac-mirror/tree/public/19591)**",
    "created_at": "2015-11-16T22:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279280",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[public/19591](https://github.com/sagemath/sagetrac-mirror/tree/public/19591)**



---

archive/issue_comments_279281.json:
```json
{
    "body": "Commit: **[ef54a76](https://github.com/sagemath/sagetrac-mirror/commit/ef54a760ab2cc9f7c86fe5b0cb527915a4b06750)**",
    "created_at": "2015-11-16T22:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279281",
    "user": "https://github.com/nathanncohen"
}
```

Commit: **[ef54a76](https://github.com/sagemath/sagetrac-mirror/commit/ef54a760ab2cc9f7c86fe5b0cb527915a4b06750)**



---

archive/issue_comments_279282.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nhmm, how is it supposed to work ? I am not able to zoom.",
    "created_at": "2015-11-21T17:35:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279282",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">comment:2</div>

hmm, how is it supposed to work ? I am not able to zoom.



---

archive/issue_comments_279283.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nok, works. A bit rough, certainly. Jumps in strange ways. And the size of vertices\ngrows with the zoom, as well as the width of the edges. So it is not very useful\nto see large graphs more clearly. Still interesting to have, I would say, but this\nreally breaks the nice smoothness of the existing viewer.\n\nBy the way, may we close #13418, now that there is method='js' ?",
    "created_at": "2015-11-21T19:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279283",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">comment:3</div>

ok, works. A bit rough, certainly. Jumps in strange ways. And the size of vertices
grows with the zoom, as well as the width of the edges. So it is not very useful
to see large graphs more clearly. Still interesting to have, I would say, but this
really breaks the nice smoothness of the existing viewer.

By the way, may we close #13418, now that there is method='js' ?



---

archive/issue_comments_279284.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI use it to visualize very large graphs. Some of them are a bit like that:\n\n```\nsage: g = Graph()\nsage: g.add_cycle(range(1000))\nsage: g.show(method='js')\n```\n\nAs you can see, without a zoom this javascript visualization is totally useless.\n\nThe zoom, as you noticed, is a 'graphical' zoom and not a 'semantic' zoom. Another zoom that adapts the size of nodes may be doable (I don't know much about javascript), though perhaps 'zooming out' to visualize the whole graph (as you can don on the example I gave) would become useless, with too big vertices that would then hide the actual graph. I don't know.\n\n> By the way, may we close #13418, now that there is method='js' ?\n\n+1 from me.\n\nNathann",
    "created_at": "2015-11-21T23:36:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279284",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">comment:4</div>

I use it to visualize very large graphs. Some of them are a bit like that:

```
sage: g = Graph()
sage: g.add_cycle(range(1000))
sage: g.show(method='js')
```

As you can see, without a zoom this javascript visualization is totally useless.

The zoom, as you noticed, is a 'graphical' zoom and not a 'semantic' zoom. Another zoom that adapts the size of nodes may be doable (I don't know much about javascript), though perhaps 'zooming out' to visualize the whole graph (as you can don on the example I gave) would become useless, with too big vertices that would then hide the actual graph. I don't know.

> By the way, may we close #13418, now that there is method='js' ?

+1 from me.

Nathann



---

archive/issue_comments_279285.json:
```json
{
    "body": "Changed commit from **[ef54a76](https://github.com/sagemath/sagetrac-mirror/commit/ef54a760ab2cc9f7c86fe5b0cb527915a4b06750)** to **[e8cf47f](https://github.com/sagemath/sagetrac-mirror/commit/e8cf47fc703ae0fccda1b21981215e904411b114)**",
    "created_at": "2015-11-29T10:34:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279285",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ef54a76](https://github.com/sagemath/sagetrac-mirror/commit/ef54a760ab2cc9f7c86fe5b0cb527915a4b06750)** to **[e8cf47f](https://github.com/sagemath/sagetrac-mirror/commit/e8cf47fc703ae0fccda1b21981215e904411b114)**



---

archive/issue_comments_279286.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dff2500f8304a05b6b3952fd5ce918ba9060b517\">dff2500</a></td><td><code>trac #19591: Merged with 6.10.beta6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8cf47fc703ae0fccda1b21981215e904411b114\">e8cf47f</a></td><td><code>trac #19591: Change the default list of colors</code></td></tr></table>\n",
    "created_at": "2015-11-29T10:34:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279286",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dff2500f8304a05b6b3952fd5ce918ba9060b517">dff2500</a></td><td><code>trac #19591: Merged with 6.10.beta6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8cf47fc703ae0fccda1b21981215e904411b114">e8cf47f</a></td><td><code>trac #19591: Change the default list of colors</code></td></tr></table>




---

archive/issue_comments_279287.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHere is a very very small commit that changes the default list of colors used by d3js. We used to select \"category20\" but as you can see consecutive colors can be very close to each other, and it made visualization more difficult.\n\nhttp://bl.ocks.org/aaizemberg/78bd3dade9593896a59d\n\nNow this looks better:\n\n```\nsage: graphs.PathGraph(10).show(method='js',vertex_partition=[[i] for i in range(10)])\n```",
    "created_at": "2015-11-29T10:35:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279287",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:6" align="right">comment:6</div>

Here is a very very small commit that changes the default list of colors used by d3js. We used to select "category20" but as you can see consecutive colors can be very close to each other, and it made visualization more difficult.

http://bl.ocks.org/aaizemberg/78bd3dade9593896a59d

Now this looks better:

```
sage: graphs.PathGraph(10).show(method='js',vertex_partition=[[i] for i in range(10)])
```



---

archive/issue_comments_279288.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIt would be cool if somebody could review this. I keep reaplying it over and over each time I am done with my work on another branch, that's how useful this thing is to me.\n\nNathann",
    "created_at": "2015-12-29T10:34:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279288",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

It would be cool if somebody could review this. I keep reaplying it over and over each time I am done with my work on another branch, that's how useful this thing is to me.

Nathann



---

archive/issue_comments_279289.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHow is the zoom supposed to work? I tried everything, but no change.",
    "created_at": "2016-02-11T17:49:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279289",
    "user": "https://github.com/nvcleemp"
}
```

<div id="comment:8" align="right">comment:8</div>

How is the zoom supposed to work? I tried everything, but no change.



---

archive/issue_comments_279290.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nNevermind, I forgot to rebuild Sage. :-/",
    "created_at": "2016-02-11T17:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279290",
    "user": "https://github.com/nvcleemp"
}
```

<div id="comment:9" align="right">comment:9</div>

Nevermind, I forgot to rebuild Sage. :-/



---

archive/issue_comments_279291.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nOK, I got it working now. The added code is short and does what it advertises. For me this is OK, but it should probably be reapplied to the latest version. I actually have no immediate clue of how to reapply, so if you reapply it, I'll re-review it immediately.",
    "created_at": "2016-02-11T21:36:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279291",
    "user": "https://github.com/nvcleemp"
}
```

<div id="comment:10" align="right">comment:10</div>

OK, I got it working now. The added code is short and does what it advertises. For me this is OK, but it should probably be reapplied to the latest version. I actually have no immediate clue of how to reapply, so if you reapply it, I'll re-review it immediately.



---

archive/issue_comments_279292.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nHellooooooo !\n\nThanks for having looked at this ticket.\n\nWhat do you mean by 'reapply it to the latest version' ? The git branch is a bit old indeed but that file has not been touched since, and the fact that the branch's name appears in green in the ticket means that it is still compatible with the latest beta.\n\nI can add a merge commit if you prefer, but that's technically useless.\n\nNathann",
    "created_at": "2016-02-12T09:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279292",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:11" align="right">comment:11</div>

Hellooooooo !

Thanks for having looked at this ticket.

What do you mean by 'reapply it to the latest version' ? The git branch is a bit old indeed but that file has not been touched since, and the fact that the branch's name appears in green in the ticket means that it is still compatible with the latest beta.

I can add a merge commit if you prefer, but that's technically useless.

Nathann



---

archive/issue_comments_279293.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nHmm, it's been a long week with many early mornings and late evenings, and I guess I was half a sleep yesterday evening. Don't mind my gibberish. I had a new look at your code (since I don't trust my ability to make a good judgement yesterday), and the code looks OK.\n\nCheers\nNico",
    "created_at": "2016-02-12T10:32:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279293",
    "user": "https://github.com/nvcleemp"
}
```

<div id="comment:12" align="right">comment:12</div>

Hmm, it's been a long week with many early mornings and late evenings, and I guess I was half a sleep yesterday evening. Don't mind my gibberish. I had a new look at your code (since I don't trust my ability to make a good judgement yesterday), and the code looks OK.

Cheers
Nico



---

archive/issue_events_277485.json:
```json
{
    "actor": "https://github.com/nvcleemp",
    "created_at": "2016-02-12T10:32:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19591#event-277485"
}
```



---

archive/issue_events_277486.json:
```json
{
    "actor": "https://github.com/nvcleemp",
    "created_at": "2016-02-12T10:32:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19591#event-277486"
}
```



---

archive/issue_comments_279294.json:
```json
{
    "body": "Reviewer: **Nico Van Cleemput**",
    "created_at": "2016-02-12T10:32:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279294",
    "user": "https://github.com/nvcleemp"
}
```

Reviewer: **Nico Van Cleemput**



---

archive/issue_comments_279295.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThaaaaaaaanks for the review !!! If this code is as useful to others as it is to me, I swear that it is a good addition `:-)`\n\nNathann",
    "created_at": "2016-02-12T11:01:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279295",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:13" align="right">comment:13</div>

Thaaaaaaaanks for the review !!! If this code is as useful to others as it is to me, I swear that it is a good addition `:-)`

Nathann



---

archive/issue_comments_279296.json:
```json
{
    "body": "Changed branch from **[public/19591](https://github.com/sagemath/sagetrac-mirror/tree/public/19591)** to **[e8cf47f](https://github.com/sagemath/sagetrac-mirror/commit/e8cf47fc703ae0fccda1b21981215e904411b114)**",
    "created_at": "2016-02-13T23:56:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19591#issuecomment-279296",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/19591](https://github.com/sagemath/sagetrac-mirror/tree/public/19591)** to **[e8cf47f](https://github.com/sagemath/sagetrac-mirror/commit/e8cf47fc703ae0fccda1b21981215e904411b114)**



---

archive/issue_events_277487.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-13T23:56:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19591#event-277487"
}
```



---

archive/issue_events_277488.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "148829124574a571e46884ace36424aa92afce62",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-02-13T23:56:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19591",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19591#event-277488"
}
```
