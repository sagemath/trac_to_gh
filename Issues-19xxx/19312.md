# Issue 19312: Update to pynac-0.5.2

archive/issues_019075.json:
```json
{
    "body": "The next big Pynac update has:\n\n* libgmp `bigint`s and `bigrat`s instead of `Integer` and `Rational` Python objects\n* assumptions/domains can influence Pynac computation\n* sync elementary assumptions on symbols/functions with Pynac (#19035)\n* C++11 results in better code readability\n* better decisions through more info flags and logic\n* return `not implemented` and `undecidable` for some decisions (for math. logic changes see the #19040 description)\n* add inexact flag for possible expansions / FP simplifications\n* `abs()` expansion\n* `function::info()`\n* from GiNaC: Fix `pow(+(...),2).expand()`\n* remove some unused files and other cleanup; add missing autoconf macro;\n* some older memleaks closed\n\nhttps://github.com/pynac/pynac/releases/download/pynac-0.5.2/pynac-0.5.2.tar.bz2\n\nBranch/Commit: bdda35e186887d05bd50fac9db19b785a5109e2e\n\nReviewer: Jeroen Demeyer, Travis Scrimshaw\n\nAuthor: Ralf Stephan\n\nDependencies: #19606\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19312\n\n",
    "closed_at": "2015-12-03T23:23:19Z",
    "created_at": "2015-09-29T13:28:19Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Update to pynac-0.5.2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19312",
    "user": "https://github.com/rwst"
}
```
The next big Pynac update has:

* libgmp `bigint`s and `bigrat`s instead of `Integer` and `Rational` Python objects
* assumptions/domains can influence Pynac computation
* sync elementary assumptions on symbols/functions with Pynac (#19035)
* C++11 results in better code readability
* better decisions through more info flags and logic
* return `not implemented` and `undecidable` for some decisions (for math. logic changes see the #19040 description)
* add inexact flag for possible expansions / FP simplifications
* `abs()` expansion
* `function::info()`
* from GiNaC: Fix `pow(+(...),2).expand()`
* remove some unused files and other cleanup; add missing autoconf macro;
* some older memleaks closed

https://github.com/pynac/pynac/releases/download/pynac-0.5.2/pynac-0.5.2.tar.bz2

Branch/Commit: bdda35e186887d05bd50fac9db19b785a5109e2e

Reviewer: Jeroen Demeyer, Travis Scrimshaw

Author: Ralf Stephan

Dependencies: #19606

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19312





---

archive/issue_comments_278424.json:
```json
{
    "body": "<a id='comment:2'></a>Mind you, it's not here yet. Git master has half a dozen small but difficult to trace bugs.",
    "created_at": "2015-09-29T13:33:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278424",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'></a>Mind you, it's not here yet. Git master has half a dozen small but difficult to trace bugs.



---

archive/issue_comments_278425.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -2,8 +2,9 @@\n \n * libgmp `bigint`s and `bigrat`s instead of `ZZ` and `QQ` Python objects\n * assumptions/domains can influence Pynac computation\n-* 64 bit hashes\n+* 64 bit hashes (#19310)\n * C++11 results in better code readability\n+\n \n Comment: 1\n \n```\n",
    "created_at": "2015-09-29T13:33:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278425",
    "user": "https://github.com/rwst"
}
```

Description changed:
```diff
--- 
+++ 
@@ -2,8 +2,9 @@
 
 * libgmp `bigint`s and `bigrat`s instead of `ZZ` and `QQ` Python objects
 * assumptions/domains can influence Pynac computation
-* 64 bit hashes
+* 64 bit hashes (#19310)
 * C++11 results in better code readability
+
 
 Comment: 1
 
```




---

archive/issue_comments_278426.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-10-16T15:46:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278426",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_278427.json:
```json
{
    "body": "<a id='comment:4'></a>This works and can be reviewed independently on machines with gcc>=4.6, but please wait with setting positive for the build system changes (i.e., #19298).\n\nThere are two failing doctests: one only happens on doctesting and needs the associated environment; the other is the \"pi in RIF\" doctest which presented a philosophical problem to Sage developers (see #17984) and thus cannot be resolved in my lifetime.\n\n---\nNew commits:",
    "created_at": "2015-10-16T15:46:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278427",
    "user": "https://github.com/rwst"
}
```

<a id='comment:4'></a>This works and can be reviewed independently on machines with gcc>=4.6, but please wait with setting positive for the build system changes (i.e., #19298).

There are two failing doctests: one only happens on doctesting and needs the associated environment; the other is the "pi in RIF" doctest which presented a philosophical problem to Sage developers (see #17984) and thus cannot be resolved in my lifetime.

---
New commits:



---

archive/issue_comments_278428.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,18 @@\n+Provisional ticket for the next big Pynac update.\n+\n+* libgmp `bigint`s and `bigrat`s instead of `ZZ` and `QQ` Python objects\n+* assumptions/domains can influence Pynac computation\n+* C++11 results in better code readability\n+* better decisions through more info flags and logic\n+* return `not implemented` and `undecidable` for some decisions (for matzh. logic changes see #19040 description)\n+* add inexact flag for possible expansions / FP simplifications\n+* `abs()` expansion\n+* `function::info()`\n+* from GiNaC: Fix `pow(+(...),2).expand()`\n+* remove some unused files and other cleanup; add missing autoconf macro;\n+* some older memleaks closed\n+\n+https://github.com/pynac/pynac/releases/download/pynac-0.5.0/pynac-0.5.0.tar.bz2\n \n \n Comment: 1\n```\n",
    "created_at": "2015-10-16T15:46:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278428",
    "user": "https://github.com/rwst"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,18 @@
+Provisional ticket for the next big Pynac update.
+
+* libgmp `bigint`s and `bigrat`s instead of `ZZ` and `QQ` Python objects
+* assumptions/domains can influence Pynac computation
+* C++11 results in better code readability
+* better decisions through more info flags and logic
+* return `not implemented` and `undecidable` for some decisions (for matzh. logic changes see #19040 description)
+* add inexact flag for possible expansions / FP simplifications
+* `abs()` expansion
+* `function::info()`
+* from GiNaC: Fix `pow(+(...),2).expand()`
+* remove some unused files and other cleanup; add missing autoconf macro;
+* some older memleaks closed
+
+https://github.com/pynac/pynac/releases/download/pynac-0.5.0/pynac-0.5.0.tar.bz2
 
 
 Comment: 1
```




---

archive/issue_events_053474.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-16T15:51:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "milestone": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19312#event-53474"
}
```



---

archive/issue_comments_278429.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,18 @@\n+The next big Pynac update has:\n+\n+* libgmp `bigint`s and `bigrat`s instead of `ZZ` and `QQ` Python objects\n+* assumptions/domains can influence Pynac computation\n+* C++11 results in better code readability\n+* better decisions through more info flags and logic\n+* return `not implemented` and `undecidable` for some decisions (for matzh. logic changes see #19040 description)\n+* add inexact flag for possible expansions / FP simplifications\n+* `abs()` expansion\n+* `function::info()`\n+* from GiNaC: Fix `pow(+(...),2).expand()`\n+* remove some unused files and other cleanup; add missing autoconf macro;\n+* some older memleaks closed\n+\n+https://github.com/pynac/pynac/releases/download/pynac-0.5.0/pynac-0.5.0.tar.bz2\n \n \n Comment: 1\n```\n",
    "created_at": "2015-10-16T15:52:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278429",
    "user": "https://github.com/rwst"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,18 @@
+The next big Pynac update has:
+
+* libgmp `bigint`s and `bigrat`s instead of `ZZ` and `QQ` Python objects
+* assumptions/domains can influence Pynac computation
+* C++11 results in better code readability
+* better decisions through more info flags and logic
+* return `not implemented` and `undecidable` for some decisions (for matzh. logic changes see #19040 description)
+* add inexact flag for possible expansions / FP simplifications
+* `abs()` expansion
+* `function::info()`
+* from GiNaC: Fix `pow(+(...),2).expand()`
+* remove some unused files and other cleanup; add missing autoconf macro;
+* some older memleaks closed
+
+https://github.com/pynac/pynac/releases/download/pynac-0.5.0/pynac-0.5.0.tar.bz2
 
 
 Comment: 1
```




---

archive/issue_comments_278430.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,18 @@\n+The next big Pynac update has:\n+\n+* libgmp `bigint`s and `bigrat`s instead of `ZZ` and `QQ` Python objects\n+* assumptions/domains can influence Pynac computation\n+* C++11 results in better code readability\n+* better decisions through more info flags and logic\n+* return `not implemented` and `undecidable` for some decisions (for math. logic changes see the #19040 description)\n+* add inexact flag for possible expansions / FP simplifications\n+* `abs()` expansion\n+* `function::info()`\n+* from GiNaC: Fix `pow(+(...),2).expand()`\n+* remove some unused files and other cleanup; add missing autoconf macro;\n+* some older memleaks closed\n+\n+https://github.com/pynac/pynac/releases/download/pynac-0.5.0/pynac-0.5.0.tar.bz2\n \n \n Comment: 1\n```\n",
    "created_at": "2015-10-16T15:54:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278430",
    "user": "https://github.com/rwst"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,18 @@
+The next big Pynac update has:
+
+* libgmp `bigint`s and `bigrat`s instead of `ZZ` and `QQ` Python objects
+* assumptions/domains can influence Pynac computation
+* C++11 results in better code readability
+* better decisions through more info flags and logic
+* return `not implemented` and `undecidable` for some decisions (for math. logic changes see the #19040 description)
+* add inexact flag for possible expansions / FP simplifications
+* `abs()` expansion
+* `function::info()`
+* from GiNaC: Fix `pow(+(...),2).expand()`
+* remove some unused files and other cleanup; add missing autoconf macro;
+* some older memleaks closed
+
+https://github.com/pynac/pynac/releases/download/pynac-0.5.0/pynac-0.5.0.tar.bz2
 
 
 Comment: 1
```




---

archive/issue_comments_278431.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-10-16T18:28:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278431",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_278432.json:
```json
{
    "body": "<a id='comment:8'></a>\n```\nsage -t src/sage/plot/arc.py\n**********************************************************************\nFile \"src/sage/plot/arc.py\", line 66, in sage.plot.arc.Arc.__init__\nFailed example:\n    bool(A[0].angle == pi/4)\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/plot/arc.py\", line 70, in sage.plot.arc.Arc.__init__\nFailed example:\n    bool(A[0].s2 == pi)\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   2 of  12 in sage.plot.arc.Arc.__init__\n    [47 tests, 2 failures, 2.28 s]\nsage -t src/sage/structure/parent.pyx\n**********************************************************************\nFile \"src/sage/structure/parent.pyx\", line 1227, in sage.structure.parent.Parent.__contains__\nFailed example:\n    pi in RIF # there is no element of RIF equal to pi\nExpected:\n    False\nGot:\n    True\n**********************************************************************\n```",
    "created_at": "2015-10-16T18:28:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278432",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
```
sage -t src/sage/plot/arc.py
**********************************************************************
File "src/sage/plot/arc.py", line 66, in sage.plot.arc.Arc.__init__
Failed example:
    bool(A[0].angle == pi/4)
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/plot/arc.py", line 70, in sage.plot.arc.Arc.__init__
Failed example:
    bool(A[0].s2 == pi)
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   2 of  12 in sage.plot.arc.Arc.__init__
    [47 tests, 2 failures, 2.28 s]
sage -t src/sage/structure/parent.pyx
**********************************************************************
File "src/sage/structure/parent.pyx", line 1227, in sage.structure.parent.Parent.__contains__
Failed example:
    pi in RIF # there is no element of RIF equal to pi
Expected:
    False
Got:
    True
**********************************************************************
```



---

archive/issue_comments_278433.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-17T14:19:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278433",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_278434.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-10-17T14:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278434",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_278435.json:
```json
{
    "body": "<a id='comment:11'></a>I agree to try first a merge of #19040 to reduce the size of this patch.",
    "created_at": "2015-10-17T14:53:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278435",
    "user": "https://github.com/rwst"
}
```

<a id='comment:11'></a>I agree to try first a merge of #19040 to reduce the size of this patch.



---

archive/issue_comments_278436.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 rws]:\n> I agree to try first a merge of #19040 to reduce the size of this patch.\n\n\nThe other way around seems more logical to me: first merge this, then #19040.",
    "created_at": "2015-10-17T15:19:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278436",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Replying to [comment:11 rws]:
> I agree to try first a merge of #19040 to reduce the size of this patch.


The other way around seems more logical to me: first merge this, then #19040.



---

archive/issue_comments_278437.json:
```json
{
    "body": "<a id='comment:14'></a>I excised the math logic changes. Please review.\n\n---\nNew commits:",
    "created_at": "2015-10-19T09:06:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278437",
    "user": "https://github.com/rwst"
}
```

<a id='comment:14'></a>I excised the math logic changes. Please review.

---
New commits:



---

archive/issue_comments_278438.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,19 @@\n+The next big Pynac update has:\n+\n+* libgmp `bigint`s and `bigrat`s instead of `Integer` and `Rational` Python objects\n+* assumptions/domains can influence Pynac computation\n+* sync elementary assumptions on symbols/functions with Pynac (#19035)\n+* C++11 results in better code readability\n+* better decisions through more info flags and logic\n+* return `not implemented` and `undecidable` for some decisions (for math. logic changes see the #19040 description)\n+* add inexact flag for possible expansions / FP simplifications\n+* `abs()` expansion\n+* `function::info()`\n+* from GiNaC: Fix `pow(+(...),2).expand()`\n+* remove some unused files and other cleanup; add missing autoconf macro;\n+* some older memleaks closed\n+\n+https://github.com/pynac/pynac/releases/download/pynac-0.5.0/pynac-0.5.0.tar.bz2\n \n \n Comment: 1\n```\n",
    "created_at": "2015-10-19T14:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278438",
    "user": "https://github.com/rwst"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,19 @@
+The next big Pynac update has:
+
+* libgmp `bigint`s and `bigrat`s instead of `Integer` and `Rational` Python objects
+* assumptions/domains can influence Pynac computation
+* sync elementary assumptions on symbols/functions with Pynac (#19035)
+* C++11 results in better code readability
+* better decisions through more info flags and logic
+* return `not implemented` and `undecidable` for some decisions (for math. logic changes see the #19040 description)
+* add inexact flag for possible expansions / FP simplifications
+* `abs()` expansion
+* `function::info()`
+* from GiNaC: Fix `pow(+(...),2).expand()`
+* remove some unused files and other cleanup; add missing autoconf macro;
+* some older memleaks closed
+
+https://github.com/pynac/pynac/releases/download/pynac-0.5.0/pynac-0.5.0.tar.bz2
 
 
 Comment: 1
```




---

archive/issue_comments_278439.json:
```json
{
    "body": "<a id='comment:16'></a>FYI - There is an `Unknown` located in `sage.misc.unknown`.",
    "created_at": "2015-10-21T11:32:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278439",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>FYI - There is an `Unknown` located in `sage.misc.unknown`.



---

archive/issue_comments_278440.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:16 tscrim]:\n> FYI - There is an `Unknown` located in `sage.misc.unknown`.\n\nThat would be useful for #19040, thanks!",
    "created_at": "2015-10-21T12:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278440",
    "user": "https://github.com/rwst"
}
```

<a id='comment:17'></a>Replying to [comment:16 tscrim]:
> FYI - There is an `Unknown` located in `sage.misc.unknown`.

That would be useful for #19040, thanks!



---

archive/issue_comments_278441.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-11-22T16:31:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278441",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_278442.json:
```json
{
    "body": "<a id='comment:18'></a>Needs a rebase.",
    "created_at": "2015-11-22T16:31:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278442",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'></a>Needs a rebase.



---

archive/issue_comments_278443.json:
```json
{
    "body": "<a id='comment:19'></a>If you commit to the review I'll do the rebase.",
    "created_at": "2015-11-22T16:49:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278443",
    "user": "https://github.com/rwst"
}
```

<a id='comment:19'></a>If you commit to the review I'll do the rebase.



---

archive/issue_comments_278444.json:
```json
{
    "body": "<a id='comment:20'></a>I should be able to do the review.",
    "created_at": "2015-11-22T16:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278444",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>I should be able to do the review.



---

archive/issue_comments_278445.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-23T08:22:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278445",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_278446.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-23T08:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278446",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_278447.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-11-23T08:36:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278447",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_278448.json:
```json
{
    "body": "<a id='comment:23'></a>Great. So please review.",
    "created_at": "2015-11-23T08:36:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278448",
    "user": "https://github.com/rwst"
}
```

<a id='comment:23'></a>Great. So please review.



---

archive/issue_comments_278449.json:
```json
{
    "body": "<a id='comment:25'></a>This should be rebased on top of #19606.",
    "created_at": "2015-11-23T08:46:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278449",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'></a>This should be rebased on top of #19606.



---

archive/issue_comments_278450.json:
```json
{
    "body": "<a id='comment:26'></a>Replace\n\n```\nif not (solution_dict == True or solution_dict == False)\n```\nby\n\n```\nif solution_dict is not True and solution_dict is not False\n```",
    "created_at": "2015-11-23T08:50:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278450",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>Replace

```
if not (solution_dict == True or solution_dict == False)
```
by

```
if solution_dict is not True and solution_dict is not False
```



---

archive/issue_comments_278451.json:
```json
{
    "body": "<a id='comment:27'></a>Why do you need the `__cmp__` method on `Constant`? Since we are trying to move to Python 3, we shouldn't add new `__cmp__` or `cmp()`.",
    "created_at": "2015-11-23T08:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278451",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>Why do you need the `__cmp__` method on `Constant`? Since we are trying to move to Python 3, we shouldn't add new `__cmp__` or `cmp()`.



---

archive/issue_comments_278452.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-11-23T08:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278452",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_278453.json:
```json
{
    "body": "<a id='comment:28'></a>In `src/sage/calculus/desolvers.py`, I think you need to justify the changes\n\n```diff\n@@ -676,7 +676,7 @@ def desolve_laplace(de, dvar, ics=None, ivar=None):\n         dvar, ivar = dvar\n     elif ivar is None:\n         ivars = de.variables()\n-        ivars = [t for t in ivars if t != dvar]\n+        ivars = [t for t in ivars if t is not dvar]\n         if len(ivars) != 1:\n             raise ValueError(\"Unable to determine independent variable, please specify.\")\n         ivar = ivars[0]\n@@ -1182,7 +1181,7 @@ def desolve_rk4(de, dvar, ics=None, ivar=None, end_points=None, step=0.1, output\n \n     if ivar is None:\n         ivars = de.variables()\n-        ivars = [t for t in ivars if t != dvar]\n+        ivars = [t for t in ivars if repr(t) != repr(dvar)]\n         if len(ivars) != 1:\n             raise ValueError(\"Unable to determine independent variable, please specify.\")\n         ivar = ivars[0]\n```",
    "created_at": "2015-11-23T08:55:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278453",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>In `src/sage/calculus/desolvers.py`, I think you need to justify the changes

```diff
@@ -676,7 +676,7 @@ def desolve_laplace(de, dvar, ics=None, ivar=None):
         dvar, ivar = dvar
     elif ivar is None:
         ivars = de.variables()
-        ivars = [t for t in ivars if t != dvar]
+        ivars = [t for t in ivars if t is not dvar]
         if len(ivars) != 1:
             raise ValueError("Unable to determine independent variable, please specify.")
         ivar = ivars[0]
@@ -1182,7 +1181,7 @@ def desolve_rk4(de, dvar, ics=None, ivar=None, end_points=None, step=0.1, output
 
     if ivar is None:
         ivars = de.variables()
-        ivars = [t for t in ivars if t != dvar]
+        ivars = [t for t in ivars if repr(t) != repr(dvar)]
         if len(ivars) != 1:
             raise ValueError("Unable to determine independent variable, please specify.")
         ivar = ivars[0]
```



---

archive/issue_comments_278454.json:
```json
{
    "body": "<a id='comment:29'></a>Replace\n\n```\ncdef object py_integer_from_long(long x) except +:\n    cdef Integer z = PY_NEW(Integer)\n    mpz_set_si(z.value, x)\n    return z\n```\nby\n\n```\nfrom sage.rings.integer cimport smallInteger\n\ncdef py_integer_from_long(long x):\n    return smallInteger(x)\n```",
    "created_at": "2015-11-23T09:39:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278454",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>Replace

```
cdef object py_integer_from_long(long x) except +:
    cdef Integer z = PY_NEW(Integer)
    mpz_set_si(z.value, x)
    return z
```
by

```
from sage.rings.integer cimport smallInteger

cdef py_integer_from_long(long x):
    return smallInteger(x)
```



---

archive/issue_comments_278455.json:
```json
{
    "body": "<a id='comment:30'></a>I also don't understand the following doctest changes:\n\n```diff\n@@ -1148,7 +1148,8 @@ def desolve_rk4(de, dvar, ics=None, ivar=None, end_points=None, step=0.1, output\n \n     Variant 2 for input - more common in numerics::\n \n-        sage: x,y=var('x y')\n+        sage: _ = var('x,y')\n+        sage: f = function('f')(x)\n         sage: desolve_rk4(x*y*(2-y),y,ics=[0,1],end_points=1,step=0.5)\n         [[0, 1], [0.5, 1.12419127424558], [1.0, 1.461590162288825]]\n \n@@ -1156,15 +1157,13 @@ def desolve_rk4(de, dvar, ics=None, ivar=None, end_points=None, step=0.1, output\n     desolve function In this example we integrate bakwards, since\n     ``end_points < ics[0]``::\n \n-        sage: y=function('y')(x)\n-        sage: desolve_rk4(diff(y,x)+y*(y-1) == x-2,y,ics=[1,1],step=0.5, end_points=0)\n+        sage: desolve_rk4(diff(f,x)+f*(f-1) == x-2,f,ics=[1,1],step=0.5, end_points=0)\n         [[0.0, 8.904257108962112], [0.5, 1.909327945361535], [1, 1]]\n \n     Here we show how to plot simple pictures. For more advanced\n     aplications use list_plot instead. To see the resulting picture\n     use ``show(P)`` in Sage notebook. ::\n \n-        sage: x,y=var('x y')\n         sage: P=desolve_rk4(y*(2-y),y,ics=[0,.1],ivar=x,output='slope_field',end_points=[-4,6],thickness=3)\n \n     ALGORITHM:\n```",
    "created_at": "2015-11-23T09:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278455",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>I also don't understand the following doctest changes:

```diff
@@ -1148,7 +1148,8 @@ def desolve_rk4(de, dvar, ics=None, ivar=None, end_points=None, step=0.1, output
 
     Variant 2 for input - more common in numerics::
 
-        sage: x,y=var('x y')
+        sage: _ = var('x,y')
+        sage: f = function('f')(x)
         sage: desolve_rk4(x*y*(2-y),y,ics=[0,1],end_points=1,step=0.5)
         [[0, 1], [0.5, 1.12419127424558], [1.0, 1.461590162288825]]
 
@@ -1156,15 +1157,13 @@ def desolve_rk4(de, dvar, ics=None, ivar=None, end_points=None, step=0.1, output
     desolve function In this example we integrate bakwards, since
     ``end_points < ics[0]``::
 
-        sage: y=function('y')(x)
-        sage: desolve_rk4(diff(y,x)+y*(y-1) == x-2,y,ics=[1,1],step=0.5, end_points=0)
+        sage: desolve_rk4(diff(f,x)+f*(f-1) == x-2,f,ics=[1,1],step=0.5, end_points=0)
         [[0.0, 8.904257108962112], [0.5, 1.909327945361535], [1, 1]]
 
     Here we show how to plot simple pictures. For more advanced
     aplications use list_plot instead. To see the resulting picture
     use ``show(P)`` in Sage notebook. ::
 
-        sage: x,y=var('x y')
         sage: P=desolve_rk4(y*(2-y),y,ics=[0,.1],ivar=x,output='slope_field',end_points=[-4,6],thickness=3)
 
     ALGORITHM:
```



---

archive/issue_comments_278456.json:
```json
{
    "body": "<a id='comment:31'></a>There are various doctest failures:\n\n```\nsage -t --long src/sage/combinat/finite_state_machine.py\n**********************************************************************\nFile \"src/sage/combinat/finite_state_machine.py\", line 10001, in sage.combinat.finite_state_machine.FiniteStateMachine.?\nFailed example:\n    R.<phi> = NumberField(x^2-x-1, embedding=golden_ratio)\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.finite_state_machine.FiniteStateMachine.?[11]>\", line 1, in <module>\n        R = NumberField(x**Integer(2)-x-Integer(1), embedding=golden_ratio, names=('phi',)); (phi,) = R._first_ngens(1)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/number_field/number_field.py\", line 490, in NumberField\n        return NumberField_version2(polynomial=polynomial, name=name, check=check, embedding=embedding, latex_name=latex_name, assume_disc_small=assume_disc_small, maximize_at_primes=maximize_at_primes, structure=structure)\n      File \"sage/structure/factory.pyx\", line 366, in sage.structure.factory.UniqueFactory.__call__ (build/cythonized/sage/structure/factory.c:1328)\n        return self.get_object(version, key, kwds)\n      File \"sage/structure/factory.pyx\", line 410, in sage.structure.factory.UniqueFactory.get_object (build/cythonized/sage/structure/factory.c:1734)\n        obj = self.create_object(version, key, **extra_args)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/number_field/number_field.py\", line 612, in create_object\n        return NumberField_quadratic(polynomial, name, latex_name, check, embedding, assume_disc_small=assume_disc_small, maximize_at_primes=maximize_at_primes, structure=structure)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/number_field/number_field.py\", line 10070, in __init__\n        assume_disc_small=assume_disc_small, maximize_at_primes=maximize_at_primes, structure=structure)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/number_field/number_field.py\", line 6421, in __init__\n        assume_disc_small=assume_disc_small, maximize_at_primes=maximize_at_primes, structure=structure)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/number_field/number_field.py\", line 1202, in __init__\n        embedding = number_field_morphisms.create_embedding_from_approx(self, embedding)\n      File \"sage/rings/number_field/number_field_morphisms.pyx\", line 503, in sage.rings.number_field.number_field_morphisms.create_embedding_from_approx (build/cythonized/sage/rings/number_field/number_field_morphisms.c:7328)\n        raise ValueError, \"%s is not a root of the defining polynomial of %s\" % (gen_image, K)\n    ValueError: golden_ratio is not a root of the defining polynomial of Number Field in phi with defining polynomial x^2 - x - 1\n**********************************************************************\nFile \"src/sage/combinat/finite_state_machine.py\", line 10002, in sage.combinat.finite_state_machine.FiniteStateMachine.?\nFailed example:\n    N = NAFp.number_of_words(base_ring=R); N\nExpected:\n    1/5*(3*golden_ratio + 1)*golden_ratio^n\n    - 1/5*(3*golden_ratio - 4)*(-golden_ratio + 1)^n\nGot:\n    1/10*(1/2*sqrt(5) + 1/2)^n*(3*sqrt(5) + 5) - 1/10*(-1/2*sqrt(5) + 1/2)^n*(3*sqrt(5) - 5)\n**********************************************************************\nFile \"src/sage/functions/other.py\", line 1693, in sage.functions.other.Function_beta.__init__\nFailed example:\n    beta(1/3, 1/2)\nExpected:\n    beta(1/2, 1/3)\nGot:\n    beta(1/3, 1/2)\n**********************************************************************\n```",
    "created_at": "2015-11-23T12:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278456",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>There are various doctest failures:

```
sage -t --long src/sage/combinat/finite_state_machine.py
**********************************************************************
File "src/sage/combinat/finite_state_machine.py", line 10001, in sage.combinat.finite_state_machine.FiniteStateMachine.?
Failed example:
    R.<phi> = NumberField(x^2-x-1, embedding=golden_ratio)
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.finite_state_machine.FiniteStateMachine.?[11]>", line 1, in <module>
        R = NumberField(x**Integer(2)-x-Integer(1), embedding=golden_ratio, names=('phi',)); (phi,) = R._first_ngens(1)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/number_field/number_field.py", line 490, in NumberField
        return NumberField_version2(polynomial=polynomial, name=name, check=check, embedding=embedding, latex_name=latex_name, assume_disc_small=assume_disc_small, maximize_at_primes=maximize_at_primes, structure=structure)
      File "sage/structure/factory.pyx", line 366, in sage.structure.factory.UniqueFactory.__call__ (build/cythonized/sage/structure/factory.c:1328)
        return self.get_object(version, key, kwds)
      File "sage/structure/factory.pyx", line 410, in sage.structure.factory.UniqueFactory.get_object (build/cythonized/sage/structure/factory.c:1734)
        obj = self.create_object(version, key, **extra_args)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/number_field/number_field.py", line 612, in create_object
        return NumberField_quadratic(polynomial, name, latex_name, check, embedding, assume_disc_small=assume_disc_small, maximize_at_primes=maximize_at_primes, structure=structure)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/number_field/number_field.py", line 10070, in __init__
        assume_disc_small=assume_disc_small, maximize_at_primes=maximize_at_primes, structure=structure)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/number_field/number_field.py", line 6421, in __init__
        assume_disc_small=assume_disc_small, maximize_at_primes=maximize_at_primes, structure=structure)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/number_field/number_field.py", line 1202, in __init__
        embedding = number_field_morphisms.create_embedding_from_approx(self, embedding)
      File "sage/rings/number_field/number_field_morphisms.pyx", line 503, in sage.rings.number_field.number_field_morphisms.create_embedding_from_approx (build/cythonized/sage/rings/number_field/number_field_morphisms.c:7328)
        raise ValueError, "%s is not a root of the defining polynomial of %s" % (gen_image, K)
    ValueError: golden_ratio is not a root of the defining polynomial of Number Field in phi with defining polynomial x^2 - x - 1
**********************************************************************
File "src/sage/combinat/finite_state_machine.py", line 10002, in sage.combinat.finite_state_machine.FiniteStateMachine.?
Failed example:
    N = NAFp.number_of_words(base_ring=R); N
Expected:
    1/5*(3*golden_ratio + 1)*golden_ratio^n
    - 1/5*(3*golden_ratio - 4)*(-golden_ratio + 1)^n
Got:
    1/10*(1/2*sqrt(5) + 1/2)^n*(3*sqrt(5) + 5) - 1/10*(-1/2*sqrt(5) + 1/2)^n*(3*sqrt(5) - 5)
**********************************************************************
File "src/sage/functions/other.py", line 1693, in sage.functions.other.Function_beta.__init__
Failed example:
    beta(1/3, 1/2)
Expected:
    beta(1/2, 1/3)
Got:
    beta(1/3, 1/2)
**********************************************************************
```



---

archive/issue_comments_278457.json:
```json
{
    "body": "<a id='comment:32'></a>Why do you use `except +` for non-`extern` functions? For example\n\n```\ncdef bint py_is_exact(object x) except +:\n    return isinstance(x, int) or isinstance(x, long) or isinstance(x, Integer) or \\\n           (isinstance(x, Element) and\n            ((<Element>x)._parent.is_exact() or (<Element>x)._parent == ring.SR))\n```",
    "created_at": "2015-11-23T13:04:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278457",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>Why do you use `except +` for non-`extern` functions? For example

```
cdef bint py_is_exact(object x) except +:
    return isinstance(x, int) or isinstance(x, long) or isinstance(x, Integer) or \
           (isinstance(x, Element) and
            ((<Element>x)._parent.is_exact() or (<Element>x)._parent == ring.SR))
```



---

archive/issue_comments_278458.json:
```json
{
    "body": "<a id='comment:33'></a>Replying to [comment:32 jdemeyer]:\n> Why do you use `except +` for non-`extern` functions? For example\n> \n> ```\n> cdef bint py_is_exact(object x) except +:\n>     return isinstance(x, int) or isinstance(x, long) or isinstance(x, Integer) or \\\n>            (isinstance(x, Element) and\n>             ((<Element>x)._parent.is_exact() or (<Element>x)._parent == ring.SR))\n> ```\n\nI have just copied from `py_is_even` which is not extern either and written by yourself.",
    "created_at": "2015-11-23T14:04:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278458",
    "user": "https://github.com/rwst"
}
```

<a id='comment:33'></a>Replying to [comment:32 jdemeyer]:
> Why do you use `except +` for non-`extern` functions? For example
> 
> ```
> cdef bint py_is_exact(object x) except +:
>     return isinstance(x, int) or isinstance(x, long) or isinstance(x, Integer) or \
>            (isinstance(x, Element) and
>             ((<Element>x)._parent.is_exact() or (<Element>x)._parent == ring.SR))
> ```

I have just copied from `py_is_even` which is not extern either and written by yourself.



---

archive/issue_comments_278459.json:
```json
{
    "body": "<a id='comment:34'></a>Replying to [comment:33 rws]:\n> I have just copied from `py_is_even` which is not extern either\n\nWell, then `py_is_even` is wrong too. But ok, you can leave the `except +` for now, it's not a major problem.\n\n> and written by yourself.\n\nNo way. I may have been the last person to edit that line, but I certainly didn't write that function or the `except +`.",
    "created_at": "2015-11-23T14:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278459",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>Replying to [comment:33 rws]:
> I have just copied from `py_is_even` which is not extern either

Well, then `py_is_even` is wrong too. But ok, you can leave the `except +` for now, it's not a major problem.

> and written by yourself.

No way. I may have been the last person to edit that line, but I certainly didn't write that function or the `except +`.



---

archive/issue_comments_278460.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-23T14:46:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278460",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_278461.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-11-23T14:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278461",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_278462.json:
```json
{
    "body": "<a id='comment:37'></a>Here are my current comments:\n\n- I also don't understand the changes on comment:30.\n- `decl_assume` and `decl_forget` aren't doctested.\n- `raise TypeError('Cannot compare: ' + repr(self))`: I'm thinking that should be a `ValueError` since it depends on the value of the value of the expression. Also, to better conform with python, error messages are not sentences and should not start with a capital letter.\n- Could we change:\n  {{{#!diff\n-        if solution_dict is not True and solution_dict is not False:\n+        if not isinstance(solution_dict, bool):\n  }}}\n- I don't understand this change:\n  {{{#!diff\ndiff --git a/src/sage/geometry/hyperbolic_space/hyperbolic_isometry.py b/src/sage/geometry/hyperbolic_space/hyperbolic_isometry.py\nindex 4840c05..f205b9c 100644\n--- a/src/sage/geometry/hyperbolic_space/hyperbolic_isometry.py\n+++ b/src/sage/geometry/hyperbolic_space/hyperbolic_isometry.py\n`@``@` -1054,12 +1054,11 `@``@` def mobius_transform(A, z):\n         TypeError: A must be an invertible 2x2 matrix over the complex numbers or a symbolic ring\n \n     The matrix can be symbolic or can be a matrix over the real\n-    or complex numbers, but must be invertible::\n-\n-        sage: (a,b,c,d) = var('a,b,c,d');\n-        sage: mobius_transform(matrix(2,[a,b,c,d]),I)\n-        (I*a + b)/(I*c + d)\n+    or complex numbers, but must be provably invertible::\n \n+        sage: (b,c) = var('b,c');\n+        sage: mobius_transform(matrix(2,[1,b,c,b*c+1]),I)\n+        (b + I)/(b*c + I*c + 1)\n         sage: mobius_transform(matrix(2,[0,0,0,0]),I)\n         Traceback (most recent call last):\n         ...\n  }}}\n  I feel it obfuscates what the M\u00f6bius transform does.",
    "created_at": "2015-11-23T16:05:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278462",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:37'></a>Here are my current comments:

- I also don't understand the changes on comment:30.
- `decl_assume` and `decl_forget` aren't doctested.
- `raise TypeError('Cannot compare: ' + repr(self))`: I'm thinking that should be a `ValueError` since it depends on the value of the value of the expression. Also, to better conform with python, error messages are not sentences and should not start with a capital letter.
- Could we change:
  {{{#!diff
-        if solution_dict is not True and solution_dict is not False:
+        if not isinstance(solution_dict, bool):
  }}}
- I don't understand this change:
  {{{#!diff
diff --git a/src/sage/geometry/hyperbolic_space/hyperbolic_isometry.py b/src/sage/geometry/hyperbolic_space/hyperbolic_isometry.py
index 4840c05..f205b9c 100644
--- a/src/sage/geometry/hyperbolic_space/hyperbolic_isometry.py
+++ b/src/sage/geometry/hyperbolic_space/hyperbolic_isometry.py
`@``@` -1054,12 +1054,11 `@``@` def mobius_transform(A, z):
         TypeError: A must be an invertible 2x2 matrix over the complex numbers or a symbolic ring
 
     The matrix can be symbolic or can be a matrix over the real
-    or complex numbers, but must be invertible::
-
-        sage: (a,b,c,d) = var('a,b,c,d');
-        sage: mobius_transform(matrix(2,[a,b,c,d]),I)
-        (I*a + b)/(I*c + d)
+    or complex numbers, but must be provably invertible::
 
+        sage: (b,c) = var('b,c');
+        sage: mobius_transform(matrix(2,[1,b,c,b*c+1]),I)
+        (b + I)/(b*c + I*c + 1)
         sage: mobius_transform(matrix(2,[0,0,0,0]),I)
         Traceback (most recent call last):
         ...
  }}}
  I feel it obfuscates what the Möbius transform does.



---

archive/issue_comments_278463.json:
```json
{
    "body": "<a id='comment:38'></a>In `src/sage/rings/number_field/number_field_morphisms.pyx`, can you import `test_relation_maxima` only when you need it?\n\nThis doctest loses its meaning now:\n\n```diff\ndiff --git a/src/sage/functions/other.py b/src/sage/functions/other.py\nindex 7fafc33..5769ce7 100644\n--- a/src/sage/functions/other.py\n+++ b/src/sage/functions/other.py\n@@ -1691,7 +1691,7 @@ class Function_beta(GinacFunction):\n         Ginac might reorder the arguments::\n \n             sage: beta(1/3, 1/2)\n-            beta(1/2, 1/3)\n+            beta(1/3, 1/2)\n \n         The result is symbolic if exact input is given::\n \n```",
    "created_at": "2015-11-23T16:07:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278463",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'></a>In `src/sage/rings/number_field/number_field_morphisms.pyx`, can you import `test_relation_maxima` only when you need it?

This doctest loses its meaning now:

```diff
diff --git a/src/sage/functions/other.py b/src/sage/functions/other.py
index 7fafc33..5769ce7 100644
--- a/src/sage/functions/other.py
+++ b/src/sage/functions/other.py
@@ -1691,7 +1691,7 @@ class Function_beta(GinacFunction):
         Ginac might reorder the arguments::
 
             sage: beta(1/3, 1/2)
-            beta(1/2, 1/3)
+            beta(1/3, 1/2)
 
         The result is symbolic if exact input is given::
 
```



---

archive/issue_comments_278464.json:
```json
{
    "body": "<a id='comment:39'></a>This is actually a bug:\n\n```diff\ndiff --git a/src/sage/symbolic/constants_c.pyx b/src/sage/symbolic/constants_c.pyx\nindex 340d20d..fb43864 100644\n--- a/src/sage/symbolic/constants_c.pyx\n+++ b/src/sage/symbolic/constants_c.pyx\n@@ -217,7 +217,7 @@ cdef class E(Expression):\n             sage: t = e^a; t\n             e^a\n             sage: t^b\n-            (e^a)^b\n+            e^a^b\n             sage: SR(1).exp()\n             e\n \n```\n\nUsually, `e<sup>a</sup>b` is interpreted as `e<sup>(a</sup>b)`:\n\n```\nsage: var('a,b')\n(a, b)\nsage: (e^a)^b\ne^a^b\nsage: e^a^b\ne^(a^b)\n```",
    "created_at": "2015-11-23T16:10:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278464",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>This is actually a bug:

```diff
diff --git a/src/sage/symbolic/constants_c.pyx b/src/sage/symbolic/constants_c.pyx
index 340d20d..fb43864 100644
--- a/src/sage/symbolic/constants_c.pyx
+++ b/src/sage/symbolic/constants_c.pyx
@@ -217,7 +217,7 @@ cdef class E(Expression):
             sage: t = e^a; t
             e^a
             sage: t^b
-            (e^a)^b
+            e^a^b
             sage: SR(1).exp()
             e
 
```

Usually, `e<sup>a</sup>b` is interpreted as `e<sup>(a</sup>b)`:

```
sage: var('a,b')
(a, b)
sage: (e^a)^b
e^a^b
sage: e^a^b
e^(a^b)
```



---

archive/issue_comments_278465.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-11-23T16:10:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278465",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_278466.json:
```json
{
    "body": "<a id='comment:40'></a>Replying to [comment:39 jdemeyer]:\n> Usually, `e<sup>a</sup>b` is interpreted as `e<sup>(a</sup>b)`:\n\nOh, that is serious.",
    "created_at": "2015-11-23T16:15:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278466",
    "user": "https://github.com/rwst"
}
```

<a id='comment:40'></a>Replying to [comment:39 jdemeyer]:
> Usually, `e<sup>a</sup>b` is interpreted as `e<sup>(a</sup>b)`:

Oh, that is serious.



---

archive/issue_comments_278467.json:
```json
{
    "body": "<a id='comment:41'></a>For `__hash__`, could you also test a number which has a hash more than `2^32`, in order to test for #19310:\n\n```\nsage: hash(1e30)\n-442393380            # 32-bit\n5076964209140210896   # 64-bit\nsage: hash(SR(1e30))  # known bug #19310\n-442393380            # 32-bit\n5076964209140210896   # 64-bit\n```",
    "created_at": "2015-11-23T16:26:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278467",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:41'></a>For `__hash__`, could you also test a number which has a hash more than `2^32`, in order to test for #19310:

```
sage: hash(1e30)
-442393380            # 32-bit
5076964209140210896   # 64-bit
sage: hash(SR(1e30))  # known bug #19310
-442393380            # 32-bit
5076964209140210896   # 64-bit
```



---

archive/issue_comments_278468.json:
```json
{
    "body": "<a id='comment:42'></a>Replying to [comment:37 tscrim]:\n> - I also don't understand the changes on comment:30.\n \nThey are reverted now. In the first branch of this ticket they were necessary.\n\n> - I don't understand this change:\n> `@``@` -1054,12 +1054,11 `@``@` def mobius_transform(A, z):\n>   I feel it obfuscates what the M\u00f6bius transform does.\n\nWell you can't give a transform of a noninvertible matrix, so I changed the example to one that is always invertible. I can revert to the original doctest but it will lead to problems in a later ticket.",
    "created_at": "2015-11-23T16:31:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278468",
    "user": "https://github.com/rwst"
}
```

<a id='comment:42'></a>Replying to [comment:37 tscrim]:
> - I also don't understand the changes on comment:30.
 
They are reverted now. In the first branch of this ticket they were necessary.

> - I don't understand this change:
> `@``@` -1054,12 +1054,11 `@``@` def mobius_transform(A, z):
>   I feel it obfuscates what the Möbius transform does.

Well you can't give a transform of a noninvertible matrix, so I changed the example to one that is always invertible. I can revert to the original doctest but it will lead to problems in a later ticket.



---

archive/issue_comments_278469.json:
```json
{
    "body": "<a id='comment:43'></a>Replying to [comment:41 jdemeyer]:\n> For `__hash__`, could you also test a number which has a hash more than `2^32`, in order to test for #19310:\n\nThat doesn't work in 0.5 but some work is already done. See https://github.com/pynac/pynac/issues/95",
    "created_at": "2015-11-23T16:39:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278469",
    "user": "https://github.com/rwst"
}
```

<a id='comment:43'></a>Replying to [comment:41 jdemeyer]:
> For `__hash__`, could you also test a number which has a hash more than `2^32`, in order to test for #19310:

That doesn't work in 0.5 but some work is already done. See https://github.com/pynac/pynac/issues/95



---

archive/issue_comments_278470.json:
```json
{
    "body": "<a id='comment:44'></a>Replying to [comment:42 rws]:\n> Replying to [comment:37 tscrim]:\n> > - I don't understand this change:\n> > `@``@` -1054,12 +1054,11 `@``@` def mobius_transform(A, z):\n> >   I feel it obfuscates what the M\u00f6bius transform does.\n\n> Well you can't give a transform of a noninvertible matrix, so I changed the example to one that is always invertible. I can revert to the original doctest but it will lead to problems in a later ticket.\n\nUnless `a*d - b*c == 0`, then this is an invertible matrix, and this is a \"rare\" event for generic `a,b,c,d`. So I would say this is a safe test, or perhaps we can add an assumption that `a*d - b*c != 0`? Also could you tell me what ticket you are referring to or give some more details?",
    "created_at": "2015-11-23T18:22:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278470",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:44'></a>Replying to [comment:42 rws]:
> Replying to [comment:37 tscrim]:
> > - I don't understand this change:
> > `@``@` -1054,12 +1054,11 `@``@` def mobius_transform(A, z):
> >   I feel it obfuscates what the Möbius transform does.

> Well you can't give a transform of a noninvertible matrix, so I changed the example to one that is always invertible. I can revert to the original doctest but it will lead to problems in a later ticket.

Unless `a*d - b*c == 0`, then this is an invertible matrix, and this is a "rare" event for generic `a,b,c,d`. So I would say this is a safe test, or perhaps we can add an assumption that `a*d - b*c != 0`? Also could you tell me what ticket you are referring to or give some more details?



---

archive/issue_comments_278471.json:
```json
{
    "body": "<a id='comment:45'></a>Replying to [comment:44 tscrim]:\n> Replying to [comment:42 rws]:\n> > Well you can't give a transform of a noninvertible matrix, so I changed the example to one that is always invertible. I can revert to the original doctest but it will lead to problems in a later ticket.\n\n> \n> Unless `a*d - b*c == 0`, then this is an invertible matrix, and this is a \"rare\" event for generic `a,b,c,d`. So I would say this is a safe test, or perhaps we can add an assumption that `a*d - b*c != 0`? Also could you tell me what ticket you are referring to or give some more details?\n\nIf I remember correctly there was a problem due to the `Expression.__nonzero__` changes in the first branch. So this might resurface with #19040. I'm sorry I can't give more details, let's just see about it whenever #19040 gets tackled.",
    "created_at": "2015-11-24T07:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278471",
    "user": "https://github.com/rwst"
}
```

<a id='comment:45'></a>Replying to [comment:44 tscrim]:
> Replying to [comment:42 rws]:
> > Well you can't give a transform of a noninvertible matrix, so I changed the example to one that is always invertible. I can revert to the original doctest but it will lead to problems in a later ticket.

> 
> Unless `a*d - b*c == 0`, then this is an invertible matrix, and this is a "rare" event for generic `a,b,c,d`. So I would say this is a safe test, or perhaps we can add an assumption that `a*d - b*c != 0`? Also could you tell me what ticket you are referring to or give some more details?

If I remember correctly there was a problem due to the `Expression.__nonzero__` changes in the first branch. So this might resurface with #19040. I'm sorry I can't give more details, let's just see about it whenever #19040 gets tackled.



---

archive/issue_comments_278472.json:
```json
{
    "body": "<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-24T07:59:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278472",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_278473.json:
```json
{
    "body": "<a id='comment:47'></a>This should cover everything except the exponentiation bug and...\n\nReplying to [comment:25 jdemeyer]:\n> This should be rebased on top of #19606.\n\nAs I need to make a new release, and #19606 will be in the next beta I'll just do a rebase later.",
    "created_at": "2015-11-24T08:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278473",
    "user": "https://github.com/rwst"
}
```

<a id='comment:47'></a>This should cover everything except the exponentiation bug and...

Replying to [comment:25 jdemeyer]:
> This should be rebased on top of #19606.

As I need to make a new release, and #19606 will be in the next beta I'll just do a rebase later.



---

archive/issue_comments_278474.json:
```json
{
    "body": "<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-25T16:27:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278474",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_278475.json:
```json
{
    "body": "<a id='comment:50'></a>pynac-0.5.1 fixed the exp bug (and contains a previous fix). This should be it.",
    "created_at": "2015-11-25T16:30:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278475",
    "user": "https://github.com/rwst"
}
```

<a id='comment:50'></a>pynac-0.5.1 fixed the exp bug (and contains a previous fix). This should be it.



---

archive/issue_comments_278476.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,19 @@\n+The next big Pynac update has:\n \n+* libgmp `bigint`s and `bigrat`s instead of `Integer` and `Rational` Python objects\n+* assumptions/domains can influence Pynac computation\n+* sync elementary assumptions on symbols/functions with Pynac (#19035)\n+* C++11 results in better code readability\n+* better decisions through more info flags and logic\n+* return `not implemented` and `undecidable` for some decisions (for math. logic changes see the #19040 description)\n+* add inexact flag for possible expansions / FP simplifications\n+* `abs()` expansion\n+* `function::info()`\n+* from GiNaC: Fix `pow(+(...),2).expand()`\n+* remove some unused files and other cleanup; add missing autoconf macro;\n+* some older memleaks closed\n+\n+https://github.com/pynac/pynac/releases/download/pynac-0.5.1/pynac-0.5.1.tar.bz2\n \n Comment: 1\n \n```\n",
    "created_at": "2015-11-25T16:30:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278476",
    "user": "https://github.com/rwst"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,19 @@
+The next big Pynac update has:
 
+* libgmp `bigint`s and `bigrat`s instead of `Integer` and `Rational` Python objects
+* assumptions/domains can influence Pynac computation
+* sync elementary assumptions on symbols/functions with Pynac (#19035)
+* C++11 results in better code readability
+* better decisions through more info flags and logic
+* return `not implemented` and `undecidable` for some decisions (for math. logic changes see the #19040 description)
+* add inexact flag for possible expansions / FP simplifications
+* `abs()` expansion
+* `function::info()`
+* from GiNaC: Fix `pow(+(...),2).expand()`
+* remove some unused files and other cleanup; add missing autoconf macro;
+* some older memleaks closed
+
+https://github.com/pynac/pynac/releases/download/pynac-0.5.1/pynac-0.5.1.tar.bz2
 
 Comment: 1
 
```




---

archive/issue_comments_278477.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-11-25T16:30:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278477",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_278478.json:
```json
{
    "body": "<a id='comment:51'></a>Replying to [comment:45 rws]:\n> If I remember correctly there was a problem due to the `Expression.__nonzero__` changes in the first branch. So this might resurface with #19040. I'm sorry I can't give more details, let's just see about it whenever #19040 gets tackled.\n\n\nI will be happy to work on it if there is a problem with #19040.\n\nI'm guessing changes of this type:\n\n```\n-        sage: x,y = var('x,y')\n+        sage: _ = var('x,y')\n```\nare because you're thinking towards #17958. However I don't think that takes away from the problem, but instead just makes the behavior harder to do find/replace for and makes it harder for the reader to understand what is going on in the doctest. Could you provide some other justification for these changes?",
    "created_at": "2015-11-26T00:00:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278478",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:51'></a>Replying to [comment:45 rws]:
> If I remember correctly there was a problem due to the `Expression.__nonzero__` changes in the first branch. So this might resurface with #19040. I'm sorry I can't give more details, let's just see about it whenever #19040 gets tackled.


I will be happy to work on it if there is a problem with #19040.

I'm guessing changes of this type:

```
-        sage: x,y = var('x,y')
+        sage: _ = var('x,y')
```
are because you're thinking towards #17958. However I don't think that takes away from the problem, but instead just makes the behavior harder to do find/replace for and makes it harder for the reader to understand what is going on in the doctest. Could you provide some other justification for these changes?



---

archive/issue_comments_278479.json:
```json
{
    "body": "<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-26T06:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278479",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_278480.json:
```json
{
    "body": "<a id='comment:53'></a>Replying to [comment:51 tscrim]:\n> I'm guessing changes of this type:\n> \n> ```\n> -        sage: x,y = var('x,y')\n> +        sage: _ = var('x,y')\n> ```\n> are because you're thinking towards #17958. However I don't think that takes away from the problem, but instead just makes the behavior harder to do find/replace for and makes it harder for the reader to understand what is going on in the doctest. Could you provide some other justification for these changes?\n\nIf you object to that you will have to stem the tide now by posting to sage-devel, because a recursive grep just showed about 30 instances of such usage in Sage (and certainly not all from me). Or open a separate ticket, please. Here they are now reverted.",
    "created_at": "2015-11-26T06:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278480",
    "user": "https://github.com/rwst"
}
```

<a id='comment:53'></a>Replying to [comment:51 tscrim]:
> I'm guessing changes of this type:
> 
> ```
> -        sage: x,y = var('x,y')
> +        sage: _ = var('x,y')
> ```
> are because you're thinking towards #17958. However I don't think that takes away from the problem, but instead just makes the behavior harder to do find/replace for and makes it harder for the reader to understand what is going on in the doctest. Could you provide some other justification for these changes?

If you object to that you will have to stem the tide now by posting to sage-devel, because a recursive grep just showed about 30 instances of such usage in Sage (and certainly not all from me). Or open a separate ticket, please. Here they are now reverted.



---

archive/issue_comments_278481.json:
```json
{
    "body": "<a id='comment:54'></a>This\n\n```\nisinstance(rel, bool) and rel is True\n```\ncan be simplified to\n\n```\nrel is True\n```",
    "created_at": "2015-11-27T11:22:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278481",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:54'></a>This

```
isinstance(rel, bool) and rel is True
```
can be simplified to

```
rel is True
```



---

archive/issue_comments_278482.json:
```json
{
    "body": "<a id='comment:55'></a>Why this?\n\n```diff\ndiff --git a/src/sage/symbolic/constants.py b/src/sage/symbolic/constants.py\nindex 2b4d533..838f64f 100644\n--- a/src/sage/symbolic/constants.py\n+++ b/src/sage/symbolic/constants.py\n@@ -303,8 +303,6 @@ class Constant(object):\n             True\n             sage: p == s\n             False\n-            sage: p != s\n-            True\n         \"\"\"\n         return (self.__class__ == other.__class__ and\n                 self._name == other._name)\n```",
    "created_at": "2015-11-27T11:26:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278482",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:55'></a>Why this?

```diff
diff --git a/src/sage/symbolic/constants.py b/src/sage/symbolic/constants.py
index 2b4d533..838f64f 100644
--- a/src/sage/symbolic/constants.py
+++ b/src/sage/symbolic/constants.py
@@ -303,8 +303,6 @@ class Constant(object):
             True
             sage: p == s
             False
-            sage: p != s
-            True
         """
         return (self.__class__ == other.__class__ and
                 self._name == other._name)
```



---

archive/issue_comments_278483.json:
```json
{
    "body": "<a id='comment:56'></a>This is not valid LaTeX:\n\n```\ne^{\\sqrt{x}}^{x}\n```",
    "created_at": "2015-11-27T11:31:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278483",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:56'></a>This is not valid LaTeX:

```
e^{\sqrt{x}}^{x}
```



---

archive/issue_comments_278484.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-11-27T11:31:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278484",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_278485.json:
```json
{
    "body": "<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-27T14:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278485",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_278486.json:
```json
{
    "body": "<a id='comment:58'></a>> This is not valid LaTeX:\n\nIs changed. The doctest removal also was to satisfy the first branch. I have reincluded it. Another possible matter with #19040.",
    "created_at": "2015-11-27T14:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278486",
    "user": "https://github.com/rwst"
}
```

<a id='comment:58'></a>> This is not valid LaTeX:

Is changed. The doctest removal also was to satisfy the first branch. I have reincluded it. Another possible matter with #19040.



---

archive/issue_comments_278487.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,19 @@\n+The next big Pynac update has:\n \n+* libgmp `bigint`s and `bigrat`s instead of `Integer` and `Rational` Python objects\n+* assumptions/domains can influence Pynac computation\n+* sync elementary assumptions on symbols/functions with Pynac (#19035)\n+* C++11 results in better code readability\n+* better decisions through more info flags and logic\n+* return `not implemented` and `undecidable` for some decisions (for math. logic changes see the #19040 description)\n+* add inexact flag for possible expansions / FP simplifications\n+* `abs()` expansion\n+* `function::info()`\n+* from GiNaC: Fix `pow(+(...),2).expand()`\n+* remove some unused files and other cleanup; add missing autoconf macro;\n+* some older memleaks closed\n+\n+https://github.com/pynac/pynac/releases/download/pynac-0.5.2/pynac-0.5.2.tar.bz2\n \n Comment: 1\n \n```\n",
    "created_at": "2015-11-27T14:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278487",
    "user": "https://github.com/rwst"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,19 @@
+The next big Pynac update has:
 
+* libgmp `bigint`s and `bigrat`s instead of `Integer` and `Rational` Python objects
+* assumptions/domains can influence Pynac computation
+* sync elementary assumptions on symbols/functions with Pynac (#19035)
+* C++11 results in better code readability
+* better decisions through more info flags and logic
+* return `not implemented` and `undecidable` for some decisions (for math. logic changes see the #19040 description)
+* add inexact flag for possible expansions / FP simplifications
+* `abs()` expansion
+* `function::info()`
+* from GiNaC: Fix `pow(+(...),2).expand()`
+* remove some unused files and other cleanup; add missing autoconf macro;
+* some older memleaks closed
+
+https://github.com/pynac/pynac/releases/download/pynac-0.5.2/pynac-0.5.2.tar.bz2
 
 Comment: 1
 
```




---

archive/issue_comments_278488.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-11-27T14:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278488",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_278489.json:
```json
{
    "body": "<a id='comment:60'></a>What is the definition of an \"undecidable relation\"? (see also the comments: [comment:24](http://trac.sagemath.org/ticket/19040#comment:24) and [comment:41](http://trac.sagemath.org/ticket/19040#comment:41) on #19040).",
    "created_at": "2015-11-27T20:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278489",
    "user": "https://github.com/videlec"
}
```

<a id='comment:60'></a>What is the definition of an "undecidable relation"? (see also the comments: [comment:24](http://trac.sagemath.org/ticket/19040#comment:24) and [comment:41](http://trac.sagemath.org/ticket/19040#comment:41) on #19040).



---

archive/issue_comments_278490.json:
```json
{
    "body": "<a id='comment:61'></a>Please see my reply there.",
    "created_at": "2015-11-28T07:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278490",
    "user": "https://github.com/rwst"
}
```

<a id='comment:61'></a>Please see my reply there.



---

archive/issue_comments_278491.json:
```json
{
    "body": "<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-28T08:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278491",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_278492.json:
```json
{
    "body": "<a id='comment:63'></a>There still is\n\n```\ne^{\\sqrt{x}}^{x}\n```\nin `functions/log.py`.\n\nAlso, for the test in `hyperbolic_isometry.py`, if we add\n\n```\nsage: assume(a*d != b*c)\n```\nthen would that avoid issues with #19040?\n\nOther than that, I'm okay with the current state up to Jeroen's comments that haven't been addressed.",
    "created_at": "2015-11-29T03:40:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278492",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:63'></a>There still is

```
e^{\sqrt{x}}^{x}
```
in `functions/log.py`.

Also, for the test in `hyperbolic_isometry.py`, if we add

```
sage: assume(a*d != b*c)
```
then would that avoid issues with #19040?

Other than that, I'm okay with the current state up to Jeroen's comments that haven't been addressed.



---

archive/issue_comments_278493.json:
```json
{
    "body": "<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-29T07:32:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278493",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_278494.json:
```json
{
    "body": "<a id='comment:65'></a>Replying to [comment:63 tscrim]:\n> Also, for the test in `hyperbolic_isometry.py`, if we add\n> \n> ```\n> sage: assume(a*d != b*c)\n> ```\n> then would that avoid issues with #19040?\n\nI'm unable to answer this at the moment but I appreciate the idea. Thanks for your review.",
    "created_at": "2015-11-29T07:33:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278494",
    "user": "https://github.com/rwst"
}
```

<a id='comment:65'></a>Replying to [comment:63 tscrim]:
> Also, for the test in `hyperbolic_isometry.py`, if we add
> 
> ```
> sage: assume(a*d != b*c)
> ```
> then would that avoid issues with #19040?

I'm unable to answer this at the moment but I appreciate the idea. Thanks for your review.



---

archive/issue_comments_278495.json:
```json
{
    "body": "<a id='comment:66'></a>Regarding #19606: Is `pynac` now linked with `gmp`? If so, you need to revert #19606 and you need to change the dependencies of the package.\n\nI have no other comments (which doesn't mean that I understand every change you made, but at least I don't see any obvious problems).",
    "created_at": "2015-11-29T13:49:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278495",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:66'></a>Regarding #19606: Is `pynac` now linked with `gmp`? If so, you need to revert #19606 and you need to change the dependencies of the package.

I have no other comments (which doesn't mean that I understand every change you made, but at least I don't see any obvious problems).



---

archive/issue_comments_278496.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-11-29T21:23:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278496",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_278497.json:
```json
{
    "body": "<a id='comment:68'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-30T15:21:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278497",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:68'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_278498.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-11-30T15:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278498",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_278499.json:
```json
{
    "body": "<a id='comment:69'></a>Indeed, thanks.",
    "created_at": "2015-11-30T15:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278499",
    "user": "https://github.com/rwst"
}
```

<a id='comment:69'></a>Indeed, thanks.



---

archive/issue_comments_278500.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-12-01T19:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278500",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_278501.json:
```json
{
    "body": "<a id='comment:70'></a>I think then we are good to go.",
    "created_at": "2015-12-01T19:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278501",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:70'></a>I think then we are good to go.



---

archive/issue_comments_278502.json:
```json
{
    "body": "<a id='comment:71'></a>32-bit fails with\n\n```\nsage -t --long src/sage/symbolic/expression.pyx\n**********************************************************************\nFile \"src/sage/symbolic/expression.pyx\", line 1455, in sage.symbolic.expression.Expression.__hash__\nFailed example:\n    hash(SR(19.23))\nExpected:\n    2836855582\nGot:\n    -1458111714\n**********************************************************************\nFile \"src/sage/symbolic/expression.pyx\", line 1457, in sage.symbolic.expression.Expression.__hash__\nFailed example:\n    hash(19.23)\nExpected:\n    2836855582\nGot:\n    -1458111714\n**********************************************************************\n1 item had failures:\n   2 of  26 in sage.symbolic.expression.Expression.__hash__\n```",
    "created_at": "2015-12-02T23:53:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278502",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:71'></a>32-bit fails with

```
sage -t --long src/sage/symbolic/expression.pyx
**********************************************************************
File "src/sage/symbolic/expression.pyx", line 1455, in sage.symbolic.expression.Expression.__hash__
Failed example:
    hash(SR(19.23))
Expected:
    2836855582
Got:
    -1458111714
**********************************************************************
File "src/sage/symbolic/expression.pyx", line 1457, in sage.symbolic.expression.Expression.__hash__
Failed example:
    hash(19.23)
Expected:
    2836855582
Got:
    -1458111714
**********************************************************************
1 item had failures:
   2 of  26 in sage.symbolic.expression.Expression.__hash__
```



---

archive/issue_comments_278503.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-12-02T23:53:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278503",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_278504.json:
```json
{
    "body": "<a id='comment:72'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-03T08:54:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278504",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:72'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_278505.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-12-03T08:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278505",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_278506.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-12-03T09:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278506",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_053475.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-03T23:23:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19312#event-53475"
}
```



---

archive/issue_comments_278507.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-12-03T23:23:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19312#issuecomment-278507",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
