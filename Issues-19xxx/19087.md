# Issue 19087: better checking for invalid plot options

archive/issues_018850.json:
```json
{
    "assignees": [],
    "body": "Sage 6.5\n\n```\nsage: polar_plot(sec(x),(x,-pi/8,pi/8),ticks=[.1,None],aspect_ratio='auto')\n/Users/.../sage-6.5/local/lib/python2.7/site-packages/IPython/core/formatters.py:239: FormatterWarning: Exception in text/plain formatter: Expand the range of the independent variable to allow two multiples of your tick locator (option `ticks`).\n<snip>\nKeyError: 'text/plain'\n```\nCurrent beta:\n\n```\nsage: sage: polar_plot(sec(x),(x,-pi/8,pi/8),ticks=[.1,None],aspect_ratio='auto')\n/Users/.../sage/local/lib/python2.7/site-packages/sage/repl/rich_output/display_manager.py:570: RichReprWarning: Exception in _rich_repr_ while displaying object: unsupported operand type(s) for /: 'float' and 'str'\n  RichReprWarning,\nGraphics object consisting of 1 graphics primitive\n```\nBut no graphic shows up.   This warning is obviously *much* less helpful.  It is true that the warning in both cases only appears once.   Still this seems to be a fairly major regression.\n\nCC:  @vbraun\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19087_\n\n",
    "created_at": "2015-08-25T14:18:27Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "better checking for invalid plot options",
    "type": "issue",
    "updated_at": "2022-12-29T01:33:44Z",
    "url": "https://github.com/sagemath/sage/issues/19087",
    "user": "https://github.com/kcrisman"
}
```
Sage 6.5

```
sage: polar_plot(sec(x),(x,-pi/8,pi/8),ticks=[.1,None],aspect_ratio='auto')
/Users/.../sage-6.5/local/lib/python2.7/site-packages/IPython/core/formatters.py:239: FormatterWarning: Exception in text/plain formatter: Expand the range of the independent variable to allow two multiples of your tick locator (option `ticks`).
<snip>
KeyError: 'text/plain'
```
Current beta:

```
sage: sage: polar_plot(sec(x),(x,-pi/8,pi/8),ticks=[.1,None],aspect_ratio='auto')
/Users/.../sage/local/lib/python2.7/site-packages/sage/repl/rich_output/display_manager.py:570: RichReprWarning: Exception in _rich_repr_ while displaying object: unsupported operand type(s) for /: 'float' and 'str'
  RichReprWarning,
Graphics object consisting of 1 graphics primitive
```
But no graphic shows up.   This warning is obviously *much* less helpful.  It is true that the warning in both cases only appears once.   Still this seems to be a fairly major regression.

CC:  @vbraun

_Issue created by migration from https://trac.sagemath.org/ticket/19087_





---

archive/issue_events_253153.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-08-25T14:18:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19087",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19087#event-253153"
}
```



---

archive/issue_events_253154.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-08-25T14:18:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19087",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "component: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19087#event-253154"
}
```



---

archive/issue_events_253155.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-08-25T14:18:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19087",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19087#event-253155"
}
```



---

archive/issue_events_253156.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-08-25T14:18:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19087",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19087#event-253156"
}
```



---

archive/issue_comments_271989.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nIts `aspect_ratio='automatic'`. Really the fault of plot for not verifying input and then tripping over its feet with useless diagnostics when its time to display the plot.",
    "created_at": "2015-08-25T15:29:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19087#issuecomment-271989",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:1" align="right">Comment 1</div>

Its `aspect_ratio='automatic'`. Really the fault of plot for not verifying input and then tripping over its feet with useless diagnostics when its time to display the plot.



---

archive/issue_comments_271990.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nI thought we had a `'auto'=='automatic'` in that event?  Man, I really have not been keeping up.\n\n```\nsage: polar_plot(sec(x),(x,-pi/8,pi/8),ticks=[.1,None],aspect_ratio='automatic') \n/Users/karl.crisman/Downloads/sage/local/lib/python2.7/site-packages/sage/repl/rich_output/display_manager.py:570: RichReprWarning: Exception in _rich_repr_ while displaying object: Expand the range of the independent variable to allow two multiples of your tick locator (option `ticks`).\n  RichReprWarning,\nGraphics object consisting of 1 graphics primitive\n```\nIt still shouldn't say it returns a graphic object, should it?",
    "created_at": "2015-08-25T15:58:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19087#issuecomment-271990",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:2" align="right">Comment 2</div>

I thought we had a `'auto'=='automatic'` in that event?  Man, I really have not been keeping up.

```
sage: polar_plot(sec(x),(x,-pi/8,pi/8),ticks=[.1,None],aspect_ratio='automatic') 
/Users/karl.crisman/Downloads/sage/local/lib/python2.7/site-packages/sage/repl/rich_output/display_manager.py:570: RichReprWarning: Exception in _rich_repr_ while displaying object: Expand the range of the independent variable to allow two multiples of your tick locator (option `ticks`).
  RichReprWarning,
Graphics object consisting of 1 graphics primitive
```
It still shouldn't say it returns a graphic object, should it?



---

archive/issue_comments_271991.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nplot() does return a graphics object, this is precisely what is wrong with plot. It shouldn't return a graphics object if the input is invalid. But it does, and the graphics object can't display itself graphically.",
    "created_at": "2015-08-25T16:08:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19087#issuecomment-271991",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:3" align="right">Comment 3</div>

plot() does return a graphics object, this is precisely what is wrong with plot. It shouldn't return a graphics object if the input is invalid. But it does, and the graphics object can't display itself graphically.



---

archive/issue_events_253157.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2015-08-25T16:12:34Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/19087",
    "title_is": "better checking for invalid plot options",
    "title_was": "incredibly non-useful warning in plot replaces helpful warning message",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19087#event-253157"
}
```



---

archive/issue_comments_271992.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nNote that in the previous incarnation it didn't actually return anything, there was a `KeyError`...",
    "created_at": "2015-08-25T16:12:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19087#issuecomment-271992",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:5" align="right">Comment 5</div>

Note that in the previous incarnation it didn't actually return anything, there was a `KeyError`...



---

archive/issue_events_253158.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:33:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19087",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19087#event-253158"
}
```
