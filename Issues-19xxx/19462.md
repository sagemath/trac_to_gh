# Issue 19462: LinearCode.is_projective

archive/issues_019225.json:
```json
{
    "assignees": [],
    "body": "As the title says, this branch adds a very short function to LinearCode.\n\nNathann\n\nCC:  @johanrosenkilde @sagetrac-dlucas @dimpase\n\nBranch/Commit: **[`fc7e509`](https://github.com/sagemath/sagetrac-mirror/commit/fc7e50975777e4f50e0c345cfdb0cf42f12740c5)**\n\nReviewer: **Johan Sebastian Rosenkilde Nielsen, Vincent Delecroix**\n\nAuthor: **Nathann Cohen**\n\nComponent: **coding theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19462_\n\n",
    "closed_at": "2015-10-29T16:34:57Z",
    "created_at": "2015-10-23T12:21:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20coding%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "LinearCode.is_projective",
    "type": "issue",
    "updated_at": "2015-10-29T16:34:57Z",
    "url": "https://github.com/sagemath/sage/issues/19462",
    "user": "https://github.com/nathanncohen"
}
```
As the title says, this branch adds a very short function to LinearCode.

Nathann

CC:  @johanrosenkilde @sagetrac-dlucas @dimpase

Branch/Commit: **[`fc7e509`](https://github.com/sagemath/sagetrac-mirror/commit/fc7e50975777e4f50e0c345cfdb0cf42f12740c5)**

Reviewer: **Johan Sebastian Rosenkilde Nielsen, Vincent Delecroix**

Author: **Nathann Cohen**

Component: **coding theory**

_Issue created by migration from https://trac.sagemath.org/ticket/19462_





---

archive/issue_events_275895.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-10-23T12:21:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19462#event-275895"
}
```



---

archive/issue_events_275896.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-10-23T12:21:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coding%20theory",
    "label_color": "0000ff",
    "label_name": "c: coding theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19462#event-275896"
}
```



---

archive/issue_events_275897.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-10-23T12:21:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19462#event-275897"
}
```



---

archive/issue_events_275898.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-10-23T12:21:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19462#event-275898"
}
```



---

archive/issue_comments_276661.json:
```json
{
    "body": "Branch: **[public/19462](https://github.com/sagemath/sagetrac-mirror/tree/public/19462)**",
    "created_at": "2015-10-23T12:22:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276661",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[public/19462](https://github.com/sagemath/sagetrac-mirror/tree/public/19462)**



---

archive/issue_comments_276662.json:
```json
{
    "body": "Commit: **[`7272942`](https://github.com/sagemath/sagetrac-mirror/commit/7272942710a80866935ba073fe0e8697d7a3f137)**",
    "created_at": "2015-10-23T12:22:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276662",
    "user": "https://github.com/nathanncohen"
}
```

Commit: **[`7272942`](https://github.com/sagemath/sagetrac-mirror/commit/7272942710a80866935ba073fe0e8697d7a3f137)**



---

archive/issue_comments_276663.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7272942710a80866935ba073fe0e8697d7a3f137\"><code>7272942</code></a></td><td><code>trac #19462: LinearCode.is_projective</code></td></tr></table>\n",
    "created_at": "2015-10-23T12:22:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276663",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7272942710a80866935ba073fe0e8697d7a3f137"><code>7272942</code></a></td><td><code>trac #19462: LinearCode.is_projective</code></td></tr></table>




---

archive/issue_events_275899.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-10-23T12:22:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19462#event-275899"
}
```



---

archive/issue_comments_276664.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nTypo in this line: \"[BS11] E, Byrne and A. Sneyd,\".  It should be \"[BS11] E. Byrne and A. Sneyd\"",
    "created_at": "2015-10-23T18:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276664",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:2" align="right">comment:2</div>

Typo in this line: "[BS11] E, Byrne and A. Sneyd,".  It should be "[BS11] E. Byrne and A. Sneyd"



---

archive/issue_comments_276665.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a8d9701a24ab0437ff4e8fbf517bb47443ef425\"><code>4a8d970</code></a></td><td><code>trac #19462: Typo</code></td></tr></table>\n",
    "created_at": "2015-10-23T18:35:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276665",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a8d9701a24ab0437ff4e8fbf517bb47443ef425"><code>4a8d970</code></a></td><td><code>trac #19462: Typo</code></td></tr></table>




---

archive/issue_comments_276666.json:
```json
{
    "body": "Changed commit from **[`7272942`](https://github.com/sagemath/sagetrac-mirror/commit/7272942710a80866935ba073fe0e8697d7a3f137)** to **[`4a8d970`](https://github.com/sagemath/sagetrac-mirror/commit/4a8d9701a24ab0437ff4e8fbf517bb47443ef425)**",
    "created_at": "2015-10-23T18:35:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276666",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7272942`](https://github.com/sagemath/sagetrac-mirror/commit/7272942710a80866935ba073fe0e8697d7a3f137)** to **[`4a8d970`](https://github.com/sagemath/sagetrac-mirror/commit/4a8d9701a24ab0437ff4e8fbf517bb47443ef425)**



---

archive/issue_comments_276667.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nOne simplification: Since your matrix has coefficient in a field, you can always normalize the rows. For each of them, choose the first coefficient which is nonzero, let say `a` and multiply your row by `1/a`. It gives a canonical representative of the row. Then, you just have to check that your normalized columns are distinct.\n\nThere might be already some code to do that somewhere... let me check.",
    "created_at": "2015-10-23T19:45:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276667",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

One simplification: Since your matrix has coefficient in a field, you can always normalize the rows. For each of them, choose the first coefficient which is nonzero, let say `a` and multiply your row by `1/a`. It gives a canonical representative of the row. Then, you just have to check that your normalized columns are distinct.

There might be already some code to do that somewhere... let me check.



---

archive/issue_comments_276668.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n> One simplification: Since your matrix has coefficient in a field\n\nWhy could I assume that the base ring is a field?\n\nNathann",
    "created_at": "2015-10-23T19:46:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276668",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

> One simplification: Since your matrix has coefficient in a field

Why could I assume that the base ring is a field?

Nathann



---

archive/issue_comments_276669.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nUntil you review #6452, they will be...",
    "created_at": "2015-10-23T19:49:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276669",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

Until you review #6452, they will be...



---

archive/issue_comments_276670.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI do not understand, could you say explicitly why we may be allowed to assume that the base ring is a field?",
    "created_at": "2015-10-23T19:57:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276670",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

I do not understand, could you say explicitly why we may be allowed to assume that the base ring is a field?



---

archive/issue_comments_276671.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nCurrently in Sage you can only build linear codes over finite fields. The only tentative to generalize it (though only to the rings `ZZ/nZZ`) is #6452. Note that this ticket not add directly a new linear code function but rather focuses on having a nice class for submodules of `(ZZ/nZZ)^r` which is exactly what linear codes are about.\n\nAnd [wikipedia](https://en.wikipedia.org/wiki/Linear_code) says that linear code are over finite fields.\n\nEDIT: until the last paragraph where it is mentioned that some authors used linear code for code over rings.",
    "created_at": "2015-10-23T20:01:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276671",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">comment:8</div>

Currently in Sage you can only build linear codes over finite fields. The only tentative to generalize it (though only to the rings `ZZ/nZZ`) is #6452. Note that this ticket not add directly a new linear code function but rather focuses on having a nice class for submodules of `(ZZ/nZZ)^r` which is exactly what linear codes are about.

And [wikipedia](https://en.wikipedia.org/wiki/Linear_code) says that linear code are over finite fields.

EDIT: until the last paragraph where it is mentioned that some authors used linear code for code over rings.



---

archive/issue_comments_276672.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAnyway, you can do\n\n```\nif not self.base_ring() in Fields():\n    raise NotImplementedError\n```\nAnd if your field is `GF(2)` it should even be faster.\n\nCould you also add an example of **non** projective code?",
    "created_at": "2015-10-23T20:05:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276672",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

Anyway, you can do

```
if not self.base_ring() in Fields():
    raise NotImplementedError
```
And if your field is `GF(2)` it should even be faster.

Could you also add an example of **non** projective code?



---

archive/issue_comments_276673.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThe reason why I want to managed general rings is because the paper from which I took the definition (a link appears in the branch) explicitly mention rings. Thus I saw no reason to assume more.\n\nAlso, if we do assume that we have fields won't your patch -- that enables general rings for codes -- make this code invalid?\n\nNathann",
    "created_at": "2015-10-23T20:05:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276673",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

The reason why I want to managed general rings is because the paper from which I took the definition (a link appears in the branch) explicitly mention rings. Thus I saw no reason to assume more.

Also, if we do assume that we have fields won't your patch -- that enables general rings for codes -- make this code invalid?

Nathann



---

archive/issue_comments_276674.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n> Anyway, you can do\n> \n> ```\n> if not self.base_ring() in Fields():\n>     raise NotImplementedError\n> ```\n> And if your field is `GF(2)` it should even be faster.\n\nWhy on earth would you ask me to degrade my code to manage fields only, when it is meant to handle general rings and *you* tell me that rings will be supported by LinearCode eventually?\n\n> Could you also add an example of **non** projective code?\n\nIf you want.. I have to find one though...\n\nNathann",
    "created_at": "2015-10-23T20:07:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276674",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:11" align="right">comment:11</div>

> Anyway, you can do
> 
> ```
> if not self.base_ring() in Fields():
>     raise NotImplementedError
> ```
> And if your field is `GF(2)` it should even be faster.

Why on earth would you ask me to degrade my code to manage fields only, when it is meant to handle general rings and *you* tell me that rings will be supported by LinearCode eventually?

> Could you also add an example of **non** projective code?

If you want.. I have to find one though...

Nathann



---

archive/issue_comments_276675.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@nathanncohen](#comment:11):\n> > Anyway, you can do\n> > \n> > ```\n> > if not self.base_ring() in Fields():\n> >     raise NotImplementedError\n> > ```\n> > And if your field is `GF(2)` it should even be faster.\n\n> \n> Why on earth would you ask me to degrade my code to manage fields only, when it is meant to handle general rings and *you* tell me that rings will be supported by LinearCode eventually?\n\nBecause checking duplicates in a list of size `|size of the field| x nrows` is longer than in a list of size `nrows`.\n\nI have no idea whether linear code over rings will be one day supported... ticket #6452 is just a first step. And I was just mentioning it to make some advertisement. But nobody cares.",
    "created_at": "2015-10-23T20:10:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276675",
    "user": "https://github.com/videlec"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@nathanncohen](#comment:11):
> > Anyway, you can do
> > 
> > ```
> > if not self.base_ring() in Fields():
> >     raise NotImplementedError
> > ```
> > And if your field is `GF(2)` it should even be faster.

> 
> Why on earth would you ask me to degrade my code to manage fields only, when it is meant to handle general rings and *you* tell me that rings will be supported by LinearCode eventually?

Because checking duplicates in a list of size `|size of the field| x nrows` is longer than in a list of size `nrows`.

I have no idea whether linear code over rings will be one day supported... ticket #6452 is just a first step. And I was just mentioning it to make some advertisement. But nobody cares.



---

archive/issue_comments_276676.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n> Because checking duplicates in a list of size `|size of the field| x nrows` is longer than in a list of size `nrows`.\n\nThis is a good justification for a field-specific version of this 5-lines algorithm. Not a justification for not supporting rings at all.\n\n> I have no idea whether linear code over rings will be one day supported... ticket #6452 is just a first step. And I was just mentioning it to make some advertisement. But nobody cares.\n\nI have no idea either, but unless it is written somewhere that we can assume fields only, you won't see me adding a code that assumes more than it should.\n\nNathann",
    "created_at": "2015-10-23T20:14:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276676",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:13" align="right">comment:13</div>

> Because checking duplicates in a list of size `|size of the field| x nrows` is longer than in a list of size `nrows`.

This is a good justification for a field-specific version of this 5-lines algorithm. Not a justification for not supporting rings at all.

> I have no idea whether linear code over rings will be one day supported... ticket #6452 is just a first step. And I was just mentioning it to make some advertisement. But nobody cares.

I have no idea either, but unless it is written somewhere that we can assume fields only, you won't see me adding a code that assumes more than it should.

Nathann



---

archive/issue_comments_276677.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n> And I was just mentioning it to make some advertisement. But nobody cares.\n\nTry to advertise it to people who you think should care. I review patches in less than three years, but on the other hand my field is graph theory. I forgot all I ever knew about rings.\n\nAbout this ticket: it seems that some part of the code 'assumes' that the ring is a field indeed:\n\n```\nsage: LinearCode(matrix.ones(IntegerModRing(6),5))\n...\nNotImplementedError: Echelon form not implemented over 'Ring of integers modulo 6'.\n```\n\nThough that is apparently because the 'rank' function is only implemented on fields. This notion exists on rings too, doesn't it? Though I expect that the definition would be pretty nasty `:-/`\n\n'on the paper', however:\n\n```\nsage: LinearCode(matrix.ones(IntegerModRing(3),5))\nLinear code of length 5, dimension 1 over Ring of integers modulo 3\n```\n\nThat's cheating, however, for\n\n```\nsage: IntegerModRing(3).is_field()\nTrue\n```\n\nNathann",
    "created_at": "2015-10-23T20:28:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276677",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">comment:14</div>

> And I was just mentioning it to make some advertisement. But nobody cares.

Try to advertise it to people who you think should care. I review patches in less than three years, but on the other hand my field is graph theory. I forgot all I ever knew about rings.

About this ticket: it seems that some part of the code 'assumes' that the ring is a field indeed:

```
sage: LinearCode(matrix.ones(IntegerModRing(6),5))
...
NotImplementedError: Echelon form not implemented over 'Ring of integers modulo 6'.
```

Though that is apparently because the 'rank' function is only implemented on fields. This notion exists on rings too, doesn't it? Though I expect that the definition would be pretty nasty `:-/`

'on the paper', however:

```
sage: LinearCode(matrix.ones(IntegerModRing(3),5))
Linear code of length 5, dimension 1 over Ring of integers modulo 3
```

That's cheating, however, for

```
sage: IntegerModRing(3).is_field()
True
```

Nathann



---

archive/issue_comments_276678.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAll of a sudden, however, I wonder about something... Given that the generator matrix is automatically replaced by a generator matrix with full rank, can this function return anything but 'True'?\n\nNathann",
    "created_at": "2015-10-23T20:30:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276678",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">comment:15</div>

All of a sudden, however, I wonder about something... Given that the generator matrix is automatically replaced by a generator matrix with full rank, can this function return anything but 'True'?

Nathann



---

archive/issue_comments_276679.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@nathanncohen](#comment:15):\n> All of a sudden, however, I wonder about something... Given that the generator matrix is automatically replaced by a generator matrix with full rank, can this function return anything but 'True'?\n\nAnyway, you should return\n\n```\nreturn len(set(RM)) == M.nrows()\n```\nto fit with the definition in the paper.",
    "created_at": "2015-10-23T21:05:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276679",
    "user": "https://github.com/videlec"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@nathanncohen](#comment:15):
> All of a sudden, however, I wonder about something... Given that the generator matrix is automatically replaced by a generator matrix with full rank, can this function return anything but 'True'?

Anyway, you should return

```
return len(set(RM)) == M.nrows()
```
to fit with the definition in the paper.



---

archive/issue_comments_276680.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAnd then\n\n```\nsage: sage: C = codes.LinearCode(matrix(GF(2),[[1,0,1],[1,1,1]]))\nsage: sage: C.is_projective()\nFalse\n```",
    "created_at": "2015-10-23T21:07:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276680",
    "user": "https://github.com/videlec"
}
```

<div id="comment:17" align="right">comment:17</div>

And then

```
sage: sage: C = codes.LinearCode(matrix(GF(2),[[1,0,1],[1,1,1]]))
sage: sage: C.is_projective()
False
```



---

archive/issue_comments_276681.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nTrue. That got lost in the successive workaround of this mutable/immutable mess `>_<`\n\nNathann",
    "created_at": "2015-10-23T21:10:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276681",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

True. That got lost in the successive workaround of this mutable/immutable mess `>_<`

Nathann



---

archive/issue_comments_276682.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/017089a65dc9ef2087762007590d43cde1832240\"><code>017089a</code></a></td><td><code>trac #19462: Bugfix+doctest</code></td></tr></table>\n",
    "created_at": "2015-10-23T21:13:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276682",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/017089a65dc9ef2087762007590d43cde1832240"><code>017089a</code></a></td><td><code>trac #19462: Bugfix+doctest</code></td></tr></table>




---

archive/issue_comments_276683.json:
```json
{
    "body": "Changed commit from **[`4a8d970`](https://github.com/sagemath/sagetrac-mirror/commit/4a8d9701a24ab0437ff4e8fbf517bb47443ef425)** to **[`017089a`](https://github.com/sagemath/sagetrac-mirror/commit/017089a65dc9ef2087762007590d43cde1832240)**",
    "created_at": "2015-10-23T21:13:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276683",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4a8d970`](https://github.com/sagemath/sagetrac-mirror/commit/4a8d9701a24ab0437ff4e8fbf517bb47443ef425)** to **[`017089a`](https://github.com/sagemath/sagetrac-mirror/commit/017089a65dc9ef2087762007590d43cde1832240)**



---

archive/issue_comments_276684.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\ndedicated version for fields at `public/19462-bis`.",
    "created_at": "2015-10-23T21:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276684",
    "user": "https://github.com/videlec"
}
```

<div id="comment:20" align="right">comment:20</div>

dedicated version for fields at `public/19462-bis`.



---

archive/issue_comments_276685.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n`LinearCode` is beyond broken for rings. That the object cannot even be constructed is only the tip of the iceberg. The `ZZ/pZZ`-modules that Vincent implemented can form a base of a type of code over ring later on, but that will not inherit from `LinearCode` or `AbstractLinearCode` since there field assumption is everywhere. I don't know how much code sharing will be possible, but I doubt too much non-trivial code.\n\nAlso, I don't think it's high on anyone's list of priorities...\n\nI've also been discussing with David to change `LinearCode` so it doesn't\nmention rings anymore. It's stupid since they're clearly not supported.\n\nSo I agree with Vincent that it's nicer to have code run in linear time rather than quadratic.\n\nMoreover, I don't even think your code is correct over rings. Consider the\nfollowing generator matrix over ZZ mod 6:\n\n    [ 1  2  0 ]\n    [ 1  2  1 ]\n\nThis is clearly not projective since 2*c1 = c2.\nBut your code would compare\n\n    set([ c1 * (ZZ mod 6) ]) = { (0,0), (1, 1), (2,2), ..., (5,5) }\n    set([ c2 * (ZZ mod 6) ]) = { (0,0), (2,2), (4,4) }\n\nThus the check at the end would succeed, and you return `True`.",
    "created_at": "2015-10-23T21:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276685",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:21" align="right">comment:21</div>

`LinearCode` is beyond broken for rings. That the object cannot even be constructed is only the tip of the iceberg. The `ZZ/pZZ`-modules that Vincent implemented can form a base of a type of code over ring later on, but that will not inherit from `LinearCode` or `AbstractLinearCode` since there field assumption is everywhere. I don't know how much code sharing will be possible, but I doubt too much non-trivial code.

Also, I don't think it's high on anyone's list of priorities...

I've also been discussing with David to change `LinearCode` so it doesn't
mention rings anymore. It's stupid since they're clearly not supported.

So I agree with Vincent that it's nicer to have code run in linear time rather than quadratic.

Moreover, I don't even think your code is correct over rings. Consider the
following generator matrix over ZZ mod 6:

    [ 1  2  0 ]
    [ 1  2  1 ]

This is clearly not projective since 2*c1 = c2.
But your code would compare

    set([ c1 * (ZZ mod 6) ]) = { (0,0), (1, 1), (2,2), ..., (5,5) }
    set([ c2 * (ZZ mod 6) ]) = { (0,0), (2,2), (4,4) }

Thus the check at the end would succeed, and you return `True`.



---

archive/issue_comments_276686.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@johanrosenkilde](#comment:21):\n> This is clearly not projective since 2*c1 = c2.\n\nIn the definition given in reference by Nathann, the condition is that `R c1 != R c2`... but of course, the definition is non-ambiguous over a field.\n\nVincent",
    "created_at": "2015-10-23T21:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276686",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@johanrosenkilde](#comment:21):
> This is clearly not projective since 2*c1 = c2.

In the definition given in reference by Nathann, the condition is that `R c1 != R c2`... but of course, the definition is non-ambiguous over a field.

Vincent



---

archive/issue_comments_276687.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nAh, I see. Ok, so the code seems correct then :-)\n\nBut that's not what's usually understood by \"linearly independent\", I believe. If you, Nathann, insist on retaining the ring stuff, I suggest the definition be written out in full in the docstring (noone is going to look up a definition he believes he knows from high school).\n\nBest,\nJohan",
    "created_at": "2015-10-23T22:09:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276687",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:23" align="right">comment:23</div>

Ah, I see. Ok, so the code seems correct then :-)

But that's not what's usually understood by "linearly independent", I believe. If you, Nathann, insist on retaining the ring stuff, I suggest the definition be written out in full in the docstring (noone is going to look up a definition he believes he knows from high school).

Best,
Johan



---

archive/issue_comments_276688.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@johanrosenkilde](#comment:23):\n> Ah, I see. Ok, so the code seems correct then :-)\n> \n> But that's not what's usually understood by \"linearly independent\", I believe. If you, Nathann, insist on retaining the ring stuff, I suggest the definition be written out in full in the docsring (noone is going to look up a definition he believes he knows from high school).\n\nyeah, I agree - even if one's high school linear algebra virginity has been lost to irresistible charms of commutative algebra, it's still quite unusual definition.",
    "created_at": "2015-10-23T22:51:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276688",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@johanrosenkilde](#comment:23):
> Ah, I see. Ok, so the code seems correct then :-)
> 
> But that's not what's usually understood by "linearly independent", I believe. If you, Nathann, insist on retaining the ring stuff, I suggest the definition be written out in full in the docsring (noone is going to look up a definition he believes he knows from high school).

yeah, I agree - even if one's high school linear algebra virginity has been lost to irresistible charms of commutative algebra, it's still quite unusual definition.



---

archive/issue_comments_276689.json:
```json
{
    "body": "Changed commit from **[`017089a`](https://github.com/sagemath/sagetrac-mirror/commit/017089a65dc9ef2087762007590d43cde1832240)** to **[`03f759a`](https://github.com/sagemath/sagetrac-mirror/commit/03f759a5326645822fc56e0156487bcf4238fde0)**",
    "created_at": "2015-10-24T05:32:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276689",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`017089a`](https://github.com/sagemath/sagetrac-mirror/commit/017089a65dc9ef2087762007590d43cde1832240)** to **[`03f759a`](https://github.com/sagemath/sagetrac-mirror/commit/03f759a5326645822fc56e0156487bcf4238fde0)**



---

archive/issue_comments_276690.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47d566defc92bb3ac9e7f7c8f4ac3e03965416dd\"><code>47d566d</code></a></td><td><code>Trac 19461: optimized code for fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03f759a5326645822fc56e0156487bcf4238fde0\"><code>03f759a</code></a></td><td><code>trac #19462: Enforce the unwritten assumption</code></td></tr></table>\n",
    "created_at": "2015-10-24T05:32:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276690",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47d566defc92bb3ac9e7f7c8f4ac3e03965416dd"><code>47d566d</code></a></td><td><code>Trac 19461: optimized code for fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03f759a5326645822fc56e0156487bcf4238fde0"><code>03f759a</code></a></td><td><code>trac #19462: Enforce the unwritten assumption</code></td></tr></table>




---

archive/issue_comments_276691.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAnd actually in the reference Nathann gave, they consider codes over non-commutative finite rings! Which is indeed infinitely more general.\n\nNathann, for this version of the code, since you switched to a field implementation, could you adapt the documentation?",
    "created_at": "2015-10-24T12:26:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276691",
    "user": "https://github.com/videlec"
}
```

<div id="comment:26" align="right">comment:26</div>

And actually in the reference Nathann gave, they consider codes over non-commutative finite rings! Which is indeed infinitely more general.

Nathann, for this version of the code, since you switched to a field implementation, could you adapt the documentation?



---

archive/issue_comments_276692.json:
```json
{
    "body": "Changed commit from **[`03f759a`](https://github.com/sagemath/sagetrac-mirror/commit/03f759a5326645822fc56e0156487bcf4238fde0)** to **[`11e0f82`](https://github.com/sagemath/sagetrac-mirror/commit/11e0f8295faa3497ad753728e2402932c2e4f362)**",
    "created_at": "2015-10-25T07:37:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276692",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`03f759a`](https://github.com/sagemath/sagetrac-mirror/commit/03f759a5326645822fc56e0156487bcf4238fde0)** to **[`11e0f82`](https://github.com/sagemath/sagetrac-mirror/commit/11e0f8295faa3497ad753728e2402932c2e4f362)**



---

archive/issue_comments_276693.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11e0f8295faa3497ad753728e2402932c2e4f362\"><code>11e0f82</code></a></td><td><code>trac #19462: ring->field</code></td></tr></table>\n",
    "created_at": "2015-10-25T07:37:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276693",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11e0f8295faa3497ad753728e2402932c2e4f362"><code>11e0f82</code></a></td><td><code>trac #19462: ring->field</code></td></tr></table>




---

archive/issue_comments_276694.json:
```json
{
    "body": "Changed commit from **[`11e0f82`](https://github.com/sagemath/sagetrac-mirror/commit/11e0f8295faa3497ad753728e2402932c2e4f362)** to **[`fc7e509`](https://github.com/sagemath/sagetrac-mirror/commit/fc7e50975777e4f50e0c345cfdb0cf42f12740c5)**",
    "created_at": "2015-10-25T07:38:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276694",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`11e0f82`](https://github.com/sagemath/sagetrac-mirror/commit/11e0f8295faa3497ad753728e2402932c2e4f362)** to **[`fc7e509`](https://github.com/sagemath/sagetrac-mirror/commit/fc7e50975777e4f50e0c345cfdb0cf42f12740c5)**



---

archive/issue_comments_276695.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc7e50975777e4f50e0c345cfdb0cf42f12740c5\"><code>fc7e509</code></a></td><td><code>trac #19462: ring->field</code></td></tr></table>\n",
    "created_at": "2015-10-25T07:38:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276695",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc7e50975777e4f50e0c345cfdb0cf42f12740c5"><code>fc7e509</code></a></td><td><code>trac #19462: ring->field</code></td></tr></table>




---

archive/issue_events_275900.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-10-29T12:24:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19462#event-275900"
}
```



---

archive/issue_events_275901.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2015-10-29T12:24:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19462#event-275901"
}
```



---

archive/issue_comments_276696.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nGood to go!",
    "created_at": "2015-10-29T12:24:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276696",
    "user": "https://github.com/videlec"
}
```

<div id="comment:29" align="right">comment:29</div>

Good to go!



---

archive/issue_comments_276697.json:
```json
{
    "body": "Reviewer: **Johan Sebastian Rosenkilde Nielsen, Vincent Delecroix**",
    "created_at": "2015-10-29T12:24:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276697",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Johan Sebastian Rosenkilde Nielsen, Vincent Delecroix**



---

archive/issue_comments_276698.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThanks,\n\nNathann",
    "created_at": "2015-10-29T12:26:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276698",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:30" align="right">comment:30</div>

Thanks,

Nathann



---

archive/issue_events_275902.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-29T16:34:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19462#event-275902"
}
```



---

archive/issue_events_275903.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "4ca4f65ae1980e35b35b2014f3f6a686ea227ba2",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-10-29T16:34:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19462#event-275903"
}
```



---

archive/issue_comments_276699.json:
```json
{
    "body": "Changed branch from **[public/19462](https://github.com/sagemath/sagetrac-mirror/tree/public/19462)** to **[`fc7e509`](https://github.com/sagemath/sagetrac-mirror/commit/fc7e50975777e4f50e0c345cfdb0cf42f12740c5)**",
    "created_at": "2015-10-29T16:34:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19462#issuecomment-276699",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/19462](https://github.com/sagemath/sagetrac-mirror/tree/public/19462)** to **[`fc7e509`](https://github.com/sagemath/sagetrac-mirror/commit/fc7e50975777e4f50e0c345cfdb0cf42f12740c5)**
