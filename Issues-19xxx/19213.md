# Issue 19213: Cleaning sage-package-list

archive/issues_018976.json:
```json
{
    "body": "This ticket enhances the module `sage.misc.package` and the script `sage-list-packages`:\n- add independent functions in `sage.misc.package` to list the (new style) packages\n- add pip functionalities to `sage.misc.package`\n- do not list anymore old style packages (see also #21132)\n- relies on `sage.misc.packages` in `sage-list-packages`\n\npip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.\n\n**CC:**  @videlec @jdemeyer @vbraun @embray\n\n**Branch:** [f0549980f6951f0fe6638afcdb309cdf50aa1378](https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378)\n\n**Reviewer:** Matthias Koeppe, Jeroen Demeyer\n\n**Author:** Vincent Delecroix\n\nIssue created by migration from https://trac.sagemath.org/ticket/19213\n\n",
    "closed_at": "2016-08-17T06:40:33Z",
    "created_at": "2015-09-14T21:26:34Z",
    "labels": [
        "component: scripts",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "title": "Cleaning sage-package-list",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/19213",
    "user": "https://github.com/jhpalmieri"
}
```
This ticket enhances the module `sage.misc.package` and the script `sage-list-packages`:
- add independent functions in `sage.misc.package` to list the (new style) packages
- add pip functionalities to `sage.misc.package`
- do not list anymore old style packages (see also #21132)
- relies on `sage.misc.packages` in `sage-list-packages`

pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.

**CC:**  @videlec @jdemeyer @vbraun @embray

**Branch:** [f0549980f6951f0fe6638afcdb309cdf50aa1378](https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378)

**Reviewer:** Matthias Koeppe, Jeroen Demeyer

**Author:** Vincent Delecroix

Issue created by migration from https://trac.sagemath.org/ticket/19213





---

archive/issue_events_173038.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-09-14T21:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173038"
}
```



---

archive/issue_events_173039.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-09-14T21:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "enhancement",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173039"
}
```



---

archive/issue_comments_274777.json:
```json
{
    "body": "**Branch:** [u/jhpalmieri/pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/pip_packages)",
    "created_at": "2015-09-14T21:27:32Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274777",
    "user": "https://github.com/jhpalmieri"
}
```

**Branch:** [u/jhpalmieri/pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/pip_packages)



---

archive/issue_comments_274778.json:
```json
{
    "body": "**Commit:** [00224aafc17efcb3a4d5504bdbcf036fae5bca57](https://github.com/sagemath/sagetrac-mirror/commit/00224aafc17efcb3a4d5504bdbcf036fae5bca57)",
    "created_at": "2015-09-15T01:15:49Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274778",
    "user": "https://github.com/videlec"
}
```

**Commit:** [00224aafc17efcb3a4d5504bdbcf036fae5bca57](https://github.com/sagemath/sagetrac-mirror/commit/00224aafc17efcb3a4d5504bdbcf036fae5bca57)



---

archive/issue_comments_274779.json:
```json
{
    "body": "<a id='comment:3'></a>\nTo my mind, it would nice to also list non installed pip packages as well as the last version available. The pip version can be obtained from Python with the json API\n\n```\nimport urllib2\nimport json\n\ndef pip_version(package_name):\n    url = \"https://pypi.python.org/pypi/{}/json\".format(package_name)\n\n    try:\n        data = json.load(urllib2.urlopen(urllib2.Request(url)))\n    except urllib2.HTTPError:\n        return None\n\n    try:\n        return data[\"info\"][\"version\"]\n    except KeyError:\n        return None\n```\nThe last version available might differ from what is installed. And it is worth mentioning that an update is available.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93ec09bd798f00db8f1e7a767c33870c27d769c0\">93ec09b</a></td><td><code>Change sage -p to always install a package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6ddd0eb033c4aae465839e07b83d8ea3c266b86\">c6ddd0e</a></td><td><code>Better help</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3d7ef381ebdc0e3eb41d11f8ad67b148ae73bd0\">f3d7ef3</a></td><td><code>Remove -f option to sage-spkg when running sage -i</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/752e269ffb0f5417353815af6cb593a461b135e4\">752e269</a></td><td><code>Use PKG-clean target to implement sage -f PKG</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1812e4fb1e39565446bfe6aa0e4c9d38173618fb\">1812e4f</a></td><td><code>Merge tag '6.9.beta6' into t/19119/ticket/19119</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/adef308eaf6a6c478301471c3c2350260b39a5fe\">adef308</a></td><td><code>Add rules for installing packages with pip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdba3ee0772b1885c3f60cb35f850fee576a7f9a\">fdba3ee</a></td><td><code>Add mercurial and sqlalchemy (ex-standard packages)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00224aafc17efcb3a4d5504bdbcf036fae5bca57\">00224aa</a></td><td><code>trac 19213: include packages from build/pkgs/piprules in 'sage --optional'</code></td></tr></table>\n",
    "created_at": "2015-09-15T01:15:49Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274779",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>
To my mind, it would nice to also list non installed pip packages as well as the last version available. The pip version can be obtained from Python with the json API

```
import urllib2
import json

def pip_version(package_name):
    url = "https://pypi.python.org/pypi/{}/json".format(package_name)

    try:
        data = json.load(urllib2.urlopen(urllib2.Request(url)))
    except urllib2.HTTPError:
        return None

    try:
        return data["info"]["version"]
    except KeyError:
        return None
```
The last version available might differ from what is installed. And it is worth mentioning that an update is available.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93ec09bd798f00db8f1e7a767c33870c27d769c0">93ec09b</a></td><td><code>Change sage -p to always install a package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6ddd0eb033c4aae465839e07b83d8ea3c266b86">c6ddd0e</a></td><td><code>Better help</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3d7ef381ebdc0e3eb41d11f8ad67b148ae73bd0">f3d7ef3</a></td><td><code>Remove -f option to sage-spkg when running sage -i</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/752e269ffb0f5417353815af6cb593a461b135e4">752e269</a></td><td><code>Use PKG-clean target to implement sage -f PKG</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1812e4fb1e39565446bfe6aa0e4c9d38173618fb">1812e4f</a></td><td><code>Merge tag '6.9.beta6' into t/19119/ticket/19119</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/adef308eaf6a6c478301471c3c2350260b39a5fe">adef308</a></td><td><code>Add rules for installing packages with pip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdba3ee0772b1885c3f60cb35f850fee576a7f9a">fdba3ee</a></td><td><code>Add mercurial and sqlalchemy (ex-standard packages)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00224aafc17efcb3a4d5504bdbcf036fae5bca57">00224aa</a></td><td><code>trac 19213: include packages from build/pkgs/piprules in 'sage --optional'</code></td></tr></table>




---

archive/issue_comments_274780.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [vdelecroix](#comment%3A3):\n> To my mind, it would nice to also list non installed pip packages as well as the last version available. The pip version can be obtained from Python with the json API\n\n\nOne disadvantage to this is that it requires internet access, which `sage --optional --local` does not do. But this would be a good addition if `--local` were not given. If we do list the non-installed packages, then it's going to get unwieldy if there are hundreds of entries in `build/pkgs/piprules`. What if that file gets big?\n\nDo we want to list these as optional packages or in another category? `sage --pip_packages`?",
    "created_at": "2015-09-15T01:38:23Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274780",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>
Replying to [vdelecroix](#comment%3A3):
> To my mind, it would nice to also list non installed pip packages as well as the last version available. The pip version can be obtained from Python with the json API


One disadvantage to this is that it requires internet access, which `sage --optional --local` does not do. But this would be a good addition if `--local` were not given. If we do list the non-installed packages, then it's going to get unwieldy if there are hundreds of entries in `build/pkgs/piprules`. What if that file gets big?

Do we want to list these as optional packages or in another category? `sage --pip_packages`?



---

archive/issue_comments_274781.json:
```json
{
    "body": "<a id='comment:5'></a>\nI do not want these pip packages to be treated like optional packages. If anything, they are closer to \"experimental\" than to \"optional\". We don't have control over them, so they are more likely to break when the upstream package gets upgraded.",
    "created_at": "2015-09-15T07:25:58Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274781",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
I do not want these pip packages to be treated like optional packages. If anything, they are closer to "experimental" than to "optional". We don't have control over them, so they are more likely to break when the upstream package gets upgraded.



---

archive/issue_events_173040.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-15T07:25:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173040"
}
```



---

archive/issue_events_173041.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-15T07:25:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173041"
}
```



---

archive/issue_events_173042.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-15T07:25:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "component: packages: optional",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173042"
}
```



---

archive/issue_events_173043.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-15T07:25:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "component: scripts",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173043"
}
```



---

archive/issue_comments_274782.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [jdemeyer](#comment%3A5):\n> I do not want these pip packages to be treated like optional packages. If anything, they are closer to \"experimental\" than to \"optional\". We don't have control over them, so they are more likely to break when the upstream package gets upgraded.\n\n\nDo you mean\n\n- you want them listed in `sage --experimental`, not `sage --optional`, or\n- you don't want them detected for the purpose of doctests,\n\nor both?",
    "created_at": "2015-09-15T15:26:57Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274782",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>
Replying to [jdemeyer](#comment%3A5):
> I do not want these pip packages to be treated like optional packages. If anything, they are closer to "experimental" than to "optional". We don't have control over them, so they are more likely to break when the upstream package gets upgraded.


Do you mean

- you want them listed in `sage --experimental`, not `sage --optional`, or
- you don't want them detected for the purpose of doctests,

or both?



---

archive/issue_comments_274783.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [jhpalmieri](#comment%3A6):\n> Do you mean\n> \n> - you want them listed in `sage --experimental`, not `sage --optional`, or\n> - you don't want them detected for the purpose of doctests,\n> \n> or both?\n\n\nThe default for `--optional` flags in doctests really should be optional packages only, so I don't want pip packages to be tested by doctests by default. Therefore, I also don't want those packages to appear in `sage --optional`. So I really prefer to see them as a new category: not standard, not optional, not experimental.",
    "created_at": "2015-09-15T16:54:56Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274783",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
Replying to [jhpalmieri](#comment%3A6):
> Do you mean
> 
> - you want them listed in `sage --experimental`, not `sage --optional`, or
> - you don't want them detected for the purpose of doctests,
> 
> or both?


The default for `--optional` flags in doctests really should be optional packages only, so I don't want pip packages to be tested by doctests by default. Therefore, I also don't want those packages to appear in `sage --optional`. So I really prefer to see them as a new category: not standard, not optional, not experimental.



---

archive/issue_comments_274784.json:
```json
{
    "body": "<a id='comment:8'></a>\nWait, if an (old-style) optional package is listed in `piprules`, you still don't want it listed in `sage --optional`? Should it be removed altogether from the listing, or listed as `not_installed`? If it's old-style, by the way, having it listed in `sage --optional` is somewhat independent of having it used in doctests, since the doctest framework only looks at local packages. So in my current branch, if we delete the changes to `doctest/control.py`, then these pip packages won't be used automatically in doctests.",
    "created_at": "2015-09-15T18:29:06Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274784",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>
Wait, if an (old-style) optional package is listed in `piprules`, you still don't want it listed in `sage --optional`? Should it be removed altogether from the listing, or listed as `not_installed`? If it's old-style, by the way, having it listed in `sage --optional` is somewhat independent of having it used in doctests, since the doctest framework only looks at local packages. So in my current branch, if we delete the changes to `doctest/control.py`, then these pip packages won't be used automatically in doctests.



---

archive/issue_comments_274785.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [jdemeyer](#comment%3A7):\n> Replying to [jhpalmieri](#comment%3A6):\n> > Do you mean\n> > \n> > - you want them listed in `sage --experimental`, not `sage --optional`, or\n> > - you don't want them detected for the purpose of doctests,\n> > \n> > or both?\n\n> \n> The default for `--optional` flags in doctests really should be optional packages only, so I don't want pip packages to be tested by doctests by default. Therefore, I also don't want those packages to appear in `sage --optional`. So I really prefer to see them as a new category: not standard, not optional, not experimental.\n\n\nI see several solutions to deal with \"pip packages\":\n1. having a new category of packages (let say python-optional)\n2. be stricter about versioning, i.e. in piprules specify the version of the packages we support\n\n```\nbrian=1.3.1\ntrac=2.3\n```\n  Very simple to maintain!\n\nI agree that it would be hard to prevent a pip package to just break because versions are not backward compatible. So solution 2 looks appropriate to me. Otherwise, we can have a more precise tagging system for python-optional packages\n\n```\nsage: my_test()  # python-optional -- 3.5 <= beautifulsoup <= 4.1.2\n```\nIt is more flexible than the piprules strict versioning solution but the cost of maintenance is much higher.\n\nVincent",
    "created_at": "2015-09-16T14:49:27Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274785",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>
Replying to [jdemeyer](#comment%3A7):
> Replying to [jhpalmieri](#comment%3A6):
> > Do you mean
> > 
> > - you want them listed in `sage --experimental`, not `sage --optional`, or
> > - you don't want them detected for the purpose of doctests,
> > 
> > or both?

> 
> The default for `--optional` flags in doctests really should be optional packages only, so I don't want pip packages to be tested by doctests by default. Therefore, I also don't want those packages to appear in `sage --optional`. So I really prefer to see them as a new category: not standard, not optional, not experimental.


I see several solutions to deal with "pip packages":
1. having a new category of packages (let say python-optional)
2. be stricter about versioning, i.e. in piprules specify the version of the packages we support

```
brian=1.3.1
trac=2.3
```
  Very simple to maintain!

I agree that it would be hard to prevent a pip package to just break because versions are not backward compatible. So solution 2 looks appropriate to me. Otherwise, we can have a more precise tagging system for python-optional packages

```
sage: my_test()  # python-optional -- 3.5 <= beautifulsoup <= 4.1.2
```
It is more flexible than the piprules strict versioning solution but the cost of maintenance is much higher.

Vincent



---

archive/issue_comments_274786.json:
```json
{
    "body": "<a id='comment:10'></a>\nI have a working version of `sage-list-packages` doing\n\n```\n$ ./sage-list-packages python\n[package] .............................. [latest version] ([installed version])\n\nbeautifulsoup........................... 3.2.1 (3.2.1)\nbiopython............................... 1.65 (1.65)\nbrian................................... 1.4.1 (1.4.1)\nguppy................................... 0.1.10 (0.1.10)\nmercurial............................... 3.5.1 (3.5.1)\nmpi4py.................................. 1.3.1 (1.3.1)\nnibabel................................. 2.0.1 (2.0.1)\npybtex.................................. 0.18 (0.18)\npyflakes................................ 0.9.2 (0.9.2)\npyopenssl............................... 0.15.1 (0.15.1)\nsqlalchemy.............................. 1.0.8 (1.0.8)\ntrac.................................... 1.0.9 (1.0.9)\n```\nThe only problem is that it is relatively long to get the information from the pip json API for all the packages. Perhaps, one can be smarter with `urllib2`.\n\nJohn, am I free to change the branch in order to make my proposition publicly available?\n\nVincent",
    "created_at": "2015-09-16T15:32:24Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274786",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'></a>
I have a working version of `sage-list-packages` doing

```
$ ./sage-list-packages python
[package] .............................. [latest version] ([installed version])

beautifulsoup........................... 3.2.1 (3.2.1)
biopython............................... 1.65 (1.65)
brian................................... 1.4.1 (1.4.1)
guppy................................... 0.1.10 (0.1.10)
mercurial............................... 3.5.1 (3.5.1)
mpi4py.................................. 1.3.1 (1.3.1)
nibabel................................. 2.0.1 (2.0.1)
pybtex.................................. 0.18 (0.18)
pyflakes................................ 0.9.2 (0.9.2)
pyopenssl............................... 0.15.1 (0.15.1)
sqlalchemy.............................. 1.0.8 (1.0.8)
trac.................................... 1.0.9 (1.0.9)
```
The only problem is that it is relatively long to get the information from the pip json API for all the packages. Perhaps, one can be smarter with `urllib2`.

John, am I free to change the branch in order to make my proposition publicly available?

Vincent



---

archive/issue_comments_274787.json:
```json
{
    "body": "<a id='comment:11'></a>\nFurthermore, could we separate the issues of:\n- listing python packages\n- including optional doctests for them\n\nVincent",
    "created_at": "2015-09-16T15:44:47Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274787",
    "user": "https://github.com/videlec"
}
```

<a id='comment:11'></a>
Furthermore, could we separate the issues of:
- listing python packages
- including optional doctests for them

Vincent



---

archive/issue_comments_274788.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [vdelecroix](#comment%3A10):\n> John, am I free to change the branch in order to make my proposition publicly available?\n\n\nPlease do so.",
    "created_at": "2015-09-16T16:02:43Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274788",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:12'></a>
Replying to [vdelecroix](#comment%3A10):
> John, am I free to change the branch in order to make my proposition publicly available?


Please do so.



---

archive/issue_comments_274789.json:
```json
{
    "body": "<a id='comment:13'></a>\nI have a few questions and comments:\n\n- if #19220 is merged (archiving superseded packages, including the `piprules` packages), how are users supposed to find out about `biopython`, `brian`, etc.? We need to include an option to `sage` which will call `sage-list-packages python`. Maybe we should also have an option which lists all packages: first standard, then optional, then experimental, then python/pip. Or maybe group all of the non-standard packages together, sorted by name. In any case, we shouldn't expect users to even be aware that there are several different types of non-standard packages; they should instead just be able to get one list to see if some particular package is supported.\n\n  Maybe a list like\n\n```\n[package (type)] .......... [latest version] ([installed version])\n\n...\nbiopython (pip) ........... latest version (installed version)\n...\nchomp (experimental) ...... latest version (installed version)\n...\nore_algebra (optional) .... latest version (installed version)\n...\n```\n I'm not really sure, though.\n- Regarding the versions, I am not convinced that we can accurately specify which version of each package we support. Who is going to maintain this? Unless there is some automatic way of determining the versions supported by Sage, the versions will quickly get out of date. If `brian` gets updated to 1.4.2 but we list `brian=1.4.1`, what happens if a user does `sage -i brian`? What happens if a user does `sage --pip install brian`?",
    "created_at": "2015-09-16T16:56:43Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274789",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:13'></a>
I have a few questions and comments:

- if #19220 is merged (archiving superseded packages, including the `piprules` packages), how are users supposed to find out about `biopython`, `brian`, etc.? We need to include an option to `sage` which will call `sage-list-packages python`. Maybe we should also have an option which lists all packages: first standard, then optional, then experimental, then python/pip. Or maybe group all of the non-standard packages together, sorted by name. In any case, we shouldn't expect users to even be aware that there are several different types of non-standard packages; they should instead just be able to get one list to see if some particular package is supported.

  Maybe a list like

```
[package (type)] .......... [latest version] ([installed version])

...
biopython (pip) ........... latest version (installed version)
...
chomp (experimental) ...... latest version (installed version)
...
ore_algebra (optional) .... latest version (installed version)
...
```
 I'm not really sure, though.
- Regarding the versions, I am not convinced that we can accurately specify which version of each package we support. Who is going to maintain this? Unless there is some automatic way of determining the versions supported by Sage, the versions will quickly get out of date. If `brian` gets updated to 1.4.2 but we list `brian=1.4.1`, what happens if a user does `sage -i brian`? What happens if a user does `sage --pip install brian`?



---

archive/issue_comments_274790.json:
```json
{
    "body": "**Changing commit** from \"[00224aafc17efcb3a4d5504bdbcf036fae5bca57](https://github.com/sagemath/sagetrac-mirror/commit/00224aafc17efcb3a4d5504bdbcf036fae5bca57)\" to \"\".",
    "created_at": "2015-09-16T21:53:41Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274790",
    "user": "https://github.com/videlec"
}
```

**Changing commit** from "[00224aafc17efcb3a4d5504bdbcf036fae5bca57](https://github.com/sagemath/sagetrac-mirror/commit/00224aafc17efcb3a4d5504bdbcf036fae5bca57)" to "".



---

archive/issue_comments_274791.json:
```json
{
    "body": "**Changing branch** from \"[u/jhpalmieri/pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/pip_packages)\" to \"[public/pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/public/pip_packages)\".",
    "created_at": "2015-09-16T21:53:41Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274791",
    "user": "https://github.com/videlec"
}
```

**Changing branch** from "[u/jhpalmieri/pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/pip_packages)" to "[public/pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/public/pip_packages)".



---

archive/issue_comments_274792.json:
```json
{
    "body": "**Commit:** [19e3b86ac89a4441bf101130674b4daec9e14910](https://github.com/sagemath/sagetrac-mirror/commit/19e3b86ac89a4441bf101130674b4daec9e14910)",
    "created_at": "2015-09-16T21:53:57Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274792",
    "user": "https://github.com/videlec"
}
```

**Commit:** [19e3b86ac89a4441bf101130674b4daec9e14910](https://github.com/sagemath/sagetrac-mirror/commit/19e3b86ac89a4441bf101130674b4daec9e14910)



---

archive/issue_comments_274793.json:
```json
{
    "body": "<a id='comment:15'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93ec09bd798f00db8f1e7a767c33870c27d769c0\">93ec09b</a></td><td><code>Change sage -p to always install a package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6ddd0eb033c4aae465839e07b83d8ea3c266b86\">c6ddd0e</a></td><td><code>Better help</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3d7ef381ebdc0e3eb41d11f8ad67b148ae73bd0\">f3d7ef3</a></td><td><code>Remove -f option to sage-spkg when running sage -i</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/752e269ffb0f5417353815af6cb593a461b135e4\">752e269</a></td><td><code>Use PKG-clean target to implement sage -f PKG</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1812e4fb1e39565446bfe6aa0e4c9d38173618fb\">1812e4f</a></td><td><code>Merge tag '6.9.beta6' into t/19119/ticket/19119</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/adef308eaf6a6c478301471c3c2350260b39a5fe\">adef308</a></td><td><code>Add rules for installing packages with pip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdba3ee0772b1885c3f60cb35f850fee576a7f9a\">fdba3ee</a></td><td><code>Add mercurial and sqlalchemy (ex-standard packages)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00224aafc17efcb3a4d5504bdbcf036fae5bca57\">00224aa</a></td><td><code>trac 19213: include packages from build/pkgs/piprules in 'sage --optional'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19e3b86ac89a4441bf101130674b4daec9e14910\">19e3b86</a></td><td><code>trac 19213: separation of python packages</code></td></tr></table>\n",
    "created_at": "2015-09-16T21:53:57Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274793",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93ec09bd798f00db8f1e7a767c33870c27d769c0">93ec09b</a></td><td><code>Change sage -p to always install a package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6ddd0eb033c4aae465839e07b83d8ea3c266b86">c6ddd0e</a></td><td><code>Better help</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3d7ef381ebdc0e3eb41d11f8ad67b148ae73bd0">f3d7ef3</a></td><td><code>Remove -f option to sage-spkg when running sage -i</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/752e269ffb0f5417353815af6cb593a461b135e4">752e269</a></td><td><code>Use PKG-clean target to implement sage -f PKG</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1812e4fb1e39565446bfe6aa0e4c9d38173618fb">1812e4f</a></td><td><code>Merge tag '6.9.beta6' into t/19119/ticket/19119</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/adef308eaf6a6c478301471c3c2350260b39a5fe">adef308</a></td><td><code>Add rules for installing packages with pip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdba3ee0772b1885c3f60cb35f850fee576a7f9a">fdba3ee</a></td><td><code>Add mercurial and sqlalchemy (ex-standard packages)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00224aafc17efcb3a4d5504bdbcf036fae5bca57">00224aa</a></td><td><code>trac 19213: include packages from build/pkgs/piprules in 'sage --optional'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19e3b86ac89a4441bf101130674b4daec9e14910">19e3b86</a></td><td><code>trac 19213: separation of python packages</code></td></tr></table>




---

archive/issue_comments_274794.json:
```json
{
    "body": "**Changing branch** from \"[public/pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/public/pip_packages)\" to \"[public/19213](https://github.com/sagemath/sagetrac-mirror/tree/public/19213)\".",
    "created_at": "2015-09-16T21:53:57Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274794",
    "user": "https://github.com/videlec"
}
```

**Changing branch** from "[public/pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/public/pip_packages)" to "[public/19213](https://github.com/sagemath/sagetrac-mirror/tree/public/19213)".



---

archive/issue_comments_274795.json:
```json
{
    "body": "<a id='comment:16'></a>\nWhat is the status on this?",
    "created_at": "2016-07-16T17:17:25Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274795",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
What is the status on this?



---

archive/issue_events_173044.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-07-16T17:17:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173044"
}
```



---

archive/issue_events_173045.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-07-16T17:17:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "milestone": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173045"
}
```



---

archive/issue_comments_274796.json:
```json
{
    "body": "**Changing dependencies** from \"#19187\" to \"\".",
    "created_at": "2016-07-29T18:27:46Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274796",
    "user": "https://trac.sagemath.org/admin/accounts/users/dmuthiah"
}
```

**Changing dependencies** from "#19187" to "".



---

archive/issue_comments_274797.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,18 +1,3 @@\n-In #19187, the file `build/pkgs/piprules` was created. This allows any packages listed there to be installed via `sage -i PKG` by just running `pip install PKG`. The changes here allow such packages to be listed when running `sage --optional`, and therefore to be detected as optional packages when doctesting.\n+In #19187, a package type `pip` was created. Such package can be installed via `sage -i PKG` (which in turn runs `pip install PKG`). **It is not clear whether this feature is transitional while moving to new style pkgs.**\n \n-For example: after running `sage -i brian`, `sage --optional` gives me\n-\n-```\n-...\n-bliss................................... 0.72.p1 (not_installed)\n-brian................................... 1.4.1 (1.4.1)\n-buckygen................................ 1.0 (not_installed)\n-...\n-```\n-and doctesting gives me\n-\n-```\n-Using --optional=arb,brian,ccache,gcc,mpir,python2,sage,scons\n-```\n-\n-This does not print package information for all packages listed in `build/pkg/piprules`, only for those which have been installed\n+This ticket propose that pip packages appear with `sage -optional`. We can also obtain the version by consulting PyPI (but this is time consuming). One interesting consequence would be the possibility to doctest these packages in Sage.\n``````\n",
    "created_at": "2016-07-29T18:27:46Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274797",
    "user": "https://trac.sagemath.org/admin/accounts/users/dmuthiah"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,18 +1,3 @@
-In #19187, the file `build/pkgs/piprules` was created. This allows any packages listed there to be installed via `sage -i PKG` by just running `pip install PKG`. The changes here allow such packages to be listed when running `sage --optional`, and therefore to be detected as optional packages when doctesting.
+In #19187, a package type `pip` was created. Such package can be installed via `sage -i PKG` (which in turn runs `pip install PKG`). **It is not clear whether this feature is transitional while moving to new style pkgs.**
 
-For example: after running `sage -i brian`, `sage --optional` gives me
-
-```
-...
-bliss................................... 0.72.p1 (not_installed)
-brian................................... 1.4.1 (1.4.1)
-buckygen................................ 1.0 (not_installed)
-...
-```
-and doctesting gives me
-
-```
-Using --optional=arb,brian,ccache,gcc,mpir,python2,sage,scons
-```
-
-This does not print package information for all packages listed in `build/pkg/piprules`, only for those which have been installed
+This ticket propose that pip packages appear with `sage -optional`. We can also obtain the version by consulting PyPI (but this is time consuming). One interesting consequence would be the possibility to doctest these packages in Sage.
``````




---

archive/issue_events_173046.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/dmuthiah",
    "created_at": "2016-07-29T18:34:15Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "rename": {
        "from": "For packages listed in build/pkgs/piprules, allow 'sage --optional' to list them",
        "to": "Allow 'sage --optional' to list pip packages"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173046"
}
```



---

archive/issue_comments_274798.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n In #19187, a package type `pip` was created. Such package can be installed via `sage -i PKG` (which in turn runs `pip install PKG`). **It is not clear whether this feature is transitional while moving to new style pkgs.**\n \n-This ticket propose that pip packages appear with `sage -optional`. We can also obtain the version by consulting PyPI (but this is time consuming). One interesting consequence would be the possibility to doctest these packages in Sage.\n+This ticket propose that pip packages appear with `sage -optional`. We can easily obtain the version installed and the last available by consulting PyPI (but this is time consuming). One interesting consequence would be the possibility to doctest these packages in Sage.\n``````\n",
    "created_at": "2016-07-29T18:34:15Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274798",
    "user": "https://trac.sagemath.org/admin/accounts/users/dmuthiah"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 In #19187, a package type `pip` was created. Such package can be installed via `sage -i PKG` (which in turn runs `pip install PKG`). **It is not clear whether this feature is transitional while moving to new style pkgs.**
 
-This ticket propose that pip packages appear with `sage -optional`. We can also obtain the version by consulting PyPI (but this is time consuming). One interesting consequence would be the possibility to doctest these packages in Sage.
+This ticket propose that pip packages appear with `sage -optional`. We can easily obtain the version installed and the last available by consulting PyPI (but this is time consuming). One interesting consequence would be the possibility to doctest these packages in Sage.
``````




---

archive/issue_comments_274799.json:
```json
{
    "body": "<a id='comment:19'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf639805490e97a70087e045d2239e42d8423e6b\">cf63980</a></td><td><code>19213: sage_setup.packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab40123279b2c0ada50675ca41e49ce712b5431c\">ab40123</a></td><td><code>19213: add standalone files to list old style packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9af0741b99d457dea3dcf19b8a7acf179f8a139c\">9af0741</a></td><td><code>19213: clean sage-list-packages script</code></td></tr></table>\n",
    "created_at": "2016-07-29T20:58:09Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274799",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf639805490e97a70087e045d2239e42d8423e6b">cf63980</a></td><td><code>19213: sage_setup.packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab40123279b2c0ada50675ca41e49ce712b5431c">ab40123</a></td><td><code>19213: add standalone files to list old style packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9af0741b99d457dea3dcf19b8a7acf179f8a139c">9af0741</a></td><td><code>19213: clean sage-list-packages script</code></td></tr></table>




---

archive/issue_comments_274800.json:
```json
{
    "body": "**Changing commit** from \"[19e3b86ac89a4441bf101130674b4daec9e14910](https://github.com/sagemath/sagetrac-mirror/commit/19e3b86ac89a4441bf101130674b4daec9e14910)\" to \"[9af0741b99d457dea3dcf19b8a7acf179f8a139c](https://github.com/sagemath/sagetrac-mirror/commit/9af0741b99d457dea3dcf19b8a7acf179f8a139c)\".",
    "created_at": "2016-07-29T20:58:09Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274800",
    "user": "https://github.com/videlec"
}
```

**Changing commit** from "[19e3b86ac89a4441bf101130674b4daec9e14910](https://github.com/sagemath/sagetrac-mirror/commit/19e3b86ac89a4441bf101130674b4daec9e14910)" to "[9af0741b99d457dea3dcf19b8a7acf179f8a139c](https://github.com/sagemath/sagetrac-mirror/commit/9af0741b99d457dea3dcf19b8a7acf179f8a139c)".



---

archive/issue_comments_274801.json:
```json
{
    "body": "**Changing branch** from \"[public/19213](https://github.com/sagemath/sagetrac-mirror/tree/public/19213)\" to \"[u/vdelecroix/19213](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/19213)\".",
    "created_at": "2016-07-29T20:58:09Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274801",
    "user": "https://github.com/videlec"
}
```

**Changing branch** from "[public/19213](https://github.com/sagemath/sagetrac-mirror/tree/public/19213)" to "[u/vdelecroix/19213](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/19213)".



---

archive/issue_events_173047.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-29T20:58:09Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "rename": {
        "from": "Allow 'sage --optional' to list pip packages",
        "to": "Cleaning the sage-list-packages script"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173047"
}
```



---

archive/issue_events_173048.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-29T20:58:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173048"
}
```



---

archive/issue_events_173049.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-29T20:58:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173049"
}
```



---

archive/issue_comments_274802.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n-In #19187, a package type `pip` was created. Such package can be installed via `sage -i PKG` (which in turn runs `pip install PKG`). **It is not clear whether this feature is transitional while moving to new style pkgs.**\n+This ticket enhances the sage-list-packages script in several ways:\n+- create a `sage_setup.packages` to list new style packages (including pip style ones)\n+- create standalone files for old style packages\n+- relies on the above to list packages\n \n-This ticket propose that pip packages appear with `sage -optional`. We can easily obtain the version installed and the last available by consulting PyPI (but this is time consuming). One interesting consequence would be the possibility to doctest these packages in Sage.\n+pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. One consequence is that pip style package can now appear in optional doctests.\n``````\n",
    "created_at": "2016-07-29T20:58:09Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274802",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
-In #19187, a package type `pip` was created. Such package can be installed via `sage -i PKG` (which in turn runs `pip install PKG`). **It is not clear whether this feature is transitional while moving to new style pkgs.**
+This ticket enhances the sage-list-packages script in several ways:
+- create a `sage_setup.packages` to list new style packages (including pip style ones)
+- create standalone files for old style packages
+- relies on the above to list packages
 
-This ticket propose that pip packages appear with `sage -optional`. We can easily obtain the version installed and the last available by consulting PyPI (but this is time consuming). One interesting consequence would be the possibility to doctest these packages in Sage.
+pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. One consequence is that pip style package can now appear in optional doctests.
``````




---

archive/issue_comments_274803.json:
```json
{
    "body": "**Changing author** from \"John Palmieri\" to \"Vincent Delecroix\".",
    "created_at": "2016-07-29T20:58:09Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274803",
    "user": "https://github.com/videlec"
}
```

**Changing author** from "John Palmieri" to "Vincent Delecroix".



---

archive/issue_comments_274804.json:
```json
{
    "body": "**Changing commit** from \"[9af0741b99d457dea3dcf19b8a7acf179f8a139c](https://github.com/sagemath/sagetrac-mirror/commit/9af0741b99d457dea3dcf19b8a7acf179f8a139c)\" to \"[79d2e0011a5d851a03bb4b93f14f51d9e4887571](https://github.com/sagemath/sagetrac-mirror/commit/79d2e0011a5d851a03bb4b93f14f51d9e4887571)\".",
    "created_at": "2016-07-29T20:59:25Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274804",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9af0741b99d457dea3dcf19b8a7acf179f8a139c](https://github.com/sagemath/sagetrac-mirror/commit/9af0741b99d457dea3dcf19b8a7acf179f8a139c)" to "[79d2e0011a5d851a03bb4b93f14f51d9e4887571](https://github.com/sagemath/sagetrac-mirror/commit/79d2e0011a5d851a03bb4b93f14f51d9e4887571)".



---

archive/issue_comments_274805.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79d2e0011a5d851a03bb4b93f14f51d9e4887571\">79d2e00</a></td><td><code>19213: clean imports</code></td></tr></table>\n",
    "created_at": "2016-07-29T20:59:25Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274805",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79d2e0011a5d851a03bb4b93f14f51d9e4887571">79d2e00</a></td><td><code>19213: clean imports</code></td></tr></table>




---

archive/issue_comments_274806.json:
```json
{
    "body": "**Changing commit** from \"[79d2e0011a5d851a03bb4b93f14f51d9e4887571](https://github.com/sagemath/sagetrac-mirror/commit/79d2e0011a5d851a03bb4b93f14f51d9e4887571)\" to \"[9b058ef05334f517637683f907c3a32d03dbae95](https://github.com/sagemath/sagetrac-mirror/commit/9b058ef05334f517637683f907c3a32d03dbae95)\".",
    "created_at": "2016-07-29T21:04:54Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274806",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[79d2e0011a5d851a03bb4b93f14f51d9e4887571](https://github.com/sagemath/sagetrac-mirror/commit/79d2e0011a5d851a03bb4b93f14f51d9e4887571)" to "[9b058ef05334f517637683f907c3a32d03dbae95](https://github.com/sagemath/sagetrac-mirror/commit/9b058ef05334f517637683f907c3a32d03dbae95)".



---

archive/issue_comments_274807.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b058ef05334f517637683f907c3a32d03dbae95\">9b058ef</a></td><td><code>19213: fix doctest</code></td></tr></table>\n",
    "created_at": "2016-07-29T21:04:54Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274807",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b058ef05334f517637683f907c3a32d03dbae95">9b058ef</a></td><td><code>19213: fix doctest</code></td></tr></table>




---

archive/issue_comments_274808.json:
```json
{
    "body": "<a id='comment:22'></a>\nACHTUNG! According to an email by user dmuthiah, changes by this user on this ticket were done by an unautorised person...",
    "created_at": "2016-07-29T21:18:05Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274808",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>
ACHTUNG! According to an email by user dmuthiah, changes by this user on this ticket were done by an unautorised person...



---

archive/issue_comments_274809.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [dimpase](#comment%3A22):\n> ACHTUNG! According to an email by user dmuthiah, changes by this user on this ticket were done by an unautorised person... \n\n\nthat was me... (I sent an e-mail). Sorry.",
    "created_at": "2016-07-29T21:18:55Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274809",
    "user": "https://github.com/videlec"
}
```

<a id='comment:23'></a>
Replying to [dimpase](#comment%3A22):
> ACHTUNG! According to an email by user dmuthiah, changes by this user on this ticket were done by an unautorised person... 


that was me... (I sent an e-mail). Sorry.



---

archive/issue_comments_274810.json:
```json
{
    "body": "<a id='comment:24'></a>\nneed to superseed `sage/misc/packages` which contains *builtin* list of packages!!",
    "created_at": "2016-07-29T21:19:52Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274810",
    "user": "https://github.com/videlec"
}
```

<a id='comment:24'></a>
need to superseed `sage/misc/packages` which contains *builtin* list of packages!!



---

archive/issue_events_173050.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-29T21:19:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173050"
}
```



---

archive/issue_events_173051.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-29T21:19:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173051"
}
```



---

archive/issue_comments_274811.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n - create standalone files for old style packages\n - relies on the above to list packages\n \n-pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. One consequence is that pip style package can now appear in optional doctests.\n+pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.\n``````\n",
    "created_at": "2016-07-29T22:40:58Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274811",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 - create standalone files for old style packages
 - relies on the above to list packages
 
-pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. One consequence is that pip style package can now appear in optional doctests.
+pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.
``````




---

archive/issue_comments_274812.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n-This ticket enhances the sage-list-packages script in several ways:\n-- create a `sage_setup.packages` to list new style packages (including pip style ones)\n-- create standalone files for old style packages\n-- relies on the above to list packages\n+This ticket enhances the `sage-list-packages` script in several ways:\n+- add independent functions in `sage.misc.package` to list the (new style) packages\n+- add pip functionalities to `sage.misc.package`\n+- do not list anymore old style packages (see also #21132)\n+- relies on `sage.misc.packages` to actually list the packages\n \n-pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.\n+pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.\n``````\n",
    "created_at": "2016-07-29T23:20:12Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274812",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
-This ticket enhances the sage-list-packages script in several ways:
-- create a `sage_setup.packages` to list new style packages (including pip style ones)
-- create standalone files for old style packages
-- relies on the above to list packages
+This ticket enhances the `sage-list-packages` script in several ways:
+- add independent functions in `sage.misc.package` to list the (new style) packages
+- add pip functionalities to `sage.misc.package`
+- do not list anymore old style packages (see also #21132)
+- relies on `sage.misc.packages` to actually list the packages
 
-pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.
+pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.
``````




---

archive/issue_events_173052.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-29T23:20:12Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "rename": {
        "from": "Cleaning the sage-list-packages script",
        "to": "Cleaning sage-package-list"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173052"
}
```



---

archive/issue_comments_274813.json:
```json
{
    "body": "<a id='comment:27'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d72e042992773031ddb1a1314099cac8a1beb75\">7d72e04</a></td><td><code>19213: clean sage.misc.package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64cd48237538ab3a935d91b4eeed41813c2bdf8d\">64cd482</a></td><td><code>19213: clean sage-list-packages script</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/faff48bd5628e808790ac83c8c827dd046224afd\">faff48b</a></td><td><code>19213: use list_packages in sage.doctest.control</code></td></tr></table>\n",
    "created_at": "2016-07-29T23:45:24Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274813",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d72e042992773031ddb1a1314099cac8a1beb75">7d72e04</a></td><td><code>19213: clean sage.misc.package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64cd48237538ab3a935d91b4eeed41813c2bdf8d">64cd482</a></td><td><code>19213: clean sage-list-packages script</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/faff48bd5628e808790ac83c8c827dd046224afd">faff48b</a></td><td><code>19213: use list_packages in sage.doctest.control</code></td></tr></table>




---

archive/issue_comments_274814.json:
```json
{
    "body": "**Changing commit** from \"[9b058ef05334f517637683f907c3a32d03dbae95](https://github.com/sagemath/sagetrac-mirror/commit/9b058ef05334f517637683f907c3a32d03dbae95)\" to \"[faff48bd5628e808790ac83c8c827dd046224afd](https://github.com/sagemath/sagetrac-mirror/commit/faff48bd5628e808790ac83c8c827dd046224afd)\".",
    "created_at": "2016-07-29T23:45:24Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274814",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9b058ef05334f517637683f907c3a32d03dbae95](https://github.com/sagemath/sagetrac-mirror/commit/9b058ef05334f517637683f907c3a32d03dbae95)" to "[faff48bd5628e808790ac83c8c827dd046224afd](https://github.com/sagemath/sagetrac-mirror/commit/faff48bd5628e808790ac83c8c827dd046224afd)".



---

archive/issue_events_173053.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-29T23:45:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173053"
}
```



---

archive/issue_events_173054.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-29T23:45:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173054"
}
```



---

archive/issue_comments_274815.json:
```json
{
    "body": "<a id='comment:29'></a>\nThis is probably a FAQ, but I'm getting this error:\n\n```\n$ sage -optional\n[package]...............................[latest version] ([version])\n\nTraceback (most recent call last):\n  File \"/Users/mkoeppe/cvs/sage/src/bin/sage-list-packages\", line 67, in <module>\n    L = list_packages('optional', 'pip', local=args['local']).values()\n  File \"/Users/mkoeppe/cvs/sage/local/lib/python2.7/site-packages/sage/misc/package.py\", line 196, in list_packages\n    pkg['remote_version'] = pip_remote_version(p)\n  File \"/Users/mkoeppe/cvs/sage/local/lib/python2.7/site-packages/sage/misc/package.py\", line 87, in pip_remote_version\n    f = urlopen(url)\n  File \"/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py\", line 154, in urlopen\n    return opener.open(url, data, timeout)\n  File \"/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py\", line 431, in open\n    response = self._open(req, data)\n  File \"/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py\", line 449, in _open\n    '_open', req)\n  File \"/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py\", line 409, in _call_chain\n    result = func(*args)\n  File \"/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py\", line 1240, in https_open\n    context=self._context)\n  File \"/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py\", line 1197, in do_open\n    raise URLError(err)\nurllib2.URLError: <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)>\n```\n(I don't have problems with `sage -pip` otherwise.)",
    "created_at": "2016-08-03T19:54:04Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274815",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>
This is probably a FAQ, but I'm getting this error:

```
$ sage -optional
[package]...............................[latest version] ([version])

Traceback (most recent call last):
  File "/Users/mkoeppe/cvs/sage/src/bin/sage-list-packages", line 67, in <module>
    L = list_packages('optional', 'pip', local=args['local']).values()
  File "/Users/mkoeppe/cvs/sage/local/lib/python2.7/site-packages/sage/misc/package.py", line 196, in list_packages
    pkg['remote_version'] = pip_remote_version(p)
  File "/Users/mkoeppe/cvs/sage/local/lib/python2.7/site-packages/sage/misc/package.py", line 87, in pip_remote_version
    f = urlopen(url)
  File "/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py", line 154, in urlopen
    return opener.open(url, data, timeout)
  File "/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py", line 431, in open
    response = self._open(req, data)
  File "/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py", line 449, in _open
    '_open', req)
  File "/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py", line 409, in _call_chain
    result = func(*args)
  File "/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py", line 1240, in https_open
    context=self._context)
  File "/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py", line 1197, in do_open
    raise URLError(err)
urllib2.URLError: <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)>
```
(I don't have problems with `sage -pip` otherwise.)



---

archive/issue_comments_274816.json:
```json
{
    "body": "<a id='comment:30'></a>\nYou are on OSX; Apple's openssl library is outdated and lacks tls 1.2 support.",
    "created_at": "2016-08-03T22:18:33Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274816",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'></a>
You are on OSX; Apple's openssl library is outdated and lacks tls 1.2 support.



---

archive/issue_comments_274817.json:
```json
{
    "body": "<a id='comment:31'></a>\nAnd PyPI does not seem to accept http connections... I can catch URLError and just return `version='?'` in that case. What do you think?",
    "created_at": "2016-08-03T22:42:18Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274817",
    "user": "https://github.com/videlec"
}
```

<a id='comment:31'></a>
And PyPI does not seem to accept http connections... I can catch URLError and just return `version='?'` in that case. What do you think?



---

archive/issue_comments_274818.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n-This ticket enhances the `sage-list-packages` script in several ways:\n+This ticket enhances the module `sage.misc.package` and the script `sage-list-packages`:\n - add independent functions in `sage.misc.package` to list the (new style) packages\n - add pip functionalities to `sage.misc.package`\n - do not list anymore old style packages (see also #21132)\n-- relies on `sage.misc.packages` to actually list the packages\n+- relies on `sage.misc.packages` in `sage-list-packages`\n \n pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.\n``````\n",
    "created_at": "2016-08-03T22:43:51Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274818",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
-This ticket enhances the `sage-list-packages` script in several ways:
+This ticket enhances the module `sage.misc.package` and the script `sage-list-packages`:
 - add independent functions in `sage.misc.package` to list the (new style) packages
 - add pip functionalities to `sage.misc.package`
 - do not list anymore old style packages (see also #21132)
-- relies on `sage.misc.packages` to actually list the packages
+- relies on `sage.misc.packages` in `sage-list-packages`
 
 pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.
``````




---

archive/issue_comments_274819.json:
```json
{
    "body": "**Changing commit** from \"[faff48bd5628e808790ac83c8c827dd046224afd](https://github.com/sagemath/sagetrac-mirror/commit/faff48bd5628e808790ac83c8c827dd046224afd)\" to \"[41aaa3a0d8c68c65036e161a1eb709f29e16da69](https://github.com/sagemath/sagetrac-mirror/commit/41aaa3a0d8c68c65036e161a1eb709f29e16da69)\".",
    "created_at": "2016-08-03T22:58:26Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274819",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[faff48bd5628e808790ac83c8c827dd046224afd](https://github.com/sagemath/sagetrac-mirror/commit/faff48bd5628e808790ac83c8c827dd046224afd)" to "[41aaa3a0d8c68c65036e161a1eb709f29e16da69](https://github.com/sagemath/sagetrac-mirror/commit/41aaa3a0d8c68c65036e161a1eb709f29e16da69)".



---

archive/issue_comments_274820.json:
```json
{
    "body": "<a id='comment:33'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41aaa3a0d8c68c65036e161a1eb709f29e16da69\">41aaa3a</a></td><td><code>19213: work around MacOSX (absent) TLS support</code></td></tr></table>\n",
    "created_at": "2016-08-03T22:58:26Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274820",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41aaa3a0d8c68c65036e161a1eb709f29e16da69">41aaa3a</a></td><td><code>19213: work around MacOSX (absent) TLS support</code></td></tr></table>




---

archive/issue_comments_274821.json:
```json
{
    "body": "<a id='comment:34'></a>\nPlease test again. Normally you should see the same output as with `sage-list-packages optional --local`.",
    "created_at": "2016-08-03T22:59:03Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274821",
    "user": "https://github.com/videlec"
}
```

<a id='comment:34'></a>
Please test again. Normally you should see the same output as with `sage-list-packages optional --local`.



---

archive/issue_comments_274822.json:
```json
{
    "body": "**Changing commit** from \"[41aaa3a0d8c68c65036e161a1eb709f29e16da69](https://github.com/sagemath/sagetrac-mirror/commit/41aaa3a0d8c68c65036e161a1eb709f29e16da69)\" to \"[8750c2f728da978d7f782ebde0ff9927326742cf](https://github.com/sagemath/sagetrac-mirror/commit/8750c2f728da978d7f782ebde0ff9927326742cf)\".",
    "created_at": "2016-08-03T22:59:53Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274822",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[41aaa3a0d8c68c65036e161a1eb709f29e16da69](https://github.com/sagemath/sagetrac-mirror/commit/41aaa3a0d8c68c65036e161a1eb709f29e16da69)" to "[8750c2f728da978d7f782ebde0ff9927326742cf](https://github.com/sagemath/sagetrac-mirror/commit/8750c2f728da978d7f782ebde0ff9927326742cf)".



---

archive/issue_comments_274823.json:
```json
{
    "body": "<a id='comment:35'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8750c2f728da978d7f782ebde0ff9927326742cf\">8750c2f</a></td><td><code>19213: work around MacOSX (absent) TLS support</code></td></tr></table>\n",
    "created_at": "2016-08-03T22:59:53Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274823",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8750c2f728da978d7f782ebde0ff9927326742cf">8750c2f</a></td><td><code>19213: work around MacOSX (absent) TLS support</code></td></tr></table>




---

archive/issue_comments_274824.json:
```json
{
    "body": "<a id='comment:36'></a>\nReplying to [vbraun](#comment%3A30):\n> You are on OSX; Apple's openssl library is outdated and lacks tls 1.2 support.\n\n\nThanks. Is there a documented workaround for this for Sage users/developers?",
    "created_at": "2016-08-03T23:19:12Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274824",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>
Replying to [vbraun](#comment%3A30):
> You are on OSX; Apple's openssl library is outdated and lacks tls 1.2 support.


Thanks. Is there a documented workaround for this for Sage users/developers?



---

archive/issue_comments_274825.json:
```json
{
    "body": "<a id='comment:37'></a>\nReplying to [vdelecroix](#comment%3A34):\n> Please test again. Normally you should see the same output as with `sage-list-packages optional --local`.\n\n\nSeems to work now.",
    "created_at": "2016-08-03T23:19:38Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274825",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:37'></a>
Replying to [vdelecroix](#comment%3A34):
> Please test again. Normally you should see the same output as with `sage-list-packages optional --local`.


Seems to work now.



---

archive/issue_comments_274826.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [mkoeppe](#comment%3A37):\n> Replying to [vdelecroix](#comment%3A34):\n> > Please test again. Normally you should see the same output as with `sage-list-packages optional --local`.\n\n> \n> Seems to work now.\n\n\nYes but normally you can not see remote pip version (look at the lines for the packages `beautifulsoup`, `biopython`, `sqlalchemy`,  etc)",
    "created_at": "2016-08-03T23:21:15Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274826",
    "user": "https://github.com/videlec"
}
```

<a id='comment:38'></a>
Replying to [mkoeppe](#comment%3A37):
> Replying to [vdelecroix](#comment%3A34):
> > Please test again. Normally you should see the same output as with `sage-list-packages optional --local`.

> 
> Seems to work now.


Yes but normally you can not see remote pip version (look at the lines for the packages `beautifulsoup`, `biopython`, `sqlalchemy`,  etc)



---

archive/issue_comments_274827.json:
```json
{
    "body": "**Reviewer:** Matthias Koeppe, NEEDS MORE REVIEWERS",
    "created_at": "2016-08-03T23:21:35Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274827",
    "user": "https://github.com/mkoeppe"
}
```

**Reviewer:** Matthias Koeppe, NEEDS MORE REVIEWERS



---

archive/issue_comments_274828.json:
```json
{
    "body": "<a id='comment:39'></a>\nI only took a cursory look at the code changes. Perhaps someone familiar with this code should take a closer look.",
    "created_at": "2016-08-03T23:21:35Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274828",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>
I only took a cursory look at the code changes. Perhaps someone familiar with this code should take a closer look.



---

archive/issue_comments_274829.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [vdelecroix](#comment%3A38):\n> Yes but normally you can not see remote pip version (look at the lines for the packages `beautifulsoup`, `biopython`, `sqlalchemy`,  etc)\n\nYes, I see question marks for these packages.",
    "created_at": "2016-08-03T23:22:20Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274829",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:40'></a>
Replying to [vdelecroix](#comment%3A38):
> Yes but normally you can not see remote pip version (look at the lines for the packages `beautifulsoup`, `biopython`, `sqlalchemy`,  etc)

Yes, I see question marks for these packages.



---

archive/issue_comments_274830.json:
```json
{
    "body": "<a id='comment:41'></a>\nPerhaps there should be a warning/notice when the pip version query failed.",
    "created_at": "2016-08-04T00:00:45Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274830",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>
Perhaps there should be a warning/notice when the pip version query failed.



---

archive/issue_comments_274831.json:
```json
{
    "body": "<a id='comment:42'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de597b27c45d0f629698832a4677b92b48472c3a\">de597b2</a></td><td><code>19213: a warning with tests</code></td></tr></table>\n",
    "created_at": "2016-08-04T01:39:08Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274831",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de597b27c45d0f629698832a4677b92b48472c3a">de597b2</a></td><td><code>19213: a warning with tests</code></td></tr></table>




---

archive/issue_comments_274832.json:
```json
{
    "body": "**Changing commit** from \"[8750c2f728da978d7f782ebde0ff9927326742cf](https://github.com/sagemath/sagetrac-mirror/commit/8750c2f728da978d7f782ebde0ff9927326742cf)\" to \"[de597b27c45d0f629698832a4677b92b48472c3a](https://github.com/sagemath/sagetrac-mirror/commit/de597b27c45d0f629698832a4677b92b48472c3a)\".",
    "created_at": "2016-08-04T01:39:08Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274832",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8750c2f728da978d7f782ebde0ff9927326742cf](https://github.com/sagemath/sagetrac-mirror/commit/8750c2f728da978d7f782ebde0ff9927326742cf)" to "[de597b27c45d0f629698832a4677b92b48472c3a](https://github.com/sagemath/sagetrac-mirror/commit/de597b27c45d0f629698832a4677b92b48472c3a)".



---

archive/issue_comments_274833.json:
```json
{
    "body": "<a id='comment:43'></a>\nIt is possible to somehow compute the package lists lazily? I am just a bit worried that those `_STANDARD_PACKAGES` lists will need to be computed every time that Sage starts.",
    "created_at": "2016-08-05T12:16:06Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274833",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'></a>
It is possible to somehow compute the package lists lazily? I am just a bit worried that those `_STANDARD_PACKAGES` lists will need to be computed every time that Sage starts.



---

archive/issue_comments_274834.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [jdemeyer](#comment%3A43):\n> It is possible to somehow compute the package lists lazily? I am just a bit worried that those `_STANDARD_PACKAGES` lists will need to be computed every time that Sage starts.\n\n\nThe module would better not be imported on startup. I will change the imports to become lazy.",
    "created_at": "2016-08-08T13:24:57Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274834",
    "user": "https://github.com/videlec"
}
```

<a id='comment:44'></a>
Replying to [jdemeyer](#comment%3A43):
> It is possible to somehow compute the package lists lazily? I am just a bit worried that those `_STANDARD_PACKAGES` lists will need to be computed every time that Sage starts.


The module would better not be imported on startup. I will change the imports to become lazy.



---

archive/issue_comments_274835.json:
```json
{
    "body": "<a id='comment:45'></a>\nActually, it seems nearly impossible to be sure that `sage.misc.package` is not imported on startup using `sage.misc.lazy_import.is_during_startup`. The main reason is that `is_package_installed` is currently used in `sage_setup`.",
    "created_at": "2016-08-08T13:49:49Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274835",
    "user": "https://github.com/videlec"
}
```

<a id='comment:45'></a>
Actually, it seems nearly impossible to be sure that `sage.misc.package` is not imported on startup using `sage.misc.lazy_import.is_during_startup`. The main reason is that `is_package_installed` is currently used in `sage_setup`.



---

archive/issue_comments_274836.json:
```json
{
    "body": "<a id='comment:46'></a>\nAs this is rather disjoint from the preoccupations of this ticket, I would prefer to postpone this problem. One solution is to wait for #20382 that get rid of `is_installed_package`. Then it would be trivial to forbid the import on startup.",
    "created_at": "2016-08-08T13:52:00Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274836",
    "user": "https://github.com/videlec"
}
```

<a id='comment:46'></a>
As this is rather disjoint from the preoccupations of this ticket, I would prefer to postpone this problem. One solution is to wait for #20382 that get rid of `is_installed_package`. Then it would be trivial to forbid the import on startup.



---

archive/issue_comments_274837.json:
```json
{
    "body": "<a id='comment:47'></a>\nReplying to [git](#comment%3A42):\n> Branch pushed to git repo; I updated commit sha1. **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de597b27c45d0f629698832a4677b92b48472c3a\">de597b2</a></td><td><code>19213: a warning with tests</code></td></tr></table>\n\nOK, that's much better with these warnings. \n\nFrom my side, this would be a 'positive_review'. Jeroen?",
    "created_at": "2016-08-10T18:43:46Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274837",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>
Replying to [git](#comment%3A42):
> Branch pushed to git repo; I updated commit sha1. **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de597b27c45d0f629698832a4677b92b48472c3a">de597b2</a></td><td><code>19213: a warning with tests</code></td></tr></table>

OK, that's much better with these warnings. 

From my side, this would be a 'positive_review'. Jeroen?



---

archive/issue_comments_274838.json:
```json
{
    "body": "**Changing reviewer** from \"Matthias Koeppe, NEEDS MORE REVIEWERS\" to \"Matthias Koeppe, Jeroen Demeyer\".",
    "created_at": "2016-08-10T18:43:46Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274838",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "Matthias Koeppe, NEEDS MORE REVIEWERS" to "Matthias Koeppe, Jeroen Demeyer".



---

archive/issue_events_173055.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-10T18:43:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "milestone": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173055"
}
```



---

archive/issue_events_173056.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-10T18:43:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173056"
}
```



---

archive/issue_comments_274839.json:
```json
{
    "body": "<a id='comment:48'></a>\nI would like to see what the patchbot thinks of the startup time (however, it seems down now). If this ticket does not give a statistically significant increase to the startup time, it is ok for me. See [comment:43]",
    "created_at": "2016-08-10T21:20:49Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274839",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:48'></a>
I would like to see what the patchbot thinks of the startup time (however, it seems down now). If this ticket does not give a statistically significant increase to the startup time, it is ok for me. See [comment:43]



---

archive/issue_comments_274840.json:
```json
{
    "body": "<a id='comment:49'></a>\nReplying to [jdemeyer](#comment%3A48):\n> I would like to see what the patchbot thinks of the startup time (however, it seems down now). If this ticket does not give a statistically significant increase to the startup time, it is ok for me. See [comment:43]\n\n\nSince the lists are built with `local=True` this should even be faster than before. The old way to build these lists was via the script `sage-package-list`...",
    "created_at": "2016-08-10T21:23:10Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274840",
    "user": "https://github.com/videlec"
}
```

<a id='comment:49'></a>
Replying to [jdemeyer](#comment%3A48):
> I would like to see what the patchbot thinks of the startup time (however, it seems down now). If this ticket does not give a statistically significant increase to the startup time, it is ok for me. See [comment:43]


Since the lists are built with `local=True` this should even be faster than before. The old way to build these lists was via the script `sage-package-list`...



---

archive/issue_comments_274841.json:
```json
{
    "body": "<a id='comment:50'></a>\nReplying to [vdelecroix](#comment%3A49):\n> The old way to build these lists was via the script `sage-package-list`...\n\n\nUnless I'm missing something, in the old version, the list of packages was not computed *every time that Sage starts*.",
    "created_at": "2016-08-10T21:26:57Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274841",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:50'></a>
Replying to [vdelecroix](#comment%3A49):
> The old way to build these lists was via the script `sage-package-list`...


Unless I'm missing something, in the old version, the list of packages was not computed *every time that Sage starts*.



---

archive/issue_comments_274842.json:
```json
{
    "body": "<a id='comment:51'></a>\nReplying to [jdemeyer](#comment%3A50):\n> Replying to [vdelecroix](#comment%3A49):\n> > The old way to build these lists was via the script `sage-package-list`...\n\n> \n> Unless I'm missing something, in the old version, the list of packages was not computed *every time that Sage starts*.\n\n\nIt was the very same. All of `_STANDARD_PACKAGES`, `_OPTIONAL_PACKAGES`, `_EXPERIMENTAL_PACKAGES` where computed at module loading time (since they are used in the doc of the module). And the module is loaded on startup.",
    "created_at": "2016-08-10T21:29:07Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274842",
    "user": "https://github.com/videlec"
}
```

<a id='comment:51'></a>
Replying to [jdemeyer](#comment%3A50):
> Replying to [vdelecroix](#comment%3A49):
> > The old way to build these lists was via the script `sage-package-list`...

> 
> Unless I'm missing something, in the old version, the list of packages was not computed *every time that Sage starts*.


It was the very same. All of `_STANDARD_PACKAGES`, `_OPTIONAL_PACKAGES`, `_EXPERIMENTAL_PACKAGES` where computed at module loading time (since they are used in the doc of the module). And the module is loaded on startup.



---

archive/issue_events_173057.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-08-11T17:23:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173057"
}
```



---

archive/issue_events_173058.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-08-11T17:23:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173058"
}
```



---

archive/issue_comments_274843.json:
```json
{
    "body": "<a id='comment:52'></a>\nI see a significant difference in startup time: on one OS X machine it takes about 800ms longer on average with this branch. (I ran `sage --startuptime` 10 times with and without the branch, discarding the first run in each case. Average without: 1760ms. With: 2560ms.) If I run `sage --startuptime sage.misc.package`, without the branch it takes about 0.8ms to import that module, while with the branch: 800ms.",
    "created_at": "2016-08-11T17:23:51Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274843",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:52'></a>
I see a significant difference in startup time: on one OS X machine it takes about 800ms longer on average with this branch. (I ran `sage --startuptime` 10 times with and without the branch, discarding the first run in each case. Average without: 1760ms. With: 2560ms.) If I run `sage --startuptime sage.misc.package`, without the branch it takes about 0.8ms to import that module, while with the branch: 800ms.



---

archive/issue_comments_274844.json:
```json
{
    "body": "**Changing commit** from \"[de597b27c45d0f629698832a4677b92b48472c3a](https://github.com/sagemath/sagetrac-mirror/commit/de597b27c45d0f629698832a4677b92b48472c3a)\" to \"[c6578f47420f1ca835e20d596221c1835b831dcf](https://github.com/sagemath/sagetrac-mirror/commit/c6578f47420f1ca835e20d596221c1835b831dcf)\".",
    "created_at": "2016-08-11T18:45:58Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274844",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[de597b27c45d0f629698832a4677b92b48472c3a](https://github.com/sagemath/sagetrac-mirror/commit/de597b27c45d0f629698832a4677b92b48472c3a)" to "[c6578f47420f1ca835e20d596221c1835b831dcf](https://github.com/sagemath/sagetrac-mirror/commit/c6578f47420f1ca835e20d596221c1835b831dcf)".



---

archive/issue_comments_274845.json:
```json
{
    "body": "<a id='comment:53'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad92490baddd8fa50542bb6568cbc03ab012f92f\">ad92490</a></td><td><code>19213: clean sage.misc.package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8840aa34c11d983572eafc256eb32f10f0d405a8\">8840aa3</a></td><td><code>19213: clean sage-list-packages script</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/383171a970631b0817d1ee6b32262033753d84fe\">383171a</a></td><td><code>19213: use list_packages in sage.doctest.control</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b9716618abd1207eaef43b32238a916ea832970\">3b97166</a></td><td><code>19213: work around MacOSX (absent) TLS support</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c91197c4d3df80d0ef69235692175aa84e706ff3\">c91197c</a></td><td><code>19213: a warning with tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6578f47420f1ca835e20d596221c1835b831dcf\">c6578f4</a></td><td><code>Trac 19213: remove X_PACKAGES from the doc + deprecations</code></td></tr></table>\n",
    "created_at": "2016-08-11T18:45:58Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274845",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad92490baddd8fa50542bb6568cbc03ab012f92f">ad92490</a></td><td><code>19213: clean sage.misc.package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8840aa34c11d983572eafc256eb32f10f0d405a8">8840aa3</a></td><td><code>19213: clean sage-list-packages script</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/383171a970631b0817d1ee6b32262033753d84fe">383171a</a></td><td><code>19213: use list_packages in sage.doctest.control</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b9716618abd1207eaef43b32238a916ea832970">3b97166</a></td><td><code>19213: work around MacOSX (absent) TLS support</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c91197c4d3df80d0ef69235692175aa84e706ff3">c91197c</a></td><td><code>19213: a warning with tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6578f47420f1ca835e20d596221c1835b831dcf">c6578f4</a></td><td><code>Trac 19213: remove X_PACKAGES from the doc + deprecations</code></td></tr></table>




---

archive/issue_events_173059.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-11T18:48:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173059"
}
```



---

archive/issue_events_173060.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-11T18:48:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173060"
}
```



---

archive/issue_comments_274846.json:
```json
{
    "body": "<a id='comment:54'></a>\nIndeed... I was wrong the variables `X_PACKAGES` where hardcoded (and unmaintained).\n\nI rebased and added some deprecations to all of `standard_packages`, `optional_packages`, `experimental_packages` and `package_versions` (since all the information is now available from `list_packages`).",
    "created_at": "2016-08-11T18:48:04Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274846",
    "user": "https://github.com/videlec"
}
```

<a id='comment:54'></a>
Indeed... I was wrong the variables `X_PACKAGES` where hardcoded (and unmaintained).

I rebased and added some deprecations to all of `standard_packages`, `optional_packages`, `experimental_packages` and `package_versions` (since all the information is now available from `list_packages`).



---

archive/issue_comments_274847.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,5 +3,6 @@\n - add pip functionalities to `sage.misc.package`\n - do not list anymore old style packages (see also #21132)\n - relies on `sage.misc.packages` in `sage-list-packages`\n+- deprecate `standard_packages`, `optional_packages`, `experimental_packages` and `package_versions`\n \n pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.\n``````\n",
    "created_at": "2016-08-11T18:51:29Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274847",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,5 +3,6 @@
 - add pip functionalities to `sage.misc.package`
 - do not list anymore old style packages (see also #21132)
 - relies on `sage.misc.packages` in `sage-list-packages`
+- deprecate `standard_packages`, `optional_packages`, `experimental_packages` and `package_versions`
 
 pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.
``````




---

archive/issue_comments_274848.json:
```json
{
    "body": "<a id='comment:56'></a>\nReplying to [vdelecroix](#comment%3A54):\n> Indeed... I was wrong the variables `X_PACKAGES` where hardcoded\n\n\nYes, that's what I meant.",
    "created_at": "2016-08-12T08:30:54Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274848",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:56'></a>
Replying to [vdelecroix](#comment%3A54):
> Indeed... I was wrong the variables `X_PACKAGES` where hardcoded


Yes, that's what I meant.



---

archive/issue_comments_274849.json:
```json
{
    "body": "<a id='comment:57'></a>\nI don't see why `standard_packages()` and friends should be deprecated. They offer a user-friendly interface for `list_packages()`.",
    "created_at": "2016-08-12T08:32:31Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274849",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:57'></a>
I don't see why `standard_packages()` and friends should be deprecated. They offer a user-friendly interface for `list_packages()`.



---

archive/issue_comments_274850.json:
```json
{
    "body": "<a id='comment:58'></a>\nAnyway, I don't really care much about this.",
    "created_at": "2016-08-12T08:38:06Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274850",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:58'></a>
Anyway, I don't really care much about this.



---

archive/issue_comments_274851.json:
```json
{
    "body": "<a id='comment:59'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378\">f054998</a></td><td><code>Trac 19213: remove deprecations</code></td></tr></table>\n",
    "created_at": "2016-08-12T14:10:49Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274851",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378">f054998</a></td><td><code>Trac 19213: remove deprecations</code></td></tr></table>




---

archive/issue_comments_274852.json:
```json
{
    "body": "**Changing commit** from \"[c6578f47420f1ca835e20d596221c1835b831dcf](https://github.com/sagemath/sagetrac-mirror/commit/c6578f47420f1ca835e20d596221c1835b831dcf)\" to \"[f0549980f6951f0fe6638afcdb309cdf50aa1378](https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378)\".",
    "created_at": "2016-08-12T14:10:49Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274852",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c6578f47420f1ca835e20d596221c1835b831dcf](https://github.com/sagemath/sagetrac-mirror/commit/c6578f47420f1ca835e20d596221c1835b831dcf)" to "[f0549980f6951f0fe6638afcdb309cdf50aa1378](https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378)".



---

archive/issue_comments_274853.json:
```json
{
    "body": "<a id='comment:60'></a>\nI don't care either. But a pair of lists is not a lot more friendly than a dictionary.",
    "created_at": "2016-08-12T14:11:14Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274853",
    "user": "https://github.com/videlec"
}
```

<a id='comment:60'></a>
I don't care either. But a pair of lists is not a lot more friendly than a dictionary.



---

archive/issue_comments_274854.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,6 +3,5 @@\n - add pip functionalities to `sage.misc.package`\n - do not list anymore old style packages (see also #21132)\n - relies on `sage.misc.packages` in `sage-list-packages`\n-- deprecate `standard_packages`, `optional_packages`, `experimental_packages` and `package_versions`\n \n pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.\n``````\n",
    "created_at": "2016-08-12T14:11:35Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274854",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,6 +3,5 @@
 - add pip functionalities to `sage.misc.package`
 - do not list anymore old style packages (see also #21132)
 - relies on `sage.misc.packages` in `sage-list-packages`
-- deprecate `standard_packages`, `optional_packages`, `experimental_packages` and `package_versions`
 
 pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.
``````




---

archive/issue_events_173061.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-15T07:34:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173061"
}
```



---

archive/issue_events_173062.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-15T07:34:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173062"
}
```



---

archive/issue_comments_274855.json:
```json
{
    "body": "**Changing branch** from \"[u/vdelecroix/19213](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/19213)\" to \"[f0549980f6951f0fe6638afcdb309cdf50aa1378](https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378)\".",
    "created_at": "2016-08-17T06:40:33Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274855",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/vdelecroix/19213](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/19213)" to "[f0549980f6951f0fe6638afcdb309cdf50aa1378](https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378)".



---

archive/issue_events_173063.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-17T06:40:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173063"
}
```



---

archive/issue_events_173064.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-17T06:40:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-173064"
}
```



---

archive/issue_comments_274856.json:
```json
{
    "body": "<a id='comment:64'></a>\nIt seems that the deprecation warnings were removed in the latest commit f054998 , but the documentation still says they are deprecated. I modified the documentation accordingly in #23849 .",
    "created_at": "2017-09-13T17:42:01Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274856",
    "user": "https://github.com/koffie"
}
```

<a id='comment:64'></a>
It seems that the deprecation warnings were removed in the latest commit f054998 , but the documentation still says they are deprecated. I modified the documentation accordingly in #23849 .



---

archive/issue_comments_274857.json:
```json
{
    "body": "**Changing commit** from \"[f0549980f6951f0fe6638afcdb309cdf50aa1378](https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378)\" to \"\".",
    "created_at": "2017-09-13T17:42:01Z",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-274857",
    "user": "https://github.com/koffie"
}
```

**Changing commit** from "[f0549980f6951f0fe6638afcdb309cdf50aa1378](https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378)" to "".
