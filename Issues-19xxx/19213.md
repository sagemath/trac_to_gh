# Issue 19213: Cleaning sage-package-list

archive/issues_018976.json:
```json
{
    "assignees": [],
    "body": "This ticket enhances the module `sage.misc.package` and the script `sage-list-packages`:\n- add independent functions in `sage.misc.package` to list the (new style) packages\n- add pip functionalities to `sage.misc.package`\n- do not list anymore old style packages (see also #21132)\n- relies on `sage.misc.packages` in `sage-list-packages`\n\npip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.\n\nCC:  @videlec @jdemeyer @vbraun @embray\n\nBranch: **[`f054998`](https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378)**\n\nReviewer: **Matthias Koeppe, Jeroen Demeyer**\n\nAuthor: **Vincent Delecroix**\n\nComponent: **scripts**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19213_\n\n",
    "closed_at": "2016-08-17T06:40:33Z",
    "created_at": "2015-09-14T21:26:34Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20scripts",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Cleaning sage-package-list",
    "type": "issue",
    "updated_at": "2017-09-13T17:42:01Z",
    "url": "https://github.com/sagemath/sage/issues/19213",
    "user": "https://github.com/jhpalmieri"
}
```
This ticket enhances the module `sage.misc.package` and the script `sage-list-packages`:
- add independent functions in `sage.misc.package` to list the (new style) packages
- add pip functionalities to `sage.misc.package`
- do not list anymore old style packages (see also #21132)
- relies on `sage.misc.packages` in `sage-list-packages`

pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.

CC:  @videlec @jdemeyer @vbraun @embray

Branch: **[`f054998`](https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378)**

Reviewer: **Matthias Koeppe, Jeroen Demeyer**

Author: **Vincent Delecroix**

Component: **scripts**

_Issue created by migration from https://trac.sagemath.org/ticket/19213_





---

archive/issue_events_274024.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-09-14T21:26:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274024"
}
```



---

archive/issue_events_274025.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-09-14T21:26:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274025"
}
```



---

archive/issue_events_274026.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-09-14T21:26:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274026"
}
```



---

archive/issue_events_274027.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-09-14T21:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274027"
}
```



---

archive/issue_events_274028.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2015-09-14T21:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274028"
}
```



---

archive/issue_comments_272259.json:
```json
{
    "body": "Branch: **[u/jhpalmieri/pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/pip_packages)**",
    "created_at": "2015-09-14T21:27:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272259",
    "user": "https://github.com/jhpalmieri"
}
```

Branch: **[u/jhpalmieri/pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/pip_packages)**



---

archive/issue_comments_272260.json:
```json
{
    "body": "Commit: **[`00224aa`](https://github.com/sagemath/sagetrac-mirror/commit/00224aafc17efcb3a4d5504bdbcf036fae5bca57)**",
    "created_at": "2015-09-15T01:15:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272260",
    "user": "https://github.com/videlec"
}
```

Commit: **[`00224aa`](https://github.com/sagemath/sagetrac-mirror/commit/00224aafc17efcb3a4d5504bdbcf036fae5bca57)**



---

archive/issue_comments_272261.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nTo my mind, it would nice to also list non installed pip packages as well as the last version available. The pip version can be obtained from Python with the json API\n\n```\nimport urllib2\nimport json\n\ndef pip_version(package_name):\n    url = \"https://pypi.python.org/pypi/{}/json\".format(package_name)\n\n    try:\n        data = json.load(urllib2.urlopen(urllib2.Request(url)))\n    except urllib2.HTTPError:\n        return None\n\n    try:\n        return data[\"info\"][\"version\"]\n    except KeyError:\n        return None\n```\nThe last version available might differ from what is installed. And it is worth mentioning that an update is available.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93ec09bd798f00db8f1e7a767c33870c27d769c0\"><code>93ec09b</code></a></td><td><code>Change sage -p to always install a package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6ddd0eb033c4aae465839e07b83d8ea3c266b86\"><code>c6ddd0e</code></a></td><td><code>Better help</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3d7ef381ebdc0e3eb41d11f8ad67b148ae73bd0\"><code>f3d7ef3</code></a></td><td><code>Remove -f option to sage-spkg when running sage -i</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/752e269ffb0f5417353815af6cb593a461b135e4\"><code>752e269</code></a></td><td><code>Use PKG-clean target to implement sage -f PKG</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1812e4fb1e39565446bfe6aa0e4c9d38173618fb\"><code>1812e4f</code></a></td><td><code>Merge tag '6.9.beta6' into t/19119/ticket/19119</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/adef308eaf6a6c478301471c3c2350260b39a5fe\"><code>adef308</code></a></td><td><code>Add rules for installing packages with pip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdba3ee0772b1885c3f60cb35f850fee576a7f9a\"><code>fdba3ee</code></a></td><td><code>Add mercurial and sqlalchemy (ex-standard packages)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00224aafc17efcb3a4d5504bdbcf036fae5bca57\"><code>00224aa</code></a></td><td><code>trac 19213: include packages from build/pkgs/piprules in 'sage --optional'</code></td></tr></table>\n",
    "created_at": "2015-09-15T01:15:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272261",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

To my mind, it would nice to also list non installed pip packages as well as the last version available. The pip version can be obtained from Python with the json API

```
import urllib2
import json

def pip_version(package_name):
    url = "https://pypi.python.org/pypi/{}/json".format(package_name)

    try:
        data = json.load(urllib2.urlopen(urllib2.Request(url)))
    except urllib2.HTTPError:
        return None

    try:
        return data["info"]["version"]
    except KeyError:
        return None
```
The last version available might differ from what is installed. And it is worth mentioning that an update is available.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93ec09bd798f00db8f1e7a767c33870c27d769c0"><code>93ec09b</code></a></td><td><code>Change sage -p to always install a package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6ddd0eb033c4aae465839e07b83d8ea3c266b86"><code>c6ddd0e</code></a></td><td><code>Better help</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3d7ef381ebdc0e3eb41d11f8ad67b148ae73bd0"><code>f3d7ef3</code></a></td><td><code>Remove -f option to sage-spkg when running sage -i</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/752e269ffb0f5417353815af6cb593a461b135e4"><code>752e269</code></a></td><td><code>Use PKG-clean target to implement sage -f PKG</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1812e4fb1e39565446bfe6aa0e4c9d38173618fb"><code>1812e4f</code></a></td><td><code>Merge tag '6.9.beta6' into t/19119/ticket/19119</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/adef308eaf6a6c478301471c3c2350260b39a5fe"><code>adef308</code></a></td><td><code>Add rules for installing packages with pip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdba3ee0772b1885c3f60cb35f850fee576a7f9a"><code>fdba3ee</code></a></td><td><code>Add mercurial and sqlalchemy (ex-standard packages)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00224aafc17efcb3a4d5504bdbcf036fae5bca57"><code>00224aa</code></a></td><td><code>trac 19213: include packages from build/pkgs/piprules in 'sage --optional'</code></td></tr></table>




---

archive/issue_comments_272262.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@videlec](#comment:3):\n> To my mind, it would nice to also list non installed pip packages as well as the last version available. The pip version can be obtained from Python with the json API\n\nOne disadvantage to this is that it requires internet access, which `sage --optional --local` does not do. But this would be a good addition if `--local` were not given. If we do list the non-installed packages, then it's going to get unwieldy if there are hundreds of entries in `build/pkgs/piprules`. What if that file gets big?\n\nDo we want to list these as optional packages or in another category? `sage --pip_packages`?",
    "created_at": "2015-09-15T01:38:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272262",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@videlec](#comment:3):
> To my mind, it would nice to also list non installed pip packages as well as the last version available. The pip version can be obtained from Python with the json API

One disadvantage to this is that it requires internet access, which `sage --optional --local` does not do. But this would be a good addition if `--local` were not given. If we do list the non-installed packages, then it's going to get unwieldy if there are hundreds of entries in `build/pkgs/piprules`. What if that file gets big?

Do we want to list these as optional packages or in another category? `sage --pip_packages`?



---

archive/issue_comments_272263.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI do not want these pip packages to be treated like optional packages. If anything, they are closer to \"experimental\" than to \"optional\". We don't have control over them, so they are more likely to break when the upstream package gets upgraded.",
    "created_at": "2015-09-15T07:25:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272263",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

I do not want these pip packages to be treated like optional packages. If anything, they are closer to "experimental" than to "optional". We don't have control over them, so they are more likely to break when the upstream package gets upgraded.



---

archive/issue_events_274029.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-15T07:25:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274029"
}
```



---

archive/issue_events_274030.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-15T07:25:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274030"
}
```



---

archive/issue_events_274031.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-15T07:25:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274031"
}
```



---

archive/issue_events_274032.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-09-15T07:25:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20scripts",
    "label_color": "000080",
    "label_name": "c: scripts",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274032"
}
```



---

archive/issue_comments_272264.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@jdemeyer](#comment:5):\n> I do not want these pip packages to be treated like optional packages. If anything, they are closer to \"experimental\" than to \"optional\". We don't have control over them, so they are more likely to break when the upstream package gets upgraded.\n\nDo you mean\n\n- you want them listed in `sage --experimental`, not `sage --optional`, or\n- you don't want them detected for the purpose of doctests,\n\nor both?",
    "created_at": "2015-09-15T15:26:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272264",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@jdemeyer](#comment:5):
> I do not want these pip packages to be treated like optional packages. If anything, they are closer to "experimental" than to "optional". We don't have control over them, so they are more likely to break when the upstream package gets upgraded.

Do you mean

- you want them listed in `sage --experimental`, not `sage --optional`, or
- you don't want them detected for the purpose of doctests,

or both?



---

archive/issue_comments_272265.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@jhpalmieri](#comment:6):\n> Do you mean\n> \n> - you want them listed in `sage --experimental`, not `sage --optional`, or\n> - you don't want them detected for the purpose of doctests,\n> \n> or both?\n\nThe default for `--optional` flags in doctests really should be optional packages only, so I don't want pip packages to be tested by doctests by default. Therefore, I also don't want those packages to appear in `sage --optional`. So I really prefer to see them as a new category: not standard, not optional, not experimental.",
    "created_at": "2015-09-15T16:54:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272265",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@jhpalmieri](#comment:6):
> Do you mean
> 
> - you want them listed in `sage --experimental`, not `sage --optional`, or
> - you don't want them detected for the purpose of doctests,
> 
> or both?

The default for `--optional` flags in doctests really should be optional packages only, so I don't want pip packages to be tested by doctests by default. Therefore, I also don't want those packages to appear in `sage --optional`. So I really prefer to see them as a new category: not standard, not optional, not experimental.



---

archive/issue_comments_272266.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWait, if an (old-style) optional package is listed in `piprules`, you still don't want it listed in `sage --optional`? Should it be removed altogether from the listing, or listed as `not_installed`? If it's old-style, by the way, having it listed in `sage --optional` is somewhat independent of having it used in doctests, since the doctest framework only looks at local packages. So in my current branch, if we delete the changes to `doctest/control.py`, then these pip packages won't be used automatically in doctests.",
    "created_at": "2015-09-15T18:29:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272266",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

Wait, if an (old-style) optional package is listed in `piprules`, you still don't want it listed in `sage --optional`? Should it be removed altogether from the listing, or listed as `not_installed`? If it's old-style, by the way, having it listed in `sage --optional` is somewhat independent of having it used in doctests, since the doctest framework only looks at local packages. So in my current branch, if we delete the changes to `doctest/control.py`, then these pip packages won't be used automatically in doctests.



---

archive/issue_comments_272267.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@jdemeyer](#comment:7):\n> Replying to [@jhpalmieri](#comment:6):\n> > Do you mean\n> > \n> > - you want them listed in `sage --experimental`, not `sage --optional`, or\n> > - you don't want them detected for the purpose of doctests,\n> > \n> > or both?\n\n> \n> The default for `--optional` flags in doctests really should be optional packages only, so I don't want pip packages to be tested by doctests by default. Therefore, I also don't want those packages to appear in `sage --optional`. So I really prefer to see them as a new category: not standard, not optional, not experimental.\n\nI see several solutions to deal with \"pip packages\":\n1. having a new category of packages (let say python-optional)\n2. be stricter about versioning, i.e. in piprules specify the version of the packages we support\n\n```\nbrian=1.3.1\ntrac=2.3\n```\n  Very simple to maintain!\n\nI agree that it would be hard to prevent a pip package to just break because versions are not backward compatible. So solution 2 looks appropriate to me. Otherwise, we can have a more precise tagging system for python-optional packages\n\n```\nsage: my_test()  # python-optional -- 3.5 <= beautifulsoup <= 4.1.2\n```\nIt is more flexible than the piprules strict versioning solution but the cost of maintenance is much higher.\n\nVincent",
    "created_at": "2015-09-16T14:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272267",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@jdemeyer](#comment:7):
> Replying to [@jhpalmieri](#comment:6):
> > Do you mean
> > 
> > - you want them listed in `sage --experimental`, not `sage --optional`, or
> > - you don't want them detected for the purpose of doctests,
> > 
> > or both?

> 
> The default for `--optional` flags in doctests really should be optional packages only, so I don't want pip packages to be tested by doctests by default. Therefore, I also don't want those packages to appear in `sage --optional`. So I really prefer to see them as a new category: not standard, not optional, not experimental.

I see several solutions to deal with "pip packages":
1. having a new category of packages (let say python-optional)
2. be stricter about versioning, i.e. in piprules specify the version of the packages we support

```
brian=1.3.1
trac=2.3
```
  Very simple to maintain!

I agree that it would be hard to prevent a pip package to just break because versions are not backward compatible. So solution 2 looks appropriate to me. Otherwise, we can have a more precise tagging system for python-optional packages

```
sage: my_test()  # python-optional -- 3.5 <= beautifulsoup <= 4.1.2
```
It is more flexible than the piprules strict versioning solution but the cost of maintenance is much higher.

Vincent



---

archive/issue_comments_272268.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI have a working version of `sage-list-packages` doing\n\n```\n$ ./sage-list-packages python\n[package] .............................. [latest version] ([installed version])\n\nbeautifulsoup........................... 3.2.1 (3.2.1)\nbiopython............................... 1.65 (1.65)\nbrian................................... 1.4.1 (1.4.1)\nguppy................................... 0.1.10 (0.1.10)\nmercurial............................... 3.5.1 (3.5.1)\nmpi4py.................................. 1.3.1 (1.3.1)\nnibabel................................. 2.0.1 (2.0.1)\npybtex.................................. 0.18 (0.18)\npyflakes................................ 0.9.2 (0.9.2)\npyopenssl............................... 0.15.1 (0.15.1)\nsqlalchemy.............................. 1.0.8 (1.0.8)\ntrac.................................... 1.0.9 (1.0.9)\n```\nThe only problem is that it is relatively long to get the information from the pip json API for all the packages. Perhaps, one can be smarter with `urllib2`.\n\nJohn, am I free to change the branch in order to make my proposition publicly available?\n\nVincent",
    "created_at": "2015-09-16T15:32:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272268",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

I have a working version of `sage-list-packages` doing

```
$ ./sage-list-packages python
[package] .............................. [latest version] ([installed version])

beautifulsoup........................... 3.2.1 (3.2.1)
biopython............................... 1.65 (1.65)
brian................................... 1.4.1 (1.4.1)
guppy................................... 0.1.10 (0.1.10)
mercurial............................... 3.5.1 (3.5.1)
mpi4py.................................. 1.3.1 (1.3.1)
nibabel................................. 2.0.1 (2.0.1)
pybtex.................................. 0.18 (0.18)
pyflakes................................ 0.9.2 (0.9.2)
pyopenssl............................... 0.15.1 (0.15.1)
sqlalchemy.............................. 1.0.8 (1.0.8)
trac.................................... 1.0.9 (1.0.9)
```
The only problem is that it is relatively long to get the information from the pip json API for all the packages. Perhaps, one can be smarter with `urllib2`.

John, am I free to change the branch in order to make my proposition publicly available?

Vincent



---

archive/issue_comments_272269.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nFurthermore, could we separate the issues of:\n- listing python packages\n- including optional doctests for them\n\nVincent",
    "created_at": "2015-09-16T15:44:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272269",
    "user": "https://github.com/videlec"
}
```

<div id="comment:11" align="right">comment:11</div>

Furthermore, could we separate the issues of:
- listing python packages
- including optional doctests for them

Vincent



---

archive/issue_comments_272270.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@videlec](#comment:10):\n> John, am I free to change the branch in order to make my proposition publicly available?\n\nPlease do so.",
    "created_at": "2015-09-16T16:02:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272270",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@videlec](#comment:10):
> John, am I free to change the branch in order to make my proposition publicly available?

Please do so.



---

archive/issue_comments_272271.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI have a few questions and comments:\n\n- if #19220 is merged (archiving superseded packages, including the `piprules` packages), how are users supposed to find out about `biopython`, `brian`, etc.? We need to include an option to `sage` which will call `sage-list-packages python`. Maybe we should also have an option which lists all packages: first standard, then optional, then experimental, then python/pip. Or maybe group all of the non-standard packages together, sorted by name. In any case, we shouldn't expect users to even be aware that there are several different types of non-standard packages; they should instead just be able to get one list to see if some particular package is supported.\n\n  Maybe a list like\n\n```\n[package (type)] .......... [latest version] ([installed version])\n\n...\nbiopython (pip) ........... latest version (installed version)\n...\nchomp (experimental) ...... latest version (installed version)\n...\nore_algebra (optional) .... latest version (installed version)\n...\n```\n I'm not really sure, though.\n- Regarding the versions, I am not convinced that we can accurately specify which version of each package we support. Who is going to maintain this? Unless there is some automatic way of determining the versions supported by Sage, the versions will quickly get out of date. If `brian` gets updated to 1.4.2 but we list `brian=1.4.1`, what happens if a user does `sage -i brian`? What happens if a user does `sage --pip install brian`?",
    "created_at": "2015-09-16T16:56:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272271",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:13" align="right">comment:13</div>

I have a few questions and comments:

- if #19220 is merged (archiving superseded packages, including the `piprules` packages), how are users supposed to find out about `biopython`, `brian`, etc.? We need to include an option to `sage` which will call `sage-list-packages python`. Maybe we should also have an option which lists all packages: first standard, then optional, then experimental, then python/pip. Or maybe group all of the non-standard packages together, sorted by name. In any case, we shouldn't expect users to even be aware that there are several different types of non-standard packages; they should instead just be able to get one list to see if some particular package is supported.

  Maybe a list like

```
[package (type)] .......... [latest version] ([installed version])

...
biopython (pip) ........... latest version (installed version)
...
chomp (experimental) ...... latest version (installed version)
...
ore_algebra (optional) .... latest version (installed version)
...
```
 I'm not really sure, though.
- Regarding the versions, I am not convinced that we can accurately specify which version of each package we support. Who is going to maintain this? Unless there is some automatic way of determining the versions supported by Sage, the versions will quickly get out of date. If `brian` gets updated to 1.4.2 but we list `brian=1.4.1`, what happens if a user does `sage -i brian`? What happens if a user does `sage --pip install brian`?



---

archive/issue_comments_272272.json:
```json
{
    "body": "Changed commit from **[`00224aa`](https://github.com/sagemath/sagetrac-mirror/commit/00224aafc17efcb3a4d5504bdbcf036fae5bca57)** to none",
    "created_at": "2015-09-16T21:53:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272272",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`00224aa`](https://github.com/sagemath/sagetrac-mirror/commit/00224aafc17efcb3a4d5504bdbcf036fae5bca57)** to none



---

archive/issue_comments_272273.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/pip_packages)** to **[public/pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/public/pip_packages)**",
    "created_at": "2015-09-16T21:53:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272273",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/jhpalmieri/pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/pip_packages)** to **[public/pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/public/pip_packages)**



---

archive/issue_comments_272274.json:
```json
{
    "body": "Commit: **[`19e3b86`](https://github.com/sagemath/sagetrac-mirror/commit/19e3b86ac89a4441bf101130674b4daec9e14910)**",
    "created_at": "2015-09-16T21:53:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272274",
    "user": "https://github.com/videlec"
}
```

Commit: **[`19e3b86`](https://github.com/sagemath/sagetrac-mirror/commit/19e3b86ac89a4441bf101130674b4daec9e14910)**



---

archive/issue_comments_272275.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93ec09bd798f00db8f1e7a767c33870c27d769c0\"><code>93ec09b</code></a></td><td><code>Change sage -p to always install a package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6ddd0eb033c4aae465839e07b83d8ea3c266b86\"><code>c6ddd0e</code></a></td><td><code>Better help</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3d7ef381ebdc0e3eb41d11f8ad67b148ae73bd0\"><code>f3d7ef3</code></a></td><td><code>Remove -f option to sage-spkg when running sage -i</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/752e269ffb0f5417353815af6cb593a461b135e4\"><code>752e269</code></a></td><td><code>Use PKG-clean target to implement sage -f PKG</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1812e4fb1e39565446bfe6aa0e4c9d38173618fb\"><code>1812e4f</code></a></td><td><code>Merge tag '6.9.beta6' into t/19119/ticket/19119</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/adef308eaf6a6c478301471c3c2350260b39a5fe\"><code>adef308</code></a></td><td><code>Add rules for installing packages with pip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdba3ee0772b1885c3f60cb35f850fee576a7f9a\"><code>fdba3ee</code></a></td><td><code>Add mercurial and sqlalchemy (ex-standard packages)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00224aafc17efcb3a4d5504bdbcf036fae5bca57\"><code>00224aa</code></a></td><td><code>trac 19213: include packages from build/pkgs/piprules in 'sage --optional'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19e3b86ac89a4441bf101130674b4daec9e14910\"><code>19e3b86</code></a></td><td><code>trac 19213: separation of python packages</code></td></tr></table>\n",
    "created_at": "2015-09-16T21:53:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272275",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93ec09bd798f00db8f1e7a767c33870c27d769c0"><code>93ec09b</code></a></td><td><code>Change sage -p to always install a package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6ddd0eb033c4aae465839e07b83d8ea3c266b86"><code>c6ddd0e</code></a></td><td><code>Better help</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3d7ef381ebdc0e3eb41d11f8ad67b148ae73bd0"><code>f3d7ef3</code></a></td><td><code>Remove -f option to sage-spkg when running sage -i</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/752e269ffb0f5417353815af6cb593a461b135e4"><code>752e269</code></a></td><td><code>Use PKG-clean target to implement sage -f PKG</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1812e4fb1e39565446bfe6aa0e4c9d38173618fb"><code>1812e4f</code></a></td><td><code>Merge tag '6.9.beta6' into t/19119/ticket/19119</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/adef308eaf6a6c478301471c3c2350260b39a5fe"><code>adef308</code></a></td><td><code>Add rules for installing packages with pip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdba3ee0772b1885c3f60cb35f850fee576a7f9a"><code>fdba3ee</code></a></td><td><code>Add mercurial and sqlalchemy (ex-standard packages)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00224aafc17efcb3a4d5504bdbcf036fae5bca57"><code>00224aa</code></a></td><td><code>trac 19213: include packages from build/pkgs/piprules in 'sage --optional'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19e3b86ac89a4441bf101130674b4daec9e14910"><code>19e3b86</code></a></td><td><code>trac 19213: separation of python packages</code></td></tr></table>




---

archive/issue_comments_272276.json:
```json
{
    "body": "Changed branch from **[public/pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/public/pip_packages)** to **[public/19213](https://github.com/sagemath/sagetrac-mirror/tree/public/19213)**",
    "created_at": "2015-09-16T21:53:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272276",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[public/pip_packages](https://github.com/sagemath/sagetrac-mirror/tree/public/pip_packages)** to **[public/19213](https://github.com/sagemath/sagetrac-mirror/tree/public/19213)**



---

archive/issue_comments_272277.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nWhat is the status on this?",
    "created_at": "2016-07-16T17:17:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272277",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

What is the status on this?



---

archive/issue_events_274033.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-07-16T17:17:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274033"
}
```



---

archive/issue_events_274034.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-07-16T17:17:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274034"
}
```



---

archive/issue_comments_272278.json:
```json
{
    "body": "Changed dependencies from **#19187** to none",
    "created_at": "2016-07-29T18:27:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272278",
    "user": "https://github.com/sagetrac-dmuthiah"
}
```

Changed dependencies from **#19187** to none



---

archive/issue_comments_272279.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,18 +1,3 @@\n-In #19187, the file `build/pkgs/piprules` was created. This allows any packages listed there to be installed via `sage -i PKG` by just running `pip install PKG`. The changes here allow such packages to be listed when running `sage --optional`, and therefore to be detected as optional packages when doctesting.\n+In #19187, a package type `pip` was created. Such package can be installed via `sage -i PKG` (which in turn runs `pip install PKG`). **It is not clear whether this feature is transitional while moving to new style pkgs.**\n \n-For example: after running `sage -i brian`, `sage --optional` gives me\n-\n-```\n-...\n-bliss................................... 0.72.p1 (not_installed)\n-brian................................... 1.4.1 (1.4.1)\n-buckygen................................ 1.0 (not_installed)\n-...\n-```\n-and doctesting gives me\n-\n-```\n-Using --optional=arb,brian,ccache,gcc,mpir,python2,sage,scons\n-```\n-\n-This does not print package information for all packages listed in `build/pkg/piprules`, only for those which have been installed\n+This ticket propose that pip packages appear with `sage -optional`. We can also obtain the version by consulting PyPI (but this is time consuming). One interesting consequence would be the possibility to doctest these packages in Sage.\n``````\n",
    "created_at": "2016-07-29T18:27:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272279",
    "user": "https://github.com/sagetrac-dmuthiah"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,18 +1,3 @@
-In #19187, the file `build/pkgs/piprules` was created. This allows any packages listed there to be installed via `sage -i PKG` by just running `pip install PKG`. The changes here allow such packages to be listed when running `sage --optional`, and therefore to be detected as optional packages when doctesting.
+In #19187, a package type `pip` was created. Such package can be installed via `sage -i PKG` (which in turn runs `pip install PKG`). **It is not clear whether this feature is transitional while moving to new style pkgs.**
 
-For example: after running `sage -i brian`, `sage --optional` gives me
-
-```
-...
-bliss................................... 0.72.p1 (not_installed)
-brian................................... 1.4.1 (1.4.1)
-buckygen................................ 1.0 (not_installed)
-...
-```
-and doctesting gives me
-
-```
-Using --optional=arb,brian,ccache,gcc,mpir,python2,sage,scons
-```
-
-This does not print package information for all packages listed in `build/pkg/piprules`, only for those which have been installed
+This ticket propose that pip packages appear with `sage -optional`. We can also obtain the version by consulting PyPI (but this is time consuming). One interesting consequence would be the possibility to doctest these packages in Sage.
``````




---

archive/issue_events_274035.json:
```json
{
    "actor": "https://github.com/sagetrac-dmuthiah",
    "created_at": "2016-07-29T18:34:15Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "title_is": "Allow 'sage --optional' to list pip packages",
    "title_was": "For packages listed in build/pkgs/piprules, allow 'sage --optional' to list them",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274035"
}
```



---

archive/issue_comments_272280.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n In #19187, a package type `pip` was created. Such package can be installed via `sage -i PKG` (which in turn runs `pip install PKG`). **It is not clear whether this feature is transitional while moving to new style pkgs.**\n \n-This ticket propose that pip packages appear with `sage -optional`. We can also obtain the version by consulting PyPI (but this is time consuming). One interesting consequence would be the possibility to doctest these packages in Sage.\n+This ticket propose that pip packages appear with `sage -optional`. We can easily obtain the version installed and the last available by consulting PyPI (but this is time consuming). One interesting consequence would be the possibility to doctest these packages in Sage.\n``````\n",
    "created_at": "2016-07-29T18:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272280",
    "user": "https://github.com/sagetrac-dmuthiah"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 In #19187, a package type `pip` was created. Such package can be installed via `sage -i PKG` (which in turn runs `pip install PKG`). **It is not clear whether this feature is transitional while moving to new style pkgs.**
 
-This ticket propose that pip packages appear with `sage -optional`. We can also obtain the version by consulting PyPI (but this is time consuming). One interesting consequence would be the possibility to doctest these packages in Sage.
+This ticket propose that pip packages appear with `sage -optional`. We can easily obtain the version installed and the last available by consulting PyPI (but this is time consuming). One interesting consequence would be the possibility to doctest these packages in Sage.
``````




---

archive/issue_comments_272281.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf639805490e97a70087e045d2239e42d8423e6b\"><code>cf63980</code></a></td><td><code>19213: sage_setup.packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab40123279b2c0ada50675ca41e49ce712b5431c\"><code>ab40123</code></a></td><td><code>19213: add standalone files to list old style packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9af0741b99d457dea3dcf19b8a7acf179f8a139c\"><code>9af0741</code></a></td><td><code>19213: clean sage-list-packages script</code></td></tr></table>\n",
    "created_at": "2016-07-29T20:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272281",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf639805490e97a70087e045d2239e42d8423e6b"><code>cf63980</code></a></td><td><code>19213: sage_setup.packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab40123279b2c0ada50675ca41e49ce712b5431c"><code>ab40123</code></a></td><td><code>19213: add standalone files to list old style packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9af0741b99d457dea3dcf19b8a7acf179f8a139c"><code>9af0741</code></a></td><td><code>19213: clean sage-list-packages script</code></td></tr></table>




---

archive/issue_comments_272282.json:
```json
{
    "body": "Changed commit from **[`19e3b86`](https://github.com/sagemath/sagetrac-mirror/commit/19e3b86ac89a4441bf101130674b4daec9e14910)** to **[`9af0741`](https://github.com/sagemath/sagetrac-mirror/commit/9af0741b99d457dea3dcf19b8a7acf179f8a139c)**",
    "created_at": "2016-07-29T20:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272282",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`19e3b86`](https://github.com/sagemath/sagetrac-mirror/commit/19e3b86ac89a4441bf101130674b4daec9e14910)** to **[`9af0741`](https://github.com/sagemath/sagetrac-mirror/commit/9af0741b99d457dea3dcf19b8a7acf179f8a139c)**



---

archive/issue_comments_272283.json:
```json
{
    "body": "Changed branch from **[public/19213](https://github.com/sagemath/sagetrac-mirror/tree/public/19213)** to **[u/vdelecroix/19213](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/19213)**",
    "created_at": "2016-07-29T20:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272283",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[public/19213](https://github.com/sagemath/sagetrac-mirror/tree/public/19213)** to **[u/vdelecroix/19213](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/19213)**



---

archive/issue_events_274036.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-29T20:58:09Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "title_is": "Cleaning the sage-list-packages script",
    "title_was": "Allow 'sage --optional' to list pip packages",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274036"
}
```



---

archive/issue_events_274037.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-29T20:58:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274037"
}
```



---

archive/issue_events_274038.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-29T20:58:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274038"
}
```



---

archive/issue_comments_272284.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n-In #19187, a package type `pip` was created. Such package can be installed via `sage -i PKG` (which in turn runs `pip install PKG`). **It is not clear whether this feature is transitional while moving to new style pkgs.**\n+This ticket enhances the sage-list-packages script in several ways:\n+- create a `sage_setup.packages` to list new style packages (including pip style ones)\n+- create standalone files for old style packages\n+- relies on the above to list packages\n \n-This ticket propose that pip packages appear with `sage -optional`. We can easily obtain the version installed and the last available by consulting PyPI (but this is time consuming). One interesting consequence would be the possibility to doctest these packages in Sage.\n+pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. One consequence is that pip style package can now appear in optional doctests.\n``````\n",
    "created_at": "2016-07-29T20:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272284",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
-In #19187, a package type `pip` was created. Such package can be installed via `sage -i PKG` (which in turn runs `pip install PKG`). **It is not clear whether this feature is transitional while moving to new style pkgs.**
+This ticket enhances the sage-list-packages script in several ways:
+- create a `sage_setup.packages` to list new style packages (including pip style ones)
+- create standalone files for old style packages
+- relies on the above to list packages
 
-This ticket propose that pip packages appear with `sage -optional`. We can easily obtain the version installed and the last available by consulting PyPI (but this is time consuming). One interesting consequence would be the possibility to doctest these packages in Sage.
+pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. One consequence is that pip style package can now appear in optional doctests.
``````




---

archive/issue_comments_272285.json:
```json
{
    "body": "Changed author from **John Palmieri** to **Vincent Delecroix**",
    "created_at": "2016-07-29T20:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272285",
    "user": "https://github.com/videlec"
}
```

Changed author from **John Palmieri** to **Vincent Delecroix**



---

archive/issue_comments_272286.json:
```json
{
    "body": "Changed commit from **[`9af0741`](https://github.com/sagemath/sagetrac-mirror/commit/9af0741b99d457dea3dcf19b8a7acf179f8a139c)** to **[`79d2e00`](https://github.com/sagemath/sagetrac-mirror/commit/79d2e0011a5d851a03bb4b93f14f51d9e4887571)**",
    "created_at": "2016-07-29T20:59:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272286",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9af0741`](https://github.com/sagemath/sagetrac-mirror/commit/9af0741b99d457dea3dcf19b8a7acf179f8a139c)** to **[`79d2e00`](https://github.com/sagemath/sagetrac-mirror/commit/79d2e0011a5d851a03bb4b93f14f51d9e4887571)**



---

archive/issue_comments_272287.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79d2e0011a5d851a03bb4b93f14f51d9e4887571\"><code>79d2e00</code></a></td><td><code>19213: clean imports</code></td></tr></table>\n",
    "created_at": "2016-07-29T20:59:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272287",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79d2e0011a5d851a03bb4b93f14f51d9e4887571"><code>79d2e00</code></a></td><td><code>19213: clean imports</code></td></tr></table>




---

archive/issue_comments_272288.json:
```json
{
    "body": "Changed commit from **[`79d2e00`](https://github.com/sagemath/sagetrac-mirror/commit/79d2e0011a5d851a03bb4b93f14f51d9e4887571)** to **[`9b058ef`](https://github.com/sagemath/sagetrac-mirror/commit/9b058ef05334f517637683f907c3a32d03dbae95)**",
    "created_at": "2016-07-29T21:04:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272288",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`79d2e00`](https://github.com/sagemath/sagetrac-mirror/commit/79d2e0011a5d851a03bb4b93f14f51d9e4887571)** to **[`9b058ef`](https://github.com/sagemath/sagetrac-mirror/commit/9b058ef05334f517637683f907c3a32d03dbae95)**



---

archive/issue_comments_272289.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b058ef05334f517637683f907c3a32d03dbae95\"><code>9b058ef</code></a></td><td><code>19213: fix doctest</code></td></tr></table>\n",
    "created_at": "2016-07-29T21:04:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272289",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b058ef05334f517637683f907c3a32d03dbae95"><code>9b058ef</code></a></td><td><code>19213: fix doctest</code></td></tr></table>




---

archive/issue_comments_272290.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nACHTUNG! According to an email by user dmuthiah, changes by this user on this ticket were done by an unautorised person...",
    "created_at": "2016-07-29T21:18:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272290",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:22" align="right">comment:22</div>

ACHTUNG! According to an email by user dmuthiah, changes by this user on this ticket were done by an unautorised person...



---

archive/issue_comments_272291.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@dimpase](#comment:22):\n> ACHTUNG! According to an email by user dmuthiah, changes by this user on this ticket were done by an unautorised person... \n\nthat was me... (I sent an e-mail). Sorry.",
    "created_at": "2016-07-29T21:18:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272291",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@dimpase](#comment:22):
> ACHTUNG! According to an email by user dmuthiah, changes by this user on this ticket were done by an unautorised person... 

that was me... (I sent an e-mail). Sorry.



---

archive/issue_comments_272292.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nneed to superseed `sage/misc/packages` which contains *builtin* list of packages!!",
    "created_at": "2016-07-29T21:19:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272292",
    "user": "https://github.com/videlec"
}
```

<div id="comment:24" align="right">comment:24</div>

need to superseed `sage/misc/packages` which contains *builtin* list of packages!!



---

archive/issue_events_274039.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-29T21:19:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274039"
}
```



---

archive/issue_events_274040.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-29T21:19:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274040"
}
```



---

archive/issue_comments_272293.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n - create standalone files for old style packages\n - relies on the above to list packages\n \n-pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. One consequence is that pip style package can now appear in optional doctests.\n+pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.\n``````\n",
    "created_at": "2016-07-29T22:40:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272293",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 - create standalone files for old style packages
 - relies on the above to list packages
 
-pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. One consequence is that pip style package can now appear in optional doctests.
+pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.
``````




---

archive/issue_comments_272294.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n-This ticket enhances the sage-list-packages script in several ways:\n-- create a `sage_setup.packages` to list new style packages (including pip style ones)\n-- create standalone files for old style packages\n-- relies on the above to list packages\n+This ticket enhances the `sage-list-packages` script in several ways:\n+- add independent functions in `sage.misc.package` to list the (new style) packages\n+- add pip functionalities to `sage.misc.package`\n+- do not list anymore old style packages (see also #21132)\n+- relies on `sage.misc.packages` to actually list the packages\n \n-pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.\n+pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.\n``````\n",
    "created_at": "2016-07-29T23:20:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272294",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
-This ticket enhances the sage-list-packages script in several ways:
-- create a `sage_setup.packages` to list new style packages (including pip style ones)
-- create standalone files for old style packages
-- relies on the above to list packages
+This ticket enhances the `sage-list-packages` script in several ways:
+- add independent functions in `sage.misc.package` to list the (new style) packages
+- add pip functionalities to `sage.misc.package`
+- do not list anymore old style packages (see also #21132)
+- relies on `sage.misc.packages` to actually list the packages
 
-pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.
+pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.
``````




---

archive/issue_events_274041.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-29T23:20:12Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "title_is": "Cleaning sage-package-list",
    "title_was": "Cleaning the sage-list-packages script",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274041"
}
```



---

archive/issue_comments_272295.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d72e042992773031ddb1a1314099cac8a1beb75\"><code>7d72e04</code></a></td><td><code>19213: clean sage.misc.package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64cd48237538ab3a935d91b4eeed41813c2bdf8d\"><code>64cd482</code></a></td><td><code>19213: clean sage-list-packages script</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/faff48bd5628e808790ac83c8c827dd046224afd\"><code>faff48b</code></a></td><td><code>19213: use list_packages in sage.doctest.control</code></td></tr></table>\n",
    "created_at": "2016-07-29T23:45:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272295",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d72e042992773031ddb1a1314099cac8a1beb75"><code>7d72e04</code></a></td><td><code>19213: clean sage.misc.package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64cd48237538ab3a935d91b4eeed41813c2bdf8d"><code>64cd482</code></a></td><td><code>19213: clean sage-list-packages script</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/faff48bd5628e808790ac83c8c827dd046224afd"><code>faff48b</code></a></td><td><code>19213: use list_packages in sage.doctest.control</code></td></tr></table>




---

archive/issue_comments_272296.json:
```json
{
    "body": "Changed commit from **[`9b058ef`](https://github.com/sagemath/sagetrac-mirror/commit/9b058ef05334f517637683f907c3a32d03dbae95)** to **[`faff48b`](https://github.com/sagemath/sagetrac-mirror/commit/faff48bd5628e808790ac83c8c827dd046224afd)**",
    "created_at": "2016-07-29T23:45:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272296",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9b058ef`](https://github.com/sagemath/sagetrac-mirror/commit/9b058ef05334f517637683f907c3a32d03dbae95)** to **[`faff48b`](https://github.com/sagemath/sagetrac-mirror/commit/faff48bd5628e808790ac83c8c827dd046224afd)**



---

archive/issue_events_274042.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-29T23:45:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274042"
}
```



---

archive/issue_events_274043.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-29T23:45:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274043"
}
```



---

archive/issue_comments_272297.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThis is probably a FAQ, but I'm getting this error:\n\n```\n$ sage -optional\n[package]...............................[latest version] ([version])\n\nTraceback (most recent call last):\n  File \"/Users/mkoeppe/cvs/sage/src/bin/sage-list-packages\", line 67, in <module>\n    L = list_packages('optional', 'pip', local=args['local']).values()\n  File \"/Users/mkoeppe/cvs/sage/local/lib/python2.7/site-packages/sage/misc/package.py\", line 196, in list_packages\n    pkg['remote_version'] = pip_remote_version(p)\n  File \"/Users/mkoeppe/cvs/sage/local/lib/python2.7/site-packages/sage/misc/package.py\", line 87, in pip_remote_version\n    f = urlopen(url)\n  File \"/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py\", line 154, in urlopen\n    return opener.open(url, data, timeout)\n  File \"/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py\", line 431, in open\n    response = self._open(req, data)\n  File \"/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py\", line 449, in _open\n    '_open', req)\n  File \"/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py\", line 409, in _call_chain\n    result = func(*args)\n  File \"/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py\", line 1240, in https_open\n    context=self._context)\n  File \"/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py\", line 1197, in do_open\n    raise URLError(err)\nurllib2.URLError: <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)>\n```\n(I don't have problems with `sage -pip` otherwise.)",
    "created_at": "2016-08-03T19:54:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272297",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

This is probably a FAQ, but I'm getting this error:

```
$ sage -optional
[package]...............................[latest version] ([version])

Traceback (most recent call last):
  File "/Users/mkoeppe/cvs/sage/src/bin/sage-list-packages", line 67, in <module>
    L = list_packages('optional', 'pip', local=args['local']).values()
  File "/Users/mkoeppe/cvs/sage/local/lib/python2.7/site-packages/sage/misc/package.py", line 196, in list_packages
    pkg['remote_version'] = pip_remote_version(p)
  File "/Users/mkoeppe/cvs/sage/local/lib/python2.7/site-packages/sage/misc/package.py", line 87, in pip_remote_version
    f = urlopen(url)
  File "/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py", line 154, in urlopen
    return opener.open(url, data, timeout)
  File "/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py", line 431, in open
    response = self._open(req, data)
  File "/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py", line 449, in _open
    '_open', req)
  File "/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py", line 409, in _call_chain
    result = func(*args)
  File "/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py", line 1240, in https_open
    context=self._context)
  File "/Users/mkoeppe/cvs/sage/local/lib/python/urllib2.py", line 1197, in do_open
    raise URLError(err)
urllib2.URLError: <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)>
```
(I don't have problems with `sage -pip` otherwise.)



---

archive/issue_comments_272298.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nYou are on OSX; Apple's openssl library is outdated and lacks tls 1.2 support.",
    "created_at": "2016-08-03T22:18:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272298",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:30" align="right">comment:30</div>

You are on OSX; Apple's openssl library is outdated and lacks tls 1.2 support.



---

archive/issue_comments_272299.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nAnd PyPI does not seem to accept http connections... I can catch URLError and just return `version='?'` in that case. What do you think?",
    "created_at": "2016-08-03T22:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272299",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">comment:31</div>

And PyPI does not seem to accept http connections... I can catch URLError and just return `version='?'` in that case. What do you think?



---

archive/issue_comments_272300.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n-This ticket enhances the `sage-list-packages` script in several ways:\n+This ticket enhances the module `sage.misc.package` and the script `sage-list-packages`:\n - add independent functions in `sage.misc.package` to list the (new style) packages\n - add pip functionalities to `sage.misc.package`\n - do not list anymore old style packages (see also #21132)\n-- relies on `sage.misc.packages` to actually list the packages\n+- relies on `sage.misc.packages` in `sage-list-packages`\n \n pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.\n``````\n",
    "created_at": "2016-08-03T22:43:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272300",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
-This ticket enhances the `sage-list-packages` script in several ways:
+This ticket enhances the module `sage.misc.package` and the script `sage-list-packages`:
 - add independent functions in `sage.misc.package` to list the (new style) packages
 - add pip functionalities to `sage.misc.package`
 - do not list anymore old style packages (see also #21132)
-- relies on `sage.misc.packages` to actually list the packages
+- relies on `sage.misc.packages` in `sage-list-packages`
 
 pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.
``````




---

archive/issue_comments_272301.json:
```json
{
    "body": "Changed commit from **[`faff48b`](https://github.com/sagemath/sagetrac-mirror/commit/faff48bd5628e808790ac83c8c827dd046224afd)** to **[`41aaa3a`](https://github.com/sagemath/sagetrac-mirror/commit/41aaa3a0d8c68c65036e161a1eb709f29e16da69)**",
    "created_at": "2016-08-03T22:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272301",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`faff48b`](https://github.com/sagemath/sagetrac-mirror/commit/faff48bd5628e808790ac83c8c827dd046224afd)** to **[`41aaa3a`](https://github.com/sagemath/sagetrac-mirror/commit/41aaa3a0d8c68c65036e161a1eb709f29e16da69)**



---

archive/issue_comments_272302.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41aaa3a0d8c68c65036e161a1eb709f29e16da69\"><code>41aaa3a</code></a></td><td><code>19213: work around MacOSX (absent) TLS support</code></td></tr></table>\n",
    "created_at": "2016-08-03T22:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272302",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41aaa3a0d8c68c65036e161a1eb709f29e16da69"><code>41aaa3a</code></a></td><td><code>19213: work around MacOSX (absent) TLS support</code></td></tr></table>




---

archive/issue_comments_272303.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nPlease test again. Normally you should see the same output as with `sage-list-packages optional --local`.",
    "created_at": "2016-08-03T22:59:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272303",
    "user": "https://github.com/videlec"
}
```

<div id="comment:34" align="right">comment:34</div>

Please test again. Normally you should see the same output as with `sage-list-packages optional --local`.



---

archive/issue_comments_272304.json:
```json
{
    "body": "Changed commit from **[`41aaa3a`](https://github.com/sagemath/sagetrac-mirror/commit/41aaa3a0d8c68c65036e161a1eb709f29e16da69)** to **[`8750c2f`](https://github.com/sagemath/sagetrac-mirror/commit/8750c2f728da978d7f782ebde0ff9927326742cf)**",
    "created_at": "2016-08-03T22:59:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272304",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`41aaa3a`](https://github.com/sagemath/sagetrac-mirror/commit/41aaa3a0d8c68c65036e161a1eb709f29e16da69)** to **[`8750c2f`](https://github.com/sagemath/sagetrac-mirror/commit/8750c2f728da978d7f782ebde0ff9927326742cf)**



---

archive/issue_comments_272305.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8750c2f728da978d7f782ebde0ff9927326742cf\"><code>8750c2f</code></a></td><td><code>19213: work around MacOSX (absent) TLS support</code></td></tr></table>\n",
    "created_at": "2016-08-03T22:59:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272305",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8750c2f728da978d7f782ebde0ff9927326742cf"><code>8750c2f</code></a></td><td><code>19213: work around MacOSX (absent) TLS support</code></td></tr></table>




---

archive/issue_comments_272306.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@vbraun](#comment:30):\n> You are on OSX; Apple's openssl library is outdated and lacks tls 1.2 support.\n\nThanks. Is there a documented workaround for this for Sage users/developers?",
    "created_at": "2016-08-03T23:19:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272306",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@vbraun](#comment:30):
> You are on OSX; Apple's openssl library is outdated and lacks tls 1.2 support.

Thanks. Is there a documented workaround for this for Sage users/developers?



---

archive/issue_comments_272307.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@videlec](#comment:34):\n> Please test again. Normally you should see the same output as with `sage-list-packages optional --local`.\n\nSeems to work now.",
    "created_at": "2016-08-03T23:19:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272307",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@videlec](#comment:34):
> Please test again. Normally you should see the same output as with `sage-list-packages optional --local`.

Seems to work now.



---

archive/issue_comments_272308.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@mkoeppe](#comment:37):\n> Replying to [@videlec](#comment:34):\n> > Please test again. Normally you should see the same output as with `sage-list-packages optional --local`.\n\n> \n> Seems to work now.\n\nYes but normally you can not see remote pip version (look at the lines for the packages `beautifulsoup`, `biopython`, `sqlalchemy`,  etc)",
    "created_at": "2016-08-03T23:21:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272308",
    "user": "https://github.com/videlec"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@mkoeppe](#comment:37):
> Replying to [@videlec](#comment:34):
> > Please test again. Normally you should see the same output as with `sage-list-packages optional --local`.

> 
> Seems to work now.

Yes but normally you can not see remote pip version (look at the lines for the packages `beautifulsoup`, `biopython`, `sqlalchemy`,  etc)



---

archive/issue_comments_272309.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe, NEEDS MORE REVIEWERS**",
    "created_at": "2016-08-03T23:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272309",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe, NEEDS MORE REVIEWERS**



---

archive/issue_comments_272310.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI only took a cursory look at the code changes. Perhaps someone familiar with this code should take a closer look.",
    "created_at": "2016-08-03T23:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272310",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">comment:39</div>

I only took a cursory look at the code changes. Perhaps someone familiar with this code should take a closer look.



---

archive/issue_comments_272311.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@videlec](#comment:38):\n> Yes but normally you can not see remote pip version (look at the lines for the packages `beautifulsoup`, `biopython`, `sqlalchemy`,  etc)\n\nYes, I see question marks for these packages.",
    "created_at": "2016-08-03T23:22:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272311",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@videlec](#comment:38):
> Yes but normally you can not see remote pip version (look at the lines for the packages `beautifulsoup`, `biopython`, `sqlalchemy`,  etc)

Yes, I see question marks for these packages.



---

archive/issue_comments_272312.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nPerhaps there should be a warning/notice when the pip version query failed.",
    "created_at": "2016-08-04T00:00:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272312",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

Perhaps there should be a warning/notice when the pip version query failed.



---

archive/issue_comments_272313.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de597b27c45d0f629698832a4677b92b48472c3a\"><code>de597b2</code></a></td><td><code>19213: a warning with tests</code></td></tr></table>\n",
    "created_at": "2016-08-04T01:39:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272313",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de597b27c45d0f629698832a4677b92b48472c3a"><code>de597b2</code></a></td><td><code>19213: a warning with tests</code></td></tr></table>




---

archive/issue_comments_272314.json:
```json
{
    "body": "Changed commit from **[`8750c2f`](https://github.com/sagemath/sagetrac-mirror/commit/8750c2f728da978d7f782ebde0ff9927326742cf)** to **[`de597b2`](https://github.com/sagemath/sagetrac-mirror/commit/de597b27c45d0f629698832a4677b92b48472c3a)**",
    "created_at": "2016-08-04T01:39:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272314",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8750c2f`](https://github.com/sagemath/sagetrac-mirror/commit/8750c2f728da978d7f782ebde0ff9927326742cf)** to **[`de597b2`](https://github.com/sagemath/sagetrac-mirror/commit/de597b27c45d0f629698832a4677b92b48472c3a)**



---

archive/issue_comments_272315.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nIt is possible to somehow compute the package lists lazily? I am just a bit worried that those `_STANDARD_PACKAGES` lists will need to be computed every time that Sage starts.",
    "created_at": "2016-08-05T12:16:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272315",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43" align="right">comment:43</div>

It is possible to somehow compute the package lists lazily? I am just a bit worried that those `_STANDARD_PACKAGES` lists will need to be computed every time that Sage starts.



---

archive/issue_comments_272316.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@jdemeyer](#comment:43):\n> It is possible to somehow compute the package lists lazily? I am just a bit worried that those `_STANDARD_PACKAGES` lists will need to be computed every time that Sage starts.\n\nThe module would better not be imported on startup. I will change the imports to become lazy.",
    "created_at": "2016-08-08T13:24:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272316",
    "user": "https://github.com/videlec"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@jdemeyer](#comment:43):
> It is possible to somehow compute the package lists lazily? I am just a bit worried that those `_STANDARD_PACKAGES` lists will need to be computed every time that Sage starts.

The module would better not be imported on startup. I will change the imports to become lazy.



---

archive/issue_comments_272317.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nActually, it seems nearly impossible to be sure that `sage.misc.package` is not imported on startup using `sage.misc.lazy_import.is_during_startup`. The main reason is that `is_package_installed` is currently used in `sage_setup`.",
    "created_at": "2016-08-08T13:49:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272317",
    "user": "https://github.com/videlec"
}
```

<div id="comment:45" align="right">comment:45</div>

Actually, it seems nearly impossible to be sure that `sage.misc.package` is not imported on startup using `sage.misc.lazy_import.is_during_startup`. The main reason is that `is_package_installed` is currently used in `sage_setup`.



---

archive/issue_comments_272318.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nAs this is rather disjoint from the preoccupations of this ticket, I would prefer to postpone this problem. One solution is to wait for #20382 that get rid of `is_installed_package`. Then it would be trivial to forbid the import on startup.",
    "created_at": "2016-08-08T13:52:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272318",
    "user": "https://github.com/videlec"
}
```

<div id="comment:46" align="right">comment:46</div>

As this is rather disjoint from the preoccupations of this ticket, I would prefer to postpone this problem. One solution is to wait for #20382 that get rid of `is_installed_package`. Then it would be trivial to forbid the import on startup.



---

archive/issue_comments_272319.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@sagetrac-git](#comment:42):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n\n|                                                                                                                                                 |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[de597b2](https://github.com/sagemath/sagetrac-mirror/commit/de597b27c45d0f629698832a4677b92b48472c3a)|`19213: a warning with tests`|\nOK, that's much better with these warnings. \n\nFrom my side, this would be a 'positive_review'. Jeroen?",
    "created_at": "2016-08-10T18:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272319",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@sagetrac-git](#comment:42):
> Branch pushed to git repo; I updated commit sha1. New commits:

|                                                                                                                                                 |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[de597b2](https://github.com/sagemath/sagetrac-mirror/commit/de597b27c45d0f629698832a4677b92b48472c3a)|`19213: a warning with tests`|
OK, that's much better with these warnings. 

From my side, this would be a 'positive_review'. Jeroen?



---

archive/issue_comments_272320.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe, NEEDS MORE REVIEWERS** to **Matthias Koeppe, Jeroen Demeyer**",
    "created_at": "2016-08-10T18:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272320",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Matthias Koeppe, NEEDS MORE REVIEWERS** to **Matthias Koeppe, Jeroen Demeyer**



---

archive/issue_events_274044.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-10T18:43:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274044"
}
```



---

archive/issue_events_274045.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-10T18:43:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274045"
}
```



---

archive/issue_comments_272321.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI would like to see what the patchbot thinks of the startup time (however, it seems down now). If this ticket does not give a statistically significant increase to the startup time, it is ok for me. See [comment:43]",
    "created_at": "2016-08-10T21:20:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272321",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:48" align="right">comment:48</div>

I would like to see what the patchbot thinks of the startup time (however, it seems down now). If this ticket does not give a statistically significant increase to the startup time, it is ok for me. See [comment:43]



---

archive/issue_comments_272322.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@jdemeyer](#comment:48):\n> I would like to see what the patchbot thinks of the startup time (however, it seems down now). If this ticket does not give a statistically significant increase to the startup time, it is ok for me. See [comment:43]\n\nSince the lists are built with `local=True` this should even be faster than before. The old way to build these lists was via the script `sage-package-list`...",
    "created_at": "2016-08-10T21:23:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272322",
    "user": "https://github.com/videlec"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@jdemeyer](#comment:48):
> I would like to see what the patchbot thinks of the startup time (however, it seems down now). If this ticket does not give a statistically significant increase to the startup time, it is ok for me. See [comment:43]

Since the lists are built with `local=True` this should even be faster than before. The old way to build these lists was via the script `sage-package-list`...



---

archive/issue_comments_272323.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@videlec](#comment:49):\n> The old way to build these lists was via the script `sage-package-list`...\n\nUnless I'm missing something, in the old version, the list of packages was not computed *every time that Sage starts*.",
    "created_at": "2016-08-10T21:26:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272323",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@videlec](#comment:49):
> The old way to build these lists was via the script `sage-package-list`...

Unless I'm missing something, in the old version, the list of packages was not computed *every time that Sage starts*.



---

archive/issue_comments_272324.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@jdemeyer](#comment:50):\n> Replying to [@videlec](#comment:49):\n> > The old way to build these lists was via the script `sage-package-list`...\n\n> \n> Unless I'm missing something, in the old version, the list of packages was not computed *every time that Sage starts*.\n\nIt was the very same. All of `_STANDARD_PACKAGES`, `_OPTIONAL_PACKAGES`, `_EXPERIMENTAL_PACKAGES` where computed at module loading time (since they are used in the doc of the module). And the module is loaded on startup.",
    "created_at": "2016-08-10T21:29:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272324",
    "user": "https://github.com/videlec"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@jdemeyer](#comment:50):
> Replying to [@videlec](#comment:49):
> > The old way to build these lists was via the script `sage-package-list`...

> 
> Unless I'm missing something, in the old version, the list of packages was not computed *every time that Sage starts*.

It was the very same. All of `_STANDARD_PACKAGES`, `_OPTIONAL_PACKAGES`, `_EXPERIMENTAL_PACKAGES` where computed at module loading time (since they are used in the doc of the module). And the module is loaded on startup.



---

archive/issue_events_274046.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-08-11T17:23:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274046"
}
```



---

archive/issue_events_274047.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-08-11T17:23:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274047"
}
```



---

archive/issue_comments_272325.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nI see a significant difference in startup time: on one OS X machine it takes about 800ms longer on average with this branch. (I ran `sage --startuptime` 10 times with and without the branch, discarding the first run in each case. Average without: 1760ms. With: 2560ms.) If I run `sage --startuptime sage.misc.package`, without the branch it takes about 0.8ms to import that module, while with the branch: 800ms.",
    "created_at": "2016-08-11T17:23:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272325",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:52" align="right">comment:52</div>

I see a significant difference in startup time: on one OS X machine it takes about 800ms longer on average with this branch. (I ran `sage --startuptime` 10 times with and without the branch, discarding the first run in each case. Average without: 1760ms. With: 2560ms.) If I run `sage --startuptime sage.misc.package`, without the branch it takes about 0.8ms to import that module, while with the branch: 800ms.



---

archive/issue_comments_272326.json:
```json
{
    "body": "Changed commit from **[`de597b2`](https://github.com/sagemath/sagetrac-mirror/commit/de597b27c45d0f629698832a4677b92b48472c3a)** to **[`c6578f4`](https://github.com/sagemath/sagetrac-mirror/commit/c6578f47420f1ca835e20d596221c1835b831dcf)**",
    "created_at": "2016-08-11T18:45:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272326",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`de597b2`](https://github.com/sagemath/sagetrac-mirror/commit/de597b27c45d0f629698832a4677b92b48472c3a)** to **[`c6578f4`](https://github.com/sagemath/sagetrac-mirror/commit/c6578f47420f1ca835e20d596221c1835b831dcf)**



---

archive/issue_comments_272327.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad92490baddd8fa50542bb6568cbc03ab012f92f\"><code>ad92490</code></a></td><td><code>19213: clean sage.misc.package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8840aa34c11d983572eafc256eb32f10f0d405a8\"><code>8840aa3</code></a></td><td><code>19213: clean sage-list-packages script</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/383171a970631b0817d1ee6b32262033753d84fe\"><code>383171a</code></a></td><td><code>19213: use list_packages in sage.doctest.control</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b9716618abd1207eaef43b32238a916ea832970\"><code>3b97166</code></a></td><td><code>19213: work around MacOSX (absent) TLS support</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c91197c4d3df80d0ef69235692175aa84e706ff3\"><code>c91197c</code></a></td><td><code>19213: a warning with tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6578f47420f1ca835e20d596221c1835b831dcf\"><code>c6578f4</code></a></td><td><code>Trac 19213: remove X_PACKAGES from the doc + deprecations</code></td></tr></table>\n",
    "created_at": "2016-08-11T18:45:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272327",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad92490baddd8fa50542bb6568cbc03ab012f92f"><code>ad92490</code></a></td><td><code>19213: clean sage.misc.package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8840aa34c11d983572eafc256eb32f10f0d405a8"><code>8840aa3</code></a></td><td><code>19213: clean sage-list-packages script</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/383171a970631b0817d1ee6b32262033753d84fe"><code>383171a</code></a></td><td><code>19213: use list_packages in sage.doctest.control</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b9716618abd1207eaef43b32238a916ea832970"><code>3b97166</code></a></td><td><code>19213: work around MacOSX (absent) TLS support</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c91197c4d3df80d0ef69235692175aa84e706ff3"><code>c91197c</code></a></td><td><code>19213: a warning with tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6578f47420f1ca835e20d596221c1835b831dcf"><code>c6578f4</code></a></td><td><code>Trac 19213: remove X_PACKAGES from the doc + deprecations</code></td></tr></table>




---

archive/issue_events_274048.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-11T18:48:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274048"
}
```



---

archive/issue_events_274049.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-11T18:48:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274049"
}
```



---

archive/issue_comments_272328.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nIndeed... I was wrong the variables `X_PACKAGES` where hardcoded (and unmaintained).\n\nI rebased and added some deprecations to all of `standard_packages`, `optional_packages`, `experimental_packages` and `package_versions` (since all the information is now available from `list_packages`).",
    "created_at": "2016-08-11T18:48:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272328",
    "user": "https://github.com/videlec"
}
```

<div id="comment:54" align="right">comment:54</div>

Indeed... I was wrong the variables `X_PACKAGES` where hardcoded (and unmaintained).

I rebased and added some deprecations to all of `standard_packages`, `optional_packages`, `experimental_packages` and `package_versions` (since all the information is now available from `list_packages`).



---

archive/issue_comments_272329.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,5 +3,6 @@\n - add pip functionalities to `sage.misc.package`\n - do not list anymore old style packages (see also #21132)\n - relies on `sage.misc.packages` in `sage-list-packages`\n+- deprecate `standard_packages`, `optional_packages`, `experimental_packages` and `package_versions`\n \n pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.\n``````\n",
    "created_at": "2016-08-11T18:51:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272329",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,5 +3,6 @@
 - add pip functionalities to `sage.misc.package`
 - do not list anymore old style packages (see also #21132)
 - relies on `sage.misc.packages` in `sage-list-packages`
+- deprecate `standard_packages`, `optional_packages`, `experimental_packages` and `package_versions`
 
 pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.
``````




---

archive/issue_comments_272330.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@videlec](#comment:54):\n> Indeed... I was wrong the variables `X_PACKAGES` where hardcoded\n\nYes, that's what I meant.",
    "created_at": "2016-08-12T08:30:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272330",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@videlec](#comment:54):
> Indeed... I was wrong the variables `X_PACKAGES` where hardcoded

Yes, that's what I meant.



---

archive/issue_comments_272331.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nI don't see why `standard_packages()` and friends should be deprecated. They offer a user-friendly interface for `list_packages()`.",
    "created_at": "2016-08-12T08:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272331",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:57" align="right">comment:57</div>

I don't see why `standard_packages()` and friends should be deprecated. They offer a user-friendly interface for `list_packages()`.



---

archive/issue_comments_272332.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nAnyway, I don't really care much about this.",
    "created_at": "2016-08-12T08:38:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272332",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:58" align="right">comment:58</div>

Anyway, I don't really care much about this.



---

archive/issue_comments_272333.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378\"><code>f054998</code></a></td><td><code>Trac 19213: remove deprecations</code></td></tr></table>\n",
    "created_at": "2016-08-12T14:10:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272333",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378"><code>f054998</code></a></td><td><code>Trac 19213: remove deprecations</code></td></tr></table>




---

archive/issue_comments_272334.json:
```json
{
    "body": "Changed commit from **[`c6578f4`](https://github.com/sagemath/sagetrac-mirror/commit/c6578f47420f1ca835e20d596221c1835b831dcf)** to **[`f054998`](https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378)**",
    "created_at": "2016-08-12T14:10:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272334",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c6578f4`](https://github.com/sagemath/sagetrac-mirror/commit/c6578f47420f1ca835e20d596221c1835b831dcf)** to **[`f054998`](https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378)**



---

archive/issue_comments_272335.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nI don't care either. But a pair of lists is not a lot more friendly than a dictionary.",
    "created_at": "2016-08-12T14:11:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272335",
    "user": "https://github.com/videlec"
}
```

<div id="comment:60" align="right">comment:60</div>

I don't care either. But a pair of lists is not a lot more friendly than a dictionary.



---

archive/issue_comments_272336.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,6 +3,5 @@\n - add pip functionalities to `sage.misc.package`\n - do not list anymore old style packages (see also #21132)\n - relies on `sage.misc.packages` in `sage-list-packages`\n-- deprecate `standard_packages`, `optional_packages`, `experimental_packages` and `package_versions`\n \n pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.\n``````\n",
    "created_at": "2016-08-12T14:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272336",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,6 +3,5 @@
 - add pip functionalities to `sage.misc.package`
 - do not list anymore old style packages (see also #21132)
 - relies on `sage.misc.packages` in `sage-list-packages`
-- deprecate `standard_packages`, `optional_packages`, `experimental_packages` and `package_versions`
 
 pip type packages were created in #19187. This ticket is such that these packages will be listed with `sage -optional`. Sadly, it will still not be possible for these packages to be used in optional doctests. The reason for that is that we do not have proper version control for them.
``````




---

archive/issue_events_274050.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-15T07:34:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274050"
}
```



---

archive/issue_events_274051.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-15T07:34:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274051"
}
```



---

archive/issue_comments_272337.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/19213](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/19213)** to **[`f054998`](https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378)**",
    "created_at": "2016-08-17T06:40:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272337",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vdelecroix/19213](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/19213)** to **[`f054998`](https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378)**



---

archive/issue_events_274052.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-17T06:40:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274052"
}
```



---

archive/issue_events_274053.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "46c1a6fbf9ec7861f65fe131a1ef8f6b0d9ce7c4",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-08-17T06:40:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19213#event-274053"
}
```



---

archive/issue_comments_272338.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nIt seems that the deprecation warnings were removed in the latest commit f054998 , but the documentation still says they are deprecated. I modified the documentation accordingly in #23849 .",
    "created_at": "2017-09-13T17:42:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272338",
    "user": "https://github.com/koffie"
}
```

<div id="comment:64" align="right">comment:64</div>

It seems that the deprecation warnings were removed in the latest commit f054998 , but the documentation still says they are deprecated. I modified the documentation accordingly in #23849 .



---

archive/issue_comments_272339.json:
```json
{
    "body": "Changed commit from **[`f054998`](https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378)** to none",
    "created_at": "2017-09-13T17:42:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19213",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19213#issuecomment-272339",
    "user": "https://github.com/koffie"
}
```

Changed commit from **[`f054998`](https://github.com/sagemath/sagetrac-mirror/commit/f0549980f6951f0fe6638afcdb309cdf50aa1378)** to none
