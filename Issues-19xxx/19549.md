# Issue 19549: Get rid of libtool archives (*.la)

archive/issues_019312.json:
```json
{
    "body": "* They are a nuisance since they can't contain relative paths. \n* Fedora packaging guide line says \"Libtool archives, foo.la files, should not be included\"\n* the whole idea of Libtool Archives is, nowadays, considered obsolete (https://autotools.io/libtool/lafiles.html)\n* Anything that can be done with libtool archives can be done better with pkg-config\n\nCC:  @kiwifb\n\nKeywords: sd70\n\nBranch/Commit: dc6d482122b25bd1e23cf78b7781a2c7314a1796\n\nReviewer: Fran\u00e7ois Bissey\n\nAuthor: Volker Braun\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19549\n\n",
    "closed_at": "2015-11-11T19:40:43Z",
    "created_at": "2015-11-08T16:31:41Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Get rid of libtool archives (*.la)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19549",
    "user": "https://github.com/vbraun"
}
```
* They are a nuisance since they can't contain relative paths. 
* Fedora packaging guide line says "Libtool archives, foo.la files, should not be included"
* the whole idea of Libtool Archives is, nowadays, considered obsolete (https://autotools.io/libtool/lafiles.html)
* Anything that can be done with libtool archives can be done better with pkg-config

CC:  @kiwifb

Keywords: sd70

Branch/Commit: dc6d482122b25bd1e23cf78b7781a2c7314a1796

Reviewer: Fran√ßois Bissey

Author: Volker Braun

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19549





---

archive/issue_comments_282090.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd70\".",
    "created_at": "2015-11-08T16:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19549#issuecomment-282090",
    "user": "https://github.com/vbraun"
}
```

Changing keywords from "" to "sd70".



---

archive/issue_comments_282091.json:
```json
{
    "body": "<a id='comment:2'></a>Francois, any objection?",
    "created_at": "2015-11-08T17:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19549#issuecomment-282091",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>Francois, any objection?



---

archive/issue_comments_282092.json:
```json
{
    "body": "<a id='comment:3'></a>Replying to [comment:2 vbraun]:\n> Francois, any objection?\n\n\nNone.",
    "created_at": "2015-11-08T18:05:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19549#issuecomment-282092",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:3'></a>Replying to [comment:2 vbraun]:
> Francois, any objection?


None.



---

archive/issue_comments_282093.json:
```json
{
    "body": "<a id='comment:4'></a>I am not sure what other answer you were expecting from me. Distros like Gentoo (and most others I would think) get rid of them. The good question is how to do it in sage? The easiest way would be for `sage-spkg` to do the scanning. We don't want it to be done as an afterthought once the `sage` build is finished.\n\nThe problem is that you don't have a staging phase before putting the file in your tree. So you cannot `stage` then remove the ugly stuff and then put it in your tree (or prefix if you will). Which means that essentially you may have to scan the whole `$SAGE_LOCAL/lib` for `.la` file after you have issued `make install` for every package. Could it be added to `sage-spkg` to do once `spkg-install` proper is finished? How would that interact with `spkg-check` is also something to think about because building test may rely on these `.la` files.",
    "created_at": "2015-11-08T21:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19549#issuecomment-282093",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:4'></a>I am not sure what other answer you were expecting from me. Distros like Gentoo (and most others I would think) get rid of them. The good question is how to do it in sage? The easiest way would be for `sage-spkg` to do the scanning. We don't want it to be done as an afterthought once the `sage` build is finished.

The problem is that you don't have a staging phase before putting the file in your tree. So you cannot `stage` then remove the ugly stuff and then put it in your tree (or prefix if you will). Which means that essentially you may have to scan the whole `$SAGE_LOCAL/lib` for `.la` file after you have issued `make install` for every package. Could it be added to `sage-spkg` to do once `spkg-install` proper is finished? How would that interact with `spkg-check` is also something to think about because building test may rely on these `.la` files.



---

archive/issue_comments_282094.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-11-10T15:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19549#issuecomment-282094",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_282095.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-10T15:54:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19549#issuecomment-282095",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_282096.json:
```json
{
    "body": "<a id='comment:7'></a>I'm just deleting them after spkg-check; Not sure if its necessary but can't hurt.",
    "created_at": "2015-11-10T15:54:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19549#issuecomment-282096",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>I'm just deleting them after spkg-check; Not sure if its necessary but can't hurt.



---

archive/issue_comments_282097.json:
```json
{
    "body": "<a id='comment:8'></a>That'll do, it will depend on the package. In `m4rie` test are built during `make all`. Not really fantastic in my opinion but that's a case where it wouldn't be necessary.",
    "created_at": "2015-11-10T18:34:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19549#issuecomment-282097",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'></a>That'll do, it will depend on the package. In `m4rie` test are built during `make all`. Not really fantastic in my opinion but that's a case where it wouldn't be necessary.



---

archive/issue_comments_282098.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-10T18:34:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19549#issuecomment-282098",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_053826.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-11T19:40:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19549",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19549#event-53826"
}
```



---

archive/issue_comments_282099.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-11-11T19:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19549#issuecomment-282099",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
