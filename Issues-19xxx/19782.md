# Issue 19782: Symlink lib64 -> lib

archive/issues_019545.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nSymlink SAGE_LOCAL/lib64 -> SAGE_LOCAL/lib\n\n**configure tarball**: http://sage.ugent.be/www/jdemeyer/sage/configure-135.tar.gz\n\nCC:  @nexttime @jdemeyer\n\nComponent: **build**\n\nAuthor: **Volker Braun, Jeroen Demeyer**\n\nBranch: **[`454b14b`](https://github.com/sagemath/sagetrac-mirror/commit/454b14b897e1f2ad1d32d84e8fa5f53c4892d548)**\n\nReviewer: **Jeroen Demeyer, Volker Braun**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19782_\n\n",
    "closed_at": "2015-12-28T11:08:17Z",
    "created_at": "2015-12-25T13:36:26Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Symlink lib64 -> lib",
    "type": "issue",
    "updated_at": "2019-03-17T21:06:30Z",
    "url": "https://github.com/sagemath/sage/issues/19782",
    "user": "https://github.com/vbraun"
}
```
<div id="comment:0"></div>

Symlink SAGE_LOCAL/lib64 -> SAGE_LOCAL/lib

**configure tarball**: http://sage.ugent.be/www/jdemeyer/sage/configure-135.tar.gz

CC:  @nexttime @jdemeyer

Component: **build**

Author: **Volker Braun, Jeroen Demeyer**

Branch: **[`454b14b`](https://github.com/sagemath/sagetrac-mirror/commit/454b14b897e1f2ad1d32d84e8fa5f53c4892d548)**

Reviewer: **Jeroen Demeyer, Volker Braun**

_Issue created by migration from https://trac.sagemath.org/ticket/19782_





---

archive/issue_events_277345.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-25T13:36:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "milestone_number": null,
    "milestone_title": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19782#event-277345"
}
```



---

archive/issue_events_277346.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-25T13:36:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19782#event-277346"
}
```



---

archive/issue_comments_282695.json:
```json
{
    "body": "Branch: **[u/vbraun/symlink_lib64_to_lib](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/symlink_lib64_to_lib)**",
    "created_at": "2015-12-25T17:03:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282695",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/symlink_lib64_to_lib](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/symlink_lib64_to_lib)**



---

archive/issue_comments_282696.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c7c7d5d8fb4be59e7b60237986507b66a15f75c\"><code>2c7c7d5</code></a></td><td><code>Symlink SAGE_LOCAL/lib64 -> SAGE_LOCAL/lib</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be5991fd626d80f117df5ab42bfa6cf129b39ba6\"><code>be5991f</code></a></td><td><code>Remove now-unnecessary lib64 rpath</code></td></tr></table>\n",
    "created_at": "2015-12-25T17:04:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282696",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c7c7d5d8fb4be59e7b60237986507b66a15f75c"><code>2c7c7d5</code></a></td><td><code>Symlink SAGE_LOCAL/lib64 -> SAGE_LOCAL/lib</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be5991fd626d80f117df5ab42bfa6cf129b39ba6"><code>be5991f</code></a></td><td><code>Remove now-unnecessary lib64 rpath</code></td></tr></table>




---

archive/issue_comments_282697.json:
```json
{
    "body": "Author: **Volker Braun**",
    "created_at": "2015-12-25T17:04:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282697",
    "user": "https://github.com/vbraun"
}
```

Author: **Volker Braun**



---

archive/issue_events_277347.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-25T17:04:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19782#event-277347"
}
```



---

archive/issue_events_277348.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-25T17:04:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19782#event-277348"
}
```



---

archive/issue_comments_282698.json:
```json
{
    "body": "Commit: **[`be5991f`](https://github.com/sagemath/sagetrac-mirror/commit/be5991fd626d80f117df5ab42bfa6cf129b39ba6)**",
    "created_at": "2015-12-25T17:04:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282698",
    "user": "https://github.com/vbraun"
}
```

Commit: **[`be5991f`](https://github.com/sagemath/sagetrac-mirror/commit/be5991fd626d80f117df5ab42bfa6cf129b39ba6)**



---

archive/issue_events_277349.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-25T17:04:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19782#event-277349"
}
```



---

archive/issue_comments_282699.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+Symlink SAGE_LOCAL/lib64 -> SAGE_LOCAL/lib\n``````\n",
    "created_at": "2015-12-25T17:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282699",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+Symlink SAGE_LOCAL/lib64 -> SAGE_LOCAL/lib
``````




---

archive/issue_comments_282700.json:
```json
{
    "body": "Dependencies: **#19776**",
    "created_at": "2015-12-25T17:16:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282700",
    "user": "https://github.com/nexttime"
}
```

Dependencies: **#19776**



---

archive/issue_comments_282701.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHmmm, if `lib64` is still a folder, we could just copy (or move) its contents to `lib` and afterwards create the symlink anyway.\n\nI also thought we'd \"fix\" the GCC spkg w.r.t. this, as you said it's the only package which fills the `lib64` folder.",
    "created_at": "2015-12-25T17:16:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282701",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:4" align="right">comment:4</div>

Hmmm, if `lib64` is still a folder, we could just copy (or move) its contents to `lib` and afterwards create the symlink anyway.

I also thought we'd "fix" the GCC spkg w.r.t. this, as you said it's the only package which fills the `lib64` folder.



---

archive/issue_comments_282702.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOoops, it's the other way around.",
    "created_at": "2015-12-25T17:19:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282702",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:5" align="right">comment:5</div>

Ooops, it's the other way around.



---

archive/issue_comments_282703.json:
```json
{
    "body": "Changed dependencies from **#19776** to none",
    "created_at": "2015-12-25T17:19:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282703",
    "user": "https://github.com/nexttime"
}
```

Changed dependencies from **#19776** to none



---

archive/issue_comments_282704.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n... or not even that.\n\nShouldn't we base one on the other?",
    "created_at": "2015-12-25T17:20:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282704",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:6" align="right">comment:6</div>

... or not even that.

Shouldn't we base one on the other?



---

archive/issue_comments_282705.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI'd rather not try to do upgrade it on the fly, just unnecessary complications when we don't have incremental updates 6.10 -> 7.0 anyways. You'd also need locking and/or atomic operation as it will be hit in parallel from separate make processes. \n\nI remember we tried to make gcc install to lib (instead lib64) but there is no easy way, its hardcoded. \n\nI know there is a conflict with #19776, will fix it when needed.",
    "created_at": "2015-12-25T18:14:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282705",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:7" align="right">comment:7</div>

I'd rather not try to do upgrade it on the fly, just unnecessary complications when we don't have incremental updates 6.10 -> 7.0 anyways. You'd also need locking and/or atomic operation as it will be hit in parallel from separate make processes. 

I remember we tried to make gcc install to lib (instead lib64) but there is no easy way, its hardcoded. 

I know there is a conflict with #19776, will fix it when needed.



---

archive/issue_comments_282706.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@vbraun](#comment%3A7):\n> I'd rather not try to do upgrade it on the fly, just unnecessary complications when we don't have incremental updates 6.10 -> 7.0 anyways.\n\nI agree.",
    "created_at": "2015-12-26T12:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282706",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@vbraun](#comment%3A7):
> I'd rather not try to do upgrade it on the fly, just unnecessary complications when we don't have incremental updates 6.10 -> 7.0 anyways.

I agree.



---

archive/issue_events_277350.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-12-26T12:50:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19782#event-277350"
}
```



---

archive/issue_events_277351.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-12-26T12:50:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19782#event-277351"
}
```



---

archive/issue_comments_282707.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI get the idea of the patch, but I would rather do it in `configure`. We are already creating the directory structure there, so it seems like a more logical place.",
    "created_at": "2015-12-26T12:53:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282707",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

I get the idea of the patch, but I would rather do it in `configure`. We are already creating the directory structure there, so it seems like a more logical place.



---

archive/issue_comments_282708.json:
```json
{
    "body": "Changed branch from **[u/vbraun/symlink_lib64_to_lib](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/symlink_lib64_to_lib)** to **[u/jdemeyer/symlink_lib64_to_lib](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/symlink_lib64_to_lib)**",
    "created_at": "2015-12-26T13:07:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282708",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/vbraun/symlink_lib64_to_lib](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/symlink_lib64_to_lib)** to **[u/jdemeyer/symlink_lib64_to_lib](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/symlink_lib64_to_lib)**



---

archive/issue_comments_282709.json:
```json
{
    "body": "Changed commit from **[`be5991f`](https://github.com/sagemath/sagetrac-mirror/commit/be5991fd626d80f117df5ab42bfa6cf129b39ba6)** to **[`193d91e`](https://github.com/sagemath/sagetrac-mirror/commit/193d91eb19276e231017bb5d6280897c9d204469)**",
    "created_at": "2015-12-26T15:08:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282709",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[`be5991f`](https://github.com/sagemath/sagetrac-mirror/commit/be5991fd626d80f117df5ab42bfa6cf129b39ba6)** to **[`193d91e`](https://github.com/sagemath/sagetrac-mirror/commit/193d91eb19276e231017bb5d6280897c9d204469)**



---

archive/issue_comments_282710.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI'd rather keep creation of `SAGE_LOCAL` stuff out of configure, ideally it should go into `make install` though we are not there yet.\n\nIf you do change configure then you need a new confball.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/032e8ddbc3b3eb6f75a7033b9e2818e381c11747\"><code>032e8dd</code></a></td><td><code>Remove now-unnecessary lib64 rpath</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/193d91eb19276e231017bb5d6280897c9d204469\"><code>193d91e</code></a></td><td><code>Symlink SAGE_LOCAL/lib64 -> SAGE_LOCAL/lib</code></td></tr></table>\n",
    "created_at": "2015-12-26T15:08:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282710",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:11" align="right">comment:11</div>

I'd rather keep creation of `SAGE_LOCAL` stuff out of configure, ideally it should go into `make install` though we are not there yet.

If you do change configure then you need a new confball.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/032e8ddbc3b3eb6f75a7033b9e2818e381c11747"><code>032e8dd</code></a></td><td><code>Remove now-unnecessary lib64 rpath</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/193d91eb19276e231017bb5d6280897c9d204469"><code>193d91e</code></a></td><td><code>Symlink SAGE_LOCAL/lib64 -> SAGE_LOCAL/lib</code></td></tr></table>




---

archive/issue_comments_282711.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@vbraun](#comment%3A11):\n> I'd rather keep creation of `SAGE_LOCAL` stuff out of configure\n\nWhy? I think this should be done as early as possible in the build process. It is convenient if all other scripts in Sage can assume the existence of the basic directory structure.\n\nAnd given that this basic directory structure is created by `configure`, it is most natural to create also the `lib64` symlink there.",
    "created_at": "2015-12-26T15:20:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282711",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@vbraun](#comment%3A11):
> I'd rather keep creation of `SAGE_LOCAL` stuff out of configure

Why? I think this should be done as early as possible in the build process. It is convenient if all other scripts in Sage can assume the existence of the basic directory structure.

And given that this basic directory structure is created by `configure`, it is most natural to create also the `lib64` symlink there.



---

archive/issue_comments_282712.json:
```json
{
    "body": "Changed author from **Volker Braun** to **Volker Braun, Jeroen Demeyer**",
    "created_at": "2015-12-26T15:36:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282712",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Volker Braun** to **Volker Braun, Jeroen Demeyer**



---

archive/issue_comments_282713.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Symlink SAGE_LOCAL/lib64 -> SAGE_LOCAL/lib\n+\n+**configure tarball**: http://sage.ugent.be/www/jdemeyer/sage/configure-134.tar.gz\n``````\n",
    "created_at": "2015-12-26T15:36:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282713",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Symlink SAGE_LOCAL/lib64 -> SAGE_LOCAL/lib
+
+**configure tarball**: http://sage.ugent.be/www/jdemeyer/sage/configure-134.tar.gz
``````




---

archive/issue_comments_282714.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer, Volker Braun**",
    "created_at": "2015-12-26T15:36:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282714",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer, Volker Braun**



---

archive/issue_comments_282715.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n Symlink SAGE_LOCAL/lib64 -> SAGE_LOCAL/lib\n \n-**configure tarball**: http://sage.ugent.be/www/jdemeyer/sage/configure-134.tar.gz\n+**configure tarball**: http://sage.ugent.be/www/jdemeyer/sage/configure-135.tar.gz\n``````\n",
    "created_at": "2015-12-26T15:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282715",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 Symlink SAGE_LOCAL/lib64 -> SAGE_LOCAL/lib
 
-**configure tarball**: http://sage.ugent.be/www/jdemeyer/sage/configure-134.tar.gz
+**configure tarball**: http://sage.ugent.be/www/jdemeyer/sage/configure-135.tar.gz
``````




---

archive/issue_comments_282716.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/454b14b897e1f2ad1d32d84e8fa5f53c4892d548\"><code>454b14b</code></a></td><td><code>Update configure version</code></td></tr></table>\n",
    "created_at": "2015-12-26T15:38:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282716",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/454b14b897e1f2ad1d32d84e8fa5f53c4892d548"><code>454b14b</code></a></td><td><code>Update configure version</code></td></tr></table>




---

archive/issue_comments_282717.json:
```json
{
    "body": "Changed commit from **[`193d91e`](https://github.com/sagemath/sagetrac-mirror/commit/193d91eb19276e231017bb5d6280897c9d204469)** to **[`454b14b`](https://github.com/sagemath/sagetrac-mirror/commit/454b14b897e1f2ad1d32d84e8fa5f53c4892d548)**",
    "created_at": "2015-12-26T15:38:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282717",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`193d91e`](https://github.com/sagemath/sagetrac-mirror/commit/193d91eb19276e231017bb5d6280897c9d204469)** to **[`454b14b`](https://github.com/sagemath/sagetrac-mirror/commit/454b14b897e1f2ad1d32d84e8fa5f53c4892d548)**



---

archive/issue_comments_282718.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nConfigure does IMHO already too many things that it has no place to do; Why create install directories there? Its also testing package configuration for correctness (as opposed to during testing). Neither of these are typically done by configure. \n\nBesides being the wrong place, putting stuff into configure makes it also unnecessarily difficult to work on that in the future as it is an additional layer of inception (script writing shell script) and requires an arcane process of creating a new confball.  \n\nThat said if you insist on doing it the wrong way then I'd rather have the lib64 symlink than fix that particular configure insanity",
    "created_at": "2015-12-26T15:48:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282718",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:16" align="right">comment:16</div>

Configure does IMHO already too many things that it has no place to do; Why create install directories there? Its also testing package configuration for correctness (as opposed to during testing). Neither of these are typically done by configure. 

Besides being the wrong place, putting stuff into configure makes it also unnecessarily difficult to work on that in the future as it is an additional layer of inception (script writing shell script) and requires an arcane process of creating a new confball.  

That said if you insist on doing it the wrong way then I'd rather have the lib64 symlink than fix that particular configure insanity



---

archive/issue_comments_282719.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@vbraun](#comment%3A16):\n> as it is an additional layer of inception\n\nThat's standard `configure` stuff, it don't see why it is a complication.\n\n> requires an arcane process of creating a new confball.\n\nThat's purely a \"release management\" thing. There is no fundamental reason for it, it's only because of your workflow.",
    "created_at": "2015-12-26T15:53:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282719",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@vbraun](#comment%3A16):
> as it is an additional layer of inception

That's standard `configure` stuff, it don't see why it is a complication.

> requires an arcane process of creating a new confball.

That's purely a "release management" thing. There is no fundamental reason for it, it's only because of your workflow.



---

archive/issue_comments_282720.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@vbraun](#comment%3A16):\n> Why create install directories there?\n\nLike I said, this is for convenience. It allows for example `sage-env` and other scripts to assume that those directories exist. I agree it's non-standard, but really the whole Sage distribution is non-standard.",
    "created_at": "2015-12-26T15:55:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282720",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@vbraun](#comment%3A16):
> Why create install directories there?

Like I said, this is for convenience. It allows for example `sage-env` and other scripts to assume that those directories exist. I agree it's non-standard, but really the whole Sage distribution is non-standard.



---

archive/issue_comments_282721.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@jdemeyer](#comment%3A17):\n> That's standard `configure` stuff, it don't see why it is a complication.\n\nHow many Sage developers are comfortable working with configure.ac? Maybe 5%? \n\n> That's purely a \"release management\" thing. There is no fundamental reason for it, it's only because of your workflow.\n\nThere is a fundamental reason, OSX doesn't come with autotools so we can't do the configure.ac -> configure at the client. Any change to configure.ac necessarily entails further release steps, which is why I really don't like stuff thats absolutely not configureable in there.\n\nReplying to [@jdemeyer](#comment%3A18):\n> It allows for example `sage-env` and other scripts to assume that those directories exist. \n\n`sage-env` shouldn't do anythning besides setting up the environment, it certainly shouldn't do anyhing different depending on how far along we are in the install process.",
    "created_at": "2015-12-26T16:04:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282721",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@jdemeyer](#comment%3A17):
> That's standard `configure` stuff, it don't see why it is a complication.

How many Sage developers are comfortable working with configure.ac? Maybe 5%? 

> That's purely a "release management" thing. There is no fundamental reason for it, it's only because of your workflow.

There is a fundamental reason, OSX doesn't come with autotools so we can't do the configure.ac -> configure at the client. Any change to configure.ac necessarily entails further release steps, which is why I really don't like stuff thats absolutely not configureable in there.

Replying to [@jdemeyer](#comment%3A18):
> It allows for example `sage-env` and other scripts to assume that those directories exist. 

`sage-env` shouldn't do anythning besides setting up the environment, it certainly shouldn't do anyhing different depending on how far along we are in the install process.



---

archive/issue_comments_282722.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nIn any case, set this ticket to positive review from me if you don't want to change it.",
    "created_at": "2015-12-26T16:20:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282722",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:20" align="right">comment:20</div>

In any case, set this ticket to positive review from me if you don't want to change it.



---

archive/issue_comments_282723.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@vbraun](#comment%3A19):\n> There is a fundamental reason, OSX doesn't come with autotools so we can't do the configure.ac -> configure at the client.\n\n1. You could do a custom install of autotools on those clients.\n\n2. You could run `./bootstrap -s` on your \"release management\" machine and then copy over the `configure` tarball. This is easily automated.",
    "created_at": "2015-12-26T17:03:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282723",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@vbraun](#comment%3A19):
> There is a fundamental reason, OSX doesn't come with autotools so we can't do the configure.ac -> configure at the client.

1. You could do a custom install of autotools on those clients.

2. You could run `./bootstrap -s` on your "release management" machine and then copy over the `configure` tarball. This is easily automated.



---

archive/issue_events_277352.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-12-26T17:03:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19782#event-277352"
}
```



---

archive/issue_events_277353.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-12-26T17:03:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19782#event-277353"
}
```



---

archive/issue_events_277354.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-28T11:08:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19782#event-277354"
}
```



---

archive/issue_events_277355.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b66393abab58c097b9c9004da568bb5598f32b61",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-12-28T11:08:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19782#event-277355"
}
```



---

archive/issue_comments_282724.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/symlink_lib64_to_lib](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/symlink_lib64_to_lib)** to **[`454b14b`](https://github.com/sagemath/sagetrac-mirror/commit/454b14b897e1f2ad1d32d84e8fa5f53c4892d548)**",
    "created_at": "2015-12-28T11:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282724",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/symlink_lib64_to_lib](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/symlink_lib64_to_lib)** to **[`454b14b`](https://github.com/sagemath/sagetrac-mirror/commit/454b14b897e1f2ad1d32d84e8fa5f53c4892d548)**



---

archive/issue_comments_282725.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nNothing in this ticket explains why this was deemed necessary.  I think I'll remove it.",
    "created_at": "2019-01-02T11:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282725",
    "user": "https://github.com/embray"
}
```

<div id="comment:24" align="right">comment:24</div>

Nothing in this ticket explains why this was deemed necessary.  I think I'll remove it.



---

archive/issue_comments_282726.json:
```json
{
    "body": "Changed commit from **[`454b14b`](https://github.com/sagemath/sagetrac-mirror/commit/454b14b897e1f2ad1d32d84e8fa5f53c4892d548)** to none",
    "created_at": "2019-01-02T11:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282726",
    "user": "https://github.com/embray"
}
```

Changed commit from **[`454b14b`](https://github.com/sagemath/sagetrac-mirror/commit/454b14b897e1f2ad1d32d84e8fa5f53c4892d548)** to none



---

archive/issue_comments_282727.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nIn various places we assume that our shared libraries are in `$SAGE_LOCAL/lib`; If a package installs stuff in a different library folder like `$SAGE_LOCAL/lib64` then we won't be able to load it.",
    "created_at": "2019-01-02T12:17:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282727",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:25" align="right">comment:25</div>

In various places we assume that our shared libraries are in `$SAGE_LOCAL/lib`; If a package installs stuff in a different library folder like `$SAGE_LOCAL/lib64` then we won't be able to load it.



---

archive/issue_comments_282728.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nWhat is installed to lib64, and what do you need to link to it?",
    "created_at": "2019-01-02T12:27:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282728",
    "user": "https://github.com/embray"
}
```

<div id="comment:26" align="right">comment:26</div>

What is installed to lib64, and what do you need to link to it?



---

archive/issue_comments_282729.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI don't have a comprehensive list of packages that attempt to install stuff in `lib64`, fwiw. Its likely to be platform-dependent, too.",
    "created_at": "2019-01-02T13:45:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282729",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:27" align="right">comment:27</div>

I don't have a comprehensive list of packages that attempt to install stuff in `lib64`, fwiw. Its likely to be platform-dependent, too.



---

archive/issue_comments_282730.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nOther than gcc/gfortran I don't think there's anything that does, otherwise you would run into this same problem.",
    "created_at": "2019-01-02T14:02:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282730",
    "user": "https://github.com/embray"
}
```

<div id="comment:28" align="right">comment:28</div>

Other than gcc/gfortran I don't think there's anything that does, otherwise you would run into this same problem.



---

archive/issue_comments_282731.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI'm running into trouble related to this, I think.  I upgraded a Linux (Ubuntu  Bionic Beaver) version of Sage from something like 6.8, ran into a problem, followed the message to do `make distclean` first.  I made it to `gfortran` and that seems to compile fine, but then at the very end\n\n```\n[gfortran-7.2.0] make[8]: Leaving directory '/home/crisman/sage/local/var/tmp/sage/build/gfortran-7.2.0/gcc-build/x86_64-pc-linux-gnu/libatomic'\n[gfortran-7.2.0] make[7]: Leaving directory '/home/crisman/sage/local/var/tmp/sage/build/gfortran-7.2.0/gcc-build/x86_64-pc-linux-gnu/libatomic'\n[gfortran-7.2.0] make[6]: Leaving directory '/home/crisman/sage/local/var/tmp/sage/build/gfortran-7.2.0/gcc-build/x86_64-pc-linux-gnu/libatomic'\n[gfortran-7.2.0] make[5]: Leaving directory '/home/crisman/sage/local/var/tmp/sage/build/gfortran-7.2.0/gcc-build'\n[gfortran-7.2.0] make[4]: Leaving directory '/home/crisman/sage/local/var/tmp/sage/build/gfortran-7.2.0/gcc-build'\n[gfortran-7.2.0] \n[gfortran-7.2.0] real\t27m10.068s\n[gfortran-7.2.0] user\t24m8.801s\n[gfortran-7.2.0] sys\t2m36.607s\n[gfortran-7.2.0] Copying package files from temporary location /home/crisman/sage/local/var/tmp/sage/build/gfortran-7.2.0/inst to /home/crisman/sage/local\n[gfortran-7.2.0] cp: cannot overwrite non-directory '/home/crisman/sage/local/./lib64' with directory '/home/crisman/sage/local/var/tmp/sage/build/gfortran-7.2.0/inst/home/crisman/sage/local/./lib64'\n[gfortran-7.2.0] ************************************************************************\n[gfortran-7.2.0] Error copying files for gfortran-7.2.0.\n[gfortran-7.2.0] ************************************************************************\n[gfortran-7.2.0] Please email sage-devel (http://groups.google.com/group/sage-devel)\n[gfortran-7.2.0] explaining the problem and including the log file\n[gfortran-7.2.0]   /home/crisman/sage/logs/pkgs/gfortran-7.2.0.log\n[gfortran-7.2.0] Describe your computer, operating system, etc.\n[gfortran-7.2.0] ************************************************************************\n```\nI can report this on sage-devel as well (I doubt it is a particular release thing unless this was indeed a very recent change) if it would be found useful.  Otherwise I don't have a way to proceed.",
    "created_at": "2019-03-17T21:06:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19782#issuecomment-282731",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:29" align="right">comment:29</div>

I'm running into trouble related to this, I think.  I upgraded a Linux (Ubuntu  Bionic Beaver) version of Sage from something like 6.8, ran into a problem, followed the message to do `make distclean` first.  I made it to `gfortran` and that seems to compile fine, but then at the very end

```
[gfortran-7.2.0] make[8]: Leaving directory '/home/crisman/sage/local/var/tmp/sage/build/gfortran-7.2.0/gcc-build/x86_64-pc-linux-gnu/libatomic'
[gfortran-7.2.0] make[7]: Leaving directory '/home/crisman/sage/local/var/tmp/sage/build/gfortran-7.2.0/gcc-build/x86_64-pc-linux-gnu/libatomic'
[gfortran-7.2.0] make[6]: Leaving directory '/home/crisman/sage/local/var/tmp/sage/build/gfortran-7.2.0/gcc-build/x86_64-pc-linux-gnu/libatomic'
[gfortran-7.2.0] make[5]: Leaving directory '/home/crisman/sage/local/var/tmp/sage/build/gfortran-7.2.0/gcc-build'
[gfortran-7.2.0] make[4]: Leaving directory '/home/crisman/sage/local/var/tmp/sage/build/gfortran-7.2.0/gcc-build'
[gfortran-7.2.0] 
[gfortran-7.2.0] real	27m10.068s
[gfortran-7.2.0] user	24m8.801s
[gfortran-7.2.0] sys	2m36.607s
[gfortran-7.2.0] Copying package files from temporary location /home/crisman/sage/local/var/tmp/sage/build/gfortran-7.2.0/inst to /home/crisman/sage/local
[gfortran-7.2.0] cp: cannot overwrite non-directory '/home/crisman/sage/local/./lib64' with directory '/home/crisman/sage/local/var/tmp/sage/build/gfortran-7.2.0/inst/home/crisman/sage/local/./lib64'
[gfortran-7.2.0] ************************************************************************
[gfortran-7.2.0] Error copying files for gfortran-7.2.0.
[gfortran-7.2.0] ************************************************************************
[gfortran-7.2.0] Please email sage-devel (http://groups.google.com/group/sage-devel)
[gfortran-7.2.0] explaining the problem and including the log file
[gfortran-7.2.0]   /home/crisman/sage/logs/pkgs/gfortran-7.2.0.log
[gfortran-7.2.0] Describe your computer, operating system, etc.
[gfortran-7.2.0] ************************************************************************
```
I can report this on sage-devel as well (I doubt it is a particular release thing unless this was indeed a very recent change) if it would be found useful.  Otherwise I don't have a way to proceed.
