# Issue 19319: iterator over products on diagonals a la Cantor

archive/issues_019082.json:
```json
{
    "body": "Add an iterator, which goes over the elements of a cartesian product of (possible infinite) inputs along the diagonals like the [Cantor pairing function](https://en.wikipedia.org/wiki/Pairing_function#Cantor_pairing_function).\n\nThis was initially factored out from #19048.\n\n**CC:**  @behackl @cheuberg @nathanncohen\n\n**Branch/Commit:** [96c03668100f8fc42e60ae3f7d7a715d257f41cb](https://github.com/sagemath/sagetrac-mirror/commit/96c03668100f8fc42e60ae3f7d7a715d257f41cb)\n\n**Reviewer:** Daniel Krenn, Clemens Heuberger\n\n**Author:** Vincent Delecroix\n\nIssue created by migration from https://trac.sagemath.org/ticket/19319\n\n",
    "closed_at": "2015-10-12T22:52:53Z",
    "created_at": "2015-09-30T12:06:08Z",
    "labels": [
        "component: misc",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "iterator over products on diagonals a la Cantor",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19319",
    "user": "https://github.com/dkrenn"
}
```
Add an iterator, which goes over the elements of a cartesian product of (possible infinite) inputs along the diagonals like the [Cantor pairing function](https://en.wikipedia.org/wiki/Pairing_function#Cantor_pairing_function).

This was initially factored out from #19048.

**CC:**  @behackl @cheuberg @nathanncohen

**Branch/Commit:** [96c03668100f8fc42e60ae3f7d7a715d257f41cb](https://github.com/sagemath/sagetrac-mirror/commit/96c03668100f8fc42e60ae3f7d7a715d257f41cb)

**Reviewer:** Daniel Krenn, Clemens Heuberger

**Author:** Vincent Delecroix

Issue created by migration from https://trac.sagemath.org/ticket/19319





---

archive/issue_comments_331550.json:
```json
{
    "body": "**Branch:** [u/dkrenn/product_cantor_pairing](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/product_cantor_pairing)",
    "created_at": "2015-09-30T12:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331550",
    "user": "https://github.com/dkrenn"
}
```

**Branch:** [u/dkrenn/product_cantor_pairing](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/product_cantor_pairing)



---

archive/issue_comments_331551.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/619cd8c8e41f9728f9a7616860786163144b3ecc\">619cd8c</a></td><td><code>copy code from #19048</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4d28791ecb941e50fa1397c205e259a8ecc56a3\">c4d2879</a></td><td><code>rename to product_cantor_pairing</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4697d3585a2396c8d338da06fdc887caf20e6bb\">a4697d3</a></td><td><code>fix import in doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8460b9599cdcee722dbd6aea7d4382bb83d55a4\">e8460b9</a></td><td><code>improve docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e41be5b7ffd3ffa34991c3f686c0a618fef42ca\">9e41be5</a></td><td><code>doctest with infinite iterator inputs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97cb59c8ef71cd3a9e8df6086a2ff377baf3392f\">97cb59c</a></td><td><code>add seealso blocks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17229c620b4aff47161b725de2ebb4f890cfc2af\">17229c6</a></td><td><code>extend AUTHROS</code></td></tr></table>\n",
    "created_at": "2015-09-30T12:07:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331551",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/619cd8c8e41f9728f9a7616860786163144b3ecc">619cd8c</a></td><td><code>copy code from #19048</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4d28791ecb941e50fa1397c205e259a8ecc56a3">c4d2879</a></td><td><code>rename to product_cantor_pairing</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4697d3585a2396c8d338da06fdc887caf20e6bb">a4697d3</a></td><td><code>fix import in doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8460b9599cdcee722dbd6aea7d4382bb83d55a4">e8460b9</a></td><td><code>improve docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e41be5b7ffd3ffa34991c3f686c0a618fef42ca">9e41be5</a></td><td><code>doctest with infinite iterator inputs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97cb59c8ef71cd3a9e8df6086a2ff377baf3392f">97cb59c</a></td><td><code>add seealso blocks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17229c620b4aff47161b725de2ebb4f890cfc2af">17229c6</a></td><td><code>extend AUTHROS</code></td></tr></table>




---

archive/issue_comments_331552.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2015-09-30T12:07:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331552",
    "user": "https://github.com/dkrenn"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_331553.json:
```json
{
    "body": "**Commit:** [17229c620b4aff47161b725de2ebb4f890cfc2af](https://github.com/sagemath/sagetrac-mirror/commit/17229c620b4aff47161b725de2ebb4f890cfc2af)",
    "created_at": "2015-09-30T12:07:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331553",
    "user": "https://github.com/dkrenn"
}
```

**Commit:** [17229c620b4aff47161b725de2ebb4f890cfc2af](https://github.com/sagemath/sagetrac-mirror/commit/17229c620b4aff47161b725de2ebb4f890cfc2af)



---

archive/issue_comments_331554.json:
```json
{
    "body": "**Author:** Daniel Krenn",
    "created_at": "2015-09-30T12:07:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331554",
    "user": "https://github.com/dkrenn"
}
```

**Author:** Daniel Krenn



---

archive/issue_comments_331555.json:
```json
{
    "body": "<a id='comment:3'></a>\n`O_o`",
    "created_at": "2015-09-30T12:09:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331555",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'></a>
`O_o`



---

archive/issue_comments_331556.json:
```json
{
    "body": "<a id='comment:4'></a>\nYeah, I also believed that it should be shorter.\n\nDo you really need this Kantor enumeration, or perhaps you don't care for as long as the product of two infinite iterators works correctly?",
    "created_at": "2015-09-30T12:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331556",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
Yeah, I also believed that it should be shorter.

Do you really need this Kantor enumeration, or perhaps you don't care for as long as the product of two infinite iterators works correctly?



---

archive/issue_comments_331557.json:
```json
{
    "body": "<a id='comment:5'></a>\nIf you don't care, I just gave it a try:\n\n```\ndef product(A,B):\n    B = iter(B)\n    lb = []\n    b_done = False\n    for a in A:\n        try:\n            if not b_done:\n                lb.append(B.next())\n        except StopIteration:\n            b_done = True\n        for b in lb:\n            yield (a,b)\n```\n\nDoes the job.\n\nNathann",
    "created_at": "2015-09-30T12:20:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331557",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
If you don't care, I just gave it a try:

```
def product(A,B):
    B = iter(B)
    lb = []
    b_done = False
    for a in A:
        try:
            if not b_done:
                lb.append(B.next())
        except StopIteration:
            b_done = True
        for b in lb:
            yield (a,b)
```

Does the job.

Nathann



---

archive/issue_comments_331558.json:
```json
{
    "body": "<a id='comment:6'></a>\nAbout your 5 copy/paste: if you want to link every function to all others, I think the best is to have an index of methods at the head of the module and add a link toward the module.\n\nBy the way, if you feel like reviewing some doc patch: #19061\n\nNathann",
    "created_at": "2015-09-30T12:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331558",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>
About your 5 copy/paste: if you want to link every function to all others, I think the best is to have an index of methods at the head of the module and add a link toward the module.

By the way, if you feel like reviewing some doc patch: #19061

Nathann



---

archive/issue_comments_331559.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [ncohen](#comment%3A4):\n> Yeah, I also believed that it should be shorter.\n\n\n:)\n\n> Do you really need this Kantor enumeration, or perhaps you don't care for as long as the product of two infinite iterators works correctly?\n\n\nI care (at least a bit)...so I would leave it as it is.",
    "created_at": "2015-09-30T12:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331559",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:7'></a>
Replying to [ncohen](#comment%3A4):
> Yeah, I also believed that it should be shorter.


:)

> Do you really need this Kantor enumeration, or perhaps you don't care for as long as the product of two infinite iterators works correctly?


I care (at least a bit)...so I would leave it as it is.



---

archive/issue_comments_331560.json:
```json
{
    "body": "<a id='comment:8'></a>\n> I care (at least a bit)...so I would leave it as it is.\n\n\nCould you say why? I do not see the point of having a complicated code in Sage if ten lines provide the feature.",
    "created_at": "2015-09-30T12:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331560",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>
> I care (at least a bit)...so I would leave it as it is.


Could you say why? I do not see the point of having a complicated code in Sage if ten lines provide the feature.



---

archive/issue_comments_331561.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [ncohen](#comment%3A5):\n> If you don't care, I just gave it a try:\n> \n> ```\n> def product(A,B):\n>     B = iter(B)\n>     lb = []\n>     b_done = False\n>     for a in A:\n>         try:\n>             if not b_done:\n>                 lb.append(B.next())\n>         except StopIteration:\n>             b_done = True\n>         for b in lb:\n>             yield (a,b)\n> ```\n\n\nYour code does not give all pairs...",
    "created_at": "2015-09-30T12:55:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331561",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:9'></a>
Replying to [ncohen](#comment%3A5):
> If you don't care, I just gave it a try:
> 
> ```
> def product(A,B):
>     B = iter(B)
>     lb = []
>     b_done = False
>     for a in A:
>         try:
>             if not b_done:
>                 lb.append(B.next())
>         except StopIteration:
>             b_done = True
>         for b in lb:
>             yield (a,b)
> ```


Your code does not give all pairs...



---

archive/issue_comments_331562.json:
```json
{
    "body": "<a id='comment:10'></a>\n> Your code does not give all pairs...\n\n\nYeah, only works for infinite sets.",
    "created_at": "2015-09-30T12:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331562",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
> Your code does not give all pairs...


Yeah, only works for infinite sets.



---

archive/issue_comments_331563.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [ncohen](#comment%3A5):\n> If you don't care, I just gave it a try:\n> \n> ```\n> def product(A,B):\n>     B = iter(B)\n>     lb = []\n>     b_done = False\n>     for a in A:\n>         try:\n>             if not b_done:\n>                 lb.append(B.next())\n>         except StopIteration:\n>             b_done = True\n>         for b in lb:\n>             yield (a,b)\n> ```\n\n\n\n```\nsage: list(product(srange(2), ['a', 'b', 'c']))\n[(0, 'a'), (1, 'a'), (1, 'b')]\n```",
    "created_at": "2015-09-30T12:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331563",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:11'></a>
Replying to [ncohen](#comment%3A5):
> If you don't care, I just gave it a try:
> 
> ```
> def product(A,B):
>     B = iter(B)
>     lb = []
>     b_done = False
>     for a in A:
>         try:
>             if not b_done:
>                 lb.append(B.next())
>         except StopIteration:
>             b_done = True
>         for b in lb:
>             yield (a,b)
> ```



```
sage: list(product(srange(2), ['a', 'b', 'c']))
[(0, 'a'), (1, 'a'), (1, 'b')]
```



---

archive/issue_comments_331564.json:
```json
{
    "body": "<a id='comment:12'></a>\nYeah true, it's really bad. Soooooo I need two lists. Wanted to avoid that.\n\nThe question remains, though: is there a reason to insist on Kantor ordering, or would any other order do the job?",
    "created_at": "2015-09-30T13:04:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331564",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:12'></a>
Yeah true, it's really bad. Soooooo I need two lists. Wanted to avoid that.

The question remains, though: is there a reason to insist on Kantor ordering, or would any other order do the job?



---

archive/issue_comments_331565.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [ncohen](#comment%3A12):\n> The question remains, though: is there a reason to insist on Kantor ordering, or would any other order do the job?\n\n\nIn #19048 it does not really (except from aesthetic aspects) matter (but it has to deal with the finite case as well and it would be nice if then all pairs would occur). But I use the same code in some other Sage projects as well (not public (yet)), where it matters: There I need an order my the sums of the indices, which is Cantor.\nThus having this tool in SageMath would be great.",
    "created_at": "2015-09-30T13:12:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331565",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:13'></a>
Replying to [ncohen](#comment%3A12):
> The question remains, though: is there a reason to insist on Kantor ordering, or would any other order do the job?


In #19048 it does not really (except from aesthetic aspects) matter (but it has to deal with the finite case as well and it would be nice if then all pairs would occur). But I use the same code in some other Sage projects as well (not public (yet)), where it matters: There I need an order my the sums of the indices, which is Cantor.
Thus having this tool in SageMath would be great.



---

archive/issue_comments_331566.json:
```json
{
    "body": "<a id='comment:14'></a>\nOkay. Longer than the first attempt, though\n\n```\ndef product(A,B):\n    A = iter(A)\n    B = iter(B)\n    list_a = []\n    list_b = []\n    a_nonempty = b_nonempty = True\n    while a_nonempty or b_nonempty:\n        if a_nonempty:\n            try:\n                list_a.append(A.next())\n            except StopIteration:\n                a_nonempty = False\n            else:\n                for b in list_b:\n                    yield (list_a[-1],b)\n        if b_nonempty:\n            try:\n                list_b.append(B.next())\n            except StopIteration:\n                b_nonempty = False\n            else:\n                for a in list_a:\n                    yield (a, list_b[-1])\n```",
    "created_at": "2015-09-30T13:15:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331566",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>
Okay. Longer than the first attempt, though

```
def product(A,B):
    A = iter(A)
    B = iter(B)
    list_a = []
    list_b = []
    a_nonempty = b_nonempty = True
    while a_nonempty or b_nonempty:
        if a_nonempty:
            try:
                list_a.append(A.next())
            except StopIteration:
                a_nonempty = False
            else:
                for b in list_b:
                    yield (list_a[-1],b)
        if b_nonempty:
            try:
                list_b.append(B.next())
            except StopIteration:
                b_nonempty = False
            else:
                for a in list_a:
                    yield (a, list_b[-1])
```



---

archive/issue_comments_331567.json:
```json
{
    "body": "<a id='comment:15'></a>\nARgggg.. Fails too `>_<`",
    "created_at": "2015-09-30T13:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331567",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'></a>
ARgggg.. Fails too `>_<`



---

archive/issue_comments_331568.json:
```json
{
    "body": "<a id='comment:16'></a>\nOh no, false alarm. Seems ok.",
    "created_at": "2015-09-30T13:16:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331568",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'></a>
Oh no, false alarm. Seems ok.



---

archive/issue_comments_331569.json:
```json
{
    "body": "<a id='comment:17'></a>\nA few comments on Daniel's code:\n1. Does not terminate if `A` is empty and `B` is infinite, thus I'd simply try to yield A[0], B[0] initially and then start `s` at `1`.\n2. `try:` `except:` block in `iter_as_list` can be removed",
    "created_at": "2015-09-30T13:34:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331569",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:17'></a>
A few comments on Daniel's code:
1. Does not terminate if `A` is empty and `B` is infinite, thus I'd simply try to yield A[0], B[0] initially and then start `s` at `1`.
2. `try:` `except:` block in `iter_as_list` can be removed



---

archive/issue_comments_331570.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a773111ae58047835319f8ced3668000633604b\">9a77311</a></td><td><code>deal with product(empty, infinite)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/70185c3a13f573cf1eacbec2eb2122082e6c375f\">70185c3</a></td><td><code>remove unneccesary try/except block</code></td></tr></table>\n",
    "created_at": "2015-09-30T13:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331570",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a773111ae58047835319f8ced3668000633604b">9a77311</a></td><td><code>deal with product(empty, infinite)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/70185c3a13f573cf1eacbec2eb2122082e6c375f">70185c3</a></td><td><code>remove unneccesary try/except block</code></td></tr></table>




---

archive/issue_comments_331571.json:
```json
{
    "body": "**Changing commit** from \"[17229c620b4aff47161b725de2ebb4f890cfc2af](https://github.com/sagemath/sagetrac-mirror/commit/17229c620b4aff47161b725de2ebb4f890cfc2af)\" to \"[70185c3a13f573cf1eacbec2eb2122082e6c375f](https://github.com/sagemath/sagetrac-mirror/commit/70185c3a13f573cf1eacbec2eb2122082e6c375f)\".",
    "created_at": "2015-09-30T13:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331571",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[17229c620b4aff47161b725de2ebb4f890cfc2af](https://github.com/sagemath/sagetrac-mirror/commit/17229c620b4aff47161b725de2ebb4f890cfc2af)" to "[70185c3a13f573cf1eacbec2eb2122082e6c375f](https://github.com/sagemath/sagetrac-mirror/commit/70185c3a13f573cf1eacbec2eb2122082e6c375f)".



---

archive/issue_comments_331572.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [cheuberg](#comment%3A17):\n> A few comments on Daniel's code:\n> 1. Does not terminate if `A` is empty and `B` is infinite, thus I'd simply try to yield A[0], B[0] initially and then start `s` at `1`.\n> 2. `try:` `except:` block in `iter_as_list` can be removed\n\n\nBoth changed.",
    "created_at": "2015-09-30T13:40:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331572",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:19'></a>
Replying to [cheuberg](#comment%3A17):
> A few comments on Daniel's code:
> 1. Does not terminate if `A` is empty and `B` is infinite, thus I'd simply try to yield A[0], B[0] initially and then start `s` at `1`.
> 2. `try:` `except:` block in `iter_as_list` can be removed


Both changed.



---

archive/issue_comments_331573.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [ncohen](#comment%3A6):\n> About your 5 copy/paste: if you want to link every function to all others, I think the best is to have an index of methods at the head of the module and add a link toward the module.\n\n\nI think having SEEALSO blocks with links pointing directly to related functions/classes is a very useful thing (There have been some discussions on sage-devel about this.); it makes it easy for the user to find functions without a long search (Finding the \"correct\" function is definitly a problem for Sage users have...)",
    "created_at": "2015-09-30T13:43:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331573",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:20'></a>
Replying to [ncohen](#comment%3A6):
> About your 5 copy/paste: if you want to link every function to all others, I think the best is to have an index of methods at the head of the module and add a link toward the module.


I think having SEEALSO blocks with links pointing directly to related functions/classes is a very useful thing (There have been some discussions on sage-devel about this.); it makes it easy for the user to find functions without a long search (Finding the "correct" function is definitly a problem for Sage users have...)



---

archive/issue_comments_331574.json:
```json
{
    "body": "<a id='comment:21'></a>\nI have an alternative implementation (pushed as `u/cheuberg/product_cantor_pairing`):\n\n```\n    from itertools import count\n    from sage.rings.infinity import infinity\n    A = iter(A)\n    B = iter(B)\n    max_A = infinity\n    max_B = infinity\n    cache_A = []\n    cache_B = []\n    for s in count():\n        if s <= max_A:\n            try:\n                cache_A.append(next(A))\n            except StopIteration:\n                max_A = s-1\n        if s <= max_B:\n            try:\n                cache_B.append(next(B))\n            except StopIteration:\n                max_B = s-1\n        if s > max_A + max_B or max_A < 0 or max_B < 0:\n            return\n\n        for i in range(max(0, s-max_B), min(s, max_A)+1):\n            yield cache_A[i], cache_B[s-i]\n```",
    "created_at": "2015-09-30T13:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331574",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:21'></a>
I have an alternative implementation (pushed as `u/cheuberg/product_cantor_pairing`):

```
    from itertools import count
    from sage.rings.infinity import infinity
    A = iter(A)
    B = iter(B)
    max_A = infinity
    max_B = infinity
    cache_A = []
    cache_B = []
    for s in count():
        if s <= max_A:
            try:
                cache_A.append(next(A))
            except StopIteration:
                max_A = s-1
        if s <= max_B:
            try:
                cache_B.append(next(B))
            except StopIteration:
                max_B = s-1
        if s > max_A + max_B or max_A < 0 or max_B < 0:
            return

        for i in range(max(0, s-max_B), min(s, max_A)+1):
            yield cache_A[i], cache_B[s-i]
```



---

archive/issue_comments_331575.json:
```json
{
    "body": "<a id='comment:22'></a>\n> I think having SEEALSO blocks with links pointing directly to related functions/classes is a very useful thing (There have been some discussions on sage-devel about this.); it makes it easy for the user to find functions without a long search (Finding the \"correct\" function is definitly a problem for Sage users have...)\n\n\nYou got me wrong: I did not ask you to remove the seealso block. I proposed to have a\n\n```\nSEEALSO::\n\n    For related functions, refer to the module's documentation\n```\nwith a link of course.\n\nLinking n functions to each other requires n*(n-1) different links. If a function is moved, if a function is added, that requires much more work. Additionally, it possible that somebody *adding* a function may forget to update the others, which will not happen if we have an index of function at the head of the module.\n\nNathann",
    "created_at": "2015-09-30T13:54:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331575",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:22'></a>
> I think having SEEALSO blocks with links pointing directly to related functions/classes is a very useful thing (There have been some discussions on sage-devel about this.); it makes it easy for the user to find functions without a long search (Finding the "correct" function is definitly a problem for Sage users have...)


You got me wrong: I did not ask you to remove the seealso block. I proposed to have a

```
SEEALSO::

    For related functions, refer to the module's documentation
```
with a link of course.

Linking n functions to each other requires n*(n-1) different links. If a function is moved, if a function is added, that requires much more work. Additionally, it possible that somebody *adding* a function may forget to update the others, which will not happen if we have an index of function at the head of the module.

Nathann



---

archive/issue_comments_331576.json:
```json
{
    "body": "<a id='comment:23'></a>\n> I have an alternative implementation (pushed as `u/cheuberg/product_cantor_pairing`):\n\n+1 for the abscence of private class.\n\nNathann",
    "created_at": "2015-09-30T13:57:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331576",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:23'></a>
> I have an alternative implementation (pushed as `u/cheuberg/product_cantor_pairing`):

+1 for the abscence of private class.

Nathann



---

archive/issue_comments_331577.json:
```json
{
    "body": "**Changing branch** from \"[u/dkrenn/product_cantor_pairing](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/product_cantor_pairing)\" to \"[u/cheuberg/product_cantor_pairing](https://github.com/sagemath/sagetrac-mirror/tree/u/cheuberg/product_cantor_pairing)\".",
    "created_at": "2015-09-30T14:22:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331577",
    "user": "https://github.com/cheuberg"
}
```

**Changing branch** from "[u/dkrenn/product_cantor_pairing](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/product_cantor_pairing)" to "[u/cheuberg/product_cantor_pairing](https://github.com/sagemath/sagetrac-mirror/tree/u/cheuberg/product_cantor_pairing)".



---

archive/issue_comments_331578.json:
```json
{
    "body": "**Changing commit** from \"[70185c3a13f573cf1eacbec2eb2122082e6c375f](https://github.com/sagemath/sagetrac-mirror/commit/70185c3a13f573cf1eacbec2eb2122082e6c375f)\" to \"[d4dec2be9048e1b8fc9de246fe5c698d3676a13a](https://github.com/sagemath/sagetrac-mirror/commit/d4dec2be9048e1b8fc9de246fe5c698d3676a13a)\".",
    "created_at": "2015-09-30T14:22:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331578",
    "user": "https://github.com/cheuberg"
}
```

**Changing commit** from "[70185c3a13f573cf1eacbec2eb2122082e6c375f](https://github.com/sagemath/sagetrac-mirror/commit/70185c3a13f573cf1eacbec2eb2122082e6c375f)" to "[d4dec2be9048e1b8fc9de246fe5c698d3676a13a](https://github.com/sagemath/sagetrac-mirror/commit/d4dec2be9048e1b8fc9de246fe5c698d3676a13a)".



---

archive/issue_comments_331579.json:
```json
{
    "body": "<a id='comment:24'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4dec2be9048e1b8fc9de246fe5c698d3676a13a\">d4dec2b</a></td><td><code>Trac #19319: alternative implementation</code></td></tr></table>\n",
    "created_at": "2015-09-30T14:22:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331579",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:24'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4dec2be9048e1b8fc9de246fe5c698d3676a13a">d4dec2b</a></td><td><code>Trac #19319: alternative implementation</code></td></tr></table>




---

archive/issue_comments_331580.json:
```json
{
    "body": "**Changing author** from \"Daniel Krenn\" to \"Daniel Krenn, Clemens Heuberger\".",
    "created_at": "2015-09-30T14:22:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331580",
    "user": "https://github.com/cheuberg"
}
```

**Changing author** from "Daniel Krenn" to "Daniel Krenn, Clemens Heuberger".



---

archive/issue_comments_331581.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [ncohen](#comment%3A22):\n> You got me wrong: I did not ask you to remove the seealso block. I proposed to have a\n> \n> ```\n> SEEALSO::\n> \n>     For related functions, refer to the module's documentation\n> ```\n> with a link of course.\n\n\nI understood.\n\n> Linking n functions to each other requires n*(n-1) different links. If a function is moved, if a function is added, that requires much more work. Additionally, it possible that somebody *adding* a function may forget to update the others, which will not happen if we have an index of function at the head of the module.\n\n\nHaving these links directly in the `SEEALSO` block of the function helps the user...and this ranks higher to me than what a developer has to add when moving something around (and of course there is `--warn-links` which alerts when something is not where it should be). When adding a new function it is fine that not all `SEEALSO` blocks contain it; maybe only the close related ones. In `sage.misc.mrange` there are just a few functions and all those should IMHO be linked. In larger files I would *not* link all in all, but only build \"cliques\" of very related functions (but this depends on the functions, of course).",
    "created_at": "2015-09-30T14:35:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331581",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:25'></a>
Replying to [ncohen](#comment%3A22):
> You got me wrong: I did not ask you to remove the seealso block. I proposed to have a
> 
> ```
> SEEALSO::
> 
>     For related functions, refer to the module's documentation
> ```
> with a link of course.


I understood.

> Linking n functions to each other requires n*(n-1) different links. If a function is moved, if a function is added, that requires much more work. Additionally, it possible that somebody *adding* a function may forget to update the others, which will not happen if we have an index of function at the head of the module.


Having these links directly in the `SEEALSO` block of the function helps the user...and this ranks higher to me than what a developer has to add when moving something around (and of course there is `--warn-links` which alerts when something is not where it should be). When adding a new function it is fine that not all `SEEALSO` blocks contain it; maybe only the close related ones. In `sage.misc.mrange` there are just a few functions and all those should IMHO be linked. In larger files I would *not* link all in all, but only build "cliques" of very related functions (but this depends on the functions, of course).



---

archive/issue_comments_331582.json:
```json
{
    "body": "**Changing branch** from \"[u/cheuberg/product_cantor_pairing](https://github.com/sagemath/sagetrac-mirror/tree/u/cheuberg/product_cantor_pairing)\" to \"[u/dkrenn/product_cantor_pairing](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/product_cantor_pairing)\".",
    "created_at": "2015-09-30T14:40:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331582",
    "user": "https://github.com/dkrenn"
}
```

**Changing branch** from "[u/cheuberg/product_cantor_pairing](https://github.com/sagemath/sagetrac-mirror/tree/u/cheuberg/product_cantor_pairing)" to "[u/dkrenn/product_cantor_pairing](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/product_cantor_pairing)".



---

archive/issue_comments_331583.json:
```json
{
    "body": "**Changing commit** from \"[d4dec2be9048e1b8fc9de246fe5c698d3676a13a](https://github.com/sagemath/sagetrac-mirror/commit/d4dec2be9048e1b8fc9de246fe5c698d3676a13a)\" to \"[fde8e6d09f41645ec4faf9d071cf60c7b35ef9e3](https://github.com/sagemath/sagetrac-mirror/commit/fde8e6d09f41645ec4faf9d071cf60c7b35ef9e3)\".",
    "created_at": "2015-09-30T14:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331583",
    "user": "https://github.com/dkrenn"
}
```

**Changing commit** from "[d4dec2be9048e1b8fc9de246fe5c698d3676a13a](https://github.com/sagemath/sagetrac-mirror/commit/d4dec2be9048e1b8fc9de246fe5c698d3676a13a)" to "[fde8e6d09f41645ec4faf9d071cf60c7b35ef9e3](https://github.com/sagemath/sagetrac-mirror/commit/fde8e6d09f41645ec4faf9d071cf60c7b35ef9e3)".



---

archive/issue_comments_331584.json:
```json
{
    "body": "**Reviewer:** Daniel Krenn",
    "created_at": "2015-09-30T14:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331584",
    "user": "https://github.com/dkrenn"
}
```

**Reviewer:** Daniel Krenn



---

archive/issue_comments_331585.json:
```json
{
    "body": "<a id='comment:27'></a>\nAlternative implementation looks good to be (and all tests pass).\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fde8e6d09f41645ec4faf9d071cf60c7b35ef9e3\">fde8e6d</a></td><td><code>minor changes to code: spacings, PEP8, remove comment</code></td></tr></table>\n",
    "created_at": "2015-09-30T14:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331585",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:27'></a>
Alternative implementation looks good to be (and all tests pass).

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fde8e6d09f41645ec4faf9d071cf60c7b35ef9e3">fde8e6d</a></td><td><code>minor changes to code: spacings, PEP8, remove comment</code></td></tr></table>




---

archive/issue_comments_331586.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [dkrenn](#comment%3A27):\n> **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fde8e6d09f41645ec4faf9d071cf60c7b35ef9e3\">fde8e6d</a></td><td><code>minor changes to code: spacings, PEP8, remove comment</code></td></tr></table>\n\n\nthanks.",
    "created_at": "2015-09-30T14:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331586",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:28'></a>
Replying to [dkrenn](#comment%3A27):
> **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fde8e6d09f41645ec4faf9d071cf60c7b35ef9e3">fde8e6d</a></td><td><code>minor changes to code: spacings, PEP8, remove comment</code></td></tr></table>


thanks.



---

archive/issue_comments_331587.json:
```json
{
    "body": "<a id='comment:29'></a>\nWhat is the point of having it only for pairs? What if I want to iterate `ZZ x ZZ x ZZ`? Using  towers of iterators is definitely not a solution (hard to write/use and slow).",
    "created_at": "2015-10-01T00:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331587",
    "user": "https://github.com/videlec"
}
```

<a id='comment:29'></a>
What is the point of having it only for pairs? What if I want to iterate `ZZ x ZZ x ZZ`? Using  towers of iterators is definitely not a solution (hard to write/use and slow).



---

archive/issue_comments_331588.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [vdelecroix](#comment%3A29):\n> What is the point of having it only for pairs? What if I want to iterate `ZZ x ZZ x ZZ`? Using  towers of iterators is definitely not a solution (hard to write/use and slow).\n\n\nShort answer: iterating over pairs is what we need right now.\n\nIteration over the product of n iterators will, as far as I can see, always need some recursive algorithm. I do not know whether avoiding iterators internally would make that much of a difference with respect of speed; IMHO it will not make it more readable.\n\nWhat about replacing `product_cantor_pairing(A, B)` by `product_cantor_pairing([A, B])` and implementing products of `>= 3` iterators by a recursive call to `product_cantor_pairing` (and flattening the results) for the time being?",
    "created_at": "2015-10-02T07:14:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331588",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:30'></a>
Replying to [vdelecroix](#comment%3A29):
> What is the point of having it only for pairs? What if I want to iterate `ZZ x ZZ x ZZ`? Using  towers of iterators is definitely not a solution (hard to write/use and slow).


Short answer: iterating over pairs is what we need right now.

Iteration over the product of n iterators will, as far as I can see, always need some recursive algorithm. I do not know whether avoiding iterators internally would make that much of a difference with respect of speed; IMHO it will not make it more readable.

What about replacing `product_cantor_pairing(A, B)` by `product_cantor_pairing([A, B])` and implementing products of `>= 3` iterators by a recursive call to `product_cantor_pairing` (and flattening the results) for the time being?



---

archive/issue_comments_331589.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [cheuberg](#comment%3A30):\n> Replying to [vdelecroix](#comment%3A29):\n> > What is the point of having it only for pairs? What if I want to iterate `ZZ x ZZ x ZZ`? Using  towers of iterators is definitely not a solution (hard to write/use and slow).\n\n> \n> Short answer: iterating over pairs is what we need right now.\n\n\nI perfectly understand.\n\n> Iteration over the product of n iterators will, as far as I can see, always need some recursive algorithm. I do not know whether avoiding iterators internally would make that much of a difference with respect of speed; IMHO it will not make it more readable.\n\n\nNope. If you look at the code of `product` in Python there is no recursion involved. It 70 lines long, with a lot of spaces and written in pure C.\n\n> What about replacing `product_cantor_pairing(A, B)` by `product_cantor_pairing([A, B])` and implementing products of `>= 3` iterators by a recursive call to `product_cantor_pairing` (and flattening the results) for the time being?\n\n \nIs that the canonical order you want for a triple?",
    "created_at": "2015-10-02T11:49:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331589",
    "user": "https://github.com/videlec"
}
```

<a id='comment:31'></a>
Replying to [cheuberg](#comment%3A30):
> Replying to [vdelecroix](#comment%3A29):
> > What is the point of having it only for pairs? What if I want to iterate `ZZ x ZZ x ZZ`? Using  towers of iterators is definitely not a solution (hard to write/use and slow).

> 
> Short answer: iterating over pairs is what we need right now.


I perfectly understand.

> Iteration over the product of n iterators will, as far as I can see, always need some recursive algorithm. I do not know whether avoiding iterators internally would make that much of a difference with respect of speed; IMHO it will not make it more readable.


Nope. If you look at the code of `product` in Python there is no recursion involved. It 70 lines long, with a lot of spaces and written in pure C.

> What about replacing `product_cantor_pairing(A, B)` by `product_cantor_pairing([A, B])` and implementing products of `>= 3` iterators by a recursive call to `product_cantor_pairing` (and flattening the results) for the time being?

 
Is that the canonical order you want for a triple?



---

archive/issue_comments_331590.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [vdelecroix](#comment%3A31):\n> Replying to [cheuberg](#comment%3A30):\n> > Iteration over the product of n iterators will, as far as I can see, always need some recursive algorithm. I do not know whether avoiding iterators internally would make that much of a difference with respect of speed; IMHO it will not make it more readable.\n\n> \n> Nope. If you look at the code of `product` in Python there is no recursion involved. It 70 lines long, with a lot of spaces and written in pure C.\n\n\nfor infinite iterators, I suppose that things get somewhat trickier.\n\n> > What about replacing `product_cantor_pairing(A, B)` by `product_cantor_pairing([A, B])` and implementing products of `>= 3` iterators by a recursive call to `product_cantor_pairing` (and flattening the results) for the time being?\n\n>  \n> Is that the canonical order you want for a triple?\n\n\nWell, I am not really eager for ordering triples anyway.\n\nBut I imagine that having \n`product_cantor_pairing([A, B, C])` returning the elements in the same order as\n`product_cantor_pairing([product_cantor_pairing([A, B]), C])` (or the other way around, i.e., `product_cantor_pairing([A, product_cantor_pairing([B, C])])`) would make sense.",
    "created_at": "2015-10-02T12:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331590",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:32'></a>
Replying to [vdelecroix](#comment%3A31):
> Replying to [cheuberg](#comment%3A30):
> > Iteration over the product of n iterators will, as far as I can see, always need some recursive algorithm. I do not know whether avoiding iterators internally would make that much of a difference with respect of speed; IMHO it will not make it more readable.

> 
> Nope. If you look at the code of `product` in Python there is no recursion involved. It 70 lines long, with a lot of spaces and written in pure C.


for infinite iterators, I suppose that things get somewhat trickier.

> > What about replacing `product_cantor_pairing(A, B)` by `product_cantor_pairing([A, B])` and implementing products of `>= 3` iterators by a recursive call to `product_cantor_pairing` (and flattening the results) for the time being?

>  
> Is that the canonical order you want for a triple?


Well, I am not really eager for ordering triples anyway.

But I imagine that having 
`product_cantor_pairing([A, B, C])` returning the elements in the same order as
`product_cantor_pairing([product_cantor_pairing([A, B]), C])` (or the other way around, i.e., `product_cantor_pairing([A, product_cantor_pairing([B, C])])`) would make sense.



---

archive/issue_comments_331591.json:
```json
{
    "body": "**Changing branch** from \"[u/dkrenn/product_cantor_pairing](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/product_cantor_pairing)\" to \"[u/vdelecroix/19319](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/19319)\".",
    "created_at": "2015-10-02T14:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331591",
    "user": "https://github.com/videlec"
}
```

**Changing branch** from "[u/dkrenn/product_cantor_pairing](https://github.com/sagemath/sagetrac-mirror/tree/u/dkrenn/product_cantor_pairing)" to "[u/vdelecroix/19319](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/19319)".



---

archive/issue_comments_331592.json:
```json
{
    "body": "<a id='comment:33'></a>\n26 lines and no recursion.\n\nVincent\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c655f9ffb0ad9f0bfdaf712a4becb2e9eb9c1a70\">c655f9f</a></td><td><code>Trac 19319: Cantor iteration of cartesian products</code></td></tr></table>\n",
    "created_at": "2015-10-02T14:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331592",
    "user": "https://github.com/videlec"
}
```

<a id='comment:33'></a>
26 lines and no recursion.

Vincent

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c655f9ffb0ad9f0bfdaf712a4becb2e9eb9c1a70">c655f9f</a></td><td><code>Trac 19319: Cantor iteration of cartesian products</code></td></tr></table>




---

archive/issue_comments_331593.json:
```json
{
    "body": "**Changing commit** from \"[fde8e6d09f41645ec4faf9d071cf60c7b35ef9e3](https://github.com/sagemath/sagetrac-mirror/commit/fde8e6d09f41645ec4faf9d071cf60c7b35ef9e3)\" to \"[c655f9ffb0ad9f0bfdaf712a4becb2e9eb9c1a70](https://github.com/sagemath/sagetrac-mirror/commit/c655f9ffb0ad9f0bfdaf712a4becb2e9eb9c1a70)\".",
    "created_at": "2015-10-02T14:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331593",
    "user": "https://github.com/videlec"
}
```

**Changing commit** from "[fde8e6d09f41645ec4faf9d071cf60c7b35ef9e3](https://github.com/sagemath/sagetrac-mirror/commit/fde8e6d09f41645ec4faf9d071cf60c7b35ef9e3)" to "[c655f9ffb0ad9f0bfdaf712a4becb2e9eb9c1a70](https://github.com/sagemath/sagetrac-mirror/commit/c655f9ffb0ad9f0bfdaf712a4becb2e9eb9c1a70)".



---

archive/issue_comments_331594.json:
```json
{
    "body": "<a id='comment:34'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a52a845469078b5418937e8927d473e8b3d2ec6\">4a52a84</a></td><td><code>Trac 19319: fix doctests</code></td></tr></table>\n",
    "created_at": "2015-10-02T14:25:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331594",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a52a845469078b5418937e8927d473e8b3d2ec6">4a52a84</a></td><td><code>Trac 19319: fix doctests</code></td></tr></table>




---

archive/issue_comments_331595.json:
```json
{
    "body": "**Changing commit** from \"[c655f9ffb0ad9f0bfdaf712a4becb2e9eb9c1a70](https://github.com/sagemath/sagetrac-mirror/commit/c655f9ffb0ad9f0bfdaf712a4becb2e9eb9c1a70)\" to \"[4a52a845469078b5418937e8927d473e8b3d2ec6](https://github.com/sagemath/sagetrac-mirror/commit/4a52a845469078b5418937e8927d473e8b3d2ec6)\".",
    "created_at": "2015-10-02T14:25:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331595",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c655f9ffb0ad9f0bfdaf712a4becb2e9eb9c1a70](https://github.com/sagemath/sagetrac-mirror/commit/c655f9ffb0ad9f0bfdaf712a4becb2e9eb9c1a70)" to "[4a52a845469078b5418937e8927d473e8b3d2ec6](https://github.com/sagemath/sagetrac-mirror/commit/4a52a845469078b5418937e8927d473e8b3d2ec6)".



---

archive/issue_events_060413.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "rename": {
        "from": "iterator over pairs on diagonals a la Cantor pairing",
        "to": "iterator over products on diagonals a la Cantor"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19319#event-60413"
}
```



---

archive/issue_comments_331596.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Add an iterator, which goes over pairs of (possible infinite) inputs along the diagonals like the [Cantor pairing function](https://en.wikipedia.org/wiki/Pairing_function#Cantor_pairing_function).\n+Add an iterator, which goes over the elements of a cartesian product of (possible infinite) inputs along the diagonals like the [Cantor pairing function](https://en.wikipedia.org/wiki/Pairing_function#Cantor_pairing_function).\n \n-This is factored out from #19048.\n+This was initially factored out from #19048.\n``````\n",
    "created_at": "2015-10-02T14:26:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331596",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Add an iterator, which goes over pairs of (possible infinite) inputs along the diagonals like the [Cantor pairing function](https://en.wikipedia.org/wiki/Pairing_function#Cantor_pairing_function).
+Add an iterator, which goes over the elements of a cartesian product of (possible infinite) inputs along the diagonals like the [Cantor pairing function](https://en.wikipedia.org/wiki/Pairing_function#Cantor_pairing_function).
 
-This is factored out from #19048.
+This was initially factored out from #19048.
``````




---

archive/issue_comments_331597.json:
```json
{
    "body": "<a id='comment:36'></a>\nPerhaps consider using `sage.misc.lazy_list.lazy_list` as a cache? That should save you making explicit appends. You could even get slightly better memory use for cartesian powers (a common case) by sharing caches.",
    "created_at": "2015-10-02T16:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331597",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:36'></a>
Perhaps consider using `sage.misc.lazy_list.lazy_list` as a cache? That should save you making explicit appends. You could even get slightly better memory use for cartesian powers (a common case) by sharing caches.



---

archive/issue_comments_331598.json:
```json
{
    "body": "**Changing branch** from \"[u/vdelecroix/19319](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/19319)\" to \"[u/cheuberg/19319](https://github.com/sagemath/sagetrac-mirror/tree/u/cheuberg/19319)\".",
    "created_at": "2015-10-02T17:29:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331598",
    "user": "https://github.com/cheuberg"
}
```

**Changing branch** from "[u/vdelecroix/19319](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/19319)" to "[u/cheuberg/19319](https://github.com/sagemath/sagetrac-mirror/tree/u/cheuberg/19319)".



---

archive/issue_comments_331599.json:
```json
{
    "body": "**Changing commit** from \"[4a52a845469078b5418937e8927d473e8b3d2ec6](https://github.com/sagemath/sagetrac-mirror/commit/4a52a845469078b5418937e8927d473e8b3d2ec6)\" to \"[1fee7226728e5ec09ffdeb1acdb59c2aad1dc7d5](https://github.com/sagemath/sagetrac-mirror/commit/1fee7226728e5ec09ffdeb1acdb59c2aad1dc7d5)\".",
    "created_at": "2015-10-02T17:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331599",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4a52a845469078b5418937e8927d473e8b3d2ec6](https://github.com/sagemath/sagetrac-mirror/commit/4a52a845469078b5418937e8927d473e8b3d2ec6)" to "[1fee7226728e5ec09ffdeb1acdb59c2aad1dc7d5](https://github.com/sagemath/sagetrac-mirror/commit/1fee7226728e5ec09ffdeb1acdb59c2aad1dc7d5)".



---

archive/issue_comments_331600.json:
```json
{
    "body": "<a id='comment:38'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c5af3b58343d7ec4438a8c308ff886f5f211573\">3c5af3b</a></td><td><code>Trac #19319: fix typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c20bfe5346cb2bee144057dda9d106d8b2df3106\">c20bfe5</a></td><td><code>Trac #19319: a.next() -> next(a) (Python3 compliance)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fee7226728e5ec09ffdeb1acdb59c2aad1dc7d5\">1fee722</a></td><td><code>Trac #19319: added a few blanks</code></td></tr></table>\n",
    "created_at": "2015-10-02T17:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331600",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c5af3b58343d7ec4438a8c308ff886f5f211573">3c5af3b</a></td><td><code>Trac #19319: fix typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c20bfe5346cb2bee144057dda9d106d8b2df3106">c20bfe5</a></td><td><code>Trac #19319: a.next() -> next(a) (Python3 compliance)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fee7226728e5ec09ffdeb1acdb59c2aad1dc7d5">1fee722</a></td><td><code>Trac #19319: added a few blanks</code></td></tr></table>




---

archive/issue_comments_331601.json:
```json
{
    "body": "**Changing author** from \"Daniel Krenn, Clemens Heuberger\" to \"Vincent Delecroix\".",
    "created_at": "2015-10-02T17:34:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331601",
    "user": "https://github.com/cheuberg"
}
```

**Changing author** from "Daniel Krenn, Clemens Heuberger" to "Vincent Delecroix".



---

archive/issue_comments_331602.json:
```json
{
    "body": "**Changing reviewer** from \"Daniel Krenn\" to \"Daniel Krenn, Clemens Heuberger\".",
    "created_at": "2015-10-02T17:34:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331602",
    "user": "https://github.com/cheuberg"
}
```

**Changing reviewer** from "Daniel Krenn" to "Daniel Krenn, Clemens Heuberger".



---

archive/issue_comments_331603.json:
```json
{
    "body": "<a id='comment:39'></a>\nReplying to [vdelecroix](#comment%3A33):\n> 26 lines and no recursion.\n\n\nthanks --- however, using `IntegerListsLex` amounts to a little cheating with respect to the length of this routine `;-)`.\n\nI added three minor commits.\n\nAny particular reason that you return lists instead of tuples?",
    "created_at": "2015-10-02T17:34:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331603",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:39'></a>
Replying to [vdelecroix](#comment%3A33):
> 26 lines and no recursion.


thanks --- however, using `IntegerListsLex` amounts to a little cheating with respect to the length of this routine `;-)`.

I added three minor commits.

Any particular reason that you return lists instead of tuples?



---

archive/issue_comments_331604.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [cheuberg](#comment%3A39):\n> Replying to [vdelecroix](#comment%3A33):\n> > 26 lines and no recursion.\n\n> \n> thanks --- however, using `IntegerListsLex` amounts to a little cheating with respect to the length of this routine `;-)`.\n\n\nSure. But the moto is \"not reinvent the wheel\".\n\n> Any particular reason that you return lists instead of tuples?\n\n\nGood question. `itertools` used to output tuples. But sometimes you want to play with the result (like appending some more elements). For me it is fine either way.\n\n\nReplying to [nbruin](#comment%3A36):\n> Perhaps consider using `sage.misc.lazy_list.lazy_list` as a cache? That should save you making explicit appends. You could even get slightly better memory use for cartesian powers (a common case) by sharing caches.\n\n\nUsing lazy list you would also need to catch `IndexError` or so until we use the Cython API I would not go with it.\n\nI will add a trivial commit for handling sharing of slices (very good idea!).\n\nVincent",
    "created_at": "2015-10-02T18:14:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331604",
    "user": "https://github.com/videlec"
}
```

<a id='comment:40'></a>
Replying to [cheuberg](#comment%3A39):
> Replying to [vdelecroix](#comment%3A33):
> > 26 lines and no recursion.

> 
> thanks --- however, using `IntegerListsLex` amounts to a little cheating with respect to the length of this routine `;-)`.


Sure. But the moto is "not reinvent the wheel".

> Any particular reason that you return lists instead of tuples?


Good question. `itertools` used to output tuples. But sometimes you want to play with the result (like appending some more elements). For me it is fine either way.


Replying to [nbruin](#comment%3A36):
> Perhaps consider using `sage.misc.lazy_list.lazy_list` as a cache? That should save you making explicit appends. You could even get slightly better memory use for cartesian powers (a common case) by sharing caches.


Using lazy list you would also need to catch `IndexError` or so until we use the Cython API I would not go with it.

I will add a trivial commit for handling sharing of slices (very good idea!).

Vincent



---

archive/issue_comments_331605.json:
```json
{
    "body": "<a id='comment:41'></a>\nReplying to [vdelecroix](#comment%3A40):\n> Replying to [cheuberg](#comment%3A39):\n> > Any particular reason that you return lists instead of tuples?\n\n> \n> Good question. `itertools` used to output tuples. But sometimes you want to play with the result (like appending some more elements). For me it is fine either way.\n\n\nI'd actually prefer tuples, for consistency with `itertools` and the other methods in this module.",
    "created_at": "2015-10-02T18:19:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331605",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:41'></a>
Replying to [vdelecroix](#comment%3A40):
> Replying to [cheuberg](#comment%3A39):
> > Any particular reason that you return lists instead of tuples?

> 
> Good question. `itertools` used to output tuples. But sometimes you want to play with the result (like appending some more elements). For me it is fine either way.


I'd actually prefer tuples, for consistency with `itertools` and the other methods in this module.



---

archive/issue_comments_331606.json:
```json
{
    "body": "<a id='comment:42'></a>\nHi Clemens,\n\nI added a commit on top of yours for returning tuples and accepting a `repeat` argument (with the very same specification as for `itertools.product`).\n\nVincent\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96c03668100f8fc42e60ae3f7d7a715d257f41cb\">96c0366</a></td><td><code>Trac 19319: return tuples + repeat argument</code></td></tr></table>\n",
    "created_at": "2015-10-02T18:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331606",
    "user": "https://github.com/videlec"
}
```

<a id='comment:42'></a>
Hi Clemens,

I added a commit on top of yours for returning tuples and accepting a `repeat` argument (with the very same specification as for `itertools.product`).

Vincent

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96c03668100f8fc42e60ae3f7d7a715d257f41cb">96c0366</a></td><td><code>Trac 19319: return tuples + repeat argument</code></td></tr></table>




---

archive/issue_comments_331607.json:
```json
{
    "body": "**Changing branch** from \"[u/cheuberg/19319](https://github.com/sagemath/sagetrac-mirror/tree/u/cheuberg/19319)\" to \"[u/vdelecroix/19319](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/19319)\".",
    "created_at": "2015-10-02T18:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331607",
    "user": "https://github.com/videlec"
}
```

**Changing branch** from "[u/cheuberg/19319](https://github.com/sagemath/sagetrac-mirror/tree/u/cheuberg/19319)" to "[u/vdelecroix/19319](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/19319)".



---

archive/issue_comments_331608.json:
```json
{
    "body": "**Changing commit** from \"[1fee7226728e5ec09ffdeb1acdb59c2aad1dc7d5](https://github.com/sagemath/sagetrac-mirror/commit/1fee7226728e5ec09ffdeb1acdb59c2aad1dc7d5)\" to \"[96c03668100f8fc42e60ae3f7d7a715d257f41cb](https://github.com/sagemath/sagetrac-mirror/commit/96c03668100f8fc42e60ae3f7d7a715d257f41cb)\".",
    "created_at": "2015-10-02T18:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331608",
    "user": "https://github.com/videlec"
}
```

**Changing commit** from "[1fee7226728e5ec09ffdeb1acdb59c2aad1dc7d5](https://github.com/sagemath/sagetrac-mirror/commit/1fee7226728e5ec09ffdeb1acdb59c2aad1dc7d5)" to "[96c03668100f8fc42e60ae3f7d7a715d257f41cb](https://github.com/sagemath/sagetrac-mirror/commit/96c03668100f8fc42e60ae3f7d7a715d257f41cb)".



---

archive/issue_comments_331609.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2015-10-03T05:04:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331609",
    "user": "https://github.com/cheuberg"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_331610.json:
```json
{
    "body": "<a id='comment:43'></a>\nCode is fine, doctests pass, documentation builds. Thanks.",
    "created_at": "2015-10-03T05:04:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331610",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:43'></a>
Code is fine, doctests pass, documentation builds. Thanks.



---

archive/issue_events_060414.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-12T22:52:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19319#event-60414"
}
```



---

archive/issue_comments_331611.json:
```json
{
    "body": "**Changing branch** from \"[u/vdelecroix/19319](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/19319)\" to \"[96c03668100f8fc42e60ae3f7d7a715d257f41cb](https://github.com/sagemath/sagetrac-mirror/commit/96c03668100f8fc42e60ae3f7d7a715d257f41cb)\".",
    "created_at": "2015-10-12T22:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19319",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19319#issuecomment-331611",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/vdelecroix/19319](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/19319)" to "[96c03668100f8fc42e60ae3f7d7a715d257f41cb](https://github.com/sagemath/sagetrac-mirror/commit/96c03668100f8fc42e60ae3f7d7a715d257f41cb)".
