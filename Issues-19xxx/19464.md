# Issue 19464: Port SageMath to Power8 ppc64le

archive/issues_019464.json:
```json
{
    "body": "Port SageMath to the ppc64le architecture (running on [POWER8](https://en.wikipedia.org/wiki/POWER8) processors).\n\n* #19702: Upgrade GNU patch\n* #19703: Update config.guess in bzip2\n* #19704: Build generic MPIR on ppc64le\n* #19705: Add ppc64le support to config.guess\n* #19708: Upgrade MPFR\n* #19709: Upgrade MPC\n* #19711: SQLite: use newer version of config.guess\n* #19713: GLPK: use newer version of config.guess\n* #19714: ZeroMQ: use newer version of config.guess\n* #19716: MPFI: use newer version of config.guess\n* #19717: Allow tachyon to install on ppc64le\n* #19718: cddlib: use newer version of config.guess\n* #19719: Upgrade ATLAS to version 3.11.38\n* #19720: Upgrade fplll\n* #19721: Create new libgd tarball\n* #19723: planarity: use newer version of config.guess\n* #19724: ECM: use newer version of config.guess\n* #19725: lrcalc: use newer version of config.guess\n* #19726: GAP: use newer version of config.guess\n* #19727: gf2x: use newer version of config.guess\n* #19728: givaro: use newer version of config.guess\n* #19729: Rename boehm_gc to gc and upgrade to latest upstream\n* #19731: Upgrade NTL\n* #19732: ECL: use newer version of config.guess\n* #19734: Maxima: use newer version of config.guess\n* #19754: Upgrade to GCC 4.9.3\n* #19757: fflas_ffpack: use newer version of config.guess\n* #19761: LinBox: use newer version of config.guess\n* #19765: Fix linking to FLINT\n* #19767: ATLAS drops LDFLAGS during build\n* #19793: Fix arb on ppc64le\n* #19805: Allow custom configure options for ATLAS\n* #19806: GSL: use newer version of config.guess\n* #19819: Update to pynac-0.6.0\n* #19845: Random failure in libGAP on ppc64le\n\nIssue created by migration from https://trac.sagemath.org/ticket/19701\n\n",
    "closed_at": "2017-09-22T10:55:27Z",
    "created_at": "2015-12-14T17:56:28Z",
    "labels": [
        "component: porting"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Port SageMath to Power8 ppc64le",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19464",
    "user": "https://github.com/jdemeyer"
}
```
Port SageMath to the ppc64le architecture (running on [POWER8](https://en.wikipedia.org/wiki/POWER8) processors).

* #19702: Upgrade GNU patch
* #19703: Update config.guess in bzip2
* #19704: Build generic MPIR on ppc64le
* #19705: Add ppc64le support to config.guess
* #19708: Upgrade MPFR
* #19709: Upgrade MPC
* #19711: SQLite: use newer version of config.guess
* #19713: GLPK: use newer version of config.guess
* #19714: ZeroMQ: use newer version of config.guess
* #19716: MPFI: use newer version of config.guess
* #19717: Allow tachyon to install on ppc64le
* #19718: cddlib: use newer version of config.guess
* #19719: Upgrade ATLAS to version 3.11.38
* #19720: Upgrade fplll
* #19721: Create new libgd tarball
* #19723: planarity: use newer version of config.guess
* #19724: ECM: use newer version of config.guess
* #19725: lrcalc: use newer version of config.guess
* #19726: GAP: use newer version of config.guess
* #19727: gf2x: use newer version of config.guess
* #19728: givaro: use newer version of config.guess
* #19729: Rename boehm_gc to gc and upgrade to latest upstream
* #19731: Upgrade NTL
* #19732: ECL: use newer version of config.guess
* #19734: Maxima: use newer version of config.guess
* #19754: Upgrade to GCC 4.9.3
* #19757: fflas_ffpack: use newer version of config.guess
* #19761: LinBox: use newer version of config.guess
* #19765: Fix linking to FLINT
* #19767: ATLAS drops LDFLAGS during build
* #19793: Fix arb on ppc64le
* #19805: Allow custom configure options for ATLAS
* #19806: GSL: use newer version of config.guess
* #19819: Update to pynac-0.6.0
* #19845: Random failure in libGAP on ppc64le

Issue created by migration from https://trac.sagemath.org/ticket/19701





---

archive/issue_comments_267216.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-15T21:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267216",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_267217.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-23T12:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267217",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_267218.json:
```json
{
    "body": "This now works, modulo #19767 and the following doctest failures (which are probably due to GMP):\n\n```\nsage -t --long --warn-long 199.7 src/sage/interfaces/maxima.py  # 2 doctests failed\nsage -t --long --warn-long 199.7 src/sage/structure/sage_object.pyx  # Killed due to abort\nsage -t --long --warn-long 199.7 src/sage/symbolic/expression.pyx  # 1 doctest failed\nsage -t --long --warn-long 199.7 src/sage/libs/libecm.pyx  # 1 doctest failed\nsage -t --long --warn-long 199.7 src/doc/en/constructions/algebraic_geometry.rst  # 1 doctest failed\nsage -t --long --warn-long 199.7 src/sage/ext/memory.pyx  # 1 doctest failed\nsage -t --long --warn-long 199.7 src/sage/rings/real_arb.pyx  # Killed due to abort\n```",
    "created_at": "2015-12-24T08:37:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267218",
    "user": "https://github.com/jdemeyer"
}
```

This now works, modulo #19767 and the following doctest failures (which are probably due to GMP):

```
sage -t --long --warn-long 199.7 src/sage/interfaces/maxima.py  # 2 doctests failed
sage -t --long --warn-long 199.7 src/sage/structure/sage_object.pyx  # Killed due to abort
sage -t --long --warn-long 199.7 src/sage/symbolic/expression.pyx  # 1 doctest failed
sage -t --long --warn-long 199.7 src/sage/libs/libecm.pyx  # 1 doctest failed
sage -t --long --warn-long 199.7 src/doc/en/constructions/algebraic_geometry.rst  # 1 doctest failed
sage -t --long --warn-long 199.7 src/sage/ext/memory.pyx  # 1 doctest failed
sage -t --long --warn-long 199.7 src/sage/rings/real_arb.pyx  # Killed due to abort
```



---

archive/issue_comments_267219.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-24T10:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267219",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_267220.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-12-25T13:13:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267220",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_267221.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-12-30T11:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267221",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_267222.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-12-30T22:12:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267222",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_267223.json:
```json
{
    "body": "First completely successful run of `make ptestlong`! There might still be non-reproducible failures though...",
    "created_at": "2015-12-30T22:27:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267223",
    "user": "https://github.com/jdemeyer"
}
```

First completely successful run of `make ptestlong`! There might still be non-reproducible failures though...



---

archive/issue_comments_267224.json:
```json
{
    "body": "There is still some pexpect issue with GAP (random failures or timeouts).",
    "created_at": "2016-01-01T11:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267224",
    "user": "https://github.com/jdemeyer"
}
```

There is still some pexpect issue with GAP (random failures or timeouts).



---

archive/issue_comments_267225.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-01-07T13:52:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267225",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_267226.json:
```json
{
    "body": "Random failure:\n\n```\nsage -t --long --warn-long 101.9 src/sage/combinat/integer_vectors_mod_permgroup.py\n**********************************************************************\nFile \"src/sage/combinat/integer_vectors_mod_permgroup.py\", line 169, in sage.combinat.integer_vectors_mod_permgroup.IntegerVectorsModPermutationGroup\nFailed example:\n    for i in range(10): # long time\n          d1 = I.subset(i).cardinality()\n          d2 = Partitions(i, max_length=5).cardinality()\n          print d1\n          assert d1 == d2\nException raised:\n    Traceback (most recent call last):\n      File \"/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.integer_vectors_mod_permgroup.IntegerVectorsModPermutationGroup[25]>\", line 2, in <module>\n        d1 = I.subset(i).cardinality()\n      File \"/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/combinat/integer_vectors_mod_permgroup.py\", line 526, in subset\n        return IntegerVectorsModPermutationGroup_with_constraints(self.permutation_group(), sum, max_part)\n      File \"sage/misc/classcall_metaclass.pyx\", line 326, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/home/jdemeyer/sage7b3/src/build/cythonized/sage\n/misc/classcall_metaclass.c:1239)\n        return cls.classcall(cls, *args, **kwds)\n      File \"sage/misc/cachefunc.pyx\", line 973, in sage.misc.cachefunc.CachedFunction.__call__ (/home/jdemeyer/sage7b3/src/build/cythonized/sage/misc/cachefunc.c:5371)\n        w = self.f(*args, **kwds)\n      File \"/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\", line 1021, in __classcall__\n        instance = typecall(cls, *args, **options)\n      File \"sage/misc/classcall_metaclass.pyx\", line 493, in sage.misc.classcall_metaclass.typecall (/home/jdemeyer/sage7b3/src/build/cythonized/sage/misc/classcall_met\naclass.c:1665)\n        return (<PyTypeObject*>type).tp_call(cls, args, kwds)\n      File \"/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/combinat/integer_vectors_mod_permgroup.py\", line 618, in __init__\n        self._sgs = G.strong_generating_system()\n      File \"/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup.py\", line 1477, in strong_generating_system\n        sgs.append(stab.transversals(j))\n      File \"/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup.py\", line 1274, in transversals\n        for i in self.orbit(point)]\n      File \"/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup.py\", line 662, in __call__\n        return self._element_class()(x, self, check=check)\n      File \"sage/groups/perm_gps/permgroup_element.pyx\", line 457, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (/home/jdemeyer/sage7b3/sr\nc/build/cythonized/sage/groups/perm_gps/permgroup_element.c:5135)\n        raise TypeError, 'permutation %s not in %s'%(g, parent)\n    TypeError: permutation (1,5) not in Symmetric group of order 5! as a permutation group\n```",
    "created_at": "2016-01-08T13:02:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267226",
    "user": "https://github.com/jdemeyer"
}
```

Random failure:

```
sage -t --long --warn-long 101.9 src/sage/combinat/integer_vectors_mod_permgroup.py
**********************************************************************
File "src/sage/combinat/integer_vectors_mod_permgroup.py", line 169, in sage.combinat.integer_vectors_mod_permgroup.IntegerVectorsModPermutationGroup
Failed example:
    for i in range(10): # long time
          d1 = I.subset(i).cardinality()
          d2 = Partitions(i, max_length=5).cardinality()
          print d1
          assert d1 == d2
Exception raised:
    Traceback (most recent call last):
      File "/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.integer_vectors_mod_permgroup.IntegerVectorsModPermutationGroup[25]>", line 2, in <module>
        d1 = I.subset(i).cardinality()
      File "/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/combinat/integer_vectors_mod_permgroup.py", line 526, in subset
        return IntegerVectorsModPermutationGroup_with_constraints(self.permutation_group(), sum, max_part)
      File "sage/misc/classcall_metaclass.pyx", line 326, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/home/jdemeyer/sage7b3/src/build/cythonized/sage
/misc/classcall_metaclass.c:1239)
        return cls.classcall(cls, *args, **kwds)
      File "sage/misc/cachefunc.pyx", line 973, in sage.misc.cachefunc.CachedFunction.__call__ (/home/jdemeyer/sage7b3/src/build/cythonized/sage/misc/cachefunc.c:5371)
        w = self.f(*args, **kwds)
      File "/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 1021, in __classcall__
        instance = typecall(cls, *args, **options)
      File "sage/misc/classcall_metaclass.pyx", line 493, in sage.misc.classcall_metaclass.typecall (/home/jdemeyer/sage7b3/src/build/cythonized/sage/misc/classcall_met
aclass.c:1665)
        return (<PyTypeObject*>type).tp_call(cls, args, kwds)
      File "/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/combinat/integer_vectors_mod_permgroup.py", line 618, in __init__
        self._sgs = G.strong_generating_system()
      File "/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup.py", line 1477, in strong_generating_system
        sgs.append(stab.transversals(j))
      File "/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup.py", line 1274, in transversals
        for i in self.orbit(point)]
      File "/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup.py", line 662, in __call__
        return self._element_class()(x, self, check=check)
      File "sage/groups/perm_gps/permgroup_element.pyx", line 457, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (/home/jdemeyer/sage7b3/sr
c/build/cythonized/sage/groups/perm_gps/permgroup_element.c:5135)
        raise TypeError, 'permutation %s not in %s'%(g, parent)
    TypeError: permutation (1,5) not in Symmetric group of order 5! as a permutation group
```



---

archive/issue_comments_267227.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-01-13T08:42:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267227",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_267228.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-02-29T13:23:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267228",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_267229.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-03-04T08:40:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267229",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_267230.json:
```json
{
    "body": "Now that OpenBlas replaced ATLAS maybe we're good?",
    "created_at": "2016-10-25T16:34:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267230",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Now that OpenBlas replaced ATLAS maybe we're good?



---

archive/issue_comments_267231.json:
```json
{
    "body": "Depends on #19845. I haven't looked at it for a while...",
    "created_at": "2016-10-25T20:18:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267231",
    "user": "https://github.com/jdemeyer"
}
```

Depends on #19845. I haven't looked at it for a while...



---

archive/issue_events_054062.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-09-22T10:55:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19464#event-54062"
}
```



---

archive/issue_comments_267232.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-22T10:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267232",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_054063.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-09-22T10:55:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19464#event-54063"
}
```



---

archive/issue_comments_267233.json:
```json
{
    "body": "I'm running a ppc64le patchbot \"sardonis\" and everything seems to work fine...",
    "created_at": "2017-09-22T10:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19464#issuecomment-267233",
    "user": "https://github.com/jdemeyer"
}
```

I'm running a ppc64le patchbot "sardonis" and everything seems to work fine...
