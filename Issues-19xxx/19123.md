# Issue 19123: LatticePoset: add is_vertically_decomposable

archive/issues_018886.json:
```json
{
    "assignees": [],
    "body": "This patch adds a function `is_vertically_decomposable` to finite lattices.\n\nFor testing see https://oeis.org/A058800 ; for example\n\n```\nsum([1 for L in Posets(6) if L.is_lattice() and\n not LatticePoset(L).is_vertically_decomposable()])\n```\n\nreturns 7 as it should.\n\nThere is a place for possible optimization: If there is, say, covering relations `bottom -> 5`, `3 -> 8` and `7 -> top`, is suffices to show that the lattice is not vertically decomposable. This might be faster on average. Now the complexity is linear to number of covering relations.\n\nCC:  @nathanncohen @tscrim @kevindilks\n\nBranch/Commit: **[`bf4d108`](https://github.com/sagemath/sagetrac-mirror/commit/bf4d108440d0533d57cd433d0f0432fab630d193)**\n\nReviewer: **Kevin Dilks**\n\nAuthor: **Jori M\u00e4ntysalo**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19123_\n\n",
    "closed_at": "2016-03-31T18:41:46Z",
    "created_at": "2015-09-01T14:52:35Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "LatticePoset: add is_vertically_decomposable",
    "type": "issue",
    "updated_at": "2016-03-31T18:41:46Z",
    "url": "https://github.com/sagemath/sage/issues/19123",
    "user": "https://github.com/jm58660"
}
```
This patch adds a function `is_vertically_decomposable` to finite lattices.

For testing see https://oeis.org/A058800 ; for example

```
sum([1 for L in Posets(6) if L.is_lattice() and
 not LatticePoset(L).is_vertically_decomposable()])
```

returns 7 as it should.

There is a place for possible optimization: If there is, say, covering relations `bottom -> 5`, `3 -> 8` and `7 -> top`, is suffices to show that the lattice is not vertically decomposable. This might be faster on average. Now the complexity is linear to number of covering relations.

CC:  @nathanncohen @tscrim @kevindilks

Branch/Commit: **[`bf4d108`](https://github.com/sagemath/sagetrac-mirror/commit/bf4d108440d0533d57cd433d0f0432fab630d193)**

Reviewer: **Kevin Dilks**

Author: **Jori MÃ¤ntysalo**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/19123_





---

archive/issue_events_271446.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-01T14:52:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271446"
}
```



---

archive/issue_events_271447.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-01T14:52:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271447"
}
```



---

archive/issue_events_271448.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-01T14:52:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271448"
}
```



---

archive/issue_events_271449.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-01T14:52:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271449"
}
```



---

archive/issue_comments_270251.json:
```json
{
    "body": "Branch: **[u/jmantysalo/vertically_decomposable](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/vertically_decomposable)**",
    "created_at": "2015-09-01T14:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270251",
    "user": "https://github.com/jm58660"
}
```

Branch: **[u/jmantysalo/vertically_decomposable](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/vertically_decomposable)**



---

archive/issue_events_271450.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-01T14:56:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271450"
}
```



---

archive/issue_comments_270252.json:
```json
{
    "body": "Commit: **[`0d472a6`](https://github.com/sagemath/sagetrac-mirror/commit/0d472a68c9edf4ddea1404ff0cb6d2f508de55d0)**",
    "created_at": "2015-09-01T14:56:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270252",
    "user": "https://github.com/jm58660"
}
```

Commit: **[`0d472a6`](https://github.com/sagemath/sagetrac-mirror/commit/0d472a68c9edf4ddea1404ff0cb6d2f508de55d0)**



---

archive/issue_comments_270253.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nQuite easy one. Nathann selected as a random victim for a possible reviewer. `:=)`\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/decffe66347c675513bec7be9ea5411e9e123706\">decffe6</a></td><td><code>Added function is_vertically_decomposable().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d472a68c9edf4ddea1404ff0cb6d2f508de55d0\">0d472a6</a></td><td><code>Spaces on empty lines.</code></td></tr></table>\n",
    "created_at": "2015-09-01T14:56:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270253",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:2" align="right">comment:2</div>

Quite easy one. Nathann selected as a random victim for a possible reviewer. `:=)`

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/decffe66347c675513bec7be9ea5411e9e123706">decffe6</a></td><td><code>Added function is_vertically_decomposable().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d472a68c9edf4ddea1404ff0cb6d2f508de55d0">0d472a6</a></td><td><code>Spaces on empty lines.</code></td></tr></table>




---

archive/issue_comments_270254.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nSounds good, but don't you think it may be useful to *know* where the poset splits? Also, why is it only defined for lattices? The algorithm works in all cases.\n\nI did not test it, but from the code's look I am not sure that it works for the chain of length 2, as the docstring indicates. Could you add a doctest for that?\n\nNathann",
    "created_at": "2015-09-01T18:25:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270254",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

Sounds good, but don't you think it may be useful to *know* where the poset splits? Also, why is it only defined for lattices? The algorithm works in all cases.

I did not test it, but from the code's look I am not sure that it works for the chain of length 2, as the docstring indicates. Could you add a doctest for that?

Nathann



---

archive/issue_events_271451.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-01T18:39:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271451"
}
```



---

archive/issue_events_271452.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-01T18:39:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271452"
}
```



---

archive/issue_comments_270255.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@nathanncohen](#comment:3):\n\n> Sounds good, but don't you think it may be useful to *know* where the poset splits?\n\nYes, I think that will be usefull. For posets we have `is_connected()`, `connected_components()` and `disjoint_union()`. I guess we should have `is_vertically_decomposable()`, `vertically_indecomposable_parts()` and `vertical_sum()` for lattices.\n\nThere are of course other options, like having a function (this one, with an argument?) returning list of \"decomposition elements\". The user could then run `interval()` on them to get parts.\n\n> Also, why is it only defined for lattices? The algorithm works in all cases.\n\nHow should it be defined on non-connected posets? And I am not sure if this works with non-bounded posets; I thinked about bounded ones when writing this.\n\n> I did not test it, but from the code's look I am not sure that it works for the chain of length 2, as the docstring indicates. Could you add a doctest for that?\n\nArghs! You are right, of course. I forget the special case when writing the code. I'll correct it.\n\n(Btw, this would be nice exercise of (totally unneeded) optimization. One should not need to look for all edged of Hasse diagram to see that a poset is indecomposable.)",
    "created_at": "2015-09-01T18:39:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270255",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@nathanncohen](#comment:3):

> Sounds good, but don't you think it may be useful to *know* where the poset splits?

Yes, I think that will be usefull. For posets we have `is_connected()`, `connected_components()` and `disjoint_union()`. I guess we should have `is_vertically_decomposable()`, `vertically_indecomposable_parts()` and `vertical_sum()` for lattices.

There are of course other options, like having a function (this one, with an argument?) returning list of "decomposition elements". The user could then run `interval()` on them to get parts.

> Also, why is it only defined for lattices? The algorithm works in all cases.

How should it be defined on non-connected posets? And I am not sure if this works with non-bounded posets; I thinked about bounded ones when writing this.

> I did not test it, but from the code's look I am not sure that it works for the chain of length 2, as the docstring indicates. Could you add a doctest for that?

Arghs! You are right, of course. I forget the special case when writing the code. I'll correct it.

(Btw, this would be nice exercise of (totally unneeded) optimization. One should not need to look for all edged of Hasse diagram to see that a poset is indecomposable.)



---

archive/issue_comments_270256.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n> There are of course other options, like having a function (this one, with an argument?) returning list of \"decomposition elements\". \n\n+1 to that.\n\n> How should it be defined on non-connected posets? And I am not sure if this works with non-bounded posets; I thinked about bounded ones when writing this.\n\nHmmm, okay okay... I attempted to write a definition, but indeed for non-lattices you have 1000 different corner-cases, and th definition would be a mess.\n\n> (Btw, this would be nice exercise of (totally unneeded) optimization. One should not need to look for all edged of Hasse diagram to see that a poset is indecomposable.)\n\nWhat do you mean? Your algorithm looks very reliable. I do not see it waste much.\n\nNathann",
    "created_at": "2015-09-01T18:45:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270256",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

> There are of course other options, like having a function (this one, with an argument?) returning list of "decomposition elements". 

+1 to that.

> How should it be defined on non-connected posets? And I am not sure if this works with non-bounded posets; I thinked about bounded ones when writing this.

Hmmm, okay okay... I attempted to write a definition, but indeed for non-lattices you have 1000 different corner-cases, and th definition would be a mess.

> (Btw, this would be nice exercise of (totally unneeded) optimization. One should not need to look for all edged of Hasse diagram to see that a poset is indecomposable.)

What do you mean? Your algorithm looks very reliable. I do not see it waste much.

Nathann



---

archive/issue_comments_270257.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@nathanncohen](#comment:5):\n> > There are of course other options, like having a function (this one, with an argument?) returning list of \"decomposition elements\". \n\n> \n> +1 to that.\n\nOK. What should be the name of the argument? `certificate`? `give_me_the_list=True`?\n\n> > How should it be defined on non-connected posets? And I am not sure if this works with non-bounded posets; I thinked about bounded ones when writing this.\n\n> \n> Hmmm, okay okay... I attempted to write a definition, but indeed for non-lattices you have 1000 different corner-cases, and th definition would be a mess.\n\nExcept for the 2-element lattice there is one simple definition that generalizes this:\n\n```\nany(P.cover_relations_graph().is_cut_vertex(e) for e in P)\n```\n\nBut in any case, it is easy to move this to posets later if we want so.\n\n> > (Btw, this would be nice exercise of (totally unneeded) optimization. One should not need to look for all edged of Hasse diagram to see that a poset is indecomposable.)\n\n> \n> What do you mean? Your algorithm looks very reliable. I do not see it waste much.\n\nIf the poset has coverings `2 -> 6` and `4 -> 9`, then no element `3..8` can be a decomposition element. After founding, say, `2 -> 6` we could check `5 ->`, `4 ->` and so on. But after founding `4 -> 9` we should have a somewhat complicated stack to skip re-checking biggest covers of `4` and `5`. I guess that the algorithm would be slower in reality, but I am quite sure that it would be better in some theoretical meaning.",
    "created_at": "2015-09-01T20:02:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270257",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@nathanncohen](#comment:5):
> > There are of course other options, like having a function (this one, with an argument?) returning list of "decomposition elements". 

> 
> +1 to that.

OK. What should be the name of the argument? `certificate`? `give_me_the_list=True`?

> > How should it be defined on non-connected posets? And I am not sure if this works with non-bounded posets; I thinked about bounded ones when writing this.

> 
> Hmmm, okay okay... I attempted to write a definition, but indeed for non-lattices you have 1000 different corner-cases, and th definition would be a mess.

Except for the 2-element lattice there is one simple definition that generalizes this:

```
any(P.cover_relations_graph().is_cut_vertex(e) for e in P)
```

But in any case, it is easy to move this to posets later if we want so.

> > (Btw, this would be nice exercise of (totally unneeded) optimization. One should not need to look for all edged of Hasse diagram to see that a poset is indecomposable.)

> 
> What do you mean? Your algorithm looks very reliable. I do not see it waste much.

If the poset has coverings `2 -> 6` and `4 -> 9`, then no element `3..8` can be a decomposition element. After founding, say, `2 -> 6` we could check `5 ->`, `4 ->` and so on. But after founding `4 -> 9` we should have a somewhat complicated stack to skip re-checking biggest covers of `4` and `5`. I guess that the algorithm would be slower in reality, but I am quite sure that it would be better in some theoretical meaning.



---

archive/issue_comments_270258.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n> OK. What should be the name of the argument? `certificate`? `give_me_the_list=True`?\n\nIsn't there a terminology for those points? If it is only for lattices, maybe you could have `return_cutvertices=True` or something?\n\n> Except for the 2-element lattice there is one simple definition that generalizes this:\n> \n> ```\n> any(P.cover_relations_graph().is_cut_vertex(e) for e in P)\n> ```\n\nWouldn't work for a poset on three elements, one being greater than the two others (which are incomparable).\n\n> If the poset has coverings `2 -> 6` and `4 -> 9`, then no element `3..8` can be a decomposition element. After founding, say, `2 -> 6` we could check `5 ->`, `4 ->` and so on. But after founding `4 -> 9` we should have a somewhat complicated stack to skip re-checking biggest covers of `4` and `5`. I guess that the algorithm would be slower in reality, but I am quite sure that it would be better in some theoretical meaning.\n\nHMmm... Skipping some edges without additional assumption on the order in which they are returned? I do not know... This is not so bad, for the moment `:-)`\n\nNathann",
    "created_at": "2015-09-01T20:25:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270258",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:7" align="right">comment:7</div>

> OK. What should be the name of the argument? `certificate`? `give_me_the_list=True`?

Isn't there a terminology for those points? If it is only for lattices, maybe you could have `return_cutvertices=True` or something?

> Except for the 2-element lattice there is one simple definition that generalizes this:
> 
> ```
> any(P.cover_relations_graph().is_cut_vertex(e) for e in P)
> ```

Wouldn't work for a poset on three elements, one being greater than the two others (which are incomparable).

> If the poset has coverings `2 -> 6` and `4 -> 9`, then no element `3..8` can be a decomposition element. After founding, say, `2 -> 6` we could check `5 ->`, `4 ->` and so on. But after founding `4 -> 9` we should have a somewhat complicated stack to skip re-checking biggest covers of `4` and `5`. I guess that the algorithm would be slower in reality, but I am quite sure that it would be better in some theoretical meaning.

HMmm... Skipping some edges without additional assumption on the order in which they are returned? I do not know... This is not so bad, for the moment `:-)`

Nathann



---

archive/issue_comments_270259.json:
```json
{
    "body": "Changed commit from **[`0d472a6`](https://github.com/sagemath/sagetrac-mirror/commit/0d472a68c9edf4ddea1404ff0cb6d2f508de55d0)** to **[`893ecc1`](https://github.com/sagemath/sagetrac-mirror/commit/893ecc133183398f0932e02c146f235230784915)**",
    "created_at": "2015-09-02T06:44:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270259",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0d472a6`](https://github.com/sagemath/sagetrac-mirror/commit/0d472a68c9edf4ddea1404ff0cb6d2f508de55d0)** to **[`893ecc1`](https://github.com/sagemath/sagetrac-mirror/commit/893ecc133183398f0932e02c146f235230784915)**



---

archive/issue_comments_270260.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/893ecc133183398f0932e02c146f235230784915\">893ecc1</a></td><td><code>Added an option to get \"decomposing elements\".</code></td></tr></table>\n",
    "created_at": "2015-09-02T06:44:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270260",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/893ecc133183398f0932e02c146f235230784915">893ecc1</a></td><td><code>Added an option to get "decomposing elements".</code></td></tr></table>




---

archive/issue_comments_270261.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nYou don't have to write this algorithm twice to make it work in all situations. Once is enough. And if you are worried of the cost of a 'if' inside of the loop, then you should not be writing Python code.\n\nFurthermore, be careful with '::' as they are not needed after an INPUT block. Build the doc to check it.\n\nNathann",
    "created_at": "2015-09-02T06:46:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270261",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:9" align="right">comment:9</div>

You don't have to write this algorithm twice to make it work in all situations. Once is enough. And if you are worried of the cost of a 'if' inside of the loop, then you should not be writing Python code.

Furthermore, be careful with '::' as they are not needed after an INPUT block. Build the doc to check it.

Nathann



---

archive/issue_comments_270262.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nNow it should work with empty lattice, 1-element lattice and 2-element lattice. There is backend ready for extending the function in `lattices.py`. I may modify it as suggested by Nathann at comment 9. But the more important question:\n\nHow should we exactly define \"decomposing elements\"? Let's start with\n\n```\nPosets.ChainPoset(2).ordinal_sum(Posets.BooleanLattice(3), labels='integers')\n```\n\nIs `0` a decomposing element? What are \"components\" for the lattice? Maybe `0-1`, `1-2` and `2-9`. But then, what are components of 2-element lattice?\n\nReplying to [@nathanncohen](#comment:7):\n> > If the poset has coverings `2 -> 6` and `4 -> 9`, then no element `3..8` can be a decomposition element. After founding, say, `2 -> 6` we could check `5 ->`, `4 ->` and so on. But after founding `4 -> 9` we should have a somewhat complicated stack to skip re-checking biggest covers of `4` and `5`. I guess that the algorithm would be slower in reality, but I am quite sure that it would be better in some theoretical meaning.\n\n> \n> HMmm... Skipping some edges without additional assumption on the order in which they are returned?\n\nI dont' mean that. If the lattice has `100` elements, then `0` is the bottom and `99` is the top. If the lattice has coverings `0 -> 37`, `34 -> 88` and `77 -> 99`, then it is not vertically decomposable. There might be faster way to find those coverings than going throught all elements. But the code would be much more complicated.",
    "created_at": "2015-09-02T06:56:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270262",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:10" align="right">comment:10</div>

Now it should work with empty lattice, 1-element lattice and 2-element lattice. There is backend ready for extending the function in `lattices.py`. I may modify it as suggested by Nathann at comment 9. But the more important question:

How should we exactly define "decomposing elements"? Let's start with

```
Posets.ChainPoset(2).ordinal_sum(Posets.BooleanLattice(3), labels='integers')
```

Is `0` a decomposing element? What are "components" for the lattice? Maybe `0-1`, `1-2` and `2-9`. But then, what are components of 2-element lattice?

Replying to [@nathanncohen](#comment:7):
> > If the poset has coverings `2 -> 6` and `4 -> 9`, then no element `3..8` can be a decomposition element. After founding, say, `2 -> 6` we could check `5 ->`, `4 ->` and so on. But after founding `4 -> 9` we should have a somewhat complicated stack to skip re-checking biggest covers of `4` and `5`. I guess that the algorithm would be slower in reality, but I am quite sure that it would be better in some theoretical meaning.

> 
> HMmm... Skipping some edges without additional assumption on the order in which they are returned?

I dont' mean that. If the lattice has `100` elements, then `0` is the bottom and `99` is the top. If the lattice has coverings `0 -> 37`, `34 -> 88` and `77 -> 99`, then it is not vertically decomposable. There might be faster way to find those coverings than going throught all elements. But the code would be much more complicated.



---

archive/issue_comments_270263.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nCould you also add to your docstring a reference toward a textbook that defines this notion?",
    "created_at": "2015-09-02T07:11:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270263",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:11" align="right">comment:11</div>

Could you also add to your docstring a reference toward a textbook that defines this notion?



---

archive/issue_comments_270264.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca909a0c05fee489a071ff672b9f3b5392ba8158\">ca909a0</a></td><td><code>Indentation of INPUT block.</code></td></tr></table>\n",
    "created_at": "2015-09-02T10:47:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270264",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca909a0c05fee489a071ff672b9f3b5392ba8158">ca909a0</a></td><td><code>Indentation of INPUT block.</code></td></tr></table>




---

archive/issue_comments_270265.json:
```json
{
    "body": "Changed commit from **[`893ecc1`](https://github.com/sagemath/sagetrac-mirror/commit/893ecc133183398f0932e02c146f235230784915)** to **[`ca909a0`](https://github.com/sagemath/sagetrac-mirror/commit/ca909a0c05fee489a071ff672b9f3b5392ba8158)**",
    "created_at": "2015-09-02T10:47:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270265",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`893ecc1`](https://github.com/sagemath/sagetrac-mirror/commit/893ecc133183398f0932e02c146f235230784915)** to **[`ca909a0`](https://github.com/sagemath/sagetrac-mirror/commit/ca909a0c05fee489a071ff672b9f3b5392ba8158)**



---

archive/issue_comments_270266.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@nathanncohen](#comment:11):\n> Could you also add to your docstring a reference toward a textbook that defines this notion?\n\nDuh. Counting Finite Lattices by Heitzig and Reinhold defines it \"- - contains an element which is neither the greatest not the least element of L but comparable to every element of L.\" On the other hand, On the number of distributive lattices by Ern\u00e9 and (same) Heitzig and Reinhold says \"- - if it is either a singleton or the vertical sum of two nonempty posets - -\", and vertical sum on two two-element lattice by their definition is the two-element lattice.\n\nI select tscrim as another random victim. Travis, should we define the two-element lattice to be vertically decomposable or indecomposable?\n\n(Or raise `OtherError(\"developers don't know how to define this\")`? `:=)`)",
    "created_at": "2015-09-02T11:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270266",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@nathanncohen](#comment:11):
> Could you also add to your docstring a reference toward a textbook that defines this notion?

Duh. Counting Finite Lattices by Heitzig and Reinhold defines it "- - contains an element which is neither the greatest not the least element of L but comparable to every element of L." On the other hand, On the number of distributive lattices by ErnÃ© and (same) Heitzig and Reinhold says "- - if it is either a singleton or the vertical sum of two nonempty posets - -", and vertical sum on two two-element lattice by their definition is the two-element lattice.

I select tscrim as another random victim. Travis, should we define the two-element lattice to be vertically decomposable or indecomposable?

(Or raise `OtherError("developers don't know how to define this")`? `:=)`)



---

archive/issue_comments_270267.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,10 @@\n This patch adds a function `is_vertically_decomposable` to finite lattices.\n+\n+For testing see https://oeis.org/A058800 ; for example\n+\n+```\n+sum([1 for L in Posets(6) if L.is_lattice() and\n+ not LatticePoset(L).is_vertically_decomposable()])\n+```\n+\n+returns 7 as it should.\n``````\n",
    "created_at": "2015-09-02T11:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270267",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,10 @@
 This patch adds a function `is_vertically_decomposable` to finite lattices.
+
+For testing see https://oeis.org/A058800 ; for example
+
+```
+sum([1 for L in Posets(6) if L.is_lattice() and
+ not LatticePoset(L).is_vertically_decomposable()])
+```
+
+returns 7 as it should.
``````




---

archive/issue_comments_270268.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nOEIS uses the definition where the two-element lattice is vertically indecomposable: https://oeis.org/A058800. Does this suffice as a base for the definition?",
    "created_at": "2015-09-09T07:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270268",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:14" align="right">comment:14</div>

OEIS uses the definition where the two-element lattice is vertically indecomposable: https://oeis.org/A058800. Does this suffice as a base for the definition?



---

archive/issue_comments_270269.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nHelloooooooo !\n\nYeah yeah I guess. Could you just add a link in the doc toward a textbook/paper that defines it the way you use it?\n\n> (Or raise OtherError(\"developers don't know how to define this\")?\n\nWe have had very non-enlightening debates here about whether the empty graph is connected or not. In such a situation, I would add such a warning rather than have those stupid conversations `:-P`\nNathann",
    "created_at": "2015-09-09T07:45:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270269",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:15" align="right">comment:15</div>

Helloooooooo !

Yeah yeah I guess. Could you just add a link in the doc toward a textbook/paper that defines it the way you use it?

> (Or raise OtherError("developers don't know how to define this")?

We have had very non-enlightening debates here about whether the empty graph is connected or not. In such a situation, I would add such a warning rather than have those stupid conversations `:-P`
Nathann



---

archive/issue_comments_270270.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/667173c9117e910378f3bc959821a7922a1f9c39\">667173c</a></td><td><code>Options to is_vertically_decomposable().</code></td></tr></table>\n",
    "created_at": "2015-09-09T12:21:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270270",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/667173c9117e910378f3bc959821a7922a1f9c39">667173c</a></td><td><code>Options to is_vertically_decomposable().</code></td></tr></table>




---

archive/issue_comments_270271.json:
```json
{
    "body": "Changed commit from **[`ca909a0`](https://github.com/sagemath/sagetrac-mirror/commit/ca909a0c05fee489a071ff672b9f3b5392ba8158)** to **[`667173c`](https://github.com/sagemath/sagetrac-mirror/commit/667173c9117e910378f3bc959821a7922a1f9c39)**",
    "created_at": "2015-09-09T12:21:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270271",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ca909a0`](https://github.com/sagemath/sagetrac-mirror/commit/ca909a0c05fee489a071ff672b9f3b5392ba8158)** to **[`667173c`](https://github.com/sagemath/sagetrac-mirror/commit/667173c9117e910378f3bc959821a7922a1f9c39)**



---

archive/issue_comments_270272.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThis code should now work.\n\nI still don't know how to make the user interface... For posets we have boolean-valued `is_connected()` and subposets-valued `connected_components()`. But what should then be the function returning only \"decomposing elements\". I will ask in sage-devel.\n\nComments on documentation are welcome.",
    "created_at": "2015-09-09T12:29:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270272",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:17" align="right">comment:17</div>

This code should now work.

I still don't know how to make the user interface... For posets we have boolean-valued `is_connected()` and subposets-valued `connected_components()`. But what should then be the function returning only "decomposing elements". I will ask in sage-devel.

Comments on documentation are welcome.



---

archive/issue_comments_270273.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,3 +8,5 @@\n ```\n \n returns 7 as it should.\n+\n+There is a place for possible optimization: If there is, say, covering relations `bottom -> 5`, `3 -> 8` and `7 -> top`, is suffices to show that the lattice is not vertically decomposable. This might be faster on average. Now the complexity is linear to number of covering relations.\n``````\n",
    "created_at": "2015-09-09T12:29:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270273",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,3 +8,5 @@
 ```
 
 returns 7 as it should.
+
+There is a place for possible optimization: If there is, say, covering relations `bottom -> 5`, `3 -> 8` and `7 -> top`, is suffices to show that the lattice is not vertically decomposable. This might be faster on average. Now the complexity is linear to number of covering relations.
``````




---

archive/issue_comments_270274.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nreturn_type vs return_elements.",
    "created_at": "2015-09-09T12:39:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270274",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

return_type vs return_elements.



---

archive/issue_comments_270275.json:
```json
{
    "body": "Changed commit from **[`667173c`](https://github.com/sagemath/sagetrac-mirror/commit/667173c9117e910378f3bc959821a7922a1f9c39)** to **[`5e7224a`](https://github.com/sagemath/sagetrac-mirror/commit/5e7224a20d6341a09821779ebdeb38cbf0130817)**",
    "created_at": "2015-09-09T12:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270275",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`667173c`](https://github.com/sagemath/sagetrac-mirror/commit/667173c9117e910378f3bc959821a7922a1f9c39)** to **[`5e7224a`](https://github.com/sagemath/sagetrac-mirror/commit/5e7224a20d6341a09821779ebdeb38cbf0130817)**



---

archive/issue_comments_270276.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e7224a20d6341a09821779ebdeb38cbf0130817\">5e7224a</a></td><td><code>Check for 0- and 1-element lattices.</code></td></tr></table>\n",
    "created_at": "2015-09-09T12:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270276",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e7224a20d6341a09821779ebdeb38cbf0130817">5e7224a</a></td><td><code>Check for 0- and 1-element lattices.</code></td></tr></table>




---

archive/issue_comments_270277.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@nathanncohen](#comment:18):\n> return_type vs return_elements.\n\nBut they are different things. \"Internal\" function in `hasse_diagram.py` has only one yes/no -argument, so a Boolean seems right. \"Interface\" function in `lattices.py` has three possible inputs.",
    "created_at": "2015-09-09T12:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270277",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@nathanncohen](#comment:18):
> return_type vs return_elements.

But they are different things. "Internal" function in `hasse_diagram.py` has only one yes/no -argument, so a Boolean seems right. "Interface" function in `lattices.py` has three possible inputs.



---

archive/issue_comments_270278.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n> But they are different things. \"Internal\" function in `hasse_diagram.py` has only one yes/no -argument, so a Boolean seems right. \"Interface\" function in `lattices.py` has three possible inputs.\n\nSorry, I removed my comment on the argument's type right after I posted it, it was a mistake. The one I left, however, is about the fact that the argument that appears in the doc is not the one that appears in the function's definition.\n\nNathann",
    "created_at": "2015-09-09T12:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270278",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

> But they are different things. "Internal" function in `hasse_diagram.py` has only one yes/no -argument, so a Boolean seems right. "Interface" function in `lattices.py` has three possible inputs.

Sorry, I removed my comment on the argument's type right after I posted it, it was a mistake. The one I left, however, is about the fact that the argument that appears in the doc is not the one that appears in the function's definition.

Nathann



---

archive/issue_comments_270279.json:
```json
{
    "body": "Changed commit from **[`5e7224a`](https://github.com/sagemath/sagetrac-mirror/commit/5e7224a20d6341a09821779ebdeb38cbf0130817)** to **[`d42f0ab`](https://github.com/sagemath/sagetrac-mirror/commit/d42f0ab3e5bba8a005407f9e864ac6fa5f420318)**",
    "created_at": "2015-09-10T11:03:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270279",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5e7224a`](https://github.com/sagemath/sagetrac-mirror/commit/5e7224a20d6341a09821779ebdeb38cbf0130817)** to **[`d42f0ab`](https://github.com/sagemath/sagetrac-mirror/commit/d42f0ab3e5bba8a005407f9e864ac6fa5f420318)**



---

archive/issue_comments_270280.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d42f0ab3e5bba8a005407f9e864ac6fa5f420318\">d42f0ab</a></td><td><code>Splitted function, added examples. Also categorized the index of function.</code></td></tr></table>\n",
    "created_at": "2015-09-10T11:03:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270280",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d42f0ab3e5bba8a005407f9e864ac6fa5f420318">d42f0ab</a></td><td><code>Splitted function, added examples. Also categorized the index of function.</code></td></tr></table>




---

archive/issue_comments_270281.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI will wait until #17226 gets to beta, and then rebase this. (Forgot that it was not there yet.) This will also categorize the index of functions.\n\nI split the function to two parts. I will also wait if somebody comments this on sage-devel. I don't know what should be the name of argument for `vertical_decomposition()`.\n\nSo this is open for comments and *de facto* ready for review, but not *de iure* in needs_review -phase.",
    "created_at": "2015-09-10T11:09:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270281",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:23" align="right">comment:23</div>

I will wait until #17226 gets to beta, and then rebase this. (Forgot that it was not there yet.) This will also categorize the index of functions.

I split the function to two parts. I will also wait if somebody comments this on sage-devel. I don't know what should be the name of argument for `vertical_decomposition()`.

So this is open for comments and *de facto* ready for review, but not *de iure* in needs_review -phase.



---

archive/issue_comments_270282.json:
```json
{
    "body": "Changed commit from **[`d42f0ab`](https://github.com/sagemath/sagetrac-mirror/commit/d42f0ab3e5bba8a005407f9e864ac6fa5f420318)** to none",
    "created_at": "2015-09-11T07:24:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270282",
    "user": "https://github.com/jm58660"
}
```

Changed commit from **[`d42f0ab`](https://github.com/sagemath/sagetrac-mirror/commit/d42f0ab3e5bba8a005407f9e864ac6fa5f420318)** to none



---

archive/issue_comments_270283.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/vertically_decomposable](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/vertically_decomposable)** to none",
    "created_at": "2015-09-11T07:24:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270283",
    "user": "https://github.com/jm58660"
}
```

Changed branch from **[u/jmantysalo/vertically_decomposable](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/vertically_decomposable)** to none



---

archive/issue_comments_270284.json:
```json
{
    "body": "Branch: **[u/jmantysalo/vertically_decomposable2](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/vertically_decomposable2)**",
    "created_at": "2015-09-11T07:25:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270284",
    "user": "https://github.com/jm58660"
}
```

Branch: **[u/jmantysalo/vertically_decomposable2](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/vertically_decomposable2)**



---

archive/issue_comments_270285.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0455d6e94d30e62494888814bdea5c3c8f2be3f\">c0455d6</a></td><td><code>Added vertical decomposition of the lattice. Also change index of function.</code></td></tr></table>\n",
    "created_at": "2015-09-11T07:25:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270285",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0455d6e94d30e62494888814bdea5c3c8f2be3f">c0455d6</a></td><td><code>Added vertical decomposition of the lattice. Also change index of function.</code></td></tr></table>




---

archive/issue_comments_270286.json:
```json
{
    "body": "Commit: **[`c0455d6`](https://github.com/sagemath/sagetrac-mirror/commit/c0455d6e94d30e62494888814bdea5c3c8f2be3f)**",
    "created_at": "2015-09-11T07:25:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270286",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`c0455d6`](https://github.com/sagemath/sagetrac-mirror/commit/c0455d6e94d30e62494888814bdea5c3c8f2be3f)**



---

archive/issue_comments_270287.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nOK, here is one possible way to split the functionality. Ready for review.",
    "created_at": "2015-09-11T07:28:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270287",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:27" align="right">comment:27</div>

OK, here is one possible way to split the functionality. Ready for review.



---

archive/issue_events_271453.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-11T07:28:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271453"
}
```



---

archive/issue_events_271454.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-11T07:28:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271454"
}
```



---

archive/issue_comments_270288.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/abe1642631b63035568761fd34699929f8afdc8f\">abe1642</a></td><td><code>Simplification as suggested by ncohen.</code></td></tr></table>\n",
    "created_at": "2015-09-14T05:00:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270288",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/abe1642631b63035568761fd34699929f8afdc8f">abe1642</a></td><td><code>Simplification as suggested by ncohen.</code></td></tr></table>




---

archive/issue_comments_270289.json:
```json
{
    "body": "Changed commit from **[`c0455d6`](https://github.com/sagemath/sagetrac-mirror/commit/c0455d6e94d30e62494888814bdea5c3c8f2be3f)** to **[`abe1642`](https://github.com/sagemath/sagetrac-mirror/commit/abe1642631b63035568761fd34699929f8afdc8f)**",
    "created_at": "2015-09-14T05:00:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270289",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c0455d6`](https://github.com/sagemath/sagetrac-mirror/commit/c0455d6e94d30e62494888814bdea5c3c8f2be3f)** to **[`abe1642`](https://github.com/sagemath/sagetrac-mirror/commit/abe1642631b63035568761fd34699929f8afdc8f)**



---

archive/issue_events_271455.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-14T05:04:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271455"
}
```



---

archive/issue_events_271456.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-14T05:04:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271456"
}
```



---

archive/issue_comments_270290.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@nathanncohen](#comment:9):\n> You don't have to write this algorithm twice to make it work in all situations. Once is enough.\n\nDone this. Compiling, will change to needs_review if this seems to work.",
    "created_at": "2015-09-14T05:04:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270290",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@nathanncohen](#comment:9):
> You don't have to write this algorithm twice to make it work in all situations. Once is enough.

Done this. Compiling, will change to needs_review if this seems to work.



---

archive/issue_comments_270291.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0abc93861d121a172abfb11203821d34fecfd78e\">0abc938</a></td><td><code>Special cases for empty, one- and two-element lattices.</code></td></tr></table>\n",
    "created_at": "2015-09-14T05:42:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270291",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0abc93861d121a172abfb11203821d34fecfd78e">0abc938</a></td><td><code>Special cases for empty, one- and two-element lattices.</code></td></tr></table>




---

archive/issue_comments_270292.json:
```json
{
    "body": "Changed commit from **[`abe1642`](https://github.com/sagemath/sagetrac-mirror/commit/abe1642631b63035568761fd34699929f8afdc8f)** to **[`0abc938`](https://github.com/sagemath/sagetrac-mirror/commit/0abc93861d121a172abfb11203821d34fecfd78e)**",
    "created_at": "2015-09-14T05:42:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270292",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`abe1642`](https://github.com/sagemath/sagetrac-mirror/commit/abe1642631b63035568761fd34699929f8afdc8f)** to **[`0abc938`](https://github.com/sagemath/sagetrac-mirror/commit/0abc93861d121a172abfb11203821d34fecfd78e)**



---

archive/issue_events_271457.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-14T05:44:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271457"
}
```



---

archive/issue_events_271458.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-14T05:44:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271458"
}
```



---

archive/issue_comments_270293.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nAnd yes, there was a bug. Now at last this should be ready for review.\n\n(Thematic index of functions might look unnecessary for now. However, see #19197, #19197 etc.)",
    "created_at": "2015-09-14T05:44:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270293",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:31" align="right">comment:31</div>

And yes, there was a bug. Now at last this should be ready for review.

(Thematic index of functions might look unnecessary for now. However, see #19197, #19197 etc.)



---

archive/issue_comments_270294.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nNathann, what about this. You already read the code and the 2-element lattice case is now documented. Hence there is two questions left:\n\n- Is the thematic index of functions OK in lattices?\n- Is this splitting of functionality OK?",
    "created_at": "2015-09-19T12:41:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270294",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:32" align="right">comment:32</div>

Nathann, what about this. You already read the code and the 2-element lattice case is now documented. Hence there is two questions left:

- Is the thematic index of functions OK in lattices?
- Is this splitting of functionality OK?



---

archive/issue_comments_270295.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nJori,\n\nI thought a bit before answering your email, because the reason I had not done\nanything on the ticket during the last 6 days is that I had chosen to not work\non it anymore. I do not often \"forget\" things like tickets in needs_review: my\nmail inbox contains all the things I must attend to, and they all remain there\nuntil I do what I think I should do with them.\n\nAmong the reasons that led me there is that nothing specific makes your code\ninvalid, and I have no reason to ask you to change it just because it does not\nsuit my taste. I like things short, simple, concise. Three functions for only\none feature is beyond me, it angers me by itself.\n\nIf I were to write it, you would have one Lattice method which would directly\nwork on the hasse diagram, with a `return_recomposition` boolean flag to return\nlists instead of boolean answers. One function, 20 lines, end of the story.\n\nRight now, the Lattice method `vertical_decomposition` contains around 20 lines\nof code, none of which has the slightest interest to me. It's just wrapping\nthings into other things, and testing things that are already tested elsewhere.\n\nWhat I know, however, is that it is impossible for you to get any kind of code\ninto Sage and to work with it unless you have somebody to review your code. I\nsurely know that. Depending on what I work on, depending on the times, it is\neither easy or hard to get anything in there, and from time to time I think that\nit would be better if you were allowed to put any code that you like into Sage\nwithout needing reviewers like me who drag their feet at every occasion.\n\nAlso, I admit that I do not have the energy to discuss the implementation\ndetails endlessly, and I also hate that this process may require you to\nimplement code only because the only reviewer you have has a different taste.\n\nTruth is, I don't want to be the reason why you cannot work properly on Sage's\ncode, and I don't have a lot of ways out as not many would do the reviewing job\notherwise. So I will try this: I will implement this as is the most natural to\nme, and you can feel free to not use it if you do not like it. Let's see how it\nworks.\n\nSorry for the painful reviews.\n\nNathann\n\nP.S.: the code is at u/ncohen/19123",
    "created_at": "2015-09-20T11:33:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270295",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:33" align="right">comment:33</div>

Jori,

I thought a bit before answering your email, because the reason I had not done
anything on the ticket during the last 6 days is that I had chosen to not work
on it anymore. I do not often "forget" things like tickets in needs_review: my
mail inbox contains all the things I must attend to, and they all remain there
until I do what I think I should do with them.

Among the reasons that led me there is that nothing specific makes your code
invalid, and I have no reason to ask you to change it just because it does not
suit my taste. I like things short, simple, concise. Three functions for only
one feature is beyond me, it angers me by itself.

If I were to write it, you would have one Lattice method which would directly
work on the hasse diagram, with a `return_recomposition` boolean flag to return
lists instead of boolean answers. One function, 20 lines, end of the story.

Right now, the Lattice method `vertical_decomposition` contains around 20 lines
of code, none of which has the slightest interest to me. It's just wrapping
things into other things, and testing things that are already tested elsewhere.

What I know, however, is that it is impossible for you to get any kind of code
into Sage and to work with it unless you have somebody to review your code. I
surely know that. Depending on what I work on, depending on the times, it is
either easy or hard to get anything in there, and from time to time I think that
it would be better if you were allowed to put any code that you like into Sage
without needing reviewers like me who drag their feet at every occasion.

Also, I admit that I do not have the energy to discuss the implementation
details endlessly, and I also hate that this process may require you to
implement code only because the only reviewer you have has a different taste.

Truth is, I don't want to be the reason why you cannot work properly on Sage's
code, and I don't have a lot of ways out as not many would do the reviewing job
otherwise. So I will try this: I will implement this as is the most natural to
me, and you can feel free to not use it if you do not like it. Let's see how it
works.

Sorry for the painful reviews.

Nathann

P.S.: the code is at u/ncohen/19123



---

archive/issue_comments_270296.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nHmm... I continue to think. Or hope that somebody else reviews this.\n\nI hope that having this on `hasse_diagram.py` is useful later - it can be a quick optimization before `frattini_sublattice`.",
    "created_at": "2015-09-20T15:55:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270296",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:34" align="right">comment:34</div>

Hmm... I continue to think. Or hope that somebody else reviews this.

I hope that having this on `hasse_diagram.py` is useful later - it can be a quick optimization before `frattini_sublattice`.



---

archive/issue_events_271459.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-09-28T16:58:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271459"
}
```



---

archive/issue_events_271460.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-09-28T16:58:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271460"
}
```



---

archive/issue_comments_270297.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\ndoes not apply, needs rebase",
    "created_at": "2015-09-28T16:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270297",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:35" align="right">comment:35</div>

does not apply, needs rebase



---

archive/issue_comments_270298.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1356d17b1bd124fa573767ee8b7e5d50798004c0\">1356d17</a></td><td><code>Rebasing.</code></td></tr></table>\n",
    "created_at": "2015-09-28T17:34:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270298",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1356d17b1bd124fa573767ee8b7e5d50798004c0">1356d17</a></td><td><code>Rebasing.</code></td></tr></table>




---

archive/issue_comments_270299.json:
```json
{
    "body": "Changed commit from **[`0abc938`](https://github.com/sagemath/sagetrac-mirror/commit/0abc93861d121a172abfb11203821d34fecfd78e)** to **[`1356d17`](https://github.com/sagemath/sagetrac-mirror/commit/1356d17b1bd124fa573767ee8b7e5d50798004c0)**",
    "created_at": "2015-09-28T17:34:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270299",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0abc938`](https://github.com/sagemath/sagetrac-mirror/commit/0abc93861d121a172abfb11203821d34fecfd78e)** to **[`1356d17`](https://github.com/sagemath/sagetrac-mirror/commit/1356d17b1bd124fa573767ee8b7e5d50798004c0)**



---

archive/issue_comments_270300.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nErr. Terminology nazi here: what you did is a 'merge'. A rebase is a difference operation which moves the commits around.\n\nNathann",
    "created_at": "2015-09-28T17:37:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270300",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:37" align="right">comment:37</div>

Err. Terminology nazi here: what you did is a 'merge'. A rebase is a difference operation which moves the commits around.

Nathann



---

archive/issue_comments_270301.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nMerged. Sorry for wrong term.",
    "created_at": "2015-09-28T17:38:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270301",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:38" align="right">comment:38</div>

Merged. Sorry for wrong term.



---

archive/issue_events_271461.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-28T17:38:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271461"
}
```



---

archive/issue_events_271462.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-28T17:38:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271462"
}
```



---

archive/issue_comments_270302.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nKevin, if you are interested in docs, you might want to review this. It does some polishing together with adding little new functionality.",
    "created_at": "2015-09-30T17:45:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270302",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:39" align="right">comment:39</div>

Kevin, if you are interested in docs, you might want to review this. It does some polishing together with adding little new functionality.



---

archive/issue_comments_270303.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nI still think that formal definitions should come first, without being labelled as formal definitions, and then informal definitions can come after.",
    "created_at": "2015-10-10T20:56:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270303",
    "user": "https://github.com/kevindilks"
}
```

<div id="comment:40" align="right">comment:40</div>

I still think that formal definitions should come first, without being labelled as formal definitions, and then informal definitions can come after.



---

archive/issue_comments_270304.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI'm not sure if I like the backend code living in `hasse_diagram.py`. Even if the code  applies to more than lattices, you seem to still be making assumptions about the poset being bounded. Plus the initial docstring there is written in a way that implies it only works for lattices.",
    "created_at": "2015-10-10T21:10:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270304",
    "user": "https://github.com/kevindilks"
}
```

<div id="comment:41" align="right">comment:41</div>

I'm not sure if I like the backend code living in `hasse_diagram.py`. Even if the code  applies to more than lattices, you seem to still be making assumptions about the poset being bounded. Plus the initial docstring there is written in a way that implies it only works for lattices.



---

archive/issue_comments_270305.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@kevindilks](#comment:40):\n> I still think that formal definitions should come first, without being labelled as formal definitions, and then informal definitions can come after.\n\nOK, I can change that.\n\nReplying to [@kevindilks](#comment:41):\n> I'm not sure if I like the backend code living in `hasse_diagram.py`. Even if the code  applies to more than lattices, you seem to still be making assumptions about the poset being bounded. Plus the initial docstring there is written in a way that implies it only works for lattices.\n\nI think that all code in `hasse_diagram.py` is \"internal\", i.e. it is user's fault if something break for direct call to it.\n\nIf this is not in `hasse_diagram.py`, then I guess it must be copied if I want to optimize `frattini_sublattice()` with it. Or `linear_extensions_number()` maybe?",
    "created_at": "2015-10-12T08:46:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270305",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@kevindilks](#comment:40):
> I still think that formal definitions should come first, without being labelled as formal definitions, and then informal definitions can come after.

OK, I can change that.

Replying to [@kevindilks](#comment:41):
> I'm not sure if I like the backend code living in `hasse_diagram.py`. Even if the code  applies to more than lattices, you seem to still be making assumptions about the poset being bounded. Plus the initial docstring there is written in a way that implies it only works for lattices.

I think that all code in `hasse_diagram.py` is "internal", i.e. it is user's fault if something break for direct call to it.

If this is not in `hasse_diagram.py`, then I guess it must be copied if I want to optimize `frattini_sublattice()` with it. Or `linear_extensions_number()` maybe?



---

archive/issue_comments_270306.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b408d0c9dd34b9c07ca3472d7e12615dc7072457\">b408d0c</a></td><td><code>Change order of formal and informal definition.</code></td></tr></table>\n",
    "created_at": "2015-10-21T04:56:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270306",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b408d0c9dd34b9c07ca3472d7e12615dc7072457">b408d0c</a></td><td><code>Change order of formal and informal definition.</code></td></tr></table>




---

archive/issue_comments_270307.json:
```json
{
    "body": "Changed commit from **[`1356d17`](https://github.com/sagemath/sagetrac-mirror/commit/1356d17b1bd124fa573767ee8b7e5d50798004c0)** to **[`b408d0c`](https://github.com/sagemath/sagetrac-mirror/commit/b408d0c9dd34b9c07ca3472d7e12615dc7072457)**",
    "created_at": "2015-10-21T04:56:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270307",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1356d17`](https://github.com/sagemath/sagetrac-mirror/commit/1356d17b1bd124fa573767ee8b7e5d50798004c0)** to **[`b408d0c`](https://github.com/sagemath/sagetrac-mirror/commit/b408d0c9dd34b9c07ca3472d7e12615dc7072457)**



---

archive/issue_comments_270308.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nBetter docstring now?\n\nIf this seems hard one to decide, then I can split the (non-relating) part that rearranges the index of functions.",
    "created_at": "2015-10-21T04:57:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270308",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:44" align="right">comment:44</div>

Better docstring now?

If this seems hard one to decide, then I can split the (non-relating) part that rearranges the index of functions.



---

archive/issue_comments_270309.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\n`ping -c 1 Kevin`. This could be nice to have before #18511, as this modifies the index of function.\n\n(Funny. I have a poset of dependencies between poset-related tickets.)",
    "created_at": "2015-11-01T19:15:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270309",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:45" align="right">comment:45</div>

`ping -c 1 Kevin`. This could be nice to have before #18511, as this modifies the index of function.

(Funny. I have a poset of dependencies between poset-related tickets.)



---

archive/issue_comments_270310.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@nathanncohen](#comment:3):\n> Also, why is it only defined for lattices? The algorithm works in all cases.\n\nHere is a kind of followup: #19659. I think that it is most natural generalization to all posets.",
    "created_at": "2015-12-04T19:42:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270310",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@nathanncohen](#comment:3):
> Also, why is it only defined for lattices? The algorithm works in all cases.

Here is a kind of followup: #19659. I think that it is most natural generalization to all posets.



---

archive/issue_events_271463.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-01-11T16:12:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271463"
}
```



---

archive/issue_events_271464.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-01-11T16:12:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "milestone_number": null,
    "milestone_title": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271464"
}
```



---

archive/issue_events_271465.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-01-11T16:12:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271465"
}
```



---

archive/issue_events_271466.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-01-11T16:12:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271466"
}
```



---

archive/issue_comments_270311.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nDocumentation part (i.e. index of functions) done in #19854, so this one needs work.\n\nAlso this should be thinked about. There is also #19659 waiting, and in principle it is same thing as this one; a poset that is also a lattice can be expressed as an ordinal sum of two posets only if it vertically decomposable. At least http://users.cecs.anu.edu.au/~bdm/papers/posets.pdf by Brinkmann and McKay uses term \"vertically decomposable\" with non-lattice posets.\n\n(Actually after #19659 it is easy to make a simple function for #19215, and then use it as a \"precompiler\" for #14126. But that's another story.)",
    "created_at": "2016-01-11T16:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270311",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:47" align="right">comment:47</div>

Documentation part (i.e. index of functions) done in #19854, so this one needs work.

Also this should be thinked about. There is also #19659 waiting, and in principle it is same thing as this one; a poset that is also a lattice can be expressed as an ordinal sum of two posets only if it vertically decomposable. At least http://users.cecs.anu.edu.au/~bdm/papers/posets.pdf by Brinkmann and McKay uses term "vertically decomposable" with non-lattice posets.

(Actually after #19659 it is easy to make a simple function for #19215, and then use it as a "precompiler" for #14126. But that's another story.)



---

archive/issue_comments_270312.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ee8b96dbb37a87c5c43b4fd0ad6c7ee8c8a97c4\">0ee8b96</a></td><td><code>Merge branch 'u/jmantysalo/vertically_decomposable2' into 7.1.rc0</code></td></tr></table>\n",
    "created_at": "2016-03-14T19:33:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270312",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:48"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ee8b96dbb37a87c5c43b4fd0ad6c7ee8c8a97c4">0ee8b96</a></td><td><code>Merge branch 'u/jmantysalo/vertically_decomposable2' into 7.1.rc0</code></td></tr></table>




---

archive/issue_events_271467.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-03-14T19:33:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271467"
}
```



---

archive/issue_events_271468.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-03-14T19:33:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271468"
}
```



---

archive/issue_comments_270313.json:
```json
{
    "body": "Changed commit from **[`b408d0c`](https://github.com/sagemath/sagetrac-mirror/commit/b408d0c9dd34b9c07ca3472d7e12615dc7072457)** to **[`0ee8b96`](https://github.com/sagemath/sagetrac-mirror/commit/0ee8b96dbb37a87c5c43b4fd0ad6c7ee8c8a97c4)**",
    "created_at": "2016-03-14T19:33:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270313",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`b408d0c`](https://github.com/sagemath/sagetrac-mirror/commit/b408d0c9dd34b9c07ca3472d7e12615dc7072457)** to **[`0ee8b96`](https://github.com/sagemath/sagetrac-mirror/commit/0ee8b96dbb37a87c5c43b4fd0ad6c7ee8c8a97c4)**



---

archive/issue_comments_270314.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/vertically_decomposable2](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/vertically_decomposable2)** to **[public/19123](https://github.com/sagemath/sagetrac-mirror/tree/public/19123)**",
    "created_at": "2016-03-14T19:33:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270314",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/jmantysalo/vertically_decomposable2](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/vertically_decomposable2)** to **[public/19123](https://github.com/sagemath/sagetrac-mirror/tree/public/19123)**



---

archive/issue_comments_270315.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nMinor grammatical corrections:\n\n* In `vertical_decomposition()`, 'Let `d_1, \\ldots , d_n` be elements comparable to every element of the lattice, excluding the top and bottom elements.' Should be rephrased as 'Let `d_1, \\ldots, d_n` be elements (excluding the top and bottom elements) comparable to every element of the lattice.' The original version makes it sound like the top and bottom elements are being excluded from the set of things that `d_1...d_n` need to be comparable to, instead of being excluded from the set `d_1...d_n` itself.\n\n\n* Immediately following that, 'Let `b` be THE bottom element and `t` be the top element.'\n\n* 'Informally said, this returns the lattice SPLIT INTO parts AT every single-element \"cutting point\".'\n\n* Under `INPUT:`, 'return the list OF decomposing elements'.\n\n* In the definition of `is_vertically_decomposable()`, 'A lattice is vertically decomposable if it has an element that is comparable to all elements and is NEITHER the bottom NOR the top element.'\n\nBesides that, I think I'm happy with it. I'll just need to check the rendered documentation once those changes are made.",
    "created_at": "2016-03-29T22:44:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270315",
    "user": "https://github.com/kevindilks"
}
```

<div id="comment:49" align="right">comment:49</div>

Minor grammatical corrections:

* In `vertical_decomposition()`, 'Let `d_1, \ldots , d_n` be elements comparable to every element of the lattice, excluding the top and bottom elements.' Should be rephrased as 'Let `d_1, \ldots, d_n` be elements (excluding the top and bottom elements) comparable to every element of the lattice.' The original version makes it sound like the top and bottom elements are being excluded from the set of things that `d_1...d_n` need to be comparable to, instead of being excluded from the set `d_1...d_n` itself.


* Immediately following that, 'Let `b` be THE bottom element and `t` be the top element.'

* 'Informally said, this returns the lattice SPLIT INTO parts AT every single-element "cutting point".'

* Under `INPUT:`, 'return the list OF decomposing elements'.

* In the definition of `is_vertically_decomposable()`, 'A lattice is vertically decomposable if it has an element that is comparable to all elements and is NEITHER the bottom NOR the top element.'

Besides that, I think I'm happy with it. I'll just need to check the rendered documentation once those changes are made.



---

archive/issue_comments_270316.json:
```json
{
    "body": "Changed commit from **[`0ee8b96`](https://github.com/sagemath/sagetrac-mirror/commit/0ee8b96dbb37a87c5c43b4fd0ad6c7ee8c8a97c4)** to **[`bf4d108`](https://github.com/sagemath/sagetrac-mirror/commit/bf4d108440d0533d57cd433d0f0432fab630d193)**",
    "created_at": "2016-03-30T04:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270316",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0ee8b96`](https://github.com/sagemath/sagetrac-mirror/commit/0ee8b96dbb37a87c5c43b4fd0ad6c7ee8c8a97c4)** to **[`bf4d108`](https://github.com/sagemath/sagetrac-mirror/commit/bf4d108440d0533d57cd433d0f0432fab630d193)**



---

archive/issue_comments_270317.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf4d108440d0533d57cd433d0f0432fab630d193\">bf4d108</a></td><td><code>Docstring corrections.</code></td></tr></table>\n",
    "created_at": "2016-03-30T04:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270317",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf4d108440d0533d57cd433d0f0432fab630d193">bf4d108</a></td><td><code>Docstring corrections.</code></td></tr></table>




---

archive/issue_comments_270318.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@kevindilks](#comment:49):\n> Minor grammatical corrections:\n\nThanks! Done those.\n\n> * 'Informally said, this returns the lattice SPLIT INTO parts AT every single-element \"cutting point\".'\n\nThese are hard ones... In Finnish 'hila'='lattice', 'hilassani'='in my lattice' etc.",
    "created_at": "2016-03-30T04:39:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270318",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@kevindilks](#comment:49):
> Minor grammatical corrections:

Thanks! Done those.

> * 'Informally said, this returns the lattice SPLIT INTO parts AT every single-element "cutting point".'

These are hard ones... In Finnish 'hila'='lattice', 'hilassani'='in my lattice' etc.



---

archive/issue_comments_270319.json:
```json
{
    "body": "Reviewer: **Kevin Dilks**",
    "created_at": "2016-03-30T18:04:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270319",
    "user": "https://github.com/kevindilks"
}
```

Reviewer: **Kevin Dilks**



---

archive/issue_events_271469.json:
```json
{
    "actor": "https://github.com/kevindilks",
    "created_at": "2016-03-30T18:04:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271469"
}
```



---

archive/issue_events_271470.json:
```json
{
    "actor": "https://github.com/kevindilks",
    "created_at": "2016-03-30T18:04:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271470"
}
```



---

archive/issue_events_271471.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-31T18:41:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271471"
}
```



---

archive/issue_events_271472.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a6a1daa4e0b03f50b5966c706443c09a7d4f6391",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-03-31T18:41:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19123#event-271472"
}
```



---

archive/issue_comments_270320.json:
```json
{
    "body": "Changed branch from **[public/19123](https://github.com/sagemath/sagetrac-mirror/tree/public/19123)** to **[`bf4d108`](https://github.com/sagemath/sagetrac-mirror/commit/bf4d108440d0533d57cd433d0f0432fab630d193)**",
    "created_at": "2016-03-31T18:41:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19123",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19123#issuecomment-270320",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/19123](https://github.com/sagemath/sagetrac-mirror/tree/public/19123)** to **[`bf4d108`](https://github.com/sagemath/sagetrac-mirror/commit/bf4d108440d0533d57cd433d0f0432fab630d193)**
