# Issue 19049: New Hyperbolicity Algorithm

archive/issues_018812.json:
```json
{
    "body": "Implement the hyperbolicity algorithm in ![1].\n\n![1] Michele Borassi, David Coudert, Pierluigi Crescenzi and Andrea Marino.\nOn Computing the Hyperbolicity of Real-World Graphs.\nIn Proceedings of the 23rd European Symposium on Algorithms (ESA 2015)\n\nCC:  @nathanncohen @dcoudert\n\nKeywords: Hyperbolicity\n\nBranch/Commit: bc34557c74be36de553b0b940d423f6fe35dd626\n\nReviewer: David Coudert\n\nAuthor: Michele Borassi\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19049\n\n",
    "closed_at": "2015-08-23T23:31:09Z",
    "created_at": "2015-08-18T07:50:28Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "New Hyperbolicity Algorithm",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19049",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```
Implement the hyperbolicity algorithm in ![1].

![1] Michele Borassi, David Coudert, Pierluigi Crescenzi and Andrea Marino.
On Computing the Hyperbolicity of Real-World Graphs.
In Proceedings of the 23rd European Symposium on Algorithms (ESA 2015)

CC:  @nathanncohen @dcoudert

Keywords: Hyperbolicity

Branch/Commit: bc34557c74be36de553b0b940d423f6fe35dd626

Reviewer: David Coudert

Author: Michele Borassi

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19049





---

archive/issue_comments_334170.json:
```json
{
    "body": "Changing keywords from \"\" to \"Hyperbolicity\".",
    "created_at": "2015-08-18T07:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334170",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing keywords from "" to "Hyperbolicity".



---

archive/issue_comments_334171.json:
```json
{
    "body": "Changing author from \"\" to \"Michele Borassi\"",
    "created_at": "2015-08-18T07:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334171",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing author from "" to "Michele Borassi"



---

archive/issue_comments_334172.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n+Implement the hyperbolicity algorithm in ![1].\n \n+![1] Michele Borassi, David Coudert, Pierluigi Crescenzi and Andrea Marino.\n+On Computing the Hyperbolicity of Real-World Graphs.\n+In Proceedings of the 23rd European Symposium on Algorithms (ESA 2015)\n``````\n",
    "created_at": "2015-08-18T07:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334172",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,5 @@
+Implement the hyperbolicity algorithm in ![1].
 
+![1] Michele Borassi, David Coudert, Pierluigi Crescenzi and Andrea Marino.
+On Computing the Hyperbolicity of Real-World Graphs.
+In Proceedings of the 23rd European Symposium on Algorithms (ESA 2015)
``````




---

archive/issue_comments_334173.json:
```json
{
    "body": "Changing branch from \"\" to \"u/borassi/new_hyperbolicity_algorithm\"",
    "created_at": "2015-08-18T14:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334173",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing branch from "" to "u/borassi/new_hyperbolicity_algorithm"



---

archive/issue_comments_334174.json:
```json
{
    "body": "Changing commit from \"\" to \"e2fe1c11dee8d5424927eb2a002c92687536b68e\"",
    "created_at": "2015-08-18T14:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334174",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing commit from "" to "e2fe1c11dee8d5424927eb2a002c92687536b68e"



---

archive/issue_comments_334175.json:
```json
{
    "body": "<a id='comment:3'></a>\nNew commits:\n|                                                                                                                                          |                                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n|[4720ef9](https://github.com/sagemath/sagetrac-mirror/commit/4720ef9c313779670f8a6d484203a1864328d47c)|`New hyperbolicity algorithm (documentation to be improved)`|\n|[e2fe1c1](https://github.com/sagemath/sagetrac-mirror/commit/e2fe1c11dee8d5424927eb2a002c92687536b68e)|`First draft`|",
    "created_at": "2015-08-18T14:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334175",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:3'></a>
New commits:
|                                                                                                                                          |                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
|[4720ef9](https://github.com/sagemath/sagetrac-mirror/commit/4720ef9c313779670f8a6d484203a1864328d47c)|`New hyperbolicity algorithm (documentation to be improved)`|
|[e2fe1c1](https://github.com/sagemath/sagetrac-mirror/commit/e2fe1c11dee8d5424927eb2a002c92687536b68e)|`First draft`|



---

archive/issue_comments_334176.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-08-18T14:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334176",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_334177.json:
```json
{
    "body": "<a id='comment:4'></a>\nIt's working very well. I have very few and minor comments\n- reduce the number of iterations of the test `for i in range(100): # long time`. 10 is enough.\n- replace reference [CCL12] with [CCL15]: N. Cohen, D. Coudert, A. Lancin. On computing the Gromov hyperbolicity. ACM Journal of Experimental Algorithmics, 20(1.6):1-18, 2015. [`<http://dx.doi.org/10.1145/2780652>`_] or [`<https://hal.inria.fr/hal-01182890>`_]\n- I think it is better to write `for b in range(D-1,-1,-1):` than `for b from D > b >= 0:` although the later is easier to read. see http://docs.cython.org/src/userguide/language_basics.html#integer-for-loops\n- Instead of `c = a`, `a = b` and `b = c` you can write directly `a,b = b,a`\n- When you `# We reset acc_bool`, it might be easier to use `memset`. This part has negligeable impact on the computation time anyway.\n\nDavid.",
    "created_at": "2015-08-18T16:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334177",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>
It's working very well. I have very few and minor comments
- reduce the number of iterations of the test `for i in range(100): # long time`. 10 is enough.
- replace reference [CCL12] with [CCL15]: N. Cohen, D. Coudert, A. Lancin. On computing the Gromov hyperbolicity. ACM Journal of Experimental Algorithmics, 20(1.6):1-18, 2015. [`<http://dx.doi.org/10.1145/2780652>`_] or [`<https://hal.inria.fr/hal-01182890>`_]
- I think it is better to write `for b in range(D-1,-1,-1):` than `for b from D > b >= 0:` although the later is easier to read. see http://docs.cython.org/src/userguide/language_basics.html#integer-for-loops
- Instead of `c = a`, `a = b` and `b = c` you can write directly `a,b = b,a`
- When you `# We reset acc_bool`, it might be easier to use `memset`. This part has negligeable impact on the computation time anyway.

David.



---

archive/issue_comments_334178.json:
```json
{
    "body": "<a id='comment:5'></a>\nHello!\n\nReplying to [dcoudert](#comment%3A4):\n\n> It's working very well. I have very few and minor comments\n> - reduce the number of iterations of the test `for i in range(100): # long time`. 10 is enough.\n\n\nDone!\n\n> - replace reference [CCL12] with [CCL15]: N. Cohen, D. Coudert, A. Lancin. On computing the Gromov hyperbolicity. ACM Journal of Experimental Algorithmics, 20(1.6):1-18, 2015. [`<http://dx.doi.org/10.1145/2780652>`_] or [`<https://hal.inria.fr/hal-01182890>`_]\n\n\nDone! I used the first link.\n\n> - I think it is better to write `for b in range(D-1,-1,-1):` than `for b from D > b >= 0:` although the later is easier to read. see http://docs.cython.org/src/userguide/language_basics.html#integer-for-loops\n\n\nDone!\n\n> - Instead of `c = a`, `a = b` and `b = c` you can write directly `a,b = b,a`\n\n\nDone!\n\n> - When you `# We reset acc_bool`, it might be easier to use `memset`. This part has negligeable impact on the computation time anyway.\n\n\nNot done! In my opinion, it has impact on the computation time. Indeed, when we fix a pair (a,b), the algorithm does the following:\n\n```\nfor c in decreasing order of ecc(c)-d(a,c):\n    if ecc(c)-d(a,c) >= 3*(h+1)-2*d(a,b):\n        ... other tests to check if v is acceptable and/or valuable\n    else:\n        break # All other vertices c are not acceptable and not valuable\n\nfor c in valuable:\n    for (c,d) pair before (a,b), with d acceptable:\n        h = max(h, delta(a,b,c,d))\n\nfor c in acceptable:\n    acc_bool[c] = 0\n\n```\nHere, the first for loop is performed as many times as the number of vertices satisfying `ecc(c)-d(a,c) >= 3*(h+1)-2*d(a,b)` (let's say, 100, if the graph has with 10000 vertices). The second for loop needs time O(acceptable * valuable), where acceptable is, let's say, 10, and valuable is 5. The total time is 50.\n\nThe last loop takes time 10, as it is, while it takes time 10000 if we use memset (I know memset is very fast, but here we are talking about two orders of magnitude).\n\nDid I convince you?",
    "created_at": "2015-08-19T08:54:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334178",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:5'></a>
Hello!

Replying to [dcoudert](#comment%3A4):

> It's working very well. I have very few and minor comments
> - reduce the number of iterations of the test `for i in range(100): # long time`. 10 is enough.


Done!

> - replace reference [CCL12] with [CCL15]: N. Cohen, D. Coudert, A. Lancin. On computing the Gromov hyperbolicity. ACM Journal of Experimental Algorithmics, 20(1.6):1-18, 2015. [`<http://dx.doi.org/10.1145/2780652>`_] or [`<https://hal.inria.fr/hal-01182890>`_]


Done! I used the first link.

> - I think it is better to write `for b in range(D-1,-1,-1):` than `for b from D > b >= 0:` although the later is easier to read. see http://docs.cython.org/src/userguide/language_basics.html#integer-for-loops


Done!

> - Instead of `c = a`, `a = b` and `b = c` you can write directly `a,b = b,a`


Done!

> - When you `# We reset acc_bool`, it might be easier to use `memset`. This part has negligeable impact on the computation time anyway.


Not done! In my opinion, it has impact on the computation time. Indeed, when we fix a pair (a,b), the algorithm does the following:

```
for c in decreasing order of ecc(c)-d(a,c):
    if ecc(c)-d(a,c) >= 3*(h+1)-2*d(a,b):
        ... other tests to check if v is acceptable and/or valuable
    else:
        break # All other vertices c are not acceptable and not valuable

for c in valuable:
    for (c,d) pair before (a,b), with d acceptable:
        h = max(h, delta(a,b,c,d))

for c in acceptable:
    acc_bool[c] = 0

```
Here, the first for loop is performed as many times as the number of vertices satisfying `ecc(c)-d(a,c) >= 3*(h+1)-2*d(a,b)` (let's say, 100, if the graph has with 10000 vertices). The second for loop needs time O(acceptable * valuable), where acceptable is, let's say, 10, and valuable is 5. The total time is 50.

The last loop takes time 10, as it is, while it takes time 10000 if we use memset (I know memset is very fast, but here we are talking about two orders of magnitude).

Did I convince you?



---

archive/issue_comments_334179.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[4dba3d9](https://github.com/sagemath/sagetrac-mirror/commit/4dba3d9a5fa98984198157a8a60ba06af84ca292)|`Reviewer's comments`|",
    "created_at": "2015-08-19T08:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334179",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                     |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[4dba3d9](https://github.com/sagemath/sagetrac-mirror/commit/4dba3d9a5fa98984198157a8a60ba06af84ca292)|`Reviewer's comments`|



---

archive/issue_comments_334180.json:
```json
{
    "body": "Changing commit from \"e2fe1c11dee8d5424927eb2a002c92687536b68e\" to \"4dba3d9a5fa98984198157a8a60ba06af84ca292\"",
    "created_at": "2015-08-19T08:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334180",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e2fe1c11dee8d5424927eb2a002c92687536b68e" to "4dba3d9a5fa98984198157a8a60ba06af84ca292"



---

archive/issue_comments_334181.json:
```json
{
    "body": "<a id='comment:7'></a>\ncan you just fix the remainings `...` -> `....:`\n\n```\n       sage: for i in range(10): # long time\n       ...       n = random.randint(2, 20)\n```",
    "created_at": "2015-08-19T11:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334181",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>
can you just fix the remainings `...` -> `....:`

```
       sage: for i in range(10): # long time
       ...       n = random.randint(2, 20)
```



---

archive/issue_comments_334182.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------|\n|[9c97e28](https://github.com/sagemath/sagetrac-mirror/commit/9c97e2812e1aa2e34cefebaec06b335a6b4632f7)|`Fixed ...`|",
    "created_at": "2015-08-19T12:33:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334182",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |           |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------|
|[9c97e28](https://github.com/sagemath/sagetrac-mirror/commit/9c97e2812e1aa2e34cefebaec06b335a6b4632f7)|`Fixed ...`|



---

archive/issue_comments_334183.json:
```json
{
    "body": "Changing commit from \"4dba3d9a5fa98984198157a8a60ba06af84ca292\" to \"9c97e2812e1aa2e34cefebaec06b335a6b4632f7\"",
    "created_at": "2015-08-19T12:33:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334183",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4dba3d9a5fa98984198157a8a60ba06af84ca292" to "9c97e2812e1aa2e34cefebaec06b335a6b4632f7"



---

archive/issue_comments_334184.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Coudert\"",
    "created_at": "2015-08-19T12:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334184",
    "user": "https://github.com/dcoudert"
}
```

Changing reviewer from "" to "David Coudert"



---

archive/issue_comments_334185.json:
```json
{
    "body": "<a id='comment:9'></a>\nSo then the patch is good to go!\nThanks,\nDavid.",
    "created_at": "2015-08-19T12:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334185",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:9'></a>
So then the patch is good to go!
Thanks,
David.



---

archive/issue_comments_334186.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-19T12:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334186",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_334187.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-08-20T17:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334187",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_334188.json:
```json
{
    "body": "<a id='comment:10'></a>\n32-bit linux:\n\n```\nsage -t --long src/sage/graphs/hyperbolicity.pyx\n**********************************************************************\nFile \"src/sage/graphs/hyperbolicity.pyx\", line 1212, in sage.graphs.hyperbolicity.?\nFailed example:\n    for i in xrange(10): # long time\n        G = graphs.RandomBarabasiAlbert(100,2)\n        d1,_,_ = hyperbolicity(G,algorithm='basic')\n        d2,_,_ = hyperbolicity(G,algorithm='CCL')\n        d3,_,_ = hyperbolicity(G,algorithm='CCL+')\n        d4,_,_ = hyperbolicity(G,algorithm='CCL+FA')\n        d5,_,_ = hyperbolicity(G,algorithm='BCCM')\n        l3,_,u3 = hyperbolicity(G,approximation_factor=2)\n        if (not d1==d2==d3==d4==d5) or l3>d1 or u3<d1:\n           print \"That's not good!\"\nExpected nothing\nGot:\n    That's not good!\n    That's not good!\n    That's not good!\n    That's not good!\n    That's not good!\n    That's not good!\n    That's not good!\n    That's not good!\n    That's not good!\n    That's not good!\n**********************************************************************\nFile \"src/sage/graphs/hyperbolicity.pyx\", line 1226, in sage.graphs.hyperbolicity.?\nFailed example:\n    for i in range(10): # long time\n        n = random.randint(2, 20)\n        m = random.randint(0, n*(n-1) / 2)\n        G = graphs.RandomGNM(n, m)\n        for cc in G.connected_components_subgraphs():\n            d1,_,_ = hyperbolicity(cc, algorithm='basic')\n            d2,_,_ = hyperbolicity(cc, algorithm='CCL')\n            d3,_,_ = hyperbolicity(cc, algorithm='CCL+')\n            d4,_,_ = hyperbolicity(cc, algorithm='CCL+FA')\n            d5,_,_ = hyperbolicity(cc, algorithm='BCCM')\n            l3,_,u3 = hyperbolicity(cc, approximation_factor=2)\n            if (not d1==d2==d3==d4==d5) or l3>d1 or u3<d1:\n                print \"Error in graph \", cc.edges()\nExpected nothing\nGot:\n    Error in graph  [(0, 2, None), (0, 5, None), (0, 6, None), (0, 7, None), (1, 2, None), (1, 5, None), (2, 4, None), (2, 7, None), (2, 8, None), (3, 5, None), (3, 6, None), (3, 8, None)]\n    Error in graph  [(0, 1, None), (0, 8, None), (0, 10, None), (0, 11, None), (1, 4, None), (2, 9, None), (2, 10, None), (3, 5, None), (3, 9, None), (3, 10, None), (3, 11, None), (4, 7, None), (4, 9, None), (4, 11, None), (5, 8, None), (6, 8, None), (7, 8, None), (7, 9, None), (7, 10, None)]\n    Error in graph  [(0, 1, None), (0, 3, None), (0, 7, None), (0, 11, None), (1, 2, None), (1, 6, None), (1, 9, None), (1, 10, None), (2, 8, None), (3, 4, None), (3, 5, None), (3, 7, None), (3, 10, None), (4, 5, None), (4, 6, None), (4, 9, None), (4, 10, None), (4, 11, None), (5, 8, None), (5, 9, None), (5, 10, None), (6, 7, None), (8, 11, None)]\n    Error in graph  [(0, 1, None), (0, 2, None), (0, 3, None), (0, 4, None), (0, 5, None), (0, 6, None), (0, 7, None), (0, 9, None), (0, 11, None), (1, 2, None), (1, 3, None), (1, 4, None), (1, 5, None), (1, 6, None), (1, 7, None), (1, 8, None), (1, 9, None), (1, 10, None), (1, 11, None), (2, 3, None), (2, 6, None), (2, 7, None), (2, 8, None), (2, 10, None), (2, 11, None), (3, 4, None), (3, 5, None), (3, 6, None), (3, 7, None), (3, 8, None), (3, 10, None), (3, 11, None), (4, 6, None), (4, 7, None), (4, 9, None), (4, 10, None), (4, 11, None), (5, 6, None), (5, 7, None), (5, 8, None), (5, 9, None), (5, 10, None), (5, 11, None), (6, 8, None), (6, 9, None), (6, 10, None), (6, 11, None), (7, 8, None), (7, 9, None), (7, 11, None), (8, 9, None), (8, 10, None), (8, 11, None), (9, 10, None), (9, 11, None)]\n    Error in graph  [(0, 1, None), (0, 2, None), (0, 3, None), (0, 4, None), (0, 5, None), (0, 9, None), (0, 10, None), (0, 11, None), (0, 12, None), (0, 13, None), (1, 4, None), (1, 6, None), (1, 9, None), (1, 11, None), (1, 12, None), (1, 13, None), (2, 3, None), (2, 5, None), (2, 8, None), (2, 9, None), (2, 12, None), (3, 6, None), (3, 10, None), (3, 12, None), (4, 9, None), (4, 11, None), (4, 12, None), (4, 13, None), (5, 8, None), (5, 9, None), (5, 10, None), (5, 13, None), (6, 7, None), (6, 12, None), (7, 10, None), (7, 12, None), (8, 12, None), (9, 10, None), (9, 12, None), (11, 12, None), (11, 13, None)]\n    Error in graph  [(0, 3, None), (0, 4, None), (0, 6, None), (0, 7, None), (0, 8, None), (1, 10, None), (1, 11, None), (1, 15, None), (2, 5, None), (2, 10, None), (2, 13, None), (2, 14, None), (3, 4, None), (3, 8, None), (3, 12, None), (3, 14, None), (4, 5, None), (4, 9, None), (4, 13, None), (4, 17, None), (5, 10, None), (5, 13, None), (5, 14, None), (5, 17, None), (6, 15, None), (8, 9, None), (9, 13, None), (9, 15, None), (10, 11, None), (10, 12, None), (10, 15, None), (11, 15, None), (11, 17, None), (15, 17, None)]\n    Error in graph  [(0, 2, None), (0, 3, None), (0, 5, None), (0, 7, None), (0, 8, None), (0, 9, None), (0, 10, None), (0, 11, None), (0, 12, None), (0, 14, None), (1, 2, None), (1, 3, None), (1, 4, None), (1, 5, None), (1, 6, None), (1, 7, None), (1, 8, None), (1, 10, None), (1, 11, None), (2, 4, None), (2, 5, None), (2, 6, None), (2, 7, None), (2, 9, None), (2, 13, None), (3, 4, None), (3, 5, None), (3, 6, None), (3, 7, None), (3, 8, None), (3, 9, None), (3, 10, None), (3, 13, None), (4, 6, None), (4, 8, None), (4, 9, None), (4, 10, None), (4, 11, None), (4, 12, None), (4, 14, None), (5, 6, None), (5, 7, None), (5, 9, None), (5, 11, None), (5, 12, None), (5, 13, None), (6, 8, None), (6, 9, None), (6, 10, None), (6, 11, None), (7, 8, None), (7, 9, None), (7, 10, None), (7, 11, None), (7, 12, None), (7, 13, None), (7, 14, None), (8, 9, None), (8, 10, None), (8, 11, None), (8, 12, None), (8, 14, None), (9, 10, None), (9, 13, None), (9, 14, None), (10, 11, None), (10, 12, None), (10, 13, None), (10, 14, None), (11, 12, None), (11, 13, None), (11, 14, None), (12, 14, None), (13, 14, None)]\n    Error in graph  [(0, 1, None), (0, 4, None), (0, 5, None), (0, 7, None), (0, 8, None), (1, 2, None), (1, 3, None), (1, 6, None), (1, 7, None), (1, 8, None), (2, 3, None), (2, 4, None), (2, 6, None), (2, 8, None), (2, 9, None), (3, 5, None), (3, 6, None), (3, 8, None), (3, 9, None), (4, 5, None), (4, 6, None), (4, 7, None), (4, 8, None), (4, 9, None), (5, 7, None), (6, 8, None), (6, 9, None), (7, 9, None), (8, 9, None)]\n**********************************************************************\nFile \"src/sage/graphs/hyperbolicity.pyx\", line 1246, in sage.graphs.hyperbolicity.?\nFailed example:\n    hyperbolicity(G)\nExpected:\n    (1/2, [6, 7, 8, 9], 1/2)\nGot:\n    (0, [], 0)\n**********************************************************************\n1 item had failures:\n   3 of  50 in sage.graphs.hyperbolicity.?\n    [66 tests, 3 failures, 0.41 s]\n```",
    "created_at": "2015-08-20T17:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334188",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:10'></a>
32-bit linux:

```
sage -t --long src/sage/graphs/hyperbolicity.pyx
**********************************************************************
File "src/sage/graphs/hyperbolicity.pyx", line 1212, in sage.graphs.hyperbolicity.?
Failed example:
    for i in xrange(10): # long time
        G = graphs.RandomBarabasiAlbert(100,2)
        d1,_,_ = hyperbolicity(G,algorithm='basic')
        d2,_,_ = hyperbolicity(G,algorithm='CCL')
        d3,_,_ = hyperbolicity(G,algorithm='CCL+')
        d4,_,_ = hyperbolicity(G,algorithm='CCL+FA')
        d5,_,_ = hyperbolicity(G,algorithm='BCCM')
        l3,_,u3 = hyperbolicity(G,approximation_factor=2)
        if (not d1==d2==d3==d4==d5) or l3>d1 or u3<d1:
           print "That's not good!"
Expected nothing
Got:
    That's not good!
    That's not good!
    That's not good!
    That's not good!
    That's not good!
    That's not good!
    That's not good!
    That's not good!
    That's not good!
    That's not good!
**********************************************************************
File "src/sage/graphs/hyperbolicity.pyx", line 1226, in sage.graphs.hyperbolicity.?
Failed example:
    for i in range(10): # long time
        n = random.randint(2, 20)
        m = random.randint(0, n*(n-1) / 2)
        G = graphs.RandomGNM(n, m)
        for cc in G.connected_components_subgraphs():
            d1,_,_ = hyperbolicity(cc, algorithm='basic')
            d2,_,_ = hyperbolicity(cc, algorithm='CCL')
            d3,_,_ = hyperbolicity(cc, algorithm='CCL+')
            d4,_,_ = hyperbolicity(cc, algorithm='CCL+FA')
            d5,_,_ = hyperbolicity(cc, algorithm='BCCM')
            l3,_,u3 = hyperbolicity(cc, approximation_factor=2)
            if (not d1==d2==d3==d4==d5) or l3>d1 or u3<d1:
                print "Error in graph ", cc.edges()
Expected nothing
Got:
    Error in graph  [(0, 2, None), (0, 5, None), (0, 6, None), (0, 7, None), (1, 2, None), (1, 5, None), (2, 4, None), (2, 7, None), (2, 8, None), (3, 5, None), (3, 6, None), (3, 8, None)]
    Error in graph  [(0, 1, None), (0, 8, None), (0, 10, None), (0, 11, None), (1, 4, None), (2, 9, None), (2, 10, None), (3, 5, None), (3, 9, None), (3, 10, None), (3, 11, None), (4, 7, None), (4, 9, None), (4, 11, None), (5, 8, None), (6, 8, None), (7, 8, None), (7, 9, None), (7, 10, None)]
    Error in graph  [(0, 1, None), (0, 3, None), (0, 7, None), (0, 11, None), (1, 2, None), (1, 6, None), (1, 9, None), (1, 10, None), (2, 8, None), (3, 4, None), (3, 5, None), (3, 7, None), (3, 10, None), (4, 5, None), (4, 6, None), (4, 9, None), (4, 10, None), (4, 11, None), (5, 8, None), (5, 9, None), (5, 10, None), (6, 7, None), (8, 11, None)]
    Error in graph  [(0, 1, None), (0, 2, None), (0, 3, None), (0, 4, None), (0, 5, None), (0, 6, None), (0, 7, None), (0, 9, None), (0, 11, None), (1, 2, None), (1, 3, None), (1, 4, None), (1, 5, None), (1, 6, None), (1, 7, None), (1, 8, None), (1, 9, None), (1, 10, None), (1, 11, None), (2, 3, None), (2, 6, None), (2, 7, None), (2, 8, None), (2, 10, None), (2, 11, None), (3, 4, None), (3, 5, None), (3, 6, None), (3, 7, None), (3, 8, None), (3, 10, None), (3, 11, None), (4, 6, None), (4, 7, None), (4, 9, None), (4, 10, None), (4, 11, None), (5, 6, None), (5, 7, None), (5, 8, None), (5, 9, None), (5, 10, None), (5, 11, None), (6, 8, None), (6, 9, None), (6, 10, None), (6, 11, None), (7, 8, None), (7, 9, None), (7, 11, None), (8, 9, None), (8, 10, None), (8, 11, None), (9, 10, None), (9, 11, None)]
    Error in graph  [(0, 1, None), (0, 2, None), (0, 3, None), (0, 4, None), (0, 5, None), (0, 9, None), (0, 10, None), (0, 11, None), (0, 12, None), (0, 13, None), (1, 4, None), (1, 6, None), (1, 9, None), (1, 11, None), (1, 12, None), (1, 13, None), (2, 3, None), (2, 5, None), (2, 8, None), (2, 9, None), (2, 12, None), (3, 6, None), (3, 10, None), (3, 12, None), (4, 9, None), (4, 11, None), (4, 12, None), (4, 13, None), (5, 8, None), (5, 9, None), (5, 10, None), (5, 13, None), (6, 7, None), (6, 12, None), (7, 10, None), (7, 12, None), (8, 12, None), (9, 10, None), (9, 12, None), (11, 12, None), (11, 13, None)]
    Error in graph  [(0, 3, None), (0, 4, None), (0, 6, None), (0, 7, None), (0, 8, None), (1, 10, None), (1, 11, None), (1, 15, None), (2, 5, None), (2, 10, None), (2, 13, None), (2, 14, None), (3, 4, None), (3, 8, None), (3, 12, None), (3, 14, None), (4, 5, None), (4, 9, None), (4, 13, None), (4, 17, None), (5, 10, None), (5, 13, None), (5, 14, None), (5, 17, None), (6, 15, None), (8, 9, None), (9, 13, None), (9, 15, None), (10, 11, None), (10, 12, None), (10, 15, None), (11, 15, None), (11, 17, None), (15, 17, None)]
    Error in graph  [(0, 2, None), (0, 3, None), (0, 5, None), (0, 7, None), (0, 8, None), (0, 9, None), (0, 10, None), (0, 11, None), (0, 12, None), (0, 14, None), (1, 2, None), (1, 3, None), (1, 4, None), (1, 5, None), (1, 6, None), (1, 7, None), (1, 8, None), (1, 10, None), (1, 11, None), (2, 4, None), (2, 5, None), (2, 6, None), (2, 7, None), (2, 9, None), (2, 13, None), (3, 4, None), (3, 5, None), (3, 6, None), (3, 7, None), (3, 8, None), (3, 9, None), (3, 10, None), (3, 13, None), (4, 6, None), (4, 8, None), (4, 9, None), (4, 10, None), (4, 11, None), (4, 12, None), (4, 14, None), (5, 6, None), (5, 7, None), (5, 9, None), (5, 11, None), (5, 12, None), (5, 13, None), (6, 8, None), (6, 9, None), (6, 10, None), (6, 11, None), (7, 8, None), (7, 9, None), (7, 10, None), (7, 11, None), (7, 12, None), (7, 13, None), (7, 14, None), (8, 9, None), (8, 10, None), (8, 11, None), (8, 12, None), (8, 14, None), (9, 10, None), (9, 13, None), (9, 14, None), (10, 11, None), (10, 12, None), (10, 13, None), (10, 14, None), (11, 12, None), (11, 13, None), (11, 14, None), (12, 14, None), (13, 14, None)]
    Error in graph  [(0, 1, None), (0, 4, None), (0, 5, None), (0, 7, None), (0, 8, None), (1, 2, None), (1, 3, None), (1, 6, None), (1, 7, None), (1, 8, None), (2, 3, None), (2, 4, None), (2, 6, None), (2, 8, None), (2, 9, None), (3, 5, None), (3, 6, None), (3, 8, None), (3, 9, None), (4, 5, None), (4, 6, None), (4, 7, None), (4, 8, None), (4, 9, None), (5, 7, None), (6, 8, None), (6, 9, None), (7, 9, None), (8, 9, None)]
**********************************************************************
File "src/sage/graphs/hyperbolicity.pyx", line 1246, in sage.graphs.hyperbolicity.?
Failed example:
    hyperbolicity(G)
Expected:
    (1/2, [6, 7, 8, 9], 1/2)
Got:
    (0, [], 0)
**********************************************************************
1 item had failures:
   3 of  50 in sage.graphs.hyperbolicity.?
    [66 tests, 3 failures, 0.41 s]
```



---

archive/issue_comments_334189.json:
```json
{
    "body": "<a id='comment:11'></a>\nThis is weird. I have tried both on a 64bits and a 32 bits computer all the graphs for which we have the list of edges and my computers reports no error. \nI cannot reproduce the failing example with BA graphs, but a long test on the ticket is successful on my computer.\nI have no clue where the problem may comes from :(\n\nDavid.",
    "created_at": "2015-08-20T23:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334189",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:11'></a>
This is weird. I have tried both on a 64bits and a 32 bits computer all the graphs for which we have the list of edges and my computers reports no error. 
I cannot reproduce the failing example with BA graphs, but a long test on the ticket is successful on my computer.
I have no clue where the problem may comes from :(

David.



---

archive/issue_comments_334190.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[6cd507f](https://github.com/sagemath/sagetrac-mirror/commit/6cd507f5b6d9ee5b4d219f64585cca0c17024092)|`Set h=0 at the beginning`|",
    "created_at": "2015-08-21T18:43:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334190",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                          |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[6cd507f](https://github.com/sagemath/sagetrac-mirror/commit/6cd507f5b6d9ee5b4d219f64585cca0c17024092)|`Set h=0 at the beginning`|



---

archive/issue_comments_334191.json:
```json
{
    "body": "Changing commit from \"9c97e2812e1aa2e34cefebaec06b335a6b4632f7\" to \"6cd507f5b6d9ee5b4d219f64585cca0c17024092\"",
    "created_at": "2015-08-21T18:43:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334191",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9c97e2812e1aa2e34cefebaec06b335a6b4632f7" to "6cd507f5b6d9ee5b4d219f64585cca0c17024092"



---

archive/issue_comments_334192.json:
```json
{
    "body": "<a id='comment:13'></a>\nHello!\n\nThis problem was that I forgot to set h=0 at the beginning... Now it should work!\n\nMichele",
    "created_at": "2015-08-21T20:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334192",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

<a id='comment:13'></a>
Hello!

This problem was that I forgot to set h=0 at the beginning... Now it should work!

Michele



---

archive/issue_comments_334193.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-08-21T20:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334193",
    "user": "https://trac.sagemath.org/admin/accounts/users/borassi"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_334194.json:
```json
{
    "body": "<a id='comment:14'></a>\nThe patch passes all tests on both my mac (64bits) and a 32bits linux PC.\nFor me the patch is ok, but is is certainly better to rebase on 9.3.\nDavid.",
    "created_at": "2015-08-21T20:27:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334194",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:14'></a>
The patch passes all tests on both my mac (64bits) and a 32bits linux PC.
For me the patch is ok, but is is certainly better to rebase on 9.3.
David.



---

archive/issue_comments_334195.json:
```json
{
    "body": "Changing commit from \"6cd507f5b6d9ee5b4d219f64585cca0c17024092\" to \"bc34557c74be36de553b0b940d423f6fe35dd626\"",
    "created_at": "2015-08-22T20:18:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334195",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6cd507f5b6d9ee5b4d219f64585cca0c17024092" to "bc34557c74be36de553b0b940d423f6fe35dd626"



---

archive/issue_comments_334196.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[bc34557](https://github.com/sagemath/sagetrac-mirror/commit/bc34557c74be36de553b0b940d423f6fe35dd626)|`Merged with 6.9 beta3`|",
    "created_at": "2015-08-22T20:18:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334196",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[bc34557](https://github.com/sagemath/sagetrac-mirror/commit/bc34557c74be36de553b0b940d423f6fe35dd626)|`Merged with 6.9 beta3`|



---

archive/issue_comments_334197.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-23T06:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334197",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_334198.json:
```json
{
    "body": "<a id='comment:16'></a>\nGood to go.\nDavid.",
    "created_at": "2015-08-23T06:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334198",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:16'></a>
Good to go.
David.



---

archive/issue_events_068051.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-23T23:31:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19049#event-68051"
}
```



---

archive/issue_comments_334199.json:
```json
{
    "body": "Changing branch from \"u/borassi/new_hyperbolicity_algorithm\" to \"bc34557c74be36de553b0b940d423f6fe35dd626\"",
    "created_at": "2015-08-23T23:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334199",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/borassi/new_hyperbolicity_algorithm" to "bc34557c74be36de553b0b940d423f6fe35dd626"



---

archive/issue_comments_334200.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-23T23:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19049#issuecomment-334200",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
