# Issue 19171: Add a method `divides` to Polynomial

archive/issues_018934.json:
```json
{
    "assignees": [],
    "body": "The generic method `divides` that can be found in `src/sage/structure/element.pyx` uses `quo_rem` (*via* `%`) to test if an element divides another one: `return (x % self) == 0`. \n\nFor polynomials, depending on the implementations, the method `quo_rem` may raise an error if the divisor is not monic (see #16649 for more on this).\n\nThis ticket aims at implementing a method `divides` for the class `Polynomial`, so that it catches the errors in `quo_rem` to return `False` when it is needed.\n\n**Example of a problematic behavior:**\n\n```python\nsage: R.<x> = PolynomialRing(ZZ, implementation=\"FLINT\")\nsage: p = 2*x + 1\nsage: q = R.random_element(10)\nsage: p.divides(q)\nFalse\nsage: R.<x> = PolynomialRing(ZZ, implementation=\"NTL\")\nsage: p = R(p)\nsage: q = R(q)\nsage: p.divides(q)\nTraceback (most recent call last):\n...\nArithmeticError: division not exact in Z[x] (consider coercing to Q[x] first)\n```\n\nDepends on #16649\nDepends on #25277\n\nKeywords: **polynomial, division**\n\nBranch/Commit: **[94c0390](https://github.com/sagemath/sagetrac-mirror/commit/94c0390bbe4c789678ca2b4f3c730dc97420bb3a)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **Bruno Grenet**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19171_\n\n",
    "closed_at": "2018-08-26T09:38:16Z",
    "created_at": "2015-09-09T09:24:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20commutative%20algebra",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add a method `divides` to Polynomial",
    "type": "issue",
    "updated_at": "2018-08-26T09:38:16Z",
    "url": "https://github.com/sagemath/sage/issues/19171",
    "user": "https://github.com/bgrenet"
}
```
The generic method `divides` that can be found in `src/sage/structure/element.pyx` uses `quo_rem` (*via* `%`) to test if an element divides another one: `return (x % self) == 0`. 

For polynomials, depending on the implementations, the method `quo_rem` may raise an error if the divisor is not monic (see #16649 for more on this).

This ticket aims at implementing a method `divides` for the class `Polynomial`, so that it catches the errors in `quo_rem` to return `False` when it is needed.

**Example of a problematic behavior:**

```python
sage: R.<x> = PolynomialRing(ZZ, implementation="FLINT")
sage: p = 2*x + 1
sage: q = R.random_element(10)
sage: p.divides(q)
False
sage: R.<x> = PolynomialRing(ZZ, implementation="NTL")
sage: p = R(p)
sage: q = R(q)
sage: p.divides(q)
Traceback (most recent call last):
...
ArithmeticError: division not exact in Z[x] (consider coercing to Q[x] first)
```

Depends on #16649
Depends on #25277

Keywords: **polynomial, division**

Branch/Commit: **[94c0390](https://github.com/sagemath/sagetrac-mirror/commit/94c0390bbe4c789678ca2b4f3c730dc97420bb3a)**

Reviewer: **Vincent Delecroix**

Author: **Bruno Grenet**

_Issue created by migration from https://trac.sagemath.org/ticket/19171_





---

archive/issue_events_254380.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-09-09T09:24:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254380"
}
```



---

archive/issue_events_254381.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-09-09T09:24:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "component: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254381"
}
```



---

archive/issue_events_254382.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-09-09T09:24:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254382"
}
```



---

archive/issue_events_254383.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-09-09T09:24:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254383"
}
```



---

archive/issue_comments_273872.json:
```json
{
    "body": "Dependencies: **16649**",
    "created_at": "2015-09-09T09:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273872",
    "user": "https://github.com/bgrenet"
}
```

Dependencies: **16649**



---

archive/issue_comments_273873.json:
```json
{
    "body": "Changed dependencies from **16649** to **#16649**",
    "created_at": "2015-09-09T09:24:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273873",
    "user": "https://github.com/bgrenet"
}
```

Changed dependencies from **16649** to **#16649**



---

archive/issue_comments_273874.json:
```json
{
    "body": "Branch: **[u/bruno/t19171_divides_poly](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/t19171_divides_poly)**",
    "created_at": "2015-09-09T11:48:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273874",
    "user": "https://github.com/bgrenet"
}
```

Branch: **[u/bruno/t19171_divides_poly](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/t19171_divides_poly)**



---

archive/issue_events_254384.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2015-09-09T11:48:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254384"
}
```



---

archive/issue_comments_273875.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98b7ca12cfe9335f9c871eda34ff9dc2ce03d3cf\">98b7ca1</a></td><td><code>Rebased on 6.9beta1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d0da248d4151d354a47e0a407aa3530dd008e77\">6d0da24</a></td><td><code>One last zero_element removed + correct one doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbfb5186d55ad1682014ffc92907fa1af9fc488f\">dbfb518</a></td><td><code>Remove useless colons</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/331c7133714180023a7911c02b6bffd919511a68\">331c713</a></td><td><code>#19171: New method divides</code></td></tr></table>\n",
    "created_at": "2015-09-09T11:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273875",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:4" align="right">Comment 4</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98b7ca12cfe9335f9c871eda34ff9dc2ce03d3cf">98b7ca1</a></td><td><code>Rebased on 6.9beta1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d0da248d4151d354a47e0a407aa3530dd008e77">6d0da24</a></td><td><code>One last zero_element removed + correct one doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbfb5186d55ad1682014ffc92907fa1af9fc488f">dbfb518</a></td><td><code>Remove useless colons</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/331c7133714180023a7911c02b6bffd919511a68">331c713</a></td><td><code>#19171: New method divides</code></td></tr></table>




---

archive/issue_comments_273876.json:
```json
{
    "body": "Commit: **[331c713](https://github.com/sagemath/sagetrac-mirror/commit/331c7133714180023a7911c02b6bffd919511a68)**",
    "created_at": "2015-09-09T11:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273876",
    "user": "https://github.com/bgrenet"
}
```

Commit: **[331c713](https://github.com/sagemath/sagetrac-mirror/commit/331c7133714180023a7911c02b6bffd919511a68)**



---

archive/issue_comments_273877.json:
```json
{
    "body": "Changed commit from **[331c713](https://github.com/sagemath/sagetrac-mirror/commit/331c7133714180023a7911c02b6bffd919511a68)** to **[27040e0](https://github.com/sagemath/sagetrac-mirror/commit/27040e075be1f5da39bd08bb1d0d9774978bd83b)**",
    "created_at": "2016-05-22T16:09:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273877",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[331c713](https://github.com/sagemath/sagetrac-mirror/commit/331c7133714180023a7911c02b6bffd919511a68)** to **[27040e0](https://github.com/sagemath/sagetrac-mirror/commit/27040e075be1f5da39bd08bb1d0d9774978bd83b)**



---

archive/issue_comments_273878.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27040e075be1f5da39bd08bb1d0d9774978bd83b\">27040e0</a></td><td><code>#19171: New method divides</code></td></tr></table>\n",
    "created_at": "2016-05-22T16:09:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273878",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27040e075be1f5da39bd08bb1d0d9774978bd83b">27040e0</a></td><td><code>#19171: New method divides</code></td></tr></table>




---

archive/issue_events_254385.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2016-05-22T16:12:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20basic%20arithmetic",
    "label_color": "0000ff",
    "label_name": "component: basic arithmetic",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254385"
}
```



---

archive/issue_events_254386.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2016-05-22T16:12:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20commutative%20algebra",
    "label_color": "0000ff",
    "label_name": "component: commutative algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254386"
}
```



---

archive/issue_events_254387.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2016-05-22T16:12:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254387"
}
```



---

archive/issue_events_254388.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2016-05-22T16:12:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254388"
}
```



---

archive/issue_events_254389.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2016-05-22T16:12:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254389"
}
```



---

archive/issue_events_254390.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2016-05-22T16:12:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254390"
}
```



---

archive/issue_comments_273879.json:
```json
{
    "body": "Changed commit from **[27040e0](https://github.com/sagemath/sagetrac-mirror/commit/27040e075be1f5da39bd08bb1d0d9774978bd83b)** to **[9a189c7](https://github.com/sagemath/sagetrac-mirror/commit/9a189c7bdc29953d6ada184f7b0db503c6da4677)**",
    "created_at": "2016-05-23T09:38:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273879",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[27040e0](https://github.com/sagemath/sagetrac-mirror/commit/27040e075be1f5da39bd08bb1d0d9774978bd83b)** to **[9a189c7](https://github.com/sagemath/sagetrac-mirror/commit/9a189c7bdc29953d6ada184f7b0db503c6da4677)**



---

archive/issue_comments_273880.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a189c7bdc29953d6ada184f7b0db503c6da4677\">9a189c7</a></td><td><code>#19171: New method divides</code></td></tr></table>\n",
    "created_at": "2016-05-23T09:38:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273880",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a189c7bdc29953d6ada184f7b0db503c6da4677">9a189c7</a></td><td><code>#19171: New method divides</code></td></tr></table>




---

archive/issue_comments_273881.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nI added some noise with two forced pushes (due to some mistake I made), but there is really only one commit! Now the ticket passes the tests (as far as I can tell) and is very ready for review!",
    "created_at": "2016-05-23T09:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273881",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:8" align="right">Comment 8</div>

I added some noise with two forced pushes (due to some mistake I made), but there is really only one commit! Now the ticket passes the tests (as far as I can tell) and is very ready for review!



---

archive/issue_comments_273882.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nYou would better use `coerce_binop` from `sage.structure.element` rather than a manually handled coercion.\n\nWhy is this code specific to polynomials?",
    "created_at": "2016-07-11T18:56:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273882",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">Comment 9</div>

You would better use `coerce_binop` from `sage.structure.element` rather than a manually handled coercion.

Why is this code specific to polynomials?



---

archive/issue_comments_273883.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2016-07-11T18:56:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273883",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_events_254391.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-11T18:56:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254391"
}
```



---

archive/issue_events_254392.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-11T18:56:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254392"
}
```



---

archive/issue_comments_273884.json:
```json
{
    "body": "Changed commit from **[9a189c7](https://github.com/sagemath/sagetrac-mirror/commit/9a189c7bdc29953d6ada184f7b0db503c6da4677)** to **[ac43c02](https://github.com/sagemath/sagetrac-mirror/commit/ac43c02c86eb8884bc3d7fa4013f78aef1e34803)**",
    "created_at": "2016-07-18T13:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273884",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9a189c7](https://github.com/sagemath/sagetrac-mirror/commit/9a189c7bdc29953d6ada184f7b0db503c6da4677)** to **[ac43c02](https://github.com/sagemath/sagetrac-mirror/commit/ac43c02c86eb8884bc3d7fa4013f78aef1e34803)**



---

archive/issue_comments_273885.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d03a75e648111aa38b0059e571f9536b6f5c2152\">d03a75e</a></td><td><code>#19171: New method divides</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac43c02c86eb8884bc3d7fa4013f78aef1e34803\">ac43c02</a></td><td><code>19171: Use coerce_binop</code></td></tr></table>\n",
    "created_at": "2016-07-18T13:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273885",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11" align="right">Comment 11</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d03a75e648111aa38b0059e571f9536b6f5c2152">d03a75e</a></td><td><code>#19171: New method divides</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac43c02c86eb8884bc3d7fa4013f78aef1e34803">ac43c02</a></td><td><code>19171: Use coerce_binop</code></td></tr></table>




---

archive/issue_events_254393.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2016-07-18T16:49:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254393"
}
```



---

archive/issue_events_254394.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2016-07-18T16:49:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254394"
}
```



---

archive/issue_comments_273886.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@videlec](#comment%3A9):\n> You would better use `coerce_binop` from `sage.structure.element` rather than a manually handled coercion.\n\nDone.\n\n> Why is this code specific to polynomials?\n\nI tried to explain the reasons in the description: For polynomials over (say) `ZZ`, the euclidean division is not well defined. The problem occurs when the leading coefficient is not invertible. There are several ways to deal with this problem, and different implementations in Sage use different conventions (see #16649 for pointers on this). As a result, testing divisibility by invoking `self % p == 0` can lead to `ArithmeticError` for polynomials: But when this exception is raised, we know that `self` does not divide `p`.\u00b9 That's why I decided to add this new method which only differs from the generic one by the fact it catches the exception. \n\nI could have changed the generic method instead to catch an `ArithmeticError` and return `False` in such case, but though I am pretty confident that it makes sense for polynomials, I am much less confident concerning other rings.\n\n\u00b9 \"We know\" is maybe a too strong assumption. In #16649, I did changes that ensure that the assumption holds for all *current implementations* of polynomials in Sage. (This was not the case before.) Yet, future implementations may break this rule. This may imply that we shouldn't simply rely on `quo_rem` to test divisibility.",
    "created_at": "2016-07-18T16:49:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273886",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@videlec](#comment%3A9):
> You would better use `coerce_binop` from `sage.structure.element` rather than a manually handled coercion.

Done.

> Why is this code specific to polynomials?

I tried to explain the reasons in the description: For polynomials over (say) `ZZ`, the euclidean division is not well defined. The problem occurs when the leading coefficient is not invertible. There are several ways to deal with this problem, and different implementations in Sage use different conventions (see #16649 for pointers on this). As a result, testing divisibility by invoking `self % p == 0` can lead to `ArithmeticError` for polynomials: But when this exception is raised, we know that `self` does not divide `p`.¹ That's why I decided to add this new method which only differs from the generic one by the fact it catches the exception. 

I could have changed the generic method instead to catch an `ArithmeticError` and return `False` in such case, but though I am pretty confident that it makes sense for polynomials, I am much less confident concerning other rings.

¹ "We know" is maybe a too strong assumption. In #16649, I did changes that ensure that the assumption holds for all *current implementations* of polynomials in Sage. (This was not the case before.) Yet, future implementations may break this rule. This may imply that we shouldn't simply rely on `quo_rem` to test divisibility.



---

archive/issue_comments_273887.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nSince one is always a unit the `if self.is_one(): return True` would better be inside the block `except NotImplementedError:`.\n\nPlease add a more exotic example like `GF(4)['x']['y']`.",
    "created_at": "2016-07-25T01:23:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273887",
    "user": "https://github.com/videlec"
}
```

<div id="comment:13" align="right">Comment 13</div>

Since one is always a unit the `if self.is_one(): return True` would better be inside the block `except NotImplementedError:`.

Please add a more exotic example like `GF(4)['x']['y']`.



---

archive/issue_events_254395.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-25T01:23:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254395"
}
```



---

archive/issue_events_254396.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-25T01:23:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254396"
}
```



---

archive/issue_comments_273888.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nAnd why not using `quo_rem` instead of catching a potential `ArithmeticError`?",
    "created_at": "2016-07-25T01:25:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273888",
    "user": "https://github.com/videlec"
}
```

<div id="comment:14" align="right">Comment 14</div>

And why not using `quo_rem` instead of catching a potential `ArithmeticError`?



---

archive/issue_comments_273889.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nI am not sure I fully understand your latest comments:  \n\n> Since one is always a unit the `if self.is_one(): return True` would better be inside the block `except NotImplementedError:`.\n\nDo you mean adding a `try: ... except NotImplementedError:` construction? Because if I add this test say right below the test `if self.is_unit(): return True`, an exception will be raised in the cases where `is_unit` is not implemented but `is_one` is.\n\n\n\n> And why not using `quo_rem` instead of catching a potential `ArithmeticError`?\n\nUsing `p % self` is really the same as ` p.quo_rem(self)[1] ` so I do not see the difference.",
    "created_at": "2016-07-26T07:00:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273889",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:15" align="right">Comment 15</div>

I am not sure I fully understand your latest comments:  

> Since one is always a unit the `if self.is_one(): return True` would better be inside the block `except NotImplementedError:`.

Do you mean adding a `try: ... except NotImplementedError:` construction? Because if I add this test say right below the test `if self.is_unit(): return True`, an exception will be raised in the cases where `is_unit` is not implemented but `is_one` is.



> And why not using `quo_rem` instead of catching a potential `ArithmeticError`?

Using `p % self` is really the same as ` p.quo_rem(self)[1] ` so I do not see the difference.



---

archive/issue_comments_273890.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nReplying to [@bgrenet](#comment%3A15):\n> I am not sure I fully understand your latest comments:  \n> \n> > Since one is always a unit the `if self.is_one(): return True` would better be inside the block `except NotImplementedError:`.\n\n> \n> Do you mean adding a `try: ... except NotImplementedError:` construction? Because if I add this test say right below the test `if self.is_unit(): return True`, an exception will be raised in the cases where `is_unit` is not implemented but `is_one` is.\n\nI meant\n\n```\ntry:\n    if self.is_unit(): return True   # units divide everything\nexcept NotImplementedError:\n    if self.is_one(): return True    # if is_unit is not implemented\n```\n\n> \n> > And why not using `quo_rem` instead of catching a potential `ArithmeticError`?\n\n> \n> Using `p % self` is really the same as ` p.quo_rem(self)[1] ` so I do not see the difference.\n\nNot exactly. NTL makes a distinction... and you should actually use `pseudo_quo_rem` when it is there:\n\n```\nsage: R.<x> = PolynomialRing(ZZ, implementation=\"NTL\")\nsage: p = 2*x + 1\nsage: q = R.random_element(10)\nsage: p.quo_rem(q)\nTraceback (most recent call last):\n...\nArithmeticError: division not exact in Z[x] (consider coercing to Q[x] first)\nsage: p.pseudo_quo_rem(q)\n(0, 2*x + 1)\n```",
    "created_at": "2016-07-26T16:22:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273890",
    "user": "https://github.com/videlec"
}
```

<div id="comment:16" align="right">Comment 16</div>

Replying to [@bgrenet](#comment%3A15):
> I am not sure I fully understand your latest comments:  
> 
> > Since one is always a unit the `if self.is_one(): return True` would better be inside the block `except NotImplementedError:`.

> 
> Do you mean adding a `try: ... except NotImplementedError:` construction? Because if I add this test say right below the test `if self.is_unit(): return True`, an exception will be raised in the cases where `is_unit` is not implemented but `is_one` is.

I meant

```
try:
    if self.is_unit(): return True   # units divide everything
except NotImplementedError:
    if self.is_one(): return True    # if is_unit is not implemented
```

> 
> > And why not using `quo_rem` instead of catching a potential `ArithmeticError`?

> 
> Using `p % self` is really the same as ` p.quo_rem(self)[1] ` so I do not see the difference.

Not exactly. NTL makes a distinction... and you should actually use `pseudo_quo_rem` when it is there:

```
sage: R.<x> = PolynomialRing(ZZ, implementation="NTL")
sage: p = 2*x + 1
sage: q = R.random_element(10)
sage: p.quo_rem(q)
Traceback (most recent call last):
...
ArithmeticError: division not exact in Z[x] (consider coercing to Q[x] first)
sage: p.pseudo_quo_rem(q)
(0, 2*x + 1)
```



---

archive/issue_comments_273891.json:
```json
{
    "body": "Changed commit from **[ac43c02](https://github.com/sagemath/sagetrac-mirror/commit/ac43c02c86eb8884bc3d7fa4013f78aef1e34803)** to **[0906dfd](https://github.com/sagemath/sagetrac-mirror/commit/0906dfd9801e14acab59d28999fe1778d3cc018d)**",
    "created_at": "2016-07-27T09:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273891",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ac43c02](https://github.com/sagemath/sagetrac-mirror/commit/ac43c02c86eb8884bc3d7fa4013f78aef1e34803)** to **[0906dfd](https://github.com/sagemath/sagetrac-mirror/commit/0906dfd9801e14acab59d28999fe1778d3cc018d)**



---

archive/issue_comments_273892.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0906dfd9801e14acab59d28999fe1778d3cc018d\">0906dfd</a></td><td><code>19171: Add more involved example + move a line</code></td></tr></table>\n",
    "created_at": "2016-07-27T09:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273892",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17" align="right">Comment 17</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0906dfd9801e14acab59d28999fe1778d3cc018d">0906dfd</a></td><td><code>19171: Add more involved example + move a line</code></td></tr></table>




---

archive/issue_events_254397.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2016-07-27T09:30:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254397"
}
```



---

archive/issue_events_254398.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2016-07-27T09:30:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254398"
}
```



---

archive/issue_comments_273893.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@videlec](#comment%3A16):\n> `...`\n\n> I meant\n\n> `...`\n\nDone.\n\n> > \n> > > And why not using `quo_rem` instead of catching a potential `ArithmeticError`?\n\n> > \n> > Using `p % self` is really the same as ` p.quo_rem(self)[1] ` so I do not see the difference.\n\n> \n> Not exactly. NTL makes a distinction... and you should actually use `pseudo_quo_rem` when it is there:\n> \n> ```\n> sage: R.<x> = PolynomialRing(ZZ, implementation=\"NTL\")\n> sage: p = 2*x + 1\n> sage: q = R.random_element(10)\n> sage: p.quo_rem(q)\n> Traceback (most recent call last):\n> ...\n> ArithmeticError: division not exact in Z[x] (consider coercing to Q[x] first)\n> sage: p.pseudo_quo_rem(q)\n> (0, 2*x + 1)\n> ```\n\nNot done: I do not think `pseudo_quo_rem` is applicable, because of the following:\n\n```python\nsage: R.<x> = ZZ[] # works the same with NTL\nsage: p = x^2 - 1\nsage: q = 2*x + 2\nsage: p.pseudo_quo_rem(q)\n(2*x - 2, 0)\n```\nSo, the remainder in `p.pseudo_quo_rem(q)` can be zero even if `q` does not divide `p`.\n\n\nP.S.: I won't be able to work on this ticket until mid-august.",
    "created_at": "2016-07-27T09:30:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273893",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@videlec](#comment%3A16):
> `...`

> I meant

> `...`

Done.

> > 
> > > And why not using `quo_rem` instead of catching a potential `ArithmeticError`?

> > 
> > Using `p % self` is really the same as ` p.quo_rem(self)[1] ` so I do not see the difference.

> 
> Not exactly. NTL makes a distinction... and you should actually use `pseudo_quo_rem` when it is there:
> 
> ```
> sage: R.<x> = PolynomialRing(ZZ, implementation="NTL")
> sage: p = 2*x + 1
> sage: q = R.random_element(10)
> sage: p.quo_rem(q)
> Traceback (most recent call last):
> ...
> ArithmeticError: division not exact in Z[x] (consider coercing to Q[x] first)
> sage: p.pseudo_quo_rem(q)
> (0, 2*x + 1)
> ```

Not done: I do not think `pseudo_quo_rem` is applicable, because of the following:

```python
sage: R.<x> = ZZ[] # works the same with NTL
sage: p = x^2 - 1
sage: q = 2*x + 2
sage: p.pseudo_quo_rem(q)
(2*x - 2, 0)
```
So, the remainder in `p.pseudo_quo_rem(q)` can be zero even if `q` does not divide `p`.


P.S.: I won't be able to work on this ticket until mid-august.



---

archive/issue_comments_273894.json:
```json
{
    "body": "Work Issues: **does not apply**",
    "created_at": "2016-12-16T04:52:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273894",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **does not apply**



---

archive/issue_events_254399.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-12-16T04:52:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254399"
}
```



---

archive/issue_events_254400.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-12-16T04:52:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254400"
}
```



---

archive/issue_comments_273895.json:
```json
{
    "body": "Changed commit from **[0906dfd](https://github.com/sagemath/sagetrac-mirror/commit/0906dfd9801e14acab59d28999fe1778d3cc018d)** to **[f85a7e0](https://github.com/sagemath/sagetrac-mirror/commit/f85a7e06a7591101005f5e61fff674033344e103)**",
    "created_at": "2017-01-19T14:53:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273895",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0906dfd](https://github.com/sagemath/sagetrac-mirror/commit/0906dfd9801e14acab59d28999fe1778d3cc018d)** to **[f85a7e0](https://github.com/sagemath/sagetrac-mirror/commit/f85a7e06a7591101005f5e61fff674033344e103)**



---

archive/issue_comments_273896.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f85a7e06a7591101005f5e61fff674033344e103\">f85a7e0</a></td><td><code>19171: conflict resolution</code></td></tr></table>\n",
    "created_at": "2017-01-19T14:53:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273896",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20" align="right">Comment 20</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f85a7e06a7591101005f5e61fff674033344e103">f85a7e0</a></td><td><code>19171: conflict resolution</code></td></tr></table>




---

archive/issue_events_254401.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2017-01-19T14:54:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254401"
}
```



---

archive/issue_events_254402.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2017-01-19T14:54:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254402"
}
```



---

archive/issue_events_254403.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-21T02:07:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254403"
}
```



---

archive/issue_events_254404.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-21T02:07:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254404"
}
```



---

archive/issue_events_254405.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-21T02:07:22Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254405"
}
```



---

archive/issue_events_254406.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-21T02:07:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254406"
}
```



---

archive/issue_comments_273897.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nNeeds rebasing.",
    "created_at": "2017-05-21T02:07:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273897",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">Comment 22</div>

Needs rebasing.



---

archive/issue_comments_273898.json:
```json
{
    "body": "Changed commit from **[f85a7e0](https://github.com/sagemath/sagetrac-mirror/commit/f85a7e06a7591101005f5e61fff674033344e103)** to **[a0a5bad](https://github.com/sagemath/sagetrac-mirror/commit/a0a5badfad9472555eb9b66776ae99ba99416047)**",
    "created_at": "2017-07-25T13:12:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273898",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f85a7e0](https://github.com/sagemath/sagetrac-mirror/commit/f85a7e06a7591101005f5e61fff674033344e103)** to **[a0a5bad](https://github.com/sagemath/sagetrac-mirror/commit/a0a5badfad9472555eb9b66776ae99ba99416047)**



---

archive/issue_comments_273899.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04b0032caff9204e2c3f7529ae6e56b8a98a2b1e\">04b0032</a></td><td><code>Merge branch 'develop' into 19171_divides_poly</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0a5badfad9472555eb9b66776ae99ba99416047\">a0a5bad</a></td><td><code>Merge branch 'u/bruno/t19171_divides_poly' of git://trac.sagemath.org/sage into 19171_divides_poly</code></td></tr></table>\n",
    "created_at": "2017-07-25T13:12:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273899",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23" align="right">Comment 23</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04b0032caff9204e2c3f7529ae6e56b8a98a2b1e">04b0032</a></td><td><code>Merge branch 'develop' into 19171_divides_poly</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0a5badfad9472555eb9b66776ae99ba99416047">a0a5bad</a></td><td><code>Merge branch 'u/bruno/t19171_divides_poly' of git://trac.sagemath.org/sage into 19171_divides_poly</code></td></tr></table>




---

archive/issue_events_254407.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2017-07-25T13:12:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254407"
}
```



---

archive/issue_events_254408.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2017-07-25T13:12:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254408"
}
```



---

archive/issue_comments_273900.json:
```json
{
    "body": "Changed work issues from **does not apply** to none",
    "created_at": "2017-07-27T11:30:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273900",
    "user": "https://github.com/mezzarobba"
}
```

Changed work issues from **does not apply** to none



---

archive/issue_comments_273901.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nHi,\n\nThis looks reasonable to me; I would be willing to set the ticket to positive review. Vincent, do you agree?",
    "created_at": "2017-07-27T11:30:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273901",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:25" align="right">Comment 25</div>

Hi,

This looks reasonable to me; I would be willing to set the ticket to positive review. Vincent, do you agree?



---

archive/issue_comments_273902.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nwhy `return (p % self) == 0` instead of `return (p % self).is_zero()`?",
    "created_at": "2017-07-27T13:21:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273902",
    "user": "https://github.com/videlec"
}
```

<div id="comment:26" align="right">Comment 26</div>

why `return (p % self) == 0` instead of `return (p % self).is_zero()`?



---

archive/issue_comments_273903.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nHow can you be sure that the following\n\n```\n        except ArithmeticError:\n            return False                     # if division is not exact\n```\nonly catches non exact divisions?",
    "created_at": "2017-07-27T13:22:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273903",
    "user": "https://github.com/videlec"
}
```

<div id="comment:27" align="right">Comment 27</div>

How can you be sure that the following

```
        except ArithmeticError:
            return False                     # if division is not exact
```
only catches non exact divisions?



---

archive/issue_comments_273904.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nCould you add check on more exotic rings like `Zmod(6)['x']`, `ZZ['x']['y']`, `GF(2)['x,y']['z']`?",
    "created_at": "2017-07-27T13:23:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273904",
    "user": "https://github.com/videlec"
}
```

<div id="comment:28" align="right">Comment 28</div>

Could you add check on more exotic rings like `Zmod(6)['x']`, `ZZ['x']['y']`, `GF(2)['x,y']['z']`?



---

archive/issue_comments_273905.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nReplying to [@videlec](#comment%3A27):\n> How can you be sure that the following\n> \n> ```\n>         except ArithmeticError:\n>             return False                     # if division is not exact\n> ```\n> only catches non exact divisions?\n\nBTW, each except will cost a non trivial amount of time. Isn't there a fastest way to see if the division is exact? (eg calling `quo_rem`)",
    "created_at": "2017-07-27T13:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273905",
    "user": "https://github.com/videlec"
}
```

<div id="comment:29" align="right">Comment 29</div>

Replying to [@videlec](#comment%3A27):
> How can you be sure that the following
> 
> ```
>         except ArithmeticError:
>             return False                     # if division is not exact
> ```
> only catches non exact divisions?

BTW, each except will cost a non trivial amount of time. Isn't there a fastest way to see if the division is exact? (eg calling `quo_rem`)



---

archive/issue_events_254409.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-07-27T13:24:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254409"
}
```



---

archive/issue_events_254410.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-07-27T13:24:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254410"
}
```



---

archive/issue_comments_273906.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nFWIW, I agree that using `is_zero()` would be better, but I don't think it matters enough for blocking the ticket.\nConsidering that an `ArithmeticError` implies that there is no divisibility looks very reasonable to me, though testing divisibility of the leading coefficients would likely be faster.",
    "created_at": "2017-07-27T13:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273906",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:31" align="right">Comment 31</div>

FWIW, I agree that using `is_zero()` would be better, but I don't think it matters enough for blocking the ticket.
Considering that an `ArithmeticError` implies that there is no divisibility looks very reasonable to me, though testing divisibility of the leading coefficients would likely be faster.



---

archive/issue_comments_273907.json:
```json
{
    "body": "Changed commit from **[a0a5bad](https://github.com/sagemath/sagetrac-mirror/commit/a0a5badfad9472555eb9b66776ae99ba99416047)** to **[5bac984](https://github.com/sagemath/sagetrac-mirror/commit/5bac9845a140afc3a913ac2afbeac9346387aabd)**",
    "created_at": "2017-11-23T15:15:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273907",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a0a5bad](https://github.com/sagemath/sagetrac-mirror/commit/a0a5badfad9472555eb9b66776ae99ba99416047)** to **[5bac984](https://github.com/sagemath/sagetrac-mirror/commit/5bac9845a140afc3a913ac2afbeac9346387aabd)**



---

archive/issue_comments_273908.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f350d87fadc562a22029c1ca2e832c6dd796e811\">f350d87</a></td><td><code>Merge branch 'u/bruno/t19171_divides_poly' of git://trac.sagemath.org/sage into t/19171/divides</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bcc45349f014e47603f4fb906dcdc193f92f5133\">bcc4534</a></td><td><code>19171: Add leading coeff test + change '== 0' to is_zero</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bac9845a140afc3a913ac2afbeac9346387aabd\">5bac984</a></td><td><code>19171: Add tests</code></td></tr></table>\n",
    "created_at": "2017-11-23T15:15:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273908",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32" align="right">Comment 32</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f350d87fadc562a22029c1ca2e832c6dd796e811">f350d87</a></td><td><code>Merge branch 'u/bruno/t19171_divides_poly' of git://trac.sagemath.org/sage into t/19171/divides</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bcc45349f014e47603f4fb906dcdc193f92f5133">bcc4534</a></td><td><code>19171: Add leading coeff test + change '== 0' to is_zero</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bac9845a140afc3a913ac2afbeac9346387aabd">5bac984</a></td><td><code>19171: Add tests</code></td></tr></table>




---

archive/issue_events_254411.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2017-11-23T15:43:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254411"
}
```



---

archive/issue_events_254412.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2017-11-23T15:43:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254412"
}
```



---

archive/issue_comments_273909.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nI've pushed my branch but some doctest fails. Actually I need some advice.\n\n* The `try... except ArithmeticError` is needed for `PolynomialRing(ZZ, 'x', implementation = 'NTL')` since in this implementation `quo_rem` raises an exception for non-divisible polynomials, even when the leading coefficients divide each other. See [ticket:16649] for details.\n\n* Contrary to what my (broken) commit message might indicate, I did not add a leading coefficient test that would fasten the computation. The problem comes from the `Zmod(6)['x']` example: In `Zmod(6)`, computing the remainder raise exceptions. (Test for instance `Zmod(6)(1) % Zmod(6)(4)`.)\n\n* As mentioned before, there is still a failing doctest, also due to `Zmod(6)['x']`. We face the same kind problem as before with the 'NTL' implementation of Z[x]: Computing `quo_rem` in `Zmod(6)['x']` is only possible if the leading coefficient of the divisor is a unit (an exception is raised otherwise). The exception is not caught since contrary to the case of `ZZ['x']`, the raised exception is a `ValueError`.\n\nI am not sure to see what the best solutions are to make it work. Some possibilities:\n\n* We make this ticket depend on another one that unifies all the `quo_rem` implementations for polynomials over non-field, so that we can base this function on the common behavior of these methods.\u00b9\n* We make this ticket depend on another one with more limited goals, such as unifying the errors to `ArithmeticError`.\n* We add some specific code, to catch the `ValueError`.\n\nWhat do you think? \n\nThe first solution seem to me unreachable given the endless discussions about the behavior of `quo_rem` (links in [ticket:16649]). The second one is maybe more doable. The third one is probably the faster to close this ticket but I am not sure whether there is a good way to implement it.\n\n\u00b9 More generally, there should exist a ticket for unifying the diverse behaviors of polynomial rings, but 1. it is clearly off-topic this ticket and 2. given the difficulty with unifying \"content\" in another ticket, I am not at all ready to go for this!",
    "created_at": "2017-11-23T15:43:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273909",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:33" align="right">Comment 33</div>

I've pushed my branch but some doctest fails. Actually I need some advice.

* The `try... except ArithmeticError` is needed for `PolynomialRing(ZZ, 'x', implementation = 'NTL')` since in this implementation `quo_rem` raises an exception for non-divisible polynomials, even when the leading coefficients divide each other. See [ticket:16649] for details.

* Contrary to what my (broken) commit message might indicate, I did not add a leading coefficient test that would fasten the computation. The problem comes from the `Zmod(6)['x']` example: In `Zmod(6)`, computing the remainder raise exceptions. (Test for instance `Zmod(6)(1) % Zmod(6)(4)`.)

* As mentioned before, there is still a failing doctest, also due to `Zmod(6)['x']`. We face the same kind problem as before with the 'NTL' implementation of Z[x]: Computing `quo_rem` in `Zmod(6)['x']` is only possible if the leading coefficient of the divisor is a unit (an exception is raised otherwise). The exception is not caught since contrary to the case of `ZZ['x']`, the raised exception is a `ValueError`.

I am not sure to see what the best solutions are to make it work. Some possibilities:

* We make this ticket depend on another one that unifies all the `quo_rem` implementations for polynomials over non-field, so that we can base this function on the common behavior of these methods.¹
* We make this ticket depend on another one with more limited goals, such as unifying the errors to `ArithmeticError`.
* We add some specific code, to catch the `ValueError`.

What do you think? 

The first solution seem to me unreachable given the endless discussions about the behavior of `quo_rem` (links in [ticket:16649]). The second one is maybe more doable. The third one is probably the faster to close this ticket but I am not sure whether there is a good way to implement it.

¹ More generally, there should exist a ticket for unifying the diverse behaviors of polynomial rings, but 1. it is clearly off-topic this ticket and 2. given the difficulty with unifying "content" in another ticket, I am not at all ready to go for this!



---

archive/issue_comments_273910.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nAn `ArithmeticError` in `%` does not imply not divisible as shown with\n\n```\nsage: R.<x> = Zmod(6)[]\nsage: S.<z> = R[]\nsage: p = x*z + 1\nsage: q = z + 1\nsage: (p*q) % p\nTraceback (most recent call last):\n...\nArithmeticError: Division non exact (consider coercing to polynomials over the fraction field)\n```\nThe reason being that\n\n```\nsage: Z6 = Zmod(6)\nsage: a = Z6(4)\nsage: b = Z6(2)\nsage: b.divides(a)\nTrue\nsage: a / b\nTraceback (most recent call last):\n...\nZeroDivisionError: Inverse does not exist.\n```\nFrom there three possibilities:\n- \"fix\" divisions in integer mod ring `Zmod` so that `a / b` above does work. Though in\n  this situation there are several possible answers as `4 = 2 x 5 = 2 x 2 mod 6`.\n- restrict `divides` on polynomial whose base rings are integral domains (so that division\n  is well defined: quotient is unique when it exists).",
    "created_at": "2018-05-01T15:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273910",
    "user": "https://github.com/videlec"
}
```

<div id="comment:34" align="right">Comment 34</div>

An `ArithmeticError` in `%` does not imply not divisible as shown with

```
sage: R.<x> = Zmod(6)[]
sage: S.<z> = R[]
sage: p = x*z + 1
sage: q = z + 1
sage: (p*q) % p
Traceback (most recent call last):
...
ArithmeticError: Division non exact (consider coercing to polynomials over the fraction field)
```
The reason being that

```
sage: Z6 = Zmod(6)
sage: a = Z6(4)
sage: b = Z6(2)
sage: b.divides(a)
True
sage: a / b
Traceback (most recent call last):
...
ZeroDivisionError: Inverse does not exist.
```
From there three possibilities:
- "fix" divisions in integer mod ring `Zmod` so that `a / b` above does work. Though in
  this situation there are several possible answers as `4 = 2 x 5 = 2 x 2 mod 6`.
- restrict `divides` on polynomial whose base rings are integral domains (so that division
  is well defined: quotient is unique when it exists).



---

archive/issue_comments_273911.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nA fix is provided in #25277 for Zmod ring.",
    "created_at": "2018-05-12T19:36:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273911",
    "user": "https://github.com/videlec"
}
```

<div id="comment:35" align="right">Comment 35</div>

A fix is provided in #25277 for Zmod ring.



---

archive/issue_comments_273912.json:
```json
{
    "body": "Changed dependencies from **#16649** to **#16649, #25277**",
    "created_at": "2018-05-12T19:37:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273912",
    "user": "https://github.com/videlec"
}
```

Changed dependencies from **#16649** to **#16649, #25277**



---

archive/issue_events_254413.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-12T19:37:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254413"
}
```



---

archive/issue_events_254414.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-12T19:37:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254414"
}
```



---

archive/issue_comments_273913.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nThe difficulties with rings such as `Zmod(6)` let me think that we should indeed restrict to polynomials over integral domains. The problem being that I actually do not know for instance how to test divisibility over `Zmod(6)`. \n\nIf we decide this, the problem with `PolynomialRing(ZZ, 'x', implementation=\"NTL\")` remains since `quo_rem` cannot be used there without catching an exception, which is not very appealing... Should we convert first the polynomial to polynomials over the fraction field of the base ring?",
    "created_at": "2018-06-12T16:02:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273913",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:37" align="right">Comment 37</div>

The difficulties with rings such as `Zmod(6)` let me think that we should indeed restrict to polynomials over integral domains. The problem being that I actually do not know for instance how to test divisibility over `Zmod(6)`. 

If we decide this, the problem with `PolynomialRing(ZZ, 'x', implementation="NTL")` remains since `quo_rem` cannot be used there without catching an exception, which is not very appealing... Should we convert first the polynomial to polynomials over the fraction field of the base ring?



---

archive/issue_comments_273914.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nReplying to [@bgrenet](#comment%3A37):\n> The difficulties with rings such as `Zmod(6)` let me think that we should indeed restrict to polynomials over integral domains. The problem being that I actually do not know for instance how to test divisibility over `Zmod(6)`. \n\nThere is #25277 for that (it is merged in beta3 already). So you can test for division... but you can not divide yet.\n\n> If we decide this, the problem with `PolynomialRing(ZZ, 'x', implementation=\"NTL\")` remains since `quo_rem` cannot be used there without catching an exception, which is not very appealing... Should we convert first the polynomial to polynomials over the fraction field of the base ring?\n\nIt is fine to catch an exception, but it should be clear what it means.",
    "created_at": "2018-06-16T17:31:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273914",
    "user": "https://github.com/videlec"
}
```

<div id="comment:38" align="right">Comment 38</div>

Replying to [@bgrenet](#comment%3A37):
> The difficulties with rings such as `Zmod(6)` let me think that we should indeed restrict to polynomials over integral domains. The problem being that I actually do not know for instance how to test divisibility over `Zmod(6)`. 

There is #25277 for that (it is merged in beta3 already). So you can test for division... but you can not divide yet.

> If we decide this, the problem with `PolynomialRing(ZZ, 'x', implementation="NTL")` remains since `quo_rem` cannot be used there without catching an exception, which is not very appealing... Should we convert first the polynomial to polynomials over the fraction field of the base ring?

It is fine to catch an exception, but it should be clear what it means.



---

archive/issue_comments_273915.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nReplying to [@videlec](#comment%3A38):\n> Replying to [@bgrenet](#comment%3A37):\n> > The difficulties with rings such as `Zmod(6)` let me think that we should indeed restrict to polynomials over integral domains. The problem being that I actually do not know for instance how to test divisibility over `Zmod(6)`. \n\n> \n> There is #25277 for that (it is merged in beta3 already). So you can test for division... but you can not divide yet.\n\nI meant testing divisibility of polynomials over `Zmod(6)`. I am not sure that it can be reduced to simply testing divisibility of elements of `Zmod(6)`, I think you need to perform some divisions.",
    "created_at": "2018-06-18T14:42:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273915",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:39" align="right">Comment 39</div>

Replying to [@videlec](#comment%3A38):
> Replying to [@bgrenet](#comment%3A37):
> > The difficulties with rings such as `Zmod(6)` let me think that we should indeed restrict to polynomials over integral domains. The problem being that I actually do not know for instance how to test divisibility over `Zmod(6)`. 

> 
> There is #25277 for that (it is merged in beta3 already). So you can test for division... but you can not divide yet.

I meant testing divisibility of polynomials over `Zmod(6)`. I am not sure that it can be reduced to simply testing divisibility of elements of `Zmod(6)`, I think you need to perform some divisions.



---

archive/issue_comments_273916.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nReplying to [@bgrenet](#comment%3A39):\n> Replying to [@videlec](#comment%3A38):\n> > Replying to [@bgrenet](#comment%3A37):\n> > > The difficulties with rings such as `Zmod(6)` let me think that we should indeed restrict to polynomials over integral domains. The problem being that I actually do not know for instance how to test divisibility over `Zmod(6)`. \n\n> > \n> > There is #25277 for that (it is merged in beta3 already). So you can test for division... but you can not divide yet.\n\n> \n> I meant testing divisibility of polynomials over `Zmod(6)`. I am not sure that it can be reduced to simply testing divisibility of elements of `Zmod(6)`, I think you need to perform some divisions.\n\nA far from efficient method consist in\n\n1. testing divisibility of leading coefficients `b_m | a_n`\n2. if yes, test all possible quotients `q` so that `a_n = q b_m`\n\nBut for that, you need a method that return all quotients. Hence my remark.",
    "created_at": "2018-06-18T20:31:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273916",
    "user": "https://github.com/videlec"
}
```

<div id="comment:40" align="right">Comment 40</div>

Replying to [@bgrenet](#comment%3A39):
> Replying to [@videlec](#comment%3A38):
> > Replying to [@bgrenet](#comment%3A37):
> > > The difficulties with rings such as `Zmod(6)` let me think that we should indeed restrict to polynomials over integral domains. The problem being that I actually do not know for instance how to test divisibility over `Zmod(6)`. 

> > 
> > There is #25277 for that (it is merged in beta3 already). So you can test for division... but you can not divide yet.

> 
> I meant testing divisibility of polynomials over `Zmod(6)`. I am not sure that it can be reduced to simply testing divisibility of elements of `Zmod(6)`, I think you need to perform some divisions.

A far from efficient method consist in

1. testing divisibility of leading coefficients `b_m | a_n`
2. if yes, test all possible quotients `q` so that `a_n = q b_m`

But for that, you need a method that return all quotients. Hence my remark.



---

archive/issue_comments_273917.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nSo do you agree with me that we should better abandon non-integral rings (at least for now)?",
    "created_at": "2018-06-19T13:34:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273917",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:41" align="right">Comment 41</div>

So do you agree with me that we should better abandon non-integral rings (at least for now)?



---

archive/issue_comments_273918.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nReplying to [@bgrenet](#comment%3A41):\n> So do you agree with me that we should better abandon non-integral rings (at least for now)?\n\nyes",
    "created_at": "2018-06-19T14:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273918",
    "user": "https://github.com/videlec"
}
```

<div id="comment:42" align="right">Comment 42</div>

Replying to [@bgrenet](#comment%3A41):
> So do you agree with me that we should better abandon non-integral rings (at least for now)?

yes



---

archive/issue_comments_273919.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fbc129c33b622923231e3d4fdc1fb3b980d40eff\">fbc129c</a></td><td><code>Merge branch 'u/bruno/t19171_divides_poly' of git://trac.sagemath.org/sage into ticket/19171</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/213ccd88e2927bf0df6c06ac81dec003af8e28af\">213ccd8</a></td><td><code>Add degree test and lc test</code></td></tr></table>\n",
    "created_at": "2018-06-19T15:21:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273919",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43" align="right">Comment 43</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fbc129c33b622923231e3d4fdc1fb3b980d40eff">fbc129c</a></td><td><code>Merge branch 'u/bruno/t19171_divides_poly' of git://trac.sagemath.org/sage into ticket/19171</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/213ccd88e2927bf0df6c06ac81dec003af8e28af">213ccd8</a></td><td><code>Add degree test and lc test</code></td></tr></table>




---

archive/issue_comments_273920.json:
```json
{
    "body": "Changed commit from **[5bac984](https://github.com/sagemath/sagetrac-mirror/commit/5bac9845a140afc3a913ac2afbeac9346387aabd)** to **[213ccd8](https://github.com/sagemath/sagetrac-mirror/commit/213ccd88e2927bf0df6c06ac81dec003af8e28af)**",
    "created_at": "2018-06-19T15:21:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273920",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5bac984](https://github.com/sagemath/sagetrac-mirror/commit/5bac9845a140afc3a913ac2afbeac9346387aabd)** to **[213ccd8](https://github.com/sagemath/sagetrac-mirror/commit/213ccd88e2927bf0df6c06ac81dec003af8e28af)**



---

archive/issue_comments_273921.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/235735fd03d71cafe397130b16c830c7c5c65314\">235735f</a></td><td><code>19171: only for integral domains</code></td></tr></table>\n",
    "created_at": "2018-06-19T15:22:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273921",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44" align="right">Comment 44</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/235735fd03d71cafe397130b16c830c7c5c65314">235735f</a></td><td><code>19171: only for integral domains</code></td></tr></table>




---

archive/issue_comments_273922.json:
```json
{
    "body": "Changed commit from **[213ccd8](https://github.com/sagemath/sagetrac-mirror/commit/213ccd88e2927bf0df6c06ac81dec003af8e28af)** to **[235735f](https://github.com/sagemath/sagetrac-mirror/commit/235735fd03d71cafe397130b16c830c7c5c65314)**",
    "created_at": "2018-06-19T15:22:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273922",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[213ccd8](https://github.com/sagemath/sagetrac-mirror/commit/213ccd88e2927bf0df6c06ac81dec003af8e28af)** to **[235735f](https://github.com/sagemath/sagetrac-mirror/commit/235735fd03d71cafe397130b16c830c7c5c65314)**



---

archive/issue_comments_273923.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nIs the proposed solution ok for you?",
    "created_at": "2018-06-19T15:23:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273923",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:45" align="right">Comment 45</div>

Is the proposed solution ok for you?



---

archive/issue_comments_273924.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nYou are not doing the right thing on non-integral domains. You should test `is_integral_domain` much earlier. With the ticket applied\n\n```\nsage: R.<x> = Zmod(6)[]\nsage: (2*x +1).divides(3)\nFalse\nsage: (2*x + 1) * 3 == 3\nTrue\n```\n(testing divisibility of leading coefficient is not even valid... I was wrong)\n\nYou need a line break after `TESTS::`\n\nIt should be documented that this method only works for integral domains. And the examples with Zmod(6) (raising error) should be in the `EXAMPLES` block rather than `TESTS`.",
    "created_at": "2018-06-19T21:45:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273924",
    "user": "https://github.com/videlec"
}
```

<div id="comment:46" align="right">Comment 46</div>

You are not doing the right thing on non-integral domains. You should test `is_integral_domain` much earlier. With the ticket applied

```
sage: R.<x> = Zmod(6)[]
sage: (2*x +1).divides(3)
False
sage: (2*x + 1) * 3 == 3
True
```
(testing divisibility of leading coefficient is not even valid... I was wrong)

You need a line break after `TESTS::`

It should be documented that this method only works for integral domains. And the examples with Zmod(6) (raising error) should be in the `EXAMPLES` block rather than `TESTS`.



---

archive/issue_comments_273925.json:
```json
{
    "body": "Changed commit from **[235735f](https://github.com/sagemath/sagetrac-mirror/commit/235735fd03d71cafe397130b16c830c7c5c65314)** to **[94c0390](https://github.com/sagemath/sagetrac-mirror/commit/94c0390bbe4c789678ca2b4f3c730dc97420bb3a)**",
    "created_at": "2018-07-04T14:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273925",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[235735f](https://github.com/sagemath/sagetrac-mirror/commit/235735fd03d71cafe397130b16c830c7c5c65314)** to **[94c0390](https://github.com/sagemath/sagetrac-mirror/commit/94c0390bbe4c789678ca2b4f3c730dc97420bb3a)**



---

archive/issue_comments_273926.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94c0390bbe4c789678ca2b4f3c730dc97420bb3a\">94c0390</a></td><td><code>19171: Divides implemented only for integral domains</code></td></tr></table>\n",
    "created_at": "2018-07-04T14:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273926",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47" align="right">Comment 47</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94c0390bbe4c789678ca2b4f3c730dc97420bb3a">94c0390</a></td><td><code>19171: Divides implemented only for integral domains</code></td></tr></table>




---

archive/issue_events_254415.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2018-07-04T15:04:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254415"
}
```



---

archive/issue_events_254416.json:
```json
{
    "actor": "https://github.com/bgrenet",
    "created_at": "2018-07-04T15:04:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254416"
}
```



---

archive/issue_comments_273927.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nI've followed your advice, and changed my mind: My idea was to give an answer (for non-integral domains) as long as I am able to do so. The problem with the divisibility of leading coefficients made me adopt the opposite viewpoint: Divisibility is not implemented for non-integral domains, that's it. I am not sure that an implementation which only works in some uninteresting cases would be helpful to anyone!",
    "created_at": "2018-07-04T15:04:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273927",
    "user": "https://github.com/bgrenet"
}
```

<div id="comment:48" align="right">Comment 48</div>

I've followed your advice, and changed my mind: My idea was to give an answer (for non-integral domains) as long as I am able to do so. The problem with the divisibility of leading coefficients made me adopt the opposite viewpoint: Divisibility is not implemented for non-integral domains, that's it. I am not sure that an implementation which only works in some uninteresting cases would be helpful to anyone!



---

archive/issue_comments_273928.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nupdate milestone 8.3 -> 8.4",
    "created_at": "2018-08-03T19:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273928",
    "user": "https://github.com/videlec"
}
```

<div id="comment:49" align="right">Comment 49</div>

update milestone 8.3 -> 8.4



---

archive/issue_events_254417.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254417"
}
```



---

archive/issue_events_254418.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254418"
}
```



---

archive/issue_comments_273929.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nok",
    "created_at": "2018-08-23T03:53:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273929",
    "user": "https://github.com/videlec"
}
```

<div id="comment:50" align="right">Comment 50</div>

ok



---

archive/issue_events_254419.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-23T03:53:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254419"
}
```



---

archive/issue_events_254420.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-23T03:53:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254420"
}
```



---

archive/issue_events_254421.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-26T09:38:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254421"
}
```



---

archive/issue_events_254422.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "71e8975d103970f0c3817270a238e77b9b0e7e38",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-08-26T09:38:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19171#event-254422"
}
```



---

archive/issue_comments_273930.json:
```json
{
    "body": "Changed branch from **[u/bruno/t19171_divides_poly](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/t19171_divides_poly)** to **[94c0390](https://github.com/sagemath/sagetrac-mirror/commit/94c0390bbe4c789678ca2b4f3c730dc97420bb3a)**",
    "created_at": "2018-08-26T09:38:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19171#issuecomment-273930",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/bruno/t19171_divides_poly](https://github.com/sagemath/sagetrac-mirror/tree/u/bruno/t19171_divides_poly)** to **[94c0390](https://github.com/sagemath/sagetrac-mirror/commit/94c0390bbe4c789678ca2b4f3c730dc97420bb3a)**
