# Issue 19473: FiniteDimensionalAlgebra.is_unitary is not sufficient

archive/issues_019236.json:
```json
{
    "assignees": [],
    "body": "Here is the semigroup algebra (over `QQ`) of the semigroup with two elements whose product is given by `x*y == y`:\n\n```\nsage: A = FiniteDimensionalAlgebra(QQ, [Matrix([[1,0],[1,0]]), Matrix([[0,1],[0,1]])])\nsage: for x in A.basis():\n    for y in A.basis():\n        print x*y == y\n....:         \nTrue\nTrue\nTrue\nTrue\n```\n\nSage claims that it is unitary:\n\n```\nsage: A.is_unitary()\nTrue\n```\nbased on the following wrong concept:\n\n```\n        .. NOTE::\n\n            If a finite-dimensional algebra over a field admits a left identity,\n            then this is the unique left identity, and it is also a\n            right identity.\n```\n\nOn a slightly related note, the `table` method on `FiniteDimensionalAlgebra` returns mutable matrices, and mutating them corrupts the algebra.\n\nCC:  @sagetrac-sage-combinat @tscrim @nthiery\n\nKeywords: **finite-dimensional algebra**\n\nBranch/Commit: **[`366feae`](https://github.com/sagemath/sagetrac-mirror/commit/366feaedc2e28d1fc8d03380970883f644abd5de)**\n\nReviewer: **Darij Grinberg, Travis Scrimshaw**\n\nAuthor: **Peter Bruin**\n\nComponent: **algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19473_\n\n",
    "closed_at": "2015-11-01T19:31:54Z",
    "created_at": "2015-10-24T20:01:08Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "FiniteDimensionalAlgebra.is_unitary is not sufficient",
    "type": "issue",
    "updated_at": "2015-11-01T19:31:54Z",
    "url": "https://github.com/sagemath/sage/issues/19473",
    "user": "https://github.com/darijgr"
}
```
Here is the semigroup algebra (over `QQ`) of the semigroup with two elements whose product is given by `x*y == y`:

```
sage: A = FiniteDimensionalAlgebra(QQ, [Matrix([[1,0],[1,0]]), Matrix([[0,1],[0,1]])])
sage: for x in A.basis():
    for y in A.basis():
        print x*y == y
....:         
True
True
True
True
```

Sage claims that it is unitary:

```
sage: A.is_unitary()
True
```
based on the following wrong concept:

```
        .. NOTE::

            If a finite-dimensional algebra over a field admits a left identity,
            then this is the unique left identity, and it is also a
            right identity.
```

On a slightly related note, the `table` method on `FiniteDimensionalAlgebra` returns mutable matrices, and mutating them corrupts the algebra.

CC:  @sagetrac-sage-combinat @tscrim @nthiery

Keywords: **finite-dimensional algebra**

Branch/Commit: **[`366feae`](https://github.com/sagemath/sagetrac-mirror/commit/366feaedc2e28d1fc8d03380970883f644abd5de)**

Reviewer: **Darij Grinberg, Travis Scrimshaw**

Author: **Peter Bruin**

Component: **algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/19473_





---

archive/issue_events_273585.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2015-10-24T20:01:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19473#event-273585"
}
```



---

archive/issue_events_273586.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2015-10-24T20:01:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19473#event-273586"
}
```



---

archive/issue_events_273587.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2015-10-24T20:01:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19473#event-273587"
}
```



---

archive/issue_events_273588.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2015-10-24T20:01:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19473#event-273588"
}
```



---

archive/issue_events_273589.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2015-10-24T20:01:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "c: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19473#event-273589"
}
```



---

archive/issue_comments_276827.json:
```json
{
    "body": "Commit: **[`376152e`](https://github.com/sagemath/sagetrac-mirror/commit/376152ea6bd6616b9b47b184b5e4c508c4850f86)**",
    "created_at": "2015-10-27T17:18:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276827",
    "user": "https://github.com/darijgr"
}
```

Commit: **[`376152e`](https://github.com/sagemath/sagetrac-mirror/commit/376152ea6bd6616b9b47b184b5e4c508c4850f86)**



---

archive/issue_comments_276828.json:
```json
{
    "body": "Work Issues: **check that it works (my sage is still compiling); test for speed regressions**",
    "created_at": "2015-10-27T17:18:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276828",
    "user": "https://github.com/darijgr"
}
```

Work Issues: **check that it works (my sage is still compiling); test for speed regressions**



---

archive/issue_comments_276829.json:
```json
{
    "body": "Branch: **[public/ticket/19473](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/19473)**",
    "created_at": "2015-10-27T17:18:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276829",
    "user": "https://github.com/darijgr"
}
```

Branch: **[public/ticket/19473](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/19473)**



---

archive/issue_comments_276830.json:
```json
{
    "body": "Author: **Darij Grinberg**",
    "created_at": "2015-10-27T17:18:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276830",
    "user": "https://github.com/darijgr"
}
```

Author: **Darij Grinberg**



---

archive/issue_comments_276831.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef3c7fc75422eee4f8b2226b335e8ffada4c07ba\"><code>ef3c7fc</code></a></td><td><code>is_unitary method fixed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/376152ea6bd6616b9b47b184b5e4c508c4850f86\"><code>376152e</code></a></td><td><code>mutability of table fixed</code></td></tr></table>\n",
    "created_at": "2015-10-27T17:18:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276831",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef3c7fc75422eee4f8b2226b335e8ffada4c07ba"><code>ef3c7fc</code></a></td><td><code>is_unitary method fixed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/376152ea6bd6616b9b47b184b5e4c508c4850f86"><code>376152e</code></a></td><td><code>mutability of table fixed</code></td></tr></table>




---

archive/issue_events_273590.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2015-10-27T17:18:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19473#event-273590"
}
```



---

archive/issue_comments_276832.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThe wrong claim \"If a finite-dimensional algebra over a field admits a left identity, then this is the unique left identity, and it is also a right identity\" is my fault (introduced in trac_12141_finite_algebras.patch\u200b at #12141).  I have no idea what I was thinking...\n\nAbout the mutability: can't we just make the matrices in the table immutable using the `set_immutable()` method?",
    "created_at": "2015-10-27T17:36:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276832",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:2" align="right">comment:2</div>

The wrong claim "If a finite-dimensional algebra over a field admits a left identity, then this is the unique left identity, and it is also a right identity" is my fault (introduced in trac_12141_finite_algebras.patch​ at #12141).  I have no idea what I was thinking...

About the mutability: can't we just make the matrices in the table immutable using the `set_immutable()` method?



---

archive/issue_comments_276833.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nMaybe (I don't see a downside to this, but I know little of matrices in Sage...). But we'd have to make the list immutable too.",
    "created_at": "2015-10-27T17:38:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276833",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:3" align="right">comment:3</div>

Maybe (I don't see a downside to this, but I know little of matrices in Sage...). But we'd have to make the list immutable too.



---

archive/issue_comments_276834.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@darijgr](#comment:3):\n> Maybe (I don't see a downside to this, but I know little of matrices in Sage...).\n\nAs far as I know there is no downside, but I'm not an expert either.\n> But we'd have to make the list immutable too.\n\nInstead of a list, we could return a tuple (or an immutable sequence).",
    "created_at": "2015-10-27T17:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276834",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@darijgr](#comment:3):
> Maybe (I don't see a downside to this, but I know little of matrices in Sage...).

As far as I know there is no downside, but I'm not an expert either.
> But we'd have to make the list immutable too.

Instead of a list, we could return a tuple (or an immutable sequence).



---

archive/issue_comments_276835.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI would get rid of the `copy` attribute, instead make this a `UniqueRepresentation` (or perhaps a `UniqueFactory` so we can better control the cache key), and make the table a tuple of immutable matrices that gets set by the `__classcall_private__`.\n\nWe also need to fix the category, which is wrong for non-associative, non-unital cases.",
    "created_at": "2015-10-27T17:50:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276835",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:5" align="right">comment:5</div>

I would get rid of the `copy` attribute, instead make this a `UniqueRepresentation` (or perhaps a `UniqueFactory` so we can better control the cache key), and make the table a tuple of immutable matrices that gets set by the `__classcall_private__`.

We also need to fix the category, which is wrong for non-associative, non-unital cases.



---

archive/issue_comments_276836.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOK, feel free to rollback my 2nd commit, which as I see just now is broken anyway. I'm all for immutability, though I am not sure if we want `UniqueRepresentation` (didn't we agree at some point that it is a pain in the ass?).",
    "created_at": "2015-10-27T17:56:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276836",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:6" align="right">comment:6</div>

OK, feel free to rollback my 2nd commit, which as I see just now is broken anyway. I'm all for immutability, though I am not sure if we want `UniqueRepresentation` (didn't we agree at some point that it is a pain in the ass?).



---

archive/issue_comments_276837.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nSome things with `UniqueRepresentation` are annoying, but overall that isn't so big here IMO. Here's my proposal with `UniqueRepresentation` and also changing the default category to be `MagmaticAlgebras`. I would like to check during construction if the algebra is associative/unital/commutative but this is too expensive. Also refining the category after the fact can lead to subtle bugs, mainly the elements don't know the could have more methods from the refined category. So I'm leaving it to the user to pass the correct category (but I left the `assume_associative`).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6fa53aad0a3faf6304a8dea0f5cc92f7009f41f7\"><code>6fa53aa</code></a></td><td><code>Adding UniqueRepresentation behavior.</code></td></tr></table>\n",
    "created_at": "2015-10-27T20:41:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276837",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

Some things with `UniqueRepresentation` are annoying, but overall that isn't so big here IMO. Here's my proposal with `UniqueRepresentation` and also changing the default category to be `MagmaticAlgebras`. I would like to check during construction if the algebra is associative/unital/commutative but this is too expensive. Also refining the category after the fact can lead to subtle bugs, mainly the elements don't know the could have more methods from the refined category. So I'm leaving it to the user to pass the correct category (but I left the `assume_associative`).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6fa53aad0a3faf6304a8dea0f5cc92f7009f41f7"><code>6fa53aa</code></a></td><td><code>Adding UniqueRepresentation behavior.</code></td></tr></table>




---

archive/issue_comments_276838.json:
```json
{
    "body": "Changed commit from **[`376152e`](https://github.com/sagemath/sagetrac-mirror/commit/376152ea6bd6616b9b47b184b5e4c508c4850f86)** to **[`6fa53aa`](https://github.com/sagemath/sagetrac-mirror/commit/6fa53aad0a3faf6304a8dea0f5cc92f7009f41f7)**",
    "created_at": "2015-10-27T20:41:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276838",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`376152e`](https://github.com/sagemath/sagetrac-mirror/commit/376152ea6bd6616b9b47b184b5e4c508c4850f86)** to **[`6fa53aa`](https://github.com/sagemath/sagetrac-mirror/commit/6fa53aad0a3faf6304a8dea0f5cc92f7009f41f7)**



---

archive/issue_comments_276839.json:
```json
{
    "body": "Changed branch from **[public/ticket/19473](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/19473)** to **[public/algebra/finite_dim_algebra_fixes-19473](https://github.com/sagemath/sagetrac-mirror/tree/public/algebra/finite_dim_algebra_fixes-19473)**",
    "created_at": "2015-10-27T20:41:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276839",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[public/ticket/19473](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/19473)** to **[public/algebra/finite_dim_algebra_fixes-19473](https://github.com/sagemath/sagetrac-mirror/tree/public/algebra/finite_dim_algebra_fixes-19473)**



---

archive/issue_comments_276840.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2015-10-27T20:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276840",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_276841.json:
```json
{
    "body": "Changed author from **Darij Grinberg** to **Darij Grinberg, Travis Scrimshaw**",
    "created_at": "2015-10-27T20:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276841",
    "user": "https://github.com/tscrim"
}
```

Changed author from **Darij Grinberg** to **Darij Grinberg, Travis Scrimshaw**



---

archive/issue_comments_276842.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nBTW, the previous branch had doctest failures noted on the patchbot.",
    "created_at": "2015-10-27T20:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276842",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:8" align="right">comment:8</div>

BTW, the previous branch had doctest failures noted on the patchbot.



---

archive/issue_comments_276843.json:
```json
{
    "body": "Changed work issues from **check that it works (my sage is still compiling); test for speed regressions** to none",
    "created_at": "2015-10-27T20:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276843",
    "user": "https://github.com/tscrim"
}
```

Changed work issues from **check that it works (my sage is still compiling); test for speed regressions** to none



---

archive/issue_comments_276844.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0cfe0366fc527d2f692c835be3d40f60aa61c471\"><code>0cfe036</code></a></td><td><code>Adding UniqueRepresentation behavior.</code></td></tr></table>\n",
    "created_at": "2015-10-27T21:56:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276844",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0cfe0366fc527d2f692c835be3d40f60aa61c471"><code>0cfe036</code></a></td><td><code>Adding UniqueRepresentation behavior.</code></td></tr></table>




---

archive/issue_comments_276845.json:
```json
{
    "body": "Changed commit from **[`6fa53aa`](https://github.com/sagemath/sagetrac-mirror/commit/6fa53aad0a3faf6304a8dea0f5cc92f7009f41f7)** to **[`0cfe036`](https://github.com/sagemath/sagetrac-mirror/commit/0cfe0366fc527d2f692c835be3d40f60aa61c471)**",
    "created_at": "2015-10-27T21:56:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276845",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6fa53aa`](https://github.com/sagemath/sagetrac-mirror/commit/6fa53aad0a3faf6304a8dea0f5cc92f7009f41f7)** to **[`0cfe036`](https://github.com/sagemath/sagetrac-mirror/commit/0cfe0366fc527d2f692c835be3d40f60aa61c471)**



---

archive/issue_comments_276846.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nActually my fix for the unitality assumed associativity. I need to fix it again to work in the magmatic case...",
    "created_at": "2015-10-28T00:04:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276846",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:10" align="right">comment:10</div>

Actually my fix for the unitality assumed associativity. I need to fix it again to work in the magmatic case...



---

archive/issue_comments_276847.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nOK, now I am lost. `FiniteDimensionalAlgebra` inherits from `Algebra`, which in turn inherits from `Ring`. The test suite of `Ring` has associativity, which makes me suspect that rings are supposed to be associative. But the design of `FiniteDimensionalAlgebra` makes it clear that associativity is optional, and the docstrings contain examples of non-associative algebras (which still pass their test suites since `some_element` returns just a 1-element list). So should they be associative or not?",
    "created_at": "2015-10-28T00:15:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276847",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:11" align="right">comment:11</div>

OK, now I am lost. `FiniteDimensionalAlgebra` inherits from `Algebra`, which in turn inherits from `Ring`. The test suite of `Ring` has associativity, which makes me suspect that rings are supposed to be associative. But the design of `FiniteDimensionalAlgebra` makes it clear that associativity is optional, and the docstrings contain examples of non-associative algebras (which still pass their test suites since `some_element` returns just a 1-element list). So should they be associative or not?



---

archive/issue_comments_276848.json:
```json
{
    "body": "Work Issues: **clear up associativity requirement; if necessary, change superclass and is_unitary method**",
    "created_at": "2015-10-28T00:15:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276848",
    "user": "https://github.com/darijgr"
}
```

Work Issues: **clear up associativity requirement; if necessary, change superclass and is_unitary method**



---

archive/issue_comments_276849.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nFrom what I see, there are no additional tests in `Ring`. Instead these come from the category of `Rings`, which is not in the supercategories. However I think we are okay because the class doesn't necessarily assume the parent is associative and unital.",
    "created_at": "2015-10-28T03:41:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276849",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">comment:12</div>

From what I see, there are no additional tests in `Ring`. Instead these come from the category of `Rings`, which is not in the supercategories. However I think we are okay because the class doesn't necessarily assume the parent is associative and unital.



---

archive/issue_comments_276850.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@tscrim](#comment:5):\n> I would get rid of the `copy` attribute, instead make this a `UniqueRepresentation` (or perhaps a `UniqueFactory` so we can better control the cache key), and make the table a tuple of immutable matrices that gets set by the `__classcall_private__`.\n\nHow does introducing `UniqueRepresentation` help in solving this ticket?  Wouldn't it be better to do that on a separate ticket?\n> We also need to fix the category, which is wrong for non-associative, non-unital cases.\n\nI agree.  It is unfortunate that refining the category after initialisation is possibly problematic.",
    "created_at": "2015-10-28T08:45:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276850",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@tscrim](#comment:5):
> I would get rid of the `copy` attribute, instead make this a `UniqueRepresentation` (or perhaps a `UniqueFactory` so we can better control the cache key), and make the table a tuple of immutable matrices that gets set by the `__classcall_private__`.

How does introducing `UniqueRepresentation` help in solving this ticket?  Wouldn't it be better to do that on a separate ticket?
> We also need to fix the category, which is wrong for non-associative, non-unital cases.

I agree.  It is unfortunate that refining the category after initialisation is possibly problematic.



---

archive/issue_comments_276851.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nHere is Johan Bosman's implementation of `is_unitary()` from #12141 before my wrong rewrite (and after some editing and simplification):\n\n```python\n@cached_method\ndef is_unitary(self):\n    \"\"\"\n    Return True if ``self`` is unitary.\n\n    EXAMPLES::\n\n        sage: B = FiniteDimensionalAlgebra(QQ, [Matrix([[1,0],[0,1]]), Matrix([[0,1],[-1,0]])])\n        sage: B.is_unitary()\n        True\n        sage: C = FiniteDimensionalAlgebra(QQ, [Matrix([[0,0],[0,0]]), Matrix([[0,0],[0,0]])])\n        sage: C.is_unitary()\n        False\n    \"\"\"\n    n = self._degree\n    k = self.base_ring()\n    if n == 0:\n        self._one = vector(k, [])\n        return True\n    B1 = reduce(lambda x, y: x.augment(y),\n                self._table, Matrix(k, n, 0))\n    B2 = reduce(lambda x, y: x.augment(y),\n                self.left_table(), Matrix(k, n, 0))\n    # This is the vector obtained by concatenating the rows of the\n    # n times n identity matrix:\n    v = vector(k, (n - 1) * ([1] + n * [0]) + [1])\n    try:\n        sol1 = B1.solve_left(v)\n        sol2 = B2.solve_left(v)\n    except ValueError:\n        return False\n    if sol1 == sol2:\n        self._one = sol1\n        return True\n    else:\n        return False\n```\nIf this is correct, we can just re-use it.",
    "created_at": "2015-10-28T09:36:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276851",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:14" align="right">comment:14</div>

Here is Johan Bosman's implementation of `is_unitary()` from #12141 before my wrong rewrite (and after some editing and simplification):

```python
@cached_method
def is_unitary(self):
    """
    Return True if ``self`` is unitary.

    EXAMPLES::

        sage: B = FiniteDimensionalAlgebra(QQ, [Matrix([[1,0],[0,1]]), Matrix([[0,1],[-1,0]])])
        sage: B.is_unitary()
        True
        sage: C = FiniteDimensionalAlgebra(QQ, [Matrix([[0,0],[0,0]]), Matrix([[0,0],[0,0]])])
        sage: C.is_unitary()
        False
    """
    n = self._degree
    k = self.base_ring()
    if n == 0:
        self._one = vector(k, [])
        return True
    B1 = reduce(lambda x, y: x.augment(y),
                self._table, Matrix(k, n, 0))
    B2 = reduce(lambda x, y: x.augment(y),
                self.left_table(), Matrix(k, n, 0))
    # This is the vector obtained by concatenating the rows of the
    # n times n identity matrix:
    v = vector(k, (n - 1) * ([1] + n * [0]) + [1])
    try:
        sol1 = B1.solve_left(v)
        sol2 = B2.solve_left(v)
    except ValueError:
        return False
    if sol1 == sol2:
        self._one = sol1
        return True
    else:
        return False
```
If this is correct, we can just re-use it.



---

archive/issue_comments_276852.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@pjbruin](#comment:13):\n> Replying to [@tscrim](#comment:5):\n> > I would get rid of the `copy` attribute, instead make this a `UniqueRepresentation` (or perhaps a `UniqueFactory` so we can better control the cache key), and make the table a tuple of immutable matrices that gets set by the `__classcall_private__`.\n\n> How does introducing `UniqueRepresentation` help in solving this ticket?  Wouldn't it be better to do that on a separate ticket?\n\nWe can separate off the table issues into a separate ticket, that is okay with me. Want me to do that?\n\n> > We also need to fix the category, which is wrong for non-associative, non-unital cases.\n\n> I agree.  It is unfortunate that refining the category after initialisation is possibly problematic.\n\nThe other option would be to add boolean parameters that do checks in the initialization (which would require some minor refactoring if we wanted to go the `UniqueRepresentaion` route and would mean we do that on this ticket).",
    "created_at": "2015-10-28T13:22:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276852",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@pjbruin](#comment:13):
> Replying to [@tscrim](#comment:5):
> > I would get rid of the `copy` attribute, instead make this a `UniqueRepresentation` (or perhaps a `UniqueFactory` so we can better control the cache key), and make the table a tuple of immutable matrices that gets set by the `__classcall_private__`.

> How does introducing `UniqueRepresentation` help in solving this ticket?  Wouldn't it be better to do that on a separate ticket?

We can separate off the table issues into a separate ticket, that is okay with me. Want me to do that?

> > We also need to fix the category, which is wrong for non-associative, non-unital cases.

> I agree.  It is unfortunate that refining the category after initialisation is possibly problematic.

The other option would be to add boolean parameters that do checks in the initialization (which would require some minor refactoring if we wanted to go the `UniqueRepresentaion` route and would mean we do that on this ticket).



---

archive/issue_comments_276853.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@tscrim](#comment:15):\n> Replying to [@pjbruin](#comment:13):\n> > Replying to [@tscrim](#comment:5):\n> > > I would get rid of the `copy` attribute, instead make this a `UniqueRepresentation` (or perhaps a `UniqueFactory` so we can better control the cache key), and make the table a tuple of immutable matrices that gets set by the `__classcall_private__`.\n\n> > How does introducing `UniqueRepresentation` help in solving this ticket?  Wouldn't it be better to do that on a separate ticket?\n\n> \n> We can separate off the table issues into a separate ticket, that is okay with me. Want me to do that?\n> > > We also need to fix the category, which is wrong for non-associative, non-unital cases.\n\n> > I agree.  It is unfortunate that refining the category after initialisation is possibly problematic.\n\n> \n> The other option would be to add boolean parameters that do checks in the initialization (which would require some minor refactoring if we wanted to go the `UniqueRepresentaion` route and would mean we do that on this ticket).\n\nIt seems to me that there are four mostly independent issues:\n1. the wrong `is_unitary()` method;\n2. the fact that the multiplication table is mutable;\n3. determining the correct category;\n4. implementing unique representation.\nWe could possibly fix issue 2 on this ticket (assuming it just takes a few lines), but also doing 3 and 4 on this ticket would be way too much in my opinion.  I would prefer just solving issue 1 on this ticket and opening separate tickets (possibly with dependencies) for issues 2, 3 and 4.",
    "created_at": "2015-10-28T13:56:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276853",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@tscrim](#comment:15):
> Replying to [@pjbruin](#comment:13):
> > Replying to [@tscrim](#comment:5):
> > > I would get rid of the `copy` attribute, instead make this a `UniqueRepresentation` (or perhaps a `UniqueFactory` so we can better control the cache key), and make the table a tuple of immutable matrices that gets set by the `__classcall_private__`.

> > How does introducing `UniqueRepresentation` help in solving this ticket?  Wouldn't it be better to do that on a separate ticket?

> 
> We can separate off the table issues into a separate ticket, that is okay with me. Want me to do that?
> > > We also need to fix the category, which is wrong for non-associative, non-unital cases.

> > I agree.  It is unfortunate that refining the category after initialisation is possibly problematic.

> 
> The other option would be to add boolean parameters that do checks in the initialization (which would require some minor refactoring if we wanted to go the `UniqueRepresentaion` route and would mean we do that on this ticket).

It seems to me that there are four mostly independent issues:
1. the wrong `is_unitary()` method;
2. the fact that the multiplication table is mutable;
3. determining the correct category;
4. implementing unique representation.
We could possibly fix issue 2 on this ticket (assuming it just takes a few lines), but also doing 3 and 4 on this ticket would be way too much in my opinion.  I would prefer just solving issue 1 on this ticket and opening separate tickets (possibly with dependencies) for issues 2, 3 and 4.



---

archive/issue_comments_276854.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@pjbruin](#comment:16):\n> It seems to me that there are four mostly independent issues:\n> 1. the wrong `is_unitary()` method;\n> 2. the fact that the multiplication table is mutable;\n> 3. determining the correct category;\n> 4. implementing unique representation.\n> We could possibly fix issue 2 on this ticket (assuming it just takes a few lines), but also doing 3 and 4 on this ticket would be way too much in my opinion.  I would prefer just solving issue 1 on this ticket and opening separate tickets (possibly with dependencies) for issues 2, 3 and 4.\n\nThen let us just fix 1 here and use the changes on the current branch as a followup ticket.",
    "created_at": "2015-10-28T14:43:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276854",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@pjbruin](#comment:16):
> It seems to me that there are four mostly independent issues:
> 1. the wrong `is_unitary()` method;
> 2. the fact that the multiplication table is mutable;
> 3. determining the correct category;
> 4. implementing unique representation.
> We could possibly fix issue 2 on this ticket (assuming it just takes a few lines), but also doing 3 and 4 on this ticket would be way too much in my opinion.  I would prefer just solving issue 1 on this ticket and opening separate tickets (possibly with dependencies) for issues 2, 3 and 4.

Then let us just fix 1 here and use the changes on the current branch as a followup ticket.



---

archive/issue_comments_276855.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n+1 for splitting 1&2 | 3&4. This is particularly helpful to me, as I am fairly sure I can review 1&2, but probably not 3&4 these days.\n\nJohan Bosman's approach looks correct (mathematically -- haven't checked the programming). It isn't even necessary to check that the two identities are equal, since their existence already yields their equality.",
    "created_at": "2015-10-28T14:44:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276855",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:18" align="right">comment:18</div>

+1 for splitting 1&2 | 3&4. This is particularly helpful to me, as I am fairly sure I can review 1&2, but probably not 3&4 these days.

Johan Bosman's approach looks correct (mathematically -- haven't checked the programming). It isn't even necessary to check that the two identities are equal, since their existence already yields their equality.



---

archive/issue_comments_276856.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@darijgr](#comment:18):\n> Johan Bosman's approach looks correct (mathematically -- haven't checked the programming). It isn't even necessary to check that the two identities are equal, since their existence already yields their equality.\n\nIndeed, I have now also convinced myself of this.  This means that we can replace\n\n```python\n    if sol1 == sol2:\n        self._one = sol1\n        return True\n    else:\n        return False\n```\nby\n\n```python\n    assert sol1 == sol2\n    return True\n```\n(note that at this point the fact that `sol1` and `sol2` have been computed implies that left and right identity elements exist).",
    "created_at": "2015-10-28T15:05:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276856",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@darijgr](#comment:18):
> Johan Bosman's approach looks correct (mathematically -- haven't checked the programming). It isn't even necessary to check that the two identities are equal, since their existence already yields their equality.

Indeed, I have now also convinced myself of this.  This means that we can replace

```python
    if sol1 == sol2:
        self._one = sol1
        return True
    else:
        return False
```
by

```python
    assert sol1 == sol2
    return True
```
(note that at this point the fact that `sol1` and `sol2` have been computed implies that left and right identity elements exist).



---

archive/issue_comments_276857.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nOne more thing. The definition\n\n```\nv = vector(k, (n - 1) * ([1] + n * [0]) + [1])\n```\nof `v` is one step back from the currently present definition\n\n```\nv = vector(Matrix.identity(k, n).list())\n```\nbecause it is far better for the entries of `v` to be defined as the zero/one elements of `R` rather than the ints `0` and `1`. There are, after all, rings whose zero/one elements are distinct from `0` and `1`. (So far we probably don't have fields like that, but it could be imaginable. More importantly, coercions like `R(0)` take time, particularly when they are cast on each entry of the vector separately.",
    "created_at": "2015-10-28T17:12:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276857",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:20" align="right">comment:20</div>

One more thing. The definition

```
v = vector(k, (n - 1) * ([1] + n * [0]) + [1])
```
of `v` is one step back from the currently present definition

```
v = vector(Matrix.identity(k, n).list())
```
because it is far better for the entries of `v` to be defined as the zero/one elements of `R` rather than the ints `0` and `1`. There are, after all, rings whose zero/one elements are distinct from `0` and `1`. (So far we probably don't have fields like that, but it could be imaginable. More importantly, coercions like `R(0)` take time, particularly when they are cast on each entry of the vector separately.



---

archive/issue_comments_276858.json:
```json
{
    "body": "Changed author from **Darij Grinberg, Travis Scrimshaw** to **Peter Bruin**",
    "created_at": "2015-10-31T15:21:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276858",
    "user": "https://github.com/tscrim"
}
```

Changed author from **Darij Grinberg, Travis Scrimshaw** to **Peter Bruin**



---

archive/issue_comments_276859.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nOkay, here is 1. The rest will be handled on #19507.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9dd11b272861e5e7c50c04d44364452d71359b8d\"><code>9dd11b2</code></a></td><td><code>Fixing is_unitary for FiniteDimensionalAlgebra.</code></td></tr></table>\n",
    "created_at": "2015-10-31T15:21:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276859",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:21" align="right">comment:21</div>

Okay, here is 1. The rest will be handled on #19507.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9dd11b272861e5e7c50c04d44364452d71359b8d"><code>9dd11b2</code></a></td><td><code>Fixing is_unitary for FiniteDimensionalAlgebra.</code></td></tr></table>




---

archive/issue_comments_276860.json:
```json
{
    "body": "Changed work issues from **clear up associativity requirement; if necessary, change superclass and is_unitary method** to none",
    "created_at": "2015-10-31T15:21:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276860",
    "user": "https://github.com/tscrim"
}
```

Changed work issues from **clear up associativity requirement; if necessary, change superclass and is_unitary method** to none



---

archive/issue_comments_276861.json:
```json
{
    "body": "Changed branch from **[public/algebra/finite_dim_algebra_fixes-19473](https://github.com/sagemath/sagetrac-mirror/tree/public/algebra/finite_dim_algebra_fixes-19473)** to **[public/algebras/unitary_fd_algerba-19473](https://github.com/sagemath/sagetrac-mirror/tree/public/algebras/unitary_fd_algerba-19473)**",
    "created_at": "2015-10-31T15:21:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276861",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[public/algebra/finite_dim_algebra_fixes-19473](https://github.com/sagemath/sagetrac-mirror/tree/public/algebra/finite_dim_algebra_fixes-19473)** to **[public/algebras/unitary_fd_algerba-19473](https://github.com/sagemath/sagetrac-mirror/tree/public/algebras/unitary_fd_algerba-19473)**



---

archive/issue_comments_276862.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw** to **Darij Grinberg, Travis Scrimshaw**",
    "created_at": "2015-10-31T15:21:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276862",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **Travis Scrimshaw** to **Darij Grinberg, Travis Scrimshaw**



---

archive/issue_comments_276863.json:
```json
{
    "body": "Changed commit from **[`0cfe036`](https://github.com/sagemath/sagetrac-mirror/commit/0cfe0366fc527d2f692c835be3d40f60aa61c471)** to **[`9dd11b2`](https://github.com/sagemath/sagetrac-mirror/commit/9dd11b272861e5e7c50c04d44364452d71359b8d)**",
    "created_at": "2015-10-31T15:21:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276863",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`0cfe036`](https://github.com/sagemath/sagetrac-mirror/commit/0cfe0366fc527d2f692c835be3d40f60aa61c471)** to **[`9dd11b2`](https://github.com/sagemath/sagetrac-mirror/commit/9dd11b272861e5e7c50c04d44364452d71359b8d)**



---

archive/issue_comments_276864.json:
```json
{
    "body": "Changed commit from **[`9dd11b2`](https://github.com/sagemath/sagetrac-mirror/commit/9dd11b272861e5e7c50c04d44364452d71359b8d)** to **[`366feae`](https://github.com/sagemath/sagetrac-mirror/commit/366feaedc2e28d1fc8d03380970883f644abd5de)**",
    "created_at": "2015-10-31T23:36:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276864",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9dd11b2`](https://github.com/sagemath/sagetrac-mirror/commit/9dd11b272861e5e7c50c04d44364452d71359b8d)** to **[`366feae`](https://github.com/sagemath/sagetrac-mirror/commit/366feaedc2e28d1fc8d03380970883f644abd5de)**



---

archive/issue_comments_276865.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/366feaedc2e28d1fc8d03380970883f644abd5de\"><code>366feae</code></a></td><td><code>non-associative doctests</code></td></tr></table>\n",
    "created_at": "2015-10-31T23:36:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276865",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/366feaedc2e28d1fc8d03380970883f644abd5de"><code>366feae</code></a></td><td><code>non-associative doctests</code></td></tr></table>




---

archive/issue_comments_276866.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nLGTM, but I've added some doctests to make sure this doesn't regress. Positive review, if you agree.",
    "created_at": "2015-10-31T23:36:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276866",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:23" align="right">comment:23</div>

LGTM, but I've added some doctests to make sure this doesn't regress. Positive review, if you agree.



---

archive/issue_events_273591.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-11-01T01:33:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19473#event-273591"
}
```



---

archive/issue_events_273592.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2015-11-01T01:33:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19473#event-273592"
}
```



---

archive/issue_comments_276867.json:
```json
{
    "body": "Changed branch from **[public/algebras/unitary_fd_algerba-19473](https://github.com/sagemath/sagetrac-mirror/tree/public/algebras/unitary_fd_algerba-19473)** to **[`366feae`](https://github.com/sagemath/sagetrac-mirror/commit/366feaedc2e28d1fc8d03380970883f644abd5de)**",
    "created_at": "2015-11-01T19:31:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19473#issuecomment-276867",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/algebras/unitary_fd_algerba-19473](https://github.com/sagemath/sagetrac-mirror/tree/public/algebras/unitary_fd_algerba-19473)** to **[`366feae`](https://github.com/sagemath/sagetrac-mirror/commit/366feaedc2e28d1fc8d03380970883f644abd5de)**



---

archive/issue_events_273593.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-01T19:31:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19473#event-273593"
}
```



---

archive/issue_events_273594.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "d24589a66c9370a93c321c18b138fa817c285c9e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-11-01T19:31:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19473",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19473#event-273594"
}
```
