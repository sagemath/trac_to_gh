# Issue 19487: Support .zip upstream/ files

archive/issues_019250.json:
```json
{
    "assignees": [],
    "body": "Here it is. It was not so tough, though the code is a bit clumsy.\n\nNathann\n\nThis ticket also updates our copy of bliss to use the original .zip file\nhttp://www.tcs.hut.fi/Software/bliss/bliss-0.73.zip\n\nDepends on #19484\n\nCC:  @mkoeppe\n\nComponent: **distribution**\n\nAuthor: **Nathann Cohen**\n\nBranch: **[`b8f4d6a`](https://github.com/sagemath/sagetrac-mirror/commit/b8f4d6af1650283791a53332e0b5a0eeacc46974)**\n\nReviewer: **Dima Pasechnik, Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19487_\n\n",
    "closed_at": "2015-12-22T19:49:46Z",
    "created_at": "2015-10-27T14:42:20Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20distribution",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Support .zip upstream/ files",
    "type": "issue",
    "updated_at": "2016-02-26T04:52:14Z",
    "url": "https://github.com/sagemath/sage/issues/19487",
    "user": "https://github.com/nathanncohen"
}
```
Here it is. It was not so tough, though the code is a bit clumsy.

Nathann

This ticket also updates our copy of bliss to use the original .zip file
http://www.tcs.hut.fi/Software/bliss/bliss-0.73.zip

Depends on #19484

CC:  @mkoeppe

Component: **distribution**

Author: **Nathann Cohen**

Branch: **[`b8f4d6a`](https://github.com/sagemath/sagetrac-mirror/commit/b8f4d6af1650283791a53332e0b5a0eeacc46974)**

Reviewer: **Dima Pasechnik, Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/19487_





---

archive/issue_events_273749.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-10-27T14:42:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273749"
}
```



---

archive/issue_events_273750.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-10-27T14:42:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20distribution",
    "label_color": "0000b0",
    "label_name": "c: distribution",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273750"
}
```



---

archive/issue_events_273751.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-10-27T14:42:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273751"
}
```



---

archive/issue_events_273752.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-10-27T14:42:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273752"
}
```



---

archive/issue_events_273753.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-10-27T14:43:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273753"
}
```



---

archive/issue_comments_277065.json:
```json
{
    "body": "Commit: **[`291bf3e`](https://github.com/sagemath/sagetrac-mirror/commit/291bf3e6dd79cc18de67e9b213420fd66c98ff71)**",
    "created_at": "2015-10-27T14:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277065",
    "user": "https://github.com/nathanncohen"
}
```

Commit: **[`291bf3e`](https://github.com/sagemath/sagetrac-mirror/commit/291bf3e6dd79cc18de67e9b213420fd66c98ff71)**



---

archive/issue_comments_277066.json:
```json
{
    "body": "Branch: **[u/ncohen/19487](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/19487)**",
    "created_at": "2015-10-27T14:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277066",
    "user": "https://github.com/nathanncohen"
}
```

Branch: **[u/ncohen/19487](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/19487)**



---

archive/issue_comments_277067.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThe mosst obvious use-case for this ticket would be #19483 (whose original tarball is .zip) but it is already reviewed. I'll do what the reviewers ask.\n\nNathann\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/465d83c199cbe9f399574db2e3d79708ae118ad8\"><code>465d83c</code></a></td><td><code>trac #19484 - sage -unzip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/291bf3e6dd79cc18de67e9b213420fd66c98ff71\"><code>291bf3e</code></a></td><td><code>trac #19487: Support .zip upstream/ files</code></td></tr></table>\n",
    "created_at": "2015-10-27T14:43:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277067",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1" align="right">comment:1</div>

The mosst obvious use-case for this ticket would be #19483 (whose original tarball is .zip) but it is already reviewed. I'll do what the reviewers ask.

Nathann

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/465d83c199cbe9f399574db2e3d79708ae118ad8"><code>465d83c</code></a></td><td><code>trac #19484 - sage -unzip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/291bf3e6dd79cc18de67e9b213420fd66c98ff71"><code>291bf3e</code></a></td><td><code>trac #19487: Support .zip upstream/ files</code></td></tr></table>




---

archive/issue_comments_277068.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nOoh fugly, unzip and re-tar and pipe and untar? Of course its really the original script's fault for not being modular...\n\nCan we at least put sage-unzip into build/bin/ and not expose it via a `sage -unzip` command line argument? It has no mathematical purpose, its just an internal tool for building Sage packages.",
    "created_at": "2015-10-28T09:14:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277068",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2" align="right">comment:2</div>

Ooh fugly, unzip and re-tar and pipe and untar? Of course its really the original script's fault for not being modular...

Can we at least put sage-unzip into build/bin/ and not expose it via a `sage -unzip` command line argument? It has no mathematical purpose, its just an internal tool for building Sage packages.



---

archive/issue_comments_277069.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@vbraun](#comment%3A2):\n> Ooh fugly, unzip and re-tar and pipe and untar? Of course its really the original script's fault for not being modular...\n> \n> Can we at least put sage-unzip into build/bin/ and not expose it via a `sage -unzip` command line argument? It has no mathematical purpose, its just an internal tool for building Sage packages.\n\nneither `sage --git`, nor `sage --twisted` have any maths purpose, yet they are still there...",
    "created_at": "2015-10-28T09:23:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277069",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@vbraun](#comment%3A2):
> Ooh fugly, unzip and re-tar and pipe and untar? Of course its really the original script's fault for not being modular...
> 
> Can we at least put sage-unzip into build/bin/ and not expose it via a `sage -unzip` command line argument? It has no mathematical purpose, its just an internal tool for building Sage packages.

neither `sage --git`, nor `sage --twisted` have any maths purpose, yet they are still there...



---

archive/issue_comments_277070.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\n> Ooh fugly, unzip and re-tar and pipe and untar? Of course its really the original script's fault for not being modular...\n\nYeah well. I minimize my changes to the current scripts. So I adapted to what was already there. I loved that line in particular:\n\n```\nlbzip2 -d -c \"$1\" 2>/dev/null || bzip2 -d -c \"$1\" 2>/dev/null || gzip -d -c \"$1\" 2>/dev/null || cat \"$1\"\n```\n\n> Can we at least put sage-unzip into build/bin/ and not expose it via a `sage -unzip` command line argument? It has no mathematical purpose, its just an internal tool for building Sage packages.\n\nCan you make this comment on the right ticket, i.e. #19484?\n\nNathann",
    "created_at": "2015-10-28T09:24:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277070",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">comment:4</div>

> Ooh fugly, unzip and re-tar and pipe and untar? Of course its really the original script's fault for not being modular...

Yeah well. I minimize my changes to the current scripts. So I adapted to what was already there. I loved that line in particular:

```
lbzip2 -d -c "$1" 2>/dev/null || bzip2 -d -c "$1" 2>/dev/null || gzip -d -c "$1" 2>/dev/null || cat "$1"
```

> Can we at least put sage-unzip into build/bin/ and not expose it via a `sage -unzip` command line argument? It has no mathematical purpose, its just an internal tool for building Sage packages.

Can you make this comment on the right ticket, i.e. #19484?

Nathann



---

archive/issue_comments_277071.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nDiscussion moved to #19484",
    "created_at": "2015-10-28T09:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277071",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:5" align="right">comment:5</div>

Discussion moved to #19484



---

archive/issue_comments_277072.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/727ac938b282c541f489d273c2a3cf7bbc96fc2e\"><code>727ac93</code></a></td><td><code>trac #19484: sage-unzip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba21cc01a8b39ecf546560c85d0b128b9eea10c7\"><code>ba21cc0</code></a></td><td><code>trac #19487: Support .zip upstream/ files</code></td></tr></table>\n",
    "created_at": "2015-10-28T13:52:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277072",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/727ac938b282c541f489d273c2a3cf7bbc96fc2e"><code>727ac93</code></a></td><td><code>trac #19484: sage-unzip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba21cc01a8b39ecf546560c85d0b128b9eea10c7"><code>ba21cc0</code></a></td><td><code>trac #19487: Support .zip upstream/ files</code></td></tr></table>




---

archive/issue_comments_277073.json:
```json
{
    "body": "Changed commit from **[`291bf3e`](https://github.com/sagemath/sagetrac-mirror/commit/291bf3e6dd79cc18de67e9b213420fd66c98ff71)** to **[`ba21cc0`](https://github.com/sagemath/sagetrac-mirror/commit/ba21cc01a8b39ecf546560c85d0b128b9eea10c7)**",
    "created_at": "2015-10-28T13:52:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277073",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`291bf3e`](https://github.com/sagemath/sagetrac-mirror/commit/291bf3e6dd79cc18de67e9b213420fd66c98ff71)** to **[`ba21cc0`](https://github.com/sagemath/sagetrac-mirror/commit/ba21cc01a8b39ecf546560c85d0b128b9eea10c7)**



---

archive/issue_comments_277074.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI guess what I'd like to see is a zipfile-based example to use this patch to install stuff. How about making one on #18708 ?",
    "created_at": "2015-11-22T12:11:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277074",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">comment:7</div>

I guess what I'd like to see is a zipfile-based example to use this patch to install stuff. How about making one on #18708 ?



---

archive/issue_comments_277075.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI can update bliss, but that's a bit silly since it is the latest version since #19483 (which is why I wrote this branch). I don't know what 'normalize' is: can you add this ticket as a dependency of #18708? This way you can check that it works (should be totally straightforward) and that other package will be udpated.\n\nNathann",
    "created_at": "2015-11-22T12:18:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277075",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:8" align="right">comment:8</div>

I can update bliss, but that's a bit silly since it is the latest version since #19483 (which is why I wrote this branch). I don't know what 'normalize' is: can you add this ticket as a dependency of #18708? This way you can check that it works (should be totally straightforward) and that other package will be udpated.

Nathann



---

archive/issue_comments_277076.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThis does not work on Mac OS X because \"sed -s\" is a GNU extension.",
    "created_at": "2015-12-17T07:38:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277076",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

This does not work on Mac OS X because "sed -s" is a GNU extension.



---

archive/issue_events_273754.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2015-12-17T07:38:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273754"
}
```



---

archive/issue_events_273755.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2015-12-17T07:38:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273755"
}
```



---

archive/issue_comments_277077.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI don't have Mac OS X, and I do not know how it must be written to work there. Can you fix what must be for it to work on your platform ?",
    "created_at": "2015-12-17T07:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277077",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

I don't have Mac OS X, and I do not know how it must be written to work there. Can you fix what must be for it to work on your platform ?



---

archive/issue_comments_277078.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nSure, I'll try to make it portable",
    "created_at": "2015-12-17T08:20:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277078",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

Sure, I'll try to make it portable



---

archive/issue_comments_277079.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eeedb3b4b05454c62249fe0577e4b7a84e9f2338\"><code>eeedb3b</code></a></td><td><code>trac #19712: strongly_regular_graph() crashes when mu=0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5d75abd01a66f964fa39559c6579063db3f4228\"><code>f5d75ab</code></a></td><td><code>trac #19487: Merged with mu=0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1312500851383e2eb45c4ea4f1da0663659a2d62\"><code>1312500</code></a></td><td><code>trac #19487: remove -s</code></td></tr></table>\n",
    "created_at": "2015-12-17T12:35:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277079",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eeedb3b4b05454c62249fe0577e4b7a84e9f2338"><code>eeedb3b</code></a></td><td><code>trac #19712: strongly_regular_graph() crashes when mu=0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5d75abd01a66f964fa39559c6579063db3f4228"><code>f5d75ab</code></a></td><td><code>trac #19487: Merged with mu=0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1312500851383e2eb45c4ea4f1da0663659a2d62"><code>1312500</code></a></td><td><code>trac #19487: remove -s</code></td></tr></table>




---

archive/issue_comments_277080.json:
```json
{
    "body": "Changed commit from **[`ba21cc0`](https://github.com/sagemath/sagetrac-mirror/commit/ba21cc01a8b39ecf546560c85d0b128b9eea10c7)** to **[`1312500`](https://github.com/sagemath/sagetrac-mirror/commit/1312500851383e2eb45c4ea4f1da0663659a2d62)**",
    "created_at": "2015-12-17T12:35:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277080",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ba21cc0`](https://github.com/sagemath/sagetrac-mirror/commit/ba21cc01a8b39ecf546560c85d0b128b9eea10c7)** to **[`1312500`](https://github.com/sagemath/sagetrac-mirror/commit/1312500851383e2eb45c4ea4f1da0663659a2d62)**



---

archive/issue_comments_277081.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab197d3bd1b89a7d6d1a7bd1542a60d639b70014\"><code>ab197d3</code></a></td><td><code>trac #19487: Support .zip upstream/ files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a49b1e48d3bf4f673893637903974708325c53b9\"><code>a49b1e4</code></a></td><td><code>trac #19487: remove -s</code></td></tr></table>\n",
    "created_at": "2015-12-17T12:37:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277081",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab197d3bd1b89a7d6d1a7bd1542a60d639b70014"><code>ab197d3</code></a></td><td><code>trac #19487: Support .zip upstream/ files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a49b1e48d3bf4f673893637903974708325c53b9"><code>a49b1e4</code></a></td><td><code>trac #19487: remove -s</code></td></tr></table>




---

archive/issue_comments_277082.json:
```json
{
    "body": "Changed commit from **[`1312500`](https://github.com/sagemath/sagetrac-mirror/commit/1312500851383e2eb45c4ea4f1da0663659a2d62)** to **[`a49b1e4`](https://github.com/sagemath/sagetrac-mirror/commit/a49b1e48d3bf4f673893637903974708325c53b9)**",
    "created_at": "2015-12-17T12:37:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277082",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1312500`](https://github.com/sagemath/sagetrac-mirror/commit/1312500851383e2eb45c4ea4f1da0663659a2d62)** to **[`a49b1e4`](https://github.com/sagemath/sagetrac-mirror/commit/a49b1e48d3bf4f673893637903974708325c53b9)**



---

archive/issue_comments_277083.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nUnless this does the trick? I removed the '-s', as I have no idea why it was there in the first place `O_o`\n\nNathann",
    "created_at": "2015-12-17T12:38:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277083",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">comment:14</div>

Unless this does the trick? I removed the '-s', as I have no idea why it was there in the first place `O_o`

Nathann



---

archive/issue_events_273756.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-12-17T12:38:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273756"
}
```



---

archive/issue_events_273757.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-12-17T12:38:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273757"
}
```



---

archive/issue_comments_277084.json:
```json
{
    "body": "Changed branch from **[u/ncohen/19487](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/19487)** to **[u/mkoeppe/19487](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/19487)**",
    "created_at": "2015-12-17T21:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277084",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/ncohen/19487](https://github.com/sagemath/sagetrac-mirror/tree/u/ncohen/19487)** to **[u/mkoeppe/19487](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/19487)**



---

archive/issue_comments_277085.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThe regexp needed fixing also.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e464c1a8bf37422e30b36f5b99ff6a7748e6606\"><code>7e464c1</code></a></td><td><code>Make regular expression portable; add documentation</code></td></tr></table>\n",
    "created_at": "2015-12-17T21:37:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277085",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

The regexp needed fixing also.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e464c1a8bf37422e30b36f5b99ff6a7748e6606"><code>7e464c1</code></a></td><td><code>Make regular expression portable; add documentation</code></td></tr></table>




---

archive/issue_comments_277086.json:
```json
{
    "body": "Changed commit from **[`a49b1e4`](https://github.com/sagemath/sagetrac-mirror/commit/a49b1e48d3bf4f673893637903974708325c53b9)** to **[`7e464c1`](https://github.com/sagemath/sagetrac-mirror/commit/7e464c1a8bf37422e30b36f5b99ff6a7748e6606)**",
    "created_at": "2015-12-17T21:37:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277086",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`a49b1e4`](https://github.com/sagemath/sagetrac-mirror/commit/a49b1e48d3bf4f673893637903974708325c53b9)** to **[`7e464c1`](https://github.com/sagemath/sagetrac-mirror/commit/7e464c1a8bf37422e30b36f5b99ff6a7748e6606)**



---

archive/issue_comments_277087.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nErr... You sure that there is no way to have a 'OR' in a regexp under MacOSX ?.... The readability has dramatically decreased, if I may say..\n\nAlso you seem to strip lz, but I do not think that our scripts can unpackage lz files.\n\nNathann",
    "created_at": "2015-12-18T07:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277087",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

Err... You sure that there is no way to have a 'OR' in a regexp under MacOSX ?.... The readability has dramatically decreased, if I may say..

Also you seem to strip lz, but I do not think that our scripts can unpackage lz files.

Nathann



---

archive/issue_comments_277088.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThe GNU sed implementation explains pretty well what are GNU extensions. And yes, if one always used the GNU version it's stunning how restrictive the classic UNIX versions were.\n\nPerhaps best to rewrite the whole thing using a sequence of bash substitutions instead.\n\nI stripped a few more file extensions to future-proof the script.",
    "created_at": "2015-12-18T17:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277088",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

The GNU sed implementation explains pretty well what are GNU extensions. And yes, if one always used the GNU version it's stunning how restrictive the classic UNIX versions were.

Perhaps best to rewrite the whole thing using a sequence of bash substitutions instead.

I stripped a few more file extensions to future-proof the script.



---

archive/issue_comments_277089.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nhow about a python script instead?",
    "created_at": "2015-12-18T18:42:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277089",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

how about a python script instead?



---

archive/issue_comments_277090.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n> The GNU sed implementation explains pretty well what are GNU extensions. And yes, if one always used the GNU version it's stunning how restrictive the classic UNIX versions were.\n\nI tried to rewrite this regexp in posix. Can you try whether this works in Mac OSX? The '--posix' flag is meant to disable whatever shouldn't be supported\n\n```\n~$ echo whatever.tar.2.0.zip.tar.gz.tar.tgz | sed --posix \"s/[\\.zip|\\.tar|\\.gz]*$//g\" \nwhatever.tar.2.0\n```\n\nNathann",
    "created_at": "2015-12-18T20:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277090",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

> The GNU sed implementation explains pretty well what are GNU extensions. And yes, if one always used the GNU version it's stunning how restrictive the classic UNIX versions were.

I tried to rewrite this regexp in posix. Can you try whether this works in Mac OSX? The '--posix' flag is meant to disable whatever shouldn't be supported

```
~$ echo whatever.tar.2.0.zip.tar.gz.tar.tgz | sed --posix "s/[\.zip|\.tar|\.gz]*$//g" 
whatever.tar.2.0
```

Nathann



---

archive/issue_comments_277091.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThe whole zip/re-tar stuff is hilarious. If anything, this ticket shows that the current sage-spkg script is just unmaintainable. \n\n+1 to a python script...",
    "created_at": "2015-12-18T20:22:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277091",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:22" align="right">comment:22</div>

The whole zip/re-tar stuff is hilarious. If anything, this ticket shows that the current sage-spkg script is just unmaintainable. 

+1 to a python script...



---

archive/issue_comments_277092.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\n> The whole zip/re-tar stuff is hilarious.\n\n+1. I couldn't believe when I first saw it `:-P`\n\n> If anything, this ticket shows that the current sage-spkg script is just unmaintainable. \n> \n> +1 to a python script...\n\nWell I don't mind if you want to write it, but given that the present ticket does not change it too much, honestly I don't think that it is very urgent to rewrite. But indeed, this script is... \"hacky\"? `:-P`\n\nNathann",
    "created_at": "2015-12-18T20:27:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277092",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:23" align="right">comment:23</div>

> The whole zip/re-tar stuff is hilarious.

+1. I couldn't believe when I first saw it `:-P`

> If anything, this ticket shows that the current sage-spkg script is just unmaintainable. 
> 
> +1 to a python script...

Well I don't mind if you want to write it, but given that the present ticket does not change it too much, honestly I don't think that it is very urgent to rewrite. But indeed, this script is... "hacky"? `:-P`

Nathann



---

archive/issue_comments_277093.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@nathanncohen](#comment%3A21):\n> > The GNU sed implementation explains pretty well what are GNU extensions. And yes, if one always used the GNU version it's stunning how restrictive the classic UNIX versions were.\n\n> \n> I tried to rewrite this regexp in posix. Can you try whether this works in Mac OSX? The '--posix' flag is meant to disable whatever shouldn't be supported\n> \n> ```\n> ~$ echo whatever.tar.2.0.zip.tar.gz.tar.tgz | sed --posix \"s/[\\.zip|\\.tar|\\.gz]*$//g\" \n> whatever.tar.2.0\n> ```\n\nIt does not work. UNIX sed does not understand any command line option with double dashes.\n\nAnd, by the way, your original regexp does not work because you're confusing [] and \\( \\).",
    "created_at": "2015-12-18T21:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277093",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@nathanncohen](#comment%3A21):
> > The GNU sed implementation explains pretty well what are GNU extensions. And yes, if one always used the GNU version it's stunning how restrictive the classic UNIX versions were.

> 
> I tried to rewrite this regexp in posix. Can you try whether this works in Mac OSX? The '--posix' flag is meant to disable whatever shouldn't be supported
> 
> ```
> ~$ echo whatever.tar.2.0.zip.tar.gz.tar.tgz | sed --posix "s/[\.zip|\.tar|\.gz]*$//g" 
> whatever.tar.2.0
> ```

It does not work. UNIX sed does not understand any command line option with double dashes.

And, by the way, your original regexp does not work because you're confusing [] and \( \).



---

archive/issue_comments_277094.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nHelloooo,\n\n> It does not work. UNIX sed does not understand any command line option with double dashes.\n\nDo you mean the \" ? Are those called \"double dashes\" ? Does it still fail if you use simple quotes instead, i.e. `sed --posix 's/[\\.zip|\\.tar|\\.gz]*$//g'`\n\n> And, by the way, your original regexp does not work because you're confusing [] and \\( \\).\n\nYep yep sorry, I noticed that while working on this new version. Which seems to work reliably, on my distro at least.\n\nNathann",
    "created_at": "2015-12-18T21:22:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277094",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:25" align="right">comment:25</div>

Helloooo,

> It does not work. UNIX sed does not understand any command line option with double dashes.

Do you mean the " ? Are those called "double dashes" ? Does it still fail if you use simple quotes instead, i.e. `sed --posix 's/[\.zip|\.tar|\.gz]*$//g'`

> And, by the way, your original regexp does not work because you're confusing [] and \( \).

Yep yep sorry, I noticed that while working on this new version. Which seems to work reliably, on my distro at least.

Nathann



---

archive/issue_comments_277095.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nBy double dashes, he meant the option `--posix`.\n\nOn OS X, use the `-E` flag for sed:\n\n```\necho whatever.tar.2.0.zip.tar.gz.tar.tgz | sed -E \"s/(\\.zip|\\.tar|\\.gz|\\.tgz)*$//g\" \n```\nBut `-E` is not a posix option or a GNU sed option, so I guess we can't use it. A Python script would avoid these compatibility issues.",
    "created_at": "2015-12-18T21:25:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277095",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:26" align="right">comment:26</div>

By double dashes, he meant the option `--posix`.

On OS X, use the `-E` flag for sed:

```
echo whatever.tar.2.0.zip.tar.gz.tar.tgz | sed -E "s/(\.zip|\.tar|\.gz|\.tgz)*$//g" 
```
But `-E` is not a posix option or a GNU sed option, so I guess we can't use it. A Python script would avoid these compatibility issues.



---

archive/issue_comments_277096.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\n> By double dashes, he meant the option `--posix`.\n\nOh, okay sorry. This being said, my command also works without the '--posix'. So if we can have \n\n```\n~$ echo whatever.tar.2.0.zip.tar.gz.tar.tgz | sed \"s/[\\.zip|\\.tar|\\.gz]*$//g\"  \nwhatever.tar.2.0\n```\n\nand if it works in OSX too, then it's good?.. Apparently it is posix, for it works even when --posix is added (though it is not necessary).\n\nNathann",
    "created_at": "2015-12-18T21:28:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277096",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:27" align="right">comment:27</div>

> By double dashes, he meant the option `--posix`.

Oh, okay sorry. This being said, my command also works without the '--posix'. So if we can have 

```
~$ echo whatever.tar.2.0.zip.tar.gz.tar.tgz | sed "s/[\.zip|\.tar|\.gz]*$//g"  
whatever.tar.2.0
```

and if it works in OSX too, then it's good?.. Apparently it is posix, for it works even when --posix is added (though it is not necessary).

Nathann



---

archive/issue_comments_277097.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nYour command works but is probably not what we want. The regular expression `[\\.zip|\\.tar|\\.gz]*` matches any string formed by the characters between the brackets, so it is equivalent to `[\\.ziptarg|]*`. So I think it matches too much: the `sed` invocation would convert `whatever.tar.2.0.zig.zag.rat` to `whatever.tar.2.0`. This was mkoeppe's comment about confusing `[]` with `\\(\\)`.\n\nOn OS X, \n\n```\necho whatever.tar.2.0.zip.tar.gz.tar.tgz | sed -E \"s/(\\.zip|\\.tar|\\.gz|\\.tgz)*$//g\"\n```\nworks, while omitting `-E`\n\n```\necho whatever.tar.2.0.zip.tar.gz.tar.tgz | sed \"s/(\\.zip|\\.tar|\\.gz|\\.tgz)*$//g\"\n```\ndoes not.",
    "created_at": "2015-12-18T21:55:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277097",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:28" align="right">comment:28</div>

Your command works but is probably not what we want. The regular expression `[\.zip|\.tar|\.gz]*` matches any string formed by the characters between the brackets, so it is equivalent to `[\.ziptarg|]*`. So I think it matches too much: the `sed` invocation would convert `whatever.tar.2.0.zig.zag.rat` to `whatever.tar.2.0`. This was mkoeppe's comment about confusing `[]` with `\(\)`.

On OS X, 

```
echo whatever.tar.2.0.zip.tar.gz.tar.tgz | sed -E "s/(\.zip|\.tar|\.gz|\.tgz)*$//g"
```
works, while omitting `-E`

```
echo whatever.tar.2.0.zip.tar.gz.tar.tgz | sed "s/(\.zip|\.tar|\.gz|\.tgz)*$//g"
```
does not.



---

archive/issue_comments_277098.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\n> Your command works but is probably not what we want. The regular expression `[\\.zip|\\.tar|\\.gz]*` matches any string formed by the characters between the brackets, so it is equivalent to `[\\.ziptarg|]*`.\n\nArg... Yeah, it just doesn't work at all. Sorry `:-/`\n\nI'll try to find something else `:-/`\n\nNathann",
    "created_at": "2015-12-19T08:49:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277098",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:29" align="right">comment:29</div>

> Your command works but is probably not what we want. The regular expression `[\.zip|\.tar|\.gz]*` matches any string formed by the characters between the brackets, so it is equivalent to `[\.ziptarg|]*`.

Arg... Yeah, it just doesn't work at all. Sorry `:-/`

I'll try to find something else `:-/`

Nathann



---

archive/issue_comments_277099.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nOkay okay.. Can't find much better. Bash substitution would be very verbose too so, well. Let's stick with the ugly/long sed command `:-/`",
    "created_at": "2015-12-19T09:59:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277099",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:30" align="right">comment:30</div>

Okay okay.. Can't find much better. Bash substitution would be very verbose too so, well. Let's stick with the ugly/long sed command `:-/`



---

archive/issue_comments_277100.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n Here it is. It was not so tough, though the code is a bit clumsy.\n \n Nathann\n+\n+This ticket also updates our copy of bliss to use the original .zip file\n+http://www.tcs.hut.fi/Software/bliss/bliss-0.73.zip\n``````\n",
    "created_at": "2015-12-19T10:12:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277100",
    "user": "https://github.com/nathanncohen"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
 Here it is. It was not so tough, though the code is a bit clumsy.
 
 Nathann
+
+This ticket also updates our copy of bliss to use the original .zip file
+http://www.tcs.hut.fi/Software/bliss/bliss-0.73.zip
``````




---

archive/issue_comments_277101.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/19487](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/19487)** to **[public/19487](https://github.com/sagemath/sagetrac-mirror/tree/public/19487)**",
    "created_at": "2015-12-19T10:13:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277101",
    "user": "https://github.com/nathanncohen"
}
```

Changed branch from **[u/mkoeppe/19487](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/19487)** to **[public/19487](https://github.com/sagemath/sagetrac-mirror/tree/public/19487)**



---

archive/issue_comments_277102.json:
```json
{
    "body": "Changed commit from **[`7e464c1`](https://github.com/sagemath/sagetrac-mirror/commit/7e464c1a8bf37422e30b36f5b99ff6a7748e6606)** to **[`81b0e63`](https://github.com/sagemath/sagetrac-mirror/commit/81b0e6304a5f6374bcaf84481e07f66c1bf26d29)**",
    "created_at": "2015-12-19T10:13:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277102",
    "user": "https://github.com/nathanncohen"
}
```

Changed commit from **[`7e464c1`](https://github.com/sagemath/sagetrac-mirror/commit/7e464c1a8bf37422e30b36f5b99ff6a7748e6606)** to **[`81b0e63`](https://github.com/sagemath/sagetrac-mirror/commit/81b0e6304a5f6374bcaf84481e07f66c1bf26d29)**



---

archive/issue_comments_277103.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7552aec622492393705dfee6d3b9002989b41be8\"><code>7552aec</code></a></td><td><code>trac #19487: Merged with 6.10.rc2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81b0e6304a5f6374bcaf84481e07f66c1bf26d29\"><code>81b0e63</code></a></td><td><code>trac #19487: Use bliss' original upstream .zip file</code></td></tr></table>\n",
    "created_at": "2015-12-19T10:13:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277103",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:32"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7552aec622492393705dfee6d3b9002989b41be8"><code>7552aec</code></a></td><td><code>trac #19487: Merged with 6.10.rc2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81b0e6304a5f6374bcaf84481e07f66c1bf26d29"><code>81b0e63</code></a></td><td><code>trac #19487: Use bliss' original upstream .zip file</code></td></tr></table>




---

archive/issue_comments_277104.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nHello !\n\nI updated this ticket a bit in order to use the original .zip archive for the bliss package. It is the same version as the one we use, so it is not even a package update and there is no risk of anything. I used to test the ticket, and it works well: if you also agree with it, then we can get it merged.\n\nThanks,\n\nNathann",
    "created_at": "2015-12-19T10:14:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277104",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:33" align="right">comment:33</div>

Hello !

I updated this ticket a bit in order to use the original .zip archive for the bliss package. It is the same version as the one we use, so it is not even a package update and there is no risk of anything. I used to test the ticket, and it works well: if you also agree with it, then we can get it merged.

Thanks,

Nathann



---

archive/issue_comments_277105.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik, Matthias Koeppe**",
    "created_at": "2015-12-20T17:33:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277105",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik, Matthias Koeppe**



---

archive/issue_events_273758.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2015-12-20T17:33:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273758"
}
```



---

archive/issue_events_273759.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2015-12-20T17:33:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273759"
}
```



---

archive/issue_comments_277106.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nOK, good. I tested it with Sage 6.10  merged in, it works.\nI suppose the bliss zip file needs to be uploaded to the mirrors...",
    "created_at": "2015-12-20T17:33:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277106",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:34" align="right">comment:34</div>

OK, good. I tested it with Sage 6.10  merged in, it works.
I suppose the bliss zip file needs to be uploaded to the mirrors...



---

archive/issue_events_273760.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2015-12-20T17:33:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273760"
}
```



---

archive/issue_events_273761.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2015-12-20T17:33:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "milestone_number": null,
    "milestone_title": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273761"
}
```



---

archive/issue_comments_277107.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nby the way, isn't the option to do checksum of just one file broken?",
    "created_at": "2015-12-20T19:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277107",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:35" align="right">comment:35</div>

by the way, isn't the option to do checksum of just one file broken?



---

archive/issue_comments_277108.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nalso, no upstream/*bz2 files are checksum'ed anymore!",
    "created_at": "2015-12-20T20:03:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277108",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:36" align="right">comment:36</div>

also, no upstream/*bz2 files are checksum'ed anymore!



---

archive/issue_events_273762.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2015-12-20T20:03:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273762"
}
```



---

archive/issue_events_273763.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2015-12-20T20:03:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273763"
}
```



---

archive/issue_comments_277109.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nif seems to work if I apply\n\n```\ndiff --git a/src/bin/sage-fix-pkg-checksums b/src/bin/sage-fix-pkg-checksums\nindex 149f68f..f16fab7 100755\n--- a/src/bin/sage-fix-pkg-checksums\n+++ b/src/bin/sage-fix-pkg-checksums\n@@ -14,7 +14,7 @@ do\n     pkg_name=${tarball%%-*}\n     # Convert to lowercase for the directory name:\n     pkg_name_lc=`echo $pkg_name | tr '[:upper:]' '[:lower:]'`\n-    extension=$(echo $tarball | grep -o -E \"(.tar|.gz|.zip)*$\") # file extension (.tar,.tar.gz,.zip)\n+    extension=$(echo $tarball | grep -o -E \"(.tar|.gz|.bz2|.zip)*$\") # file extension (.tar,.tar.gz,.zip)\n     if [ -d \"$SAGE_ROOT/build/pkgs/$pkg_name_lc\" ]; then\n         sage_version=`cat \"$SAGE_ROOT/build/pkgs/$pkg_name_lc/package-version.txt\" | sed 's/\\.p[0-9][0-9]*$//'`\n         if [ ${tarball%$extension*} = \"$pkg_name-$sage_version\" ]; then\n```",
    "created_at": "2015-12-20T20:16:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277109",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:37" align="right">comment:37</div>

if seems to work if I apply

```
diff --git a/src/bin/sage-fix-pkg-checksums b/src/bin/sage-fix-pkg-checksums
index 149f68f..f16fab7 100755
--- a/src/bin/sage-fix-pkg-checksums
+++ b/src/bin/sage-fix-pkg-checksums
@@ -14,7 +14,7 @@ do
     pkg_name=${tarball%%-*}
     # Convert to lowercase for the directory name:
     pkg_name_lc=`echo $pkg_name | tr '[:upper:]' '[:lower:]'`
-    extension=$(echo $tarball | grep -o -E "(.tar|.gz|.zip)*$") # file extension (.tar,.tar.gz,.zip)
+    extension=$(echo $tarball | grep -o -E "(.tar|.gz|.bz2|.zip)*$") # file extension (.tar,.tar.gz,.zip)
     if [ -d "$SAGE_ROOT/build/pkgs/$pkg_name_lc" ]; then
         sage_version=`cat "$SAGE_ROOT/build/pkgs/$pkg_name_lc/package-version.txt" | sed 's/\.p[0-9][0-9]*$//'`
         if [ ${tarball%$extension*} = "$pkg_name-$sage_version" ]; then
```



---

archive/issue_comments_277110.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab96b271f093272132427b6c147c1704d2dc370f\"><code>ab96b27</code></a></td><td><code>trac #19487: bz2 file extension</code></td></tr></table>\n",
    "created_at": "2015-12-20T20:51:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277110",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab96b271f093272132427b6c147c1704d2dc370f"><code>ab96b27</code></a></td><td><code>trac #19487: bz2 file extension</code></td></tr></table>




---

archive/issue_comments_277111.json:
```json
{
    "body": "Changed commit from **[`81b0e63`](https://github.com/sagemath/sagetrac-mirror/commit/81b0e6304a5f6374bcaf84481e07f66c1bf26d29)** to **[`ab96b27`](https://github.com/sagemath/sagetrac-mirror/commit/ab96b271f093272132427b6c147c1704d2dc370f)**",
    "created_at": "2015-12-20T20:51:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277111",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`81b0e63`](https://github.com/sagemath/sagetrac-mirror/commit/81b0e6304a5f6374bcaf84481e07f66c1bf26d29)** to **[`ab96b27`](https://github.com/sagemath/sagetrac-mirror/commit/ab96b271f093272132427b6c147c1704d2dc370f)**



---

archive/issue_comments_277112.json:
```json
{
    "body": "Changed commit from **[`ab96b27`](https://github.com/sagemath/sagetrac-mirror/commit/ab96b271f093272132427b6c147c1704d2dc370f)** to **[`b8f4d6a`](https://github.com/sagemath/sagetrac-mirror/commit/b8f4d6af1650283791a53332e0b5a0eeacc46974)**",
    "created_at": "2015-12-20T20:52:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277112",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ab96b27`](https://github.com/sagemath/sagetrac-mirror/commit/ab96b271f093272132427b6c147c1704d2dc370f)** to **[`b8f4d6a`](https://github.com/sagemath/sagetrac-mirror/commit/b8f4d6af1650283791a53332e0b5a0eeacc46974)**



---

archive/issue_comments_277113.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8f4d6af1650283791a53332e0b5a0eeacc46974\"><code>b8f4d6a</code></a></td><td><code>trac #19487: bz2 file extension</code></td></tr></table>\n",
    "created_at": "2015-12-20T20:52:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277113",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8f4d6af1650283791a53332e0b5a0eeacc46974"><code>b8f4d6a</code></a></td><td><code>trac #19487: bz2 file extension</code></td></tr></table>




---

archive/issue_events_273764.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-12-20T20:53:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273764"
}
```



---

archive/issue_events_273765.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-12-20T20:53:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273765"
}
```



---

archive/issue_comments_277114.json:
```json
{
    "body": "Changed branch from **[public/19487](https://github.com/sagemath/sagetrac-mirror/tree/public/19487)** to **[`b8f4d6a`](https://github.com/sagemath/sagetrac-mirror/commit/b8f4d6af1650283791a53332e0b5a0eeacc46974)**",
    "created_at": "2015-12-22T19:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277114",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/19487](https://github.com/sagemath/sagetrac-mirror/tree/public/19487)** to **[`b8f4d6a`](https://github.com/sagemath/sagetrac-mirror/commit/b8f4d6af1650283791a53332e0b5a0eeacc46974)**



---

archive/issue_events_273766.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-22T19:49:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273766"
}
```



---

archive/issue_events_273767.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "64adf70f91d46d8cd895bd1b34e904dd19fffacb",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-12-22T19:49:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19487#event-273767"
}
```



---

archive/issue_comments_277115.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nSee #20120 for a followup: replace the uncompressing stuff with a Python script.",
    "created_at": "2016-02-26T04:52:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277115",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:42" align="right">comment:42</div>

See #20120 for a followup: replace the uncompressing stuff with a Python script.



---

archive/issue_comments_277116.json:
```json
{
    "body": "Changed commit from **[`b8f4d6a`](https://github.com/sagemath/sagetrac-mirror/commit/b8f4d6af1650283791a53332e0b5a0eeacc46974)** to none",
    "created_at": "2016-02-26T04:52:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19487#issuecomment-277116",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[`b8f4d6a`](https://github.com/sagemath/sagetrac-mirror/commit/b8f4d6af1650283791a53332e0b5a0eeacc46974)** to none
