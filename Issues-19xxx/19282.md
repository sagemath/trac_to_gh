# Issue 19282: Operators expander in categories

archive/issues_019045.json:
```json
{
    "body": "CC:  @zabrocki @nthiery @videlec\n\nIn Sage, mathematical structures as dendrifom algebras, algebras with internal product, scalar products, *etc* involve to implement operators in several class. For example, if I wish define a new amazing operator `foo` in the category `CategoryOfSomeWonderfulStructures`, I have to do:\n\n```python\n        class CategoryOfSomeWonderfulStructures(Category):\n\n            def super_categories(self):\n                return [...]\n\n            class ParentMethods:\n\n                def foo(self, I):\n                    '''\n                    My amazing unary operator with definition\n                    '''\n\n            class ElementMethods:\n\n                def foo(self):\n                    '''\n                    My amazing unary operator applied\n                    '''\n                    return self.parent().foo(self)\n\n            class WithRealizations(WithRealizationsCategory):\n                class ParentMethods:\n\n                    def foo(self, I):\n                        return self.a_realization().foo(I)\n\n            class Realizations(RealizationsCategory):\n                class ParentMethods:\n\n                    def foo_by_coercion(self, I):\n                         look for a good realization which knows how to foo\n\n\n            class WithBasis(CategoryWithAxiom_over_base_ring):\n                class ParentMethods:\n\n                    @abstract_method\n                    def foo_on_basis(self, i):\n                        pass\n\n                    def foo_by_linearity(self, I):\n                        return self.linear_combination(...)\n```\n\nI propose to provide two methods (one for unary operator and one other for binary operator) such that the implementation could be simplified to \n\n```python\n        class CategoryOfSomeWonderfulStructures(Category):\n\n            def super_categories(self):\n                return [...]\n\n            class ParentMethods:\n\n                def foo(self, I):\n                    '''\n                    My amazing unary operator with definition\n                    '''\n\n        expand_unary_operator(CategoryOfSomeWonderfulStructures, CategoryOfSomeWonderfulStructures.ParentMethods.foo)\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/19282\n\n",
    "created_at": "2015-09-24T19:23:24Z",
    "labels": [
        "component: categories"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "Operators expander in categories",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19282",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```
CC:  @zabrocki @nthiery @videlec

In Sage, mathematical structures as dendrifom algebras, algebras with internal product, scalar products, *etc* involve to implement operators in several class. For example, if I wish define a new amazing operator `foo` in the category `CategoryOfSomeWonderfulStructures`, I have to do:

```python
        class CategoryOfSomeWonderfulStructures(Category):

            def super_categories(self):
                return [...]

            class ParentMethods:

                def foo(self, I):
                    '''
                    My amazing unary operator with definition
                    '''

            class ElementMethods:

                def foo(self):
                    '''
                    My amazing unary operator applied
                    '''
                    return self.parent().foo(self)

            class WithRealizations(WithRealizationsCategory):
                class ParentMethods:

                    def foo(self, I):
                        return self.a_realization().foo(I)

            class Realizations(RealizationsCategory):
                class ParentMethods:

                    def foo_by_coercion(self, I):
                         look for a good realization which knows how to foo


            class WithBasis(CategoryWithAxiom_over_base_ring):
                class ParentMethods:

                    @abstract_method
                    def foo_on_basis(self, i):
                        pass

                    def foo_by_linearity(self, I):
                        return self.linear_combination(...)
```

I propose to provide two methods (one for unary operator and one other for binary operator) such that the implementation could be simplified to 

```python
        class CategoryOfSomeWonderfulStructures(Category):

            def super_categories(self):
                return [...]

            class ParentMethods:

                def foo(self, I):
                    '''
                    My amazing unary operator with definition
                    '''

        expand_unary_operator(CategoryOfSomeWonderfulStructures, CategoryOfSomeWonderfulStructures.ParentMethods.foo)
```

Issue created by migration from https://trac.sagemath.org/ticket/19282





---

archive/issue_comments_260977.json:
```json
{
    "body": "I don't put it in need review because my english documentation is poor but... my code and my test should be good. \nSo... please improve my english :-).\n\n(And if you think that the code could be factorize to use one function parameterize by the arity... do it!!!)",
    "created_at": "2015-09-24T19:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19282#issuecomment-260977",
    "user": "https://trac.sagemath.org/admin/accounts/users/elixyre"
}
```

I don't put it in need review because my english documentation is poor but... my code and my test should be good. 
So... please improve my english :-).

(And if you think that the code could be factorize to use one function parameterize by the arity... do it!!!)



---

archive/issue_comments_260978.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-09-25T03:25:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19282#issuecomment-260978",
    "user": "https://github.com/zabrocki"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_260979.json:
```json
{
    "body": "A number of previously implemented Hopf algebras could be greatly simplified with this code.  In QSym alone the methods: `internal_product`, `skew_by`, `duality_pairing`, `degree_negation`, `counit`, and probably a few others follow this pattern.",
    "created_at": "2015-09-25T03:25:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19282",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19282#issuecomment-260979",
    "user": "https://github.com/zabrocki"
}
```

A number of previously implemented Hopf algebras could be greatly simplified with this code.  In QSym alone the methods: `internal_product`, `skew_by`, `duality_pairing`, `degree_negation`, `counit`, and probably a few others follow this pattern.
