# Issue 19048: AsymptoticRing: an_element

archive/issues_018811.json:
```json
{
    "body": "Implement `.an_element` and `.some_elements`.\n\nSee also meta-ticket #17601.\n\nCC:  @behackl\n\nKeywords: asymptotics\n\nBranch/Commit: 617c5933907d132785ee1052473dfa808350ec04\n\nReviewer: Benjamin Hackl, Clemens Heuberger\n\nAuthor: Daniel Krenn\n\nDependencies: #17716, #19047, #19068, #19319\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19048\n\n",
    "closed_at": "2015-10-14T00:59:30Z",
    "created_at": "2015-08-17T19:33:59Z",
    "labels": [
        "component: asymptotic expansions"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "AsymptoticRing: an_element",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19048",
    "user": "https://github.com/dkrenn"
}
```
Implement `.an_element` and `.some_elements`.

See also meta-ticket #17601.

CC:  @behackl

Keywords: asymptotics

Branch/Commit: 617c5933907d132785ee1052473dfa808350ec04

Reviewer: Benjamin Hackl, Clemens Heuberger

Author: Daniel Krenn

Dependencies: #17716, #19047, #19068, #19319

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19048





---

archive/issue_comments_273770.json:
```json
{
    "body": "<a id='comment:2'></a>Last 10 new commits:",
    "created_at": "2015-08-17T19:35:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273770",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:2'></a>Last 10 new commits:



---

archive/issue_comments_273771.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n Implement \\`.an_element\\` and \\`.some_elements\\`.\n+\n+See also meta-ticket #17601.\n \n Dependencies: #17716, #19047\n \n```\n",
    "created_at": "2015-08-17T19:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273771",
    "user": "https://github.com/dkrenn"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,6 @@
 Implement \`.an_element\` and \`.some_elements\`.
+
+See also meta-ticket #17601.
 
 Dependencies: #17716, #19047
 
```




---

archive/issue_comments_273772.json:
```json
{
    "body": "<a id='comment:4'></a>I've reviewed your changes, merged the latest `asy/asymptoticExpression` into this branch and applied a tiny reviewer's patch (somehow, `'exact` was pasted where it definitely should not). In principal, everything looks good to me and the doctests pass.\n\nHowever, do you think that `asymptotic_term.py` really is the best place for the `product_diagonal` function? I do understand that it is required as a helper function there -- but nevertheless, from my point of view, the function is sufficiently general so that it could also live, for example, in `src/sage/misc/misc.py`.\n\nWhat do you think?\n\n---\nLast 10 new commits:",
    "created_at": "2015-08-17T20:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273772",
    "user": "https://github.com/behackl"
}
```

<a id='comment:4'></a>I've reviewed your changes, merged the latest `asy/asymptoticExpression` into this branch and applied a tiny reviewer's patch (somehow, `'exact` was pasted where it definitely should not). In principal, everything looks good to me and the doctests pass.

However, do you think that `asymptotic_term.py` really is the best place for the `product_diagonal` function? I do understand that it is required as a helper function there -- but nevertheless, from my point of view, the function is sufficiently general so that it could also live, for example, in `src/sage/misc/misc.py`.

What do you think?

---
Last 10 new commits:



---

archive/issue_comments_273773.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:4 behackl]:\n> I've reviewed your changes, merged the latest `asy/asymptoticExpression` into this branch and applied a tiny reviewer's patch (somehow, `'exact` was pasted where it definitely should not). In principal, everything looks good to me and the doctests pass.\n\n\nThanks.\n\n> However, do you think that `asymptotic_term.py` really is the best place for the `product_diagonal` function? I do understand that it is required as a helper function there -- but nevertheless, from my point of view, the function is sufficiently general so that it could also live, for example, in `src/sage/misc/misc.py`.\n\n\nI would keep it here, as it is needed (at the moment) only here.\n\n---\nLast 10 new commits:",
    "created_at": "2015-08-21T11:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273773",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:6'></a>Replying to [comment:4 behackl]:
> I've reviewed your changes, merged the latest `asy/asymptoticExpression` into this branch and applied a tiny reviewer's patch (somehow, `'exact` was pasted where it definitely should not). In principal, everything looks good to me and the doctests pass.


Thanks.

> However, do you think that `asymptotic_term.py` really is the best place for the `product_diagonal` function? I do understand that it is required as a helper function there -- but nevertheless, from my point of view, the function is sufficiently general so that it could also live, for example, in `src/sage/misc/misc.py`.


I would keep it here, as it is needed (at the moment) only here.

---
Last 10 new commits:



---

archive/issue_comments_273774.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-08-21T11:13:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273774",
    "user": "https://github.com/dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_273775.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-09T15:23:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273775",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273776.json:
```json
{
    "body": "<a id='comment:9'></a>Merged 6.9.beta5",
    "created_at": "2015-09-09T15:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273776",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:9'></a>Merged 6.9.beta5



---

archive/issue_comments_273777.json:
```json
{
    "body": "Changing component from symbolics to asymptotic expansions.",
    "created_at": "2015-09-15T17:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273777",
    "user": "https://github.com/dkrenn"
}
```

Changing component from symbolics to asymptotic expansions.



---

archive/issue_comments_273778.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-16T07:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273778",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273779.json:
```json
{
    "body": "<a id='comment:12'></a>Merged positively reviewed dependencies into this branch and fixed a simple conflict.\n\n---\nLast 10 new commits:",
    "created_at": "2015-09-23T10:43:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273779",
    "user": "https://github.com/behackl"
}
```

<a id='comment:12'></a>Merged positively reviewed dependencies into this branch and fixed a simple conflict.

---
Last 10 new commits:



---

archive/issue_comments_273780.json:
```json
{
    "body": "<a id='comment:13'></a>Perhaps the name `product_diagonal` could be changed to refer to the [Cantor pairing function](https://en.wikipedia.org/wiki/Pairing_function#Cantor_pairing_function)?\n\nThere is a module on [multidimensional enumeration](http://doc.sagemath.org/html/en/reference/misc/sage/misc/mrange.html), but apparently, it only deals with finite iterators.",
    "created_at": "2015-09-29T16:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273780",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:13'></a>Perhaps the name `product_diagonal` could be changed to refer to the [Cantor pairing function](https://en.wikipedia.org/wiki/Pairing_function#Cantor_pairing_function)?

There is a module on [multidimensional enumeration](http://doc.sagemath.org/html/en/reference/misc/sage/misc/mrange.html), but apparently, it only deals with finite iterators.



---

archive/issue_comments_273781.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 cheuberg]:\n> Perhaps the name `product_diagonal` could be changed to refer to the [Cantor pairing function](https://en.wikipedia.org/wiki/Pairing_function#Cantor_pairing_function)?\n> \n> There is a module on [multidimensional enumeration](http://doc.sagemath.org/html/en/reference/misc/sage/misc/mrange.html), but apparently, it only deals with finite iterators.\n\n\nfollow up #19319 (is now a dependency of this ticket).",
    "created_at": "2015-09-30T12:06:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273781",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:14'></a>Replying to [comment:13 cheuberg]:
> Perhaps the name `product_diagonal` could be changed to refer to the [Cantor pairing function](https://en.wikipedia.org/wiki/Pairing_function#Cantor_pairing_function)?
> 
> There is a module on [multidimensional enumeration](http://doc.sagemath.org/html/en/reference/misc/sage/misc/mrange.html), but apparently, it only deals with finite iterators.


follow up #19319 (is now a dependency of this ticket).



---

archive/issue_comments_273782.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-30T12:28:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273782",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_273783.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-09-30T14:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273783",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_273784.json:
```json
{
    "body": "<a id='comment:18'></a>Doctests pass on `6.9.beta5`. On `6.9.rc0`, they do not (cf. patchbot). After merging all dependencies into `6.9.rc0`, there is still one failing doctest:\n\n```\nsage -t src/sage/rings/asymptotic/asymptotic_ring.py\n**********************************************************************\nFile \"src/sage/rings/asymptotic/asymptotic_ring.py\", line 655, in sage.rings.asymptotic.asymptotic_ring.AsymptoticExpression.__pow__\nFailed example:\n    (y^2+O(y))^(-2)\nExpected:\n    Traceback (most recent call last):\n    ...\n    TypeError: unsupported operand parent(s) for '/':\n    'Asymptotic Ring <y^ZZ> over Integer Ring' and 'Asymptotic\n    Ring <y^ZZ> over Integer Ring'\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n    ...\n    CoercionException: Infinite loop in action of Integer Ring (parent <type 'sage.rings.integer_ring.IntegerRing_class'>) and Asymptotic Ring <y^ZZ> over Integer Ring (parent <class 'sage.rings.asymptotic.asymptotic_ring.AsymptoticRing_with_category'>)!\n\n```",
    "created_at": "2015-09-30T14:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273784",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:18'></a>Doctests pass on `6.9.beta5`. On `6.9.rc0`, they do not (cf. patchbot). After merging all dependencies into `6.9.rc0`, there is still one failing doctest:

```
sage -t src/sage/rings/asymptotic/asymptotic_ring.py
**********************************************************************
File "src/sage/rings/asymptotic/asymptotic_ring.py", line 655, in sage.rings.asymptotic.asymptotic_ring.AsymptoticExpression.__pow__
Failed example:
    (y^2+O(y))^(-2)
Expected:
    Traceback (most recent call last):
    ...
    TypeError: unsupported operand parent(s) for '/':
    'Asymptotic Ring <y^ZZ> over Integer Ring' and 'Asymptotic
    Ring <y^ZZ> over Integer Ring'
Got:
    <BLANKLINE>
    Traceback (most recent call last):
    ...
    CoercionException: Infinite loop in action of Integer Ring (parent <type 'sage.rings.integer_ring.IntegerRing_class'>) and Asymptotic Ring <y^ZZ> over Integer Ring (parent <class 'sage.rings.asymptotic.asymptotic_ring.AsymptoticRing_with_category'>)!

```



---

archive/issue_comments_273785.json:
```json
{
    "body": "<a id='comment:19'></a>Merging #19068 would solve the problem, but perhaps you could have a look whether there is some deeper problem before.",
    "created_at": "2015-09-30T15:02:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273785",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:19'></a>Merging #19068 would solve the problem, but perhaps you could have a look whether there is some deeper problem before.



---

archive/issue_comments_273786.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-10-01T06:37:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273786",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_273787.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-10-01T06:41:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273787",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_273788.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-10-01T06:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273788",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_273789.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:19 cheuberg]:\n> Merging #19068 would solve the problem, but perhaps you could have a look whether there is some deeper problem before.\n\n\nMerging #19068 is fine.",
    "created_at": "2015-10-01T06:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273789",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:23'></a>Replying to [comment:19 cheuberg]:
> Merging #19068 would solve the problem, but perhaps you could have a look whether there is some deeper problem before.


Merging #19068 is fine.



---

archive/issue_comments_273790.json:
```json
{
    "body": "<a id='comment:24'></a>#19319 now has completely new code which is guaranteed to produce merge conflicts here.",
    "created_at": "2015-10-02T17:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273790",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:24'></a>#19319 now has completely new code which is guaranteed to produce merge conflicts here.



---

archive/issue_comments_273791.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-10-02T17:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273791",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_273792.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-10-03T07:19:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273792",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_273793.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-10-03T07:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273793",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_273794.json:
```json
{
    "body": "<a id='comment:27'></a>I reviewed this code before #19319 had been factored out and did not have any objections to the part which is still in this ticket.\n\nReplying to [comment:24 cheuberg]:\n> #19319 now has completely new code which is guaranteed to produce merge conflicts here.\n\n\nI now reverted all changes by the old branch of #19319, merged the new branch of #19319 and fixed code and doctests here.\n\nPlease cross-review this revert+merge+fix and set the ticket to `positive_review` if you are satisfied.",
    "created_at": "2015-10-03T07:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273794",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:27'></a>I reviewed this code before #19319 had been factored out and did not have any objections to the part which is still in this ticket.

Replying to [comment:24 cheuberg]:
> #19319 now has completely new code which is guaranteed to produce merge conflicts here.


I now reverted all changes by the old branch of #19319, merged the new branch of #19319 and fixed code and doctests here.

Please cross-review this revert+merge+fix and set the ticket to `positive_review` if you are satisfied.



---

archive/issue_comments_273795.json:
```json
{
    "body": "<a id='comment:28'></a>Thanks for your review and the merge of the changes at #19319. I cross-checked everything; your changes look fine; documentation builds and doctests pass.\n\nTogether with your previous review, this is `positive_review`.",
    "created_at": "2015-10-05T10:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273795",
    "user": "https://github.com/behackl"
}
```

<a id='comment:28'></a>Thanks for your review and the merge of the changes at #19319. I cross-checked everything; your changes look fine; documentation builds and doctests pass.

Together with your previous review, this is `positive_review`.



---

archive/issue_comments_273796.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-10-05T10:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273796",
    "user": "https://github.com/behackl"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_273797.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-10-14T00:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19048#issuecomment-273797",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_053000.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-10-14T00:59:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19048",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19048#event-53000"
}
```
