# Issue 19799: numerical approximation of zeta involving symbolic constants fails

archive/issues_019562.json:
```json
{
    "body": "when evaluating `zeta(s)` numerically at arguments where symbolic constants like `pi`, `sqrt(2)`, `log(2)` etc... are involved, it raises an error (in contrast to `gamma(s)`):\n\n```\nsage: gamma(pi).n()\n2.28803779534003\nsage: zeta(pi).n()\nTraceback (most recent call last):\n...\nTypeError: cannot evaluate symbolic expression numerically\n```\n\nor, similarly\n\n```\nsage: gamma(sqrt(2)).n()\n0.886581428719259\nsage: zeta(sqrt(2)).n()\nTraceback (most recent call last):\n...\nTypeError: cannot evaluate symbolic expression numerically\n```\n\nand so on.\n\nSee https://github.com/pynac/pynac/issues/115\n\nSince this is fixed in Sage now, this ticket should provide doctests.\n\n**CC:**  @rwst\n\n**Branch/Commit:** [30e82b04fb9137b0382717524d13b754a5eb773d](https://github.com/sagemath/sagetrac-mirror/commit/30e82b04fb9137b0382717524d13b754a5eb773d)\n\n**Upstream:** Fixed upstream, in a later stable release.\n\n**Reviewer:** Vincent Delecroix\n\n**Author:** Benjamin Hackl\n\n**Dependencies:** #19819\n\nIssue created by migration from https://trac.sagemath.org/ticket/19799\n\n",
    "closed_at": "2016-01-20T10:19:59Z",
    "created_at": "2015-12-29T18:03:38Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.0",
    "title": "numerical approximation of zeta involving symbolic constants fails",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/19799",
    "user": "https://github.com/behackl"
}
```
when evaluating `zeta(s)` numerically at arguments where symbolic constants like `pi`, `sqrt(2)`, `log(2)` etc... are involved, it raises an error (in contrast to `gamma(s)`):

```
sage: gamma(pi).n()
2.28803779534003
sage: zeta(pi).n()
Traceback (most recent call last):
...
TypeError: cannot evaluate symbolic expression numerically
```

or, similarly

```
sage: gamma(sqrt(2)).n()
0.886581428719259
sage: zeta(sqrt(2)).n()
Traceback (most recent call last):
...
TypeError: cannot evaluate symbolic expression numerically
```

and so on.

See https://github.com/pynac/pynac/issues/115

Since this is fixed in Sage now, this ticket should provide doctests.

**CC:**  @rwst

**Branch/Commit:** [30e82b04fb9137b0382717524d13b754a5eb773d](https://github.com/sagemath/sagetrac-mirror/commit/30e82b04fb9137b0382717524d13b754a5eb773d)

**Upstream:** Fixed upstream, in a later stable release.

**Reviewer:** Vincent Delecroix

**Author:** Benjamin Hackl

**Dependencies:** #19819

Issue created by migration from https://trac.sagemath.org/ticket/19799





---

archive/issue_comments_285414.json:
```json
{
    "body": "<a id='comment:1'></a>\nCould this be caused by any chance by the line\n\n```\ndo_not_evalf_params().\n```\n\nin the [registration of zeta in pynac, inifcns_nstdsums.cpp, line 3836ff](https://github.com/pynac/pynac/blob/7e32cd6755eb16d59f5dab81e2e40300f7eff7e8/ginac/inifcns_nstdsums.cpp#L3842)?",
    "created_at": "2015-12-29T18:09:02Z",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19799#issuecomment-285414",
    "user": "https://github.com/behackl"
}
```

<a id='comment:1'></a>
Could this be caused by any chance by the line

```
do_not_evalf_params().
```

in the [registration of zeta in pynac, inifcns_nstdsums.cpp, line 3836ff](https://github.com/pynac/pynac/blob/7e32cd6755eb16d59f5dab81e2e40300f7eff7e8/ginac/inifcns_nstdsums.cpp#L3842)?



---

archive/issue_comments_285415.json:
```json
{
    "body": "<a id='comment:2'></a>\nReplying to [behackl](#comment%3A1):\n> Could this be caused by any chance by the line\n> \n> ```\n> do_not_evalf_params().\n> ```\n> \n> in the [registration of zeta in pynac, inifcns_nstdsums.cpp, line 3836ff](https://github.com/pynac/pynac/blob/7e32cd6755eb16d59f5dab81e2e40300f7eff7e8/ginac/inifcns_nstdsums.cpp#L3842)?\n\nYes, there appears to be a conceptual problem in that file because when I remove that option the `zeta` problem goes away but then `polylog` complains:\n\n```\nsage: polylog(sqrt(2),1).n()\n3.02073767948603\npolylog(4, 2).n()\n...\nTypeError: cannot evaluate symbolic expression numerically\n```",
    "created_at": "2015-12-30T06:33:41Z",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19799#issuecomment-285415",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'></a>
Replying to [behackl](#comment%3A1):
> Could this be caused by any chance by the line
> 
> ```
> do_not_evalf_params().
> ```
> 
> in the [registration of zeta in pynac, inifcns_nstdsums.cpp, line 3836ff](https://github.com/pynac/pynac/blob/7e32cd6755eb16d59f5dab81e2e40300f7eff7e8/ginac/inifcns_nstdsums.cpp#L3842)?

Yes, there appears to be a conceptual problem in that file because when I remove that option the `zeta` problem goes away but then `polylog` complains:

```
sage: polylog(sqrt(2),1).n()
3.02073767948603
polylog(4, 2).n()
...
TypeError: cannot evaluate symbolic expression numerically
```



---

archive/issue_comments_285416.json:
```json
{
    "body": "**Upstream:** Reported upstream. Developers acknowledge bug.",
    "created_at": "2015-12-30T06:39:04Z",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19799#issuecomment-285416",
    "user": "https://github.com/rwst"
}
```

**Upstream:** Reported upstream. Developers acknowledge bug.



---

archive/issue_comments_285417.json:
```json
{
    "body": "<a id='comment:3'></a>\nAh ok, I had to remove the option specifically for `zeta`. Expect the fix in pynac-0.5.4.",
    "created_at": "2015-12-30T06:39:04Z",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19799#issuecomment-285417",
    "user": "https://github.com/rwst"
}
```

<a id='comment:3'></a>
Ah ok, I had to remove the option specifically for `zeta`. Expect the fix in pynac-0.5.4.



---

archive/issue_comments_285418.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -21,3 +21,5 @@\n ```\n \n and so on.\n+\n+See https://github.com/pynac/pynac/issues/115\n``````\n",
    "created_at": "2015-12-30T07:07:30Z",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19799#issuecomment-285418",
    "user": "https://github.com/rwst"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -21,3 +21,5 @@
 ```
 
 and so on.
+
+See https://github.com/pynac/pynac/issues/115
``````




---

archive/issue_comments_285419.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. Developers acknowledge bug.\" to \"Fixed upstream, in a later stable release.\".",
    "created_at": "2015-12-30T07:07:30Z",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19799#issuecomment-285419",
    "user": "https://github.com/rwst"
}
```

**Changing upstream** from "Reported upstream. Developers acknowledge bug." to "Fixed upstream, in a later stable release.".



---

archive/issue_comments_285420.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [rws](#comment%3A3):\n> Ah ok, I had to remove the option specifically for `zeta`. Expect the fix in pynac-0.5.4.\n\n\nthat was fast -- thank you! :-)\n\nI'll let this ticket rest and add a doctest in `functions/transcendental.py` after the update to pynac-0.5.4.",
    "created_at": "2015-12-30T11:03:54Z",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19799#issuecomment-285420",
    "user": "https://github.com/behackl"
}
```

<a id='comment:5'></a>
Replying to [rws](#comment%3A3):
> Ah ok, I had to remove the option specifically for `zeta`. Expect the fix in pynac-0.5.4.


that was fast -- thank you! :-)

I'll let this ticket rest and add a doctest in `functions/transcendental.py` after the update to pynac-0.5.4.



---

archive/issue_comments_285421.json:
```json
{
    "body": "<a id='comment:6'></a>\nFixed by update to Pynac 0.6.0 at #19819?",
    "created_at": "2016-01-13T09:30:10Z",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19799#issuecomment-285421",
    "user": "https://github.com/slel"
}
```

<a id='comment:6'></a>
Fixed by update to Pynac 0.6.0 at #19819?



---

archive/issue_comments_285422.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -23,3 +23,5 @@\n and so on.\n \n See https://github.com/pynac/pynac/issues/115\n+\n+Since this is fixed in Sage now, this ticket should provide doctests.\n``````\n",
    "created_at": "2016-01-13T09:38:33Z",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19799#issuecomment-285422",
    "user": "https://github.com/rwst"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -23,3 +23,5 @@
 and so on.
 
 See https://github.com/pynac/pynac/issues/115
+
+Since this is fixed in Sage now, this ticket should provide doctests.
``````




---

archive/issue_events_177831.json:
```json
{
    "actor": "https://github.com/behackl",
    "created_at": "2016-01-16T21:55:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19799#event-177831"
}
```



---

archive/issue_comments_285423.json:
```json
{
    "body": "**Commit:** [30e82b04fb9137b0382717524d13b754a5eb773d](https://github.com/sagemath/sagetrac-mirror/commit/30e82b04fb9137b0382717524d13b754a5eb773d)",
    "created_at": "2016-01-16T21:55:23Z",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19799#issuecomment-285423",
    "user": "https://github.com/behackl"
}
```

**Commit:** [30e82b04fb9137b0382717524d13b754a5eb773d](https://github.com/sagemath/sagetrac-mirror/commit/30e82b04fb9137b0382717524d13b754a5eb773d)



---

archive/issue_comments_285424.json:
```json
{
    "body": "**Dependencies:** #19819",
    "created_at": "2016-01-16T21:55:23Z",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19799#issuecomment-285424",
    "user": "https://github.com/behackl"
}
```

**Dependencies:** #19819



---

archive/issue_comments_285425.json:
```json
{
    "body": "**Branch:** [u/behackl/symbolics/zeta-numerical](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/symbolics/zeta-numerical)",
    "created_at": "2016-01-16T21:55:23Z",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19799#issuecomment-285425",
    "user": "https://github.com/behackl"
}
```

**Branch:** [u/behackl/symbolics/zeta-numerical](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/symbolics/zeta-numerical)



---

archive/issue_comments_285426.json:
```json
{
    "body": "<a id='comment:8'></a>\n... added two doctests, `needs_review`.\n  \n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30e82b04fb9137b0382717524d13b754a5eb773d\">30e82b0</a></td><td><code>add doctests for n() of zeta at symbolic constant</code></td></tr></table>\n",
    "created_at": "2016-01-16T21:55:23Z",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19799#issuecomment-285426",
    "user": "https://github.com/behackl"
}
```

<a id='comment:8'></a>
... added two doctests, `needs_review`.
  
---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30e82b04fb9137b0382717524d13b754a5eb773d">30e82b0</a></td><td><code>add doctests for n() of zeta at symbolic constant</code></td></tr></table>




---

archive/issue_comments_285427.json:
```json
{
    "body": "**Author:** Benjamin Hackl",
    "created_at": "2016-01-16T21:55:23Z",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19799#issuecomment-285427",
    "user": "https://github.com/behackl"
}
```

**Author:** Benjamin Hackl



---

archive/issue_events_177832.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-01-17T03:48:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19799#event-177832"
}
```



---

archive/issue_events_177833.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-01-17T03:48:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19799#event-177833"
}
```



---

archive/issue_comments_285428.json:
```json
{
    "body": "**Reviewer:** Vincent Delecroix",
    "created_at": "2016-01-17T03:48:47Z",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19799#issuecomment-285428",
    "user": "https://github.com/videlec"
}
```

**Reviewer:** Vincent Delecroix



---

archive/issue_events_177834.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-20T10:19:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19799#event-177834"
}
```



---

archive/issue_events_177835.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-20T10:19:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19799#event-177835"
}
```



---

archive/issue_comments_285429.json:
```json
{
    "body": "**Changing branch** from \"[u/behackl/symbolics/zeta-numerical](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/symbolics/zeta-numerical)\" to \"[30e82b04fb9137b0382717524d13b754a5eb773d](https://github.com/sagemath/sagetrac-mirror/commit/30e82b04fb9137b0382717524d13b754a5eb773d)\".",
    "created_at": "2016-01-20T10:19:59Z",
    "issue": "https://github.com/sagemath/sage/issues/19799",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19799#issuecomment-285429",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/behackl/symbolics/zeta-numerical](https://github.com/sagemath/sagetrac-mirror/tree/u/behackl/symbolics/zeta-numerical)" to "[30e82b04fb9137b0382717524d13b754a5eb773d](https://github.com/sagemath/sagetrac-mirror/commit/30e82b04fb9137b0382717524d13b754a5eb773d)".
