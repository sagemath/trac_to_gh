# Issue 19612: Use PYTHONUSERBASE

archive/issues_019375.json:
```json
{
    "body": "Use `PYTHONUSERBASE` instead of `PYTHONNOUSERSITE`\n\nCC:  @NathanDunfield @vbraun\n\nBranch/Commit: 813862ad6a89de8a0559a9d6da693bab07fb511d\n\nReviewer: Volker Braun\n\nAuthor: Matthias Goerner\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19612\n\n",
    "closed_at": "2016-02-29T19:05:22Z",
    "created_at": "2015-11-21T20:02:52Z",
    "labels": [
        "component: misc"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Use PYTHONUSERBASE",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19612",
    "user": "https://github.com/williamstein"
}
```
Use `PYTHONUSERBASE` instead of `PYTHONNOUSERSITE`

CC:  @NathanDunfield @vbraun

Branch/Commit: 813862ad6a89de8a0559a9d6da693bab07fb511d

Reviewer: Volker Braun

Author: Matthias Goerner

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19612





---

archive/issue_comments_265898.json:
```json
{
    "body": "<a id='comment:1'></a>Suggestion:\n#14243 was originally included to avoid interference from installation done outside of `sage`. Something `SMC` and `sage-on-gentoo` don't really have to worry about. A middle ground could be to have `sage`'s python to look for user installed packages in `DOT_SAGE/site-packages`.",
    "created_at": "2015-11-21T20:23:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19612#issuecomment-265898",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:1'></a>Suggestion:
#14243 was originally included to avoid interference from installation done outside of `sage`. Something `SMC` and `sage-on-gentoo` don't really have to worry about. A middle ground could be to have `sage`'s python to look for user installed packages in `DOT_SAGE/site-packages`.



---

archive/issue_comments_265899.json:
```json
{
    "body": "<a id='comment:2'></a>Replying to [comment:1 fbissey]:\n> Suggestion:\n> #14243 was originally included to avoid interference from installation done outside of `sage`. \n\n\nI realize that.  Yet how many people reported problems with this -- one over 10 years?  I think we should revert #14243, and instead just add something to the FAQ about `export PYTHONNOUSERSITE=yes`.  If somebody really does have ~/.local/ stuff that is interfering with sage's python, they could set `export PYTHONNOUSERSITE=yes` themselves easily enough.",
    "created_at": "2015-11-22T00:54:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19612#issuecomment-265899",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:2'></a>Replying to [comment:1 fbissey]:
> Suggestion:
> #14243 was originally included to avoid interference from installation done outside of `sage`. 


I realize that.  Yet how many people reported problems with this -- one over 10 years?  I think we should revert #14243, and instead just add something to the FAQ about `export PYTHONNOUSERSITE=yes`.  If somebody really does have ~/.local/ stuff that is interfering with sage's python, they could set `export PYTHONNOUSERSITE=yes` themselves easily enough.



---

archive/issue_comments_265900.json:
```json
{
    "body": "<a id='comment:3'></a>I agree with William that #14243 was a mistake.  I make heavy use of the user site-packages directory when working with Sage, so #14243 causes a lot of problems for me.  I think it would be great to revert #14243 now, hopefully making it into Sage 6.10.  \n\nIn the long term, having Sage's user site-packages be in a nonstandard location (for example `DOT_SAGE/site-packages` as suggested above) has no negatives that I can see and would make things more robust in certain cases.  On OS X, this is already effectively the case, since any frameworks build of Python (e.g. the system Python or the one from Python.org) uses  `~/Library/Python/2.7/lib/python/site-packages` rather than `~/.local/lib/python/site-packages` as the default user site-packages directory.",
    "created_at": "2015-11-23T13:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19612#issuecomment-265900",
    "user": "https://github.com/NathanDunfield"
}
```

<a id='comment:3'></a>I agree with William that #14243 was a mistake.  I make heavy use of the user site-packages directory when working with Sage, so #14243 causes a lot of problems for me.  I think it would be great to revert #14243 now, hopefully making it into Sage 6.10.  

In the long term, having Sage's user site-packages be in a nonstandard location (for example `DOT_SAGE/site-packages` as suggested above) has no negatives that I can see and would make things more robust in certain cases.  On OS X, this is already effectively the case, since any frameworks build of Python (e.g. the system Python or the one from Python.org) uses  `~/Library/Python/2.7/lib/python/site-packages` rather than `~/.local/lib/python/site-packages` as the default user site-packages directory.



---

archive/issue_comments_265901.json:
```json
{
    "body": "<a id='comment:5'></a>I don't object to reverting #14243. One disadvantage to putting Sage's packages in a non-standard location is that users might need to install them twice: once for the system Python and once for Sage. This would not be what people expect. I don't know that much about the Python packaging system; can we have Sage's Python look in several different places for packages (`$DOT_SAGE/site-package` and also unless some Sage-specific environment variable is set, `~/.local/lib/python/site-packages` and/or `~/Library/Python/2.7/lib/python/site-packages`)?",
    "created_at": "2015-11-23T17:41:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19612#issuecomment-265901",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>I don't object to reverting #14243. One disadvantage to putting Sage's packages in a non-standard location is that users might need to install them twice: once for the system Python and once for Sage. This would not be what people expect. I don't know that much about the Python packaging system; can we have Sage's Python look in several different places for packages (`$DOT_SAGE/site-package` and also unless some Sage-specific environment variable is set, `~/.local/lib/python/site-packages` and/or `~/Library/Python/2.7/lib/python/site-packages`)?



---

archive/issue_comments_265902.json:
```json
{
    "body": "<a id='comment:6'></a>I am not affected by this exact issue, but pretty much the same one had to be dealt with for enabling R plotting in SageMathCell. So I am of the opinion that Sage should not interfere with users trying to install extra packages (or config files) for its components. For collisions happening because of this, it would be nice to have clear instructions on how to proceed, but no need for silent preventive actions.",
    "created_at": "2015-11-24T21:51:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19612#issuecomment-265902",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:6'></a>I am not affected by this exact issue, but pretty much the same one had to be dealt with for enabling R plotting in SageMathCell. So I am of the opinion that Sage should not interfere with users trying to install extra packages (or config files) for its components. For collisions happening because of this, it would be nice to have clear instructions on how to proceed, but no need for silent preventive actions.



---

archive/issue_comments_265903.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-02-24T03:26:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19612#issuecomment-265903",
    "user": "https://github.com/unhyperbolic"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_265904.json:
```json
{
    "body": "<a id='comment:8'></a>New commits:",
    "created_at": "2016-02-24T03:26:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19612#issuecomment-265904",
    "user": "https://github.com/unhyperbolic"
}
```

<a id='comment:8'></a>New commits:



---

archive/issue_comments_265905.json:
```json
{
    "body": "<a id='comment:11'></a>Author name must be real name",
    "created_at": "2016-02-25T14:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19612#issuecomment-265905",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'></a>Author name must be real name



---

archive/issue_comments_265906.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-28T17:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19612#issuecomment-265906",
    "user": "https://github.com/NathanDunfield"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_265907.json:
```json
{
    "body": "<a id='comment:14'></a>Tried it out, and it works as advertised.  Setting status to positive review.",
    "created_at": "2016-02-28T17:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19612#issuecomment-265907",
    "user": "https://github.com/NathanDunfield"
}
```

<a id='comment:14'></a>Tried it out, and it works as advertised.  Setting status to positive review.



---

archive/issue_events_053920.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-29T19:05:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19612",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19612#event-53920"
}
```



---

archive/issue_comments_265908.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-02-29T19:05:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19612",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19612#issuecomment-265908",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
