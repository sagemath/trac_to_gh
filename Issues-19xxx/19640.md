# Issue 19640: Do not drop LDFLAGS

archive/issues_019403.json:
```json
{
    "assignees": [],
    "body": "A couple of simple fixes to not drop LDFLAGS on the floor when building.\n\n\n\nCC:  @jdemeyer @kiwifb\n\nBranch: **[618651e](https://github.com/sagemath/sagetrac-mirror/commit/618651e0db7fdd4eeb94a3aef3811de877e3df8e)**\n\nReviewer: **Fran\u00e7ois Bissey**\n\nAuthor: **Volker Braun**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19640_\n\n",
    "closed_at": "2015-11-30T23:09:32Z",
    "created_at": "2015-11-29T12:46:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Do not drop LDFLAGS",
    "type": "issue",
    "updated_at": "2015-12-13T20:19:55Z",
    "url": "https://github.com/sagemath/sage/issues/19640",
    "user": "https://github.com/vbraun"
}
```
A couple of simple fixes to not drop LDFLAGS on the floor when building.



CC:  @jdemeyer @kiwifb

Branch: **[618651e](https://github.com/sagemath/sagetrac-mirror/commit/618651e0db7fdd4eeb94a3aef3811de877e3df8e)**

Reviewer: **Fran√ßois Bissey**

Author: **Volker Braun**

_Issue created by migration from https://trac.sagemath.org/ticket/19640_





---

archive/issue_events_260285.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-29T12:46:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19640#event-260285"
}
```



---

archive/issue_events_260286.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-29T12:46:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19640#event-260286"
}
```



---

archive/issue_comments_282877.json:
```json
{
    "body": "Branch: **[u/vbraun/do_not_drop_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/do_not_drop_ldflags)**",
    "created_at": "2015-11-29T12:51:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282877",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/do_not_drop_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/do_not_drop_ldflags)**



---

archive/issue_comments_282878.json:
```json
{
    "body": "Commit: **[4c53d29](https://github.com/sagemath/sagetrac-mirror/commit/4c53d2995cd4304cf6413f01f7938a31f97d6e11)**",
    "created_at": "2015-11-29T12:55:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282878",
    "user": "https://github.com/vbraun"
}
```

Commit: **[4c53d29](https://github.com/sagemath/sagetrac-mirror/commit/4c53d2995cd4304cf6413f01f7938a31f97d6e11)**



---

archive/issue_comments_282879.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n+A couple of simple fixes to not drop LDFLAGS on the floor when building.\n \n+\n``````\n",
    "created_at": "2015-11-29T12:55:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282879",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
+A couple of simple fixes to not drop LDFLAGS on the floor when building.
 
+
``````




---

archive/issue_comments_282880.json:
```json
{
    "body": "Author: **Volker Braun**",
    "created_at": "2015-11-29T12:55:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282880",
    "user": "https://github.com/vbraun"
}
```

Author: **Volker Braun**



---

archive/issue_events_260287.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-29T12:55:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19640#event-260287"
}
```



---

archive/issue_events_260288.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-29T12:55:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19640#event-260288"
}
```



---

archive/issue_comments_282881.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b68082bd107576ffc538ad6e1d697c3db1afd3ab\">b68082b</a></td><td><code>Do not drop LDFLAGS in fflas_ffpack</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27f1f4bd3cd23e0cf29195f8677a2fc95767168f\">27f1f4b</a></td><td><code>Do not drop LDFLAGS in freetype</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb647deec228acef12a673ff5aaef8e22dee423b\">fb647de</a></td><td><code>Do not drop LDFLAGS in gfan</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49ae3fc9f45b1c7595b0f6a471181e28eff333f4\">49ae3fc</a></td><td><code>Do not drop LDFLAGS in m4rie</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93973ff194dcacf296785c9b3a50fc64736094de\">93973ff</a></td><td><code>Do not drop LDFLAGS in matplotlib</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77032e7583ff3d2cf3d43e540da5d4fb72f5e318\">77032e7</a></td><td><code>Do not drop LDFLAGS in ginac</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e40ca64f1cc349be72d6a0610c0c331d083056a\">8e40ca6</a></td><td><code>Do not drop LDFLAGS in ratpoints</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c53d2995cd4304cf6413f01f7938a31f97d6e11\">4c53d29</a></td><td><code>Do not drop LDFLAGS in arb</code></td></tr></table>\n",
    "created_at": "2015-11-29T12:55:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282881",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2" align="right">Comment 2</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b68082bd107576ffc538ad6e1d697c3db1afd3ab">b68082b</a></td><td><code>Do not drop LDFLAGS in fflas_ffpack</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27f1f4bd3cd23e0cf29195f8677a2fc95767168f">27f1f4b</a></td><td><code>Do not drop LDFLAGS in freetype</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb647deec228acef12a673ff5aaef8e22dee423b">fb647de</a></td><td><code>Do not drop LDFLAGS in gfan</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49ae3fc9f45b1c7595b0f6a471181e28eff333f4">49ae3fc</a></td><td><code>Do not drop LDFLAGS in m4rie</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93973ff194dcacf296785c9b3a50fc64736094de">93973ff</a></td><td><code>Do not drop LDFLAGS in matplotlib</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77032e7583ff3d2cf3d43e540da5d4fb72f5e318">77032e7</a></td><td><code>Do not drop LDFLAGS in ginac</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e40ca64f1cc349be72d6a0610c0c331d083056a">8e40ca6</a></td><td><code>Do not drop LDFLAGS in ratpoints</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c53d2995cd4304cf6413f01f7938a31f97d6e11">4c53d29</a></td><td><code>Do not drop LDFLAGS in arb</code></td></tr></table>




---

archive/issue_events_260289.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-29T12:55:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19640#event-260289"
}
```



---

archive/issue_comments_282882.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nThis fixes everything except Singular, I think. The latter seems more complicated, so let's leave it for a different ticket.",
    "created_at": "2015-11-29T12:56:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282882",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:3" align="right">Comment 3</div>

This fixes everything except Singular, I think. The latter seems more complicated, so let's leave it for a different ticket.



---

archive/issue_comments_282883.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nLooks ok but begs the question for a separate ticket: Do we still need those `SAGE64` sections? If so why? Otherwise it looks good to me. But this is the only place for `singular` with `LDFLAGS`\n\n```\nif [ \"x$SAGE64\" = xyes ]; then\n    echo \"Building a 64-bit version of Singular\"\n    CFLAGS=\"$CFLAGS -m64 \"\n    CXXFLAGS=\"$CXXFLAGS -m64\"\n    CPPFLAGS=\"$CPPFLAGS -m64\"\n    LDFLAGS=\"$LDFLAGS -m64 \"; export LDFLAGS\n    if [ \"x`uname`\" = xSunOS ] ; then\n        export CC=\"$CC -m64\"\n        export CXX=\"$CXX -m64\"\n    fi\nfi\n```\nso it is not any harder that the others and it should already be OK. If it isn't, I'll be interested in a build log.",
    "created_at": "2015-11-29T20:45:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282883",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:4" align="right">Comment 4</div>

Looks ok but begs the question for a separate ticket: Do we still need those `SAGE64` sections? If so why? Otherwise it looks good to me. But this is the only place for `singular` with `LDFLAGS`

```
if [ "x$SAGE64" = xyes ]; then
    echo "Building a 64-bit version of Singular"
    CFLAGS="$CFLAGS -m64 "
    CXXFLAGS="$CXXFLAGS -m64"
    CPPFLAGS="$CPPFLAGS -m64"
    LDFLAGS="$LDFLAGS -m64 "; export LDFLAGS
    if [ "x`uname`" = xSunOS ] ; then
        export CC="$CC -m64"
        export CXX="$CXX -m64"
    fi
fi
```
so it is not any harder that the others and it should already be OK. If it isn't, I'll be interested in a build log.



---

archive/issue_comments_282884.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nSingular doesn't respect those LDFLAGS, I tried ;-)\n\nI have no idea about the SAGE64 stuff. My guess is no and that it has always been a bad idea to copy-paste the same stuff in every spkg-install script, though thats material for another ticket.",
    "created_at": "2015-11-29T21:42:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282884",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:5" align="right">Comment 5</div>

Singular doesn't respect those LDFLAGS, I tried ;-)

I have no idea about the SAGE64 stuff. My guess is no and that it has always been a bad idea to copy-paste the same stuff in every spkg-install script, though thats material for another ticket.



---

archive/issue_comments_282885.json:
```json
{
    "body": "Changed commit from **[4c53d29](https://github.com/sagemath/sagetrac-mirror/commit/4c53d2995cd4304cf6413f01f7938a31f97d6e11)** to **[0214c00](https://github.com/sagemath/sagetrac-mirror/commit/0214c00dc09c2912caa23181eecc8224a80dde49)**",
    "created_at": "2015-11-29T21:50:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282885",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4c53d29](https://github.com/sagemath/sagetrac-mirror/commit/4c53d2995cd4304cf6413f01f7938a31f97d6e11)** to **[0214c00](https://github.com/sagemath/sagetrac-mirror/commit/0214c00dc09c2912caa23181eecc8224a80dde49)**



---

archive/issue_comments_282886.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0214c00dc09c2912caa23181eecc8224a80dde49\">0214c00</a></td><td><code>Do not drop LDFLAGS in Singular</code></td></tr></table>\n",
    "created_at": "2015-11-29T21:50:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282886",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6" align="right">Comment 6</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0214c00dc09c2912caa23181eecc8224a80dde49">0214c00</a></td><td><code>Do not drop LDFLAGS in Singular</code></td></tr></table>




---

archive/issue_comments_282887.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI looked through the Singular configure/makefile and the only environment variable that we can used is CXX/LD. I'm not proud of the resulting hack but it does work ;-)",
    "created_at": "2015-11-29T21:53:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282887",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:7" align="right">Comment 7</div>

I looked through the Singular configure/makefile and the only environment variable that we can used is CXX/LD. I'm not proud of the resulting hack but it does work ;-)



---

archive/issue_comments_282888.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nHopefully the situation is better in Singular-4, though thats yet another ticket...",
    "created_at": "2015-11-29T21:54:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282888",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:8" align="right">Comment 8</div>

Hopefully the situation is better in Singular-4, though thats yet another ticket...



---

archive/issue_comments_282889.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nI thought I had a patch for `singular` now that I come to think of it, but it must have been dropped at some point. Looking at the corresponding gentoo ebuild the problem is probably similar. Internally `singular` uses `SLDFLAGS` for its linking flags (you can see that kind of stuff in one of the singular patch I wrote for using `CXX` for linking) I'll have to dig how it is defined but that would be another patch. We can ship your solution now or I can write a patch.",
    "created_at": "2015-11-29T22:11:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282889",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:9" align="right">Comment 9</div>

I thought I had a patch for `singular` now that I come to think of it, but it must have been dropped at some point. Looking at the corresponding gentoo ebuild the problem is probably similar. Internally `singular` uses `SLDFLAGS` for its linking flags (you can see that kind of stuff in one of the singular patch I wrote for using `CXX` for linking) I'll have to dig how it is defined but that would be another patch. We can ship your solution now or I can write a patch.



---

archive/issue_comments_282890.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nI saw the SLDFLAGS, but they aren't initialized with LDFLAGS :-(\n\nI don't think there is much point in spending time cleaning up singular-3 though...",
    "created_at": "2015-11-29T22:13:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282890",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:10" align="right">Comment 10</div>

I saw the SLDFLAGS, but they aren't initialized with LDFLAGS :-(

I don't think there is much point in spending time cleaning up singular-3 though...



---

archive/issue_comments_282891.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nIt's just a mess\n\n```\nSingular/Makefile.in:SLDFLAGS   = @SLDFLAGS@\nSingular/Makefile.in:   $(LIBSINGULAR_LD) ${SLDFLAGS} ${LIBSINGULAR_FLAGS} -o libsingular.${SO_SUFFIX} \\\nSingular/Makefile.in:   $(LD) ${SLDFLAGS} -o $@ $^ -L${libdir} ${MP_LIBS} ${GLIBC_DYN_FIX}\nSingular/Makefile.in:   $(LD) ${SLDFLAGS} -o $@ $^ ${GLIBC_DYN_FIX}\nSingular/Makefile.in:   $(CXX) $^ ${PYTHON_MODULE_LDFLAGS} ${SLDFLAGS} ${PYTHON_MODULE_LIBS} ${LD_LIBC} -o $@\nSingular/Makefile.in:   ${CXXG} ${CXXFLAGSG} ${SFLAGS} ${SLDFLAGS} ${LDFLAGS} -o $@ $^ ${MP_LIBS} ${GLIBC_DYN_FIX}\nSingular/Makefile.in:   ${CXXG} ${CXXFLAGSG} ${SFLAGS} ${SLDFLAGS} ${LDFLAGS} -o $@ $^ ${MP_LIBS}\nSingular/Makefile.in:   ${CXXP} ${CXXFLAGSP} ${SFLAGS} ${SLDFLAGS} ${LDFLAGS} -o $@ $^ ${MP_LIBS} ${GLIBC_DYN_FIX}\nSingular/Makefile.in:   ${CXXP} ${CXXFLAGSP} ${SFLAGS} ${SLDFLAGS} ${LDFLAGS} -o $@ $^ ${MP_LIBS}\nkernel/Makefile.in:SLDFLAGS     = @SLDFLAGS@\nkernel/Makefile.in:     $(LD) ${SLDFLAGS} -o $@ $^\nkernel/Makefile.in:     $(LD) ${SLDFLAGS} -o $@ $^\nkernel/Makefile.in:     ${CXXP} ${CXXFLAGSP} ${SFLAGS} ${SLDFLAGS} $< -o $@\n```\nSome bits of `singular` are using `LDFLAGS` but we would need to add it wherever it is missing above, at least wherever `LD` is called. A quick `sed` from `$(LD) ${SLDFLAGS}` to `$(LD) ${SLDFLAGS} ${LDFLAGS}` should do.",
    "created_at": "2015-11-29T22:19:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282891",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">Comment 11</div>

It's just a mess

```
Singular/Makefile.in:SLDFLAGS   = @SLDFLAGS@
Singular/Makefile.in:   $(LIBSINGULAR_LD) ${SLDFLAGS} ${LIBSINGULAR_FLAGS} -o libsingular.${SO_SUFFIX} \
Singular/Makefile.in:   $(LD) ${SLDFLAGS} -o $@ $^ -L${libdir} ${MP_LIBS} ${GLIBC_DYN_FIX}
Singular/Makefile.in:   $(LD) ${SLDFLAGS} -o $@ $^ ${GLIBC_DYN_FIX}
Singular/Makefile.in:   $(CXX) $^ ${PYTHON_MODULE_LDFLAGS} ${SLDFLAGS} ${PYTHON_MODULE_LIBS} ${LD_LIBC} -o $@
Singular/Makefile.in:   ${CXXG} ${CXXFLAGSG} ${SFLAGS} ${SLDFLAGS} ${LDFLAGS} -o $@ $^ ${MP_LIBS} ${GLIBC_DYN_FIX}
Singular/Makefile.in:   ${CXXG} ${CXXFLAGSG} ${SFLAGS} ${SLDFLAGS} ${LDFLAGS} -o $@ $^ ${MP_LIBS}
Singular/Makefile.in:   ${CXXP} ${CXXFLAGSP} ${SFLAGS} ${SLDFLAGS} ${LDFLAGS} -o $@ $^ ${MP_LIBS} ${GLIBC_DYN_FIX}
Singular/Makefile.in:   ${CXXP} ${CXXFLAGSP} ${SFLAGS} ${SLDFLAGS} ${LDFLAGS} -o $@ $^ ${MP_LIBS}
kernel/Makefile.in:SLDFLAGS     = @SLDFLAGS@
kernel/Makefile.in:     $(LD) ${SLDFLAGS} -o $@ $^
kernel/Makefile.in:     $(LD) ${SLDFLAGS} -o $@ $^
kernel/Makefile.in:     ${CXXP} ${CXXFLAGSP} ${SFLAGS} ${SLDFLAGS} $< -o $@
```
Some bits of `singular` are using `LDFLAGS` but we would need to add it wherever it is missing above, at least wherever `LD` is called. A quick `sed` from `$(LD) ${SLDFLAGS}` to `$(LD) ${SLDFLAGS} ${LDFLAGS}` should do.



---

archive/issue_comments_282892.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nAnd I was going to forget that little piece of underhanded linker definition in `Singular/Makefile.in`\n\n```\nLIBSINGULAR_LD = $(CXX)\n\n# correct suffix for dynamic linking\nifeq ($(SINGUNAME),ix86Mac-darwin)\nSO_SUFFIX        = dylib\nMODULE_SUFFIX    = bundle\nLIBSINGULAR_FLAGS = -single_module\nLIBSINGULAR_LD = $(LD)\nendif\n\nifeq ($(SINGUNAME),x86_64Mac-darwin)\nSO_SUFFIX        = dylib\nMODULE_SUFFIX    = bundle\nLIBSINGULAR_FLAGS = -single_module\nLIBSINGULAR_LD = $(LD)\nendif\n```\nand\n\n```\nlibsingular: mod2.h Makefile version.h $(WIN_LIBS) scanner.cc  ${OBJS} \\\n         iparith.o libparse.cc claptmpl.o mpsr_Tok.o $(DL_LIBS) \n\t$(LIBSINGULAR_LD) ${SLDFLAGS} ${LIBSINGULAR_FLAGS} -o libsingular.${SO_SUFFIX} \\\n\tiparith.o mpsr_Tok.o claptmpl.o \\\n\t${OBJS} -lkernel -L../kernel -L../factory -L../libfac -L${libdir} ${LIBSINGULAR_LIBS}\n```",
    "created_at": "2015-11-29T22:37:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282892",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:12" align="right">Comment 12</div>

And I was going to forget that little piece of underhanded linker definition in `Singular/Makefile.in`

```
LIBSINGULAR_LD = $(CXX)

# correct suffix for dynamic linking
ifeq ($(SINGUNAME),ix86Mac-darwin)
SO_SUFFIX        = dylib
MODULE_SUFFIX    = bundle
LIBSINGULAR_FLAGS = -single_module
LIBSINGULAR_LD = $(LD)
endif

ifeq ($(SINGUNAME),x86_64Mac-darwin)
SO_SUFFIX        = dylib
MODULE_SUFFIX    = bundle
LIBSINGULAR_FLAGS = -single_module
LIBSINGULAR_LD = $(LD)
endif
```
and

```
libsingular: mod2.h Makefile version.h $(WIN_LIBS) scanner.cc  ${OBJS} \
         iparith.o libparse.cc claptmpl.o mpsr_Tok.o $(DL_LIBS) 
	$(LIBSINGULAR_LD) ${SLDFLAGS} ${LIBSINGULAR_FLAGS} -o libsingular.${SO_SUFFIX} \
	iparith.o mpsr_Tok.o claptmpl.o \
	${OBJS} -lkernel -L../kernel -L../factory -L../libfac -L${libdir} ${LIBSINGULAR_LIBS}
```



---

archive/issue_events_260290.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-11-29T22:45:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19640#event-260290"
}
```



---

archive/issue_events_260291.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-11-29T22:45:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19640#event-260291"
}
```



---

archive/issue_comments_282893.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nI'll leave yours as the best of a bad lot. One of the problem with the fix is that if `LDFLAGS` contains naked linker commands (such as `-rpath`) it will fail on linux because `CXX` is used for linking, therefore linker commands should be preceded by `-Wl`. \nNo matter of patching will fix that particular problem. `libtool` should have been used all the way really, not just here and there.",
    "created_at": "2015-11-29T22:45:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282893",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:13" align="right">Comment 13</div>

I'll leave yours as the best of a bad lot. One of the problem with the fix is that if `LDFLAGS` contains naked linker commands (such as `-rpath`) it will fail on linux because `CXX` is used for linking, therefore linker commands should be preceded by `-Wl`. 
No matter of patching will fix that particular problem. `libtool` should have been used all the way really, not just here and there.



---

archive/issue_comments_282894.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2015-11-29T22:45:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282894",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **Fran√ßois Bissey**



---

archive/issue_events_260292.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-11-29T23:15:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19640#event-260292"
}
```



---

archive/issue_events_260293.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-11-29T23:15:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19640#event-260293"
}
```



---

archive/issue_comments_282895.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nActually, after reviewing some logs, we use `CXX` on OS X as well. My patch to use `CXX` instead of `ld` covers that, in fact I had to change some more stuff so it would work on OS X. So #19641 will work on OS X without doing some kind of filtering, that would have been the case otherwise. But on the other hand that means\n\n```\nexport LD=\"$LD $LDFLAGS\"     # Used on Darwin\n```\nis useless, as is the comment about linux on the line before.",
    "created_at": "2015-11-29T23:15:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282895",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14" align="right">Comment 14</div>

Actually, after reviewing some logs, we use `CXX` on OS X as well. My patch to use `CXX` instead of `ld` covers that, in fact I had to change some more stuff so it would work on OS X. So #19641 will work on OS X without doing some kind of filtering, that would have been the case otherwise. But on the other hand that means

```
export LD="$LD $LDFLAGS"     # Used on Darwin
```
is useless, as is the comment about linux on the line before.



---

archive/issue_comments_282896.json:
```json
{
    "body": "Changed commit from **[0214c00](https://github.com/sagemath/sagetrac-mirror/commit/0214c00dc09c2912caa23181eecc8224a80dde49)** to **[618651e](https://github.com/sagemath/sagetrac-mirror/commit/618651e0db7fdd4eeb94a3aef3811de877e3df8e)**",
    "created_at": "2015-11-30T09:10:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282896",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0214c00](https://github.com/sagemath/sagetrac-mirror/commit/0214c00dc09c2912caa23181eecc8224a80dde49)** to **[618651e](https://github.com/sagemath/sagetrac-mirror/commit/618651e0db7fdd4eeb94a3aef3811de877e3df8e)**



---

archive/issue_comments_282897.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/618651e0db7fdd4eeb94a3aef3811de877e3df8e\">618651e</a></td><td><code>Only change CXX for Singular</code></td></tr></table>\n",
    "created_at": "2015-11-30T09:10:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282897",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15" align="right">Comment 15</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/618651e0db7fdd4eeb94a3aef3811de877e3df8e">618651e</a></td><td><code>Only change CXX for Singular</code></td></tr></table>




---

archive/issue_comments_282898.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nLooks good to me, if you have nothing to add, it is positive review from me.",
    "created_at": "2015-11-30T09:17:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282898",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:16" align="right">Comment 16</div>

Looks good to me, if you have nothing to add, it is positive review from me.



---

archive/issue_events_260294.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-30T09:19:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19640#event-260294"
}
```



---

archive/issue_events_260295.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-30T09:19:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19640#event-260295"
}
```



---

archive/issue_events_260296.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-30T23:09:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19640#event-260296"
}
```



---

archive/issue_events_260297.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f9c5d7e952f51229656b06221e043191437a63a8",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-11-30T23:09:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19640#event-260297"
}
```



---

archive/issue_comments_282899.json:
```json
{
    "body": "Changed branch from **[u/vbraun/do_not_drop_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/do_not_drop_ldflags)** to **[618651e](https://github.com/sagemath/sagetrac-mirror/commit/618651e0db7fdd4eeb94a3aef3811de877e3df8e)**",
    "created_at": "2015-11-30T23:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282899",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vbraun/do_not_drop_ldflags](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/do_not_drop_ldflags)** to **[618651e](https://github.com/sagemath/sagetrac-mirror/commit/618651e0db7fdd4eeb94a3aef3811de877e3df8e)**



---

archive/issue_comments_282900.json:
```json
{
    "body": "Changed commit from **[618651e](https://github.com/sagemath/sagetrac-mirror/commit/618651e0db7fdd4eeb94a3aef3811de877e3df8e)** to none",
    "created_at": "2015-12-13T14:07:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282900",
    "user": "https://github.com/nexttime"
}
```

Changed commit from **[618651e](https://github.com/sagemath/sagetrac-mirror/commit/618651e0db7fdd4eeb94a3aef3811de877e3df8e)** to none



---

archive/issue_comments_282901.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@kiwifb](#comment%3A11):\n> It's just a mess\n> \n> ```\n> Singular/Makefile.in:SLDFLAGS   = @SLDFLAGS@\n> Singular/Makefile.in:   $(LIBSINGULAR_LD) ${SLDFLAGS} ${LIBSINGULAR_FLAGS} -o libsingular.${SO_SUFFIX} \\\n> Singular/Makefile.in:   $(LD) ${SLDFLAGS} -o $@ $^ -L${libdir} ${MP_LIBS} ${GLIBC_DYN_FIX}\n> Singular/Makefile.in:   $(LD) ${SLDFLAGS} -o $@ $^ ${GLIBC_DYN_FIX}\n> Singular/Makefile.in:   $(CXX) $^ ${PYTHON_MODULE_LDFLAGS} ${SLDFLAGS} ${PYTHON_MODULE_LIBS} ${LD_LIBC} -o $@\n> Singular/Makefile.in:   ${CXXG} ${CXXFLAGSG} ${SFLAGS} ${SLDFLAGS} ${LDFLAGS} -o $@ $^ ${MP_LIBS} ${GLIBC_DYN_FIX}\n> Singular/Makefile.in:   ${CXXG} ${CXXFLAGSG} ${SFLAGS} ${SLDFLAGS} ${LDFLAGS} -o $@ $^ ${MP_LIBS}\n> Singular/Makefile.in:   ${CXXP} ${CXXFLAGSP} ${SFLAGS} ${SLDFLAGS} ${LDFLAGS} -o $@ $^ ${MP_LIBS} ${GLIBC_DYN_FIX}\n> Singular/Makefile.in:   ${CXXP} ${CXXFLAGSP} ${SFLAGS} ${SLDFLAGS} ${LDFLAGS} -o $@ $^ ${MP_LIBS}\n> kernel/Makefile.in:SLDFLAGS     = @SLDFLAGS@\n> kernel/Makefile.in:     $(LD) ${SLDFLAGS} -o $@ $^\n> kernel/Makefile.in:     $(LD) ${SLDFLAGS} -o $@ $^\n> kernel/Makefile.in:     ${CXXP} ${CXXFLAGSP} ${SFLAGS} ${SLDFLAGS} $< -o $@\n> ```\n> Some bits of `singular` are using `LDFLAGS` but we would need to add it wherever it is missing above, at least wherever `LD` is called.\n\nNope, `LDFLAGS` are meant to be passed to the *compiler*, not directly to the linker.  (You'd frequently get syntax errors otherwise, because the linker doesn't necessarily take the same or all of the options.  The compiler in contrast passes anything it doesn't understand verbatim to the linker if applicable, so the opposite is not a problem.)",
    "created_at": "2015-12-13T14:07:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282901",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@kiwifb](#comment%3A11):
> It's just a mess
> 
> ```
> Singular/Makefile.in:SLDFLAGS   = @SLDFLAGS@
> Singular/Makefile.in:   $(LIBSINGULAR_LD) ${SLDFLAGS} ${LIBSINGULAR_FLAGS} -o libsingular.${SO_SUFFIX} \
> Singular/Makefile.in:   $(LD) ${SLDFLAGS} -o $@ $^ -L${libdir} ${MP_LIBS} ${GLIBC_DYN_FIX}
> Singular/Makefile.in:   $(LD) ${SLDFLAGS} -o $@ $^ ${GLIBC_DYN_FIX}
> Singular/Makefile.in:   $(CXX) $^ ${PYTHON_MODULE_LDFLAGS} ${SLDFLAGS} ${PYTHON_MODULE_LIBS} ${LD_LIBC} -o $@
> Singular/Makefile.in:   ${CXXG} ${CXXFLAGSG} ${SFLAGS} ${SLDFLAGS} ${LDFLAGS} -o $@ $^ ${MP_LIBS} ${GLIBC_DYN_FIX}
> Singular/Makefile.in:   ${CXXG} ${CXXFLAGSG} ${SFLAGS} ${SLDFLAGS} ${LDFLAGS} -o $@ $^ ${MP_LIBS}
> Singular/Makefile.in:   ${CXXP} ${CXXFLAGSP} ${SFLAGS} ${SLDFLAGS} ${LDFLAGS} -o $@ $^ ${MP_LIBS} ${GLIBC_DYN_FIX}
> Singular/Makefile.in:   ${CXXP} ${CXXFLAGSP} ${SFLAGS} ${SLDFLAGS} ${LDFLAGS} -o $@ $^ ${MP_LIBS}
> kernel/Makefile.in:SLDFLAGS     = @SLDFLAGS@
> kernel/Makefile.in:     $(LD) ${SLDFLAGS} -o $@ $^
> kernel/Makefile.in:     $(LD) ${SLDFLAGS} -o $@ $^
> kernel/Makefile.in:     ${CXXP} ${CXXFLAGSP} ${SFLAGS} ${SLDFLAGS} $< -o $@
> ```
> Some bits of `singular` are using `LDFLAGS` but we would need to add it wherever it is missing above, at least wherever `LD` is called.

Nope, `LDFLAGS` are meant to be passed to the *compiler*, not directly to the linker.  (You'd frequently get syntax errors otherwise, because the linker doesn't necessarily take the same or all of the options.  The compiler in contrast passes anything it doesn't understand verbatim to the linker if applicable, so the opposite is not a problem.)



---

archive/issue_comments_282902.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nP.S.:  A while ago, a few occurrences of `LD` in Singular's Makefiles were actually hardcoded to `ld`.",
    "created_at": "2015-12-13T14:09:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282902",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:20" align="right">Comment 20</div>

P.S.:  A while ago, a few occurrences of `LD` in Singular's Makefiles were actually hardcoded to `ld`.



---

archive/issue_comments_282903.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nPresumably things are better in Sigular-4, there isn't much point in beautifying anything before #17254 hits",
    "created_at": "2015-12-13T14:24:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282903",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:21" align="right">Comment 21</div>

Presumably things are better in Sigular-4, there isn't much point in beautifying anything before #17254 hits



---

archive/issue_comments_282904.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nReplying to [@kiwifb](#comment%3A4):\n> Looks ok but begs the question for a separate ticket: Do we still need those `SAGE64` sections? If so why?\n\nMacOS X used to default to 32-bit builds on 64-bit systems (until 10.6.x?); SunOS/Oraclis still does.\n\nSo in principle we still need the ugly `SAGE64` stuff (or should keep it for porting / to not break SunOS support further...).",
    "created_at": "2015-12-13T14:26:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282904",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:22" align="right">Comment 22</div>

Replying to [@kiwifb](#comment%3A4):
> Looks ok but begs the question for a separate ticket: Do we still need those `SAGE64` sections? If so why?

MacOS X used to default to 32-bit builds on 64-bit systems (until 10.6.x?); SunOS/Oraclis still does.

So in principle we still need the ugly `SAGE64` stuff (or should keep it for porting / to not break SunOS support further...).



---

archive/issue_comments_282905.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nReplying to [@vbraun](#comment%3A21):\n> Presumably things are better in Sigular-4, there isn't much point in beautifying anything before #17254 hits\n\nWell, my impression was that Singular 4.x in Sage is rather a looong-term thing...",
    "created_at": "2015-12-13T14:29:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282905",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:23" align="right">Comment 23</div>

Replying to [@vbraun](#comment%3A21):
> Presumably things are better in Sigular-4, there isn't much point in beautifying anything before #17254 hits

Well, my impression was that Singular 4.x in Sage is rather a looong-term thing...



---

archive/issue_comments_282906.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nReplying to [@nexttime](#comment%3A22):\n> Replying to [@kiwifb](#comment%3A4):\n> > Looks ok but begs the question for a separate ticket: Do we still need those `SAGE64` sections? If so why?\n\n> \n> MacOS X used to default to 32-bit builds on 64-bit systems (until 10.6.x?); SunOS/Oraclis still does.\n> \n> So in principle we still need the ugly `SAGE64` stuff (or should keep it for porting / to not break SunOS support further...).\n> \n\nThere are very few `SAGE64` sections left, so I am expecting it to be broken (because it would need more packages to have a `SAGE64` section) but I don't have a system to prove it. Also such a setting should centralised in one place rather than ditched in all spkg all over the place.",
    "created_at": "2015-12-13T20:19:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19640#issuecomment-282906",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:24" align="right">Comment 24</div>

Replying to [@nexttime](#comment%3A22):
> Replying to [@kiwifb](#comment%3A4):
> > Looks ok but begs the question for a separate ticket: Do we still need those `SAGE64` sections? If so why?

> 
> MacOS X used to default to 32-bit builds on 64-bit systems (until 10.6.x?); SunOS/Oraclis still does.
> 
> So in principle we still need the ugly `SAGE64` stuff (or should keep it for porting / to not break SunOS support further...).
> 

There are very few `SAGE64` sections left, so I am expecting it to be broken (because it would need more packages to have a `SAGE64` section) but I don't have a system to prove it. Also such a setting should centralised in one place rather than ditched in all spkg all over the place.
