# Issue 19984: Correctly fix checksums

archive/issues_019747.json:
```json
{
    "assignees": [],
    "body": "Add functionality\n\n```\nsage --package download pari\nsage --package fix-checksum pari\nsage --package fix-checksum   # fix all checksums\n```\nand deprecate `sage-fix-pkg-checksums`.\n\nAlso switch to standard argparse instead of reinventing the argument parsing wheel. And improve test coverage.\n\nBranch/Commit: **[`b1c8a74`](https://github.com/sagemath/sagetrac-mirror/commit/b1c8a74cab7f121e5f7b26776481d41fd4cb2076)**\n\nReviewer: **Jeroen Demeyer, Dima Pasechnik**\n\nAuthor: **Volker Braun**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19984_\n\n",
    "closed_at": "2016-06-14T07:10:30Z",
    "created_at": "2016-01-30T10:46:34Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Correctly fix checksums",
    "type": "issue",
    "updated_at": "2016-06-14T07:10:30Z",
    "url": "https://github.com/sagemath/sage/issues/19984",
    "user": "https://github.com/vbraun"
}
```
Add functionality

```
sage --package download pari
sage --package fix-checksum pari
sage --package fix-checksum   # fix all checksums
```
and deprecate `sage-fix-pkg-checksums`.

Also switch to standard argparse instead of reinventing the argument parsing wheel. And improve test coverage.

Branch/Commit: **[`b1c8a74`](https://github.com/sagemath/sagetrac-mirror/commit/b1c8a74cab7f121e5f7b26776481d41fd4cb2076)**

Reviewer: **Jeroen Demeyer, Dima Pasechnik**

Author: **Volker Braun**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/19984_





---

archive/issue_events_279889.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-30T10:46:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19984#event-279889"
}
```



---

archive/issue_events_279890.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-30T10:46:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19984#event-279890"
}
```



---

archive/issue_comments_286158.json:
```json
{
    "body": "Branch: **[u/vbraun/correctly_fix_checksums](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/correctly_fix_checksums)**",
    "created_at": "2016-01-30T16:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286158",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/correctly_fix_checksums](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/correctly_fix_checksums)**



---

archive/issue_comments_286159.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,8 @@\n+Add functionality\n \n+```\n+sage --package download pari\n+sage --package fix-checksum pari\n+sage --package fix-checksum   # fix all checksums\n+```\n+Also switch to standard argparse instead of reinventing the argument parsing wheel. And improve test coverage.\n``````\n",
    "created_at": "2016-01-30T16:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286159",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,8 @@
+Add functionality
 
+```
+sage --package download pari
+sage --package fix-checksum pari
+sage --package fix-checksum   # fix all checksums
+```
+Also switch to standard argparse instead of reinventing the argument parsing wheel. And improve test coverage.
``````




---

archive/issue_comments_286160.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6852d4cd9cbe0ad66b160765e76522122f30ddcb\"><code>6852d4c</code></a></td><td><code>Use argparse in sage_bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a6c664e6bde133856011bcf3ac94c1976de387a\"><code>8a6c664</code></a></td><td><code>Add sage --package download and fix-checksum</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7332d26eaa5646b84ede292029cdf28a66af4809\"><code>7332d26</code></a></td><td><code>Fix and deprecate sage-fix-pkg-checksums</code></td></tr></table>\n",
    "created_at": "2016-01-30T16:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286160",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6852d4cd9cbe0ad66b160765e76522122f30ddcb"><code>6852d4c</code></a></td><td><code>Use argparse in sage_bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a6c664e6bde133856011bcf3ac94c1976de387a"><code>8a6c664</code></a></td><td><code>Add sage --package download and fix-checksum</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7332d26eaa5646b84ede292029cdf28a66af4809"><code>7332d26</code></a></td><td><code>Fix and deprecate sage-fix-pkg-checksums</code></td></tr></table>




---

archive/issue_comments_286161.json:
```json
{
    "body": "Author: **Volker Braun**",
    "created_at": "2016-01-30T16:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286161",
    "user": "https://github.com/vbraun"
}
```

Author: **Volker Braun**



---

archive/issue_events_279891.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-30T16:08:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19984#event-279891"
}
```



---

archive/issue_comments_286162.json:
```json
{
    "body": "Commit: **[`7332d26`](https://github.com/sagemath/sagetrac-mirror/commit/7332d26eaa5646b84ede292029cdf28a66af4809)**",
    "created_at": "2016-01-30T16:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286162",
    "user": "https://github.com/vbraun"
}
```

Commit: **[`7332d26`](https://github.com/sagemath/sagetrac-mirror/commit/7332d26eaa5646b84ede292029cdf28a66af4809)**



---

archive/issue_events_279892.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-30T16:08:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19984#event-279892"
}
```



---

archive/issue_events_279893.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-30T16:08:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19984#event-279893"
}
```



---

archive/issue_comments_286163.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,6 @@\n sage --package fix-checksum pari\n sage --package fix-checksum   # fix all checksums\n ```\n+and deprecate `sage-fix-pkg-checksums`.\n+\n Also switch to standard argparse instead of reinventing the argument parsing wheel. And improve test coverage.\n``````\n",
    "created_at": "2016-01-30T16:08:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286163",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,6 @@
 sage --package fix-checksum pari
 sage --package fix-checksum   # fix all checksums
 ```
+and deprecate `sage-fix-pkg-checksums`.
+
 Also switch to standard argparse instead of reinventing the argument parsing wheel. And improve test coverage.
``````




---

archive/issue_comments_286164.json:
```json
{
    "body": "Changed commit from **[`7332d26`](https://github.com/sagemath/sagetrac-mirror/commit/7332d26eaa5646b84ede292029cdf28a66af4809)** to **[`443cf39`](https://github.com/sagemath/sagetrac-mirror/commit/443cf39ed7b4522a17c667c69b9155d6e0f60a4a)**",
    "created_at": "2016-01-30T16:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286164",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7332d26`](https://github.com/sagemath/sagetrac-mirror/commit/7332d26eaa5646b84ede292029cdf28a66af4809)** to **[`443cf39`](https://github.com/sagemath/sagetrac-mirror/commit/443cf39ed7b4522a17c667c69b9155d6e0f60a4a)**



---

archive/issue_comments_286165.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/443cf39ed7b4522a17c667c69b9155d6e0f60a4a\"><code>443cf39</code></a></td><td><code>Correct helpstring</code></td></tr></table>\n",
    "created_at": "2016-01-30T16:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286165",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/443cf39ed7b4522a17c667c69b9155d6e0f60a4a"><code>443cf39</code></a></td><td><code>Correct helpstring</code></td></tr></table>




---

archive/issue_comments_286166.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8fe15498a685b89739e721ccb6ce34c4d93327a8\"><code>8fe1549</code></a></td><td><code>Also test sage --package update</code></td></tr></table>\n",
    "created_at": "2016-01-30T17:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286166",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8fe15498a685b89739e721ccb6ce34c4d93327a8"><code>8fe1549</code></a></td><td><code>Also test sage --package update</code></td></tr></table>




---

archive/issue_comments_286167.json:
```json
{
    "body": "Changed commit from **[`443cf39`](https://github.com/sagemath/sagetrac-mirror/commit/443cf39ed7b4522a17c667c69b9155d6e0f60a4a)** to **[`8fe1549`](https://github.com/sagemath/sagetrac-mirror/commit/8fe15498a685b89739e721ccb6ce34c4d93327a8)**",
    "created_at": "2016-01-30T17:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286167",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`443cf39`](https://github.com/sagemath/sagetrac-mirror/commit/443cf39ed7b4522a17c667c69b9155d6e0f60a4a)** to **[`8fe1549`](https://github.com/sagemath/sagetrac-mirror/commit/8fe15498a685b89739e721ccb6ce34c4d93327a8)**



---

archive/issue_comments_286168.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nwow, `argparse.py` isn't a small file...",
    "created_at": "2016-01-30T17:55:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286168",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

wow, `argparse.py` isn't a small file...



---

archive/issue_comments_286169.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nMaking Sage 0.1% bigger vs. writing and maintaining your own parser is an easy choice...",
    "created_at": "2016-01-30T18:32:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286169",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:7" align="right">comment:7</div>

Making Sage 0.1% bigger vs. writing and maintaining your own parser is an easy choice...



---

archive/issue_comments_286170.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nit would be good to know whether it is just a pip call away.",
    "created_at": "2016-01-30T19:31:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286170",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">comment:8</div>

it would be good to know whether it is just a pip call away.



---

archive/issue_comments_286171.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nIt is, but not before we install pip which we download using `sage_bootstrap`",
    "created_at": "2016-01-30T19:46:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286171",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:9" align="right">comment:9</div>

It is, but not before we install pip which we download using `sage_bootstrap`



---

archive/issue_comments_286172.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nIs there a pressing need to have arg parsing before we have pip available?",
    "created_at": "2016-01-30T20:13:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286172",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

Is there a pressing need to have arg parsing before we have pip available?



---

archive/issue_comments_286173.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI also don't get why we need to have in in sage, as it's standard Python:\n\n```\n$ python\nPython 2.7.6 (default, Jun 22 2015, 17:58:13) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import argparse\n>>> \n```\n\n(and the same with `$ sage --python`)",
    "created_at": "2016-01-30T20:35:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286173",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:11" align="right">comment:11</div>

I also don't get why we need to have in in sage, as it's standard Python:

```
$ python
Python 2.7.6 (default, Jun 22 2015, 17:58:13) 
[GCC 4.8.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import argparse
>>> 
```

(and the same with `$ sage --python`)



---

archive/issue_comments_286174.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n* Scripts need to use things like `sage-download-file --print-fastest-mirror`\n* Argparse is new in Python 2.7, but we want to support 2.6+. See also the tox.ini file.",
    "created_at": "2016-01-30T20:51:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286174",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:12" align="right">comment:12</div>

* Scripts need to use things like `sage-download-file --print-fastest-mirror`
* Argparse is new in Python 2.7, but we want to support 2.6+. See also the tox.ini file.



---

archive/issue_comments_286175.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nHmm, I presume one doesn't need to fix checksums before Sage's python is up and running.\nI'd rather just rely on built-in argparse of Sage's python.\n\nOr rather rely on system's python having argparse. I cannot imagine people on Python 2.6 who must build Sage from source, but cannot update Python, or at least install argparse.",
    "created_at": "2016-01-30T22:57:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286175",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">comment:13</div>

Hmm, I presume one doesn't need to fix checksums before Sage's python is up and running.
I'd rather just rely on built-in argparse of Sage's python.

Or rather rely on system's python having argparse. I cannot imagine people on Python 2.6 who must build Sage from source, but cannot update Python, or at least install argparse.



---

archive/issue_comments_286176.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n`sage-download-file` is used for **downloading** packages, which we must do in order to install Python in the first place.\n\nThe fixing checksums is just an extra at this point, but of course its almost the same code as checking  the checksum.\n\nBtw pip itself bundles about 10 required packages because it can't be used to install its own dependencies either.",
    "created_at": "2016-01-31T00:20:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286176",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:14" align="right">comment:14</div>

`sage-download-file` is used for **downloading** packages, which we must do in order to install Python in the first place.

The fixing checksums is just an extra at this point, but of course its almost the same code as checking  the checksum.

Btw pip itself bundles about 10 required packages because it can't be used to install its own dependencies either.



---

archive/issue_comments_286177.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nPS: OSX had Python 2.6 up until the last version, and good luck installing argparse globally without root.",
    "created_at": "2016-01-31T00:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286177",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:15" align="right">comment:15</div>

PS: OSX had Python 2.6 up until the last version, and good luck installing argparse globally without root.



---

archive/issue_comments_286178.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nAssuming you deprecate that, I think you'll also have to change http://doc.sagemath.org/html/en/developer/packaging.html#checksums and any other related documentation.",
    "created_at": "2016-01-31T02:20:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286178",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:16" align="right">comment:16</div>

Assuming you deprecate that, I think you'll also have to change http://doc.sagemath.org/html/en/developer/packaging.html#checksums and any other related documentation.



---

archive/issue_comments_286179.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@vbraun](#comment%3A15):\n> PS: OSX had Python 2.6 up until the last version, and good luck installing argparse globally without root.\n\nI am not worried about OSX users, who of them don't have root?",
    "created_at": "2016-01-31T06:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286179",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@vbraun](#comment%3A15):
> PS: OSX had Python 2.6 up until the last version, and good luck installing argparse globally without root.

I am not worried about OSX users, who of them don't have root?



---

archive/issue_events_279894.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-01-31T09:14:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19984#event-279894"
}
```



---

archive/issue_events_279895.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-01-31T09:14:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19984#event-279895"
}
```



---

archive/issue_comments_286180.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThis should work (it used to work with `sage-fix-pkg-checksums`):\n\n```\n$ rm build/pkgs/cliquer/checksums.ini\n$ sage --package fix-checksum cliquer\nTraceback (most recent call last):\n  File \"/usr/local/src/sage-git/build/bin/sage-package\", line 42, in <module>\n    run()\n  File \"/usr/local/src/sage-git/build/bin/../sage_bootstrap/cmdline.py\", line 241, in run\n    app.fix_checksum(args.package_name)\n  File \"/usr/local/src/sage-git/build/bin/../sage_bootstrap/app.py\", line 157, in fix_checksum\n    pkg = update.package\n  File \"/usr/local/src/sage-git/build/bin/../sage_bootstrap/updater.py\", line 37, in package\n    self.__package = Package(self.package_name)\n  File \"/usr/local/src/sage-git/build/bin/../sage_bootstrap/package.py\", line 46, in __init__\n    self._init_checksum()\n  File \"/usr/local/src/sage-git/build/bin/../sage_bootstrap/package.py\", line 203, in _init_checksum\n    with open(checksums_ini, 'rt') as f:\nIOError: [Errno 2] No such file or directory: '/usr/local/src/sage-git/build/pkgs/cliquer/checksums.ini'\n```",
    "created_at": "2016-01-31T09:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286180",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

This should work (it used to work with `sage-fix-pkg-checksums`):

```
$ rm build/pkgs/cliquer/checksums.ini
$ sage --package fix-checksum cliquer
Traceback (most recent call last):
  File "/usr/local/src/sage-git/build/bin/sage-package", line 42, in <module>
    run()
  File "/usr/local/src/sage-git/build/bin/../sage_bootstrap/cmdline.py", line 241, in run
    app.fix_checksum(args.package_name)
  File "/usr/local/src/sage-git/build/bin/../sage_bootstrap/app.py", line 157, in fix_checksum
    pkg = update.package
  File "/usr/local/src/sage-git/build/bin/../sage_bootstrap/updater.py", line 37, in package
    self.__package = Package(self.package_name)
  File "/usr/local/src/sage-git/build/bin/../sage_bootstrap/package.py", line 46, in __init__
    self._init_checksum()
  File "/usr/local/src/sage-git/build/bin/../sage_bootstrap/package.py", line 203, in _init_checksum
    with open(checksums_ini, 'rt') as f:
IOError: [Errno 2] No such file or directory: '/usr/local/src/sage-git/build/pkgs/cliquer/checksums.ini'
```



---

archive/issue_comments_286181.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nEven this does not work:\n\n```\n$ ./sage --fix-pkg-checksums upstream/cliquer-1.21.tar.gz\nDeprecated #19984, use sage --package fix-checksum instead\nERROR [tarball|__init__:62]: tarball cliquer-1.21.tar.gz is not referenced by any Sage package\nTraceback (most recent call last):\n  File \"/usr/local/src/sage-git/build/bin/sage-package\", line 42, in <module>\n    run()\n  File \"/usr/local/src/sage-git/build/bin/../sage_bootstrap/cmdline.py\", line 228, in run\n    app.name(args.tarball_filename)\n  File \"/usr/local/src/sage-git/build/bin/../sage_bootstrap/app.py\", line 68, in name\n    tarball = Tarball(os.path.basename(tarball_filename))\n  File \"/usr/local/src/sage-git/build/bin/../sage_bootstrap/tarball.py\", line 63, in __init__\n    raise ValueError(error)\nValueError: tarball cliquer-1.21.tar.gz is not referenced by any Sage package\n```",
    "created_at": "2016-01-31T09:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286181",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

Even this does not work:

```
$ ./sage --fix-pkg-checksums upstream/cliquer-1.21.tar.gz
Deprecated #19984, use sage --package fix-checksum instead
ERROR [tarball|__init__:62]: tarball cliquer-1.21.tar.gz is not referenced by any Sage package
Traceback (most recent call last):
  File "/usr/local/src/sage-git/build/bin/sage-package", line 42, in <module>
    run()
  File "/usr/local/src/sage-git/build/bin/../sage_bootstrap/cmdline.py", line 228, in run
    app.name(args.tarball_filename)
  File "/usr/local/src/sage-git/build/bin/../sage_bootstrap/app.py", line 68, in name
    tarball = Tarball(os.path.basename(tarball_filename))
  File "/usr/local/src/sage-git/build/bin/../sage_bootstrap/tarball.py", line 63, in __init__
    raise ValueError(error)
ValueError: tarball cliquer-1.21.tar.gz is not referenced by any Sage package
```



---

archive/issue_comments_286182.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nYou need a way to tie tarballs to packages even if `checksums.ini` is not present or contains bogus information.",
    "created_at": "2016-01-31T09:22:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286182",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

You need a way to tie tarballs to packages even if `checksums.ini` is not present or contains bogus information.



---

archive/issue_comments_286183.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nIt is a feature that you need `checksums.ini` where the tarball name pattern is specified (the checksums are not needed). This is the only place that unambiguously ties together tarball file names with package names. You can have other heuristics but they can and will break, and you can't build a reliable system on top of sand? Besides, extra filename-based heuristics violate the single source of truth principle.\n\nThat `$ ./sage --fix-pkg-checksums upstream/cliquer-1.21.tar.gz` demonstrates the advantage of this ticket, the new tarball name is `cliquer-1.21.tar.bz2` and if you accidentally enter the wrong extension you now get an error message instead of silently using the wrong tarball.",
    "created_at": "2016-01-31T10:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286183",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:21" align="right">comment:21</div>

It is a feature that you need `checksums.ini` where the tarball name pattern is specified (the checksums are not needed). This is the only place that unambiguously ties together tarball file names with package names. You can have other heuristics but they can and will break, and you can't build a reliable system on top of sand? Besides, extra filename-based heuristics violate the single source of truth principle.

That `$ ./sage --fix-pkg-checksums upstream/cliquer-1.21.tar.gz` demonstrates the advantage of this ticket, the new tarball name is `cliquer-1.21.tar.bz2` and if you accidentally enter the wrong extension you now get an error message instead of silently using the wrong tarball.



---

archive/issue_comments_286184.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@dimpase](#comment%3A17):\n> I am not worried about OSX users, who of them don't have root?\n\nI know a ton of people in the Oxford Math building that use OSX and do not have root access, for example.",
    "created_at": "2016-01-31T11:00:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286184",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@dimpase](#comment%3A17):
> I am not worried about OSX users, who of them don't have root?

I know a ton of people in the Oxford Math building that use OSX and do not have root access, for example.



---

archive/issue_comments_286185.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nTest comment, ignore",
    "created_at": "2016-01-31T12:22:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286185",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:23" align="right">comment:23</div>

Test comment, ignore



---

archive/issue_comments_286186.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@vbraun](#comment%3A22):\n> Replying to [@dimpase](#comment%3A17):\n> > I am not worried about OSX users, who of them don't have root?\n\n> \n> I know a ton of people in the Oxford Math building that use OSX and do not have root access, for example.\n\nsuch people are already on OSX 10.11, I suppose, as no sysadmin would allow an un-updated host on their network...\n\n(posted using geom as socks_v5 proxy...)",
    "created_at": "2016-02-01T23:42:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286186",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@vbraun](#comment%3A22):
> Replying to [@dimpase](#comment%3A17):
> > I am not worried about OSX users, who of them don't have root?

> 
> I know a ton of people in the Oxford Math building that use OSX and do not have root access, for example.

such people are already on OSX 10.11, I suppose, as no sysadmin would allow an un-updated host on their network...

(posted using geom as socks_v5 proxy...)



---

archive/issue_comments_286187.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nConsidering that OSX tends to break stuff every version and that the Math network is heavily firewalled (not even ssh from the outside) I'm not so sure about that.\n\nIn any case, this ticket isn't about removing Python 2.6 support when building Sage. I don't really mind that, but it should be a separate ticket.",
    "created_at": "2016-02-02T00:29:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286187",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:25" align="right">comment:25</div>

Considering that OSX tends to break stuff every version and that the Math network is heavily firewalled (not even ssh from the outside) I'm not so sure about that.

In any case, this ticket isn't about removing Python 2.6 support when building Sage. I don't really mind that, but it should be a separate ticket.



---

archive/issue_events_279896.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-07T16:41:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19984#event-279896"
}
```



---

archive/issue_events_279897.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-07T16:41:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19984#event-279897"
}
```



---

archive/issue_comments_286188.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nhow are we going to keep  track of the stuff that should be removed once the support for Python 2.6 is removed?",
    "created_at": "2016-02-07T17:44:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286188",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">comment:27</div>

how are we going to keep  track of the stuff that should be removed once the support for Python 2.6 is removed?



---

archive/issue_comments_286189.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI created #20023 for that.",
    "created_at": "2016-02-07T18:03:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286189",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:28" align="right">comment:28</div>

I created #20023 for that.



---

archive/issue_comments_286190.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI still think that [comment:18] would be an annoying regression. Adding a new package should be as simple as possible. Requiring to manually add `checksums.ini` is an extra burden which didn't exist before.",
    "created_at": "2016-03-01T10:37:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286190",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">comment:29</div>

I still think that [comment:18] would be an annoying regression. Adding a new package should be as simple as possible. Requiring to manually add `checksums.ini` is an extra burden which didn't exist before.



---

archive/issue_comments_286191.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nIts even more annoying to change existing checksums.ini to different tarballs because of some unwritten nameing rule with .bz2 vs .gz. Not to mention being totally broken for some packages, e.g. python2.\n\nIt would be nice to have an easy way to create a new package, but it shouldn't be mashed into sage-fix-package-checksums. E.g. \n\n```\nsage --package create foo --url=http://path/to/foo.tar.gz\n```\ncould create the package and populate it with template `spkg-install` etc.",
    "created_at": "2016-03-01T11:18:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286191",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:30" align="right">comment:30</div>

Its even more annoying to change existing checksums.ini to different tarballs because of some unwritten nameing rule with .bz2 vs .gz. Not to mention being totally broken for some packages, e.g. python2.

It would be nice to have an easy way to create a new package, but it shouldn't be mashed into sage-fix-package-checksums. E.g. 

```
sage --package create foo --url=http://path/to/foo.tar.gz
```
could create the package and populate it with template `spkg-install` etc.



---

archive/issue_comments_286192.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nperhaps more pressing issue is that the current assumptions about package archives namings are too rigid. E.g. Normaliz 3.1.0 has archive named\nhttps://www.normaliz.uni-osnabrueck.de/wp-content/uploads/2016/02/Normaliz3.1.0.zip\nwhich unpacks into Normaliz3.1 directory.\n\nI do not know how to handled this without repackaging.\n\nAnother example is nauty 2.6, with archives named nauty26...",
    "created_at": "2016-03-06T08:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286192",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:31" align="right">comment:31</div>

perhaps more pressing issue is that the current assumptions about package archives namings are too rigid. E.g. Normaliz 3.1.0 has archive named
https://www.normaliz.uni-osnabrueck.de/wp-content/uploads/2016/02/Normaliz3.1.0.zip
which unpacks into Normaliz3.1 directory.

I do not know how to handled this without repackaging.

Another example is nauty 2.6, with archives named nauty26...



---

archive/issue_comments_286193.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nAgreed, the totally unnecessary naming restrictions are a pain. But the name handling of old-style spkgs is mashed into the new-style name handling code. And there is no testsuite apart from building all packages. So its hard to improve.",
    "created_at": "2016-03-06T11:47:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286193",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:32" align="right">comment:32</div>

Agreed, the totally unnecessary naming restrictions are a pain. But the name handling of old-style spkgs is mashed into the new-style name handling code. And there is no testsuite apart from building all packages. So its hard to improve.



---

archive/issue_comments_286194.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nWhat is preventing this to go forward? I don't know - I don't understand the Jeroen's problem (or don't understand it any more).",
    "created_at": "2016-06-11T14:38:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286194",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:33" align="right">comment:33</div>

What is preventing this to go forward? I don't know - I don't understand the Jeroen's problem (or don't understand it any more).



---

archive/issue_comments_286195.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nJeroen's problem is that this ticket adds an extra step to add a new package. Currently, `checksums.ini` is completely auto-generated: one does not need to worry at all about `checksums.ini` when creating a new package. This is no longer true with this branch because it requires that the developer adds a minimal `checksums.ini`.",
    "created_at": "2016-06-11T15:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286195",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:34" align="right">comment:34</div>

Jeroen's problem is that this ticket adds an extra step to add a new package. Currently, `checksums.ini` is completely auto-generated: one does not need to worry at all about `checksums.ini` when creating a new package. This is no longer true with this branch because it requires that the developer adds a minimal `checksums.ini`.



---

archive/issue_comments_286196.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nOn the plus side it actually works whereas the current script does not (e.g. try updating the python2 package #19735)",
    "created_at": "2016-06-11T15:55:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286196",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:35" align="right">comment:35</div>

On the plus side it actually works whereas the current script does not (e.g. try updating the python2 package #19735)



---

archive/issue_comments_286197.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nWhat exactly should go there in `checksums.ini` ? Some meta-information? Is it documented in this ticket?",
    "created_at": "2016-06-11T16:18:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286197",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:36" align="right">comment:36</div>

What exactly should go there in `checksums.ini` ? Some meta-information? Is it documented in this ticket?



---

archive/issue_comments_286198.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nIt just needs to contain\n\n```\ntarball=Python-VERSION.tgz\n```\nto define (together with package-version.txt) the tarball to use.",
    "created_at": "2016-06-11T16:31:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286198",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:37" align="right">comment:37</div>

It just needs to contain

```
tarball=Python-VERSION.tgz
```
to define (together with package-version.txt) the tarball to use.



---

archive/issue_comments_286199.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nSo you can use tarballs named not according to Sage \"standard\" with this ticket?\nThis would be great, and this'd beat the slightly unfortunate fact that you need one more file.",
    "created_at": "2016-06-11T16:35:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286199",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:38" align="right">comment:38</div>

So you can use tarballs named not according to Sage "standard" with this ticket?
This would be great, and this'd beat the slightly unfortunate fact that you need one more file.



---

archive/issue_comments_286200.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI'm pretty sure there is more string matching scattered in various scripts to map between package names and tarball filenames, this should be replaced by the single point of truth \n\n```\n$ ./build/bin/sage-package tarball python3\nPython-3.4.3.tar.gz\n```\nHowever this is future work and not what this package is about.",
    "created_at": "2016-06-11T16:57:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286200",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:39" align="right">comment:39</div>

I'm pretty sure there is more string matching scattered in various scripts to map between package names and tarball filenames, this should be replaced by the single point of truth 

```
$ ./build/bin/sage-package tarball python3
Python-3.4.3.tar.gz
```
However this is future work and not what this package is about.



---

archive/issue_comments_286201.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nAs soon as there is something in the developer docs that reflects this change, I'd be happy to give it a positive review.",
    "created_at": "2016-06-11T17:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286201",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:40" align="right">comment:40</div>

As soon as there is something in the developer docs that reflects this change, I'd be happy to give it a positive review.



---

archive/issue_events_279898.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-06-11T17:06:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19984#event-279898"
}
```



---

archive/issue_events_279899.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-06-11T17:06:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19984#event-279899"
}
```



---

archive/issue_comments_286202.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/270a002b2fd02b76b6aaab0b535936107fdd21a4\"><code>270a002</code></a></td><td><code>Add a sage --package create subcommand to initialize/overwrite package data</code></td></tr></table>\n",
    "created_at": "2016-06-11T18:15:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286202",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/270a002b2fd02b76b6aaab0b535936107fdd21a4"><code>270a002</code></a></td><td><code>Add a sage --package create subcommand to initialize/overwrite package data</code></td></tr></table>




---

archive/issue_comments_286203.json:
```json
{
    "body": "Changed commit from **[`8fe1549`](https://github.com/sagemath/sagetrac-mirror/commit/8fe15498a685b89739e721ccb6ce34c4d93327a8)** to **[`270a002`](https://github.com/sagemath/sagetrac-mirror/commit/270a002b2fd02b76b6aaab0b535936107fdd21a4)**",
    "created_at": "2016-06-11T18:15:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286203",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8fe1549`](https://github.com/sagemath/sagetrac-mirror/commit/8fe15498a685b89739e721ccb6ce34c4d93327a8)** to **[`270a002`](https://github.com/sagemath/sagetrac-mirror/commit/270a002b2fd02b76b6aaab0b535936107fdd21a4)**



---

archive/issue_comments_286204.json:
```json
{
    "body": "Changed commit from **[`270a002`](https://github.com/sagemath/sagetrac-mirror/commit/270a002b2fd02b76b6aaab0b535936107fdd21a4)** to **[`b1c8a74`](https://github.com/sagemath/sagetrac-mirror/commit/b1c8a74cab7f121e5f7b26776481d41fd4cb2076)**",
    "created_at": "2016-06-11T23:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286204",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`270a002`](https://github.com/sagemath/sagetrac-mirror/commit/270a002b2fd02b76b6aaab0b535936107fdd21a4)** to **[`b1c8a74`](https://github.com/sagemath/sagetrac-mirror/commit/b1c8a74cab7f121e5f7b26776481d41fd4cb2076)**



---

archive/issue_comments_286205.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1c8a74cab7f121e5f7b26776481d41fd4cb2076\"><code>b1c8a74</code></a></td><td><code>Documentation checksums.ini</code></td></tr></table>\n",
    "created_at": "2016-06-11T23:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286205",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1c8a74cab7f121e5f7b26776481d41fd4cb2076"><code>b1c8a74</code></a></td><td><code>Documentation checksums.ini</code></td></tr></table>




---

archive/issue_comments_286206.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nAlso adds `sage --package create foo --version 1.3 --tarball FoO-VERSION.tar.gz --type experimental`",
    "created_at": "2016-06-12T00:45:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286206",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:43" align="right">comment:43</div>

Also adds `sage --package create foo --version 1.3 --tarball FoO-VERSION.tar.gz --type experimental`



---

archive/issue_comments_286207.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\n\n```\n$ sage --package fix-checksum *\nusage: sage --package [-h] [--log LOG]\n                      \n                      {fix-checksum,name,create,list,update,tarball,apropos,download,config}\n                      ...\nsage --package: error: unrecognized arguments: aclocal.m4 autom4te.cache bootstrap build config config.log config.status configure configure.ac COPYING.txt local logs m4 Makefile README.md sage src upstream VERSION.txt\n```\nthe logic behind the latter error message looks as if it parses the current directory, for some reason... It is a feature or a bug?",
    "created_at": "2016-06-12T23:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286207",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:44" align="right">comment:44</div>


```
$ sage --package fix-checksum *
usage: sage --package [-h] [--log LOG]
                      
                      {fix-checksum,name,create,list,update,tarball,apropos,download,config}
                      ...
sage --package: error: unrecognized arguments: aclocal.m4 autom4te.cache bootstrap build config config.log config.status configure configure.ac COPYING.txt local logs m4 Makefile README.md sage src upstream VERSION.txt
```
the logic behind the latter error message looks as if it parses the current directory, for some reason... It is a feature or a bug?



---

archive/issue_comments_286208.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nBash expands * to all files in the current directory. Usage is:\n\n```\n$ ./sage --package fix-checksum -h\nusage: sage --package fix-checksum [-h] [package_name]\n\npositional arguments:\n  package_name  Package name. Default: fix all packages.\n\noptional arguments:\n  -h, --help    show this help message and exit\n\nFix the checksum of a package\n    \nEXAMPLE:\n\n    $ sage --package fix-checksum pari\n    Updating checksum of pari-2.8-2044-g89b0f1e.tar.gz\n```",
    "created_at": "2016-06-12T23:47:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286208",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:45" align="right">comment:45</div>

Bash expands * to all files in the current directory. Usage is:

```
$ ./sage --package fix-checksum -h
usage: sage --package fix-checksum [-h] [package_name]

positional arguments:
  package_name  Package name. Default: fix all packages.

optional arguments:
  -h, --help    show this help message and exit

Fix the checksum of a package
    
EXAMPLE:

    $ sage --package fix-checksum pari
    Updating checksum of pari-2.8-2044-g89b0f1e.tar.gz
```



---

archive/issue_comments_286209.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nMy worry is not checking arguments for correctness might lead to screwups.\n\n```\n$ sage --package fix-checksum *\nChecksum of pari-2.8-2341-g61b65cc.tar.gz unchanged\n$ ls -l\ntotal 0\n-rw-rw-r-- 1 dima dima 0 Jun 13 07:27 pari\n```\nOK, this particular case is largely innocent, but still. I won't mind if this is addressed on another ticket.",
    "created_at": "2016-06-13T06:34:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286209",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:46" align="right">comment:46</div>

My worry is not checking arguments for correctness might lead to screwups.

```
$ sage --package fix-checksum *
Checksum of pari-2.8-2341-g61b65cc.tar.gz unchanged
$ ls -l
total 0
-rw-rw-r-- 1 dima dima 0 Jun 13 07:27 pari
```
OK, this particular case is largely innocent, but still. I won't mind if this is addressed on another ticket.



---

archive/issue_events_279900.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-06-13T06:34:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19984#event-279900"
}
```



---

archive/issue_events_279901.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-06-13T06:34:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19984#event-279901"
}
```



---

archive/issue_comments_286210.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer, Dima Pasechnik**",
    "created_at": "2016-06-13T06:34:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286210",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Jeroen Demeyer, Dima Pasechnik**



---

archive/issue_comments_286211.json:
```json
{
    "body": "Changed branch from **[u/vbraun/correctly_fix_checksums](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/correctly_fix_checksums)** to **[`b1c8a74`](https://github.com/sagemath/sagetrac-mirror/commit/b1c8a74cab7f121e5f7b26776481d41fd4cb2076)**",
    "created_at": "2016-06-14T07:10:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19984#issuecomment-286211",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vbraun/correctly_fix_checksums](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/correctly_fix_checksums)** to **[`b1c8a74`](https://github.com/sagemath/sagetrac-mirror/commit/b1c8a74cab7f121e5f7b26776481d41fd4cb2076)**



---

archive/issue_events_279902.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-06-14T07:10:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19984#event-279902"
}
```



---

archive/issue_events_279903.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "04ebe99ed2bf17a47e72537657a8a4093b3e661f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-06-14T07:10:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19984",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19984#event-279903"
}
```
