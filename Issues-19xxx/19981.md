# Issue 19981: is_exact for asymptotic ring

archive/issues_019744.json:
```json
{
    "body": "This ticket shall implement a method that returns wheter all terms of some asymptotic expansion are exact terms.\n\nCC:  @cheuberg @dkrenn\n\nBranch/Commit: da853f87105d7e8ec4883141e1a98911cb91900c\n\nReviewer: Daniel Krenn, Clemens Heuberger\n\nAuthor: Benjamin Hackl\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19981\n\n",
    "closed_at": "2016-02-02T23:06:35Z",
    "created_at": "2016-01-28T23:18:39Z",
    "labels": [
        "component: asymptotic expansions"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "is_exact for asymptotic ring",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19981",
    "user": "https://github.com/behackl"
}
```
This ticket shall implement a method that returns wheter all terms of some asymptotic expansion are exact terms.

CC:  @cheuberg @dkrenn

Branch/Commit: da853f87105d7e8ec4883141e1a98911cb91900c

Reviewer: Daniel Krenn, Clemens Heuberger

Author: Benjamin Hackl

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19981





---

archive/issue_comments_271073.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2016-01-29T00:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271073",
    "user": "https://github.com/behackl"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_271074.json:
```json
{
    "body": "<a id='comment:2'></a>Note: this is on top of `7.1.beta1`.\n\nAny more suggestions for practical improvements?",
    "created_at": "2016-01-29T00:04:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271074",
    "user": "https://github.com/behackl"
}
```

<a id='comment:2'></a>Note: this is on top of `7.1.beta1`.

Any more suggestions for practical improvements?



---

archive/issue_comments_271075.json:
```json
{
    "body": "<a id='comment:3'></a>Replying to [comment:2 behackl]:\n> Note: this is on top of `7.1.beta1`.\n> \n> Any more suggestions for practical improvements?\n\nno; they could go into a separate ticket anyway.",
    "created_at": "2016-01-29T04:26:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271075",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:3'></a>Replying to [comment:2 behackl]:
> Note: this is on top of `7.1.beta1`.
> 
> Any more suggestions for practical improvements?

no; they could go into a separate ticket anyway.



---

archive/issue_comments_271076.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 cheuberg]:\n> they could go into a separate ticket anyway.\n\n\n+1 for separate tickets.",
    "created_at": "2016-01-29T18:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271076",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:4'></a>Replying to [comment:3 cheuberg]:
> they could go into a separate ticket anyway.


+1 for separate tickets.



---

archive/issue_comments_271077.json:
```json
{
    "body": "<a id='comment:5'></a>I had a quick look at the code:\n\n> |                                                                                                                                          |                    |\n> |------------------------------------------------------------------------------------------------------------------------------------------|--------------------|\n> |[cc0137d](http://git.sagemath.org/sage.git/commit/?id=cc0137d1c4806a0720e0b3428e3ccd45948120ad)|`implement is_exact`|\n\n\nIMHO inefficient; `has_same_summands` should do better, since no new mutable posets have to be created.\n\n> |                                                                                                                                          |                   |\n> |------------------------------------------------------------------------------------------------------------------------------------------|-------------------|\n> |[550e717](http://git.sagemath.org/sage.git/commit/?id=550e7178b91b312f1513220f05045efb62dd5eb4)|`implement _latex_`|\n\n\n`SR` uses the commutativity of the multiplication sometimes, so LaTeX-output might differ from repr-output. I suggest to implement `_latex_` for terms and growth groups as they know what to do.",
    "created_at": "2016-01-29T18:27:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271077",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:5'></a>I had a quick look at the code:

> |                                                                                                                                          |                    |
> |------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
> |[cc0137d](http://git.sagemath.org/sage.git/commit/?id=cc0137d1c4806a0720e0b3428e3ccd45948120ad)|`implement is_exact`|


IMHO inefficient; `has_same_summands` should do better, since no new mutable posets have to be created.

> |                                                                                                                                          |                   |
> |------------------------------------------------------------------------------------------------------------------------------------------|-------------------|
> |[550e717](http://git.sagemath.org/sage.git/commit/?id=550e7178b91b312f1513220f05045efb62dd5eb4)|`implement _latex_`|


`SR` uses the commutativity of the multiplication sometimes, so LaTeX-output might differ from repr-output. I suggest to implement `_latex_` for terms and growth groups as they know what to do.



---

archive/issue_comments_271078.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 dkrenn]:\n> I had a quick look at the code:\n> \n> > |                                                                                                                                          |                    |\n> > |------------------------------------------------------------------------------------------------------------------------------------------|--------------------|\n> > |[cc0137d](http://git.sagemath.org/sage.git/commit/?id=cc0137d1c4806a0720e0b3428e3ccd45948120ad)|`implement is_exact`|\n\n> \n> IMHO inefficient; `has_same_summands` should do better, since no new mutable posets have to be created.\n\n\nI'd even use `_has_same_summands_`, the parent is certainly the same so this is even more efficient. Will change later.\n\n> \n> > |                                                                                                                                          |                   |\n> > |------------------------------------------------------------------------------------------------------------------------------------------|-------------------|\n> > |[550e717](http://git.sagemath.org/sage.git/commit/?id=550e7178b91b312f1513220f05045efb62dd5eb4)|`implement _latex_`|\n\n> \n> `SR` uses the commutativity of the multiplication sometimes, so LaTeX-output might differ from repr-output. I suggest to implement `_latex_` for terms and growth groups as they know what to do.\n\n\nThat was/is my original plan, and this is also the reason why I didn't set this to `needs_review`. ;-) However, I wanted to have nice (growth-ordered) latex-output quickly in order to check the output of the singularity analysis generator; and this was the simplest implementation I could think of. The code is just dumped here.\n\nI'll also split this ticket into two.",
    "created_at": "2016-01-29T19:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271078",
    "user": "https://github.com/behackl"
}
```

<a id='comment:6'></a>Replying to [comment:5 dkrenn]:
> I had a quick look at the code:
> 
> > |                                                                                                                                          |                    |
> > |------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
> > |[cc0137d](http://git.sagemath.org/sage.git/commit/?id=cc0137d1c4806a0720e0b3428e3ccd45948120ad)|`implement is_exact`|

> 
> IMHO inefficient; `has_same_summands` should do better, since no new mutable posets have to be created.


I'd even use `_has_same_summands_`, the parent is certainly the same so this is even more efficient. Will change later.

> 
> > |                                                                                                                                          |                   |
> > |------------------------------------------------------------------------------------------------------------------------------------------|-------------------|
> > |[550e717](http://git.sagemath.org/sage.git/commit/?id=550e7178b91b312f1513220f05045efb62dd5eb4)|`implement _latex_`|

> 
> `SR` uses the commutativity of the multiplication sometimes, so LaTeX-output might differ from repr-output. I suggest to implement `_latex_` for terms and growth groups as they know what to do.


That was/is my original plan, and this is also the reason why I didn't set this to `needs_review`. ;-) However, I wanted to have nice (growth-ordered) latex-output quickly in order to check the output of the singularity analysis generator; and this was the simplest implementation I could think of. The code is just dumped here.

I'll also split this ticket into two.



---

archive/issue_comments_271079.json:
```json
{
    "body": "<a id='comment:7'></a>New commits:",
    "created_at": "2016-01-30T15:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271079",
    "user": "https://github.com/behackl"
}
```

<a id='comment:7'></a>New commits:



---

archive/issue_comments_271080.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-01-30T15:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271080",
    "user": "https://github.com/behackl"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_271081.json:
```json
{
    "body": "<a id='comment:8'></a>Typo: \"Nothin.\", but you could remove the INPUT-block completely. Otherwise looks good. Still have to wait until I have a working 7.1.beta1.\n\nPS: Author missing",
    "created_at": "2016-01-30T16:04:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271081",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:8'></a>Typo: "Nothin.", but you could remove the INPUT-block completely. Otherwise looks good. Still have to wait until I have a working 7.1.beta1.

PS: Author missing



---

archive/issue_comments_271082.json:
```json
{
    "body": "<a id='comment:9'></a>Apart from that: while the routine is hardly efficiency critical, it is somewhat inefficient to construct `exact_part` and then comparing with the original just to check whether all summands are `ExactTerm`s. If this is to ensure that future extensions of the term monoids won't introduce inconsistencies, then there could be a helper method `is_exact`.",
    "created_at": "2016-01-30T17:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271082",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:9'></a>Apart from that: while the routine is hardly efficiency critical, it is somewhat inefficient to construct `exact_part` and then comparing with the original just to check whether all summands are `ExactTerm`s. If this is to ensure that future extensions of the term monoids won't introduce inconsistencies, then there could be a helper method `is_exact`.



---

archive/issue_comments_271083.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 cheuberg]:\n> Apart from that: while the routine is hardly efficiency critical, it is somewhat inefficient to construct `exact_part` and then comparing with the original just to check whether all summands are `ExactTerm`s. If this is to ensure that future extensions of the term monoids won't introduce inconsistencies, then there could be a helper method `is_exact`.\n\n\nTrue. Maybe something like `all(T.is_exact() for T in self.summands)`...",
    "created_at": "2016-01-30T17:44:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271083",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:10'></a>Replying to [comment:9 cheuberg]:
> Apart from that: while the routine is hardly efficiency critical, it is somewhat inefficient to construct `exact_part` and then comparing with the original just to check whether all summands are `ExactTerm`s. If this is to ensure that future extensions of the term monoids won't introduce inconsistencies, then there could be a helper method `is_exact`.


True. Maybe something like `all(T.is_exact() for T in self.summands)`...



---

archive/issue_comments_271084.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-01-31T09:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271084",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_271085.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:10 dkrenn]:\n> True. Maybe something like `all(T.is_exact() for T in self.summands)`...\n\n\nThat's what I meant.",
    "created_at": "2016-01-31T13:27:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271085",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:12'></a>Replying to [comment:10 dkrenn]:
> True. Maybe something like `all(T.is_exact() for T in self.summands)`...


That's what I meant.



---

archive/issue_comments_271086.json:
```json
{
    "body": "<a id='comment:13'></a>I'm not a very big fan of having a method `is_exact` for terms, where this would just return `isinstance(self, ExactTerm)`. I think that this would just add an unneccessary layer of function calls.\n\nAre you against something like `all(isinstance(T, ExactTerm) for T in self.summands)`?",
    "created_at": "2016-01-31T22:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271086",
    "user": "https://github.com/behackl"
}
```

<a id='comment:13'></a>I'm not a very big fan of having a method `is_exact` for terms, where this would just return `isinstance(self, ExactTerm)`. I think that this would just add an unneccessary layer of function calls.

Are you against something like `all(isinstance(T, ExactTerm) for T in self.summands)`?



---

archive/issue_comments_271087.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-02T12:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271087",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_271088.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-02-02T12:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271088",
    "user": "https://github.com/behackl"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_271089.json:
```json
{
    "body": "<a id='comment:15'></a>I've changed my mind: to keep our style of programming consistent, I have implemented an `is_exact`-method for terms and replaced all `isinstance(term, ExactTerm)`-statements by `term.is_exact()`.\n\nBack to `needs_review`.",
    "created_at": "2016-02-02T12:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271089",
    "user": "https://github.com/behackl"
}
```

<a id='comment:15'></a>I've changed my mind: to keep our style of programming consistent, I have implemented an `is_exact`-method for terms and replaced all `isinstance(term, ExactTerm)`-statements by `term.is_exact()`.

Back to `needs_review`.



---

archive/issue_comments_271090.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-02T12:32:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271090",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_271091.json:
```json
{
    "body": "<a id='comment:16'></a>Seems to be fine now.",
    "created_at": "2016-02-02T12:32:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271091",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:16'></a>Seems to be fine now.



---

archive/issue_events_054502.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-02T23:06:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19981#event-54502"
}
```



---

archive/issue_comments_271092.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-02-02T23:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19981",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19981#issuecomment-271092",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
