# Issue 19031: New Algorithm for Top-K Closeness Centralities

archive/issues_018794.json:
```json
{
    "assignees": [],
    "body": "Implement the algorithm in http://arxiv.org/abs/1507.01490 for computing the k most central vertices according to closeness centrality.\n\nDepends on #19007\nDepends on #19014\n\nCC:  @nathanncohen @dcoudert\n\nKeywords: **Closeness Centrality, top-k**\n\nBranch/Commit: **[1367f00](https://github.com/sagemath/sagetrac-mirror/commit/1367f0076288c84403c7b962dc2b5e53fa0c170a)**\n\nReviewer: **David Coudert**\n\nAuthor: **Michele Borassi**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19031_\n\n",
    "closed_at": "2015-08-23T23:31:12Z",
    "created_at": "2015-08-14T12:26:21Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "New Algorithm for Top-K Closeness Centralities",
    "type": "issue",
    "updated_at": "2015-08-23T23:31:12Z",
    "url": "https://github.com/sagemath/sage/issues/19031",
    "user": "https://github.com/sagetrac-borassi"
}
```
Implement the algorithm in http://arxiv.org/abs/1507.01490 for computing the k most central vertices according to closeness centrality.

Depends on #19007
Depends on #19014

CC:  @nathanncohen @dcoudert

Keywords: **Closeness Centrality, top-k**

Branch/Commit: **[1367f00](https://github.com/sagemath/sagetrac-mirror/commit/1367f0076288c84403c7b962dc2b5e53fa0c170a)**

Reviewer: **David Coudert**

Author: **Michele Borassi**

_Issue created by migration from https://trac.sagemath.org/ticket/19031_





---

archive/issue_events_252339.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-14T12:26:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19031#event-252339"
}
```



---

archive/issue_events_252340.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-14T12:26:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19031#event-252340"
}
```



---

archive/issue_events_252341.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-14T12:29:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19031#event-252341"
}
```



---

archive/issue_comments_270679.json:
```json
{
    "body": "Changed keywords from **** to **Closeness Centrality, top-k**",
    "created_at": "2015-08-14T12:29:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270679",
    "user": "https://github.com/sagetrac-borassi"
}
```

Changed keywords from **** to **Closeness Centrality, top-k**



---

archive/issue_events_252342.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-14T12:29:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19031#event-252342"
}
```



---

archive/issue_comments_270680.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+Implement the algorithm in http://arxiv.org/abs/1507.01490 for computing the k most central vertices according to closeness centrality.\n``````\n",
    "created_at": "2015-08-14T12:29:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270680",
    "user": "https://github.com/sagetrac-borassi"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+Implement the algorithm in http://arxiv.org/abs/1507.01490 for computing the k most central vertices according to closeness centrality.
``````




---

archive/issue_comments_270681.json:
```json
{
    "body": "Author: **Michele Borassi**",
    "created_at": "2015-08-14T12:29:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270681",
    "user": "https://github.com/sagetrac-borassi"
}
```

Author: **Michele Borassi**



---

archive/issue_comments_270682.json:
```json
{
    "body": "Dependencies: **#19007,#19014**",
    "created_at": "2015-08-14T12:29:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270682",
    "user": "https://github.com/sagetrac-borassi"
}
```

Dependencies: **#19007,#19014**



---

archive/issue_comments_270683.json:
```json
{
    "body": "Branch: **[u/borassi/new_algorithm_for_top_k_closeness_centralities](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/new_algorithm_for_top_k_closeness_centralities)**",
    "created_at": "2015-08-17T11:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270683",
    "user": "https://github.com/sagetrac-borassi"
}
```

Branch: **[u/borassi/new_algorithm_for_top_k_closeness_centralities](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/new_algorithm_for_top_k_closeness_centralities)**



---

archive/issue_comments_270684.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c\">48514ad</a></td><td><code>Moved centrality_closeness to centrality.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d\">cf9cf87</a></td><td><code>Trailing whitespaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/417476495e176150d2ba92bed3b6b894314fc185\">4174764</a></td><td><code>Reviewer's suggestions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9c1c60e6f82ee5bb48484d0b1d00e6aa088abc3\">e9c1c60</a></td><td><code>Merged with #19007 and #19014</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/148d26cdbbc36f340a340316cf4ef466d9b46abc\">148d26c</a></td><td><code>Temp</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09d67a9d858c8891c20bf628c539b9c8250e424d\">09d67a9</a></td><td><code>First draft</code></td></tr></table>\n",
    "created_at": "2015-08-17T16:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270684",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'>Comment 3:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/48514adedac2e122137907f410a92dcd5e6e6e3c">48514ad</a></td><td><code>Moved centrality_closeness to centrality.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf9cf870c430b7f4ba06ec990fa37cf9ae66290d">cf9cf87</a></td><td><code>Trailing whitespaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/417476495e176150d2ba92bed3b6b894314fc185">4174764</a></td><td><code>Reviewer's suggestions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9c1c60e6f82ee5bb48484d0b1d00e6aa088abc3">e9c1c60</a></td><td><code>Merged with #19007 and #19014</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/148d26cdbbc36f340a340316cf4ef466d9b46abc">148d26c</a></td><td><code>Temp</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09d67a9d858c8891c20bf628c539b9c8250e424d">09d67a9</a></td><td><code>First draft</code></td></tr></table>




---

archive/issue_comments_270685.json:
```json
{
    "body": "Commit: **[09d67a9](https://github.com/sagemath/sagetrac-mirror/commit/09d67a9d858c8891c20bf628c539b9c8250e424d)**",
    "created_at": "2015-08-17T16:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270685",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[09d67a9](https://github.com/sagemath/sagetrac-mirror/commit/09d67a9d858c8891c20bf628c539b9c8250e424d)**



---

archive/issue_comments_270686.json:
```json
{
    "body": "Changed commit from **[09d67a9](https://github.com/sagemath/sagetrac-mirror/commit/09d67a9d858c8891c20bf628c539b9c8250e424d)** to **[a83cdf0](https://github.com/sagemath/sagetrac-mirror/commit/a83cdf0e44dfc33e2b0215da7a926bd13dd1bc5c)**",
    "created_at": "2015-08-17T16:40:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270686",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[09d67a9](https://github.com/sagemath/sagetrac-mirror/commit/09d67a9d858c8891c20bf628c539b9c8250e424d)** to **[a83cdf0](https://github.com/sagemath/sagetrac-mirror/commit/a83cdf0e44dfc33e2b0215da7a926bd13dd1bc5c)**



---

archive/issue_comments_270687.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/131c421688ad400f8ce2732f24470909a8d42320\">131c421</a></td><td><code>Temp</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2693f52f86aebf51fb3e96f850d37101db23dc5a\">2693f52</a></td><td><code>First draft of Tarjan's SCC algorithm</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/323803933d6dda2fc47c830028c069e89d2b17b1\">3238039</a></td><td><code>Reviewer's suggestions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61bca8afff2c880210cd57c86d044a7d947a4b08\">61bca8a</a></td><td><code>Reviewer's suggestions and small improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af07cee87596209edf6119824fe03eb0d329c6c0\">af07cee</a></td><td><code>Reviewer's suggestions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a83cdf0e44dfc33e2b0215da7a926bd13dd1bc5c\">a83cdf0</a></td><td><code>First draft</code></td></tr></table>\n",
    "created_at": "2015-08-17T16:40:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270687",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>Comment 4:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/131c421688ad400f8ce2732f24470909a8d42320">131c421</a></td><td><code>Temp</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2693f52f86aebf51fb3e96f850d37101db23dc5a">2693f52</a></td><td><code>First draft of Tarjan's SCC algorithm</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/323803933d6dda2fc47c830028c069e89d2b17b1">3238039</a></td><td><code>Reviewer's suggestions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61bca8afff2c880210cd57c86d044a7d947a4b08">61bca8a</a></td><td><code>Reviewer's suggestions and small improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af07cee87596209edf6119824fe03eb0d329c6c0">af07cee</a></td><td><code>Reviewer's suggestions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a83cdf0e44dfc33e2b0215da7a926bd13dd1bc5c">a83cdf0</a></td><td><code>First draft</code></td></tr></table>




---

archive/issue_events_252343.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-17T16:42:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19031#event-252343"
}
```



---

archive/issue_comments_270688.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nHello!\n\nThis is the first draft of this new closeness centrality algorithm. It is able to conclude in reasonable time even on very big graphs, with millions of nodes and billions of edges. The new algorithm is in the last commit (while all previous commits simply merge with dependent tickets).\n\nSee you,\n\nMichele",
    "created_at": "2015-08-17T16:42:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270688",
    "user": "https://github.com/sagetrac-borassi"
}
```

<a id='comment:5'>Comment 5:</a>
Hello!

This is the first draft of this new closeness centrality algorithm. It is able to conclude in reasonable time even on very big graphs, with millions of nodes and billions of edges. The new algorithm is in the last commit (while all previous commits simply merge with dependent tickets).

See you,

Michele



---

archive/issue_comments_270689.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nA first round of comments.\n\nIn method `_estimate_reachable_vertices_dir`\n- `The lower bound is stored in reachableL[v]` -> `The lower bound is stored in reachL[v]`\n- Although the method will not be tested, could you please add an `INPUT` section specifying the type and expected size of arrays. You could also briefly document the algorithm implemented in the method.\n- please improve the presentation of the block with all variable declarations. It is hard to read since it constains lots of important calls to various methods. For instance avoid `cdef int i, nscc = tarjan_strongly_connected_components_C`and prefer `cdef int nscc = tarjan_strongly_connected_components_C`\n- What's the need for using type `uint64_t` instead of `int`? the corresponding variables are later cast to `int`.\n- You could use `maxscc = max(scc_sizes[i] for i in range(nscc)`\n\nFor method `_compute_reachable_vertices_undir`, you should add some documentation at the beginning of the method.\n\nMethod counting sort: no comment, but in the future we should certainly create a method somewhere.\n\nIn method `def centrality_closeness_top_k(G, int k=1, int verb=0)`\n- `verb` -> `verbose`\n- the tests for the validity of the results are excessive. There is no need for the loop `range(1000)`. Testing for *one* randomly chosen graph with say `n=20` nodes and `random.randint(1, n*(n-1) / 2)` edges is sufficient.\n- we can do that `for x in sorted_vert[:n]:` when `sorted_vert` is an array of ints ???\n- `if directed: gamma = 0  else: gamma = 1 ` -> `gamma = 0 if directed else 1`\n- when `stopped == True` you don't quit the `for j in range(layer_current_beginning,layer_current_end):`. May be you should replace this loop with a while.\n- you set `gamma = 0`. So you need `gamma==1` only once for undirected graphs. Correct?\n\nDavid.",
    "created_at": "2015-08-18T12:16:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270689",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'>Comment 6:</a>
A first round of comments.

In method `_estimate_reachable_vertices_dir`
- `The lower bound is stored in reachableL[v]` -> `The lower bound is stored in reachL[v]`
- Although the method will not be tested, could you please add an `INPUT` section specifying the type and expected size of arrays. You could also briefly document the algorithm implemented in the method.
- please improve the presentation of the block with all variable declarations. It is hard to read since it constains lots of important calls to various methods. For instance avoid `cdef int i, nscc = tarjan_strongly_connected_components_C`and prefer `cdef int nscc = tarjan_strongly_connected_components_C`
- What's the need for using type `uint64_t` instead of `int`? the corresponding variables are later cast to `int`.
- You could use `maxscc = max(scc_sizes[i] for i in range(nscc)`

For method `_compute_reachable_vertices_undir`, you should add some documentation at the beginning of the method.

Method counting sort: no comment, but in the future we should certainly create a method somewhere.

In method `def centrality_closeness_top_k(G, int k=1, int verb=0)`
- `verb` -> `verbose`
- the tests for the validity of the results are excessive. There is no need for the loop `range(1000)`. Testing for *one* randomly chosen graph with say `n=20` nodes and `random.randint(1, n*(n-1) / 2)` edges is sufficient.
- we can do that `for x in sorted_vert[:n]:` when `sorted_vert` is an array of ints ???
- `if directed: gamma = 0  else: gamma = 1 ` -> `gamma = 0 if directed else 1`
- when `stopped == True` you don't quit the `for j in range(layer_current_beginning,layer_current_end):`. May be you should replace this loop with a while.
- you set `gamma = 0`. So you need `gamma==1` only once for undirected graphs. Correct?

David.



---

archive/issue_comments_270690.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@dcoudert](#comment%3A6):\n\n> A first round of comments.\n> \n> In method `_estimate_reachable_vertices_dir`\n> - `The lower bound is stored in reachableL[v]` -> `The lower bound is stored in reachL[v]`\n\nDone!\n\n> - Although the method will not be tested, could you please add an `INPUT` section specifying the type and expected size of arrays. You could also briefly document the algorithm implemented in the method.\n\nDone!\n\n> - please improve the presentation of the block with all variable declarations. It is hard to read since it constains lots of important calls to various methods. For instance avoid `cdef int i, nscc = tarjan_strongly_connected_components_C`and prefer `cdef int nscc = tarjan_strongly_connected_components_C`\n\nDone!\n\n> - What's the need for using type `uint64_t` instead of `int`? the corresponding variables are later cast to `int`.\n\nWell, it's a bit tricky. The point is that in the recursion for `reachU_scc` I might find values that are much bigger than `g.n`. Since I did not want to test at each step if this occurs, I used `uint64_t` in order to avoid overflow (these values are smaller than `g.n^2`). Then, only at the end, I use min (so that now the values do not overflow), and I set `reachU[i] = <int> min(reachU_scc[scc[i]], g.n)`. However, you are right with `reachL`, and I modified it.\n\n> - You could use `maxscc = max(scc_sizes[i] for i in range(nscc)`\n\nI don't think so, `maxscc` is not the maximum size of a SCC, but it is the SCC with maximum size. In other words, your instruction outputs `scc_sizes[maxscc]`, not `maxscc`. Am I missing something?\n\n> For method `_compute_reachable_vertices_undir`, you should add some documentation at the beginning of the method.\n\nDone\n\n> Method counting sort: no comment, but in the future we should certainly create a method somewhere.\n\nAgree!\n\n> In method `def centrality_closeness_top_k(G, int k=1, int verb=0)`\n> - `verb` -> `verbose`\n\nDone!\n\n> - the tests for the validity of the results are excessive. There is no need for the loop `range(1000)`. Testing for *one* randomly chosen graph with say `n=20` nodes and `random.randint(1, n*(n-1) / 2)` edges is sufficient.\n\nDone! I left it because I had to test it 100,000 times to find the last bug...\n\n> - we can do that `for x in sorted_vert[:n]:` when `sorted_vert` is an array of ints ???\n\nYep: !http://docs.cython.org/src/reference/language_basics.html\n\n> - `if directed: gamma = 0  else: gamma = 1 ` -> `gamma = 0 if directed else 1`\n\nDone!\n\n> - when `stopped == True` you don't quit the `for j in range(layer_current_beginning,layer_current_end):`. May be you should replace this loop with a while.\n\nI added an 'if' at the end of the loop.\n\n> - you set `gamma = 0`. So you need `gamma==1` only once for undirected graphs. Correct?\n\nHmm, correct, but I realized that I could do a little better by slightly changing the implementation. So this does not apply anymore.",
    "created_at": "2015-08-18T15:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270690",
    "user": "https://github.com/sagetrac-borassi"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@dcoudert](#comment%3A6):

> A first round of comments.
> 
> In method `_estimate_reachable_vertices_dir`
> - `The lower bound is stored in reachableL[v]` -> `The lower bound is stored in reachL[v]`

Done!

> - Although the method will not be tested, could you please add an `INPUT` section specifying the type and expected size of arrays. You could also briefly document the algorithm implemented in the method.

Done!

> - please improve the presentation of the block with all variable declarations. It is hard to read since it constains lots of important calls to various methods. For instance avoid `cdef int i, nscc = tarjan_strongly_connected_components_C`and prefer `cdef int nscc = tarjan_strongly_connected_components_C`

Done!

> - What's the need for using type `uint64_t` instead of `int`? the corresponding variables are later cast to `int`.

Well, it's a bit tricky. The point is that in the recursion for `reachU_scc` I might find values that are much bigger than `g.n`. Since I did not want to test at each step if this occurs, I used `uint64_t` in order to avoid overflow (these values are smaller than `g.n^2`). Then, only at the end, I use min (so that now the values do not overflow), and I set `reachU[i] = <int> min(reachU_scc[scc[i]], g.n)`. However, you are right with `reachL`, and I modified it.

> - You could use `maxscc = max(scc_sizes[i] for i in range(nscc)`

I don't think so, `maxscc` is not the maximum size of a SCC, but it is the SCC with maximum size. In other words, your instruction outputs `scc_sizes[maxscc]`, not `maxscc`. Am I missing something?

> For method `_compute_reachable_vertices_undir`, you should add some documentation at the beginning of the method.

Done

> Method counting sort: no comment, but in the future we should certainly create a method somewhere.

Agree!

> In method `def centrality_closeness_top_k(G, int k=1, int verb=0)`
> - `verb` -> `verbose`

Done!

> - the tests for the validity of the results are excessive. There is no need for the loop `range(1000)`. Testing for *one* randomly chosen graph with say `n=20` nodes and `random.randint(1, n*(n-1) / 2)` edges is sufficient.

Done! I left it because I had to test it 100,000 times to find the last bug...

> - we can do that `for x in sorted_vert[:n]:` when `sorted_vert` is an array of ints ???

Yep: !http://docs.cython.org/src/reference/language_basics.html

> - `if directed: gamma = 0  else: gamma = 1 ` -> `gamma = 0 if directed else 1`

Done!

> - when `stopped == True` you don't quit the `for j in range(layer_current_beginning,layer_current_end):`. May be you should replace this loop with a while.

I added an 'if' at the end of the loop.

> - you set `gamma = 0`. So you need `gamma==1` only once for undirected graphs. Correct?

Hmm, correct, but I realized that I could do a little better by slightly changing the implementation. So this does not apply anymore.



---

archive/issue_comments_270691.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0c1b146bff67c84222d7650b1d7d052ff68b7b1\">a0c1b14</a></td><td><code>Reviewer's suggestions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c738015b029f7c93017607a9a26bb5617ab683f\">2c73801</a></td><td><code>Small improvements</code></td></tr></table>\n",
    "created_at": "2015-08-18T15:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270691",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>Comment 8:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0c1b146bff67c84222d7650b1d7d052ff68b7b1">a0c1b14</a></td><td><code>Reviewer's suggestions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c738015b029f7c93017607a9a26bb5617ab683f">2c73801</a></td><td><code>Small improvements</code></td></tr></table>




---

archive/issue_comments_270692.json:
```json
{
    "body": "Changed commit from **[a83cdf0](https://github.com/sagemath/sagetrac-mirror/commit/a83cdf0e44dfc33e2b0215da7a926bd13dd1bc5c)** to **[2c73801](https://github.com/sagemath/sagetrac-mirror/commit/2c738015b029f7c93017607a9a26bb5617ab683f)**",
    "created_at": "2015-08-18T15:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270692",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a83cdf0](https://github.com/sagemath/sagetrac-mirror/commit/a83cdf0e44dfc33e2b0215da7a926bd13dd1bc5c)** to **[2c73801](https://github.com/sagemath/sagetrac-mirror/commit/2c738015b029f7c93017607a9a26bb5617ab683f)**



---

archive/issue_comments_270693.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\n> > - What's the need for using type `uint64_t` instead of `int`? the corresponding variables are later cast to `int`.\n\n> \n> Well, it's a bit tricky. The point is that in the recursion for `reachU_scc` I might find values that are much bigger than `g.n`. Since I did not want to test at each step if this occurs, I used `uint64_t` in order to avoid overflow (these values are smaller than `g.n^2`). Then, only at the end, I use min (so that now the values do not overflow), and I set `reachU[i] = <int> min(reachU_scc[scc[i]], g.n)`. However, you are right with `reachL`, and I modified it.\n\nIs it mentioned somewhere?\n  \n> > - You could use `maxscc = max(scc_sizes[i] for i in range(nscc)`\n\n> \n> I don't think so, `maxscc` is not the maximum size of a SCC, but it is the SCC with maximum size. In other words, your instruction outputs `scc_sizes[maxscc]`, not `maxscc`. Am I missing something?\n\nRight, it should be `maxscc = max((scc_sizes[i],i) for i in range(nscc))[1]`, but this is ugly.\n  \n> > - the tests for the validity of the results are excessive. There is no need for the loop `range(1000)`. Testing for *one* randomly chosen graph with say `n=20` nodes and `random.randint(1, n*(n-1) / 2)` edges is sufficient.\n\n> \n> Done! I left it because I had to test it 100,000 times to find the last bug...\n\nThat's a lot!\nHowever, I don't like the `n = random.randint(2,20)`. You could safely let `n=20`, no?\n  \n> > - we can do that `for x in sorted_vert[:n]:` when `sorted_vert` is an array of ints ???\n\n> \n> Yep: !http://docs.cython.org/src/reference/language_basics.html\n\nThat's funny.\n \nCan we always assume that `farness[v]>0`? This is for the `return sorted([(1.0/farness[v],...`. \n\nInstead of `G.vertices()[v]`, you should add a line like `cdef list V = G.vertices()` before the return statement and then use `V[v]`. \n\n\nAbout the behavior when `k>=n`. What you propose is in fact to return the centrality closeness (as a list of couples (centrality,vertex) ). \n- Is your method faster than `centrality_closeness` in this case?\n- This behavior should be documented for the parameter `k`\n\nThat's all for now ;)\n\nDavid.",
    "created_at": "2015-08-18T16:57:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270693",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:9'>Comment 9:</a>
> > - What's the need for using type `uint64_t` instead of `int`? the corresponding variables are later cast to `int`.

> 
> Well, it's a bit tricky. The point is that in the recursion for `reachU_scc` I might find values that are much bigger than `g.n`. Since I did not want to test at each step if this occurs, I used `uint64_t` in order to avoid overflow (these values are smaller than `g.n^2`). Then, only at the end, I use min (so that now the values do not overflow), and I set `reachU[i] = <int> min(reachU_scc[scc[i]], g.n)`. However, you are right with `reachL`, and I modified it.

Is it mentioned somewhere?
  
> > - You could use `maxscc = max(scc_sizes[i] for i in range(nscc)`

> 
> I don't think so, `maxscc` is not the maximum size of a SCC, but it is the SCC with maximum size. In other words, your instruction outputs `scc_sizes[maxscc]`, not `maxscc`. Am I missing something?

Right, it should be `maxscc = max((scc_sizes[i],i) for i in range(nscc))[1]`, but this is ugly.
  
> > - the tests for the validity of the results are excessive. There is no need for the loop `range(1000)`. Testing for *one* randomly chosen graph with say `n=20` nodes and `random.randint(1, n*(n-1) / 2)` edges is sufficient.

> 
> Done! I left it because I had to test it 100,000 times to find the last bug...

That's a lot!
However, I don't like the `n = random.randint(2,20)`. You could safely let `n=20`, no?
  
> > - we can do that `for x in sorted_vert[:n]:` when `sorted_vert` is an array of ints ???

> 
> Yep: !http://docs.cython.org/src/reference/language_basics.html

That's funny.
 
Can we always assume that `farness[v]>0`? This is for the `return sorted([(1.0/farness[v],...`. 

Instead of `G.vertices()[v]`, you should add a line like `cdef list V = G.vertices()` before the return statement and then use `V[v]`. 


About the behavior when `k>=n`. What you propose is in fact to return the centrality closeness (as a list of couples (centrality,vertex) ). 
- Is your method faster than `centrality_closeness` in this case?
- This behavior should be documented for the parameter `k`

That's all for now ;)

David.



---

archive/issue_comments_270694.json:
```json
{
    "body": "Changed commit from **[2c73801](https://github.com/sagemath/sagetrac-mirror/commit/2c738015b029f7c93017607a9a26bb5617ab683f)** to **[06d2c00](https://github.com/sagemath/sagetrac-mirror/commit/06d2c00fbfdf6f0166834b68e5e9b0929c5abb89)**",
    "created_at": "2015-08-19T09:26:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270694",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2c73801](https://github.com/sagemath/sagetrac-mirror/commit/2c738015b029f7c93017607a9a26bb5617ab683f)** to **[06d2c00](https://github.com/sagemath/sagetrac-mirror/commit/06d2c00fbfdf6f0166834b68e5e9b0929c5abb89)**



---

archive/issue_comments_270695.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06d2c00fbfdf6f0166834b68e5e9b0929c5abb89\">06d2c00</a></td><td><code>Other reviewer's suggestions</code></td></tr></table>\n",
    "created_at": "2015-08-19T09:26:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270695",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'>Comment 10:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06d2c00fbfdf6f0166834b68e5e9b0929c5abb89">06d2c00</a></td><td><code>Other reviewer's suggestions</code></td></tr></table>




---

archive/issue_comments_270696.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\n> > > - What's the need for using type `uint64_t` instead of `int`? the corresponding variables are later cast to `int`.\n> > > \n> > > \n> > > \n> > > \n\n> > \n> > Well, it's a bit tricky. The point is that in the recursion for `reachU_scc` I might find values that are much bigger than `g.n`. Since I did not want to test at each step if this occurs, I used `uint64_t` in order to avoid overflow (these values are smaller than `g.n^2`). Then, only at the end, I use min (so that now the values do not overflow), and I set `reachU[i] = <int> min(reachU_scc[scc[i]], g.n)`. However, you are right with `reachL`, and I modified it.\n> > \n> > \n> > \n> > \n\n> Is it mentioned somewhere?\n> \n\nI added two inline comments to explain it.\n\n> > > - the tests for the validity of the results are excessive. There is no need for the loop `range(1000)`. Testing for *one* randomly chosen graph with say `n=20` nodes and `random.randint(1, n*(n-1) / 2)` edges is sufficient.\n> > > \n> > > \n> > > \n> > > \n\n> > \n> > Done! I left it because I had to test it 100,000 times to find the last bug...\n> > \n> > \n> > \n> > \n\n> That's a lot!\n> However, I don't like the `n = random.randint(2,20)`. You could safely let `n=20`, no?\n\nDone!\n\n> Can we always assume that farness[v]>0? This is for the return sorted([(1.0/farness[v],....\n\nYep.\n\nThe only instructions that modify the farness are `farness[x] = n` (if a visit is stopped) and `farness[x] = ((<double> f) * (n-1)) / (<double>(nd-1) * (nd-1))`, where `f` is a (positive) sum of distances, `nd-1` is positive because `nd` is the number of reachable vertices from a vertex `x`. If `nd==1`, it means that the out-degree of `x` is 0, and we skip the analysis of `x`, so this case never occurs. Then, `n>=nd`, and hence also `n-1` is positive.\n\n> Instead of `G.vertices()[v]`, you should add a line like `cdef list V = G.vertices()` before the return statement and then use `V[v]`.\n\nDone!\n\n> About the behavior when `k>=n`. What you propose is in fact to return the centrality closeness (as a list of couples (centrality,vertex) ). \n> - Is your method faster than `centrality_closeness` in this case?\n\nNo, it should be the same (actually, a bit slower because we make some computations during the BFSes).\n\n> - This behavior should be documented for the parameter `k`\n\nDone!",
    "created_at": "2015-08-19T09:37:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270696",
    "user": "https://github.com/sagetrac-borassi"
}
```

<a id='comment:11'>Comment 11:</a>
> > > - What's the need for using type `uint64_t` instead of `int`? the corresponding variables are later cast to `int`.
> > > 
> > > 
> > > 
> > > 

> > 
> > Well, it's a bit tricky. The point is that in the recursion for `reachU_scc` I might find values that are much bigger than `g.n`. Since I did not want to test at each step if this occurs, I used `uint64_t` in order to avoid overflow (these values are smaller than `g.n^2`). Then, only at the end, I use min (so that now the values do not overflow), and I set `reachU[i] = <int> min(reachU_scc[scc[i]], g.n)`. However, you are right with `reachL`, and I modified it.
> > 
> > 
> > 
> > 

> Is it mentioned somewhere?
> 

I added two inline comments to explain it.

> > > - the tests for the validity of the results are excessive. There is no need for the loop `range(1000)`. Testing for *one* randomly chosen graph with say `n=20` nodes and `random.randint(1, n*(n-1) / 2)` edges is sufficient.
> > > 
> > > 
> > > 
> > > 

> > 
> > Done! I left it because I had to test it 100,000 times to find the last bug...
> > 
> > 
> > 
> > 

> That's a lot!
> However, I don't like the `n = random.randint(2,20)`. You could safely let `n=20`, no?

Done!

> Can we always assume that farness[v]>0? This is for the return sorted([(1.0/farness[v],....

Yep.

The only instructions that modify the farness are `farness[x] = n` (if a visit is stopped) and `farness[x] = ((<double> f) * (n-1)) / (<double>(nd-1) * (nd-1))`, where `f` is a (positive) sum of distances, `nd-1` is positive because `nd` is the number of reachable vertices from a vertex `x`. If `nd==1`, it means that the out-degree of `x` is 0, and we skip the analysis of `x`, so this case never occurs. Then, `n>=nd`, and hence also `n-1` is positive.

> Instead of `G.vertices()[v]`, you should add a line like `cdef list V = G.vertices()` before the return statement and then use `V[v]`.

Done!

> About the behavior when `k>=n`. What you propose is in fact to return the centrality closeness (as a list of couples (centrality,vertex) ). 
> - Is your method faster than `centrality_closeness` in this case?

No, it should be the same (actually, a bit slower because we make some computations during the BFSes).

> - This behavior should be documented for the parameter `k`

Done!



---

archive/issue_comments_270697.json:
```json
{
    "body": "Changed commit from **[06d2c00](https://github.com/sagemath/sagetrac-mirror/commit/06d2c00fbfdf6f0166834b68e5e9b0929c5abb89)** to **[84031c3](https://github.com/sagemath/sagetrac-mirror/commit/84031c3875f0ad14db2d984c43373af32bdc704f)**",
    "created_at": "2015-08-19T09:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270697",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[06d2c00](https://github.com/sagemath/sagetrac-mirror/commit/06d2c00fbfdf6f0166834b68e5e9b0929c5abb89)** to **[84031c3](https://github.com/sagemath/sagetrac-mirror/commit/84031c3875f0ad14db2d984c43373af32bdc704f)**



---

archive/issue_comments_270698.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84031c3875f0ad14db2d984c43373af32bdc704f\">84031c3</a></td><td><code>Added documentation for k</code></td></tr></table>\n",
    "created_at": "2015-08-19T09:43:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270698",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84031c3875f0ad14db2d984c43373af32bdc704f">84031c3</a></td><td><code>Added documentation for k</code></td></tr></table>




---

archive/issue_comments_270699.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\n> > About the behavior when `k>=n`. What you propose is in fact to return the centrality closeness (as a list of couples (centrality,vertex) ). \n> > - Is your method faster than `centrality_closeness` in this case?\n\n> \n> No, it should be the same (actually, a bit slower because we make some computations during the BFSes).\n\nSo you should add a test `if k>=n` at the beginning of the method and if True call the other method and format the result. You could also add a test `n==0` and/or `n==1` where the result is obvious.",
    "created_at": "2015-08-19T11:29:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270699",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:13'>Comment 13:</a>
> > About the behavior when `k>=n`. What you propose is in fact to return the centrality closeness (as a list of couples (centrality,vertex) ). 
> > - Is your method faster than `centrality_closeness` in this case?

> 
> No, it should be the same (actually, a bit slower because we make some computations during the BFSes).

So you should add a test `if k>=n` at the beginning of the method and if True call the other method and format the result. You could also add a test `n==0` and/or `n==1` where the result is obvious.



---

archive/issue_comments_270700.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f855c6676d6f10a6f68b64b4c2be693c08eba91\">0f855c6</a></td><td><code>Reviewer's suggestions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ec3f4448f12b96fc9c5e4de2bbb402176ba9c17\">1ec3f44</a></td><td><code>Merged with beta2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbe780c0862c46304ce2b0da4c844178a9ecc8e6\">cbe780c</a></td><td><code>Reviewer's suggestions and small improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/417476495e176150d2ba92bed3b6b894314fc185\">4174764</a></td><td><code>Reviewer's suggestions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c190242582acd62e4a43449194df95205c90622\">0c19024</a></td><td><code>Use check_allocarray</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9167071e5e8408c33125b551168d43c5f4539d19\">9167071</a></td><td><code>Used limits instead of stdint to find maximum int value</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83b80570cb8a41975fbe856d8a319a54c43ee63c\">83b8057</a></td><td><code>Small corrections</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788\">1551c6f</a></td><td><code>Undo commit moving closeness_centrality to centrality.pyx. Corrected links.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd0580ad41ee4f16b924e2718fd0327477d4a746\">fd0580a</a></td><td><code>Merged with #19007</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c1905f8e3affd515bf52b45162afb0a3c5d6cac\">5c1905f</a></td><td><code>New algorithm for closeness centrality</code></td></tr></table>\n",
    "created_at": "2015-08-19T13:43:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270700",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'>Comment 14:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f855c6676d6f10a6f68b64b4c2be693c08eba91">0f855c6</a></td><td><code>Reviewer's suggestions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ec3f4448f12b96fc9c5e4de2bbb402176ba9c17">1ec3f44</a></td><td><code>Merged with beta2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbe780c0862c46304ce2b0da4c844178a9ecc8e6">cbe780c</a></td><td><code>Reviewer's suggestions and small improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/417476495e176150d2ba92bed3b6b894314fc185">4174764</a></td><td><code>Reviewer's suggestions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c190242582acd62e4a43449194df95205c90622">0c19024</a></td><td><code>Use check_allocarray</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9167071e5e8408c33125b551168d43c5f4539d19">9167071</a></td><td><code>Used limits instead of stdint to find maximum int value</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83b80570cb8a41975fbe856d8a319a54c43ee63c">83b8057</a></td><td><code>Small corrections</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1551c6fd513cd4f7ac6c787badd589cf349fb788">1551c6f</a></td><td><code>Undo commit moving closeness_centrality to centrality.pyx. Corrected links.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd0580ad41ee4f16b924e2718fd0327477d4a746">fd0580a</a></td><td><code>Merged with #19007</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c1905f8e3affd515bf52b45162afb0a3c5d6cac">5c1905f</a></td><td><code>New algorithm for closeness centrality</code></td></tr></table>




---

archive/issue_comments_270701.json:
```json
{
    "body": "Changed commit from **[84031c3](https://github.com/sagemath/sagetrac-mirror/commit/84031c3875f0ad14db2d984c43373af32bdc704f)** to **[5c1905f](https://github.com/sagemath/sagetrac-mirror/commit/5c1905f8e3affd515bf52b45162afb0a3c5d6cac)**",
    "created_at": "2015-08-19T13:43:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270701",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[84031c3](https://github.com/sagemath/sagetrac-mirror/commit/84031c3875f0ad14db2d984c43373af32bdc704f)** to **[5c1905f](https://github.com/sagemath/sagetrac-mirror/commit/5c1905f8e3affd515bf52b45162afb0a3c5d6cac)**



---

archive/issue_comments_270702.json:
```json
{
    "body": "Changed commit from **[5c1905f](https://github.com/sagemath/sagetrac-mirror/commit/5c1905f8e3affd515bf52b45162afb0a3c5d6cac)** to **[ced875f](https://github.com/sagemath/sagetrac-mirror/commit/ced875f0b1fba123a0921d5937f894cc8fe41b1e)**",
    "created_at": "2015-08-19T14:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270702",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5c1905f](https://github.com/sagemath/sagetrac-mirror/commit/5c1905f8e3affd515bf52b45162afb0a3c5d6cac)** to **[ced875f](https://github.com/sagemath/sagetrac-mirror/commit/ced875f0b1fba123a0921d5937f894cc8fe41b1e)**



---

archive/issue_comments_270703.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ced875f0b1fba123a0921d5937f894cc8fe41b1e\">ced875f</a></td><td><code>Reviewer's suggestions / added a reference</code></td></tr></table>\n",
    "created_at": "2015-08-19T14:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270703",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'>Comment 15:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ced875f0b1fba123a0921d5937f894cc8fe41b1e">ced875f</a></td><td><code>Reviewer's suggestions / added a reference</code></td></tr></table>




---

archive/issue_comments_270704.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nHelloooooooo!\n\nAfter we moved `centrality_closeness` back to `generic_graph`, I had to rebase this ticket. The new algorithm is still in file `centrality.pyx`, but it is not available in `generic_graph` (that is, `g.centrality_closeness_top_k()` does not work anymore). However, I don't think this is a serious issue, because this algorithm in used in very specialized cases, and the standard Sage user does not need it, in my opinion.\n\nCheers,\n\nMichele",
    "created_at": "2015-08-19T14:12:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270704",
    "user": "https://github.com/sagetrac-borassi"
}
```

<a id='comment:16'>Comment 16:</a>
Helloooooooo!

After we moved `centrality_closeness` back to `generic_graph`, I had to rebase this ticket. The new algorithm is still in file `centrality.pyx`, but it is not available in `generic_graph` (that is, `g.centrality_closeness_top_k()` does not work anymore). However, I don't think this is a serious issue, because this algorithm in used in very specialized cases, and the standard Sage user does not need it, in my opinion.

Cheers,

Michele



---

archive/issue_comments_270705.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2015-08-20T06:41:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270705",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_270706.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nIs not such a big deal to do\n\n```\nsage: from sage.graphs.centrality import centrality_closeness_top_k\nsage: centrality_closeness_top_k(graphs.PetersenGraph(), 3)\n[(0.6, 2), (0.6, 1), (0.6, 0)]\n```\nand it's documented. Other methods such as hyperbolicity, pathwidth, etc. must be imported for similar reasons. As soon as we will find a reasonable solution for lazy import, we may add it in another ticket.\n\nI set this patch to positive review.\n\nDavid.",
    "created_at": "2015-08-20T06:41:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270706",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:17'>Comment 17:</a>
Is not such a big deal to do

```
sage: from sage.graphs.centrality import centrality_closeness_top_k
sage: centrality_closeness_top_k(graphs.PetersenGraph(), 3)
[(0.6, 2), (0.6, 1), (0.6, 0)]
```
and it's documented. Other methods such as hyperbolicity, pathwidth, etc. must be imported for similar reasons. As soon as we will find a reasonable solution for lazy import, we may add it in another ticket.

I set this patch to positive review.

David.



---

archive/issue_events_252344.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-08-20T06:41:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19031#event-252344"
}
```



---

archive/issue_events_252345.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-08-20T06:41:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19031#event-252345"
}
```



---

archive/issue_comments_270707.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nOn 32-bit Linux:\n\n```\nsage -t --long src/sage/graphs/centrality.pyx\n**********************************************************************\nFile \"src/sage/graphs/centrality.pyx\", line 588, in sage.graphs.centrality.centrality_closeness_top_k\nFailed example:\n    centrality_closeness_top_k(g, 5, 1)\nExpected:\n    Final performance ratio: 0.766666666667\n    [(0.36, 5),\n     (0.36, 4),\n     (0.3333333333333333, 6),\n     (0.3333333333333333, 3),\n     (0.29032258064516125, 2)]\nGot:\n    Final performance ratio: 0.805555555556\n    [(0.36, 5),\n     (0.36, 4),\n     (0.3333333333333333, 6),\n     (0.3333333333333333, 3),\n     (0.29032258064516125, 7)]\n**********************************************************************\n1 item had failures:\n   1 of  40 in sage.graphs.centrality.centrality_closeness_top_k\n    [51 tests, 1 failure, 0.16 s]\n```",
    "created_at": "2015-08-20T17:01:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270707",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:18'>Comment 18:</a>
On 32-bit Linux:

```
sage -t --long src/sage/graphs/centrality.pyx
**********************************************************************
File "src/sage/graphs/centrality.pyx", line 588, in sage.graphs.centrality.centrality_closeness_top_k
Failed example:
    centrality_closeness_top_k(g, 5, 1)
Expected:
    Final performance ratio: 0.766666666667
    [(0.36, 5),
     (0.36, 4),
     (0.3333333333333333, 6),
     (0.3333333333333333, 3),
     (0.29032258064516125, 2)]
Got:
    Final performance ratio: 0.805555555556
    [(0.36, 5),
     (0.36, 4),
     (0.3333333333333333, 6),
     (0.3333333333333333, 3),
     (0.29032258064516125, 7)]
**********************************************************************
1 item had failures:
   1 of  40 in sage.graphs.centrality.centrality_closeness_top_k
    [51 tests, 1 failure, 0.16 s]
```



---

archive/issue_events_252346.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-20T17:01:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19031#event-252346"
}
```



---

archive/issue_events_252347.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-20T17:01:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19031#event-252347"
}
```



---

archive/issue_comments_270708.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nMichele,\n\nin this tests, nodes 2 and 7 are both correct answers since we have:\n- on a 64bit machine (i.e. my laptop)\n\n```\nsage: from sage.graphs.centrality import centrality_closeness_top_k\nsage: g = graphs.PathGraph(10)\nsage: centrality_closeness_top_k(g, 5, 1)\nFinal performance ratio: 0.766666666667\n[(0.36, 5),\n (0.36, 4),\n (0.3333333333333333, 6),\n (0.3333333333333333, 3),\n (0.29032258064516125, 2)]\nsage: g.centrality_closeness()\n{0: 0.2,\n 1: 0.24324324324324326,\n 2: 0.2903225806451613,\n 3: 0.3333333333333333,\n 4: 0.36,\n 5: 0.36,\n 6: 0.3333333333333333,\n 7: 0.2903225806451613,\n 8: 0.24324324324324326,\n 9: 0.2}\n```\n- on a 32 bits computer (old desktop)\n\n```\nsage: from sage.graphs.centrality import centrality_closeness_top_k\nsage: g = graphs.PathGraph(10)\nsage: centrality_closeness_top_k(g, 5, 1)\nFinal performance ratio: 0.805555555556\n[(0.36, 5),\n (0.36, 4),\n (0.3333333333333333, 6),\n (0.3333333333333333, 3),\n (0.29032258064516125, 7)]\nsage: g.centrality_closeness()\n{0: 0.2,\n 1: 0.24324324324324326,\n 2: 0.2903225806451613,\n 3: 0.3333333333333333,\n 4: 0.36,\n 5: 0.36,\n 6: 0.3333333333333333,\n 7: 0.2903225806451613,\n 8: 0.24324324324324326,\n 9: 0.2}\n```\nThe good point is that the numbers are the same on both machines ;)\n\nOne part of the solution is to call `centrality_closeness_top_k(g, 4, 1)`.\n\nHowever, for the performance ratio it is more difficult.\nIn fact, we have `visited=138` on my mac, and `visited=145` on the 32 bits computer. So we have to understand what could change the number of visited nodes depending on 32-64 bits.\n\nDavid.",
    "created_at": "2015-08-20T22:40:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270708",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:19'>Comment 19:</a>
Michele,

in this tests, nodes 2 and 7 are both correct answers since we have:
- on a 64bit machine (i.e. my laptop)

```
sage: from sage.graphs.centrality import centrality_closeness_top_k
sage: g = graphs.PathGraph(10)
sage: centrality_closeness_top_k(g, 5, 1)
Final performance ratio: 0.766666666667
[(0.36, 5),
 (0.36, 4),
 (0.3333333333333333, 6),
 (0.3333333333333333, 3),
 (0.29032258064516125, 2)]
sage: g.centrality_closeness()
{0: 0.2,
 1: 0.24324324324324326,
 2: 0.2903225806451613,
 3: 0.3333333333333333,
 4: 0.36,
 5: 0.36,
 6: 0.3333333333333333,
 7: 0.2903225806451613,
 8: 0.24324324324324326,
 9: 0.2}
```
- on a 32 bits computer (old desktop)

```
sage: from sage.graphs.centrality import centrality_closeness_top_k
sage: g = graphs.PathGraph(10)
sage: centrality_closeness_top_k(g, 5, 1)
Final performance ratio: 0.805555555556
[(0.36, 5),
 (0.36, 4),
 (0.3333333333333333, 6),
 (0.3333333333333333, 3),
 (0.29032258064516125, 7)]
sage: g.centrality_closeness()
{0: 0.2,
 1: 0.24324324324324326,
 2: 0.2903225806451613,
 3: 0.3333333333333333,
 4: 0.36,
 5: 0.36,
 6: 0.3333333333333333,
 7: 0.2903225806451613,
 8: 0.24324324324324326,
 9: 0.2}
```
The good point is that the numbers are the same on both machines ;)

One part of the solution is to call `centrality_closeness_top_k(g, 4, 1)`.

However, for the performance ratio it is more difficult.
In fact, we have `visited=138` on my mac, and `visited=145` on the 32 bits computer. So we have to understand what could change the number of visited nodes depending on 32-64 bits.

David.



---

archive/issue_comments_270709.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5941f86b4846fa454b384ada4ec2088af5cb2609\">5941f86</a></td><td><code>Removed memset with -1 (32bit problem)</code></td></tr></table>\n",
    "created_at": "2015-08-21T19:01:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270709",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:20'>Comment 20:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5941f86b4846fa454b384ada4ec2088af5cb2609">5941f86</a></td><td><code>Removed memset with -1 (32bit problem)</code></td></tr></table>




---

archive/issue_comments_270710.json:
```json
{
    "body": "Changed commit from **[ced875f](https://github.com/sagemath/sagetrac-mirror/commit/ced875f0b1fba123a0921d5937f894cc8fe41b1e)** to **[5941f86](https://github.com/sagemath/sagetrac-mirror/commit/5941f86b4846fa454b384ada4ec2088af5cb2609)**",
    "created_at": "2015-08-21T19:01:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270710",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ced875f](https://github.com/sagemath/sagetrac-mirror/commit/ced875f0b1fba123a0921d5937f894cc8fe41b1e)** to **[5941f86](https://github.com/sagemath/sagetrac-mirror/commit/5941f86b4846fa454b384ada4ec2088af5cb2609)**



---

archive/issue_comments_270711.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/681d482b053fa261d0d94aeeeec471194a083302\">681d482</a></td><td><code>Corrected doctest with 32bit</code></td></tr></table>\n",
    "created_at": "2015-08-21T20:01:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270711",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>Comment 21:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/681d482b053fa261d0d94aeeeec471194a083302">681d482</a></td><td><code>Corrected doctest with 32bit</code></td></tr></table>




---

archive/issue_comments_270712.json:
```json
{
    "body": "Changed commit from **[5941f86](https://github.com/sagemath/sagetrac-mirror/commit/5941f86b4846fa454b384ada4ec2088af5cb2609)** to **[681d482](https://github.com/sagemath/sagetrac-mirror/commit/681d482b053fa261d0d94aeeeec471194a083302)**",
    "created_at": "2015-08-21T20:01:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270712",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5941f86](https://github.com/sagemath/sagetrac-mirror/commit/5941f86b4846fa454b384ada4ec2088af5cb2609)** to **[681d482](https://github.com/sagemath/sagetrac-mirror/commit/681d482b053fa261d0d94aeeeec471194a083302)**



---

archive/issue_comments_270713.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nHello!\n\nI have installed Sage on a 32bit Virtual Machine: the problem was a comparison between (equal) doubles, and probably due to roundings the error popped out. Indeed, both results were correct. \n\nBy asking only top-4 in the doctest, we avoid such comparisons, and everything works.\n\nThank you very much!\n\nMichele",
    "created_at": "2015-08-21T20:04:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270713",
    "user": "https://github.com/sagetrac-borassi"
}
```

<a id='comment:22'>Comment 22:</a>
Hello!

I have installed Sage on a 32bit Virtual Machine: the problem was a comparison between (equal) doubles, and probably due to roundings the error popped out. Indeed, both results were correct. 

By asking only top-4 in the doctest, we avoid such comparisons, and everything works.

Thank you very much!

Michele



---

archive/issue_events_252348.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-21T20:05:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19031#event-252348"
}
```



---

archive/issue_events_252349.json:
```json
{
    "actor": "https://github.com/sagetrac-borassi",
    "created_at": "2015-08-21T20:05:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19031#event-252349"
}
```



---

archive/issue_comments_270714.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nThe patch passes all tests on both my mac (64bits) and a 32bits linux PC.\nFor me the patch is ok, but is is certainly better to rebase on 9.3.\nDavid.",
    "created_at": "2015-08-21T20:27:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270714",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:24'>Comment 24:</a>
The patch passes all tests on both my mac (64bits) and a 32bits linux PC.
For me the patch is ok, but is is certainly better to rebase on 9.3.
David.



---

archive/issue_comments_270715.json:
```json
{
    "body": "Changed commit from **[681d482](https://github.com/sagemath/sagetrac-mirror/commit/681d482b053fa261d0d94aeeeec471194a083302)** to **[1367f00](https://github.com/sagemath/sagetrac-mirror/commit/1367f0076288c84403c7b962dc2b5e53fa0c170a)**",
    "created_at": "2015-08-22T17:11:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270715",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[681d482](https://github.com/sagemath/sagetrac-mirror/commit/681d482b053fa261d0d94aeeeec471194a083302)** to **[1367f00](https://github.com/sagemath/sagetrac-mirror/commit/1367f0076288c84403c7b962dc2b5e53fa0c170a)**



---

archive/issue_comments_270716.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1367f0076288c84403c7b962dc2b5e53fa0c170a\">1367f00</a></td><td><code>Merged with 6.9.beta3</code></td></tr></table>\n",
    "created_at": "2015-08-22T17:11:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270716",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:25'>Comment 25:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1367f0076288c84403c7b962dc2b5e53fa0c170a">1367f00</a></td><td><code>Merged with 6.9.beta3</code></td></tr></table>




---

archive/issue_events_252350.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-08-22T17:22:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19031#event-252350"
}
```



---

archive/issue_events_252351.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2015-08-22T17:22:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19031#event-252351"
}
```



---

archive/issue_comments_270717.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nThanks.",
    "created_at": "2015-08-22T17:22:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270717",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:26'>Comment 26:</a>
Thanks.



---

archive/issue_comments_270718.json:
```json
{
    "body": "Changed branch from **[u/borassi/new_algorithm_for_top_k_closeness_centralities](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/new_algorithm_for_top_k_closeness_centralities)** to **[1367f00](https://github.com/sagemath/sagetrac-mirror/commit/1367f0076288c84403c7b962dc2b5e53fa0c170a)**",
    "created_at": "2015-08-23T23:31:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19031#issuecomment-270718",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/borassi/new_algorithm_for_top_k_closeness_centralities](https://github.com/sagemath/sagetrac-mirror/tree/u/borassi/new_algorithm_for_top_k_closeness_centralities)** to **[1367f00](https://github.com/sagemath/sagetrac-mirror/commit/1367f0076288c84403c7b962dc2b5e53fa0c170a)**



---

archive/issue_events_252352.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-23T23:31:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19031#event-252352"
}
```



---

archive/issue_events_252353.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "feb86b7826362fe46124d74de783a24bf39aff2f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-08-23T23:31:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19031",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19031#event-252353"
}
```
