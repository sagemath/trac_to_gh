# Issue 19586: Add is_cayley_graph

archive/issues_019349.json:
```json
{
    "assignees": [],
    "body": "This ticket adds a method `is_cayley` to `GenericGraph`. This method checks whether a graph or digraph (which may or may not be connected) is a Cayley graph. If requested, it also returns a permutation group, a mapping from vertices to group elements, and a generating set of the Cayley graph.\n\nA method `has_regular_subgroup` has also been added to `PermutationGroup_generic`. It determines whether the group has a regular subgroup, and returns it if requested.\n\nCC:  @nathanncohen @dimpase\n\nKeywords: **Cayley graphs groups**\n\nBranch: **[c6680e7](https://github.com/sagemath/sagetrac-mirror/commit/c6680e75cd77ffc40e0101b067d57074077f7aad)**\n\nReviewer: **Nathann Cohen**\n\nAuthor: **Jano\u0161 Vidali**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19586_\n\n",
    "closed_at": "2016-01-28T17:14:28Z",
    "created_at": "2015-11-14T13:07:00Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add is_cayley_graph",
    "type": "issue",
    "updated_at": "2016-01-30T10:03:24Z",
    "url": "https://github.com/sagemath/sage/issues/19586",
    "user": "https://github.com/jaanos"
}
```
This ticket adds a method `is_cayley` to `GenericGraph`. This method checks whether a graph or digraph (which may or may not be connected) is a Cayley graph. If requested, it also returns a permutation group, a mapping from vertices to group elements, and a generating set of the Cayley graph.

A method `has_regular_subgroup` has also been added to `PermutationGroup_generic`. It determines whether the group has a regular subgroup, and returns it if requested.

CC:  @nathanncohen @dimpase

Keywords: **Cayley graphs groups**

Branch: **[c6680e7](https://github.com/sagemath/sagetrac-mirror/commit/c6680e75cd77ffc40e0101b067d57074077f7aad)**

Reviewer: **Nathann Cohen**

Author: **Janoš Vidali**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/19586_





---

archive/issue_events_277396.json:
```json
{
    "actor": "https://github.com/jaanos",
    "created_at": "2015-11-14T13:07:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277396"
}
```



---

archive/issue_events_277397.json:
```json
{
    "actor": "https://github.com/jaanos",
    "created_at": "2015-11-14T13:07:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277397"
}
```



---

archive/issue_comments_279083.json:
```json
{
    "body": "Branch: **[u/jaanos/add_is_cayley_graph](https://github.com/sagemath/sagetrac-mirror/tree/u/jaanos/add_is_cayley_graph)**",
    "created_at": "2015-11-14T13:07:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279083",
    "user": "https://github.com/jaanos"
}
```

Branch: **[u/jaanos/add_is_cayley_graph](https://github.com/sagemath/sagetrac-mirror/tree/u/jaanos/add_is_cayley_graph)**



---

archive/issue_events_277398.json:
```json
{
    "actor": "https://github.com/jaanos",
    "created_at": "2015-11-14T13:33:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277398"
}
```



---

archive/issue_comments_279084.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+This ticket adds a method `is_cayley_graph` to `GenericGraph`. This method checks whether a graph or digraph (which may or may not be connected) is a Cayley graph. If a certificate is requested, it also returns a permutation group and a generator set which generate this graph.\n``````\n",
    "created_at": "2015-11-14T13:33:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279084",
    "user": "https://github.com/jaanos"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+This ticket adds a method `is_cayley_graph` to `GenericGraph`. This method checks whether a graph or digraph (which may or may not be connected) is a Cayley graph. If a certificate is requested, it also returns a permutation group and a generator set which generate this graph.
``````




---

archive/issue_comments_279085.json:
```json
{
    "body": "Author: **Jano\u0161 Vidali**",
    "created_at": "2015-11-14T13:33:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279085",
    "user": "https://github.com/jaanos"
}
```

Author: **Janoš Vidali**



---

archive/issue_comments_279086.json:
```json
{
    "body": "Changed keywords from none to **Cayley graphs groups**",
    "created_at": "2015-11-14T13:33:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279086",
    "user": "https://github.com/jaanos"
}
```

Changed keywords from none to **Cayley graphs groups**



---

archive/issue_comments_279087.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI should point out some questions and issues I have with this before it goes into review.\n\n* Should the method be called `is_cayley_graph`, or just `is_cayley`?\n* The current implementation is slow, mainly due to the slow GAP interface and the unneeded work done by `conjugacy_classes_subgroups`. Ticket #19585 already improves this, but it would be even better to do something like this:\n\n```python\ngap = A._gap_().parent()\nC = gap.new(\"\"\"\n    First(ConjugacyClassesSubgroups(%s),\n        x -> Order(Representative(x)) = %d\n            and IsTransitive(Representative(x), [1..%d]));\n\"\"\" % (A._gap_().name(), n, n))\nc = (gap.eval('%s = fail' % C.name()) != 'true')\nif c and certificate:\n    G = A.subgroup(gap_group=C.Representative())\n```\nNow, I guess that maybe this doesn't really belong in `generic_graph.py`. But maybe we could have a method in `PermutationGroup_generic` which checks for the existence of such a group (and have it returned if requested)?\n\n* I should probably check whether the function works correctly with graphs with loops and multigraphs (my instinct says yes for the former and no for the latter).\n* Can we have Unicode characters in the docstrings? If I spell my name properly, Sage compiles, but the documentation doesn't. I guess I could add `# -*- coding: utf-8 -*-` to the top of the file (haven't tested it), but I don't know if we want to do it:)\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9fc982474fb5a2f7161ca0242040ce624a774ec2\">9fc9824</a></td><td><code>Initial documentation for is_cayley_graph()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86c766f6f4f10eced30037916de8ffc75fd5dc35\">86c766f</a></td><td><code>Implement is_cayley_graph for connected graphs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60142d0e8e2b0308ecc67637c7ea3bcd30b68792\">60142d0</a></td><td><code>Add tests for is_cayley_graph</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f925f635ade0e6b9e9f2ad469aa2e5f11e11d12\">0f925f6</a></td><td><code>Implement is_cayley_graph for disconnected graphs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fbff6b8e22c419beef4a5d991c00d5c512a933f9\">fbff6b8</a></td><td><code>Add note regarding optional packages</code></td></tr></table>\n",
    "created_at": "2015-11-14T13:33:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279087",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:2" align="right">comment:2</div>

I should point out some questions and issues I have with this before it goes into review.

* Should the method be called `is_cayley_graph`, or just `is_cayley`?
* The current implementation is slow, mainly due to the slow GAP interface and the unneeded work done by `conjugacy_classes_subgroups`. Ticket #19585 already improves this, but it would be even better to do something like this:

```python
gap = A._gap_().parent()
C = gap.new("""
    First(ConjugacyClassesSubgroups(%s),
        x -> Order(Representative(x)) = %d
            and IsTransitive(Representative(x), [1..%d]));
""" % (A._gap_().name(), n, n))
c = (gap.eval('%s = fail' % C.name()) != 'true')
if c and certificate:
    G = A.subgroup(gap_group=C.Representative())
```
Now, I guess that maybe this doesn't really belong in `generic_graph.py`. But maybe we could have a method in `PermutationGroup_generic` which checks for the existence of such a group (and have it returned if requested)?

* I should probably check whether the function works correctly with graphs with loops and multigraphs (my instinct says yes for the former and no for the latter).
* Can we have Unicode characters in the docstrings? If I spell my name properly, Sage compiles, but the documentation doesn't. I guess I could add `# -*- coding: utf-8 -*-` to the top of the file (haven't tested it), but I don't know if we want to do it:)

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9fc982474fb5a2f7161ca0242040ce624a774ec2">9fc9824</a></td><td><code>Initial documentation for is_cayley_graph()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86c766f6f4f10eced30037916de8ffc75fd5dc35">86c766f</a></td><td><code>Implement is_cayley_graph for connected graphs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60142d0e8e2b0308ecc67637c7ea3bcd30b68792">60142d0</a></td><td><code>Add tests for is_cayley_graph</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f925f635ade0e6b9e9f2ad469aa2e5f11e11d12">0f925f6</a></td><td><code>Implement is_cayley_graph for disconnected graphs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fbff6b8e22c419beef4a5d991c00d5c512a933f9">fbff6b8</a></td><td><code>Add note regarding optional packages</code></td></tr></table>




---

archive/issue_comments_279088.json:
```json
{
    "body": "Commit: **[fbff6b8](https://github.com/sagemath/sagetrac-mirror/commit/fbff6b8e22c419beef4a5d991c00d5c512a933f9)**",
    "created_at": "2015-11-14T13:33:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279088",
    "user": "https://github.com/jaanos"
}
```

Commit: **[fbff6b8](https://github.com/sagemath/sagetrac-mirror/commit/fbff6b8e22c419beef4a5d991c00d5c512a933f9)**



---

archive/issue_events_277399.json:
```json
{
    "actor": "https://github.com/jaanos",
    "created_at": "2015-11-14T13:33:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277399"
}
```



---

archive/issue_comments_279089.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHellooooo,\n\n> I should point out some questions and issues I have with this before it goes into review.\n\nI will try t answer them.\n\n> * Should the method be called `is_cayley_graph`, or just `is_cayley`?\n\nWe have 'is_perfect', 'is_chordal', 'is_cartesian_product', so I'd vote for 'is_cayley'.\n\n> Now, I guess that maybe this doesn't really belong in `generic_graph.py`. But maybe we could have a method in `PermutationGroup_generic` which checks for the existence of such a group (and have it returned if requested)?\n\nDo you know how such a function could be named? Having 'nice and natural name' for this function would rule out the alternative of having a 'hidden helper function' for this code.\n\n> * I should probably check whether the function works correctly with graphs with loops and multigraphs (my instinct says yes for the former and no for the latter).\n\nYou are not 'forced' to make it work in those cases. If it is complicated or if you do not want to deal with those cases, you should look at 'scream_if_not_simple'. It happens very often throughout the graph/ code.\n\n> * Can we have Unicode characters in the docstrings?\n\nWe can, and you can add this directive to the top of the file if you need to. Now, I am not really a big fan of adding a name every time one adds a function. That's just me, and perhaps some others. We already have 'git blame' to figure out who wrote a function, and having in each function the names of all people who ever touched it could quickly grow out of hands. And I personally don't see the added value, and I personally don't want to see Sage's source code turn out into a way to advertise its developers.\n\nI added 'personally' everywhere to insist that it is my view, and that other developers have different opinions. By our customs, you are totally allowed to add your name in an author block if you want to.\n\nThanks for adding this function,\n\nNathann",
    "created_at": "2015-11-14T19:14:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279089",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

Hellooooo,

> I should point out some questions and issues I have with this before it goes into review.

I will try t answer them.

> * Should the method be called `is_cayley_graph`, or just `is_cayley`?

We have 'is_perfect', 'is_chordal', 'is_cartesian_product', so I'd vote for 'is_cayley'.

> Now, I guess that maybe this doesn't really belong in `generic_graph.py`. But maybe we could have a method in `PermutationGroup_generic` which checks for the existence of such a group (and have it returned if requested)?

Do you know how such a function could be named? Having 'nice and natural name' for this function would rule out the alternative of having a 'hidden helper function' for this code.

> * I should probably check whether the function works correctly with graphs with loops and multigraphs (my instinct says yes for the former and no for the latter).

You are not 'forced' to make it work in those cases. If it is complicated or if you do not want to deal with those cases, you should look at 'scream_if_not_simple'. It happens very often throughout the graph/ code.

> * Can we have Unicode characters in the docstrings?

We can, and you can add this directive to the top of the file if you need to. Now, I am not really a big fan of adding a name every time one adds a function. That's just me, and perhaps some others. We already have 'git blame' to figure out who wrote a function, and having in each function the names of all people who ever touched it could quickly grow out of hands. And I personally don't see the added value, and I personally don't want to see Sage's source code turn out into a way to advertise its developers.

I added 'personally' everywhere to insist that it is my view, and that other developers have different opinions. By our customs, you are totally allowed to add your name in an author block if you want to.

Thanks for adding this function,

Nathann



---

archive/issue_events_277400.json:
```json
{
    "actor": "https://github.com/jaanos",
    "created_at": "2015-11-14T19:46:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277400"
}
```



---

archive/issue_comments_279090.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHi!\n\n> > * Should the method be called `is_cayley_graph`, or just `is_cayley`?\n\n> \n> We have 'is_perfect', 'is_chordal', 'is_cartesian_product', so I'd vote for 'is_cayley'.\n\nOK, will change.\n\n> > Now, I guess that maybe this doesn't really belong in `generic_graph.py`. But maybe we could have a method in `PermutationGroup_generic` which checks for the existence of such a group (and have it returned if requested)?\n\n> \n> Do you know how such a function could be named? Having 'nice and natural name' for this function would rule out the alternative of having a 'hidden helper function' for this code.\n\nMaybe `has_transitive_subgroup(order = None, certificate = False)`? By default, it would just tell whether the group itself is transitive; otherwise, a subgroup of given order would be looked for (and returned if `certificate` is `True`).\n\n> > * I should probably check whether the function works correctly with graphs with loops and multigraphs (my instinct says yes for the former and no for the latter).\n\n> \n> You are not 'forced' to make it work in those cases. If it is complicated or if you do not want to deal with those cases, you should look at 'scream_if_not_simple'. It happens very often throughout the graph/ code.\n\nI don't think it will be too complicated, I just haven't thought about it when coding. But thanks for the info, it is certainly useful to know about this option.\n\n> > * Can we have Unicode characters in the docstrings?\n\n> \n> We can, and you can add this directive to the top of the file if you need to. Now, I am not really a big fan of adding a name every time one adds a function. That's just me, and perhaps some others. We already have 'git blame' to figure out who wrote a function, and having in each function the names of all people who ever touched it could quickly grow out of hands. And I personally don't see the added value, and I personally don't want to see Sage's source code turn out into a way to advertise its developers.\n> \n> I added 'personally' everywhere to insist that it is my view, and that other developers have different opinions. By our customs, you are totally allowed to add your name in an author block if you want to. \n\nOK, I will remove my name (indeed, I had copied the docstring of one of your functions, so the author field was there) - I am certainly not claiming to have invented this algorithm:)\n\n> Thanks for adding this function,\n\nNo problem!\n\nJano\u0161",
    "created_at": "2015-11-14T19:46:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279090",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:4" align="right">comment:4</div>

Hi!

> > * Should the method be called `is_cayley_graph`, or just `is_cayley`?

> 
> We have 'is_perfect', 'is_chordal', 'is_cartesian_product', so I'd vote for 'is_cayley'.

OK, will change.

> > Now, I guess that maybe this doesn't really belong in `generic_graph.py`. But maybe we could have a method in `PermutationGroup_generic` which checks for the existence of such a group (and have it returned if requested)?

> 
> Do you know how such a function could be named? Having 'nice and natural name' for this function would rule out the alternative of having a 'hidden helper function' for this code.

Maybe `has_transitive_subgroup(order = None, certificate = False)`? By default, it would just tell whether the group itself is transitive; otherwise, a subgroup of given order would be looked for (and returned if `certificate` is `True`).

> > * I should probably check whether the function works correctly with graphs with loops and multigraphs (my instinct says yes for the former and no for the latter).

> 
> You are not 'forced' to make it work in those cases. If it is complicated or if you do not want to deal with those cases, you should look at 'scream_if_not_simple'. It happens very often throughout the graph/ code.

I don't think it will be too complicated, I just haven't thought about it when coding. But thanks for the info, it is certainly useful to know about this option.

> > * Can we have Unicode characters in the docstrings?

> 
> We can, and you can add this directive to the top of the file if you need to. Now, I am not really a big fan of adding a name every time one adds a function. That's just me, and perhaps some others. We already have 'git blame' to figure out who wrote a function, and having in each function the names of all people who ever touched it could quickly grow out of hands. And I personally don't see the added value, and I personally don't want to see Sage's source code turn out into a way to advertise its developers.
> 
> I added 'personally' everywhere to insist that it is my view, and that other developers have different opinions. By our customs, you are totally allowed to add your name in an author block if you want to. 

OK, I will remove my name (indeed, I had copied the docstring of one of your functions, so the author field was there) - I am certainly not claiming to have invented this algorithm:)

> Thanks for adding this function,

No problem!

Janoš



---

archive/issue_comments_279091.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHelloooooo,\n\n> Maybe `has_transitive_subgroup(order = None, certificate = False)`? By default, it would just tell whether the group itself is transitive; otherwise, a subgroup of given order would be looked for (and returned if `certificate` is `True`).\n\n+1 to that.\n\n> OK, I will remove my name (indeed, I had copied the docstring of one of your functions, so the author field was there) - I am certainly not claiming to have invented this algorithm:)\n\nOh. Well, then it probably sounds very hypocritical of me to say that when you copy/pasted a function which contained my own name in an author field `O_o`\n\nI cannot tell which function it was, but I really do try to keep this to a minimum (at least when it comes to my own name).\n\nNathann",
    "created_at": "2015-11-14T20:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279091",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

Helloooooo,

> Maybe `has_transitive_subgroup(order = None, certificate = False)`? By default, it would just tell whether the group itself is transitive; otherwise, a subgroup of given order would be looked for (and returned if `certificate` is `True`).

+1 to that.

> OK, I will remove my name (indeed, I had copied the docstring of one of your functions, so the author field was there) - I am certainly not claiming to have invented this algorithm:)

Oh. Well, then it probably sounds very hypocritical of me to say that when you copy/pasted a function which contained my own name in an author field `O_o`

I cannot tell which function it was, but I really do try to keep this to a minimum (at least when it comes to my own name).

Nathann



---

archive/issue_comments_279092.json:
```json
{
    "body": "Changed commit from **[fbff6b8](https://github.com/sagemath/sagetrac-mirror/commit/fbff6b8e22c419beef4a5d991c00d5c512a933f9)** to **[fa2d1d7](https://github.com/sagemath/sagetrac-mirror/commit/fa2d1d7c88973a72fbd1a03b75883b803287d96f)**",
    "created_at": "2015-11-14T20:45:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279092",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fbff6b8](https://github.com/sagemath/sagetrac-mirror/commit/fbff6b8e22c419beef4a5d991c00d5c512a933f9)** to **[fa2d1d7](https://github.com/sagemath/sagetrac-mirror/commit/fa2d1d7c88973a72fbd1a03b75883b803287d96f)**



---

archive/issue_comments_279093.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d896a7b7b222f3b541b5a00736256451a11e914\">2d896a7</a></td><td><code>Rename is_cayley_graph to is_cayley</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05fe69be31c6020bc63dd121156b5d6f8ce461a8\">05fe69b</a></td><td><code>Remove author</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa2d1d7c88973a72fbd1a03b75883b803287d96f\">fa2d1d7</a></td><td><code>Return the proper generating set for multigraphs</code></td></tr></table>\n",
    "created_at": "2015-11-14T20:45:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279093",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d896a7b7b222f3b541b5a00736256451a11e914">2d896a7</a></td><td><code>Rename is_cayley_graph to is_cayley</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05fe69be31c6020bc63dd121156b5d6f8ce461a8">05fe69b</a></td><td><code>Remove author</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa2d1d7c88973a72fbd1a03b75883b803287d96f">fa2d1d7</a></td><td><code>Return the proper generating set for multigraphs</code></td></tr></table>




---

archive/issue_comments_279094.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23151383988b1c733667e678f1d969950a57e9bd\">2315138</a></td><td><code>Include fast GAP code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4e7142fe5ebfe1f78fe30ded86f80d581ea57e4\">e4e7142</a></td><td><code>Merge branch 'is_cayley_graph' into is_cayley_graph-gap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddcf0555ffb1af5eb847aa9d7bb6b5d6917281d2\">ddcf055</a></td><td><code>Fix checking for existence of an appropriate subgroup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/857a989da4e5469bce55444dfd58ec1dbaa6cc51\">857a989</a></td><td><code>Merge branch 'is_cayley_graph' into is_cayley_graph-gap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a92bc60dfe0d9ec1680bec6ed72aef750ed54489\">a92bc60</a></td><td><code>Initial documentation for has_transitive_subgroup()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ee5be2af2941c515755bb84e32976de4f8770ea\">3ee5be2</a></td><td><code>Write method has_transitive_subgroup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10b83ca9a97a8e0ae7694aa71838da42ab4a79db\">10b83ca</a></td><td><code>Rewrite is_cayley using has_transitive_subgroup</code></td></tr></table>\n",
    "created_at": "2015-11-14T21:45:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279094",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23151383988b1c733667e678f1d969950a57e9bd">2315138</a></td><td><code>Include fast GAP code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4e7142fe5ebfe1f78fe30ded86f80d581ea57e4">e4e7142</a></td><td><code>Merge branch 'is_cayley_graph' into is_cayley_graph-gap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddcf0555ffb1af5eb847aa9d7bb6b5d6917281d2">ddcf055</a></td><td><code>Fix checking for existence of an appropriate subgroup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/857a989da4e5469bce55444dfd58ec1dbaa6cc51">857a989</a></td><td><code>Merge branch 'is_cayley_graph' into is_cayley_graph-gap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a92bc60dfe0d9ec1680bec6ed72aef750ed54489">a92bc60</a></td><td><code>Initial documentation for has_transitive_subgroup()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ee5be2af2941c515755bb84e32976de4f8770ea">3ee5be2</a></td><td><code>Write method has_transitive_subgroup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10b83ca9a97a8e0ae7694aa71838da42ab4a79db">10b83ca</a></td><td><code>Rewrite is_cayley using has_transitive_subgroup</code></td></tr></table>




---

archive/issue_comments_279095.json:
```json
{
    "body": "Changed commit from **[fa2d1d7](https://github.com/sagemath/sagetrac-mirror/commit/fa2d1d7c88973a72fbd1a03b75883b803287d96f)** to **[10b83ca](https://github.com/sagemath/sagetrac-mirror/commit/10b83ca9a97a8e0ae7694aa71838da42ab4a79db)**",
    "created_at": "2015-11-14T21:45:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279095",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fa2d1d7](https://github.com/sagemath/sagetrac-mirror/commit/fa2d1d7c88973a72fbd1a03b75883b803287d96f)** to **[10b83ca](https://github.com/sagemath/sagetrac-mirror/commit/10b83ca9a97a8e0ae7694aa71838da42ab4a79db)**



---

archive/issue_comments_279096.json:
```json
{
    "body": "Changed commit from **[10b83ca](https://github.com/sagemath/sagetrac-mirror/commit/10b83ca9a97a8e0ae7694aa71838da42ab4a79db)** to **[2e14f69](https://github.com/sagemath/sagetrac-mirror/commit/2e14f6959299bbcca913eef22822ae9c51b2fc84)**",
    "created_at": "2015-11-14T22:11:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279096",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[10b83ca](https://github.com/sagemath/sagetrac-mirror/commit/10b83ca9a97a8e0ae7694aa71838da42ab4a79db)** to **[2e14f69](https://github.com/sagemath/sagetrac-mirror/commit/2e14f6959299bbcca913eef22822ae9c51b2fc84)**



---

archive/issue_comments_279097.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e14f6959299bbcca913eef22822ae9c51b2fc84\">2e14f69</a></td><td><code>Add examples for has_transitive_subgroup</code></td></tr></table>\n",
    "created_at": "2015-11-14T22:11:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279097",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e14f6959299bbcca913eef22822ae9c51b2fc84">2e14f69</a></td><td><code>Add examples for has_transitive_subgroup</code></td></tr></table>




---

archive/issue_comments_279098.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-This ticket adds a method `is_cayley_graph` to `GenericGraph`. This method checks whether a graph or digraph (which may or may not be connected) is a Cayley graph. If a certificate is requested, it also returns a permutation group and a generator set which generate this graph.\n+This ticket adds a method `is_cayley` to `GenericGraph`. This method checks whether a graph or digraph (which may or may not be connected) is a Cayley graph. If a certificate is requested, it also returns a permutation group and a generator set which generate this graph.\n+\n+A method `has_transitive_subgroup` has also been added to `PermutationGroup_generic`. For a given order, it determines whether the group has a subgroup of this order, and returns it if requested. If no order is given, it is taken to be the order of the group itself (i.e., the method then simply tells whether the group is transitive).\n``````\n",
    "created_at": "2015-11-14T22:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279098",
    "user": "https://github.com/jaanos"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-This ticket adds a method `is_cayley_graph` to `GenericGraph`. This method checks whether a graph or digraph (which may or may not be connected) is a Cayley graph. If a certificate is requested, it also returns a permutation group and a generator set which generate this graph.
+This ticket adds a method `is_cayley` to `GenericGraph`. This method checks whether a graph or digraph (which may or may not be connected) is a Cayley graph. If a certificate is requested, it also returns a permutation group and a generator set which generate this graph.
+
+A method `has_transitive_subgroup` has also been added to `PermutationGroup_generic`. For a given order, it determines whether the group has a subgroup of this order, and returns it if requested. If no order is given, it is taken to be the order of the group itself (i.e., the method then simply tells whether the group is transitive).
``````




---

archive/issue_comments_279099.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nOK, I think I have addressed all the issues. If this is OK, I guess we can also make more direct calls to GAP in the methods `conjugacy_classes_subgroups` and `subgroups` (in another ticket, of course).",
    "created_at": "2015-11-14T22:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279099",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:9" align="right">comment:9</div>

OK, I think I have addressed all the issues. If this is OK, I guess we can also make more direct calls to GAP in the methods `conjugacy_classes_subgroups` and `subgroups` (in another ticket, of course).



---

archive/issue_events_277401.json:
```json
{
    "actor": "https://github.com/jaanos",
    "created_at": "2015-11-14T22:13:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277401"
}
```



---

archive/issue_events_277402.json:
```json
{
    "actor": "https://github.com/jaanos",
    "created_at": "2015-11-14T22:13:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277402"
}
```



---

archive/issue_comments_279100.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nDima, I add you to this ticket just in case you might have some time to look at `PermutationGroup.has_transitive_subgroup`.",
    "created_at": "2015-11-15T09:15:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279100",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

Dima, I add you to this ticket just in case you might have some time to look at `PermutationGroup.has_transitive_subgroup`.



---

archive/issue_comments_279101.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nHello Jano\u0161,\n\nI wonder about the 'is_connected' case in your algorithm. Does it really make a different in the running times? I thought that perhaps the 'isomorphism_group' implementations already handled that, in which cas it may not make any significant difference and so we could do without this specific block of code?\n\nNathann",
    "created_at": "2015-11-15T09:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279101",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:11" align="right">comment:11</div>

Hello Janoš,

I wonder about the 'is_connected' case in your algorithm. Does it really make a different in the running times? I thought that perhaps the 'isomorphism_group' implementations already handled that, in which cas it may not make any significant difference and so we could do without this specific block of code?

Nathann



---

archive/issue_comments_279102.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nHi!\n\nTesting with the example in the docstring (5*Paley(9)) confirms that there is a big difference in running times. The reason is of course that disconnected vertex-transitive graphs will have a very large group of automorphisms, and GAP will take very long to compute the lattice of subgroups. So, in most cases it will be cheaper to do the check for a connected component, and then inflate the certificate if requested (what the method actually does is return the direct product of the group for a connected component and a cyclic group).\n\nJano\u0161",
    "created_at": "2015-11-15T10:46:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279102",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:12" align="right">comment:12</div>

Hi!

Testing with the example in the docstring (5*Paley(9)) confirms that there is a big difference in running times. The reason is of course that disconnected vertex-transitive graphs will have a very large group of automorphisms, and GAP will take very long to compute the lattice of subgroups. So, in most cases it will be cheaper to do the check for a connected component, and then inflate the certificate if requested (what the method actually does is return the direct product of the group for a connected component and a cyclic group).

Janoš



---

archive/issue_comments_279103.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOh, of course. Sorry for this question: I had first thought that you were optimizing the computation of `automorphism_group`, but of course you were optimizing the call to `conjugacy_classes_subgroups`.",
    "created_at": "2015-11-15T11:38:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279103",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:13" align="right">comment:13</div>

Oh, of course. Sorry for this question: I had first thought that you were optimizing the computation of `automorphism_group`, but of course you were optimizing the call to `conjugacy_classes_subgroups`.



---

archive/issue_comments_279104.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n\n```\nadj = [y if v == x else x for x, y, z in self.edge_iterator(v)]\n```\n\nAre you looking for `Graph.neighbors` ?\n\nNathann",
    "created_at": "2015-11-15T13:50:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279104",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">comment:14</div>


```
adj = [y if v == x else x for x, y, z in self.edge_iterator(v)]
```

Are you looking for `Graph.neighbors` ?

Nathann



---

archive/issue_comments_279105.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nHi!\n\n> Are you looking for `Graph.neighbors` ?\n\nI had this, but changed to `edge_iterator` since `neighbors` does not list a vertex multiple times if there are multiple edges to it (so maybe this is something that should be changed?). Also, this covers digraphs without needing an additional `if`.\n\nJano\u0161",
    "created_at": "2015-11-15T15:18:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279105",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:15" align="right">comment:15</div>

Hi!

> Are you looking for `Graph.neighbors` ?

I had this, but changed to `edge_iterator` since `neighbors` does not list a vertex multiple times if there are multiple edges to it (so maybe this is something that should be changed?). Also, this covers digraphs without needing an additional `if`.

Janoš



---

archive/issue_comments_279106.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nYo,\n\nI am impressed with your code: not a single line seems out of place. Could you add a comment around this call to 'edge_iterator', to say that you mean to deal with all (out-)neighbors with multiplicity?\n\nCould you also add a doctest (possibly in a 'TESTS:' section) for those directed/multigraph cases?\n\nI believe that the graph part of your code is good to go, but I would like to have Dima's input for the 'gap'-specific code.\n\nThanks,\n\nNathann",
    "created_at": "2015-11-15T15:32:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279106",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:16" align="right">comment:16</div>

Yo,

I am impressed with your code: not a single line seems out of place. Could you add a comment around this call to 'edge_iterator', to say that you mean to deal with all (out-)neighbors with multiplicity?

Could you also add a doctest (possibly in a 'TESTS:' section) for those directed/multigraph cases?

I believe that the graph part of your code is good to go, but I would like to have Dima's input for the 'gap'-specific code.

Thanks,

Nathann



---

archive/issue_comments_279107.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nHi!\n\n> I am impressed with your code: not a single line seems out of place. Could you add a comment around this call to 'edge_iterator', to say that you mean to deal with all (out-)neighbors with multiplicity?\n\nThanks! Will do, just a bit later (currently I'm trying various solutions for #19585).\n\n> Could you also add a doctest (possibly in a 'TESTS:' section) for those directed/multigraph cases?\n\nSure. By the way, do we have any easily-constructible multigraphs/graphs with loops ready? Otherwise there'd be a few lines of code just to construct the graph.\n\nAlso, `cayley_graph` on a group will not return multiedges or loops, even when the generators contain repeated elements or the identity and `simple` is set to `False`. So maybe this is something that should be changed.\n\nJano\u0161",
    "created_at": "2015-11-15T16:35:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279107",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:17" align="right">comment:17</div>

Hi!

> I am impressed with your code: not a single line seems out of place. Could you add a comment around this call to 'edge_iterator', to say that you mean to deal with all (out-)neighbors with multiplicity?

Thanks! Will do, just a bit later (currently I'm trying various solutions for #19585).

> Could you also add a doctest (possibly in a 'TESTS:' section) for those directed/multigraph cases?

Sure. By the way, do we have any easily-constructible multigraphs/graphs with loops ready? Otherwise there'd be a few lines of code just to construct the graph.

Also, `cayley_graph` on a group will not return multiedges or loops, even when the generators contain repeated elements or the identity and `simple` is set to `False`. So maybe this is something that should be changed.

Janoš



---

archive/issue_comments_279108.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHello,\n\n> Thanks! Will do, just a bit later (currently I'm trying various solutions for #19585).\n\nOkayyyyyy.\n\n> Sure. By the way, do we have any easily-constructible multigraphs/graphs with loops ready? Otherwise there'd be a few lines of code just to construct the graph.\n\nThe only ones I know are the directed GNP:\n\n```\nsage: digraphs.RandomDirectedGNP(5,.2,loops=True)\nRandomDirectedGNP(5,0.200000000000000): Looped digraph on 5 vertices\n```\n\n> Also, `cayley_graph` on a group will not return multiedges or loops, even when the generators contain repeated elements or the identity and `simple` is set to `False`. So maybe this is something that should be changed.\n\nIf you have a use for something like that, of course.\n\nNathann",
    "created_at": "2015-11-15T16:42:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279108",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:18" align="right">comment:18</div>

Hello,

> Thanks! Will do, just a bit later (currently I'm trying various solutions for #19585).

Okayyyyyy.

> Sure. By the way, do we have any easily-constructible multigraphs/graphs with loops ready? Otherwise there'd be a few lines of code just to construct the graph.

The only ones I know are the directed GNP:

```
sage: digraphs.RandomDirectedGNP(5,.2,loops=True)
RandomDirectedGNP(5,0.200000000000000): Looped digraph on 5 vertices
```

> Also, `cayley_graph` on a group will not return multiedges or loops, even when the generators contain repeated elements or the identity and `simple` is set to `False`. So maybe this is something that should be changed.

If you have a use for something like that, of course.

Nathann



---

archive/issue_comments_279109.json:
```json
{
    "body": "Changed commit from **[2e14f69](https://github.com/sagemath/sagetrac-mirror/commit/2e14f6959299bbcca913eef22822ae9c51b2fc84)** to **[95dfa64](https://github.com/sagemath/sagetrac-mirror/commit/95dfa64264bb0e6ec9122e5ce458a5000d48bc3d)**",
    "created_at": "2015-11-15T18:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279109",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2e14f69](https://github.com/sagemath/sagetrac-mirror/commit/2e14f6959299bbcca913eef22822ae9c51b2fc84)** to **[95dfa64](https://github.com/sagemath/sagetrac-mirror/commit/95dfa64264bb0e6ec9122e5ce458a5000d48bc3d)**



---

archive/issue_comments_279110.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95dfa64264bb0e6ec9122e5ce458a5000d48bc3d\">95dfa64</a></td><td><code>Add a doctest and some comments</code></td></tr></table>\n",
    "created_at": "2015-11-15T18:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279110",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95dfa64264bb0e6ec9122e5ce458a5000d48bc3d">95dfa64</a></td><td><code>Add a doctest and some comments</code></td></tr></table>




---

archive/issue_comments_279111.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nHi!\n\nOK, I added the comment and the doctest.\n\n> The only ones I know are the directed GNP:\n\nThanks, but of course these won't help here. I've used an augmented Paley(9) graph instead.\n\n> > Also, `cayley_graph` on a group will not return multiedges or loops, even when the generators contain repeated elements or the identity and `simple` is set to `False`. So maybe this is something that should be changed.\n\n> \n> If you have a use for something like that, of course.\n\nNot really, except possibly for doctesting (and consistency).\n\nJano\u0161",
    "created_at": "2015-11-15T18:15:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279111",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:20" align="right">comment:20</div>

Hi!

OK, I added the comment and the doctest.

> The only ones I know are the directed GNP:

Thanks, but of course these won't help here. I've used an augmented Paley(9) graph instead.

> > Also, `cayley_graph` on a group will not return multiedges or loops, even when the generators contain repeated elements or the identity and `simple` is set to `False`. So maybe this is something that should be changed.

> 
> If you have a use for something like that, of course.

Not really, except possibly for doctesting (and consistency).

Janoš



---

archive/issue_comments_279112.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI'd investigate whether being more careful with computing subgroups might help. Perhaps you can use some lower level GAP calls to find a lattice of transitive subgroups, which ought to be much smaller.\n\nOr you can compute maximal subgroup classes (cf. GAP's `ConjugacyClassesMaximalSubgroups`), and recurse on these which are transitive.",
    "created_at": "2015-11-15T21:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279112",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:21" align="right">comment:21</div>

I'd investigate whether being more careful with computing subgroups might help. Perhaps you can use some lower level GAP calls to find a lattice of transitive subgroups, which ought to be much smaller.

Or you can compute maximal subgroup classes (cf. GAP's `ConjugacyClassesMaximalSubgroups`), and recurse on these which are transitive.



---

archive/issue_comments_279113.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nHello!\n\nThanks, will look into it. It seems that it could be done without too much trouble using `MaximalSubgroupClassReps`.\n\nJano\u0161",
    "created_at": "2015-11-16T01:48:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279113",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:22" align="right">comment:22</div>

Hello!

Thanks, will look into it. It seems that it could be done without too much trouble using `MaximalSubgroupClassReps`.

Janoš



---

archive/issue_comments_279114.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nHello again!\n\nSorry about the inactivity, I have been pretty busy. Also, I was probably too quick to judge that a more low-level GAP procedure could be done without too much trouble.\n\nWould it be OK to accept this as is, and then possibly improve the search for transitive subgroups in another ticket?\n\nJano\u0161",
    "created_at": "2015-11-28T09:34:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279114",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:23" align="right">comment:23</div>

Hello again!

Sorry about the inactivity, I have been pretty busy. Also, I was probably too quick to judge that a more low-level GAP procedure could be done without too much trouble.

Would it be OK to accept this as is, and then possibly improve the search for transitive subgroups in another ticket?

Janoš



---

archive/issue_comments_279115.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\n> Sorry about the inactivity, I have been pretty busy. Also, I was probably too quick to judge that a more low-level GAP procedure could be done without too much trouble.\n> \n> Would it be OK to accept this as is, and then possibly improve the search for transitive subgroups in another ticket?\n\nNo, all the code has to be reviewed. I expect it to be as clean as the part I reviewed, yet somebody has to do check it. I cannot tell about the code, but the name 'has_transitive_subgroup', for instance, sounds misleading. It does not mention any kind of 'order', so by just lookig at the function's name you would not understand how it could return anything different from `.is_transitive`. That's also the kind of things a reviewer should look at, besides the GAP technicalities.\n\nNathann",
    "created_at": "2015-11-28T09:41:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279115",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:24" align="right">comment:24</div>

> Sorry about the inactivity, I have been pretty busy. Also, I was probably too quick to judge that a more low-level GAP procedure could be done without too much trouble.
> 
> Would it be OK to accept this as is, and then possibly improve the search for transitive subgroups in another ticket?

No, all the code has to be reviewed. I expect it to be as clean as the part I reviewed, yet somebody has to do check it. I cannot tell about the code, but the name 'has_transitive_subgroup', for instance, sounds misleading. It does not mention any kind of 'order', so by just lookig at the function's name you would not understand how it could return anything different from `.is_transitive`. That's also the kind of things a reviewer should look at, besides the GAP technicalities.

Nathann



---

archive/issue_comments_279116.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nHi!\n\n> No, all the code has to be reviewed. I expect it to be as clean as the part I reviewed, yet somebody has to do check it. I cannot tell about the code, but the name 'has_transitive_subgroup', for instance, sounds misleading. It does not mention any kind of 'order', so by just lookig at the function's name you would not understand how it could return anything different from `.is_transitive`. That's also the kind of things a reviewer should look at, besides the GAP technicalities.\n\nYes, I understand it has to be reviewed - I was just saying that maybe we don't try to optimize the GAP code within this ticket (if that's acceptable, of course).\n\nAs for the function name, do you have any suggestions? Maybe something like `has_transitive_subgroup_of_order`?\n\nJano\u0161",
    "created_at": "2015-11-28T11:41:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279116",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:25" align="right">comment:25</div>

Hi!

> No, all the code has to be reviewed. I expect it to be as clean as the part I reviewed, yet somebody has to do check it. I cannot tell about the code, but the name 'has_transitive_subgroup', for instance, sounds misleading. It does not mention any kind of 'order', so by just lookig at the function's name you would not understand how it could return anything different from `.is_transitive`. That's also the kind of things a reviewer should look at, besides the GAP technicalities.

Yes, I understand it has to be reviewed - I was just saying that maybe we don't try to optimize the GAP code within this ticket (if that's acceptable, of course).

As for the function name, do you have any suggestions? Maybe something like `has_transitive_subgroup_of_order`?

Janoš



---

archive/issue_comments_279117.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\n> Yes, I understand it has to be reviewed - I was just saying that maybe we don't try to optimize the GAP code within this ticket (if that's acceptable, of course).\n\nOh, I see. Well, then I cannot answer the question as I do nto understand what the gap code does.\n\n> As for the function name, do you have any suggestions? Maybe something like `has_transitive_subgroup_of_order`?\n\nNothing better than that, and the name is so ugly that it might as well be a hidden 'helper' function `:-/`\n\nIsn't there a group-theoretic notion that would 'mean the same'? `:-/`\n\nNathann",
    "created_at": "2015-11-28T11:44:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279117",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:26" align="right">comment:26</div>

> Yes, I understand it has to be reviewed - I was just saying that maybe we don't try to optimize the GAP code within this ticket (if that's acceptable, of course).

Oh, I see. Well, then I cannot answer the question as I do nto understand what the gap code does.

> As for the function name, do you have any suggestions? Maybe something like `has_transitive_subgroup_of_order`?

Nothing better than that, and the name is so ugly that it might as well be a hidden 'helper' function `:-/`

Isn't there a group-theoretic notion that would 'mean the same'? `:-/`

Nathann



---

archive/issue_comments_279118.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@nathanncohen](#comment:26):\n> > Yes, I understand it has to be reviewed - I was just saying that maybe we don't try to optimize the GAP code within this ticket (if that's acceptable, of course).\n\n> \n> Oh, I see. Well, then I cannot answer the question as I do nto understand what the gap code does.\n> \n> > As for the function name, do you have any suggestions? Maybe something like `has_transitive_subgroup_of_order`?\n\nHow about naming it `transitive_subgroup`, and simplifying the interface,` so that it either returns a subgroup of order `n` (the parameter) or `None`, and no pairs...",
    "created_at": "2015-11-28T11:58:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279118",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@nathanncohen](#comment:26):
> > Yes, I understand it has to be reviewed - I was just saying that maybe we don't try to optimize the GAP code within this ticket (if that's acceptable, of course).

> 
> Oh, I see. Well, then I cannot answer the question as I do nto understand what the gap code does.
> 
> > As for the function name, do you have any suggestions? Maybe something like `has_transitive_subgroup_of_order`?

How about naming it `transitive_subgroup`, and simplifying the interface,` so that it either returns a subgroup of order `n` (the parameter) or `None`, and no pairs...



---

archive/issue_comments_279119.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nas well, I'd propose to remove `certificate` business totally, and rename the main function  `caley_graph_group()`: it would return a group if one exists, or `None` if there is no such group; indeed, the extra cost of returning a group is zero, compared to the overall complexity of the task at hand.",
    "created_at": "2015-11-28T12:20:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279119",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:28" align="right">comment:28</div>

as well, I'd propose to remove `certificate` business totally, and rename the main function  `caley_graph_group()`: it would return a group if one exists, or `None` if there is no such group; indeed, the extra cost of returning a group is zero, compared to the overall complexity of the task at hand.



---

archive/issue_comments_279120.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nHi!\n\nHmm, I would still like to have an `is_cayley` method for graphs. But I agree about having a method `transitive_subgroup` for permutation groups. Still, I'm a bit worried about cases when we have a large graph with a relatively small automorphism group (say, twice the order of the graph) - then finding an appropriate subgroup will be fast, but actually returning it (so a Sage subgroup can be built) may make a non-negligible contribution to the running time (since reading GAP output can be slow). So I propose:\n- we have a `transitive_subgroup` method, which by default returns a transitive subgroup of given order,\n- `transitive_subgroup` may be explicitly told not to return the group (by setting, say, `return_group` to `False`),\n- we add a helper method (say, `_transitive_subgroup_gap`) which returns a GAP object containing the subgroup (we could make the result cached, so if one first asks whether a graph is Cayley and then wants to know the group, it needn't be recomputed).\n\nThis way, `transitive_subgroup` can call the helper function, and then avoid actually reading the GAP subgroup if it is told not to return it.\n\nWhat do you think?\n\nJano\u0161",
    "created_at": "2015-11-28T13:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279120",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:29" align="right">comment:29</div>

Hi!

Hmm, I would still like to have an `is_cayley` method for graphs. But I agree about having a method `transitive_subgroup` for permutation groups. Still, I'm a bit worried about cases when we have a large graph with a relatively small automorphism group (say, twice the order of the graph) - then finding an appropriate subgroup will be fast, but actually returning it (so a Sage subgroup can be built) may make a non-negligible contribution to the running time (since reading GAP output can be slow). So I propose:
- we have a `transitive_subgroup` method, which by default returns a transitive subgroup of given order,
- `transitive_subgroup` may be explicitly told not to return the group (by setting, say, `return_group` to `False`),
- we add a helper method (say, `_transitive_subgroup_gap`) which returns a GAP object containing the subgroup (we could make the result cached, so if one first asks whether a graph is Cayley and then wants to know the group, it needn't be recomputed).

This way, `transitive_subgroup` can call the helper function, and then avoid actually reading the GAP subgroup if it is told not to return it.

What do you think?

Janoš



---

archive/issue_comments_279121.json:
```json
{
    "body": "Changed commit from **[95dfa64](https://github.com/sagemath/sagetrac-mirror/commit/95dfa64264bb0e6ec9122e5ce458a5000d48bc3d)** to **[4aaf301](https://github.com/sagemath/sagetrac-mirror/commit/4aaf3014fee5bb08d861636908d6733047d4a869)**",
    "created_at": "2015-11-28T18:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279121",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[95dfa64](https://github.com/sagemath/sagetrac-mirror/commit/95dfa64264bb0e6ec9122e5ce458a5000d48bc3d)** to **[4aaf301](https://github.com/sagemath/sagetrac-mirror/commit/4aaf3014fee5bb08d861636908d6733047d4a869)**



---

archive/issue_comments_279122.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4aaf3014fee5bb08d861636908d6733047d4a869\">4aaf301</a></td><td><code>Rename has_transitive_subgroup to transitive_subgroup and add helper function</code></td></tr></table>\n",
    "created_at": "2015-11-28T18:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279122",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4aaf3014fee5bb08d861636908d6733047d4a869">4aaf301</a></td><td><code>Rename has_transitive_subgroup to transitive_subgroup and add helper function</code></td></tr></table>




---

archive/issue_comments_279123.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI have implemented the ideas from the previous comment. I have marked both `transitive_subgroup` and `_transitive_subgroup_gap` as cached, although currently it seems that this will not affect the (re)running times of `is_cayley`, as the automorphism group of a graph is not cached. Is this something that should be changed (in another ticket, of course), or should I just remove caching for the two methods?",
    "created_at": "2015-11-28T19:03:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279123",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:31" align="right">comment:31</div>

I have implemented the ideas from the previous comment. I have marked both `transitive_subgroup` and `_transitive_subgroup_gap` as cached, although currently it seems that this will not affect the (re)running times of `is_cayley`, as the automorphism group of a graph is not cached. Is this something that should be changed (in another ticket, of course), or should I just remove caching for the two methods?



---

archive/issue_comments_279124.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@jaanos](#comment:29):\n\n> Hmm, I would still like to have an `is_cayley` method for graphs.\n\nsure, such a method can just check whether `cayley_graph_group()` is `None`.\n\n\n> But I agree about having a method `transitive_subgroup` for permutation groups. Still, I'm a bit > worried about cases when we have a large graph with a relatively small automorphism group (say, twice the order of the graph) - then finding an appropriate subgroup will be fast, but actually returning it (so a Sage subgroup can be built) may make a non-negligible contribution to the running time (since reading GAP output can be slow). \n\nas a switch to `libgap` will happen sooner or later, optimising for not reading GAP output\ndoes not seem to be that important.\n\n\n> So I propose:\n> - we have a `transitive_subgroup` method, which by default returns a transitive subgroup of given order,\n> - `transitive_subgroup` may be explicitly told not to return the group (by setting, say, `return_group` to `False`),\n> - we add a helper method (say, `_transitive_subgroup_gap`) which returns a GAP object containing the subgroup (we could make the result cached, so if one first asks whether a graph is Cayley and then wants to know the group, it needn't be recomputed).\n> \n> This way, `transitive_subgroup` can call the helper function, and then avoid actually reading the GAP subgroup if it is told not to return it.\n> \n> What do you think?\n\nthis ceritainly looks better, but again, I don't like the counter-intuitive parameters of `is_cayley()` and weird sort of output (a pair) that you currently have. In particular the latter.",
    "created_at": "2015-11-28T20:02:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279124",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@jaanos](#comment:29):

> Hmm, I would still like to have an `is_cayley` method for graphs.

sure, such a method can just check whether `cayley_graph_group()` is `None`.


> But I agree about having a method `transitive_subgroup` for permutation groups. Still, I'm a bit > worried about cases when we have a large graph with a relatively small automorphism group (say, twice the order of the graph) - then finding an appropriate subgroup will be fast, but actually returning it (so a Sage subgroup can be built) may make a non-negligible contribution to the running time (since reading GAP output can be slow). 

as a switch to `libgap` will happen sooner or later, optimising for not reading GAP output
does not seem to be that important.


> So I propose:
> - we have a `transitive_subgroup` method, which by default returns a transitive subgroup of given order,
> - `transitive_subgroup` may be explicitly told not to return the group (by setting, say, `return_group` to `False`),
> - we add a helper method (say, `_transitive_subgroup_gap`) which returns a GAP object containing the subgroup (we could make the result cached, so if one first asks whether a graph is Cayley and then wants to know the group, it needn't be recomputed).
> 
> This way, `transitive_subgroup` can call the helper function, and then avoid actually reading the GAP subgroup if it is told not to return it.
> 
> What do you think?

this ceritainly looks better, but again, I don't like the counter-intuitive parameters of `is_cayley()` and weird sort of output (a pair) that you currently have. In particular the latter.



---

archive/issue_comments_279125.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nHi!\n\n> as a switch to `libgap` will happen sooner or later, optimising for not reading GAP output\n> does not seem to be that important.\n\nI see. But should I do anything about it at this point?\n\n> this ceritainly looks better, but again, I don't like the counter-intuitive parameters of `is_cayley()` and weird sort of output (a pair) that you currently have. In particular the latter.\n\nI have modelled both input and output of `is_cayley` after methods such as `is_chordal` and `is_circulant`. I guess we could be even more specific and have the function return only the group or only the generators if requested - or maybe `cayley_graph_group` could do that, and `is_cayley` would then simply call `cayley_graph_group` without requesting either.\n\nJano\u0161",
    "created_at": "2015-11-29T01:18:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279125",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:33" align="right">comment:33</div>

Hi!

> as a switch to `libgap` will happen sooner or later, optimising for not reading GAP output
> does not seem to be that important.

I see. But should I do anything about it at this point?

> this ceritainly looks better, but again, I don't like the counter-intuitive parameters of `is_cayley()` and weird sort of output (a pair) that you currently have. In particular the latter.

I have modelled both input and output of `is_cayley` after methods such as `is_chordal` and `is_circulant`. I guess we could be even more specific and have the function return only the group or only the generators if requested - or maybe `cayley_graph_group` could do that, and `is_cayley` would then simply call `cayley_graph_group` without requesting either.

Janoš



---

archive/issue_comments_279126.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@jaanos](#comment:33):\n> Hi!\n> \n> > as a switch to `libgap` will happen sooner or later, optimising for not reading GAP output\n> > does not seem to be that important.\n\n> \n> I see. But should I do anything about it at this point?\n> \n> > this ceritainly looks better, but again, I don't like the counter-intuitive parameters of `is_cayley()` and weird sort of output (a pair) that you currently have. In particular the latter.\n\n> \n> I have modelled both input and output of `is_cayley` after methods such as `is_chordal` and `is_circulant`. \n\nnot all silly designs in Sage should be copied...\nLooks like someone didn't know, or forgot, about `None`\n\n> I guess we could be even more specific and have the function return only the group or only the generators if requested - or maybe `cayley_graph_group` could do that,\n\nonly the generators? Why? it's one quick function call away from the group, why would you\ndo this in library code? In particular, as you are computing the group, not its generators, in the first place.\n\n> and `is_cayley` would then simply call `cayley_graph_group` without requesting either.e.\n\nsure.",
    "created_at": "2015-11-29T07:59:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279126",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@jaanos](#comment:33):
> Hi!
> 
> > as a switch to `libgap` will happen sooner or later, optimising for not reading GAP output
> > does not seem to be that important.

> 
> I see. But should I do anything about it at this point?
> 
> > this ceritainly looks better, but again, I don't like the counter-intuitive parameters of `is_cayley()` and weird sort of output (a pair) that you currently have. In particular the latter.

> 
> I have modelled both input and output of `is_cayley` after methods such as `is_chordal` and `is_circulant`. 

not all silly designs in Sage should be copied...
Looks like someone didn't know, or forgot, about `None`

> I guess we could be even more specific and have the function return only the group or only the generators if requested - or maybe `cayley_graph_group` could do that,

only the generators? Why? it's one quick function call away from the group, why would you
do this in library code? In particular, as you are computing the group, not its generators, in the first place.

> and `is_cayley` would then simply call `cayley_graph_group` without requesting either.e.

sure.



---

archive/issue_comments_279127.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nHello!\n\n> not all silly designs in Sage should be copied...\n> Looks like someone didn't know, or forgot, about `None`\n\nI don't know, it seems pretty reasonable to me to have an `is_property` method with the option to return a certificate for either having or not having this property. Now, I don't know of any way to provide an easy-to-check certificate of non-Cayleyness, but if one is eventually found, it can be returned alongside the boolean telling whether a graph is a Cayley graph - so the user doesn't need to check what kind of certificate the function returned.\n\nAs for the certificate of Cayleyness, I am thinking that a better option would be to return a map from vertices to group elements (which the current function already computes when computing the generators) - now it can be easily checked that the elements form a group, and that the generating set is well defined (instead of having to compute an isomorphism between the graph and the Cayley graph built from the group and generating set). Actually computing the group (and returning it alongside the generating set and the map, if requested) would then be delegated to `cayley_graph_group`, as you proposed.\n\n\n> only the generators? Why? it's one quick function call away from the group, why would you\n> do this in library code? In particular, as you are computing the group, not its generators, in the first place.\n\nWell, I think if we're giving the user the choice of what they want returned, it would be unreasonable to forbid a certain choice just because we see no use for it.\n\nJano\u0161",
    "created_at": "2015-11-29T13:02:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279127",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:35" align="right">comment:35</div>

Hello!

> not all silly designs in Sage should be copied...
> Looks like someone didn't know, or forgot, about `None`

I don't know, it seems pretty reasonable to me to have an `is_property` method with the option to return a certificate for either having or not having this property. Now, I don't know of any way to provide an easy-to-check certificate of non-Cayleyness, but if one is eventually found, it can be returned alongside the boolean telling whether a graph is a Cayley graph - so the user doesn't need to check what kind of certificate the function returned.

As for the certificate of Cayleyness, I am thinking that a better option would be to return a map from vertices to group elements (which the current function already computes when computing the generators) - now it can be easily checked that the elements form a group, and that the generating set is well defined (instead of having to compute an isomorphism between the graph and the Cayley graph built from the group and generating set). Actually computing the group (and returning it alongside the generating set and the map, if requested) would then be delegated to `cayley_graph_group`, as you proposed.


> only the generators? Why? it's one quick function call away from the group, why would you
> do this in library code? In particular, as you are computing the group, not its generators, in the first place.

Well, I think if we're giving the user the choice of what they want returned, it would be unreasonable to forbid a certain choice just because we see no use for it.

Janoš



---

archive/issue_comments_279128.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@jaanos](#comment:35):\n> \n> > only the generators? Why? it's one quick function call away from the group, why would you\n> > do this in library code? In particular, as you are computing the group, not its generators, in the first place.\n\n> \n> Well, I think if we're giving the user the choice of what they want returned, it would be unreasonable to forbid a certain choice just because we see no use for it.\n\nit's an unreasonable code bloat to include a special function for anything that is\na trivial one-liner; e.g. if you start returning the generators, you might be tempted to add a function that only returns the number of generators, etc etc :-)\n\nAnd you are not depriving the user from getting what he wants in any way by not providing\nan option for any trivial one-liner applied to the return value, not at all..\n\nIMHO it's also against the spirit of OOP to have an option in a function `f` to return either `X` or `X.blah()`; the user can call `.blah()` on the answer he gets himself; and `X` is already created in `f`, there is no performance gain in returning X.blah() instead of `X`.",
    "created_at": "2015-11-29T15:32:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279128",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@jaanos](#comment:35):
> 
> > only the generators? Why? it's one quick function call away from the group, why would you
> > do this in library code? In particular, as you are computing the group, not its generators, in the first place.

> 
> Well, I think if we're giving the user the choice of what they want returned, it would be unreasonable to forbid a certain choice just because we see no use for it.

it's an unreasonable code bloat to include a special function for anything that is
a trivial one-liner; e.g. if you start returning the generators, you might be tempted to add a function that only returns the number of generators, etc etc :-)

And you are not depriving the user from getting what he wants in any way by not providing
an option for any trivial one-liner applied to the return value, not at all..

IMHO it's also against the spirit of OOP to have an option in a function `f` to return either `X` or `X.blah()`; the user can call `.blah()` on the answer he gets himself; and `X` is already created in `f`, there is no performance gain in returning X.blah() instead of `X`.



---

archive/issue_comments_279129.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\n> IMHO it's also against the spirit of OOP to have an option in a function `f` to return either `X` or `X.blah()`; the user can call `.blah()` on the answer he gets himself; and `X` is already created in `f`, there is no performance gain in returning X.blah() instead of `X`.\n\nAre we sure that a permuation group defined from a set of generators returns the *very same* set of generators when you call `.gen()`? Or could they be simplified/reduced if Gap believe that another representation is better?\n\nNathann",
    "created_at": "2015-11-29T15:56:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279129",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:37" align="right">comment:37</div>

> IMHO it's also against the spirit of OOP to have an option in a function `f` to return either `X` or `X.blah()`; the user can call `.blah()` on the answer he gets himself; and `X` is already created in `f`, there is no performance gain in returning X.blah() instead of `X`.

Are we sure that a permuation group defined from a set of generators returns the *very same* set of generators when you call `.gen()`? Or could they be simplified/reduced if Gap believe that another representation is better?

Nathann



---

archive/issue_comments_279130.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@nathanncohen](#comment:37):\n> > IMHO it's also against the spirit of OOP to have an option in a function `f` to return either `X` or `X.blah()`; the user can call `.blah()` on the answer he gets himself; and `X` is already created in `f`, there is no performance gain in returning X.blah() instead of `X`.\n\n> \n> Are we sure that a permuation group defined from a set of generators returns the *very same* set of generators when you call `.gen()`? Or could they be simplified/reduced if Gap believe that another representation is better?\n\nIn GAP `GeneratorsOfGroup` need not return the original list of generators used to define the group in the first place.\n\n```\n  39.2-2 GroupByGenerators\n  \n  \u2023 GroupByGenerators( gens ) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 operation\n  \u2023 GroupByGenerators( gens, id ) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 operation\n  \n  GroupByGenerators  returns  the group G generated by the list gens. If a second argument id is present\n  then this is stored as the identity element of the group.\n  \n  The   value   of   the  attribute  GeneratorsOfGroup  (39.2-4)  of  G  need  not  be  equal  to  gens.\n  GroupByGenerators is the underlying operation called by Group (39.2-1).\n```\n\nI don't know how to recover the original generators from `Group`; it could very well be that they get lost, by design.\n\nIf one needs to keep the original ones, he can use `GroupWithGenerators`.",
    "created_at": "2015-11-29T16:05:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279130",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@nathanncohen](#comment:37):
> > IMHO it's also against the spirit of OOP to have an option in a function `f` to return either `X` or `X.blah()`; the user can call `.blah()` on the answer he gets himself; and `X` is already created in `f`, there is no performance gain in returning X.blah() instead of `X`.

> 
> Are we sure that a permuation group defined from a set of generators returns the *very same* set of generators when you call `.gen()`? Or could they be simplified/reduced if Gap believe that another representation is better?

In GAP `GeneratorsOfGroup` need not return the original list of generators used to define the group in the first place.

```
  39.2-2 GroupByGenerators
  
  ‣ GroupByGenerators( gens ) ──────────────────────────────────────────────────────────────── operation
  ‣ GroupByGenerators( gens, id ) ──────────────────────────────────────────────────────────── operation
  
  GroupByGenerators  returns  the group G generated by the list gens. If a second argument id is present
  then this is stored as the identity element of the group.
  
  The   value   of   the  attribute  GeneratorsOfGroup  (39.2-4)  of  G  need  not  be  equal  to  gens.
  GroupByGenerators is the underlying operation called by Group (39.2-1).
```

I don't know how to recover the original generators from `Group`; it could very well be that they get lost, by design.

If one needs to keep the original ones, he can use `GroupWithGenerators`.



---

archive/issue_comments_279131.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nPerhaps I was not being precise enough: I was talking about the generating set of the Cayley graph, not about the generators of the group.\n\nSo, a user may want any of the following (where computing each relies on the previous):\n1. whether there exists a transitive subgroup of the automorphism group with the same order as the graph,\n2. one such group,\n3. a map from vertices to group elements,\n4. a (multi)set of group elements that acts as the generating set for the Cayley graph.\n\nNow, going from step 2 to steps 3 and 4 surely is not hard (4 lines of code), but it is not something that can be done with a simple method call, and step 4 it is certainly not something that can be computed from the group itself.\n\nAnyway, I was probably wrong that the map would be a better certificate than the group, as the former is clearly easily computable from the latter.\n\nBy the way, what we're actually looking for here is a regular subgroup, so that's what the group method should be called (and we can also simplify the GAP call).\n\nJano\u0161",
    "created_at": "2015-11-29T16:37:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279131",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:39" align="right">comment:39</div>

Perhaps I was not being precise enough: I was talking about the generating set of the Cayley graph, not about the generators of the group.

So, a user may want any of the following (where computing each relies on the previous):
1. whether there exists a transitive subgroup of the automorphism group with the same order as the graph,
2. one such group,
3. a map from vertices to group elements,
4. a (multi)set of group elements that acts as the generating set for the Cayley graph.

Now, going from step 2 to steps 3 and 4 surely is not hard (4 lines of code), but it is not something that can be done with a simple method call, and step 4 it is certainly not something that can be computed from the group itself.

Anyway, I was probably wrong that the map would be a better certificate than the group, as the former is clearly easily computable from the latter.

By the way, what we're actually looking for here is a regular subgroup, so that's what the group method should be called (and we can also simplify the GAP call).

Janoš



---

archive/issue_comments_279132.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@jaanos](#comment:39):\n> Perhaps I was not being precise enough: I was talking about the generating set of the Cayley graph, not about the generators of the group.\n\n\nwell, how about having a proper `digraphs.CayleyGraph()` constructor?\n(one can use GRAPE package of GAP, which is going to be re-released under GPL)\ne.g.\n\n```\ngap> LoadPackage(\"grape\");\ntrue\ngap> C:=CayleyGraph(SymmetricGroup(4),[(1,2),(2,3),(3,4)]);\nrec( adjacencies := [ [ 2, 3, 7 ] ], group := Group([ (1,10,17,19)(2,9,18,20)(3,12,14,21)(4,11,13,22)\n  (5,7,16,23)(6,8,15,24), (1,7)(2,8)(3,9)(4,10)(5,11)(6,12)(13,15)(14,16)(17,18)(19,21)(20,22)\n  (23,24) ]), isGraph := true, isSimple := true, \n  names := [ (), (3,4), (2,3), (2,3,4), (2,4,3), (2,4), (1,2), (1,2)(3,4), (1,2,3), (1,2,3,4), \n      (1,2,4,3), (1,2,4), (1,3,2), (1,3,4,2), (1,3), (1,3,4), (1,3)(2,4), (1,3,2,4), (1,4,3,2), \n      (1,4,2), (1,4,3), (1,4), (1,4,2,3), (1,4)(2,3) ], order := 24, representatives := [ 1 ], \n  schreierVector := [ -1, 1, 1, 2, 2, 1, 2, 2, 2, 1, 1, 1, 1, 2, 2, 1, 1, 2, 1, 1, 2, 2, 1, 2 ] )\ngap> \n```",
    "created_at": "2015-11-29T18:17:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279132",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@jaanos](#comment:39):
> Perhaps I was not being precise enough: I was talking about the generating set of the Cayley graph, not about the generators of the group.


well, how about having a proper `digraphs.CayleyGraph()` constructor?
(one can use GRAPE package of GAP, which is going to be re-released under GPL)
e.g.

```
gap> LoadPackage("grape");
true
gap> C:=CayleyGraph(SymmetricGroup(4),[(1,2),(2,3),(3,4)]);
rec( adjacencies := [ [ 2, 3, 7 ] ], group := Group([ (1,10,17,19)(2,9,18,20)(3,12,14,21)(4,11,13,22)
  (5,7,16,23)(6,8,15,24), (1,7)(2,8)(3,9)(4,10)(5,11)(6,12)(13,15)(14,16)(17,18)(19,21)(20,22)
  (23,24) ]), isGraph := true, isSimple := true, 
  names := [ (), (3,4), (2,3), (2,3,4), (2,4,3), (2,4), (1,2), (1,2)(3,4), (1,2,3), (1,2,3,4), 
      (1,2,4,3), (1,2,4), (1,3,2), (1,3,4,2), (1,3), (1,3,4), (1,3)(2,4), (1,3,2,4), (1,4,3,2), 
      (1,4,2), (1,4,3), (1,4), (1,4,2,3), (1,4)(2,3) ], order := 24, representatives := [ 1 ], 
  schreierVector := [ -1, 1, 1, 2, 2, 1, 2, 2, 2, 1, 1, 1, 1, 2, 2, 1, 1, 2, 1, 1, 2, 2, 1, 2 ] )
gap> 
```



---

archive/issue_comments_279133.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nHi!\n\n> well, how about having a proper `digraphs.CayleyGraph()` constructor?\n\nI'm not sure what you're trying to achieve here. The method being added here is supposed to recognize Cayley graphs, no matter how they were constructed.\n\nThat said, I think we do need a backend for GRAPE-like graphs (i.e., using an automorphism group and orbit representatives).\n\nJano\u0161",
    "created_at": "2015-11-30T12:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279133",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:41" align="right">comment:41</div>

Hi!

> well, how about having a proper `digraphs.CayleyGraph()` constructor?

I'm not sure what you're trying to achieve here. The method being added here is supposed to recognize Cayley graphs, no matter how they were constructed.

That said, I think we do need a backend for GRAPE-like graphs (i.e., using an automorphism group and orbit representatives).

Janoš



---

archive/issue_comments_279134.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@jaanos](#comment:41):\n> > well, how about having a proper `digraphs.CayleyGraph()` constructor?\n\n> \n> I'm not sure what you're trying to achieve here. The method being added here is supposed to recognize Cayley graphs, no matter how they were constructed.\n\na part of interface issue is that we lack `(di)graphs.CayleyGraph()`; if it was there it would be most natural to return such a thing on success.\n\n> \n> That said, I think we do need a backend for GRAPE-like graphs (i.e., using an automorphism group and orbit representatives).\n\nI have been advocating this for years, but never had time to implement it.",
    "created_at": "2015-11-30T12:50:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279134",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@jaanos](#comment:41):
> > well, how about having a proper `digraphs.CayleyGraph()` constructor?

> 
> I'm not sure what you're trying to achieve here. The method being added here is supposed to recognize Cayley graphs, no matter how they were constructed.

a part of interface issue is that we lack `(di)graphs.CayleyGraph()`; if it was there it would be most natural to return such a thing on success.

> 
> That said, I think we do need a backend for GRAPE-like graphs (i.e., using an automorphism group and orbit representatives).

I have been advocating this for years, but never had time to implement it.



---

archive/issue_comments_279135.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\n> a part of interface issue is that we lack `(di)graphs.CayleyGraph()`; if it was there it would be most natural to return such a thing on success.\n\nSo you're saying that we should return an isomorphic graph that is marked as a Cayley graph as a certificate? Interesting, although this is probably something the user should do by themselves given the group.\n\nEven if we don't have such a constructor, we can always relabel the vertices with group elements, and then set edge labels, just like the `cayley_graph` method on a group would do.\n\nJano\u0161",
    "created_at": "2015-11-30T13:01:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279135",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:43" align="right">comment:43</div>

> a part of interface issue is that we lack `(di)graphs.CayleyGraph()`; if it was there it would be most natural to return such a thing on success.

So you're saying that we should return an isomorphic graph that is marked as a Cayley graph as a certificate? Interesting, although this is probably something the user should do by themselves given the group.

Even if we don't have such a constructor, we can always relabel the vertices with group elements, and then set edge labels, just like the `cayley_graph` method on a group would do.

Janoš



---

archive/issue_comments_279136.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nHmmmm.. True. Returning a graph whose vertices are group elements and whose edges are labelled with a group element looks cool. Plus one can even get the actual group from `anyvertex.parent()`...\n\nNathann",
    "created_at": "2015-11-30T13:04:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279136",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:44" align="right">comment:44</div>

Hmmmm.. True. Returning a graph whose vertices are group elements and whose edges are labelled with a group element looks cool. Plus one can even get the actual group from `anyvertex.parent()`...

Nathann



---

archive/issue_comments_279137.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@nathanncohen](#comment:44):\n> Hmmmm.. True. Returning a graph whose vertices are group elements and whose edges are labelled with a group element looks cool. Plus one can even get the actual group from `anyvertex.parent()`...\n\nvertices and edge labels ought to be words in group generators (you always need at most log_2(n) generators, at least if my memory is correct that the elementary abelian 2-groups are the worst case for the number of generators; and multiplying permutations is fast). \nActually, all you need to store is  [\"Schreier vector\"](https://en.wikipedia.org/wiki/Schreier_vector), and compute vertex and edge labels on the fly.\n\nCertainly keeping edge labels for each edge is silly, as they are trivially computed from the edge labels for one fixed vertex.",
    "created_at": "2015-11-30T13:33:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279137",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@nathanncohen](#comment:44):
> Hmmmm.. True. Returning a graph whose vertices are group elements and whose edges are labelled with a group element looks cool. Plus one can even get the actual group from `anyvertex.parent()`...

vertices and edge labels ought to be words in group generators (you always need at most log_2(n) generators, at least if my memory is correct that the elementary abelian 2-groups are the worst case for the number of generators; and multiplying permutations is fast). 
Actually, all you need to store is  ["Schreier vector"](https://en.wikipedia.org/wiki/Schreier_vector), and compute vertex and edge labels on the fly.

Certainly keeping edge labels for each edge is silly, as they are trivially computed from the edge labels for one fixed vertex.



---

archive/issue_comments_279138.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nYo\n\n> vertices and edge labels ought to be words in group generators\n\nWhy ? A group element does the job already.\n\n> Actually, all you need to store is  [\"Schreier vector\"](https://en.wikipedia.org/wiki/Schreier_vector), and compute vertex and edge labels on the fly.\n\nThat sounds like \"something you might want to have\", not \"something that you can request the ticket's author to implement for you, as a reviewer\"\n\n> Certainly keeping edge labels for each edge is silly, as they are trivially computed from the edge labels for one fixed vertex.\n\nSure, but this way if you type `g.edge_labels()` you obtain the list of generators. It is only a proposition: I don't use cayley graph much, and though I can review some of the code the design is best chosen by those who might need the feature. You two, in the current situation.\n\nNathann",
    "created_at": "2015-11-30T13:40:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279138",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:46" align="right">comment:46</div>

Yo

> vertices and edge labels ought to be words in group generators

Why ? A group element does the job already.

> Actually, all you need to store is  ["Schreier vector"](https://en.wikipedia.org/wiki/Schreier_vector), and compute vertex and edge labels on the fly.

That sounds like "something you might want to have", not "something that you can request the ticket's author to implement for you, as a reviewer"

> Certainly keeping edge labels for each edge is silly, as they are trivially computed from the edge labels for one fixed vertex.

Sure, but this way if you type `g.edge_labels()` you obtain the list of generators. It is only a proposition: I don't use cayley graph much, and though I can review some of the code the design is best chosen by those who might need the feature. You two, in the current situation.

Nathann



---

archive/issue_comments_279139.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/382c0f2daa019b8ba1c96462dbcdbab9ad2ee6a2\">382c0f2</a></td><td><code>Rename transitive_subgroup to regular_subgroup</code></td></tr></table>\n",
    "created_at": "2015-11-30T13:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279139",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/382c0f2daa019b8ba1c96462dbcdbab9ad2ee6a2">382c0f2</a></td><td><code>Rename transitive_subgroup to regular_subgroup</code></td></tr></table>




---

archive/issue_comments_279140.json:
```json
{
    "body": "Changed commit from **[4aaf301](https://github.com/sagemath/sagetrac-mirror/commit/4aaf3014fee5bb08d861636908d6733047d4a869)** to **[382c0f2](https://github.com/sagemath/sagetrac-mirror/commit/382c0f2daa019b8ba1c96462dbcdbab9ad2ee6a2)**",
    "created_at": "2015-11-30T13:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279140",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4aaf301](https://github.com/sagemath/sagetrac-mirror/commit/4aaf3014fee5bb08d861636908d6733047d4a869)** to **[382c0f2](https://github.com/sagemath/sagetrac-mirror/commit/382c0f2daa019b8ba1c96462dbcdbab9ad2ee6a2)**



---

archive/issue_comments_279141.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@nathanncohen](#comment:46):\n> Yo\n> \n> > vertices and edge labels ought to be words in group generators\n\n> \n> Why ? A group element does the job already.\n\ncause you need `n^2` as opposed to `n log(n)` storage, making graphs that are easily handled by GRAPE out of reach.\n\n> \n> > Actually, all you need to store is  [\"Schreier vector\"](https://en.wikipedia.org/wiki/Schreier_vector), and compute vertex and edge labels on the fly.\n\n> \n> That sounds like \"something you might want to have\", not \"something that you can request the ticket's author to implement for you, as a reviewer\"\n\nCertainly. It seems to be better to write it here than per email. I certainly not insist on it being implemented here on this ticket.\n\n> \n> > Certainly keeping edge labels for each edge is silly, as they are trivially computed from the edge labels for one fixed vertex.\n\n> \n> Sure, but this way if you type `g.edge_labels()` you obtain the list of generators. It is only a proposition: I don't use cayley graph much, and though I can review some of the code the design is best chosen by those who might need the feature. You two, in the current situation.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/382c0f2daa019b8ba1c96462dbcdbab9ad2ee6a2\">382c0f2</a></td><td><code>Rename transitive_subgroup to regular_subgroup</code></td></tr></table>\n",
    "created_at": "2015-11-30T14:00:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279141",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@nathanncohen](#comment:46):
> Yo
> 
> > vertices and edge labels ought to be words in group generators

> 
> Why ? A group element does the job already.

cause you need `n^2` as opposed to `n log(n)` storage, making graphs that are easily handled by GRAPE out of reach.

> 
> > Actually, all you need to store is  ["Schreier vector"](https://en.wikipedia.org/wiki/Schreier_vector), and compute vertex and edge labels on the fly.

> 
> That sounds like "something you might want to have", not "something that you can request the ticket's author to implement for you, as a reviewer"

Certainly. It seems to be better to write it here than per email. I certainly not insist on it being implemented here on this ticket.

> 
> > Certainly keeping edge labels for each edge is silly, as they are trivially computed from the edge labels for one fixed vertex.

> 
> Sure, but this way if you type `g.edge_labels()` you obtain the list of generators. It is only a proposition: I don't use cayley graph much, and though I can review some of the code the design is best chosen by those who might need the feature. You two, in the current situation.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/382c0f2daa019b8ba1c96462dbcdbab9ad2ee6a2">382c0f2</a></td><td><code>Rename transitive_subgroup to regular_subgroup</code></td></tr></table>




---

archive/issue_comments_279142.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@dimpase](#comment:34):\n> Replying to [@jaanos](#comment:33):\n> > Hi!\n> > \n> > > as a switch to `libgap` will happen sooner or later, optimising for not reading GAP output\n> > > does not seem to be that important.\n\n> > \n> > I see. But should I do anything about it at this point?\n> > \n> > > this ceritainly looks better, but again, I don't like the counter-intuitive parameters of `is_cayley()` and weird sort of output (a pair) that you currently have. In particular the latter.\n\n> > \n> > I have modelled both input and output of `is_cayley` after methods such as `is_chordal` and `is_circulant`. \n\ninterestingly,  `is_circulant` implements a naive brute-force algorithm, and docs don't mention that there is a [polynomial-time algorithm](http://www.ams.org/journals/spmj/2004-15-06/S1061-0022-04-00833-7/S1061-0022-04-00833-7.pdf). (Which is also not mentioned on the wikipedia page it refers to. Perhaps I should edit the latter...)\n\nPS. just edited the wikipedia page...",
    "created_at": "2015-11-30T14:05:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279142",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@dimpase](#comment:34):
> Replying to [@jaanos](#comment:33):
> > Hi!
> > 
> > > as a switch to `libgap` will happen sooner or later, optimising for not reading GAP output
> > > does not seem to be that important.

> > 
> > I see. But should I do anything about it at this point?
> > 
> > > this ceritainly looks better, but again, I don't like the counter-intuitive parameters of `is_cayley()` and weird sort of output (a pair) that you currently have. In particular the latter.

> > 
> > I have modelled both input and output of `is_cayley` after methods such as `is_chordal` and `is_circulant`. 

interestingly,  `is_circulant` implements a naive brute-force algorithm, and docs don't mention that there is a [polynomial-time algorithm](http://www.ams.org/journals/spmj/2004-15-06/S1061-0022-04-00833-7/S1061-0022-04-00833-7.pdf). (Which is also not mentioned on the wikipedia page it refers to. Perhaps I should edit the latter...)

PS. just edited the wikipedia page...



---

archive/issue_comments_279143.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nOK, I have just renamed the group method now, and haven't done any of the other things yet.\n\nAbout a Cayley graph as a certificate: when we have an appropriate backend, sure, we should use that (or even a subclass dedicated to Cayley graphs which can compute the vertex name and edge labels on the fly). But until then we should decide what exactly to return as certificate, and that should remain so in the future.\n\nIf we want to return a Cayley graph, we could either always return a digraph (which can be nicely labelled, but won't be isomorphic to an undirected graph), or simply relabel the input graph (in case of undirected graphs we should then not use mutually inverse labels). I prefer the second option.\n\nJano\u0161",
    "created_at": "2015-11-30T14:17:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279143",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:50" align="right">comment:50</div>

OK, I have just renamed the group method now, and haven't done any of the other things yet.

About a Cayley graph as a certificate: when we have an appropriate backend, sure, we should use that (or even a subclass dedicated to Cayley graphs which can compute the vertex name and edge labels on the fly). But until then we should decide what exactly to return as certificate, and that should remain so in the future.

If we want to return a Cayley graph, we could either always return a digraph (which can be nicely labelled, but won't be isomorphic to an undirected graph), or simply relabel the input graph (in case of undirected graphs we should then not use mutually inverse labels). I prefer the second option.

Janoš



---

archive/issue_comments_279144.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/baba4a8d4919be000984d40f56db542557c55e51\">baba4a8</a></td><td><code>Add cayley_graph_group and change the certificate to a labelled graph</code></td></tr></table>\n",
    "created_at": "2016-01-10T02:44:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279144",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/baba4a8d4919be000984d40f56db542557c55e51">baba4a8</a></td><td><code>Add cayley_graph_group and change the certificate to a labelled graph</code></td></tr></table>




---

archive/issue_comments_279145.json:
```json
{
    "body": "Changed commit from **[382c0f2](https://github.com/sagemath/sagetrac-mirror/commit/382c0f2daa019b8ba1c96462dbcdbab9ad2ee6a2)** to **[baba4a8](https://github.com/sagemath/sagetrac-mirror/commit/baba4a8d4919be000984d40f56db542557c55e51)**",
    "created_at": "2016-01-10T02:44:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279145",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[382c0f2](https://github.com/sagemath/sagetrac-mirror/commit/382c0f2daa019b8ba1c96462dbcdbab9ad2ee6a2)** to **[baba4a8](https://github.com/sagemath/sagetrac-mirror/commit/baba4a8d4919be000984d40f56db542557c55e51)**



---

archive/issue_comments_279146.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nI have finally gotten around to continuing work on this ticket. So, now we've got this:\n\n* I have added a method `cayley_graph_group`, as suggested, which takes care of obtaining the group (or actually computing it in the case of disconnected graphs). It can be instructed not to actually return the group, but only to tell whether the graph is Cayley or not.\n\n* `is_cayley` calls the above method, requesting the group if a certificate is requested. The certificate is now a copy of the graph with edges labelled by members of the generating set, and vertices associated to group elements (vertex names are not changed). One may then test that the result is indeed a Cayley graph - an example is in the doctest. Of course, once we will have a separate class/backend for Cayley graphs, we can use that here.\n\n* Since `set_edge_label` does not work for multiedges, I have added three new parameters to `copy`. One is `data`, specifying the actual graph data to be copied (so this can be anything `Graph` and `DiGraph` accept - in this case, a list of vertices and a list of labelled edges). The other two are `loops` and `multiedges` (I don't actually use them in the final version, but I figured it might be still useful to keep them). Any of the properties of the graph not specified as a parameter are obtained from the graph itself, not from whatever `data` is.\n\nSo, what do you guys think?\n\nJano\u0161\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/baba4a8d4919be000984d40f56db542557c55e51\">baba4a8</a></td><td><code>Add cayley_graph_group and change the certificate to a labelled graph</code></td></tr></table>\n",
    "created_at": "2016-01-10T02:45:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279146",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:52" align="right">comment:52</div>

I have finally gotten around to continuing work on this ticket. So, now we've got this:

* I have added a method `cayley_graph_group`, as suggested, which takes care of obtaining the group (or actually computing it in the case of disconnected graphs). It can be instructed not to actually return the group, but only to tell whether the graph is Cayley or not.

* `is_cayley` calls the above method, requesting the group if a certificate is requested. The certificate is now a copy of the graph with edges labelled by members of the generating set, and vertices associated to group elements (vertex names are not changed). One may then test that the result is indeed a Cayley graph - an example is in the doctest. Of course, once we will have a separate class/backend for Cayley graphs, we can use that here.

* Since `set_edge_label` does not work for multiedges, I have added three new parameters to `copy`. One is `data`, specifying the actual graph data to be copied (so this can be anything `Graph` and `DiGraph` accept - in this case, a list of vertices and a list of labelled edges). The other two are `loops` and `multiedges` (I don't actually use them in the final version, but I figured it might be still useful to keep them). Any of the properties of the graph not specified as a parameter are obtained from the graph itself, not from whatever `data` is.

So, what do you guys think?

Janoš

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/baba4a8d4919be000984d40f56db542557c55e51">baba4a8</a></td><td><code>Add cayley_graph_group and change the certificate to a labelled graph</code></td></tr></table>




---

archive/issue_comments_279147.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nPlease remove this ugly 'data' argument in 'copy'. It will not happen.\n\nNathann",
    "created_at": "2016-01-10T08:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279147",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:53" align="right">comment:53</div>

Please remove this ugly 'data' argument in 'copy'. It will not happen.

Nathann



---

archive/issue_comments_279148.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nSorry, I was rather angry. Longer answer:\n\n> * I have added a method `cayley_graph_group`, as suggested, which takes care of obtaining the group (or actually computing it in the case of disconnected graphs). It can be instructed not to actually return the group, but only to tell whether the graph is Cayley or not.\n> \n> * `is_cayley` calls the above method, requesting the group if a certificate is requested. The certificate is now a copy of the graph with edges labelled by members of the generating set, and vertices associated to group elements (vertex names are not changed). One may then test that the result is indeed a Cayley graph - an example is in the doctest. Of course, once we will have a separate class/backend for Cayley graphs, we can use that here.\n\nI am still against the presence of both 'is_cayley' and 'cayley_graph_group', especially if you say that the first does the job of the second already. Let us not have 300 ways to do the same thing.\n\nIn particular, I often saw often users do things like:\n\n```\nif self.is_cayley():\n    G = self.cayley_graph_group()\n```\n\nWhich means that they compute things twice, whenever they have both a `is_*` function and another one which returns the data they are actually after.\n\nI'm beginning to think that a `is_cayley_graph` that would return the group if possible and False otherwise would do the job, though that's only me.\n\n> * Since `set_edge_label` does not work for multiedges, I have added three new parameters to `copy`. One is `data`, specifying the actual graph data to be copied (so this can be anything `Graph` and `DiGraph` accept - in this case, a list of vertices and a list of labelled edges). The other two are `loops` and `multiedges` (I don't actually use them in the final version, but I figured it might be still useful to keep them). Any of the properties of the graph not specified as a parameter are obtained from the graph itself, not from whatever `data` is.\n\nKeywords like 'data' caused me endless troubles in this library. It is far too unspecific, and I do not even think that you need it. From what you said it seems that you only need to perform a copy then call `to_simple`. Tell me if it isn't what you want.\n\nNathann",
    "created_at": "2016-01-10T08:10:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279148",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:54" align="right">comment:54</div>

Sorry, I was rather angry. Longer answer:

> * I have added a method `cayley_graph_group`, as suggested, which takes care of obtaining the group (or actually computing it in the case of disconnected graphs). It can be instructed not to actually return the group, but only to tell whether the graph is Cayley or not.
> 
> * `is_cayley` calls the above method, requesting the group if a certificate is requested. The certificate is now a copy of the graph with edges labelled by members of the generating set, and vertices associated to group elements (vertex names are not changed). One may then test that the result is indeed a Cayley graph - an example is in the doctest. Of course, once we will have a separate class/backend for Cayley graphs, we can use that here.

I am still against the presence of both 'is_cayley' and 'cayley_graph_group', especially if you say that the first does the job of the second already. Let us not have 300 ways to do the same thing.

In particular, I often saw often users do things like:

```
if self.is_cayley():
    G = self.cayley_graph_group()
```

Which means that they compute things twice, whenever they have both a `is_*` function and another one which returns the data they are actually after.

I'm beginning to think that a `is_cayley_graph` that would return the group if possible and False otherwise would do the job, though that's only me.

> * Since `set_edge_label` does not work for multiedges, I have added three new parameters to `copy`. One is `data`, specifying the actual graph data to be copied (so this can be anything `Graph` and `DiGraph` accept - in this case, a list of vertices and a list of labelled edges). The other two are `loops` and `multiedges` (I don't actually use them in the final version, but I figured it might be still useful to keep them). Any of the properties of the graph not specified as a parameter are obtained from the graph itself, not from whatever `data` is.

Keywords like 'data' caused me endless troubles in this library. It is far too unspecific, and I do not even think that you need it. From what you said it seems that you only need to perform a copy then call `to_simple`. Tell me if it isn't what you want.

Nathann



---

archive/issue_comments_279149.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nHi!\n\nReplying to [@nathanncohen](#comment:54):\n> Sorry, I was rather angry. Longer answer:\n\nSorry about that, I thought you wouldn't like it. Anyway:\n\n> I am still against the presence of both 'is_cayley' and 'cayley_graph_group', especially if you say that the first does the job of the second already. Let us not have 300 ways to do the same thing.\n> \n> I'm beginning to think that a `is_cayley_graph` that would return the group if possible and False otherwise would do the job, though that's only me.\n\nI actually agree - I was just trying to implement what Dima had suggested. But anyway, I think it would not be wrong to let the user also have the generating set and a labelled copy of the graph if requested.\n\n> Keywords like 'data' caused me endless troubles in this library. It is far too unspecific, and I do not even think that you need it. From what you said it seems that you only need to perform a copy then call `to_simple`. Tell me if it isn't what you want.\n\nI agree that having `data` as a parameter to `copy` is ugly and counter-intuitive. However, lacking a way to label the edges of a multigraph, I thought it would be easiest to just rebuild a graph with the labels, and `copy` already provides all copying-related stuff (an alternative would be to replicate its code).\n\n`to_simple` would not work here, since I want to keep all loops and multiedges. What would be needed is a method like `set_edge_labels` which allows setting all labels simultaneously (including multiedges). For the purpose of this function, it would also suffice to have a parameter to `set_edge_label` that makes it set the same label to all parallel multiedges.\n\nJano\u0161",
    "created_at": "2016-01-10T21:33:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279149",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:55" align="right">comment:55</div>

Hi!

Replying to [@nathanncohen](#comment:54):
> Sorry, I was rather angry. Longer answer:

Sorry about that, I thought you wouldn't like it. Anyway:

> I am still against the presence of both 'is_cayley' and 'cayley_graph_group', especially if you say that the first does the job of the second already. Let us not have 300 ways to do the same thing.
> 
> I'm beginning to think that a `is_cayley_graph` that would return the group if possible and False otherwise would do the job, though that's only me.

I actually agree - I was just trying to implement what Dima had suggested. But anyway, I think it would not be wrong to let the user also have the generating set and a labelled copy of the graph if requested.

> Keywords like 'data' caused me endless troubles in this library. It is far too unspecific, and I do not even think that you need it. From what you said it seems that you only need to perform a copy then call `to_simple`. Tell me if it isn't what you want.

I agree that having `data` as a parameter to `copy` is ugly and counter-intuitive. However, lacking a way to label the edges of a multigraph, I thought it would be easiest to just rebuild a graph with the labels, and `copy` already provides all copying-related stuff (an alternative would be to replicate its code).

`to_simple` would not work here, since I want to keep all loops and multiedges. What would be needed is a method like `set_edge_labels` which allows setting all labels simultaneously (including multiedges). For the purpose of this function, it would also suffice to have a parameter to `set_edge_label` that makes it set the same label to all parallel multiedges.

Janoš



---

archive/issue_events_277403.json:
```json
{
    "actor": "https://github.com/jaanos",
    "created_at": "2016-01-10T21:33:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277403"
}
```



---

archive/issue_events_277404.json:
```json
{
    "actor": "https://github.com/jaanos",
    "created_at": "2016-01-10T21:33:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277404"
}
```



---

archive/issue_comments_279150.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nYo !!\n\n> I actually agree - I was just trying to implement what Dima had suggested. But anyway, I think it would not be wrong to let the user also have the generating set and a labelled copy of the graph if requested.\n\nI quite like to abuse of Python's features in this respect (though I know Dima hates it), and have the same function return as much stuff as needed: `G.is_cayley_graph(group=True,labelled_graph=True)`.\n\n> I agree that having `data` as a parameter to `copy` is ugly and counter-intuitive. However, lacking a way to label the edges of a multigraph, I thought it would be easiest to just rebuild a graph with the labels, and `copy` already provides all copying-related stuff (an alternative would be to replicate its code).\n\nIs there any reason why you don't create an empty digraph and add the necessary edges? I first thought that you were trying to avoid distinguishing graph and digraph, but then I wondered what the label would be on an *unlabeled* edge. `u/v` or `v/u`? Seems better to always use a digraph, doesn't it?\n\nNathann",
    "created_at": "2016-01-10T21:48:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279150",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:56" align="right">comment:56</div>

Yo !!

> I actually agree - I was just trying to implement what Dima had suggested. But anyway, I think it would not be wrong to let the user also have the generating set and a labelled copy of the graph if requested.

I quite like to abuse of Python's features in this respect (though I know Dima hates it), and have the same function return as much stuff as needed: `G.is_cayley_graph(group=True,labelled_graph=True)`.

> I agree that having `data` as a parameter to `copy` is ugly and counter-intuitive. However, lacking a way to label the edges of a multigraph, I thought it would be easiest to just rebuild a graph with the labels, and `copy` already provides all copying-related stuff (an alternative would be to replicate its code).

Is there any reason why you don't create an empty digraph and add the necessary edges? I first thought that you were trying to avoid distinguishing graph and digraph, but then I wondered what the label would be on an *unlabeled* edge. `u/v` or `v/u`? Seems better to always use a digraph, doesn't it?

Nathann



---

archive/issue_comments_279151.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nHi!\n\n> Is there any reason why you don't create an empty digraph and add the necessary edges? I first thought that you were trying to avoid distinguishing graph and digraph, but then I wondered what the label would be on an *unlabeled* edge. `u/v` or `v/u`? Seems better to always use a digraph, doesn't it?\n\nI guess this would be doable, but then other properties would also have to be set, which means duplicating the `copy` code. So essentially this is what the current code is doing. But then again maybe we should be happy with just copying what we really need.\n\nAs for graphs vs. digraphs, I prefer returning a graph which is actually isomorphic to the original one. Of course, the resulting digraph could always be converted to an undirected graph, but if the original graph has multiedges, this conversion would double the edges.\n\nFor the labels on undirected edges, what I currently do is pick one label and use it whenever its inverse could be used. Since vertices are associated with group elements (via `set_vertices`), this does not appear to be a problem.\n\nJano\u0161",
    "created_at": "2016-01-10T22:36:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279151",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:57" align="right">comment:57</div>

Hi!

> Is there any reason why you don't create an empty digraph and add the necessary edges? I first thought that you were trying to avoid distinguishing graph and digraph, but then I wondered what the label would be on an *unlabeled* edge. `u/v` or `v/u`? Seems better to always use a digraph, doesn't it?

I guess this would be doable, but then other properties would also have to be set, which means duplicating the `copy` code. So essentially this is what the current code is doing. But then again maybe we should be happy with just copying what we really need.

As for graphs vs. digraphs, I prefer returning a graph which is actually isomorphic to the original one. Of course, the resulting digraph could always be converted to an undirected graph, but if the original graph has multiedges, this conversion would double the edges.

For the labels on undirected edges, what I currently do is pick one label and use it whenever its inverse could be used. Since vertices are associated with group elements (via `set_vertices`), this does not appear to be a problem.

Janoš



---

archive/issue_comments_279152.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nHello,\n\n> I guess this would be doable, but then other properties would also have to be set, which means duplicating the `copy` code.\n\nDon't feel forced to preserve them if you see no reason to. Most of Sage's graph methods do not do it, so it is far from being a standard. If you want to do it, however, you are quite free to do so.\n\n> As for graphs vs. digraphs, I prefer returning a graph which is actually isomorphic to the original one. Of course, the resulting digraph could always be converted to an undirected graph, but if the original graph has multiedges, this conversion would double the edges.\n> \n> For the labels on undirected edges, what I currently do is pick one label and use it whenever its inverse could be used.\n\nSorry, I do not understand this sentence.\n\n> Since vertices are associated with group elements (via `set_vertices`), this does not appear to be a problem.\n\nNooooooo... `set_vertices`? You use it to store the bijection between vertices and group elements? Can't you return a dictionary instead ?\n\nI hate those \"gadget properties\". They seem nice when you add them, and then you see yourself spending your nights answering idiotic questions like \"what on earth should I do with set_vertices inside of merge_vertices\" or something like that `>_<`\n\nNathann",
    "created_at": "2016-01-10T22:50:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279152",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:58" align="right">comment:58</div>

Hello,

> I guess this would be doable, but then other properties would also have to be set, which means duplicating the `copy` code.

Don't feel forced to preserve them if you see no reason to. Most of Sage's graph methods do not do it, so it is far from being a standard. If you want to do it, however, you are quite free to do so.

> As for graphs vs. digraphs, I prefer returning a graph which is actually isomorphic to the original one. Of course, the resulting digraph could always be converted to an undirected graph, but if the original graph has multiedges, this conversion would double the edges.
> 
> For the labels on undirected edges, what I currently do is pick one label and use it whenever its inverse could be used.

Sorry, I do not understand this sentence.

> Since vertices are associated with group elements (via `set_vertices`), this does not appear to be a problem.

Nooooooo... `set_vertices`? You use it to store the bijection between vertices and group elements? Can't you return a dictionary instead ?

I hate those "gadget properties". They seem nice when you add them, and then you see yourself spending your nights answering idiotic questions like "what on earth should I do with set_vertices inside of merge_vertices" or something like that `>_<`

Nathann



---

archive/issue_comments_279153.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nHi!\n\n> > For the labels on undirected edges, what I currently do is pick one label and use it whenever its inverse could be used.\n\n> \n> Sorry, I do not understand this sentence.\n\nI meant that all undirected edges `(u, v)` such that `u*g == v` or `u*g^-1 == v`, the same label `g` is used (of course, `g^-1` would be just as good).\n\n> Nooooooo... `set_vertices`? You use it to store the bijection between vertices and group elements? Can't you return a dictionary instead ?\n> \n> I hate those \"gadget properties\". They seem nice when you add them, and then you see yourself spending your nights answering idiotic questions like \"what on earth should I do with set_vertices inside of merge_vertices\" or something like that `>_<`\n\nHaha, it seems I hit something that shouldn't be:)\n\nMaybe we should revert to the last commit, and just add an option to let the user have exactly what they want (group/mapping/generating set). As for the graph, I guess the best thing would be to let the user construct it themselves the way that they want.\n\nJano\u0161",
    "created_at": "2016-01-10T23:07:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279153",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:59" align="right">comment:59</div>

Hi!

> > For the labels on undirected edges, what I currently do is pick one label and use it whenever its inverse could be used.

> 
> Sorry, I do not understand this sentence.

I meant that all undirected edges `(u, v)` such that `u*g == v` or `u*g^-1 == v`, the same label `g` is used (of course, `g^-1` would be just as good).

> Nooooooo... `set_vertices`? You use it to store the bijection between vertices and group elements? Can't you return a dictionary instead ?
> 
> I hate those "gadget properties". They seem nice when you add them, and then you see yourself spending your nights answering idiotic questions like "what on earth should I do with set_vertices inside of merge_vertices" or something like that `>_<`

Haha, it seems I hit something that shouldn't be:)

Maybe we should revert to the last commit, and just add an option to let the user have exactly what they want (group/mapping/generating set). As for the graph, I guess the best thing would be to let the user construct it themselves the way that they want.

Janoš



---

archive/issue_comments_279154.json:
```json
{
    "body": "<div id=\"comment:60\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8685628455d2364bbb1896bf28e18c637bfab50c\">8685628</a></td><td><code>Replace certificate with return_group, mapping and generators</code></td></tr></table>\n",
    "created_at": "2016-01-13T09:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279154",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:60"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8685628455d2364bbb1896bf28e18c637bfab50c">8685628</a></td><td><code>Replace certificate with return_group, mapping and generators</code></td></tr></table>




---

archive/issue_comments_279155.json:
```json
{
    "body": "Changed commit from **[baba4a8](https://github.com/sagemath/sagetrac-mirror/commit/baba4a8d4919be000984d40f56db542557c55e51)** to **[8685628](https://github.com/sagemath/sagetrac-mirror/commit/8685628455d2364bbb1896bf28e18c637bfab50c)**",
    "created_at": "2016-01-13T09:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279155",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[baba4a8](https://github.com/sagemath/sagetrac-mirror/commit/baba4a8d4919be000984d40f56db542557c55e51)** to **[8685628](https://github.com/sagemath/sagetrac-mirror/commit/8685628455d2364bbb1896bf28e18c637bfab50c)**



---

archive/issue_comments_279156.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nOK, I've reverted the last commit, and instead added the parameters `return_group`, `mapping` and `generators` instead of `certificate`. I hope it's better this way:)\n\nBy the way, should the parameters all be named `return_*`? `return_group` seems to be established, while, for example, `automorphism_group` has a parameter `orbits` to specify that orbits should be returned.\n\nJano\u0161",
    "created_at": "2016-01-13T09:08:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279156",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:61" align="right">comment:61</div>

OK, I've reverted the last commit, and instead added the parameters `return_group`, `mapping` and `generators` instead of `certificate`. I hope it's better this way:)

By the way, should the parameters all be named `return_*`? `return_group` seems to be established, while, for example, `automorphism_group` has a parameter `orbits` to specify that orbits should be returned.

Janoš



---

archive/issue_comments_279157.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nHellooooooooooo,\n\nThank you very much for this update. Here are some comments:\n\n- Some people sometimes fight about whether 'self' should be allowed in the docstrings, .e.g:\n  `Check whether self is a Cayley graph.`\n  I don't insist on any such rule, but I usually write it on the pattern 'Check\n  whether the graph is a Cayley graph'. As you rightfully added your method to\n  the index, you can see that only the *name* of the function appears before\n  `Check whether self is a Cayley graph.`. In this context, the meaning of\n  'self' is not clear. This being said, you will probably see it occur in some\n  other places of Sage's code: make the change or do not make it, according to\n  your taste. I just thought worth mentionning.\n\n- About the doctest `sage: S`. I am not sure that the output will be\n  identital on all platforms: the order of the generators can change on a\n  different architecture, and this would be reported as a broken doctest. If you\n  have reasons to believe that it will work on all platform then it can stay,\n  otherwise the test must be made platform-independent. This can be done by\n  building the graph from the generators for instance. If you do not believe\n  that it is worth checking (e.g. if it is already tested elsewhere) then you\n  can just remove this line, or test something different.\n\n- `regular_subgroup` given that the default behaviour is to return a boolean,\n  shouldn't it be named `has_regular_subgroup` instead?\n\n- about `is_cayley` returning generators: do you think that it is necessary to\n  have this option, or should we let users call `.generators()` on the group\n  object?\n\n- `c, G, d, S` could you give more meaningful names to those variables? I\n  guess that 'G' is alright (even though, in a Graph function...) but `d` and\n  `S` could easily be `graph_to_group_map` and `generators`. Or anything else\n  you might prefer.\n\n- You do not need `\\` at the end of the line when a `[({` is open and remains to\n  be closed.\n\n- Can this\n\n  ```\n  +                t = C[0].is_cayley(return_group=certificate)\n  +                if certificate:\n  +                    c, CG = t\n  ```\n  be replaced by that?\n\n  ```\n  +                c, CG = C[0].is_cayley(return_group=certificate)\n  +                if certificate:\n  ```\n  The value `None` may be replaced by `None` uselessly, but that's not a big\n  problem (if I don't get anything wrong)\n\n- About `return tuple(out)` -- there is nothing wrong with this, though I\n  don't think it is necessary to force a 'tuple'. This is no request to change\n  it of course, it is fine as it is if you prefer it this way.\n\n- It is better to call `self.degree()` than `len(self.domain())`.\n\nNathann\n\nP.S.: Don't forget to set a ticket back to `needs_review` once you are done with the changes.",
    "created_at": "2016-01-14T09:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279157",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:62" align="right">comment:62</div>

Hellooooooooooo,

Thank you very much for this update. Here are some comments:

- Some people sometimes fight about whether 'self' should be allowed in the docstrings, .e.g:
  `Check whether self is a Cayley graph.`
  I don't insist on any such rule, but I usually write it on the pattern 'Check
  whether the graph is a Cayley graph'. As you rightfully added your method to
  the index, you can see that only the *name* of the function appears before
  `Check whether self is a Cayley graph.`. In this context, the meaning of
  'self' is not clear. This being said, you will probably see it occur in some
  other places of Sage's code: make the change or do not make it, according to
  your taste. I just thought worth mentionning.

- About the doctest `sage: S`. I am not sure that the output will be
  identital on all platforms: the order of the generators can change on a
  different architecture, and this would be reported as a broken doctest. If you
  have reasons to believe that it will work on all platform then it can stay,
  otherwise the test must be made platform-independent. This can be done by
  building the graph from the generators for instance. If you do not believe
  that it is worth checking (e.g. if it is already tested elsewhere) then you
  can just remove this line, or test something different.

- `regular_subgroup` given that the default behaviour is to return a boolean,
  shouldn't it be named `has_regular_subgroup` instead?

- about `is_cayley` returning generators: do you think that it is necessary to
  have this option, or should we let users call `.generators()` on the group
  object?

- `c, G, d, S` could you give more meaningful names to those variables? I
  guess that 'G' is alright (even though, in a Graph function...) but `d` and
  `S` could easily be `graph_to_group_map` and `generators`. Or anything else
  you might prefer.

- You do not need `\` at the end of the line when a `[({` is open and remains to
  be closed.

- Can this

  ```
  +                t = C[0].is_cayley(return_group=certificate)
  +                if certificate:
  +                    c, CG = t
  ```
  be replaced by that?

  ```
  +                c, CG = C[0].is_cayley(return_group=certificate)
  +                if certificate:
  ```
  The value `None` may be replaced by `None` uselessly, but that's not a big
  problem (if I don't get anything wrong)

- About `return tuple(out)` -- there is nothing wrong with this, though I
  don't think it is necessary to force a 'tuple'. This is no request to change
  it of course, it is fine as it is if you prefer it this way.

- It is better to call `self.degree()` than `len(self.domain())`.

Nathann

P.S.: Don't forget to set a ticket back to `needs_review` once you are done with the changes.



---

archive/issue_comments_279158.json:
```json
{
    "body": "Reviewer: **Nathann Cohen**",
    "created_at": "2016-01-14T09:20:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279158",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Nathann Cohen**



---

archive/issue_comments_279159.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nHi!\n\nSome quick replies:\n\n> - About the doctest `sage: S`. I am not sure that the output will be\n>   identital on all platforms: the order of the generators can change on a\n>   different architecture, and this would be reported as a broken doctest. If you\n>   have reasons to believe that it will work on all platform then it can stay,\n>   otherwise the test must be made platform-independent. This can be done by\n>   building the graph from the generators for instance. If you do not believe\n>   that it is worth checking (e.g. if it is already tested elsewhere) then you\n>   can just remove this line, or test something different.\n\nYes, I was a bit worried about that. Anyway, this was intended more as a demonstration that the method works on non-simple graphs, so maybe it should be moved to the Examples section. Instead of printing out the generating set, maybe we should just print its length and the number of distinct elements, and maybe check that it contains the identity element.\n\n> - about `is_cayley` returning generators: do you think that it is necessary to\n>   have this option, or should we let users call `.generators()` on the group\n>   object?\n\nYes, because the generating set of a Cayley graph is not the same as the set of generators of a group. A trivial example would be a complete graph - its generating set as a Cayley graph is the whole group, which can of course be generated by some subset of its elements. For a disconnected Cayley graph, on the other hand, the generating set will not even generate the whole group.\n\nThis reminds me that I should probably add a further optimization: if a (simple) graph is connected and dense (say, vertex degree more than half the order), then it may be more efficient to check for Cayleyness of its complement (in case it is disconnected it will be more efficient, otherwise the same).\n\n> - Can this\n> \n>   ```\n>   +                t = C[0].is_cayley(return_group=certificate)\n>   +                if certificate:\n>   +                    c, CG = t\n>   ```\n>   be replaced by that?\n> \n>   ```\n>   +                c, CG = C[0].is_cayley(return_group=certificate)\n>   +                if certificate:\n>   ```\n>   The value `None` may be replaced by `None` uselessly, but that's not a big\n>   problem (if I don't get anything wrong)\n\nNo, because we are not guaranteed that a tuple will be returned.\n\n> - About `return tuple(out)` -- there is nothing wrong with this, though I\n>   don't think it is necessary to force a 'tuple'. This is no request to change\n>   it of course, it is fine as it is if you prefer it this way.\n\nTrue, but other methods returning multiple data also return tuples, so I think it should stay (IMO lists should be used when the size of the output is not predetermined, and its members have the same type).\n\nI agree with the comments that I haven't replied to. I'm a bit busy these days, so (anyone) feel free to implement these suggestions if you feel like it.\n\nJano\u0161",
    "created_at": "2016-01-14T12:15:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279159",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:63" align="right">comment:63</div>

Hi!

Some quick replies:

> - About the doctest `sage: S`. I am not sure that the output will be
>   identital on all platforms: the order of the generators can change on a
>   different architecture, and this would be reported as a broken doctest. If you
>   have reasons to believe that it will work on all platform then it can stay,
>   otherwise the test must be made platform-independent. This can be done by
>   building the graph from the generators for instance. If you do not believe
>   that it is worth checking (e.g. if it is already tested elsewhere) then you
>   can just remove this line, or test something different.

Yes, I was a bit worried about that. Anyway, this was intended more as a demonstration that the method works on non-simple graphs, so maybe it should be moved to the Examples section. Instead of printing out the generating set, maybe we should just print its length and the number of distinct elements, and maybe check that it contains the identity element.

> - about `is_cayley` returning generators: do you think that it is necessary to
>   have this option, or should we let users call `.generators()` on the group
>   object?

Yes, because the generating set of a Cayley graph is not the same as the set of generators of a group. A trivial example would be a complete graph - its generating set as a Cayley graph is the whole group, which can of course be generated by some subset of its elements. For a disconnected Cayley graph, on the other hand, the generating set will not even generate the whole group.

This reminds me that I should probably add a further optimization: if a (simple) graph is connected and dense (say, vertex degree more than half the order), then it may be more efficient to check for Cayleyness of its complement (in case it is disconnected it will be more efficient, otherwise the same).

> - Can this
> 
>   ```
>   +                t = C[0].is_cayley(return_group=certificate)
>   +                if certificate:
>   +                    c, CG = t
>   ```
>   be replaced by that?
> 
>   ```
>   +                c, CG = C[0].is_cayley(return_group=certificate)
>   +                if certificate:
>   ```
>   The value `None` may be replaced by `None` uselessly, but that's not a big
>   problem (if I don't get anything wrong)

No, because we are not guaranteed that a tuple will be returned.

> - About `return tuple(out)` -- there is nothing wrong with this, though I
>   don't think it is necessary to force a 'tuple'. This is no request to change
>   it of course, it is fine as it is if you prefer it this way.

True, but other methods returning multiple data also return tuples, so I think it should stay (IMO lists should be used when the size of the output is not predetermined, and its members have the same type).

I agree with the comments that I haven't replied to. I'm a bit busy these days, so (anyone) feel free to implement these suggestions if you feel like it.

Janoš



---

archive/issue_comments_279160.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\n> Yes, I was a bit worried about that. Anyway, this was intended more as a demonstration that the method works on non-simple graphs, so maybe it should be moved to the Examples section. Instead of printing out the generating set, maybe we should just print its length and the number of distinct elements, and maybe check that it contains the identity element.\n\nIf you meant it as a 'pedagogical' doctest, then there is an easy way out: just add a '# random' flag to the doctest.\n\nfile:///home/ncohen/.Sage/src/doc/output/html/en/developer/coding_basics.html#special-markup-to-influence-tests\n\n> Yes, because the generating set of a Cayley graph is not the same as the set of generators of a group.\n\nArg... Sorry. Not only I am an idiot, but I already asked the same question and you gave me the very same answer `>_<`\n\n> This reminds me that I should probably add a further optimization: if a (simple) graph is connected and dense (say, vertex degree more than half the order), then it may be more efficient to check for Cayleyness of its complement (in case it is disconnected it will be more efficient, otherwise the same).\n\nThe .density() and .complement() method raise exceptions on non-simple graphs. I think that it is better to not care about this, unless you really need those cases and the speedup is obvious.\n\n> No, because we are not guaranteed that a tuple will be returned.\n\nWeird. I thought you said in the doctest that a tuple will always be returned, whether the graph is a cayley graph or not, and that the additional values would be set to `None` if necessary.\n\n> True, but other methods returning multiple data also return tuples, so I think it should stay (IMO lists should be used when the size of the output is not predetermined, and its members have the same type).\n\n`O_o`\n\nOkay. Well. Tastes `:-P`\n\nNathann",
    "created_at": "2016-01-14T12:55:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279160",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:64" align="right">comment:64</div>

> Yes, I was a bit worried about that. Anyway, this was intended more as a demonstration that the method works on non-simple graphs, so maybe it should be moved to the Examples section. Instead of printing out the generating set, maybe we should just print its length and the number of distinct elements, and maybe check that it contains the identity element.

If you meant it as a 'pedagogical' doctest, then there is an easy way out: just add a '# random' flag to the doctest.

file:///home/ncohen/.Sage/src/doc/output/html/en/developer/coding_basics.html#special-markup-to-influence-tests

> Yes, because the generating set of a Cayley graph is not the same as the set of generators of a group.

Arg... Sorry. Not only I am an idiot, but I already asked the same question and you gave me the very same answer `>_<`

> This reminds me that I should probably add a further optimization: if a (simple) graph is connected and dense (say, vertex degree more than half the order), then it may be more efficient to check for Cayleyness of its complement (in case it is disconnected it will be more efficient, otherwise the same).

The .density() and .complement() method raise exceptions on non-simple graphs. I think that it is better to not care about this, unless you really need those cases and the speedup is obvious.

> No, because we are not guaranteed that a tuple will be returned.

Weird. I thought you said in the doctest that a tuple will always be returned, whether the graph is a cayley graph or not, and that the additional values would be set to `None` if necessary.

> True, but other methods returning multiple data also return tuples, so I think it should stay (IMO lists should be used when the size of the output is not predetermined, and its members have the same type).

`O_o`

Okay. Well. Tastes `:-P`

Nathann



---

archive/issue_comments_279161.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nHi!\n\n> > This reminds me that I should probably add a further optimization: if a (simple) graph is connected and dense (say, vertex degree more than half the order), then it may be more efficient to check for Cayleyness of its complement (in case it is disconnected it will be more efficient, otherwise the same).\n\n> \n> The .density() and .complement() method raise exceptions on non-simple graphs. I think that it is better to not care about this, unless you really need those cases and the speedup is obvious.\n\nThat's why I said simple (and I hadn't thought out the implications of non-simple graphs). But yes, the denser the graph, the greater the probability that such a speedup will be achieved, and the greater potential of speedup in this case. In the case of multiple edges, this potential is smaller (the current method will be faster in general due to the potentially smaller automorphism group), and I agree that we should not even care about the cases when speedup is actually possible (e.g. when all multiedges appear with the same multiplicity).\n\n> > No, because we are not guaranteed that a tuple will be returned.\n\n> \n> Weird. I thought you said in the doctest that a tuple will always be returned, whether the graph is a cayley graph or not, and that the additional values would be set to `None` if necessary.\n\nA tuple will be returned whenever some form of certificate is requested, regardless of whether the graph is Cayley or not. What is being differentiated here is whether the group has been requested in the first place. Although if you prefer, a call to `is_cayley` could be made in each branch of the `if` statement.\n\nJano\u0161",
    "created_at": "2016-01-14T13:19:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279161",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:65" align="right">comment:65</div>

Hi!

> > This reminds me that I should probably add a further optimization: if a (simple) graph is connected and dense (say, vertex degree more than half the order), then it may be more efficient to check for Cayleyness of its complement (in case it is disconnected it will be more efficient, otherwise the same).

> 
> The .density() and .complement() method raise exceptions on non-simple graphs. I think that it is better to not care about this, unless you really need those cases and the speedup is obvious.

That's why I said simple (and I hadn't thought out the implications of non-simple graphs). But yes, the denser the graph, the greater the probability that such a speedup will be achieved, and the greater potential of speedup in this case. In the case of multiple edges, this potential is smaller (the current method will be faster in general due to the potentially smaller automorphism group), and I agree that we should not even care about the cases when speedup is actually possible (e.g. when all multiedges appear with the same multiplicity).

> > No, because we are not guaranteed that a tuple will be returned.

> 
> Weird. I thought you said in the doctest that a tuple will always be returned, whether the graph is a cayley graph or not, and that the additional values would be set to `None` if necessary.

A tuple will be returned whenever some form of certificate is requested, regardless of whether the graph is Cayley or not. What is being differentiated here is whether the group has been requested in the first place. Although if you prefer, a call to `is_cayley` could be made in each branch of the `if` statement.

Janoš



---

archive/issue_comments_279162.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nYooooooo,\n\n> A tuple will be returned whenever some form of certificate is requested, regardless of whether the graph is Cayley or not. What is being differentiated here is whether the group has been requested in the first place. \n\nRight right, sorry.\n\n> Although if you prefer, a call to `is_cayley` could be made in each branch of the `if` statement.\n\nThe simpler the better, that's all I am looking for.\n\nNathann",
    "created_at": "2016-01-14T13:22:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279162",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:66" align="right">comment:66</div>

Yooooooo,

> A tuple will be returned whenever some form of certificate is requested, regardless of whether the graph is Cayley or not. What is being differentiated here is whether the group has been requested in the first place. 

Right right, sorry.

> Although if you prefer, a call to `is_cayley` could be made in each branch of the `if` statement.

The simpler the better, that's all I am looking for.

Nathann



---

archive/issue_comments_279163.json:
```json
{
    "body": "Changed commit from **[8685628](https://github.com/sagemath/sagetrac-mirror/commit/8685628455d2364bbb1896bf28e18c637bfab50c)** to **[95e34ee](https://github.com/sagemath/sagetrac-mirror/commit/95e34eecb315bcd0fded9c4f02a22b8c85e0ca1f)**",
    "created_at": "2016-01-23T15:10:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279163",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8685628](https://github.com/sagemath/sagetrac-mirror/commit/8685628455d2364bbb1896bf28e18c637bfab50c)** to **[95e34ee](https://github.com/sagemath/sagetrac-mirror/commit/95e34eecb315bcd0fded9c4f02a22b8c85e0ca1f)**



---

archive/issue_comments_279164.json:
```json
{
    "body": "<div id=\"comment:67\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95e34eecb315bcd0fded9c4f02a22b8c85e0ca1f\">95e34ee</a></td><td><code>Apply Nathann's suggestions</code></td></tr></table>\n",
    "created_at": "2016-01-23T15:10:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279164",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:67"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95e34eecb315bcd0fded9c4f02a22b8c85e0ca1f">95e34ee</a></td><td><code>Apply Nathann's suggestions</code></td></tr></table>




---

archive/issue_comments_279165.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-This ticket adds a method `is_cayley` to `GenericGraph`. This method checks whether a graph or digraph (which may or may not be connected) is a Cayley graph. If a certificate is requested, it also returns a permutation group and a generator set which generate this graph.\n+This ticket adds a method `is_cayley` to `GenericGraph`. This method checks whether a graph or digraph (which may or may not be connected) is a Cayley graph. If requested, it also returns a permutation group, a mapping from vertices to group elements, and a generating set of the Cayley graph.\n \n-A method `has_transitive_subgroup` has also been added to `PermutationGroup_generic`. For a given order, it determines whether the group has a subgroup of this order, and returns it if requested. If no order is given, it is taken to be the order of the group itself (i.e., the method then simply tells whether the group is transitive).\n+A method `has_regular_subgroup` has also been added to `PermutationGroup_generic`. It determines whether the group has a regular subgroup, and returns it if requested.\n``````\n",
    "created_at": "2016-01-23T15:25:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279165",
    "user": "https://github.com/jaanos"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-This ticket adds a method `is_cayley` to `GenericGraph`. This method checks whether a graph or digraph (which may or may not be connected) is a Cayley graph. If a certificate is requested, it also returns a permutation group and a generator set which generate this graph.
+This ticket adds a method `is_cayley` to `GenericGraph`. This method checks whether a graph or digraph (which may or may not be connected) is a Cayley graph. If requested, it also returns a permutation group, a mapping from vertices to group elements, and a generating set of the Cayley graph.
 
-A method `has_transitive_subgroup` has also been added to `PermutationGroup_generic`. For a given order, it determines whether the group has a subgroup of this order, and returns it if requested. If no order is given, it is taken to be the order of the group itself (i.e., the method then simply tells whether the group is transitive).
+A method `has_regular_subgroup` has also been added to `PermutationGroup_generic`. It determines whether the group has a regular subgroup, and returns it if requested.
``````




---

archive/issue_comments_279166.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nHi!\n\nI have implemented your suggestions. Some comments:\n\n> - About the doctest `sage: S`. I am not sure that the output will be\n>   identital on all platforms: the order of the generators can change on a\n>   different architecture, and this would be reported as a broken doctest. If you\n>   have reasons to believe that it will work on all platform then it can stay,\n>   otherwise the test must be made platform-independent. This can be done by\n>   building the graph from the generators for instance. If you do not believe\n>   that it is worth checking (e.g. if it is already tested elsewhere) then you\n>   can just remove this line, or test something different.\n\nI've moved it to the Examples section and added a `# random` flag. I've also added this flag to the doctests in `permgroup.py` where the generators of a group are output.\n\n> - `regular_subgroup` given that the default behaviour is to return a boolean,\n>   shouldn't it be named `has_regular_subgroup` instead?\n\nActually, the default behaviour was to return a group, but I changed it now. It seems more appropriate this way, since the method will return *a* regular subgroup, not *the* regular subgroup (if there is one in the first place). Now, the returned group (if requested) can be thought of as a certificate. Anyway, `is_cayley` now explicitly specifies the `return_group` parameter of `has_regular_subgroup` in both cases.\n\n> - `c, G, d, S` could you give more meaningful names to those variables? I\n>   guess that 'G' is alright (even though, in a Graph function...) but `d` and\n>   `S` could easily be `graph_to_group_map` and `generators`. Or anything else\n>   you might prefer.\n\nOK, I have now changed `map`, `d` and `S` to `compute_map`, `map` and `genset`, respectively.\n\n> - You do not need `\\` at the end of the line when a `[({` is open and remains to\n>   be closed.\n\nTrue, but the `\\` in line 20891 of `generic_graph.py` is actually outside any parentheses.\n\nJano\u0161",
    "created_at": "2016-01-23T15:25:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279166",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:68" align="right">comment:68</div>

Hi!

I have implemented your suggestions. Some comments:

> - About the doctest `sage: S`. I am not sure that the output will be
>   identital on all platforms: the order of the generators can change on a
>   different architecture, and this would be reported as a broken doctest. If you
>   have reasons to believe that it will work on all platform then it can stay,
>   otherwise the test must be made platform-independent. This can be done by
>   building the graph from the generators for instance. If you do not believe
>   that it is worth checking (e.g. if it is already tested elsewhere) then you
>   can just remove this line, or test something different.

I've moved it to the Examples section and added a `# random` flag. I've also added this flag to the doctests in `permgroup.py` where the generators of a group are output.

> - `regular_subgroup` given that the default behaviour is to return a boolean,
>   shouldn't it be named `has_regular_subgroup` instead?

Actually, the default behaviour was to return a group, but I changed it now. It seems more appropriate this way, since the method will return *a* regular subgroup, not *the* regular subgroup (if there is one in the first place). Now, the returned group (if requested) can be thought of as a certificate. Anyway, `is_cayley` now explicitly specifies the `return_group` parameter of `has_regular_subgroup` in both cases.

> - `c, G, d, S` could you give more meaningful names to those variables? I
>   guess that 'G' is alright (even though, in a Graph function...) but `d` and
>   `S` could easily be `graph_to_group_map` and `generators`. Or anything else
>   you might prefer.

OK, I have now changed `map`, `d` and `S` to `compute_map`, `map` and `genset`, respectively.

> - You do not need `\` at the end of the line when a `[({` is open and remains to
>   be closed.

True, but the `\` in line 20891 of `generic_graph.py` is actually outside any parentheses.

Janoš



---

archive/issue_events_277405.json:
```json
{
    "actor": "https://github.com/jaanos",
    "created_at": "2016-01-23T15:25:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277405"
}
```



---

archive/issue_events_277406.json:
```json
{
    "actor": "https://github.com/jaanos",
    "created_at": "2016-01-23T15:25:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277406"
}
```



---

archive/issue_comments_279167.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nHellooooooo,\n\n> True, but the `\\` in line 20891 of `generic_graph.py` is actually outside any parentheses.\n\nSigh... Right. You write extremely clean code, y'know?\n\nI re-read everything and added a couple of 'default values' for the arguments in the INPUT section, in a commit at public/19586. You can change the branch's name on this ticket if you agree with it.\n\nDima? Could you please review the code of `_regular_subgroup_gap`? I reviewed everything else but I'm not knowledgeable for that.\n\nIf this part is good for you, then this ticket can be changed to `positive_review`.\n\nTHaaaaaaaaaaaaanks,\n\nNathann",
    "created_at": "2016-01-23T16:09:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279167",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:69" align="right">comment:69</div>

Hellooooooo,

> True, but the `\` in line 20891 of `generic_graph.py` is actually outside any parentheses.

Sigh... Right. You write extremely clean code, y'know?

I re-read everything and added a couple of 'default values' for the arguments in the INPUT section, in a commit at public/19586. You can change the branch's name on this ticket if you agree with it.

Dima? Could you please review the code of `_regular_subgroup_gap`? I reviewed everything else but I'm not knowledgeable for that.

If this part is good for you, then this ticket can be changed to `positive_review`.

THaaaaaaaaaaaaanks,

Nathann



---

archive/issue_comments_279168.json:
```json
{
    "body": "Changed commit from **[95e34ee](https://github.com/sagemath/sagetrac-mirror/commit/95e34eecb315bcd0fded9c4f02a22b8c85e0ca1f)** to **[a58a734](https://github.com/sagemath/sagetrac-mirror/commit/a58a7348bc022f39bf68383b70400e8b7f5b268b)**",
    "created_at": "2016-01-23T19:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279168",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[95e34ee](https://github.com/sagemath/sagetrac-mirror/commit/95e34eecb315bcd0fded9c4f02a22b8c85e0ca1f)** to **[a58a734](https://github.com/sagemath/sagetrac-mirror/commit/a58a7348bc022f39bf68383b70400e8b7f5b268b)**



---

archive/issue_comments_279169.json:
```json
{
    "body": "<div id=\"comment:70\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34f921203675100401cd514d41e5605d0bfb9683\">34f9212</a></td><td><code>Check for Cayleyness of the complement if the graph is simple with density > 1/2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5b8bc7aab040920ba51c9a250b5600fccb4e629\">d5b8bc7</a></td><td><code>trac #19586: Merged with 7.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/278bb474d1d17f15f673e9be2e41cca144aacea0\">278bb47</a></td><td><code>trac #19586: Review</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a58a7348bc022f39bf68383b70400e8b7f5b268b\">a58a734</a></td><td><code>Merge branch 'public/19586' into is_cayley_graph-gap</code></td></tr></table>\n",
    "created_at": "2016-01-23T19:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279169",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:70"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34f921203675100401cd514d41e5605d0bfb9683">34f9212</a></td><td><code>Check for Cayleyness of the complement if the graph is simple with density > 1/2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5b8bc7aab040920ba51c9a250b5600fccb4e629">d5b8bc7</a></td><td><code>trac #19586: Merged with 7.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/278bb474d1d17f15f673e9be2e41cca144aacea0">278bb47</a></td><td><code>trac #19586: Review</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a58a7348bc022f39bf68383b70400e8b7f5b268b">a58a734</a></td><td><code>Merge branch 'public/19586' into is_cayley_graph-gap</code></td></tr></table>




---

archive/issue_comments_279170.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nHi!\n\n> > True, but the `\\` in line 20891 of `generic_graph.py` is actually outside any parentheses.\n\n> \n> Sigh... Right. You write extremely clean code, y'know?\n\nThanks :)\n\n> I re-read everything and added a couple of 'default values' for the arguments in the INPUT section, in a commit at public/19586. You can change the branch's name on this ticket if you agree with it.\n\nThank you - I've also added the optimization for dense simple graphs that I was talking about.\n\nJano\u0161",
    "created_at": "2016-01-23T19:10:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279170",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:71" align="right">comment:71</div>

Hi!

> > True, but the `\` in line 20891 of `generic_graph.py` is actually outside any parentheses.

> 
> Sigh... Right. You write extremely clean code, y'know?

Thanks :)

> I re-read everything and added a couple of 'default values' for the arguments in the INPUT section, in a commit at public/19586. You can change the branch's name on this ticket if you agree with it.

Thank you - I've also added the optimization for dense simple graphs that I was talking about.

Janoš



---

archive/issue_comments_279171.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nI probably don't understand something, but why is the existence of a regular subgroup sufficient for the graph to be Cayley? Indeed, one seem to need in addition that this subgroup is generated by the elements corresponding to the neighbours of a vertex.\n\nE.g. I can construct a cubic, arc-transitive, digraph on 16 vertices, with a regular subgroup being elementary abelian, i.e. in particular having 4 generators. The underlying graph has degree 6, so it is OK as a Cayley graph, but not OK as a Cayley digraph, as 3 generators (the out-degree of the digraph)  are not enough!\n  \n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34f921203675100401cd514d41e5605d0bfb9683\">34f9212</a></td><td><code>Check for Cayleyness of the complement if the graph is simple with density > 1/2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5b8bc7aab040920ba51c9a250b5600fccb4e629\">d5b8bc7</a></td><td><code>trac #19586: Merged with 7.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/278bb474d1d17f15f673e9be2e41cca144aacea0\">278bb47</a></td><td><code>trac #19586: Review</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a58a7348bc022f39bf68383b70400e8b7f5b268b\">a58a734</a></td><td><code>Merge branch 'public/19586' into is_cayley_graph-gap</code></td></tr></table>\n",
    "created_at": "2016-01-23T19:40:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279171",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:72" align="right">comment:72</div>

I probably don't understand something, but why is the existence of a regular subgroup sufficient for the graph to be Cayley? Indeed, one seem to need in addition that this subgroup is generated by the elements corresponding to the neighbours of a vertex.

E.g. I can construct a cubic, arc-transitive, digraph on 16 vertices, with a regular subgroup being elementary abelian, i.e. in particular having 4 generators. The underlying graph has degree 6, so it is OK as a Cayley graph, but not OK as a Cayley digraph, as 3 generators (the out-degree of the digraph)  are not enough!
  
---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34f921203675100401cd514d41e5605d0bfb9683">34f9212</a></td><td><code>Check for Cayleyness of the complement if the graph is simple with density > 1/2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5b8bc7aab040920ba51c9a250b5600fccb4e629">d5b8bc7</a></td><td><code>trac #19586: Merged with 7.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/278bb474d1d17f15f673e9be2e41cca144aacea0">278bb47</a></td><td><code>trac #19586: Review</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a58a7348bc022f39bf68383b70400e8b7f5b268b">a58a734</a></td><td><code>Merge branch 'public/19586' into is_cayley_graph-gap</code></td></tr></table>




---

archive/issue_events_277407.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-01-23T19:40:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277407"
}
```



---

archive/issue_events_277408.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-01-23T19:40:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277408"
}
```



---

archive/issue_events_277409.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-01-23T19:40:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277409"
}
```



---

archive/issue_events_277410.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-01-23T19:40:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277410"
}
```



---

archive/issue_comments_279172.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nHmmmmmmm `:-/`",
    "created_at": "2016-01-23T20:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279172",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:73" align="right">comment:73</div>

Hmmmmmmm `:-/`



---

archive/issue_comments_279173.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nIt's true that almost everybody seems to suppose that a cayley graph is connected.",
    "created_at": "2016-01-23T20:58:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279173",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:74" align="right">comment:74</div>

It's true that almost everybody seems to suppose that a cayley graph is connected.



---

archive/issue_comments_279174.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nShould this raise an exception, by the way? `:-/`\n\n```\nsage: groups.permutation.Dihedral(4).cayley_graph(generators=[(1,2,3,4)]).show()\n```\n\nNathann",
    "created_at": "2016-01-23T21:06:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279174",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:75" align="right">comment:75</div>

Should this raise an exception, by the way? `:-/`

```
sage: groups.permutation.Dihedral(4).cayley_graph(generators=[(1,2,3,4)]).show()
```

Nathann



---

archive/issue_comments_279175.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nReplying to [@nathanncohen](#comment:74):\n> It's true that almost everybody seems to suppose that a cayley graph is connected. \n\nI think I can construct a connected cubic arc-transitive digraph on 2<sup>10</sup> vertices, and thus a connected vertex-transitive graph of degree 6, that has a regular subgroup of automorphisms that is elementary abelian, i.e. needs 10 generators to be generated.  Thus this graph won't be a Cayley for this subgroup. But this code would happily say that the graph is Cayley...",
    "created_at": "2016-01-23T21:08:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279175",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:76" align="right">comment:76</div>

Replying to [@nathanncohen](#comment:74):
> It's true that almost everybody seems to suppose that a cayley graph is connected. 

I think I can construct a connected cubic arc-transitive digraph on 2<sup>10</sup> vertices, and thus a connected vertex-transitive graph of degree 6, that has a regular subgroup of automorphisms that is elementary abelian, i.e. needs 10 generators to be generated.  Thus this graph won't be a Cayley for this subgroup. But this code would happily say that the graph is Cayley...



---

archive/issue_comments_279176.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nI don't get it: if what you say were true, it would mean that the action of that regular subgroup upon the edges incident to a fixed vertex would yield a disconnected 6-regular graph.\n\nOn the other hand, this 6-regular disconnected graph is a subgraph of the connected 6-regular graph you started from, so ... no?\n\nNathann",
    "created_at": "2016-01-23T21:32:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279176",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:77" align="right">comment:77</div>

I don't get it: if what you say were true, it would mean that the action of that regular subgroup upon the edges incident to a fixed vertex would yield a disconnected 6-regular graph.

On the other hand, this 6-regular disconnected graph is a subgraph of the connected 6-regular graph you started from, so ... no?

Nathann



---

archive/issue_comments_279177.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nHi!\n\nLet's see... if the automorphism group has a regular subgroup `G`, then we can pick any vertex `w` and construct a bijective mapping that maps a group element `g` to the vertex `g^w`. Now, suppose we have an arc `uv` such that group elements `g` and `h` map to `u` and `v`, respectively. Then we may label the arc by `e = g^-1 h`, and any automorphism `a` from `G` will map `uv = g^w h^w` to `(ag)^w (ah)^w`, i.e. an arc with the same label. Since such a graph is necessarily vertex-transitive, it follows that the (multi)set of labels on arcs starting in a vertex is independent of the choice of said vertex. The Cayley graph of `G` with said (multi)set as its generating set is then isomorphic to our graph.\n\nDo you find any flaw in the above argument? Also, can you provide the graphs which you claim to be counterexamples?\n\nJano\u0161",
    "created_at": "2016-01-23T21:40:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279177",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:78" align="right">comment:78</div>

Hi!

Let's see... if the automorphism group has a regular subgroup `G`, then we can pick any vertex `w` and construct a bijective mapping that maps a group element `g` to the vertex `g^w`. Now, suppose we have an arc `uv` such that group elements `g` and `h` map to `u` and `v`, respectively. Then we may label the arc by `e = g^-1 h`, and any automorphism `a` from `G` will map `uv = g^w h^w` to `(ag)^w (ah)^w`, i.e. an arc with the same label. Since such a graph is necessarily vertex-transitive, it follows that the (multi)set of labels on arcs starting in a vertex is independent of the choice of said vertex. The Cayley graph of `G` with said (multi)set as its generating set is then isomorphic to our graph.

Do you find any flaw in the above argument? Also, can you provide the graphs which you claim to be counterexamples?

Janoš



---

archive/issue_comments_279178.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nReplying to [@nathanncohen](#comment:77):\n> I don't get it: if what you say were true, it would mean that the action of that regular subgroup upon the edges incident to a fixed vertex would yield a disconnected 6-regular graph.\n\nno, it would not, it would give the whole graph. But the subgroup will not be generated by the \nneighbours of the identity in the graph. Indeed, the minimal degree of a [Cayley graph](https://en.wikipedia.org/wiki/Cayley_graph) of this group is 10 (as one needs at least 10 generators). Thus this graph is not a Cayley graph of this group.",
    "created_at": "2016-01-23T21:44:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279178",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:79" align="right">comment:79</div>

Replying to [@nathanncohen](#comment:77):
> I don't get it: if what you say were true, it would mean that the action of that regular subgroup upon the edges incident to a fixed vertex would yield a disconnected 6-regular graph.

no, it would not, it would give the whole graph. But the subgroup will not be generated by the 
neighbours of the identity in the graph. Indeed, the minimal degree of a [Cayley graph](https://en.wikipedia.org/wiki/Cayley_graph) of this group is 10 (as one needs at least 10 generators). Thus this graph is not a Cayley graph of this group.



---

archive/issue_comments_279179.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\n> no, it would not, it would give the whole graph.\n\nArg. We miss each other: I use a different observation: because you tell me that your group cannot be generated by <10 elements, then surely when your compute the orbit of those edges there cannot be a *path* from every vertex to every other. Because otherwise, well, your 6 vertices would be sufficient to generate the subgroup.\n\nSo it is both disconnected (by this observation) and connected (by yours) and so it is impossible?...\n\nNathann",
    "created_at": "2016-01-23T21:47:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279179",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:80" align="right">comment:80</div>

> no, it would not, it would give the whole graph.

Arg. We miss each other: I use a different observation: because you tell me that your group cannot be generated by <10 elements, then surely when your compute the orbit of those edges there cannot be a *path* from every vertex to every other. Because otherwise, well, your 6 vertices would be sufficient to generate the subgroup.

So it is both disconnected (by this observation) and connected (by yours) and so it is impossible?...

Nathann



---

archive/issue_comments_279180.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\n> Do you find any flaw in the above argument? Also, can you provide the graphs which you claim to be counterexamples?\n\nI agree with you everywhere short of one thing: if the graph you started with is not connected, then the set you are talking about is not a *generating* set, e.g. : take the disjoint union of two cliques of size n, and as a regular subgroup take two disjoint cycles of order n plus a reflections that exchanges both.\n\nNathann",
    "created_at": "2016-01-23T21:51:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279180",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:81" align="right">comment:81</div>

> Do you find any flaw in the above argument? Also, can you provide the graphs which you claim to be counterexamples?

I agree with you everywhere short of one thing: if the graph you started with is not connected, then the set you are talking about is not a *generating* set, e.g. : take the disjoint union of two cliques of size n, and as a regular subgroup take two disjoint cycles of order n plus a reflections that exchanges both.

Nathann



---

archive/issue_comments_279181.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nReplying to [@nathanncohen](#comment:81):\n> > Do you find any flaw in the above argument? Also, can you provide the graphs which you claim to be counterexamples?\n\n> \n> I agree with you everywhere short of one thing: if the graph you started with is not connected, then the set you are talking about is not a *generating* set, e.g. : take the disjoint union of two cliques of size n, and as a regular subgroup take two disjoint cycles of order n plus a reflections that exchanges both.\n\nIn this case the set does not generate the group, but it still is a generating set in the sense that it generates the graph. In any case, disconnected graphs are given a special treatment, checking Cayleyness only for a connected component.\n\nNow, whether we allow Cayley graphs to be disconnected is just a matter of definition. I know that usually they are assumed to be connected, but in my opinion we should allow disconnected graphs to be called Cayley (it even allows this method to make optimizations by looking at complements). So the example you gave above is fine without raising an exception IMO.\n\nJano\u0161",
    "created_at": "2016-01-23T22:08:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279181",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:82" align="right">comment:82</div>

Replying to [@nathanncohen](#comment:81):
> > Do you find any flaw in the above argument? Also, can you provide the graphs which you claim to be counterexamples?

> 
> I agree with you everywhere short of one thing: if the graph you started with is not connected, then the set you are talking about is not a *generating* set, e.g. : take the disjoint union of two cliques of size n, and as a regular subgroup take two disjoint cycles of order n plus a reflections that exchanges both.

In this case the set does not generate the group, but it still is a generating set in the sense that it generates the graph. In any case, disconnected graphs are given a special treatment, checking Cayleyness only for a connected component.

Now, whether we allow Cayley graphs to be disconnected is just a matter of definition. I know that usually they are assumed to be connected, but in my opinion we should allow disconnected graphs to be called Cayley (it even allows this method to make optimizations by looking at complements). So the example you gave above is fine without raising an exception IMO.

Janoš



---

archive/issue_comments_279182.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nReplying to [@jaanos](#comment:78):\n\n> Let's see... if the automorphism group has a regular subgroup `G`, then we can pick any vertex `w` and construct a bijective mapping that maps a group element `g` to the vertex `g^w`. Now, suppose we have an arc `uv` such that group elements `g` and `h` map to `u` and `v`, respectively. Then we may label the arc by `e = g^-1 h`, and any automorphism `a` from `G` will map `uv = g^w h^w` to `(ag)^w (ah)^w`, i.e. an arc with the same label. Since such a graph is necessarily vertex-transitive, it follows that the (multi)set of labels on arcs starting in a vertex is independent of the choice of said vertex. The Cayley graph of `G` with said (multi)set as its generating set is then isomorphic to our graph.\n\n> Do you find any flaw in the above argument?\n\nit is certainly true that you can assume w=1. So you have the neighbours of 1 in the graph (with its vertices labelled by the elements of G) say g<sub>1</sub>,...,g<sub>k</sub>. Now you need an argument that g<sub>1</sub>,...,g<sub>k</sub> generate G. I don't see it in what you wrote above.\n \n> Also, can you provide the graphs which you claim to be counterexamples?\n\nI'll try. (Or show me that they don't exist...)",
    "created_at": "2016-01-23T22:46:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279182",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:83" align="right">comment:83</div>

Replying to [@jaanos](#comment:78):

> Let's see... if the automorphism group has a regular subgroup `G`, then we can pick any vertex `w` and construct a bijective mapping that maps a group element `g` to the vertex `g^w`. Now, suppose we have an arc `uv` such that group elements `g` and `h` map to `u` and `v`, respectively. Then we may label the arc by `e = g^-1 h`, and any automorphism `a` from `G` will map `uv = g^w h^w` to `(ag)^w (ah)^w`, i.e. an arc with the same label. Since such a graph is necessarily vertex-transitive, it follows that the (multi)set of labels on arcs starting in a vertex is independent of the choice of said vertex. The Cayley graph of `G` with said (multi)set as its generating set is then isomorphic to our graph.

> Do you find any flaw in the above argument?

it is certainly true that you can assume w=1. So you have the neighbours of 1 in the graph (with its vertices labelled by the elements of G) say g<sub>1</sub>,...,g<sub>k</sub>. Now you need an argument that g<sub>1</sub>,...,g<sub>k</sub> generate G. I don't see it in what you wrote above.
 
> Also, can you provide the graphs which you claim to be counterexamples?

I'll try. (Or show me that they don't exist...)



---

archive/issue_comments_279183.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nReplying to [@dimpase](#comment:83):\n> it is certainly true that you can assume w=1. So you have the neighbours of 1 in the graph (with its vertices labelled by the elements of G) say g<sub>1</sub>,...,g<sub>k</sub>. Now you need an argument that g<sub>1</sub>,...,g<sub>k</sub> generate G. I don't see it in what you wrote above.\n\nIf the graph is connected, they clearly do (if the graph is directed, vertex-transitivity then implies that it is also strongly connected). But they don't need to generate the group in the general case - it suffices that we get an isomorphic graph from the Cayley construction.\n\nJano\u0161",
    "created_at": "2016-01-23T23:12:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279183",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:84" align="right">comment:84</div>

Replying to [@dimpase](#comment:83):
> it is certainly true that you can assume w=1. So you have the neighbours of 1 in the graph (with its vertices labelled by the elements of G) say g<sub>1</sub>,...,g<sub>k</sub>. Now you need an argument that g<sub>1</sub>,...,g<sub>k</sub> generate G. I don't see it in what you wrote above.

If the graph is connected, they clearly do (if the graph is directed, vertex-transitivity then implies that it is also strongly connected). But they don't need to generate the group in the general case - it suffices that we get an isomorphic graph from the Cayley construction.

Janoš



---

archive/issue_events_277411.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-01-23T23:29:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277411"
}
```



---

archive/issue_events_277412.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-01-23T23:29:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277412"
}
```



---

archive/issue_comments_279184.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nReplying to [@jaanos](#comment:84):\n> Replying to [@dimpase](#comment:83):\n> > it is certainly true that you can assume w=1. So you have the neighbours of 1 in the graph (with its vertices labelled by the elements of G) say g<sub>1</sub>,...,g<sub>k</sub>. Now you need an argument that g<sub>1</sub>,...,g<sub>k</sub> generate G. I don't see it in what you wrote above.\n\n> \n> If the graph is connected, they clearly do (if the graph is directed, vertex-transitivity then implies that it is also strongly connected).  \n\nAh, right. Sorry, I'm not very bright tonight. It's all good.",
    "created_at": "2016-01-23T23:29:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279184",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:85" align="right">comment:85</div>

Replying to [@jaanos](#comment:84):
> Replying to [@dimpase](#comment:83):
> > it is certainly true that you can assume w=1. So you have the neighbours of 1 in the graph (with its vertices labelled by the elements of G) say g<sub>1</sub>,...,g<sub>k</sub>. Now you need an argument that g<sub>1</sub>,...,g<sub>k</sub> generate G. I don't see it in what you wrote above.

> 
> If the graph is connected, they clearly do (if the graph is directed, vertex-transitivity then implies that it is also strongly connected).  

Ah, right. Sorry, I'm not very bright tonight. It's all good.



---

archive/issue_events_277413.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2016-01-24T08:37:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277413"
}
```



---

archive/issue_events_277414.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2016-01-24T08:37:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277414"
}
```



---

archive/issue_comments_279185.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\n> Now, whether we allow Cayley graphs to be disconnected is just a matter of definition.\n\nHmmm... I'm sorry to switch this ticket back but I do not think that we should allow that. From what I know (which is very few) I also believe that your definition is better, but when there is a widespread definition of something then Sage *must* follow it. Corner-cases are okay when the definitions does not tell, but.. Well, what if people start counting those graphs, or filter only cayley graphs, and stuff?\n\nI believe we should stick to the seemingly widespread definition and only allow connected ones.\n\nIt is particularly unpleasant because of the line from [comment:75]. Right now the `.cayley_graph` command outputs disconnected graphs, thus somebody will complain eventually that it does not always return cayley graphs `>_<`\n\nNathann",
    "created_at": "2016-01-24T08:37:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279185",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:86" align="right">comment:86</div>

> Now, whether we allow Cayley graphs to be disconnected is just a matter of definition.

Hmmm... I'm sorry to switch this ticket back but I do not think that we should allow that. From what I know (which is very few) I also believe that your definition is better, but when there is a widespread definition of something then Sage *must* follow it. Corner-cases are okay when the definitions does not tell, but.. Well, what if people start counting those graphs, or filter only cayley graphs, and stuff?

I believe we should stick to the seemingly widespread definition and only allow connected ones.

It is particularly unpleasant because of the line from [comment:75]. Right now the `.cayley_graph` command outputs disconnected graphs, thus somebody will complain eventually that it does not always return cayley graphs `>_<`

Nathann



---

archive/issue_comments_279186.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nHi!\n\nReplying to [@nathanncohen](#comment:86):\n> I believe we should stick to the seemingly widespread definition and only allow connected ones.\n\nI see... but an easy solution to this would be to add an `allow_disconnected` parameter. Then the recursive call on the complement would set this to `True` - the original setting only matters for the initial graph, anyway.\n\nWhat about non-simple graphs? I don't think the definitions say much about those, so we're probably good? Although the Wikipedia article linked above does say that a Cayley graph does not contain loops...\n\nJano\u0161",
    "created_at": "2016-01-24T11:24:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279186",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:87" align="right">comment:87</div>

Hi!

Replying to [@nathanncohen](#comment:86):
> I believe we should stick to the seemingly widespread definition and only allow connected ones.

I see... but an easy solution to this would be to add an `allow_disconnected` parameter. Then the recursive call on the complement would set this to `True` - the original setting only matters for the initial graph, anyway.

What about non-simple graphs? I don't think the definitions say much about those, so we're probably good? Although the Wikipedia article linked above does say that a Cayley graph does not contain loops...

Janoš



---

archive/issue_comments_279187.json:
```json
{
    "body": "Changed branch from **[u/jaanos/add_is_cayley_graph](https://github.com/sagemath/sagetrac-mirror/tree/u/jaanos/add_is_cayley_graph)** to **[a58a734](https://github.com/sagemath/sagetrac-mirror/commit/a58a7348bc022f39bf68383b70400e8b7f5b268b)**",
    "created_at": "2016-01-24T12:52:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279187",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jaanos/add_is_cayley_graph](https://github.com/sagemath/sagetrac-mirror/tree/u/jaanos/add_is_cayley_graph)** to **[a58a734](https://github.com/sagemath/sagetrac-mirror/commit/a58a7348bc022f39bf68383b70400e8b7f5b268b)**



---

archive/issue_events_277415.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-24T12:52:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277415"
}
```



---

archive/issue_events_277416.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-24T12:52:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277416"
}
```



---

archive/issue_comments_279188.json:
```json
{
    "body": "Changed commit from **[a58a734](https://github.com/sagemath/sagetrac-mirror/commit/a58a7348bc022f39bf68383b70400e8b7f5b268b)** to none",
    "created_at": "2016-01-24T12:55:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279188",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[a58a734](https://github.com/sagemath/sagetrac-mirror/commit/a58a7348bc022f39bf68383b70400e8b7f5b268b)** to none



---

archive/issue_events_277417.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-24T12:55:05Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277417"
}
```



---

archive/issue_events_277418.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-24T12:55:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277418"
}
```



---

archive/issue_comments_279189.json:
```json
{
    "body": "Changed branch from **[a58a734](https://github.com/sagemath/sagetrac-mirror/commit/a58a7348bc022f39bf68383b70400e8b7f5b268b)** to **[u/jaanos/a58a7348bc022f39bf68383b70400e8b7f5b268b](https://github.com/sagemath/sagetrac-mirror/tree/u/jaanos/a58a7348bc022f39bf68383b70400e8b7f5b268b)**",
    "created_at": "2016-01-24T14:37:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279189",
    "user": "https://github.com/jaanos"
}
```

Changed branch from **[a58a734](https://github.com/sagemath/sagetrac-mirror/commit/a58a7348bc022f39bf68383b70400e8b7f5b268b)** to **[u/jaanos/a58a7348bc022f39bf68383b70400e8b7f5b268b](https://github.com/sagemath/sagetrac-mirror/tree/u/jaanos/a58a7348bc022f39bf68383b70400e8b7f5b268b)**



---

archive/issue_comments_279190.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nHi all!\n\nI've added an `allow_disconnected` parameter. I hope it's OK this way.\n\nBy the way, is there any reason why the milestone has been changed to sage-7.2 when 7.1 has not been released yet?\n\nJano\u0161\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95dfa64264bb0e6ec9122e5ce458a5000d48bc3d\">95dfa64</a></td><td><code>Add a doctest and some comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4aaf3014fee5bb08d861636908d6733047d4a869\">4aaf301</a></td><td><code>Rename has_transitive_subgroup to transitive_subgroup and add helper function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/382c0f2daa019b8ba1c96462dbcdbab9ad2ee6a2\">382c0f2</a></td><td><code>Rename transitive_subgroup to regular_subgroup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8685628455d2364bbb1896bf28e18c637bfab50c\">8685628</a></td><td><code>Replace certificate with return_group, mapping and generators</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95e34eecb315bcd0fded9c4f02a22b8c85e0ca1f\">95e34ee</a></td><td><code>Apply Nathann's suggestions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34f921203675100401cd514d41e5605d0bfb9683\">34f9212</a></td><td><code>Check for Cayleyness of the complement if the graph is simple with density > 1/2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5b8bc7aab040920ba51c9a250b5600fccb4e629\">d5b8bc7</a></td><td><code>trac #19586: Merged with 7.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/278bb474d1d17f15f673e9be2e41cca144aacea0\">278bb47</a></td><td><code>trac #19586: Review</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a58a7348bc022f39bf68383b70400e8b7f5b268b\">a58a734</a></td><td><code>Merge branch 'public/19586' into is_cayley_graph-gap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6680e75cd77ffc40e0101b067d57074077f7aad\">c6680e7</a></td><td><code>Do not consider disconnected graphs for Cayleyness unless explicitly requested</code></td></tr></table>\n",
    "created_at": "2016-01-24T14:41:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279190",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:91" align="right">comment:91</div>

Hi all!

I've added an `allow_disconnected` parameter. I hope it's OK this way.

By the way, is there any reason why the milestone has been changed to sage-7.2 when 7.1 has not been released yet?

Janoš

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95dfa64264bb0e6ec9122e5ce458a5000d48bc3d">95dfa64</a></td><td><code>Add a doctest and some comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4aaf3014fee5bb08d861636908d6733047d4a869">4aaf301</a></td><td><code>Rename has_transitive_subgroup to transitive_subgroup and add helper function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/382c0f2daa019b8ba1c96462dbcdbab9ad2ee6a2">382c0f2</a></td><td><code>Rename transitive_subgroup to regular_subgroup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8685628455d2364bbb1896bf28e18c637bfab50c">8685628</a></td><td><code>Replace certificate with return_group, mapping and generators</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95e34eecb315bcd0fded9c4f02a22b8c85e0ca1f">95e34ee</a></td><td><code>Apply Nathann's suggestions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34f921203675100401cd514d41e5605d0bfb9683">34f9212</a></td><td><code>Check for Cayleyness of the complement if the graph is simple with density > 1/2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5b8bc7aab040920ba51c9a250b5600fccb4e629">d5b8bc7</a></td><td><code>trac #19586: Merged with 7.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/278bb474d1d17f15f673e9be2e41cca144aacea0">278bb47</a></td><td><code>trac #19586: Review</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a58a7348bc022f39bf68383b70400e8b7f5b268b">a58a734</a></td><td><code>Merge branch 'public/19586' into is_cayley_graph-gap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6680e75cd77ffc40e0101b067d57074077f7aad">c6680e7</a></td><td><code>Do not consider disconnected graphs for Cayleyness unless explicitly requested</code></td></tr></table>




---

archive/issue_comments_279191.json:
```json
{
    "body": "Commit: **[c6680e7](https://github.com/sagemath/sagetrac-mirror/commit/c6680e75cd77ffc40e0101b067d57074077f7aad)**",
    "created_at": "2016-01-24T14:41:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279191",
    "user": "https://github.com/jaanos"
}
```

Commit: **[c6680e7](https://github.com/sagemath/sagetrac-mirror/commit/c6680e75cd77ffc40e0101b067d57074077f7aad)**



---

archive/issue_events_277419.json:
```json
{
    "actor": "https://github.com/jaanos",
    "created_at": "2016-01-24T14:49:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277419"
}
```



---

archive/issue_events_277420.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-01-24T16:25:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277420"
}
```



---

archive/issue_events_277421.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-01-24T16:25:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277421"
}
```



---

archive/issue_comments_279192.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\n> I've added an `allow_disconnected` parameter. I hope it's OK this way.\n\nIt's perfect this way! Thanks!\n\n> By the way, is there any reason why the milestone has been changed to sage-7.2 when 7.1 has not been released yet?\n\nI don't think so. I set it back to what it was.\n\nAbout loops, I wonder however. Is it still correct to look for a *regular* subgroup if there are loops?\n\nNathann",
    "created_at": "2016-01-24T16:26:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279192",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:94" align="right">comment:94</div>

> I've added an `allow_disconnected` parameter. I hope it's OK this way.

It's perfect this way! Thanks!

> By the way, is there any reason why the milestone has been changed to sage-7.2 when 7.1 has not been released yet?

I don't think so. I set it back to what it was.

About loops, I wonder however. Is it still correct to look for a *regular* subgroup if there are loops?

Nathann



---

archive/issue_comments_279193.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nP.S.: I used this code and the OEIS to count how many vertex-transitive graphs are not cayley graphs. The first counter-examples have cardinality 10, and there are exactly 2. Which is what this code found.",
    "created_at": "2016-01-24T16:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279193",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:95" align="right">comment:95</div>

P.S.: I used this code and the OEIS to count how many vertex-transitive graphs are not cayley graphs. The first counter-examples have cardinality 10, and there are exactly 2. Which is what this code found.



---

archive/issue_comments_279194.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nHi!\n\n> About loops, I wonder however. Is it still correct to look for a *regular* subgroup if there are loops?\n\nWhy not? If there are any loops, there must be a loop on every vertex (otherwise the graph is not vertex-transitive and there is no regular subgroup). But then loops don't matter any more.\n\nJano\u0161",
    "created_at": "2016-01-24T16:36:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279194",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:96" align="right">comment:96</div>

Hi!

> About loops, I wonder however. Is it still correct to look for a *regular* subgroup if there are loops?

Why not? If there are any loops, there must be a loop on every vertex (otherwise the graph is not vertex-transitive and there is no regular subgroup). But then loops don't matter any more.

Janoš



---

archive/issue_comments_279195.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nWould it be incorrect to imagine a graph in which the loops is not always due to the same generator? If the group is not regular.\n\nNathann",
    "created_at": "2016-01-24T16:41:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279195",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:97" align="right">comment:97</div>

Would it be incorrect to imagine a graph in which the loops is not always due to the same generator? If the group is not regular.

Nathann



---

archive/issue_comments_279196.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nAs vertices correspond to group elements, loops can only correspond to identity.\n\nJano\u0161",
    "created_at": "2016-01-24T16:46:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279196",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:98" align="right">comment:98</div>

As vertices correspond to group elements, loops can only correspond to identity.

Janoš



---

archive/issue_comments_279197.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nSigh... Reading this group theory group will do me good.\n\nThank you very much for this branch, no other question, good to go `:-P`\n\nNathann",
    "created_at": "2016-01-24T16:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279197",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:99" align="right">comment:99</div>

Sigh... Reading this group theory group will do me good.

Thank you very much for this branch, no other question, good to go `:-P`

Nathann



---

archive/issue_events_277422.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2016-01-24T16:49:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277422"
}
```



---

archive/issue_events_277423.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2016-01-24T16:49:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277423"
}
```



---

archive/issue_comments_279198.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nI set the milestone since you apparently need more time",
    "created_at": "2016-01-24T17:08:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279198",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:0" align="right">comment:0</div>

I set the milestone since you apparently need more time



---

archive/issue_events_277424.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-24T17:08:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277424"
}
```



---

archive/issue_events_277425.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-24T17:08:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277425"
}
```



---

archive/issue_events_277426.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2016-01-24T17:11:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "milestone_number": null,
    "milestone_title": "sage-7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277426"
}
```



---

archive/issue_events_277427.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2016-01-24T17:11:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277427"
}
```



---

archive/issue_comments_279199.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI'm sorry Volker... There was something I noticed just after changing the status....\n\nNathann",
    "created_at": "2016-01-24T17:11:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279199",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1" align="right">comment:1</div>

I'm sorry Volker... There was something I noticed just after changing the status....

Nathann



---

archive/issue_events_277428.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-28T17:14:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277428"
}
```



---

archive/issue_events_277429.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1048b355d17238f6044e638ea08e140c2a1feb2e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-01-28T17:14:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19586#event-277429"
}
```



---

archive/issue_comments_279200.json:
```json
{
    "body": "Changed branch from **[u/jaanos/a58a7348bc022f39bf68383b70400e8b7f5b268b](https://github.com/sagemath/sagetrac-mirror/tree/u/jaanos/a58a7348bc022f39bf68383b70400e8b7f5b268b)** to **[c6680e7](https://github.com/sagemath/sagetrac-mirror/commit/c6680e75cd77ffc40e0101b067d57074077f7aad)**",
    "created_at": "2016-01-28T17:14:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279200",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jaanos/a58a7348bc022f39bf68383b70400e8b7f5b268b](https://github.com/sagemath/sagetrac-mirror/tree/u/jaanos/a58a7348bc022f39bf68383b70400e8b7f5b268b)** to **[c6680e7](https://github.com/sagemath/sagetrac-mirror/commit/c6680e75cd77ffc40e0101b067d57074077f7aad)**



---

archive/issue_comments_279201.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThanks everybody!\n\nJano\u0161",
    "created_at": "2016-01-28T18:13:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279201",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:3" align="right">comment:3</div>

Thanks everybody!

Janoš



---

archive/issue_comments_279202.json:
```json
{
    "body": "Changed commit from **[c6680e7](https://github.com/sagemath/sagetrac-mirror/commit/c6680e75cd77ffc40e0101b067d57074077f7aad)** to none",
    "created_at": "2016-01-28T18:13:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279202",
    "user": "https://github.com/jaanos"
}
```

Changed commit from **[c6680e7](https://github.com/sagemath/sagetrac-mirror/commit/c6680e75cd77ffc40e0101b067d57074077f7aad)** to none



---

archive/issue_comments_279203.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAhahah. You did all the work, man!",
    "created_at": "2016-01-28T18:13:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279203",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:4" align="right">comment:4</div>

Ahahah. You did all the work, man!



---

archive/issue_comments_279204.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nVery nice feature ! If `gap_packages` and `database_gap` are required (in the doc), how do the doctest pass without any `# optional` flag ?",
    "created_at": "2016-01-29T17:27:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279204",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:5" align="right">comment:5</div>

Very nice feature ! If `gap_packages` and `database_gap` are required (in the doc), how do the doctest pass without any `# optional` flag ?



---

archive/issue_comments_279205.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nProbably because of the 'all' that appears in this piece of doc.",
    "created_at": "2016-01-29T18:25:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279205",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:6" align="right">comment:6</div>

Probably because of the 'all' that appears in this piece of doc.



---

archive/issue_comments_279206.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIndeed, GAP's `ConjugacyClassesSubgroups` works for some small groups (which include all groups in question in the doc) without any additional packages. However, `TomLib` and `AtlasRep` are required for a complete coverage.\n\nJano\u0161",
    "created_at": "2016-01-30T03:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279206",
    "user": "https://github.com/jaanos"
}
```

<div id="comment:7" align="right">comment:7</div>

Indeed, GAP's `ConjugacyClassesSubgroups` works for some small groups (which include all groups in question in the doc) without any additional packages. However, `TomLib` and `AtlasRep` are required for a complete coverage.

Janoš



---

archive/issue_comments_279207.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\nReplying to [@jaanos](#comment:107):\n> Indeed, GAP's `ConjugacyClassesSubgroups` works for some small groups (which include all groups in question in the doc) without any additional packages. However, `TomLib` and `AtlasRep` are required for a complete coverage.\n\nI see. So, perhaps could some of the extra cases be tested as well since they use another (less tested) route.",
    "created_at": "2016-01-30T10:01:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279207",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:108" align="right">comment:108</div>

Replying to [@jaanos](#comment:107):
> Indeed, GAP's `ConjugacyClassesSubgroups` works for some small groups (which include all groups in question in the doc) without any additional packages. However, `TomLib` and `AtlasRep` are required for a complete coverage.

I see. So, perhaps could some of the extra cases be tested as well since they use another (less tested) route.



---

archive/issue_comments_279208.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\n> I see. So, perhaps could some of the extra cases be tested as well since they use another (less tested) route.\n\nThat would be testing GAP more than testing Sage. But well, no reason to stop you from doing so either I guess.",
    "created_at": "2016-01-30T10:03:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19586",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19586#issuecomment-279208",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:109" align="right">comment:109</div>

> I see. So, perhaps could some of the extra cases be tested as well since they use another (less tested) route.

That would be testing GAP more than testing Sage. But well, no reason to stop you from doing so either I guess.
