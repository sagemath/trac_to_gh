# Issue 19988: Update to matplotlib 1.5.1

archive/issues_019751.json:
```json
{
    "body": "Trivial update; New tarball created with the spkg-src script, already on mirrors.\n\nCC:  aginiewicz @kiwifb @etn40ff\n\nBranch/Commit: 2693234fa0bb9d2bf408795a9504ecf28fc0c9b6\n\nReviewer: Dima Pasechnik\n\nAuthor: Volker Braun\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19988\n\n",
    "closed_at": "2016-02-21T09:52:55Z",
    "created_at": "2016-01-30T20:52:54Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "Update to matplotlib 1.5.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19988",
    "user": "https://github.com/vbraun"
}
```
Trivial update; New tarball created with the spkg-src script, already on mirrors.

CC:  aginiewicz @kiwifb @etn40ff

Branch/Commit: 2693234fa0bb9d2bf408795a9504ecf28fc0c9b6

Reviewer: Dima Pasechnik

Author: Volker Braun

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19988





---

archive/issue_comments_288889.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2016-01-30T20:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288889",
    "user": "https://github.com/vbraun"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_288890.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to packages: standard.",
    "created_at": "2016-01-30T20:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288890",
    "user": "https://github.com/vbraun"
}
```

Changing component from PLEASE CHANGE to packages: standard.



---

archive/issue_comments_288891.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+Trivial update\n \n+```\n+sage --package update matplotlib 1.5.1 --url=https://github.com/matplotlib/matplotlib/archive/v1.5.1.tar.gz\n+```\n \n Type: PLEASE CHANGE\n \n```\n",
    "created_at": "2016-01-30T20:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288891",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,8 @@
+Trivial update
 
+```
+sage --package update matplotlib 1.5.1 --url=https://github.com/matplotlib/matplotlib/archive/v1.5.1.tar.gz
+```
 
 Type: PLEASE CHANGE
 
```




---

archive/issue_comments_288892.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+Trivial update; New tarball created with the spkg-src script, already on mirrors.\n \n Type: PLEASE CHANGE\n \n```\n",
    "created_at": "2016-01-30T20:59:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288892",
    "user": "https://github.com/vbraun"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+Trivial update; New tarball created with the spkg-src script, already on mirrors.
 
 Type: PLEASE CHANGE
 
```




---

archive/issue_comments_288893.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2016-01-30T20:59:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288893",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_288894.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-01-30T21:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288894",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_288895.json:
```json
{
    "body": "<a id='comment:5'></a>New commits:",
    "created_at": "2016-01-30T21:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288895",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>New commits:



---

archive/issue_comments_288896.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-01-30T21:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288896",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_288897.json:
```json
{
    "body": "<a id='comment:6'></a>\n```\nsage -t --warn-long 44.7 src/sage/plot/graphics.py  # 2 doctests failed\nsage -t --warn-long 44.7 src/sage/plot/contour_plot.py  # 1 doctest failed\n```\nsomething to do with `Contour levels must be increasing`, e.g.\n\n```\nsage -t --warn-long 44.7 src/sage/plot/contour_plot.py\n**********************************************************************\nFile \"src/sage/plot/contour_plot.py\", line 638, in sage.plot.contour_plot.implicit_plot\nFailed example:\n    implicit_plot(x^2+y^2-2, (x,-3,3), (y,-3,3))\nExpected:\n    Graphics object consisting of 1 graphics primitive\nGot:\n    doctest:590: RichReprWarning: Exception in _rich_repr_ while displaying object: Contour levels must be increasing\n    Graphics object consisting of 1 graphics primitive\n```",
    "created_at": "2016-01-30T21:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288897",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>
```
sage -t --warn-long 44.7 src/sage/plot/graphics.py  # 2 doctests failed
sage -t --warn-long 44.7 src/sage/plot/contour_plot.py  # 1 doctest failed
```
something to do with `Contour levels must be increasing`, e.g.

```
sage -t --warn-long 44.7 src/sage/plot/contour_plot.py
**********************************************************************
File "src/sage/plot/contour_plot.py", line 638, in sage.plot.contour_plot.implicit_plot
Failed example:
    implicit_plot(x^2+y^2-2, (x,-3,3), (y,-3,3))
Expected:
    Graphics object consisting of 1 graphics primitive
Got:
    doctest:590: RichReprWarning: Exception in _rich_repr_ while displaying object: Contour levels must be increasing
    Graphics object consisting of 1 graphics primitive
```



---

archive/issue_comments_288898.json:
```json
{
    "body": "<a id='comment:7'></a>google says \"This error was added in matplotlib 1.5.1 because of a bug in all versions of contourf prior to 1.5.0.\"",
    "created_at": "2016-01-30T21:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288898",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>google says "This error was added in matplotlib 1.5.1 because of a bug in all versions of contourf prior to 1.5.0."



---

archive/issue_comments_288899.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-01-30T22:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288899",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_288900.json:
```json
{
    "body": "<a id='comment:9'></a>This was already on sage-devel - https://groups.google.com/forum/#!topic/sage-devel/eeuC8CYUsnM - I thought it was in 1.5.0 as well, now I noticed Fran\u00e7ois explicitly mentioned 1.5.1.\n\nAnyway, I tested that None does not work, but changing default option of contours=[0,0] in implicit_plot to contours=[-1e307,0,1e307] (like in region_plot) seems to work, but I'm not sure if this does not break something else.",
    "created_at": "2016-01-30T22:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288900",
    "user": "https://trac.sagemath.org/admin/accounts/users/aginiewicz"
}
```

<a id='comment:9'></a>This was already on sage-devel - https://groups.google.com/forum/#!topic/sage-devel/eeuC8CYUsnM - I thought it was in 1.5.0 as well, now I noticed Fran√ßois explicitly mentioned 1.5.1.

Anyway, I tested that None does not work, but changing default option of contours=[0,0] in implicit_plot to contours=[-1e307,0,1e307] (like in region_plot) seems to work, but I'm not sure if this does not break something else.



---

archive/issue_comments_288901.json:
```json
{
    "body": "<a id='comment:12'></a>RTFM :-) The most meaningful output seems to be with `contours=0`. The docs of `contour_plot` say\n\n```\n  * \"contours\" -- integer or list of numbers (default: \"None\"): If\n     a list of numbers is given, then this specifies the contour\n     levels to use.  If an integer is given, then this many contour\n     lines are used, but the exact levels are determined\n     automatically. If \"None\" is passed (or the option is not given),\n     then the number of contour lines is determined automatically, and\n     is usually about 5.\n```\nand this explains why `None` gives you nonsense, usually. `contours=1` give 2 contours, not 1, apparently there is a shift by 1 somewhere...",
    "created_at": "2016-01-31T08:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288901",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'></a>RTFM :-) The most meaningful output seems to be with `contours=0`. The docs of `contour_plot` say

```
  * "contours" -- integer or list of numbers (default: "None"): If
     a list of numbers is given, then this specifies the contour
     levels to use.  If an integer is given, then this many contour
     lines are used, but the exact levels are determined
     automatically. If "None" is passed (or the option is not given),
     then the number of contour lines is determined automatically, and
     is usually about 5.
```
and this explains why `None` gives you nonsense, usually. `contours=1` give 2 contours, not 1, apparently there is a shift by 1 somewhere...



---

archive/issue_comments_288902.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-02-20T13:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288902",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_288903.json:
```json
{
    "body": "<a id='comment:15'></a>An implicit plot is just a contour plot with a single contour at 0, not two contours at zero. The old `contours=[0,0]` probably never made sense...",
    "created_at": "2016-02-20T13:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288903",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>An implicit plot is just a contour plot with a single contour at 0, not two contours at zero. The old `contours=[0,0]` probably never made sense...



---

archive/issue_comments_288904.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-02-20T13:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288904",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_288905.json:
```json
{
    "body": "<a id='comment:16'></a>OK, looks good to me",
    "created_at": "2016-02-20T14:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288905",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'></a>OK, looks good to me



---

archive/issue_comments_288906.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-20T14:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288906",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_288907.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-02-21T09:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19988#issuecomment-288907",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_054509.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-21T09:52:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19988",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19988#event-54509"
}
```
