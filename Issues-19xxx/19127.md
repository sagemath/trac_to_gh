# Issue 19127: Some clean up in docbuilding

archive/issues_018890.json:
```json
{
    "body": "No change in functionality, just some clean up.\n\nIn particular:\n- move the code for running Sphinx to `src/sage_setup/docbuild`\n- do not create and delete empty directories, instead silence the Sphinx warnings about non-existing directories\n- instead of `compile()`, use `import`\n- add a new variable `SAGE_DOC_OUTPUT` for `src/doc/output` (this is moved to `local/share/doc/sage` in #19963)\n\nCC:  @hivert @nathanncohen\n\nReviewer: Marc Mezzarobba\n\nAuthor: Jeroen Demeyer\n\nBranch: 0455d1473afb7bcdfb9fb281af47e35020e79b06\n\nDependencies: #19950\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19127\n\n",
    "closed_at": "2016-02-02T23:06:38Z",
    "created_at": "2015-09-03T15:40:54Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "Some clean up in docbuilding",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19127",
    "user": "https://github.com/jdemeyer"
}
```
No change in functionality, just some clean up.

In particular:
- move the code for running Sphinx to `src/sage_setup/docbuild`
- do not create and delete empty directories, instead silence the Sphinx warnings about non-existing directories
- instead of `compile()`, use `import`
- add a new variable `SAGE_DOC_OUTPUT` for `src/doc/output` (this is moved to `local/share/doc/sage` in #19963)

CC:  @hivert @nathanncohen

Reviewer: Marc Mezzarobba

Author: Jeroen Demeyer

Branch: 0455d1473afb7bcdfb9fb281af47e35020e79b06

Dependencies: #19950

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19127





---

archive/issue_comments_340916.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/ticket/19127\"",
    "created_at": "2015-09-03T15:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340916",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/ticket/19127"



---

archive/issue_comments_340917.json:
```json
{
    "body": "Changing commit from \"\" to \"2e2cb7ae27f0011ea6a24128a9b4d45b447e4300\"",
    "created_at": "2015-09-03T15:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340917",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "2e2cb7ae27f0011ea6a24128a9b4d45b447e4300"



---

archive/issue_comments_340918.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-09-03T15:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340918",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_340919.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2015-09-03T15:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340919",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_340920.json:
```json
{
    "body": "Changing commit from \"2e2cb7ae27f0011ea6a24128a9b4d45b447e4300\" to \"d959af44152f58b07305e9ce85690fee77ab3dc0\"",
    "created_at": "2015-09-03T19:48:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340920",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2e2cb7ae27f0011ea6a24128a9b4d45b447e4300" to "d959af44152f58b07305e9ce85690fee77ab3dc0"



---

archive/issue_comments_340921.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-03T19:48:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340921",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_340922.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-09-08T20:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340922",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_340923.json:
```json
{
    "body": "Changing commit from \"d959af44152f58b07305e9ce85690fee77ab3dc0\" to \"d783ee15dfe7bbe4b11bc7e6e3b3fd5df6535ec2\"",
    "created_at": "2015-09-08T20:38:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340923",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d959af44152f58b07305e9ce85690fee77ab3dc0" to "d783ee15dfe7bbe4b11bc7e6e3b3fd5df6535ec2"



---

archive/issue_comments_340924.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#19166\"",
    "created_at": "2015-09-08T20:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340924",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "" to "#19166"



---

archive/issue_comments_340925.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-07T11:47:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340925",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_340926.json:
```json
{
    "body": "Changing commit from \"d783ee15dfe7bbe4b11bc7e6e3b3fd5df6535ec2\" to \"9b12694b825a5e3c39a609859c4f881e73ec5414\"",
    "created_at": "2015-11-07T11:47:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340926",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d783ee15dfe7bbe4b11bc7e6e3b3fd5df6535ec2" to "9b12694b825a5e3c39a609859c4f881e73ec5414"



---

archive/issue_comments_340927.json:
```json
{
    "body": "Changing commit from \"9b12694b825a5e3c39a609859c4f881e73ec5414\" to \"97a6f82374ee220f7197779db0669f9de40b201b\"",
    "created_at": "2016-01-10T21:51:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340927",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9b12694b825a5e3c39a609859c4f881e73ec5414" to "97a6f82374ee220f7197779db0669f9de40b201b"



---

archive/issue_comments_340928.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-01-10T21:51:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340928",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_340929.json:
```json
{
    "body": "Changing dependencies from \"#19166\" to \"\"",
    "created_at": "2016-01-10T21:52:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340929",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "#19166" to ""



---

archive/issue_comments_340930.json:
```json
{
    "body": "Changing commit from \"97a6f82374ee220f7197779db0669f9de40b201b\" to \"ea7efaa89c2b6d3d0cd738bed638da5138cde932\"",
    "created_at": "2016-01-24T10:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340930",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "97a6f82374ee220f7197779db0669f9de40b201b" to "ea7efaa89c2b6d3d0cd738bed638da5138cde932"



---

archive/issue_comments_340931.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-01-24T10:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340931",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_340932.json:
```json
{
    "body": "Changing commit from \"ea7efaa89c2b6d3d0cd738bed638da5138cde932\" to \"f0f0e4c3711bb95a8c06771c5e444c7d36ae863e\"",
    "created_at": "2016-01-25T10:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340932",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ea7efaa89c2b6d3d0cd738bed638da5138cde932" to "f0f0e4c3711bb95a8c06771c5e444c7d36ae863e"



---

archive/issue_comments_340933.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-25T10:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340933",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_340934.json:
```json
{
    "body": "Changing commit from \"f0f0e4c3711bb95a8c06771c5e444c7d36ae863e\" to \"2fbfe8ef1bc4783ada6cf865f4ce5648b9869647\"",
    "created_at": "2016-01-25T14:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340934",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f0f0e4c3711bb95a8c06771c5e444c7d36ae863e" to "2fbfe8ef1bc4783ada6cf865f4ce5648b9869647"



---

archive/issue_comments_340935.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-01-25T14:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340935",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_340936.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n No change in functionality, just some clean up.\n \n In particular:\n-- move the code for running Sphinx to `src/doc/builder`\n+- move the code for running Sphinx to `src/sage_setup/docbuild`\n - do not create and delete empty directories, instead silence the Sphinx warnings about non-existing directories\n - instead of `compile()`, use `import`\n - add a new variable `SAGE_DOC_OUTPUT` for `src/doc/output` (with the idea that this might be moved to `local/share/doc` in the future)\n``````\n",
    "created_at": "2016-01-25T14:08:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340936",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 No change in functionality, just some clean up.
 
 In particular:
-- move the code for running Sphinx to `src/doc/builder`
+- move the code for running Sphinx to `src/sage_setup/docbuild`
 - do not create and delete empty directories, instead silence the Sphinx warnings about non-existing directories
 - instead of `compile()`, use `import`
 - add a new variable `SAGE_DOC_OUTPUT` for `src/doc/output` (with the idea that this might be moved to `local/share/doc` in the future)
``````




---

archive/issue_comments_340937.json:
```json
{
    "body": "Changing commit from \"2fbfe8ef1bc4783ada6cf865f4ce5648b9869647\" to \"93339c2730f775e99ecdedc4e6fd7323604a4a87\"",
    "created_at": "2016-01-25T17:10:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340937",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2fbfe8ef1bc4783ada6cf865f4ce5648b9869647" to "93339c2730f775e99ecdedc4e6fd7323604a4a87"



---

archive/issue_comments_340938.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-01-25T17:10:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340938",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_340939.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-01-25T21:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340939",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_340940.json:
```json
{
    "body": "Changing commit from \"93339c2730f775e99ecdedc4e6fd7323604a4a87\" to \"67b8e356c4a2eb98b11f61ba9a66171477070c4b\"",
    "created_at": "2016-01-25T21:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340940",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "93339c2730f775e99ecdedc4e6fd7323604a4a87" to "67b8e356c4a2eb98b11f61ba9a66171477070c4b"



---

archive/issue_comments_340941.json:
```json
{
    "body": "Changing commit from \"67b8e356c4a2eb98b11f61ba9a66171477070c4b\" to \"7c98158ec8ee9e3ec98427ef7d0a0dcf208469d9\"",
    "created_at": "2016-01-26T07:29:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340941",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "67b8e356c4a2eb98b11f61ba9a66171477070c4b" to "7c98158ec8ee9e3ec98427ef7d0a0dcf208469d9"



---

archive/issue_comments_340942.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-01-26T07:29:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340942",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_340943.json:
```json
{
    "body": "<a id='comment:17'></a>I don't understand what `SAGE_DOC_OUTPUT` is supposed to do: I tried (without reading the code)\n\n```\nSAGE_DOC_OUTPUT=. sage -docbuild tutorial pdf\n```\nbut the pdf file still ends up at its usual location.",
    "created_at": "2016-01-26T11:30:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340943",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:17'></a>I don't understand what `SAGE_DOC_OUTPUT` is supposed to do: I tried (without reading the code)

```
SAGE_DOC_OUTPUT=. sage -docbuild tutorial pdf
```
but the pdf file still ends up at its usual location.



---

archive/issue_comments_340944.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:17 mmezzarobba]:\n> I don't understand what `SAGE_DOC_OUTPUT` is supposed to do\n\nSuch variables really need an absolute path, not relative.",
    "created_at": "2016-01-26T11:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340944",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>Replying to [comment:17 mmezzarobba]:
> I don't understand what `SAGE_DOC_OUTPUT` is supposed to do

Such variables really need an absolute path, not relative.



---

archive/issue_comments_340945.json:
```json
{
    "body": "<a id='comment:19'></a>LGTM. Two minor comments though:\n* I wonder why you renamed the logger to `doc.builder` (the obvious reason to change the name would be to follow the more-or-less standard convention of \u201cnamespacing\u201d it using the corresponding Python module name, but that's not what you do).\n* The developer guide contains a mention of `SAGE_ROOT/src/doc/builder/__init__.py` that probably should be updated or removed.",
    "created_at": "2016-01-26T14:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340945",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:19'></a>LGTM. Two minor comments though:
* I wonder why you renamed the logger to `doc.builder` (the obvious reason to change the name would be to follow the more-or-less standard convention of “namespacing” it using the corresponding Python module name, but that's not what you do).
* The developer guide contains a mention of `SAGE_ROOT/src/doc/builder/__init__.py` that probably should be updated or removed.



---

archive/issue_comments_340946.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-26T14:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340946",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_340947.json:
```json
{
    "body": "Changing commit from \"7c98158ec8ee9e3ec98427ef7d0a0dcf208469d9\" to \"537d9d28171e181cd8831c31ada9c9e8121a4339\"",
    "created_at": "2016-01-26T14:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340947",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7c98158ec8ee9e3ec98427ef7d0a0dcf208469d9" to "537d9d28171e181cd8831c31ada9c9e8121a4339"



---

archive/issue_events_053147.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-01-26T14:31:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "milestone": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19127#event-53147"
}
```



---

archive/issue_comments_340948.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Marc Mezzarobba\"",
    "created_at": "2016-01-26T14:31:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340948",
    "user": "https://github.com/mezzarobba"
}
```

Changing reviewer from "" to "Marc Mezzarobba"



---

archive/issue_comments_340949.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-26T14:31:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340949",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_340950.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+No change in functionality, just some clean up.\n \n+In particular:\n+- move the code for running Sphinx to `src/sage_setup/docbuild`\n+- do not create and delete empty directories, instead silence the Sphinx warnings about non-existing directories\n+- instead of `compile()`, use `import`\n+- add a new variable `SAGE_DOC_OUTPUT` for `src/doc/output` (this is moved to `local/share/doc/sage` in #19963)\n \n Author: Jeroen Demeyer\n \n``````\n",
    "created_at": "2016-01-27T10:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340950",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,10 @@
+No change in functionality, just some clean up.
 
+In particular:
+- move the code for running Sphinx to `src/sage_setup/docbuild`
+- do not create and delete empty directories, instead silence the Sphinx warnings about non-existing directories
+- instead of `compile()`, use `import`
+- add a new variable `SAGE_DOC_OUTPUT` for `src/doc/output` (this is moved to `local/share/doc/sage` in #19963)
 
 Author: Jeroen Demeyer
 
``````




---

archive/issue_comments_340951.json:
```json
{
    "body": "<a id='comment:23'></a>http://build.sagedev.org/release/builders/%20%20fast%20Volker%20Desktop%20%28Fedora%2022%20x86_64%29%20incremental/builds/366/steps/shell_4/logs/stdio",
    "created_at": "2016-01-28T17:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340951",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:23'></a>http://build.sagedev.org/release/builders/%20%20fast%20Volker%20Desktop%20%28Fedora%2022%20x86_64%29%20incremental/builds/366/steps/shell_4/logs/stdio



---

archive/issue_comments_340952.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-01-28T17:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340952",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_340953.json:
```json
{
    "body": "<a id='comment:24'></a>That failure looks unrelated to the documentation, so I would be surprised if that buildbot error was due to this ticket. Which other tickets did you test?",
    "created_at": "2016-01-28T18:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340953",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>That failure looks unrelated to the documentation, so I would be surprised if that buildbot error was due to this ticket. Which other tickets did you test?



---

archive/issue_comments_340954.json:
```json
{
    "body": "<a id='comment:25'></a>Unrelated to the doctest failure: should the `clean` target in `src/doc/Makefile` also do something like `rm -f common/*.pyc`? It would be good to clean up `common/builder.pyc` and other left-over files.",
    "created_at": "2016-01-28T18:36:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340954",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:25'></a>Unrelated to the doctest failure: should the `clean` target in `src/doc/Makefile` also do something like `rm -f common/*.pyc`? It would be good to clean up `common/builder.pyc` and other left-over files.



---

archive/issue_comments_340955.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:23 vbraun]:\n> http://build.sagedev.org/release/builders/%20%20fast%20Volker%20Desktop%20%28Fedora%2022%20x86_64%29%20incremental/builds/366/steps/shell_4/logs/stdio\n\n\nConfirmed (but still surprising!)",
    "created_at": "2016-01-28T19:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340955",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>Replying to [comment:23 vbraun]:
> http://build.sagedev.org/release/builders/%20%20fast%20Volker%20Desktop%20%28Fedora%2022%20x86_64%29%20incremental/builds/366/steps/shell_4/logs/stdio


Confirmed (but still surprising!)



---

archive/issue_comments_340956.json:
```json
{
    "body": "<a id='comment:27'></a>The problem seems to be that doctesting the old `src/doc/output` files fails because they are no longer consider \"Sage library\" files. Easily fixed by removing `src/doc/output`.",
    "created_at": "2016-01-28T19:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340956",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>The problem seems to be that doctesting the old `src/doc/output` files fails because they are no longer consider "Sage library" files. Easily fixed by removing `src/doc/output`.



---

archive/issue_comments_340957.json:
```json
{
    "body": "Changing commit from \"537d9d28171e181cd8831c31ada9c9e8121a4339\" to \"2b37da3289b6684f9d9738ea7e96f4379aa9f3b7\"",
    "created_at": "2016-01-28T19:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340957",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "537d9d28171e181cd8831c31ada9c9e8121a4339" to "2b37da3289b6684f9d9738ea7e96f4379aa9f3b7"



---

archive/issue_comments_340958.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-28T19:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340958",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_340959.json:
```json
{
    "body": "<a id='comment:29'></a>Oops, I was confusing this ticket with #19963. Never mind this last commit.",
    "created_at": "2016-01-28T22:47:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340959",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>Oops, I was confusing this ticket with #19963. Never mind this last commit.



---

archive/issue_comments_340960.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-01-28T22:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340960",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_340961.json:
```json
{
    "body": "Changing commit from \"2b37da3289b6684f9d9738ea7e96f4379aa9f3b7\" to \"537d9d28171e181cd8831c31ada9c9e8121a4339\"",
    "created_at": "2016-01-28T22:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340961",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2b37da3289b6684f9d9738ea7e96f4379aa9f3b7" to "537d9d28171e181cd8831c31ada9c9e8121a4339"



---

archive/issue_comments_340962.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-29T06:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340962",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_340963.json:
```json
{
    "body": "Changing commit from \"537d9d28171e181cd8831c31ada9c9e8121a4339\" to \"2f8fe6bed09797406e99561ce852dbc7d4d94f61\"",
    "created_at": "2016-01-29T06:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340963",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "537d9d28171e181cd8831c31ada9c9e8121a4339" to "2f8fe6bed09797406e99561ce852dbc7d4d94f61"



---

archive/issue_comments_340964.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-01-29T06:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340964",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_340965.json:
```json
{
    "body": "<a id='comment:33'></a>I will merge #19950 because these tickets conflict.",
    "created_at": "2016-01-29T07:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340965",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>I will merge #19950 because these tickets conflict.



---

archive/issue_comments_340966.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#19950\"",
    "created_at": "2016-01-29T07:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340966",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "" to "#19950"



---

archive/issue_comments_340967.json:
```json
{
    "body": "Changing commit from \"2f8fe6bed09797406e99561ce852dbc7d4d94f61\" to \"0455d1473afb7bcdfb9fb281af47e35020e79b06\"",
    "created_at": "2016-01-29T07:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340967",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2f8fe6bed09797406e99561ce852dbc7d4d94f61" to "0455d1473afb7bcdfb9fb281af47e35020e79b06"



---

archive/issue_comments_340968.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-29T07:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340968",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_340969.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-02T10:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340969",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_053148.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-02T23:06:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19127#event-53148"
}
```



---

archive/issue_comments_340970.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/ticket/19127\" to \"0455d1473afb7bcdfb9fb281af47e35020e79b06\"",
    "created_at": "2016-02-02T23:06:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340970",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/ticket/19127" to "0455d1473afb7bcdfb9fb281af47e35020e79b06"



---

archive/issue_comments_340971.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-02-02T23:06:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340971",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_340972.json:
```json
{
    "body": "Changing commit from \"0455d1473afb7bcdfb9fb281af47e35020e79b06\" to \"\"",
    "created_at": "2016-03-30T07:32:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340972",
    "user": "https://github.com/jm58660"
}
```

Changing commit from "0455d1473afb7bcdfb9fb281af47e35020e79b06" to ""



---

archive/issue_comments_340973.json:
```json
{
    "body": "<a id='comment:37'></a>Is this the reason for #20255?",
    "created_at": "2016-03-30T07:32:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19127#issuecomment-340973",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:37'></a>Is this the reason for #20255?
