# Issue 19520: implement random triangulations in a bijective way

archive/issues_019283.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThis will provide a fast uniform (almost) random generator for triangulations.\n\nThis uses the algorithm via a bijection with blossoming trees due to Schaeffer and Poulalhon.\n\nCC:  @nathanncohen\n\nComponent: **graph theory**\n\nKeywords: **random graph**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nBranch/Commit: **[`82289ac`](https://github.com/sagemath/sagetrac-mirror/commit/82289ac6169f30dd7aa211d3430958b33f94350d)**\n\nReviewer: **Nathann Cohen**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19520_\n\n",
    "closed_at": "2015-11-24T13:01:26Z",
    "created_at": "2015-11-04T14:18:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "implement random triangulations in a bijective way",
    "type": "issue",
    "updated_at": "2015-11-24T13:01:26Z",
    "url": "https://github.com/sagemath/sage/issues/19520",
    "user": "https://github.com/fchapoton"
}
```
<div id="comment:0"></div>

This will provide a fast uniform (almost) random generator for triangulations.

This uses the algorithm via a bijection with blossoming trees due to Schaeffer and Poulalhon.

CC:  @nathanncohen

Component: **graph theory**

Keywords: **random graph**

Author: **Frédéric Chapoton**

Branch/Commit: **[`82289ac`](https://github.com/sagemath/sagetrac-mirror/commit/82289ac6169f30dd7aa211d3430958b33f94350d)**

Reviewer: **Nathann Cohen**

_Issue created by migration from https://trac.sagemath.org/ticket/19520_





---

archive/issue_events_274154.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-04T14:18:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274154"
}
```



---

archive/issue_events_274155.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-04T14:18:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274155"
}
```



---

archive/issue_events_274156.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-04T14:18:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274156"
}
```



---

archive/issue_events_274157.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-04T14:18:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274157"
}
```



---

archive/issue_events_274158.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-04T14:18:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274158"
}
```



---

archive/issue_comments_277811.json:
```json
{
    "body": "Commit: **[`226cef6`](https://github.com/sagemath/sagetrac-mirror/commit/226cef6191ba7ef0f264e8e687e594b3f4f10976)**",
    "created_at": "2015-11-04T14:19:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277811",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`226cef6`](https://github.com/sagemath/sagetrac-mirror/commit/226cef6191ba7ef0f264e8e687e594b3f4f10976)**



---

archive/issue_comments_277812.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/226cef6191ba7ef0f264e8e687e594b3f4f10976\"><code>226cef6</code></a></td><td><code>implement the bijective random generation of triangulations</code></td></tr></table>\n",
    "created_at": "2015-11-04T14:19:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277812",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/226cef6191ba7ef0f264e8e687e594b3f4f10976"><code>226cef6</code></a></td><td><code>implement the bijective random generation of triangulations</code></td></tr></table>




---

archive/issue_events_274159.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-04T14:19:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274159"
}
```



---

archive/issue_comments_277813.json:
```json
{
    "body": "Branch: **[u/chapoton/19520](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/19520)**",
    "created_at": "2015-11-04T14:19:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277813",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/19520](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/19520)**



---

archive/issue_comments_277814.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nHello,\n\nIf you add this then I do not think that we need our former 'randomtriangulation' anymore.\n\nNathann\n\nP.S.: The difference between `listA += listB` and `listA.extend(listB)` is that the first one creates a copy og `listA` first.",
    "created_at": "2015-11-04T15:58:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277814",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:2" align="right">comment:2</div>

Hello,

If you add this then I do not think that we need our former 'randomtriangulation' anymore.

Nathann

P.S.: The difference between `listA += listB` and `listA.extend(listB)` is that the first one creates a copy og `listA` first.



---

archive/issue_comments_277815.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nWell, this is a different \"random triangulation\", not the same distribution at all. Mine is better because it's almost uniform, but nevertheless one could keep the other.\n\nShould I use `.append` and `.extend` everywhere possible ?",
    "created_at": "2015-11-04T16:36:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277815",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">comment:3</div>

Well, this is a different "random triangulation", not the same distribution at all. Mine is better because it's almost uniform, but nevertheless one could keep the other.

Should I use `.append` and `.extend` everywhere possible ?



---

archive/issue_comments_277816.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10677c9623d385ac578d6de227efc7d1652edb5e\"><code>10677c9</code></a></td><td><code>trac #19520 using append and extend</code></td></tr></table>\n",
    "created_at": "2015-11-04T16:44:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277816",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10677c9623d385ac578d6de227efc7d1652edb5e"><code>10677c9</code></a></td><td><code>trac #19520 using append and extend</code></td></tr></table>




---

archive/issue_comments_277817.json:
```json
{
    "body": "Changed commit from **[`226cef6`](https://github.com/sagemath/sagetrac-mirror/commit/226cef6191ba7ef0f264e8e687e594b3f4f10976)** to **[`10677c9`](https://github.com/sagemath/sagetrac-mirror/commit/10677c9623d385ac578d6de227efc7d1652edb5e)**",
    "created_at": "2015-11-04T16:44:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277817",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`226cef6`](https://github.com/sagemath/sagetrac-mirror/commit/226cef6191ba7ef0f264e8e687e594b3f4f10976)** to **[`10677c9`](https://github.com/sagemath/sagetrac-mirror/commit/10677c9623d385ac578d6de227efc7d1652edb5e)**



---

archive/issue_comments_277818.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHello Fr\u00e9d\u00e9ric,\n\nYours is clearly better, and unless there is a specific reason why we should\nkeep the old one (please enlighten me) I do not see the point to have it around.\n\nFirst, because 'graphs.RandomTriangulation' should preferably be what you\nimplement now: at least the notion of 'random' is clear (and what one would expect).\n\nIf you insist on keeping the other, then perhaps it could be a (non-default)\noption of `RandomTriangulation`? Let us not kee code just for the sake of not\nthrowing anything away. What you did is what `RandomTriangulation` should be. If\nit had been like this from the start, we certainly wouldn't have added the other\nfunction later.\n\n> Should I use `.append` and `.extend` everywhere possible ?\n\nYes, please. Let us not waste ressources when we can easily avoid it.\n\nNathann",
    "created_at": "2015-11-04T21:07:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277818",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

Hello Frédéric,

Yours is clearly better, and unless there is a specific reason why we should
keep the old one (please enlighten me) I do not see the point to have it around.

First, because 'graphs.RandomTriangulation' should preferably be what you
implement now: at least the notion of 'random' is clear (and what one would expect).

If you insist on keeping the other, then perhaps it could be a (non-default)
option of `RandomTriangulation`? Let us not kee code just for the sake of not
throwing anything away. What you did is what `RandomTriangulation` should be. If
it had been like this from the start, we certainly wouldn't have added the other
function later.

> Should I use `.append` and `.extend` everywhere possible ?

Yes, please. Let us not waste ressources when we can easily avoid it.

Nathann



---

archive/issue_comments_277819.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5ce368d9bb98e304a5faf30795ad089e6dfe6de\"><code>d5ce368</code></a></td><td><code>trac #19520 remove old RandomTriangulation function</code></td></tr></table>\n",
    "created_at": "2015-11-05T08:58:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277819",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5ce368d9bb98e304a5faf30795ad089e6dfe6de"><code>d5ce368</code></a></td><td><code>trac #19520 remove old RandomTriangulation function</code></td></tr></table>




---

archive/issue_comments_277820.json:
```json
{
    "body": "Changed commit from **[`10677c9`](https://github.com/sagemath/sagetrac-mirror/commit/10677c9623d385ac578d6de227efc7d1652edb5e)** to **[`d5ce368`](https://github.com/sagemath/sagetrac-mirror/commit/d5ce368d9bb98e304a5faf30795ad089e6dfe6de)**",
    "created_at": "2015-11-05T08:58:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277820",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`10677c9`](https://github.com/sagemath/sagetrac-mirror/commit/10677c9623d385ac578d6de227efc7d1652edb5e)** to **[`d5ce368`](https://github.com/sagemath/sagetrac-mirror/commit/d5ce368d9bb98e304a5faf30795ad089e6dfe6de)**



---

archive/issue_comments_277821.json:
```json
{
    "body": "Changed commit from **[`d5ce368`](https://github.com/sagemath/sagetrac-mirror/commit/d5ce368d9bb98e304a5faf30795ad089e6dfe6de)** to **[`9a98a9e`](https://github.com/sagemath/sagetrac-mirror/commit/9a98a9ec44c738d30764fe87f7a9f27746708029)**",
    "created_at": "2015-11-05T09:01:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277821",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d5ce368`](https://github.com/sagemath/sagetrac-mirror/commit/d5ce368d9bb98e304a5faf30795ad089e6dfe6de)** to **[`9a98a9e`](https://github.com/sagemath/sagetrac-mirror/commit/9a98a9ec44c738d30764fe87f7a9f27746708029)**



---

archive/issue_comments_277822.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a98a9ec44c738d30764fe87f7a9f27746708029\"><code>9a98a9e</code></a></td><td><code>trac #19520 one more extend</code></td></tr></table>\n",
    "created_at": "2015-11-05T09:01:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277822",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a98a9ec44c738d30764fe87f7a9f27746708029"><code>9a98a9e</code></a></td><td><code>trac #19520 one more extend</code></td></tr></table>




---

archive/issue_comments_277823.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nok, done. So this ticket now replaces the old implementation of `RandomTriangulation` by a new one.",
    "created_at": "2015-11-05T09:03:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277823",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

ok, done. So this ticket now replaces the old implementation of `RandomTriangulation` by a new one.



---

archive/issue_comments_277824.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d3020a347482570494dcc7dc42e1ea1f44dec98\"><code>2d3020a</code></a></td><td><code>trac #19520 removing a call to set_planar_position (which is almost deprecated)</code></td></tr></table>\n",
    "created_at": "2015-11-05T11:08:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277824",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d3020a347482570494dcc7dc42e1ea1f44dec98"><code>2d3020a</code></a></td><td><code>trac #19520 removing a call to set_planar_position (which is almost deprecated)</code></td></tr></table>




---

archive/issue_comments_277825.json:
```json
{
    "body": "Changed commit from **[`9a98a9e`](https://github.com/sagemath/sagetrac-mirror/commit/9a98a9ec44c738d30764fe87f7a9f27746708029)** to **[`2d3020a`](https://github.com/sagemath/sagetrac-mirror/commit/2d3020a347482570494dcc7dc42e1ea1f44dec98)**",
    "created_at": "2015-11-05T11:08:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277825",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9a98a9e`](https://github.com/sagemath/sagetrac-mirror/commit/9a98a9ec44c738d30764fe87f7a9f27746708029)** to **[`2d3020a`](https://github.com/sagemath/sagetrac-mirror/commit/2d3020a347482570494dcc7dc42e1ea1f44dec98)**



---

archive/issue_comments_277826.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHello Fr\u00e9d\u00e9ric,\n\nI only read the content of `auxiliary_random_word` so far (one cannot say that the construction appears very explicitly in the paper `:-/`) and added a small commit at `public/19520`, mainly to point to where the constraints on the binary word are provided in the paper.\n\nIs there any reason why you add +3n and -n in to 'height', instead of compution '3*number_of_1 - number_of_zeroes' like in Proposition 4.2?\n\nNathann",
    "created_at": "2015-11-05T14:34:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277826",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

Hello Frédéric,

I only read the content of `auxiliary_random_word` so far (one cannot say that the construction appears very explicitly in the paper `:-/`) and added a small commit at `public/19520`, mainly to point to where the constraints on the binary word are provided in the paper.

Is there any reason why you add +3n and -n in to 'height', instead of compution '3*number_of_1 - number_of_zeroes' like in Proposition 4.2?

Nathann



---

archive/issue_comments_277827.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nHello,\n\nyes, this part is indeed already not clear. I am not sure to be convinced myself\nthat the algorithm that I wrote to conjugate the binary word is correct. But it works..\n\nThe idea is (like for usual conjugation into Dyck words) to assign a height at every step of the path, and to cut where the height is minimal or almost minimal here...",
    "created_at": "2015-11-05T15:23:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277827",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:11" align="right">comment:11</div>

Hello,

yes, this part is indeed already not clear. I am not sure to be convinced myself
that the algorithm that I wrote to conjugate the binary word is correct. But it works..

The idea is (like for usual conjugation into Dyck words) to assign a height at every step of the path, and to cut where the height is minimal or almost minimal here...



---

archive/issue_comments_277828.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n> yes, this part is indeed already not clear. I am not sure to be convinced myself\n> that the algorithm that I wrote to conjugate the binary word is correct.\n\nI'm sorry but I will not accept a code without being convinced that it is correct. Please make sure that this part does what it should, and then set this ticket to `needs_review`.\n\nNathann",
    "created_at": "2015-11-05T15:39:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277828",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:12" align="right">comment:12</div>

> yes, this part is indeed already not clear. I am not sure to be convinced myself
> that the algorithm that I wrote to conjugate the binary word is correct.

I'm sorry but I will not accept a code without being convinced that it is correct. Please make sure that this part does what it should, and then set this ticket to `needs_review`.

Nathann



---

archive/issue_events_274160.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-11-05T15:39:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274160"
}
```



---

archive/issue_events_274161.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-11-05T15:39:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274161"
}
```



---

archive/issue_comments_277829.json:
```json
{
    "body": "Changed commit from **[`2d3020a`](https://github.com/sagemath/sagetrac-mirror/commit/2d3020a347482570494dcc7dc42e1ea1f44dec98)** to **[`fb300e3`](https://github.com/sagemath/sagetrac-mirror/commit/fb300e3c393cca0bf8cd2e9fe8df72a47d2d7735)**",
    "created_at": "2015-11-05T18:35:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277829",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2d3020a`](https://github.com/sagemath/sagetrac-mirror/commit/2d3020a347482570494dcc7dc42e1ea1f44dec98)** to **[`fb300e3`](https://github.com/sagemath/sagetrac-mirror/commit/fb300e3c393cca0bf8cd2e9fe8df72a47d2d7735)**



---

archive/issue_comments_277830.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb300e3c393cca0bf8cd2e9fe8df72a47d2d7735\"><code>fb300e3</code></a></td><td><code>trac #19520 fixing a mistake</code></td></tr></table>\n",
    "created_at": "2015-11-05T18:35:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277830",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb300e3c393cca0bf8cd2e9fe8df72a47d2d7735"><code>fb300e3</code></a></td><td><code>trac #19520 fixing a mistake</code></td></tr></table>




---

archive/issue_comments_277831.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/315fa4b400478e0c7665f4aafab51668ca51ccd0\"><code>315fa4b</code></a></td><td><code>trac #19520: Doc work</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59c498265a63fbe93763b3a87ba2c0c057e8f5fb\"><code>59c4982</code></a></td><td><code>Merge branch 'public/19520' into u/chapoton/19520</code></td></tr></table>\n",
    "created_at": "2015-11-05T18:49:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277831",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/315fa4b400478e0c7665f4aafab51668ca51ccd0"><code>315fa4b</code></a></td><td><code>trac #19520: Doc work</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59c498265a63fbe93763b3a87ba2c0c057e8f5fb"><code>59c4982</code></a></td><td><code>Merge branch 'public/19520' into u/chapoton/19520</code></td></tr></table>




---

archive/issue_comments_277832.json:
```json
{
    "body": "Changed commit from **[`fb300e3`](https://github.com/sagemath/sagetrac-mirror/commit/fb300e3c393cca0bf8cd2e9fe8df72a47d2d7735)** to **[`59c4982`](https://github.com/sagemath/sagetrac-mirror/commit/59c498265a63fbe93763b3a87ba2c0c057e8f5fb)**",
    "created_at": "2015-11-05T18:49:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277832",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fb300e3`](https://github.com/sagemath/sagetrac-mirror/commit/fb300e3c393cca0bf8cd2e9fe8df72a47d2d7735)** to **[`59c4982`](https://github.com/sagemath/sagetrac-mirror/commit/59c498265a63fbe93763b3a87ba2c0c057e8f5fb)**



---

archive/issue_comments_277833.json:
```json
{
    "body": "Changed commit from **[`59c4982`](https://github.com/sagemath/sagetrac-mirror/commit/59c498265a63fbe93763b3a87ba2c0c057e8f5fb)** to **[`fae0137`](https://github.com/sagemath/sagetrac-mirror/commit/fae0137dbe91dbb753cba98dd9c1504003ea03bc)**",
    "created_at": "2015-11-05T20:33:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277833",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`59c4982`](https://github.com/sagemath/sagetrac-mirror/commit/59c498265a63fbe93763b3a87ba2c0c057e8f5fb)** to **[`fae0137`](https://github.com/sagemath/sagetrac-mirror/commit/fae0137dbe91dbb753cba98dd9c1504003ea03bc)**



---

archive/issue_comments_277834.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fae0137dbe91dbb753cba98dd9c1504003ea03bc\"><code>fae0137</code></a></td><td><code>trac #19520 more explanations, and clean algorithm for auxiliary words</code></td></tr></table>\n",
    "created_at": "2015-11-05T20:33:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277834",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fae0137dbe91dbb753cba98dd9c1504003ea03bc"><code>fae0137</code></a></td><td><code>trac #19520 more explanations, and clean algorithm for auxiliary words</code></td></tr></table>




---

archive/issue_comments_277835.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nok, should be much better now. I have added doc and explanations.\nAnd indeed my code was awful, and working only by miracle.",
    "created_at": "2015-11-05T20:34:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277835",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:16" align="right">comment:16</div>

ok, should be much better now. I have added doc and explanations.
And indeed my code was awful, and working only by miracle.



---

archive/issue_events_274162.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-05T20:34:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274162"
}
```



---

archive/issue_events_274163.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-05T20:34:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274163"
}
```



---

archive/issue_events_274164.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-11-06T13:48:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274164"
}
```



---

archive/issue_events_274165.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2015-11-06T13:48:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274165"
}
```



---

archive/issue_comments_277836.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nHello Fr\u00e9d\u00e9ric,\n\nHere is another (incomplete) review:\n\n- The names of the two functions `contour_and_graph_from_word` and\n  `auxiliary_random_word` are not very descriptive of what they do, and this is\n  not really a problem since they are not meant to be called directly by the\n  user. As they do not appear in the documentation anyway, could you turn them\n  into private functions by adding a `_` at the beginning of their name?\n\n  If you do so, please update the sphinx links.\n\n- As a french person I understand why 'f' would denote a leaf, but that probably\n  isn't the appropriate letter. Is there actually anything stopping you from\n  using 'inner' and 'leaf' instead of 'i' and 'f'?\n\n- As my notion of up/down is apparently the opposite of what the paper use, I\n  rearranged the sentences of the doc of `contour_and_graph_from_word` so that\n  'away/toward the root' appears before the notion of up/down (which matches the\n  paper, as in your original text).\n\n- What do you call 'every inner vertex has two leaves' ? In the sequence\n  `[1,0,0,0,0,0]` that you use as an example in the docstring of\n  `contour_and_graph_from_word`, the root vertex (that you consider to be an\n  'inner' vertex) has exactly one neighbor, which is not a leaf.\n\n- In `contour_and_graph_from_word` the variable `active_vertex` was always equal\n  to `inner_stack[-1]`. I removed it. Less variables to keep track of --> easier\n  to understand.\n\n- This is a search operation in a list\n\n  ```\n  inner_stack[-1] in leaf_stack:\n  ```\n  This is not very efficient. Same for `leaf_stack.remove(x)`, which first looks\n  for an occurrence of `x` in `leaf_stack`, then removes it.\n\n  Fortunately none of these operations is necessary, for if there is a leaf to\n  add to the current inner vertex it is the last element of `leaf_stack` (which\n  also means that all 'search' operations actually read the list completely).\n\n- Where exactly is the algorithm of `RandomTriangulation` to be found in\n  [PS2006]_? In the documentation you say that it comes from this paper,\n  but... where? `O_o`\n\nThe modifications I mention can be found at public/19520.\n\nThanks,\n\nNathann",
    "created_at": "2015-11-06T13:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277836",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:17" align="right">comment:17</div>

Hello Frédéric,

Here is another (incomplete) review:

- The names of the two functions `contour_and_graph_from_word` and
  `auxiliary_random_word` are not very descriptive of what they do, and this is
  not really a problem since they are not meant to be called directly by the
  user. As they do not appear in the documentation anyway, could you turn them
  into private functions by adding a `_` at the beginning of their name?

  If you do so, please update the sphinx links.

- As a french person I understand why 'f' would denote a leaf, but that probably
  isn't the appropriate letter. Is there actually anything stopping you from
  using 'inner' and 'leaf' instead of 'i' and 'f'?

- As my notion of up/down is apparently the opposite of what the paper use, I
  rearranged the sentences of the doc of `contour_and_graph_from_word` so that
  'away/toward the root' appears before the notion of up/down (which matches the
  paper, as in your original text).

- What do you call 'every inner vertex has two leaves' ? In the sequence
  `[1,0,0,0,0,0]` that you use as an example in the docstring of
  `contour_and_graph_from_word`, the root vertex (that you consider to be an
  'inner' vertex) has exactly one neighbor, which is not a leaf.

- In `contour_and_graph_from_word` the variable `active_vertex` was always equal
  to `inner_stack[-1]`. I removed it. Less variables to keep track of --> easier
  to understand.

- This is a search operation in a list

  ```
  inner_stack[-1] in leaf_stack:
  ```
  This is not very efficient. Same for `leaf_stack.remove(x)`, which first looks
  for an occurrence of `x` in `leaf_stack`, then removes it.

  Fortunately none of these operations is necessary, for if there is a leaf to
  add to the current inner vertex it is the last element of `leaf_stack` (which
  also means that all 'search' operations actually read the list completely).

- Where exactly is the algorithm of `RandomTriangulation` to be found in
  [PS2006]_? In the documentation you say that it comes from this paper,
  but... where? `O_o`

The modifications I mention can be found at public/19520.

Thanks,

Nathann



---

archive/issue_comments_277837.json:
```json
{
    "body": "Reviewer: **Nathann Cohen**",
    "created_at": "2015-11-06T13:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277837",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Nathann Cohen**



---

archive/issue_comments_277838.json:
```json
{
    "body": "Changed branch from **[u/chapoton/19520](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/19520)** to **[public/19520](https://github.com/sagemath/sagetrac-mirror/tree/public/19520)**",
    "created_at": "2015-11-06T14:30:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277838",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/chapoton/19520](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/19520)** to **[public/19520](https://github.com/sagemath/sagetrac-mirror/tree/public/19520)**



---

archive/issue_comments_277839.json:
```json
{
    "body": "Changed commit from **[`fae0137`](https://github.com/sagemath/sagetrac-mirror/commit/fae0137dbe91dbb753cba98dd9c1504003ea03bc)** to **[`0293adf`](https://github.com/sagemath/sagetrac-mirror/commit/0293adf41a1ae5c2cb8e38e8675a4b010162e00a)**",
    "created_at": "2015-11-06T14:30:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277839",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`fae0137`](https://github.com/sagemath/sagetrac-mirror/commit/fae0137dbe91dbb753cba98dd9c1504003ea03bc)** to **[`0293adf`](https://github.com/sagemath/sagetrac-mirror/commit/0293adf41a1ae5c2cb8e38e8675a4b010162e00a)**



---

archive/issue_comments_277840.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHello Nathann, thanks for your time and your work.\n\n0) adding underscores to names, done\n\n1) using 'in' and 'lf' instead, done\n\n> - What do you call 'every inner vertex has two leaves' ? In the sequence\n>   `[1,0,0,0,0,0]` that you use as an example in the docstring of\n>   `contour_and_graph_from_word`, the root vertex (that you consider to be an\n>   'inner' vertex) has exactly one neighbor, which is not a leaf.\n\nNo, no, in the example `1,0,0,0,0,0`, the inner-root does have two leaves.\n\nOne must be careful about what is called the root. There is a leaf-root and an inner-root. In the paper, the leaf-root is considered as the \"true\" root. And so the inner root would have only one leaf.\n\nIn the algorithms, it turns out to be more convenient to use the inner-root as \"true\" root, and to transform the leaf-root to become the rightmost leaf of the inner-root. In this case, the inner root also has two leaves.\n\n\n> - Where exactly is the algorithm of `RandomTriangulation` to be found in\n>   [PS2006]_? In the documentation you say that it comes from this paper,\n>   but... where? `O_o`\n\nThis algorithm is my own implementation\nof the bijective map described in section 2.1. I am not sure that it is really efficient. I perform the closure moves by successive reductions of the contour word,\nuntil there is no sequence (in,in,in,lf) in the cyclic contour word.\n\n> The modifications I mention can be found at public/19520.\n\nLet us work together on the branch public/19520\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/859e822fd2f7bf137107913508ccf79465361bcf\"><code>859e822</code></a></td><td><code>Merge branch 'u/chapoton/19520' of git://trac.sagemath.org/sage into 19520</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5083bfb0eed6f1582e8b7ee2c1c135a3f4ccad8c\"><code>5083bfb</code></a></td><td><code>trac #19520: Merged with 6.10.beta3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3561232212dcf172233ba26e67e986d7f8043160\"><code>3561232</code></a></td><td><code>trac #19520: Review</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64b0660f43d4b1a916db0aef120fc07d385ee144\"><code>64b0660</code></a></td><td><code>Merge branch 'public/19520' of git://trac.sagemath.org/sage into 19520</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0293adf41a1ae5c2cb8e38e8675a4b010162e00a\"><code>0293adf</code></a></td><td><code>trac #19520 reviewer's comments</code></td></tr></table>\n",
    "created_at": "2015-11-06T14:30:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277840",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:18" align="right">comment:18</div>

Hello Nathann, thanks for your time and your work.

0) adding underscores to names, done

1) using 'in' and 'lf' instead, done

> - What do you call 'every inner vertex has two leaves' ? In the sequence
>   `[1,0,0,0,0,0]` that you use as an example in the docstring of
>   `contour_and_graph_from_word`, the root vertex (that you consider to be an
>   'inner' vertex) has exactly one neighbor, which is not a leaf.

No, no, in the example `1,0,0,0,0,0`, the inner-root does have two leaves.

One must be careful about what is called the root. There is a leaf-root and an inner-root. In the paper, the leaf-root is considered as the "true" root. And so the inner root would have only one leaf.

In the algorithms, it turns out to be more convenient to use the inner-root as "true" root, and to transform the leaf-root to become the rightmost leaf of the inner-root. In this case, the inner root also has two leaves.


> - Where exactly is the algorithm of `RandomTriangulation` to be found in
>   [PS2006]_? In the documentation you say that it comes from this paper,
>   but... where? `O_o`

This algorithm is my own implementation
of the bijective map described in section 2.1. I am not sure that it is really efficient. I perform the closure moves by successive reductions of the contour word,
until there is no sequence (in,in,in,lf) in the cyclic contour word.

> The modifications I mention can be found at public/19520.

Let us work together on the branch public/19520

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/859e822fd2f7bf137107913508ccf79465361bcf"><code>859e822</code></a></td><td><code>Merge branch 'u/chapoton/19520' of git://trac.sagemath.org/sage into 19520</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5083bfb0eed6f1582e8b7ee2c1c135a3f4ccad8c"><code>5083bfb</code></a></td><td><code>trac #19520: Merged with 6.10.beta3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3561232212dcf172233ba26e67e986d7f8043160"><code>3561232</code></a></td><td><code>trac #19520: Review</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64b0660f43d4b1a916db0aef120fc07d385ee144"><code>64b0660</code></a></td><td><code>Merge branch 'public/19520' of git://trac.sagemath.org/sage into 19520</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0293adf41a1ae5c2cb8e38e8675a4b010162e00a"><code>0293adf</code></a></td><td><code>trac #19520 reviewer's comments</code></td></tr></table>




---

archive/issue_comments_277841.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nHellooooo,\n\n> No, no, in the example `1,0,0,0,0,0`, the inner-root does have two leaves.\n\nArgggggg, sorry. I wrote this comment then spent more time understanding what was actually going on. This comment was indeed incorrect, but I hope that you will find nothing wrong in my modifications of doc/code.\n\n> In the algorithms, it turns out to be more convenient to use the inner-root as \"true\" root, and to transform the leaf-root to become the rightmost leaf of the inner-root. In this case, the inner root also has two leaves.\n\nYepyep. I agree that the code seems consistent with this definition: all internal vertices have two leaves.\n\nAt first, I expected that discovering a leaf resulted in two consecutive '0' in the word, as going there (one 0) and going back (one 0) would take two moves. Turns out that 'discovering a leaf' takes only one 0.\n\nThis is the reason why I added in the documentation a comment about the expected length of a sequence with respect to its associated tree.\n\n> This algorithm is my own implementation\n> of the bijective map described in section 2.1. I am not sure that it is really efficient. I perform the closure moves by successive reductions of the contour word,\n> until there is no sequence (in,in,in,lf) in the cyclic contour word.\n\nI see. Could you add in the doc some pointers toward the corresponding sections of the paper (e.g. section 2.1) so that it is easier to know while reading the code which part of the paper you were 'translating'?\n\nThanks,\n\nNathann",
    "created_at": "2015-11-06T14:35:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277841",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:19" align="right">comment:19</div>

Hellooooo,

> No, no, in the example `1,0,0,0,0,0`, the inner-root does have two leaves.

Argggggg, sorry. I wrote this comment then spent more time understanding what was actually going on. This comment was indeed incorrect, but I hope that you will find nothing wrong in my modifications of doc/code.

> In the algorithms, it turns out to be more convenient to use the inner-root as "true" root, and to transform the leaf-root to become the rightmost leaf of the inner-root. In this case, the inner root also has two leaves.

Yepyep. I agree that the code seems consistent with this definition: all internal vertices have two leaves.

At first, I expected that discovering a leaf resulted in two consecutive '0' in the word, as going there (one 0) and going back (one 0) would take two moves. Turns out that 'discovering a leaf' takes only one 0.

This is the reason why I added in the documentation a comment about the expected length of a sequence with respect to its associated tree.

> This algorithm is my own implementation
> of the bijective map described in section 2.1. I am not sure that it is really efficient. I perform the closure moves by successive reductions of the contour word,
> until there is no sequence (in,in,in,lf) in the cyclic contour word.

I see. Could you add in the doc some pointers toward the corresponding sections of the paper (e.g. section 2.1) so that it is easier to know while reading the code which part of the paper you were 'translating'?

Thanks,

Nathann



---

archive/issue_comments_277842.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c7c9028f9aa6c487795eff7741292faac80aecb\"><code>6c7c902</code></a></td><td><code>trac #19520 more doc</code></td></tr></table>\n",
    "created_at": "2015-11-06T14:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277842",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c7c9028f9aa6c487795eff7741292faac80aecb"><code>6c7c902</code></a></td><td><code>trac #19520 more doc</code></td></tr></table>




---

archive/issue_comments_277843.json:
```json
{
    "body": "Changed commit from **[`0293adf`](https://github.com/sagemath/sagetrac-mirror/commit/0293adf41a1ae5c2cb8e38e8675a4b010162e00a)** to **[`6c7c902`](https://github.com/sagemath/sagetrac-mirror/commit/6c7c9028f9aa6c487795eff7741292faac80aecb)**",
    "created_at": "2015-11-06T14:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277843",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0293adf`](https://github.com/sagemath/sagetrac-mirror/commit/0293adf41a1ae5c2cb8e38e8675a4b010162e00a)** to **[`6c7c902`](https://github.com/sagemath/sagetrac-mirror/commit/6c7c9028f9aa6c487795eff7741292faac80aecb)**



---

archive/issue_comments_277844.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nneeds review?",
    "created_at": "2015-11-06T17:03:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277844",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:21" align="right">comment:21</div>

needs review?



---

archive/issue_comments_277845.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a7356b7b4b667ebdaa8f955452e7c8aaefa283c\"><code>3a7356b</code></a></td><td><code>trac #19250 fixing forgotten change of names</code></td></tr></table>\n",
    "created_at": "2015-11-06T18:18:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277845",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a7356b7b4b667ebdaa8f955452e7c8aaefa283c"><code>3a7356b</code></a></td><td><code>trac #19250 fixing forgotten change of names</code></td></tr></table>




---

archive/issue_comments_277846.json:
```json
{
    "body": "Changed commit from **[`6c7c902`](https://github.com/sagemath/sagetrac-mirror/commit/6c7c9028f9aa6c487795eff7741292faac80aecb)** to **[`3a7356b`](https://github.com/sagemath/sagetrac-mirror/commit/3a7356b7b4b667ebdaa8f955452e7c8aaefa283c)**",
    "created_at": "2015-11-06T18:18:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277846",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6c7c902`](https://github.com/sagemath/sagetrac-mirror/commit/6c7c9028f9aa6c487795eff7741292faac80aecb)** to **[`3a7356b`](https://github.com/sagemath/sagetrac-mirror/commit/3a7356b7b4b667ebdaa8f955452e7c8aaefa283c)**



---

archive/issue_events_274166.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-06T18:19:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274166"
}
```



---

archive/issue_events_274167.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-06T18:19:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274167"
}
```



---

archive/issue_comments_277847.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nnow, yes. I had forgotten to add some underscores..",
    "created_at": "2015-11-06T18:19:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277847",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:23" align="right">comment:23</div>

now, yes. I had forgotten to add some underscores..



---

archive/issue_comments_277848.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@nathanncohen](#comment%3A2):\n> Hello,\n> \n> If you add this then I do not think that we need our former 'randomtriangulation' anymore.\n> \n> Nathann\n> \n> P.S.: The difference between `listA += listB` and `listA.extend(listB)` is that the first one creates a copy og `listA` first.\n\nWhere did you see that?\n\n```\nsage: l = [1,2]\nsage: m = l\nsage: l += [4,5]\nsage: m\n[1, 2, 4, 5]\n```\n\nSee also [this stackoverflow question](http://stackoverflow.com/questions/9766387/different-behaviour-for-list-iadd-and-list-add)",
    "created_at": "2015-11-06T23:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277848",
    "user": "https://github.com/videlec"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@nathanncohen](#comment%3A2):
> Hello,
> 
> If you add this then I do not think that we need our former 'randomtriangulation' anymore.
> 
> Nathann
> 
> P.S.: The difference between `listA += listB` and `listA.extend(listB)` is that the first one creates a copy og `listA` first.

Where did you see that?

```
sage: l = [1,2]
sage: m = l
sage: l += [4,5]
sage: m
[1, 2, 4, 5]
```

See also [this stackoverflow question](http://stackoverflow.com/questions/9766387/different-behaviour-for-list-iadd-and-list-add)



---

archive/issue_comments_277849.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nHmmmmmmmmmm.... You are right. And so 'l += b' is not equivalent to 'l = l + b'. Love it. I'll change it back to what it was, for then the original code was easier to read.\n\nNathann",
    "created_at": "2015-11-07T09:16:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277849",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:25" align="right">comment:25</div>

Hmmmmmmmmmm.... You are right. And so 'l += b' is not equivalent to 'l = l + b'. Love it. I'll change it back to what it was, for then the original code was easier to read.

Nathann



---

archive/issue_comments_277850.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nBut maybe `.append` is still a little bit faster than `+=` because there is no \"try except\" involved ?\n\nNOTA BENE: I intend to use the same code to create a simplicial complex instead. I would rather do that in another ticket, if you don't mind.",
    "created_at": "2015-11-07T09:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277850",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:26" align="right">comment:26</div>

But maybe `.append` is still a little bit faster than `+=` because there is no "try except" involved ?

NOTA BENE: I intend to use the same code to create a simplicial complex instead. I would rather do that in another ticket, if you don't mind.



---

archive/issue_comments_277851.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\ntry/except? Where?\n\nFrom what I understand '+=' is an alias of 'extend'. \n\nNathann",
    "created_at": "2015-11-07T09:49:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277851",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:27" align="right">comment:27</div>

try/except? Where?

From what I understand '+=' is an alias of 'extend'. 

Nathann



---

archive/issue_comments_277852.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n> NOTA BENE: I intend to use the same code to create a simplicial complex instead. I would rather do that in another ticket, if you don't mind.\n\nI do not understand. Do you mean that you do not want the change `extend-> '+='`  to be done here because you fear a conflict with another branch?",
    "created_at": "2015-11-07T09:50:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277852",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:28" align="right">comment:28</div>

> NOTA BENE: I intend to use the same code to create a simplicial complex instead. I would rather do that in another ticket, if you don't mind.

I do not understand. Do you mean that you do not want the change `extend-> '+='`  to be done here because you fear a conflict with another branch?



---

archive/issue_comments_277853.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nNo, see the first answer in the stackoverflow. It says `+=` tries iadd then add.\n\nAnd my note bene has nothing to do with that, it was just information about my later plans. Sorry for the confusion.",
    "created_at": "2015-11-07T09:57:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277853",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:29" align="right">comment:29</div>

No, see the first answer in the stackoverflow. It says `+=` tries iadd then add.

And my note bene has nothing to do with that, it was just information about my later plans. Sorry for the confusion.



---

archive/issue_comments_277854.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nOh, so that's the exception your worry about. Well, I'd say that until your code proves to not be sufficiently fast we have no need for this kind of optimisation (if it makes a difference). Avoiding a copy of the list was sufficiently non-negligible, but that's not so bad. If it ever becomes a problem, your code can easily be turned into more efficient Cython anyway `:-)`\n\nNathann",
    "created_at": "2015-11-07T10:04:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277854",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:30" align="right">comment:30</div>

Oh, so that's the exception your worry about. Well, I'd say that until your code proves to not be sufficiently fast we have no need for this kind of optimisation (if it makes a difference). Avoiding a copy of the list was sufficiently non-negligible, but that's not so bad. If it ever becomes a problem, your code can easily be turned into more efficient Cython anyway `:-)`

Nathann



---

archive/issue_comments_277855.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nOk; I agree. But please don't waste your time to put back +=, it is just as readable now IMHO.",
    "created_at": "2015-11-07T10:06:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277855",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:31" align="right">comment:31</div>

Ok; I agree. But please don't waste your time to put back +=, it is just as readable now IMHO.



---

archive/issue_comments_277856.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nOkayyyy !!!",
    "created_at": "2015-11-07T10:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277856",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:32" align="right">comment:32</div>

Okayyyy !!!



---

archive/issue_comments_277857.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nHellooo Fr\u00e9d\u00e9ric,\n\nI am reading the 'main' part of the algorithm, and trying to understand how you find the subsequences of the form 'in,in,in,lf,in'. It seems (I am not sure) that you do this manually. Here is something that you may like:\n\n```\nsage: 'abcdefghihijk'.index('def')\n3\n```\n\nThis 'index' function of str also takes an optional argument that means that the search should not start from the first character of the string, but from some later index. Eg\n\n```\nsage: 'abcdefghihijk'.index('def',5)\n...\nValueError: substring not found\n```\n\nIf you do what I think you are doing, then you are rewriting this .index function.\n\nNow, you cannot directly use this function, because it is a member of 'str' and not a member of 'list'. And your list is a sequence of pairs. Thus, it could be 'made to work' by creating a 'copy' of your list that only contains the indication of in/lf. Something like that\n\n```\nsage: w=[('in',3)]*5+[('lf',4)]+[('in',3)]\nsage: s=\"\".join(x[0] for x in w)\nsage: s.index('inininlfin')\n4\n```\n\nWith this index you can now do whatever operation on w you need.\n\nThis requires a copy of the list into a string, though on the other hand it would make your code much easier to read -- if you actually do what I think you do.\n\nWhat do you think?\n\nAlternatively, you could 'rewrite' an index function that applies to lists. Something like:\n\n```\nsage: def find_pattern(l):\n....:     for i in range(len(l)-4):\n....:         if 'in' == l[i] == l[i+1] == l[i+2] == l[i+4] and l[i+3] == 'lf':\n....:             return i\n```\n\nIt is not the 'best algorithmic way to compute it', but it would work. Do you think something like that may improve the code?\n\nNathann",
    "created_at": "2015-11-07T12:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277857",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:33" align="right">comment:33</div>

Hellooo Frédéric,

I am reading the 'main' part of the algorithm, and trying to understand how you find the subsequences of the form 'in,in,in,lf,in'. It seems (I am not sure) that you do this manually. Here is something that you may like:

```
sage: 'abcdefghihijk'.index('def')
3
```

This 'index' function of str also takes an optional argument that means that the search should not start from the first character of the string, but from some later index. Eg

```
sage: 'abcdefghihijk'.index('def',5)
...
ValueError: substring not found
```

If you do what I think you are doing, then you are rewriting this .index function.

Now, you cannot directly use this function, because it is a member of 'str' and not a member of 'list'. And your list is a sequence of pairs. Thus, it could be 'made to work' by creating a 'copy' of your list that only contains the indication of in/lf. Something like that

```
sage: w=[('in',3)]*5+[('lf',4)]+[('in',3)]
sage: s="".join(x[0] for x in w)
sage: s.index('inininlfin')
4
```

With this index you can now do whatever operation on w you need.

This requires a copy of the list into a string, though on the other hand it would make your code much easier to read -- if you actually do what I think you do.

What do you think?

Alternatively, you could 'rewrite' an index function that applies to lists. Something like:

```
sage: def find_pattern(l):
....:     for i in range(len(l)-4):
....:         if 'in' == l[i] == l[i+1] == l[i+2] == l[i+4] and l[i+3] == 'lf':
....:             return i
```

It is not the 'best algorithmic way to compute it', but it would work. Do you think something like that may improve the code?

Nathann



---

archive/issue_comments_277858.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nHmm. Well, I can see that one could use `index` as you suggest. Does this improve the code ? I don't know if it will be simpler at the end.\n\nI am currently running over the contour, contracting when I meet 'in,in,in,lf' (and  removing the next 'in' at the same time) ; this may happen several times in one run. Then doing it again and again, until nothing can be done. This must be done cyclically, so I shift and start again if something can still happen at the end. All this is certainly rather awkward. It may be possible to do all that in just one or two passes, by using a stack to remember how many 'in' one has at our disposal when meeting one 'lf', so that one can in some sense go backward when needed. I think I have seen some allusion to that kind of idea in the article.\n\nSo, what to do ? \n\n0) Keep more or less the current algo\n\n1) try to make it clearer, maybe by using `index`\n\n2) try to find an optimal or at least better algo, maybe with stacks\n\nI have no clear opinion, but I would rather avoid doing a lot of work.",
    "created_at": "2015-11-07T21:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277858",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:34" align="right">comment:34</div>

Hmm. Well, I can see that one could use `index` as you suggest. Does this improve the code ? I don't know if it will be simpler at the end.

I am currently running over the contour, contracting when I meet 'in,in,in,lf' (and  removing the next 'in' at the same time) ; this may happen several times in one run. Then doing it again and again, until nothing can be done. This must be done cyclically, so I shift and start again if something can still happen at the end. All this is certainly rather awkward. It may be possible to do all that in just one or two passes, by using a stack to remember how many 'in' one has at our disposal when meeting one 'lf', so that one can in some sense go backward when needed. I think I have seen some allusion to that kind of idea in the article.

So, what to do ? 

0) Keep more or less the current algo

1) try to make it clearer, maybe by using `index`

2) try to find an optimal or at least better algo, maybe with stacks

I have no clear opinion, but I would rather avoid doing a lot of work.



---

archive/issue_comments_277859.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nHello Fr\u00e9d\u00e9ric,\n\nMy last comment was written with 'if' everywhere, because I was not sure of what you were doing exactly by looking at the code. Hence, my message was both a request for a confirmation that I understood correctly what you were doing, and a proposal to rewrite the code in a more readable way.\n\nI had totally missed the constraint that those merging operations had to be made cyclically, for instance. And right now, though I have 'some idea' of what you try to do in the code, I still do not understand it.\n\nMy proposition was not mainly a proposition to rewrite it more efficiently (and the 'string' of index version does have the 'copy' drawback I mentionned) but to rewrite it more clearly.\n\nTomorrow I will have a long bus trip, and I can try to rewrite a cyclic merging algorithm using 'index' that will only work on a string, leaving you to fill it with whatever it does at the same time with the graph.\n\nAt the moment I do not understand what your code does, and I try to do what I can to understand it and make life easier for whoever next will read it.\n\nNathann",
    "created_at": "2015-11-07T21:23:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277859",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:35" align="right">comment:35</div>

Hello Frédéric,

My last comment was written with 'if' everywhere, because I was not sure of what you were doing exactly by looking at the code. Hence, my message was both a request for a confirmation that I understood correctly what you were doing, and a proposal to rewrite the code in a more readable way.

I had totally missed the constraint that those merging operations had to be made cyclically, for instance. And right now, though I have 'some idea' of what you try to do in the code, I still do not understand it.

My proposition was not mainly a proposition to rewrite it more efficiently (and the 'string' of index version does have the 'copy' drawback I mentionned) but to rewrite it more clearly.

Tomorrow I will have a long bus trip, and I can try to rewrite a cyclic merging algorithm using 'index' that will only work on a string, leaving you to fill it with whatever it does at the same time with the graph.

At the moment I do not understand what your code does, and I try to do what I can to understand it and make life easier for whoever next will read it.

Nathann



---

archive/issue_comments_277860.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nHello Fr\u00e9d\u00e9ric,\n\nI thought about it for a while and ended up with the following design: a function scans for a pattern through a list l and -- if it finds it -- rotates l so that it starts with that pattern.\n\nHere is the code, hoping that it may help rewrite your code a bit more clearly:\n\n```python\ndef rotate_l_to_next_pattern(pattern):\n    global l\n    # Find 'pattern' in l, and rotates l so that l starts with 'pattern'.\n    n = len(n)\n    for i in range(n):\n        if all(l[(i+ii)%n] == x for ii,x in enumerate(pattern)):\n            l = l[i:] + l[:i]\n            return True\n    return False\n\nl = [0,1,0,0,0,0,0,1,1,0,1,0,1]\nwhile rotate_l_to_next_pattern([0,1]):\n    l[0] = 2\n```\n\nNathann",
    "created_at": "2015-11-08T07:34:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277860",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:36" align="right">comment:36</div>

Hello Frédéric,

I thought about it for a while and ended up with the following design: a function scans for a pattern through a list l and -- if it finds it -- rotates l so that it starts with that pattern.

Here is the code, hoping that it may help rewrite your code a bit more clearly:

```python
def rotate_l_to_next_pattern(pattern):
    global l
    # Find 'pattern' in l, and rotates l so that l starts with 'pattern'.
    n = len(n)
    for i in range(n):
        if all(l[(i+ii)%n] == x for ii,x in enumerate(pattern)):
            l = l[i:] + l[:i]
            return True
    return False

l = [0,1,0,0,0,0,0,1,1,0,1,0,1]
while rotate_l_to_next_pattern([0,1]):
    l[0] = 2
```

Nathann



---

archive/issue_comments_277861.json:
```json
{
    "body": "Changed commit from **[`3a7356b`](https://github.com/sagemath/sagetrac-mirror/commit/3a7356b7b4b667ebdaa8f955452e7c8aaefa283c)** to **[`bd46c41`](https://github.com/sagemath/sagetrac-mirror/commit/bd46c41dd5f4745470ef8639a1f847b3cd64e619)**",
    "created_at": "2015-11-09T16:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277861",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3a7356b`](https://github.com/sagemath/sagetrac-mirror/commit/3a7356b7b4b667ebdaa8f955452e7c8aaefa283c)** to **[`bd46c41`](https://github.com/sagemath/sagetrac-mirror/commit/bd46c41dd5f4745470ef8639a1f847b3cd64e619)**



---

archive/issue_comments_277862.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd46c41dd5f4745470ef8639a1f847b3cd64e619\"><code>bd46c41</code></a></td><td><code>trac #19520 simplifying the code</code></td></tr></table>\n",
    "created_at": "2015-11-09T16:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277862",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd46c41dd5f4745470ef8639a1f847b3cd64e619"><code>bd46c41</code></a></td><td><code>trac #19520 simplifying the code</code></td></tr></table>




---

archive/issue_comments_277863.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI have tried to simplify my code, but I have not used your proposal.\nI have essentially kept my algo, but removed some variables, and reorganised a little bit.\nSome parts are still not very nice. Tell me what you think.",
    "created_at": "2015-11-09T16:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277863",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:38" align="right">comment:38</div>

I have tried to simplify my code, but I have not used your proposal.
I have essentially kept my algo, but removed some variables, and reorganised a little bit.
Some parts are still not very nice. Tell me what you think.



---

archive/issue_comments_277864.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72dd8ddead628d7a383f88038bfe781b1e7ad520\"><code>72dd8dd</code></a></td><td><code>trac #19520 simplify further</code></td></tr></table>\n",
    "created_at": "2015-11-09T16:17:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277864",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72dd8ddead628d7a383f88038bfe781b1e7ad520"><code>72dd8dd</code></a></td><td><code>trac #19520 simplify further</code></td></tr></table>




---

archive/issue_comments_277865.json:
```json
{
    "body": "Changed commit from **[`bd46c41`](https://github.com/sagemath/sagetrac-mirror/commit/bd46c41dd5f4745470ef8639a1f847b3cd64e619)** to **[`72dd8dd`](https://github.com/sagemath/sagetrac-mirror/commit/72dd8ddead628d7a383f88038bfe781b1e7ad520)**",
    "created_at": "2015-11-09T16:17:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277865",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bd46c41`](https://github.com/sagemath/sagetrac-mirror/commit/bd46c41dd5f4745470ef8639a1f847b3cd64e619)** to **[`72dd8dd`](https://github.com/sagemath/sagetrac-mirror/commit/72dd8ddead628d7a383f88038bfe781b1e7ad520)**



---

archive/issue_comments_277866.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nHelloooooo Fr\u00e9d\u00e9ric,\n\nThanks, this code is a bit easier to understand (and I almost get what it does)!\n\nI admit that I am still looking with longing at the `rotate_l_to_next_pattern` function I gave in an earlier comment hoping that it could fit, but so far I have a couple of questions left:\n\n1) It seems that you consider the word as a circular word, but I am not convinced that your code would notice the pattern 'in,in,in,lf' if it appeared 'wrapped around' in this way: 'lf,in,in,in,in,in,in'. Is that correct? My previous code was written to handle this situation.\n\n2) I do not understand the purpose of the second condition in `if not stack_in or (x != stack_in[-1]):`. I thought you were only looking for the pattern 'in,in,in,lf' but it seems that some additional constraint has to be added?\n\nAlso, could you add a check at the end of your function that the graph you return has the expected number of edges (as it is a planar triangulation)?\n\nThanks,\n\nNathann",
    "created_at": "2015-11-09T18:09:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277866",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:40" align="right">comment:40</div>

Helloooooo Frédéric,

Thanks, this code is a bit easier to understand (and I almost get what it does)!

I admit that I am still looking with longing at the `rotate_l_to_next_pattern` function I gave in an earlier comment hoping that it could fit, but so far I have a couple of questions left:

1) It seems that you consider the word as a circular word, but I am not convinced that your code would notice the pattern 'in,in,in,lf' if it appeared 'wrapped around' in this way: 'lf,in,in,in,in,in,in'. Is that correct? My previous code was written to handle this situation.

2) I do not understand the purpose of the second condition in `if not stack_in or (x != stack_in[-1]):`. I thought you were only looking for the pattern 'in,in,in,lf' but it seems that some additional constraint has to be added?

Also, could you add a check at the end of your function that the graph you return has the expected number of edges (as it is a planar triangulation)?

Thanks,

Nathann



---

archive/issue_comments_277867.json:
```json
{
    "body": "Changed commit from **[`72dd8dd`](https://github.com/sagemath/sagetrac-mirror/commit/72dd8ddead628d7a383f88038bfe781b1e7ad520)** to **[`85e6091`](https://github.com/sagemath/sagetrac-mirror/commit/85e609108945c191046f46af12019128f57b9104)**",
    "created_at": "2015-11-09T19:05:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277867",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`72dd8dd`](https://github.com/sagemath/sagetrac-mirror/commit/72dd8ddead628d7a383f88038bfe781b1e7ad520)** to **[`85e6091`](https://github.com/sagemath/sagetrac-mirror/commit/85e609108945c191046f46af12019128f57b9104)**



---

archive/issue_comments_277868.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85e609108945c191046f46af12019128f57b9104\"><code>85e6091</code></a></td><td><code>trac #19520 more comments in the code, use assert to check the number of edges</code></td></tr></table>\n",
    "created_at": "2015-11-09T19:05:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277868",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85e609108945c191046f46af12019128f57b9104"><code>85e6091</code></a></td><td><code>trac #19520 more comments in the code, use assert to check the number of edges</code></td></tr></table>




---

archive/issue_comments_277869.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nlo\n\n> 1) It seems that you consider the word as a circular word, but I am not convinced that your code would notice the pattern 'in,in,in,lf' if it appeared 'wrapped around' in this way: 'lf,in,in,in,in,in,in'. Is that correct? My previous code was written to handle this situation.\n\nThis is taken care near the end of the 'while' loop, which bring all final 'in' to the beginning on the word, and start again.\n \n> 2) I do not understand the purpose of the second condition in `if not stack_in or (x != stack_in[-1]):`. I thought you were only looking for the pattern 'in,in,in,lf' but it seems that some additional constraint has to be added?\n\nThis is because, when we meet in,in,in,lf, the next letter is always another in, that we must not add twice to the stack of in. Maybe one could add it there, instead, if you feel it is simpler.\n \n> Also, could you add a check at the end of your function that the graph you return has the expected number of edges (as it is a planar triangulation)?\n\ndone\n \nThanks to you!",
    "created_at": "2015-11-09T19:10:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277869",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:42" align="right">comment:42</div>

lo

> 1) It seems that you consider the word as a circular word, but I am not convinced that your code would notice the pattern 'in,in,in,lf' if it appeared 'wrapped around' in this way: 'lf,in,in,in,in,in,in'. Is that correct? My previous code was written to handle this situation.

This is taken care near the end of the 'while' loop, which bring all final 'in' to the beginning on the word, and start again.
 
> 2) I do not understand the purpose of the second condition in `if not stack_in or (x != stack_in[-1]):`. I thought you were only looking for the pattern 'in,in,in,lf' but it seems that some additional constraint has to be added?

This is because, when we meet in,in,in,lf, the next letter is always another in, that we must not add twice to the stack of in. Maybe one could add it there, instead, if you feel it is simpler.
 
> Also, could you add a check at the end of your function that the graph you return has the expected number of edges (as it is a planar triangulation)?

done
 
Thanks to you!



---

archive/issue_comments_277870.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nHmm, I am putting this to needs_work, because I now have some doubts on\nmy algorithm.. Let me think about that.",
    "created_at": "2015-11-10T09:57:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277870",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:43" align="right">comment:43</div>

Hmm, I am putting this to needs_work, because I now have some doubts on
my algorithm.. Let me think about that.



---

archive/issue_events_274168.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-10T09:57:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274168"
}
```



---

archive/issue_events_274169.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-10T09:57:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274169"
}
```



---

archive/issue_comments_277871.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eab762d1f092c6bdc2923ff8614c35416612b59f\"><code>eab762d</code></a></td><td><code>trac #19520 trying again to make the algo more clear and documented</code></td></tr></table>\n",
    "created_at": "2015-11-10T10:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277871",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eab762d1f092c6bdc2923ff8614c35416612b59f"><code>eab762d</code></a></td><td><code>trac #19520 trying again to make the algo more clear and documented</code></td></tr></table>




---

archive/issue_comments_277872.json:
```json
{
    "body": "Changed commit from **[`85e6091`](https://github.com/sagemath/sagetrac-mirror/commit/85e609108945c191046f46af12019128f57b9104)** to **[`eab762d`](https://github.com/sagemath/sagetrac-mirror/commit/eab762d1f092c6bdc2923ff8614c35416612b59f)**",
    "created_at": "2015-11-10T10:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277872",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`85e6091`](https://github.com/sagemath/sagetrac-mirror/commit/85e609108945c191046f46af12019128f57b9104)** to **[`eab762d`](https://github.com/sagemath/sagetrac-mirror/commit/eab762d1f092c6bdc2923ff8614c35416612b59f)**



---

archive/issue_comments_277873.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nok, this should be good now. And the code is getting simpler. Back to needs review.",
    "created_at": "2015-11-10T10:44:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277873",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:45" align="right">comment:45</div>

ok, this should be good now. And the code is getting simpler. Back to needs review.



---

archive/issue_events_274170.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-10T10:44:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274170"
}
```



---

archive/issue_events_274171.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-10T10:44:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274171"
}
```



---

archive/issue_comments_277874.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nYooooooo,\n\n> ok, this should be good now. And the code is getting simpler. Back to needs review.\\\n\nOkay thanks! You'll get it today.\n\nNathann",
    "created_at": "2015-11-10T10:44:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277874",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:46" align="right">comment:46</div>

Yooooooo,

> ok, this should be good now. And the code is getting simpler. Back to needs review.\

Okay thanks! You'll get it today.

Nathann



---

archive/issue_comments_277875.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nHello Fr\u00e9d\u00e9ric,\n\nYou say in a comment that 'in1,in2,in3,lf' gets replaced by 'in1,in3', but your code removes the last two elements of the stack (which should be `in2,in3`). \n\nThus, I get the impression that your code replaces 'in1,in2,in3,lf' by 'in1'.\n\nNathann",
    "created_at": "2015-11-10T22:18:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277875",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:47" align="right">comment:47</div>

Hello Frédéric,

You say in a comment that 'in1,in2,in3,lf' gets replaced by 'in1,in3', but your code removes the last two elements of the stack (which should be `in2,in3`). 

Thus, I get the impression that your code replaces 'in1,in2,in3,lf' by 'in1'.

Nathann



---

archive/issue_comments_277876.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nAt this point, yes, but just the next step is another 'in3', that gets added.",
    "created_at": "2015-11-11T08:24:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277876",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:48" align="right">comment:48</div>

At this point, yes, but just the next step is another 'in3', that gets added.



---

archive/issue_comments_277877.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nHello Fr\u00e9d\u00e9ric,\n\nI read in the paper that the order in which the replacements are performed did not matter (page 7, right before 'balanced trees').\n\nI tried to simplify the code a bit, and ended up with the commit I just pushed to this ticket's public branch. Could you give me your opinion?\n\nThanks,\n\nNathann",
    "created_at": "2015-11-12T17:40:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277877",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:49" align="right">comment:49</div>

Hello Frédéric,

I read in the paper that the order in which the replacements are performed did not matter (page 7, right before 'balanced trees').

I tried to simplify the code a bit, and ended up with the commit I just pushed to this ticket's public branch. Could you give me your opinion?

Thanks,

Nathann



---

archive/issue_comments_277878.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ebf975aa08c6a9882d428032032ba76d585d22f8\"><code>ebf975a</code></a></td><td><code>trac #19520: Merged with beta4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da83f96c67a0b9618110bc6270293e3aaa20c1f7\"><code>da83f96</code></a></td><td><code>trac #19520: Simplification attempt</code></td></tr></table>\n",
    "created_at": "2015-11-12T17:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277878",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ebf975aa08c6a9882d428032032ba76d585d22f8"><code>ebf975a</code></a></td><td><code>trac #19520: Merged with beta4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da83f96c67a0b9618110bc6270293e3aaa20c1f7"><code>da83f96</code></a></td><td><code>trac #19520: Simplification attempt</code></td></tr></table>




---

archive/issue_comments_277879.json:
```json
{
    "body": "Changed commit from **[`eab762d`](https://github.com/sagemath/sagetrac-mirror/commit/eab762d1f092c6bdc2923ff8614c35416612b59f)** to **[`da83f96`](https://github.com/sagemath/sagetrac-mirror/commit/da83f96c67a0b9618110bc6270293e3aaa20c1f7)**",
    "created_at": "2015-11-12T17:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277879",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`eab762d`](https://github.com/sagemath/sagetrac-mirror/commit/eab762d1f092c6bdc2923ff8614c35416612b59f)** to **[`da83f96`](https://github.com/sagemath/sagetrac-mirror/commit/da83f96c67a0b9618110bc6270293e3aaa20c1f7)**



---

archive/issue_comments_277880.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nok, it suits me. As far as I can tell, this is good to go\n\nThe resulting graphs can be nicely displayed by Ivan Kuckir graph viewer.",
    "created_at": "2015-11-12T19:22:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277880",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:51" align="right">comment:51</div>

ok, it suits me. As far as I can tell, this is good to go

The resulting graphs can be nicely displayed by Ivan Kuckir graph viewer.



---

archive/issue_comments_277881.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\n> ok, it suits me. As far as I can tell, this is good to go\n\nOkay. I'll do a final check once at home and it will probably be reviewed tonight.\n\n> The resulting graphs can be nicely displayed by Ivan Kuckir graph viewer.\n\nWhat is that?\n\nNathann",
    "created_at": "2015-11-12T19:25:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277881",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:52" align="right">comment:52</div>

> ok, it suits me. As far as I can tell, this is good to go

Okay. I'll do a final check once at home and it will probably be reviewed tonight.

> The resulting graphs can be nicely displayed by Ivan Kuckir graph viewer.

What is that?

Nathann



---

archive/issue_comments_277882.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\n> > The resulting graphs can be nicely displayed by Ivan Kuckir graph viewer.\n> \n> \n> What is that?\n\n#13418",
    "created_at": "2015-11-12T19:35:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277882",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:53" align="right">comment:53</div>

> > The resulting graphs can be nicely displayed by Ivan Kuckir graph viewer.
> 
> 
> What is that?

#13418



---

archive/issue_comments_277883.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nDon't you want to help me improve 'g.show(method='js')' instead? I am tring to add a zooming feature right now. It already works in d3.js but I'm not exactly a js expert.\n\nNathann",
    "created_at": "2015-11-12T19:37:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277883",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:54" align="right">comment:54</div>

Don't you want to help me improve 'g.show(method='js')' instead? I am tring to add a zooming feature right now. It already works in d3.js but I'm not exactly a js expert.

Nathann



---

archive/issue_comments_277884.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nErrrrrrr... Don't know if it is my fault, but I just noticed that `:-P`\n\n```\nsage: print graphs.RandomTriangulation(7).vertices()\n[0, 1, 2, 3, 4, 'a', 'b', ('in', 0), ('in', 1), ('in', 2), ('in', 3), ('in', 4)]\n```\n\nNathann",
    "created_at": "2015-11-13T10:16:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277884",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:55" align="right">comment:55</div>

Errrrrrr... Don't know if it is my fault, but I just noticed that `:-P`

```
sage: print graphs.RandomTriangulation(7).vertices()
[0, 1, 2, 3, 4, 'a', 'b', ('in', 0), ('in', 1), ('in', 2), ('in', 3), ('in', 4)]
```

Nathann



---

archive/issue_comments_277885.json:
```json
{
    "body": "<div id=\"comment:56\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c40e235d47cd569eee6a660c9d3a45ebbca2bc7e\"><code>c40e235</code></a></td><td><code>trac #19520 fixing the edges</code></td></tr></table>\n",
    "created_at": "2015-11-13T10:42:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277885",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:56"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c40e235d47cd569eee6a660c9d3a45ebbca2bc7e"><code>c40e235</code></a></td><td><code>trac #19520 fixing the edges</code></td></tr></table>




---

archive/issue_comments_277886.json:
```json
{
    "body": "Changed commit from **[`da83f96`](https://github.com/sagemath/sagetrac-mirror/commit/da83f96c67a0b9618110bc6270293e3aaa20c1f7)** to **[`c40e235`](https://github.com/sagemath/sagetrac-mirror/commit/c40e235d47cd569eee6a660c9d3a45ebbca2bc7e)**",
    "created_at": "2015-11-13T10:42:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277886",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`da83f96`](https://github.com/sagemath/sagetrac-mirror/commit/da83f96c67a0b9618110bc6270293e3aaa20c1f7)** to **[`c40e235`](https://github.com/sagemath/sagetrac-mirror/commit/c40e235d47cd569eee6a660c9d3a45ebbca2bc7e)**



---

archive/issue_comments_277887.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nArg... Sorry sorry, I was about to push it but I am currently experimenting with the distribution, to check if everything is 'uniform as expected'. It was my fault, and I did not expect you to fix it for me `^^;`",
    "created_at": "2015-11-13T10:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277887",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:57" align="right">comment:57</div>

Arg... Sorry sorry, I was about to push it but I am currently experimenting with the distribution, to check if everything is 'uniform as expected'. It was my fault, and I did not expect you to fix it for me `^^;`



---

archive/issue_comments_277888.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nHmmmmmmm... Okay okay. From looking at the distribution I can't say that I quite like it, but then I forgot too much about statistics to prove it in any way `:-/`\n\nNathann",
    "created_at": "2015-11-13T10:53:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277888",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:58" align="right">comment:58</div>

Hmmmmmmm... Okay okay. From looking at the distribution I can't say that I quite like it, but then I forgot too much about statistics to prove it in any way `:-/`

Nathann



---

archive/issue_comments_277889.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nThe distribution is not exactly uniform, because it is uniform for \"rooted\" triangulations, and the presence of automorphisms breaks the uniformity. But in the large size limit, only a negligible number of triangulations do have automorphisms, so this becomes a better and better approx to uniform distribution.",
    "created_at": "2015-11-13T10:56:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277889",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:59" align="right">comment:59</div>

The distribution is not exactly uniform, because it is uniform for "rooted" triangulations, and the presence of automorphisms breaks the uniformity. But in the large size limit, only a negligible number of triangulations do have automorphisms, so this becomes a better and better approx to uniform distribution.



---

archive/issue_comments_277890.json:
```json
{
    "body": "<div id=\"comment:60\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8dc5d1398ce100e34e4b4faed358df28ad9aa9d9\"><code>8dc5d13</code></a></td><td><code>trac #19520: Last-minute comments</code></td></tr></table>\n",
    "created_at": "2015-11-13T11:13:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277890",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:60"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8dc5d1398ce100e34e4b4faed358df28ad9aa9d9"><code>8dc5d13</code></a></td><td><code>trac #19520: Last-minute comments</code></td></tr></table>




---

archive/issue_comments_277891.json:
```json
{
    "body": "Changed commit from **[`c40e235`](https://github.com/sagemath/sagetrac-mirror/commit/c40e235d47cd569eee6a660c9d3a45ebbca2bc7e)** to **[`8dc5d13`](https://github.com/sagemath/sagetrac-mirror/commit/8dc5d1398ce100e34e4b4faed358df28ad9aa9d9)**",
    "created_at": "2015-11-13T11:13:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277891",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c40e235`](https://github.com/sagemath/sagetrac-mirror/commit/c40e235d47cd569eee6a660c9d3a45ebbca2bc7e)** to **[`8dc5d13`](https://github.com/sagemath/sagetrac-mirror/commit/8dc5d1398ce100e34e4b4faed358df28ad9aa9d9)**



---

archive/issue_comments_277892.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nIf you don't see anything wrong in this last commit, you can set the ticket to `positive_review`. Thanks!\n\nNathann",
    "created_at": "2015-11-13T11:13:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277892",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:61" align="right">comment:61</div>

If you don't see anything wrong in this last commit, you can set the ticket to `positive_review`. Thanks!

Nathann



---

archive/issue_comments_277893.json:
```json
{
    "body": "Changed commit from **[`8dc5d13`](https://github.com/sagemath/sagetrac-mirror/commit/8dc5d1398ce100e34e4b4faed358df28ad9aa9d9)** to **[`703d5af`](https://github.com/sagemath/sagetrac-mirror/commit/703d5af13919565cbd69155b2faccb06e049bb5b)**",
    "created_at": "2015-11-13T11:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277893",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8dc5d13`](https://github.com/sagemath/sagetrac-mirror/commit/8dc5d1398ce100e34e4b4faed358df28ad9aa9d9)** to **[`703d5af`](https://github.com/sagemath/sagetrac-mirror/commit/703d5af13919565cbd69155b2faccb06e049bb5b)**



---

archive/issue_comments_277894.json:
```json
{
    "body": "<div id=\"comment:62\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/703d5af13919565cbd69155b2faccb06e049bb5b\"><code>703d5af</code></a></td><td><code>trac #19520 a typo</code></td></tr></table>\n",
    "created_at": "2015-11-13T11:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277894",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:62"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/703d5af13919565cbd69155b2faccb06e049bb5b"><code>703d5af</code></a></td><td><code>trac #19520 a typo</code></td></tr></table>




---

archive/issue_comments_277895.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nok, let it be. Thanks a lot for your collaboration.",
    "created_at": "2015-11-13T11:16:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277895",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:63" align="right">comment:63</div>

ok, let it be. Thanks a lot for your collaboration.



---

archive/issue_events_274172.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-13T11:16:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274172"
}
```



---

archive/issue_events_274173.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-13T11:16:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274173"
}
```



---

archive/issue_events_274174.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-16T01:35:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274174"
}
```



---

archive/issue_events_274175.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-16T01:35:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274175"
}
```



---

archive/issue_comments_277896.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nMerge conflict, try again with the next beta",
    "created_at": "2015-11-16T01:35:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277896",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:64" align="right">comment:64</div>

Merge conflict, try again with the next beta



---

archive/issue_comments_277897.json:
```json
{
    "body": "<div id=\"comment:65\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82289ac6169f30dd7aa211d3430958b33f94350d\"><code>82289ac</code></a></td><td><code>Merge branch 'public/19520' into 6.10.b5</code></td></tr></table>\n",
    "created_at": "2015-11-23T08:25:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277897",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:65"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82289ac6169f30dd7aa211d3430958b33f94350d"><code>82289ac</code></a></td><td><code>Merge branch 'public/19520' into 6.10.b5</code></td></tr></table>




---

archive/issue_comments_277898.json:
```json
{
    "body": "Changed commit from **[`703d5af`](https://github.com/sagemath/sagetrac-mirror/commit/703d5af13919565cbd69155b2faccb06e049bb5b)** to **[`82289ac`](https://github.com/sagemath/sagetrac-mirror/commit/82289ac6169f30dd7aa211d3430958b33f94350d)**",
    "created_at": "2015-11-23T08:25:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277898",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`703d5af`](https://github.com/sagemath/sagetrac-mirror/commit/703d5af13919565cbd69155b2faccb06e049bb5b)** to **[`82289ac`](https://github.com/sagemath/sagetrac-mirror/commit/82289ac6169f30dd7aa211d3430958b33f94350d)**



---

archive/issue_events_274176.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-23T08:26:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274176"
}
```



---

archive/issue_events_274177.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-11-23T08:26:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274177"
}
```



---

archive/issue_comments_277899.json:
```json
{
    "body": "Changed branch from **[public/19520](https://github.com/sagemath/sagetrac-mirror/tree/public/19520)** to **[`82289ac`](https://github.com/sagemath/sagetrac-mirror/commit/82289ac6169f30dd7aa211d3430958b33f94350d)**",
    "created_at": "2015-11-24T13:01:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19520#issuecomment-277899",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/19520](https://github.com/sagemath/sagetrac-mirror/tree/public/19520)** to **[`82289ac`](https://github.com/sagemath/sagetrac-mirror/commit/82289ac6169f30dd7aa211d3430958b33f94350d)**



---

archive/issue_events_274178.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-24T13:01:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274178"
}
```



---

archive/issue_events_274179.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1c3e00040538b72ba4dbf45572df1b1730de935d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2015-11-24T13:01:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19520",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19520#event-274179"
}
```
