# Issue 19161: LatticePoset: faster is_complemented()

archive/issues_018924.json:
```json
{
    "body": "This patch makes `is_complemented()` much faster. Basically it does not compute every complement of every element, just what is needed. I.e. if `2` is a complement of `1`, it does not check if `3` and `1` are also complements; and if `4` has no complements, it returns `False` without searching complements for `5`, `6` and so on.\n\nLet `L10` bet the list of all lattices of 10 elements and `B10` be the Boolean lattice with `2^10` elements. Then without the patch it takes 7,76 seconds to run `len([L for L in L10 if L.is_complemented()])` and 101,84 seconds to run `B10.is_complemented()`. With the patch the time for both of them reduces below one second.\n\nMaybe this could be optimized further, as join and meet are commutative. However, now it is already quite fast.\n\n**CC:**  mlapointe @nadialafreniere\n\n**Branch/Commit:** [a9b0d3fa8f14e195040efc7e5e2623e8e631bedd](https://github.com/sagemath/sagetrac-mirror/commit/a9b0d3fa8f14e195040efc7e5e2623e8e631bedd)\n\n**Reviewer:** Nadia Lafreni\u00e8re\n\n**Author:** Nathann Cohen, Jori M\u00e4ntysalo\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19161\n\n",
    "closed_at": "2015-09-09T22:14:56Z",
    "created_at": "2015-09-08T07:56:36Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "LatticePoset: faster is_complemented()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19161",
    "user": "https://github.com/jm58660"
}
```
This patch makes `is_complemented()` much faster. Basically it does not compute every complement of every element, just what is needed. I.e. if `2` is a complement of `1`, it does not check if `3` and `1` are also complements; and if `4` has no complements, it returns `False` without searching complements for `5`, `6` and so on.

Let `L10` bet the list of all lattices of 10 elements and `B10` be the Boolean lattice with `2^10` elements. Then without the patch it takes 7,76 seconds to run `len([L for L in L10 if L.is_complemented()])` and 101,84 seconds to run `B10.is_complemented()`. With the patch the time for both of them reduces below one second.

Maybe this could be optimized further, as join and meet are commutative. However, now it is already quite fast.

**CC:**  mlapointe @nadialafreniere

**Branch/Commit:** [a9b0d3fa8f14e195040efc7e5e2623e8e631bedd](https://github.com/sagemath/sagetrac-mirror/commit/a9b0d3fa8f14e195040efc7e5e2623e8e631bedd)

**Reviewer:** Nadia Lafrenière

**Author:** Nathann Cohen, Jori Mäntysalo

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/19161





---

archive/issue_comments_345336.json:
```json
{
    "body": "**Branch:** [u/jmantysalo/faster_is_complemented](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/faster_is_complemented)",
    "created_at": "2015-09-08T07:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345336",
    "user": "https://github.com/jm58660"
}
```

**Branch:** [u/jmantysalo/faster_is_complemented](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/faster_is_complemented)



---

archive/issue_comments_345337.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2015-09-08T07:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345337",
    "user": "https://github.com/jm58660"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_345338.json:
```json
{
    "body": "**Commit:** [bf8fdd5dd0702a6158691183ac6a3351461a650e](https://github.com/sagemath/sagetrac-mirror/commit/bf8fdd5dd0702a6158691183ac6a3351461a650e)",
    "created_at": "2015-09-08T07:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345338",
    "user": "https://github.com/jm58660"
}
```

**Commit:** [bf8fdd5dd0702a6158691183ac6a3351461a650e](https://github.com/sagemath/sagetrac-mirror/commit/bf8fdd5dd0702a6158691183ac6a3351461a650e)



---

archive/issue_comments_345339.json:
```json
{
    "body": "<a id='comment:2'></a>\nNathann, want an easy review?\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf8fdd5dd0702a6158691183ac6a3351461a650e\">bf8fdd5</a></td><td><code>Faster is_complemented() for lattices.</code></td></tr></table>\n",
    "created_at": "2015-09-08T07:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345339",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'></a>
Nathann, want an easy review?

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf8fdd5dd0702a6158691183ac6a3351461a650e">bf8fdd5</a></td><td><code>Faster is_complemented() for lattices.</code></td></tr></table>




---

archive/issue_comments_345340.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n As playing with matrices is much faster than looping over elements, this patch makes `is_complemented()` much faster.\n \n-Let `L10` bet the list of all lattices of 10 elements and `B10` be the Boolean lattice with `2^10` elements. Then without the patch it takes 7,76 seconds to run `len([L for L in L10 if L.is_complemented()])` and 101,84 seconds to run `L.is_complemented()`. With the patch the time reduces to 0,38 and 0,23 seconds.\n+Let `L10` bet the list of all lattices of 10 elements and `B10` be the Boolean lattice with `2^10` elements. Then without the patch it takes 7,76 seconds to run `len([L for L in L10 if L.is_complemented()])` and 101,84 seconds to run `B10.is_complemented()`. With the patch the time reduces to 0,38 and 0,23 seconds.\n``````\n",
    "created_at": "2015-09-08T09:32:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345340",
    "user": "https://github.com/jm58660"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 As playing with matrices is much faster than looping over elements, this patch makes `is_complemented()` much faster.
 
-Let `L10` bet the list of all lattices of 10 elements and `B10` be the Boolean lattice with `2^10` elements. Then without the patch it takes 7,76 seconds to run `len([L for L in L10 if L.is_complemented()])` and 101,84 seconds to run `L.is_complemented()`. With the patch the time reduces to 0,38 and 0,23 seconds.
+Let `L10` bet the list of all lattices of 10 elements and `B10` be the Boolean lattice with `2^10` elements. Then without the patch it takes 7,76 seconds to run `len([L for L in L10 if L.is_complemented()])` and 101,84 seconds to run `B10.is_complemented()`. With the patch the time reduces to 0,38 and 0,23 seconds.
``````




---

archive/issue_comments_345341.json:
```json
{
    "body": "<a id='comment:4'></a>\nHMmmm... The speedup is cool, but the algorithm is slightly less clear. Is it slower to do it like that:\n\n```\nfrom itertools import izip\nfor row1,row2 in izip(meet,join):\n    for c1,c2 in izip(row1,row2):\n        if c1==0 and c2==n-1:\n            break\n    else:\n        retun False\nreturn True\n```\n\nSorry but it is a bit hard for me to try it today: I burned the two main fingers of my right hand while cooking, and I type mostly with my left hand `:-/`\n\nNathann",
    "created_at": "2015-09-08T09:59:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345341",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
HMmmm... The speedup is cool, but the algorithm is slightly less clear. Is it slower to do it like that:

```
from itertools import izip
for row1,row2 in izip(meet,join):
    for c1,c2 in izip(row1,row2):
        if c1==0 and c2==n-1:
            break
    else:
        retun False
return True
```

Sorry but it is a bit hard for me to try it today: I burned the two main fingers of my right hand while cooking, and I type mostly with my left hand `:-/`

Nathann



---

archive/issue_comments_345342.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [ncohen](#comment%3A4):\n\n>Is it slower to do it like that:\n\n\nIt depends. For `B10`-example your algorithm is clearly faster, it takes about half of the time of matrix-based algorithm. And for the `L10`-example it is twise slower. I guess that your is better, but I will check that with some more tests.\n \n> Sorry but it is a bit hard for me to try it today: I burned the two main fingers of my right hand while cooking, and I type mostly with my left hand `:-/`\n\n\nUse professionals. Eat at MacDonalds.",
    "created_at": "2015-09-08T10:47:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345342",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:5'></a>
Replying to [ncohen](#comment%3A4):

>Is it slower to do it like that:


It depends. For `B10`-example your algorithm is clearly faster, it takes about half of the time of matrix-based algorithm. And for the `L10`-example it is twise slower. I guess that your is better, but I will check that with some more tests.
 
> Sorry but it is a bit hard for me to try it today: I burned the two main fingers of my right hand while cooking, and I type mostly with my left hand `:-/`


Use professionals. Eat at MacDonalds.



---

archive/issue_comments_345343.json:
```json
{
    "body": "<a id='comment:6'></a>\n> It depends. For `B10`-example your algorithm is clearly faster, it takes about half of the time of matrix-based algorithm. And for the `L10`-example it is twise slower. I guess that your is better, but I will check that with some more tests.\n\n\nHmmmm.. I do not know what to think of it. It \"may\" answer \"no\" slightly faster, but then iterators are not free. Sigh. That would be straightforward in C with real arrays, and not those unreliable matrices `-_-`\n\n> Use professionals. Eat at MacDonalds.\n\n\nAhah.\n\nNathann",
    "created_at": "2015-09-08T10:49:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345343",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:6'></a>
> It depends. For `B10`-example your algorithm is clearly faster, it takes about half of the time of matrix-based algorithm. And for the `L10`-example it is twise slower. I guess that your is better, but I will check that with some more tests.


Hmmmm.. I do not know what to think of it. It "may" answer "no" slightly faster, but then iterators are not free. Sigh. That would be straightforward in C with real arrays, and not those unreliable matrices `-_-`

> Use professionals. Eat at MacDonalds.


Ahah.

Nathann



---

archive/issue_comments_345344.json:
```json
{
    "body": "<a id='comment:7'></a>\nThat was fast to test. Matrix-based loses by factor of 6 when going through posets of size 11.\n\n(About food: When you want a car, do you go to mine to get some iron ore? Why should it be different with food? `:=)` (But my wife has different opinion on that...))",
    "created_at": "2015-09-08T10:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345344",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:7'></a>
That was fast to test. Matrix-based loses by factor of 6 when going through posets of size 11.

(About food: When you want a car, do you go to mine to get some iron ore? Why should it be different with food? `:=)` (But my wife has different opinion on that...))



---

archive/issue_comments_345345.json:
```json
{
    "body": "<a id='comment:8'></a>\n> That was fast to test. Matrix-based loses by factor of 6 when going through posets of size 11.\n\n\nBoth are matrix based, so I do not know what you have in mind. Keep the one that is the fastest, and if it is the current one then consider it in `positive_review`, provided that tests pass (the patchbot still silent).\n\n> (About food: When you want a car, do you go to mine to get some iron ore? Why should it be different with food? `:=)` (But my wife has different opinion on that...))\n\n\nShe has a different opinion about mining? Amazing.\n\nIn the case at hand (if I may say), I do not see the need to generalize to cooking in general. Let me just hope that I will not make the same mistake, with the same hand, tomorrow morning.\n\nNathann",
    "created_at": "2015-09-08T11:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345345",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>
> That was fast to test. Matrix-based loses by factor of 6 when going through posets of size 11.


Both are matrix based, so I do not know what you have in mind. Keep the one that is the fastest, and if it is the current one then consider it in `positive_review`, provided that tests pass (the patchbot still silent).

> (About food: When you want a car, do you go to mine to get some iron ore? Why should it be different with food? `:=)` (But my wife has different opinion on that...))


She has a different opinion about mining? Amazing.

In the case at hand (if I may say), I do not see the need to generalize to cooking in general. Let me just hope that I will not make the same mistake, with the same hand, tomorrow morning.

Nathann



---

archive/issue_comments_345346.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8853ed85f14cb8b3d2a9046d31505bf81223c7d\">b8853ed</a></td><td><code>Faster algorithm, thanks to Nathann Cohen.</code></td></tr></table>\n",
    "created_at": "2015-09-08T11:10:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345346",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8853ed85f14cb8b3d2a9046d31505bf81223c7d">b8853ed</a></td><td><code>Faster algorithm, thanks to Nathann Cohen.</code></td></tr></table>




---

archive/issue_comments_345347.json:
```json
{
    "body": "**Changing commit** from \"[bf8fdd5dd0702a6158691183ac6a3351461a650e](https://github.com/sagemath/sagetrac-mirror/commit/bf8fdd5dd0702a6158691183ac6a3351461a650e)\" to \"[b8853ed85f14cb8b3d2a9046d31505bf81223c7d](https://github.com/sagemath/sagetrac-mirror/commit/b8853ed85f14cb8b3d2a9046d31505bf81223c7d)\".",
    "created_at": "2015-09-08T11:10:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345347",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bf8fdd5dd0702a6158691183ac6a3351461a650e](https://github.com/sagemath/sagetrac-mirror/commit/bf8fdd5dd0702a6158691183ac6a3351461a650e)" to "[b8853ed85f14cb8b3d2a9046d31505bf81223c7d](https://github.com/sagemath/sagetrac-mirror/commit/b8853ed85f14cb8b3d2a9046d31505bf81223c7d)".



---

archive/issue_comments_345348.json:
```json
{
    "body": "**Changing author** from \"Jori M\u00e4ntysalo\" to \"Nathann Cohen, Jori M\u00e4ntysalo\".",
    "created_at": "2015-09-08T11:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345348",
    "user": "https://github.com/jm58660"
}
```

**Changing author** from "Jori Mäntysalo" to "Nathann Cohen, Jori Mäntysalo".



---

archive/issue_comments_345349.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n As playing with matrices is much faster than looping over elements, this patch makes `is_complemented()` much faster.\n \n-Let `L10` bet the list of all lattices of 10 elements and `B10` be the Boolean lattice with `2^10` elements. Then without the patch it takes 7,76 seconds to run `len([L for L in L10 if L.is_complemented()])` and 101,84 seconds to run `B10.is_complemented()`. With the patch the time reduces to 0,38 and 0,23 seconds.\n+Let `L10` bet the list of all lattices of 10 elements and `B10` be the Boolean lattice with `2^10` elements. Then without the patch it takes 7,76 seconds to run `len([L for L in L10 if L.is_complemented()])` and 101,84 seconds to run `B10.is_complemented()`. With the patch the time for both of them reduces below one second.\n``````\n",
    "created_at": "2015-09-08T11:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345349",
    "user": "https://github.com/jm58660"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 As playing with matrices is much faster than looping over elements, this patch makes `is_complemented()` much faster.
 
-Let `L10` bet the list of all lattices of 10 elements and `B10` be the Boolean lattice with `2^10` elements. Then without the patch it takes 7,76 seconds to run `len([L for L in L10 if L.is_complemented()])` and 101,84 seconds to run `B10.is_complemented()`. With the patch the time reduces to 0,38 and 0,23 seconds.
+Let `L10` bet the list of all lattices of 10 elements and `B10` be the Boolean lattice with `2^10` elements. Then without the patch it takes 7,76 seconds to run `len([L for L in L10 if L.is_complemented()])` and 101,84 seconds to run `B10.is_complemented()`. With the patch the time for both of them reduces below one second.
``````




---

archive/issue_comments_345350.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [ncohen](#comment%3A8):\n\n> > That was fast to test. Matrix-based loses by factor of 6 when going through posets of size 11.\n\n> \n> Both are matrix based, so I do not know what you have in mind.\n\n\nI meant that mine was \"matrix-based\", i.e. the speed come from speed of matrix operations.\n\n> Keep the one that is the fastest\n\n\nYour implementation is faster.\n\nM\u00e9lodie, can you review this? The code is now mostly from Nathann, but if it does not work, it might also be that I have made a mistake.\n\n> She has a different opinion about mining? Amazing.\n\n\n`;=)`",
    "created_at": "2015-09-08T11:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345350",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:10'></a>
Replying to [ncohen](#comment%3A8):

> > That was fast to test. Matrix-based loses by factor of 6 when going through posets of size 11.

> 
> Both are matrix based, so I do not know what you have in mind.


I meant that mine was "matrix-based", i.e. the speed come from speed of matrix operations.

> Keep the one that is the fastest


Your implementation is faster.

Mélodie, can you review this? The code is now mostly from Nathann, but if it does not work, it might also be that I have made a mistake.

> She has a different opinion about mining? Amazing.


`;=)`



---

archive/issue_comments_345351.json:
```json
{
    "body": "<a id='comment:11'></a>\nHMmmmm... Factor 6?... `O_o`\n\nWeird, weird... `:-/`",
    "created_at": "2015-09-08T11:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345351",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>
HMmmmm... Factor 6?... `O_o`

Weird, weird... `:-/`



---

archive/issue_comments_345352.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [ncohen](#comment%3A11):\n> HMmmmm... Factor 6?... `O_o`\n> \n> Weird, weird... `:-/`\n\n\nNot really. Original code checks ALL element pairs. My code takes one element, and kind of check it against all other elements, and stops when an element has no complement. Your code jumps to next element when it founds a complement and return `False` if it found an element without the complement.\n\nEven your code is not optimal, because meet and join are commutative operations. But it may be slower to optimize that, because the code would be more complicated.\n\nIn any case, this is now quite fast and IMO ready for review.",
    "created_at": "2015-09-08T12:34:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345352",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:12'></a>
Replying to [ncohen](#comment%3A11):
> HMmmmm... Factor 6?... `O_o`
> 
> Weird, weird... `:-/`


Not really. Original code checks ALL element pairs. My code takes one element, and kind of check it against all other elements, and stops when an element has no complement. Your code jumps to next element when it founds a complement and return `False` if it found an element without the complement.

Even your code is not optimal, because meet and join are commutative operations. But it may be slower to optimize that, because the code would be more complicated.

In any case, this is now quite fast and IMO ready for review.



---

archive/issue_comments_345353.json:
```json
{
    "body": "<a id='comment:13'></a>\nHi Jori,\nI'm M\u00e9lodie's colleague and I reviewed the graph documentation ticket with her.\n\nAbout your new ticket, now.\n\n```diff\n+        n = self.cardinality()-1\n+        for row1,row2 in izip(mt, jn):\n+            for c1,c2 in izip(row1,row2):\n+                if c1==0 and c2==n:\n```\n\nYou should respect the Python / Sage conventions and add spaces before and after binary operators of the lowest priority : `self.cardinality() - 1`, `c1  == 0`, etc. This includes equality and assignments.\n\nAs well, there should be spaces after every coma sign:  `row1, row2`, `c1, c2`, `izip(row1, row2)`. For more info on these conventions, see http://doc.sagemath.org/html/en/developer/coding_basics.html#python-code-style",
    "created_at": "2015-09-08T17:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345353",
    "user": "https://github.com/nadialafreniere"
}
```

<a id='comment:13'></a>
Hi Jori,
I'm Mélodie's colleague and I reviewed the graph documentation ticket with her.

About your new ticket, now.

```diff
+        n = self.cardinality()-1
+        for row1,row2 in izip(mt, jn):
+            for c1,c2 in izip(row1,row2):
+                if c1==0 and c2==n:
```

You should respect the Python / Sage conventions and add spaces before and after binary operators of the lowest priority : `self.cardinality() - 1`, `c1  == 0`, etc. This includes equality and assignments.

As well, there should be spaces after every coma sign:  `row1, row2`, `c1, c2`, `izip(row1, row2)`. For more info on these conventions, see http://doc.sagemath.org/html/en/developer/coding_basics.html#python-code-style



---

archive/issue_comments_345354.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2015-09-08T17:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345354",
    "user": "https://github.com/nadialafreniere"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_345355.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec6f18a7290517028a45f216f4b6ae90a3157f7c\">ec6f18a</a></td><td><code>Reviewers comment about Python conventions.</code></td></tr></table>\n",
    "created_at": "2015-09-08T18:32:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345355",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec6f18a7290517028a45f216f4b6ae90a3157f7c">ec6f18a</a></td><td><code>Reviewers comment about Python conventions.</code></td></tr></table>




---

archive/issue_comments_345356.json:
```json
{
    "body": "**Changing commit** from \"[b8853ed85f14cb8b3d2a9046d31505bf81223c7d](https://github.com/sagemath/sagetrac-mirror/commit/b8853ed85f14cb8b3d2a9046d31505bf81223c7d)\" to \"[ec6f18a7290517028a45f216f4b6ae90a3157f7c](https://github.com/sagemath/sagetrac-mirror/commit/ec6f18a7290517028a45f216f4b6ae90a3157f7c)\".",
    "created_at": "2015-09-08T18:32:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345356",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b8853ed85f14cb8b3d2a9046d31505bf81223c7d](https://github.com/sagemath/sagetrac-mirror/commit/b8853ed85f14cb8b3d2a9046d31505bf81223c7d)" to "[ec6f18a7290517028a45f216f4b6ae90a3157f7c](https://github.com/sagemath/sagetrac-mirror/commit/ec6f18a7290517028a45f216f4b6ae90a3157f7c)".



---

archive/issue_comments_345357.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [nadialafreniere](#comment%3A13):\n\n> I'm M\u00e9lodie's colleague and I reviewed the graph documentation ticket with her.\n\n\nThanks! I did the changes.",
    "created_at": "2015-09-08T18:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345357",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:15'></a>
Replying to [nadialafreniere](#comment%3A13):

> I'm Mélodie's colleague and I reviewed the graph documentation ticket with her.


Thanks! I did the changes.



---

archive/issue_comments_345358.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2015-09-08T18:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345358",
    "user": "https://github.com/jm58660"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_345359.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n-As playing with matrices is much faster than looping over elements, this patch makes `is_complemented()` much faster.\n+This patch makes `is_complemented()` much faster. Basically it does not compute every complement of every element, just what is needed. I.e. if `2` is a complement of `1`, it does not check if `3` and `1` are also complements; and if `4` has no complements, it returns `False` without searching complements for `5`, `6` and so on.\n \n Let `L10` bet the list of all lattices of 10 elements and `B10` be the Boolean lattice with `2^10` elements. Then without the patch it takes 7,76 seconds to run `len([L for L in L10 if L.is_complemented()])` and 101,84 seconds to run `B10.is_complemented()`. With the patch the time for both of them reduces below one second.\n+\n+Maybe this could be optimized further, as join and meet are commutative. However, now it is already quite fast.\n``````\n",
    "created_at": "2015-09-08T18:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345359",
    "user": "https://github.com/jm58660"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
-As playing with matrices is much faster than looping over elements, this patch makes `is_complemented()` much faster.
+This patch makes `is_complemented()` much faster. Basically it does not compute every complement of every element, just what is needed. I.e. if `2` is a complement of `1`, it does not check if `3` and `1` are also complements; and if `4` has no complements, it returns `False` without searching complements for `5`, `6` and so on.
 
 Let `L10` bet the list of all lattices of 10 elements and `B10` be the Boolean lattice with `2^10` elements. Then without the patch it takes 7,76 seconds to run `len([L for L in L10 if L.is_complemented()])` and 101,84 seconds to run `B10.is_complemented()`. With the patch the time for both of them reduces below one second.
+
+Maybe this could be optimized further, as join and meet are commutative. However, now it is already quite fast.
``````




---

archive/issue_comments_345360.json:
```json
{
    "body": "<a id='comment:16'></a>\nMost of the things look fine. One last thing: I know you didn't touch to this, but the examples should also respect the python conventions. Therefore, I'm hoping to see a space after each of the commas.\n\n```\nsage: L = LatticePoset({0:[1,2,3],1:[4],2:[4],3:[4]})\n```\n\n```\nsage: L = LatticePoset({0:[1,2],1:[3],2:[3],3:[4]})\n```\n\nshould look like\n\n```\nsage: L = LatticePoset({0:[1, 2, 3], 1:[4], 2:[4], 3:[4]})\n```",
    "created_at": "2015-09-08T21:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345360",
    "user": "https://github.com/nadialafreniere"
}
```

<a id='comment:16'></a>
Most of the things look fine. One last thing: I know you didn't touch to this, but the examples should also respect the python conventions. Therefore, I'm hoping to see a space after each of the commas.

```
sage: L = LatticePoset({0:[1,2,3],1:[4],2:[4],3:[4]})
```

```
sage: L = LatticePoset({0:[1,2],1:[3],2:[3],3:[4]})
```

should look like

```
sage: L = LatticePoset({0:[1, 2, 3], 1:[4], 2:[4], 3:[4]})
```



---

archive/issue_comments_345361.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2015-09-08T21:37:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345361",
    "user": "https://github.com/nadialafreniere"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_345362.json:
```json
{
    "body": "**Changing commit** from \"[ec6f18a7290517028a45f216f4b6ae90a3157f7c](https://github.com/sagemath/sagetrac-mirror/commit/ec6f18a7290517028a45f216f4b6ae90a3157f7c)\" to \"[a9b0d3fa8f14e195040efc7e5e2623e8e631bedd](https://github.com/sagemath/sagetrac-mirror/commit/a9b0d3fa8f14e195040efc7e5e2623e8e631bedd)\".",
    "created_at": "2015-09-09T04:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345362",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ec6f18a7290517028a45f216f4b6ae90a3157f7c](https://github.com/sagemath/sagetrac-mirror/commit/ec6f18a7290517028a45f216f4b6ae90a3157f7c)" to "[a9b0d3fa8f14e195040efc7e5e2623e8e631bedd](https://github.com/sagemath/sagetrac-mirror/commit/a9b0d3fa8f14e195040efc7e5e2623e8e631bedd)".



---

archive/issue_comments_345363.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9b0d3fa8f14e195040efc7e5e2623e8e631bedd\">a9b0d3f</a></td><td><code>Spaces to examples of is_complemented_lattice().</code></td></tr></table>\n",
    "created_at": "2015-09-09T04:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345363",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9b0d3fa8f14e195040efc7e5e2623e8e631bedd">a9b0d3f</a></td><td><code>Spaces to examples of is_complemented_lattice().</code></td></tr></table>




---

archive/issue_comments_345364.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2015-09-09T04:04:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345364",
    "user": "https://github.com/jm58660"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_345365.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [nadialafreniere](#comment%3A16):\n\n> - - but the examples should also respect the python conventions. Therefore, I'm hoping to see a space after each of the commas.\n\n\nDone this.",
    "created_at": "2015-09-09T04:04:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345365",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:19'></a>
Replying to [nadialafreniere](#comment%3A16):

> - - but the examples should also respect the python conventions. Therefore, I'm hoping to see a space after each of the commas.


Done this.



---

archive/issue_comments_345366.json:
```json
{
    "body": "**Reviewer:** Nadia Lafreni\u00e8re",
    "created_at": "2015-09-09T05:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345366",
    "user": "https://github.com/nadialafreniere"
}
```

**Reviewer:** Nadia Lafrenière



---

archive/issue_comments_345367.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2015-09-09T05:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345367",
    "user": "https://github.com/nadialafreniere"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_345368.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [jmantysalo](#comment%3A19):\n> Replying to [nadialafreniere](#comment%3A16):\n> \n> > - - but the examples should also respect the python conventions. Therefore, I'm hoping to see a space after each of the commas.\n \n> \n> Done this.\n\n\n\n\nEverything looks fine!",
    "created_at": "2015-09-09T05:25:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345368",
    "user": "https://github.com/nadialafreniere"
}
```

<a id='comment:21'></a>
Replying to [jmantysalo](#comment%3A19):
> Replying to [nadialafreniere](#comment%3A16):
> 
> > - - but the examples should also respect the python conventions. Therefore, I'm hoping to see a space after each of the commas.
 
> 
> Done this.




Everything looks fine!



---

archive/issue_comments_345369.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2015-09-09T22:14:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345369",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_events_060512.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-09-09T22:14:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19161#event-60512"
}
```



---

archive/issue_comments_345370.json:
```json
{
    "body": "**Changing branch** from \"[u/jmantysalo/faster_is_complemented](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/faster_is_complemented)\" to \"[a9b0d3fa8f14e195040efc7e5e2623e8e631bedd](https://github.com/sagemath/sagetrac-mirror/commit/a9b0d3fa8f14e195040efc7e5e2623e8e631bedd)\".",
    "created_at": "2015-09-09T22:14:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19161",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19161#issuecomment-345370",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jmantysalo/faster_is_complemented](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/faster_is_complemented)" to "[a9b0d3fa8f14e195040efc7e5e2623e8e631bedd](https://github.com/sagemath/sagetrac-mirror/commit/a9b0d3fa8f14e195040efc7e5e2623e8e631bedd)".
