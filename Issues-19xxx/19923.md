# Issue 19923: Tab completion in interpreters is borked

archive/issues_019686.json:
```json
{
    "body": "CC:  @dimpase\n\nTab completion broke in an IPython update; This fixes it:\n\n```\nsage: G = gap.SymmetricGroup(3)\nsage: G.[TAB]\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/19923\n\n",
    "closed_at": "2016-02-18T19:51:10Z",
    "created_at": "2016-01-20T23:24:46Z",
    "labels": [
        "component: interfaces",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "Tab completion in interpreters is borked",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19923",
    "user": "https://github.com/vbraun"
}
```
CC:  @dimpase

Tab completion broke in an IPython update; This fixes it:

```
sage: G = gap.SymmetricGroup(3)
sage: G.[TAB]
```

Issue created by migration from https://trac.sagemath.org/ticket/19923





---

archive/issue_comments_270339.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2016-01-21T00:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270339",
    "user": "https://github.com/vbraun"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_270340.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-01-21T00:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270340",
    "user": "https://github.com/vbraun"
}
```

New commits:



---

archive/issue_comments_270341.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to interfaces.",
    "created_at": "2016-01-21T00:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270341",
    "user": "https://github.com/vbraun"
}
```

Changing component from PLEASE CHANGE to interfaces.



---

archive/issue_comments_270342.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-01-21T00:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270342",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_270343.json:
```json
{
    "body": "The `__dir__` of `gap.SymmetricGroup(3)` is actually\n\n```\ndef __dir__(self):\n    from sage.structure.parent import dir_with_other_class\n    return dir_with_other_class(self, self.parent().category().element_class)\n```\nand does not inherit from `ExtraTabCompletion`\n\n```\nsage: G = gap.SymmetricGroup(3)\nsage: from sage.interfaces.tab_completion import ExtraTabCompletion\nsage: isinstance(G, ExtraTabCompletion)\nFalse\n```",
    "created_at": "2016-01-21T11:40:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270343",
    "user": "https://github.com/videlec"
}
```

The `__dir__` of `gap.SymmetricGroup(3)` is actually

```
def __dir__(self):
    from sage.structure.parent import dir_with_other_class
    return dir_with_other_class(self, self.parent().category().element_class)
```
and does not inherit from `ExtraTabCompletion`

```
sage: G = gap.SymmetricGroup(3)
sage: from sage.interfaces.tab_completion import ExtraTabCompletion
sage: isinstance(G, ExtraTabCompletion)
False
```



---

archive/issue_comments_270344.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-01-21T11:40:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270344",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_270345.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-21T12:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270345",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_270346.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-23T20:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270346",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_270347.json:
```json
{
    "body": "Symbolics doctests fixed",
    "created_at": "2016-01-23T20:45:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270347",
    "user": "https://github.com/vbraun"
}
```

Symbolics doctests fixed



---

archive/issue_comments_270348.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-01-23T20:45:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270348",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_270349.json:
```json
{
    "body": "Note (not exactly the scope of this ticket):\n\nThese are still broken (worked with sage-6.8)\n\n```\nsage: G = libgap.SymmetricGroup(3)\nsage: G.<TAB>\nsage: units.area.<TAB>\n```\n\nDo you know whether it would be possible to design a test for testing tab completion (not indirectly)?",
    "created_at": "2016-01-24T15:22:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270349",
    "user": "https://github.com/videlec"
}
```

Note (not exactly the scope of this ticket):

These are still broken (worked with sage-6.8)

```
sage: G = libgap.SymmetricGroup(3)
sage: G.<TAB>
sage: units.area.<TAB>
```

Do you know whether it would be possible to design a test for testing tab completion (not indirectly)?



---

archive/issue_comments_270350.json:
```json
{
    "body": "Libgap tab completion is #19917\n\nThere is no need for a test beyond extending `__dir__`, since there is no magical IPython-only method any more its just going to work in any system that does tab completion.",
    "created_at": "2016-01-24T16:11:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270350",
    "user": "https://github.com/vbraun"
}
```

Libgap tab completion is #19917

There is no need for a test beyond extending `__dir__`, since there is no magical IPython-only method any more its just going to work in any system that does tab completion.



---

archive/issue_comments_270351.json:
```json
{
    "body": "Dima, can you review this ticket too? Its just the analog of #19917 for interpreters.",
    "created_at": "2016-02-14T11:56:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270351",
    "user": "https://github.com/vbraun"
}
```

Dima, can you review this ticket too? Its just the analog of #19917 for interpreters.



---

archive/issue_comments_270352.json:
```json
{
    "body": "Could you please add some documentation to the top of `src/sage/interfaces/tab_completion.py`? \nE.g. I needed to google for `Mixin` :-)",
    "created_at": "2016-02-14T18:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270352",
    "user": "https://github.com/dimpase"
}
```

Could you please add some documentation to the top of `src/sage/interfaces/tab_completion.py`? 
E.g. I needed to google for `Mixin` :-)



---

archive/issue_comments_270353.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-17T21:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270353",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_270354.json:
```json
{
    "body": "Done",
    "created_at": "2016-02-17T21:37:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270354",
    "user": "https://github.com/vbraun"
}
```

Done



---

archive/issue_comments_270355.json:
```json
{
    "body": "OK, good.",
    "created_at": "2016-02-18T08:04:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270355",
    "user": "https://github.com/dimpase"
}
```

OK, good.



---

archive/issue_comments_270356.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-18T08:04:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270356",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_270357.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-02-18T19:51:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19923#issuecomment-270357",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_054404.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-18T19:51:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19923",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19923#event-54404"
}
```
