# Issue 19163: LatticePoset creation, better error reporting

archive/issues_018926.json:
```json
{
    "body": "There is an error in current exception for join-semilattices:\n\n```\nP = Poset({'a': ['b', 'c'], 'b': ['d', 'e'], 'c': ['d', 'e'], 'd': ['f'], 'e': ['f']})\nP._hasse_diagram._meet\nP._hasse_diagram._join\n```\n\ngives\n\n```\nValueError: No meet for x=4 y=3\nValueError: No join for x=4 y=3\n```\n\ni.e. the message is wrong for `_join`.\n\nWhat's more, currently sage outputs only `ValueError: Not a lattice.` when creating a lattice. After this it will output `ValueError: Not a lattice: no meet for e and d.`\n\n\nCC:  @dkrenn\n\nBranch/Commit: 7d6e21b7e78e17d84efc4d2dd5e6444fc226ea85\n\nReviewer: Travis Scrimshaw, Jori M\u00e4ntysalo\n\nAuthor: Jori M\u00e4ntysalo, Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19163\n\n",
    "closed_at": "2016-09-17T15:25:51Z",
    "created_at": "2015-09-08T11:38:57Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "LatticePoset creation, better error reporting",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19163",
    "user": "https://github.com/jm58660"
}
```
There is an error in current exception for join-semilattices:

```
P = Poset({'a': ['b', 'c'], 'b': ['d', 'e'], 'c': ['d', 'e'], 'd': ['f'], 'e': ['f']})
P._hasse_diagram._meet
P._hasse_diagram._join
```

gives

```
ValueError: No meet for x=4 y=3
ValueError: No join for x=4 y=3
```

i.e. the message is wrong for `_join`.

What's more, currently sage outputs only `ValueError: Not a lattice.` when creating a lattice. After this it will output `ValueError: Not a lattice: no meet for e and d.`


CC:  @dkrenn

Branch/Commit: 7d6e21b7e78e17d84efc4d2dd5e6444fc226ea85

Reviewer: Travis Scrimshaw, Jori Mäntysalo

Author: Jori Mäntysalo, Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19163





---

archive/issue_comments_275898.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-13T07:44:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275898",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_275899.json:
```json
{
    "body": "<a id='comment:3'></a>This is ready for comments, even if it is not ready for review.",
    "created_at": "2015-11-13T07:46:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275899",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:3'></a>This is ready for comments, even if it is not ready for review.



---

archive/issue_comments_275900.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-13T08:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275900",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_275901.json:
```json
{
    "body": "<a id='comment:5'></a>Jeroen, can you check this until I do more? I.e. is `LatticeMeetException` done as it should?\n\nThis is kind of first time when I add something more than new functions to existing classes.",
    "created_at": "2015-11-24T11:09:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275901",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:5'></a>Jeroen, can you check this until I do more? I.e. is `LatticeMeetException` done as it should?

This is kind of first time when I add something more than new functions to existing classes.



---

archive/issue_comments_275902.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 jmantysalo]:\n> Jeroen, can you check this until I do more? I.e. is `LatticeMeetException` done as it should?\n\n\nPing...",
    "created_at": "2015-12-11T08:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275902",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:6'></a>Replying to [comment:5 jmantysalo]:
> Jeroen, can you check this until I do more? I.e. is `LatticeMeetException` done as it should?


Ping...



---

archive/issue_comments_275903.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-02-10T11:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275903",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_275904.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-02-10T11:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275904",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_events_053225.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-02-10T11:15:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "milestone": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19163#event-53225"
}
```



---

archive/issue_comments_275905.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,13 @@\n-Because `Poset()` creates the empty poset, I think that `LatticePoset()` should create the empty lattice.\n+Before this patch sage outputs only `ValueError: Not a lattice.` from\n \n-Error reporting is irritating. `LatticePoset({'a':['b','c']})` should say \"no top element\" of \"no join for 'b' and 'c'\" or something similar.\n+```\n+LatticePoset({'a':['b', 'c'], 'b': ['d', 'e'], 'c': ['d', 'e'], 'd': ['f'], 'e': ['f']})\n+```\n+\n+After this it will output `ValueError: Not a lattice: no meet for e and d.` Same applies to semilattices.\n+\n+And because `Poset()` returns the empty poset, this changes `LatticePoset()` to return the empty lattice.\n+\n \n Comment: 1\n \n``````\n",
    "created_at": "2016-02-10T11:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275905",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,13 @@
-Because `Poset()` creates the empty poset, I think that `LatticePoset()` should create the empty lattice.
+Before this patch sage outputs only `ValueError: Not a lattice.` from
 
-Error reporting is irritating. `LatticePoset({'a':['b','c']})` should say "no top element" of "no join for 'b' and 'c'" or something similar.
+```
+LatticePoset({'a':['b', 'c'], 'b': ['d', 'e'], 'c': ['d', 'e'], 'd': ['f'], 'e': ['f']})
+```
+
+After this it will output `ValueError: Not a lattice: no meet for e and d.` Same applies to semilattices.
+
+And because `Poset()` returns the empty poset, this changes `LatticePoset()` to return the empty lattice.
+
 
 Comment: 1
 
``````




---

archive/issue_comments_275906.json:
```json
{
    "body": "<a id='comment:8'></a>As I got no comments for custom error class, I did this with string manipulation.",
    "created_at": "2016-02-10T11:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275906",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:8'></a>As I got no comments for custom error class, I did this with string manipulation.



---

archive/issue_comments_275907.json:
```json
{
    "body": "<a id='comment:9'></a>Daniel? This is more trivial than you could think from number of lines.",
    "created_at": "2016-02-12T08:27:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275907",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:9'></a>Daniel? This is more trivial than you could think from number of lines.



---

archive/issue_comments_275908.json:
```json
{
    "body": "<a id='comment:10'></a>I think this approach of parsing the error message just makes things needlessly more complicated (and takes extra time if you, say, want to check if a set of posets are meet-semilattices). Instead, I would just allow the error from calling `self._hasse_diagram.meet_matrix()` to propagate up.",
    "created_at": "2016-02-18T19:06:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275908",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>I think this approach of parsing the error message just makes things needlessly more complicated (and takes extra time if you, say, want to check if a set of posets are meet-semilattices). Instead, I would just allow the error from calling `self._hasse_diagram.meet_matrix()` to propagate up.



---

archive/issue_comments_275909.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:10 tscrim]:\n> I think this approach of parsing the error message just makes things needlessly more complicated (and takes extra time if you, say, want to check if a set of posets are meet-semilattices).\n\n\n?? Error message is only parsed when there is a message. And to just check use `is_meet_semilattice()`. I can't see how this would slow down anything.\n\n> Instead, I would just allow the error from calling `self._hasse_diagram.meet_matrix()` to propagate up.\n\n\nIt is very irritating if the elements of the lattice are integers. Then we may got error saying that 5 and 8 have no meet, when actually it is 6 and 10 that have no meet.",
    "created_at": "2016-02-18T20:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275909",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:11'></a>Replying to [comment:10 tscrim]:
> I think this approach of parsing the error message just makes things needlessly more complicated (and takes extra time if you, say, want to check if a set of posets are meet-semilattices).


?? Error message is only parsed when there is a message. And to just check use `is_meet_semilattice()`. I can't see how this would slow down anything.

> Instead, I would just allow the error from calling `self._hasse_diagram.meet_matrix()` to propagate up.


It is very irritating if the elements of the lattice are integers. Then we may got error saying that 5 and 8 have no meet, when actually it is 6 and 10 that have no meet.



---

archive/issue_comments_275910.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 jmantysalo]:\n> Replying to [comment:10 tscrim]:\n> > I think this approach of parsing the error message just makes things needlessly more complicated (and takes extra time if you, say, want to check if a set of posets are meet-semilattices).\n\n> \n> ?? Error message is only parsed when there is a message. And to just check use `is_meet_semilattice()`. I can't see how this would slow down anything.\n\n\nSuppose you iterate over a collection of posets and you want to determine which of them are (semi)lattices. Then for those that are lattices, you do some extra processing on them. Being Pythonic (and to avoid double checking things), you just cast the poset to a lattice and do nothing if an error is thrown. That is where the slowdown comes in.\n\n> > Instead, I would just allow the error from calling `self._hasse_diagram.meet_matrix()` to propagate up.\n\n> \n> It is very irritating if the elements of the lattice are integers. Then we may got error saying that 5 and 8 have no meet, when actually it is 6 and 10 that have no meet.\n\n\nThat is a good point. However, I would much rather have a less informative error message than the (IMO fugly) string parsing code you currently have. It seems like Volker's suggestion of doing a custom error class will be what you want (if you think it is important to see (only) one instance where the lattice property fails).",
    "created_at": "2016-02-18T23:24:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275910",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>Replying to [comment:11 jmantysalo]:
> Replying to [comment:10 tscrim]:
> > I think this approach of parsing the error message just makes things needlessly more complicated (and takes extra time if you, say, want to check if a set of posets are meet-semilattices).

> 
> ?? Error message is only parsed when there is a message. And to just check use `is_meet_semilattice()`. I can't see how this would slow down anything.


Suppose you iterate over a collection of posets and you want to determine which of them are (semi)lattices. Then for those that are lattices, you do some extra processing on them. Being Pythonic (and to avoid double checking things), you just cast the poset to a lattice and do nothing if an error is thrown. That is where the slowdown comes in.

> > Instead, I would just allow the error from calling `self._hasse_diagram.meet_matrix()` to propagate up.

> 
> It is very irritating if the elements of the lattice are integers. Then we may got error saying that 5 and 8 have no meet, when actually it is 6 and 10 that have no meet.


That is a good point. However, I would much rather have a less informative error message than the (IMO fugly) string parsing code you currently have. It seems like Volker's suggestion of doing a custom error class will be what you want (if you think it is important to see (only) one instance where the lattice property fails).



---

archive/issue_comments_275911.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:12 tscrim]:\n \n> Suppose you iterate over a collection of posets and you want to determine which of them are (semi)lattices. Then for those that are lattices, you do some extra processing on them. Being Pythonic (and to avoid double checking things), you just cast the poset to a lattice and do nothing if an error is thrown. That is where the slowdown comes in.\n\n\nYou mean something like\n\n```\nn = 0\nfor P in PP:\n    try:\n        if LatticePoset(P).cardinality() != 0:\n            n += 1\n    except:\n        pass\n```\n\nwhere `PP` is precomputed list of posets. This error reporting is `O(1)` and checking if a poset is lattice is `O(n^2.5)`. So this would be a question only if most posets are non-lattices that are easily recognized (like a poset that is not bounded). I will run some timing on this.\n\n> > > Instead, I would just allow the error from calling `self._hasse_diagram.meet_matrix()` to propagate up.\n\n> > \n> > It is very irritating if the elements of the lattice are integers. Then we may got error saying that 5 and 8 have no meet, when actually it is 6 and 10 that have no meet.\n\n> \n> That is a good point. However, I would much rather have a less informative error message than the (IMO fugly) string parsing code you currently have. It seems like Volker's suggestion of doing a custom error class will be what you want (if you think it is important to see (only) one instance where the lattice property fails).\n\n\nI guess this conflicts with performance you cared in a paragraph just before this one `:=)`. I suppose creating an object is slower than manipulating a string.\n\nActually I did a code using specific error class and tried to get comments on it, to be sure that I did nothing stupid. But as I got no comments, I decided to do this in a way that I know to work. (And added tests, so that if somebody changes the error string at `hasse_diagram.py` it will be noticed.)",
    "created_at": "2016-02-19T08:16:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275911",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:13'></a>Replying to [comment:12 tscrim]:
 
> Suppose you iterate over a collection of posets and you want to determine which of them are (semi)lattices. Then for those that are lattices, you do some extra processing on them. Being Pythonic (and to avoid double checking things), you just cast the poset to a lattice and do nothing if an error is thrown. That is where the slowdown comes in.


You mean something like

```
n = 0
for P in PP:
    try:
        if LatticePoset(P).cardinality() != 0:
            n += 1
    except:
        pass
```

where `PP` is precomputed list of posets. This error reporting is `O(1)` and checking if a poset is lattice is `O(n^2.5)`. So this would be a question only if most posets are non-lattices that are easily recognized (like a poset that is not bounded). I will run some timing on this.

> > > Instead, I would just allow the error from calling `self._hasse_diagram.meet_matrix()` to propagate up.

> > 
> > It is very irritating if the elements of the lattice are integers. Then we may got error saying that 5 and 8 have no meet, when actually it is 6 and 10 that have no meet.

> 
> That is a good point. However, I would much rather have a less informative error message than the (IMO fugly) string parsing code you currently have. It seems like Volker's suggestion of doing a custom error class will be what you want (if you think it is important to see (only) one instance where the lattice property fails).


I guess this conflicts with performance you cared in a paragraph just before this one `:=)`. I suppose creating an object is slower than manipulating a string.

Actually I did a code using specific error class and tried to get comments on it, to be sure that I did nothing stupid. But as I got no comments, I decided to do this in a way that I know to work. (And added tests, so that if somebody changes the error string at `hasse_diagram.py` it will be noticed.)



---

archive/issue_comments_275912.json:
```json
{
    "body": "<a id='comment:14'></a>I tested with a list of all non-isomorphic posets of 8 elements. There are 16999 of those.\n\nBefore the patch it took 0,69 seconds to run my test code for the first time. Second run took 0,39 seconds. After the patch timings were 0,70 and 0,41 second. So this will take something like 15 ms for 15000 posets, i.e. a microsecond per poset. (At i5-3470 CPU `@` 3.20GHz).\n\nI think that this in not too much penalty for better usability.",
    "created_at": "2016-02-19T09:03:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275912",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:14'></a>I tested with a list of all non-isomorphic posets of 8 elements. There are 16999 of those.

Before the patch it took 0,69 seconds to run my test code for the first time. Second run took 0,39 seconds. After the patch timings were 0,70 and 0,41 second. So this will take something like 15 ms for 15000 posets, i.e. a microsecond per poset. (At i5-3470 CPU `@` 3.20GHz).

I think that this in not too much penalty for better usability.



---

archive/issue_comments_275913.json:
```json
{
    "body": "<a id='comment:15'></a>Thanks for doing those timings. I didn't expect too much of a penalty, but if we can have cleaner and less fragile code with extra speed, then why shouldn't we?\n\nI would say the lack of response for your question (if it was \"Am I doing something stupid?\") is a strong indication that you are not. Personally, I don't think we need to include this in the error message as pdb can be used, but I'm neutral if we add it responsibly.\n\nIn more detail, the fragility comes from the fact that we have to rewrite this error message if the underlying error message changes wording. By having a custom class, it means we can easily change the message without having to rewrite this (essentially unrelated) code.\n\nAlso, the `int(error.message.split()[3][2:])` creates many, many new transient objects: the `split`, in and of itself, creates a new list, plus the `int`, plus each of the strings in the split. However I was thinking of doing a catch-and-release with the error message by simply updating the two elements of said message. So the error class would look something like this:\n\n```python\nclass LatticeException(ValueError):\n    def __init__(self, fail, x, y):\n        ValueError.__init__(self, None)\n        self.fail = fail\n        self.x = x\n        self.y = y\n    def __str__(self):\n        return \"no {} for {} and {}\".format(self.fail, self.x, self.y)\n```\nThe result would look like this:\n\n```\nsage: raise LatticeException('meet', 5, 2)\n---------------------------------------------------------------------------\nLatticeException                          Traceback (most recent call last)\n<ipython-input-20-626aad3b7a17> in <module>()\n----> 1 raise LatticeException('meet', Integer(5), Integer(2))\n\nLatticeException: no meet for 5 and 2\n```",
    "created_at": "2016-02-19T14:58:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275913",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>Thanks for doing those timings. I didn't expect too much of a penalty, but if we can have cleaner and less fragile code with extra speed, then why shouldn't we?

I would say the lack of response for your question (if it was "Am I doing something stupid?") is a strong indication that you are not. Personally, I don't think we need to include this in the error message as pdb can be used, but I'm neutral if we add it responsibly.

In more detail, the fragility comes from the fact that we have to rewrite this error message if the underlying error message changes wording. By having a custom class, it means we can easily change the message without having to rewrite this (essentially unrelated) code.

Also, the `int(error.message.split()[3][2:])` creates many, many new transient objects: the `split`, in and of itself, creates a new list, plus the `int`, plus each of the strings in the split. However I was thinking of doing a catch-and-release with the error message by simply updating the two elements of said message. So the error class would look something like this:

```python
class LatticeException(ValueError):
    def __init__(self, fail, x, y):
        ValueError.__init__(self, None)
        self.fail = fail
        self.x = x
        self.y = y
    def __str__(self):
        return "no {} for {} and {}".format(self.fail, self.x, self.y)
```
The result would look like this:

```
sage: raise LatticeException('meet', 5, 2)
---------------------------------------------------------------------------
LatticeException                          Traceback (most recent call last)
<ipython-input-20-626aad3b7a17> in <module>()
----> 1 raise LatticeException('meet', Integer(5), Integer(2))

LatticeException: no meet for 5 and 2
```



---

archive/issue_comments_275914.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:15 tscrim]:\n\n> I would say the lack of response for your question (if it was \"Am I doing something stupid?\") is a strong indication that you are not.\n\n\nNo. I do not trust silence being acception.\n\nBut see my commit on comment number 3. I guess it was something like what you suggested.\n\n> In more detail, the fragility comes from the fact that we have to rewrite this error message if the underlying error message changes wording.\n\n\nThat's why I added tests. We could also add a comment to the code raising exception in `_meet()` and `_join()`.\n\n> Also, the `int(error.message.split()[3][2:])` creates many, many new transient objects: the `split`, in and of itself, creates a new list, plus the `int`, plus each of the strings in the split.\n\n\nMaybe I can optimize if, it one microsecond is too much...",
    "created_at": "2016-02-19T16:22:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275914",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:16'></a>Replying to [comment:15 tscrim]:

> I would say the lack of response for your question (if it was "Am I doing something stupid?") is a strong indication that you are not.


No. I do not trust silence being acception.

But see my commit on comment number 3. I guess it was something like what you suggested.

> In more detail, the fragility comes from the fact that we have to rewrite this error message if the underlying error message changes wording.


That's why I added tests. We could also add a comment to the code raising exception in `_meet()` and `_join()`.

> Also, the `int(error.message.split()[3][2:])` creates many, many new transient objects: the `split`, in and of itself, creates a new list, plus the `int`, plus each of the strings in the split.


Maybe I can optimize if, it one microsecond is too much...



---

archive/issue_comments_275915.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:16 jmantysalo]:\n> Replying to [comment:15 tscrim]:\n> > I would say the lack of response for your question (if it was \"Am I doing something stupid?\") is a strong indication that you are not.\n\n> \n> No. I do not trust silence being acception.\n> \n> But see my commit on comment number 3. I guess it was something like what you suggested.\n\n\nThen consider this as acceptance of doing a custom error message (along with Volker's comment on the sage-devel thread).",
    "created_at": "2016-02-19T16:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275915",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>Replying to [comment:16 jmantysalo]:
> Replying to [comment:15 tscrim]:
> > I would say the lack of response for your question (if it was "Am I doing something stupid?") is a strong indication that you are not.

> 
> No. I do not trust silence being acception.
> 
> But see my commit on comment number 3. I guess it was something like what you suggested.


Then consider this as acceptance of doing a custom error message (along with Volker's comment on the sage-devel thread).



---

archive/issue_comments_275916.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:16 jmantysalo]:\n> Replying to [comment:15 tscrim]:\n> > In more detail, the fragility comes from the fact that we have to rewrite this error message if the underlying error message changes wording.\n\n> \n> That's why I added tests. We could also add a comment to the code raising exception in `_meet()` and `_join()`.\n\n\nIt's not about the tests; it is about the fact you have to change code in the frontend class anytime you change this error message in the backend. An analogy would be like you changed the background color attribute in a css file, but now you have to change html code of the webpage because of that.\n\n> > Also, the `int(error.message.split()[3][2:])` creates many, many new transient objects: the `split`, in and of itself, creates a new list, plus the `int`, plus each of the strings in the split.\n\n> \n> Maybe I can optimize if, it one microsecond is too much...\n\n\nThat was mainly as a counterpoint to your statement creating objects is more costly than string parsing. I strongly believe string parsing is an evil practice. The fact that it is (micro) slower is just a small part of that belief. The much bigger issue is the readability, extendability, and fragility of the code.",
    "created_at": "2016-02-19T16:48:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275916",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'></a>Replying to [comment:16 jmantysalo]:
> Replying to [comment:15 tscrim]:
> > In more detail, the fragility comes from the fact that we have to rewrite this error message if the underlying error message changes wording.

> 
> That's why I added tests. We could also add a comment to the code raising exception in `_meet()` and `_join()`.


It's not about the tests; it is about the fact you have to change code in the frontend class anytime you change this error message in the backend. An analogy would be like you changed the background color attribute in a css file, but now you have to change html code of the webpage because of that.

> > Also, the `int(error.message.split()[3][2:])` creates many, many new transient objects: the `split`, in and of itself, creates a new list, plus the `int`, plus each of the strings in the split.

> 
> Maybe I can optimize if, it one microsecond is too much...


That was mainly as a counterpoint to your statement creating objects is more costly than string parsing. I strongly believe string parsing is an evil practice. The fact that it is (micro) slower is just a small part of that belief. The much bigger issue is the readability, extendability, and fragility of the code.



---

archive/issue_comments_275917.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-24T11:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275917",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_275918.json:
```json
{
    "body": "<a id='comment:20'></a>Doctests on `hasse_diagram.py` must be corrected, but otherwise this is ready for comments.",
    "created_at": "2016-02-24T11:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275918",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:20'></a>Doctests on `hasse_diagram.py` must be corrected, but otherwise this is ready for comments.



---

archive/issue_comments_275919.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-02-24T11:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275919",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_275920.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-24T14:22:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275920",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_275921.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-02-24T14:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275921",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_275922.json:
```json
{
    "body": "<a id='comment:22'></a>Doctests corrected.",
    "created_at": "2016-02-24T14:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275922",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:22'></a>Doctests corrected.



---

archive/issue_comments_275923.json:
```json
{
    "body": "<a id='comment:23'></a>Thank you for making the changes; it definitely improves the code. A few comments:\n\n- Move the comment before `LatticeException` as the docstring for that class so it is visible in the doc.\n- Could be bikeshedding, but I'm thinking we should call it `LatticeError` since it is inheriting from `ValueError`. \n- Make the default value for `x` and `y` in `LatticeException` to be `None`.\n- All methods need doctests, this includes those for the exceptions\n- I would consider making the no top/bottom errors just raise `ValueError`. Granted, this won't look as slick when the error gets reported, but it will be cleaner code. (This would mean we don't need default values for `LatticeException`.) IMO this is also okay since `LatticeException` inherits from `ValueError`.\n- The errors are not sentences, so they should start with a lowercase letter.\n- I would do:\n  {{{#!python\n  try:\n      P._hasse_diagram.meet_matrix()\n  except LatticeException as error:\n      error.x = P._vertex_to_element(error.x)\n      error.y = P._vertex_to_element(error.y)\n      raise\n  }}}\n- Unrelated but I noticed it because there were changes made. I would do this:\n  {{{#!diff\n-if isinstance(data,FiniteLatticePoset) and len(args) == 0 and len(options) == 0:\n+if (isinstance(data, FiniteLatticePoset) and not args and not options):\n  }}}\n  as it is the fastest way to check for emptiness.",
    "created_at": "2016-02-24T15:31:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275923",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:23'></a>Thank you for making the changes; it definitely improves the code. A few comments:

- Move the comment before `LatticeException` as the docstring for that class so it is visible in the doc.
- Could be bikeshedding, but I'm thinking we should call it `LatticeError` since it is inheriting from `ValueError`. 
- Make the default value for `x` and `y` in `LatticeException` to be `None`.
- All methods need doctests, this includes those for the exceptions
- I would consider making the no top/bottom errors just raise `ValueError`. Granted, this won't look as slick when the error gets reported, but it will be cleaner code. (This would mean we don't need default values for `LatticeException`.) IMO this is also okay since `LatticeException` inherits from `ValueError`.
- The errors are not sentences, so they should start with a lowercase letter.
- I would do:
  {{{#!python
  try:
      P._hasse_diagram.meet_matrix()
  except LatticeException as error:
      error.x = P._vertex_to_element(error.x)
      error.y = P._vertex_to_element(error.y)
      raise
  }}}
- Unrelated but I noticed it because there were changes made. I would do this:
  {{{#!diff
-if isinstance(data,FiniteLatticePoset) and len(args) == 0 and len(options) == 0:
+if (isinstance(data, FiniteLatticePoset) and not args and not options):
  }}}
  as it is the fastest way to check for emptiness.



---

archive/issue_comments_275924.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:23 tscrim]:\n\n> - I would consider making the no top/bottom errors just raise `ValueError`. Granted, this won't look as slick when the error gets reported, but it will be cleaner code. (This would mean we don't need default values for `LatticeException`.) IMO this is also okay since `LatticeException` inherits from `ValueError`.\n\n\nBut then I guess that `LatticePoset(P)` could say \"not a *semi*lattice\", assuming that I don't check the error string. Is that bad? Not that much, but...?",
    "created_at": "2016-02-24T17:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275924",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:24'></a>Replying to [comment:23 tscrim]:

> - I would consider making the no top/bottom errors just raise `ValueError`. Granted, this won't look as slick when the error gets reported, but it will be cleaner code. (This would mean we don't need default values for `LatticeException`.) IMO this is also okay since `LatticeException` inherits from `ValueError`.


But then I guess that `LatticePoset(P)` could say "not a *semi*lattice", assuming that I don't check the error string. Is that bad? Not that much, but...?



---

archive/issue_comments_275925.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-25T07:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275925",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_275926.json:
```json
{
    "body": "<a id='comment:26'></a>I did some changes. But I got strange error from `make`:\n\n```\n[polynomia] build succeeded.\nError building the documentation.\nTraceback (most recent call last):\n  File \"/home/jm58660/sage/local/lib/python/runpy.py\", line 162, in _run_module_as_main\n    \"__main__\", fname, loader, pkg_name)\n  File \"/home/jm58660/sage/local/lib/python/runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"/home/jm58660/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n    main()\n  File \"/home/jm58660/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 1620, in main\n    builder()\n  File \"/home/jm58660/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 280, in _wrapper\n    getattr(get_builder(document), 'inventory')(*args, **kwds)\n  File \"/home/jm58660/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 491, in _wrapper\n    x.get(99999)\n  File \"/home/jm58660/sage/local/lib/python/multiprocessing/pool.py\", line 567, in get\n    raise self._value\nAttributeError: 'module' object has no attribute 'has'\nmake[2]: *** [doc-html] Error 1\n```\n\nAny ideas?",
    "created_at": "2016-02-25T07:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275926",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:26'></a>I did some changes. But I got strange error from `make`:

```
[polynomia] build succeeded.
Error building the documentation.
Traceback (most recent call last):
  File "/home/jm58660/sage/local/lib/python/runpy.py", line 162, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "/home/jm58660/sage/local/lib/python/runpy.py", line 72, in _run_code
    exec code in run_globals
  File "/home/jm58660/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
    main()
  File "/home/jm58660/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 1620, in main
    builder()
  File "/home/jm58660/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 280, in _wrapper
    getattr(get_builder(document), 'inventory')(*args, **kwds)
  File "/home/jm58660/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 491, in _wrapper
    x.get(99999)
  File "/home/jm58660/sage/local/lib/python/multiprocessing/pool.py", line 567, in get
    raise self._value
AttributeError: 'module' object has no attribute 'has'
make[2]: *** [doc-html] Error 1
```

Any ideas?



---

archive/issue_comments_275927.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:24 jmantysalo]:\n\nJust pinging for this question:\n\n> But then I guess that `LatticePoset(P)` could say \"not a *semi*lattice\", assuming that I don't check the error string. Is that bad? Not that much, but...?",
    "created_at": "2016-03-03T07:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275927",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:27'></a>Replying to [comment:24 jmantysalo]:

Just pinging for this question:

> But then I guess that `LatticePoset(P)` could say "not a *semi*lattice", assuming that I don't check the error string. Is that bad? Not that much, but...?



---

archive/issue_comments_275928.json:
```json
{
    "body": "<a id='comment:28'></a>Ping.",
    "created_at": "2016-04-12T08:12:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275928",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:28'></a>Ping.



---

archive/issue_comments_275929.json:
```json
{
    "body": "<a id='comment:29'></a>Replying to [comment:27 jmantysalo]:\n> Replying to [comment:24 jmantysalo]:\n> \n> Just pinging for this question:\n> \n> > But then I guess that `LatticePoset(P)` could say \"not a *semi*lattice\", assuming that I don't check the error string. Is that bad? Not that much, but...?\n\n\nWell, perhaps just have `x` and `y` be default to `None` in the exception `__init__`, but it contradicts your docstring for `LatticeError`. Moreover, I still think you should let that propagate up rather than creating a completely new error message.",
    "created_at": "2016-04-13T13:47:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275929",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:29'></a>Replying to [comment:27 jmantysalo]:
> Replying to [comment:24 jmantysalo]:
> 
> Just pinging for this question:
> 
> > But then I guess that `LatticePoset(P)` could say "not a *semi*lattice", assuming that I don't check the error string. Is that bad? Not that much, but...?


Well, perhaps just have `x` and `y` be default to `None` in the exception `__init__`, but it contradicts your docstring for `LatticeError`. Moreover, I still think you should let that propagate up rather than creating a completely new error message.



---

archive/issue_comments_275930.json:
```json
{
    "body": "<a id='comment:30'></a>Needs thinking. I put this to *needs_work* to see what tickets are really just waiting for a review.",
    "created_at": "2016-04-27T08:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275930",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:30'></a>Needs thinking. I put this to *needs_work* to see what tickets are really just waiting for a review.



---

archive/issue_comments_275931.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-04-27T08:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275931",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_275932.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-07-18T08:42:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275932",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_275933.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-07-18T08:49:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275933",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_275934.json:
```json
{
    "body": "<a id='comment:32'></a>OK, this was actually quite simple after thinking. Also I found an error in the process.",
    "created_at": "2016-07-18T08:49:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275934",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:32'></a>OK, this was actually quite simple after thinking. Also I found an error in the process.



---

archive/issue_comments_275935.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,21 @@\n+There is an error in current exception for join-semilattices:\n+\n+```\n+P = Poset({'a': ['b', 'c'], 'b': ['d', 'e'], 'c': ['d', 'e'], 'd': ['f'], 'e': ['f']})\n+P._hasse_diagram._meet\n+P._hasse_diagram._join\n+```\n+\n+gives\n+\n+```\n+ValueError: No meet for x=4 y=3\n+ValueError: No join for x=4 y=3\n+```\n+\n+i.e. the message is wrong for `_join`.\n+\n+What's more, currently sage outputs only `ValueError: Not a lattice.` when creating a lattice. After this it will output `ValueError: Not a lattice: no meet for e and d.`\n \n \n Comment: 1\n``````\n",
    "created_at": "2016-07-18T08:49:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275935",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,21 @@
+There is an error in current exception for join-semilattices:
+
+```
+P = Poset({'a': ['b', 'c'], 'b': ['d', 'e'], 'c': ['d', 'e'], 'd': ['f'], 'e': ['f']})
+P._hasse_diagram._meet
+P._hasse_diagram._join
+```
+
+gives
+
+```
+ValueError: No meet for x=4 y=3
+ValueError: No join for x=4 y=3
+```
+
+i.e. the message is wrong for `_join`.
+
+What's more, currently sage outputs only `ValueError: Not a lattice.` when creating a lattice. After this it will output `ValueError: Not a lattice: no meet for e and d.`
 
 
 Comment: 1
``````




---

archive/issue_events_053226.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-07-18T08:49:07Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "milestone": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19163#event-53226"
}
```



---

archive/issue_events_053227.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-07-18T08:49:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "milestone": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19163#event-53227"
}
```



---

archive/issue_comments_275936.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-07-18T14:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275936",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_275937.json:
```json
{
    "body": "<a id='comment:33'></a>Replying to [comment:29 tscrim]:\n> Moreover, I still think you should let that propagate up rather than creating a completely new error message.\n\n\nThis is still an issue, both for readability and performance. I can write a modified version if you want.",
    "created_at": "2016-07-18T14:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275937",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:33'></a>Replying to [comment:29 tscrim]:
> Moreover, I still think you should let that propagate up rather than creating a completely new error message.


This is still an issue, both for readability and performance. I can write a modified version if you want.



---

archive/issue_comments_275938.json:
```json
{
    "body": "<a id='comment:34'></a>Replying to [comment:33 tscrim]:\n> Replying to [comment:29 tscrim]:\n> > Moreover, I still think you should let that propagate up rather than creating a completely new error message.\n\n> \n> This is still an issue, both for readability and performance. I can write a modified version if you want.\n\n\nPlease do so, as I think that I don't understand what you mean.",
    "created_at": "2016-07-18T16:06:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275938",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:34'></a>Replying to [comment:33 tscrim]:
> Replying to [comment:29 tscrim]:
> > Moreover, I still think you should let that propagate up rather than creating a completely new error message.

> 
> This is still an issue, both for readability and performance. I can write a modified version if you want.


Please do so, as I think that I don't understand what you mean.



---

archive/issue_comments_275939.json:
```json
{
    "body": "<a id='comment:35'></a>Replying to [comment:34 jmantysalo]:\n> Replying to [comment:33 tscrim]:\n> > Replying to [comment:29 tscrim]:\n> > > Moreover, I still think you should let that propagate up rather than creating a completely new error message.\n\n> > \n> > This is still an issue, both for readability and performance. I can write a modified version if you want.\n\n> \n> Please do so, as I think that I don't understand what you mean.\n\n\nJust pingin this.",
    "created_at": "2016-08-13T04:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275939",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:35'></a>Replying to [comment:34 jmantysalo]:
> Replying to [comment:33 tscrim]:
> > Replying to [comment:29 tscrim]:
> > > Moreover, I still think you should let that propagate up rather than creating a completely new error message.

> > 
> > This is still an issue, both for readability and performance. I can write a modified version if you want.

> 
> Please do so, as I think that I don't understand what you mean.


Just pingin this.



---

archive/issue_comments_275940.json:
```json
{
    "body": "<a id='comment:36'></a>Another ping. I don't get what you suggest until I see a code or at least a pseudocode.",
    "created_at": "2016-09-14T08:15:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275940",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:36'></a>Another ping. I don't get what you suggest until I see a code or at least a pseudocode.



---

archive/issue_comments_275941.json:
```json
{
    "body": "<a id='comment:37'></a>Sorry it took so long, kept having other things come up. Here is what I am suggesting, where we don't recreate the error, just trap it long enough to change the element labels.\n\n---\nNew commits:",
    "created_at": "2016-09-14T14:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275941",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:37'></a>Sorry it took so long, kept having other things come up. Here is what I am suggesting, where we don't recreate the error, just trap it long enough to change the element labels.

---
New commits:



---

archive/issue_comments_275942.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-09-14T14:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275942",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_053228.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-14T14:06:04Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "milestone": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19163#event-53228"
}
```



---

archive/issue_events_053229.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-14T14:06:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19163#event-53229"
}
```



---

archive/issue_comments_275943.json:
```json
{
    "body": "<a id='comment:38'></a>Now I understand: Green solution, recycling of error message!\n\nAlso test passed, and I manually checked meet- and join-semilattices. Hence positive review.\n\nReplying to [comment:37 tscrim]:\n\n> Sorry it took so long\n\n\nNo horry. I have said to some developer (you?) earlier: it took about 2000 years to proof that squaring a circle is impossible. So there is no horry, this is mathematics.",
    "created_at": "2016-09-14T16:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275943",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:38'></a>Now I understand: Green solution, recycling of error message!

Also test passed, and I manually checked meet- and join-semilattices. Hence positive review.

Replying to [comment:37 tscrim]:

> Sorry it took so long


No horry. I have said to some developer (you?) earlier: it took about 2000 years to proof that squaring a circle is impossible. So there is no horry, this is mathematics.



---

archive/issue_comments_275944.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-09-14T16:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275944",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_053230.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-17T15:25:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19163#event-53230"
}
```



---

archive/issue_comments_275945.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-09-17T15:25:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19163#issuecomment-275945",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
