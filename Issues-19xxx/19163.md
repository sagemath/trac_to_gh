# Issue 19163: LatticePoset creation, better error reporting

archive/issues_018926.json:
```json
{
    "assignees": [],
    "body": "There is an error in current exception for join-semilattices:\n\n```\nP = Poset({'a': ['b', 'c'], 'b': ['d', 'e'], 'c': ['d', 'e'], 'd': ['f'], 'e': ['f']})\nP._hasse_diagram._meet\nP._hasse_diagram._join\n```\n\ngives\n\n```\nValueError: No meet for x=4 y=3\nValueError: No join for x=4 y=3\n```\n\ni.e. the message is wrong for `_join`.\n\nWhat's more, currently sage outputs only `ValueError: Not a lattice.` when creating a lattice. After this it will output `ValueError: Not a lattice: no meet for e and d.`\n\n\nCC:  @dkrenn\n\nBranch/Commit: **[`7d6e21b`](https://github.com/sagemath/sagetrac-mirror/commit/7d6e21b7e78e17d84efc4d2dd5e6444fc226ea85)**\n\nReviewer: **Travis Scrimshaw, Jori M\u00e4ntysalo**\n\nAuthor: **Jori M\u00e4ntysalo, Travis Scrimshaw**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19163_\n\n",
    "closed_at": "2016-09-17T15:25:51Z",
    "created_at": "2015-09-08T11:38:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "LatticePoset creation, better error reporting",
    "type": "issue",
    "updated_at": "2016-09-17T15:25:51Z",
    "url": "https://github.com/sagemath/sage/issues/19163",
    "user": "https://github.com/jm58660"
}
```
There is an error in current exception for join-semilattices:

```
P = Poset({'a': ['b', 'c'], 'b': ['d', 'e'], 'c': ['d', 'e'], 'd': ['f'], 'e': ['f']})
P._hasse_diagram._meet
P._hasse_diagram._join
```

gives

```
ValueError: No meet for x=4 y=3
ValueError: No join for x=4 y=3
```

i.e. the message is wrong for `_join`.

What's more, currently sage outputs only `ValueError: Not a lattice.` when creating a lattice. After this it will output `ValueError: Not a lattice: no meet for e and d.`


CC:  @dkrenn

Branch/Commit: **[`7d6e21b`](https://github.com/sagemath/sagetrac-mirror/commit/7d6e21b7e78e17d84efc4d2dd5e6444fc226ea85)**

Reviewer: **Travis Scrimshaw, Jori Mäntysalo**

Author: **Jori Mäntysalo, Travis Scrimshaw**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/19163_





---

archive/issue_events_272030.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-08T11:38:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272030"
}
```



---

archive/issue_events_272031.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-08T11:38:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272031"
}
```



---

archive/issue_events_272032.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-08T11:38:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272032"
}
```



---

archive/issue_events_272033.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-09-08T11:38:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272033"
}
```



---

archive/issue_comments_271185.json:
```json
{
    "body": "Branch: **[u/jmantysalo/latticeposet_creation__empty_argument__better_error_reporting](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/latticeposet_creation__empty_argument__better_error_reporting)**",
    "created_at": "2015-11-12T13:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271185",
    "user": "https://github.com/jm58660"
}
```

Branch: **[u/jmantysalo/latticeposet_creation__empty_argument__better_error_reporting](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/latticeposet_creation__empty_argument__better_error_reporting)**



---

archive/issue_comments_271186.json:
```json
{
    "body": "Commit: **[`cbece0d`](https://github.com/sagemath/sagetrac-mirror/commit/cbece0d1a2161cc786b1022a1ca01bea65ca6d38)**",
    "created_at": "2015-11-13T07:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271186",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`cbece0d`](https://github.com/sagemath/sagetrac-mirror/commit/cbece0d1a2161cc786b1022a1ca01bea65ca6d38)**



---

archive/issue_comments_271187.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbece0d1a2161cc786b1022a1ca01bea65ca6d38\"><code>cbece0d</code></a></td><td><code>Some tests of exceptions.</code></td></tr></table>\n",
    "created_at": "2015-11-13T07:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271187",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbece0d1a2161cc786b1022a1ca01bea65ca6d38"><code>cbece0d</code></a></td><td><code>Some tests of exceptions.</code></td></tr></table>




---

archive/issue_comments_271188.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThis is ready for comments, even if it is not ready for review.",
    "created_at": "2015-11-13T07:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271188",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:3" align="right">comment:3</div>

This is ready for comments, even if it is not ready for review.



---

archive/issue_comments_271189.json:
```json
{
    "body": "Changed commit from **[`cbece0d`](https://github.com/sagemath/sagetrac-mirror/commit/cbece0d1a2161cc786b1022a1ca01bea65ca6d38)** to **[`e2d3e57`](https://github.com/sagemath/sagetrac-mirror/commit/e2d3e57198405f66192d75905e14ecf03582da2e)**",
    "created_at": "2015-11-13T08:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271189",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cbece0d`](https://github.com/sagemath/sagetrac-mirror/commit/cbece0d1a2161cc786b1022a1ca01bea65ca6d38)** to **[`e2d3e57`](https://github.com/sagemath/sagetrac-mirror/commit/e2d3e57198405f66192d75905e14ecf03582da2e)**



---

archive/issue_comments_271190.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2d3e57198405f66192d75905e14ecf03582da2e\"><code>e2d3e57</code></a></td><td><code>Make LatticePoset() to return the empty lattice.</code></td></tr></table>\n",
    "created_at": "2015-11-13T08:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271190",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2d3e57198405f66192d75905e14ecf03582da2e"><code>e2d3e57</code></a></td><td><code>Make LatticePoset() to return the empty lattice.</code></td></tr></table>




---

archive/issue_comments_271191.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nJeroen, can you check this until I do more? I.e. is `LatticeMeetException` done as it should?\n\nThis is kind of first time when I add something more than new functions to existing classes.",
    "created_at": "2015-11-24T11:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271191",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:5" align="right">comment:5</div>

Jeroen, can you check this until I do more? I.e. is `LatticeMeetException` done as it should?

This is kind of first time when I add something more than new functions to existing classes.



---

archive/issue_comments_271192.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@jm58660](#comment:5):\n> Jeroen, can you check this until I do more? I.e. is `LatticeMeetException` done as it should?\n\nPing...",
    "created_at": "2015-12-11T08:13:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271192",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@jm58660](#comment:5):
> Jeroen, can you check this until I do more? I.e. is `LatticeMeetException` done as it should?

Ping...



---

archive/issue_comments_271193.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b42c0e7cabca4264e55291ff5e6114d1d00a0a7b\"><code>b42c0e7</code></a></td><td><code>Error reporting for non-existing meet and join.</code></td></tr></table>\n",
    "created_at": "2016-02-10T11:09:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271193",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b42c0e7cabca4264e55291ff5e6114d1d00a0a7b"><code>b42c0e7</code></a></td><td><code>Error reporting for non-existing meet and join.</code></td></tr></table>




---

archive/issue_comments_271194.json:
```json
{
    "body": "Changed commit from **[`e2d3e57`](https://github.com/sagemath/sagetrac-mirror/commit/e2d3e57198405f66192d75905e14ecf03582da2e)** to **[`b42c0e7`](https://github.com/sagemath/sagetrac-mirror/commit/b42c0e7cabca4264e55291ff5e6114d1d00a0a7b)**",
    "created_at": "2016-02-10T11:09:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271194",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e2d3e57`](https://github.com/sagemath/sagetrac-mirror/commit/e2d3e57198405f66192d75905e14ecf03582da2e)** to **[`b42c0e7`](https://github.com/sagemath/sagetrac-mirror/commit/b42c0e7cabca4264e55291ff5e6114d1d00a0a7b)**



---

archive/issue_events_272034.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-02-10T11:15:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272034"
}
```



---

archive/issue_events_272035.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-02-10T11:15:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272035"
}
```



---

archive/issue_events_272036.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-02-10T11:15:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272036"
}
```



---

archive/issue_comments_271195.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n-Because `Poset()` creates the empty poset, I think that `LatticePoset()` should create the empty lattice.\n+Before this patch sage outputs only `ValueError: Not a lattice.` from\n \n-Error reporting is irritating. `LatticePoset({'a':['b','c']})` should say \"no top element\" of \"no join for 'b' and 'c'\" or something similar.\n+```\n+LatticePoset({'a':['b', 'c'], 'b': ['d', 'e'], 'c': ['d', 'e'], 'd': ['f'], 'e': ['f']})\n+```\n+\n+After this it will output `ValueError: Not a lattice: no meet for e and d.` Same applies to semilattices.\n+\n+And because `Poset()` returns the empty poset, this changes `LatticePoset()` to return the empty lattice.\n+\n``````\n",
    "created_at": "2016-02-10T11:15:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271195",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,10 @@
-Because `Poset()` creates the empty poset, I think that `LatticePoset()` should create the empty lattice.
+Before this patch sage outputs only `ValueError: Not a lattice.` from
 
-Error reporting is irritating. `LatticePoset({'a':['b','c']})` should say "no top element" of "no join for 'b' and 'c'" or something similar.
+```
+LatticePoset({'a':['b', 'c'], 'b': ['d', 'e'], 'c': ['d', 'e'], 'd': ['f'], 'e': ['f']})
+```
+
+After this it will output `ValueError: Not a lattice: no meet for e and d.` Same applies to semilattices.
+
+And because `Poset()` returns the empty poset, this changes `LatticePoset()` to return the empty lattice.
+
``````




---

archive/issue_comments_271196.json:
```json
{
    "body": "Author: **Jori M\u00e4ntysalo**",
    "created_at": "2016-02-10T11:15:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271196",
    "user": "https://github.com/jm58660"
}
```

Author: **Jori Mäntysalo**



---

archive/issue_comments_271197.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAs I got no comments for custom error class, I did this with string manipulation.",
    "created_at": "2016-02-10T11:15:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271197",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:8" align="right">comment:8</div>

As I got no comments for custom error class, I did this with string manipulation.



---

archive/issue_comments_271198.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nDaniel? This is more trivial than you could think from number of lines.",
    "created_at": "2016-02-12T08:27:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271198",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:9" align="right">comment:9</div>

Daniel? This is more trivial than you could think from number of lines.



---

archive/issue_comments_271199.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI think this approach of parsing the error message just makes things needlessly more complicated (and takes extra time if you, say, want to check if a set of posets are meet-semilattices). Instead, I would just allow the error from calling `self._hasse_diagram.meet_matrix()` to propagate up.",
    "created_at": "2016-02-18T19:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271199",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

I think this approach of parsing the error message just makes things needlessly more complicated (and takes extra time if you, say, want to check if a set of posets are meet-semilattices). Instead, I would just allow the error from calling `self._hasse_diagram.meet_matrix()` to propagate up.



---

archive/issue_comments_271200.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@tscrim](#comment:10):\n> I think this approach of parsing the error message just makes things needlessly more complicated (and takes extra time if you, say, want to check if a set of posets are meet-semilattices).\n\n?? Error message is only parsed when there is a message. And to just check use `is_meet_semilattice()`. I can't see how this would slow down anything.\n\n> Instead, I would just allow the error from calling `self._hasse_diagram.meet_matrix()` to propagate up.\n\nIt is very irritating if the elements of the lattice are integers. Then we may got error saying that 5 and 8 have no meet, when actually it is 6 and 10 that have no meet.",
    "created_at": "2016-02-18T20:59:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271200",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@tscrim](#comment:10):
> I think this approach of parsing the error message just makes things needlessly more complicated (and takes extra time if you, say, want to check if a set of posets are meet-semilattices).

?? Error message is only parsed when there is a message. And to just check use `is_meet_semilattice()`. I can't see how this would slow down anything.

> Instead, I would just allow the error from calling `self._hasse_diagram.meet_matrix()` to propagate up.

It is very irritating if the elements of the lattice are integers. Then we may got error saying that 5 and 8 have no meet, when actually it is 6 and 10 that have no meet.



---

archive/issue_comments_271201.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@jm58660](#comment:11):\n> Replying to [@tscrim](#comment:10):\n> > I think this approach of parsing the error message just makes things needlessly more complicated (and takes extra time if you, say, want to check if a set of posets are meet-semilattices).\n\n> \n> ?? Error message is only parsed when there is a message. And to just check use `is_meet_semilattice()`. I can't see how this would slow down anything.\n\nSuppose you iterate over a collection of posets and you want to determine which of them are (semi)lattices. Then for those that are lattices, you do some extra processing on them. Being Pythonic (and to avoid double checking things), you just cast the poset to a lattice and do nothing if an error is thrown. That is where the slowdown comes in.\n\n> > Instead, I would just allow the error from calling `self._hasse_diagram.meet_matrix()` to propagate up.\n\n> \n> It is very irritating if the elements of the lattice are integers. Then we may got error saying that 5 and 8 have no meet, when actually it is 6 and 10 that have no meet.\n\nThat is a good point. However, I would much rather have a less informative error message than the (IMO fugly) string parsing code you currently have. It seems like Volker's suggestion of doing a custom error class will be what you want (if you think it is important to see (only) one instance where the lattice property fails).",
    "created_at": "2016-02-18T23:24:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271201",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@jm58660](#comment:11):
> Replying to [@tscrim](#comment:10):
> > I think this approach of parsing the error message just makes things needlessly more complicated (and takes extra time if you, say, want to check if a set of posets are meet-semilattices).

> 
> ?? Error message is only parsed when there is a message. And to just check use `is_meet_semilattice()`. I can't see how this would slow down anything.

Suppose you iterate over a collection of posets and you want to determine which of them are (semi)lattices. Then for those that are lattices, you do some extra processing on them. Being Pythonic (and to avoid double checking things), you just cast the poset to a lattice and do nothing if an error is thrown. That is where the slowdown comes in.

> > Instead, I would just allow the error from calling `self._hasse_diagram.meet_matrix()` to propagate up.

> 
> It is very irritating if the elements of the lattice are integers. Then we may got error saying that 5 and 8 have no meet, when actually it is 6 and 10 that have no meet.

That is a good point. However, I would much rather have a less informative error message than the (IMO fugly) string parsing code you currently have. It seems like Volker's suggestion of doing a custom error class will be what you want (if you think it is important to see (only) one instance where the lattice property fails).



---

archive/issue_comments_271202.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@tscrim](#comment:12):\n \n> Suppose you iterate over a collection of posets and you want to determine which of them are (semi)lattices. Then for those that are lattices, you do some extra processing on them. Being Pythonic (and to avoid double checking things), you just cast the poset to a lattice and do nothing if an error is thrown. That is where the slowdown comes in.\n\nYou mean something like\n\n```\nn = 0\nfor P in PP:\n    try:\n        if LatticePoset(P).cardinality() != 0:\n            n += 1\n    except:\n        pass\n```\n\nwhere `PP` is precomputed list of posets. This error reporting is `O(1)` and checking if a poset is lattice is `O(n^2.5)`. So this would be a question only if most posets are non-lattices that are easily recognized (like a poset that is not bounded). I will run some timing on this.\n\n> > > Instead, I would just allow the error from calling `self._hasse_diagram.meet_matrix()` to propagate up.\n\n> > \n> > It is very irritating if the elements of the lattice are integers. Then we may got error saying that 5 and 8 have no meet, when actually it is 6 and 10 that have no meet.\n\n> \n> That is a good point. However, I would much rather have a less informative error message than the (IMO fugly) string parsing code you currently have. It seems like Volker's suggestion of doing a custom error class will be what you want (if you think it is important to see (only) one instance where the lattice property fails).\n\nI guess this conflicts with performance you cared in a paragraph just before this one `:=)`. I suppose creating an object is slower than manipulating a string.\n\nActually I did a code using specific error class and tried to get comments on it, to be sure that I did nothing stupid. But as I got no comments, I decided to do this in a way that I know to work. (And added tests, so that if somebody changes the error string at `hasse_diagram.py` it will be noticed.)",
    "created_at": "2016-02-19T08:16:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271202",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@tscrim](#comment:12):
 
> Suppose you iterate over a collection of posets and you want to determine which of them are (semi)lattices. Then for those that are lattices, you do some extra processing on them. Being Pythonic (and to avoid double checking things), you just cast the poset to a lattice and do nothing if an error is thrown. That is where the slowdown comes in.

You mean something like

```
n = 0
for P in PP:
    try:
        if LatticePoset(P).cardinality() != 0:
            n += 1
    except:
        pass
```

where `PP` is precomputed list of posets. This error reporting is `O(1)` and checking if a poset is lattice is `O(n^2.5)`. So this would be a question only if most posets are non-lattices that are easily recognized (like a poset that is not bounded). I will run some timing on this.

> > > Instead, I would just allow the error from calling `self._hasse_diagram.meet_matrix()` to propagate up.

> > 
> > It is very irritating if the elements of the lattice are integers. Then we may got error saying that 5 and 8 have no meet, when actually it is 6 and 10 that have no meet.

> 
> That is a good point. However, I would much rather have a less informative error message than the (IMO fugly) string parsing code you currently have. It seems like Volker's suggestion of doing a custom error class will be what you want (if you think it is important to see (only) one instance where the lattice property fails).

I guess this conflicts with performance you cared in a paragraph just before this one `:=)`. I suppose creating an object is slower than manipulating a string.

Actually I did a code using specific error class and tried to get comments on it, to be sure that I did nothing stupid. But as I got no comments, I decided to do this in a way that I know to work. (And added tests, so that if somebody changes the error string at `hasse_diagram.py` it will be noticed.)



---

archive/issue_comments_271203.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI tested with a list of all non-isomorphic posets of 8 elements. There are 16999 of those.\n\nBefore the patch it took 0,69 seconds to run my test code for the first time. Second run took 0,39 seconds. After the patch timings were 0,70 and 0,41 second. So this will take something like 15 ms for 15000 posets, i.e. a microsecond per poset. (At i5-3470 CPU @ 3.20GHz).\n\nI think that this in not too much penalty for better usability.",
    "created_at": "2016-02-19T09:03:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271203",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:14" align="right">comment:14</div>

I tested with a list of all non-isomorphic posets of 8 elements. There are 16999 of those.

Before the patch it took 0,69 seconds to run my test code for the first time. Second run took 0,39 seconds. After the patch timings were 0,70 and 0,41 second. So this will take something like 15 ms for 15000 posets, i.e. a microsecond per poset. (At i5-3470 CPU @ 3.20GHz).

I think that this in not too much penalty for better usability.



---

archive/issue_comments_271204.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThanks for doing those timings. I didn't expect too much of a penalty, but if we can have cleaner and less fragile code with extra speed, then why shouldn't we?\n\nI would say the lack of response for your question (if it was \"Am I doing something stupid?\") is a strong indication that you are not. Personally, I don't think we need to include this in the error message as pdb can be used, but I'm neutral if we add it responsibly.\n\nIn more detail, the fragility comes from the fact that we have to rewrite this error message if the underlying error message changes wording. By having a custom class, it means we can easily change the message without having to rewrite this (essentially unrelated) code.\n\nAlso, the `int(error.message.split()[3][2:])` creates many, many new transient objects: the `split`, in and of itself, creates a new list, plus the `int`, plus each of the strings in the split. However I was thinking of doing a catch-and-release with the error message by simply updating the two elements of said message. So the error class would look something like this:\n\n```python\nclass LatticeException(ValueError):\n    def __init__(self, fail, x, y):\n        ValueError.__init__(self, None)\n        self.fail = fail\n        self.x = x\n        self.y = y\n    def __str__(self):\n        return \"no {} for {} and {}\".format(self.fail, self.x, self.y)\n```\nThe result would look like this:\n\n```\nsage: raise LatticeException('meet', 5, 2)\n---------------------------------------------------------------------------\nLatticeException                          Traceback (most recent call last)\n<ipython-input-20-626aad3b7a17> in <module>()\n----> 1 raise LatticeException('meet', Integer(5), Integer(2))\n\nLatticeException: no meet for 5 and 2\n```",
    "created_at": "2016-02-19T14:58:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271204",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">comment:15</div>

Thanks for doing those timings. I didn't expect too much of a penalty, but if we can have cleaner and less fragile code with extra speed, then why shouldn't we?

I would say the lack of response for your question (if it was "Am I doing something stupid?") is a strong indication that you are not. Personally, I don't think we need to include this in the error message as pdb can be used, but I'm neutral if we add it responsibly.

In more detail, the fragility comes from the fact that we have to rewrite this error message if the underlying error message changes wording. By having a custom class, it means we can easily change the message without having to rewrite this (essentially unrelated) code.

Also, the `int(error.message.split()[3][2:])` creates many, many new transient objects: the `split`, in and of itself, creates a new list, plus the `int`, plus each of the strings in the split. However I was thinking of doing a catch-and-release with the error message by simply updating the two elements of said message. So the error class would look something like this:

```python
class LatticeException(ValueError):
    def __init__(self, fail, x, y):
        ValueError.__init__(self, None)
        self.fail = fail
        self.x = x
        self.y = y
    def __str__(self):
        return "no {} for {} and {}".format(self.fail, self.x, self.y)
```
The result would look like this:

```
sage: raise LatticeException('meet', 5, 2)
---------------------------------------------------------------------------
LatticeException                          Traceback (most recent call last)
<ipython-input-20-626aad3b7a17> in <module>()
----> 1 raise LatticeException('meet', Integer(5), Integer(2))

LatticeException: no meet for 5 and 2
```



---

archive/issue_comments_271205.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@tscrim](#comment:15):\n\n> I would say the lack of response for your question (if it was \"Am I doing something stupid?\") is a strong indication that you are not.\n\nNo. I do not trust silence being acception.\n\nBut see my commit on comment number 3. I guess it was something like what you suggested.\n\n> In more detail, the fragility comes from the fact that we have to rewrite this error message if the underlying error message changes wording.\n\nThat's why I added tests. We could also add a comment to the code raising exception in `_meet()` and `_join()`.\n\n> Also, the `int(error.message.split()[3][2:])` creates many, many new transient objects: the `split`, in and of itself, creates a new list, plus the `int`, plus each of the strings in the split.\n\nMaybe I can optimize if, it one microsecond is too much...",
    "created_at": "2016-02-19T16:22:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271205",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@tscrim](#comment:15):

> I would say the lack of response for your question (if it was "Am I doing something stupid?") is a strong indication that you are not.

No. I do not trust silence being acception.

But see my commit on comment number 3. I guess it was something like what you suggested.

> In more detail, the fragility comes from the fact that we have to rewrite this error message if the underlying error message changes wording.

That's why I added tests. We could also add a comment to the code raising exception in `_meet()` and `_join()`.

> Also, the `int(error.message.split()[3][2:])` creates many, many new transient objects: the `split`, in and of itself, creates a new list, plus the `int`, plus each of the strings in the split.

Maybe I can optimize if, it one microsecond is too much...



---

archive/issue_comments_271206.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@jm58660](#comment:16):\n> Replying to [@tscrim](#comment:15):\n> > I would say the lack of response for your question (if it was \"Am I doing something stupid?\") is a strong indication that you are not.\n\n> \n> No. I do not trust silence being acception.\n> \n> But see my commit on comment number 3. I guess it was something like what you suggested.\n\nThen consider this as acceptance of doing a custom error message (along with Volker's comment on the sage-devel thread).",
    "created_at": "2016-02-19T16:45:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271206",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@jm58660](#comment:16):
> Replying to [@tscrim](#comment:15):
> > I would say the lack of response for your question (if it was "Am I doing something stupid?") is a strong indication that you are not.

> 
> No. I do not trust silence being acception.
> 
> But see my commit on comment number 3. I guess it was something like what you suggested.

Then consider this as acceptance of doing a custom error message (along with Volker's comment on the sage-devel thread).



---

archive/issue_comments_271207.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@jm58660](#comment:16):\n> Replying to [@tscrim](#comment:15):\n> > In more detail, the fragility comes from the fact that we have to rewrite this error message if the underlying error message changes wording.\n\n> \n> That's why I added tests. We could also add a comment to the code raising exception in `_meet()` and `_join()`.\n\nIt's not about the tests; it is about the fact you have to change code in the frontend class anytime you change this error message in the backend. An analogy would be like you changed the background color attribute in a css file, but now you have to change html code of the webpage because of that.\n\n> > Also, the `int(error.message.split()[3][2:])` creates many, many new transient objects: the `split`, in and of itself, creates a new list, plus the `int`, plus each of the strings in the split.\n\n> \n> Maybe I can optimize if, it one microsecond is too much...\n\nThat was mainly as a counterpoint to your statement creating objects is more costly than string parsing. I strongly believe string parsing is an evil practice. The fact that it is (micro) slower is just a small part of that belief. The much bigger issue is the readability, extendability, and fragility of the code.",
    "created_at": "2016-02-19T16:48:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271207",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@jm58660](#comment:16):
> Replying to [@tscrim](#comment:15):
> > In more detail, the fragility comes from the fact that we have to rewrite this error message if the underlying error message changes wording.

> 
> That's why I added tests. We could also add a comment to the code raising exception in `_meet()` and `_join()`.

It's not about the tests; it is about the fact you have to change code in the frontend class anytime you change this error message in the backend. An analogy would be like you changed the background color attribute in a css file, but now you have to change html code of the webpage because of that.

> > Also, the `int(error.message.split()[3][2:])` creates many, many new transient objects: the `split`, in and of itself, creates a new list, plus the `int`, plus each of the strings in the split.

> 
> Maybe I can optimize if, it one microsecond is too much...

That was mainly as a counterpoint to your statement creating objects is more costly than string parsing. I strongly believe string parsing is an evil practice. The fact that it is (micro) slower is just a small part of that belief. The much bigger issue is the readability, extendability, and fragility of the code.



---

archive/issue_comments_271208.json:
```json
{
    "body": "Changed commit from **[`b42c0e7`](https://github.com/sagemath/sagetrac-mirror/commit/b42c0e7cabca4264e55291ff5e6114d1d00a0a7b)** to **[`bc131c2`](https://github.com/sagemath/sagetrac-mirror/commit/bc131c26bb40434df3ae5cf4f9c77d9d37b01c52)**",
    "created_at": "2016-02-24T11:14:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271208",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b42c0e7`](https://github.com/sagemath/sagetrac-mirror/commit/b42c0e7cabca4264e55291ff5e6114d1d00a0a7b)** to **[`bc131c2`](https://github.com/sagemath/sagetrac-mirror/commit/bc131c26bb40434df3ae5cf4f9c77d9d37b01c52)**



---

archive/issue_comments_271209.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc131c26bb40434df3ae5cf4f9c77d9d37b01c52\"><code>bc131c2</code></a></td><td><code>Use exception class.</code></td></tr></table>\n",
    "created_at": "2016-02-24T11:14:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271209",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc131c26bb40434df3ae5cf4f9c77d9d37b01c52"><code>bc131c2</code></a></td><td><code>Use exception class.</code></td></tr></table>




---

archive/issue_comments_271210.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nDoctests on `hasse_diagram.py` must be corrected, but otherwise this is ready for comments.",
    "created_at": "2016-02-24T11:15:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271210",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:20" align="right">comment:20</div>

Doctests on `hasse_diagram.py` must be corrected, but otherwise this is ready for comments.



---

archive/issue_events_272037.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-02-24T11:15:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272037"
}
```



---

archive/issue_events_272038.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-02-24T11:15:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272038"
}
```



---

archive/issue_comments_271211.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d0a09a405986b478644873761d2dd59cad03dc6\"><code>0d0a09a</code></a></td><td><code>Modified tests.</code></td></tr></table>\n",
    "created_at": "2016-02-24T14:22:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271211",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d0a09a405986b478644873761d2dd59cad03dc6"><code>0d0a09a</code></a></td><td><code>Modified tests.</code></td></tr></table>




---

archive/issue_comments_271212.json:
```json
{
    "body": "Changed commit from **[`bc131c2`](https://github.com/sagemath/sagetrac-mirror/commit/bc131c26bb40434df3ae5cf4f9c77d9d37b01c52)** to **[`0d0a09a`](https://github.com/sagemath/sagetrac-mirror/commit/0d0a09a405986b478644873761d2dd59cad03dc6)**",
    "created_at": "2016-02-24T14:22:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271212",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bc131c2`](https://github.com/sagemath/sagetrac-mirror/commit/bc131c26bb40434df3ae5cf4f9c77d9d37b01c52)** to **[`0d0a09a`](https://github.com/sagemath/sagetrac-mirror/commit/0d0a09a405986b478644873761d2dd59cad03dc6)**



---

archive/issue_events_272039.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-02-24T14:33:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272039"
}
```



---

archive/issue_events_272040.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-02-24T14:33:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272040"
}
```



---

archive/issue_comments_271213.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nDoctests corrected.",
    "created_at": "2016-02-24T14:33:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271213",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:22" align="right">comment:22</div>

Doctests corrected.



---

archive/issue_comments_271214.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThank you for making the changes; it definitely improves the code. A few comments:\n\n- Move the comment before `LatticeException` as the docstring for that class so it is visible in the doc.\n- Could be bikeshedding, but I'm thinking we should call it `LatticeError` since it is inheriting from `ValueError`. \n- Make the default value for `x` and `y` in `LatticeException` to be `None`.\n- All methods need doctests, this includes those for the exceptions\n- I would consider making the no top/bottom errors just raise `ValueError`. Granted, this won't look as slick when the error gets reported, but it will be cleaner code. (This would mean we don't need default values for `LatticeException`.) IMO this is also okay since `LatticeException` inherits from `ValueError`.\n- The errors are not sentences, so they should start with a lowercase letter.\n- I would do:\n\n  ```python\n  try:\n      P._hasse_diagram.meet_matrix()\n  except LatticeException as error:\n      error.x = P._vertex_to_element(error.x)\n      error.y = P._vertex_to_element(error.y)\n      raise\n  ```\n- Unrelated but I noticed it because there were changes made. I would do this:\n\n  ```diff\n  -if isinstance(data,FiniteLatticePoset) and len(args) == 0 and len(options) == 0:\n  +if (isinstance(data, FiniteLatticePoset) and not args and not options):\n  ```\n  as it is the fastest way to check for emptiness.",
    "created_at": "2016-02-24T15:31:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271214",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:23" align="right">comment:23</div>

Thank you for making the changes; it definitely improves the code. A few comments:

- Move the comment before `LatticeException` as the docstring for that class so it is visible in the doc.
- Could be bikeshedding, but I'm thinking we should call it `LatticeError` since it is inheriting from `ValueError`. 
- Make the default value for `x` and `y` in `LatticeException` to be `None`.
- All methods need doctests, this includes those for the exceptions
- I would consider making the no top/bottom errors just raise `ValueError`. Granted, this won't look as slick when the error gets reported, but it will be cleaner code. (This would mean we don't need default values for `LatticeException`.) IMO this is also okay since `LatticeException` inherits from `ValueError`.
- The errors are not sentences, so they should start with a lowercase letter.
- I would do:

  ```python
  try:
      P._hasse_diagram.meet_matrix()
  except LatticeException as error:
      error.x = P._vertex_to_element(error.x)
      error.y = P._vertex_to_element(error.y)
      raise
  ```
- Unrelated but I noticed it because there were changes made. I would do this:

  ```diff
  -if isinstance(data,FiniteLatticePoset) and len(args) == 0 and len(options) == 0:
  +if (isinstance(data, FiniteLatticePoset) and not args and not options):
  ```
  as it is the fastest way to check for emptiness.



---

archive/issue_comments_271215.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@tscrim](#comment:23):\n\n> - I would consider making the no top/bottom errors just raise `ValueError`. Granted, this won't look as slick when the error gets reported, but it will be cleaner code. (This would mean we don't need default values for `LatticeException`.) IMO this is also okay since `LatticeException` inherits from `ValueError`.\n\nBut then I guess that `LatticePoset(P)` could say \"not a *semi*lattice\", assuming that I don't check the error string. Is that bad? Not that much, but...?",
    "created_at": "2016-02-24T17:45:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271215",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@tscrim](#comment:23):

> - I would consider making the no top/bottom errors just raise `ValueError`. Granted, this won't look as slick when the error gets reported, but it will be cleaner code. (This would mean we don't need default values for `LatticeException`.) IMO this is also okay since `LatticeException` inherits from `ValueError`.

But then I guess that `LatticePoset(P)` could say "not a *semi*lattice", assuming that I don't check the error string. Is that bad? Not that much, but...?



---

archive/issue_comments_271216.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d3620e49b09477c152e92ab49111f9467b9638c\"><code>7d3620e</code></a></td><td><code>Some tuning.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a60a36bd61d937ca05ebd2f791f8132368ccb83a\"><code>a60a36b</code></a></td><td><code>Some tuning to hasse_diagram.py.</code></td></tr></table>\n",
    "created_at": "2016-02-25T07:19:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271216",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d3620e49b09477c152e92ab49111f9467b9638c"><code>7d3620e</code></a></td><td><code>Some tuning.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a60a36bd61d937ca05ebd2f791f8132368ccb83a"><code>a60a36b</code></a></td><td><code>Some tuning to hasse_diagram.py.</code></td></tr></table>




---

archive/issue_comments_271217.json:
```json
{
    "body": "Changed commit from **[`0d0a09a`](https://github.com/sagemath/sagetrac-mirror/commit/0d0a09a405986b478644873761d2dd59cad03dc6)** to **[`a60a36b`](https://github.com/sagemath/sagetrac-mirror/commit/a60a36bd61d937ca05ebd2f791f8132368ccb83a)**",
    "created_at": "2016-02-25T07:19:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271217",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0d0a09a`](https://github.com/sagemath/sagetrac-mirror/commit/0d0a09a405986b478644873761d2dd59cad03dc6)** to **[`a60a36b`](https://github.com/sagemath/sagetrac-mirror/commit/a60a36bd61d937ca05ebd2f791f8132368ccb83a)**



---

archive/issue_comments_271218.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI did some changes. But I got strange error from `make`:\n\n```\n[polynomia] build succeeded.\nError building the documentation.\nTraceback (most recent call last):\n  File \"/home/jm58660/sage/local/lib/python/runpy.py\", line 162, in _run_module_as_main\n    \"__main__\", fname, loader, pkg_name)\n  File \"/home/jm58660/sage/local/lib/python/runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"/home/jm58660/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n    main()\n  File \"/home/jm58660/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 1620, in main\n    builder()\n  File \"/home/jm58660/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 280, in _wrapper\n    getattr(get_builder(document), 'inventory')(*args, **kwds)\n  File \"/home/jm58660/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 491, in _wrapper\n    x.get(99999)\n  File \"/home/jm58660/sage/local/lib/python/multiprocessing/pool.py\", line 567, in get\n    raise self._value\nAttributeError: 'module' object has no attribute 'has'\nmake[2]: *** [doc-html] Error 1\n```\n\nAny ideas?",
    "created_at": "2016-02-25T07:21:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271218",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:26" align="right">comment:26</div>

I did some changes. But I got strange error from `make`:

```
[polynomia] build succeeded.
Error building the documentation.
Traceback (most recent call last):
  File "/home/jm58660/sage/local/lib/python/runpy.py", line 162, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "/home/jm58660/sage/local/lib/python/runpy.py", line 72, in _run_code
    exec code in run_globals
  File "/home/jm58660/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
    main()
  File "/home/jm58660/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 1620, in main
    builder()
  File "/home/jm58660/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 280, in _wrapper
    getattr(get_builder(document), 'inventory')(*args, **kwds)
  File "/home/jm58660/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 491, in _wrapper
    x.get(99999)
  File "/home/jm58660/sage/local/lib/python/multiprocessing/pool.py", line 567, in get
    raise self._value
AttributeError: 'module' object has no attribute 'has'
make[2]: *** [doc-html] Error 1
```

Any ideas?



---

archive/issue_comments_271219.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@jm58660](#comment:24):\n\nJust pinging for this question:\n\n> But then I guess that `LatticePoset(P)` could say \"not a *semi*lattice\", assuming that I don't check the error string. Is that bad? Not that much, but...?",
    "created_at": "2016-03-03T07:27:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271219",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@jm58660](#comment:24):

Just pinging for this question:

> But then I guess that `LatticePoset(P)` could say "not a *semi*lattice", assuming that I don't check the error string. Is that bad? Not that much, but...?



---

archive/issue_comments_271220.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nPing.",
    "created_at": "2016-04-12T08:12:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271220",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:28" align="right">comment:28</div>

Ping.



---

archive/issue_comments_271221.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@jm58660](#comment:27):\n> Replying to [@jm58660](#comment:24):\n> \n> Just pinging for this question:\n> \n> > But then I guess that `LatticePoset(P)` could say \"not a *semi*lattice\", assuming that I don't check the error string. Is that bad? Not that much, but...?\n\nWell, perhaps just have `x` and `y` be default to `None` in the exception `__init__`, but it contradicts your docstring for `LatticeError`. Moreover, I still think you should let that propagate up rather than creating a completely new error message.",
    "created_at": "2016-04-13T13:47:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271221",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@jm58660](#comment:27):
> Replying to [@jm58660](#comment:24):
> 
> Just pinging for this question:
> 
> > But then I guess that `LatticePoset(P)` could say "not a *semi*lattice", assuming that I don't check the error string. Is that bad? Not that much, but...?

Well, perhaps just have `x` and `y` be default to `None` in the exception `__init__`, but it contradicts your docstring for `LatticeError`. Moreover, I still think you should let that propagate up rather than creating a completely new error message.



---

archive/issue_comments_271222.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nNeeds thinking. I put this to *needs_work* to see what tickets are really just waiting for a review.",
    "created_at": "2016-04-27T08:14:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271222",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:30" align="right">comment:30</div>

Needs thinking. I put this to *needs_work* to see what tickets are really just waiting for a review.



---

archive/issue_events_272041.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-04-27T08:14:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272041"
}
```



---

archive/issue_events_272042.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-04-27T08:14:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272042"
}
```



---

archive/issue_comments_271223.json:
```json
{
    "body": "Changed commit from **[`a60a36b`](https://github.com/sagemath/sagetrac-mirror/commit/a60a36bd61d937ca05ebd2f791f8132368ccb83a)** to **[`fbe30ae`](https://github.com/sagemath/sagetrac-mirror/commit/fbe30ae2b1bbe2e1e3aeb0dca6ca4867c01a65fa)**",
    "created_at": "2016-07-18T08:42:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271223",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a60a36b`](https://github.com/sagemath/sagetrac-mirror/commit/a60a36bd61d937ca05ebd2f791f8132368ccb83a)** to **[`fbe30ae`](https://github.com/sagemath/sagetrac-mirror/commit/fbe30ae2b1bbe2e1e3aeb0dca6ca4867c01a65fa)**



---

archive/issue_comments_271224.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fbe30ae2b1bbe2e1e3aeb0dca6ca4867c01a65fa\"><code>fbe30ae</code></a></td><td><code>Error reporting for lattice creation.</code></td></tr></table>\n",
    "created_at": "2016-07-18T08:42:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271224",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fbe30ae2b1bbe2e1e3aeb0dca6ca4867c01a65fa"><code>fbe30ae</code></a></td><td><code>Error reporting for lattice creation.</code></td></tr></table>




---

archive/issue_events_272043.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-07-18T08:49:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272043"
}
```



---

archive/issue_events_272044.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-07-18T08:49:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272044"
}
```



---

archive/issue_events_272045.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-07-18T08:49:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272045"
}
```



---

archive/issue_events_272046.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-07-18T08:49:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272046"
}
```



---

archive/issue_comments_271225.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nOK, this was actually quite simple after thinking. Also I found an error in the process.",
    "created_at": "2016-07-18T08:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271225",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:32" align="right">comment:32</div>

OK, this was actually quite simple after thinking. Also I found an error in the process.



---

archive/issue_events_272047.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-07-18T08:49:07Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "title_is": "LatticePoset creation, better error reporting",
    "title_was": "LatticePoset creation: Empty argument, better error reporting",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272047"
}
```



---

archive/issue_comments_271226.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,19 @@\n-Before this patch sage outputs only `ValueError: Not a lattice.` from\n+There is an error in current exception for join-semilattices:\n \n ```\n-LatticePoset({'a':['b', 'c'], 'b': ['d', 'e'], 'c': ['d', 'e'], 'd': ['f'], 'e': ['f']})\n+P = Poset({'a': ['b', 'c'], 'b': ['d', 'e'], 'c': ['d', 'e'], 'd': ['f'], 'e': ['f']})\n+P._hasse_diagram._meet\n+P._hasse_diagram._join\n ```\n \n-After this it will output `ValueError: Not a lattice: no meet for e and d.` Same applies to semilattices.\n+gives\n \n-And because `Poset()` returns the empty poset, this changes `LatticePoset()` to return the empty lattice.\n+```\n+ValueError: No meet for x=4 y=3\n+ValueError: No join for x=4 y=3\n+```\n \n+i.e. the message is wrong for `_join`.\n+\n+What's more, currently sage outputs only `ValueError: Not a lattice.` when creating a lattice. After this it will output `ValueError: Not a lattice: no meet for e and d.`\n+\n``````\n",
    "created_at": "2016-07-18T08:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271226",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,19 @@
-Before this patch sage outputs only `ValueError: Not a lattice.` from
+There is an error in current exception for join-semilattices:
 
 ```
-LatticePoset({'a':['b', 'c'], 'b': ['d', 'e'], 'c': ['d', 'e'], 'd': ['f'], 'e': ['f']})
+P = Poset({'a': ['b', 'c'], 'b': ['d', 'e'], 'c': ['d', 'e'], 'd': ['f'], 'e': ['f']})
+P._hasse_diagram._meet
+P._hasse_diagram._join
 ```
 
-After this it will output `ValueError: Not a lattice: no meet for e and d.` Same applies to semilattices.
+gives
 
-And because `Poset()` returns the empty poset, this changes `LatticePoset()` to return the empty lattice.
+```
+ValueError: No meet for x=4 y=3
+ValueError: No join for x=4 y=3
+```
 
+i.e. the message is wrong for `_join`.
+
+What's more, currently sage outputs only `ValueError: Not a lattice.` when creating a lattice. After this it will output `ValueError: Not a lattice: no meet for e and d.`
+
``````




---

archive/issue_events_272048.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-07-18T08:49:07Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272048"
}
```



---

archive/issue_events_272049.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-07-18T08:49:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272049"
}
```



---

archive/issue_events_272050.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-07-18T14:42:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272050"
}
```



---

archive/issue_events_272051.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-07-18T14:42:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272051"
}
```



---

archive/issue_comments_271227.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@tscrim](#comment:29):\n> Moreover, I still think you should let that propagate up rather than creating a completely new error message.\n\nThis is still an issue, both for readability and performance. I can write a modified version if you want.",
    "created_at": "2016-07-18T14:42:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271227",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@tscrim](#comment:29):
> Moreover, I still think you should let that propagate up rather than creating a completely new error message.

This is still an issue, both for readability and performance. I can write a modified version if you want.



---

archive/issue_comments_271228.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@tscrim](#comment:33):\n> Replying to [@tscrim](#comment:29):\n> > Moreover, I still think you should let that propagate up rather than creating a completely new error message.\n\n> \n> This is still an issue, both for readability and performance. I can write a modified version if you want.\n\nPlease do so, as I think that I don't understand what you mean.",
    "created_at": "2016-07-18T16:06:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271228",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@tscrim](#comment:33):
> Replying to [@tscrim](#comment:29):
> > Moreover, I still think you should let that propagate up rather than creating a completely new error message.

> 
> This is still an issue, both for readability and performance. I can write a modified version if you want.

Please do so, as I think that I don't understand what you mean.



---

archive/issue_comments_271229.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@jm58660](#comment:34):\n> Replying to [@tscrim](#comment:33):\n> > Replying to [@tscrim](#comment:29):\n> > > Moreover, I still think you should let that propagate up rather than creating a completely new error message.\n\n> > \n> > This is still an issue, both for readability and performance. I can write a modified version if you want.\n\n> \n> Please do so, as I think that I don't understand what you mean.\n\nJust pingin this.",
    "created_at": "2016-08-13T04:42:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271229",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@jm58660](#comment:34):
> Replying to [@tscrim](#comment:33):
> > Replying to [@tscrim](#comment:29):
> > > Moreover, I still think you should let that propagate up rather than creating a completely new error message.

> > 
> > This is still an issue, both for readability and performance. I can write a modified version if you want.

> 
> Please do so, as I think that I don't understand what you mean.

Just pingin this.



---

archive/issue_comments_271230.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nAnother ping. I don't get what you suggest until I see a code or at least a pseudocode.",
    "created_at": "2016-09-14T08:15:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271230",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:36" align="right">comment:36</div>

Another ping. I don't get what you suggest until I see a code or at least a pseudocode.



---

archive/issue_comments_271231.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nSorry it took so long, kept having other things come up. Here is what I am suggesting, where we don't recreate the error, just trap it long enough to change the element labels.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2584c1d44ce4d24ac11c42cce98b202d6640d561\"><code>2584c1d</code></a></td><td><code>Merge branch 'u/jmantysalo/latticeposet_creation__empty_argument__better_error_reporting' of git://trac.sagemath.org/sage into u/jmantysalo/latticeposet_creation__empty_argument__better_error_reporting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d6e21b7e78e17d84efc4d2dd5e6444fc226ea85\"><code>7d6e21b</code></a></td><td><code>Do not recreate error messages, just propogate the result up.</code></td></tr></table>\n",
    "created_at": "2016-09-14T14:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271231",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:37" align="right">comment:37</div>

Sorry it took so long, kept having other things come up. Here is what I am suggesting, where we don't recreate the error, just trap it long enough to change the element labels.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2584c1d44ce4d24ac11c42cce98b202d6640d561"><code>2584c1d</code></a></td><td><code>Merge branch 'u/jmantysalo/latticeposet_creation__empty_argument__better_error_reporting' of git://trac.sagemath.org/sage into u/jmantysalo/latticeposet_creation__empty_argument__better_error_reporting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d6e21b7e78e17d84efc4d2dd5e6444fc226ea85"><code>7d6e21b</code></a></td><td><code>Do not recreate error messages, just propogate the result up.</code></td></tr></table>




---

archive/issue_comments_271232.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2016-09-14T14:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271232",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_272052.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-14T14:06:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272052"
}
```



---

archive/issue_events_272053.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-14T14:06:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272053"
}
```



---

archive/issue_comments_271233.json:
```json
{
    "body": "Changed commit from **[`fbe30ae`](https://github.com/sagemath/sagetrac-mirror/commit/fbe30ae2b1bbe2e1e3aeb0dca6ca4867c01a65fa)** to **[`7d6e21b`](https://github.com/sagemath/sagetrac-mirror/commit/7d6e21b7e78e17d84efc4d2dd5e6444fc226ea85)**",
    "created_at": "2016-09-14T14:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271233",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`fbe30ae`](https://github.com/sagemath/sagetrac-mirror/commit/fbe30ae2b1bbe2e1e3aeb0dca6ca4867c01a65fa)** to **[`7d6e21b`](https://github.com/sagemath/sagetrac-mirror/commit/7d6e21b7e78e17d84efc4d2dd5e6444fc226ea85)**



---

archive/issue_events_272054.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-14T14:06:04Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272054"
}
```



---

archive/issue_events_272055.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-14T14:06:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272055"
}
```



---

archive/issue_comments_271234.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/latticeposet_creation__empty_argument__better_error_reporting](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/latticeposet_creation__empty_argument__better_error_reporting)** to **[u/tscrim/lattice_errors-19163](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/lattice_errors-19163)**",
    "created_at": "2016-09-14T14:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271234",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/jmantysalo/latticeposet_creation__empty_argument__better_error_reporting](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/latticeposet_creation__empty_argument__better_error_reporting)** to **[u/tscrim/lattice_errors-19163](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/lattice_errors-19163)**



---

archive/issue_comments_271235.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nNow I understand: Green solution, recycling of error message!\n\nAlso test passed, and I manually checked meet- and join-semilattices. Hence positive review.\n\nReplying to [@tscrim](#comment:37):\n\n> Sorry it took so long\n\nNo horry. I have said to some developer (you?) earlier: it took about 2000 years to proof that squaring a circle is impossible. So there is no horry, this is mathematics.",
    "created_at": "2016-09-14T16:53:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271235",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:38" align="right">comment:38</div>

Now I understand: Green solution, recycling of error message!

Also test passed, and I manually checked meet- and join-semilattices. Hence positive review.

Replying to [@tscrim](#comment:37):

> Sorry it took so long

No horry. I have said to some developer (you?) earlier: it took about 2000 years to proof that squaring a circle is impossible. So there is no horry, this is mathematics.



---

archive/issue_events_272056.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-09-14T16:53:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272056"
}
```



---

archive/issue_events_272057.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-09-14T16:53:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272057"
}
```



---

archive/issue_comments_271236.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Jori M\u00e4ntysalo**",
    "created_at": "2016-09-14T16:55:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271236",
    "user": "https://github.com/jm58660"
}
```

Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Jori Mäntysalo**



---

archive/issue_comments_271237.json:
```json
{
    "body": "Changed author from **Jori M\u00e4ntysalo** to **Jori M\u00e4ntysalo, Travis Scrimshaw**",
    "created_at": "2016-09-14T16:55:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271237",
    "user": "https://github.com/jm58660"
}
```

Changed author from **Jori Mäntysalo** to **Jori Mäntysalo, Travis Scrimshaw**



---

archive/issue_comments_271238.json:
```json
{
    "body": "Changed branch from **[u/tscrim/lattice_errors-19163](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/lattice_errors-19163)** to **[`7d6e21b`](https://github.com/sagemath/sagetrac-mirror/commit/7d6e21b7e78e17d84efc4d2dd5e6444fc226ea85)**",
    "created_at": "2016-09-17T15:25:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19163#issuecomment-271238",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/tscrim/lattice_errors-19163](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/lattice_errors-19163)** to **[`7d6e21b`](https://github.com/sagemath/sagetrac-mirror/commit/7d6e21b7e78e17d84efc4d2dd5e6444fc226ea85)**



---

archive/issue_events_272058.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-17T15:25:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272058"
}
```



---

archive/issue_events_272059.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "408b4a26dd0fd6a0709d6b164105d5fca3c16bbc",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-09-17T15:25:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19163",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19163#event-272059"
}
```
