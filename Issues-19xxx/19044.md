# Issue 19044: Span of trivial cones

archive/issues_018807.json:
```json
{
    "body": "The following has been annoying me in my doctests. We can take the span of most cones:\n\n```\nsage: K = Cone([(1,)])\nsage: span(K)\nFree module of degree 1 and rank 1 over Integer Ring\nEchelon basis matrix:\n[1]\nsage: span(K, K.lattice().base_ring())\nSublattice <N(1)>\n```\n\nBut `span()` tries to deduce the base ring itself, and that doesn't work for the trivial cone:\n\n```\nsage: K = Cone([], ToricLattice(0))\nsage: span(K)\n...\nAttributeError: 'Objects_with_category' object has no attribute 'base_ring'\n```\n\nI've worked around it by implementing `span` as a method on `IntegralRayCollection`:\n\n```\ndef span(self):\n    return span(self, self.lattice().base_ring())\n```\n\nDoes this approach sound good, or should it be fixed with a special case inside `span()`?\n\n\nCC:  @novoselt\n\nBranch/Commit: 3fc16c66c4680e271628c0d7816270e5c52da3a8\n\nReviewer: Andrey Novoseltsev\n\nAuthor: Michael Orlitzky\n\nDependencies: 18701\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19044\n\n",
    "closed_at": "2015-08-23T23:31:11Z",
    "created_at": "2015-08-16T22:19:01Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "Span of trivial cones",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19044",
    "user": "https://github.com/orlitzky"
}
```
The following has been annoying me in my doctests. We can take the span of most cones:

```
sage: K = Cone([(1,)])
sage: span(K)
Free module of degree 1 and rank 1 over Integer Ring
Echelon basis matrix:
[1]
sage: span(K, K.lattice().base_ring())
Sublattice <N(1)>
```

But `span()` tries to deduce the base ring itself, and that doesn't work for the trivial cone:

```
sage: K = Cone([], ToricLattice(0))
sage: span(K)
...
AttributeError: 'Objects_with_category' object has no attribute 'base_ring'
```

I've worked around it by implementing `span` as a method on `IntegralRayCollection`:

```
def span(self):
    return span(self, self.lattice().base_ring())
```

Does this approach sound good, or should it be fixed with a special case inside `span()`?


CC:  @novoselt

Branch/Commit: 3fc16c66c4680e271628c0d7816270e5c52da3a8

Reviewer: Andrey Novoseltsev

Author: Michael Orlitzky

Dependencies: 18701

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19044





---

archive/issue_comments_273732.json:
```json
{
    "body": "<a id='comment:1'></a>I think it is definitely better to fix cone things in cone modules. Let's just make sure that optional arguments to `span` work in the same way, so it is also possible to do `span(K, QQ)` etc.",
    "created_at": "2015-08-16T22:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19044#issuecomment-273732",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:1'></a>I think it is definitely better to fix cone things in cone modules. Let's just make sure that optional arguments to `span` work in the same way, so it is also possible to do `span(K, QQ)` etc.



---

archive/issue_comments_273733.json:
```json
{
    "body": "<a id='comment:2'></a>I went with the lattice `span` method rather than the global function. Seems a bit cleaner to me and makes no difference for what I'm doing.\n\n---\nLast 10 new commits:",
    "created_at": "2015-08-20T20:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19044#issuecomment-273733",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:2'></a>I went with the lattice `span` method rather than the global function. Seems a bit cleaner to me and makes no difference for what I'm doing.

---
Last 10 new commits:



---

archive/issue_comments_273734.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-08-20T20:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19044#issuecomment-273734",
    "user": "https://github.com/orlitzky"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_273735.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-22T21:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19044#issuecomment-273735",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_273736.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-23T23:31:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19044#issuecomment-273736",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_052997.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-23T23:31:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19044#event-52997"
}
```
