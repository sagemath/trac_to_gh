# Issue 19044: Span of trivial cones

archive/issues_018807.json:
```json
{
    "body": "The following has been annoying me in my doctests. We can take the span of most cones:\n\n```\nsage: K = Cone([(1,)])\nsage: span(K)\nFree module of degree 1 and rank 1 over Integer Ring\nEchelon basis matrix:\n[1]\nsage: span(K, K.lattice().base_ring())\nSublattice <N(1)>\n```\n\nBut `span()` tries to deduce the base ring itself, and that doesn't work for the trivial cone:\n\n```\nsage: K = Cone([], ToricLattice(0))\nsage: span(K)\n...\nAttributeError: 'Objects_with_category' object has no attribute 'base_ring'\n```\n\nI've worked around it by implementing `span` as a method on `IntegralRayCollection`:\n\n```\ndef span(self):\n    return span(self, self.lattice().base_ring())\n```\n\nDoes this approach sound good, or should it be fixed with a special case inside `span()`?\n\n\nCC:  @novoselt\n\nBranch/Commit: [3fc16c66c4680e271628c0d7816270e5c52da3a8](https://github.com/sagemath/sagetrac-mirror/commit/3fc16c66c4680e271628c0d7816270e5c52da3a8)\n\nReviewer: Andrey Novoseltsev\n\nAuthor: Michael Orlitzky\n\nDependencies: 18701\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19044\n\n",
    "closed_at": "2015-08-23T23:31:11Z",
    "created_at": "2015-08-16T22:19:01Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "Span of trivial cones",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19044",
    "user": "https://github.com/orlitzky"
}
```
The following has been annoying me in my doctests. We can take the span of most cones:

```
sage: K = Cone([(1,)])
sage: span(K)
Free module of degree 1 and rank 1 over Integer Ring
Echelon basis matrix:
[1]
sage: span(K, K.lattice().base_ring())
Sublattice <N(1)>
```

But `span()` tries to deduce the base ring itself, and that doesn't work for the trivial cone:

```
sage: K = Cone([], ToricLattice(0))
sage: span(K)
...
AttributeError: 'Objects_with_category' object has no attribute 'base_ring'
```

I've worked around it by implementing `span` as a method on `IntegralRayCollection`:

```
def span(self):
    return span(self, self.lattice().base_ring())
```

Does this approach sound good, or should it be fixed with a special case inside `span()`?


CC:  @novoselt

Branch/Commit: [3fc16c66c4680e271628c0d7816270e5c52da3a8](https://github.com/sagemath/sagetrac-mirror/commit/3fc16c66c4680e271628c0d7816270e5c52da3a8)

Reviewer: Andrey Novoseltsev

Author: Michael Orlitzky

Dependencies: 18701

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19044





---

archive/issue_comments_342194.json:
```json
{
    "body": "<a id='comment:1'></a>\nI think it is definitely better to fix cone things in cone modules. Let's just make sure that optional arguments to `span` work in the same way, so it is also possible to do `span(K, QQ)` etc.",
    "created_at": "2015-08-16T22:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19044#issuecomment-342194",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:1'></a>
I think it is definitely better to fix cone things in cone modules. Let's just make sure that optional arguments to `span` work in the same way, so it is also possible to do `span(K, QQ)` etc.



---

archive/issue_comments_342195.json:
```json
{
    "body": "<a id='comment:2'></a>\nI went with the lattice `span` method rather than the global function. Seems a bit cleaner to me and makes no difference for what I'm doing.\n\n---\nLast 10 new commits:\n|                                                                                                                                          |                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|\n|[5b1eccb](https://github.com/sagemath/sagetrac-mirror/commit/5b1eccb017d5b38e9e46aca56a97a685e62d3e46)|`Trac #18454: Remove some excessive doctests for random_cone().`|\n|[5bf86a6](https://github.com/sagemath/sagetrac-mirror/commit/5bf86a61fb7f1e41fa1c472c73789eb51c5586fd)|`Trac #18454: Clean up long random_cone() tests.`|\n|[e6e7a80](https://github.com/sagemath/sagetrac-mirror/commit/e6e7a80023ea5097f4f803b8613f05e5e028723b)|`Merge branch 't/18613/errors_with_is_isomorphic___for_trivial_cones' into t/18454/ticket/18454`|\n|[a07efa9](https://github.com/sagemath/sagetrac-mirror/commit/a07efa959bcbd088f34e3e4b7bd0a653cfaa998d)|`Reviewer's tweaks to random cones.`|\n|[8c962e1](https://github.com/sagemath/sagetrac-mirror/commit/8c962e18f07c294b96aedf12ae88069f456f099b)|`Trac #18454: Remove more redundant (long) tests.`|\n|[ed422e3](https://github.com/sagemath/sagetrac-mirror/commit/ed422e3d3eaed45d146398ffffc640ab4fe1abe7)|`Trac #18696: Add lineality() method for convex cones.`|\n|[d3eb1c9](https://github.com/sagemath/sagetrac-mirror/commit/d3eb1c912153d8c0b6f4175320d8ee4b1e6bafb3)|`Trac #18696: Fix reviewer's suggestions.`|\n|[6eb8bbd](https://github.com/sagemath/sagetrac-mirror/commit/6eb8bbdb6bbb462acffbd98a6540c7244c964979)|`Trac #18701: Add a codim() method for convex cones.`|\n|[0fdb077](https://github.com/sagemath/sagetrac-mirror/commit/0fdb077f83d409b1db7f4133e69394023eb66ba3)|`Trac #18701: Fix reviewer's suggestions.`|\n|[3fc16c6](https://github.com/sagemath/sagetrac-mirror/commit/3fc16c66c4680e271628c0d7816270e5c52da3a8)|`Trac #19044: Add span() method to IntegralRayCollection.`|",
    "created_at": "2015-08-20T20:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19044#issuecomment-342195",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:2'></a>
I went with the lattice `span` method rather than the global function. Seems a bit cleaner to me and makes no difference for what I'm doing.

---
Last 10 new commits:
|                                                                                                                                          |                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
|[5b1eccb](https://github.com/sagemath/sagetrac-mirror/commit/5b1eccb017d5b38e9e46aca56a97a685e62d3e46)|`Trac #18454: Remove some excessive doctests for random_cone().`|
|[5bf86a6](https://github.com/sagemath/sagetrac-mirror/commit/5bf86a61fb7f1e41fa1c472c73789eb51c5586fd)|`Trac #18454: Clean up long random_cone() tests.`|
|[e6e7a80](https://github.com/sagemath/sagetrac-mirror/commit/e6e7a80023ea5097f4f803b8613f05e5e028723b)|`Merge branch 't/18613/errors_with_is_isomorphic___for_trivial_cones' into t/18454/ticket/18454`|
|[a07efa9](https://github.com/sagemath/sagetrac-mirror/commit/a07efa959bcbd088f34e3e4b7bd0a653cfaa998d)|`Reviewer's tweaks to random cones.`|
|[8c962e1](https://github.com/sagemath/sagetrac-mirror/commit/8c962e18f07c294b96aedf12ae88069f456f099b)|`Trac #18454: Remove more redundant (long) tests.`|
|[ed422e3](https://github.com/sagemath/sagetrac-mirror/commit/ed422e3d3eaed45d146398ffffc640ab4fe1abe7)|`Trac #18696: Add lineality() method for convex cones.`|
|[d3eb1c9](https://github.com/sagemath/sagetrac-mirror/commit/d3eb1c912153d8c0b6f4175320d8ee4b1e6bafb3)|`Trac #18696: Fix reviewer's suggestions.`|
|[6eb8bbd](https://github.com/sagemath/sagetrac-mirror/commit/6eb8bbdb6bbb462acffbd98a6540c7244c964979)|`Trac #18701: Add a codim() method for convex cones.`|
|[0fdb077](https://github.com/sagemath/sagetrac-mirror/commit/0fdb077f83d409b1db7f4133e69394023eb66ba3)|`Trac #18701: Fix reviewer's suggestions.`|
|[3fc16c6](https://github.com/sagemath/sagetrac-mirror/commit/3fc16c66c4680e271628c0d7816270e5c52da3a8)|`Trac #19044: Add span() method to IntegralRayCollection.`|



---

archive/issue_comments_342196.json:
```json
{
    "body": "Branch: [u/mjo/ticket/19044](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/19044)",
    "created_at": "2015-08-20T20:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19044#issuecomment-342196",
    "user": "https://github.com/orlitzky"
}
```

Branch: [u/mjo/ticket/19044](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/19044)



---

archive/issue_comments_342197.json:
```json
{
    "body": "Dependencies: 18701",
    "created_at": "2015-08-20T20:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19044#issuecomment-342197",
    "user": "https://github.com/orlitzky"
}
```

Dependencies: 18701



---

archive/issue_comments_342198.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-08-20T20:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19044#issuecomment-342198",
    "user": "https://github.com/orlitzky"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_342199.json:
```json
{
    "body": "Commit: [3fc16c66c4680e271628c0d7816270e5c52da3a8](https://github.com/sagemath/sagetrac-mirror/commit/3fc16c66c4680e271628c0d7816270e5c52da3a8)",
    "created_at": "2015-08-20T20:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19044#issuecomment-342199",
    "user": "https://github.com/orlitzky"
}
```

Commit: [3fc16c66c4680e271628c0d7816270e5c52da3a8](https://github.com/sagemath/sagetrac-mirror/commit/3fc16c66c4680e271628c0d7816270e5c52da3a8)



---

archive/issue_comments_342200.json:
```json
{
    "body": "Reviewer: Andrey Novoseltsev",
    "created_at": "2015-08-22T21:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19044#issuecomment-342200",
    "user": "https://github.com/novoselt"
}
```

Reviewer: Andrey Novoseltsev



---

archive/issue_comments_342201.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-22T21:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19044#issuecomment-342201",
    "user": "https://github.com/novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_342202.json:
```json
{
    "body": "Author: Michael Orlitzky",
    "created_at": "2015-08-22T21:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19044#issuecomment-342202",
    "user": "https://github.com/novoselt"
}
```

Author: Michael Orlitzky



---

archive/issue_comments_342203.json:
```json
{
    "body": "Changing branch from \"[u/mjo/ticket/19044](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/19044)\" to \"[3fc16c66c4680e271628c0d7816270e5c52da3a8](https://github.com/sagemath/sagetrac-mirror/commit/3fc16c66c4680e271628c0d7816270e5c52da3a8)\"",
    "created_at": "2015-08-23T23:31:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19044#issuecomment-342203",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[u/mjo/ticket/19044](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/19044)" to "[3fc16c66c4680e271628c0d7816270e5c52da3a8](https://github.com/sagemath/sagetrac-mirror/commit/3fc16c66c4680e271628c0d7816270e5c52da3a8)"



---

archive/issue_comments_342204.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-23T23:31:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19044#issuecomment-342204",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_060259.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-08-23T23:31:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19044",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19044#event-60259"
}
```
