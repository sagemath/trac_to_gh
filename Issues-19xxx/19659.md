# Issue 19659: Poset: inverse function of ordinal_sum()

archive/issues_019422.json:
```json
{
    "assignees": [],
    "body": "I suggest adding a function that decomposes a poset \"vertically\", i.e. has same relationship to `ordinal_sum()` as `connected_components()` has to `disjoint_union()`. This ticket contains code for the \"backend\", i.e. to `hasse_diagram.py`.\n\nI am not sure about the name. Maybe `ordinal_decomposition`. Or maybe it could be `ordinal_components` or `vertical_components`.\n\nBonus question: What should be the name for inverse function of `ordinal_product()`?\n\nCC:  @nathanncohen @fchapoton\n\nKeywords: **poset**\n\nBranch/Commit: **[`be8c48e`](https://github.com/sagemath/sagetrac-mirror/commit/be8c48e0bc992b99a7a9e94777689857a7570b40)**\n\nReviewer: **Nathann Cohen, Jori M\u00e4ntysalo, Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **Jori M\u00e4ntysalo, Nathann Cohen**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19659_\n\n",
    "closed_at": "2016-02-10T08:20:55Z",
    "created_at": "2015-12-02T09:15:56Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Poset: inverse function of ordinal_sum()",
    "type": "issue",
    "updated_at": "2016-02-10T08:20:55Z",
    "url": "https://github.com/sagemath/sage/issues/19659",
    "user": "https://github.com/jm58660"
}
```
I suggest adding a function that decomposes a poset "vertically", i.e. has same relationship to `ordinal_sum()` as `connected_components()` has to `disjoint_union()`. This ticket contains code for the "backend", i.e. to `hasse_diagram.py`.

I am not sure about the name. Maybe `ordinal_decomposition`. Or maybe it could be `ordinal_components` or `vertical_components`.

Bonus question: What should be the name for inverse function of `ordinal_product()`?

CC:  @nathanncohen @fchapoton

Keywords: **poset**

Branch/Commit: **[`be8c48e`](https://github.com/sagemath/sagetrac-mirror/commit/be8c48e0bc992b99a7a9e94777689857a7570b40)**

Reviewer: **Nathann Cohen, Jori Mäntysalo, Frédéric Chapoton**

Author: **Jori Mäntysalo, Nathann Cohen**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/19659_





---

archive/issue_events_275865.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-12-02T09:15:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19659#event-275865"
}
```



---

archive/issue_events_275866.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-12-02T09:15:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19659#event-275866"
}
```



---

archive/issue_events_275867.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-12-02T09:15:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19659#event-275867"
}
```



---

archive/issue_events_275868.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-12-02T09:15:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19659#event-275868"
}
```



---

archive/issue_comments_280576.json:
```json
{
    "body": "Branch: **[u/jmantysalo/develop](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/develop)**",
    "created_at": "2015-12-04T18:47:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280576",
    "user": "https://github.com/jm58660"
}
```

Branch: **[u/jmantysalo/develop](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/develop)**



---

archive/issue_comments_280577.json:
```json
{
    "body": "Commit: **[`fcd68b9`](https://github.com/sagemath/sagetrac-mirror/commit/fcd68b964edd9abc071b32d49e90818f86073f01)**",
    "created_at": "2015-12-04T18:51:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280577",
    "user": "https://github.com/jm58660"
}
```

Commit: **[`fcd68b9`](https://github.com/sagemath/sagetrac-mirror/commit/fcd68b964edd9abc071b32d49e90818f86073f01)**



---

archive/issue_events_275869.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-12-04T18:51:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19659#event-275869"
}
```



---

archive/issue_comments_280578.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1d6f4baf5430150855d1ba5630aa181d9cba421\"><code>d1d6f4b</code></a></td><td><code>Added ordinal_sum_decomposition().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fcd68b964edd9abc071b32d49e90818f86073f01\"><code>fcd68b9</code></a></td><td><code>Spaces removed.</code></td></tr></table>\n",
    "created_at": "2015-12-04T18:51:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280578",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1d6f4baf5430150855d1ba5630aa181d9cba421"><code>d1d6f4b</code></a></td><td><code>Added ordinal_sum_decomposition().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fcd68b964edd9abc071b32d49e90818f86073f01"><code>fcd68b9</code></a></td><td><code>Spaces removed.</code></td></tr></table>




---

archive/issue_comments_280579.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,84 +1,5 @@\n-I suggest adding a function that decomposes a poset \"vertically\", i.e. has same relationship to `ordinal_sum()` as `connected_components()` has to `disjoint_union()`.\n+I suggest adding a function that decomposes a poset \"vertically\", i.e. has same relationship to `ordinal_sum()` as `connected_components()` has to `disjoint_union()`. This ticket contains code for the \"backend\", i.e. to `hasse_diagram.py`.\n \n-I am not sure about the name. Work name is `ordinal_decomposition`. Maybe it could be `ordinal_components` or `vertical_components`.\n+I am not sure about the name. Maybe `ordinal_decomposition`. Or maybe it could be `ordinal_components` or `vertical_components`.\n \n-Here is the code to add to `hasse_diagram.py`. I suppose not to have time to make this a patch file for few days. Feel free to comment.\n-\n-```\n-def ordinal_decomposition(self):\n-    r\"\"\"\n-    Return the ordinal decomposition of the poset.\n-    \n-    This function is kind of inverse to ordinal_sum(). Ordinal\n-    decomposition of a poset `P` is the list of posets\n-    `P_1, \\ldots, P_n` so that `P` is ordinal decomposition of them.\n-\n-    OUTPUT:\n-        \n-    List of numbers `e_1, \\ldots, e_n`\n-    so that `P_1` is subposet containing `0, \\ldots, e_1`,\n-    `P_2` is subposet containing `e_1+1, \\ldots, e_2` and so on.\n-   \n-    ALGORITHM::\n-        \n-        Suppose that poset `P` is the ordinal sum of posets `L` and\n-        `U`. Then `P` contains maximal antichains `l` and `u` such that\n-        every element of `u` covers exactly every element of `l` and\n-        every element of `l` is covered by exactly every element of `u`; they\n-        correspond to maximal elements of `L` and minimal elements\n-        of `U`.\n-\n-        We know that the Hasse diagram is a topologically sorted DAG,\n-        starting numbering from zero. Hence, if `L` has `n` elements, \n-        then `l` contains element `n-1` and `u` contains element\n-        `n`.\n-\n-        We keep track of the maximal elements of subposet induced\n-        by elements 0..e and minimal elements of subposet induced\n-        by elements e+1..n, incrementing e one by one. Then we just\n-        check if they can be `l` and `u` in previous description.\n-\n-    EXAMPLES::\n-\n-        sage: from sage.combinat.posets.hasse_diagram import HasseDiagram\n-        sage: H = HasseDiagram({0:[2], 1:[2, 3], 2:[4, 5, 6], 3:[4, 5, 6],\n-        ....: 4:[7], 5:[7], 6:[7], 7:[8]})\n-        sage: H.ordinal_decomposition()\n-        [3, 6, 7, 8]\n-\n-    TESTS::\n-        \n-        sage: from sage.misc.prandom import randint\n-        sage: n = randint(1, 10)\n-        sage: P = Posets.RandomPoset(n, 0.1)\n-        sage: H = P.ordinal_sum(P)._hasse_diagram\n-        sage: m = H.ordinal_decomposition()\n-        sage: n in m\n-        True\n-    \"\"\"\n-    cut_points = []\n-    n = self.order()\n-    in_degrees = [len(self.neighbors_in(e)) for e in range(n)]\n-    lower = set([])\n-    upper = set(self.sources())\n-\n-    for e in range(n):\n-        lower.add(e)\n-        for lc in self.neighbors_in(e):\n-            lower.discard(lc)\n-        upper.discard(e)\n-        up_covers = self.neighbors_out(e)\n-        for uc in up_covers:\n-            in_degrees[uc] -= 1\n-            if in_degrees[uc] == 0:\n-                upper.add(uc)\n-        if e+1 in up_covers:\n-            for l in lower:\n-                if set(self.neighbors_out(l)) != upper:\n-                    break\n-            else:\n-                cut_points.append(e)\n-    cut_points.append(n-1)\n-    return cut_points\n-```\n-\n+Bonus question: What should be the name for inverse function of `ordinal_product()`?\n``````\n",
    "created_at": "2015-12-04T18:51:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280579",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,84 +1,5 @@
-I suggest adding a function that decomposes a poset "vertically", i.e. has same relationship to `ordinal_sum()` as `connected_components()` has to `disjoint_union()`.
+I suggest adding a function that decomposes a poset "vertically", i.e. has same relationship to `ordinal_sum()` as `connected_components()` has to `disjoint_union()`. This ticket contains code for the "backend", i.e. to `hasse_diagram.py`.
 
-I am not sure about the name. Work name is `ordinal_decomposition`. Maybe it could be `ordinal_components` or `vertical_components`.
+I am not sure about the name. Maybe `ordinal_decomposition`. Or maybe it could be `ordinal_components` or `vertical_components`.
 
-Here is the code to add to `hasse_diagram.py`. I suppose not to have time to make this a patch file for few days. Feel free to comment.
-
-```
-def ordinal_decomposition(self):
-    r"""
-    Return the ordinal decomposition of the poset.
-    
-    This function is kind of inverse to ordinal_sum(). Ordinal
-    decomposition of a poset `P` is the list of posets
-    `P_1, \ldots, P_n` so that `P` is ordinal decomposition of them.
-
-    OUTPUT:
-        
-    List of numbers `e_1, \ldots, e_n`
-    so that `P_1` is subposet containing `0, \ldots, e_1`,
-    `P_2` is subposet containing `e_1+1, \ldots, e_2` and so on.
-   
-    ALGORITHM::
-        
-        Suppose that poset `P` is the ordinal sum of posets `L` and
-        `U`. Then `P` contains maximal antichains `l` and `u` such that
-        every element of `u` covers exactly every element of `l` and
-        every element of `l` is covered by exactly every element of `u`; they
-        correspond to maximal elements of `L` and minimal elements
-        of `U`.
-
-        We know that the Hasse diagram is a topologically sorted DAG,
-        starting numbering from zero. Hence, if `L` has `n` elements, 
-        then `l` contains element `n-1` and `u` contains element
-        `n`.
-
-        We keep track of the maximal elements of subposet induced
-        by elements 0..e and minimal elements of subposet induced
-        by elements e+1..n, incrementing e one by one. Then we just
-        check if they can be `l` and `u` in previous description.
-
-    EXAMPLES::
-
-        sage: from sage.combinat.posets.hasse_diagram import HasseDiagram
-        sage: H = HasseDiagram({0:[2], 1:[2, 3], 2:[4, 5, 6], 3:[4, 5, 6],
-        ....: 4:[7], 5:[7], 6:[7], 7:[8]})
-        sage: H.ordinal_decomposition()
-        [3, 6, 7, 8]
-
-    TESTS::
-        
-        sage: from sage.misc.prandom import randint
-        sage: n = randint(1, 10)
-        sage: P = Posets.RandomPoset(n, 0.1)
-        sage: H = P.ordinal_sum(P)._hasse_diagram
-        sage: m = H.ordinal_decomposition()
-        sage: n in m
-        True
-    """
-    cut_points = []
-    n = self.order()
-    in_degrees = [len(self.neighbors_in(e)) for e in range(n)]
-    lower = set([])
-    upper = set(self.sources())
-
-    for e in range(n):
-        lower.add(e)
-        for lc in self.neighbors_in(e):
-            lower.discard(lc)
-        upper.discard(e)
-        up_covers = self.neighbors_out(e)
-        for uc in up_covers:
-            in_degrees[uc] -= 1
-            if in_degrees[uc] == 0:
-                upper.add(uc)
-        if e+1 in up_covers:
-            for l in lower:
-                if set(self.neighbors_out(l)) != upper:
-                    break
-            else:
-                cut_points.append(e)
-    cut_points.append(n-1)
-    return cut_points
-```
-
+Bonus question: What should be the name for inverse function of `ordinal_product()`?
``````




---

archive/issue_comments_280580.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4358a5a4574999015ccb9088bdb842dcc738d40c\"><code>4358a5a</code></a></td><td><code>Added a \"front end\"-function for ordinal splitting.</code></td></tr></table>\n",
    "created_at": "2015-12-16T13:43:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280580",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4358a5a4574999015ccb9088bdb842dcc738d40c"><code>4358a5a</code></a></td><td><code>Added a "front end"-function for ordinal splitting.</code></td></tr></table>




---

archive/issue_comments_280581.json:
```json
{
    "body": "Changed commit from **[`fcd68b9`](https://github.com/sagemath/sagetrac-mirror/commit/fcd68b964edd9abc071b32d49e90818f86073f01)** to **[`4358a5a`](https://github.com/sagemath/sagetrac-mirror/commit/4358a5a4574999015ccb9088bdb842dcc738d40c)**",
    "created_at": "2015-12-16T13:43:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280581",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fcd68b9`](https://github.com/sagemath/sagetrac-mirror/commit/fcd68b964edd9abc071b32d49e90818f86073f01)** to **[`4358a5a`](https://github.com/sagemath/sagetrac-mirror/commit/4358a5a4574999015ccb9088bdb842dcc738d40c)**



---

archive/issue_events_275870.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-12-18T10:24:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19659#event-275870"
}
```



---

archive/issue_events_275871.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-12-18T10:24:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "milestone_number": null,
    "milestone_title": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19659#event-275871"
}
```



---

archive/issue_comments_280582.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nDime, do you got a spare time for quite easy(?) review?",
    "created_at": "2015-12-18T10:24:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280582",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:4" align="right">comment:4</div>

Dime, do you got a spare time for quite easy(?) review?



---

archive/issue_comments_280583.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nit's the 1st time I see \"ordinal sum\". So it's not going to be quick for me here...",
    "created_at": "2015-12-18T15:10:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280583",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">comment:5</div>

it's the 1st time I see "ordinal sum". So it's not going to be quick for me here...



---

archive/issue_comments_280584.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@dimpase](#comment:5):\n> it's the 1st time I see \"ordinal sum\". So it's not going to be quick for me here...\n\nOK. Ordinal sum is actually *very* simple thing: Just put one poset below another. (Defined in Enumerative Combinatorics section 3.2 paragraph 1.)",
    "created_at": "2015-12-18T15:28:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280584",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@dimpase](#comment:5):
> it's the 1st time I see "ordinal sum". So it's not going to be quick for me here...

OK. Ordinal sum is actually *very* simple thing: Just put one poset below another. (Defined in Enumerative Combinatorics section 3.2 paragraph 1.)



---

archive/issue_comments_280585.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nNathann, can you check this? This is quite similar to vertical decomposition code in lattices.\n\nI think that this could be useful in it's own, hence \"frontend\" in `posets.py`. But this is also one way to get series-parallel decomposition. (Which is one way to get faster count of linear extensions.)",
    "created_at": "2016-01-17T07:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280585",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:7" align="right">comment:7</div>

Nathann, can you check this? This is quite similar to vertical decomposition code in lattices.

I think that this could be useful in it's own, hence "frontend" in `posets.py`. But this is also one way to get series-parallel decomposition. (Which is one way to get faster count of linear extensions.)



---

archive/issue_comments_280586.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWhy do you think it should belong to the `HasseDiagram` class?",
    "created_at": "2016-01-17T08:46:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280586",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:8" align="right">comment:8</div>

Why do you think it should belong to the `HasseDiagram` class?



---

archive/issue_comments_280587.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@nathanncohen](#comment:8):\n> Why do you think it should belong to the `HasseDiagram` class?\n\nOther possibility would be `posets.py`. But then recursive `ordinal_decomposition`-`connected_components` would unnecessarily create intermediate posets instead of `HasseDiagram`s. It is slower.\n\nAnd series-parallel decomposition is nothing more than just trying \"ordinal and parallel decomposition\" until there is nothing that can be done.",
    "created_at": "2016-01-17T08:52:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280587",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@nathanncohen](#comment:8):
> Why do you think it should belong to the `HasseDiagram` class?

Other possibility would be `posets.py`. But then recursive `ordinal_decomposition`-`connected_components` would unnecessarily create intermediate posets instead of `HasseDiagram`s. It is slower.

And series-parallel decomposition is nothing more than just trying "ordinal and parallel decomposition" until there is nothing that can be done.



---

archive/issue_comments_280588.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n> Other possibility would be `posets.py`. But then recursive `ordinal_decomposition`-`connected_components` would unnecessarily create intermediate posets instead of `HasseDiagram`s. It is slower.\n\nI don't see why. Can't you access `_hasse_diagram` directly?\n\nNathann",
    "created_at": "2016-01-17T09:01:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280588",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:10" align="right">comment:10</div>

> Other possibility would be `posets.py`. But then recursive `ordinal_decomposition`-`connected_components` would unnecessarily create intermediate posets instead of `HasseDiagram`s. It is slower.

I don't see why. Can't you access `_hasse_diagram` directly?

Nathann



---

archive/issue_comments_280589.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@nathanncohen](#comment:10):\n\n> I don't see why. Can't you access `_hasse_diagram` directly?\n\nWithout copying code? Then ordinal decomposition function in `posets.py` should return `HasseDiagram`, which sounds odd.",
    "created_at": "2016-01-17T09:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280589",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@nathanncohen](#comment:10):

> I don't see why. Can't you access `_hasse_diagram` directly?

Without copying code? Then ordinal decomposition function in `posets.py` should return `HasseDiagram`, which sounds odd.



---

archive/issue_comments_280590.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n> Without copying code?\n\nI do not understand this sentence.\n\nWhat I meant is that your method could be a Poset method, which would access `self._hasse_diagram` directly.\n\n> Then ordinal decomposition function in `posets.py` should return `HasseDiagram`, which sounds odd.\n\nWhy do you insist on having it return a Hasse Diagram? If you want the decomposition feature without having to build posets, then you could have a 'as_posets=True` optional argument in the Poset method, which would either return a list of posets or return a partition of the elements.\n\nNathann",
    "created_at": "2016-01-17T09:16:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280590",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:12" align="right">comment:12</div>

> Without copying code?

I do not understand this sentence.

What I meant is that your method could be a Poset method, which would access `self._hasse_diagram` directly.

> Then ordinal decomposition function in `posets.py` should return `HasseDiagram`, which sounds odd.

Why do you insist on having it return a Hasse Diagram? If you want the decomposition feature without having to build posets, then you could have a 'as_posets=True` optional argument in the Poset method, which would either return a list of posets or return a partition of the elements.

Nathann



---

archive/issue_comments_280591.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@nathanncohen](#comment:12):\n> > Then ordinal decomposition function in `posets.py` should return `HasseDiagram`, which sounds odd.\n\n> \n> Why do you insist on having it return a Hasse Diagram? If you want the decomposition feature without having to build posets, then you could have a 'as_posets=True` optional argument in the Poset method, which would either return a list of posets or return a partition of the elements.\n\nThis is true. But then, what's wrong with having functions at `hasse_diagram.py`?\n\n(In general it makes possible to do a little optimization for advanced users. There is not always need to build poset object, if some filtering can be done in Hasse diagrams.)",
    "created_at": "2016-01-17T09:26:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280591",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@nathanncohen](#comment:12):
> > Then ordinal decomposition function in `posets.py` should return `HasseDiagram`, which sounds odd.

> 
> Why do you insist on having it return a Hasse Diagram? If you want the decomposition feature without having to build posets, then you could have a 'as_posets=True` optional argument in the Poset method, which would either return a list of posets or return a partition of the elements.

This is true. But then, what's wrong with having functions at `hasse_diagram.py`?

(In general it makes possible to do a little optimization for advanced users. There is not always need to build poset object, if some filtering can be done in Hasse diagrams.)



---

archive/issue_comments_280592.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n> This is true. But then, what's wrong with having functions at `hasse_diagram.py`?\n\nI don't believe that a designs that requires you to implement two functions every time you need one is a good thing.. Additionally, the docstring of the HasseDiagram function that currently appears in this branch starts with `Return the ordinal decomposition of the poset`. This method screams that it does not belong there.\n\n> (In general it makes possible to do a little optimization for advanced users. There is not always need to build poset object, if some filtering can be done in Hasse diagrams.)\n\nYou do not need to build posets even though you are a Poset method. Because you can access `_hasse_diagram` directly, and because there is no constraint whastoever on the type of what you should return. You can have optional arguments to return the result as whatever you want: posets, digraphs, partitions...\n\nAnd if the Poset constructor was even remotely sensible you would have no reason to *fear* the time loss in the poset constructor.\n\nNathann",
    "created_at": "2016-01-17T09:34:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280592",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:14" align="right">comment:14</div>

> This is true. But then, what's wrong with having functions at `hasse_diagram.py`?

I don't believe that a designs that requires you to implement two functions every time you need one is a good thing.. Additionally, the docstring of the HasseDiagram function that currently appears in this branch starts with `Return the ordinal decomposition of the poset`. This method screams that it does not belong there.

> (In general it makes possible to do a little optimization for advanced users. There is not always need to build poset object, if some filtering can be done in Hasse diagrams.)

You do not need to build posets even though you are a Poset method. Because you can access `_hasse_diagram` directly, and because there is no constraint whastoever on the type of what you should return. You can have optional arguments to return the result as whatever you want: posets, digraphs, partitions...

And if the Poset constructor was even remotely sensible you would have no reason to *fear* the time loss in the poset constructor.

Nathann



---

archive/issue_comments_280593.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@nathanncohen](#comment:14):\n> > This is true. But then, what's wrong with having functions at `hasse_diagram.py`?\n\n> \n> I don't believe that a designs that requires you to implement two functions every time you need one is a good thing.. Additionally, the docstring of the HasseDiagram function that currently appears in this branch starts with `Return the ordinal decomposition of the poset`. This method screams that it does not belong there.\n\nHasse diagram is a poset with some constraints... I can change that docstring.\n\nBut the question remains: What is the meaning of `hasse_diagram.py`? Whole poset class could be implemented with just a digraph as one member variable. But then I guess we would have more internal functions starting with `_`. Or more functions returning something actually only useful for internal use.\n\nAn example: check (broken!) parameter `partial` at `maximal_chains`. It is needed for `order_complex`. I think that the whole concept of \"partial maximal chain\" is odd and should be removed. It could have placed in `hasse_diagrams.py`, which is meant for internal implementation. (Btw, see #18944 - my suggestion to drop `partial`-option was rejected.)\n\nI think that I can generate something like all posets of size 7 in the same time as all Hasse diagrams of size 8. So it really loses some cpu time to make posets.",
    "created_at": "2016-01-17T10:03:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280593",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@nathanncohen](#comment:14):
> > This is true. But then, what's wrong with having functions at `hasse_diagram.py`?

> 
> I don't believe that a designs that requires you to implement two functions every time you need one is a good thing.. Additionally, the docstring of the HasseDiagram function that currently appears in this branch starts with `Return the ordinal decomposition of the poset`. This method screams that it does not belong there.

Hasse diagram is a poset with some constraints... I can change that docstring.

But the question remains: What is the meaning of `hasse_diagram.py`? Whole poset class could be implemented with just a digraph as one member variable. But then I guess we would have more internal functions starting with `_`. Or more functions returning something actually only useful for internal use.

An example: check (broken!) parameter `partial` at `maximal_chains`. It is needed for `order_complex`. I think that the whole concept of "partial maximal chain" is odd and should be removed. It could have placed in `hasse_diagrams.py`, which is meant for internal implementation. (Btw, see #18944 - my suggestion to drop `partial`-option was rejected.)

I think that I can generate something like all posets of size 7 in the same time as all Hasse diagrams of size 8. So it really loses some cpu time to make posets.



---

archive/issue_comments_280594.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n> But the question remains: What is the meaning of `hasse_diagram.py`? Whole poset class could be implemented with just a digraph as one member variable. But then I guess we would have more internal functions starting with `_`. Or more functions returning something actually only useful for internal use.\n\nWhat we have now is Poset.X *and* HassDiagram.X.\n\n> An example: check (broken!) parameter `partial` at `maximal_chains`. It is needed for `order_complex`. I think that the whole concept of \"partial maximal chain\" is odd and should be removed. It could have placed in `hasse_diagrams.py`, which is meant for internal implementation. (Btw, see #18944 - my suggestion to drop `partial`-option was rejected.)\n\nThe combinat guys have ther own view of the code. Perhaps something like \"whatever was once useful to one must be a public method\". In the case of very very specific functions, sometimes hard to document properly, I do not believe that it is a good choice.\n\n> I think that I can generate something like all posets of size 7 in the same time as all Hasse diagrams of size 8. So it really loses some cpu time to make posets.\n\nI am tired to find ways to not call the constructor because it does things you never asked it to do.\n\nNathann",
    "created_at": "2016-01-17T10:24:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280594",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:16" align="right">comment:16</div>

> But the question remains: What is the meaning of `hasse_diagram.py`? Whole poset class could be implemented with just a digraph as one member variable. But then I guess we would have more internal functions starting with `_`. Or more functions returning something actually only useful for internal use.

What we have now is Poset.X *and* HassDiagram.X.

> An example: check (broken!) parameter `partial` at `maximal_chains`. It is needed for `order_complex`. I think that the whole concept of "partial maximal chain" is odd and should be removed. It could have placed in `hasse_diagrams.py`, which is meant for internal implementation. (Btw, see #18944 - my suggestion to drop `partial`-option was rejected.)

The combinat guys have ther own view of the code. Perhaps something like "whatever was once useful to one must be a public method". In the case of very very specific functions, sometimes hard to document properly, I do not believe that it is a good choice.

> I think that I can generate something like all posets of size 7 in the same time as all Hasse diagrams of size 8. So it really loses some cpu time to make posets.

I am tired to find ways to not call the constructor because it does things you never asked it to do.

Nathann



---

archive/issue_comments_280595.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAbout the algorithm: I don't know if it makes a big difference and if could help with your applications, but there may be something to gain by checking the *degree* of the minimum elements before doing some operations on the sets of neighbors themselves. Just before \n\n```diff\n+for l in lower:\n+    if self.degree_out(l) != len(upper)\n+        break\nfor l in lower:\n    if set(self.neighbors_out(l)) != upper:\n        break\n```",
    "created_at": "2016-01-17T11:01:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280595",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:17" align="right">comment:17</div>

About the algorithm: I don't know if it makes a big difference and if could help with your applications, but there may be something to gain by checking the *degree* of the minimum elements before doing some operations on the sets of neighbors themselves. Just before 

```diff
+for l in lower:
+    if self.degree_out(l) != len(upper)
+        break
for l in lower:
    if set(self.neighbors_out(l)) != upper:
        break
```



---

archive/issue_comments_280596.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01f9e1c6bb502e6044181c856bcb8984718fd237\"><code>01f9e1c</code></a></td><td><code>An optimization.</code></td></tr></table>\n",
    "created_at": "2016-01-18T05:54:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280596",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01f9e1c6bb502e6044181c856bcb8984718fd237"><code>01f9e1c</code></a></td><td><code>An optimization.</code></td></tr></table>




---

archive/issue_comments_280597.json:
```json
{
    "body": "Changed commit from **[`4358a5a`](https://github.com/sagemath/sagetrac-mirror/commit/4358a5a4574999015ccb9088bdb842dcc738d40c)** to **[`01f9e1c`](https://github.com/sagemath/sagetrac-mirror/commit/01f9e1c6bb502e6044181c856bcb8984718fd237)**",
    "created_at": "2016-01-18T05:54:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280597",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4358a5a`](https://github.com/sagemath/sagetrac-mirror/commit/4358a5a4574999015ccb9088bdb842dcc738d40c)** to **[`01f9e1c`](https://github.com/sagemath/sagetrac-mirror/commit/01f9e1c6bb502e6044181c856bcb8984718fd237)**



---

archive/issue_comments_280598.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@nathanncohen](#comment:17):\n> - - there may be something to gain by checking the *degree* of the minimum elements before doing some operations on the sets of neighbors themselves. - -\n\nOf course. Done.",
    "created_at": "2016-01-18T06:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280598",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@nathanncohen](#comment:17):
> - - there may be something to gain by checking the *degree* of the minimum elements before doing some operations on the sets of neighbors themselves. - -

Of course. Done.



---

archive/issue_comments_280599.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nOh right, I had not noticed this 'for/else' problem. If you prefer, you can also do something like:\n\n```python\nif (all(self.degree_out(l) == len(upper) for l in lower) and\n    all(set(self.neighbors_out(l)) != upper for l in lower):\n    cut_points.append(e)\n```\n\nNathann",
    "created_at": "2016-01-18T09:56:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280599",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:20" align="right">comment:20</div>

Oh right, I had not noticed this 'for/else' problem. If you prefer, you can also do something like:

```python
if (all(self.degree_out(l) == len(upper) for l in lower) and
    all(set(self.neighbors_out(l)) != upper for l in lower):
    cut_points.append(e)
```

Nathann



---

archive/issue_comments_280600.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@nathanncohen](#comment:20):\n> Oh right, I had not noticed this 'for/else' problem. If you prefer, you can also do something like:\n> \n> ```python\n> if (all(self.degree_out(l) == len(upper) for l in lower) and\n>     all(set(self.neighbors_out(l)) != upper for l in lower):\n>     cut_points.append(e)\n> ```\n\nIs this any more clear? I think that if the code needs clarification, first step would be adding comments. But at least the basic idea is quite clearly said in docstring.\n\nIf I do\n\n```\nall(self.degree_out(l) == len(upper) for l in lower)\n```\n\nthen `len(upper)` will be called many times.",
    "created_at": "2016-01-18T10:52:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280600",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@nathanncohen](#comment:20):
> Oh right, I had not noticed this 'for/else' problem. If you prefer, you can also do something like:
> 
> ```python
> if (all(self.degree_out(l) == len(upper) for l in lower) and
>     all(set(self.neighbors_out(l)) != upper for l in lower):
>     cut_points.append(e)
> ```

Is this any more clear? I think that if the code needs clarification, first step would be adding comments. But at least the basic idea is quite clearly said in docstring.

If I do

```
all(self.degree_out(l) == len(upper) for l in lower)
```

then `len(upper)` will be called many times.



---

archive/issue_comments_280601.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n> Is this any more clear?\n\nTo me it is, but I won't be surprised if it is a matter of taste. It also avoids the 'for/else' trick that I never met anywhere except in Python.\n\n> If I do\n> \n> ```\n> all(self.degree_out(l) == len(upper) for l in lower)\n> ```\n> \n> then `len(upper)` will be called many times.\n\nI see that you cached it in your code, and there is of course nothing wrong with that.\n\nNathann",
    "created_at": "2016-01-18T13:17:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280601",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:22" align="right">comment:22</div>

> Is this any more clear?

To me it is, but I won't be surprised if it is a matter of taste. It also avoids the 'for/else' trick that I never met anywhere except in Python.

> If I do
> 
> ```
> all(self.degree_out(l) == len(upper) for l in lower)
> ```
> 
> then `len(upper)` will be called many times.

I see that you cached it in your code, and there is of course nothing wrong with that.

Nathann



---

archive/issue_comments_280602.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@nathanncohen](#comment:22):\n> > Is this any more clear?\n\n> \n> To me it is, but I won't be surprised if it is a matter of taste. It also avoids the 'for/else' trick that I never met anywhere except in Python.\n\nI can change that, if you want. But actually the code at one function level can always be optimized later. Real question is how to arrange this code. I think that it is fruitless to think about `posets.py` vs. `hasse_diagram.py` in context of one specific function. If we want to change it, then we would need to think those files (and `lattices.py`) as a whole.\n\nSo actually I want an answer to two questions: 1) Is Sage better with or without this patch? 2) Is there some trivial things that would make this patch better? Those two are my criteria for giving a positive review.\n\n`break-else` is really a python special feature. Quite nice sometimes with this kind on mathematical code.",
    "created_at": "2016-01-18T13:31:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280602",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@nathanncohen](#comment:22):
> > Is this any more clear?

> 
> To me it is, but I won't be surprised if it is a matter of taste. It also avoids the 'for/else' trick that I never met anywhere except in Python.

I can change that, if you want. But actually the code at one function level can always be optimized later. Real question is how to arrange this code. I think that it is fruitless to think about `posets.py` vs. `hasse_diagram.py` in context of one specific function. If we want to change it, then we would need to think those files (and `lattices.py`) as a whole.

So actually I want an answer to two questions: 1) Is Sage better with or without this patch? 2) Is there some trivial things that would make this patch better? Those two are my criteria for giving a positive review.

`break-else` is really a python special feature. Quite nice sometimes with this kind on mathematical code.



---

archive/issue_comments_280603.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\n> I can change that, if you want.\n\nI was just suggesting it. If you don't like it, then it's fine.\n\n> So actually I want an answer to two questions: 1) Is Sage better with or without this patch? 2) Is there some trivial things that would make this patch better? Those two are my criteria for giving a positive review.\n\nThen it is likely that you would give your patch a positive review.\n\n> `break-else` is really a python special feature. Quite nice sometimes with this kind on mathematical code.\n\nAnd it was not a problem at all with how it was used before you added the 'degree check'. Nesting two looks a bit unpleasant to me, which is why I suggested this 'all( ... )' thing but I can understand that it only matters to me.\n\nWhat you need however, is a Poset class with a less wasteful constructor. You seem to use `HasseDiagram` to this end.\n\nNathann",
    "created_at": "2016-01-18T14:07:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280603",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:24" align="right">comment:24</div>

> I can change that, if you want.

I was just suggesting it. If you don't like it, then it's fine.

> So actually I want an answer to two questions: 1) Is Sage better with or without this patch? 2) Is there some trivial things that would make this patch better? Those two are my criteria for giving a positive review.

Then it is likely that you would give your patch a positive review.

> `break-else` is really a python special feature. Quite nice sometimes with this kind on mathematical code.

And it was not a problem at all with how it was used before you added the 'degree check'. Nesting two looks a bit unpleasant to me, which is why I suggested this 'all( ... )' thing but I can understand that it only matters to me.

What you need however, is a Poset class with a less wasteful constructor. You seem to use `HasseDiagram` to this end.

Nathann



---

archive/issue_comments_280604.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nP.S.: From my point of view, there is a 'trivial' change that would make the code better, i.e. have everything inside the poset class. I consider that having it in nother class is only a workaround for the slow constructor.",
    "created_at": "2016-01-18T14:11:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280604",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:25" align="right">comment:25</div>

P.S.: From my point of view, there is a 'trivial' change that would make the code better, i.e. have everything inside the poset class. I consider that having it in nother class is only a workaround for the slow constructor.



---

archive/issue_comments_280605.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nOf course I could change that, and for the \"interface\" for this function there would be no change.\n\nBut I ask a reverse question: What should be in `hasse_diagram.py`? What is the big picture of code structure in your vision?\n\n(Dima dropped from cc.)",
    "created_at": "2016-01-18T18:05:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280605",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:26" align="right">comment:26</div>

Of course I could change that, and for the "interface" for this function there would be no change.

But I ask a reverse question: What should be in `hasse_diagram.py`? What is the big picture of code structure in your vision?

(Dima dropped from cc.)



---

archive/issue_comments_280606.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\n> But I ask a reverse question: What should be in `hasse_diagram.py`? What is the big picture of code structure in your vision?\n\nI thought about it for a moment, and I don't even think that I can give you the name of a method that would be specific to the Hasse Diagram and not to the poset. Do you have one in mind?\n\nNathann",
    "created_at": "2016-01-18T18:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280606",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:27" align="right">comment:27</div>

> But I ask a reverse question: What should be in `hasse_diagram.py`? What is the big picture of code structure in your vision?

I thought about it for a moment, and I don't even think that I can give you the name of a method that would be specific to the Hasse Diagram and not to the poset. Do you have one in mind?

Nathann



---

archive/issue_comments_280607.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@nathanncohen](#comment:27):\n> > But I ask a reverse question: What should be in `hasse_diagram.py`? What is the big picture of code structure in your vision?\n\n> \n> I thought about it for a moment, and I don't even think that I can give you the name of a method that would be specific to the Hasse Diagram and not to the poset. Do you have one in mind?\n\nThat is why this specific ticket should not be rejected for doing what other similar code already does.\n\nI think that actually almost all code could be at `hasse_diagram.py`! Hence posets and lattices would be mostly a lightweight (in a code, not in memory footprint...) wrapper handling element labels and checking input. And in longer future there could be cythonized internal implementation, something directly coded like your static sparse graphs backend has.\n\nBut I must admit that I have not been straight on this. See for example #19884.",
    "created_at": "2016-01-18T19:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280607",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@nathanncohen](#comment:27):
> > But I ask a reverse question: What should be in `hasse_diagram.py`? What is the big picture of code structure in your vision?

> 
> I thought about it for a moment, and I don't even think that I can give you the name of a method that would be specific to the Hasse Diagram and not to the poset. Do you have one in mind?

That is why this specific ticket should not be rejected for doing what other similar code already does.

I think that actually almost all code could be at `hasse_diagram.py`! Hence posets and lattices would be mostly a lightweight (in a code, not in memory footprint...) wrapper handling element labels and checking input. And in longer future there could be cythonized internal implementation, something directly coded like your static sparse graphs backend has.

But I must admit that I have not been straight on this. See for example #19884.



---

archive/issue_comments_280608.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\n> That is why this specific ticket should not be rejected for doing what other similar code already does.\n\nI only click on `positive_review` when I am personally satsfied with the code.\n\n> I think that actually almost all code could be at `hasse_diagram.py`!\n\nIf Poset inherits from HasseDiagram then that wouldn't be a problem for me. Otherwise I do not see why you would insist on having two functions every time, one of which calls the other.\n\nNathann",
    "created_at": "2016-01-18T19:36:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280608",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:29" align="right">comment:29</div>

> That is why this specific ticket should not be rejected for doing what other similar code already does.

I only click on `positive_review` when I am personally satsfied with the code.

> I think that actually almost all code could be at `hasse_diagram.py`!

If Poset inherits from HasseDiagram then that wouldn't be a problem for me. Otherwise I do not see why you would insist on having two functions every time, one of which calls the other.

Nathann



---

archive/issue_comments_280609.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nActually, could you answer this very central question: why do you believe we should implement every function twice, once in Poset and once in HasseDiagram? Is it only because of the cost of the Poset constructor?",
    "created_at": "2016-01-18T19:39:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280609",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:30" align="right">comment:30</div>

Actually, could you answer this very central question: why do you believe we should implement every function twice, once in Poset and once in HasseDiagram? Is it only because of the cost of the Poset constructor?



---

archive/issue_comments_280610.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@nathanncohen](#comment:30):\n> Actually, could you answer this very central question: why do you believe we should implement every function twice, once in Poset and once in HasseDiagram? Is it only because of the cost of the Poset constructor?\n\nNot only that. Earlier in this ticket you said\n\n>> Perhaps something like \"whatever was once useful to one must be a public method\". In the case of very very specific functions, sometimes hard to document properly, I do not believe that it is a good choice.\n\nI think that \"visible\" poset functions, i.e. those not starting with `_`, should give meaningful set of operations to do with posets. It does not always directly correspond with good structure for internal functions. So should I add a `_`-function to `posets.py` or add a strange option for `ordinal_decomposition` to be used just for series-parallel decomposition? Both options sounds strange, as the already have \"internal\" class.\n\n> I only click on `positive_review` when I am personally satsfied with the code.\n\nI know. It's hard to get a `positive_review` from you, but easy to get performance tips etc. in the process. `:=)`",
    "created_at": "2016-01-18T19:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280610",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@nathanncohen](#comment:30):
> Actually, could you answer this very central question: why do you believe we should implement every function twice, once in Poset and once in HasseDiagram? Is it only because of the cost of the Poset constructor?

Not only that. Earlier in this ticket you said

>> Perhaps something like "whatever was once useful to one must be a public method". In the case of very very specific functions, sometimes hard to document properly, I do not believe that it is a good choice.

I think that "visible" poset functions, i.e. those not starting with `_`, should give meaningful set of operations to do with posets. It does not always directly correspond with good structure for internal functions. So should I add a `_`-function to `posets.py` or add a strange option for `ordinal_decomposition` to be used just for series-parallel decomposition? Both options sounds strange, as the already have "internal" class.

> I only click on `positive_review` when I am personally satsfied with the code.

I know. It's hard to get a `positive_review` from you, but easy to get performance tips etc. in the process. `:=)`



---

archive/issue_comments_280611.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nYooooooo,\n\n> I think that \"visible\" poset functions, i.e. those not starting with `_`, should give meaningful set of operations to do with posets. It does not always directly correspond with good structure for internal functions. So should I add a `_`-function to `posets.py` or add a strange option for `ordinal_decomposition` to be used just for series-parallel decomposition? Both options sounds strange, as the already have \"internal\" class.\n\nYou seem to say that implementing this function would have you implement a helper function, which you do not think would be user-friendly enough to deserve being public. Could you tell me what this function would do? I do not see what you have in mind. Surely you are not talking of the `ordinal_sum_decomposition` itself, as you made it publicly available in this branch?\n\nNathann",
    "created_at": "2016-01-18T19:59:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280611",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:32" align="right">comment:32</div>

Yooooooo,

> I think that "visible" poset functions, i.e. those not starting with `_`, should give meaningful set of operations to do with posets. It does not always directly correspond with good structure for internal functions. So should I add a `_`-function to `posets.py` or add a strange option for `ordinal_decomposition` to be used just for series-parallel decomposition? Both options sounds strange, as the already have "internal" class.

You seem to say that implementing this function would have you implement a helper function, which you do not think would be user-friendly enough to deserve being public. Could you tell me what this function would do? I do not see what you have in mind. Surely you are not talking of the `ordinal_sum_decomposition` itself, as you made it publicly available in this branch?

Nathann



---

archive/issue_comments_280612.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@nathanncohen](#comment:32):\n \n> You seem to say that implementing this function would have you implement a helper function, which you do not think would be user-friendly enough to deserve being public. Could you tell me what this function would do? I do not see what you have in mind. Surely you are not talking of the `ordinal_sum_decomposition` itself, as you made it publicly available in this branch?\n\nIt is \"public\", but in \"private\" class. Doc for Hasse diagram says \"This should not be called directly, use Poset instead - -\". (It should say it more clearly, but that's another thing.)",
    "created_at": "2016-01-19T07:04:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280612",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@nathanncohen](#comment:32):
 
> You seem to say that implementing this function would have you implement a helper function, which you do not think would be user-friendly enough to deserve being public. Could you tell me what this function would do? I do not see what you have in mind. Surely you are not talking of the `ordinal_sum_decomposition` itself, as you made it publicly available in this branch?

It is "public", but in "private" class. Doc for Hasse diagram says "This should not be called directly, use Poset instead - -". (It should say it more clearly, but that's another thing.)



---

archive/issue_comments_280613.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\n> It is \"public\", but in \"private\" class.\n\nSorry, I was talking of `Poset.ordinal_components`.",
    "created_at": "2016-01-19T07:09:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280613",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:34" align="right">comment:34</div>

> It is "public", but in "private" class.

Sorry, I was talking of `Poset.ordinal_components`.



---

archive/issue_comments_280614.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@nathanncohen](#comment:34):\n> > It is \"public\", but in \"private\" class.\n\n> Sorry, I was talking of `Poset.ordinal_components`.\n\nYes, and it will give you subposets. Implementation is `HasseDiagram` returns just a list of numbers. And that is what I don't want to make public.",
    "created_at": "2016-01-19T07:32:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280614",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@nathanncohen](#comment:34):
> > It is "public", but in "private" class.

> Sorry, I was talking of `Poset.ordinal_components`.

Yes, and it will give you subposets. Implementation is `HasseDiagram` returns just a list of numbers. And that is what I don't want to make public.



---

archive/issue_comments_280615.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\n> Yes, and it will give you subposets. Implementation is `HasseDiagram` returns just a list of numbers. And that is what I don't want to make public.\n\nIn [comment:12] I suggested a `as_posets=True` (or any other name you might prefer) to get a different output, i.e. as a partition of vertices for instance. Wouldn't that solve your problem ?",
    "created_at": "2016-01-19T07:35:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280615",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:36" align="right">comment:36</div>

> Yes, and it will give you subposets. Implementation is `HasseDiagram` returns just a list of numbers. And that is what I don't want to make public.

In [comment:12] I suggested a `as_posets=True` (or any other name you might prefer) to get a different output, i.e. as a partition of vertices for instance. Wouldn't that solve your problem ?



---

archive/issue_comments_280616.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@nathanncohen](#comment:36):\n> > Yes, and it will give you subposets. Implementation is `HasseDiagram` returns just a list of numbers. And that is what I don't want to make public.\n\n> \n> In [comment:12] I suggested a `as_posets=True` (or any other name you might prefer) to get a different output, i.e. as a partition of vertices for instance. Wouldn't that solve your problem ?\n\nThen series-parallel decomposition would call that, and then... create a poset of them? So no luck.\n\nWith implementation at `HasseDiagram` we (read: I) can make a function to make a series-parallel decomposition that does not create `Poset`s recursively.",
    "created_at": "2016-01-19T07:48:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280616",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@nathanncohen](#comment:36):
> > Yes, and it will give you subposets. Implementation is `HasseDiagram` returns just a list of numbers. And that is what I don't want to make public.

> 
> In [comment:12] I suggested a `as_posets=True` (or any other name you might prefer) to get a different output, i.e. as a partition of vertices for instance. Wouldn't that solve your problem ?

Then series-parallel decomposition would call that, and then... create a poset of them? So no luck.

With implementation at `HasseDiagram` we (read: I) can make a function to make a series-parallel decomposition that does not create `Poset`s recursively.



---

archive/issue_comments_280617.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nExample:\n\n```\nN = Poset({0:[2,3], 1:[3]})\nP = N.ordinal_product(N)\n```\n\nHow to make a series-parallel decomposition of `P` for counting linear extension, or to check if it has one?",
    "created_at": "2016-01-19T07:51:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280617",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:38" align="right">comment:38</div>

Example:

```
N = Poset({0:[2,3], 1:[3]})
P = N.ordinal_product(N)
```

How to make a series-parallel decomposition of `P` for counting linear extension, or to check if it has one?



---

archive/issue_comments_280618.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\n> Then series-parallel decomposition would call that, and then... create a poset of them? So no luck.\n> \n> With implementation at `HasseDiagram` we (read: I) can make a function to make a series-parallel decomposition that does not create `Poset`s recursively.\n\nI do not understand a word of what you are saying. Please, I try to make each of my sentences accurate to be sure that I do not get misunderstood, and as it is I can't get a straight answer. I assure you that I spend *minutes* over each of my comments.\n\nI am trying to understand, as I asked in [comment:30], if you need HasseDiagram only because of the slow Poset constructor or if there is another reason. You told me in [comment:35] that you wanted to be able to return something which is *not* a poset, and I said in [comment:36] that you could do so with Poset only. Now the two sentences to which I am replying right now say again that what you want to avoid is the Poset constructor.\n\nCould you confirm that the cost of the Poset constructor is the only thing that bothers you, or else tell me what exactly is the problem? At the moment, I am convinced that the only reason for which you implement everything twice is because you want to avoid building posets. Tell me if I am wrong.\n\nNathann",
    "created_at": "2016-01-19T07:55:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280618",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:39" align="right">comment:39</div>

> Then series-parallel decomposition would call that, and then... create a poset of them? So no luck.
> 
> With implementation at `HasseDiagram` we (read: I) can make a function to make a series-parallel decomposition that does not create `Poset`s recursively.

I do not understand a word of what you are saying. Please, I try to make each of my sentences accurate to be sure that I do not get misunderstood, and as it is I can't get a straight answer. I assure you that I spend *minutes* over each of my comments.

I am trying to understand, as I asked in [comment:30], if you need HasseDiagram only because of the slow Poset constructor or if there is another reason. You told me in [comment:35] that you wanted to be able to return something which is *not* a poset, and I said in [comment:36] that you could do so with Poset only. Now the two sentences to which I am replying right now say again that what you want to avoid is the Poset constructor.

Could you confirm that the cost of the Poset constructor is the only thing that bothers you, or else tell me what exactly is the problem? At the moment, I am convinced that the only reason for which you implement everything twice is because you want to avoid building posets. Tell me if I am wrong.

Nathann



---

archive/issue_comments_280619.json:
```json
{
    "body": "Changed commit from **[`01f9e1c`](https://github.com/sagemath/sagetrac-mirror/commit/01f9e1c6bb502e6044181c856bcb8984718fd237)** to **[`dc6ea77`](https://github.com/sagemath/sagetrac-mirror/commit/dc6ea77deba193bdf03e55ecf66a1ea1f7d3e90c)**",
    "created_at": "2016-01-19T13:34:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280619",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`01f9e1c`](https://github.com/sagemath/sagetrac-mirror/commit/01f9e1c6bb502e6044181c856bcb8984718fd237)** to **[`dc6ea77`](https://github.com/sagemath/sagetrac-mirror/commit/dc6ea77deba193bdf03e55ecf66a1ea1f7d3e90c)**



---

archive/issue_comments_280620.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b98cbf15b2b66e328e62d384973bdb9abc33e15\"><code>6b98cbf</code></a></td><td><code>Unified to one function.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc6ea77deba193bdf03e55ecf66a1ea1f7d3e90c\"><code>dc6ea77</code></a></td><td><code>Spaces removed from end of lines.</code></td></tr></table>\n",
    "created_at": "2016-01-19T13:34:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280620",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b98cbf15b2b66e328e62d384973bdb9abc33e15"><code>6b98cbf</code></a></td><td><code>Unified to one function.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc6ea77deba193bdf03e55ecf66a1ea1f7d3e90c"><code>dc6ea77</code></a></td><td><code>Spaces removed from end of lines.</code></td></tr></table>




---

archive/issue_comments_280621.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nOK, too hard to explain. I give up. Here is a version with only one function.",
    "created_at": "2016-01-19T13:36:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280621",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:41" align="right">comment:41</div>

OK, too hard to explain. I give up. Here is a version with only one function.



---

archive/issue_comments_280622.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\n> OK, too hard to explain.\n\nThen I guess we will have the same conversation again on the next ticket?...\n\nI just went through your code and made small modifications, some to the code some to the doc. Most of the time by removing/shortening things. You are of course welcome to discuss any character of it. Also, you sometimes forget articles 'a/an': I am no expert in english but sometimes they really are necessary to the sentence.\n\nMy modifications have been pushed to public/19659.\n\nCould you point me toward a book/paper that uses this \"ordinal components\" terminology?\n\nThanks,\n\nNathann",
    "created_at": "2016-01-19T14:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280622",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:42" align="right">comment:42</div>

> OK, too hard to explain.

Then I guess we will have the same conversation again on the next ticket?...

I just went through your code and made small modifications, some to the code some to the doc. Most of the time by removing/shortening things. You are of course welcome to discuss any character of it. Also, you sometimes forget articles 'a/an': I am no expert in english but sometimes they really are necessary to the sentence.

My modifications have been pushed to public/19659.

Could you point me toward a book/paper that uses this "ordinal components" terminology?

Thanks,

Nathann



---

archive/issue_comments_280623.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\n(the branch has been rebased, and its history simplified)",
    "created_at": "2016-01-19T14:34:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280623",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:43" align="right">comment:43</div>

(the branch has been rebased, and its history simplified)



---

archive/issue_comments_280624.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@nathanncohen](#comment:42):\n\n> Could you point me toward a book/paper that uses this \"ordinal components\" terminology?\n\nAs I write in the description: I am not sure about the name.\n\n\"On the number of distributive lattices\" by Marcel Ern\u00e9, Jobst Heitzig and J\u00fcrgen Reinhold (http://www.kurims.kyoto-u.ac.jp/EMIS/journals/EJC/Volume_9/PDF/v9i1r24.pdf) uses \"vertical decomposition\". I choose the name to be parallel to `connected_components()`.",
    "created_at": "2016-01-19T15:54:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280624",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@nathanncohen](#comment:42):

> Could you point me toward a book/paper that uses this "ordinal components" terminology?

As I write in the description: I am not sure about the name.

"On the number of distributive lattices" by Marcel Erné, Jobst Heitzig and Jürgen Reinhold (http://www.kurims.kyoto-u.ac.jp/EMIS/journals/EJC/Volume_9/PDF/v9i1r24.pdf) uses "vertical decomposition". I choose the name to be parallel to `connected_components()`.



---

archive/issue_comments_280625.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\n> As I write in the description: I am not sure about the name.\n\nOkay okay. I don't trust myself when it comes to Posets, so let's ask.\n\nFr\u00e9d\u00e9ric? Jori implemented here a function that decomposes a poset P into components P1,...,P_k such that P is the ordinal sum of the Pi. We are not sure which name should be picked for it, and right now the branch uses the name `ordinal_components`. What do you think of it? Should it be changed to something different, or is it what people would expect? If you are not sure and know somebody who would, could you add him in Cc?\n\nThanks,\n\nNathann",
    "created_at": "2016-01-19T16:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280625",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:45" align="right">comment:45</div>

> As I write in the description: I am not sure about the name.

Okay okay. I don't trust myself when it comes to Posets, so let's ask.

Frédéric? Jori implemented here a function that decomposes a poset P into components P1,...,P_k such that P is the ordinal sum of the Pi. We are not sure which name should be picked for it, and right now the branch uses the name `ordinal_components`. What do you think of it? Should it be changed to something different, or is it what people would expect? If you are not sure and know somebody who would, could you add him in Cc?

Thanks,

Nathann



---

archive/issue_comments_280626.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nI would suggest 'is_ordinal_sum', with boolean output, with a certificate option to see\na decomposition.\n\nAnother possibility would be 'ordinal_sum_decomposition'.\n\n'ordinal_components' is ambiguous because there exists also 'ordinal product' (not yet in sage maybe), besides ordinal sum.\n\nEDIT: maybe 'ordinal_summands' would be ok",
    "created_at": "2016-01-19T17:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280626",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:46" align="right">comment:46</div>

I would suggest 'is_ordinal_sum', with boolean output, with a certificate option to see
a decomposition.

Another possibility would be 'ordinal_sum_decomposition'.

'ordinal_components' is ambiguous because there exists also 'ordinal product' (not yet in sage maybe), besides ordinal sum.

EDIT: maybe 'ordinal_summands' would be ok



---

archive/issue_comments_280627.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nSome thoughts, not a clear opinion yet:\n\nWe do have `ordinal_product` already. An \"inverse function\" of if would be `ordinal_factors`, I think. Compare to \"factoring (undirected) graphs\" (done be Nathann IIRC).\n\n`certificate=True` sounds natural to for example `dimension`: there is not **the** set of realizers, just bunch of minimal sets and one of them is returned. For this function we do have exact \"components\", \"parts\" or something like that.\n\nThere is now `is_connected` and `conneced_components`. It would be orthogonal design to have two functions for this one also.",
    "created_at": "2016-01-19T18:10:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280627",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:47" align="right">comment:47</div>

Some thoughts, not a clear opinion yet:

We do have `ordinal_product` already. An "inverse function" of if would be `ordinal_factors`, I think. Compare to "factoring (undirected) graphs" (done be Nathann IIRC).

`certificate=True` sounds natural to for example `dimension`: there is not **the** set of realizers, just bunch of minimal sets and one of them is returned. For this function we do have exact "components", "parts" or something like that.

There is now `is_connected` and `conneced_components`. It would be orthogonal design to have two functions for this one also.



---

archive/issue_comments_280628.json:
```json
{
    "body": "Changed commit from **[`dc6ea77`](https://github.com/sagemath/sagetrac-mirror/commit/dc6ea77deba193bdf03e55ecf66a1ea1f7d3e90c)** to **[`548b4eb`](https://github.com/sagemath/sagetrac-mirror/commit/548b4eb8dcad4513c7f71b04c97a30b60035966c)**",
    "created_at": "2016-01-20T06:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280628",
    "user": "https://github.com/jm58660"
}
```

Changed commit from **[`dc6ea77`](https://github.com/sagemath/sagetrac-mirror/commit/dc6ea77deba193bdf03e55ecf66a1ea1f7d3e90c)** to **[`548b4eb`](https://github.com/sagemath/sagetrac-mirror/commit/548b4eb8dcad4513c7f71b04c97a30b60035966c)**



---

archive/issue_comments_280629.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/543c4a146d822cc43985b2b473b4ecb25084ea88\"><code>543c4a1</code></a></td><td><code>Added ordinal_sum_decomposition().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/548b4eb8dcad4513c7f71b04c97a30b60035966c\"><code>548b4eb</code></a></td><td><code>trac #19659: Review</code></td></tr></table>\n",
    "created_at": "2016-01-20T06:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280629",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:48"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/543c4a146d822cc43985b2b473b4ecb25084ea88"><code>543c4a1</code></a></td><td><code>Added ordinal_sum_decomposition().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/548b4eb8dcad4513c7f71b04c97a30b60035966c"><code>548b4eb</code></a></td><td><code>trac #19659: Review</code></td></tr></table>




---

archive/issue_comments_280630.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/develop](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/develop)** to **[public/19659](https://github.com/sagemath/sagetrac-mirror/tree/public/19659)**",
    "created_at": "2016-01-20T06:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280630",
    "user": "https://github.com/jm58660"
}
```

Changed branch from **[u/jmantysalo/develop](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/develop)** to **[public/19659](https://github.com/sagemath/sagetrac-mirror/tree/public/19659)**



---

archive/issue_comments_280631.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1385d69b99c5060821463ef513b0478a062db942\"><code>1385d69</code></a></td><td><code>Added commas.</code></td></tr></table>\n",
    "created_at": "2016-01-20T08:31:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280631",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1385d69b99c5060821463ef513b0478a062db942"><code>1385d69</code></a></td><td><code>Added commas.</code></td></tr></table>




---

archive/issue_comments_280632.json:
```json
{
    "body": "Changed commit from **[`548b4eb`](https://github.com/sagemath/sagetrac-mirror/commit/548b4eb8dcad4513c7f71b04c97a30b60035966c)** to **[`1385d69`](https://github.com/sagemath/sagetrac-mirror/commit/1385d69b99c5060821463ef513b0478a062db942)**",
    "created_at": "2016-01-20T08:31:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280632",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`548b4eb`](https://github.com/sagemath/sagetrac-mirror/commit/548b4eb8dcad4513c7f71b04c97a30b60035966c)** to **[`1385d69`](https://github.com/sagemath/sagetrac-mirror/commit/1385d69b99c5060821463ef513b0478a062db942)**



---

archive/issue_comments_280633.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@nathanncohen](#comment:42):\n\n> Then I guess we will have the same conversation again on the next ticket?...\n\nThis should really be discussed on sage-devel. Someone has originally implemented this, and I guess he/she have had a reason for this.\n\n> I just went through your code and made small modifications, some to the code some to the doc. Most of the time by removing/shortening things. You are of course welcome to discuss any character of it. Also, you sometimes forget articles 'a/an': I am no expert in english but sometimes they really are necessary to the sentence.\n\nI am sure that you know \"a\"/\"an\"/\"the\" better than I do; my native language belongs to Uralic languages family. I just added commas to math blocks so that they are uniform.\n\nYour code is, as usual, better than mine.\n\nIf I am right, now we just needs to decide the name.",
    "created_at": "2016-01-20T08:47:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280633",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@nathanncohen](#comment:42):

> Then I guess we will have the same conversation again on the next ticket?...

This should really be discussed on sage-devel. Someone has originally implemented this, and I guess he/she have had a reason for this.

> I just went through your code and made small modifications, some to the code some to the doc. Most of the time by removing/shortening things. You are of course welcome to discuss any character of it. Also, you sometimes forget articles 'a/an': I am no expert in english but sometimes they really are necessary to the sentence.

I am sure that you know "a"/"an"/"the" better than I do; my native language belongs to Uralic languages family. I just added commas to math blocks so that they are uniform.

Your code is, as usual, better than mine.

If I am right, now we just needs to decide the name.



---

archive/issue_comments_280634.json:
```json
{
    "body": "Reviewer: **Nathann Cohen, Jori M\u00e4ntysalo**",
    "created_at": "2016-01-20T08:47:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280634",
    "user": "https://github.com/jm58660"
}
```

Reviewer: **Nathann Cohen, Jori Mäntysalo**



---

archive/issue_comments_280635.json:
```json
{
    "body": "Changed author from **Jori M\u00e4ntysalo** to **Jori M\u00e4ntysalo, Nathann Cohen**",
    "created_at": "2016-01-20T08:47:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280635",
    "user": "https://github.com/jm58660"
}
```

Changed author from **Jori Mäntysalo** to **Jori Mäntysalo, Nathann Cohen**



---

archive/issue_comments_280636.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nHello,\n\n> This should really be discussed on sage-devel. Someone has originally implemented this, and I guess he/she have had a reason for this.\n\nTrue, but it would be a mistake to value a reason that we do not know more than those we figured out ourselves. Maybe something smart may come from sage-devel indeed, though. I hope that we will hear something different from the frequent refusal to change things 'on principle'.\n\n> If I am right, now we just needs to decide the name.\n\nYep. I concur with Fr\u00e9d\u00e9ric's proposal of a `is_ordinal_sum` with an optional certificate. The same is done differently for `is_connected/connected_components`, but there at least there is no doubt on which terminology should be used. Perhaps it's worth asking on sage-devel too if you prefer.\n\nNathann",
    "created_at": "2016-01-20T16:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280636",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:51" align="right">comment:51</div>

Hello,

> This should really be discussed on sage-devel. Someone has originally implemented this, and I guess he/she have had a reason for this.

True, but it would be a mistake to value a reason that we do not know more than those we figured out ourselves. Maybe something smart may come from sage-devel indeed, though. I hope that we will hear something different from the frequent refusal to change things 'on principle'.

> If I am right, now we just needs to decide the name.

Yep. I concur with Frédéric's proposal of a `is_ordinal_sum` with an optional certificate. The same is done differently for `is_connected/connected_components`, but there at least there is no doubt on which terminology should be used. Perhaps it's worth asking on sage-devel too if you prefer.

Nathann



---

archive/issue_comments_280637.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nReplying to [@nathanncohen](#comment:51):\n\n> > If I am right, now we just needs to decide the name.\n\n> \n> Yep. I concur with Fr\u00e9d\u00e9ric's proposal of a `is_ordinal_sum` with an optional certificate.\n\nOK. Then, what should be the name of parameter (somehow `certificate` sounds odd to me)? And should it return the decomposition as a list of elements or as a list of subposets?",
    "created_at": "2016-01-20T21:02:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280637",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:52" align="right">comment:52</div>

Replying to [@nathanncohen](#comment:51):

> > If I am right, now we just needs to decide the name.

> 
> Yep. I concur with Frédéric's proposal of a `is_ordinal_sum` with an optional certificate.

OK. Then, what should be the name of parameter (somehow `certificate` sounds odd to me)? And should it return the decomposition as a list of elements or as a list of subposets?



---

archive/issue_comments_280638.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\n> OK. Then, what should be the name of parameter (somehow `certificate` sounds odd to me)? \n\n'certificate' is a generic term that is used in some places already (mostly because of me I expect), but it is not a 'standard' at all. Is there another term you would prefer?\n\n> And should it return the decomposition as a list of elements or as a list of subposets?\n\nDepends on what *you* plan to use it for. `.is_ordinal_sum(as_posets=True)` or `.is_ordinal_sum(as_partition=True)` would work for me, and either return an empty list (when it is not) or return a list of whatever is requested.\n\nIf you have a better idea, of course, just name it.\n\nNathann",
    "created_at": "2016-01-20T21:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280638",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:53" align="right">comment:53</div>

> OK. Then, what should be the name of parameter (somehow `certificate` sounds odd to me)? 

'certificate' is a generic term that is used in some places already (mostly because of me I expect), but it is not a 'standard' at all. Is there another term you would prefer?

> And should it return the decomposition as a list of elements or as a list of subposets?

Depends on what *you* plan to use it for. `.is_ordinal_sum(as_posets=True)` or `.is_ordinal_sum(as_partition=True)` would work for me, and either return an empty list (when it is not) or return a list of whatever is requested.

If you have a better idea, of course, just name it.

Nathann



---

archive/issue_comments_280639.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nAs I am not sure about this, I think that no Boolean-valued option is good. So it should be `return_value='boolean'` with options `'poset'` and `'elements'` or `'lists'`. But is there something similar in other parts of Sage? I would like to re-use existing parameter name if possible.",
    "created_at": "2016-01-21T05:54:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280639",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:54" align="right">comment:54</div>

As I am not sure about this, I think that no Boolean-valued option is good. So it should be `return_value='boolean'` with options `'poset'` and `'elements'` or `'lists'`. But is there something similar in other parts of Sage? I would like to re-use existing parameter name if possible.



---

archive/issue_comments_280640.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nHello,\n\nI slowly used more and more booleans for these things as it reduces the risk of typoes. Any typo in the argument's name raises an automatic exception (that's Python), and the same goes for !True/False (if you make a typo, that's an undefined variable). The code is also simpler as you don't have to do `if x==A/elif x==B/else ValueError`.\n\nYou will find many boolean functions with such a boolean argument: IncidenceStructure.is_t_design, Graph.is_strongly_regular, Graph.automorphism_group, Graph.is_isomorphic.\n\nThe use of a string argument is, in the graph library at least, more often used to select an algorithm/method to perform the requested computation (e.g. Graph.maximum_clique).\n\nNathann",
    "created_at": "2016-01-21T06:46:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280640",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:55" align="right">comment:55</div>

Hello,

I slowly used more and more booleans for these things as it reduces the risk of typoes. Any typo in the argument's name raises an automatic exception (that's Python), and the same goes for !True/False (if you make a typo, that's an undefined variable). The code is also simpler as you don't have to do `if x==A/elif x==B/else ValueError`.

You will find many boolean functions with such a boolean argument: IncidenceStructure.is_t_design, Graph.is_strongly_regular, Graph.automorphism_group, Graph.is_isomorphic.

The use of a string argument is, in the graph library at least, more often used to select an algorithm/method to perform the requested computation (e.g. Graph.maximum_clique).

Nathann



---

archive/issue_comments_280641.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nStill about the naming... Compare to #19123. These are kind of same thing, but for lattices it is more natural to think about making the top element of lattice 1 and the bottom element of lattice 2 to one common element.\n\nA suggestion: What if I only make a function whose name starts with `_`? Then we could use the code to build more functions, and think later about the name.",
    "created_at": "2016-01-27T07:26:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280641",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:56" align="right">comment:56</div>

Still about the naming... Compare to #19123. These are kind of same thing, but for lattices it is more natural to think about making the top element of lattice 1 and the bottom element of lattice 2 to one common element.

A suggestion: What if I only make a function whose name starts with `_`? Then we could use the code to build more functions, and think later about the name.



---

archive/issue_comments_280642.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\n> Still about the naming... Compare to #19123. These are kind of same thing, but for lattices it is more natural to think about making the top element of lattice 1 and the bottom element of lattice 2 to one common element.\n\nWhat do you want us to compare in the naming of this function and the content of #19123?\n\n> A suggestion: What if I only make a function whose name starts with `_`? Then we could use the code to build more functions, and think later about the name.\n\nThen that means that the function will not appear to the users, and that we will not even use it ourselves at the moment. I don't see the point.\n\nNathann",
    "created_at": "2016-01-27T18:15:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280642",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:57" align="right">comment:57</div>

> Still about the naming... Compare to #19123. These are kind of same thing, but for lattices it is more natural to think about making the top element of lattice 1 and the bottom element of lattice 2 to one common element.

What do you want us to compare in the naming of this function and the content of #19123?

> A suggestion: What if I only make a function whose name starts with `_`? Then we could use the code to build more functions, and think later about the name.

Then that means that the function will not appear to the users, and that we will not even use it ourselves at the moment. I don't see the point.

Nathann



---

archive/issue_comments_280643.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@nathanncohen](#comment:57):\n\n> What do you want us to compare in the naming of this function and the content of #19123?\n\nThese two functions do exactly same thing when they return a Boolean value. So should they have same name? OTOH when returning non-boolean values it is somewhat strange to return posets that are actually semilattices from decomposition of lattice.\n\n> > A suggestion: What if I only make a function whose name starts with `_`? Then we could use the code to build more functions, and think later about the name.\n\n> \n> Then that means that the function will not appear to the users, and that we will not even use it ourselves at the moment. I don't see the point.\n\nIt could be a building block for series-parallel decomposition.",
    "created_at": "2016-02-03T06:11:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280643",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@nathanncohen](#comment:57):

> What do you want us to compare in the naming of this function and the content of #19123?

These two functions do exactly same thing when they return a Boolean value. So should they have same name? OTOH when returning non-boolean values it is somewhat strange to return posets that are actually semilattices from decomposition of lattice.

> > A suggestion: What if I only make a function whose name starts with `_`? Then we could use the code to build more functions, and think later about the name.

> 
> Then that means that the function will not appear to the users, and that we will not even use it ourselves at the moment. I don't see the point.

It could be a building block for series-parallel decomposition.



---

archive/issue_comments_280644.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\n> > Then that means that the function will not appear to the users, and that we will not even use it ourselves at the moment. I don't see the point.\n\n> \n> It could be a building block for series-parallel decomposition.\n\nIf you need a function to do that, keep it on your own computer. Patching Sage makes sense to *share* functions with others: if you want to have them hidden from the users and if Sage does not need them in any way, it can easily wait till you find a use for it.\n\nNathann",
    "created_at": "2016-02-03T09:56:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280644",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:59" align="right">comment:59</div>

> > Then that means that the function will not appear to the users, and that we will not even use it ourselves at the moment. I don't see the point.

> 
> It could be a building block for series-parallel decomposition.

If you need a function to do that, keep it on your own computer. Patching Sage makes sense to *share* functions with others: if you want to have them hidden from the users and if Sage does not need them in any way, it can easily wait till you find a use for it.

Nathann



---

archive/issue_comments_280645.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nI would be happy if you just change the name to `ordinal_summands`.",
    "created_at": "2016-02-03T20:39:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280645",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:60" align="right">comment:60</div>

I would be happy if you just change the name to `ordinal_summands`.



---

archive/issue_comments_280646.json:
```json
{
    "body": "Changed commit from **[`1385d69`](https://github.com/sagemath/sagetrac-mirror/commit/1385d69b99c5060821463ef513b0478a062db942)** to **[`7f6e6b2`](https://github.com/sagemath/sagetrac-mirror/commit/7f6e6b29649381942485fbfd5ac28bc0f4b4762f)**",
    "created_at": "2016-02-09T09:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280646",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1385d69`](https://github.com/sagemath/sagetrac-mirror/commit/1385d69b99c5060821463ef513b0478a062db942)** to **[`7f6e6b2`](https://github.com/sagemath/sagetrac-mirror/commit/7f6e6b29649381942485fbfd5ac28bc0f4b4762f)**



---

archive/issue_comments_280647.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f6e6b29649381942485fbfd5ac28bc0f4b4762f\"><code>7f6e6b2</code></a></td><td><code>Change function name.</code></td></tr></table>\n",
    "created_at": "2016-02-09T09:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280647",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f6e6b29649381942485fbfd5ac28bc0f4b4762f"><code>7f6e6b2</code></a></td><td><code>Change function name.</code></td></tr></table>




---

archive/issue_comments_280648.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReplying to [@nathanncohen](#comment:59):\n\n> > It could be a building block for series-parallel decomposition.\n\n> \n> If you need a function to do that, keep it on your own computer.\n\nI mean that I want to make `series_parallel_decomposition` to be a part of Sage.",
    "created_at": "2016-02-09T09:23:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280648",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:62" align="right">comment:62</div>

Replying to [@nathanncohen](#comment:59):

> > It could be a building block for series-parallel decomposition.

> 
> If you need a function to do that, keep it on your own computer.

I mean that I want to make `series_parallel_decomposition` to be a part of Sage.



---

archive/issue_comments_280649.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nReplying to [@fchapoton](#comment:60):\n> I would be happy if you just change the name to `ordinal_summands`.\n\nDone this.",
    "created_at": "2016-02-09T09:23:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280649",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:63" align="right">comment:63</div>

Replying to [@fchapoton](#comment:60):
> I would be happy if you just change the name to `ordinal_summands`.

Done this.



---

archive/issue_comments_280650.json:
```json
{
    "body": "<div id=\"comment:64\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be8c48e0bc992b99a7a9e94777689857a7570b40\"><code>be8c48e</code></a></td><td><code>Broken seealso-link.</code></td></tr></table>\n",
    "created_at": "2016-02-09T09:25:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280650",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:64"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be8c48e0bc992b99a7a9e94777689857a7570b40"><code>be8c48e</code></a></td><td><code>Broken seealso-link.</code></td></tr></table>




---

archive/issue_comments_280651.json:
```json
{
    "body": "Changed commit from **[`7f6e6b2`](https://github.com/sagemath/sagetrac-mirror/commit/7f6e6b29649381942485fbfd5ac28bc0f4b4762f)** to **[`be8c48e`](https://github.com/sagemath/sagetrac-mirror/commit/be8c48e0bc992b99a7a9e94777689857a7570b40)**",
    "created_at": "2016-02-09T09:25:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280651",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7f6e6b2`](https://github.com/sagemath/sagetrac-mirror/commit/7f6e6b29649381942485fbfd5ac28bc0f4b4762f)** to **[`be8c48e`](https://github.com/sagemath/sagetrac-mirror/commit/be8c48e0bc992b99a7a9e94777689857a7570b40)**



---

archive/issue_events_275872.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-02-09T14:57:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19659#event-275872"
}
```



---

archive/issue_events_275873.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-02-09T14:57:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19659#event-275873"
}
```



---

archive/issue_comments_280652.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nok, looks good. Patchbot failures seems not related.",
    "created_at": "2016-02-09T14:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280652",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:65" align="right">comment:65</div>

ok, looks good. Patchbot failures seems not related.



---

archive/issue_events_275874.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-02-09T14:57:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "milestone_number": null,
    "milestone_title": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19659#event-275874"
}
```



---

archive/issue_events_275875.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-02-09T14:57:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19659#event-275875"
}
```



---

archive/issue_comments_280653.json:
```json
{
    "body": "Changed reviewer from **Nathann Cohen, Jori M\u00e4ntysalo** to **Nathann Cohen, Jori M\u00e4ntysalo, Fr\u00e9d\u00e9ric ChapotonF**",
    "created_at": "2016-02-09T14:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280653",
    "user": "https://github.com/fchapoton"
}
```

Changed reviewer from **Nathann Cohen, Jori Mäntysalo** to **Nathann Cohen, Jori Mäntysalo, Frédéric ChapotonF**



---

archive/issue_comments_280654.json:
```json
{
    "body": "Changed reviewer from **Nathann Cohen, Jori M\u00e4ntysalo, Fr\u00e9d\u00e9ric ChapotonF** to **Nathann Cohen, Jori M\u00e4ntysalo, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2016-02-09T14:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280654",
    "user": "https://github.com/jm58660"
}
```

Changed reviewer from **Nathann Cohen, Jori Mäntysalo, Frédéric ChapotonF** to **Nathann Cohen, Jori Mäntysalo, Frédéric Chapoton**



---

archive/issue_events_275876.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-10T08:20:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19659#event-275876"
}
```



---

archive/issue_events_275877.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b4fc8d20f9f56cdfab5d44da83c2a5c810b2a9ce",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-02-10T08:20:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19659#event-275877"
}
```



---

archive/issue_comments_280655.json:
```json
{
    "body": "Changed branch from **[public/19659](https://github.com/sagemath/sagetrac-mirror/tree/public/19659)** to **[`be8c48e`](https://github.com/sagemath/sagetrac-mirror/commit/be8c48e0bc992b99a7a9e94777689857a7570b40)**",
    "created_at": "2016-02-10T08:20:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19659",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19659#issuecomment-280655",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/19659](https://github.com/sagemath/sagetrac-mirror/tree/public/19659)** to **[`be8c48e`](https://github.com/sagemath/sagetrac-mirror/commit/be8c48e0bc992b99a7a9e94777689857a7570b40)**
