# Issue 19439: Corrections to infinities returned by mpmath

archive/issues_019202.json:
```json
{
    "body": "CC:  @paulmasson\n\nIt seems in some cases the infinities returned from mpmath need to be changed by the function's `evalf()` in order to be correct:\nBefore:\n\n```\nsage: zeta(SR(1))\nInfinity\nsage: zeta(SR(1.))   <---------\n+infinity\nsage: type(zeta(SR(1)))\n<type 'sage.symbolic.expression.Expression'>\nsage: type(zeta(SR(1)).pyobject())\n<class 'sage.rings.infinity.UnsignedInfinity'>\nsage: type(zeta(SR(1.)))\n<type 'sage.symbolic.expression.Expression'>\nsage: type(zeta(SR(1.)).pyobject())\n<type 'sage.rings.real_mpfr.RealNumber'>\n```\n\nThe ticket should result in:\n\n```\nsage: zeta(SR(1))\nInfinity\nsage: zeta(SR(1.))\nInfinity\nsage: type(zeta(SR(1)))\n<type 'sage.symbolic.expression.Expression'>\nsage: type(zeta(SR(1)).pyobject())\n<class 'sage.rings.infinity.UnsignedInfinity'>\nsage: type(zeta(SR(1.)))\n<type 'sage.symbolic.expression.Expression'>\nsage: type(zeta(SR(1.)).pyobject())\n<class 'sage.rings.infinity.UnsignedInfinity'>\n```\n\nIdeally, fix other such cases too in this ticket.\n\nIssue created by migration from https://trac.sagemath.org/ticket/19439\n\n",
    "closed_at": "2017-04-28T23:54:57Z",
    "created_at": "2015-10-20T12:41:08Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Corrections to infinities returned by mpmath",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19439",
    "user": "https://github.com/rwst"
}
```
CC:  @paulmasson

It seems in some cases the infinities returned from mpmath need to be changed by the function's `evalf()` in order to be correct:
Before:

```
sage: zeta(SR(1))
Infinity
sage: zeta(SR(1.))   <---------
+infinity
sage: type(zeta(SR(1)))
<type 'sage.symbolic.expression.Expression'>
sage: type(zeta(SR(1)).pyobject())
<class 'sage.rings.infinity.UnsignedInfinity'>
sage: type(zeta(SR(1.)))
<type 'sage.symbolic.expression.Expression'>
sage: type(zeta(SR(1.)).pyobject())
<type 'sage.rings.real_mpfr.RealNumber'>
```

The ticket should result in:

```
sage: zeta(SR(1))
Infinity
sage: zeta(SR(1.))
Infinity
sage: type(zeta(SR(1)))
<type 'sage.symbolic.expression.Expression'>
sage: type(zeta(SR(1)).pyobject())
<class 'sage.rings.infinity.UnsignedInfinity'>
sage: type(zeta(SR(1.)))
<type 'sage.symbolic.expression.Expression'>
sage: type(zeta(SR(1.)).pyobject())
<class 'sage.rings.infinity.UnsignedInfinity'>
```

Ideally, fix other such cases too in this ticket.

Issue created by migration from https://trac.sagemath.org/ticket/19439





---

archive/issue_comments_263131.json:
```json
{
    "body": "Polylog uses zeta here, so it's mainly because of `RR(1).zeta()` not being converted in `symbolic/function.pyx` or the `RR` functions not using the `InfinityRing` elements.",
    "created_at": "2016-06-11T13:11:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19439#issuecomment-263131",
    "user": "https://github.com/rwst"
}
```

Polylog uses zeta here, so it's mainly because of `RR(1).zeta()` not being converted in `symbolic/function.pyx` or the `RR` functions not using the `InfinityRing` elements.



---

archive/issue_events_053673.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-07-19T06:58:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19439",
    "milestone": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19439#event-53673"
}
```



---

archive/issue_comments_263132.json:
```json
{
    "body": "The problematic output is rather for the last lines, ie symbolic input, which should produce symbolic output. It does, by wrapping FP infinity into SR. It would be better if that would rather produce the infinity from the ring.",
    "created_at": "2016-07-19T06:58:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19439#issuecomment-263132",
    "user": "https://github.com/rwst"
}
```

The problematic output is rather for the last lines, ie symbolic input, which should produce symbolic output. It does, by wrapping FP infinity into SR. It would be better if that would rather produce the infinity from the ring.



---

archive/issue_events_053674.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-17T07:45:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19439",
    "milestone": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19439#event-53674"
}
```



---

archive/issue_events_053675.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-17T07:45:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19439",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19439#event-53675"
}
```



---

archive/issue_events_053676.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-04-18T08:10:05Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19439",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19439#event-53676"
}
```



---

archive/issue_events_053677.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-04-18T08:10:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19439",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19439#event-53677"
}
```



---

archive/issue_comments_263133.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-04-19T06:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19439#issuecomment-263133",
    "user": "https://github.com/rwst"
}
```

New commits:



---

archive/issue_comments_263134.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-04-20T08:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19439#issuecomment-263134",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_263135.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-04-20T13:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19439#issuecomment-263135",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_263136.json:
```json
{
    "body": "LGTM.",
    "created_at": "2017-04-20T13:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19439#issuecomment-263136",
    "user": "https://github.com/tscrim"
}
```

LGTM.



---

archive/issue_events_053678.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-28T23:54:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19439",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19439#event-53678"
}
```



---

archive/issue_comments_263137.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-28T23:54:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19439",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19439#issuecomment-263137",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
