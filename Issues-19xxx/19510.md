# Issue 19510: asymptotic expansion generator for binomial(kn, n)

archive/issues_019273.json:
```json
{
    "body": "Implement a generator for `binomial(k*n, n)`.\n\nCC:  @behackl @cheuberg\n\nBranch/Commit: c9989221b159e595cfc2ae08077cc3b6757f477a\n\nReviewer: Clemens Heuberger\n\nAuthor: Daniel Krenn\n\nDependencies: #19306, #19521, #19528, #19957\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19510\n\n",
    "closed_at": "2016-01-31T13:31:35Z",
    "created_at": "2015-11-01T18:10:01Z",
    "labels": [
        "component: asymptotic expansions"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "asymptotic expansion generator for binomial(kn, n)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19510",
    "user": "https://github.com/dkrenn"
}
```
Implement a generator for `binomial(k*n, n)`.

CC:  @behackl @cheuberg

Branch/Commit: c9989221b159e595cfc2ae08077cc3b6757f477a

Reviewer: Clemens Heuberger

Author: Daniel Krenn

Dependencies: #19306, #19521, #19528, #19957

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19510





---

archive/issue_comments_281373.json:
```json
{
    "body": "<a id='comment:2'></a>Last 10 new commits:",
    "created_at": "2015-11-04T16:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281373",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:2'></a>Last 10 new commits:



---

archive/issue_comments_281374.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-11-05T02:37:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281374",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_281375.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-05T02:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281375",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_281376.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-05T02:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281376",
    "user": "https://github.com/dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_281377.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-07T00:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281377",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_281378.json:
```json
{
    "body": "<a id='comment:9'></a>Merged latest version of #19306 to avoid doctest failure.\n\n---\nNew commits:",
    "created_at": "2016-01-22T05:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281378",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:9'></a>Merged latest version of #19306 to avoid doctest failure.

---
New commits:



---

archive/issue_events_053780.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2016-01-22T05:13:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "milestone": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19510#event-53780"
}
```



---

archive/issue_comments_281379.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-23T18:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281379",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_281380.json:
```json
{
    "body": "<a id='comment:11'></a>Reviewed the code (without its dependency #19521) and the documentation, but did not yet verify the final output of the doctests. I had to modify the \"constant factor\" in order to get rational coefficients when `k-1` is not a square.\n\nI am not happy with the growth group of the output:\n- `(e<sup>(n*log(n)))</sup>(Symbolic Constants Subring)` will never occur.\n- `log(n)^(Symbolic Constants Subring)` will never occur.\n- `(e<sup>n)</sup>(Symbolic Constants Subring)` is hard to read; actually, the only exponential factor that will ever occur is `(k<sup>k/(k-1)</sup>(k-1))^n`, so `FractionField(k.parent())^n` would be enough (so `QQ^n` in all examples). However, it is not clear to me how to implement this without pain.",
    "created_at": "2016-01-23T19:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281380",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:11'></a>Reviewed the code (without its dependency #19521) and the documentation, but did not yet verify the final output of the doctests. I had to modify the "constant factor" in order to get rational coefficients when `k-1` is not a square.

I am not happy with the growth group of the output:
- `(e<sup>(n*log(n)))</sup>(Symbolic Constants Subring)` will never occur.
- `log(n)^(Symbolic Constants Subring)` will never occur.
- `(e<sup>n)</sup>(Symbolic Constants Subring)` is hard to read; actually, the only exponential factor that will ever occur is `(k<sup>k/(k-1)</sup>(k-1))^n`, so `FractionField(k.parent())^n` would be enough (so `QQ^n` in all examples). However, it is not clear to me how to implement this without pain.



---

archive/issue_comments_281381.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-01-23T19:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281381",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_281382.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-01-26T19:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281382",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_281383.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:11 cheuberg]:\n> Reviewed the code (without its dependency #19521) and the documentation, but did not yet verify the final output of the doctests. I had to modify the \"constant factor\" in order to get rational coefficients when `k-1` is not a square.\n> \n> I am not happy with the growth group of the output:\n> - `(e<sup>(n*log(n)))</sup>(Symbolic Constants Subring)` will never occur.\n> - `log(n)^(Symbolic Constants Subring)` will never occur.\n> - `(e<sup>n)</sup>(Symbolic Constants Subring)` is hard to read; actually, the only exponential factor that will ever occur is `(k<sup>k/(k-1)</sup>(k-1))^n`, so `FractionField(k.parent())^n` would be enough (so `QQ^n` in all examples). However, it is not clear to me how to implement this without pain. \n\n\nMore or less complete rewrite of function.\n\n---\nLast 10 new commits:",
    "created_at": "2016-01-26T19:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281383",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:13'></a>Replying to [comment:11 cheuberg]:
> Reviewed the code (without its dependency #19521) and the documentation, but did not yet verify the final output of the doctests. I had to modify the "constant factor" in order to get rational coefficients when `k-1` is not a square.
> 
> I am not happy with the growth group of the output:
> - `(e<sup>(n*log(n)))</sup>(Symbolic Constants Subring)` will never occur.
> - `log(n)^(Symbolic Constants Subring)` will never occur.
> - `(e<sup>n)</sup>(Symbolic Constants Subring)` is hard to read; actually, the only exponential factor that will ever occur is `(k<sup>k/(k-1)</sup>(k-1))^n`, so `FractionField(k.parent())^n` would be enough (so `QQ^n` in all examples). However, it is not clear to me how to implement this without pain. 


More or less complete rewrite of function.

---
Last 10 new commits:



---

archive/issue_comments_281384.json:
```json
{
    "body": "<a id='comment:15'></a>I reviewed this version. \n\nI merged #19957 and added doctests using `compare_with_values`. Please cross-review and set to positive if you are satisfied.\n\n---\nLast 10 new commits:",
    "created_at": "2016-01-27T11:46:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281384",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:15'></a>I reviewed this version. 

I merged #19957 and added doctests using `compare_with_values`. Please cross-review and set to positive if you are satisfied.

---
Last 10 new commits:



---

archive/issue_comments_281385.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-27T12:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281385",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_281386.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-01-29T17:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281386",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_281387.json:
```json
{
    "body": "<a id='comment:17'></a>http://build.sagedev.org/release/builders/%20%20fast%20Oxford%20arando%20%28Ubuntu%2013.04%20i686%29%20incremental/builds/797/steps/shell_4/logs/stdio\n\n```\nsage -t --long src/sage/rings/asymptotic/asymptotic_expansion_generators.py\n**********************************************************************\nFile \"src/sage/rings/asymptotic/asymptotic_expansion_generators.py\", line 141, in sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.Stirling\nFailed example:\n    expansion.compare_with_values(n, lambda x: x.factorial(), [5, 10, 20])\nExpected:\n    [(5, 0.00675841118?), (10, 0.0067589306?), (20, 0.006744925?)]\nGot:\n    [(5, 0.006758411181?), (10, 0.0067589306?), (20, 0.006744925?)]\n**********************************************************************\n1 item had failures:\n   1 of  11 in sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.Stirling\n    [45 tests, 1 failure, 8.78 s]\n```",
    "created_at": "2016-01-29T17:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281387",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>http://build.sagedev.org/release/builders/%20%20fast%20Oxford%20arando%20%28Ubuntu%2013.04%20i686%29%20incremental/builds/797/steps/shell_4/logs/stdio

```
sage -t --long src/sage/rings/asymptotic/asymptotic_expansion_generators.py
**********************************************************************
File "src/sage/rings/asymptotic/asymptotic_expansion_generators.py", line 141, in sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.Stirling
Failed example:
    expansion.compare_with_values(n, lambda x: x.factorial(), [5, 10, 20])
Expected:
    [(5, 0.00675841118?), (10, 0.0067589306?), (20, 0.006744925?)]
Got:
    [(5, 0.006758411181?), (10, 0.0067589306?), (20, 0.006744925?)]
**********************************************************************
1 item had failures:
   1 of  11 in sage.rings.asymptotic.asymptotic_expansion_generators.AsymptoticExpansionGenerators.Stirling
    [45 tests, 1 failure, 8.78 s]
```



---

archive/issue_comments_281388.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-30T14:16:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281388",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_281389.json:
```json
{
    "body": "<a id='comment:19'></a>Added relative tolerance.",
    "created_at": "2016-01-30T14:17:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281389",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:19'></a>Added relative tolerance.



---

archive/issue_comments_281390.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-01-30T14:17:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281390",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_281391.json:
```json
{
    "body": "<a id='comment:21'></a>New commits:",
    "created_at": "2016-01-30T14:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281391",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:21'></a>New commits:



---

archive/issue_comments_281392.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-30T14:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281392",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_053781.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-31T13:31:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19510#event-53781"
}
```



---

archive/issue_comments_281393.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-01-31T13:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19510#issuecomment-281393",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
