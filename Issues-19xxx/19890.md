# Issue 19890: Improve standardization of words and permutations

archive/issues_019653.json:
```json
{
    "assignees": [],
    "body": "Improvement of the standardization computation\n\n- the current one:\n\n```\nsage: w = list(Words(100, 10000).random_element())\nsage: from sage.combinat.permutation import to_standard\nsage: %time sig = to_standard(w)\nCPU times: user 3.06 s, sys: 0 ns, total: 3.06 s\nWall time: 3.03 s\n```\n- the new version:\n\n```\nsage: w = list(Words(100, 10000).random_element())\nsage: from sage.combinat.permutation import to_standard\nsage: %time sig = to_standard(w)\nCPU times: user 28 ms, sys: 12 ms, total: 40 ms\nWall time: 61.2 ms\n```\n\nCC:  @avirmaux @nthiery\n\nBranch/Commit: **[`61b15f4`](https://github.com/sagemath/sagetrac-mirror/commit/61b15f4115dec4a07d21a30dba8c503c5296ae17)**\n\nReviewer: **Travis Scrimshaw, Vincent Delecroix**\n\nAuthor: **Jean-Baptiste Priez, Aladin Virmaux**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19890_\n\n",
    "closed_at": "2016-03-20T23:41:42Z",
    "created_at": "2016-01-14T21:39:06Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Improve standardization of words and permutations",
    "type": "issue",
    "updated_at": "2016-03-20T23:41:42Z",
    "url": "https://github.com/sagemath/sage/issues/19890",
    "user": "https://github.com/sagetrac-elixyre"
}
```
Improvement of the standardization computation

- the current one:

```
sage: w = list(Words(100, 10000).random_element())
sage: from sage.combinat.permutation import to_standard
sage: %time sig = to_standard(w)
CPU times: user 3.06 s, sys: 0 ns, total: 3.06 s
Wall time: 3.03 s
```
- the new version:

```
sage: w = list(Words(100, 10000).random_element())
sage: from sage.combinat.permutation import to_standard
sage: %time sig = to_standard(w)
CPU times: user 28 ms, sys: 12 ms, total: 40 ms
Wall time: 61.2 ms
```

CC:  @avirmaux @nthiery

Branch/Commit: **[`61b15f4`](https://github.com/sagemath/sagetrac-mirror/commit/61b15f4115dec4a07d21a30dba8c503c5296ae17)**

Reviewer: **Travis Scrimshaw, Vincent Delecroix**

Author: **Jean-Baptiste Priez, Aladin Virmaux**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/19890_





---

archive/issue_events_281202.json:
```json
{
    "actor": "https://github.com/sagetrac-elixyre",
    "created_at": "2016-01-14T21:39:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "milestone_number": null,
    "milestone_title": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19890#event-281202"
}
```



---

archive/issue_events_281203.json:
```json
{
    "actor": "https://github.com/sagetrac-elixyre",
    "created_at": "2016-01-14T21:39:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19890#event-281203"
}
```



---

archive/issue_events_281204.json:
```json
{
    "actor": "https://github.com/sagetrac-elixyre",
    "created_at": "2016-01-14T21:39:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19890#event-281204"
}
```



---

archive/issue_events_281205.json:
```json
{
    "actor": "https://github.com/sagetrac-elixyre",
    "created_at": "2016-01-14T21:39:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19890#event-281205"
}
```



---

archive/issue_comments_284633.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThat is quite the improvement. Here are some comments and suggestions:\n\n- Why do you import `imap`? You don't seem to use it.\n- Are you going to delete the old algorithm or keep it and add an `algorithm` option? I would at least keep the old (naive) algorithm around in a doctest for testing.",
    "created_at": "2016-01-14T23:59:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284633",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:2" align="right">comment:2</div>

That is quite the improvement. Here are some comments and suggestions:

- Why do you import `imap`? You don't seem to use it.
- Are you going to delete the old algorithm or keep it and add an `algorithm` option? I would at least keep the old (naive) algorithm around in a doctest for testing.



---

archive/issue_events_281206.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-01-14T23:59:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19890#event-281206"
}
```



---

archive/issue_comments_284634.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2016-01-14T23:59:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284634",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_284635.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHere are the changes I'd make:\n\n  ```diff\n  -    def merge(shelves, i=0):\n  +    def merge(shelves, i):\n   \n  -        if len(shelves) == 0:\n  +        if not shelves:\n               return\n  +        n = len(shelves)\n  -        if len(shelves) == 1:\n  +        if n == 1:\n               yield (shelves[0], i)\n               return\n   \n  -        n = len(shelves)\n  -        m = int(n / 2)\n  +        m = int(n // 2)\n   \n           L, R = merge(shelves[:m], i), merge(shelves[m:], i+m)\n   \n           aL, aR = L.next(), R.next()\n  -        j, k = 1, 1\n  +        j, k = 0, 0\n   \n           while True:\n               if aL[0] <= aR[0]:\n                   yield aL\n                   j += 1\n  -                if j == m+1: break\n  -                else: aL = L.next()\n  +                if j == m:\n  +                    break\n  +                aL = L.next()\n               else:\n                   yield aR\n                   k += 1\n  -                if k == n - m + 1: break\n  -                else: aR = R.next()\n  +                if k == n - m:\n  +                    break\n  +                aR = R.next()\n   \n  -        if j == m+1:\n  +        if j == m:\n  -            it = R\n               yield aR\n  +            for a in R:\n  +                yield a\n           else:\n  -            it = L\n               yield aL\n  +            for a in L:\n  +                yield a\n  -        for a in it:\n  -            yield a\n```\nHere is my reasoning:\n\n- I do not think you should have a default for `i` since you almost always call it with an argument. I would just make the one place where you use the default argument (the `for` loop in the main function) explicitly pass `0`.\n- The `if not shelves` is faster than calling `len` and comparing to `0`.\n- Moving the `n = len(shelves)` call up typically avoids an extra call to `len` and variable allocation is faster than a function call.\n- We should use `//` for integer division.\n- If we start at 0, we avoid a number of unnecessary `+1`'s and keeps it more in line with standard python code.\n- Standard Python formatting should only have `if` (and `else`) statements on one line.\n- By not having the `it` variable and the distinct `for` loops, IMO it makes the code more clear as there are less variables to chase around (and it has the same length).\n\nIf you agree and make these changes, you can set a positive review on my behalf.",
    "created_at": "2016-01-15T00:00:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284635",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:3" align="right">comment:3</div>

Here are the changes I'd make:

  ```diff
  -    def merge(shelves, i=0):
  +    def merge(shelves, i):
   
  -        if len(shelves) == 0:
  +        if not shelves:
               return
  +        n = len(shelves)
  -        if len(shelves) == 1:
  +        if n == 1:
               yield (shelves[0], i)
               return
   
  -        n = len(shelves)
  -        m = int(n / 2)
  +        m = int(n // 2)
   
           L, R = merge(shelves[:m], i), merge(shelves[m:], i+m)
   
           aL, aR = L.next(), R.next()
  -        j, k = 1, 1
  +        j, k = 0, 0
   
           while True:
               if aL[0] <= aR[0]:
                   yield aL
                   j += 1
  -                if j == m+1: break
  -                else: aL = L.next()
  +                if j == m:
  +                    break
  +                aL = L.next()
               else:
                   yield aR
                   k += 1
  -                if k == n - m + 1: break
  -                else: aR = R.next()
  +                if k == n - m:
  +                    break
  +                aR = R.next()
   
  -        if j == m+1:
  +        if j == m:
  -            it = R
               yield aR
  +            for a in R:
  +                yield a
           else:
  -            it = L
               yield aL
  +            for a in L:
  +                yield a
  -        for a in it:
  -            yield a
```
Here is my reasoning:

- I do not think you should have a default for `i` since you almost always call it with an argument. I would just make the one place where you use the default argument (the `for` loop in the main function) explicitly pass `0`.
- The `if not shelves` is faster than calling `len` and comparing to `0`.
- Moving the `n = len(shelves)` call up typically avoids an extra call to `len` and variable allocation is faster than a function call.
- We should use `//` for integer division.
- If we start at 0, we avoid a number of unnecessary `+1`'s and keeps it more in line with standard python code.
- Standard Python formatting should only have `if` (and `else`) statements on one line.
- By not having the `it` variable and the distinct `for` loops, IMO it makes the code more clear as there are less variables to chase around (and it has the same length).

If you agree and make these changes, you can set a positive review on my behalf.



---

archive/issue_comments_284636.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d1e1bfbc871f7a7c290f659b1db7f44c5e69634\">3d1e1bf</a></td><td><code>ticket standardization : remove unused import and old code</code></td></tr></table>\n",
    "created_at": "2016-01-15T07:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284636",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d1e1bfbc871f7a7c290f659b1db7f44c5e69634">3d1e1bf</a></td><td><code>ticket standardization : remove unused import and old code</code></td></tr></table>




---

archive/issue_comments_284637.json:
```json
{
    "body": "Changed commit from **[`798a3fb`](https://github.com/sagemath/sagetrac-mirror/commit/798a3fb4e5809e9aafe9c7ea0b4d13bc0b051788)** to **[`3d1e1bf`](https://github.com/sagemath/sagetrac-mirror/commit/3d1e1bfbc871f7a7c290f659b1db7f44c5e69634)**",
    "created_at": "2016-01-15T07:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284637",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`798a3fb`](https://github.com/sagemath/sagetrac-mirror/commit/798a3fb4e5809e9aafe9c7ea0b4d13bc0b051788)** to **[`3d1e1bf`](https://github.com/sagemath/sagetrac-mirror/commit/3d1e1bfbc871f7a7c290f659b1db7f44c5e69634)**



---

archive/issue_comments_284638.json:
```json
{
    "body": "Changed commit from **[`3d1e1bf`](https://github.com/sagemath/sagetrac-mirror/commit/3d1e1bfbc871f7a7c290f659b1db7f44c5e69634)** to **[`b248fb5`](https://github.com/sagemath/sagetrac-mirror/commit/b248fb55c423ffc380700234be22fa7a37ace3c2)**",
    "created_at": "2016-01-15T07:33:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284638",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3d1e1bf`](https://github.com/sagemath/sagetrac-mirror/commit/3d1e1bfbc871f7a7c290f659b1db7f44c5e69634)** to **[`b248fb5`](https://github.com/sagemath/sagetrac-mirror/commit/b248fb55c423ffc380700234be22fa7a37ace3c2)**



---

archive/issue_comments_284639.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b248fb55c423ffc380700234be22fa7a37ace3c2\">b248fb5</a></td><td><code>ticket standardization: add doctest with old standardization algorithm</code></td></tr></table>\n",
    "created_at": "2016-01-15T07:33:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284639",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b248fb55c423ffc380700234be22fa7a37ace3c2">b248fb5</a></td><td><code>ticket standardization: add doctest with old standardization algorithm</code></td></tr></table>




---

archive/issue_comments_284640.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@tscrim](#comment:2):\n> That is quite the improvement. Here are some comments and suggestions:\n> \n> - Why do you import `imap`? You don't seem to use it.\n\nSorry, it is a mistake... I was to fast and I forgot to remove that.\n\n> - Are you going to delete the old algorithm or keep it and add an `algorithm` option? I would at least keep the old (naive) algorithm around in a doctest for testing.\n\nI deleted the old below and I had it in doctest!",
    "created_at": "2016-01-15T07:34:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284640",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@tscrim](#comment:2):
> That is quite the improvement. Here are some comments and suggestions:
> 
> - Why do you import `imap`? You don't seem to use it.

Sorry, it is a mistake... I was to fast and I forgot to remove that.

> - Are you going to delete the old algorithm or keep it and add an `algorithm` option? I would at least keep the old (naive) algorithm around in a doctest for testing.

I deleted the old below and I had it in doctest!



---

archive/issue_comments_284641.json:
```json
{
    "body": "Changed commit from **[`b248fb5`](https://github.com/sagemath/sagetrac-mirror/commit/b248fb55c423ffc380700234be22fa7a37ace3c2)** to **[`acdaf9d`](https://github.com/sagemath/sagetrac-mirror/commit/acdaf9d6d8fa028a31e0628d0d61352511a610bc)**",
    "created_at": "2016-01-15T07:58:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284641",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b248fb5`](https://github.com/sagemath/sagetrac-mirror/commit/b248fb55c423ffc380700234be22fa7a37ace3c2)** to **[`acdaf9d`](https://github.com/sagemath/sagetrac-mirror/commit/acdaf9d6d8fa028a31e0628d0d61352511a610bc)**



---

archive/issue_comments_284642.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/acdaf9d6d8fa028a31e0628d0d61352511a610bc\">acdaf9d</a></td><td><code>ticket standardization: following Travis comments</code></td></tr></table>\n",
    "created_at": "2016-01-15T07:58:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284642",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/acdaf9d6d8fa028a31e0628d0d61352511a610bc">acdaf9d</a></td><td><code>ticket standardization: following Travis comments</code></td></tr></table>




---

archive/issue_comments_284643.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHey Jean-Baptiste!\n\nIt is probably possible to go even faster using python sort and a dictionnary!\n\n```\nsage: w = Words(100, 100000).random_element()\nsage: %time a = w.standard_permutation()\nCPU times: user 123 ms, sys: 36.7 ms, total: 160 ms\nWall time: 128 ms\n```",
    "created_at": "2016-01-15T17:09:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284643",
    "user": "https://github.com/avirmaux"
}
```

<div id="comment:8" align="right">comment:8</div>

Hey Jean-Baptiste!

It is probably possible to go even faster using python sort and a dictionnary!

```
sage: w = Words(100, 100000).random_element()
sage: %time a = w.standard_permutation()
CPU times: user 123 ms, sys: 36.7 ms, total: 160 ms
Wall time: 128 ms
```



---

archive/issue_comments_284644.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nDo you have code that you could push or paste here?",
    "created_at": "2016-01-16T00:27:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284644",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">comment:9</div>

Do you have code that you could push or paste here?



---

archive/issue_comments_284645.json:
```json
{
    "body": "Changed commit from **[`acdaf9d`](https://github.com/sagemath/sagetrac-mirror/commit/acdaf9d6d8fa028a31e0628d0d61352511a610bc)** to **[`2ee9514`](https://github.com/sagemath/sagetrac-mirror/commit/2ee9514188869c987a196893fcd7a8cb61653bcc)**",
    "created_at": "2016-01-16T07:20:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284645",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`acdaf9d`](https://github.com/sagemath/sagetrac-mirror/commit/acdaf9d6d8fa028a31e0628d0d61352511a610bc)** to **[`2ee9514`](https://github.com/sagemath/sagetrac-mirror/commit/2ee9514188869c987a196893fcd7a8cb61653bcc)**



---

archive/issue_comments_284646.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ee9514188869c987a196893fcd7a8cb61653bcc\">2ee9514</a></td><td><code>ticket standardization: improvement with Aladin advice</code></td></tr></table>\n",
    "created_at": "2016-01-16T07:20:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284646",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ee9514188869c987a196893fcd7a8cb61653bcc">2ee9514</a></td><td><code>ticket standardization: improvement with Aladin advice</code></td></tr></table>




---

archive/issue_comments_284647.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThanks Aladin for this idea... It is better now. :-)\n\n```\nsage: %time _ = to_standard(w)\nCPU times: user 169 ms, sys: 20.7 ms, total: 190 ms\nWall time: 178 ms\n```\n\nBut I remark there exist a better version in `FiniteWord_class`... (why this implementation is not used there???)\n\nI correct it",
    "created_at": "2016-01-16T07:33:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284647",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<div id="comment:11" align="right">comment:11</div>

Thanks Aladin for this idea... It is better now. :-)

```
sage: %time _ = to_standard(w)
CPU times: user 169 ms, sys: 20.7 ms, total: 190 ms
Wall time: 178 ms
```

But I remark there exist a better version in `FiniteWord_class`... (why this implementation is not used there???)

I correct it



---

archive/issue_comments_284648.json:
```json
{
    "body": "Changed commit from **[`2ee9514`](https://github.com/sagemath/sagetrac-mirror/commit/2ee9514188869c987a196893fcd7a8cb61653bcc)** to **[`7725254`](https://github.com/sagemath/sagetrac-mirror/commit/7725254780460706ecd3d933753d08883462c538)**",
    "created_at": "2016-01-16T08:11:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284648",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2ee9514`](https://github.com/sagemath/sagetrac-mirror/commit/2ee9514188869c987a196893fcd7a8cb61653bcc)** to **[`7725254`](https://github.com/sagemath/sagetrac-mirror/commit/7725254780460706ecd3d933753d08883462c538)**



---

archive/issue_comments_284649.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7725254780460706ecd3d933753d08883462c538\">7725254</a></td><td><code>ticket standardization: move and improve the standardization implementation of finite words into permutation.</code></td></tr></table>\n",
    "created_at": "2016-01-16T08:11:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284649",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7725254780460706ecd3d933753d08883462c538">7725254</a></td><td><code>ticket standardization: move and improve the standardization implementation of finite words into permutation.</code></td></tr></table>




---

archive/issue_comments_284650.json:
```json
{
    "body": "Changed commit from **[`7725254`](https://github.com/sagemath/sagetrac-mirror/commit/7725254780460706ecd3d933753d08883462c538)** to **[`27ac158`](https://github.com/sagemath/sagetrac-mirror/commit/27ac158138b23ae5b5effe0b0ba1b200281c7c5c)**",
    "created_at": "2016-01-16T08:15:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284650",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7725254`](https://github.com/sagemath/sagetrac-mirror/commit/7725254780460706ecd3d933753d08883462c538)** to **[`27ac158`](https://github.com/sagemath/sagetrac-mirror/commit/27ac158138b23ae5b5effe0b0ba1b200281c7c5c)**



---

archive/issue_comments_284651.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27ac158138b23ae5b5effe0b0ba1b200281c7c5c\">27ac158</a></td><td><code>ticket standardization: what I was supposed to commit earlier...</code></td></tr></table>\n",
    "created_at": "2016-01-16T08:15:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284651",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27ac158138b23ae5b5effe0b0ba1b200281c7c5c">27ac158</a></td><td><code>ticket standardization: what I was supposed to commit earlier...</code></td></tr></table>




---

archive/issue_comments_284652.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThe implementation in `finite_word.py` was quite better so I moved it into `permutation.py` and updated the code around. \n(Specially I defined a function `evaluation_dict` in `finite_word` which replace/generalize/improve the `evaluation_dict` method of `finite_word`.)",
    "created_at": "2016-01-16T08:19:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284652",
    "user": "https://github.com/sagetrac-elixyre"
}
```

<div id="comment:14" align="right">comment:14</div>

The implementation in `finite_word.py` was quite better so I moved it into `permutation.py` and updated the code around. 
(Specially I defined a function `evaluation_dict` in `finite_word` which replace/generalize/improve the `evaluation_dict` method of `finite_word`.)



---

archive/issue_comments_284653.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nstandardization of what? The title is very vague, it's not even clear that it's about combinatorics.",
    "created_at": "2016-01-16T13:32:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284653",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

standardization of what? The title is very vague, it's not even clear that it's about combinatorics.



---

archive/issue_events_281207.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-01-24T04:56:34Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "title_is": "Improve standardization of words and permutations",
    "title_was": "Improve standardization",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19890#event-281207"
}
```



---

archive/issue_comments_284654.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI made some reviewer changes by adding a little bit more description in the doctests, and I moved `evaluation_dict` to the end of the file as IMO the main classes should be closest to the top of the file. If you're happy with my changes, then positive review. (I added Aladin to the authors since the current algorithm is based upon his idea as per [comment:8](#comment:8).)\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4507802eb0a6299a99e47d73e79bf04da53593b\">e450780</a></td><td><code>Merge branch 'u/elixyre/standardization' of trac.sagemath.org:sage into u/elixyre/standardization</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61b15f4115dec4a07d21a30dba8c503c5296ae17\">61b15f4</a></td><td><code>Some other reviewer changes.</code></td></tr></table>\n",
    "created_at": "2016-01-24T04:56:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284654",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">comment:16</div>

I made some reviewer changes by adding a little bit more description in the doctests, and I moved `evaluation_dict` to the end of the file as IMO the main classes should be closest to the top of the file. If you're happy with my changes, then positive review. (I added Aladin to the authors since the current algorithm is based upon his idea as per [comment:8](#comment:8).)

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4507802eb0a6299a99e47d73e79bf04da53593b">e450780</a></td><td><code>Merge branch 'u/elixyre/standardization' of trac.sagemath.org:sage into u/elixyre/standardization</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61b15f4115dec4a07d21a30dba8c503c5296ae17">61b15f4</a></td><td><code>Some other reviewer changes.</code></td></tr></table>




---

archive/issue_comments_284655.json:
```json
{
    "body": "Changed branch from **[u/elixyre/standardization](https://github.com/sagemath/sagetrac-mirror/tree/u/elixyre/standardization)** to **[u/tscrim/improve_standardization-19890](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/improve_standardization-19890)**",
    "created_at": "2016-01-24T04:56:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284655",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/elixyre/standardization](https://github.com/sagemath/sagetrac-mirror/tree/u/elixyre/standardization)** to **[u/tscrim/improve_standardization-19890](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/improve_standardization-19890)**



---

archive/issue_events_281208.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-01-24T04:56:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "milestone_number": null,
    "milestone_title": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19890#event-281208"
}
```



---

archive/issue_events_281209.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-01-24T04:56:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19890#event-281209"
}
```



---

archive/issue_comments_284656.json:
```json
{
    "body": "Changed commit from **[`27ac158`](https://github.com/sagemath/sagetrac-mirror/commit/27ac158138b23ae5b5effe0b0ba1b200281c7c5c)** to **[`61b15f4`](https://github.com/sagemath/sagetrac-mirror/commit/61b15f4115dec4a07d21a30dba8c503c5296ae17)**",
    "created_at": "2016-01-24T04:56:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284656",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`27ac158`](https://github.com/sagemath/sagetrac-mirror/commit/27ac158138b23ae5b5effe0b0ba1b200281c7c5c)** to **[`61b15f4`](https://github.com/sagemath/sagetrac-mirror/commit/61b15f4115dec4a07d21a30dba8c503c5296ae17)**



---

archive/issue_comments_284657.json:
```json
{
    "body": "Changed author from **Jean-Baptiste Priez** to **Jean-Baptiste Priez, Aladin Virmaux**",
    "created_at": "2016-01-24T04:56:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284657",
    "user": "https://github.com/tscrim"
}
```

Changed author from **Jean-Baptiste Priez** to **Jean-Baptiste Priez, Aladin Virmaux**



---

archive/issue_comments_284658.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nping",
    "created_at": "2016-03-09T11:42:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284658",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">comment:17</div>

ping



---

archive/issue_events_281210.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-03-16T13:11:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19890#event-281210"
}
```



---

archive/issue_events_281211.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-03-16T13:11:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19890#event-281211"
}
```



---

archive/issue_comments_284659.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Vincent Delecroix**",
    "created_at": "2016-03-16T13:11:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284659",
    "user": "https://github.com/videlec"
}
```

Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Vincent Delecroix**



---

archive/issue_comments_284660.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,18 +3,18 @@\n - the current one:\n \n ```\n-sage: sage: w = list(Words(100, 100000).random_element())\n-sage: sage: from sage.combinat.permutation import to_standard\n-sage: sage: %time sig = to_standard(w)\n-CPU times: user 4min 42s, sys: 2.65 s, total: 4min 45s\n-Wall time: 4min 53s\n+sage: w = list(Words(100, 10000).random_element())\n+sage: from sage.combinat.permutation import to_standard\n+sage: %time sig = to_standard(w)\n+CPU times: user 3.06 s, sys: 0 ns, total: 3.06 s\n+Wall time: 3.03 s\n ```\n-- using the merge sort algorithm:\n+- the new version:\n \n ```\n-sage: sage: w = list(Words(100, 100000).random_element())\n-sage: sage: from sage.combinat.permutation import to_standard\n-sage: sage: %time sig = to_standard(w)\n-CPU times: user 2.33 s, sys: 147 ms, total: 2.47 s\n-Wall time: 2.5 s\n+sage: w = list(Words(100, 10000).random_element())\n+sage: from sage.combinat.permutation import to_standard\n+sage: %time sig = to_standard(w)\n+CPU times: user 28 ms, sys: 12 ms, total: 40 ms\n+Wall time: 61.2 ms\n ```\n``````\n",
    "created_at": "2016-03-16T13:11:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284660",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,18 +3,18 @@
 - the current one:
 
 ```
-sage: sage: w = list(Words(100, 100000).random_element())
-sage: sage: from sage.combinat.permutation import to_standard
-sage: sage: %time sig = to_standard(w)
-CPU times: user 4min 42s, sys: 2.65 s, total: 4min 45s
-Wall time: 4min 53s
+sage: w = list(Words(100, 10000).random_element())
+sage: from sage.combinat.permutation import to_standard
+sage: %time sig = to_standard(w)
+CPU times: user 3.06 s, sys: 0 ns, total: 3.06 s
+Wall time: 3.03 s
 ```
-- using the merge sort algorithm:
+- the new version:
 
 ```
-sage: sage: w = list(Words(100, 100000).random_element())
-sage: sage: from sage.combinat.permutation import to_standard
-sage: sage: %time sig = to_standard(w)
-CPU times: user 2.33 s, sys: 147 ms, total: 2.47 s
-Wall time: 2.5 s
+sage: w = list(Words(100, 10000).random_element())
+sage: from sage.combinat.permutation import to_standard
+sage: %time sig = to_standard(w)
+CPU times: user 28 ms, sys: 12 ms, total: 40 ms
+Wall time: 61.2 ms
 ```
``````




---

archive/issue_comments_284661.json:
```json
{
    "body": "Changed branch from **[u/tscrim/improve_standardization-19890](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/improve_standardization-19890)** to **[`61b15f4`](https://github.com/sagemath/sagetrac-mirror/commit/61b15f4115dec4a07d21a30dba8c503c5296ae17)**",
    "created_at": "2016-03-20T23:41:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19890#issuecomment-284661",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/tscrim/improve_standardization-19890](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/improve_standardization-19890)** to **[`61b15f4`](https://github.com/sagemath/sagetrac-mirror/commit/61b15f4115dec4a07d21a30dba8c503c5296ae17)**



---

archive/issue_events_281212.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-03-20T23:41:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19890#event-281212"
}
```



---

archive/issue_events_281213.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3543ce090d1c6d6c710df8fa0d846669befc65d7",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-03-20T23:41:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19890",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19890#event-281213"
}
```
