# Issue 19643: BRiAl not building on cygwin

archive/issues_019406.json:
```json
{
    "body": "Missing -no-undefined in BRiAl, preventing the build on cygwin:\n\n```\n/bin/sh ./libtool  --tag=CC   --mode=link gcc  -g -O2   -o libpolybori.la -rpath /home/Sebastien/sage19/sage/local/lib  Cudd/cudd/libcudd.la libpolybori/src/libpolybori_base.la \nlibtool:   error: can't build x86_64-unknown-cygwin shared library unless -no-undefined is specified\n```\n\nCC:  jpflori @ohanar\n\nBranch/Commit: bc3110294fd1f9c4842278c49a9c6ddbd93a487f\n\nReviewer: Travis Scrimshaw, Jean-Pierre Flori\n\nAuthor: Sebastien Gouezel\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19643\n\n",
    "closed_at": "2015-12-09T17:54:48Z",
    "created_at": "2015-11-29T16:57:52Z",
    "labels": [
        "component: porting: cygwin",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "BRiAl not building on cygwin",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19643",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```
Missing -no-undefined in BRiAl, preventing the build on cygwin:

```
/bin/sh ./libtool  --tag=CC   --mode=link gcc  -g -O2   -o libpolybori.la -rpath /home/Sebastien/sage19/sage/local/lib  Cudd/cudd/libcudd.la libpolybori/src/libpolybori_base.la 
libtool:   error: can't build x86_64-unknown-cygwin shared library unless -no-undefined is specified
```

CC:  jpflori @ohanar

Branch/Commit: bc3110294fd1f9c4842278c49a9c6ddbd93a487f

Reviewer: Travis Scrimshaw, Jean-Pierre Flori

Author: Sebastien Gouezel

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19643





---

archive/issue_comments_348440.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gouezel/brial_cygwin\"",
    "created_at": "2015-12-03T10:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19643",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19643#issuecomment-348440",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

Changing branch from "" to "u/gouezel/brial_cygwin"



---

archive/issue_comments_348441.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-12-03T10:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19643",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19643#issuecomment-348441",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_348442.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|\n|[bc31102](https://github.com/sagemath/sagetrac-mirror/commit/bc3110294fd1f9c4842278c49a9c6ddbd93a487f)|` #19643: fix brial compilation on cygwin by adding suitable -no-undefined flags`|",
    "created_at": "2015-12-03T10:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19643",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19643#issuecomment-348442",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|
|[bc31102](https://github.com/sagemath/sagetrac-mirror/commit/bc3110294fd1f9c4842278c49a9c6ddbd93a487f)|` #19643: fix brial compilation on cygwin by adding suitable -no-undefined flags`|



---

archive/issue_comments_348443.json:
```json
{
    "body": "Changing author from \"\" to \"Sebastien Gouezel\"",
    "created_at": "2015-12-03T10:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19643",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19643#issuecomment-348443",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

Changing author from "" to "Sebastien Gouezel"



---

archive/issue_comments_348444.json:
```json
{
    "body": "Changing commit from \"\" to \"bc3110294fd1f9c4842278c49a9c6ddbd93a487f\"",
    "created_at": "2015-12-03T10:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19643",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19643#issuecomment-348444",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

Changing commit from "" to "bc3110294fd1f9c4842278c49a9c6ddbd93a487f"



---

archive/issue_comments_348445.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis did allow BRiAl to build for my on Cygwin32, but I would prefer someone who has a bit more experience than me in these things (JP) to check to make sure this is the right fix.",
    "created_at": "2015-12-07T19:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19643",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19643#issuecomment-348445",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
This did allow BRiAl to build for my on Cygwin32, but I would prefer someone who has a bit more experience than me in these things (JP) to check to make sure this is the right fix.



---

archive/issue_comments_348446.json:
```json
{
    "body": "<a id='comment:3'></a>\nThis looks ok.\nActually better would be to only add `-no-undefined` on Cygwin.\nBut that should not hurt anywhere alse (except in rare situations where undefined symbol are wanted at link time, that should not be the case here).\nDid someone reported it upstream?",
    "created_at": "2015-12-07T21:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19643",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19643#issuecomment-348446",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:3'></a>
This looks ok.
Actually better would be to only add `-no-undefined` on Cygwin.
But that should not hurt anywhere alse (except in rare situations where undefined symbol are wanted at link time, that should not be the case here).
Did someone reported it upstream?



---

archive/issue_comments_348447.json:
```json
{
    "body": "<a id='comment:4'></a>\nI did not report it upstream because the status of upstream is not clear: https://github.com/BRiAl/BRiAl only mentions polybori, and polybori maintainers. Let me cc ohanar, as he created the brial ticket in #18437.\n\nSure, adding -no-undefined only on cygwin would be better, but I do not see how it could hurt in any case.",
    "created_at": "2015-12-07T21:36:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19643",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19643#issuecomment-348447",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

<a id='comment:4'></a>
I did not report it upstream because the status of upstream is not clear: https://github.com/BRiAl/BRiAl only mentions polybori, and polybori maintainers. Let me cc ohanar, as he created the brial ticket in #18437.

Sure, adding -no-undefined only on cygwin would be better, but I do not see how it could hurt in any case.



---

archive/issue_comments_348448.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-12-07T21:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19643",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19643#issuecomment-348448",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_348449.json:
```json
{
    "body": "<a id='comment:5'></a>\nI agree it's maybe not worth the pain specializing for Cygwin.\nI still do remember a ticket where compilation failed on OS X for an obscure package (Singular maybe...) because on OS X you needed undefined stuff.\nBut here I'll live without it.",
    "created_at": "2015-12-07T21:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19643",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19643#issuecomment-348449",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:5'></a>
I agree it's maybe not worth the pain specializing for Cygwin.
I still do remember a ticket where compilation failed on OS X for an obscure package (Singular maybe...) because on OS X you needed undefined stuff.
But here I'll live without it.



---

archive/issue_comments_348450.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw, Jean-Pierre Flori\"",
    "created_at": "2015-12-07T21:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19643",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19643#issuecomment-348450",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing reviewer from "" to "Travis Scrimshaw, Jean-Pierre Flori"



---

archive/issue_comments_348451.json:
```json
{
    "body": "<a id='comment:6'></a>\nFeel free to submit a pull request 'upstream'. I have had no time to do things there (and have even less time at the moment), but when I do get some time I'll try to look through any pull requests there. If anyone wants to help out with managing BRiAl (even just with making bug fix releases like this), send me an email and I'll add you to the organization.",
    "created_at": "2015-12-07T21:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19643",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19643#issuecomment-348451",
    "user": "https://github.com/ohanar"
}
```

<a id='comment:6'></a>
Feel free to submit a pull request 'upstream'. I have had no time to do things there (and have even less time at the moment), but when I do get some time I'll try to look through any pull requests there. If anyone wants to help out with managing BRiAl (even just with making bug fix releases like this), send me an email and I'll add you to the organization.



---

archive/issue_comments_348452.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-12-09T17:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19643",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19643#issuecomment-348452",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_069146.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-09T17:54:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19643",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19643#event-69146"
}
```



---

archive/issue_comments_348453.json:
```json
{
    "body": "Changing branch from \"u/gouezel/brial_cygwin\" to \"bc3110294fd1f9c4842278c49a9c6ddbd93a487f\"",
    "created_at": "2015-12-09T17:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19643",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19643#issuecomment-348453",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gouezel/brial_cygwin" to "bc3110294fd1f9c4842278c49a9c6ddbd93a487f"
