# Issue 19516: Posets: Add add_bounds()

archive/issues_019279.json:
```json
{
    "body": "Add a function that adds a bottom and a top element to a poset.\n\n(I.e. return a new poset with bounds added, as posets are immutable.)\n\n\nCC:  @kevindilks @nathanncohen\n\nBranch/Commit: fd2e636c0a1090c96774afa259138e4d53782f18\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Jori M\u00e4ntysalo\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19516\n\n",
    "closed_at": "2015-11-24T13:01:29Z",
    "created_at": "2015-11-04T05:18:32Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Posets: Add add_bounds()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19516",
    "user": "https://github.com/jm58660"
}
```
Add a function that adds a bottom and a top element to a poset.

(I.e. return a new poset with bounds added, as posets are immutable.)


CC:  @kevindilks @nathanncohen

Branch/Commit: fd2e636c0a1090c96774afa259138e4d53782f18

Reviewer: Frédéric Chapoton

Author: Jori Mäntysalo

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19516





---

archive/issue_comments_349965.json:
```json
{
    "body": "<a id='comment:1'></a>\nKevin: I am mostly interested in abstract posets, so it is fine to just relabel the result to integers.\n\nBut what about others? Should the new top element be string 'top', for example? What if the poset already contains it? Or make a pairs, so that `'a'` in the original poset would be `('a', 0)` in the new poset?",
    "created_at": "2015-11-04T05:22:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349965",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:1'></a>
Kevin: I am mostly interested in abstract posets, so it is fine to just relabel the result to integers.

But what about others? Should the new top element be string 'top', for example? What if the poset already contains it? Or make a pairs, so that `'a'` in the original poset would be `('a', 0)` in the new poset?



---

archive/issue_comments_349966.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jmantysalo/posets__add_add_bounds__\"",
    "created_at": "2015-11-04T10:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349966",
    "user": "https://github.com/jm58660"
}
```

Changing branch from "" to "u/jmantysalo/posets__add_add_bounds__"



---

archive/issue_comments_349967.json:
```json
{
    "body": "<a id='comment:3'></a>\nNathann, any opinions? The code works, but\n\n1) What should be the name of the function? This does not modify the poset, so \"add\"-something seems wrong.\n\n2) What about default value of top and bottom elements?\n\n---\nNew commits:\n|                                                                                                                                          |                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[3579c1a](http://git.sagemath.org/sage.git/commit/?id=3579c1aca5d6839433e35647070da2bbaf7cd144)|`Some scratch to addbounds()-function.`|",
    "created_at": "2015-11-09T14:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349967",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:3'></a>
Nathann, any opinions? The code works, but

1) What should be the name of the function? This does not modify the poset, so "add"-something seems wrong.

2) What about default value of top and bottom elements?

---
New commits:
|                                                                                                                                          |                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[3579c1a](http://git.sagemath.org/sage.git/commit/?id=3579c1aca5d6839433e35647070da2bbaf7cd144)|`Some scratch to addbounds()-function.`|



---

archive/issue_comments_349968.json:
```json
{
    "body": "Changing commit from \"\" to \"3579c1aca5d6839433e35647070da2bbaf7cd144\"",
    "created_at": "2015-11-09T14:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349968",
    "user": "https://github.com/jm58660"
}
```

Changing commit from "" to "3579c1aca5d6839433e35647070da2bbaf7cd144"



---

archive/issue_comments_349969.json:
```json
{
    "body": "<a id='comment:4'></a>\nHello,\n\n1) What about `add_top_and_bottom(inplace=False)` which does both inplace and a copy?\n\n2) `add_top_and_bottom(min_element,max_element,inplace=False)`?\n\nNathann",
    "created_at": "2015-11-09T16:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349969",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>
Hello,

1) What about `add_top_and_bottom(inplace=False)` which does both inplace and a copy?

2) `add_top_and_bottom(min_element,max_element,inplace=False)`?

Nathann



---

archive/issue_comments_349970.json:
```json
{
    "body": "<a id='comment:5'></a>\nOh. I forgot that posets couldn't be mutated inplace. Well.... Then `with_top_and_bottom`? I don't like it much either ... `:-/`\n\nNathann",
    "created_at": "2015-11-09T16:06:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349970",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>
Oh. I forgot that posets couldn't be mutated inplace. Well.... Then `with_top_and_bottom`? I don't like it much either ... `:-/`

Nathann



---

archive/issue_comments_349971.json:
```json
{
    "body": "<a id='comment:6'></a>\nBetter yet: `with_bounds`.\n\nIt could be good to have `with_bounds(min_element='bottom', max_element='top')`. But to be consistent with other functions there should be way to think posets as abstract structures, i.e. something like `labels='integers'`. Is it too complicated to have three parameter? Maybe not.\n\nI'll make some code according to this.",
    "created_at": "2015-11-09T16:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349971",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:6'></a>
Better yet: `with_bounds`.

It could be good to have `with_bounds(min_element='bottom', max_element='top')`. But to be consistent with other functions there should be way to think posets as abstract structures, i.e. something like `labels='integers'`. Is it too complicated to have three parameter? Maybe not.

I'll make some code according to this.



---

archive/issue_comments_349972.json:
```json
{
    "body": "Changing commit from \"3579c1aca5d6839433e35647070da2bbaf7cd144\" to \"d3a946613dc89d0dcb42b31128e3d6663c5ad1f7\"",
    "created_at": "2015-11-10T07:29:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349972",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3579c1aca5d6839433e35647070da2bbaf7cd144" to "d3a946613dc89d0dcb42b31128e3d6663c5ad1f7"



---

archive/issue_comments_349973.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[d3a9466](http://git.sagemath.org/sage.git/commit/?id=d3a946613dc89d0dcb42b31128e3d6663c5ad1f7)|`Changed function name etc.`|",
    "created_at": "2015-11-10T07:29:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349973",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                            |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[d3a9466](http://git.sagemath.org/sage.git/commit/?id=d3a946613dc89d0dcb42b31128e3d6663c5ad1f7)|`Changed function name etc.`|



---

archive/issue_comments_349974.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-10T07:32:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349974",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_349975.json:
```json
{
    "body": "Changing author from \"\" to \"Jori M\u00e4ntysalo\"",
    "created_at": "2015-11-10T07:32:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349975",
    "user": "https://github.com/jm58660"
}
```

Changing author from "" to "Jori Mäntysalo"



---

archive/issue_comments_349976.json:
```json
{
    "body": "<a id='comment:8'></a>\nI am not sure about this. So this interface can be extended later; there is no `integers`-option. At least the user can say `P.with_bounds().canonical_label()`.",
    "created_at": "2015-11-10T07:32:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349976",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:8'></a>
I am not sure about this. So this interface can be extended later; there is no `integers`-option. At least the user can say `P.with_bounds().canonical_label()`.



---

archive/issue_comments_349977.json:
```json
{
    "body": "<a id='comment:9'></a>\nplease add a test to record what happens when one of the labels already exists.",
    "created_at": "2015-11-15T17:23:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349977",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>
please add a test to record what happens when one of the labels already exists.



---

archive/issue_comments_349978.json:
```json
{
    "body": "<a id='comment:10'></a>\n(comment removed: I'm an idiot)",
    "created_at": "2015-11-15T17:25:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349978",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'></a>
(comment removed: I'm an idiot)



---

archive/issue_comments_349979.json:
```json
{
    "body": "Changing commit from \"d3a946613dc89d0dcb42b31128e3d6663c5ad1f7\" to \"153a8e05b3aead8d00304e2e46d756dc0e8e9fa7\"",
    "created_at": "2015-11-15T21:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349979",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d3a946613dc89d0dcb42b31128e3d6663c5ad1f7" to "153a8e05b3aead8d00304e2e46d756dc0e8e9fa7"



---

archive/issue_comments_349980.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|\n|[153a8e0](http://git.sagemath.org/sage.git/commit/?id=153a8e05b3aead8d00304e2e46d756dc0e8e9fa7)|`Added a test: what if the poset already have an element to add.`|",
    "created_at": "2015-11-15T21:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349980",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|
|[153a8e0](http://git.sagemath.org/sage.git/commit/?id=153a8e05b3aead8d00304e2e46d756dc0e8e9fa7)|`Added a test: what if the poset already have an element to add.`|



---

archive/issue_comments_349981.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [chapoton](#comment%3A9):\n\n> please add a test to record what happens when one of the labels already exists.\n\n\nDone this.",
    "created_at": "2015-11-15T21:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349981",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:12'></a>
Replying to [chapoton](#comment%3A9):

> please add a test to record what happens when one of the labels already exists.


Done this.



---

archive/issue_comments_349982.json:
```json
{
    "body": "<a id='comment:13'></a>\nok, nearly good to go. just two remaining typos:\n\nin the first line, \"Return the poset with bottom and top element**s** adjoined.\"\n\nin the next line, \"This functions always adds two new elements to **the** poset, i.e.\"\n\nOnce corrected, you can set a positive review",
    "created_at": "2015-11-16T16:36:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349982",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:13'></a>
ok, nearly good to go. just two remaining typos:

in the first line, "Return the poset with bottom and top element**s** adjoined."

in the next line, "This functions always adds two new elements to **the** poset, i.e."

Once corrected, you can set a positive review



---

archive/issue_comments_349983.json:
```json
{
    "body": "Changing commit from \"153a8e05b3aead8d00304e2e46d756dc0e8e9fa7\" to \"1e384f21709f2baaed7fbb7440b4732d5ca3e756\"",
    "created_at": "2015-11-16T18:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349983",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "153a8e05b3aead8d00304e2e46d756dc0e8e9fa7" to "1e384f21709f2baaed7fbb7440b4732d5ca3e756"



---

archive/issue_comments_349984.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[1e384f2](http://git.sagemath.org/sage.git/commit/?id=1e384f21709f2baaed7fbb7440b4732d5ca3e756)|`Two small typos corrected.`|",
    "created_at": "2015-11-16T18:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349984",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                            |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[1e384f2](http://git.sagemath.org/sage.git/commit/?id=1e384f21709f2baaed7fbb7440b4732d5ca3e756)|`Two small typos corrected.`|



---

archive/issue_comments_349985.json:
```json
{
    "body": "<a id='comment:15'></a>\nMarked positive as said in comment 13.",
    "created_at": "2015-11-16T19:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349985",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:15'></a>
Marked positive as said in comment 13.



---

archive/issue_comments_349986.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2015-11-16T19:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349986",
    "user": "https://github.com/jm58660"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_349987.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-16T19:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349987",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_349988.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-11-16T19:10:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349988",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_349989.json:
```json
{
    "body": "<a id='comment:16'></a>\nMerge conflict, probably #19113",
    "created_at": "2015-11-16T19:10:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349989",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'></a>
Merge conflict, probably #19113



---

archive/issue_comments_349990.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------|\n|[fd2e636](http://git.sagemath.org/sage.git/commit/?id=fd2e636c0a1090c96774afa259138e4d53782f18)|`Merge to beta5.`|",
    "created_at": "2015-11-23T07:30:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349990",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------|
|[fd2e636](http://git.sagemath.org/sage.git/commit/?id=fd2e636c0a1090c96774afa259138e4d53782f18)|`Merge to beta5.`|



---

archive/issue_comments_349991.json:
```json
{
    "body": "Changing commit from \"1e384f21709f2baaed7fbb7440b4732d5ca3e756\" to \"fd2e636c0a1090c96774afa259138e4d53782f18\"",
    "created_at": "2015-11-23T07:30:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349991",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1e384f21709f2baaed7fbb7440b4732d5ca3e756" to "fd2e636c0a1090c96774afa259138e4d53782f18"



---

archive/issue_comments_349992.json:
```json
{
    "body": "<a id='comment:18'></a>\nAgain needs_review. Fr\u00e9d\u00e9ric, should I mark this kind of tickets directly as positive_review?\n\nThe only change I made is in index of functions: \"cartesian product\" to \"Cartesian product\".",
    "created_at": "2015-11-23T07:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349992",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:18'></a>
Again needs_review. Frédéric, should I mark this kind of tickets directly as positive_review?

The only change I made is in index of functions: "cartesian product" to "Cartesian product".



---

archive/issue_comments_349993.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-11-23T07:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349993",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_349994.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-23T08:22:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349994",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_349995.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-11-24T13:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349995",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_349996.json:
```json
{
    "body": "Changing branch from \"u/jmantysalo/posets__add_add_bounds__\" to \"fd2e636c0a1090c96774afa259138e4d53782f18\"",
    "created_at": "2015-11-24T13:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19516#issuecomment-349996",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jmantysalo/posets__add_add_bounds__" to "fd2e636c0a1090c96774afa259138e4d53782f18"



---

archive/issue_events_053787.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-24T13:01:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19516",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19516#event-53787"
}
```
