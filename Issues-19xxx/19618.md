# Issue 19618: Upgrade to Valgrind 3.14.0

archive/issues_019381.json:
```json
{
    "body": "Valgrind 3.14.0 was released on 2018-10-09.\n\n- tarball: https://sourceware.org/ftp/valgrind/valgrind-3.14.0.tar.bz2\n\nOur last upgrade was to Valgrind 3.10.0 in #15586, merged in Sage 6.4.beta5.\n\nThat version would no longer build with recent versions of Sage, as\n[reported by Simon King on sage-devel](https://groups.google.com/d/msg/sage-devel/4F7exZRtw-E/RfqJ7k7gFgAJ).\n\n\n**CC:**  @vbraun @slel\n\n**Keywords:** upgrade, valgrind\n\n**Branch/Commit:** [f71c10143eddde6a45fc8455766aa4c6fc438bca](https://github.com/sagemath/sagetrac-mirror/commit/f71c10143eddde6a45fc8455766aa4c6fc438bca)\n\n**Reviewer:** Simon King\n\n**Author:** Thierry Monteil\n\nIssue created by migration from https://trac.sagemath.org/ticket/19618\n\n",
    "closed_at": "2019-02-18T19:28:57Z",
    "created_at": "2015-11-24T10:46:39Z",
    "labels": [
        "component: packages: experimental",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "Upgrade to Valgrind 3.14.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19618",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
Valgrind 3.14.0 was released on 2018-10-09.

- tarball: https://sourceware.org/ftp/valgrind/valgrind-3.14.0.tar.bz2

Our last upgrade was to Valgrind 3.10.0 in #15586, merged in Sage 6.4.beta5.

That version would no longer build with recent versions of Sage, as
[reported by Simon King on sage-devel](https://groups.google.com/d/msg/sage-devel/4F7exZRtw-E/RfqJ7k7gFgAJ).


**CC:**  @vbraun @slel

**Keywords:** upgrade, valgrind

**Branch/Commit:** [f71c10143eddde6a45fc8455766aa4c6fc438bca](https://github.com/sagemath/sagetrac-mirror/commit/f71c10143eddde6a45fc8455766aa4c6fc438bca)

**Reviewer:** Simon King

**Author:** Thierry Monteil

Issue created by migration from https://trac.sagemath.org/ticket/19618





---

archive/issue_comments_337273.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/upgrade_valgrind](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade_valgrind)",
    "created_at": "2016-07-26T06:49:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337273",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/upgrade_valgrind](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade_valgrind)



---

archive/issue_comments_337274.json:
```json
{
    "body": "**Commit:** [c21bdcaabbe8ef692ee0a24df127b1d9660d5e0c](https://github.com/sagemath/sagetrac-mirror/commit/c21bdcaabbe8ef692ee0a24df127b1d9660d5e0c)",
    "created_at": "2016-07-26T06:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337274",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [c21bdcaabbe8ef692ee0a24df127b1d9660d5e0c](https://github.com/sagemath/sagetrac-mirror/commit/c21bdcaabbe8ef692ee0a24df127b1d9660d5e0c)



---

archive/issue_comments_337275.json:
```json
{
    "body": "<a id='comment:2'></a>\nCompile (on Mac OS X) fails as follows:\n\n```\n[valgrind-3.11.0] m_syscall.c:708:1: error: unknown type name '__private_extern__'\n[valgrind-3.11.0]  __private_extern__ UWord \n[valgrind-3.11.0]  ^\n[valgrind-3.11.0] m_syscall.c:709:1: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'do_syscall_unix_WRK'\n[valgrind-3.11.0]  do_syscall_unix_WRK ( UWord a1, UWord a2, UWord a3, /* rdi, rsi, rdx */\n[valgrind-3.11.0]  ^\n[valgrind-3.11.0] m_syscall.c:732:1: error: unknown type name '__private_extern__'\n[valgrind-3.11.0]  __private_extern__ UWord \n[valgrind-3.11.0]  ^\n[valgrind-3.11.0] m_syscall.c:733:1: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'do_syscall_mach_WRK'\n[valgrind-3.11.0]  do_syscall_mach_WRK ( UWord a1, UWord a2, UWord a3, /* rdi, rsi, rdx */\n[valgrind-3.11.0]  ^\n[valgrind-3.11.0] m_syscall.c: In function 'vgPlain_do_syscall':\n[valgrind-3.11.0] m_syscall.c:1017:10: warning: implicit declaration of function 'do_syscall_unix_WRK' [-Wimplicit-function-declaration]\n[valgrind-3.11.0]           wLO = do_syscall_unix_WRK(a1,a2,a3,a4,a5,a6,a7,a8,\n[valgrind-3.11.0]           ^\n[valgrind-3.11.0] m_syscall.c:1022:10: warning: implicit declaration of function 'do_syscall_mach_WRK' [-Wimplicit-function-declaration]\n[valgrind-3.11.0]           wLO = do_syscall_mach_WRK(a1,a2,a3,a4,a5,a6,a7,a8, \n[valgrind-3.11.0]           ^\n```\nThis appears to explain a solution: http://superuser.com/questions/630674/valgrind-installation-errors-on-osx-10-8\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c21bdcaabbe8ef692ee0a24df127b1d9660d5e0c\">c21bdca</a></td><td><code>Update valgrind to 3.11.0</code></td></tr></table>\n",
    "created_at": "2016-07-26T06:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337275",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
Compile (on Mac OS X) fails as follows:

```
[valgrind-3.11.0] m_syscall.c:708:1: error: unknown type name '__private_extern__'
[valgrind-3.11.0]  __private_extern__ UWord 
[valgrind-3.11.0]  ^
[valgrind-3.11.0] m_syscall.c:709:1: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'do_syscall_unix_WRK'
[valgrind-3.11.0]  do_syscall_unix_WRK ( UWord a1, UWord a2, UWord a3, /* rdi, rsi, rdx */
[valgrind-3.11.0]  ^
[valgrind-3.11.0] m_syscall.c:732:1: error: unknown type name '__private_extern__'
[valgrind-3.11.0]  __private_extern__ UWord 
[valgrind-3.11.0]  ^
[valgrind-3.11.0] m_syscall.c:733:1: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'do_syscall_mach_WRK'
[valgrind-3.11.0]  do_syscall_mach_WRK ( UWord a1, UWord a2, UWord a3, /* rdi, rsi, rdx */
[valgrind-3.11.0]  ^
[valgrind-3.11.0] m_syscall.c: In function 'vgPlain_do_syscall':
[valgrind-3.11.0] m_syscall.c:1017:10: warning: implicit declaration of function 'do_syscall_unix_WRK' [-Wimplicit-function-declaration]
[valgrind-3.11.0]           wLO = do_syscall_unix_WRK(a1,a2,a3,a4,a5,a6,a7,a8,
[valgrind-3.11.0]           ^
[valgrind-3.11.0] m_syscall.c:1022:10: warning: implicit declaration of function 'do_syscall_mach_WRK' [-Wimplicit-function-declaration]
[valgrind-3.11.0]           wLO = do_syscall_mach_WRK(a1,a2,a3,a4,a5,a6,a7,a8, 
[valgrind-3.11.0]           ^
```
This appears to explain a solution: http://superuser.com/questions/630674/valgrind-installation-errors-on-osx-10-8

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c21bdcaabbe8ef692ee0a24df127b1d9660d5e0c">c21bdca</a></td><td><code>Update valgrind to 3.11.0</code></td></tr></table>




---

archive/issue_comments_337276.json:
```json
{
    "body": "<a id='comment:3'></a>\n3.12.0 is out now.",
    "created_at": "2016-11-15T12:04:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337276",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:3'></a>
3.12.0 is out now.



---

archive/issue_comments_337277.json:
```json
{
    "body": "<a id='comment:4'></a>\n`sage --valgrind` crashes with a system valgrind both at 3.11.0 and 3.12.0, and current develop. It looks exactly like\n\nhttps://bugs.kde.org/show_bug.cgi?id=360415\n\nA self-compiled valgrind-3.13.0 does not do this anymore.",
    "created_at": "2017-07-10T14:20:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337277",
    "user": "https://github.com/rwst"
}
```

<a id='comment:4'></a>
`sage --valgrind` crashes with a system valgrind both at 3.11.0 and 3.12.0, and current develop. It looks exactly like

https://bugs.kde.org/show_bug.cgi?id=360415

A self-compiled valgrind-3.13.0 does not do this anymore.



---

archive/issue_comments_337278.json:
```json
{
    "body": "<a id='comment:5'></a>\nOn Debian stretch (32 bit arch), with our current version of valgrind, i get:\n\n```\nchecking for the kernel version... unsupported (4.9.0-3-686)\nconfigure: error: Valgrind works on kernels 2.4, 2.6\nError configuring Valgrind\n```\n\nSo, it is really time to upgrade.",
    "created_at": "2017-08-27T21:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337278",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:5'></a>
On Debian stretch (32 bit arch), with our current version of valgrind, i get:

```
checking for the kernel version... unsupported (4.9.0-3-686)
configure: error: Valgrind works on kernels 2.4, 2.6
Error configuring Valgrind
```

So, it is really time to upgrade.



---

archive/issue_comments_337279.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/upgrade_valgrind](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade_valgrind)\" to \"[u/tmonteil/upgrade_valgrind](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/upgrade_valgrind)\".",
    "created_at": "2017-08-27T21:42:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337279",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

**Changing branch** from "[u/mkoeppe/upgrade_valgrind](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade_valgrind)" to "[u/tmonteil/upgrade_valgrind](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/upgrade_valgrind)".



---

archive/issue_events_061560.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "rename": {
        "from": "Update Valgrind to 3.11.0",
        "to": "Update Valgrind to 3.13.0"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19618#event-61560"
}
```



---

archive/issue_comments_337280.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+Tarball available at : ftp://sourceware.org/pub/valgrind/valgrind-3.13.0.tar.bz2\n``````\n",
    "created_at": "2017-08-27T21:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337280",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+Tarball available at : ftp://sourceware.org/pub/valgrind/valgrind-3.13.0.tar.bz2
``````




---

archive/issue_comments_337281.json:
```json
{
    "body": "**Changing branch** from \"[u/tmonteil/upgrade_valgrind](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/upgrade_valgrind)\" to \"[u/mkoeppe/upgrade_valgrind](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade_valgrind)\".",
    "created_at": "2017-08-27T21:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337281",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

**Changing branch** from "[u/tmonteil/upgrade_valgrind](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/upgrade_valgrind)" to "[u/mkoeppe/upgrade_valgrind](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade_valgrind)".



---

archive/issue_comments_337282.json:
```json
{
    "body": "**Author:** Thierry Monteil",
    "created_at": "2017-08-27T21:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337282",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

**Author:** Thierry Monteil



---

archive/issue_comments_337283.json:
```json
{
    "body": "<a id='comment:8'></a>\nOn Debian stretch 64bit, with gdb packgage uninstalled, spkg-check gets stuck at:\n\n```\n[...]\n[valgrind-3.13.0] ./gdbserver_tests/make_local_links /no/gdb/was/found/at/configure/time\n[valgrind-3.13.0] gdbserver gdb tests suppressed as /no/gdb/was/found/at/configure/time is not executable\n[valgrind-3.13.0] if /usr/bin/perl tests/vg_regtest gdbserver_tests memcheck cachegrind callgrind massif lackey none helgrind drd exp-sgcheck exp-bbv exp-dhat ; then \\\n[valgrind-3.13.0]    tests/post_regtest_checks /opt/sagemath/sage-source/local/var/tmp/sage/build/valgrind-3.13.0/src gdbserver_tests memcheck cachegrind callgrind massif lackey none helgrind drd exp-sgcheck exp-bbv exp-dhat; \\\n[valgrind-3.13.0] else \\\n[valgrind-3.13.0]    tests/post_regtest_checks /opt/sagemath/sage-source/local/var/tmp/sage/build/valgrind-3.13.0/src gdbserver_tests memcheck cachegrind callgrind massif lackey none helgrind drd exp-sgcheck exp-bbv exp-dhat; \\\n[valgrind-3.13.0]    false; \\\n[valgrind-3.13.0] fi\n[valgrind-3.13.0] -- Running  tests in gdbserver_tests -----------------------------------\n[valgrind-3.13.0] hginfo:          (skipping, prereq failed: test -e gdb.eval)\n[valgrind-3.13.0] hgtls:           valgrind   --tool=helgrind --vgdb=yes --vgdb-error=0 --vgdb-prefix=./vgdb-prefix-hgtls -q  ./../none/tests/tls  (progB: ./gdb --quiet -l 60 --nx ../none/tests/tls)\n```\n\nWith gdb installed, i get the following failure in self tests (see attachment).",
    "created_at": "2017-08-28T12:07:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337283",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:8'></a>
On Debian stretch 64bit, with gdb packgage uninstalled, spkg-check gets stuck at:

```
[...]
[valgrind-3.13.0] ./gdbserver_tests/make_local_links /no/gdb/was/found/at/configure/time
[valgrind-3.13.0] gdbserver gdb tests suppressed as /no/gdb/was/found/at/configure/time is not executable
[valgrind-3.13.0] if /usr/bin/perl tests/vg_regtest gdbserver_tests memcheck cachegrind callgrind massif lackey none helgrind drd exp-sgcheck exp-bbv exp-dhat ; then \
[valgrind-3.13.0]    tests/post_regtest_checks /opt/sagemath/sage-source/local/var/tmp/sage/build/valgrind-3.13.0/src gdbserver_tests memcheck cachegrind callgrind massif lackey none helgrind drd exp-sgcheck exp-bbv exp-dhat; \
[valgrind-3.13.0] else \
[valgrind-3.13.0]    tests/post_regtest_checks /opt/sagemath/sage-source/local/var/tmp/sage/build/valgrind-3.13.0/src gdbserver_tests memcheck cachegrind callgrind massif lackey none helgrind drd exp-sgcheck exp-bbv exp-dhat; \
[valgrind-3.13.0]    false; \
[valgrind-3.13.0] fi
[valgrind-3.13.0] -- Running  tests in gdbserver_tests -----------------------------------
[valgrind-3.13.0] hginfo:          (skipping, prereq failed: test -e gdb.eval)
[valgrind-3.13.0] hgtls:           valgrind   --tool=helgrind --vgdb=yes --vgdb-error=0 --vgdb-prefix=./vgdb-prefix-hgtls -q  ./../none/tests/tls  (progB: ./gdb --quiet -l 60 --nx ../none/tests/tls)
```

With gdb installed, i get the following failure in self tests (see attachment).



---

archive/issue_comments_337284.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,6 @@\n-Tarball available at : ftp://sourceware.org/pub/valgrind/valgrind-3.13.0.tar.bz2\n+Valgrind 3.14.0 was released on 2018-10-09.\n+\n+- tarball: https://sourceware.org/ftp/valgrind/valgrind-3.14.0.tar.bz2\n+\n+Our last upgrade was to Valgrind to 3.10.0 in #15586, merged in Sage 6.4.beta5.\n+\n``````\n",
    "created_at": "2019-01-13T22:31:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337284",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,6 @@
-Tarball available at : ftp://sourceware.org/pub/valgrind/valgrind-3.13.0.tar.bz2
+Valgrind 3.14.0 was released on 2018-10-09.
+
+- tarball: https://sourceware.org/ftp/valgrind/valgrind-3.14.0.tar.bz2
+
+Our last upgrade was to Valgrind to 3.10.0 in #15586, merged in Sage 6.4.beta5.
+
``````




---

archive/issue_events_061561.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "rename": {
        "from": "Update Valgrind to 3.13.0",
        "to": "Update Valgrind to 3.14.0"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19618#event-61561"
}
```



---

archive/attachments_020731.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "valgrind-3.13.0.log",
    "asset_url": "tarball://root/attachments/some-uuid/ticket19618/valgrind-3.13.0.log",
    "created_at": "2019-01-13T22:31:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.log",
    "user": "https://github.com/slel"
}
```



---

archive/issue_comments_337285.json:
```json
{
    "body": "<a id='comment:9'></a>\nValgrind 3.14.0 was released on 2018-10-09.\n\nTarball: https://sourceware.org/ftp/valgrind/valgrind-3.14.0.tar.bz2",
    "created_at": "2019-01-13T22:31:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337285",
    "user": "https://github.com/slel"
}
```

<a id='comment:9'></a>
Valgrind 3.14.0 was released on 2018-10-09.

Tarball: https://sourceware.org/ftp/valgrind/valgrind-3.14.0.tar.bz2



---

archive/issue_events_061562.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-01-13T22:31:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19618#event-61562"
}
```



---

archive/issue_comments_337286.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/upgrade_valgrind](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade_valgrind)\" to \"[u/SimonKing/upgrade_valgrind](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/upgrade_valgrind)\".",
    "created_at": "2019-02-15T08:04:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337286",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing branch** from "[u/mkoeppe/upgrade_valgrind](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade_valgrind)" to "[u/SimonKing/upgrade_valgrind](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/upgrade_valgrind)".



---

archive/issue_comments_337287.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2019-02-15T08:06:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337287",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_337288.json:
```json
{
    "body": "<a id='comment:11'></a>\nI upgraded to version 3.14. The package builds and I could use it via `sage --valgrind`. Starting a sage session, computing 2+2, and leaving, results in the following leak summary:\n\n```\n==15848== LEAK SUMMARY:\n==15848==    definitely lost: 10,193 bytes in 5 blocks\n==15848==    indirectly lost: 0 bytes in 0 blocks\n==15848==      possibly lost: 39,322,259 bytes in 27,620 blocks\n==15848==    still reachable: 2,116,195 bytes in 6,282 blocks\n==15848==                       of which reachable via heuristic:\n==15848==                         length64           : 227,192 bytes in 127 blocks\n==15848==                         newarray           : 1,232 bytes in 77 blocks\n==15848==         suppressed: 32 bytes in 1 blocks\n==15848== Reachable blocks (those to which a pointer was found) are not shown.\n==15848== To see them, rerun with: --leak-check=full --show-leak-kinds=all\n==15848== \n==15848== For counts of detected and suppressed errors, rerun with: -v\n==15848== ERROR SUMMARY: 3074 errors from 3074 contexts (suppressed: 44081 from 96)\n```\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b11d30cf62308215be1fc70062fa05459f82e041\">b11d30c</a></td><td><code>Merge branch 'develop' into t/19618/upgrade_valgrind</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f71c10143eddde6a45fc8455766aa4c6fc438bca\">f71c101</a></td><td><code>Upgrade to valgrind-3.14.0</code></td></tr></table>\n",
    "created_at": "2019-02-15T08:06:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337288",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:11'></a>
I upgraded to version 3.14. The package builds and I could use it via `sage --valgrind`. Starting a sage session, computing 2+2, and leaving, results in the following leak summary:

```
==15848== LEAK SUMMARY:
==15848==    definitely lost: 10,193 bytes in 5 blocks
==15848==    indirectly lost: 0 bytes in 0 blocks
==15848==      possibly lost: 39,322,259 bytes in 27,620 blocks
==15848==    still reachable: 2,116,195 bytes in 6,282 blocks
==15848==                       of which reachable via heuristic:
==15848==                         length64           : 227,192 bytes in 127 blocks
==15848==                         newarray           : 1,232 bytes in 77 blocks
==15848==         suppressed: 32 bytes in 1 blocks
==15848== Reachable blocks (those to which a pointer was found) are not shown.
==15848== To see them, rerun with: --leak-check=full --show-leak-kinds=all
==15848== 
==15848== For counts of detected and suppressed errors, rerun with: -v
==15848== ERROR SUMMARY: 3074 errors from 3074 contexts (suppressed: 44081 from 96)
```

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b11d30cf62308215be1fc70062fa05459f82e041">b11d30c</a></td><td><code>Merge branch 'develop' into t/19618/upgrade_valgrind</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f71c10143eddde6a45fc8455766aa4c6fc438bca">f71c101</a></td><td><code>Upgrade to valgrind-3.14.0</code></td></tr></table>




---

archive/issue_comments_337289.json:
```json
{
    "body": "**Changing commit** from \"[c21bdcaabbe8ef692ee0a24df127b1d9660d5e0c](https://github.com/sagemath/sagetrac-mirror/commit/c21bdcaabbe8ef692ee0a24df127b1d9660d5e0c)\" to \"[f71c10143eddde6a45fc8455766aa4c6fc438bca](https://github.com/sagemath/sagetrac-mirror/commit/f71c10143eddde6a45fc8455766aa4c6fc438bca)\".",
    "created_at": "2019-02-15T08:06:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337289",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing commit** from "[c21bdcaabbe8ef692ee0a24df127b1d9660d5e0c](https://github.com/sagemath/sagetrac-mirror/commit/c21bdcaabbe8ef692ee0a24df127b1d9660d5e0c)" to "[f71c10143eddde6a45fc8455766aa4c6fc438bca](https://github.com/sagemath/sagetrac-mirror/commit/f71c10143eddde6a45fc8455766aa4c6fc438bca)".



---

archive/issue_comments_337290.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2019-02-15T08:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337290",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_337291.json:
```json
{
    "body": "<a id='comment:12'></a>\nI guess for an experimental package, the fact that the package builds and can be used constitutes a positive review. Since I merely changed the checksum, I believe I am not author but reviewer.",
    "created_at": "2019-02-15T08:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337291",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:12'></a>
I guess for an experimental package, the fact that the package builds and can be used constitutes a positive review. Since I merely changed the checksum, I believe I am not author but reviewer.



---

archive/issue_comments_337292.json:
```json
{
    "body": "**Reviewer:** Simon King",
    "created_at": "2019-02-15T08:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337292",
    "user": "https://github.com/simon-king-jena"
}
```

**Reviewer:** Simon King



---

archive/issue_events_061563.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "rename": {
        "from": "Update Valgrind to 3.14.0",
        "to": "Upgrade to Valgrind 3.14.0"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19618#event-61563"
}
```



---

archive/issue_comments_337293.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"upgrade, valgrind\".",
    "created_at": "2019-02-15T08:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337293",
    "user": "https://github.com/slel"
}
```

**Changing keywords** from "" to "upgrade, valgrind".



---

archive/issue_comments_337294.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,5 +2,8 @@\n \n - tarball: https://sourceware.org/ftp/valgrind/valgrind-3.14.0.tar.bz2\n \n-Our last upgrade was to Valgrind to 3.10.0 in #15586, merged in Sage 6.4.beta5.\n+Our last upgrade was to Valgrind 3.10.0 in #15586, merged in Sage 6.4.beta5.\n \n+That version would no longer build with recent versions of Sage, as\n+[reported by Simon King on sage-devel](https://groups.google.com/d/msg/sage-devel/4F7exZRtw-E/RfqJ7k7gFgAJ).\n+\n``````\n",
    "created_at": "2019-02-15T08:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337294",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,5 +2,8 @@
 
 - tarball: https://sourceware.org/ftp/valgrind/valgrind-3.14.0.tar.bz2
 
-Our last upgrade was to Valgrind to 3.10.0 in #15586, merged in Sage 6.4.beta5.
+Our last upgrade was to Valgrind 3.10.0 in #15586, merged in Sage 6.4.beta5.
 
+That version would no longer build with recent versions of Sage, as
+[reported by Simon King on sage-devel](https://groups.google.com/d/msg/sage-devel/4F7exZRtw-E/RfqJ7k7gFgAJ).
+
``````




---

archive/issue_comments_337295.json:
```json
{
    "body": "**Changing branch** from \"[u/SimonKing/upgrade_valgrind](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/upgrade_valgrind)\" to \"[f71c10143eddde6a45fc8455766aa4c6fc438bca](https://github.com/sagemath/sagetrac-mirror/commit/f71c10143eddde6a45fc8455766aa4c6fc438bca)\".",
    "created_at": "2019-02-18T19:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19618#issuecomment-337295",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/SimonKing/upgrade_valgrind](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/upgrade_valgrind)" to "[f71c10143eddde6a45fc8455766aa4c6fc438bca](https://github.com/sagemath/sagetrac-mirror/commit/f71c10143eddde6a45fc8455766aa4c6fc438bca)".



---

archive/issue_events_061564.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-18T19:28:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19618",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19618#event-61564"
}
```
