# Issue 19040: rewrite Expression.__nonzero__()

archive/issues_018803.json:
```json
{
    "assignees": [],
    "body": "Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:\n* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows alpha order of lhs and rhs\n* `satisfiable(rel)` attempting simplification/proof, returning `(Yes,example)/False/Undefined`\n* `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n* `holds(rel)`, quick alias of `satisfiable` (later without giving an example)\n* `ex.is_zero(simplify=False)` (default) calling the fast `bool(ex==0)`\n* `ex.is_zero(simplify=True)` attempting simplification/proof by calling `ex==0`.holds()\n* `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n\nThis ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `holds()` and `ex.is_zero(simplify=True)`.\n\nSee also #19162.\n\nCC:  @nexttime @behackl @kcrisman @eviatarbach\n\nComponent: **symbolics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19040_\n\n",
    "created_at": "2015-08-16T06:07:21Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20info"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "rewrite Expression.__nonzero__()",
    "type": "issue",
    "updated_at": "2022-12-29T01:33:44Z",
    "url": "https://github.com/sagemath/sage/issues/19040",
    "user": "https://github.com/rwst"
}
```
Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:
* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows alpha order of lhs and rhs
* `satisfiable(rel)` attempting simplification/proof, returning `(Yes,example)/False/Undefined`
* `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
* `holds(rel)`, quick alias of `satisfiable` (later without giving an example)
* `ex.is_zero(simplify=False)` (default) calling the fast `bool(ex==0)`
* `ex.is_zero(simplify=True)` attempting simplification/proof by calling `ex==0`.holds()
* `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)

This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `holds()` and `ex.is_zero(simplify=True)`.

See also #19162.

CC:  @nexttime @behackl @kcrisman @eviatarbach

Component: **symbolics**

_Issue created by migration from https://trac.sagemath.org/ticket/19040_





---

archive/issue_events_271544.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-08-16T06:07:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19040#event-271544"
}
```



---

archive/issue_events_271545.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-08-16T06:07:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19040#event-271545"
}
```



---

archive/issue_events_271546.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-08-16T06:07:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19040#event-271546"
}
```



---

archive/issue_events_271547.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-08-16T06:07:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19040#event-271547"
}
```



---

archive/issue_comments_268246.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nBe careful that in a lot of Sage place there are\n\n```\ndef my_generic_function(x):\n    if not x:\n        ...\n    else:\n        ...\n```\nor with `not x` replaced by `x.is_zero()`.\n\nSo this change would also implies to change all of these in a uniform way.",
    "created_at": "2015-08-16T09:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268246",
    "user": "https://github.com/videlec"
}
```

<div id="comment:1" align="right">comment:1</div>

Be careful that in a lot of Sage place there are

```
def my_generic_function(x):
    if not x:
        ...
    else:
        ...
```
or with `not x` replaced by `x.is_zero()`.

So this change would also implies to change all of these in a uniform way.



---

archive/issue_comments_268247.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nReplying to [@videlec](#comment:1):\n> `    if not x:`\n\n`bool(not x)` calls `PyObject_IsTrue` which calls `Expression.__nonzero__` which atm tries to prove that `x` is nonzero\n> or with `not x` replaced by `x.is_zero()`.\n\nThis calls `PyObject_IsTrue` as well.\n> So this change would also implies to change all of these in a uniform way.\n\nRight, `Expression.__nonzero__` will then call `x.is_trivial_zero()` and everyone who wants a proof needs a dfferent method.",
    "created_at": "2015-08-17T05:30:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268247",
    "user": "https://github.com/rwst"
}
```

<div id="comment:2" align="right">comment:2</div>

Replying to [@videlec](#comment:1):
> `    if not x:`

`bool(not x)` calls `PyObject_IsTrue` which calls `Expression.__nonzero__` which atm tries to prove that `x` is nonzero
> or with `not x` replaced by `x.is_zero()`.

This calls `PyObject_IsTrue` as well.
> So this change would also implies to change all of these in a uniform way.

Right, `Expression.__nonzero__` will then call `x.is_trivial_zero()` and everyone who wants a proof needs a dfferent method.



---

archive/issue_comments_268248.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nIt's not too bad. Catching `!=` and `==` in `__nonzero__` and comparing trivially yields only a few dozen doctest fails in `symbolic` and `calculus`, mainly from `bool(...)`. No fail in `src/doc`.",
    "created_at": "2015-08-17T08:45:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268248",
    "user": "https://github.com/rwst"
}
```

<div id="comment:3" align="right">comment:3</div>

It's not too bad. Catching `!=` and `==` in `__nonzero__` and comparing trivially yields only a few dozen doctest fails in `symbolic` and `calculus`, mainly from `bool(...)`. No fail in `src/doc`.



---

archive/issue_comments_268249.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI agree that the change would be actually good (for the reason why you created this ticket). \n\nThoug, for symbolic expression we want to create equations and check their validity\n\n```\nsage: cos(x)**2 + sin(x)**2 == 1\ncos(x) == sin(x)\nsage: bool(_)\nTrue\n```\nThe above will not be enough anymore. What would be the new way of checking? This needs to be emphasized a lot in the documentation as it is backward incompatible. And I guess it is worth a thread on sage-devel. Not necessarily right now, it is always good to have concrete propositions.\n\nYou should also have a look to `sage/tests/*` where I am sure some of the things are broken.",
    "created_at": "2015-08-17T09:03:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268249",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

I agree that the change would be actually good (for the reason why you created this ticket). 

Thoug, for symbolic expression we want to create equations and check their validity

```
sage: cos(x)**2 + sin(x)**2 == 1
cos(x) == sin(x)
sage: bool(_)
True
```
The above will not be enough anymore. What would be the new way of checking? This needs to be emphasized a lot in the documentation as it is backward incompatible. And I guess it is worth a thread on sage-devel. Not necessarily right now, it is always good to have concrete propositions.

You should also have a look to `sage/tests/*` where I am sure some of the things are broken.



---

archive/issue_comments_268250.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@videlec](#comment:4):\n> Thoug, for symbolic expression we want to create equations and check their validity\n> \n> ```\n> sage: cos(x)**2 + sin(x)**2 == 1\n> cos(x) == sin(x)\n> sage: bool(_)\n> True\n> ```\n> The above will not be enough anymore. What would be the new way of checking?\n\n\n```\nsage: satisfiable(_)\nTrue\n```\nThis is a long-standing omission, and it would resolve conceptual problems of #17700. It would use #19000 and, if that finds no solution, Maxima as before. SMT solvers can also give a satisfying `x` in case of satisfiability, but no full solution which is the task of `solve`.\n\n> This needs to be emphasized a lot in the documentation as it is backward incompatible. And I guess it is worth a thread on sage-devel. Not necessarily right now, it is always good to have concrete propositions.\n> \n> You should also have a look to `sage/tests/*` where I am sure some of the things are broken.\n\nThree fails.",
    "created_at": "2015-08-17T13:40:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268250",
    "user": "https://github.com/rwst"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@videlec](#comment:4):
> Thoug, for symbolic expression we want to create equations and check their validity
> 
> ```
> sage: cos(x)**2 + sin(x)**2 == 1
> cos(x) == sin(x)
> sage: bool(_)
> True
> ```
> The above will not be enough anymore. What would be the new way of checking?


```
sage: satisfiable(_)
True
```
This is a long-standing omission, and it would resolve conceptual problems of #17700. It would use #19000 and, if that finds no solution, Maxima as before. SMT solvers can also give a satisfying `x` in case of satisfiability, but no full solution which is the task of `solve`.

> This needs to be emphasized a lot in the documentation as it is backward incompatible. And I guess it is worth a thread on sage-devel. Not necessarily right now, it is always good to have concrete propositions.
> 
> You should also have a look to `sage/tests/*` where I am sure some of the things are broken.

Three fails.



---

archive/issue_comments_268251.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@rwst](#comment:5):\n> It would use #19000\n\nCould. #19000 is not a necessity.",
    "created_at": "2015-08-17T15:18:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268251",
    "user": "https://github.com/rwst"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@rwst](#comment:5):
> It would use #19000

Could. #19000 is not a necessity.



---

archive/issue_comments_268252.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nActually, proving equality would need quantifiers like:\n\n```\nsage: satisfiable(_, for_all(x))\nTrue\n```",
    "created_at": "2015-08-17T15:43:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268252",
    "user": "https://github.com/rwst"
}
```

<div id="comment:7" align="right">comment:7</div>

Actually, proving equality would need quantifiers like:

```
sage: satisfiable(_, for_all(x))
True
```



---

archive/issue_comments_268253.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,6 @@\n-Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. Instead of `Expression.__nonzero__` this ticket should provide a different interface for cases requiring simplification/proof.\n+Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. This ticket should provide a different interface for cases requiring simplification/proof:\n+* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=\n+* `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n+* `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n+* `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n+\n``````\n",
    "created_at": "2015-09-08T07:36:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268253",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,6 @@
-Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. Instead of `Expression.__nonzero__` this ticket should provide a different interface for cases requiring simplification/proof.
+Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. This ticket should provide a different interface for cases requiring simplification/proof:
+* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=
+* `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
+* `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
+* `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
+
``````




---

archive/issue_comments_268254.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. This ticket should provide a different interface for cases requiring simplification/proof:\n * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=\n * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n+* `truth(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`\n * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n``````\n",
    "created_at": "2015-09-08T08:17:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268254",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
 Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. This ticket should provide a different interface for cases requiring simplification/proof:
 * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=
 * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
+* `truth(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`
 * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
``````




---

archive/issue_comments_268255.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,8 @@\n-Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. This ticket should provide a different interface for cases requiring simplification/proof:\n+Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. We should provide a different interface for cases requiring simplification/proof:\n * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=\n * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n * `truth(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`\n * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable(rel)`.\n``````\n",
    "created_at": "2015-09-08T08:22:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268255",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,8 @@
-Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. This ticket should provide a different interface for cases requiring simplification/proof:
+Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. We should provide a different interface for cases requiring simplification/proof:
 * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=
 * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
 * `truth(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`
 * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable(rel)`.
``````




---

archive/issue_comments_268256.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,6 @@\n * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable(rel)`.\n+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()`.\n+\n+See also #19162.\n``````\n",
    "created_at": "2015-09-08T08:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268256",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,6 @@
 * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable(rel)`.
+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()`.
+
+See also #19162.
``````




---

archive/issue_comments_268257.json:
```json
{
    "body": "Dependencies: **#18980**",
    "created_at": "2015-09-08T13:01:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268257",
    "user": "https://github.com/rwst"
}
```

Dependencies: **#18980**



---

archive/issue_comments_268258.json:
```json
{
    "body": "Branch: **[u/rws/defuse_bool_x__0__performance_bomb](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/defuse_bool_x__0__performance_bomb)**",
    "created_at": "2015-09-08T13:14:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268258",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/defuse_bool_x__0__performance_bomb](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/defuse_bool_x__0__performance_bomb)**



---

archive/issue_comments_268259.json:
```json
{
    "body": "Commit: **[`d94dec4`](https://github.com/sagemath/sagetrac-mirror/commit/d94dec443790faf1eb48230edb3ae1dc6c9c6eb6)**",
    "created_at": "2015-09-08T15:10:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268259",
    "user": "https://github.com/rwst"
}
```

Commit: **[`d94dec4`](https://github.com/sagemath/sagetrac-mirror/commit/d94dec443790faf1eb48230edb3ae1dc6c9c6eb6)**



---

archive/issue_comments_268260.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2015-09-08T15:10:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268260",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_comments_268261.json:
```json
{
    "body": "Changed dependencies from **#18980** to none",
    "created_at": "2015-09-08T15:10:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268261",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **#18980** to none



---

archive/issue_comments_268262.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d94dec443790faf1eb48230edb3ae1dc6c9c6eb6\"><code>d94dec4</code></a></td><td><code>19040: draft, can't go further without 18980</code></td></tr></table>\n",
    "created_at": "2015-09-08T15:10:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268262",
    "user": "https://github.com/rwst"
}
```

<div id="comment:14"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d94dec443790faf1eb48230edb3ae1dc6c9c6eb6"><code>d94dec4</code></a></td><td><code>19040: draft, can't go further without 18980</code></td></tr></table>




---

archive/issue_comments_268263.json:
```json
{
    "body": "Changed branch from **[u/rws/defuse_bool_x__0__performance_bomb](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/defuse_bool_x__0__performance_bomb)** to **[u/rws/19040](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/19040)**",
    "created_at": "2015-09-08T15:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268263",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/defuse_bool_x__0__performance_bomb](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/defuse_bool_x__0__performance_bomb)** to **[u/rws/19040](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/19040)**



---

archive/issue_comments_268264.json:
```json
{
    "body": "Changed commit from **[`d94dec4`](https://github.com/sagemath/sagetrac-mirror/commit/d94dec443790faf1eb48230edb3ae1dc6c9c6eb6)** to **[`800ec56`](https://github.com/sagemath/sagetrac-mirror/commit/800ec56b0b930eb8a5b966c5871dc5e76724acb0)**",
    "created_at": "2015-09-09T08:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268264",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d94dec4`](https://github.com/sagemath/sagetrac-mirror/commit/d94dec443790faf1eb48230edb3ae1dc6c9c6eb6)** to **[`800ec56`](https://github.com/sagemath/sagetrac-mirror/commit/800ec56b0b930eb8a5b966c5871dc5e76724acb0)**



---

archive/issue_comments_268265.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f52dbd2ae18b5d0bc7cc322fc9c4aa2ebe83ec20\"><code>f52dbd2</code></a></td><td><code>missing void declaration of Cython function causes unexpected crashes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f67f47f8cdb2448dafa81dec4d95a66ad10462d3\"><code>f67f47f</code></a></td><td><code>19040 uncovers hidden calls of Expression.__nonzero__, fixed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38e983bf232704b44bf3a4b217240d2bbf1bc350\"><code>38e983b</code></a></td><td><code>19040: handle numerics together with constants</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/800ec56b0b930eb8a5b966c5871dc5e76724acb0\"><code>800ec56</code></a></td><td><code>19040: draft3</code></td></tr></table>\n",
    "created_at": "2015-09-09T08:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268265",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f52dbd2ae18b5d0bc7cc322fc9c4aa2ebe83ec20"><code>f52dbd2</code></a></td><td><code>missing void declaration of Cython function causes unexpected crashes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f67f47f8cdb2448dafa81dec4d95a66ad10462d3"><code>f67f47f</code></a></td><td><code>19040 uncovers hidden calls of Expression.__nonzero__, fixed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38e983bf232704b44bf3a4b217240d2bbf1bc350"><code>38e983b</code></a></td><td><code>19040: handle numerics together with constants</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/800ec56b0b930eb8a5b966c5871dc5e76724acb0"><code>800ec56</code></a></td><td><code>19040: draft3</code></td></tr></table>




---

archive/issue_comments_268266.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. We should provide a different interface for cases requiring simplification/proof:\n * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=\n * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n-* `truth(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`\n+* `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`\n * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n``````\n",
    "created_at": "2015-09-14T06:05:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268266",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. We should provide a different interface for cases requiring simplification/proof:
 * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=
 * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
-* `truth(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`
+* `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`
 * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
``````




---

archive/issue_comments_268267.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n-Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. We should provide a different interface for cases requiring simplification/proof:\n-* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=\n+Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:\n+* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows the print order of lhs and rhs\n * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n * `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`\n * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()`.\n+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()` and `ex.holds()`.\n \n See also #19162.\n``````\n",
    "created_at": "2015-09-16T06:01:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268267",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
-Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. We should provide a different interface for cases requiring simplification/proof:
-* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=
+Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:
+* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows the print order of lhs and rhs
 * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
 * `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`
 * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()`.
+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()` and `ex.holds()`.
 
 See also #19162.
``````




---

archive/issue_comments_268268.json:
```json
{
    "body": "Changed commit from **[`800ec56`](https://github.com/sagemath/sagetrac-mirror/commit/800ec56b0b930eb8a5b966c5871dc5e76724acb0)** to **[`adab9a7`](https://github.com/sagemath/sagetrac-mirror/commit/adab9a7ea45475ab4c95b310280cda2d43848e48)**",
    "created_at": "2015-09-16T08:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268268",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`800ec56`](https://github.com/sagemath/sagetrac-mirror/commit/800ec56b0b930eb8a5b966c5871dc5e76724acb0)** to **[`adab9a7`](https://github.com/sagemath/sagetrac-mirror/commit/adab9a7ea45475ab4c95b310280cda2d43848e48)**



---

archive/issue_comments_268269.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a3a4d27d0d0e764f00f837f3da6e04fb1d1f9f3\"><code>7a3a4d2</code></a></td><td><code>19040: infinity handled by Pynac</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c6a8aa97ada525092f1c2b491f1254976572740\"><code>7c6a8aa</code></a></td><td><code>19040: contradicts() now uses satisfiable()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d4e2a167b6048c3fe11de0a961e1aa5f3cac94a\"><code>0d4e2a1</code></a></td><td><code>19040: prep satisfiable()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8971ed16cb89658b0b890cca746353a47481773\"><code>d8971ed</code></a></td><td><code>Merge branch 'develop' into t/19040/19040</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/adab9a7ea45475ab4c95b310280cda2d43848e48\"><code>adab9a7</code></a></td><td><code>19040: draft4</code></td></tr></table>\n",
    "created_at": "2015-09-16T08:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268269",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a3a4d27d0d0e764f00f837f3da6e04fb1d1f9f3"><code>7a3a4d2</code></a></td><td><code>19040: infinity handled by Pynac</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c6a8aa97ada525092f1c2b491f1254976572740"><code>7c6a8aa</code></a></td><td><code>19040: contradicts() now uses satisfiable()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d4e2a167b6048c3fe11de0a961e1aa5f3cac94a"><code>0d4e2a1</code></a></td><td><code>19040: prep satisfiable()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8971ed16cb89658b0b890cca746353a47481773"><code>d8971ed</code></a></td><td><code>Merge branch 'develop' into t/19040/19040</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/adab9a7ea45475ab4c95b310280cda2d43848e48"><code>adab9a7</code></a></td><td><code>19040: draft4</code></td></tr></table>




---

archive/issue_comments_268270.json:
```json
{
    "body": "Dependencies: **#17984**",
    "created_at": "2015-09-20T13:48:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268270",
    "user": "https://github.com/rwst"
}
```

Dependencies: **#17984**



---

archive/issue_events_271548.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-09-20T15:08:19Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "title_is": "rewrite Expression.__nonzero__()",
    "title_was": "defuse bool(x!=0) performance bomb",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19040#event-271548"
}
```



---

archive/issue_comments_268271.json:
```json
{
    "body": "Changed dependencies from **#17984** to **#19256**",
    "created_at": "2015-09-20T15:08:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268271",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **#17984** to **#19256**



---

archive/issue_comments_268272.json:
```json
{
    "body": "Changed branch from **[u/rws/19040](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/19040)** to **[u/rws/19040-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/19040-1)**",
    "created_at": "2015-09-20T15:33:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268272",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/19040](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/19040)** to **[u/rws/19040-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/19040-1)**



---

archive/issue_comments_268273.json:
```json
{
    "body": "Changed dependencies from **#19256** to none",
    "created_at": "2015-09-21T13:56:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268273",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **#19256** to none



---

archive/issue_comments_268274.json:
```json
{
    "body": "Changed commit from **[`adab9a7`](https://github.com/sagemath/sagetrac-mirror/commit/adab9a7ea45475ab4c95b310280cda2d43848e48)** to **[`5f4ffc0`](https://github.com/sagemath/sagetrac-mirror/commit/5f4ffc0b8929f971c649339ce451189ce6d8698d)**",
    "created_at": "2015-09-21T13:56:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268274",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[`adab9a7`](https://github.com/sagemath/sagetrac-mirror/commit/adab9a7ea45475ab4c95b310280cda2d43848e48)** to **[`5f4ffc0`](https://github.com/sagemath/sagetrac-mirror/commit/5f4ffc0b8929f971c649339ce451189ce6d8698d)**



---

archive/issue_comments_268275.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nIt may not be possible to get the desired behaviour in the `structure/parent.pyx` doctests, so we oblige `Parent.__contains__` by throwing an exception if `lhs-rhs` contains inexact ring elements. This way inclusion in those rings (i.e., `pi in CC == True`) is always guaranteed as before.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f4ffc0b8929f971c649339ce451189ce6d8698d\"><code>5f4ffc0</code></a></td><td><code>19040: draft</code></td></tr></table>\n",
    "created_at": "2015-09-21T13:56:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268275",
    "user": "https://github.com/rwst"
}
```

<div id="comment:23" align="right">comment:23</div>

It may not be possible to get the desired behaviour in the `structure/parent.pyx` doctests, so we oblige `Parent.__contains__` by throwing an exception if `lhs-rhs` contains inexact ring elements. This way inclusion in those rings (i.e., `pi in CC == True`) is always guaranteed as before.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f4ffc0b8929f971c649339ce451189ce6d8698d"><code>5f4ffc0</code></a></td><td><code>19040: draft</code></td></tr></table>




---

archive/issue_comments_268276.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nA small remark: From the documentation of the method `holds`\n\n```\nIf Sage knows exactly that the relation is\nundecidable it will throw an ``AttributeError``.\n```\nFor **one** relation there **always** is an algorithm which is either `return True` or `return False`. What is not possible is to design an algorithm whose input is an equation and answers the validity of the input. Your sentence makes no sense. A right formulation would be\n\n```\nIf Sage does not know if the equation is valid it will\nthrow a ``NotImplementedError``. Note that the validity\nof equations is an undecidable problem. Hence there will\nalways be instances for which such error is raised.\n```\n(`AttributeError` makes no sense here).",
    "created_at": "2015-09-21T14:12:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268276",
    "user": "https://github.com/videlec"
}
```

<div id="comment:24" align="right">comment:24</div>

A small remark: From the documentation of the method `holds`

```
If Sage knows exactly that the relation is
undecidable it will throw an ``AttributeError``.
```
For **one** relation there **always** is an algorithm which is either `return True` or `return False`. What is not possible is to design an algorithm whose input is an equation and answers the validity of the input. Your sentence makes no sense. A right formulation would be

```
If Sage does not know if the equation is valid it will
throw a ``NotImplementedError``. Note that the validity
of equations is an undecidable problem. Hence there will
always be instances for which such error is raised.
```
(`AttributeError` makes no sense here).



---

archive/issue_comments_268277.json:
```json
{
    "body": "Changed branch from **[u/rws/19040-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/19040-1)** to **[u/rws/19040-2](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/19040-2)**",
    "created_at": "2015-09-23T16:17:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268277",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/19040-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/19040-1)** to **[u/rws/19040-2](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/19040-2)**



---

archive/issue_events_271549.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-09-23T16:19:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19040#event-271549"
}
```



---

archive/issue_comments_268278.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThis should be it. Please review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd2e723bec0a895dc9b8138ddca7940fa020f8de\"><code>fd2e723</code></a></td><td><code>19040: core of rewrite Expression.__nonzero__()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a0c829199b6e4bedff3095f218ca77eca509b76\"><code>5a0c829</code></a></td><td><code>code changes in consequence of 19040</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdd148a50b31610942b21f34d36facfff892246e\"><code>fdd148a</code></a></td><td><code>19040: doctest changes</code></td></tr></table>\n",
    "created_at": "2015-09-23T16:19:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268278",
    "user": "https://github.com/rwst"
}
```

<div id="comment:26" align="right">comment:26</div>

This should be it. Please review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd2e723bec0a895dc9b8138ddca7940fa020f8de"><code>fd2e723</code></a></td><td><code>19040: core of rewrite Expression.__nonzero__()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a0c829199b6e4bedff3095f218ca77eca509b76"><code>5a0c829</code></a></td><td><code>code changes in consequence of 19040</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdd148a50b31610942b21f34d36facfff892246e"><code>fdd148a</code></a></td><td><code>19040: doctest changes</code></td></tr></table>




---

archive/issue_comments_268279.json:
```json
{
    "body": "Changed commit from **[`5f4ffc0`](https://github.com/sagemath/sagetrac-mirror/commit/5f4ffc0b8929f971c649339ce451189ce6d8698d)** to **[`fdd148a`](https://github.com/sagemath/sagetrac-mirror/commit/fdd148a50b31610942b21f34d36facfff892246e)**",
    "created_at": "2015-09-23T16:19:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268279",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[`5f4ffc0`](https://github.com/sagemath/sagetrac-mirror/commit/5f4ffc0b8929f971c649339ce451189ce6d8698d)** to **[`fdd148a`](https://github.com/sagemath/sagetrac-mirror/commit/fdd148a50b31610942b21f34d36facfff892246e)**



---

archive/issue_comments_268280.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,10 @@\n Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:\n * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows the print order of lhs and rhs\n+* `rel.is_zero(simplify=False)` (default) calling the fast `bool(rel)`\n+* `rel.is_zero(simplify=True)` attempting simplification/proof\n * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n+* `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n * `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`\n-* `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()` and `ex.holds()`.\n``````\n",
    "created_at": "2015-09-24T06:20:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268280",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,10 @@
 Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:
 * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows the print order of lhs and rhs
+* `rel.is_zero(simplify=False)` (default) calling the fast `bool(rel)`
+* `rel.is_zero(simplify=True)` attempting simplification/proof
 * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
+* `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
 * `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`
-* `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
 This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()` and `ex.holds()`.
``````




---

archive/issue_comments_268281.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,6 +7,6 @@\n * `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()` and `ex.holds()`.\n+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.is_zero(simplify=True)`.\n \n See also #19162.\n``````\n",
    "created_at": "2015-09-24T06:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268281",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,6 +7,6 @@
 * `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()` and `ex.holds()`.
+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.is_zero(simplify=True)`.
 
 See also #19162.
``````




---

archive/issue_events_271550.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-09-26T07:09:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19040#event-271550"
}
```



---

archive/issue_events_271551.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-09-26T07:09:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19040#event-271551"
}
```



---

archive/issue_comments_268282.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,12 +1,12 @@\n Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:\n-* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows the print order of lhs and rhs\n-* `rel.is_zero(simplify=False)` (default) calling the fast `bool(rel)`\n-* `rel.is_zero(simplify=True)` attempting simplification/proof\n+* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows alpha order of lhs and rhs\n * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n-* `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`\n+* `is(rel)` attempting simplification/proof, returning `True`/`False`, throwing `NotImplementedError` \n+* `ex.is_zero(simplify=False)` (default) calling the fast `bool(ex==0)`\n+* `ex.is_zero(simplify=True)` attempting simplification/proof\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.is_zero(simplify=True)`.\n+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `is()` and `ex.is_zero(simplify=True)`.\n \n See also #19162.\n``````\n",
    "created_at": "2015-09-26T07:09:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268282",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,12 +1,12 @@
 Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:
-* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows the print order of lhs and rhs
-* `rel.is_zero(simplify=False)` (default) calling the fast `bool(rel)`
-* `rel.is_zero(simplify=True)` attempting simplification/proof
+* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows alpha order of lhs and rhs
 * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
 * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
-* `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`
+* `is(rel)` attempting simplification/proof, returning `True`/`False`, throwing `NotImplementedError` 
+* `ex.is_zero(simplify=False)` (default) calling the fast `bool(ex==0)`
+* `ex.is_zero(simplify=True)` attempting simplification/proof
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.is_zero(simplify=True)`.
+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `is()` and `ex.is_zero(simplify=True)`.
 
 See also #19162.
``````




---

archive/issue_comments_268283.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f30fe23478c3985625f0050c6de742c28a05cf15\"><code>f30fe23</code></a></td><td><code>Merge branch 'develop' into t/19040/19040-2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba8824e7c84d81f87bb3969bb831003057c48fbd\"><code>ba8824e</code></a></td><td><code>19040: add dedicated is_zero()</code></td></tr></table>\n",
    "created_at": "2015-09-27T06:46:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268283",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f30fe23478c3985625f0050c6de742c28a05cf15"><code>f30fe23</code></a></td><td><code>Merge branch 'develop' into t/19040/19040-2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba8824e7c84d81f87bb3969bb831003057c48fbd"><code>ba8824e</code></a></td><td><code>19040: add dedicated is_zero()</code></td></tr></table>




---

archive/issue_comments_268284.json:
```json
{
    "body": "Changed commit from **[`fdd148a`](https://github.com/sagemath/sagetrac-mirror/commit/fdd148a50b31610942b21f34d36facfff892246e)** to **[`ba8824e`](https://github.com/sagemath/sagetrac-mirror/commit/ba8824e7c84d81f87bb3969bb831003057c48fbd)**",
    "created_at": "2015-09-27T06:46:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268284",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fdd148a`](https://github.com/sagemath/sagetrac-mirror/commit/fdd148a50b31610942b21f34d36facfff892246e)** to **[`ba8824e`](https://github.com/sagemath/sagetrac-mirror/commit/ba8824e7c84d81f87bb3969bb831003057c48fbd)**



---

archive/issue_comments_268285.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,11 +2,11 @@\n * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows alpha order of lhs and rhs\n * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n-* `is(rel)` attempting simplification/proof, returning `True`/`False`, throwing `NotImplementedError` \n+* `holds(rel)` attempting simplification/proof, returning `True`/`False`, throwing `NotImplementedError` \n * `ex.is_zero(simplify=False)` (default) calling the fast `bool(ex==0)`\n-* `ex.is_zero(simplify=True)` attempting simplification/proof\n+* `ex.is_zero(simplify=True)` attempting simplification/proof by calling `ex==0`.holds()\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `is()` and `ex.is_zero(simplify=True)`.\n+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `holds()` and `ex.is_zero(simplify=True)`.\n \n See also #19162.\n``````\n",
    "created_at": "2015-09-27T06:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268285",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,11 +2,11 @@
 * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows alpha order of lhs and rhs
 * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
 * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
-* `is(rel)` attempting simplification/proof, returning `True`/`False`, throwing `NotImplementedError` 
+* `holds(rel)` attempting simplification/proof, returning `True`/`False`, throwing `NotImplementedError` 
 * `ex.is_zero(simplify=False)` (default) calling the fast `bool(ex==0)`
-* `ex.is_zero(simplify=True)` attempting simplification/proof
+* `ex.is_zero(simplify=True)` attempting simplification/proof by calling `ex==0`.holds()
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `is()` and `ex.is_zero(simplify=True)`.
+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `holds()` and `ex.is_zero(simplify=True)`.
 
 See also #19162.
``````




---

archive/issue_events_271552.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-09-27T06:47:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19040#event-271552"
}
```



---

archive/issue_events_271553.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-09-27T06:47:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19040#event-271553"
}
```



---

archive/issue_comments_268286.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/857dc9c5f4e390faaacebb77bb4f60162aebd805\"><code>857dc9c</code></a></td><td><code>19040: add dedicated is_zero()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/595080cb5297e6d66471137c9d438b97a4f01c3e\"><code>595080c</code></a></td><td><code>Merge branch 'u/rws/19040-2' of trac.sagemath.org:sage into t/19040/19040-2</code></td></tr></table>\n",
    "created_at": "2015-09-27T06:51:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268286",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/857dc9c5f4e390faaacebb77bb4f60162aebd805"><code>857dc9c</code></a></td><td><code>19040: add dedicated is_zero()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/595080cb5297e6d66471137c9d438b97a4f01c3e"><code>595080c</code></a></td><td><code>Merge branch 'u/rws/19040-2' of trac.sagemath.org:sage into t/19040/19040-2</code></td></tr></table>




---

archive/issue_comments_268287.json:
```json
{
    "body": "Changed commit from **[`ba8824e`](https://github.com/sagemath/sagetrac-mirror/commit/ba8824e7c84d81f87bb3969bb831003057c48fbd)** to **[`595080c`](https://github.com/sagemath/sagetrac-mirror/commit/595080cb5297e6d66471137c9d438b97a4f01c3e)**",
    "created_at": "2015-09-27T06:51:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268287",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ba8824e`](https://github.com/sagemath/sagetrac-mirror/commit/ba8824e7c84d81f87bb3969bb831003057c48fbd)** to **[`595080c`](https://github.com/sagemath/sagetrac-mirror/commit/595080cb5297e6d66471137c9d438b97a4f01c3e)**



---

archive/issue_comments_268288.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nPatchbot failures in hyperbolic space.",
    "created_at": "2015-10-15T05:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268288",
    "user": "https://github.com/rwst"
}
```

<div id="comment:33" align="right">comment:33</div>

Patchbot failures in hyperbolic space.



---

archive/issue_events_271554.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-15T05:52:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19040#event-271554"
}
```



---

archive/issue_events_271555.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-15T05:52:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19040#event-271555"
}
```



---

archive/issue_events_271556.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-16T15:50:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19040#event-271556"
}
```



---

archive/issue_events_271557.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2015-10-16T15:50:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19040#event-271557"
}
```



---

archive/issue_comments_268289.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nThis code cannot be separated from #19312 so I included it there. I'll let this ticket stay here for the description unless someone objects.",
    "created_at": "2015-10-16T15:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268289",
    "user": "https://github.com/rwst"
}
```

<div id="comment:34" align="right">comment:34</div>

This code cannot be separated from #19312 so I included it there. I'll let this ticket stay here for the description unless someone objects.



---

archive/issue_comments_268290.json:
```json
{
    "body": "Changed branch from **[u/rws/19040-2](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/19040-2)** to none",
    "created_at": "2015-10-16T15:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268290",
    "user": "https://github.com/rwst"
}
```

Changed branch from **[u/rws/19040-2](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/19040-2)** to none



---

archive/issue_comments_268291.json:
```json
{
    "body": "Changed commit from **[`595080c`](https://github.com/sagemath/sagetrac-mirror/commit/595080cb5297e6d66471137c9d438b97a4f01c3e)** to none",
    "created_at": "2015-10-16T15:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268291",
    "user": "https://github.com/rwst"
}
```

Changed commit from **[`595080c`](https://github.com/sagemath/sagetrac-mirror/commit/595080cb5297e6d66471137c9d438b97a4f01c3e)** to none



---

archive/issue_comments_268292.json:
```json
{
    "body": "Changed author from **Ralf Stephan** to none",
    "created_at": "2015-10-16T15:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268292",
    "user": "https://github.com/rwst"
}
```

Changed author from **Ralf Stephan** to none



---

archive/issue_comments_268293.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@rwst](#comment:34):\n> This code cannot be separated from #19312\n\nPlease explain why.",
    "created_at": "2015-10-16T17:10:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268293",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@rwst](#comment:34):
> This code cannot be separated from #19312

Please explain why.



---

archive/issue_comments_268294.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@jdemeyer](#comment:35):\n> Replying to [@rwst](#comment:34):\n> > This code cannot be separated from #19312\n\n> \n> Please explain why.\n\nCorrection: an advanced version of this code cannot be separated from #19312. So, this is already obsolete. If, however, #19312 merge is not in the forseeable future I'll consider presenting this branch for review again.",
    "created_at": "2015-10-17T07:47:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268294",
    "user": "https://github.com/rwst"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@jdemeyer](#comment:35):
> Replying to [@rwst](#comment:34):
> > This code cannot be separated from #19312

> 
> Please explain why.

Correction: an advanced version of this code cannot be separated from #19312. So, this is already obsolete. If, however, #19312 merge is not in the forseeable future I'll consider presenting this branch for review again.



---

archive/issue_comments_268295.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI would much prefer to separate #19040 from #19312, mainly to make the review easier (reviewing a package upgrade plus a huge number of Sage library changes is difficult).",
    "created_at": "2015-10-17T09:35:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268295",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">comment:37</div>

I would much prefer to separate #19040 from #19312, mainly to make the review easier (reviewing a package upgrade plus a huge number of Sage library changes is difficult).



---

archive/issue_comments_268296.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThis will make it necessary to implement some (fast) functions from Pynac-0.5 in Python to achieve the same result. The two remaining fails are quite demanding.",
    "created_at": "2015-10-17T15:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268296",
    "user": "https://github.com/rwst"
}
```

<div id="comment:38" align="right">comment:38</div>

This will make it necessary to implement some (fast) functions from Pynac-0.5 in Python to achieve the same result. The two remaining fails are quite demanding.



---

archive/issue_comments_268297.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI succeeded to separate #19040 from #19312, so this branch needs rewrite after #19312 is merged.",
    "created_at": "2015-10-19T15:16:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268297",
    "user": "https://github.com/rwst"
}
```

<div id="comment:39" align="right">comment:39</div>

I succeeded to separate #19040 from #19312, so this branch needs rewrite after #19312 is merged.



---

archive/issue_comments_268298.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nWhat would be the difference between the output `NotImplemented` and `Undecidable`!?\n\nAs I already mentioned in [comment 24](#comment:24), it makes few sense that `satisfiable(expr)` returns `Undecidable`. Each formula is either `True` or `False`. I am here only assuming that mathematics are consistent. Of course `satisfiable` can not work for all input and when it can not it should return `NotImplemented`. That being said, some formula `expr` have no proof of their truthness (from Godel), but then I doubt any computer would actually be able to prove it.\n\nIn an ideal world, the function `satisfiable(expr)` would return one of:\n- `(True, example)`\n- `(False, proof)`\n- `NotImplemented`",
    "created_at": "2015-11-27T20:03:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268298",
    "user": "https://github.com/videlec"
}
```

<div id="comment:41" align="right">comment:41</div>

What would be the difference between the output `NotImplemented` and `Undecidable`!?

As I already mentioned in [comment 24](#comment:24), it makes few sense that `satisfiable(expr)` returns `Undecidable`. Each formula is either `True` or `False`. I am here only assuming that mathematics are consistent. Of course `satisfiable` can not work for all input and when it can not it should return `NotImplemented`. That being said, some formula `expr` have no proof of their truthness (from Godel), but then I doubt any computer would actually be able to prove it.

In an ideal world, the function `satisfiable(expr)` would return one of:
- `(True, example)`
- `(False, proof)`
- `NotImplemented`



---

archive/issue_comments_268299.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nother remark: If I understand correctly `satisfiable` would corresponds to a **exists** quantifier for **all** the variables in the formula. While the `holds` would correspond to **for all**. What about something more elaborate such as\n\n```\n  for all x, exists y, for all z  expr(x,y,z)\n```",
    "created_at": "2015-11-27T20:06:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268299",
    "user": "https://github.com/videlec"
}
```

<div id="comment:42" align="right">comment:42</div>

other remark: If I understand correctly `satisfiable` would corresponds to a **exists** quantifier for **all** the variables in the formula. While the `holds` would correspond to **for all**. What about something more elaborate such as

```
  for all x, exists y, for all z  expr(x,y,z)
```



---

archive/issue_comments_268300.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@videlec](#comment:41):\n> What would be the difference between the output `NotImplemented` and `Undecidable`!?\n> \n> As I already mentioned in [comment 24](#comment:24), it makes few sense that `satisfiable(expr)` returns `Undecidable`. Each formula is either `True` or `False`. I am here only assuming that mathematics are consistent. Of course `satisfiable` can not work for all input and when it can not it should return `NotImplemented`. That being said, some formula `expr` have no proof of their truthness (from Godel), but then I doubt any computer would actually be able to prove it.\n\nAgreed if we look at equalities. Inequalities can be undecidable if we know one side has no order relation. I don't know if there could be other reasons. I haven't decided yet if `__nonzero__` should throw an exception for this.\n>`for all x, exists y, for all z  expr(x,y,z)`\n\nSuch will not be in the first versions.",
    "created_at": "2015-11-28T07:18:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268300",
    "user": "https://github.com/rwst"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@videlec](#comment:41):
> What would be the difference between the output `NotImplemented` and `Undecidable`!?
> 
> As I already mentioned in [comment 24](#comment:24), it makes few sense that `satisfiable(expr)` returns `Undecidable`. Each formula is either `True` or `False`. I am here only assuming that mathematics are consistent. Of course `satisfiable` can not work for all input and when it can not it should return `NotImplemented`. That being said, some formula `expr` have no proof of their truthness (from Godel), but then I doubt any computer would actually be able to prove it.

Agreed if we look at equalities. Inequalities can be undecidable if we know one side has no order relation. I don't know if there could be other reasons. I haven't decided yet if `__nonzero__` should throw an exception for this.
>`for all x, exists y, for all z  expr(x,y,z)`

Such will not be in the first versions.



---

archive/issue_comments_268301.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@rwst](#comment:43):\n> Replying to [@videlec](#comment:41):\n> > What would be the difference between the output `NotImplemented` and `Undecidable`!?\n> > \n> > As I already mentioned in [comment 24](#comment:24), it makes few sense that `satisfiable(expr)` returns `Undecidable`. Each formula is either `True` or `False`. I am here only assuming that mathematics are consistent. Of course `satisfiable` can not work for all input and when it can not it should return `NotImplemented`. That being said, some formula `expr` have no proof of their truthness (from Godel), but then I doubt any computer would actually be able to prove it.\n\n> Agreed if we look at equalities. Inequalities can be undecidable if we know one side has no order relation. I don't know if there could be other reasons. I haven't decided yet if `__nonzero__` should throw an exception for this.\n\nWhat do you mean? Do you have an example of such inequality?\n\n> >`for all x, exists y, for all z  expr(x,y,z)`\n\n> Such will not be in the first versions.\n\nBut do you have a syntax in mind for it. It would be cool to not multiply ad libitum the `satisfiable`, `holds`, etc which are exactly the same thing with a choice of quantifiers.",
    "created_at": "2015-11-28T12:17:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268301",
    "user": "https://github.com/videlec"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@rwst](#comment:43):
> Replying to [@videlec](#comment:41):
> > What would be the difference between the output `NotImplemented` and `Undecidable`!?
> > 
> > As I already mentioned in [comment 24](#comment:24), it makes few sense that `satisfiable(expr)` returns `Undecidable`. Each formula is either `True` or `False`. I am here only assuming that mathematics are consistent. Of course `satisfiable` can not work for all input and when it can not it should return `NotImplemented`. That being said, some formula `expr` have no proof of their truthness (from Godel), but then I doubt any computer would actually be able to prove it.

> Agreed if we look at equalities. Inequalities can be undecidable if we know one side has no order relation. I don't know if there could be other reasons. I haven't decided yet if `__nonzero__` should throw an exception for this.

What do you mean? Do you have an example of such inequality?

> >`for all x, exists y, for all z  expr(x,y,z)`

> Such will not be in the first versions.

But do you have a syntax in mind for it. It would be cool to not multiply ad libitum the `satisfiable`, `holds`, etc which are exactly the same thing with a choice of quantifiers.



---

archive/issue_comments_268302.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@videlec](#comment:44):\n> Replying to [@rwst](#comment:43):\n> > Agreed if we look at equalities. Inequalities can be undecidable if we know one side has no order relation. I don't know if there could be other reasons. I haven't decided yet if `__nonzero__` should throw an exception for this.\n\n> \n> What do you mean? Do you have an example of such inequality?\n\nComparison of real/infinity with complex.\n\n> > >`for all x, exists y, for all z  expr(x,y,z)`\n\n> > Such will not be in the first versions.\n\n> \n> But do you have a syntax in mind for it. It would be cool to not multiply ad libitum the `satisfiable`, `holds`, etc which are exactly the same thing with a choice of quantifiers.\n\nNo syntax in my mind. There could be precedents in SMT-solvers which could be copied.",
    "created_at": "2015-11-28T13:47:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268302",
    "user": "https://github.com/rwst"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@videlec](#comment:44):
> Replying to [@rwst](#comment:43):
> > Agreed if we look at equalities. Inequalities can be undecidable if we know one side has no order relation. I don't know if there could be other reasons. I haven't decided yet if `__nonzero__` should throw an exception for this.

> 
> What do you mean? Do you have an example of such inequality?

Comparison of real/infinity with complex.

> > >`for all x, exists y, for all z  expr(x,y,z)`

> > Such will not be in the first versions.

> 
> But do you have a syntax in mind for it. It would be cool to not multiply ad libitum the `satisfiable`, `holds`, etc which are exactly the same thing with a choice of quantifiers.

No syntax in my mind. There could be precedents in SMT-solvers which could be copied.



---

archive/issue_comments_268303.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@rwst](#comment:45):\n> Replying to [@videlec](#comment:44):\n> > Replying to [@rwst](#comment:43):\n> > > Agreed if we look at equalities. Inequalities can be undecidable if we know one side has no order relation. I don't know if there could be other reasons. I haven't decided yet if `__nonzero__` should throw an exception for this.\n\n> > \n> > What do you mean? Do you have an example of such inequality?\n\n> Comparison of real/infinity with complex.\n\nThen I would qualify this as undefined and not undecidable. The latter introduces confusion with the standard notion related to proofs and computability.",
    "created_at": "2015-11-28T13:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268303",
    "user": "https://github.com/videlec"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@rwst](#comment:45):
> Replying to [@videlec](#comment:44):
> > Replying to [@rwst](#comment:43):
> > > Agreed if we look at equalities. Inequalities can be undecidable if we know one side has no order relation. I don't know if there could be other reasons. I haven't decided yet if `__nonzero__` should throw an exception for this.

> > 
> > What do you mean? Do you have an example of such inequality?

> Comparison of real/infinity with complex.

Then I would qualify this as undefined and not undecidable. The latter introduces confusion with the standard notion related to proofs and computability.



---

archive/issue_comments_268304.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI will upload a fresh branch with this.",
    "created_at": "2016-02-24T13:57:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268304",
    "user": "https://github.com/rwst"
}
```

<div id="comment:47" align="right">comment:47</div>

I will upload a fresh branch with this.



---

archive/issue_comments_268305.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:\n * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows alpha order of lhs and rhs\n-* `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n+* `satisfiable(rel)` attempting simplification/proof, returning `(Yes,example)/False/Undefined`\n * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n-* `holds(rel)` attempting simplification/proof, returning `True`/`False`, throwing `NotImplementedError` \n+* `holds(rel)`, quick alias of `satisfiable` (later without giving an example)\n * `ex.is_zero(simplify=False)` (default) calling the fast `bool(ex==0)`\n * `ex.is_zero(simplify=True)` attempting simplification/proof by calling `ex==0`.holds()\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n``````\n",
    "created_at": "2016-02-25T09:21:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268305",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
 Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:
 * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows alpha order of lhs and rhs
-* `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
+* `satisfiable(rel)` attempting simplification/proof, returning `(Yes,example)/False/Undefined`
 * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
-* `holds(rel)` attempting simplification/proof, returning `True`/`False`, throwing `NotImplementedError` 
+* `holds(rel)`, quick alias of `satisfiable` (later without giving an example)
 * `ex.is_zero(simplify=False)` (default) calling the fast `bool(ex==0)`
 * `ex.is_zero(simplify=True)` attempting simplification/proof by calling `ex==0`.holds()
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
``````




---

archive/issue_comments_268306.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@rwst](#comment:5):\n> > You should also have a look to `sage/tests/*` where I am sure some of the things are broken.\n\n> Three fails.\n\nWhich probably means lots of user code being broken, see my experience on [sage-devel](https://groups.google.com/d/topic/sage-devel/ojHqBy7oUVU/discussion).\n\nIn my opinion, for any change in this area, be it fixing a perceived bug or not, we definitely need a deprecation. We do not need on what user's code relies and `sage/tests/*` is in no ways a representative sample (but even some code fails there).\n\nThe existing deprecation framework may not be enough: for some time, old and new code should be compared and a warning should be raised if the outcome is different. Users should be able to silence this warning once they have converted their code to the new behaviour; and the sage library should also silence the warning for its own use only. No idea how to implement this nicely, but I see no other option.",
    "created_at": "2016-02-26T06:32:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268306",
    "user": "https://github.com/cheuberg"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@rwst](#comment:5):
> > You should also have a look to `sage/tests/*` where I am sure some of the things are broken.

> Three fails.

Which probably means lots of user code being broken, see my experience on [sage-devel](https://groups.google.com/d/topic/sage-devel/ojHqBy7oUVU/discussion).

In my opinion, for any change in this area, be it fixing a perceived bug or not, we definitely need a deprecation. We do not need on what user's code relies and `sage/tests/*` is in no ways a representative sample (but even some code fails there).

The existing deprecation framework may not be enough: for some time, old and new code should be compared and a warning should be raised if the outcome is different. Users should be able to silence this warning once they have converted their code to the new behaviour; and the sage library should also silence the warning for its own use only. No idea how to implement this nicely, but I see no other option.



---

archive/issue_comments_268307.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nThe easiest way for the user to see if behaviour has changed is to give the command `git diff original-version /path/to/file` and check if doctests were changed. Since the system is huge and users have different needs you either need to do this yourself or Sage automates this by providing some sort of subscription service. Since Sage cannot know which of your changes should be monitored for different behaviour (because there is no distinction between a user adding code and a developer adding code), you would need to initiate this subscription yourself. Anyway, a deprecation message every time `bool(relation)` is called is out of the question, much more so for all possible changes to Sage. Also, performance would suffer because of all the checks.\n\nYou seem to be of the opinion that there exists a representative sample of tests that covers all eventualities. Needless to say there isn't---however, Sage development tries to come close with the code coverage tools. I think a good dose of realism can be gathered from, for example https://www.youtube.com/watch?v=VfRVz1iqgKU",
    "created_at": "2016-02-27T07:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268307",
    "user": "https://github.com/rwst"
}
```

<div id="comment:51" align="right">comment:51</div>

The easiest way for the user to see if behaviour has changed is to give the command `git diff original-version /path/to/file` and check if doctests were changed. Since the system is huge and users have different needs you either need to do this yourself or Sage automates this by providing some sort of subscription service. Since Sage cannot know which of your changes should be monitored for different behaviour (because there is no distinction between a user adding code and a developer adding code), you would need to initiate this subscription yourself. Anyway, a deprecation message every time `bool(relation)` is called is out of the question, much more so for all possible changes to Sage. Also, performance would suffer because of all the checks.

You seem to be of the opinion that there exists a representative sample of tests that covers all eventualities. Needless to say there isn't---however, Sage development tries to come close with the code coverage tools. I think a good dose of realism can be gathered from, for example https://www.youtube.com/watch?v=VfRVz1iqgKU



---

archive/issue_comments_268308.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nThe discussion is perhaps theoretical at this moment because there is no branch attached, so I do not know what will actually change.\n\nReplying to [@rwst](#comment:51):\n> The easiest way for the user to see if behaviour has changed is to give the command `git diff original-version /path/to/file` and check if doctests were changed. Since the system is huge and users have different needs you either need to do this yourself or Sage automates this by providing some sort of subscription service.\n\nWe are speaking about users, not developers.\n\nThe most we could perhaps expect from users is to read well-written release notes giving a hint what changed. We do not currently have those.\n\n> Since Sage cannot know which of your changes should be monitored for different behaviour (because there is no distinction between a user adding code and a developer adding code), you would need to initiate this subscription yourself. Anyway, a deprecation message every time `bool(relation)` is called is out of the question, much more so for all possible changes to Sage. Also, performance would suffer because of all the checks.\n\nLibrary code could call a *new* method or something like that. But it is certainly ugly.\n\nWe do have a deprecation policy for much less serious cases: if a method is renamed, we have a one-year deprecation period; the only harm done is that a user gets a message that a method does no longer exist.\n\nChanging the behaviour of `bool(...)` **silently** leads to different results which might be wrong.\n\nI see the following options:\n1. Not changing fundamental behaviour.\n2. Changing fundamental behaviour at some really **major** release where we support old user code for much longer than usual (compare Python 2/Python 3)\n3. Some kind of deprecation system\n\nSimply making a fundamental change in a random version (say 7.2) and letting users alone with their old code is not an option for me.\n\n> You seem to be of the opinion that there exists a representative sample of tests that covers all eventualities.\n\nCertainly not, I think the contrary.\n\nI was surprised that at some point on this ticket, changed behaviour was caught by tests in `src/sage/tests`, given that those tests there seem to be quite random.",
    "created_at": "2016-02-28T05:41:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268308",
    "user": "https://github.com/cheuberg"
}
```

<div id="comment:52" align="right">comment:52</div>

The discussion is perhaps theoretical at this moment because there is no branch attached, so I do not know what will actually change.

Replying to [@rwst](#comment:51):
> The easiest way for the user to see if behaviour has changed is to give the command `git diff original-version /path/to/file` and check if doctests were changed. Since the system is huge and users have different needs you either need to do this yourself or Sage automates this by providing some sort of subscription service.

We are speaking about users, not developers.

The most we could perhaps expect from users is to read well-written release notes giving a hint what changed. We do not currently have those.

> Since Sage cannot know which of your changes should be monitored for different behaviour (because there is no distinction between a user adding code and a developer adding code), you would need to initiate this subscription yourself. Anyway, a deprecation message every time `bool(relation)` is called is out of the question, much more so for all possible changes to Sage. Also, performance would suffer because of all the checks.

Library code could call a *new* method or something like that. But it is certainly ugly.

We do have a deprecation policy for much less serious cases: if a method is renamed, we have a one-year deprecation period; the only harm done is that a user gets a message that a method does no longer exist.

Changing the behaviour of `bool(...)` **silently** leads to different results which might be wrong.

I see the following options:
1. Not changing fundamental behaviour.
2. Changing fundamental behaviour at some really **major** release where we support old user code for much longer than usual (compare Python 2/Python 3)
3. Some kind of deprecation system

Simply making a fundamental change in a random version (say 7.2) and letting users alone with their old code is not an option for me.

> You seem to be of the opinion that there exists a representative sample of tests that covers all eventualities.

Certainly not, I think the contrary.

I was surprised that at some point on this ticket, changed behaviour was caught by tests in `src/sage/tests`, given that those tests there seem to be quite random.



---

archive/issue_comments_268309.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@cheuberg](#comment:52):\n> \n> The discussion is perhaps theoretical at this moment because there is no branch attached, so I do not know what will actually change.\n\nThe branch is not listed in the ticket field but the recent commits are visible in the comments. The branch can be checked out via `git trac checkout 19040 --branch=u/rws/19040-2`.",
    "created_at": "2016-02-28T08:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268309",
    "user": "https://github.com/rwst"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@cheuberg](#comment:52):
> 
> The discussion is perhaps theoretical at this moment because there is no branch attached, so I do not know what will actually change.

The branch is not listed in the ticket field but the recent commits are visible in the comments. The branch can be checked out via `git trac checkout 19040 --branch=u/rws/19040-2`.



---

archive/issue_comments_268310.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nA good way to contribute to this is to review #16397. Mixed order comparison is part of the branch mentioned above.",
    "created_at": "2016-03-09T03:37:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19040#issuecomment-268310",
    "user": "https://github.com/rwst"
}
```

<div id="comment:55" align="right">comment:55</div>

A good way to contribute to this is to review #16397. Mixed order comparison is part of the branch mentioned above.



---

archive/issue_events_271558.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:33:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19040",
    "milestone_number": null,
    "milestone_title": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19040#event-271558"
}
```
