# Issue 19040: rewrite Expression.__nonzero__()

archive/issues_018803.json:
```json
{
    "body": "Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:\n* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows alpha order of lhs and rhs\n* `satisfiable(rel)` attempting simplification/proof, returning `(Yes,example)/False/Undefined`\n* `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n* `holds(rel)`, quick alias of `satisfiable` (later without giving an example)\n* `ex.is_zero(simplify=False)` (default) calling the fast `bool(ex==0)`\n* `ex.is_zero(simplify=True)` attempting simplification/proof by calling `ex==0`.holds()\n* `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n\nThis ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `holds()` and `ex.is_zero(simplify=True)`.\n\nSee also #19162.\n\nCC:  @nexttime @behackl @kcrisman @eviatarbach\n\nStatus: needs_info\n\nIssue created by migration from https://trac.sagemath.org/ticket/19040\n\n",
    "created_at": "2015-08-16T06:07:21Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "rewrite Expression.__nonzero__()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19040",
    "user": "https://github.com/rwst"
}
```
Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:
* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows alpha order of lhs and rhs
* `satisfiable(rel)` attempting simplification/proof, returning `(Yes,example)/False/Undefined`
* `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
* `holds(rel)`, quick alias of `satisfiable` (later without giving an example)
* `ex.is_zero(simplify=False)` (default) calling the fast `bool(ex==0)`
* `ex.is_zero(simplify=True)` attempting simplification/proof by calling `ex==0`.holds()
* `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)

This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `holds()` and `ex.is_zero(simplify=True)`.

See also #19162.

CC:  @nexttime @behackl @kcrisman @eviatarbach

Status: needs_info

Issue created by migration from https://trac.sagemath.org/ticket/19040





---

archive/issue_comments_338405.json:
```json
{
    "body": "<a id='comment:1'></a>\nBe careful that in a lot of Sage place there are\n\n```\ndef my_generic_function(x):\n    if not x:\n        ...\n    else:\n        ...\n```\nor with `not x` replaced by `x.is_zero()`.\n\nSo this change would also implies to change all of these in a uniform way.",
    "created_at": "2015-08-16T09:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338405",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>
Be careful that in a lot of Sage place there are

```
def my_generic_function(x):
    if not x:
        ...
    else:
        ...
```
or with `not x` replaced by `x.is_zero()`.

So this change would also implies to change all of these in a uniform way.



---

archive/issue_comments_338406.json:
```json
{
    "body": "<a id='comment:2'></a>\nReplying to [vdelecroix](#comment%3A1):\n> `    if not x:`\n\n`bool(not x)` calls `PyObject_IsTrue` which calls `Expression.__nonzero__` which atm tries to prove that `x` is nonzero\n> or with `not x` replaced by `x.is_zero()`.\n\nThis calls `PyObject_IsTrue` as well.\n> So this change would also implies to change all of these in a uniform way.\n\nRight, `Expression.__nonzero__` will then call `x.is_trivial_zero()` and everyone who wants a proof needs a dfferent method.",
    "created_at": "2015-08-17T05:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338406",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'></a>
Replying to [vdelecroix](#comment%3A1):
> `    if not x:`

`bool(not x)` calls `PyObject_IsTrue` which calls `Expression.__nonzero__` which atm tries to prove that `x` is nonzero
> or with `not x` replaced by `x.is_zero()`.

This calls `PyObject_IsTrue` as well.
> So this change would also implies to change all of these in a uniform way.

Right, `Expression.__nonzero__` will then call `x.is_trivial_zero()` and everyone who wants a proof needs a dfferent method.



---

archive/issue_comments_338407.json:
```json
{
    "body": "<a id='comment:3'></a>\nIt's not too bad. Catching `!=` and `==` in `__nonzero__` and comparing trivially yields only a few dozen doctest fails in `symbolic` and `calculus`, mainly from `bool(...)`. No fail in `src/doc`.",
    "created_at": "2015-08-17T08:45:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338407",
    "user": "https://github.com/rwst"
}
```

<a id='comment:3'></a>
It's not too bad. Catching `!=` and `==` in `__nonzero__` and comparing trivially yields only a few dozen doctest fails in `symbolic` and `calculus`, mainly from `bool(...)`. No fail in `src/doc`.



---

archive/issue_comments_338408.json:
```json
{
    "body": "<a id='comment:4'></a>\nI agree that the change would be actually good (for the reason why you created this ticket). \n\nThoug, for symbolic expression we want to create equations and check their validity\n\n```\nsage: cos(x)**2 + sin(x)**2 == 1\ncos(x) == sin(x)\nsage: bool(_)\nTrue\n```\nThe above will not be enough anymore. What would be the new way of checking? This needs to be emphasized a lot in the documentation as it is backward incompatible. And I guess it is worth a thread on sage-devel. Not necessarily right now, it is always good to have concrete propositions.\n\nYou should also have a look to `sage/tests/*` where I am sure some of the things are broken.",
    "created_at": "2015-08-17T09:03:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338408",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>
I agree that the change would be actually good (for the reason why you created this ticket). 

Thoug, for symbolic expression we want to create equations and check their validity

```
sage: cos(x)**2 + sin(x)**2 == 1
cos(x) == sin(x)
sage: bool(_)
True
```
The above will not be enough anymore. What would be the new way of checking? This needs to be emphasized a lot in the documentation as it is backward incompatible. And I guess it is worth a thread on sage-devel. Not necessarily right now, it is always good to have concrete propositions.

You should also have a look to `sage/tests/*` where I am sure some of the things are broken.



---

archive/issue_comments_338409.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [vdelecroix](#comment%3A4):\n> Thoug, for symbolic expression we want to create equations and check their validity\n> \n> ```\n> sage: cos(x)**2 + sin(x)**2 == 1\n> cos(x) == sin(x)\n> sage: bool(_)\n> True\n> ```\n> The above will not be enough anymore. What would be the new way of checking?\n\n{{{\nsage: satisfiable(_)\nTrue\n}}}\nThis is a long-standing omission, and it would resolve conceptual problems of #17700. It would use #19000 and, if that finds no solution, Maxima as before. SMT solvers can also give a satisfying `x` in case of satisfiability, but no full solution which is the task of `solve`.\n\n> This needs to be emphasized a lot in the documentation as it is backward incompatible. And I guess it is worth a thread on sage-devel. Not necessarily right now, it is always good to have concrete propositions.\n> \n> You should also have a look to `sage/tests/*` where I am sure some of the things are broken.\n\nThree fails.",
    "created_at": "2015-08-17T13:40:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338409",
    "user": "https://github.com/rwst"
}
```

<a id='comment:5'></a>
Replying to [vdelecroix](#comment%3A4):
> Thoug, for symbolic expression we want to create equations and check their validity
> 
> ```
> sage: cos(x)**2 + sin(x)**2 == 1
> cos(x) == sin(x)
> sage: bool(_)
> True
> ```
> The above will not be enough anymore. What would be the new way of checking?

{{{
sage: satisfiable(_)
True
}}}
This is a long-standing omission, and it would resolve conceptual problems of #17700. It would use #19000 and, if that finds no solution, Maxima as before. SMT solvers can also give a satisfying `x` in case of satisfiability, but no full solution which is the task of `solve`.

> This needs to be emphasized a lot in the documentation as it is backward incompatible. And I guess it is worth a thread on sage-devel. Not necessarily right now, it is always good to have concrete propositions.
> 
> You should also have a look to `sage/tests/*` where I am sure some of the things are broken.

Three fails.



---

archive/issue_comments_338410.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [rws](#comment%3A5):\n> It would use #19000\nCould. #19000 is not a necessity.",
    "created_at": "2015-08-17T15:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338410",
    "user": "https://github.com/rwst"
}
```

<a id='comment:6'></a>
Replying to [rws](#comment%3A5):
> It would use #19000
Could. #19000 is not a necessity.



---

archive/issue_comments_338411.json:
```json
{
    "body": "<a id='comment:7'></a>\nActually, proving equality would need quantifiers like:\n\n```\nsage: satisfiable(_, for_all(x))\nTrue\n```",
    "created_at": "2015-08-17T15:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338411",
    "user": "https://github.com/rwst"
}
```

<a id='comment:7'></a>
Actually, proving equality would need quantifiers like:

```
sage: satisfiable(_, for_all(x))
True
```



---

archive/issue_comments_338412.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,6 @@\n-Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. Instead of `Expression.__nonzero__` this ticket should provide a different interface for cases requiring simplification/proof.\n+Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. This ticket should provide a different interface for cases requiring simplification/proof:\n+* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=\n+* `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n+* `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n+* `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n+\n``````\n",
    "created_at": "2015-09-08T07:36:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338412",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,6 @@
-Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. Instead of `Expression.__nonzero__` this ticket should provide a different interface for cases requiring simplification/proof.
+Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. This ticket should provide a different interface for cases requiring simplification/proof:
+* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=
+* `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
+* `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
+* `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
+
``````




---

archive/issue_comments_338413.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. This ticket should provide a different interface for cases requiring simplification/proof:\n * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=\n * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n+* `truth(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`\n * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n``````\n",
    "created_at": "2015-09-08T08:17:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338413",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
 Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. This ticket should provide a different interface for cases requiring simplification/proof:
 * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=
 * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
+* `truth(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`
 * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
``````




---

archive/issue_comments_338414.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,8 @@\n-Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. This ticket should provide a different interface for cases requiring simplification/proof:\n+Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. We should provide a different interface for cases requiring simplification/proof:\n * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=\n * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n * `truth(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`\n * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable(rel)`.\n``````\n",
    "created_at": "2015-09-08T08:22:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338414",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,8 @@
-Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. This ticket should provide a different interface for cases requiring simplification/proof:
+Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. We should provide a different interface for cases requiring simplification/proof:
 * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=
 * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
 * `truth(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`
 * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable(rel)`.
``````




---

archive/issue_comments_338415.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,6 @@\n * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable(rel)`.\n+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()`.\n+\n+See also #19162.\n``````\n",
    "created_at": "2015-09-08T08:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338415",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,6 @@
 * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable(rel)`.
+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()`.
+
+See also #19162.
``````




---

archive/issue_comments_338416.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#18980\"",
    "created_at": "2015-09-08T13:01:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338416",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "" to "#18980"



---

archive/issue_comments_338417.json:
```json
{
    "body": "Changing branch from \"\" to \"u/rws/defuse_bool_x__0__performance_bomb\"",
    "created_at": "2015-09-08T13:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338417",
    "user": "https://github.com/rwst"
}
```

Changing branch from "" to "u/rws/defuse_bool_x__0__performance_bomb"



---

archive/issue_comments_338418.json:
```json
{
    "body": "Changing commit from \"\" to \"d94dec443790faf1eb48230edb3ae1dc6c9c6eb6\"",
    "created_at": "2015-09-08T15:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338418",
    "user": "https://github.com/rwst"
}
```

Changing commit from "" to "d94dec443790faf1eb48230edb3ae1dc6c9c6eb6"



---

archive/issue_comments_338419.json:
```json
{
    "body": "Changing author from \"\" to \"Ralf Stephan\"",
    "created_at": "2015-09-08T15:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338419",
    "user": "https://github.com/rwst"
}
```

Changing author from "" to "Ralf Stephan"



---

archive/issue_comments_338420.json:
```json
{
    "body": "Changing dependencies from \"#18980\" to \"\"",
    "created_at": "2015-09-08T15:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338420",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "#18980" to ""



---

archive/issue_comments_338421.json:
```json
{
    "body": "<a id='comment:14'></a>\nNew commits:\n|                                                                                                                                          |                                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[d94dec4](http://git.sagemath.org/sage.git/commit/?id=d94dec443790faf1eb48230edb3ae1dc6c9c6eb6)|`19040: draft, can't go further without 18980`|",
    "created_at": "2015-09-08T15:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338421",
    "user": "https://github.com/rwst"
}
```

<a id='comment:14'></a>
New commits:
|                                                                                                                                          |                                              |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[d94dec4](http://git.sagemath.org/sage.git/commit/?id=d94dec443790faf1eb48230edb3ae1dc6c9c6eb6)|`19040: draft, can't go further without 18980`|



---

archive/issue_comments_338422.json:
```json
{
    "body": "Changing branch from \"u/rws/defuse_bool_x__0__performance_bomb\" to \"u/rws/19040\"",
    "created_at": "2015-09-08T15:41:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338422",
    "user": "https://github.com/rwst"
}
```

Changing branch from "u/rws/defuse_bool_x__0__performance_bomb" to "u/rws/19040"



---

archive/issue_comments_338423.json:
```json
{
    "body": "Changing commit from \"d94dec443790faf1eb48230edb3ae1dc6c9c6eb6\" to \"800ec56b0b930eb8a5b966c5871dc5e76724acb0\"",
    "created_at": "2015-09-09T08:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338423",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d94dec443790faf1eb48230edb3ae1dc6c9c6eb6" to "800ec56b0b930eb8a5b966c5871dc5e76724acb0"



---

archive/issue_comments_338424.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|\n|[f52dbd2](http://git.sagemath.org/sage.git/commit/?id=f52dbd2ae18b5d0bc7cc322fc9c4aa2ebe83ec20)|`missing void declaration of Cython function causes unexpected crashes`|\n|[f67f47f](http://git.sagemath.org/sage.git/commit/?id=f67f47f8cdb2448dafa81dec4d95a66ad10462d3)|`19040 uncovers hidden calls of Expression.__nonzero__, fixed`|\n|[38e983b](http://git.sagemath.org/sage.git/commit/?id=38e983bf232704b44bf3a4b217240d2bbf1bc350)|`19040: handle numerics together with constants`|\n|[800ec56](http://git.sagemath.org/sage.git/commit/?id=800ec56b0b930eb8a5b966c5871dc5e76724acb0)|`19040: draft3`|",
    "created_at": "2015-09-09T08:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|
|[f52dbd2](http://git.sagemath.org/sage.git/commit/?id=f52dbd2ae18b5d0bc7cc322fc9c4aa2ebe83ec20)|`missing void declaration of Cython function causes unexpected crashes`|
|[f67f47f](http://git.sagemath.org/sage.git/commit/?id=f67f47f8cdb2448dafa81dec4d95a66ad10462d3)|`19040 uncovers hidden calls of Expression.__nonzero__, fixed`|
|[38e983b](http://git.sagemath.org/sage.git/commit/?id=38e983bf232704b44bf3a4b217240d2bbf1bc350)|`19040: handle numerics together with constants`|
|[800ec56](http://git.sagemath.org/sage.git/commit/?id=800ec56b0b930eb8a5b966c5871dc5e76724acb0)|`19040: draft3`|



---

archive/issue_comments_338425.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. We should provide a different interface for cases requiring simplification/proof:\n * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=\n * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n-* `truth(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`\n+* `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`\n * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n``````\n",
    "created_at": "2015-09-14T06:05:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338425",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. We should provide a different interface for cases requiring simplification/proof:
 * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=
 * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
-* `truth(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`
+* `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`
 * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
``````




---

archive/issue_comments_338426.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n-Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. We should provide a different interface for cases requiring simplification/proof:\n-* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=\n+Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:\n+* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows the print order of lhs and rhs\n * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n * `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`\n * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()`.\n+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()` and `ex.holds()`.\n \n See also #19162.\n``````\n",
    "created_at": "2015-09-16T06:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338426",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
-Symbolics may be part of type-neutral computations, e.g. matrices, rings. Developers do not expect proof machinery to crank up when writing `if x!=0`, so `bool(x1!=x2)` should mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. We should provide a different interface for cases requiring simplification/proof:
-* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and an exception with maybe hint to the following for <,>,<=,>=
+Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:
+* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows the print order of lhs and rhs
 * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
 * `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`
 * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()`.
+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()` and `ex.holds()`.
 
 See also #19162.
``````




---

archive/issue_comments_338427.json:
```json
{
    "body": "Changing commit from \"800ec56b0b930eb8a5b966c5871dc5e76724acb0\" to \"adab9a7ea45475ab4c95b310280cda2d43848e48\"",
    "created_at": "2015-09-16T08:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338427",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "800ec56b0b930eb8a5b966c5871dc5e76724acb0" to "adab9a7ea45475ab4c95b310280cda2d43848e48"



---

archive/issue_comments_338428.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[7a3a4d2](http://git.sagemath.org/sage.git/commit/?id=7a3a4d27d0d0e764f00f837f3da6e04fb1d1f9f3)|`19040: infinity handled by Pynac`|\n|[7c6a8aa](http://git.sagemath.org/sage.git/commit/?id=7c6a8aa97ada525092f1c2b491f1254976572740)|`19040: contradicts() now uses satisfiable()`|\n|[0d4e2a1](http://git.sagemath.org/sage.git/commit/?id=0d4e2a167b6048c3fe11de0a961e1aa5f3cac94a)|`19040: prep satisfiable()`|\n|[d8971ed](http://git.sagemath.org/sage.git/commit/?id=d8971ed16cb89658b0b890cca746353a47481773)|`Merge branch 'develop' into t/19040/19040`|\n|[adab9a7](http://git.sagemath.org/sage.git/commit/?id=adab9a7ea45475ab4c95b310280cda2d43848e48)|`19040: draft4`|",
    "created_at": "2015-09-16T08:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338428",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[7a3a4d2](http://git.sagemath.org/sage.git/commit/?id=7a3a4d27d0d0e764f00f837f3da6e04fb1d1f9f3)|`19040: infinity handled by Pynac`|
|[7c6a8aa](http://git.sagemath.org/sage.git/commit/?id=7c6a8aa97ada525092f1c2b491f1254976572740)|`19040: contradicts() now uses satisfiable()`|
|[0d4e2a1](http://git.sagemath.org/sage.git/commit/?id=0d4e2a167b6048c3fe11de0a961e1aa5f3cac94a)|`19040: prep satisfiable()`|
|[d8971ed](http://git.sagemath.org/sage.git/commit/?id=d8971ed16cb89658b0b890cca746353a47481773)|`Merge branch 'develop' into t/19040/19040`|
|[adab9a7](http://git.sagemath.org/sage.git/commit/?id=adab9a7ea45475ab4c95b310280cda2d43848e48)|`19040: draft4`|



---

archive/issue_comments_338429.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#17984\"",
    "created_at": "2015-09-20T13:48:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338429",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "" to "#17984"



---

archive/issue_comments_338430.json:
```json
{
    "body": "Changing dependencies from \"#17984\" to \"#19256\"",
    "created_at": "2015-09-20T15:08:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338430",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "#17984" to "#19256"



---

archive/issue_comments_338431.json:
```json
{
    "body": "Changing branch from \"u/rws/19040\" to \"u/rws/19040-1\"",
    "created_at": "2015-09-20T15:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338431",
    "user": "https://github.com/rwst"
}
```

Changing branch from "u/rws/19040" to "u/rws/19040-1"



---

archive/issue_comments_338432.json:
```json
{
    "body": "Changing dependencies from \"#19256\" to \"\"",
    "created_at": "2015-09-21T13:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338432",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "#19256" to ""



---

archive/issue_comments_338433.json:
```json
{
    "body": "Changing commit from \"adab9a7ea45475ab4c95b310280cda2d43848e48\" to \"5f4ffc0b8929f971c649339ce451189ce6d8698d\"",
    "created_at": "2015-09-21T13:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338433",
    "user": "https://github.com/rwst"
}
```

Changing commit from "adab9a7ea45475ab4c95b310280cda2d43848e48" to "5f4ffc0b8929f971c649339ce451189ce6d8698d"



---

archive/issue_comments_338434.json:
```json
{
    "body": "<a id='comment:23'></a>\nIt may not be possible to get the desired behaviour in the `structure/parent.pyx` doctests, so we oblige `Parent.__contains__` by throwing an exception if `lhs-rhs` contains inexact ring elements. This way inclusion in those rings (i.e., `pi in CC == True`) is always guaranteed as before.\n\n---\nNew commits:\n|                                                                                                                                          |              |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------|\n|[5f4ffc0](http://git.sagemath.org/sage.git/commit/?id=5f4ffc0b8929f971c649339ce451189ce6d8698d)|`19040: draft`|",
    "created_at": "2015-09-21T13:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338434",
    "user": "https://github.com/rwst"
}
```

<a id='comment:23'></a>
It may not be possible to get the desired behaviour in the `structure/parent.pyx` doctests, so we oblige `Parent.__contains__` by throwing an exception if `lhs-rhs` contains inexact ring elements. This way inclusion in those rings (i.e., `pi in CC == True`) is always guaranteed as before.

---
New commits:
|                                                                                                                                          |              |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------|
|[5f4ffc0](http://git.sagemath.org/sage.git/commit/?id=5f4ffc0b8929f971c649339ce451189ce6d8698d)|`19040: draft`|



---

archive/issue_comments_338435.json:
```json
{
    "body": "<a id='comment:24'></a>\nA small remark: From the documentation of the method `holds`\n\n```\nIf Sage knows exactly that the relation is\nundecidable it will throw an ``AttributeError``.\n```\nFor **one** relation there **always** is an algorithm which is either `return True` or `return False`. What is not possible is to design an algorithm whose input is an equation and answers the validity of the input. Your sentence makes no sense. A right formulation would be\n\n```\nIf Sage does not know if the equation is valid it will\nthrow a ``NotImplementedError``. Note that the validity\nof equations is an undecidable problem. Hence there will\nalways be instances for which such error is raised.\n```\n(`AttributeError` makes no sense here).",
    "created_at": "2015-09-21T14:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338435",
    "user": "https://github.com/videlec"
}
```

<a id='comment:24'></a>
A small remark: From the documentation of the method `holds`

```
If Sage knows exactly that the relation is
undecidable it will throw an ``AttributeError``.
```
For **one** relation there **always** is an algorithm which is either `return True` or `return False`. What is not possible is to design an algorithm whose input is an equation and answers the validity of the input. Your sentence makes no sense. A right formulation would be

```
If Sage does not know if the equation is valid it will
throw a ``NotImplementedError``. Note that the validity
of equations is an undecidable problem. Hence there will
always be instances for which such error is raised.
```
(`AttributeError` makes no sense here).



---

archive/issue_comments_338436.json:
```json
{
    "body": "Changing branch from \"u/rws/19040-1\" to \"u/rws/19040-2\"",
    "created_at": "2015-09-23T16:17:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338436",
    "user": "https://github.com/rwst"
}
```

Changing branch from "u/rws/19040-1" to "u/rws/19040-2"



---

archive/issue_comments_338437.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-09-23T16:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338437",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_338438.json:
```json
{
    "body": "<a id='comment:26'></a>\nThis should be it. Please review.\n\n---\nNew commits:\n|                                                                                                                                          |                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[fd2e723](http://git.sagemath.org/sage.git/commit/?id=fd2e723bec0a895dc9b8138ddca7940fa020f8de)|`19040: core of rewrite Expression.__nonzero__()`|\n|[5a0c829](http://git.sagemath.org/sage.git/commit/?id=5a0c829199b6e4bedff3095f218ca77eca509b76)|`code changes in consequence of 19040`|\n|[fdd148a](http://git.sagemath.org/sage.git/commit/?id=fdd148a50b31610942b21f34d36facfff892246e)|`19040: doctest changes`|",
    "created_at": "2015-09-23T16:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338438",
    "user": "https://github.com/rwst"
}
```

<a id='comment:26'></a>
This should be it. Please review.

---
New commits:
|                                                                                                                                          |                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[fd2e723](http://git.sagemath.org/sage.git/commit/?id=fd2e723bec0a895dc9b8138ddca7940fa020f8de)|`19040: core of rewrite Expression.__nonzero__()`|
|[5a0c829](http://git.sagemath.org/sage.git/commit/?id=5a0c829199b6e4bedff3095f218ca77eca509b76)|`code changes in consequence of 19040`|
|[fdd148a](http://git.sagemath.org/sage.git/commit/?id=fdd148a50b31610942b21f34d36facfff892246e)|`19040: doctest changes`|



---

archive/issue_comments_338439.json:
```json
{
    "body": "Changing commit from \"5f4ffc0b8929f971c649339ce451189ce6d8698d\" to \"fdd148a50b31610942b21f34d36facfff892246e\"",
    "created_at": "2015-09-23T16:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338439",
    "user": "https://github.com/rwst"
}
```

Changing commit from "5f4ffc0b8929f971c649339ce451189ce6d8698d" to "fdd148a50b31610942b21f34d36facfff892246e"



---

archive/issue_comments_338440.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,10 @@\n Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:\n * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows the print order of lhs and rhs\n+* `rel.is_zero(simplify=False)` (default) calling the fast `bool(rel)`\n+* `rel.is_zero(simplify=True)` attempting simplification/proof\n * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n+* `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n * `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`\n-* `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()` and `ex.holds()`.\n``````\n",
    "created_at": "2015-09-24T06:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338440",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,10 @@
 Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:
 * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows the print order of lhs and rhs
+* `rel.is_zero(simplify=False)` (default) calling the fast `bool(rel)`
+* `rel.is_zero(simplify=True)` attempting simplification/proof
 * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
+* `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
 * `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`
-* `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
 This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()` and `ex.holds()`.
``````




---

archive/issue_comments_338441.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,6 +7,6 @@\n * `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()` and `ex.holds()`.\n+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.is_zero(simplify=True)`.\n \n See also #19162.\n``````\n",
    "created_at": "2015-09-24T06:22:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338441",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,6 +7,6 @@
 * `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.satisfiable()` and `ex.holds()`.
+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.is_zero(simplify=True)`.
 
 See also #19162.
``````




---

archive/issue_comments_338442.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-09-26T07:09:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338442",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_338443.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,12 +1,12 @@\n Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:\n-* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows the print order of lhs and rhs\n-* `rel.is_zero(simplify=False)` (default) calling the fast `bool(rel)`\n-* `rel.is_zero(simplify=True)` attempting simplification/proof\n+* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows alpha order of lhs and rhs\n * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n-* `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`\n+* `is(rel)` attempting simplification/proof, returning `True`/`False`, throwing `NotImplementedError` \n+* `ex.is_zero(simplify=False)` (default) calling the fast `bool(ex==0)`\n+* `ex.is_zero(simplify=True)` attempting simplification/proof\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.is_zero(simplify=True)`.\n+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `is()` and `ex.is_zero(simplify=True)`.\n \n See also #19162.\n``````\n",
    "created_at": "2015-09-26T07:09:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338443",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,12 +1,12 @@
 Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:
-* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows the print order of lhs and rhs
-* `rel.is_zero(simplify=False)` (default) calling the fast `bool(rel)`
-* `rel.is_zero(simplify=True)` attempting simplification/proof
+* `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows alpha order of lhs and rhs
 * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
 * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
-* `holds(rel, (x,S1), (y,S1)...)` equivalent to `satisfiable(rel)` for all `x,y...` in `S1,S2,...`
+* `is(rel)` attempting simplification/proof, returning `True`/`False`, throwing `NotImplementedError` 
+* `ex.is_zero(simplify=False)` (default) calling the fast `bool(ex==0)`
+* `ex.is_zero(simplify=True)` attempting simplification/proof
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `ex.is_zero(simplify=True)`.
+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `is()` and `ex.is_zero(simplify=True)`.
 
 See also #19162.
``````




---

archive/issue_comments_338444.json:
```json
{
    "body": "<a id='comment:30'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[f30fe23](http://git.sagemath.org/sage.git/commit/?id=f30fe23478c3985625f0050c6de742c28a05cf15)|`Merge branch 'develop' into t/19040/19040-2`|\n|[ba8824e](http://git.sagemath.org/sage.git/commit/?id=ba8824e7c84d81f87bb3969bb831003057c48fbd)|`19040: add dedicated is_zero()`|",
    "created_at": "2015-09-27T06:46:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338444",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[f30fe23](http://git.sagemath.org/sage.git/commit/?id=f30fe23478c3985625f0050c6de742c28a05cf15)|`Merge branch 'develop' into t/19040/19040-2`|
|[ba8824e](http://git.sagemath.org/sage.git/commit/?id=ba8824e7c84d81f87bb3969bb831003057c48fbd)|`19040: add dedicated is_zero()`|



---

archive/issue_comments_338445.json:
```json
{
    "body": "Changing commit from \"fdd148a50b31610942b21f34d36facfff892246e\" to \"ba8824e7c84d81f87bb3969bb831003057c48fbd\"",
    "created_at": "2015-09-27T06:46:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338445",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fdd148a50b31610942b21f34d36facfff892246e" to "ba8824e7c84d81f87bb3969bb831003057c48fbd"



---

archive/issue_comments_338446.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-09-27T06:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338446",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_338447.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,11 +2,11 @@\n * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows alpha order of lhs and rhs\n * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n-* `is(rel)` attempting simplification/proof, returning `True`/`False`, throwing `NotImplementedError` \n+* `holds(rel)` attempting simplification/proof, returning `True`/`False`, throwing `NotImplementedError` \n * `ex.is_zero(simplify=False)` (default) calling the fast `bool(ex==0)`\n-* `ex.is_zero(simplify=True)` attempting simplification/proof\n+* `ex.is_zero(simplify=True)` attempting simplification/proof by calling `ex==0`.holds()\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n \n-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `is()` and `ex.is_zero(simplify=True)`.\n+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `holds()` and `ex.is_zero(simplify=True)`.\n \n See also #19162.\n``````\n",
    "created_at": "2015-09-27T06:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338447",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,11 +2,11 @@
 * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows alpha order of lhs and rhs
 * `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
 * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
-* `is(rel)` attempting simplification/proof, returning `True`/`False`, throwing `NotImplementedError` 
+* `holds(rel)` attempting simplification/proof, returning `True`/`False`, throwing `NotImplementedError` 
 * `ex.is_zero(simplify=False)` (default) calling the fast `bool(ex==0)`
-* `ex.is_zero(simplify=True)` attempting simplification/proof
+* `ex.is_zero(simplify=True)` attempting simplification/proof by calling `ex==0`.holds()
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
 
-This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `is()` and `ex.is_zero(simplify=True)`.
+This ticket will implement the new behaviour of `bool(rel)` and put all other functionality of `ex.__nonzero__()` into `holds()` and `ex.is_zero(simplify=True)`.
 
 See also #19162.
``````




---

archive/issue_comments_338448.json:
```json
{
    "body": "Changing commit from \"ba8824e7c84d81f87bb3969bb831003057c48fbd\" to \"595080cb5297e6d66471137c9d438b97a4f01c3e\"",
    "created_at": "2015-09-27T06:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338448",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ba8824e7c84d81f87bb3969bb831003057c48fbd" to "595080cb5297e6d66471137c9d438b97a4f01c3e"



---

archive/issue_comments_338449.json:
```json
{
    "body": "<a id='comment:32'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                          |                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|\n|[857dc9c](http://git.sagemath.org/sage.git/commit/?id=857dc9c5f4e390faaacebb77bb4f60162aebd805)|`19040: add dedicated is_zero()`|\n|[595080c](http://git.sagemath.org/sage.git/commit/?id=595080cb5297e6d66471137c9d438b97a4f01c3e)|`Merge branch 'u/rws/19040-2' of trac.sagemath.org:sage into t/19040/19040-2`|",
    "created_at": "2015-09-27T06:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338449",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                          |                                |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
|[857dc9c](http://git.sagemath.org/sage.git/commit/?id=857dc9c5f4e390faaacebb77bb4f60162aebd805)|`19040: add dedicated is_zero()`|
|[595080c](http://git.sagemath.org/sage.git/commit/?id=595080cb5297e6d66471137c9d438b97a4f01c3e)|`Merge branch 'u/rws/19040-2' of trac.sagemath.org:sage into t/19040/19040-2`|



---

archive/issue_comments_338450.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-10-15T05:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338450",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_338451.json:
```json
{
    "body": "<a id='comment:33'></a>\nPatchbot failures in hyperbolic space.",
    "created_at": "2015-10-15T05:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338451",
    "user": "https://github.com/rwst"
}
```

<a id='comment:33'></a>
Patchbot failures in hyperbolic space.



---

archive/issue_comments_338452.json:
```json
{
    "body": "Changing commit from \"595080cb5297e6d66471137c9d438b97a4f01c3e\" to \"\"",
    "created_at": "2015-10-16T15:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338452",
    "user": "https://github.com/rwst"
}
```

Changing commit from "595080cb5297e6d66471137c9d438b97a4f01c3e" to ""



---

archive/issue_comments_338453.json:
```json
{
    "body": "<a id='comment:34'></a>\nThis code cannot be separated from #19312 so I included it there. I'll let this ticket stay here for the description unless someone objects.",
    "created_at": "2015-10-16T15:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338453",
    "user": "https://github.com/rwst"
}
```

<a id='comment:34'></a>
This code cannot be separated from #19312 so I included it there. I'll let this ticket stay here for the description unless someone objects.



---

archive/issue_comments_338454.json:
```json
{
    "body": "Changing author from \"Ralf Stephan\" to \"\"",
    "created_at": "2015-10-16T15:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338454",
    "user": "https://github.com/rwst"
}
```

Changing author from "Ralf Stephan" to ""



---

archive/issue_comments_338455.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2015-10-16T15:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338455",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_338456.json:
```json
{
    "body": "Changing branch from \"u/rws/19040-2\" to \"\"",
    "created_at": "2015-10-16T15:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338456",
    "user": "https://github.com/rwst"
}
```

Changing branch from "u/rws/19040-2" to ""



---

archive/issue_comments_338457.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [rws](#comment%3A34):\n> This code cannot be separated from #19312\n\n\nPlease explain why.",
    "created_at": "2015-10-16T17:10:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338457",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:35'></a>
Replying to [rws](#comment%3A34):
> This code cannot be separated from #19312


Please explain why.



---

archive/issue_comments_338458.json:
```json
{
    "body": "<a id='comment:36'></a>\nReplying to [jdemeyer](#comment%3A35):\n> Replying to [rws](#comment%3A34):\n> > This code cannot be separated from #19312\n\n> \n> Please explain why.\n\n\nCorrection: an advanced version of this code cannot be separated from #19312. So, this is already obsolete. If, however, #19312 merge is not in the forseeable future I'll consider presenting this branch for review again.",
    "created_at": "2015-10-17T07:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338458",
    "user": "https://github.com/rwst"
}
```

<a id='comment:36'></a>
Replying to [jdemeyer](#comment%3A35):
> Replying to [rws](#comment%3A34):
> > This code cannot be separated from #19312

> 
> Please explain why.


Correction: an advanced version of this code cannot be separated from #19312. So, this is already obsolete. If, however, #19312 merge is not in the forseeable future I'll consider presenting this branch for review again.



---

archive/issue_comments_338459.json:
```json
{
    "body": "<a id='comment:37'></a>\nI would much prefer to separate #19040 from #19312, mainly to make the review easier (reviewing a package upgrade plus a huge number of Sage library changes is difficult).",
    "created_at": "2015-10-17T09:35:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338459",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>
I would much prefer to separate #19040 from #19312, mainly to make the review easier (reviewing a package upgrade plus a huge number of Sage library changes is difficult).



---

archive/issue_comments_338460.json:
```json
{
    "body": "<a id='comment:38'></a>\nThis will make it necessary to implement some (fast) functions from Pynac-0.5 in Python to achieve the same result. The two remaining fails are quite demanding.",
    "created_at": "2015-10-17T15:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338460",
    "user": "https://github.com/rwst"
}
```

<a id='comment:38'></a>
This will make it necessary to implement some (fast) functions from Pynac-0.5 in Python to achieve the same result. The two remaining fails are quite demanding.



---

archive/issue_comments_338461.json:
```json
{
    "body": "<a id='comment:39'></a>\nI succeeded to separate #19040 from #19312, so this branch needs rewrite after #19312 is merged.",
    "created_at": "2015-10-19T15:16:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338461",
    "user": "https://github.com/rwst"
}
```

<a id='comment:39'></a>
I succeeded to separate #19040 from #19312, so this branch needs rewrite after #19312 is merged.



---

archive/issue_comments_338462.json:
```json
{
    "body": "<a id='comment:41'></a>\nWhat would be the difference between the output `NotImplemented` and `Undecidable`!?\n\nAs I already mentioned in [comment 24](#comment%3A24), it makes few sense that `satisfiable(expr)` returns `Undecidable`. Each formula is either `True` or `False`. I am here only assuming that mathematics are consistent. Of course `satisfiable` can not work for all input and when it can not it should return `NotImplemented`. That being said, some formula `expr` have no proof of their truthness (from Godel), but then I doubt any computer would actually be able to prove it.\n\nIn an ideal world, the function `satisfiable(expr)` would return one of:\n- `(True, example)`\n- `(False, proof)`\n- `NotImplemented`",
    "created_at": "2015-11-27T20:03:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338462",
    "user": "https://github.com/videlec"
}
```

<a id='comment:41'></a>
What would be the difference between the output `NotImplemented` and `Undecidable`!?

As I already mentioned in [comment 24](#comment%3A24), it makes few sense that `satisfiable(expr)` returns `Undecidable`. Each formula is either `True` or `False`. I am here only assuming that mathematics are consistent. Of course `satisfiable` can not work for all input and when it can not it should return `NotImplemented`. That being said, some formula `expr` have no proof of their truthness (from Godel), but then I doubt any computer would actually be able to prove it.

In an ideal world, the function `satisfiable(expr)` would return one of:
- `(True, example)`
- `(False, proof)`
- `NotImplemented`



---

archive/issue_comments_338463.json:
```json
{
    "body": "<a id='comment:42'></a>\nother remark: If I understand correctly `satisfiable` would corresponds to a **exists** quantifier for **all** the variables in the formula. While the `holds` would correspond to **for all**. What about something more elaborate such as\n\n```\n  for all x, exists y, for all z  expr(x,y,z)\n```",
    "created_at": "2015-11-27T20:06:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338463",
    "user": "https://github.com/videlec"
}
```

<a id='comment:42'></a>
other remark: If I understand correctly `satisfiable` would corresponds to a **exists** quantifier for **all** the variables in the formula. While the `holds` would correspond to **for all**. What about something more elaborate such as

```
  for all x, exists y, for all z  expr(x,y,z)
```



---

archive/issue_comments_338464.json:
```json
{
    "body": "<a id='comment:43'></a>\nReplying to [vdelecroix](#comment%3A41):\n> What would be the difference between the output `NotImplemented` and `Undecidable`!?\n> \n> As I already mentioned in [comment 24](#comment%3A24), it makes few sense that `satisfiable(expr)` returns `Undecidable`. Each formula is either `True` or `False`. I am here only assuming that mathematics are consistent. Of course `satisfiable` can not work for all input and when it can not it should return `NotImplemented`. That being said, some formula `expr` have no proof of their truthness (from Godel), but then I doubt any computer would actually be able to prove it.\n\nAgreed if we look at equalities. Inequalities can be undecidable if we know one side has no order relation. I don't know if there could be other reasons. I haven't decided yet if `__nonzero__` should throw an exception for this.\n>`for all x, exists y, for all z  expr(x,y,z)`\n\nSuch will not be in the first versions.",
    "created_at": "2015-11-28T07:18:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338464",
    "user": "https://github.com/rwst"
}
```

<a id='comment:43'></a>
Replying to [vdelecroix](#comment%3A41):
> What would be the difference between the output `NotImplemented` and `Undecidable`!?
> 
> As I already mentioned in [comment 24](#comment%3A24), it makes few sense that `satisfiable(expr)` returns `Undecidable`. Each formula is either `True` or `False`. I am here only assuming that mathematics are consistent. Of course `satisfiable` can not work for all input and when it can not it should return `NotImplemented`. That being said, some formula `expr` have no proof of their truthness (from Godel), but then I doubt any computer would actually be able to prove it.

Agreed if we look at equalities. Inequalities can be undecidable if we know one side has no order relation. I don't know if there could be other reasons. I haven't decided yet if `__nonzero__` should throw an exception for this.
>`for all x, exists y, for all z  expr(x,y,z)`

Such will not be in the first versions.



---

archive/issue_comments_338465.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [rws](#comment%3A43):\n> Replying to [vdelecroix](#comment%3A41):\n> > What would be the difference between the output `NotImplemented` and `Undecidable`!?\n> > \n> > As I already mentioned in [comment 24](#comment%3A24), it makes few sense that `satisfiable(expr)` returns `Undecidable`. Each formula is either `True` or `False`. I am here only assuming that mathematics are consistent. Of course `satisfiable` can not work for all input and when it can not it should return `NotImplemented`. That being said, some formula `expr` have no proof of their truthness (from Godel), but then I doubt any computer would actually be able to prove it.\n\n> Agreed if we look at equalities. Inequalities can be undecidable if we know one side has no order relation. I don't know if there could be other reasons. I haven't decided yet if `__nonzero__` should throw an exception for this.\n\nWhat do you mean? Do you have an example of such inequality?\n\n> >`for all x, exists y, for all z  expr(x,y,z)`\n\n> Such will not be in the first versions.\n\nBut do you have a syntax in mind for it. It would be cool to not multiply ad libitum the `satisfiable`, `holds`, etc which are exactly the same thing with a choice of quantifiers.",
    "created_at": "2015-11-28T12:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338465",
    "user": "https://github.com/videlec"
}
```

<a id='comment:44'></a>
Replying to [rws](#comment%3A43):
> Replying to [vdelecroix](#comment%3A41):
> > What would be the difference between the output `NotImplemented` and `Undecidable`!?
> > 
> > As I already mentioned in [comment 24](#comment%3A24), it makes few sense that `satisfiable(expr)` returns `Undecidable`. Each formula is either `True` or `False`. I am here only assuming that mathematics are consistent. Of course `satisfiable` can not work for all input and when it can not it should return `NotImplemented`. That being said, some formula `expr` have no proof of their truthness (from Godel), but then I doubt any computer would actually be able to prove it.

> Agreed if we look at equalities. Inequalities can be undecidable if we know one side has no order relation. I don't know if there could be other reasons. I haven't decided yet if `__nonzero__` should throw an exception for this.

What do you mean? Do you have an example of such inequality?

> >`for all x, exists y, for all z  expr(x,y,z)`

> Such will not be in the first versions.

But do you have a syntax in mind for it. It would be cool to not multiply ad libitum the `satisfiable`, `holds`, etc which are exactly the same thing with a choice of quantifiers.



---

archive/issue_comments_338466.json:
```json
{
    "body": "<a id='comment:45'></a>\nReplying to [vdelecroix](#comment%3A44):\n> Replying to [rws](#comment%3A43):\n> > Agreed if we look at equalities. Inequalities can be undecidable if we know one side has no order relation. I don't know if there could be other reasons. I haven't decided yet if `__nonzero__` should throw an exception for this.\n\n> \n> What do you mean? Do you have an example of such inequality?\n\nComparison of real/infinity with complex.\n\n> > >`for all x, exists y, for all z  expr(x,y,z)`\n\n> > Such will not be in the first versions.\n> \n> But do you have a syntax in mind for it. It would be cool to not multiply ad libitum the `satisfiable`, `holds`, etc which are exactly the same thing with a choice of quantifiers.\n\nNo syntax in my mind. There could be precedents in SMT-solvers which could be copied.",
    "created_at": "2015-11-28T13:47:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338466",
    "user": "https://github.com/rwst"
}
```

<a id='comment:45'></a>
Replying to [vdelecroix](#comment%3A44):
> Replying to [rws](#comment%3A43):
> > Agreed if we look at equalities. Inequalities can be undecidable if we know one side has no order relation. I don't know if there could be other reasons. I haven't decided yet if `__nonzero__` should throw an exception for this.

> 
> What do you mean? Do you have an example of such inequality?

Comparison of real/infinity with complex.

> > >`for all x, exists y, for all z  expr(x,y,z)`

> > Such will not be in the first versions.
> 
> But do you have a syntax in mind for it. It would be cool to not multiply ad libitum the `satisfiable`, `holds`, etc which are exactly the same thing with a choice of quantifiers.

No syntax in my mind. There could be precedents in SMT-solvers which could be copied.



---

archive/issue_comments_338467.json:
```json
{
    "body": "<a id='comment:46'></a>\nReplying to [rws](#comment%3A45):\n> Replying to [vdelecroix](#comment%3A44):\n> > Replying to [rws](#comment%3A43):\n> > > Agreed if we look at equalities. Inequalities can be undecidable if we know one side has no order relation. I don't know if there could be other reasons. I haven't decided yet if `__nonzero__` should throw an exception for this.\n\n> > \n> > What do you mean? Do you have an example of such inequality?\n\n> Comparison of real/infinity with complex.\n\nThen I would qualify this as undefined and not undecidable. The latter introduces confusion with the standard notion related to proofs and computability.",
    "created_at": "2015-11-28T13:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338467",
    "user": "https://github.com/videlec"
}
```

<a id='comment:46'></a>
Replying to [rws](#comment%3A45):
> Replying to [vdelecroix](#comment%3A44):
> > Replying to [rws](#comment%3A43):
> > > Agreed if we look at equalities. Inequalities can be undecidable if we know one side has no order relation. I don't know if there could be other reasons. I haven't decided yet if `__nonzero__` should throw an exception for this.

> > 
> > What do you mean? Do you have an example of such inequality?

> Comparison of real/infinity with complex.

Then I would qualify this as undefined and not undecidable. The latter introduces confusion with the standard notion related to proofs and computability.



---

archive/issue_comments_338468.json:
```json
{
    "body": "<a id='comment:47'></a>\nI will upload a fresh branch with this.",
    "created_at": "2016-02-24T13:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338468",
    "user": "https://github.com/rwst"
}
```

<a id='comment:47'></a>
I will upload a fresh branch with this.



---

archive/issue_comments_338469.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:\n * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows alpha order of lhs and rhs\n-* `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`\n+* `satisfiable(rel)` attempting simplification/proof, returning `(Yes,example)/False/Undefined`\n * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set\n-* `holds(rel)` attempting simplification/proof, returning `True`/`False`, throwing `NotImplementedError` \n+* `holds(rel)`, quick alias of `satisfiable` (later without giving an example)\n * `ex.is_zero(simplify=False)` (default) calling the fast `bool(ex==0)`\n * `ex.is_zero(simplify=True)` attempting simplification/proof by calling `ex==0`.holds()\n * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)\n``````\n",
    "created_at": "2016-02-25T09:21:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338469",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
 Symbolic expressions may be part of type-neutral computations, e.g. matrices, polynomials. Developers do not expect proof machinery to crank up when writing `if x!=0`, but this is just what happens. So `bool(x1!=x2)` should be changed to mean `not (x1-x2).is_trivial_zero()` for symbolic `x`. The ticket should provide a different interface for cases requiring simplification/proof:
 * `bool(rel)` equivalent to `(not)(LHS-RHS).is_trivial_zero()` for ==,!= ; and for <, >, <=, >= the result follows alpha order of lhs and rhs
-* `satisfiable(rel)` returning `(Yes,example)/No/Undecidable/NotImplemented`
+* `satisfiable(rel)` attempting simplification/proof, returning `(Yes,example)/False/Undefined`
 * `solve(rel)` in case of `satisfiable=Yes` returning the full solution set
-* `holds(rel)` attempting simplification/proof, returning `True`/`False`, throwing `NotImplementedError` 
+* `holds(rel)`, quick alias of `satisfiable` (later without giving an example)
 * `ex.is_zero(simplify=False)` (default) calling the fast `bool(ex==0)`
 * `ex.is_zero(simplify=True)` attempting simplification/proof by calling `ex==0`.holds()
 * `prove(rel)` showing more or less steps of simplification (which is out of reach for the moment)
``````




---

archive/issue_comments_338470.json:
```json
{
    "body": "<a id='comment:50'></a>\nReplying to [rws](#comment%3A5):\n> > You should also have a look to `sage/tests/*` where I am sure some of the things are broken.\n\n> Three fails.\n\nWhich probably means lots of user code being broken, see my experience on [sage-devel](https://groups.google.com/d/topic/sage-devel/ojHqBy7oUVU/discussion).\n\nIn my opinion, for any change in this area, be it fixing a perceived bug or not, we definitely need a deprecation. We do not need on what user's code relies and `sage/tests/*` is in no ways a representative sample (but even some code fails there).\n\nThe existing deprecation framework may not be enough: for some time, old and new code should be compared and a warning should be raised if the outcome is different. Users should be able to silence this warning once they have converted their code to the new behaviour; and the sage library should also silence the warning for its own use only. No idea how to implement this nicely, but I see no other option.",
    "created_at": "2016-02-26T06:32:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338470",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:50'></a>
Replying to [rws](#comment%3A5):
> > You should also have a look to `sage/tests/*` where I am sure some of the things are broken.

> Three fails.

Which probably means lots of user code being broken, see my experience on [sage-devel](https://groups.google.com/d/topic/sage-devel/ojHqBy7oUVU/discussion).

In my opinion, for any change in this area, be it fixing a perceived bug or not, we definitely need a deprecation. We do not need on what user's code relies and `sage/tests/*` is in no ways a representative sample (but even some code fails there).

The existing deprecation framework may not be enough: for some time, old and new code should be compared and a warning should be raised if the outcome is different. Users should be able to silence this warning once they have converted their code to the new behaviour; and the sage library should also silence the warning for its own use only. No idea how to implement this nicely, but I see no other option.



---

archive/issue_comments_338471.json:
```json
{
    "body": "<a id='comment:51'></a>\nThe easiest way for the user to see if behaviour has changed is to give the command `git diff original-version /path/to/file` and check if doctests were changed. Since the system is huge and users have different needs you either need to do this yourself or Sage automates this by providing some sort of subscription service. Since Sage cannot know which of your changes should be monitored for different behaviour (because there is no distinction between a user adding code and a developer adding code), you would need to initiate this subscription yourself. Anyway, a deprecation message every time `bool(relation)` is called is out of the question, much more so for all possible changes to Sage. Also, performance would suffer because of all the checks.\n\nYou seem to be of the opinion that there exists a representative sample of tests that covers all eventualities. Needless to say there isn't---however, Sage development tries to come close with the code coverage tools. I think a good dose of realism can be gathered from, for example https://www.youtube.com/watch?v=VfRVz1iqgKU",
    "created_at": "2016-02-27T07:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338471",
    "user": "https://github.com/rwst"
}
```

<a id='comment:51'></a>
The easiest way for the user to see if behaviour has changed is to give the command `git diff original-version /path/to/file` and check if doctests were changed. Since the system is huge and users have different needs you either need to do this yourself or Sage automates this by providing some sort of subscription service. Since Sage cannot know which of your changes should be monitored for different behaviour (because there is no distinction between a user adding code and a developer adding code), you would need to initiate this subscription yourself. Anyway, a deprecation message every time `bool(relation)` is called is out of the question, much more so for all possible changes to Sage. Also, performance would suffer because of all the checks.

You seem to be of the opinion that there exists a representative sample of tests that covers all eventualities. Needless to say there isn't---however, Sage development tries to come close with the code coverage tools. I think a good dose of realism can be gathered from, for example https://www.youtube.com/watch?v=VfRVz1iqgKU



---

archive/issue_comments_338472.json:
```json
{
    "body": "<a id='comment:52'></a>\nThe discussion is perhaps theoretical at this moment because there is no branch attached, so I do not know what will actually change.\n\nReplying to [rws](#comment%3A51):\n> The easiest way for the user to see if behaviour has changed is to give the command `git diff original-version /path/to/file` and check if doctests were changed. Since the system is huge and users have different needs you either need to do this yourself or Sage automates this by providing some sort of subscription service.\n\n\nWe are speaking about users, not developers.\n\nThe most we could perhaps expect from users is to read well-written release notes giving a hint what changed. We do not currently have those.\n\n> Since Sage cannot know which of your changes should be monitored for different behaviour (because there is no distinction between a user adding code and a developer adding code), you would need to initiate this subscription yourself. Anyway, a deprecation message every time `bool(relation)` is called is out of the question, much more so for all possible changes to Sage. Also, performance would suffer because of all the checks.\n\n\nLibrary code could call a *new* method or something like that. But it is certainly ugly.\n\nWe do have a deprecation policy for much less serious cases: if a method is renamed, we have a one-year deprecation period; the only harm done is that a user gets a message that a method does no longer exist.\n\nChanging the behaviour of `bool(...)` **silently** leads to different results which might be wrong.\n\nI see the following options:\n1. Not changing fundamental behaviour.\n2. Changing fundamental behaviour at some really **major** release where we support old user code for much longer than usual (compare Python 2/Python 3)\n3. Some kind of deprecation system\n\nSimply making a fundamental change in a random version (say 7.2) and letting users alone with their old code is not an option for me.\n\n> You seem to be of the opinion that there exists a representative sample of tests that covers all eventualities.\n\n\nCertainly not, I think the contrary.\n\nI was surprised that at some point on this ticket, changed behaviour was caught by tests in `src/sage/tests`, given that those tests there seem to be quite random.",
    "created_at": "2016-02-28T05:41:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338472",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:52'></a>
The discussion is perhaps theoretical at this moment because there is no branch attached, so I do not know what will actually change.

Replying to [rws](#comment%3A51):
> The easiest way for the user to see if behaviour has changed is to give the command `git diff original-version /path/to/file` and check if doctests were changed. Since the system is huge and users have different needs you either need to do this yourself or Sage automates this by providing some sort of subscription service.


We are speaking about users, not developers.

The most we could perhaps expect from users is to read well-written release notes giving a hint what changed. We do not currently have those.

> Since Sage cannot know which of your changes should be monitored for different behaviour (because there is no distinction between a user adding code and a developer adding code), you would need to initiate this subscription yourself. Anyway, a deprecation message every time `bool(relation)` is called is out of the question, much more so for all possible changes to Sage. Also, performance would suffer because of all the checks.


Library code could call a *new* method or something like that. But it is certainly ugly.

We do have a deprecation policy for much less serious cases: if a method is renamed, we have a one-year deprecation period; the only harm done is that a user gets a message that a method does no longer exist.

Changing the behaviour of `bool(...)` **silently** leads to different results which might be wrong.

I see the following options:
1. Not changing fundamental behaviour.
2. Changing fundamental behaviour at some really **major** release where we support old user code for much longer than usual (compare Python 2/Python 3)
3. Some kind of deprecation system

Simply making a fundamental change in a random version (say 7.2) and letting users alone with their old code is not an option for me.

> You seem to be of the opinion that there exists a representative sample of tests that covers all eventualities.


Certainly not, I think the contrary.

I was surprised that at some point on this ticket, changed behaviour was caught by tests in `src/sage/tests`, given that those tests there seem to be quite random.



---

archive/issue_comments_338473.json:
```json
{
    "body": "<a id='comment:53'></a>\nReplying to [cheuberg](#comment%3A52):\n> \n> The discussion is perhaps theoretical at this moment because there is no branch attached, so I do not know what will actually change.\n\nThe branch is not listed in the ticket field but the recent commits are visible in the comments. The branch can be checked out via `git trac checkout 19040 --branch=u/rws/19040-2`.",
    "created_at": "2016-02-28T08:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338473",
    "user": "https://github.com/rwst"
}
```

<a id='comment:53'></a>
Replying to [cheuberg](#comment%3A52):
> 
> The discussion is perhaps theoretical at this moment because there is no branch attached, so I do not know what will actually change.

The branch is not listed in the ticket field but the recent commits are visible in the comments. The branch can be checked out via `git trac checkout 19040 --branch=u/rws/19040-2`.



---

archive/issue_comments_338474.json:
```json
{
    "body": "<a id='comment:55'></a>\nA good way to contribute to this is to review #16397. Mixed order comparison is part of the branch mentioned above.",
    "created_at": "2016-03-09T03:37:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19040#issuecomment-338474",
    "user": "https://github.com/rwst"
}
```

<a id='comment:55'></a>
A good way to contribute to this is to review #16397. Mixed order comparison is part of the branch mentioned above.
