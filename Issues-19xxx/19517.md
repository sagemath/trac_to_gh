# Issue 19517: Graphs: canonical_label() and several errors

archive/issues_019280.json:
```json
{
    "assignees": [],
    "body": "On `generic_graph.py` function `canonical_label()` parameter `return_graph`:\n\n- The parameter has no effect when `algorithm='sage'`:\n\n```\nsage: G = Graph({10: [20]})\nsage: G.canonical_label(algorithm='sage', return_graph=False)\nGraph on 2 vertices\nsage: G.canonical_label(algorithm='sage', return_graph=True)\nGraph on 2 vertices\n```\n\ncompared to\n\n```\nsage: G.canonical_label(algorithm='bliss', return_graph=False)\n[(1, 0)]\nsage: G.canonical_label(algorithm='bliss', return_graph=True)\nGraph on 2 vertices\n```\n\n- Docstring is badly formulated. It should say that it returns list of edges of canonically labelled graph.\n\n- Indentation in docstring is wrong.\n\n- (And is it meaningful? Why not return dictionary of vertex relabeling instead of edges?)\n\nSame function has other problem:\n\n- Canonically relabeled graph forgets vertex positioning. This is contrary to `relabel` that remembers them. This can be seen with\n\n```\nP = graphs.PetersenGraph()\nP1 = graphs.PetersenGraph()\nP1.relabel(lambda x: chr(ord('a')+x))\nP2 = P1.canonical_label()\n\nP.show()\nP1.show()\nP2.show()\n```\n\n\nCC:  @dcoudert\n\nComponent: **graph theory**\n\nAuthor: **Jori M\u00e4ntysalo**\n\nBranch/Commit: **[`d8dc267`](https://github.com/sagemath/sagetrac-mirror/commit/d8dc2670e73fa83f7b40f82e73b2b5028449cfac)**\n\nReviewer: **David Coudert**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19517_\n\n",
    "closed_at": "2017-11-08T19:24:31Z",
    "created_at": "2015-11-04T08:26:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Graphs: canonical_label() and several errors",
    "type": "issue",
    "updated_at": "2017-11-08T19:24:31Z",
    "url": "https://github.com/sagemath/sage/issues/19517",
    "user": "https://github.com/jm58660"
}
```
On `generic_graph.py` function `canonical_label()` parameter `return_graph`:

- The parameter has no effect when `algorithm='sage'`:

```
sage: G = Graph({10: [20]})
sage: G.canonical_label(algorithm='sage', return_graph=False)
Graph on 2 vertices
sage: G.canonical_label(algorithm='sage', return_graph=True)
Graph on 2 vertices
```

compared to

```
sage: G.canonical_label(algorithm='bliss', return_graph=False)
[(1, 0)]
sage: G.canonical_label(algorithm='bliss', return_graph=True)
Graph on 2 vertices
```

- Docstring is badly formulated. It should say that it returns list of edges of canonically labelled graph.

- Indentation in docstring is wrong.

- (And is it meaningful? Why not return dictionary of vertex relabeling instead of edges?)

Same function has other problem:

- Canonically relabeled graph forgets vertex positioning. This is contrary to `relabel` that remembers them. This can be seen with

```
P = graphs.PetersenGraph()
P1 = graphs.PetersenGraph()
P1.relabel(lambda x: chr(ord('a')+x))
P2 = P1.canonical_label()

P.show()
P1.show()
P2.show()
```


CC:  @dcoudert

Component: **graph theory**

Author: **Jori Mäntysalo**

Branch/Commit: **[`d8dc267`](https://github.com/sagemath/sagetrac-mirror/commit/d8dc2670e73fa83f7b40f82e73b2b5028449cfac)**

Reviewer: **David Coudert**

_Issue created by migration from https://trac.sagemath.org/ticket/19517_





---

archive/issue_events_274124.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-11-04T08:26:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-274124"
}
```



---

archive/issue_events_274125.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-11-04T08:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-274125"
}
```



---

archive/issue_events_274126.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-11-04T08:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-274126"
}
```



---

archive/issue_events_274127.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-11-04T08:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-274127"
}
```



---

archive/issue_comments_277729.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nHello !\n\nAll your remarks seem correct (and easy to fix) but I have no idea what the problem with the bliss package comes from `O_o`\n\nNathann",
    "created_at": "2015-11-05T14:44:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277729",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:1" align="right">comment:1</div>

Hello !

All your remarks seem correct (and easy to fix) but I have no idea what the problem with the bliss package comes from `O_o`

Nathann



---

archive/issue_comments_277730.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThere is something strange with `bliss` installation, see https://groups.google.com/forum/#!topic/sage-devel/_1OYNuVNltM\n\n`return_graph` is not converse of `inplace`. I guess. It is badly documented. What is the meaning of it's output? A list of pairs somehow... Try\n\n```\nG = graphs.PetersenGraph()\nG.relabel(lambda x: chr(ord('a')+x))\nG.canonical_label(return_graph=False)\n```\n\nAnd why it deletes vertex positioning contraty to `relabel`? Try for example\n\n```\nG = graphs.PetersenGraph()\nG.relabel(lambda x: chr(ord('a')+x))\nG.show()\nG = G.canonical_label()\nG.canonical_label().show()\n```",
    "created_at": "2015-11-05T15:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277730",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:2" align="right">comment:2</div>

There is something strange with `bliss` installation, see https://groups.google.com/forum/#!topic/sage-devel/_1OYNuVNltM

`return_graph` is not converse of `inplace`. I guess. It is badly documented. What is the meaning of it's output? A list of pairs somehow... Try

```
G = graphs.PetersenGraph()
G.relabel(lambda x: chr(ord('a')+x))
G.canonical_label(return_graph=False)
```

And why it deletes vertex positioning contraty to `relabel`? Try for example

```
G = graphs.PetersenGraph()
G.relabel(lambda x: chr(ord('a')+x))
G.show()
G = G.canonical_label()
G.canonical_label().show()
```



---

archive/issue_comments_277731.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n> There is something strange with `bliss` installation, see https://groups.google.com/forum/#!topic/sage-devel/_1OYNuVNltM\n\nSomething like that happened during the last update of bliss, but Jeroen noticed it at the last minute:\n[#19483 comment:15](https://github.com/sagemath/sage/issues/19483#comment:15)\n\n> `return_graph` is not converse of `inplace`. I guess. It is badly documented. What is the meaning of it's output?\n\n(assuming that you are talking of 'canonical_label')\n\n`return_graph` tells whether or not you want the actual graph. Somethimes you only need the labelling, and not the whole graph.\n\n\n A list of pairs somehow... Try\n> \n> ```\n> G = graphs.PetersenGraph()\n> G.relabel(lambda x: chr(ord('a')+x))\n> G.canonical_label(return_graph=False)\n> ```\n\nThese pairs are the edges of the relabeled graph\n\n```\nsage: Graph(G.canonical_label(return_graph=False)) == graphs.PetersenGraph().canonical_label()\nTrue\n```\n\nCan't say that I see the point to return this instead of a `Graph` object...\n\n> And why it deletes vertex positioning contraty to `relabel`? Try for example\n\nProbably because the graph is built from the list of edges, instead of being built as a relabelled copy of the original graph. Why do you ask these questions like there is a mystical explanation behind? It's a bug, that's all. It just needs to be fixed.\n\nNathann",
    "created_at": "2015-11-05T15:49:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277731",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:3" align="right">comment:3</div>

> There is something strange with `bliss` installation, see https://groups.google.com/forum/#!topic/sage-devel/_1OYNuVNltM

Something like that happened during the last update of bliss, but Jeroen noticed it at the last minute:
[#19483 comment:15](https://github.com/sagemath/sage/issues/19483#comment:15)

> `return_graph` is not converse of `inplace`. I guess. It is badly documented. What is the meaning of it's output?

(assuming that you are talking of 'canonical_label')

`return_graph` tells whether or not you want the actual graph. Somethimes you only need the labelling, and not the whole graph.


 A list of pairs somehow... Try
> 
> ```
> G = graphs.PetersenGraph()
> G.relabel(lambda x: chr(ord('a')+x))
> G.canonical_label(return_graph=False)
> ```

These pairs are the edges of the relabeled graph

```
sage: Graph(G.canonical_label(return_graph=False)) == graphs.PetersenGraph().canonical_label()
True
```

Can't say that I see the point to return this instead of a `Graph` object...

> And why it deletes vertex positioning contraty to `relabel`? Try for example

Probably because the graph is built from the list of edges, instead of being built as a relabelled copy of the original graph. Why do you ask these questions like there is a mystical explanation behind? It's a bug, that's all. It just needs to be fixed.

Nathann



---

archive/issue_comments_277732.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,30 +1,42 @@\n-Several problems I noticed on `generic_graph.py`:\n+On `generic_graph.py` function `canonical_label()` parameter `return_graph`:\n \n-- Indentation in docstring for `return_graph` is wrong.\n-\n-- That parameter seems to have no effect when `algorithm='sage'`:\n+- The parameter has no effect when `algorithm='sage'`:\n \n ```\n sage: G = Graph({10: [20]})\n sage: G.canonical_label(algorithm='sage', return_graph=False)\n Graph on 2 vertices\n-sage: G.vertices()\n-[10, 20]\n sage: G.canonical_label(algorithm='sage', return_graph=True)\n Graph on 2 vertices\n-sage: G.vertices()\n-[10, 20]\n ```\n \n-- I installed bliss with `sage -i` and it seems to be fine. I got normal messages from gcc and then `Successfully installed bliss-0.73`, and  `'bliss' in sage.misc.package.optional_packages()[0]` says `True`. But still\n+compared to\n \n ```\n+sage: G.canonical_label(algorithm='bliss', return_graph=False)\n+[(1, 0)]\n sage: G.canonical_label(algorithm='bliss', return_graph=True)\n----------------------------------------------------------------------------\n-ImportError                               Traceback (most recent call last)\n- . . . \n-ImportError: You must install the 'bliss' package to run this command.\n+Graph on 2 vertices\n ```\n \n-- Why the name of the parameter `return_graph` in this, but `inplace` in all other functions?\n+- Docstring is badly formulated. It should say that it returns list of edges of canonically labelled graph.\n \n+- Indentation in docstring is wrong.\n+\n+- (And is it meaningful? Why not return dictionary of vertex relabeling instead of edges?)\n+\n+Same function has other problem:\n+\n+- Canonically relabeled graph forgets vertex positioning. This is contrary to `relabel` that remembers them. This can be seen with\n+\n+```\n+P = graphs.PetersenGraph()\n+P1 = graphs.PetersenGraph()\n+P1.relabel(lambda x: chr(ord('a')+x))\n+P2 = P1.canonical_label()\n+\n+P.show()\n+P1.show()\n+P2.show()\n+```\n+\n``````\n",
    "created_at": "2015-11-06T06:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277732",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,30 +1,42 @@
-Several problems I noticed on `generic_graph.py`:
+On `generic_graph.py` function `canonical_label()` parameter `return_graph`:
 
-- Indentation in docstring for `return_graph` is wrong.
-
-- That parameter seems to have no effect when `algorithm='sage'`:
+- The parameter has no effect when `algorithm='sage'`:
 
 ```
 sage: G = Graph({10: [20]})
 sage: G.canonical_label(algorithm='sage', return_graph=False)
 Graph on 2 vertices
-sage: G.vertices()
-[10, 20]
 sage: G.canonical_label(algorithm='sage', return_graph=True)
 Graph on 2 vertices
-sage: G.vertices()
-[10, 20]
 ```
 
-- I installed bliss with `sage -i` and it seems to be fine. I got normal messages from gcc and then `Successfully installed bliss-0.73`, and  `'bliss' in sage.misc.package.optional_packages()[0]` says `True`. But still
+compared to
 
 ```
+sage: G.canonical_label(algorithm='bliss', return_graph=False)
+[(1, 0)]
 sage: G.canonical_label(algorithm='bliss', return_graph=True)
----------------------------------------------------------------------------
-ImportError                               Traceback (most recent call last)
- . . . 
-ImportError: You must install the 'bliss' package to run this command.
+Graph on 2 vertices
 ```
 
-- Why the name of the parameter `return_graph` in this, but `inplace` in all other functions?
+- Docstring is badly formulated. It should say that it returns list of edges of canonically labelled graph.
 
+- Indentation in docstring is wrong.
+
+- (And is it meaningful? Why not return dictionary of vertex relabeling instead of edges?)
+
+Same function has other problem:
+
+- Canonically relabeled graph forgets vertex positioning. This is contrary to `relabel` that remembers them. This can be seen with
+
+```
+P = graphs.PetersenGraph()
+P1 = graphs.PetersenGraph()
+P1.relabel(lambda x: chr(ord('a')+x))
+P2 = P1.canonical_label()
+
+P.show()
+P1.show()
+P2.show()
+```
+
``````




---

archive/issue_comments_277733.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nOK, modified the description. I do not think that forgetting vertex positions is necessarily a bug. But to remember them on `relabel()` and to forget on `canonical_label()` is.",
    "created_at": "2015-11-06T06:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277733",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:4" align="right">comment:4</div>

OK, modified the description. I do not think that forgetting vertex positions is necessarily a bug. But to remember them on `relabel()` and to forget on `canonical_label()` is.



---

archive/issue_comments_277734.json:
```json
{
    "body": "Branch: **[u/jmantysalo/graph-can-label-pos](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/graph-can-label-pos)**",
    "created_at": "2017-10-30T11:00:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277734",
    "user": "https://github.com/jm58660"
}
```

Branch: **[u/jmantysalo/graph-can-label-pos](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/graph-can-label-pos)**



---

archive/issue_comments_277735.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nGetting back to this old ticket... First of all I changed the check for parameters to better understand what happens. Now `algorithm='bliss'` will always raise an error if Bliss is not installed, even when the graph has multiedges and Bliss could not be used anyway.\n\nI think that this should just compute canonical relabeling and call `.relabel()`. That would take care the problem of vertex positions.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/753b8e03e2ea177bd51ae49711ed762172f32730\"><code>753b8e0</code></a></td><td><code>Modify parameter checking.</code></td></tr></table>\n",
    "created_at": "2017-10-30T11:09:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277735",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:6" align="right">comment:6</div>

Getting back to this old ticket... First of all I changed the check for parameters to better understand what happens. Now `algorithm='bliss'` will always raise an error if Bliss is not installed, even when the graph has multiedges and Bliss could not be used anyway.

I think that this should just compute canonical relabeling and call `.relabel()`. That would take care the problem of vertex positions.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/753b8e03e2ea177bd51ae49711ed762172f32730"><code>753b8e0</code></a></td><td><code>Modify parameter checking.</code></td></tr></table>




---

archive/issue_comments_277736.json:
```json
{
    "body": "Commit: **[`753b8e0`](https://github.com/sagemath/sagetrac-mirror/commit/753b8e03e2ea177bd51ae49711ed762172f32730)**",
    "created_at": "2017-10-30T11:09:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277736",
    "user": "https://github.com/jm58660"
}
```

Commit: **[`753b8e0`](https://github.com/sagemath/sagetrac-mirror/commit/753b8e03e2ea177bd51ae49711ed762172f32730)**



---

archive/issue_events_274128.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-10-30T12:45:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-274128"
}
```



---

archive/issue_events_274129.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-10-30T12:45:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-274129"
}
```



---

archive/issue_comments_277737.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2017-10-30T12:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277737",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_277738.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIt's true that this method needs significant cleaning. \n- The first line of description is not standard and could be `Return a canonical labeling of the vertices of this (di)graph `.\n- In the INPUT block, the parameters could be better explained\n- an OUTPUT block could be useful as the output depends on the parameters\netc.\n\n\n\none doctest fails because I have bliss installed. So you could do:\n\n```\n-            sage: G.canonical_label(edge_labels=True, certificate=True)\n-            (Graph on 5 vertices, {0: 4, 1: 3, 2: 0, 3: 1, 4: 2})\n+            sage: G.canonical_label(edge_labels=True, certificate=True, algorithm='sage')\n+            (Graph on 5 vertices, {0: 4, 1: 3, 2: 0, 3: 1, 4: 2})\n+            sage: G.canonical_label(edge_labels=True, certificate=True, algorithm='bliss') # optional - bliss\n+            (Graph on 5 vertices, {{0: 4, 1: 3, 2: 1, 3: 0, 4: 2})\n```\nThe last 2 lines might be placed with the examples using bliss.",
    "created_at": "2017-10-30T12:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277738",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:7" align="right">comment:7</div>

It's true that this method needs significant cleaning. 
- The first line of description is not standard and could be `Return a canonical labeling of the vertices of this (di)graph `.
- In the INPUT block, the parameters could be better explained
- an OUTPUT block could be useful as the output depends on the parameters
etc.



one doctest fails because I have bliss installed. So you could do:

```
-            sage: G.canonical_label(edge_labels=True, certificate=True)
-            (Graph on 5 vertices, {0: 4, 1: 3, 2: 0, 3: 1, 4: 2})
+            sage: G.canonical_label(edge_labels=True, certificate=True, algorithm='sage')
+            (Graph on 5 vertices, {0: 4, 1: 3, 2: 0, 3: 1, 4: 2})
+            sage: G.canonical_label(edge_labels=True, certificate=True, algorithm='bliss') # optional - bliss
+            (Graph on 5 vertices, {{0: 4, 1: 3, 2: 1, 3: 0, 4: 2})
```
The last 2 lines might be placed with the examples using bliss.



---

archive/issue_comments_277739.json:
```json
{
    "body": "Changed commit from **[`753b8e0`](https://github.com/sagemath/sagetrac-mirror/commit/753b8e03e2ea177bd51ae49711ed762172f32730)** to **[`81f337a`](https://github.com/sagemath/sagetrac-mirror/commit/81f337a4f9a5ff89d4d9ab561441b795bbf40a31)**",
    "created_at": "2017-10-31T06:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277739",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`753b8e0`](https://github.com/sagemath/sagetrac-mirror/commit/753b8e03e2ea177bd51ae49711ed762172f32730)** to **[`81f337a`](https://github.com/sagemath/sagetrac-mirror/commit/81f337a4f9a5ff89d4d9ab561441b795bbf40a31)**



---

archive/issue_comments_277740.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81f337a4f9a5ff89d4d9ab561441b795bbf40a31\"><code>81f337a</code></a></td><td><code>Forbidden parameter combination.</code></td></tr></table>\n",
    "created_at": "2017-10-31T06:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277740",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81f337a4f9a5ff89d4d9ab561441b795bbf40a31"><code>81f337a</code></a></td><td><code>Forbidden parameter combination.</code></td></tr></table>




---

archive/issue_comments_277741.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAh, I did not notice the line `not edge_labels` I removed. Now corrected that one.\n\n(These must also be said in `INPUT`section.)",
    "created_at": "2017-10-31T06:16:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277741",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:9" align="right">comment:9</div>

Ah, I did not notice the line `not edge_labels` I removed. Now corrected that one.

(These must also be said in `INPUT`section.)



---

archive/issue_comments_277742.json:
```json
{
    "body": "Changed commit from **[`81f337a`](https://github.com/sagemath/sagetrac-mirror/commit/81f337a4f9a5ff89d4d9ab561441b795bbf40a31)** to **[`ac92524`](https://github.com/sagemath/sagetrac-mirror/commit/ac925246354752b6f27e6643efd2a7c6fccd0cd5)**",
    "created_at": "2017-10-31T08:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277742",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`81f337a`](https://github.com/sagemath/sagetrac-mirror/commit/81f337a4f9a5ff89d4d9ab561441b795bbf40a31)** to **[`ac92524`](https://github.com/sagemath/sagetrac-mirror/commit/ac925246354752b6f27e6643efd2a7c6fccd0cd5)**



---

archive/issue_comments_277743.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac925246354752b6f27e6643efd2a7c6fccd0cd5\"><code>ac92524</code></a></td><td><code>Docstring formatting.</code></td></tr></table>\n",
    "created_at": "2017-10-31T08:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277743",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac925246354752b6f27e6643efd2a7c6fccd0cd5"><code>ac92524</code></a></td><td><code>Docstring formatting.</code></td></tr></table>




---

archive/issue_comments_277744.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nJust noticed that Bliss with `return_graph=False` returns set of edges, not a dictionary of mapping. Hence we must copy a part of `relabel`:\n\n```\nattributes_to_update = ('_pos', '_assoc', '_embedding')\nfor attr in attributes_to_update:\n    if hasattr(self, attr) and getattr(self, attr) is not None:\n        new_attr = {}\n        for v,value in iteritems(getattr(self, attr)):\n            new_attr[perm[v]] = value\n\n        setattr(self, attr, new_attr)\n```",
    "created_at": "2017-11-01T05:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277744",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:11" align="right">comment:11</div>

Just noticed that Bliss with `return_graph=False` returns set of edges, not a dictionary of mapping. Hence we must copy a part of `relabel`:

```
attributes_to_update = ('_pos', '_assoc', '_embedding')
for attr in attributes_to_update:
    if hasattr(self, attr) and getattr(self, attr) is not None:
        new_attr = {}
        for v,value in iteritems(getattr(self, attr)):
            new_attr[perm[v]] = value

        setattr(self, attr, new_attr)
```



---

archive/issue_comments_277745.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nForget, I was blind when writing my last comment.\n\nWe could do something like\n\n```\n         if algorithm == 'bliss':\n            vert_dict = canonical_form(self, partition, certificate=True)[1]\n            return self.relabel(vert_dict, inplace=not return_graph)\n```\n\nmaybe... But what the hell this function is supposed to do??? `certificate` seems a wrong word here, but at least `certificate=True` works similarly with both `algorithm='sage'` and `algorithm='bliss'`.",
    "created_at": "2017-11-01T05:29:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277745",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:12" align="right">comment:12</div>

Forget, I was blind when writing my last comment.

We could do something like

```
         if algorithm == 'bliss':
            vert_dict = canonical_form(self, partition, certificate=True)[1]
            return self.relabel(vert_dict, inplace=not return_graph)
```

maybe... But what the hell this function is supposed to do??? `certificate` seems a wrong word here, but at least `certificate=True` works similarly with both `algorithm='sage'` and `algorithm='bliss'`.



---

archive/issue_comments_277746.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nJust came here after the sage-devel post by Jori. Is there anything controversial here? Or were you just fishing for reviewers :-)",
    "created_at": "2017-11-02T23:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277746",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Just came here after the sage-devel post by Jori. Is there anything controversial here? Or were you just fishing for reviewers :-)



---

archive/issue_comments_277747.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@jdemeyer](#comment%3A13):\n> Just came here after the sage-devel post by Jori. Is there anything controversial here?\n\nI guess not, but not sure, so I write a short message to sage-devel.\n\n> Or were you just fishing for reviewers :-)\n\nNot really. It would be more helpful to get comments about what this should do. `certificate` vs. `return_graph` - whaat?",
    "created_at": "2017-11-03T04:48:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277747",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@jdemeyer](#comment%3A13):
> Just came here after the sage-devel post by Jori. Is there anything controversial here?

I guess not, but not sure, so I write a short message to sage-devel.

> Or were you just fishing for reviewers :-)

Not really. It would be more helpful to get comments about what this should do. `certificate` vs. `return_graph` - whaat?



---

archive/issue_comments_277748.json:
```json
{
    "body": "Changed commit from **[`ac92524`](https://github.com/sagemath/sagetrac-mirror/commit/ac925246354752b6f27e6643efd2a7c6fccd0cd5)** to **[`b233fdf`](https://github.com/sagemath/sagetrac-mirror/commit/b233fdf562e91531b70da45e98da9b7e228f6046)**",
    "created_at": "2017-11-03T05:45:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277748",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ac92524`](https://github.com/sagemath/sagetrac-mirror/commit/ac925246354752b6f27e6643efd2a7c6fccd0cd5)** to **[`b233fdf`](https://github.com/sagemath/sagetrac-mirror/commit/b233fdf562e91531b70da45e98da9b7e228f6046)**



---

archive/issue_comments_277749.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b233fdf562e91531b70da45e98da9b7e228f6046\"><code>b233fdf</code></a></td><td><code>Some corrections.</code></td></tr></table>\n",
    "created_at": "2017-11-03T05:45:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277749",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b233fdf562e91531b70da45e98da9b7e228f6046"><code>b233fdf</code></a></td><td><code>Some corrections.</code></td></tr></table>




---

archive/issue_comments_277750.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nSome modifications to docstring. Now also vertex positions are preserved even when Bliss is used.\n\nMust add many tests to this.",
    "created_at": "2017-11-03T05:46:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277750",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:16" align="right">comment:16</div>

Some modifications to docstring. Now also vertex positions are preserved even when Bliss is used.

Must add many tests to this.



---

archive/issue_comments_277751.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/39ce1ef11371c37708ca72c72b26174136b1c2d7\"><code>39ce1ef</code></a></td><td><code>Several minor modifications.</code></td></tr></table>\n",
    "created_at": "2017-11-03T08:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277751",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/39ce1ef11371c37708ca72c72b26174136b1c2d7"><code>39ce1ef</code></a></td><td><code>Several minor modifications.</code></td></tr></table>




---

archive/issue_comments_277752.json:
```json
{
    "body": "Changed commit from **[`b233fdf`](https://github.com/sagemath/sagetrac-mirror/commit/b233fdf562e91531b70da45e98da9b7e228f6046)** to **[`39ce1ef`](https://github.com/sagemath/sagetrac-mirror/commit/39ce1ef11371c37708ca72c72b26174136b1c2d7)**",
    "created_at": "2017-11-03T08:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277752",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b233fdf`](https://github.com/sagemath/sagetrac-mirror/commit/b233fdf562e91531b70da45e98da9b7e228f6046)** to **[`39ce1ef`](https://github.com/sagemath/sagetrac-mirror/commit/39ce1ef11371c37708ca72c72b26174136b1c2d7)**



---

archive/issue_comments_277753.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nCurrently Bliss have no verbose mode, and the docstring of `search_tree` says \"verbosity \u2013 currently ignored\". Hence I just removed the parameter.\n\nI changed docstring and allowed `return_graph=False` only when `bliss=True` is explicitly said.\n\nDocstring modified.\n\nNow this needs comments.",
    "created_at": "2017-11-03T08:35:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277753",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:18" align="right">comment:18</div>

Currently Bliss have no verbose mode, and the docstring of `search_tree` says "verbosity – currently ignored". Hence I just removed the parameter.

I changed docstring and allowed `return_graph=False` only when `bliss=True` is explicitly said.

Docstring modified.

Now this needs comments.



---

archive/issue_events_274130.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-03T08:37:41Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "title_is": "Graphs: canonical_label() and several errors",
    "title_was": "Graphs: canonical_label() and return_graph -parameter",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-274130"
}
```



---

archive/issue_comments_277754.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nIn `bliss.pyx`:\n- `canonical graph of G. Otherwise, it returns its set of edges.` -> <code>canonical graph of \\`G\\`. Otherwise, it returns its set of edges.</code>\n\nIn `generic_graph.py`:\n- unfortunately you can not remove parameter `verbosity` like that, although it is `currently ignored`. A deprecation warning is needed.\n- In the documentation, you must use <code>\\`\\`True\\`\\`, \\`\\`False\\`\\`</code>\n\nI don't see any place where the `certificate` parameter is used, but it might be useful to some users, no ?\n\nput the ticket to needs review when ready.",
    "created_at": "2017-11-03T11:03:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277754",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:20" align="right">comment:20</div>

In `bliss.pyx`:
- `canonical graph of G. Otherwise, it returns its set of edges.` -> <code>canonical graph of \`G\`. Otherwise, it returns its set of edges.</code>

In `generic_graph.py`:
- unfortunately you can not remove parameter `verbosity` like that, although it is `currently ignored`. A deprecation warning is needed.
- In the documentation, you must use <code>\`\`True\`\`, \`\`False\`\`</code>

I don't see any place where the `certificate` parameter is used, but it might be useful to some users, no ?

put the ticket to needs review when ready.



---

archive/issue_comments_277755.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea621c672a9b38d0fc80f3b11d4931f5014f5fb6\"><code>ea621c6</code></a></td><td><code>Modifications.</code></td></tr></table>\n",
    "created_at": "2017-11-03T18:36:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277755",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea621c672a9b38d0fc80f3b11d4931f5014f5fb6"><code>ea621c6</code></a></td><td><code>Modifications.</code></td></tr></table>




---

archive/issue_comments_277756.json:
```json
{
    "body": "Changed commit from **[`39ce1ef`](https://github.com/sagemath/sagetrac-mirror/commit/39ce1ef11371c37708ca72c72b26174136b1c2d7)** to **[`ea621c6`](https://github.com/sagemath/sagetrac-mirror/commit/ea621c672a9b38d0fc80f3b11d4931f5014f5fb6)**",
    "created_at": "2017-11-03T18:36:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277756",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`39ce1ef`](https://github.com/sagemath/sagetrac-mirror/commit/39ce1ef11371c37708ca72c72b26174136b1c2d7)** to **[`ea621c6`](https://github.com/sagemath/sagetrac-mirror/commit/ea621c672a9b38d0fc80f3b11d4931f5014f5fb6)**



---

archive/issue_comments_277757.json:
```json
{
    "body": "Author: **Jori M\u00e4ntysalo**",
    "created_at": "2017-11-03T18:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277757",
    "user": "https://github.com/jm58660"
}
```

Author: **Jori Mäntysalo**



---

archive/issue_comments_277758.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nFound a bug in my code. Deprecation and your suggestions done.\n\nI also tried to make better examples. Still lacking an example of partition, also I will check that the parameter is really used.",
    "created_at": "2017-11-03T18:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277758",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:22" align="right">comment:22</div>

Found a bug in my code. Deprecation and your suggestions done.

I also tried to make better examples. Still lacking an example of partition, also I will check that the parameter is really used.



---

archive/issue_comments_277759.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/739a9dfc0e6d76bac1a440fddbbffe26ad91ff6b\"><code>739a9df</code></a></td><td><code>Toc entry.</code></td></tr></table>\n",
    "created_at": "2017-11-04T16:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277759",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/739a9dfc0e6d76bac1a440fddbbffe26ad91ff6b"><code>739a9df</code></a></td><td><code>Toc entry.</code></td></tr></table>




---

archive/issue_comments_277760.json:
```json
{
    "body": "Changed commit from **[`ea621c6`](https://github.com/sagemath/sagetrac-mirror/commit/ea621c672a9b38d0fc80f3b11d4931f5014f5fb6)** to **[`739a9df`](https://github.com/sagemath/sagetrac-mirror/commit/739a9dfc0e6d76bac1a440fddbbffe26ad91ff6b)**",
    "created_at": "2017-11-04T16:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277760",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ea621c6`](https://github.com/sagemath/sagetrac-mirror/commit/ea621c672a9b38d0fc80f3b11d4931f5014f5fb6)** to **[`739a9df`](https://github.com/sagemath/sagetrac-mirror/commit/739a9dfc0e6d76bac1a440fddbbffe26ad91ff6b)**



---

archive/issue_events_274131.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-04T17:01:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-274131"
}
```



---

archive/issue_comments_277761.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nMaybe these changes should be integrated to Sage now, and get back to this later? One parameter is still missing examples and documentation, but that can be done later.",
    "created_at": "2017-11-04T17:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277761",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:24" align="right">comment:24</div>

Maybe these changes should be integrated to Sage now, and get back to this later? One parameter is still missing examples and documentation, but that can be done later.



---

archive/issue_events_274132.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-11-05T08:42:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-274132"
}
```



---

archive/issue_events_274133.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-11-05T08:42:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-274133"
}
```



---

archive/issue_comments_277762.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nIn `bliss.pyx`, you changed some <code>\\`\\`G\\`\\`</code> and `G` to <code>\\`G\\`</code>, but this last form is not well taken into account when building the doc. You must also use `r\"\"\"`. You should also do the same in `generic_graph.py`.\n\nIn the toc, you added `Return the canonically labeled graph.` but this is different from the sentence in the method. I suggest to use only `Return the canonical graph`.\n\nYou don't want to use [canonization](https://en.wikipedia.org/wiki/Canonization) but [canonicalization](https://en.wikipedia.org/wiki/Canonicalization), right ? ;)\n\n\nSome comments on the parameters\n\n```\n-        - ``certificate`` -- if ``True``, a dictionary mapping from the\n-          (di)graph to its canonical label will be given.\n+        - ``certificate`` -- boolean (default: ``False``). When set to ``True``,\n+          a dictionary mapping from the vertices of the (di)graph to its canonical\n+          label will also be returned.\n```\n\n```\n-        - ``edge_labels`` -- default ``False``, otherwise allows\n-          only permutations respecting edge labels.\n+        - ``edge_labels`` -- boolean (default: ``False``). When set to ``True``,\n+          allows only permutations respecting edge labels.\n```\n\n```\n-        - ``algorithm``, a string -- the algorithm to use; currently available:\n+        - ``algorithm`` -- a string (default: ``None``). The algorithm to use;\n+          currently available:\n```\n\n```\n-        - ``return_graph`` -- if set, instead of graph return the list of\n-          edges of the the canonical graph; only available when Bliss is\n-          explicitly set as algorithm\n+        - ``return_graph`` -- boolean (default: ``True``). When set to ``False``,\n+          returns the list of edges of the the canonical graph instead of the\n+          canonical graph; only available when ``'bliss'`` is explicitly set as\n+          algorithm.\n```\n\nuse `bliss` and not `Bliss` to avoid confusion.\n\n`return_graph='false'` -> `return_graph=False`\n\n`graph with multiedges` -> `graph with multiple edges` to be consistent with the names of methods (ok, not with the constructor parameter).\n\n\nFailing example in `generic_graph.py`:\n\n```\nFailed example:\n    g\nExpected:\n    Graph on 6 vertices\nGot:\n    Grid Graph for [2, 3]: Graph on 6 vertices\n```\n\nFor parameter `partition`, I tried the following:\n\n```\nsage: G = graphs.PetersenGraph()\nsage: C = G.coloring()\nsage: C\n[[1, 3, 5, 9], [0, 2, 6], [4, 7, 8]]\nsage: C[::-1]\n[[4, 7, 8], [0, 2, 6], [1, 3, 5, 9]]\nsage: A = G.canonical_label(partition=C, algorithm='bliss')\nsage: B = G.canonical_label(partition=C[::-1], algorithm='bliss')\nsage: A == B\nFalse\nsage: B = G.canonical_label(partition=[C[0], C[2], C[1]], algorithm='bliss')\nsage: A == B\nFalse\nsage: A = G.canonical_label(partition=C, algorithm='bliss')\nsage: B = G.canonical_label(partition=[C[0], C[1], C[2][::-1]], algorithm='bliss')\nsage: A == B\nTrue\n```\nBy the way, it's boring to type `algorithm='bliss'` when bliss is your default algorithm...",
    "created_at": "2017-11-05T08:42:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277762",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:25" align="right">comment:25</div>

In `bliss.pyx`, you changed some <code>\`\`G\`\`</code> and `G` to <code>\`G\`</code>, but this last form is not well taken into account when building the doc. You must also use `r"""`. You should also do the same in `generic_graph.py`.

In the toc, you added `Return the canonically labeled graph.` but this is different from the sentence in the method. I suggest to use only `Return the canonical graph`.

You don't want to use [canonization](https://en.wikipedia.org/wiki/Canonization) but [canonicalization](https://en.wikipedia.org/wiki/Canonicalization), right ? ;)


Some comments on the parameters

```
-        - ``certificate`` -- if ``True``, a dictionary mapping from the
-          (di)graph to its canonical label will be given.
+        - ``certificate`` -- boolean (default: ``False``). When set to ``True``,
+          a dictionary mapping from the vertices of the (di)graph to its canonical
+          label will also be returned.
```

```
-        - ``edge_labels`` -- default ``False``, otherwise allows
-          only permutations respecting edge labels.
+        - ``edge_labels`` -- boolean (default: ``False``). When set to ``True``,
+          allows only permutations respecting edge labels.
```

```
-        - ``algorithm``, a string -- the algorithm to use; currently available:
+        - ``algorithm`` -- a string (default: ``None``). The algorithm to use;
+          currently available:
```

```
-        - ``return_graph`` -- if set, instead of graph return the list of
-          edges of the the canonical graph; only available when Bliss is
-          explicitly set as algorithm
+        - ``return_graph`` -- boolean (default: ``True``). When set to ``False``,
+          returns the list of edges of the the canonical graph instead of the
+          canonical graph; only available when ``'bliss'`` is explicitly set as
+          algorithm.
```

use `bliss` and not `Bliss` to avoid confusion.

`return_graph='false'` -> `return_graph=False`

`graph with multiedges` -> `graph with multiple edges` to be consistent with the names of methods (ok, not with the constructor parameter).


Failing example in `generic_graph.py`:

```
Failed example:
    g
Expected:
    Graph on 6 vertices
Got:
    Grid Graph for [2, 3]: Graph on 6 vertices
```

For parameter `partition`, I tried the following:

```
sage: G = graphs.PetersenGraph()
sage: C = G.coloring()
sage: C
[[1, 3, 5, 9], [0, 2, 6], [4, 7, 8]]
sage: C[::-1]
[[4, 7, 8], [0, 2, 6], [1, 3, 5, 9]]
sage: A = G.canonical_label(partition=C, algorithm='bliss')
sage: B = G.canonical_label(partition=C[::-1], algorithm='bliss')
sage: A == B
False
sage: B = G.canonical_label(partition=[C[0], C[2], C[1]], algorithm='bliss')
sage: A == B
False
sage: A = G.canonical_label(partition=C, algorithm='bliss')
sage: B = G.canonical_label(partition=[C[0], C[1], C[2][::-1]], algorithm='bliss')
sage: A == B
True
```
By the way, it's boring to type `algorithm='bliss'` when bliss is your default algorithm...



---

archive/issue_comments_277763.json:
```json
{
    "body": "Changed commit from **[`739a9df`](https://github.com/sagemath/sagetrac-mirror/commit/739a9dfc0e6d76bac1a440fddbbffe26ad91ff6b)** to **[`4dabccd`](https://github.com/sagemath/sagetrac-mirror/commit/4dabccd35885ec9b70a6dcaeb06ab1779c323d81)**",
    "created_at": "2017-11-05T13:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277763",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`739a9df`](https://github.com/sagemath/sagetrac-mirror/commit/739a9dfc0e6d76bac1a440fddbbffe26ad91ff6b)** to **[`4dabccd`](https://github.com/sagemath/sagetrac-mirror/commit/4dabccd35885ec9b70a6dcaeb06ab1779c323d81)**



---

archive/issue_comments_277764.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4dabccd35885ec9b70a6dcaeb06ab1779c323d81\"><code>4dabccd</code></a></td><td><code>Some reviewer comments.</code></td></tr></table>\n",
    "created_at": "2017-11-05T13:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277764",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4dabccd35885ec9b70a6dcaeb06ab1779c323d81"><code>4dabccd</code></a></td><td><code>Some reviewer comments.</code></td></tr></table>




---

archive/issue_comments_277765.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@dcoudert](#comment%3A25):\n\nThanks for comments. I did most of them, but some comments:\n\n> In `bliss.pyx`, you changed some <code>\\`\\`G\\`\\`</code> and `G` to <code>\\`G\\`</code>, but this last form is not well taken into account when building the doc.\n\nThis is sometimes hard to decide. I guess we should use <code>\\`x\\`</code> only when referring to mathematical definition without any connection to the specific function parameters we are documenting.\n\n> In the toc, you added `Return the canonically labeled graph.` but this is different from the sentence in the method. I suggest to use only `Return the canonical graph`.\n\nI changed that.\n\nIn general I try to write a one-line description of the function to TOC when possible. For example `is_uniform` is explained as \"Return True if all congruences of the lattice consists of equal-sized blocks.\" in TOC, but the function starts with \"Return True if the lattice is uniform - -\" and then explains what is uniform.\n\n> You don't want to use [canonization](https://en.wikipedia.org/wiki/Canonization) but [canonicalization](https://en.wikipedia.org/wiki/Canonicalization), right ? ;)\n\nBut then there is [Graph canonization](https://en.wikipedia.org/wiki/Graph_canonization), so what to do?\n\n> For parameter `partition`, I tried the following:\n\nFor that we must first define what means to be \"canonical\" but still \"restrict permutations\". That's why I suggest postponing that to another ticket.\n\n> By the way, it's boring to type `algorithm='bliss'` when bliss is your default algorithm...\n\nTrue, but there is no other choise for most examples.\n\nE: I am not sure if the function should keep the graph's name or not. However, now it is consistent with `relabel()`.",
    "created_at": "2017-11-05T13:58:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277765",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@dcoudert](#comment%3A25):

Thanks for comments. I did most of them, but some comments:

> In `bliss.pyx`, you changed some <code>\`\`G\`\`</code> and `G` to <code>\`G\`</code>, but this last form is not well taken into account when building the doc.

This is sometimes hard to decide. I guess we should use <code>\`x\`</code> only when referring to mathematical definition without any connection to the specific function parameters we are documenting.

> In the toc, you added `Return the canonically labeled graph.` but this is different from the sentence in the method. I suggest to use only `Return the canonical graph`.

I changed that.

In general I try to write a one-line description of the function to TOC when possible. For example `is_uniform` is explained as "Return True if all congruences of the lattice consists of equal-sized blocks." in TOC, but the function starts with "Return True if the lattice is uniform - -" and then explains what is uniform.

> You don't want to use [canonization](https://en.wikipedia.org/wiki/Canonization) but [canonicalization](https://en.wikipedia.org/wiki/Canonicalization), right ? ;)

But then there is [Graph canonization](https://en.wikipedia.org/wiki/Graph_canonization), so what to do?

> For parameter `partition`, I tried the following:

For that we must first define what means to be "canonical" but still "restrict permutations". That's why I suggest postponing that to another ticket.

> By the way, it's boring to type `algorithm='bliss'` when bliss is your default algorithm...

True, but there is no other choise for most examples.

E: I am not sure if the function should keep the graph's name or not. However, now it is consistent with `relabel()`.



---

archive/issue_comments_277766.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n> In general I try to write a one-line description of the function to TOC when possible. For example `is_uniform` is explained as \"Return True if all congruences of the lattice consists of equal-sized blocks.\" in TOC, but the function starts with \"Return True if the lattice is uniform - -\" and then explains what is uniform.\n\n \nAgreed. A significant effort remains to be done for cleaning the graph module. \n\n  \n\n> > You don't want to use [canonization](https://en.wikipedia.org/wiki/Canonization) but [canonicalization](https://en.wikipedia.org/wiki/Canonicalization), right ? ;)\n\n> \n> But then there is [Graph canonization](https://en.wikipedia.org/wiki/Graph_canonization), so what to do?\n\n \nYou are right. I did not see that. So let's use graph canonization.\n\nCould you add a link to the wikipedia page ?\n\n \n\n> > For parameter `partition`, I tried the following:\n\n> \n> For that we must first define what means to be \"canonical\" but still \"restrict permutations\". That's why I suggest postponing that to another ticket.\n\nAgreed. It's already much better\n\n \n\n> E: I am not sure if the function should keep the graph's name or not. However, now it is consistent with `relabel()`.\n\nI have no opinion on that.",
    "created_at": "2017-11-05T14:22:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277766",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:28" align="right">comment:28</div>

> In general I try to write a one-line description of the function to TOC when possible. For example `is_uniform` is explained as "Return True if all congruences of the lattice consists of equal-sized blocks." in TOC, but the function starts with "Return True if the lattice is uniform - -" and then explains what is uniform.

 
Agreed. A significant effort remains to be done for cleaning the graph module. 

  

> > You don't want to use [canonization](https://en.wikipedia.org/wiki/Canonization) but [canonicalization](https://en.wikipedia.org/wiki/Canonicalization), right ? ;)

> 
> But then there is [Graph canonization](https://en.wikipedia.org/wiki/Graph_canonization), so what to do?

 
You are right. I did not see that. So let's use graph canonization.

Could you add a link to the wikipedia page ?

 

> > For parameter `partition`, I tried the following:

> 
> For that we must first define what means to be "canonical" but still "restrict permutations". That's why I suggest postponing that to another ticket.

Agreed. It's already much better

 

> E: I am not sure if the function should keep the graph's name or not. However, now it is consistent with `relabel()`.

I have no opinion on that.



---

archive/issue_comments_277767.json:
```json
{
    "body": "Changed commit from **[`4dabccd`](https://github.com/sagemath/sagetrac-mirror/commit/4dabccd35885ec9b70a6dcaeb06ab1779c323d81)** to **[`d8dc267`](https://github.com/sagemath/sagetrac-mirror/commit/d8dc2670e73fa83f7b40f82e73b2b5028449cfac)**",
    "created_at": "2017-11-05T17:29:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277767",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4dabccd`](https://github.com/sagemath/sagetrac-mirror/commit/4dabccd35885ec9b70a6dcaeb06ab1779c323d81)** to **[`d8dc267`](https://github.com/sagemath/sagetrac-mirror/commit/d8dc2670e73fa83f7b40f82e73b2b5028449cfac)**



---

archive/issue_comments_277768.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8dc2670e73fa83f7b40f82e73b2b5028449cfac\"><code>d8dc267</code></a></td><td><code>Add wikipedia link.</code></td></tr></table>\n",
    "created_at": "2017-11-05T17:29:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277768",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8dc2670e73fa83f7b40f82e73b2b5028449cfac"><code>d8dc267</code></a></td><td><code>Add wikipedia link.</code></td></tr></table>




---

archive/issue_comments_277769.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@dcoudert](#comment%3A28):\n\n> Could you add a link to the wikipedia page ?\n\nGood idea. Done.",
    "created_at": "2017-11-05T17:29:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277769",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@dcoudert](#comment%3A28):

> Could you add a link to the wikipedia page ?

Good idea. Done.



---

archive/issue_events_274134.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-05T17:29:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-274134"
}
```



---

archive/issue_events_274135.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-05T17:29:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-274135"
}
```



---

archive/issue_events_274136.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-11-05T17:58:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-274136"
}
```



---

archive/issue_events_274137.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-11-05T17:58:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-274137"
}
```



---

archive/issue_comments_277770.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nGood. The doc displays nicely now (I like the \\cong stuff).",
    "created_at": "2017-11-05T17:58:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277770",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:31" align="right">comment:31</div>

Good. The doc displays nicely now (I like the \cong stuff).



---

archive/issue_comments_277771.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/graph-can-label-pos](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/graph-can-label-pos)** to **[`d8dc267`](https://github.com/sagemath/sagetrac-mirror/commit/d8dc2670e73fa83f7b40f82e73b2b5028449cfac)**",
    "created_at": "2017-11-08T19:24:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-277771",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jmantysalo/graph-can-label-pos](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/graph-can-label-pos)** to **[`d8dc267`](https://github.com/sagemath/sagetrac-mirror/commit/d8dc2670e73fa83f7b40f82e73b2b5028449cfac)**



---

archive/issue_events_274138.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-11-08T19:24:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-274138"
}
```



---

archive/issue_events_274139.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0542f0a7fb5811ac064abb17cf1145a76a815a6a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-11-08T19:24:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-274139"
}
```
