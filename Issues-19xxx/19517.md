# Issue 19517: Graphs: canonical_label() and several errors

archive/issues_019280.json:
```json
{
    "assignees": [],
    "body": "On `generic_graph.py` function `canonical_label()` parameter `return_graph`:\n\n- The parameter has no effect when `algorithm='sage'`:\n\n```\nsage: G = Graph({10: [20]})\nsage: G.canonical_label(algorithm='sage', return_graph=False)\nGraph on 2 vertices\nsage: G.canonical_label(algorithm='sage', return_graph=True)\nGraph on 2 vertices\n```\n\ncompared to\n\n```\nsage: G.canonical_label(algorithm='bliss', return_graph=False)\n[(1, 0)]\nsage: G.canonical_label(algorithm='bliss', return_graph=True)\nGraph on 2 vertices\n```\n\n- Docstring is badly formulated. It should say that it returns list of edges of canonically labelled graph.\n\n- Indentation in docstring is wrong.\n\n- (And is it meaningful? Why not return dictionary of vertex relabeling instead of edges?)\n\nSame function has other problem:\n\n- Canonically relabeled graph forgets vertex positioning. This is contrary to `relabel` that remembers them. This can be seen with\n\n```\nP = graphs.PetersenGraph()\nP1 = graphs.PetersenGraph()\nP1.relabel(lambda x: chr(ord('a')+x))\nP2 = P1.canonical_label()\n\nP.show()\nP1.show()\nP2.show()\n```\n\n\n**CC:**  @dcoudert\n\n**Branch/Commit:** [d8dc2670e73fa83f7b40f82e73b2b5028449cfac](https://github.com/sagemath/sagetrac-mirror/commit/d8dc2670e73fa83f7b40f82e73b2b5028449cfac)\n\n**Reviewer:** David Coudert\n\n**Author:** Jori M\u00e4ntysalo\n\nIssue created by migration from https://trac.sagemath.org/ticket/19517\n\n",
    "closed_at": "2017-11-08T19:24:31Z",
    "created_at": "2015-11-04T08:26:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Graphs: canonical_label() and several errors",
    "type": "issue",
    "updated_at": "2017-11-08T19:24:31Z",
    "url": "https://github.com/sagemath/sage/issues/19517",
    "user": "https://github.com/jm58660"
}
```
On `generic_graph.py` function `canonical_label()` parameter `return_graph`:

- The parameter has no effect when `algorithm='sage'`:

```
sage: G = Graph({10: [20]})
sage: G.canonical_label(algorithm='sage', return_graph=False)
Graph on 2 vertices
sage: G.canonical_label(algorithm='sage', return_graph=True)
Graph on 2 vertices
```

compared to

```
sage: G.canonical_label(algorithm='bliss', return_graph=False)
[(1, 0)]
sage: G.canonical_label(algorithm='bliss', return_graph=True)
Graph on 2 vertices
```

- Docstring is badly formulated. It should say that it returns list of edges of canonically labelled graph.

- Indentation in docstring is wrong.

- (And is it meaningful? Why not return dictionary of vertex relabeling instead of edges?)

Same function has other problem:

- Canonically relabeled graph forgets vertex positioning. This is contrary to `relabel` that remembers them. This can be seen with

```
P = graphs.PetersenGraph()
P1 = graphs.PetersenGraph()
P1.relabel(lambda x: chr(ord('a')+x))
P2 = P1.canonical_label()

P.show()
P1.show()
P2.show()
```


**CC:**  @dcoudert

**Branch/Commit:** [d8dc2670e73fa83f7b40f82e73b2b5028449cfac](https://github.com/sagemath/sagetrac-mirror/commit/d8dc2670e73fa83f7b40f82e73b2b5028449cfac)

**Reviewer:** David Coudert

**Author:** Jori Mäntysalo

Issue created by migration from https://trac.sagemath.org/ticket/19517





---

archive/issue_comments_280279.json:
```json
{
    "body": "<a id='comment:1'></a>\nHello !\n\nAll your remarks seem correct (and easy to fix) but I have no idea what the problem with the bliss package comes from `O_o`\n\nNathann",
    "created_at": "2015-11-05T14:44:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280279",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:1'></a>
Hello !

All your remarks seem correct (and easy to fix) but I have no idea what the problem with the bliss package comes from `O_o`

Nathann



---

archive/issue_comments_280280.json:
```json
{
    "body": "<a id='comment:2'></a>\nThere is something strange with `bliss` installation, see https://groups.google.com/forum/#!topic/sage-devel/_1OYNuVNltM\n\n`return_graph` is not converse of `inplace`. I guess. It is badly documented. What is the meaning of it's output? A list of pairs somehow... Try\n\n```\nG = graphs.PetersenGraph()\nG.relabel(lambda x: chr(ord('a')+x))\nG.canonical_label(return_graph=False)\n```\n\nAnd why it deletes vertex positioning contraty to `relabel`? Try for example\n\n```\nG = graphs.PetersenGraph()\nG.relabel(lambda x: chr(ord('a')+x))\nG.show()\nG = G.canonical_label()\nG.canonical_label().show()\n```",
    "created_at": "2015-11-05T15:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280280",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'></a>
There is something strange with `bliss` installation, see https://groups.google.com/forum/#!topic/sage-devel/_1OYNuVNltM

`return_graph` is not converse of `inplace`. I guess. It is badly documented. What is the meaning of it's output? A list of pairs somehow... Try

```
G = graphs.PetersenGraph()
G.relabel(lambda x: chr(ord('a')+x))
G.canonical_label(return_graph=False)
```

And why it deletes vertex positioning contraty to `relabel`? Try for example

```
G = graphs.PetersenGraph()
G.relabel(lambda x: chr(ord('a')+x))
G.show()
G = G.canonical_label()
G.canonical_label().show()
```



---

archive/issue_comments_280281.json:
```json
{
    "body": "<a id='comment:3'></a>\n> There is something strange with `bliss` installation, see https://groups.google.com/forum/#!topic/sage-devel/_1OYNuVNltM\n\nSomething like that happened during the last update of bliss, but Jeroen noticed it at the last minute:\n[#19483 comment:15](https://github.com/sagemath/sage/issues/19483#comment:15)\n\n> `return_graph` is not converse of `inplace`. I guess. It is badly documented. What is the meaning of it's output?\n\n(assuming that you are talking of 'canonical_label')\n\n`return_graph` tells whether or not you want the actual graph. Somethimes you only need the labelling, and not the whole graph.\n\n\n A list of pairs somehow... Try\n> \n> ```\n> G = graphs.PetersenGraph()\n> G.relabel(lambda x: chr(ord('a')+x))\n> G.canonical_label(return_graph=False)\n> ```\n\nThese pairs are the edges of the relabeled graph\n\n```\nsage: Graph(G.canonical_label(return_graph=False)) == graphs.PetersenGraph().canonical_label()\nTrue\n```\n\nCan't say that I see the point to return this instead of a `Graph` object...\n\n> And why it deletes vertex positioning contraty to `relabel`? Try for example\n\nProbably because the graph is built from the list of edges, instead of being built as a relabelled copy of the original graph. Why do you ask these questions like there is a mystical explanation behind? It's a bug, that's all. It just needs to be fixed.\n\nNathann",
    "created_at": "2015-11-05T15:49:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280281",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'></a>
> There is something strange with `bliss` installation, see https://groups.google.com/forum/#!topic/sage-devel/_1OYNuVNltM

Something like that happened during the last update of bliss, but Jeroen noticed it at the last minute:
[#19483 comment:15](https://github.com/sagemath/sage/issues/19483#comment:15)

> `return_graph` is not converse of `inplace`. I guess. It is badly documented. What is the meaning of it's output?

(assuming that you are talking of 'canonical_label')

`return_graph` tells whether or not you want the actual graph. Somethimes you only need the labelling, and not the whole graph.


 A list of pairs somehow... Try
> 
> ```
> G = graphs.PetersenGraph()
> G.relabel(lambda x: chr(ord('a')+x))
> G.canonical_label(return_graph=False)
> ```

These pairs are the edges of the relabeled graph

```
sage: Graph(G.canonical_label(return_graph=False)) == graphs.PetersenGraph().canonical_label()
True
```

Can't say that I see the point to return this instead of a `Graph` object...

> And why it deletes vertex positioning contraty to `relabel`? Try for example

Probably because the graph is built from the list of edges, instead of being built as a relabelled copy of the original graph. Why do you ask these questions like there is a mystical explanation behind? It's a bug, that's all. It just needs to be fixed.

Nathann



---

archive/issue_comments_280282.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,30 +1,42 @@\n-Several problems I noticed on `generic_graph.py`:\n+On `generic_graph.py` function `canonical_label()` parameter `return_graph`:\n \n-- Indentation in docstring for `return_graph` is wrong.\n-\n-- That parameter seems to have no effect when `algorithm='sage'`:\n+- The parameter has no effect when `algorithm='sage'`:\n \n ```\n sage: G = Graph({10: [20]})\n sage: G.canonical_label(algorithm='sage', return_graph=False)\n Graph on 2 vertices\n-sage: G.vertices()\n-[10, 20]\n sage: G.canonical_label(algorithm='sage', return_graph=True)\n Graph on 2 vertices\n-sage: G.vertices()\n-[10, 20]\n ```\n \n-- I installed bliss with `sage -i` and it seems to be fine. I got normal messages from gcc and then `Successfully installed bliss-0.73`, and  `'bliss' in sage.misc.package.optional_packages()[0]` says `True`. But still\n+compared to\n \n ```\n+sage: G.canonical_label(algorithm='bliss', return_graph=False)\n+[(1, 0)]\n sage: G.canonical_label(algorithm='bliss', return_graph=True)\n----------------------------------------------------------------------------\n-ImportError                               Traceback (most recent call last)\n- . . . \n-ImportError: You must install the 'bliss' package to run this command.\n+Graph on 2 vertices\n ```\n \n-- Why the name of the parameter `return_graph` in this, but `inplace` in all other functions?\n+- Docstring is badly formulated. It should say that it returns list of edges of canonically labelled graph.\n \n+- Indentation in docstring is wrong.\n+\n+- (And is it meaningful? Why not return dictionary of vertex relabeling instead of edges?)\n+\n+Same function has other problem:\n+\n+- Canonically relabeled graph forgets vertex positioning. This is contrary to `relabel` that remembers them. This can be seen with\n+\n+```\n+P = graphs.PetersenGraph()\n+P1 = graphs.PetersenGraph()\n+P1.relabel(lambda x: chr(ord('a')+x))\n+P2 = P1.canonical_label()\n+\n+P.show()\n+P1.show()\n+P2.show()\n+```\n+\n``````\n",
    "created_at": "2015-11-06T06:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280282",
    "user": "https://github.com/jm58660"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,30 +1,42 @@
-Several problems I noticed on `generic_graph.py`:
+On `generic_graph.py` function `canonical_label()` parameter `return_graph`:
 
-- Indentation in docstring for `return_graph` is wrong.
-
-- That parameter seems to have no effect when `algorithm='sage'`:
+- The parameter has no effect when `algorithm='sage'`:
 
 ```
 sage: G = Graph({10: [20]})
 sage: G.canonical_label(algorithm='sage', return_graph=False)
 Graph on 2 vertices
-sage: G.vertices()
-[10, 20]
 sage: G.canonical_label(algorithm='sage', return_graph=True)
 Graph on 2 vertices
-sage: G.vertices()
-[10, 20]
 ```
 
-- I installed bliss with `sage -i` and it seems to be fine. I got normal messages from gcc and then `Successfully installed bliss-0.73`, and  `'bliss' in sage.misc.package.optional_packages()[0]` says `True`. But still
+compared to
 
 ```
+sage: G.canonical_label(algorithm='bliss', return_graph=False)
+[(1, 0)]
 sage: G.canonical_label(algorithm='bliss', return_graph=True)
----------------------------------------------------------------------------
-ImportError                               Traceback (most recent call last)
- . . . 
-ImportError: You must install the 'bliss' package to run this command.
+Graph on 2 vertices
 ```
 
-- Why the name of the parameter `return_graph` in this, but `inplace` in all other functions?
+- Docstring is badly formulated. It should say that it returns list of edges of canonically labelled graph.
 
+- Indentation in docstring is wrong.
+
+- (And is it meaningful? Why not return dictionary of vertex relabeling instead of edges?)
+
+Same function has other problem:
+
+- Canonically relabeled graph forgets vertex positioning. This is contrary to `relabel` that remembers them. This can be seen with
+
+```
+P = graphs.PetersenGraph()
+P1 = graphs.PetersenGraph()
+P1.relabel(lambda x: chr(ord('a')+x))
+P2 = P1.canonical_label()
+
+P.show()
+P1.show()
+P2.show()
+```
+
``````




---

archive/issue_comments_280283.json:
```json
{
    "body": "<a id='comment:4'></a>\nOK, modified the description. I do not think that forgetting vertex positions is necessarily a bug. But to remember them on `relabel()` and to forget on `canonical_label()` is.",
    "created_at": "2015-11-06T06:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280283",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:4'></a>
OK, modified the description. I do not think that forgetting vertex positions is necessarily a bug. But to remember them on `relabel()` and to forget on `canonical_label()` is.



---

archive/issue_comments_280284.json:
```json
{
    "body": "**Branch:** [u/jmantysalo/graph-can-label-pos](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/graph-can-label-pos)",
    "created_at": "2017-10-30T11:00:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280284",
    "user": "https://github.com/jm58660"
}
```

**Branch:** [u/jmantysalo/graph-can-label-pos](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/graph-can-label-pos)



---

archive/issue_comments_280285.json:
```json
{
    "body": "<a id='comment:6'></a>\nGetting back to this old ticket... First of all I changed the check for parameters to better understand what happens. Now `algorithm='bliss'` will always raise an error if Bliss is not installed, even when the graph has multiedges and Bliss could not be used anyway.\n\nI think that this should just compute canonical relabeling and call `.relabel()`. That would take care the problem of vertex positions.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/753b8e03e2ea177bd51ae49711ed762172f32730\">753b8e0</a></td><td><code>Modify parameter checking.</code></td></tr></table>\n",
    "created_at": "2017-10-30T11:09:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280285",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:6'></a>
Getting back to this old ticket... First of all I changed the check for parameters to better understand what happens. Now `algorithm='bliss'` will always raise an error if Bliss is not installed, even when the graph has multiedges and Bliss could not be used anyway.

I think that this should just compute canonical relabeling and call `.relabel()`. That would take care the problem of vertex positions.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/753b8e03e2ea177bd51ae49711ed762172f32730">753b8e0</a></td><td><code>Modify parameter checking.</code></td></tr></table>




---

archive/issue_comments_280286.json:
```json
{
    "body": "**Commit:** [753b8e03e2ea177bd51ae49711ed762172f32730](https://github.com/sagemath/sagetrac-mirror/commit/753b8e03e2ea177bd51ae49711ed762172f32730)",
    "created_at": "2017-10-30T11:09:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280286",
    "user": "https://github.com/jm58660"
}
```

**Commit:** [753b8e03e2ea177bd51ae49711ed762172f32730](https://github.com/sagemath/sagetrac-mirror/commit/753b8e03e2ea177bd51ae49711ed762172f32730)



---

archive/issue_events_175579.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-10-30T12:45:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "milestone_number": null,
    "milestone_title": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-175579"
}
```



---

archive/issue_events_175580.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-10-30T12:45:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-175580"
}
```



---

archive/issue_comments_280287.json:
```json
{
    "body": "**Reviewer:** David Coudert",
    "created_at": "2017-10-30T12:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280287",
    "user": "https://github.com/dcoudert"
}
```

**Reviewer:** David Coudert



---

archive/issue_comments_280288.json:
```json
{
    "body": "<a id='comment:7'></a>\nIt's true that this method needs significant cleaning. \n- The first line of description is not standard and could be `Return a canonical labeling of the vertices of this (di)graph `.\n- In the INPUT block, the parameters could be better explained\n- an OUTPUT block could be useful as the output depends on the parameters\netc.\n\n\n\none doctest fails because I have bliss installed. So you could do:\n\n```\n-            sage: G.canonical_label(edge_labels=True, certificate=True)\n-            (Graph on 5 vertices, {0: 4, 1: 3, 2: 0, 3: 1, 4: 2})\n+            sage: G.canonical_label(edge_labels=True, certificate=True, algorithm='sage')\n+            (Graph on 5 vertices, {0: 4, 1: 3, 2: 0, 3: 1, 4: 2})\n+            sage: G.canonical_label(edge_labels=True, certificate=True, algorithm='bliss') # optional - bliss\n+            (Graph on 5 vertices, {{0: 4, 1: 3, 2: 1, 3: 0, 4: 2})\n```\nThe last 2 lines might be placed with the examples using bliss.",
    "created_at": "2017-10-30T12:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280288",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>
It's true that this method needs significant cleaning. 
- The first line of description is not standard and could be `Return a canonical labeling of the vertices of this (di)graph `.
- In the INPUT block, the parameters could be better explained
- an OUTPUT block could be useful as the output depends on the parameters
etc.



one doctest fails because I have bliss installed. So you could do:

```
-            sage: G.canonical_label(edge_labels=True, certificate=True)
-            (Graph on 5 vertices, {0: 4, 1: 3, 2: 0, 3: 1, 4: 2})
+            sage: G.canonical_label(edge_labels=True, certificate=True, algorithm='sage')
+            (Graph on 5 vertices, {0: 4, 1: 3, 2: 0, 3: 1, 4: 2})
+            sage: G.canonical_label(edge_labels=True, certificate=True, algorithm='bliss') # optional - bliss
+            (Graph on 5 vertices, {{0: 4, 1: 3, 2: 1, 3: 0, 4: 2})
```
The last 2 lines might be placed with the examples using bliss.



---

archive/issue_comments_280289.json:
```json
{
    "body": "**Changing commit** from \"[753b8e03e2ea177bd51ae49711ed762172f32730](https://github.com/sagemath/sagetrac-mirror/commit/753b8e03e2ea177bd51ae49711ed762172f32730)\" to \"[81f337a4f9a5ff89d4d9ab561441b795bbf40a31](https://github.com/sagemath/sagetrac-mirror/commit/81f337a4f9a5ff89d4d9ab561441b795bbf40a31)\".",
    "created_at": "2017-10-31T06:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280289",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[753b8e03e2ea177bd51ae49711ed762172f32730](https://github.com/sagemath/sagetrac-mirror/commit/753b8e03e2ea177bd51ae49711ed762172f32730)" to "[81f337a4f9a5ff89d4d9ab561441b795bbf40a31](https://github.com/sagemath/sagetrac-mirror/commit/81f337a4f9a5ff89d4d9ab561441b795bbf40a31)".



---

archive/issue_comments_280290.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81f337a4f9a5ff89d4d9ab561441b795bbf40a31\">81f337a</a></td><td><code>Forbidden parameter combination.</code></td></tr></table>\n",
    "created_at": "2017-10-31T06:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280290",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81f337a4f9a5ff89d4d9ab561441b795bbf40a31">81f337a</a></td><td><code>Forbidden parameter combination.</code></td></tr></table>




---

archive/issue_comments_280291.json:
```json
{
    "body": "<a id='comment:9'></a>\nAh, I did not notice the line `not edge_labels` I removed. Now corrected that one.\n\n(These must also be said in `INPUT`section.)",
    "created_at": "2017-10-31T06:16:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280291",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:9'></a>
Ah, I did not notice the line `not edge_labels` I removed. Now corrected that one.

(These must also be said in `INPUT`section.)



---

archive/issue_comments_280292.json:
```json
{
    "body": "**Changing commit** from \"[81f337a4f9a5ff89d4d9ab561441b795bbf40a31](https://github.com/sagemath/sagetrac-mirror/commit/81f337a4f9a5ff89d4d9ab561441b795bbf40a31)\" to \"[ac925246354752b6f27e6643efd2a7c6fccd0cd5](https://github.com/sagemath/sagetrac-mirror/commit/ac925246354752b6f27e6643efd2a7c6fccd0cd5)\".",
    "created_at": "2017-10-31T08:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280292",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[81f337a4f9a5ff89d4d9ab561441b795bbf40a31](https://github.com/sagemath/sagetrac-mirror/commit/81f337a4f9a5ff89d4d9ab561441b795bbf40a31)" to "[ac925246354752b6f27e6643efd2a7c6fccd0cd5](https://github.com/sagemath/sagetrac-mirror/commit/ac925246354752b6f27e6643efd2a7c6fccd0cd5)".



---

archive/issue_comments_280293.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac925246354752b6f27e6643efd2a7c6fccd0cd5\">ac92524</a></td><td><code>Docstring formatting.</code></td></tr></table>\n",
    "created_at": "2017-10-31T08:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280293",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac925246354752b6f27e6643efd2a7c6fccd0cd5">ac92524</a></td><td><code>Docstring formatting.</code></td></tr></table>




---

archive/issue_comments_280294.json:
```json
{
    "body": "<a id='comment:11'></a>\nJust noticed that Bliss with `return_graph=False` returns set of edges, not a dictionary of mapping. Hence we must copy a part of `relabel`:\n\n```\nattributes_to_update = ('_pos', '_assoc', '_embedding')\nfor attr in attributes_to_update:\n    if hasattr(self, attr) and getattr(self, attr) is not None:\n        new_attr = {}\n        for v,value in iteritems(getattr(self, attr)):\n            new_attr[perm[v]] = value\n\n        setattr(self, attr, new_attr)\n```",
    "created_at": "2017-11-01T05:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280294",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:11'></a>
Just noticed that Bliss with `return_graph=False` returns set of edges, not a dictionary of mapping. Hence we must copy a part of `relabel`:

```
attributes_to_update = ('_pos', '_assoc', '_embedding')
for attr in attributes_to_update:
    if hasattr(self, attr) and getattr(self, attr) is not None:
        new_attr = {}
        for v,value in iteritems(getattr(self, attr)):
            new_attr[perm[v]] = value

        setattr(self, attr, new_attr)
```



---

archive/issue_comments_280295.json:
```json
{
    "body": "<a id='comment:12'></a>\nForget, I was blind when writing my last comment.\n\nWe could do something like\n\n```\n         if algorithm == 'bliss':\n            vert_dict = canonical_form(self, partition, certificate=True)[1]\n            return self.relabel(vert_dict, inplace=not return_graph)\n```\n\nmaybe... But what the hell this function is supposed to do??? `certificate` seems a wrong word here, but at least `certificate=True` works similarly with both `algorithm='sage'` and `algorithm='bliss'`.",
    "created_at": "2017-11-01T05:29:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280295",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:12'></a>
Forget, I was blind when writing my last comment.

We could do something like

```
         if algorithm == 'bliss':
            vert_dict = canonical_form(self, partition, certificate=True)[1]
            return self.relabel(vert_dict, inplace=not return_graph)
```

maybe... But what the hell this function is supposed to do??? `certificate` seems a wrong word here, but at least `certificate=True` works similarly with both `algorithm='sage'` and `algorithm='bliss'`.



---

archive/issue_comments_280296.json:
```json
{
    "body": "<a id='comment:13'></a>\nJust came here after the sage-devel post by Jori. Is there anything controversial here? Or were you just fishing for reviewers :-)",
    "created_at": "2017-11-02T23:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280296",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Just came here after the sage-devel post by Jori. Is there anything controversial here? Or were you just fishing for reviewers :-)



---

archive/issue_comments_280297.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [@jdemeyer](#comment%3A13):\n> Just came here after the sage-devel post by Jori. Is there anything controversial here?\n\nI guess not, but not sure, so I write a short message to sage-devel.\n\n> Or were you just fishing for reviewers :-)\n\nNot really. It would be more helpful to get comments about what this should do. `certificate` vs. `return_graph` - whaat?",
    "created_at": "2017-11-03T04:48:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280297",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:14'></a>
Replying to [@jdemeyer](#comment%3A13):
> Just came here after the sage-devel post by Jori. Is there anything controversial here?

I guess not, but not sure, so I write a short message to sage-devel.

> Or were you just fishing for reviewers :-)

Not really. It would be more helpful to get comments about what this should do. `certificate` vs. `return_graph` - whaat?



---

archive/issue_comments_280298.json:
```json
{
    "body": "**Changing commit** from \"[ac925246354752b6f27e6643efd2a7c6fccd0cd5](https://github.com/sagemath/sagetrac-mirror/commit/ac925246354752b6f27e6643efd2a7c6fccd0cd5)\" to \"[b233fdf562e91531b70da45e98da9b7e228f6046](https://github.com/sagemath/sagetrac-mirror/commit/b233fdf562e91531b70da45e98da9b7e228f6046)\".",
    "created_at": "2017-11-03T05:45:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280298",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[ac925246354752b6f27e6643efd2a7c6fccd0cd5](https://github.com/sagemath/sagetrac-mirror/commit/ac925246354752b6f27e6643efd2a7c6fccd0cd5)" to "[b233fdf562e91531b70da45e98da9b7e228f6046](https://github.com/sagemath/sagetrac-mirror/commit/b233fdf562e91531b70da45e98da9b7e228f6046)".



---

archive/issue_comments_280299.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b233fdf562e91531b70da45e98da9b7e228f6046\">b233fdf</a></td><td><code>Some corrections.</code></td></tr></table>\n",
    "created_at": "2017-11-03T05:45:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280299",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b233fdf562e91531b70da45e98da9b7e228f6046">b233fdf</a></td><td><code>Some corrections.</code></td></tr></table>




---

archive/issue_comments_280300.json:
```json
{
    "body": "<a id='comment:16'></a>\nSome modifications to docstring. Now also vertex positions are preserved even when Bliss is used.\n\nMust add many tests to this.",
    "created_at": "2017-11-03T05:46:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280300",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:16'></a>
Some modifications to docstring. Now also vertex positions are preserved even when Bliss is used.

Must add many tests to this.



---

archive/issue_comments_280301.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/39ce1ef11371c37708ca72c72b26174136b1c2d7\">39ce1ef</a></td><td><code>Several minor modifications.</code></td></tr></table>\n",
    "created_at": "2017-11-03T08:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280301",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/39ce1ef11371c37708ca72c72b26174136b1c2d7">39ce1ef</a></td><td><code>Several minor modifications.</code></td></tr></table>




---

archive/issue_comments_280302.json:
```json
{
    "body": "**Changing commit** from \"[b233fdf562e91531b70da45e98da9b7e228f6046](https://github.com/sagemath/sagetrac-mirror/commit/b233fdf562e91531b70da45e98da9b7e228f6046)\" to \"[39ce1ef11371c37708ca72c72b26174136b1c2d7](https://github.com/sagemath/sagetrac-mirror/commit/39ce1ef11371c37708ca72c72b26174136b1c2d7)\".",
    "created_at": "2017-11-03T08:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280302",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[b233fdf562e91531b70da45e98da9b7e228f6046](https://github.com/sagemath/sagetrac-mirror/commit/b233fdf562e91531b70da45e98da9b7e228f6046)" to "[39ce1ef11371c37708ca72c72b26174136b1c2d7](https://github.com/sagemath/sagetrac-mirror/commit/39ce1ef11371c37708ca72c72b26174136b1c2d7)".



---

archive/issue_comments_280303.json:
```json
{
    "body": "<a id='comment:18'></a>\nCurrently Bliss have no verbose mode, and the docstring of `search_tree` says \"verbosity \u2013 currently ignored\". Hence I just removed the parameter.\n\nI changed docstring and allowed `return_graph=False` only when `bliss=True` is explicitly said.\n\nDocstring modified.\n\nNow this needs comments.",
    "created_at": "2017-11-03T08:35:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280303",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:18'></a>
Currently Bliss have no verbose mode, and the docstring of `search_tree` says "verbosity – currently ignored". Hence I just removed the parameter.

I changed docstring and allowed `return_graph=False` only when `bliss=True` is explicitly said.

Docstring modified.

Now this needs comments.



---

archive/issue_events_175581.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-03T08:37:41Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "rename": {
        "from": "Graphs: canonical_label() and return_graph -parameter",
        "to": "Graphs: canonical_label() and several errors"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-175581"
}
```



---

archive/issue_comments_280304.json:
```json
{
    "body": "<a id='comment:20'></a>\nIn `bliss.pyx`:\n- `canonical graph of G. Otherwise, it returns its set of edges.` -> <code>canonical graph of \\`G\\`. Otherwise, it returns its set of edges.</code>\n\nIn `generic_graph.py`:\n- unfortunately you can not remove parameter `verbosity` like that, although it is `currently ignored`. A deprecation warning is needed.\n- In the documentation, you must use <code>\\`\\`True\\`\\`, \\`\\`False\\`\\`</code>\n\nI don't see any place where the `certificate` parameter is used, but it might be useful to some users, no ?\n\nput the ticket to needs review when ready.",
    "created_at": "2017-11-03T11:03:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280304",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:20'></a>
In `bliss.pyx`:
- `canonical graph of G. Otherwise, it returns its set of edges.` -> <code>canonical graph of \`G\`. Otherwise, it returns its set of edges.</code>

In `generic_graph.py`:
- unfortunately you can not remove parameter `verbosity` like that, although it is `currently ignored`. A deprecation warning is needed.
- In the documentation, you must use <code>\`\`True\`\`, \`\`False\`\`</code>

I don't see any place where the `certificate` parameter is used, but it might be useful to some users, no ?

put the ticket to needs review when ready.



---

archive/issue_comments_280305.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea621c672a9b38d0fc80f3b11d4931f5014f5fb6\">ea621c6</a></td><td><code>Modifications.</code></td></tr></table>\n",
    "created_at": "2017-11-03T18:36:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280305",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea621c672a9b38d0fc80f3b11d4931f5014f5fb6">ea621c6</a></td><td><code>Modifications.</code></td></tr></table>




---

archive/issue_comments_280306.json:
```json
{
    "body": "**Changing commit** from \"[39ce1ef11371c37708ca72c72b26174136b1c2d7](https://github.com/sagemath/sagetrac-mirror/commit/39ce1ef11371c37708ca72c72b26174136b1c2d7)\" to \"[ea621c672a9b38d0fc80f3b11d4931f5014f5fb6](https://github.com/sagemath/sagetrac-mirror/commit/ea621c672a9b38d0fc80f3b11d4931f5014f5fb6)\".",
    "created_at": "2017-11-03T18:36:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280306",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[39ce1ef11371c37708ca72c72b26174136b1c2d7](https://github.com/sagemath/sagetrac-mirror/commit/39ce1ef11371c37708ca72c72b26174136b1c2d7)" to "[ea621c672a9b38d0fc80f3b11d4931f5014f5fb6](https://github.com/sagemath/sagetrac-mirror/commit/ea621c672a9b38d0fc80f3b11d4931f5014f5fb6)".



---

archive/issue_comments_280307.json:
```json
{
    "body": "**Author:** Jori M\u00e4ntysalo",
    "created_at": "2017-11-03T18:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280307",
    "user": "https://github.com/jm58660"
}
```

**Author:** Jori Mäntysalo



---

archive/issue_comments_280308.json:
```json
{
    "body": "<a id='comment:22'></a>\nFound a bug in my code. Deprecation and your suggestions done.\n\nI also tried to make better examples. Still lacking an example of partition, also I will check that the parameter is really used.",
    "created_at": "2017-11-03T18:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280308",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:22'></a>
Found a bug in my code. Deprecation and your suggestions done.

I also tried to make better examples. Still lacking an example of partition, also I will check that the parameter is really used.



---

archive/issue_comments_280309.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/739a9dfc0e6d76bac1a440fddbbffe26ad91ff6b\">739a9df</a></td><td><code>Toc entry.</code></td></tr></table>\n",
    "created_at": "2017-11-04T16:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280309",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/739a9dfc0e6d76bac1a440fddbbffe26ad91ff6b">739a9df</a></td><td><code>Toc entry.</code></td></tr></table>




---

archive/issue_comments_280310.json:
```json
{
    "body": "**Changing commit** from \"[ea621c672a9b38d0fc80f3b11d4931f5014f5fb6](https://github.com/sagemath/sagetrac-mirror/commit/ea621c672a9b38d0fc80f3b11d4931f5014f5fb6)\" to \"[739a9dfc0e6d76bac1a440fddbbffe26ad91ff6b](https://github.com/sagemath/sagetrac-mirror/commit/739a9dfc0e6d76bac1a440fddbbffe26ad91ff6b)\".",
    "created_at": "2017-11-04T16:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280310",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[ea621c672a9b38d0fc80f3b11d4931f5014f5fb6](https://github.com/sagemath/sagetrac-mirror/commit/ea621c672a9b38d0fc80f3b11d4931f5014f5fb6)" to "[739a9dfc0e6d76bac1a440fddbbffe26ad91ff6b](https://github.com/sagemath/sagetrac-mirror/commit/739a9dfc0e6d76bac1a440fddbbffe26ad91ff6b)".



---

archive/issue_events_175582.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-04T17:01:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-175582"
}
```



---

archive/issue_comments_280311.json:
```json
{
    "body": "<a id='comment:24'></a>\nMaybe these changes should be integrated to Sage now, and get back to this later? One parameter is still missing examples and documentation, but that can be done later.",
    "created_at": "2017-11-04T17:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280311",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:24'></a>
Maybe these changes should be integrated to Sage now, and get back to this later? One parameter is still missing examples and documentation, but that can be done later.



---

archive/issue_events_175583.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-11-05T08:42:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-175583"
}
```



---

archive/issue_events_175584.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-11-05T08:42:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-175584"
}
```



---

archive/issue_comments_280312.json:
```json
{
    "body": "<a id='comment:25'></a>\nIn `bliss.pyx`, you changed some <code>\\`\\`G\\`\\`</code> and `G` to <code>\\`G\\`</code>, but this last form is not well taken into account when building the doc. You must also use `r\"\"\"`. You should also do the same in `generic_graph.py`.\n\nIn the toc, you added `Return the canonically labeled graph.` but this is different from the sentence in the method. I suggest to use only `Return the canonical graph`.\n\nYou don't want to use [canonization](https://en.wikipedia.org/wiki/Canonization) but [canonicalization](https://en.wikipedia.org/wiki/Canonicalization), right ? ;)\n\n\nSome comments on the parameters\n\n```\n-        - ``certificate`` -- if ``True``, a dictionary mapping from the\n-          (di)graph to its canonical label will be given.\n+        - ``certificate`` -- boolean (default: ``False``). When set to ``True``,\n+          a dictionary mapping from the vertices of the (di)graph to its canonical\n+          label will also be returned.\n```\n\n```\n-        - ``edge_labels`` -- default ``False``, otherwise allows\n-          only permutations respecting edge labels.\n+        - ``edge_labels`` -- boolean (default: ``False``). When set to ``True``,\n+          allows only permutations respecting edge labels.\n```\n\n```\n-        - ``algorithm``, a string -- the algorithm to use; currently available:\n+        - ``algorithm`` -- a string (default: ``None``). The algorithm to use;\n+          currently available:\n```\n\n```\n-        - ``return_graph`` -- if set, instead of graph return the list of\n-          edges of the the canonical graph; only available when Bliss is\n-          explicitly set as algorithm\n+        - ``return_graph`` -- boolean (default: ``True``). When set to ``False``,\n+          returns the list of edges of the the canonical graph instead of the\n+          canonical graph; only available when ``'bliss'`` is explicitly set as\n+          algorithm.\n```\n\nuse `bliss` and not `Bliss` to avoid confusion.\n\n`return_graph='false'` -> `return_graph=False`\n\n`graph with multiedges` -> `graph with multiple edges` to be consistent with the names of methods (ok, not with the constructor parameter).\n\n\nFailing example in `generic_graph.py`:\n\n```\nFailed example:\n    g\nExpected:\n    Graph on 6 vertices\nGot:\n    Grid Graph for [2, 3]: Graph on 6 vertices\n```\n\nFor parameter `partition`, I tried the following:\n\n```\nsage: G = graphs.PetersenGraph()\nsage: C = G.coloring()\nsage: C\n[[1, 3, 5, 9], [0, 2, 6], [4, 7, 8]]\nsage: C[::-1]\n[[4, 7, 8], [0, 2, 6], [1, 3, 5, 9]]\nsage: A = G.canonical_label(partition=C, algorithm='bliss')\nsage: B = G.canonical_label(partition=C[::-1], algorithm='bliss')\nsage: A == B\nFalse\nsage: B = G.canonical_label(partition=[C[0], C[2], C[1]], algorithm='bliss')\nsage: A == B\nFalse\nsage: A = G.canonical_label(partition=C, algorithm='bliss')\nsage: B = G.canonical_label(partition=[C[0], C[1], C[2][::-1]], algorithm='bliss')\nsage: A == B\nTrue\n```\nBy the way, it's boring to type `algorithm='bliss'` when bliss is your default algorithm...",
    "created_at": "2017-11-05T08:42:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280312",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:25'></a>
In `bliss.pyx`, you changed some <code>\`\`G\`\`</code> and `G` to <code>\`G\`</code>, but this last form is not well taken into account when building the doc. You must also use `r"""`. You should also do the same in `generic_graph.py`.

In the toc, you added `Return the canonically labeled graph.` but this is different from the sentence in the method. I suggest to use only `Return the canonical graph`.

You don't want to use [canonization](https://en.wikipedia.org/wiki/Canonization) but [canonicalization](https://en.wikipedia.org/wiki/Canonicalization), right ? ;)


Some comments on the parameters

```
-        - ``certificate`` -- if ``True``, a dictionary mapping from the
-          (di)graph to its canonical label will be given.
+        - ``certificate`` -- boolean (default: ``False``). When set to ``True``,
+          a dictionary mapping from the vertices of the (di)graph to its canonical
+          label will also be returned.
```

```
-        - ``edge_labels`` -- default ``False``, otherwise allows
-          only permutations respecting edge labels.
+        - ``edge_labels`` -- boolean (default: ``False``). When set to ``True``,
+          allows only permutations respecting edge labels.
```

```
-        - ``algorithm``, a string -- the algorithm to use; currently available:
+        - ``algorithm`` -- a string (default: ``None``). The algorithm to use;
+          currently available:
```

```
-        - ``return_graph`` -- if set, instead of graph return the list of
-          edges of the the canonical graph; only available when Bliss is
-          explicitly set as algorithm
+        - ``return_graph`` -- boolean (default: ``True``). When set to ``False``,
+          returns the list of edges of the the canonical graph instead of the
+          canonical graph; only available when ``'bliss'`` is explicitly set as
+          algorithm.
```

use `bliss` and not `Bliss` to avoid confusion.

`return_graph='false'` -> `return_graph=False`

`graph with multiedges` -> `graph with multiple edges` to be consistent with the names of methods (ok, not with the constructor parameter).


Failing example in `generic_graph.py`:

```
Failed example:
    g
Expected:
    Graph on 6 vertices
Got:
    Grid Graph for [2, 3]: Graph on 6 vertices
```

For parameter `partition`, I tried the following:

```
sage: G = graphs.PetersenGraph()
sage: C = G.coloring()
sage: C
[[1, 3, 5, 9], [0, 2, 6], [4, 7, 8]]
sage: C[::-1]
[[4, 7, 8], [0, 2, 6], [1, 3, 5, 9]]
sage: A = G.canonical_label(partition=C, algorithm='bliss')
sage: B = G.canonical_label(partition=C[::-1], algorithm='bliss')
sage: A == B
False
sage: B = G.canonical_label(partition=[C[0], C[2], C[1]], algorithm='bliss')
sage: A == B
False
sage: A = G.canonical_label(partition=C, algorithm='bliss')
sage: B = G.canonical_label(partition=[C[0], C[1], C[2][::-1]], algorithm='bliss')
sage: A == B
True
```
By the way, it's boring to type `algorithm='bliss'` when bliss is your default algorithm...



---

archive/issue_comments_280313.json:
```json
{
    "body": "**Changing commit** from \"[739a9dfc0e6d76bac1a440fddbbffe26ad91ff6b](https://github.com/sagemath/sagetrac-mirror/commit/739a9dfc0e6d76bac1a440fddbbffe26ad91ff6b)\" to \"[4dabccd35885ec9b70a6dcaeb06ab1779c323d81](https://github.com/sagemath/sagetrac-mirror/commit/4dabccd35885ec9b70a6dcaeb06ab1779c323d81)\".",
    "created_at": "2017-11-05T13:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280313",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[739a9dfc0e6d76bac1a440fddbbffe26ad91ff6b](https://github.com/sagemath/sagetrac-mirror/commit/739a9dfc0e6d76bac1a440fddbbffe26ad91ff6b)" to "[4dabccd35885ec9b70a6dcaeb06ab1779c323d81](https://github.com/sagemath/sagetrac-mirror/commit/4dabccd35885ec9b70a6dcaeb06ab1779c323d81)".



---

archive/issue_comments_280314.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4dabccd35885ec9b70a6dcaeb06ab1779c323d81\">4dabccd</a></td><td><code>Some reviewer comments.</code></td></tr></table>\n",
    "created_at": "2017-11-05T13:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280314",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4dabccd35885ec9b70a6dcaeb06ab1779c323d81">4dabccd</a></td><td><code>Some reviewer comments.</code></td></tr></table>




---

archive/issue_comments_280315.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [@dcoudert](#comment%3A25):\n\nThanks for comments. I did most of them, but some comments:\n\n> In `bliss.pyx`, you changed some <code>\\`\\`G\\`\\`</code> and `G` to <code>\\`G\\`</code>, but this last form is not well taken into account when building the doc.\n\nThis is sometimes hard to decide. I guess we should use <code>\\`x\\`</code> only when referring to mathematical definition without any connection to the specific function parameters we are documenting.\n\n> In the toc, you added `Return the canonically labeled graph.` but this is different from the sentence in the method. I suggest to use only `Return the canonical graph`.\n\nI changed that.\n\nIn general I try to write a one-line description of the function to TOC when possible. For example `is_uniform` is explained as \"Return True if all congruences of the lattice consists of equal-sized blocks.\" in TOC, but the function starts with \"Return True if the lattice is uniform - -\" and then explains what is uniform.\n\n> You don't want to use [canonization](https://en.wikipedia.org/wiki/Canonization) but [canonicalization](https://en.wikipedia.org/wiki/Canonicalization), right ? ;)\n\nBut then there is [Graph canonization](https://en.wikipedia.org/wiki/Graph_canonization), so what to do?\n\n> For parameter `partition`, I tried the following:\n\nFor that we must first define what means to be \"canonical\" but still \"restrict permutations\". That's why I suggest postponing that to another ticket.\n\n> By the way, it's boring to type `algorithm='bliss'` when bliss is your default algorithm...\n\nTrue, but there is no other choise for most examples.\n\nE: I am not sure if the function should keep the graph's name or not. However, now it is consistent with `relabel()`.",
    "created_at": "2017-11-05T13:58:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280315",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:27'></a>
Replying to [@dcoudert](#comment%3A25):

Thanks for comments. I did most of them, but some comments:

> In `bliss.pyx`, you changed some <code>\`\`G\`\`</code> and `G` to <code>\`G\`</code>, but this last form is not well taken into account when building the doc.

This is sometimes hard to decide. I guess we should use <code>\`x\`</code> only when referring to mathematical definition without any connection to the specific function parameters we are documenting.

> In the toc, you added `Return the canonically labeled graph.` but this is different from the sentence in the method. I suggest to use only `Return the canonical graph`.

I changed that.

In general I try to write a one-line description of the function to TOC when possible. For example `is_uniform` is explained as "Return True if all congruences of the lattice consists of equal-sized blocks." in TOC, but the function starts with "Return True if the lattice is uniform - -" and then explains what is uniform.

> You don't want to use [canonization](https://en.wikipedia.org/wiki/Canonization) but [canonicalization](https://en.wikipedia.org/wiki/Canonicalization), right ? ;)

But then there is [Graph canonization](https://en.wikipedia.org/wiki/Graph_canonization), so what to do?

> For parameter `partition`, I tried the following:

For that we must first define what means to be "canonical" but still "restrict permutations". That's why I suggest postponing that to another ticket.

> By the way, it's boring to type `algorithm='bliss'` when bliss is your default algorithm...

True, but there is no other choise for most examples.

E: I am not sure if the function should keep the graph's name or not. However, now it is consistent with `relabel()`.



---

archive/issue_comments_280316.json:
```json
{
    "body": "<a id='comment:28'></a>\n> In general I try to write a one-line description of the function to TOC when possible. For example `is_uniform` is explained as \"Return True if all congruences of the lattice consists of equal-sized blocks.\" in TOC, but the function starts with \"Return True if the lattice is uniform - -\" and then explains what is uniform.\n\n \nAgreed. A significant effort remains to be done for cleaning the graph module. \n\n  \n\n> > You don't want to use [canonization](https://en.wikipedia.org/wiki/Canonization) but [canonicalization](https://en.wikipedia.org/wiki/Canonicalization), right ? ;)\n\n> \n> But then there is [Graph canonization](https://en.wikipedia.org/wiki/Graph_canonization), so what to do?\n\n \nYou are right. I did not see that. So let's use graph canonization.\n\nCould you add a link to the wikipedia page ?\n\n \n\n> > For parameter `partition`, I tried the following:\n\n> \n> For that we must first define what means to be \"canonical\" but still \"restrict permutations\". That's why I suggest postponing that to another ticket.\n\nAgreed. It's already much better\n\n \n\n> E: I am not sure if the function should keep the graph's name or not. However, now it is consistent with `relabel()`.\n\nI have no opinion on that.",
    "created_at": "2017-11-05T14:22:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280316",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:28'></a>
> In general I try to write a one-line description of the function to TOC when possible. For example `is_uniform` is explained as "Return True if all congruences of the lattice consists of equal-sized blocks." in TOC, but the function starts with "Return True if the lattice is uniform - -" and then explains what is uniform.

 
Agreed. A significant effort remains to be done for cleaning the graph module. 

  

> > You don't want to use [canonization](https://en.wikipedia.org/wiki/Canonization) but [canonicalization](https://en.wikipedia.org/wiki/Canonicalization), right ? ;)

> 
> But then there is [Graph canonization](https://en.wikipedia.org/wiki/Graph_canonization), so what to do?

 
You are right. I did not see that. So let's use graph canonization.

Could you add a link to the wikipedia page ?

 

> > For parameter `partition`, I tried the following:

> 
> For that we must first define what means to be "canonical" but still "restrict permutations". That's why I suggest postponing that to another ticket.

Agreed. It's already much better

 

> E: I am not sure if the function should keep the graph's name or not. However, now it is consistent with `relabel()`.

I have no opinion on that.



---

archive/issue_comments_280317.json:
```json
{
    "body": "**Changing commit** from \"[4dabccd35885ec9b70a6dcaeb06ab1779c323d81](https://github.com/sagemath/sagetrac-mirror/commit/4dabccd35885ec9b70a6dcaeb06ab1779c323d81)\" to \"[d8dc2670e73fa83f7b40f82e73b2b5028449cfac](https://github.com/sagemath/sagetrac-mirror/commit/d8dc2670e73fa83f7b40f82e73b2b5028449cfac)\".",
    "created_at": "2017-11-05T17:29:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280317",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[4dabccd35885ec9b70a6dcaeb06ab1779c323d81](https://github.com/sagemath/sagetrac-mirror/commit/4dabccd35885ec9b70a6dcaeb06ab1779c323d81)" to "[d8dc2670e73fa83f7b40f82e73b2b5028449cfac](https://github.com/sagemath/sagetrac-mirror/commit/d8dc2670e73fa83f7b40f82e73b2b5028449cfac)".



---

archive/issue_comments_280318.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8dc2670e73fa83f7b40f82e73b2b5028449cfac\">d8dc267</a></td><td><code>Add wikipedia link.</code></td></tr></table>\n",
    "created_at": "2017-11-05T17:29:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280318",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8dc2670e73fa83f7b40f82e73b2b5028449cfac">d8dc267</a></td><td><code>Add wikipedia link.</code></td></tr></table>




---

archive/issue_comments_280319.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [@dcoudert](#comment%3A28):\n\n> Could you add a link to the wikipedia page ?\n\nGood idea. Done.",
    "created_at": "2017-11-05T17:29:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280319",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:30'></a>
Replying to [@dcoudert](#comment%3A28):

> Could you add a link to the wikipedia page ?

Good idea. Done.



---

archive/issue_events_175585.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-05T17:29:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-175585"
}
```



---

archive/issue_events_175586.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-05T17:29:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-175586"
}
```



---

archive/issue_events_175587.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-11-05T17:58:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-175587"
}
```



---

archive/issue_events_175588.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-11-05T17:58:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-175588"
}
```



---

archive/issue_comments_280320.json:
```json
{
    "body": "<a id='comment:31'></a>\nGood. The doc displays nicely now (I like the \\cong stuff).",
    "created_at": "2017-11-05T17:58:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280320",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:31'></a>
Good. The doc displays nicely now (I like the \cong stuff).



---

archive/issue_comments_280321.json:
```json
{
    "body": "**Changing branch** from \"[u/jmantysalo/graph-can-label-pos](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/graph-can-label-pos)\" to \"[d8dc2670e73fa83f7b40f82e73b2b5028449cfac](https://github.com/sagemath/sagetrac-mirror/commit/d8dc2670e73fa83f7b40f82e73b2b5028449cfac)\".",
    "created_at": "2017-11-08T19:24:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19517#issuecomment-280321",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jmantysalo/graph-can-label-pos](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/graph-can-label-pos)" to "[d8dc2670e73fa83f7b40f82e73b2b5028449cfac](https://github.com/sagemath/sagetrac-mirror/commit/d8dc2670e73fa83f7b40f82e73b2b5028449cfac)".



---

archive/issue_events_175589.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-11-08T19:24:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-175589"
}
```



---

archive/issue_events_175590.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0542f0a7fb5811ac064abb17cf1145a76a815a6a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-11-08T19:24:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19517",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19517#event-175590"
}
```
