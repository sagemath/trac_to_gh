# Issue 19405: Upgrade lrcalc to version 1.2

archive/issues_019405.json:
```json
{
    "body": "CC:  @tscrim\n\nIt seems that upstream has fixed the previously reported bugs, so the old patches and build hacks can be removed.\n\nWe add one patch from upstream to fix include paths: `lrcalc` should use `#include \"...\"` instead of `#include <...>` to include private headers.\n\n**Tarball**: [http://www.math.rutgers.edu/~asbuch/lrcalc/lrcalc-1.2.tar.gz](http://www.math.rutgers.edu/~asbuch/lrcalc/lrcalc-1.2.tar.gz)\n\nIssue created by migration from https://trac.sagemath.org/ticket/19642\n\n",
    "closed_at": "2015-12-01T17:57:31Z",
    "created_at": "2015-11-29T13:11:04Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Upgrade lrcalc to version 1.2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19405",
    "user": "https://github.com/jdemeyer"
}
```
CC:  @tscrim

It seems that upstream has fixed the previously reported bugs, so the old patches and build hacks can be removed.

We add one patch from upstream to fix include paths: `lrcalc` should use `#include "..."` instead of `#include <...>` to include private headers.

**Tarball**: [http://www.math.rutgers.edu/~asbuch/lrcalc/lrcalc-1.2.tar.gz](http://www.math.rutgers.edu/~asbuch/lrcalc/lrcalc-1.2.tar.gz)

Issue created by migration from https://trac.sagemath.org/ticket/19642





---

archive/issue_comments_266479.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-11-29T13:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19405#issuecomment-266479",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_266480.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-29T14:35:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19405#issuecomment-266480",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_266481.json:
```json
{
    "body": "With the current branch, during the build process I get:\n\n```\nIn file included from /home/travis/sage/src/build/cythonized/sage/libs/lrcalc/lrcalc.c:286:0:\n/home/travis/sage/local/include/lrcalc/schublib.h:4:21: fatal error: hashtab.h: No such file or directory\n #include <hashtab.h>\n                     ^\ncompilation terminated.\n```\nSo I updated the patch in the new branch. If my change is good, then you can set a positive review.\n\nAlso, could you resend the updated patch Jeroen?\n\n---\nNew commits:",
    "created_at": "2015-11-29T16:21:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19405#issuecomment-266481",
    "user": "https://github.com/tscrim"
}
```

With the current branch, during the build process I get:

```
In file included from /home/travis/sage/src/build/cythonized/sage/libs/lrcalc/lrcalc.c:286:0:
/home/travis/sage/local/include/lrcalc/schublib.h:4:21: fatal error: hashtab.h: No such file or directory
 #include <hashtab.h>
                     ^
compilation terminated.
```
So I updated the patch in the new branch. If my change is good, then you can set a positive review.

Also, could you resend the updated patch Jeroen?

---
New commits:



---

archive/issue_comments_266482.json:
```json
{
    "body": "I understand why I didn't get this error: on my system, there is a `/usr/include/hashtab.h` (from `glibc`, nothing to do with `lrcalc`). So that file must have been included.\n\nYour patch does the right thing.",
    "created_at": "2015-11-29T17:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19405#issuecomment-266482",
    "user": "https://github.com/jdemeyer"
}
```

I understand why I didn't get this error: on my system, there is a `/usr/include/hashtab.h` (from `glibc`, nothing to do with `lrcalc`). So that file must have been included.

Your patch does the right thing.



---

archive/issue_comments_266483.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-29T17:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19405#issuecomment-266483",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_266484.json:
```json
{
    "body": "Replying to [comment:7 tscrim]:\n> Also, could you resend the updated patch Jeroen?\n\n\nDone.",
    "created_at": "2015-11-29T17:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19405#issuecomment-266484",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:7 tscrim]:
> Also, could you resend the updated patch Jeroen?


Done.



---

archive/issue_comments_266485.json:
```json
{
    "body": "Replying to [comment:9 jdemeyer]:\n> Replying to [comment:7 tscrim]:\n> > Also, could you resend the updated patch Jeroen?\n\n> \n> Done.\n\n\nThanks.",
    "created_at": "2015-11-29T19:11:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19405#issuecomment-266485",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:9 jdemeyer]:
> Replying to [comment:7 tscrim]:
> > Also, could you resend the updated patch Jeroen?

> 
> Done.


Thanks.



---

archive/issue_comments_266486.json:
```json
{
    "body": "```\npatching file src/symfcn.h\ncan't find file to patch at input line 19\nPerhaps you used the wrong -p or --strip option?\nThe text leading up to this was:\n--------------------------\n--------------------------\nFile to patch: \nSkip this patch? [y] \nSkipping patch.\n1 out of 1 hunk ignored\nError applying '../patches/includes.patch'\n```",
    "created_at": "2015-11-30T11:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19405#issuecomment-266486",
    "user": "https://github.com/vbraun"
}
```

```
patching file src/symfcn.h
can't find file to patch at input line 19
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
--------------------------
File to patch: 
Skip this patch? [y] 
Skipping patch.
1 out of 1 hunk ignored
Error applying '../patches/includes.patch'
```



---

archive/issue_comments_266487.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-11-30T12:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19405#issuecomment-266487",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_266488.json:
```json
{
    "body": "I replaced the patch by the commit taken from upstream.\n\n---\nNew commits:",
    "created_at": "2015-11-30T12:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19405#issuecomment-266488",
    "user": "https://github.com/jdemeyer"
}
```

I replaced the patch by the commit taken from upstream.

---
New commits:



---

archive/issue_comments_266489.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-11-30T12:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19405#issuecomment-266489",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_266490.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-30T16:10:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19405#issuecomment-266490",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_266491.json:
```json
{
    "body": "I had forgot to update the path in my revision, and it probably was working from my direct changes in `local/include`. Anyways, upstream patch works for me.",
    "created_at": "2015-11-30T16:10:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19405#issuecomment-266491",
    "user": "https://github.com/tscrim"
}
```

I had forgot to update the path in my revision, and it probably was working from my direct changes in `local/include`. Anyways, upstream patch works for me.



---

archive/issue_events_053971.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-12-01T17:57:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19405",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19405#event-53971"
}
```



---

archive/issue_comments_266492.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-12-01T17:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19405#issuecomment-266492",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
