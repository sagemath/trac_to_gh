# Issue 19522: Change default for MILP variables to nonnegative=False

archive/issues_019285.json:
```json
{
    "body": "See #15521 and #16504.\n\nCC:  @nathanncohen\n\nBranch/Commit: 7e9446923aad2afc80a2103dd8d510463ba80fc4\n\nReviewer: Nathann Cohen\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19522\n\n",
    "closed_at": "2015-11-06T19:04:39Z",
    "created_at": "2015-11-04T15:53:58Z",
    "labels": [
        "component: linear programming"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Change default for MILP variables to nonnegative=False",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19522",
    "user": "https://github.com/jdemeyer"
}
```
See #15521 and #16504.

CC:  @nathanncohen

Branch/Commit: 7e9446923aad2afc80a2103dd8d510463ba80fc4

Reviewer: Nathann Cohen

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19522





---

archive/issue_comments_281681.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2015-11-04T16:32:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281681",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_281682.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-04T16:32:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281682",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_281683.json:
```json
{
    "body": "<a id='comment:3'></a>Hellooooo Jeroen,\n\nThis look good to me, but could you say why you replace exmples which use the \"p[x]\" variables with examples that do not use this trick? It was added because it is useful, from time to time, when instead of needing a 'dictionary' of variables you just need 'one' specific variable. With this trick, you avoid needing to create a dictionary that you wouldn't use much otherwise.\n\nAaaaaaaaand as this trick is pretty unknown, some advertisement cannot hurt `:-)`\n\nNathann",
    "created_at": "2015-11-05T09:25:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281683",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'></a>Hellooooo Jeroen,

This look good to me, but could you say why you replace exmples which use the "p[x]" variables with examples that do not use this trick? It was added because it is useful, from time to time, when instead of needing a 'dictionary' of variables you just need 'one' specific variable. With this trick, you avoid needing to create a dictionary that you wouldn't use much otherwise.

Aaaaaaaaand as this trick is pretty unknown, some advertisement cannot hurt `:-)`

Nathann



---

archive/issue_comments_281684.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 ncohen]:\n> why you replace exmples which use the \"p[x]\" variables with examples that do not use this trick?\n\nBecause that trick creates variables with *default* parameters, which now changed to `nonnegative=False`. So, the restore the old example, I needed to explicitly use `p.new_variable(nonnegative=True)`.",
    "created_at": "2015-11-05T10:27:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281684",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>Replying to [comment:3 ncohen]:
> why you replace exmples which use the "p[x]" variables with examples that do not use this trick?

Because that trick creates variables with *default* parameters, which now changed to `nonnegative=False`. So, the restore the old example, I needed to explicitly use `p.new_variable(nonnegative=True)`.



---

archive/issue_comments_281685.json:
```json
{
    "body": "<a id='comment:5'></a>Hmmmmmmm.. I see. Would you have anything against fixing that by calling `p.set_min(p['x'],0)` instead?",
    "created_at": "2015-11-05T10:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281685",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:5'></a>Hmmmmmmm.. I see. Would you have anything against fixing that by calling `p.set_min(p['x'],0)` instead?



---

archive/issue_comments_281686.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 ncohen]:\n> Hmmmmmmm.. I see. Would you have anything against fixing that by calling `p.set_min(p['x'],0)` instead?\n  \nYes, I think it's uglier than what I have currently done: you need to do that for every variable separately. Also, `set_min(x, 0)` is less readable than using `nonnegative=True`.",
    "created_at": "2015-11-05T12:25:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281686",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>Replying to [comment:5 ncohen]:
> Hmmmmmmm.. I see. Would you have anything against fixing that by calling `p.set_min(p['x'],0)` instead?
  
Yes, I think it's uglier than what I have currently done: you need to do that for every variable separately. Also, `set_min(x, 0)` is less readable than using `nonnegative=True`.



---

archive/issue_comments_281687.json:
```json
{
    "body": "<a id='comment:7'></a>That it is uglier is granted, but the syntax has to be illustrated or nobody will know that it exists.",
    "created_at": "2015-11-05T12:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281687",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>That it is uglier is granted, but the syntax has to be illustrated or nobody will know that it exists.



---

archive/issue_comments_281688.json:
```json
{
    "body": "<a id='comment:8'></a>Perhaps you could just remove the constraint that those variables are nonnegative, if it plays no role in the example?",
    "created_at": "2015-11-05T12:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281688",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:8'></a>Perhaps you could just remove the constraint that those variables are nonnegative, if it plays no role in the example?



---

archive/issue_comments_281689.json:
```json
{
    "body": "<a id='comment:9'></a>If you really want to fix this properly (not on this ticket), allow setting the default variable parameters in the `MixedIntegerLinearProgram` call:\n\n```\nsage: p = MixedIntegerLinearProgram(nonnegative=True, integer=True)\n```",
    "created_at": "2015-11-05T12:27:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281689",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>If you really want to fix this properly (not on this ticket), allow setting the default variable parameters in the `MixedIntegerLinearProgram` call:

```
sage: p = MixedIntegerLinearProgram(nonnegative=True, integer=True)
```



---

archive/issue_comments_281690.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:7 ncohen]:\n> That it is uglier is granted, but the syntax has to be illustrated or nobody will know that it exists.\n\nIf \"the syntax\" often yields ugly code, then perhaps \"the syntax\" shouldn't be illustrated as much.",
    "created_at": "2015-11-05T12:29:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281690",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>Replying to [comment:7 ncohen]:
> That it is uglier is granted, but the syntax has to be illustrated or nobody will know that it exists.

If "the syntax" often yields ugly code, then perhaps "the syntax" shouldn't be illustrated as much.



---

archive/issue_comments_281691.json:
```json
{
    "body": "<a id='comment:11'></a>ARgggggg... No that's scary `O_o`\n\nIf the constraint that the variables should be nonnegative is not necessary in the LP you change, then our problem has a trivial solution.\n\nNathann",
    "created_at": "2015-11-05T12:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281691",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>ARgggggg... No that's scary `O_o`

If the constraint that the variables should be nonnegative is not necessary in the LP you change, then our problem has a trivial solution.

Nathann



---

archive/issue_comments_281692.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:8 ncohen]:\n> Perhaps you could just remove the constraint that those variables are nonnegative, if it plays no role in the example?\n\nWhich example? There are many which I changed.",
    "created_at": "2015-11-05T12:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281692",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Replying to [comment:8 ncohen]:
> Perhaps you could just remove the constraint that those variables are nonnegative, if it plays no role in the example?

Which example? There are many which I changed.



---

archive/issue_comments_281693.json:
```json
{
    "body": "<a id='comment:13'></a>> If \"the syntax\" often yields ugly code, then perhaps \"the syntax\" shouldn't be illustrated as much.\n\n\nThere are frequent cases in which it is valid. Let us say that you have many variables `x[v]` and that you want to minimize their maximum. Then you can do this:\n\n```\np.set_objective(p['max'])\nfor v in g:\n    p.add_constraint(x[v] <= p['max'])\n```\n\nIs was not added without reason `^^;`",
    "created_at": "2015-11-05T12:31:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281693",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:13'></a>> If "the syntax" often yields ugly code, then perhaps "the syntax" shouldn't be illustrated as much.


There are frequent cases in which it is valid. Let us say that you have many variables `x[v]` and that you want to minimize their maximum. Then you can do this:

```
p.set_objective(p['max'])
for v in g:
    p.add_constraint(x[v] <= p['max'])
```

Is was not added without reason `^^;`



---

archive/issue_comments_281694.json:
```json
{
    "body": "<a id='comment:14'></a>> Which example? There are many which I changed.\n\n\nAll those in which you removed the call to `p[whatever]` and created a variable instead.\n\nNathann",
    "created_at": "2015-11-05T12:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281694",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>> Which example? There are many which I changed.


All those in which you removed the call to `p[whatever]` and created a variable instead.

Nathann



---

archive/issue_comments_281695.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:13 ncohen]:\n> Is was not added without reason `^^;`\n\n\nOf course. I just don't think it is justified to make doctests uglier just to show off \"the syntax\". If the doctest can be expressed naturally using \"the syntax\", then there is no problem. However, if it requires constructions like `p.set_min(p['x'], 0)`, then perhaps \"the syntax\" should not be used.",
    "created_at": "2015-11-05T12:33:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281695",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>Replying to [comment:13 ncohen]:
> Is was not added without reason `^^;`


Of course. I just don't think it is justified to make doctests uglier just to show off "the syntax". If the doctest can be expressed naturally using "the syntax", then there is no problem. However, if it requires constructions like `p.set_min(p['x'], 0)`, then perhaps "the syntax" should not be used.



---

archive/issue_comments_281696.json:
```json
{
    "body": "<a id='comment:16'></a>Yep. So please check that the nonnegativity plays no role in the examples that you modify, for if it is not required then the syntax can stay, and be elegant.",
    "created_at": "2015-11-05T12:35:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281696",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'></a>Yep. So please check that the nonnegativity plays no role in the examples that you modify, for if it is not required then the syntax can stay, and be elegant.



---

archive/issue_comments_281697.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:14 ncohen]:\n> > Which example? There are many which I changed.\n\n> \n> All those in which you removed the call to `p[whatever]` and created a variable instead.\n\n\nIt is certainly not true that all those changes can be reverted. I only did this because I got doctest failures.",
    "created_at": "2015-11-05T12:35:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281697",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>Replying to [comment:14 ncohen]:
> > Which example? There are many which I changed.

> 
> All those in which you removed the call to `p[whatever]` and created a variable instead.


It is certainly not true that all those changes can be reverted. I only did this because I got doctest failures.



---

archive/issue_comments_281698.json:
```json
{
    "body": "<a id='comment:18'></a>> It is certainly not true that all those changes can be reverted. I only did this because I got doctest failures.\n\n\nI see. Then please revert those that do not need this change, and I will then go over the others to change the LP if possible. Those LP are just here to provide an illustration of the syntax, there is no harm in modifying them to this end.",
    "created_at": "2015-11-05T12:37:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281698",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:18'></a>> It is certainly not true that all those changes can be reverted. I only did this because I got doctest failures.


I see. Then please revert those that do not need this change, and I will then go over the others to change the LP if possible. Those LP are just here to provide an illustration of the syntax, there is no harm in modifying them to this end.



---

archive/issue_comments_281699.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-05T12:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281699",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_281700.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:18 ncohen]:\n> Then please revert those that do not need this change\n\nDone, there was just one.\n\n> I will then go over the others to change the LP if possible.\n\nIf you insist. However, make sure you don't introduce conflicts with #19525.",
    "created_at": "2015-11-05T12:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281700",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>Replying to [comment:18 ncohen]:
> Then please revert those that do not need this change

Done, there was just one.

> I will then go over the others to change the LP if possible.

If you insist. However, make sure you don't introduce conflicts with #19525.



---

archive/issue_comments_281701.json:
```json
{
    "body": "<a id='comment:21'></a>> If you insist. However, make sure you don't introduce conflicts with #19525.\n\n\nI will only touch the doctests that you modify here.\n\nNathann",
    "created_at": "2015-11-05T12:49:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281701",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:21'></a>> If you insist. However, make sure you don't introduce conflicts with #19525.


I will only touch the doctests that you modify here.

Nathann



---

archive/issue_comments_281702.json:
```json
{
    "body": "<a id='comment:22'></a>I added a commit at public/19522. If you agree with it, then you can set this ticket to `positive_review`.\n\nNathann",
    "created_at": "2015-11-05T13:06:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281702",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:22'></a>I added a commit at public/19522. If you agree with it, then you can set this ticket to `positive_review`.

Nathann



---

archive/issue_comments_281703.json:
```json
{
    "body": "<a id='comment:23'></a>New commits:",
    "created_at": "2015-11-05T13:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281703",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>New commits:



---

archive/issue_comments_281704.json:
```json
{
    "body": "<a id='comment:24'></a>If this makes you a happier man...",
    "created_at": "2015-11-05T13:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281704",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>If this makes you a happier man...



---

archive/issue_comments_281705.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-05T13:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281705",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_281706.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-11-06T19:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19522#issuecomment-281706",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_053792.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-06T19:04:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19522",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19522#event-53792"
}
```
