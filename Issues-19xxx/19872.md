# Issue 19872: regular symmetric Hadamard matrices for n=324

archive/issues_019635.json:
```json
{
    "assignees": [],
    "body": "Implements the construction from \n\nZ.Janko, H.Kharaghani, V.D.Tonchev, The existence of a Bush-type Hadamard matrix of order 324\nand two new infinite classes of symmetric designs. Des. Codes Cryptogr. 24(2001), 225-232\n\nand use its RSHCD of '+' type to build an srg on v=324, k=153. Also, use it to construct an RSHCD of '-' type and build an srg on v=324, k=152.\n\n\n\n\nDepends on #19861\n\nCC:  @nathanncohen\n\nBranch: **[567608b](https://github.com/sagemath/sagetrac-mirror/commit/567608be0b53ec173be1f1a755af202c4a4de564)**\n\nReviewer: **Nathann Cohen**\n\nAuthor: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19872_\n\n",
    "closed_at": "2016-01-20T10:19:47Z",
    "created_at": "2016-01-12T14:01:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "regular symmetric Hadamard matrices for n=324",
    "type": "issue",
    "updated_at": "2016-01-20T15:59:12Z",
    "url": "https://github.com/sagemath/sage/issues/19872",
    "user": "https://github.com/dimpase"
}
```
Implements the construction from 

Z.Janko, H.Kharaghani, V.D.Tonchev, The existence of a Bush-type Hadamard matrix of order 324
and two new infinite classes of symmetric designs. Des. Codes Cryptogr. 24(2001), 225-232

and use its RSHCD of '+' type to build an srg on v=324, k=153. Also, use it to construct an RSHCD of '-' type and build an srg on v=324, k=152.




Depends on #19861

CC:  @nathanncohen

Branch: **[567608b](https://github.com/sagemath/sagetrac-mirror/commit/567608be0b53ec173be1f1a755af202c4a4de564)**

Reviewer: **Nathann Cohen**

Author: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/19872_





---

archive/issue_events_253614.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-01-12T14:01:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "milestone_number": null,
    "milestone_title": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19872#event-253614"
}
```



---

archive/issue_events_253615.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-01-12T14:01:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19872#event-253615"
}
```



---

archive/issue_events_253616.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-01-12T14:01:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19872#event-253616"
}
```



---

archive/issue_events_253617.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-01-12T14:01:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19872#event-253617"
}
```



---

archive/issue_comments_286749.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/afcb53c134fb82502275fc7c5fadec55787b85ef\">afcb53c</a></td><td><code>RSHCD with n=324, of + type AND of - type, and the graphs</code></td></tr></table>\n",
    "created_at": "2016-01-12T14:07:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286749",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:1'>Comment 1:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/afcb53c134fb82502275fc7c5fadec55787b85ef">afcb53c</a></td><td><code>RSHCD with n=324, of + type AND of - type, and the graphs</code></td></tr></table>




---

archive/issue_comments_286750.json:
```json
{
    "body": "Changed commit from **[988214e](https://github.com/sagemath/sagetrac-mirror/commit/988214e3f348db7f00d8d5eb282a6636f3b9a61f)** to **[afcb53c](https://github.com/sagemath/sagetrac-mirror/commit/afcb53c134fb82502275fc7c5fadec55787b85ef)**",
    "created_at": "2016-01-12T14:07:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286750",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[988214e](https://github.com/sagemath/sagetrac-mirror/commit/988214e3f348db7f00d8d5eb282a6636f3b9a61f)** to **[afcb53c](https://github.com/sagemath/sagetrac-mirror/commit/afcb53c134fb82502275fc7c5fadec55787b85ef)**



---

archive/issue_comments_286751.json:
```json
{
    "body": "Dependencies: **#19861**",
    "created_at": "2016-01-12T17:02:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286751",
    "user": "https://github.com/nathanncohen"
}
```

Dependencies: **#19861**



---

archive/issue_comments_286752.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\n(I guess you intended this dependency as your branch contains a commit from this other ticket)",
    "created_at": "2016-01-12T17:02:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286752",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:2'>Comment 2:</a>
(I guess you intended this dependency as your branch contains a commit from this other ticket)



---

archive/issue_comments_286753.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nShould this ticket be in `needs_review`?\n\nWhat would you think of moving your code to a new function? I understand that it seems a bit silly considering that the code is 10 lines long, but that would give you a proper place to add your doc. As it is, it feels a bit weird to have a lengthy explanation of how this specific RSHCD is built when there is none for the others.\n\nNathann",
    "created_at": "2016-01-12T17:06:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286753",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:3'>Comment 3:</a>
Should this ticket be in `needs_review`?

What would you think of moving your code to a new function? I understand that it seems a bit silly considering that the code is 10 lines long, but that would give you a proper place to add your doc. As it is, it feels a bit weird to have a lengthy explanation of how this specific RSHCD is built when there is none for the others.

Nathann



---

archive/issue_events_253618.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-01-12T19:13:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19872#event-253618"
}
```



---

archive/issue_comments_286754.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nReplying to [@nathanncohen](#comment%3A3):\n> Should this ticket be in `needs_review`?\n> \n> What would you think of moving your code to a new function? I understand that it seems a bit silly considering that the code is 10 lines long, but that would give you a proper place to add your doc. As it is, it feels a bit weird to have a lengthy explanation of how this specific RSHCD is built when there is none for the others.\n\nas you please. We will also write a bit about it in our preprint.\nIt's a nice addition...",
    "created_at": "2016-01-12T19:16:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286754",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'>Comment 5:</a>
Replying to [@nathanncohen](#comment%3A3):
> Should this ticket be in `needs_review`?
> 
> What would you think of moving your code to a new function? I understand that it seems a bit silly considering that the code is 10 lines long, but that would give you a proper place to add your doc. As it is, it feels a bit weird to have a lengthy explanation of how this specific RSHCD is built when there is none for the others.

as you please. We will also write a bit about it in our preprint.
It's a nice addition...



---

archive/issue_comments_286755.json:
```json
{
    "body": "Changed commit from **[afcb53c](https://github.com/sagemath/sagetrac-mirror/commit/afcb53c134fb82502275fc7c5fadec55787b85ef)** to **[a42d6ac](https://github.com/sagemath/sagetrac-mirror/commit/a42d6ac5db274aff0ce8dcd58c0c9c2fe318e4f8)**",
    "created_at": "2016-01-12T20:01:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286755",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[afcb53c](https://github.com/sagemath/sagetrac-mirror/commit/afcb53c134fb82502275fc7c5fadec55787b85ef)** to **[a42d6ac](https://github.com/sagemath/sagetrac-mirror/commit/a42d6ac5db274aff0ce8dcd58c0c9c2fe318e4f8)**



---

archive/issue_comments_286756.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a42d6ac5db274aff0ce8dcd58c0c9c2fe318e4f8\">a42d6ac</a></td><td><code>moved v=324 to a separate function, deleted some extra spaces</code></td></tr></table>\n",
    "created_at": "2016-01-12T20:01:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286756",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:6'>Comment 6:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a42d6ac5db274aff0ce8dcd58c0c9c2fe318e4f8">a42d6ac</a></td><td><code>moved v=324 to a separate function, deleted some extra spaces</code></td></tr></table>




---

archive/issue_comments_286757.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\ndone. \ntnx to First Great Western trains for free wifi :-)",
    "created_at": "2016-01-12T20:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286757",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'>Comment 7:</a>
done. 
tnx to First Great Western trains for free wifi :-)



---

archive/issue_comments_286758.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d63a13b2129d6a0b358b015367a3469fd5f28c60\">d63a13b</a></td><td><code>moved v=324 to a separate function, deleted some extra spaces</code></td></tr></table>\n",
    "created_at": "2016-01-13T12:54:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286758",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>Comment 8:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d63a13b2129d6a0b358b015367a3469fd5f28c60">d63a13b</a></td><td><code>moved v=324 to a separate function, deleted some extra spaces</code></td></tr></table>




---

archive/issue_comments_286759.json:
```json
{
    "body": "Changed commit from **[a42d6ac](https://github.com/sagemath/sagetrac-mirror/commit/a42d6ac5db274aff0ce8dcd58c0c9c2fe318e4f8)** to **[d63a13b](https://github.com/sagemath/sagetrac-mirror/commit/d63a13b2129d6a0b358b015367a3469fd5f28c60)**",
    "created_at": "2016-01-13T12:54:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286759",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a42d6ac](https://github.com/sagemath/sagetrac-mirror/commit/a42d6ac5db274aff0ce8dcd58c0c9c2fe318e4f8)** to **[d63a13b](https://github.com/sagemath/sagetrac-mirror/commit/d63a13b2129d6a0b358b015367a3469fd5f28c60)**



---

archive/issue_comments_286760.json:
```json
{
    "body": "Changed commit from **[d63a13b](https://github.com/sagemath/sagetrac-mirror/commit/d63a13b2129d6a0b358b015367a3469fd5f28c60)** to **[e123de4](https://github.com/sagemath/sagetrac-mirror/commit/e123de45de77715fb84f03697e52d3d2b3c6e8a0)**",
    "created_at": "2016-01-14T08:26:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286760",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d63a13b](https://github.com/sagemath/sagetrac-mirror/commit/d63a13b2129d6a0b358b015367a3469fd5f28c60)** to **[e123de4](https://github.com/sagemath/sagetrac-mirror/commit/e123de45de77715fb84f03697e52d3d2b3c6e8a0)**



---

archive/issue_comments_286761.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/659a07ff2949f5158df587d5ba73bc67d163838b\">659a07f</a></td><td><code>trac #19872: Merged with 7.0.rc1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e123de45de77715fb84f03697e52d3d2b3c6e8a0\">e123de4</a></td><td><code>trac #19872: Review</code></td></tr></table>\n",
    "created_at": "2016-01-14T08:26:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286761",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>Comment 9:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/659a07ff2949f5158df587d5ba73bc67d163838b">659a07f</a></td><td><code>trac #19872: Merged with 7.0.rc1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e123de45de77715fb84f03697e52d3d2b3c6e8a0">e123de4</a></td><td><code>trac #19872: Review</code></td></tr></table>




---

archive/issue_comments_286762.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nI went over your branch and I agree with it. I added a small commit with a fix for a broken link and a couple of unimportant things. If you agree with it, you can change the ticket's status. Thanks for those graphs !!!\n\nNathann",
    "created_at": "2016-01-14T08:30:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286762",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:10'>Comment 10:</a>
I went over your branch and I agree with it. I added a small commit with a fix for a broken link and a couple of unimportant things. If you agree with it, you can change the ticket's status. Thanks for those graphs !!!

Nathann



---

archive/issue_comments_286763.json:
```json
{
    "body": "Reviewer: **Nathann Cohen**",
    "created_at": "2016-01-14T08:30:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286763",
    "user": "https://github.com/nathanncohen"
}
```

Reviewer: **Nathann Cohen**



---

archive/issue_comments_286764.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nI'm working on speeding it up. Already using libgap gives a 3-fold speedup...\n\n```\ndiff --git a/src/sage/graphs/generators/smallgraphs.py b/src/sage/graphs/generators/smallgraphs\nindex 8ea232d..840c346 100644\n--- a/src/sage/graphs/generators/smallgraphs.py\n+++ b/src/sage/graphs/generators/smallgraphs.py\n@@ -4941,7 +4941,7 @@ def JankoKharaghaniTonchevGraph():\n \n     EXAMPLES::\n \n-        sage: Gamma=graphs.JankoKharaghaniTonchevGraph()  # long time\n+        sage: Gamma=graphs.JankoKharaghaniTonchevGraph()  # long time (14 sec)\n         sage: Gamma.is_strongly_regular(parameters=True)  # long time\n         (324, 153, 72, 72)\n \n@@ -4956,7 +4956,7 @@ def JankoKharaghaniTonchevGraph():\n     from itertools import product\n     from sage.misc.misc_c import prod\n     from sage.combinat.permutation import Permutation as P\n-    from sage.groups.perm_gps.permgroup import PermutationGroup\n+    from sage.libs.gap.libgap import libgap\n \n     m1=prod([P((9*x+k,9*x+k+3,9*x+k+6)) for k,x in product(xrange(1,4),xrange(36))])\n     m2=prod([P((3*x+1,3*x+2,3*x+3)) for x in xrange(108)])\n@@ -4975,7 +4975,7 @@ def JankoKharaghaniTonchevGraph():\n                 (18*x+4,18*x+13),(18*x+5,18*x+14),(18*x+6,18*x+15),(18*x+7,18*x+16),\n                 (18*x+8,18*x+17),(18*x+9,18*x+18)]))\n                  for x in xrange(18))\n-    G=PermutationGroup([m1,m2,t,n1,n2,s,k])\n+    G=libgap.Group(map(lambda p: libgap.PermList(p), [m1,m2,t,n1,n2,s,k]))\n     B1=(19,22,25,29,30,31,33,34,35,37,40,43,47,48,49,51,52,53,55,56,57,65,\n         66,67,68,70,72,76,77,78,79,80,81,82,86,90,92,93,95,96,98,99,100,105,107,\n         109,110,111,119,120,121,122,124,126,128,129,131,132,134,135,136,141,143,\n@@ -4995,6 +4995,6 @@ def JankoKharaghaniTonchevGraph():\n     Gamma=Graph(multiedges=False,name='Janko-Kharaghani-Tonchev')\n     for i,b in ((1,B1),(163,B163)):\n         for j in b:\n-            Gamma.add_edges(map(tuple,G.orbit((i,j),action=\"OnSets\")))\n+            Gamma.add_edges(map(tuple,G.Orbit(libgap.Set([i,j]), libgap.OnSets)))\n     Gamma.relabel()\n     return Gamma\n```",
    "created_at": "2016-01-14T10:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286764",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'>Comment 11:</a>
I'm working on speeding it up. Already using libgap gives a 3-fold speedup...

```
diff --git a/src/sage/graphs/generators/smallgraphs.py b/src/sage/graphs/generators/smallgraphs
index 8ea232d..840c346 100644
--- a/src/sage/graphs/generators/smallgraphs.py
+++ b/src/sage/graphs/generators/smallgraphs.py
@@ -4941,7 +4941,7 @@ def JankoKharaghaniTonchevGraph():
 
     EXAMPLES::
 
-        sage: Gamma=graphs.JankoKharaghaniTonchevGraph()  # long time
+        sage: Gamma=graphs.JankoKharaghaniTonchevGraph()  # long time (14 sec)
         sage: Gamma.is_strongly_regular(parameters=True)  # long time
         (324, 153, 72, 72)
 
@@ -4956,7 +4956,7 @@ def JankoKharaghaniTonchevGraph():
     from itertools import product
     from sage.misc.misc_c import prod
     from sage.combinat.permutation import Permutation as P
-    from sage.groups.perm_gps.permgroup import PermutationGroup
+    from sage.libs.gap.libgap import libgap
 
     m1=prod([P((9*x+k,9*x+k+3,9*x+k+6)) for k,x in product(xrange(1,4),xrange(36))])
     m2=prod([P((3*x+1,3*x+2,3*x+3)) for x in xrange(108)])
@@ -4975,7 +4975,7 @@ def JankoKharaghaniTonchevGraph():
                 (18*x+4,18*x+13),(18*x+5,18*x+14),(18*x+6,18*x+15),(18*x+7,18*x+16),
                 (18*x+8,18*x+17),(18*x+9,18*x+18)]))
                  for x in xrange(18))
-    G=PermutationGroup([m1,m2,t,n1,n2,s,k])
+    G=libgap.Group(map(lambda p: libgap.PermList(p), [m1,m2,t,n1,n2,s,k]))
     B1=(19,22,25,29,30,31,33,34,35,37,40,43,47,48,49,51,52,53,55,56,57,65,
         66,67,68,70,72,76,77,78,79,80,81,82,86,90,92,93,95,96,98,99,100,105,107,
         109,110,111,119,120,121,122,124,126,128,129,131,132,134,135,136,141,143,
@@ -4995,6 +4995,6 @@ def JankoKharaghaniTonchevGraph():
     Gamma=Graph(multiedges=False,name='Janko-Kharaghani-Tonchev')
     for i,b in ((1,B1),(163,B163)):
         for j in b:
-            Gamma.add_edges(map(tuple,G.orbit((i,j),action="OnSets")))
+            Gamma.add_edges(map(tuple,G.Orbit(libgap.Set([i,j]), libgap.OnSets)))
     Gamma.relabel()
     return Gamma
```



---

archive/issue_comments_286765.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nhmm:\n\n```\n$ git pull trac public/JKandJKT\nfatal: unable to connect to trac.sagemath.org:\ntrac.sagemath.org[0: 128.208.160.253]: errno=Connection refused\n```",
    "created_at": "2016-01-14T10:28:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286765",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'>Comment 12:</a>
hmm:

```
$ git pull trac public/JKandJKT
fatal: unable to connect to trac.sagemath.org:
trac.sagemath.org[0: 128.208.160.253]: errno=Connection refused
```



---

archive/issue_comments_286766.json:
```json
{
    "body": "Changed commit from **[e123de4](https://github.com/sagemath/sagetrac-mirror/commit/e123de45de77715fb84f03697e52d3d2b3c6e8a0)** to **[567608b](https://github.com/sagemath/sagetrac-mirror/commit/567608be0b53ec173be1f1a755af202c4a4de564)**",
    "created_at": "2016-01-14T11:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286766",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e123de4](https://github.com/sagemath/sagetrac-mirror/commit/e123de45de77715fb84f03697e52d3d2b3c6e8a0)** to **[567608b](https://github.com/sagemath/sagetrac-mirror/commit/567608be0b53ec173be1f1a755af202c4a4de564)**



---

archive/issue_comments_286767.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/567608be0b53ec173be1f1a755af202c4a4de564\">567608b</a></td><td><code>10-fold speedup using libGAP and reducing # of edge orbits</code></td></tr></table>\n",
    "created_at": "2016-01-14T11:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286767",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>Comment 13:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/567608be0b53ec173be1f1a755af202c4a4de564">567608b</a></td><td><code>10-fold speedup using libGAP and reducing # of edge orbits</code></td></tr></table>




---

archive/issue_comments_286768.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nHope you like my last commit - otherwise I'm happy with the ticket; please set it positive review then!",
    "created_at": "2016-01-14T11:48:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286768",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'>Comment 14:</a>
Hope you like my last commit - otherwise I'm happy with the ticket; please set it positive review then!



---

archive/issue_comments_286769.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nDima: in Python a call to 'map' creates a new list in memory. Do you understand of painful that makes it to read changes like that?\n\n```\n-        for j in b:\n+        for j in map(lambda x: x[0], st.OrbitsDomain(b)):\n```\nA new list in memory only because you want j[0] instead of j?...\n\nOf course we don't care, or course it's totally negligible, but what the hell. Don'you want to write Python code instead of badly translating GAP code into Python?..\n\nNathann",
    "created_at": "2016-01-14T12:47:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286769",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:15'>Comment 15:</a>
Dima: in Python a call to 'map' creates a new list in memory. Do you understand of painful that makes it to read changes like that?

```
-        for j in b:
+        for j in map(lambda x: x[0], st.OrbitsDomain(b)):
```
A new list in memory only because you want j[0] instead of j?...

Of course we don't care, or course it's totally negligible, but what the hell. Don'you want to write Python code instead of badly translating GAP code into Python?..

Nathann



---

archive/issue_comments_286770.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nAnyway.\n\nDid you try to figure out where was the loss of time coming from? I don't see Sage ever improving if you switch to using GAP directly whenever Sage's interface is too slow.\n\nNathann",
    "created_at": "2016-01-14T12:58:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286770",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'>Comment 16:</a>
Anyway.

Did you try to figure out where was the loss of time coming from? I don't see Sage ever improving if you switch to using GAP directly whenever Sage's interface is too slow.

Nathann



---

archive/issue_events_253619.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2016-01-14T12:58:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19872#event-253619"
}
```



---

archive/issue_events_253620.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2016-01-14T12:58:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19872#event-253620"
}
```



---

archive/issue_comments_286771.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nReplying to [@nathanncohen](#comment%3A15):\n> Dima: in Python a call to 'map' creates a new list in memory. Do you understand of painful that makes it to read changes like that?\n> \n> ```\n> -        for j in b:\n> +        for j in map(lambda x: x[0], st.OrbitsDomain(b)):\n> ```\n> A new list in memory only because you want j[0] instead of j?...\n\nno, it's actually two changes; say, if `st` was a Sage `PermutationGroup` it would be\n\n```\n-        for j in b:\n+        for j in map(lambda x: x[0], st.orbits(b)):\n```\nto discard taking representatives of the same orbit of `st` (a 3 to 4-fold speedup), and then the translation to libGAP (another 3-fold speedup) is \n\n```\n-        for j in map(lambda x: x[0], st.orbits(b)):\n+        for j in map(lambda x: x[0], st.OrbitsDomain(b)):\n```\nOK, I should have used `imap`.",
    "created_at": "2016-01-14T13:39:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286771",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'>Comment 17:</a>
Replying to [@nathanncohen](#comment%3A15):
> Dima: in Python a call to 'map' creates a new list in memory. Do you understand of painful that makes it to read changes like that?
> 
> ```
> -        for j in b:
> +        for j in map(lambda x: x[0], st.OrbitsDomain(b)):
> ```
> A new list in memory only because you want j[0] instead of j?...

no, it's actually two changes; say, if `st` was a Sage `PermutationGroup` it would be

```
-        for j in b:
+        for j in map(lambda x: x[0], st.orbits(b)):
```
to discard taking representatives of the same orbit of `st` (a 3 to 4-fold speedup), and then the translation to libGAP (another 3-fold speedup) is 

```
-        for j in map(lambda x: x[0], st.orbits(b)):
+        for j in map(lambda x: x[0], st.OrbitsDomain(b)):
```
OK, I should have used `imap`.



---

archive/issue_comments_286772.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nReplying to [@nathanncohen](#comment%3A16):\n> Did you try to figure out where was the loss of time coming from? I don't see Sage ever improving if you switch to using GAP directly whenever Sage's interface is too slow.\n\nWell, in both cases, it uses GAP, only when one uses libGAP the data goes back and forth much faster, a 3-fold speedup (apart from pipes, it's conversion to/from strings from/to lists of integers that is not needed when libGAP is used). Sage will improve when a fuller switch to libGAP happens...",
    "created_at": "2016-01-14T13:45:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286772",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'>Comment 18:</a>
Replying to [@nathanncohen](#comment%3A16):
> Did you try to figure out where was the loss of time coming from? I don't see Sage ever improving if you switch to using GAP directly whenever Sage's interface is too slow.

Well, in both cases, it uses GAP, only when one uses libGAP the data goes back and forth much faster, a 3-fold speedup (apart from pipes, it's conversion to/from strings from/to lists of integers that is not needed when libGAP is used). Sage will improve when a fuller switch to libGAP happens...



---

archive/issue_comments_286773.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n Z.Janko, H.Kharaghani, V.D.Tonchev, The existence of a Bush-type Hadamard matrix of order 324\n and two new infinite classes of symmetric designs. Des. Codes Cryptogr. 24(2001), 225-232\n \n-and use it's RSHCD of '+' type to build an srg on v=324, k=153. Also, use it to construct an RSHCD of '-' type and build an srg on v=324, k=152.\n+and use its RSHCD of '+' type to build an srg on v=324, k=153. Also, use it to construct an RSHCD of '-' type and build an srg on v=324, k=152.\n \n \n \n``````\n",
    "created_at": "2016-01-14T13:45:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286773",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 Z.Janko, H.Kharaghani, V.D.Tonchev, The existence of a Bush-type Hadamard matrix of order 324
 and two new infinite classes of symmetric designs. Des. Codes Cryptogr. 24(2001), 225-232
 
-and use it's RSHCD of '+' type to build an srg on v=324, k=153. Also, use it to construct an RSHCD of '-' type and build an srg on v=324, k=152.
+and use its RSHCD of '+' type to build an srg on v=324, k=153. Also, use it to construct an RSHCD of '-' type and build an srg on v=324, k=152.
 
 
 
``````




---

archive/issue_comments_286774.json:
```json
{
    "body": "Changed branch from **[public/JKandJKT](https://github.com/sagemath/sagetrac-mirror/tree/public/JKandJKT)** to **[567608b](https://github.com/sagemath/sagetrac-mirror/commit/567608be0b53ec173be1f1a755af202c4a4de564)**",
    "created_at": "2016-01-20T10:19:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286774",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/JKandJKT](https://github.com/sagemath/sagetrac-mirror/tree/public/JKandJKT)** to **[567608b](https://github.com/sagemath/sagetrac-mirror/commit/567608be0b53ec173be1f1a755af202c4a4de564)**



---

archive/issue_events_253621.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-20T10:19:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19872#event-253621"
}
```



---

archive/issue_events_253622.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e3520f4592341fc0bac51348fce99f187102f65e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-01-20T10:19:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19872#event-253622"
}
```



---

archive/issue_comments_286775.json:
```json
{
    "body": "Changed commit from **[567608b](https://github.com/sagemath/sagetrac-mirror/commit/567608be0b53ec173be1f1a755af202c4a4de564)** to none",
    "created_at": "2016-01-20T15:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286775",
    "user": "https://github.com/nathanncohen"
}
```

Changed commit from **[567608b](https://github.com/sagemath/sagetrac-mirror/commit/567608be0b53ec173be1f1a755af202c4a4de564)** to none



---

archive/issue_comments_286776.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nCoooooool... `:-P`",
    "created_at": "2016-01-20T15:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19872#issuecomment-286776",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:21'>Comment 21:</a>
Coooooool... `:-P`
