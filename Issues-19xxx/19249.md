# Issue 19249: Interface with TdLib

archive/issues_019012.json:
```json
{
    "body": "    Interface for tdlib, a library concerning treedecompositions\n    \n    Containes the glue-code for\n- an exact algorithms for computing a treedecomposition/the treewidth of a graph\n\n**Upstream**: [http://www.tdi.informatik.uni-frankfurt.de/~lukas/data/tdlib-0.3.1.tar.gz](http://www.tdi.informatik.uni-frankfurt.de/~lukas/data/tdlib-0.3.1.tar.gz)\n\nCC:  @dcoudert\n\nReviewer: Nathann Cohen\n\nAuthor: Lukas Larisch\n\nBranch: 030819926c0e666d6bef48674493a34dd6732b60\n\nCommit: 030819926c0e666d6bef48674493a34dd6732b60\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19249\n\n",
    "closed_at": "2015-11-21T00:31:07Z",
    "created_at": "2015-09-19T23:03:12Z",
    "labels": [
        "component: packages: experimental",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Interface with TdLib",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19249",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```
    Interface for tdlib, a library concerning treedecompositions
    
    Containes the glue-code for
- an exact algorithms for computing a treedecomposition/the treewidth of a graph

**Upstream**: [http://www.tdi.informatik.uni-frankfurt.de/~lukas/data/tdlib-0.3.1.tar.gz](http://www.tdi.informatik.uni-frankfurt.de/~lukas/data/tdlib-0.3.1.tar.gz)

CC:  @dcoudert

Reviewer: Nathann Cohen

Author: Lukas Larisch

Branch: 030819926c0e666d6bef48674493a34dd6732b60

Commit: 030819926c0e666d6bef48674493a34dd6732b60

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19249





---

archive/issue_comments_260493.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-09-19T23:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260493",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_260494.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to packages: experimental.",
    "created_at": "2015-09-19T23:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260494",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

Changing component from PLEASE CHANGE to packages: experimental.



---

archive/issue_comments_260495.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2015-09-19T23:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260495",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

Changing priority from major to minor.



---

archive/issue_comments_260496.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2015-09-19T23:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260496",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_260497.json:
```json
{
    "body": "<a id='comment:4'></a>Hello,\n\nThis looks very nice indeed, but because I expect the review to be rather long in this case, it would probably be best to start by exposing a reduced amount of features from your library. A general function to compute the treewidth exactly, for instance, would be ideal as we would be able to compare its output with what we already have (which is *slow*).\n\nFor a start, I guess that some things should be done directly in your library: is it necessary to have Sage apply a patch to it? Is there a reason why what your patch does cannot already be included in your code?\n\nYour makefile appears to be manual, and it would probably be best to have it created by autotools. I had to learn this not so long ago and I found it rather painful to learn, but the purpose is to make sure that your code will compile everywhere, so that you do not need to test every platform manually. I can probably help with that, as well as send you a pdf book that helped me a lot while learning it.\n\nFinally, I am not sure if you are aware that you can have C instructions in a 'def' function of a cython file. I see that you have several `cdef cython_<something>` functions with a `def <something>` couterpart, and there is no technical reason to do that. If you have another reason for doing this, then consider this remark as an mistake from my part.\n\nIs your code available on some web page? Is there a public repository for it? Are you the only author? Are there theoretical publications related to it? This kind of information would be interesting to us, and is expected to be found in a SPKG.txt file.\n\nhttp://doc.sagemath.org/html/en/developer/packaging.html#the-spkg-txt-file\n\nRegards,\n\nNathann",
    "created_at": "2015-09-20T12:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260497",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:4'></a>Hello,

This looks very nice indeed, but because I expect the review to be rather long in this case, it would probably be best to start by exposing a reduced amount of features from your library. A general function to compute the treewidth exactly, for instance, would be ideal as we would be able to compare its output with what we already have (which is *slow*).

For a start, I guess that some things should be done directly in your library: is it necessary to have Sage apply a patch to it? Is there a reason why what your patch does cannot already be included in your code?

Your makefile appears to be manual, and it would probably be best to have it created by autotools. I had to learn this not so long ago and I found it rather painful to learn, but the purpose is to make sure that your code will compile everywhere, so that you do not need to test every platform manually. I can probably help with that, as well as send you a pdf book that helped me a lot while learning it.

Finally, I am not sure if you are aware that you can have C instructions in a 'def' function of a cython file. I see that you have several `cdef cython_<something>` functions with a `def <something>` couterpart, and there is no technical reason to do that. If you have another reason for doing this, then consider this remark as an mistake from my part.

Is your code available on some web page? Is there a public repository for it? Are you the only author? Are there theoretical publications related to it? This kind of information would be interesting to us, and is expected to be found in a SPKG.txt file.

http://doc.sagemath.org/html/en/developer/packaging.html#the-spkg-txt-file

Regards,

Nathann



---

archive/issue_comments_260498.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-24T14:21:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260498",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260499.json:
```json
{
    "body": "<a id='comment:6'></a>While testing my version of an exact algorithm for treewidth against the sage version, i noticed that the sage version doesnt work: it is NOT sufficient to just consider the neighbourhood of computed cut. Counterexample:\n\nG = Graph()\nG.add_vertex(0)\nG.add_vertex(1)\nG.add_vertex(2)\nG.add_vertex(3)\nG.add_vertex(4)\nG.add_vertex(5)\nG.add_vertex(6)\nG.add_vertex(7)\nG.add_vertex(8)\nG.add_edge(0,2)\nG.add_edge(0,3)\nG.add_edge(0,5)\nG.add_edge(0,6)\nG.add_edge(1,4)\nG.add_edge(1,8)\nG.add_edge(2,8)\nG.add_edge(3,4)\nG.add_edge(4,5)\nG.add_edge(4,7)\nG.add_edge(6,8)\nG.add_edge(7,8)\nG.treewidth()\n\nBut G has treewidth 2. (you possibly have to change the vertex labeling to see the error).",
    "created_at": "2015-10-03T16:56:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260499",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

<a id='comment:6'></a>While testing my version of an exact algorithm for treewidth against the sage version, i noticed that the sage version doesnt work: it is NOT sufficient to just consider the neighbourhood of computed cut. Counterexample:

G = Graph()
G.add_vertex(0)
G.add_vertex(1)
G.add_vertex(2)
G.add_vertex(3)
G.add_vertex(4)
G.add_vertex(5)
G.add_vertex(6)
G.add_vertex(7)
G.add_vertex(8)
G.add_edge(0,2)
G.add_edge(0,3)
G.add_edge(0,5)
G.add_edge(0,6)
G.add_edge(1,4)
G.add_edge(1,8)
G.add_edge(2,8)
G.add_edge(3,4)
G.add_edge(4,5)
G.add_edge(4,7)
G.add_edge(6,8)
G.add_edge(7,8)
G.treewidth()

But G has treewidth 2. (you possibly have to change the vertex labeling to see the error).



---

archive/issue_comments_260500.json:
```json
{
    "body": "<a id='comment:7'></a>Right, this graph clearly has width 2 `O_o`",
    "created_at": "2015-10-03T16:59:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260500",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:7'></a>Right, this graph clearly has width 2 `O_o`



---

archive/issue_comments_260501.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 ncohen]:\n> Right, this graph clearly has width 2 `O_o`\n\n\nAnd the error can be arbitrary bad. One can construct a graph, such that a cut is not connected in a graph and has to be included in a bag of a tree decomposition. Here it is {0,4,8}.",
    "created_at": "2015-10-03T17:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260501",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

<a id='comment:8'></a>Replying to [comment:7 ncohen]:
> Right, this graph clearly has width 2 `O_o`


And the error can be arbitrary bad. One can construct a graph, such that a cut is not connected in a graph and has to be included in a bag of a tree decomposition. Here it is {0,4,8}.



---

archive/issue_comments_260502.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-04T02:47:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260502",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260503.json:
```json
{
    "body": "<a id='comment:10'></a>>For a start, I guess that some things should be done directly in your library: is it necessary to >have Sage apply a patch to it? Is there a reason why what your patch does cannot already be >included in your code?\n\n\nI have to instantiante template functions and convert a \"sage graph\" to a boost graph.\n\n>Your makefile appears to be manual, and it would probably be best to have it created by autotools. >I had to learn this not so long ago and I found it rather painful to learn, but the purpose is to >make sure that your code will compile everywhere, so that you do not need to test every platform >manually. I can probably help with that, as well as send you a pdf book that helped me a lot while >learning it.\n\n\nIs there a minimal example for that? \n\nThe \"tdlib\"-part of the documentation has failed to build (UNABLE TO IMPORT MODULE): Is there some import-statement missing? What can be the reasons (its not the content of the *.pyx-file)?",
    "created_at": "2015-10-04T02:58:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260503",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

<a id='comment:10'></a>>For a start, I guess that some things should be done directly in your library: is it necessary to >have Sage apply a patch to it? Is there a reason why what your patch does cannot already be >included in your code?


I have to instantiante template functions and convert a "sage graph" to a boost graph.

>Your makefile appears to be manual, and it would probably be best to have it created by autotools. >I had to learn this not so long ago and I found it rather painful to learn, but the purpose is to >make sure that your code will compile everywhere, so that you do not need to test every platform >manually. I can probably help with that, as well as send you a pdf book that helped me a lot while >learning it.


Is there a minimal example for that? 

The "tdlib"-part of the documentation has failed to build (UNABLE TO IMPORT MODULE): Is there some import-statement missing? What can be the reasons (its not the content of the *.pyx-file)?



---

archive/issue_comments_260504.json:
```json
{
    "body": "<a id='comment:11'></a>> I have to instantiante template functions and convert a \"sage graph\" to a boost graph.\n\n\nI still believe that you can do it without patching your code. Let your code deal with boost graphs only, and let Sage only call it on Boost instances (see sage/graphs/base/boost_graph.pyx). This issue should not be a reason to patch your library.\n\n> >Your makefile appears to be manual, and it would probably be best to have it created by autotools. >I had to learn this not so long ago and I found it rather painful to learn, but the purpose is to >make sure that your code will compile everywhere, so that you do not need to test every platform >manually. I can probably help with that, as well as send you a pdf book that helped me a lot while >learning it.\n\n> \n> Is there a minimal example for that? \n\n\nAll over internet. One that was done recently for Sage is there:\nhttps://github.com/graph-algorithms/edge-addition-planarity-suite\n\n> The \"tdlib\"-part of the documentation has failed to build (UNABLE TO IMPORT MODULE): Is there some import-statement missing? What can be the reasons (its not the content of the *.pyx-file)?\n\n\nProbably something like that:\nhttp://doc.sagemath.org/html/en/developer/sage_manuals.html#adding-a-new-file\n\nNathann",
    "created_at": "2015-10-04T05:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260504",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:11'></a>> I have to instantiante template functions and convert a "sage graph" to a boost graph.


I still believe that you can do it without patching your code. Let your code deal with boost graphs only, and let Sage only call it on Boost instances (see sage/graphs/base/boost_graph.pyx). This issue should not be a reason to patch your library.

> >Your makefile appears to be manual, and it would probably be best to have it created by autotools. >I had to learn this not so long ago and I found it rather painful to learn, but the purpose is to >make sure that your code will compile everywhere, so that you do not need to test every platform >manually. I can probably help with that, as well as send you a pdf book that helped me a lot while >learning it.

> 
> Is there a minimal example for that? 


All over internet. One that was done recently for Sage is there:
https://github.com/graph-algorithms/edge-addition-planarity-suite

> The "tdlib"-part of the documentation has failed to build (UNABLE TO IMPORT MODULE): Is there some import-statement missing? What can be the reasons (its not the content of the *.pyx-file)?


Probably something like that:
http://doc.sagemath.org/html/en/developer/sage_manuals.html#adding-a-new-file

Nathann



---

archive/issue_comments_260505.json:
```json
{
    "body": "<a id='comment:12'></a>Or, otherwise, because you should import your module like others, as it is done in all.py?",
    "created_at": "2015-10-04T05:47:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260505",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:12'></a>Or, otherwise, because you should import your module like others, as it is done in all.py?



---

archive/issue_comments_260506.json:
```json
{
    "body": "<a id='comment:13'></a>Is there a way to generate a boost graph with an appended struct? I've seen that\n\nctypedef BoostGraph[vecS, vecS, undirectedS,    vecS, EdgeWeight] BoostVecWeightedGraph\n\nexists, but I would need:\n\nctypedef BoostGraph[vecS, vecS, undirectedS,    vecS, X] BG,\n\nsuch that X is a vertex property. Is there a (not too complicated) way to realize this?",
    "created_at": "2015-10-04T20:06:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260506",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

<a id='comment:13'></a>Is there a way to generate a boost graph with an appended struct? I've seen that

ctypedef BoostGraph[vecS, vecS, undirectedS,    vecS, EdgeWeight] BoostVecWeightedGraph

exists, but I would need:

ctypedef BoostGraph[vecS, vecS, undirectedS,    vecS, X] BG,

such that X is a vertex property. Is there a (not too complicated) way to realize this?



---

archive/issue_comments_260507.json:
```json
{
    "body": "<a id='comment:14'></a>I do not know of one.",
    "created_at": "2015-10-04T20:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260507",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:14'></a>I do not know of one.



---

archive/issue_comments_260508.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:14 ncohen]:\n> I do not know of one.\n\n\nIn this case, the patches are inevitable (treedecompositions are boost graphs with a set as a vertex property). I could merely displace some graph conversion stuff into the library.. \n\n---\n\nDoes automake cp & rm files automatically? If this is the case: which flags have to be passed to autoconfig on the sage side in spkg-install? So far:\n\n\n```\nAC_INIT(tdlib, larisch@informatik.uni-frankfurt.de)\nAM_INIT_AUTOMAKE([subdir-objects] [foreign])\n\n# The version of the libtool library is of the form current:revision:age\n#\n# See http://www.gnu.org/software/libtool/manual/html_node/Updating-version-info.html\n#\n# When doing a release, they should be updated like this:\n# 1. If no interfaces changed, only implementations: just increment\n# revision.\n# 2. If interfaces were added, none removed: increment current, set\n# revision to zero and increment age.\n# 3. If interfaces were removed (breaks backward compatibility): increment\n# current, and set both revision and age to zero.\nLT_CURRENT=0\nLT_REVISION=0\nLT_AGE=0\nAC_SUBST(LT_CURRENT)\nAC_SUBST(LT_REVISION)\nAC_SUBST(LT_AGE)\n\nAC_PROG_CXX\nAC_PROG_LIBTOOL\nAC_PROG_INSTALL\n\nCXXFLAGS=\"-O3\"\n\nAC_OUTPUT(Makefile)\n```\n\n\n```\nlib_LTLIBRARIES = libtd.la\n\nlibtd_la_SOURCES = sage_tdlib.cpp\nlibtd_la_LDFLAGS = $(AM_LDFLAGS) -version-info @LT_CURRENT@:@LT_REVISION@:@LT_AGE@\n```",
    "created_at": "2015-10-04T20:54:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260508",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

<a id='comment:15'></a>Replying to [comment:14 ncohen]:
> I do not know of one.


In this case, the patches are inevitable (treedecompositions are boost graphs with a set as a vertex property). I could merely displace some graph conversion stuff into the library.. 

---

Does automake cp & rm files automatically? If this is the case: which flags have to be passed to autoconfig on the sage side in spkg-install? So far:


```
AC_INIT(tdlib, larisch@informatik.uni-frankfurt.de)
AM_INIT_AUTOMAKE([subdir-objects] [foreign])

# The version of the libtool library is of the form current:revision:age
#
# See http://www.gnu.org/software/libtool/manual/html_node/Updating-version-info.html
#
# When doing a release, they should be updated like this:
# 1. If no interfaces changed, only implementations: just increment
# revision.
# 2. If interfaces were added, none removed: increment current, set
# revision to zero and increment age.
# 3. If interfaces were removed (breaks backward compatibility): increment
# current, and set both revision and age to zero.
LT_CURRENT=0
LT_REVISION=0
LT_AGE=0
AC_SUBST(LT_CURRENT)
AC_SUBST(LT_REVISION)
AC_SUBST(LT_AGE)

AC_PROG_CXX
AC_PROG_LIBTOOL
AC_PROG_INSTALL

CXXFLAGS="-O3"

AC_OUTPUT(Makefile)
```


```
lib_LTLIBRARIES = libtd.la

libtd_la_SOURCES = sage_tdlib.cpp
libtd_la_LDFLAGS = $(AM_LDFLAGS) -version-info @LT_CURRENT@:@LT_REVISION@:@LT_AGE@
```



---

archive/issue_comments_260509.json:
```json
{
    "body": "<a id='comment:16'></a>> In this case, the patches are inevitable (treedecompositions are boost graphs with a set as a vertex property). I could merely displace some graph conversion stuff into the library.. \n\n\nYes. Your library has no reason to be able to handle Sage graph, so just write Sage code to call it with the kind of graph that it expects.\n\n> Does automake cp & rm files automatically? If this is the case: which flags have to be passed to autoconfig on the sage side in spkg-install? So far:\n\n\nI do not understand this question.\n\nNathann",
    "created_at": "2015-10-04T21:01:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260509",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:16'></a>> In this case, the patches are inevitable (treedecompositions are boost graphs with a set as a vertex property). I could merely displace some graph conversion stuff into the library.. 


Yes. Your library has no reason to be able to handle Sage graph, so just write Sage code to call it with the kind of graph that it expects.

> Does automake cp & rm files automatically? If this is the case: which flags have to be passed to autoconfig on the sage side in spkg-install? So far:


I do not understand this question.

Nathann



---

archive/issue_comments_260510.json:
```json
{
    "body": "<a id='comment:17'></a>Hello,,\n\n> While testing my version of an exact algorithm for treewidth against the sage version, i noticed that the sage version doesnt work: it is NOT sufficient to just consider the neighbourhood of computed cut. Counterexample:\n\n\nThank you very much for this bug report. It has been fixed in #19358 (needs_review).\n\nNathann",
    "created_at": "2015-10-05T20:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260510",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:17'></a>Hello,,

> While testing my version of an exact algorithm for treewidth against the sage version, i noticed that the sage version doesnt work: it is NOT sufficient to just consider the neighbourhood of computed cut. Counterexample:


Thank you very much for this bug report. It has been fixed in #19358 (needs_review).

Nathann



---

archive/issue_comments_260511.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-29T16:16:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260511",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260512.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-10-29T16:35:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260512",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

Changing status from new to needs_review.



---

archive/issue_events_053380.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/llarisch",
    "created_at": "2015-10-29T16:35:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "milestone": "sage-6.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19249#event-53380"
}
```



---

archive/issue_comments_260513.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-10-29T20:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260513",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_260514.json:
```json
{
    "body": "<a id='comment:20'></a>Some technical points: the source tarball is *not* meant to be committed, you should just provide a link on this ticket (or attach it to this ticket).\n\nSecond, can you write to upstream about the autotools-based build system? Ideally, it should be added to upstream instead of Sage.\n\nThird, autotools is not part of Sage: you must not run `autogen.sh` in `spkg-install`. If upstream does not want autotools, then you should put the autotools-based build system in the source tarball directly (both the autotools source files and the generated files).",
    "created_at": "2015-10-29T20:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260514",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>Some technical points: the source tarball is *not* meant to be committed, you should just provide a link on this ticket (or attach it to this ticket).

Second, can you write to upstream about the autotools-based build system? Ideally, it should be added to upstream instead of Sage.

Third, autotools is not part of Sage: you must not run `autogen.sh` in `spkg-install`. If upstream does not want autotools, then you should put the autotools-based build system in the source tarball directly (both the autotools source files and the generated files).



---

archive/issue_comments_260515.json:
```json
{
    "body": "<a id='comment:21'></a>Two more details:\n\n1. Unfortunately you cannot add the `tdlib` module to the documentation, since we currently do not support \"optional\" documentation.\n\n2. Please undo the added whitespace to `module_list.py`.",
    "created_at": "2015-10-29T20:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260515",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>Two more details:

1. Unfortunately you cannot add the `tdlib` module to the documentation, since we currently do not support "optional" documentation.

2. Please undo the added whitespace to `module_list.py`.



---

archive/issue_comments_260516.json:
```json
{
    "body": "<a id='comment:22'></a>Also, is there any reason that you have the file `sage_tdlib.hpp` twice? Surely, one time is enough. I even think that zero times is enough if you move the `.cpp` file to the Sage library and use [http://docs.cython.org/src/userguide/external_C_code.html#implementing-functions-in-c](http://docs.cython.org/src/userguide/external_C_code.html#implementing-functions-in-c)",
    "created_at": "2015-10-29T20:38:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260516",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>Also, is there any reason that you have the file `sage_tdlib.hpp` twice? Surely, one time is enough. I even think that zero times is enough if you move the `.cpp` file to the Sage library and use [http://docs.cython.org/src/userguide/external_C_code.html#implementing-functions-in-c](http://docs.cython.org/src/userguide/external_C_code.html#implementing-functions-in-c)



---

archive/issue_comments_260517.json:
```json
{
    "body": "<a id='comment:23'></a>Could you remove the compiled libraries from the hidden directory .lib of your archive?",
    "created_at": "2015-10-30T09:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260517",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:23'></a>Could you remove the compiled libraries from the hidden directory .lib of your archive?



---

archive/issue_comments_260518.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-30T15:41:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260518",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260519.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-30T15:45:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260519",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260520.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-30T15:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260520",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260521.json:
```json
{
    "body": "<a id='comment:27'></a>Just to be sure: The upstream tarballs are just copies of \"original tarballs\" and will be downloaded from sage mirrors?",
    "created_at": "2015-10-30T15:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260521",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

<a id='comment:27'></a>Just to be sure: The upstream tarballs are just copies of "original tarballs" and will be downloaded from sage mirrors?



---

archive/issue_comments_260522.json:
```json
{
    "body": "<a id='comment:28'></a>> Just to be sure: The upstream tarballs are just copies of \"original tarballs\" and will be downloaded from sage mirrors? \n\n\nIndeed. And when the original (aka 'upstream') tarball is updated (and if we want this update to be reflected in Sage) then we must open a ticket to update it. That's the workflow nowadays.\n\nNathann",
    "created_at": "2015-10-30T16:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260522",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:28'></a>> Just to be sure: The upstream tarballs are just copies of "original tarballs" and will be downloaded from sage mirrors? 


Indeed. And when the original (aka 'upstream') tarball is updated (and if we want this update to be reflected in Sage) then we must open a ticket to update it. That's the workflow nowadays.

Nathann



---

archive/issue_comments_260523.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-30T16:28:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260523",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260524.json:
```json
{
    "body": "<a id='comment:30'></a>(please don't forget to set the ticket's status to 'needs_review'  when you will be done with your modifications)\n\nNathann",
    "created_at": "2015-10-30T16:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260524",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:30'></a>(please don't forget to set the ticket's status to 'needs_review'  when you will be done with your modifications)

Nathann



---

archive/issue_comments_260525.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-30T16:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260525",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260526.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-10-30T16:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260526",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_260527.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-10-31T10:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260527",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_260528.json:
```json
{
    "body": "<a id='comment:33'></a>Helloooooooooo Lukas,\n\nHere is another review:\n\n- From the url at which you placed your tarball I found your website, and this\n  page [1] really looks like \"TdLib's official page\". Could you add this url at\n  the end of the 'description' section of the SPKG.txt file?\n\n- It would be cool if your tarball contained a 'license' (or 'copying') file\n  asserting that it is licensed under the GPL2.\n\n- I do not understand why you need to copy/paste sage_tdlib.cpp into your\n  tarball if you want it to compile. Could you please explain me? In no other\n  package do we need to do such a thing. Usually the tarball works by itself,\n  and we have in Sage some interface code that is linked with it.\n\n- One such instance is the interface with boost. You will find it in the\n  following files:\n\n      sage/graphs/base/boost_graph.pyx\n      sage/graphs/base/boost_graph.pxd\n      sage/graphs/base/boost_interface.cpp\n\n- Your 'spkg-install' file copies files that you removed from your tarball\n  (i.e. ./.libs/*)\n\n- I do not understand what exactly this warning means. Could you tell me? `^^;`\n  {{{\n  +#!!!!!!   NOTICE   !!!!!!!!\n  +#Sage vertices have to be named by unsigned integers\n  +#Sage bags of decompositions have to be lists of unsigned integers\n  +#!!!!!!!!!!!!!!!!!!!!!!!!!!\n  }}}\n\n- Could you strip 'cython_' from the beginning of the functions you define?\n\n- The code of `get_width` can be replaced by:\n  {{{\n  return max(len(x) for x in T)-1\n  }}}\n\n- It is slightly incorrect to have your class `TreeDecomposition` inherit from\n  `Graph`, while having a function like `get_width` rely on the vertices' labels\n  (you assume that they are sets). Indeed, the vertices of a graph can be\n  relabeled, which would break this function. I don't think that you need this\n  class, to be honest.\n\n- We have something like `for(auto i: something)` in python. You can rewrite\n  {{{\n  +    V_python = G.vertices()\n  +    for i in range(0, len(V_python)):\n  +        V.push_back(V_python[i])\n  }}}\n  As\n  {{{\n  +    for v in G:\n  +        V.push_back(v)\n  }}}\n\n  (it occurs several times in your code)\n\n- Similarly (don't scream -- I know it can hurt when you see it for the first\n  time) you can write this in Python:\n  {{{\n  a,b = 1,2\n  }}}\n  Which means that this also works\n  {{{\n  for u,v,l in G.edges():\n      E.push_back(u)\n      E.push_back(v)\n  }}}\n  Note that if you don't need the labels, then this also works:\n  {{{\n  for u,v in G.edges(labels=False):\n      E.push_back(u)\n      E.push_back(v)\n  }}}\n\n- Some of your 'TEST' and 'EXAMPLE' tags are not indented as they should (4\n  spaces).\n\nNathann\n\n[1] http://www.tdi.informatik.uni-frankfurt.de/~lukas/",
    "created_at": "2015-10-31T10:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260528",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:33'></a>Helloooooooooo Lukas,

Here is another review:

- From the url at which you placed your tarball I found your website, and this
  page [1] really looks like "TdLib's official page". Could you add this url at
  the end of the 'description' section of the SPKG.txt file?

- It would be cool if your tarball contained a 'license' (or 'copying') file
  asserting that it is licensed under the GPL2.

- I do not understand why you need to copy/paste sage_tdlib.cpp into your
  tarball if you want it to compile. Could you please explain me? In no other
  package do we need to do such a thing. Usually the tarball works by itself,
  and we have in Sage some interface code that is linked with it.

- One such instance is the interface with boost. You will find it in the
  following files:

      sage/graphs/base/boost_graph.pyx
      sage/graphs/base/boost_graph.pxd
      sage/graphs/base/boost_interface.cpp

- Your 'spkg-install' file copies files that you removed from your tarball
  (i.e. ./.libs/*)

- I do not understand what exactly this warning means. Could you tell me? `^^;`
  {{{
  +#!!!!!!   NOTICE   !!!!!!!!
  +#Sage vertices have to be named by unsigned integers
  +#Sage bags of decompositions have to be lists of unsigned integers
  +#!!!!!!!!!!!!!!!!!!!!!!!!!!
  }}}

- Could you strip 'cython_' from the beginning of the functions you define?

- The code of `get_width` can be replaced by:
  {{{
  return max(len(x) for x in T)-1
  }}}

- It is slightly incorrect to have your class `TreeDecomposition` inherit from
  `Graph`, while having a function like `get_width` rely on the vertices' labels
  (you assume that they are sets). Indeed, the vertices of a graph can be
  relabeled, which would break this function. I don't think that you need this
  class, to be honest.

- We have something like `for(auto i: something)` in python. You can rewrite
  {{{
  +    V_python = G.vertices()
  +    for i in range(0, len(V_python)):
  +        V.push_back(V_python[i])
  }}}
  As
  {{{
  +    for v in G:
  +        V.push_back(v)
  }}}

  (it occurs several times in your code)

- Similarly (don't scream -- I know it can hurt when you see it for the first
  time) you can write this in Python:
  {{{
  a,b = 1,2
  }}}
  Which means that this also works
  {{{
  for u,v,l in G.edges():
      E.push_back(u)
      E.push_back(v)
  }}}
  Note that if you don't need the labels, then this also works:
  {{{
  for u,v in G.edges(labels=False):
      E.push_back(u)
      E.push_back(v)
  }}}

- Some of your 'TEST' and 'EXAMPLE' tags are not indented as they should (4
  spaces).

Nathann

[1] http://www.tdi.informatik.uni-frankfurt.de/~lukas/



---

archive/issue_comments_260529.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-01T19:38:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260529",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260530.json:
```json
{
    "body": "<a id='comment:35'></a>Thanks for the hints!\n\n\n> - I do not understand why you need to copy/paste sage_tdlib.cpp into your\n>   tarball if you want it to compile. Could you please explain me? In no other\n>   package do we need to do such a thing. Usually the tarball works by itself,\n>   and we have in Sage some interface code that is linked with it.\n> \n> - One such instance is the interface with boost. You will find it in the\n>   following files:\n> \n>       sage/graphs/base/boost_graph.pyx\n>       sage/graphs/base/boost_graph.pxd\n>       sage/graphs/base/boost_interface.cpp\n> \n\n\nSince there is no cython-way to generate a boost graph with an appended struct for the vertices (boost_graph.pyx only supports appended structs for edges), a boost graph has to be generated manually (make_tdlib_graph in *.pyx, sage_tdlib_*). \n\nIf there would exist a cython-interface for the required graphs, one could build the *.so by instantiating the exact algorithm, which would require to copy a *.cpp file (that only containes a line that instantiates the exact algorithm) and a makefile into the tarball.\n\nDo you have a idea for this?\n\n\n> - Your 'spkg-install' file copies files that you removed from your tarball\n>   (i.e. ./.libs/*)\n\n\n./libs is generated by make (automake creates a .libs by default) -> ./libs should exist\n\n> - I do not understand what exactly this warning means. Could you tell me? `^^;`\n>   {{{\n>   +#!!!!!!   NOTICE   !!!!!!!!\n>   +#Sage vertices have to be named by unsigned integers\n>   +#Sage bags of decompositions have to be lists of unsigned integers\n>   +#!!!!!!!!!!!!!!!!!!!!!!!!!!\n>   }}}\n\n\nG.vertices() should return a list of unsigned integers, e.g. treedecomposition_exact() does not work with TutteGraph(), since TutteGraph().vertices() returnes a list of tuples\n\n> - It is slightly incorrect to have your class `TreeDecomposition` inherit from\n>   `Graph`, while having a function like `get_width` rely on the vertices' labels\n>   (you assume that they are sets). Indeed, the vertices of a graph can be\n>   relabeled, which would break this function. I don't think that you need this\n>   class, to be honest.\n\n\nOk, i just thought something like that would be nice:\n\nsage: T = tdlib.treedecomposition_exact(G)\ntree decomposition of width 4 computed\nsage: T\nTreedecomposition of width 4 on 15 vertices <--\n\nWould it be better to use g.name(\"tree decompostion\") for this purposes?\n\nLukas",
    "created_at": "2015-11-01T20:21:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260530",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

<a id='comment:35'></a>Thanks for the hints!


> - I do not understand why you need to copy/paste sage_tdlib.cpp into your
>   tarball if you want it to compile. Could you please explain me? In no other
>   package do we need to do such a thing. Usually the tarball works by itself,
>   and we have in Sage some interface code that is linked with it.
> 
> - One such instance is the interface with boost. You will find it in the
>   following files:
> 
>       sage/graphs/base/boost_graph.pyx
>       sage/graphs/base/boost_graph.pxd
>       sage/graphs/base/boost_interface.cpp
> 


Since there is no cython-way to generate a boost graph with an appended struct for the vertices (boost_graph.pyx only supports appended structs for edges), a boost graph has to be generated manually (make_tdlib_graph in *.pyx, sage_tdlib_*). 

If there would exist a cython-interface for the required graphs, one could build the *.so by instantiating the exact algorithm, which would require to copy a *.cpp file (that only containes a line that instantiates the exact algorithm) and a makefile into the tarball.

Do you have a idea for this?


> - Your 'spkg-install' file copies files that you removed from your tarball
>   (i.e. ./.libs/*)


./libs is generated by make (automake creates a .libs by default) -> ./libs should exist

> - I do not understand what exactly this warning means. Could you tell me? `^^;`
>   {{{
>   +#!!!!!!   NOTICE   !!!!!!!!
>   +#Sage vertices have to be named by unsigned integers
>   +#Sage bags of decompositions have to be lists of unsigned integers
>   +#!!!!!!!!!!!!!!!!!!!!!!!!!!
>   }}}


G.vertices() should return a list of unsigned integers, e.g. treedecomposition_exact() does not work with TutteGraph(), since TutteGraph().vertices() returnes a list of tuples

> - It is slightly incorrect to have your class `TreeDecomposition` inherit from
>   `Graph`, while having a function like `get_width` rely on the vertices' labels
>   (you assume that they are sets). Indeed, the vertices of a graph can be
>   relabeled, which would break this function. I don't think that you need this
>   class, to be honest.


Ok, i just thought something like that would be nice:

sage: T = tdlib.treedecomposition_exact(G)
tree decomposition of width 4 computed
sage: T
Treedecomposition of width 4 on 15 vertices <--

Would it be better to use g.name("tree decompostion") for this purposes?

Lukas



---

archive/issue_comments_260531.json:
```json
{
    "body": "<a id='comment:36'></a>Hellooooooooooooooo,\n\n> If there would exist a cython-interface for the required graphs, one could build the *.so by instantiating the exact algorithm, which would require to copy a *.cpp file (that only containes a line that instantiates the exact algorithm) and a makefile into the tarball.\n> \n> Do you have a idea for this?\n\n\nI'm still not understand exactly what you explain. I may be missing something obvious, but we will probably understand each other eventually:\n\nI understand from what you tell me that the graph data structure that is used in your library is not exactly a boost graph, but 'a boost graph plus something'.\n\nIf this 'something' is about a list of labels for vertices, then it probably means that boost_interface should be updated to handle it. If it is something more specific to tree-decompositions, then it should belong to the files you create.\n\nHere is how I see the situation (tell me if -- for some reason -- it does not apply):\n\n1) You have a library that take a data X as input, and returns a data Y as output. To us that is \"upstream's design decision\", and we usually have no control over X nor over Y.\n\n2) We have some Cython code that takes a graph, and converts it into format X. We call the library's functions on the data it expects, and get some data Y as a result, which we convert back into Cython/Python before handing it back to the user\n\n3) If, because of some limitation of Cython, we cannot directly convert Python into X (or turn Y into Python) then we can have another layer in the middle, i.e. a c++ file, which is what happens with boost_interface.\n\nThis way we adapt to whatever the library expect, and there is no need to have anything sage-related in the library.\n\n> > - Your 'spkg-install' file copies files that you removed from your tarball\n> >   (i.e. ./.libs/*)\n \n> \n> ./libs is generated by make (automake creates a .libs by default) -> ./libs should exist\n\n\nOh, I see. Usually the copying of the files produced by a 'make' is performed by 'make install'. Is there a reason why you don't use it?\n\n> G.vertices() should return a list of unsigned integers, e.g. treedecomposition_exact() does not work with TutteGraph(), since TutteGraph().vertices() returnes a list of tuples\n\n\nI see. That happens very often with any kind of 'efficient' code, as handling labels really is a hassle (trust me `:-/`). That shouldn't be a constraint on the user, however, but on ourselves. In those cases, we usually call the library's function on a *relabelled* copy of the graph (so that the vertices are integers), and apply the inverse treatment on its output so that the user gets what (s)he expects (and in particular so that (s)he can call the function on any kind of graph).\n\n> Ok, i just thought something like that would be nice:\n> \n> sage: T = tdlib.treedecomposition_exact(G)\n> tree decomposition of width 4 computed\n> sage: T\n> Treedecomposition of width 4 on 15 vertices <--\n> \n> Would it be better to use g.name(\"tree decompostion\") for this purposes?\n\n\nDefinitely `:-)`\n\nThanks,\n\nNathann",
    "created_at": "2015-11-01T20:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260531",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:36'></a>Hellooooooooooooooo,

> If there would exist a cython-interface for the required graphs, one could build the *.so by instantiating the exact algorithm, which would require to copy a *.cpp file (that only containes a line that instantiates the exact algorithm) and a makefile into the tarball.
> 
> Do you have a idea for this?


I'm still not understand exactly what you explain. I may be missing something obvious, but we will probably understand each other eventually:

I understand from what you tell me that the graph data structure that is used in your library is not exactly a boost graph, but 'a boost graph plus something'.

If this 'something' is about a list of labels for vertices, then it probably means that boost_interface should be updated to handle it. If it is something more specific to tree-decompositions, then it should belong to the files you create.

Here is how I see the situation (tell me if -- for some reason -- it does not apply):

1) You have a library that take a data X as input, and returns a data Y as output. To us that is "upstream's design decision", and we usually have no control over X nor over Y.

2) We have some Cython code that takes a graph, and converts it into format X. We call the library's functions on the data it expects, and get some data Y as a result, which we convert back into Cython/Python before handing it back to the user

3) If, because of some limitation of Cython, we cannot directly convert Python into X (or turn Y into Python) then we can have another layer in the middle, i.e. a c++ file, which is what happens with boost_interface.

This way we adapt to whatever the library expect, and there is no need to have anything sage-related in the library.

> > - Your 'spkg-install' file copies files that you removed from your tarball
> >   (i.e. ./.libs/*)
 
> 
> ./libs is generated by make (automake creates a .libs by default) -> ./libs should exist


Oh, I see. Usually the copying of the files produced by a 'make' is performed by 'make install'. Is there a reason why you don't use it?

> G.vertices() should return a list of unsigned integers, e.g. treedecomposition_exact() does not work with TutteGraph(), since TutteGraph().vertices() returnes a list of tuples


I see. That happens very often with any kind of 'efficient' code, as handling labels really is a hassle (trust me `:-/`). That shouldn't be a constraint on the user, however, but on ourselves. In those cases, we usually call the library's function on a *relabelled* copy of the graph (so that the vertices are integers), and apply the inverse treatment on its output so that the user gets what (s)he expects (and in particular so that (s)he can call the function on any kind of graph).

> Ok, i just thought something like that would be nice:
> 
> sage: T = tdlib.treedecomposition_exact(G)
> tree decomposition of width 4 computed
> sage: T
> Treedecomposition of width 4 on 15 vertices <--
> 
> Would it be better to use g.name("tree decompostion") for this purposes?


Definitely `:-)`

Thanks,

Nathann



---

archive/issue_comments_260532.json:
```json
{
    "body": "<a id='comment:37'></a>I forgot to add an example of this relabelling. What I do here may be sufficient for you, but you can look at the doc of 'relabel' (which handles more stuff)\n\n```\ng = graphs.KneserGraph(5,2)\nV = g.vertices()\ng_int = g.relabel(inplace=False) # uses the ordering of g.vertices() (see the doc)\nS_int = g_int.independent_set()\nS = [V[i] for i in S_int]\n```",
    "created_at": "2015-11-01T20:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260532",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:37'></a>I forgot to add an example of this relabelling. What I do here may be sufficient for you, but you can look at the doc of 'relabel' (which handles more stuff)

```
g = graphs.KneserGraph(5,2)
V = g.vertices()
g_int = g.relabel(inplace=False) # uses the ordering of g.vertices() (see the doc)
S_int = g_int.independent_set()
S = [V[i] for i in S_int]
```



---

archive/issue_comments_260533.json:
```json
{
    "body": "<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-01T21:21:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260533",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260534.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-01T21:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260534",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260535.json:
```json
{
    "body": "<a id='comment:40'></a>Hello,\n\nReplying to [comment:36 ncohen]:\n> 3) If, because of some limitation of Cython, we cannot directly convert Python into X (or turn Y into Python) then we can have another layer in the middle, i.e. a c++ file, which is what happens with boost_interface.\n\n\nIn my opinion, this is the case and for that reason sage_tdlib.cpp exists. In addition, i cannot use boost_interface, since vertex properties are not covered there. As mentioned above, i need a \n\nctypedef BoostGraph[vecS, vecS, undirectedS, vecS, X] BG,\n\nwhere X is some struct. Concrete (see sage_tdlib.cpp):\n\nFor the input graph\n\n```\n\nstruct Vertex{\n    ...\n    ...\n    unsigned int id;\n    ...\n};\n\ntypedef boost::adjacency_list<boost::setS, boost::vecS, boost::undirectedS, Vertex> TD_graph_t;\n```\n\n\nAnd for the output treedecomposition:\n\n\n```\nstruct bag{\n    ...\n    ...\n    std::set<unsigned int> bag;\n    ...\n};\n\ntypedef boost::adjacency_list<boost::vecS, boost::vecS, boost::undirectedS, bag> TD_tree_dec_t;\n```\n\nThe reason for sage_tdlib.cpp is to do the conversion\n\nsage graph -> V,E as vectors -> boost graph\n\nand\n\nboost graph (tree decomposition) -> V, E, bags as vectors -> sage graph.\n\n> This way we adapt to whatever the library expect, and there is no need to have anything sage-related in the library.\n\n\nCurrently, nothing sage-related (except for the build-system) is in the library.\n\nLukas",
    "created_at": "2015-11-01T22:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260535",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

<a id='comment:40'></a>Hello,

Replying to [comment:36 ncohen]:
> 3) If, because of some limitation of Cython, we cannot directly convert Python into X (or turn Y into Python) then we can have another layer in the middle, i.e. a c++ file, which is what happens with boost_interface.


In my opinion, this is the case and for that reason sage_tdlib.cpp exists. In addition, i cannot use boost_interface, since vertex properties are not covered there. As mentioned above, i need a 

ctypedef BoostGraph[vecS, vecS, undirectedS, vecS, X] BG,

where X is some struct. Concrete (see sage_tdlib.cpp):

For the input graph

```

struct Vertex{
    ...
    ...
    unsigned int id;
    ...
};

typedef boost::adjacency_list<boost::setS, boost::vecS, boost::undirectedS, Vertex> TD_graph_t;
```


And for the output treedecomposition:


```
struct bag{
    ...
    ...
    std::set<unsigned int> bag;
    ...
};

typedef boost::adjacency_list<boost::vecS, boost::vecS, boost::undirectedS, bag> TD_tree_dec_t;
```

The reason for sage_tdlib.cpp is to do the conversion

sage graph -> V,E as vectors -> boost graph

and

boost graph (tree decomposition) -> V, E, bags as vectors -> sage graph.

> This way we adapt to whatever the library expect, and there is no need to have anything sage-related in the library.


Currently, nothing sage-related (except for the build-system) is in the library.

Lukas



---

archive/issue_comments_260536.json:
```json
{
    "body": "<a id='comment:41'></a>Helloooooooo Lucas !\n\nI see I see, thank you for the details. Why then do you need to copy `sage_tdlib.cpp` *inside* of your archive before compiling it? This is the thing that bothers me.\n\nNathann",
    "created_at": "2015-11-02T07:04:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260536",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:41'></a>Helloooooooo Lucas !

I see I see, thank you for the details. Why then do you need to copy `sage_tdlib.cpp` *inside* of your archive before compiling it? This is the thing that bothers me.

Nathann



---

archive/issue_comments_260537.json:
```json
{
    "body": "<a id='comment:42'></a>Hello,\n\n\n> \n> I see I see, thank you for the details. Why then do you need to copy `sage_tdlib.cpp` *inside* of your archive before compiling it? This is the thing that bothers me.\n> \n\n\nI meant no harm by it =), i will fix that.\n\nWhere is the right place for the automake-generated makefiles and related stuff? Currently, this files are located in the tarball, but that is misguided since they refer to sage_tdlib.*. Maybe in some directory in spkg/tdlib along with sage_tdlib?",
    "created_at": "2015-11-02T07:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260537",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

<a id='comment:42'></a>Hello,


> 
> I see I see, thank you for the details. Why then do you need to copy `sage_tdlib.cpp` *inside* of your archive before compiling it? This is the thing that bothers me.
> 


I meant no harm by it =), i will fix that.

Where is the right place for the automake-generated makefiles and related stuff? Currently, this files are located in the tarball, but that is misguided since they refer to sage_tdlib.*. Maybe in some directory in spkg/tdlib along with sage_tdlib?



---

archive/issue_comments_260538.json:
```json
{
    "body": "<a id='comment:43'></a>Replying to [comment:42 llarisch]:\n> Where is the right place for the automake-generated makefiles and related stuff?\n\nIn the official upstream tarball.\n\n> Currently, this files are located in the tarball, but that is misguided since they refer to sage_tdlib.*.\n\n\nI think Nathann has been trying to tell you that the `sage_tdlib` files should not be in the upstream tarball, but in Sage itself. So then there is no problem.",
    "created_at": "2015-11-02T07:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260538",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'></a>Replying to [comment:42 llarisch]:
> Where is the right place for the automake-generated makefiles and related stuff?

In the official upstream tarball.

> Currently, this files are located in the tarball, but that is misguided since they refer to sage_tdlib.*.


I think Nathann has been trying to tell you that the `sage_tdlib` files should not be in the upstream tarball, but in Sage itself. So then there is no problem.



---

archive/issue_comments_260539.json:
```json
{
    "body": "<a id='comment:44'></a>Helloooooo,\n\n> Where is the right place for the automake-generated makefiles and related stuff? Currently, this files are located in the tarball, but that is misguided since they refer to sage_tdlib.*. Maybe in some directory in spkg/tdlib along with sage_tdlib?\n\n\nWell, the automake-generated makefiles are usually in the tarball `^^;`\n\nWe don't consider those to be sage-specific. Makefiles are very common in the open-source world, as those things make sure that the code compiles on any platform. So usually, the tarballs we get come with those things in it, and spkg-install is some variation of 'configure && make && make install'.\n\nSomehow, your none of the files contained in your tarball (including the makefiles) should mention this sage_tdlib file.\n\nNathann",
    "created_at": "2015-11-02T07:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260539",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:44'></a>Helloooooo,

> Where is the right place for the automake-generated makefiles and related stuff? Currently, this files are located in the tarball, but that is misguided since they refer to sage_tdlib.*. Maybe in some directory in spkg/tdlib along with sage_tdlib?


Well, the automake-generated makefiles are usually in the tarball `^^;`

We don't consider those to be sage-specific. Makefiles are very common in the open-source world, as those things make sure that the code compiles on any platform. So usually, the tarballs we get come with those things in it, and spkg-install is some variation of 'configure && make && make install'.

Somehow, your none of the files contained in your tarball (including the makefiles) should mention this sage_tdlib file.

Nathann



---

archive/issue_comments_260540.json:
```json
{
    "body": "<a id='comment:45'></a>The thing is that the library itself only consist of template functions, such that a makefile does not make sense, since external use of some library functions is supposed to generate the needed functions -> building a shared library out of the original tarball would not generate the necessary code. The code for the exact algorithm is generated by the call \n\ntreedec::exact_decomposition_cutset(G, T, lb);\n\nwith\n\ntypedef boost::adjacency_list<boost::setS, boost::listS, boost::undirectedS, Vertex> TD_graph_t;  \n\nTD_graph_t G;\n\nin sage_tdlib.cpp.",
    "created_at": "2015-11-02T07:45:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260540",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

<a id='comment:45'></a>The thing is that the library itself only consist of template functions, such that a makefile does not make sense, since external use of some library functions is supposed to generate the needed functions -> building a shared library out of the original tarball would not generate the necessary code. The code for the exact algorithm is generated by the call 

treedec::exact_decomposition_cutset(G, T, lb);

with

typedef boost::adjacency_list<boost::setS, boost::listS, boost::undirectedS, Vertex> TD_graph_t;  

TD_graph_t G;

in sage_tdlib.cpp.



---

archive/issue_comments_260541.json:
```json
{
    "body": "<a id='comment:46'></a>HMmmmm.... `O_o`\n\nWell, then I guess all you need is to copy all you hpp files to SAGE_INCLUDE/tdlib/, and that's it?...\n\nNathann",
    "created_at": "2015-11-02T08:03:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260541",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:46'></a>HMmmmm.... `O_o`

Well, then I guess all you need is to copy all you hpp files to SAGE_INCLUDE/tdlib/, and that's it?...

Nathann



---

archive/issue_comments_260542.json:
```json
{
    "body": "<a id='comment:47'></a>Please fill in your author name on this ticket.",
    "created_at": "2015-11-02T13:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260542",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:47'></a>Please fill in your author name on this ticket.



---

archive/issue_comments_260543.json:
```json
{
    "body": "<a id='comment:49'></a>Please remove this line from `SPKG.txt`:\n\n```\ntarball: http://www.tdi.informatik.uni-frankfurt.de/~lukas/data/tdlib-0.3.1.tar.bz2\n```",
    "created_at": "2015-11-02T14:02:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260543",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:49'></a>Please remove this line from `SPKG.txt`:

```
tarball: http://www.tdi.informatik.uni-frankfurt.de/~lukas/data/tdlib-0.3.1.tar.bz2
```



---

archive/issue_comments_260544.json:
```json
{
    "body": "<a id='comment:50'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-02T14:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260544",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260545.json:
```json
{
    "body": "<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-05T17:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260545",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260546.json:
```json
{
    "body": "<a id='comment:53'></a>Current state:\n\n-Since tdlib is a template library, an installation just copies the headers to SAGELOCAL/include/tdlib\n\n-The sage-distutils build-system will build a shared library out of sage_tdlib.cpp and the headers in /include/tdlib\n\n-sage_tdlib.cpp is necessary until /base/boost_graph supportes vertex properties (especially std::set). currently, edge properties are supported and vertex properties are pre-defined by some vertex ids\n\n-Even if /base/boost_graph is updated, s.t. vertex properties are supported, some c-code layer is necessary for instanciating the library code with the needed type -> in each case, a c-code layer is necessary.\n\nLukas",
    "created_at": "2015-11-05T18:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260546",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

<a id='comment:53'></a>Current state:

-Since tdlib is a template library, an installation just copies the headers to SAGELOCAL/include/tdlib

-The sage-distutils build-system will build a shared library out of sage_tdlib.cpp and the headers in /include/tdlib

-sage_tdlib.cpp is necessary until /base/boost_graph supportes vertex properties (especially std::set). currently, edge properties are supported and vertex properties are pre-defined by some vertex ids

-Even if /base/boost_graph is updated, s.t. vertex properties are supported, some c-code layer is necessary for instanciating the library code with the needed type -> in each case, a c-code layer is necessary.

Lukas



---

archive/issue_comments_260547.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-11-08T18:44:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260547",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_260548.json:
```json
{
    "body": "<a id='comment:55'></a>Helloooooooo Lukas,\n\nI read and changed a couple of things in your code (mostly cleaning). I am trying to find a way to avoid this .cpp file. I added my two commits at u/ncohen/19249, which you can add atop of this branch if you agree with them.\n\nThanks,\n\nNathann",
    "created_at": "2015-11-09T14:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260548",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:55'></a>Helloooooooo Lukas,

I read and changed a couple of things in your code (mostly cleaning). I am trying to find a way to avoid this .cpp file. I added my two commits at u/ncohen/19249, which you can add atop of this branch if you agree with them.

Thanks,

Nathann



---

archive/issue_comments_260549.json:
```json
{
    "body": "<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-09T18:11:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260549",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260550.json:
```json
{
    "body": "<a id='comment:57'></a>Hellooooooooooo Lukas !\n\nOkay, I give up `:-)`\n\nI tried to shortcut your .cpp file but I wasn't able to, and even though I may have gotten 'close' my solutions were very awkward and would probably be a shot in our feet if we ever need something more generic. Let it stay as it is.\n\nWhat would you think of modifying `Graph.treewidth` right now in order to make it call your library when it is installed?\n\nThe way we do it is (see `Graph.automorphism_group`) to have an 'algorithm' selector set to `None`  by default (which means 'use the best routine available'), which can also be defined manually if one wants to call Sage's algorithm or yours, explicitly.\n\nThis also lets us write doctests to check that both algorithms return the same value.\n\nEither way this ticket will soon be merged in Sage. Thanks,\n\nNathann",
    "created_at": "2015-11-16T10:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260550",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:57'></a>Hellooooooooooo Lukas !

Okay, I give up `:-)`

I tried to shortcut your .cpp file but I wasn't able to, and even though I may have gotten 'close' my solutions were very awkward and would probably be a shot in our feet if we ever need something more generic. Let it stay as it is.

What would you think of modifying `Graph.treewidth` right now in order to make it call your library when it is installed?

The way we do it is (see `Graph.automorphism_group`) to have an 'algorithm' selector set to `None`  by default (which means 'use the best routine available'), which can also be defined manually if one wants to call Sage's algorithm or yours, explicitly.

This also lets us write doctests to check that both algorithms return the same value.

Either way this ticket will soon be merged in Sage. Thanks,

Nathann



---

archive/issue_comments_260551.json:
```json
{
    "body": "<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-16T22:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260551",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260552.json:
```json
{
    "body": "<a id='comment:59'></a>Hellooooooooo,\n\nThere were a couple of problems with error management and documentation. I pused a commit at public/19249. If you agree with it, then I guess this can go.\n\nNathann",
    "created_at": "2015-11-17T17:28:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260552",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:59'></a>Hellooooooooo,

There were a couple of problems with error management and documentation. I pused a commit at public/19249. If you agree with it, then I guess this can go.

Nathann



---

archive/issue_comments_260553.json:
```json
{
    "body": "<a id='comment:60'></a>Replying to [comment:59 ncohen]:\n> Hellooooooooo,\n> \n> There were a couple of problems with error management and documentation. I pused a commit at public/19249. If you agree with it, then I guess this can go.\n> \n> Nathann\n\n\nI agree =)\n\nCurrently, the tdlib-algorithm computes the treewidth in each case and k is a lower bound on the resulting width. I will add some code to support the version 'treewidth < k?' soon. \n\nThanks for your review!\n\nLukas",
    "created_at": "2015-11-17T19:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260553",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

<a id='comment:60'></a>Replying to [comment:59 ncohen]:
> Hellooooooooo,
> 
> There were a couple of problems with error management and documentation. I pused a commit at public/19249. If you agree with it, then I guess this can go.
> 
> Nathann


I agree =)

Currently, the tdlib-algorithm computes the treewidth in each case and k is a lower bound on the resulting width. I will add some code to support the version 'treewidth < k?' soon. 

Thanks for your review!

Lukas



---

archive/issue_comments_260554.json:
```json
{
    "body": "<a id='comment:62'></a>New commits:",
    "created_at": "2015-11-17T21:33:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260554",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:62'></a>New commits:



---

archive/issue_comments_260555.json:
```json
{
    "body": "<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-11-17T21:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260555",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_260556.json:
```json
{
    "body": "<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-11-17T21:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260556",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_260557.json:
```json
{
    "body": "<a id='comment:65'></a>Err.. Sorry with the mess with the git branch. It should now be in a correct state, with just a merging operation atop of your branch and a commit meant to clean the doc/code.\n\nIf you still have no problem with it, please change the ticket's status to `needs_review` on my behalf.\n\nThanks,\n\nNathann",
    "created_at": "2015-11-17T21:38:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260557",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:65'></a>Err.. Sorry with the mess with the git branch. It should now be in a correct state, with just a merging operation atop of your branch and a commit meant to clean the doc/code.

If you still have no problem with it, please change the ticket's status to `needs_review` on my behalf.

Thanks,

Nathann



---

archive/issue_comments_260558.json:
```json
{
    "body": "<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-17T21:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260558",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260559.json:
```json
{
    "body": "<a id='comment:67'></a>Replying to [comment:65 ncohen]:\n> Err.. Sorry with the mess with the git branch. It should now be in a correct state, with just a merging operation atop of your branch and a commit meant to clean the doc/code.\n> \n> If you still have no problem with it, please change the ticket's status to `needs_review` on my behalf.\n> \n> Thanks,\n> \n> Nathann\n\n\nThe current state is already `needs_review` ?!",
    "created_at": "2015-11-17T22:00:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260559",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

<a id='comment:67'></a>Replying to [comment:65 ncohen]:
> Err.. Sorry with the mess with the git branch. It should now be in a correct state, with just a merging operation atop of your branch and a commit meant to clean the doc/code.
> 
> If you still have no problem with it, please change the ticket's status to `needs_review` on my behalf.
> 
> Thanks,
> 
> Nathann


The current state is already `needs_review` ?!



---

archive/issue_comments_260560.json:
```json
{
    "body": "<a id='comment:68'></a>That's only because I am an idiot. I meant 'positive_review'.",
    "created_at": "2015-11-18T12:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260560",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:68'></a>That's only because I am an idiot. I meant 'positive_review'.



---

archive/issue_comments_260561.json:
```json
{
    "body": "<a id='comment:69'></a>In build/pkgs/tdlib/type, the package type is set to `optional`. Is this correct?",
    "created_at": "2015-11-18T13:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260561",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

<a id='comment:69'></a>In build/pkgs/tdlib/type, the package type is set to `optional`. Is this correct?



---

archive/issue_comments_260562.json:
```json
{
    "body": "<a id='comment:70'></a>There are still some problems with the trivial cases in the sage algorithm for treewidth:\n\n\n```\nsage: G = Graph()\nsage: G.treewidth() #should be -1\n0\nsage: G.add_vertex(1)\nsage: G.treewidth() #should be 0\n1\n```",
    "created_at": "2015-11-18T13:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260562",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

<a id='comment:70'></a>There are still some problems with the trivial cases in the sage algorithm for treewidth:


```
sage: G = Graph()
sage: G.treewidth() #should be -1
0
sage: G.add_vertex(1)
sage: G.treewidth() #should be 0
1
```



---

archive/issue_comments_260563.json:
```json
{
    "body": "<a id='comment:71'></a>I think I fixed the second case in the commit I added here. The empty graph may also return 1, however. It has to be fixed but not necessarily in this ticket, so we can merge it anyway and fix that elsewhere.\n\nNathann",
    "created_at": "2015-11-18T18:04:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260563",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:71'></a>I think I fixed the second case in the commit I added here. The empty graph may also return 1, however. It has to be fixed but not necessarily in this ticket, so we can merge it anyway and fix that elsewhere.

Nathann



---

archive/issue_comments_260564.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-18T18:22:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260564",
    "user": "https://trac.sagemath.org/admin/accounts/users/llarisch"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_260565.json:
```json
{
    "body": "<a id='comment:73'></a>I think you should have removed the whitespace changes to `module_list.py` (see [comment:21]) but I guess it's too late now.",
    "created_at": "2015-11-18T20:18:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260565",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:73'></a>I think you should have removed the whitespace changes to `module_list.py` (see [comment:21]) but I guess it's too late now.



---

archive/issue_comments_260566.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-11-19T14:15:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260566",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_260567.json:
```json
{
    "body": "<a id='comment:74'></a>\n```\nsage -t --long src/sage/graphs/graph.py\n**********************************************************************\nFile \"src/sage/graphs/graph.py\", line 2345, in sage.graphs.graph.Graph.treewidth\nFailed example:\n    Graph(1).treewidth()\nExpected:\n    0\nGot:\n    1\n**********************************************************************\nFile \"src/sage/graphs/graph.py\", line 2355, in sage.graphs.graph.Graph.treewidth\nFailed example:\n    graphs.PetersenGraph().treewidth(k=3,certificate=True)\nExpected:\n    Tree decomposition: Graph on 6 vertices\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   2 of  30 in sage.graphs.graph.Graph.treewidth\n    [717 tests, 2 failures, 16.17 s]\nsage -t --long src/sage/graphs/graph_decompositions/tdlib.pyx\n**********************************************************************\nFile \"src/sage/graphs/graph_decompositions/tdlib.pyx\", line 126, in sage.graphs.graph_decompositions.tdlib.treedecomposition_exact\nFailed example:\n    import sage.graphs.graph_decompositions.tdlib as tdlib\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.graph_decompositions.tdlib.treedecomposition_exact[0]>\", line 1, in <module>\n        import sage.graphs.graph_decompositions.tdlib as tdlib\n    ImportError: No module named tdlib\n**********************************************************************\nFile \"src/sage/graphs/graph_decompositions/tdlib.pyx\", line 128, in sage.graphs.graph_decompositions.tdlib.treedecomposition_exact\nFailed example:\n    T = tdlib.treedecomposition_exact(G)\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.graph_decompositions.tdlib.treedecomposition_exact[2]>\", line 1, in <module>\n        T = tdlib.treedecomposition_exact(G)\n    NameError: name 'tdlib' is not defined\n**********************************************************************\nFile \"src/sage/graphs/graph_decompositions/tdlib.pyx\", line 129, in sage.graphs.graph_decompositions.tdlib.treedecomposition_exact\nFailed example:\n    T.show(vertex_size=2000)\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.graph_decompositions.tdlib.treedecomposition_exact[3]>\", line 1, in <module>\n        T.show(vertex_size=Integer(2000))\n    NameError: name 'T' is not defined\n**********************************************************************\nFile \"src/sage/graphs/graph_decompositions/tdlib.pyx\", line 133, in sage.graphs.graph_decompositions.tdlib.treedecomposition_exact\nFailed example:\n    import sage.graphs.graph_decompositions.tdlib as tdlib\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.graph_decompositions.tdlib.treedecomposition_exact[4]>\", line 1, in <module>\n        import sage.graphs.graph_decompositions.tdlib as tdlib\n    ImportError: No module named tdlib\n**********************************************************************\nFile \"src/sage/graphs/graph_decompositions/tdlib.pyx\", line 135, in sage.graphs.graph_decompositions.tdlib.treedecomposition_exact\nFailed example:\n    T = tdlib.treedecomposition_exact(G)\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.graph_decompositions.tdlib.treedecomposition_exact[6]>\", line 1, in <module>\n        T = tdlib.treedecomposition_exact(G)\n    NameError: name 'tdlib' is not defined\n**********************************************************************\nFile \"src/sage/graphs/graph_decompositions/tdlib.pyx\", line 137, in sage.graphs.graph_decompositions.tdlib.treedecomposition_exact\nFailed example:\n    T = tdlib.treedecomposition_exact(G)\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.graph_decompositions.tdlib.treedecomposition_exact[8]>\", line 1, in <module>\n        T = tdlib.treedecomposition_exact(G)\n    NameError: name 'tdlib' is not defined\n**********************************************************************\nFile \"src/sage/graphs/graph_decompositions/tdlib.pyx\", line 173, in sage.graphs.graph_decompositions.tdlib.get_width\nFailed example:\n    import sage.graphs.graph_decompositions.tdlib as tdlib\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.graph_decompositions.tdlib.get_width[0]>\", line 1, in <module>\n        import sage.graphs.graph_decompositions.tdlib as tdlib\n    ImportError: No module named tdlib\n**********************************************************************\nFile \"src/sage/graphs/graph_decompositions/tdlib.pyx\", line 175, in sage.graphs.graph_decompositions.tdlib.get_width\nFailed example:\n    T = tdlib.treedecomposition_exact(G)\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.graph_decompositions.tdlib.get_width[2]>\", line 1, in <module>\n        T = tdlib.treedecomposition_exact(G)\n    NameError: name 'tdlib' is not defined\n**********************************************************************\nFile \"src/sage/graphs/graph_decompositions/tdlib.pyx\", line 176, in sage.graphs.graph_decompositions.tdlib.get_width\nFailed example:\n    tdlib.get_width(T)\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.graph_decompositions.tdlib.get_width[3]>\", line 1, in <module>\n        tdlib.get_width(T)\n    NameError: name 'tdlib' is not defined\n**********************************************************************\n2 items had failures:\n   3 of   5 in sage.graphs.graph_decompositions.tdlib.get_width\n   6 of  10 in sage.graphs.graph_decompositions.tdlib.treedecomposition_exact\n    [13 tests, 9 failures, 0.01 s]\n```",
    "created_at": "2015-11-19T14:15:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260567",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:74'></a>
```
sage -t --long src/sage/graphs/graph.py
**********************************************************************
File "src/sage/graphs/graph.py", line 2345, in sage.graphs.graph.Graph.treewidth
Failed example:
    Graph(1).treewidth()
Expected:
    0
Got:
    1
**********************************************************************
File "src/sage/graphs/graph.py", line 2355, in sage.graphs.graph.Graph.treewidth
Failed example:
    graphs.PetersenGraph().treewidth(k=3,certificate=True)
Expected:
    Tree decomposition: Graph on 6 vertices
Got:
    False
**********************************************************************
1 item had failures:
   2 of  30 in sage.graphs.graph.Graph.treewidth
    [717 tests, 2 failures, 16.17 s]
sage -t --long src/sage/graphs/graph_decompositions/tdlib.pyx
**********************************************************************
File "src/sage/graphs/graph_decompositions/tdlib.pyx", line 126, in sage.graphs.graph_decompositions.tdlib.treedecomposition_exact
Failed example:
    import sage.graphs.graph_decompositions.tdlib as tdlib
Exception raised:
    Traceback (most recent call last):
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.graph_decompositions.tdlib.treedecomposition_exact[0]>", line 1, in <module>
        import sage.graphs.graph_decompositions.tdlib as tdlib
    ImportError: No module named tdlib
**********************************************************************
File "src/sage/graphs/graph_decompositions/tdlib.pyx", line 128, in sage.graphs.graph_decompositions.tdlib.treedecomposition_exact
Failed example:
    T = tdlib.treedecomposition_exact(G)
Exception raised:
    Traceback (most recent call last):
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.graph_decompositions.tdlib.treedecomposition_exact[2]>", line 1, in <module>
        T = tdlib.treedecomposition_exact(G)
    NameError: name 'tdlib' is not defined
**********************************************************************
File "src/sage/graphs/graph_decompositions/tdlib.pyx", line 129, in sage.graphs.graph_decompositions.tdlib.treedecomposition_exact
Failed example:
    T.show(vertex_size=2000)
Exception raised:
    Traceback (most recent call last):
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.graph_decompositions.tdlib.treedecomposition_exact[3]>", line 1, in <module>
        T.show(vertex_size=Integer(2000))
    NameError: name 'T' is not defined
**********************************************************************
File "src/sage/graphs/graph_decompositions/tdlib.pyx", line 133, in sage.graphs.graph_decompositions.tdlib.treedecomposition_exact
Failed example:
    import sage.graphs.graph_decompositions.tdlib as tdlib
Exception raised:
    Traceback (most recent call last):
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.graph_decompositions.tdlib.treedecomposition_exact[4]>", line 1, in <module>
        import sage.graphs.graph_decompositions.tdlib as tdlib
    ImportError: No module named tdlib
**********************************************************************
File "src/sage/graphs/graph_decompositions/tdlib.pyx", line 135, in sage.graphs.graph_decompositions.tdlib.treedecomposition_exact
Failed example:
    T = tdlib.treedecomposition_exact(G)
Exception raised:
    Traceback (most recent call last):
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.graph_decompositions.tdlib.treedecomposition_exact[6]>", line 1, in <module>
        T = tdlib.treedecomposition_exact(G)
    NameError: name 'tdlib' is not defined
**********************************************************************
File "src/sage/graphs/graph_decompositions/tdlib.pyx", line 137, in sage.graphs.graph_decompositions.tdlib.treedecomposition_exact
Failed example:
    T = tdlib.treedecomposition_exact(G)
Exception raised:
    Traceback (most recent call last):
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.graph_decompositions.tdlib.treedecomposition_exact[8]>", line 1, in <module>
        T = tdlib.treedecomposition_exact(G)
    NameError: name 'tdlib' is not defined
**********************************************************************
File "src/sage/graphs/graph_decompositions/tdlib.pyx", line 173, in sage.graphs.graph_decompositions.tdlib.get_width
Failed example:
    import sage.graphs.graph_decompositions.tdlib as tdlib
Exception raised:
    Traceback (most recent call last):
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.graph_decompositions.tdlib.get_width[0]>", line 1, in <module>
        import sage.graphs.graph_decompositions.tdlib as tdlib
    ImportError: No module named tdlib
**********************************************************************
File "src/sage/graphs/graph_decompositions/tdlib.pyx", line 175, in sage.graphs.graph_decompositions.tdlib.get_width
Failed example:
    T = tdlib.treedecomposition_exact(G)
Exception raised:
    Traceback (most recent call last):
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.graph_decompositions.tdlib.get_width[2]>", line 1, in <module>
        T = tdlib.treedecomposition_exact(G)
    NameError: name 'tdlib' is not defined
**********************************************************************
File "src/sage/graphs/graph_decompositions/tdlib.pyx", line 176, in sage.graphs.graph_decompositions.tdlib.get_width
Failed example:
    tdlib.get_width(T)
Exception raised:
    Traceback (most recent call last):
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/highperf/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.graph_decompositions.tdlib.get_width[3]>", line 1, in <module>
        tdlib.get_width(T)
    NameError: name 'tdlib' is not defined
**********************************************************************
2 items had failures:
   3 of   5 in sage.graphs.graph_decompositions.tdlib.get_width
   6 of  10 in sage.graphs.graph_decompositions.tdlib.treedecomposition_exact
    [13 tests, 9 failures, 0.01 s]
```



---

archive/issue_comments_260568.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-11-19T14:32:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260568",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_260569.json:
```json
{
    "body": "<a id='comment:75'></a>Sorry, I was careless. 'optional' flags were missing in the second file, and the behaviour was sometimes wrong in the first one.\n\nLukas, as previously could you double check my last commit and change this ticket's status if you agree with it?\n\nNathann",
    "created_at": "2015-11-19T14:32:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260569",
    "user": "https://github.com/nathanncohen"
}
```

<a id='comment:75'></a>Sorry, I was careless. 'optional' flags were missing in the second file, and the behaviour was sometimes wrong in the first one.

Lukas, as previously could you double check my last commit and change this ticket's status if you agree with it?

Nathann



---

archive/issue_comments_260570.json:
```json
{
    "body": "<a id='comment:76'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-19T14:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260570",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:76'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_260571.json:
```json
{
    "body": "<a id='comment:77'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-11-19T14:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260571",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:77'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_260572.json:
```json
{
    "body": "<a id='comment:78'></a>I rebased and squashed the commits which were previously positively reviewed, removing the whitespace changes in `src/module_list.py`. [Nathann's commit](http://git.sagemath.org/sage.git/commit/?id=030819926c0e666d6bef48674493a34dd6732b60) still needs review.",
    "created_at": "2015-11-19T14:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260572",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:78'></a>I rebased and squashed the commits which were previously positively reviewed, removing the whitespace changes in `src/module_list.py`. [Nathann's commit](http://git.sagemath.org/sage.git/commit/?id=030819926c0e666d6bef48674493a34dd6732b60) still needs review.



---

archive/issue_comments_260573.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-11-19T15:14:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260573",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_053381.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-11-21T00:31:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19249#event-53381"
}
```



---

archive/issue_comments_260574.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-11-21T00:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19249#issuecomment-260574",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
