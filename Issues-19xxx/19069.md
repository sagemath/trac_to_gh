# Issue 19069: Expose matroid sum and matroid union to end users

archive/issues_018832.json:
```json
{
    "body": "In #19027 matroid union, sum, partition are implemented, but most are not made discoverable by end users. I propose the following two ways of doing that:\n\n* add import statements to sage/matroids/advanced.py\n* create a new \"submenu\" matroids.constructions (similar to matroids.named_matroids) for these and future other constructions. So we could do\n\n```\nsage: M = matroids.constructions.Union([M1, M2])\n```\n\nCC:  @chaoxu yomcat rudi\n\nReviewer: Travis Scrimshaw\n\nAuthor: Zach Gershkoff\n\nBranch: ed08f729043c0db7709fc9b38bb1dde17804f15f\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19069\n\n",
    "closed_at": "2017-06-22T07:23:20Z",
    "created_at": "2015-08-21T20:18:58Z",
    "labels": [
        "component: matroid theory",
        "trivial"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Expose matroid sum and matroid union to end users",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19069",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```
In #19027 matroid union, sum, partition are implemented, but most are not made discoverable by end users. I propose the following two ways of doing that:

* add import statements to sage/matroids/advanced.py
* create a new "submenu" matroids.constructions (similar to matroids.named_matroids) for these and future other constructions. So we could do

```
sage: M = matroids.constructions.Union([M1, M2])
```

CC:  @chaoxu yomcat rudi

Reviewer: Travis Scrimshaw

Author: Zach Gershkoff

Branch: ed08f729043c0db7709fc9b38bb1dde17804f15f

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19069





---

archive/issue_comments_334610.json:
```json
{
    "body": "<a id='comment:1'></a>\nLet me suggest also the following standard syntax:\n\n```\nsage: M = M1.union(M2)\n```\n\nTo do this, just create a `union` method for matroids. The benefits is that, after creating a matroid `M1`, the user can see all available features by typing `M1.<TAB>`.",
    "created_at": "2015-08-22T11:44:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334610",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:1'></a>
Let me suggest also the following standard syntax:

```
sage: M = M1.union(M2)
```

To do this, just create a `union` method for matroids. The benefits is that, after creating a matroid `M1`, the user can see all available features by typing `M1.<TAB>`.



---

archive/issue_comments_334611.json:
```json
{
    "body": "<a id='comment:2'></a>\nI agree with tmonteil that a `union` method for the Matroid class would be nice, that can take either a matroid or list of matroids as input. I would also definitely do the first of the two suggestions here (and document it inside the `union` method docstring). The second way can wait.\n\nI marked the other ticket asking for this as duplicate: #20357 .",
    "created_at": "2017-03-16T02:38:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334611",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

<a id='comment:2'></a>
I agree with tmonteil that a `union` method for the Matroid class would be nice, that can take either a matroid or list of matroids as input. I would also definitely do the first of the two suggestions here (and document it inside the `union` method docstring). The second way can wait.

I marked the other ticket asking for this as duplicate: #20357 .



---

archive/issue_comments_334612.json:
```json
{
    "body": "Changing branch from \"\" to \"u/zgershkoff/expose_matroid_sum_and_matroid_union_to_end_users\"",
    "created_at": "2017-05-31T01:34:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334612",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Changing branch from "" to "u/zgershkoff/expose_matroid_sum_and_matroid_union_to_end_users"



---

archive/issue_comments_334613.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-05-31T01:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334613",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_334614.json:
```json
{
    "body": "<a id='comment:4'></a>\nI added a union method and it seems to work well enough. I wasn't able to get it to work with cython-- it kept giving me an error \"Expected an identifier\" when I defined the union method. I also unearthed some issues with the union method, but I can talk with Stefan about that later. For now, it's exposed.\n\n---\nNew commits:\n|                                                                                                                                          |                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[27b724e](https://github.com/sagemath/sagetrac-mirror/commit/27b724e9e753ffa572b6d8300aedee4382581a65)|`Added union method to matroid.pyx`|",
    "created_at": "2017-05-31T01:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334614",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

<a id='comment:4'></a>
I added a union method and it seems to work well enough. I wasn't able to get it to work with cython-- it kept giving me an error "Expected an identifier" when I defined the union method. I also unearthed some issues with the union method, but I can talk with Stefan about that later. For now, it's exposed.

---
New commits:
|                                                                                                                                          |                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[27b724e](https://github.com/sagemath/sagetrac-mirror/commit/27b724e9e753ffa572b6d8300aedee4382581a65)|`Added union method to matroid.pyx`|



---

archive/issue_comments_334615.json:
```json
{
    "body": "Changing commit from \"\" to \"27b724e9e753ffa572b6d8300aedee4382581a65\"",
    "created_at": "2017-05-31T01:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334615",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Changing commit from "" to "27b724e9e753ffa572b6d8300aedee4382581a65"



---

archive/issue_comments_334616.json:
```json
{
    "body": "Changing commit from \"27b724e9e753ffa572b6d8300aedee4382581a65\" to \"51152ea69afe002d3b93517c92488298c47f37ba\"",
    "created_at": "2017-06-10T01:55:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334616",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "27b724e9e753ffa572b6d8300aedee4382581a65" to "51152ea69afe002d3b93517c92488298c47f37ba"



---

archive/issue_comments_334617.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[51152ea](https://github.com/sagemath/sagetrac-mirror/commit/51152ea69afe002d3b93517c92488298c47f37ba)|`Attempt to cythonize. It doesn't compile, though.`|",
    "created_at": "2017-06-10T01:55:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334617",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[51152ea](https://github.com/sagemath/sagetrac-mirror/commit/51152ea69afe002d3b93517c92488298c47f37ba)|`Attempt to cythonize. It doesn't compile, though.`|



---

archive/issue_comments_334618.json:
```json
{
    "body": "<a id='comment:6'></a>\n`_union()` is able to cythonize and everything compiles if `union()` is commented out, but with `union()` I get the following error and it won't compile.\n\n```\nError compiling Cython file:\n------------------------------------------------------------\n...\n        \"\"\"\n        if isinstance(matroids, Matroid):\n            matroids = [matroids]\n        # place this matroid at the beginning of the list\n        matroids.insert(0,self)\n        return _union(iter(matroids))\n                    ^\n------------------------------------------------------------\n\nsage/matroids/matroid.pyx:7772:21: undeclared name not builtin: _union\n```\n\nMore trouble with \"union\" being a reserved keyword, perhaps?",
    "created_at": "2017-06-10T01:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334618",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

<a id='comment:6'></a>
`_union()` is able to cythonize and everything compiles if `union()` is commented out, but with `union()` I get the following error and it won't compile.

```
Error compiling Cython file:
------------------------------------------------------------
...
        """
        if isinstance(matroids, Matroid):
            matroids = [matroids]
        # place this matroid at the beginning of the list
        matroids.insert(0,self)
        return _union(iter(matroids))
                    ^
------------------------------------------------------------

sage/matroids/matroid.pyx:7772:21: undeclared name not builtin: _union
```

More trouble with "union" being a reserved keyword, perhaps?



---

archive/issue_comments_334619.json:
```json
{
    "body": "<a id='comment:7'></a>\nDon't you want `self._union`? Also, I don't see the point of having a `_union` method since there is no real safety checks that need to be performed and everything computationally is handled by `MatroidUnion`.",
    "created_at": "2017-06-10T03:15:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334619",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
Don't you want `self._union`? Also, I don't see the point of having a `_union` method since there is no real safety checks that need to be performed and everything computationally is handled by `MatroidUnion`.



---

archive/issue_comments_334620.json:
```json
{
    "body": "<a id='comment:8'></a>\nYes, I forgot the `self`.\n\nThe reason we need the `_union` method (Stefan helped me figure this out) is that \"union\" is a reserved keyword for Cython, so `cpdef union` gives the following error when compiling:\n\n```\nError compiling Cython file:\n------------------------------------------------------------\n...\n            Ternary matroid of rank 3 on 7 elements, type 0-\n        \"\"\"\n        from . import union_matroid\n        return union_matroid.MatroidUnion(matroids)\n\n    cpdef union(self, matroids):\n              ^\n------------------------------------------------------------\n\nsage/matroids/matroid.pyx:7747:15: Expected an identifier\n```\n\nSo instead we make `def union` sanitize the input and pass it to `cpdef _union`.",
    "created_at": "2017-06-10T21:55:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334620",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

<a id='comment:8'></a>
Yes, I forgot the `self`.

The reason we need the `_union` method (Stefan helped me figure this out) is that "union" is a reserved keyword for Cython, so `cpdef union` gives the following error when compiling:

```
Error compiling Cython file:
------------------------------------------------------------
...
            Ternary matroid of rank 3 on 7 elements, type 0-
        """
        from . import union_matroid
        return union_matroid.MatroidUnion(matroids)

    cpdef union(self, matroids):
              ^
------------------------------------------------------------

sage/matroids/matroid.pyx:7747:15: Expected an identifier
```

So instead we make `def union` sanitize the input and pass it to `cpdef _union`.



---

archive/issue_comments_334621.json:
```json
{
    "body": "Changing commit from \"51152ea69afe002d3b93517c92488298c47f37ba\" to \"f4e6baf717bcfc33a11f9403c3c115e6c48aee42\"",
    "created_at": "2017-06-10T21:57:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334621",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "51152ea69afe002d3b93517c92488298c47f37ba" to "f4e6baf717bcfc33a11f9403c3c115e6c48aee42"



---

archive/issue_comments_334622.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[f4e6baf](https://github.com/sagemath/sagetrac-mirror/commit/f4e6baf717bcfc33a11f9403c3c115e6c48aee42)|`fix + extra input check`|",
    "created_at": "2017-06-10T21:57:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334622",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[f4e6baf](https://github.com/sagemath/sagetrac-mirror/commit/f4e6baf717bcfc33a11f9403c3c115e6c48aee42)|`fix + extra input check`|



---

archive/issue_comments_334623.json:
```json
{
    "body": "<a id='comment:10'></a>\nI don't claim to know the benefit of using Cython when all it does is pass the input to another Cython method. I just know it works the way I had intended it now.\n\nPerhaps I should change it back to just Python?",
    "created_at": "2017-06-10T22:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334623",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

<a id='comment:10'></a>
I don't claim to know the benefit of using Cython when all it does is pass the input to another Cython method. I just know it works the way I had intended it now.

Perhaps I should change it back to just Python?



---

archive/issue_comments_334624.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2017-06-10T22:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334624",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_334625.json:
```json
{
    "body": "<a id='comment:11'></a>\nI'll take this off \"needs review\" until we decide.",
    "created_at": "2017-06-10T22:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334625",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

<a id='comment:11'></a>
I'll take this off "needs review" until we decide.



---

archive/issue_comments_334626.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2017-06-10T23:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334626",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_334627.json:
```json
{
    "body": "<a id='comment:12'></a>\nAh, I see, right. Well, there is an advantage to only having C code paths (I would make `_union` simply a `cdef` method because it should only be called from `def union`). However, you are going to have to do a number of Python calls when constructing the `MatroidUnion`, so having an extra Python function call for a lightweight function will not really change much. Especially since this is not likely to be called in tight loops and if you really wanted the most speed, you would just directly construct `MatriodUnion` anyways. So there should only be a Python `def union` IMO.",
    "created_at": "2017-06-10T23:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334627",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>
Ah, I see, right. Well, there is an advantage to only having C code paths (I would make `_union` simply a `cdef` method because it should only be called from `def union`). However, you are going to have to do a number of Python calls when constructing the `MatroidUnion`, so having an extra Python function call for a lightweight function will not really change much. Especially since this is not likely to be called in tight loops and if you really wanted the most speed, you would just directly construct `MatriodUnion` anyways. So there should only be a Python `def union` IMO.



---

archive/issue_events_068080.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-10T23:57:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19069#event-68080"
}
```



---

archive/issue_comments_334628.json:
```json
{
    "body": "<a id='comment:13'></a>\nI think I have come around to Travis' point of view. Only a \"def union\" will do for this one. Sorry for making you do extra work.\n\n--Stefan.",
    "created_at": "2017-06-11T01:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334628",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

<a id='comment:13'></a>
I think I have come around to Travis' point of view. Only a "def union" will do for this one. Sorry for making you do extra work.

--Stefan.



---

archive/issue_events_068081.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2017-06-11T01:32:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19069#event-68081"
}
```



---

archive/issue_events_068082.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/Stefan",
    "created_at": "2017-06-11T01:32:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19069#event-68082"
}
```



---

archive/issue_comments_334629.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[e82b0ee](https://github.com/sagemath/sagetrac-mirror/commit/e82b0ee2b16073076a071e5d68b2aa131686ebd2)|`Reduced to one Python method; added theory`|",
    "created_at": "2017-06-11T02:39:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334629",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[e82b0ee](https://github.com/sagemath/sagetrac-mirror/commit/e82b0ee2b16073076a071e5d68b2aa131686ebd2)|`Reduced to one Python method; added theory`|



---

archive/issue_comments_334630.json:
```json
{
    "body": "Changing commit from \"f4e6baf717bcfc33a11f9403c3c115e6c48aee42\" to \"e82b0ee2b16073076a071e5d68b2aa131686ebd2\"",
    "created_at": "2017-06-11T02:39:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334630",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f4e6baf717bcfc33a11f9403c3c115e6c48aee42" to "e82b0ee2b16073076a071e5d68b2aa131686ebd2"



---

archive/issue_comments_334631.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------|\n|[914cd88](https://github.com/sagemath/sagetrac-mirror/commit/914cd88bf9f0105c30576482357608d83b4a29b1)|`Whitespace issues`|",
    "created_at": "2017-06-11T02:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334631",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------|
|[914cd88](https://github.com/sagemath/sagetrac-mirror/commit/914cd88bf9f0105c30576482357608d83b4a29b1)|`Whitespace issues`|



---

archive/issue_comments_334632.json:
```json
{
    "body": "Changing commit from \"e82b0ee2b16073076a071e5d68b2aa131686ebd2\" to \"914cd88bf9f0105c30576482357608d83b4a29b1\"",
    "created_at": "2017-06-11T02:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334632",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e82b0ee2b16073076a071e5d68b2aa131686ebd2" to "914cd88bf9f0105c30576482357608d83b4a29b1"



---

archive/issue_comments_334633.json:
```json
{
    "body": "<a id='comment:16'></a>\nNo worries. It was a good learning experience.",
    "created_at": "2017-06-11T02:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334633",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

<a id='comment:16'></a>
No worries. It was a good learning experience.



---

archive/issue_comments_334634.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-11T02:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334634",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_334635.json:
```json
{
    "body": "<a id='comment:17'></a>\nShould we have `M.union([]) == M`?",
    "created_at": "2017-06-11T02:47:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334635",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>
Should we have `M.union([]) == M`?



---

archive/issue_comments_334636.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[04e17b0](https://github.com/sagemath/sagetrac-mirror/commit/04e17b08cd846f78d113dcfa6bfc16d7c12000b2)|`Addressed case of empty list`|",
    "created_at": "2017-06-11T03:03:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334636",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[04e17b0](https://github.com/sagemath/sagetrac-mirror/commit/04e17b08cd846f78d113dcfa6bfc16d7c12000b2)|`Addressed case of empty list`|



---

archive/issue_comments_334637.json:
```json
{
    "body": "Changing commit from \"914cd88bf9f0105c30576482357608d83b4a29b1\" to \"04e17b08cd846f78d113dcfa6bfc16d7c12000b2\"",
    "created_at": "2017-06-11T03:03:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334637",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "914cd88bf9f0105c30576482357608d83b4a29b1" to "04e17b08cd846f78d113dcfa6bfc16d7c12000b2"



---

archive/issue_comments_334638.json:
```json
{
    "body": "<a id='comment:19'></a>\nMakes sense to me.",
    "created_at": "2017-06-11T03:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334638",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

<a id='comment:19'></a>
Makes sense to me.



---

archive/issue_comments_334639.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2017-06-11T23:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334639",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_334640.json:
```json
{
    "body": "<a id='comment:20'></a>\nThis is not correct:\n\n```diff\n-        if matroids = []:\n+        if matroids == []:\n```\nOnce that is changed and you fill in the author name, you can set a positive review on my behalf.",
    "created_at": "2017-06-11T23:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334640",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>
This is not correct:

```diff
-        if matroids = []:
+        if matroids == []:
```
Once that is changed and you fill in the author name, you can set a positive review on my behalf.



---

archive/issue_events_068083.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-11T23:10:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "milestone": "sage-6.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19069#event-68083"
}
```



---

archive/issue_events_068084.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-11T23:10:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19069#event-68084"
}
```



---

archive/issue_comments_334641.json:
```json
{
    "body": "<a id='comment:21'></a>\nActually, a better test is `if not matroids:` as it is both faster and covers inputs like `()`. This would also pick up the empty matroid, which is okay as the union with the empty matroid should also not change the matroid and `MatroidUnion` should behave the same as other matroids, right? There is a case to be made that the output type is always the same, but I'm not convinced by that here. If we did want to enforce that, we just need to move the `isinstance(matroids, Matroid)` check first before `if not matroids:`.",
    "created_at": "2017-06-11T23:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334641",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>
Actually, a better test is `if not matroids:` as it is both faster and covers inputs like `()`. This would also pick up the empty matroid, which is okay as the union with the empty matroid should also not change the matroid and `MatroidUnion` should behave the same as other matroids, right? There is a case to be made that the output type is always the same, but I'm not convinced by that here. If we did want to enforce that, we just need to move the `isinstance(matroids, Matroid)` check first before `if not matroids:`.



---

archive/issue_comments_334642.json:
```json
{
    "body": "<a id='comment:22'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[0841bb8](https://github.com/sagemath/sagetrac-mirror/commit/0841bb8f7c0bb5a216457465d1b6c0d88ec0ba6d)|`repaired check for empty matroid`|",
    "created_at": "2017-06-13T23:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334642",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[0841bb8](https://github.com/sagemath/sagetrac-mirror/commit/0841bb8f7c0bb5a216457465d1b6c0d88ec0ba6d)|`repaired check for empty matroid`|



---

archive/issue_comments_334643.json:
```json
{
    "body": "Changing commit from \"04e17b08cd846f78d113dcfa6bfc16d7c12000b2\" to \"0841bb8f7c0bb5a216457465d1b6c0d88ec0ba6d\"",
    "created_at": "2017-06-13T23:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334643",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "04e17b08cd846f78d113dcfa6bfc16d7c12000b2" to "0841bb8f7c0bb5a216457465d1b6c0d88ec0ba6d"



---

archive/issue_comments_334644.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-06-13T23:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334644",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_334645.json:
```json
{
    "body": "<a id='comment:23'></a>\nThat will teach me to make a commit before testing it.\n\nI'm not getting expected behavior with `M.union([])` where `M` is a matroid (in particular, I used the Fano).\n\nYou can also fool this with a list of empty matroids. I can make it take empty matroids out of the list, but we may be getting diminishing returns with the sanitizing.",
    "created_at": "2017-06-13T23:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334645",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

<a id='comment:23'></a>
That will teach me to make a commit before testing it.

I'm not getting expected behavior with `M.union([])` where `M` is a matroid (in particular, I used the Fano).

You can also fool this with a list of empty matroids. I can make it take empty matroids out of the list, but we may be getting diminishing returns with the sanitizing.



---

archive/issue_comments_334646.json:
```json
{
    "body": "Changing commit from \"0841bb8f7c0bb5a216457465d1b6c0d88ec0ba6d\" to \"d074c917d7ce52d8383b56b33bc59786d5ccee4d\"",
    "created_at": "2017-06-14T04:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334646",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0841bb8f7c0bb5a216457465d1b6c0d88ec0ba6d" to "d074c917d7ce52d8383b56b33bc59786d5ccee4d"



---

archive/issue_comments_334647.json:
```json
{
    "body": "<a id='comment:24'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[d074c91](https://github.com/sagemath/sagetrac-mirror/commit/d074c917d7ce52d8383b56b33bc59786d5ccee4d)|`additional input sanitizing`|",
    "created_at": "2017-06-14T04:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334647",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[d074c91](https://github.com/sagemath/sagetrac-mirror/commit/d074c917d7ce52d8383b56b33bc59786d5ccee4d)|`additional input sanitizing`|



---

archive/issue_comments_334648.json:
```json
{
    "body": "<a id='comment:25'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[a7a9f13](https://github.com/sagemath/sagetrac-mirror/commit/a7a9f133e2c46b312fde41ec00afd742073ca52e)|`one such test is probably enough`|",
    "created_at": "2017-06-14T04:36:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334648",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[a7a9f13](https://github.com/sagemath/sagetrac-mirror/commit/a7a9f133e2c46b312fde41ec00afd742073ca52e)|`one such test is probably enough`|



---

archive/issue_comments_334649.json:
```json
{
    "body": "Changing commit from \"d074c917d7ce52d8383b56b33bc59786d5ccee4d\" to \"a7a9f133e2c46b312fde41ec00afd742073ca52e\"",
    "created_at": "2017-06-14T04:36:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334649",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d074c917d7ce52d8383b56b33bc59786d5ccee4d" to "a7a9f133e2c46b312fde41ec00afd742073ca52e"



---

archive/issue_comments_334650.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-14T04:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334650",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_334651.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [zgershkoff](#comment%3A23):\n> I'm not getting expected behavior with `M.union([])`\n\nSorry, this was wrong. An error on my part.\n\nI rewrote it to filter out empty matroids from a list. I also figured that the cost of adding an empty matroid to the list and then removing it was worth the simplicity of not performing the same check twice.",
    "created_at": "2017-06-14T04:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334651",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

<a id='comment:26'></a>
Replying to [zgershkoff](#comment%3A23):
> I'm not getting expected behavior with `M.union([])`

Sorry, this was wrong. An error on my part.

I rewrote it to filter out empty matroids from a list. I also figured that the cost of adding an empty matroid to the list and then removing it was worth the simplicity of not performing the same check twice.



---

archive/issue_comments_334652.json:
```json
{
    "body": "<a id='comment:27'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[acd1dc9](https://github.com/sagemath/sagetrac-mirror/commit/acd1dc902b0f6ef21d8f645667b0942ab5b71919)|`typo in documentation`|",
    "created_at": "2017-06-14T04:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334652",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[acd1dc9](https://github.com/sagemath/sagetrac-mirror/commit/acd1dc902b0f6ef21d8f645667b0942ab5b71919)|`typo in documentation`|



---

archive/issue_comments_334653.json:
```json
{
    "body": "Changing commit from \"a7a9f133e2c46b312fde41ec00afd742073ca52e\" to \"acd1dc902b0f6ef21d8f645667b0942ab5b71919\"",
    "created_at": "2017-06-14T04:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334653",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a7a9f133e2c46b312fde41ec00afd742073ca52e" to "acd1dc902b0f6ef21d8f645667b0942ab5b71919"



---

archive/issue_comments_334654.json:
```json
{
    "body": "<a id='comment:28'></a>\nOne last thing, we don't typically write error messages as full sentences:\n\n```diff\n-                    raise TypeError(\"Can only take the union with a \"\n-                                     + \"matroid or list of matroids.\")\n+                    raise TypeError(\"can only take the union with a \"\n+                                     + \"matroid or list of matroids\")\n```\nOnce you make that change and add your real name to the authors, you can set a positive review on my behalf.",
    "created_at": "2017-06-17T04:29:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334654",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'></a>
One last thing, we don't typically write error messages as full sentences:

```diff
-                    raise TypeError("Can only take the union with a "
-                                     + "matroid or list of matroids.")
+                    raise TypeError("can only take the union with a "
+                                     + "matroid or list of matroids")
```
Once you make that change and add your real name to the authors, you can set a positive review on my behalf.



---

archive/issue_comments_334655.json:
```json
{
    "body": "<a id='comment:29'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[ed08f72](https://github.com/sagemath/sagetrac-mirror/commit/ed08f729043c0db7709fc9b38bb1dde17804f15f)|`changing error message to fit conventions`|",
    "created_at": "2017-06-17T19:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334655",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[ed08f72](https://github.com/sagemath/sagetrac-mirror/commit/ed08f729043c0db7709fc9b38bb1dde17804f15f)|`changing error message to fit conventions`|



---

archive/issue_comments_334656.json:
```json
{
    "body": "Changing commit from \"acd1dc902b0f6ef21d8f645667b0942ab5b71919\" to \"ed08f729043c0db7709fc9b38bb1dde17804f15f\"",
    "created_at": "2017-06-17T19:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334656",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "acd1dc902b0f6ef21d8f645667b0942ab5b71919" to "ed08f729043c0db7709fc9b38bb1dde17804f15f"



---

archive/issue_comments_334657.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-17T19:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334657",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_334658.json:
```json
{
    "body": "<a id='comment:30'></a>\nDone.",
    "created_at": "2017-06-17T19:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334658",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

<a id='comment:30'></a>
Done.



---

archive/issue_comments_334659.json:
```json
{
    "body": "Changing author from \"\" to \"Zachary Gershkoff\"",
    "created_at": "2017-06-17T19:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334659",
    "user": "https://trac.sagemath.org/admin/accounts/users/zgershkoff"
}
```

Changing author from "" to "Zachary Gershkoff"



---

archive/issue_comments_334660.json:
```json
{
    "body": "Changing branch from \"u/zgershkoff/expose_matroid_sum_and_matroid_union_to_end_users\" to \"ed08f729043c0db7709fc9b38bb1dde17804f15f\"",
    "created_at": "2017-06-22T07:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334660",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/zgershkoff/expose_matroid_sum_and_matroid_union_to_end_users" to "ed08f729043c0db7709fc9b38bb1dde17804f15f"



---

archive/issue_events_068085.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-22T07:23:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19069#event-68085"
}
```



---

archive/issue_comments_334661.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-06-22T07:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334661",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_334662.json:
```json
{
    "body": "Changing author from \"Zachary Gershkoff\" to \"Zach Gershkoff\"",
    "created_at": "2017-10-24T15:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334662",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "Zachary Gershkoff" to "Zach Gershkoff"



---

archive/issue_comments_334663.json:
```json
{
    "body": "Changing commit from \"ed08f729043c0db7709fc9b38bb1dde17804f15f\" to \"\"",
    "created_at": "2017-10-24T15:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19069",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19069#issuecomment-334663",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "ed08f729043c0db7709fc9b38bb1dde17804f15f" to ""
