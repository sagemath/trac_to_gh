# Issue 19625: Lift faster digraph from alcove path to category of highest weight crystals

archive/issues_019388.json:
```json
{
    "body": "For highest weight crystals, we can use a graded recursive set approach to construct the digraph. We move `digraph_fast` from `CrystalOfAlcovePaths` up to the highest weight crystals and deprecate `digraph_fast`.\n\nAssignee: sage-combinat\n\nCC:  sage-combinat @bsalisbury1 @anneschilling alubovsky\n\nKeywords: crystals, digraph\n\nBranch/Commit: c102ac5ed24ae4fa45310dcaaab24f034b8df676\n\nReviewer: Arthur Lubovsky\n\nAuthor: Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19625\n\n",
    "closed_at": "2017-01-29T12:04:48Z",
    "created_at": "2015-11-26T04:20:01Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Lift faster digraph from alcove path to category of highest weight crystals",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19625",
    "user": "https://github.com/tscrim"
}
```
For highest weight crystals, we can use a graded recursive set approach to construct the digraph. We move `digraph_fast` from `CrystalOfAlcovePaths` up to the highest weight crystals and deprecate `digraph_fast`.

Assignee: sage-combinat

CC:  sage-combinat @bsalisbury1 @anneschilling alubovsky

Keywords: crystals, digraph

Branch/Commit: c102ac5ed24ae4fa45310dcaaab24f034b8df676

Reviewer: Arthur Lubovsky

Author: Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19625





---

archive/issue_comments_352706.json:
```json
{
    "body": "<a id='comment:1'></a>This results in at least a 2x speedup:\n\n```\nsage: B = crystals.infinity.RiggedConfigurations(['A',2])\nsage: general_digraph = Crystals().parent_class.digraph\nsage: %timeit B.digraph(depth=6)\n100 loops, best of 3: 6.2 ms per loop\nsage: S = list(B.subcrystal(max_depth=6))\nsage: %timeit general_digraph(B, subset=S)\n100 loops, best of 3: 15.8 ms per loop\n```\n\nThere is a mild issue of do we want a default for `depth` for infinite crystals. If we don't, this would be a change of behavior for `digraph_fast`. I don't have too strong of an opinion, but I lean towards raising a `ValueError` if it is not a finite crystal and both `depth` and `subset` are not specified.\n\n---\nNew commits:",
    "created_at": "2015-11-26T04:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352706",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>This results in at least a 2x speedup:

```
sage: B = crystals.infinity.RiggedConfigurations(['A',2])
sage: general_digraph = Crystals().parent_class.digraph
sage: %timeit B.digraph(depth=6)
100 loops, best of 3: 6.2 ms per loop
sage: S = list(B.subcrystal(max_depth=6))
sage: %timeit general_digraph(B, subset=S)
100 loops, best of 3: 15.8 ms per loop
```

There is a mild issue of do we want a default for `depth` for infinite crystals. If we don't, this would be a change of behavior for `digraph_fast`. I don't have too strong of an opinion, but I lean towards raising a `ValueError` if it is not a finite crystal and both `depth` and `subset` are not specified.

---
New commits:



---

archive/issue_comments_352707.json:
```json
{
    "body": "Changing commit from \"\" to \"654bef3d34dc3248ca82eb0700e0b7a5d955920a\"",
    "created_at": "2015-11-26T04:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352707",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "" to "654bef3d34dc3248ca82eb0700e0b7a5d955920a"



---

archive/issue_comments_352708.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-26T04:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352708",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_352709.json:
```json
{
    "body": "Changing branch from \"\" to \"public/categories/speedup_digraph_highest_weight-19625\"",
    "created_at": "2015-11-26T04:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352709",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "" to "public/categories/speedup_digraph_highest_weight-19625"



---

archive/issue_comments_352710.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-01-05T20:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352710",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_352711.json:
```json
{
    "body": "<a id='comment:3'></a>does not apply",
    "created_at": "2017-01-05T20:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352711",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>does not apply



---

archive/issue_comments_352712.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-08T05:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352712",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_352713.json:
```json
{
    "body": "Changing commit from \"654bef3d34dc3248ca82eb0700e0b7a5d955920a\" to \"15d10e73193d7c107dc8d9f5586d66e1a9d326ff\"",
    "created_at": "2017-01-08T05:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352713",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "654bef3d34dc3248ca82eb0700e0b7a5d955920a" to "15d10e73193d7c107dc8d9f5586d66e1a9d326ff"



---

archive/issue_comments_352714.json:
```json
{
    "body": "Changing commit from \"15d10e73193d7c107dc8d9f5586d66e1a9d326ff\" to \"0d7832f275aacd9dd457d997252cb56c82e42e92\"",
    "created_at": "2017-01-08T05:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352714",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "15d10e73193d7c107dc8d9f5586d66e1a9d326ff" to "0d7832f275aacd9dd457d997252cb56c82e42e92"



---

archive/issue_comments_352715.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-08T05:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352715",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_352716.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-01-08T05:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352716",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_352717.json:
```json
{
    "body": "<a id='comment:6'></a>Considering what we do for other infinite crystals (#21986), I decided we should raise a `ValueError` when the crystal is not known to be finite.",
    "created_at": "2017-01-08T05:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352717",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>Considering what we do for other infinite crystals (#21986), I decided we should raise a `ValueError` when the crystal is not known to be finite.



---

archive/issue_events_053942.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-01-08T05:27:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19625#event-53942"
}
```



---

archive/issue_comments_352718.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-11T03:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352718",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_352719.json:
```json
{
    "body": "Changing commit from \"0d7832f275aacd9dd457d997252cb56c82e42e92\" to \"ff9fd4c7e9ff5bc6c2d9d6ae405ece6f1dbb3ab3\"",
    "created_at": "2017-01-11T03:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352719",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0d7832f275aacd9dd457d997252cb56c82e42e92" to "ff9fd4c7e9ff5bc6c2d9d6ae405ece6f1dbb3ab3"



---

archive/issue_comments_352720.json:
```json
{
    "body": "Changing commit from \"ff9fd4c7e9ff5bc6c2d9d6ae405ece6f1dbb3ab3\" to \"b064f562ddc9c5d35947dad2102587fad8b7ffd1\"",
    "created_at": "2017-01-12T00:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352720",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ff9fd4c7e9ff5bc6c2d9d6ae405ece6f1dbb3ab3" to "b064f562ddc9c5d35947dad2102587fad8b7ffd1"



---

archive/issue_comments_352721.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-12T00:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352721",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_352722.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-26T14:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352722",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_352723.json:
```json
{
    "body": "Changing commit from \"b064f562ddc9c5d35947dad2102587fad8b7ffd1\" to \"c102ac5ed24ae4fa45310dcaaab24f034b8df676\"",
    "created_at": "2017-01-26T14:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352723",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b064f562ddc9c5d35947dad2102587fad8b7ffd1" to "c102ac5ed24ae4fa45310dcaaab24f034b8df676"



---

archive/issue_comments_352724.json:
```json
{
    "body": "<a id='comment:10'></a>I made one last little change to make the error type and their messages consistent. If my change is good with you, then you can set a positive review.",
    "created_at": "2017-01-26T14:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352724",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>I made one last little change to make the error type and their messages consistent. If my change is good with you, then you can set a positive review.



---

archive/issue_comments_352725.json:
```json
{
    "body": "<a id='comment:11'></a>Looks good.",
    "created_at": "2017-01-26T18:38:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352725",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```

<a id='comment:11'></a>Looks good.



---

archive/issue_comments_352726.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-01-26T18:38:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352726",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_352727.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Arthur Lubovsky\"",
    "created_at": "2017-01-26T19:15:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352727",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Arthur Lubovsky"



---

archive/issue_comments_352728.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-01-29T12:04:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352728",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_053943.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-29T12:04:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19625#event-53943"
}
```



---

archive/issue_comments_352729.json:
```json
{
    "body": "Changing branch from \"public/categories/speedup_digraph_highest_weight-19625\" to \"c102ac5ed24ae4fa45310dcaaab24f034b8df676\"",
    "created_at": "2017-01-29T12:04:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-352729",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/categories/speedup_digraph_highest_weight-19625" to "c102ac5ed24ae4fa45310dcaaab24f034b8df676"
