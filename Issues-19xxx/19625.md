# Issue 19625: Lift faster digraph from alcove path to category of highest weight crystals

archive/issues_019388.json:
```json
{
    "body": "For highest weight crystals, we can use a graded recursive set approach to construct the digraph. We move `digraph_fast` from `CrystalOfAlcovePaths` up to the highest weight crystals and deprecate `digraph_fast`.\n\nAssignee: sage-combinat\n\nCC:  sage-combinat @bsalisbury1 @anneschilling alubovsky\n\nKeywords: crystals, digraph\n\nBranch/Commit: c102ac5ed24ae4fa45310dcaaab24f034b8df676\n\nReviewer: Arthur Lubovsky\n\nAuthor: Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/19625\n\n",
    "closed_at": "2017-01-29T12:04:48Z",
    "created_at": "2015-11-26T04:20:01Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Lift faster digraph from alcove path to category of highest weight crystals",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19625",
    "user": "https://github.com/tscrim"
}
```
For highest weight crystals, we can use a graded recursive set approach to construct the digraph. We move `digraph_fast` from `CrystalOfAlcovePaths` up to the highest weight crystals and deprecate `digraph_fast`.

Assignee: sage-combinat

CC:  sage-combinat @bsalisbury1 @anneschilling alubovsky

Keywords: crystals, digraph

Branch/Commit: c102ac5ed24ae4fa45310dcaaab24f034b8df676

Reviewer: Arthur Lubovsky

Author: Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/19625





---

archive/issue_comments_283470.json:
```json
{
    "body": "<a id='comment:1'></a>This results in at least a 2x speedup:\n\n```\nsage: B = crystals.infinity.RiggedConfigurations(['A',2])\nsage: general_digraph = Crystals().parent_class.digraph\nsage: %timeit B.digraph(depth=6)\n100 loops, best of 3: 6.2 ms per loop\nsage: S = list(B.subcrystal(max_depth=6))\nsage: %timeit general_digraph(B, subset=S)\n100 loops, best of 3: 15.8 ms per loop\n```\n\nThere is a mild issue of do we want a default for `depth` for infinite crystals. If we don't, this would be a change of behavior for `digraph_fast`. I don't have too strong of an opinion, but I lean towards raising a `ValueError` if it is not a finite crystal and both `depth` and `subset` are not specified.\n\n---\nNew commits:",
    "created_at": "2015-11-26T04:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-283470",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>This results in at least a 2x speedup:

```
sage: B = crystals.infinity.RiggedConfigurations(['A',2])
sage: general_digraph = Crystals().parent_class.digraph
sage: %timeit B.digraph(depth=6)
100 loops, best of 3: 6.2 ms per loop
sage: S = list(B.subcrystal(max_depth=6))
sage: %timeit general_digraph(B, subset=S)
100 loops, best of 3: 15.8 ms per loop
```

There is a mild issue of do we want a default for `depth` for infinite crystals. If we don't, this would be a change of behavior for `digraph_fast`. I don't have too strong of an opinion, but I lean towards raising a `ValueError` if it is not a finite crystal and both `depth` and `subset` are not specified.

---
New commits:



---

archive/issue_comments_283471.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-26T04:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-283471",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_283472.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-01-05T20:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-283472",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_283473.json:
```json
{
    "body": "<a id='comment:3'></a>does not apply",
    "created_at": "2017-01-05T20:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-283473",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>does not apply



---

archive/issue_comments_283474.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-08T05:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-283474",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_283475.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-08T05:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-283475",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_283476.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-01-08T05:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-283476",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_283477.json:
```json
{
    "body": "<a id='comment:6'></a>Considering what we do for other infinite crystals (#21986), I decided we should raise a `ValueError` when the crystal is not known to be finite.",
    "created_at": "2017-01-08T05:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-283477",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>Considering what we do for other infinite crystals (#21986), I decided we should raise a `ValueError` when the crystal is not known to be finite.



---

archive/issue_events_053942.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-01-08T05:27:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19625#event-53942"
}
```



---

archive/issue_comments_283478.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-11T03:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-283478",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_283479.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-12T00:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-283479",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_283480.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-26T14:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-283480",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_283481.json:
```json
{
    "body": "<a id='comment:10'></a>I made one last little change to make the error type and their messages consistent. If my change is good with you, then you can set a positive review.",
    "created_at": "2017-01-26T14:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-283481",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>I made one last little change to make the error type and their messages consistent. If my change is good with you, then you can set a positive review.



---

archive/issue_comments_283482.json:
```json
{
    "body": "<a id='comment:11'></a>Looks good.",
    "created_at": "2017-01-26T18:38:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-283482",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```

<a id='comment:11'></a>Looks good.



---

archive/issue_comments_283483.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-01-26T18:38:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-283483",
    "user": "https://trac.sagemath.org/admin/accounts/users/alubovsky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_283484.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-01-29T12:04:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19625#issuecomment-283484",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_053943.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-29T12:04:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19625",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19625#event-53943"
}
```
