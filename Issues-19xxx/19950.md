# Issue 19950: docbuild of single file, allow to include underscore method

archive/issues_019713.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThe hidden doc can be build using\n\n```\nsage -docbuild -u\n```\nbut this does not work for a single file. Let us allow that.\n\nlater aim: use that in a patchbot plugin.\n\nComponent: **doctest framework**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nBranch/Commit: **[`5352485`](https://github.com/sagemath/sagetrac-mirror/commit/535248595bfbe7f4fb284a84a85a9ce2490eb9eb)**\n\nReviewer: **Jori M\u00e4ntysalo**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/19950_\n\n",
    "closed_at": "2016-01-30T00:11:01Z",
    "created_at": "2016-01-23T18:45:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20doctest%20framework",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "docbuild of single file, allow to include underscore method",
    "type": "issue",
    "updated_at": "2016-01-30T00:11:01Z",
    "url": "https://github.com/sagemath/sage/issues/19950",
    "user": "https://github.com/fchapoton"
}
```
<div id="comment:0"></div>

The hidden doc can be build using

```
sage -docbuild -u
```
but this does not work for a single file. Let us allow that.

later aim: use that in a patchbot plugin.

Component: **doctest framework**

Author: **Frédéric Chapoton**

Branch/Commit: **[`5352485`](https://github.com/sagemath/sagetrac-mirror/commit/535248595bfbe7f4fb284a84a85a9ce2490eb9eb)**

Reviewer: **Jori Mäntysalo**

_Issue created by migration from https://trac.sagemath.org/ticket/19950_





---

archive/issue_events_279477.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-01-23T18:45:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "milestone_number": null,
    "milestone_title": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19950#event-279477"
}
```



---

archive/issue_events_279478.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-01-23T18:45:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20doctest%20framework",
    "label_color": "0000b0",
    "label_name": "c: doctest framework",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19950#event-279478"
}
```



---

archive/issue_events_279479.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-01-23T18:45:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19950#event-279479"
}
```



---

archive/issue_events_279480.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-01-23T18:45:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19950#event-279480"
}
```



---

archive/issue_events_279481.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-01-23T18:46:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19950#event-279481"
}
```



---

archive/issue_comments_285615.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5e3668be99a9e5b6f0b563de3ec628c0b0af5fd\"><code>b5e3668</code></a></td><td><code>allow the docbuild of a single file to build also underscore methods</code></td></tr></table>\n",
    "created_at": "2016-01-23T18:46:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19950#issuecomment-285615",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5e3668be99a9e5b6f0b563de3ec628c0b0af5fd"><code>b5e3668</code></a></td><td><code>allow the docbuild of a single file to build also underscore methods</code></td></tr></table>




---

archive/issue_comments_285616.json:
```json
{
    "body": "Branch: **[public/19950](https://github.com/sagemath/sagetrac-mirror/tree/public/19950)**",
    "created_at": "2016-01-23T18:46:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19950#issuecomment-285616",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[public/19950](https://github.com/sagemath/sagetrac-mirror/tree/public/19950)**



---

archive/issue_comments_285617.json:
```json
{
    "body": "Commit: **[`b5e3668`](https://github.com/sagemath/sagetrac-mirror/commit/b5e3668be99a9e5b6f0b563de3ec628c0b0af5fd)**",
    "created_at": "2016-01-23T18:46:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19950#issuecomment-285617",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`b5e3668`](https://github.com/sagemath/sagetrac-mirror/commit/b5e3668be99a9e5b6f0b563de3ec628c0b0af5fd)**



---

archive/issue_comments_285618.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/535248595bfbe7f4fb284a84a85a9ce2490eb9eb\"><code>5352485</code></a></td><td><code>Merge branch 'public/19950' into 7.1.b0</code></td></tr></table>\n",
    "created_at": "2016-01-27T19:50:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19950#issuecomment-285618",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/535248595bfbe7f4fb284a84a85a9ce2490eb9eb"><code>5352485</code></a></td><td><code>Merge branch 'public/19950' into 7.1.b0</code></td></tr></table>




---

archive/issue_comments_285619.json:
```json
{
    "body": "Changed commit from **[`b5e3668`](https://github.com/sagemath/sagetrac-mirror/commit/b5e3668be99a9e5b6f0b563de3ec628c0b0af5fd)** to **[`5352485`](https://github.com/sagemath/sagetrac-mirror/commit/535248595bfbe7f4fb284a84a85a9ce2490eb9eb)**",
    "created_at": "2016-01-27T19:50:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19950#issuecomment-285619",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b5e3668`](https://github.com/sagemath/sagetrac-mirror/commit/b5e3668be99a9e5b6f0b563de3ec628c0b0af5fd)** to **[`5352485`](https://github.com/sagemath/sagetrac-mirror/commit/535248595bfbe7f4fb284a84a85a9ce2490eb9eb)**



---

archive/issue_comments_285620.json:
```json
{
    "body": "Reviewer: **Jori M\u00e4ntysalo**",
    "created_at": "2016-01-28T12:16:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19950#issuecomment-285620",
    "user": "https://github.com/jm58660"
}
```

Reviewer: **Jori Mäntysalo**



---

archive/issue_comments_285621.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nSimple enought for even me to review.",
    "created_at": "2016-01-28T12:16:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19950#issuecomment-285621",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:3" align="right">comment:3</div>

Simple enought for even me to review.



---

archive/issue_comments_285622.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nStupid question, but... \n\n```\n$ make doc-clean\n . . .\nSage build/upgrade complete!\n$ ./sage -docbuild -u file=src/sage/graphs/digraph.py  html\n[html     ] loading pickled environment... not yet created\n . . .\nBuild finished. The built documents can be found in /home/jm58660/.sage/docbuild/digraph/output/html\n$ find . -name '*digraph*html'\n$\n```\n\nWhere is the result?",
    "created_at": "2016-01-28T14:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19950#issuecomment-285622",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:4" align="right">comment:4</div>

Stupid question, but... 

```
$ make doc-clean
 . . .
Sage build/upgrade complete!
$ ./sage -docbuild -u file=src/sage/graphs/digraph.py  html
[html     ] loading pickled environment... not yet created
 . . .
Build finished. The built documents can be found in /home/jm58660/.sage/docbuild/digraph/output/html
$ find . -name '*digraph*html'
$
```

Where is the result?



---

archive/issue_comments_285623.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThe result is in the `.sage` directory. Just copy-paste `/home/jm58660/.sage/docbuild/digraph/output/html` in your browser.",
    "created_at": "2016-01-28T18:11:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19950#issuecomment-285623",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">comment:5</div>

The result is in the `.sage` directory. Just copy-paste `/home/jm58660/.sage/docbuild/digraph/output/html` in your browser.



---

archive/issue_comments_285624.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@fchapoton](#comment%3A5):\n> The result is in the `.sage` directory. Just copy-paste `/home/jm58660/.sage/docbuild/digraph/output/html` in your browser.\n\nDuh, why not in `sage`-directory? And sorry for dumb question, should have used `strace`. Or read the output...\n\nWhen I ran this for `posets.py` I got doc for `posets.is_poset(dig)`, not for `sage.combinat.posets.posets.is_poset(dig)`. Is this a planned feature?\n\nThis does not put functions to index generated by `{INDEX_OF_METHODS}`. I think that it is not needed, but I mention this in any case.\n\nSeems to work. I will read the code lines little later.",
    "created_at": "2016-01-28T18:54:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19950#issuecomment-285624",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@fchapoton](#comment%3A5):
> The result is in the `.sage` directory. Just copy-paste `/home/jm58660/.sage/docbuild/digraph/output/html` in your browser.

Duh, why not in `sage`-directory? And sorry for dumb question, should have used `strace`. Or read the output...

When I ran this for `posets.py` I got doc for `posets.is_poset(dig)`, not for `sage.combinat.posets.posets.is_poset(dig)`. Is this a planned feature?

This does not put functions to index generated by `{INDEX_OF_METHODS}`. I think that it is not needed, but I mention this in any case.

Seems to work. I will read the code lines little later.



---

archive/issue_comments_285625.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@jm58660](#comment%3A6):\n> Replying to [@fchapoton](#comment%3A5):\n> > The result is in the `.sage` directory. Just copy-paste `/home/jm58660/.sage/docbuild/digraph/output/html` in your browser.\n> \n> \n> Duh, why not in `sage`-directory? \n\nThere is no reason to assume that the user has write access to the Sage directory.\n\n> When I ran this for `posets.py` I got doc for `posets.is_poset(dig)`, not for `sage.combinat.posets.posets.is_poset(dig)`. Is this a planned feature?\n\nThe original point of the single file docbuilding functionality was to build documentation for a file not in the Sage library. If you're working on a file within Sage, say in `src/combinat`, then you should probably be doing something like `sage --docbuild reference/combinat html`",
    "created_at": "2016-01-28T19:07:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19950#issuecomment-285625",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@jm58660](#comment%3A6):
> Replying to [@fchapoton](#comment%3A5):
> > The result is in the `.sage` directory. Just copy-paste `/home/jm58660/.sage/docbuild/digraph/output/html` in your browser.
> 
> 
> Duh, why not in `sage`-directory? 

There is no reason to assume that the user has write access to the Sage directory.

> When I ran this for `posets.py` I got doc for `posets.is_poset(dig)`, not for `sage.combinat.posets.posets.is_poset(dig)`. Is this a planned feature?

The original point of the single file docbuilding functionality was to build documentation for a file not in the Sage library. If you're working on a file within Sage, say in `src/combinat`, then you should probably be doing something like `sage --docbuild reference/combinat html`



---

archive/issue_comments_285626.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@jhpalmieri](#comment%3A7):\n\n> The original point of the single file docbuilding functionality was to build documentation for a file not in the Sage library. If you're working on a file within Sage, say in `src/combinat`, then you should probably be doing something like `sage --docbuild reference/combinat html`\n\nHum, I would like to use that in the patchbot, to test the hidden doc only in the modified files. Do you think this is not a good idea ? or that it cannot work ?",
    "created_at": "2016-01-28T19:15:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19950#issuecomment-285626",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@jhpalmieri](#comment%3A7):

> The original point of the single file docbuilding functionality was to build documentation for a file not in the Sage library. If you're working on a file within Sage, say in `src/combinat`, then you should probably be doing something like `sage --docbuild reference/combinat html`

Hum, I would like to use that in the patchbot, to test the hidden doc only in the modified files. Do you think this is not a good idea ? or that it cannot work ?



---

archive/issue_comments_285627.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@fchapoton](#comment%3A8):\n> Replying to [@jhpalmieri](#comment%3A7):\n> \n> > The original point of the single file docbuilding functionality was to build documentation for a file not in the Sage library. If you're working on a file within Sage, say in `src/combinat`, then you should probably be doing something like `sage --docbuild reference/combinat html`\n> \n> \n> Hum, I would like to use that in the patchbot, to test the hidden doc only in the modified files. Do you think this is not a good idea ? or that it cannot work ?\n\nIt might work, at least if you're just relying on it to flag errors. The output may not look right if it's a Sage library file (saying `posets.is_poset` rather than `sage.combinat.posets.posets.is_poset`, for example, and I don't know if there are other problems), but the patchbot won't care about that. Have you tested it on many Sage library files?",
    "created_at": "2016-01-28T20:35:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19950#issuecomment-285627",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@fchapoton](#comment%3A8):
> Replying to [@jhpalmieri](#comment%3A7):
> 
> > The original point of the single file docbuilding functionality was to build documentation for a file not in the Sage library. If you're working on a file within Sage, say in `src/combinat`, then you should probably be doing something like `sage --docbuild reference/combinat html`
> 
> 
> Hum, I would like to use that in the patchbot, to test the hidden doc only in the modified files. Do you think this is not a good idea ? or that it cannot work ?

It might work, at least if you're just relying on it to flag errors. The output may not look right if it's a Sage library file (saying `posets.is_poset` rather than `sage.combinat.posets.posets.is_poset`, for example, and I don't know if there are other problems), but the patchbot won't care about that. Have you tested it on many Sage library files?



---

archive/issue_comments_285628.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nNo, I have only tested that on a few Sage library files so far. Before trying\nto insert that in the patchbot, this must of course be more thoroughly tested.",
    "created_at": "2016-01-28T20:49:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19950#issuecomment-285628",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">comment:10</div>

No, I have only tested that on a few Sage library files so far. Before trying
to insert that in the patchbot, this must of course be more thoroughly tested.



---

archive/issue_comments_285629.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAlso pdf documentation builds.",
    "created_at": "2016-01-29T05:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19950#issuecomment-285629",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:11" align="right">comment:11</div>

Also pdf documentation builds.



---

archive/issue_events_279482.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-01-29T05:32:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19950#event-279482"
}
```



---

archive/issue_events_279483.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-01-29T05:32:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19950#event-279483"
}
```



---

archive/issue_events_279484.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-30T00:11:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19950#event-279484"
}
```



---

archive/issue_events_279485.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e94947b1e6f999cc9e779a4de21722962ffbebda",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-01-30T00:11:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/19950#event-279485"
}
```



---

archive/issue_comments_285630.json:
```json
{
    "body": "Changed branch from **[public/19950](https://github.com/sagemath/sagetrac-mirror/tree/public/19950)** to **[`5352485`](https://github.com/sagemath/sagetrac-mirror/commit/535248595bfbe7f4fb284a84a85a9ce2490eb9eb)**",
    "created_at": "2016-01-30T00:11:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/19950",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/19950#issuecomment-285630",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/19950](https://github.com/sagemath/sagetrac-mirror/tree/public/19950)** to **[`5352485`](https://github.com/sagemath/sagetrac-mirror/commit/535248595bfbe7f4fb284a84a85a9ce2490eb9eb)**
