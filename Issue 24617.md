# Issue 24617: Run doctests in CI

Issue created by migration from Trac.

Original creator: saraedum

Original creation time: 2018-02-27 10:36:42

CC:  embray nthiery roed

Let's see how run the non-long tests take on the CIs.


---

Comment by saraedum created at 2018-03-17 19:54:44

There were some issues with building the documentation (namely building the German "A Tour of Sage".) Apparently some package is missing, see https://github.com/cschwan/sage-on-gentoo/issues/338#issuecomment-370908709.


---

Comment by saraedum created at 2018-04-29 00:55:21

Last 10 new commits:


---

Comment by embray created at 2018-04-29 09:05:48

One thing Sage desperately needs is a "short" test suite for quick smoke tests--maybe not achieving quite as high coverage but still a lot.

Actually what we really need is better (any) coverage analysis.  That's something that's been high on my TODO list (among other things high on that list), and is probably a bit challenging to get working right.


---

Comment by git created at 2018-04-30 10:59:45

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2018-05-01 16:19:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-05-01 17:01:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-05-01 20:40:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-05-01 20:52:30

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2018-05-20 22:19:10

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2018-05-20 22:26:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-05-22 20:37:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-05-22 20:38:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-05-31 23:19:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-06-01 00:39:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-06-01 00:42:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-06-09 10:53:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-06-13 21:09:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-06-21 10:09:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-06 11:31:19

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by @timokau created at 2018-07-10 12:02:39

Slightly related (prompted by #25809): Could we make the sage installation read-only before running the doctests on CI?


---

Comment by git created at 2018-07-11 05:11:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-11 08:53:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2018-07-19 11:26:15

Changing keywords from "" to "docker, CI".


---

Comment by git created at 2018-07-20 07:36:03

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by saraedum created at 2018-07-20 07:36:34

Last 10 new commits:


---

Comment by git created at 2018-07-28 12:33:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-28 12:34:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-29 10:03:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-31 12:10:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-31 12:12:00

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2018-08-07 16:38:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-09 00:22:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-16 22:34:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-21 01:46:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-21 17:55:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by embray created at 2018-08-22 09:07:29

Something you can remind me about `--short`: Does it randomize the order the order or otherwise somehow cycle the order in which the tests were run?

I was also thinking maybe it would help, for advisory test runs, to have a few other heuristics, such as definitely run the tests in any files that were modified by a commit.  It's also reasonably easy most of the time to build a graph of other modules that depend on the modified modules, and maybe walk that graph breadth-first.

Just some thoughts as to how to minimize the number of tests run, while still catching the majority (though certainly not all) failures.


---

Comment by embray created at 2018-08-22 09:08:07

I also forgot about `--new`.  That's good too.


---

Comment by git created at 2018-08-22 22:48:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-22 23:43:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-23 00:52:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-23 01:47:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-23 02:08:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-23 03:01:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-23 03:46:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2018-08-23 04:25:37

Replying to [comment:52 embray]:
> Something you can remind me about `--short`: Does it randomize the order the order or otherwise somehow cycle the order in which the tests were run?
No, except for variations in timing which make the system run more or less doctest, this is deterministic.

> I was also thinking maybe it would help, for advisory test runs, to have a few other heuristics, such as definitely run the tests in any files that were modified by a commit.  It's also reasonably easy most of the time to build a graph of other modules that depend on the modified modules, and maybe walk that graph breadth-first.
Yes, I already run --new. A dependency graph would be awesome of course and much more relevant.


---

Comment by saraedum created at 2018-08-23 04:26:32

Oh, this was really complicated to make work everywhere. I should definitely squash the commit history here. But let's wait for the dependencies to be merged first.


---

Comment by git created at 2018-08-23 14:22:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-31 09:12:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-09-02 12:24:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-09-02 12:54:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-09-02 13:09:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-10-24 21:14:24

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2018-11-13 16:29:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-11-25 16:06:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2018-11-25 16:08:11

New commits:


---

Comment by git created at 2019-09-13 08:37:29

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by git created at 2019-09-13 08:57:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2020-01-21 16:04:56

Changing keywords from "docker, CI" to "docker, ContinuousIntegration".


---

Comment by mkoeppe created at 2020-09-11 22:48:17

Rebased, just to see what changes are on this old branch
----
New commits:
