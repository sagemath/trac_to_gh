# Issue 28904: Meta-ticket: Upgrades and other changes that require dropping py2 support or separate package versions for py2/py3

archive/issues_028904.json:
```json
{
    "body": "CC:  @fchapoton @embray @jdemeyer @slel @antonio-rojas @kiwifb @timokau @jhpalmieri @tscrim @isuruf @nbruin @orlitzky @vbraun @dimpase @videlec @kliem\n\nFrom https://groups.google.com/forum/#!topic/sage-devel/vYlbnAwKATM \"drop python2 compatibility in 9.1' (thread Jan 5-22, 2020).\n\nTickets:\n\n- #28197- upgrade to ipython 7 / prompt-toolkit 2\n\nGoals without tickets:\n\n- compatibility with python 3.8... needs details\n  * \"at this point the major issues are python 3.8 and ipython 7, and I don't see how one could support several versions of them without forking hundreds of doctests. Both updates require multi-thousand-lines patches, due to changes in dict sorting and hashes.\"\n- packages upgrades:\n  * matplotlib-3\n  * sphinx-2\n  * numpy-1.17\n  * scipy-1.3+\n  * rpy2: sage has rpy2 2.8.2. rpy2 latest is 3.2.4 but 3.x series is python 3 only and sage requires breaking changes to support rpy2 3.x. See #28494#comment:6\nWhile python2 support for rpy2 is required, sage codebase can't be updated to 3.x (unless someone adds code to detect rpy2 version and support both 2.8.2 and 3.2.4). See also #28988.\n \n- deprecation warning when people use './configure --with-python=2'.\n- document milestone 9.2 or 10 as py3-only\n\nSeparate package versions:\n\n- #28190: Allow different versions of python modules depending on the python version used\n\nIssue created by migration from https://trac.sagemath.org/ticket/29141\n\n",
    "created_at": "2020-02-02T14:14:20Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Meta-ticket: Upgrades and other changes that require dropping py2 support or separate package versions for py2/py3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28904",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @fchapoton @embray @jdemeyer @slel @antonio-rojas @kiwifb @timokau @jhpalmieri @tscrim @isuruf @nbruin @orlitzky @vbraun @dimpase @videlec @kliem

From https://groups.google.com/forum/#!topic/sage-devel/vYlbnAwKATM "drop python2 compatibility in 9.1' (thread Jan 5-22, 2020).

Tickets:

- #28197- upgrade to ipython 7 / prompt-toolkit 2

Goals without tickets:

- compatibility with python 3.8... needs details
  * "at this point the major issues are python 3.8 and ipython 7, and I don't see how one could support several versions of them without forking hundreds of doctests. Both updates require multi-thousand-lines patches, due to changes in dict sorting and hashes."
- packages upgrades:
  * matplotlib-3
  * sphinx-2
  * numpy-1.17
  * scipy-1.3+
  * rpy2: sage has rpy2 2.8.2. rpy2 latest is 3.2.4 but 3.x series is python 3 only and sage requires breaking changes to support rpy2 3.x. See #28494#comment:6
While python2 support for rpy2 is required, sage codebase can't be updated to 3.x (unless someone adds code to detect rpy2 version and support both 2.8.2 and 3.2.4). See also #28988.
 
- deprecation warning when people use './configure --with-python=2'.
- document milestone 9.2 or 10 as py3-only

Separate package versions:

- #28190: Allow different versions of python modules depending on the python version used

Issue created by migration from https://trac.sagemath.org/ticket/29141





---

archive/issue_comments_408742.json:
```json
{
    "body": "python 3.8 update is tracked in #27754, there is a list of issues that need fixing. rpy3 support is merged already in 9.1.beta2 (#28988), as well as networkx 2.4, which is also py3-only (#28450). IMO #28190 is no longer worth the effort at this point, provided that python2 support is to be dropped at 9.2 in the worst case.",
    "created_at": "2020-02-02T14:36:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28904#issuecomment-408742",
    "user": "https://github.com/antonio-rojas"
}
```

python 3.8 update is tracked in #27754, there is a list of issues that need fixing. rpy3 support is merged already in 9.1.beta2 (#28988), as well as networkx 2.4, which is also py3-only (#28450). IMO #28190 is no longer worth the effort at this point, provided that python2 support is to be dropped at 9.2 in the worst case.



---

archive/issue_comments_408743.json:
```json
{
    "body": "Please feel free to update the ticket description.",
    "created_at": "2020-02-02T14:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28904#issuecomment-408743",
    "user": "https://github.com/mkoeppe"
}
```

Please feel free to update the ticket description.



---

archive/issue_comments_408744.json:
```json
{
    "body": "I have just updated https://wiki.sagemath.org/Python3-Switch to say that the upcoming 9.1 will still support Python 2",
    "created_at": "2020-04-08T20:45:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28904#issuecomment-408744",
    "user": "https://github.com/mkoeppe"
}
```

I have just updated https://wiki.sagemath.org/Python3-Switch to say that the upcoming 9.1 will still support Python 2



---

archive/issue_comments_408745.json:
```json
{
    "body": "I am working on #29042 and I noticed that neither #28000 or #29669 remove `# py2` and  `# py3` for doctesting. Is there a ticket for that which should then be in the summary, or is it something that is planned to be removed on the longer term?",
    "created_at": "2020-05-23T09:56:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28904#issuecomment-408745",
    "user": "https://github.com/kiwifb"
}
```

I am working on #29042 and I noticed that neither #28000 or #29669 remove `# py2` and  `# py3` for doctesting. Is there a ticket for that which should then be in the summary, or is it something that is planned to be removed on the longer term?



---

archive/issue_comments_408746.json:
```json
{
    "body": "`@`fbissey: I don't know of any ticket for removing `py2` and `py3` tags.",
    "created_at": "2020-05-25T03:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28904#issuecomment-408746",
    "user": "https://github.com/jhpalmieri"
}
```

`@`fbissey: I don't know of any ticket for removing `py2` and `py3` tags.



---

archive/issue_comments_408747.json:
```json
{
    "body": "Another thing that I spotted scanning stuff in #29633. We have a lot python feature backport packages in our tree. We may want to get rid of them as we get rid of python 2.7 and anything older than python 3.7 in fact. Look at `enum34` if you don't get what I mean.",
    "created_at": "2020-05-26T09:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28904#issuecomment-408747",
    "user": "https://github.com/kiwifb"
}
```

Another thing that I spotted scanning stuff in #29633. We have a lot python feature backport packages in our tree. We may want to get rid of them as we get rid of python 2.7 and anything older than python 3.7 in fact. Look at `enum34` if you don't get what I mean.



---

archive/issue_comments_408748.json:
```json
{
    "body": "> Another thing that I spotted scanning stuff in #29633.\n> We have a lot of Python feature backport packages in our tree.\n> We may want to get rid of them as we get rid of Python 2.7\n> and anything older than Python 3.7 in fact. Look at `enum34`\n> if you don't get what I mean.\n\nConsider keeping support Python 3.6, whose official support is till 2021-12-23. See #29033.\n\nPython 3.5 support ends in 2020-09, so fine to drop it. See life cycle of Python versions:\n\n- currently or recently supported versions: https://www.python.org/downloads/\n- older versions: https://devguide.python.org/devcycle/#end-of-life-branches",
    "created_at": "2020-05-26T12:43:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28904#issuecomment-408748",
    "user": "https://github.com/slel"
}
```

> Another thing that I spotted scanning stuff in #29633.
> We have a lot of Python feature backport packages in our tree.
> We may want to get rid of them as we get rid of Python 2.7
> and anything older than Python 3.7 in fact. Look at `enum34`
> if you don't get what I mean.

Consider keeping support Python 3.6, whose official support is till 2021-12-23. See #29033.

Python 3.5 support ends in 2020-09, so fine to drop it. See life cycle of Python versions:

- currently or recently supported versions: https://www.python.org/downloads/
- older versions: https://devguide.python.org/devcycle/#end-of-life-branches



---

archive/issue_comments_408749.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd109\".",
    "created_at": "2020-05-28T06:05:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28904#issuecomment-408749",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "sd109".



---

archive/issue_comments_408750.json:
```json
{
    "body": "Replying to [comment:16 fbissey]:\n> Another thing that I spotted scanning stuff in #29633. We have a lot python feature backport packages in our tree. We may want to get rid of them as we get rid of python 2.7 and anything older than python 3.7 in fact. Look at `enum34` if you don't get what I mean. \n\nI'm working on this. I'll open up a ticket and post a link here some time soon.",
    "created_at": "2020-05-28T17:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28904#issuecomment-408750",
    "user": "https://github.com/jhpalmieri"
}
```

Replying to [comment:16 fbissey]:
> Another thing that I spotted scanning stuff in #29633. We have a lot python feature backport packages in our tree. We may want to get rid of them as we get rid of python 2.7 and anything older than python 3.7 in fact. Look at `enum34` if you don't get what I mean. 

I'm working on this. I'll open up a ticket and post a link here some time soon.



---

archive/issue_comments_408751.json:
```json
{
    "body": "Replying to [comment:19 jhpalmieri]:\n> I'm working on this. I'll open up a ticket and post a link here some time soon.\n\nSee #29754.",
    "created_at": "2020-05-28T20:33:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28904#issuecomment-408751",
    "user": "https://github.com/jhpalmieri"
}
```

Replying to [comment:19 jhpalmieri]:
> I'm working on this. I'll open up a ticket and post a link here some time soon.

See #29754.



---

archive/issue_comments_408752.json:
```json
{
    "body": "We can close this ticket as completed.",
    "created_at": "2020-08-18T15:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28904#issuecomment-408752",
    "user": "https://github.com/mkoeppe"
}
```

We can close this ticket as completed.



---

archive/issue_comments_408753.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-18T15:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28904#issuecomment-408753",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_408754.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-21T17:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28904#issuecomment-408754",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_026731.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-08-22T08:52:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28904",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28904#event-26731"
}
```



---

archive/issue_comments_408755.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2020-08-22T08:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28904",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28904#issuecomment-408755",
    "user": "https://github.com/fchapoton"
}
```

Resolution: worksforme
