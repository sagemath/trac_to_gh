# Issue 19405: Upgrade lrcalc to version 1.2

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2015-11-29 13:11:04

CC:  tscrim

It seems that upstream has fixed the previously reported bugs, so the old patches can be removed.

We add one patch to fix include paths: `lrcalc` should use `#include "..."` instead of `#include <...>` to include private headers.


---

Comment by git created at 2015-11-29 13:23:57

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2015-11-29 14:35:46

Changing status from new to needs_review.


---

Comment by tscrim created at 2015-11-29 16:21:39

With the current branch, during the build process I get:

```
In file included from /home/travis/sage/src/build/cythonized/sage/libs/lrcalc/lrcalc.c:286:0:
/home/travis/sage/local/include/lrcalc/schublib.h:4:21: fatal error: hashtab.h: No such file or directory
 #include <hashtab.h>
                     ^
compilation terminated.
```

So I updated the patch in the new branch. If my change is good, then you can set a positive review.

Also, could you resend the updated patch Jeroen?
----
New commits:


---

Comment by jdemeyer created at 2015-11-29 17:16:38

I understand why I didn't get this error: on my system, there is a `/usr/include/hashtab.h` (from `glibc`, nothing to do with `lrcalc`). So that file must have been included.

Your patch does the right thing.


---

Comment by jdemeyer created at 2015-11-29 17:16:38

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2015-11-29 17:28:56

Replying to [comment:7 tscrim]:
> Also, could you resend the updated patch Jeroen?

Done.


---

Comment by tscrim created at 2015-11-29 19:11:04

Replying to [comment:9 jdemeyer]:
> Replying to [comment:7 tscrim]:
> > Also, could you resend the updated patch Jeroen?
> 
> Done.

Thanks.


---

Comment by vbraun created at 2015-11-30 11:34:19


```
patching file src/symfcn.h
can't find file to patch at input line 19
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
--------------------------
File to patch: 
Skip this patch? [y] 
Skipping patch.
1 out of 1 hunk ignored
Error applying '../patches/includes.patch'
```



---

Comment by jdemeyer created at 2015-11-30 12:00:47

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2015-11-30 12:05:37

I replaced the patch by the commit taken from upstream.
----
New commits:


---

Comment by jdemeyer created at 2015-11-30 12:05:37

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2015-11-30 16:10:13

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2015-11-30 16:10:13

I had forgot to update the path in my revision, and it probably was working from my direct changes in `local/include`. Anyways, upstream patch works for me.


---

Comment by vbraun created at 2015-12-01 17:57:31

Resolution: fixed
