# Issue 21558: fpylll: Add cython to dependencies

archive/issues_021558.json:
```json
{
    "body": "CC:  @jdemeyer @malb @embray @dimpase\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/21795\n\n",
    "created_at": "2016-11-01T22:01:14Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "fpylll: Add cython to dependencies",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21558",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @jdemeyer @malb @embray @dimpase



Issue created by migration from https://trac.sagemath.org/ticket/21795





---

archive/issue_comments_298940.json:
```json
{
    "body": "Also, should it perhaps be installed using pip instead of directly using `setup.py`?\n----\nNew commits:",
    "created_at": "2016-11-02T02:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21558",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21558#issuecomment-298940",
    "user": "https://github.com/mkoeppe"
}
```

Also, should it perhaps be installed using pip instead of directly using `setup.py`?
----
New commits:



---

archive/issue_comments_298941.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-11-02T02:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21558",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21558#issuecomment-298941",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_298942.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2016-11-02T07:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21558",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21558#issuecomment-298942",
    "user": "https://github.com/jdemeyer"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_298943.json:
```json
{
    "body": "You are still missing `cysignals` as dependency:\n\n```\n[fpylll-0.2.3dev] Found local metadata for fpylll-0.2.3dev\n[fpylll-0.2.3dev] Using cached file /usr/local/src/sage-config/upstream/fpylll-0.2.3dev.tar.gz\n[fpylll-0.2.3dev] fpylll-0.2.3dev\n[fpylll-0.2.3dev] ====================================================\n[fpylll-0.2.3dev] Setting up build directory for fpylll-0.2.3dev\n[fpylll-0.2.3dev] Finished extraction\n[fpylll-0.2.3dev] ****************************************************\n[fpylll-0.2.3dev] Host system:\n[fpylll-0.2.3dev] Linux tamiyo 3.17.7-gentoo #1 SMP PREEMPT Wed Dec 31 20:06:39 CET 2014 x86_64 Intel(R) Core(TM) i7-2640M CPU @ 2.80GHz GenuineIntel GNU/Linux\n[fpylll-0.2.3dev] ****************************************************\n[fpylll-0.2.3dev] C compiler: gcc\n[fpylll-0.2.3dev] C compiler version:\n[fpylll-0.2.3dev] Using built-in specs.\n[fpylll-0.2.3dev] COLLECT_GCC=/usr/x86_64-pc-linux-gnu/gcc-bin/4.9.3/gcc\n[fpylll-0.2.3dev] COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-pc-linux-gnu/4.9.3/lto-wrapper\n[fpylll-0.2.3dev] Target: x86_64-pc-linux-gnu\n[fpylll-0.2.3dev] Configured with: /var/tmp/portage/sys-devel/gcc-4.9.3/work/gcc-4.9.3/configure --host=x86_64-pc-linux-gnu --build=x86_64-pc-linux-gnu --prefix=/usr --bindir=/usr/x86_64-pc-linux-gnu/gcc-bin/4.9.3 --includedir=/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.3/include --datadir=/usr/share/gcc-data/x86_64-pc-linux-gnu/4.9.3 --mandir=/usr/share/gcc-data/x86_64-pc-linux-gnu/4.9.3/man --infodir=/usr/share/gcc-data/x86_64-pc-linux-gnu/4.9.3/info --with-gxx-include-dir=/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.3/include/g++-v4 --with-python-dir=/share/gcc-data/x86_64-pc-linux-gnu/4.9.3/python --enable-languages=c,c++,fortran --enable-obsolete --enable-secureplt --disable-werror --with-system-zlib --enable-nls --without-included-gettext --enable-checking=release --with-bugurl=https://bugs.gentoo.org/ --with-pkgversion='Gentoo 4.9.3 p1.5, pie-0.6.4' --enable-libstdcxx-time --enable-shared --enable-threads=posix --enable-__cxa_atexit --enable-clocale=gnu --enable-multilib --with-multilib-list=m32,m64 --disable-altivec --disable-fixed-point --enable-targets=all --disable-libgcj --enable-libgomp --disable-libmudflap --disable-libssp --disable-libcilkrts --enable-lto --without-cloog --enable-libsanitizer\n[fpylll-0.2.3dev] Thread model: posix\n[fpylll-0.2.3dev] gcc version 4.9.3 (Gentoo 4.9.3 p1.5, pie-0.6.4) \n[fpylll-0.2.3dev] ****************************************************\n[fpylll-0.2.3dev] Warning: Extension name 'gmp.pylong' does not match fully qualified name 'fpylll.gmp.pylong' of 'src/fpylll/gmp/pylong.pyx'\n[fpylll-0.2.3dev] Warning: Extension name 'fplll.integer_matrix' does not match fully qualified name 'fpylll.fplll.integer_matrix' of 'src/fpylll/fplll/integer_matrix.pyx'\n[fpylll-0.2.3dev] Traceback (most recent call last):\n[fpylll-0.2.3dev]   File \"setup.py\", line 127, in <module>\n[fpylll-0.2.3dev]     compiler_directives={'embedsignature': True}),\n[fpylll-0.2.3dev]   File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py\", line 809, in cythonize\n[fpylll-0.2.3dev]     aliases=aliases)\n[fpylll-0.2.3dev]   File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py\", line 714, in create_extension_list\n[fpylll-0.2.3dev]     kwds = deps.distutils_info(file, aliases, base).values\n[fpylll-0.2.3dev]   File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py\", line 590, in distutils_info\n[fpylll-0.2.3dev]     return (self.transitive_merge(filename, self.distutils_info0, DistutilsInfo.merge)\n[fpylll-0.2.3dev]   File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py\", line 600, in transitive_merge\n[fpylll-0.2.3dev]     node, extract, merge, seen, {}, self.cimported_files)[0]\n[fpylll-0.2.3dev]   File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py\", line 605, in transitive_merge_helper\n[fpylll-0.2.3dev]     deps = extract(node)\n[fpylll-0.2.3dev]   File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py\", line 581, in distutils_info0\n[fpylll-0.2.3dev]     externs = self.cimports_and_externs(filename)[1]\n[fpylll-0.2.3dev]   File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Utils.py\", line 44, in wrapper\n[fpylll-0.2.3dev]     res = cache[args] = f(self, *args)\n[fpylll-0.2.3dev]   File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py\", line 491, in cimports_and_externs\n[fpylll-0.2.3dev]     for include in self.included_files(filename):\n[fpylll-0.2.3dev]   File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Utils.py\", line 44, in wrapper\n[fpylll-0.2.3dev]     res = cache[args] = f(self, *args)\n[fpylll-0.2.3dev]   File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py\", line 474, in included_files\n[fpylll-0.2.3dev]     include_path = self.context.find_include_file(include, None)\n[fpylll-0.2.3dev]   File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Compiler/Main.py\", line 274, in find_include_file\n[fpylll-0.2.3dev]     error(pos, \"'%s' not found\" % filename)\n[fpylll-0.2.3dev]   File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Compiler/Errors.py\", line 177, in error\n[fpylll-0.2.3dev]     raise InternalError(message)\n[fpylll-0.2.3dev] Cython.Compiler.Errors.InternalError: Internal compiler error: 'cysignals/signals.pxi' not found\n[fpylll-0.2.3dev] \n[fpylll-0.2.3dev] real  0m0.363s\n[fpylll-0.2.3dev] user  0m0.344s\n[fpylll-0.2.3dev] sys   0m0.304s\n[fpylll-0.2.3dev] ************************************************************************\n[fpylll-0.2.3dev] Error installing package fpylll-0.2.3dev\n[fpylll-0.2.3dev] ************************************************************************\n[fpylll-0.2.3dev] Please email sage-devel (http://groups.google.com/group/sage-devel)\n[fpylll-0.2.3dev] explaining the problem and including the relevant part of the log file\n[fpylll-0.2.3dev]   /usr/local/src/sage-config/logs/pkgs/fpylll-0.2.3dev.log\n[fpylll-0.2.3dev] Describe your computer, operating system, etc.\n[fpylll-0.2.3dev] If you want to try to fix the problem yourself, *don't* just cd to\n[fpylll-0.2.3dev] /usr/local/src/sage-config/local/var/tmp/sage/build/fpylll-0.2.3dev and type 'make' or whatever is appropriate.\n[fpylll-0.2.3dev] Instead, the following commands setup all environment variables\n[fpylll-0.2.3dev] correctly and load a subshell for you to debug the error:\n[fpylll-0.2.3dev]   (cd '/usr/local/src/sage-config/local/var/tmp/sage/build/fpylll-0.2.3dev' && '/usr/local/src/sage-config/sage' --sh)\n[fpylll-0.2.3dev] When you are done debugging, you can type \"exit\" to leave the subshell.\n[fpylll-0.2.3dev] ************************************************************************\n```\n",
    "created_at": "2016-11-02T07:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21558",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21558#issuecomment-298943",
    "user": "https://github.com/jdemeyer"
}
```

You are still missing `cysignals` as dependency:

```
[fpylll-0.2.3dev] Found local metadata for fpylll-0.2.3dev
[fpylll-0.2.3dev] Using cached file /usr/local/src/sage-config/upstream/fpylll-0.2.3dev.tar.gz
[fpylll-0.2.3dev] fpylll-0.2.3dev
[fpylll-0.2.3dev] ====================================================
[fpylll-0.2.3dev] Setting up build directory for fpylll-0.2.3dev
[fpylll-0.2.3dev] Finished extraction
[fpylll-0.2.3dev] ****************************************************
[fpylll-0.2.3dev] Host system:
[fpylll-0.2.3dev] Linux tamiyo 3.17.7-gentoo #1 SMP PREEMPT Wed Dec 31 20:06:39 CET 2014 x86_64 Intel(R) Core(TM) i7-2640M CPU @ 2.80GHz GenuineIntel GNU/Linux
[fpylll-0.2.3dev] ****************************************************
[fpylll-0.2.3dev] C compiler: gcc
[fpylll-0.2.3dev] C compiler version:
[fpylll-0.2.3dev] Using built-in specs.
[fpylll-0.2.3dev] COLLECT_GCC=/usr/x86_64-pc-linux-gnu/gcc-bin/4.9.3/gcc
[fpylll-0.2.3dev] COLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-pc-linux-gnu/4.9.3/lto-wrapper
[fpylll-0.2.3dev] Target: x86_64-pc-linux-gnu
[fpylll-0.2.3dev] Configured with: /var/tmp/portage/sys-devel/gcc-4.9.3/work/gcc-4.9.3/configure --host=x86_64-pc-linux-gnu --build=x86_64-pc-linux-gnu --prefix=/usr --bindir=/usr/x86_64-pc-linux-gnu/gcc-bin/4.9.3 --includedir=/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.3/include --datadir=/usr/share/gcc-data/x86_64-pc-linux-gnu/4.9.3 --mandir=/usr/share/gcc-data/x86_64-pc-linux-gnu/4.9.3/man --infodir=/usr/share/gcc-data/x86_64-pc-linux-gnu/4.9.3/info --with-gxx-include-dir=/usr/lib/gcc/x86_64-pc-linux-gnu/4.9.3/include/g++-v4 --with-python-dir=/share/gcc-data/x86_64-pc-linux-gnu/4.9.3/python --enable-languages=c,c++,fortran --enable-obsolete --enable-secureplt --disable-werror --with-system-zlib --enable-nls --without-included-gettext --enable-checking=release --with-bugurl=https://bugs.gentoo.org/ --with-pkgversion='Gentoo 4.9.3 p1.5, pie-0.6.4' --enable-libstdcxx-time --enable-shared --enable-threads=posix --enable-__cxa_atexit --enable-clocale=gnu --enable-multilib --with-multilib-list=m32,m64 --disable-altivec --disable-fixed-point --enable-targets=all --disable-libgcj --enable-libgomp --disable-libmudflap --disable-libssp --disable-libcilkrts --enable-lto --without-cloog --enable-libsanitizer
[fpylll-0.2.3dev] Thread model: posix
[fpylll-0.2.3dev] gcc version 4.9.3 (Gentoo 4.9.3 p1.5, pie-0.6.4) 
[fpylll-0.2.3dev] ****************************************************
[fpylll-0.2.3dev] Warning: Extension name 'gmp.pylong' does not match fully qualified name 'fpylll.gmp.pylong' of 'src/fpylll/gmp/pylong.pyx'
[fpylll-0.2.3dev] Warning: Extension name 'fplll.integer_matrix' does not match fully qualified name 'fpylll.fplll.integer_matrix' of 'src/fpylll/fplll/integer_matrix.pyx'
[fpylll-0.2.3dev] Traceback (most recent call last):
[fpylll-0.2.3dev]   File "setup.py", line 127, in <module>
[fpylll-0.2.3dev]     compiler_directives={'embedsignature': True}),
[fpylll-0.2.3dev]   File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py", line 809, in cythonize
[fpylll-0.2.3dev]     aliases=aliases)
[fpylll-0.2.3dev]   File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py", line 714, in create_extension_list
[fpylll-0.2.3dev]     kwds = deps.distutils_info(file, aliases, base).values
[fpylll-0.2.3dev]   File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py", line 590, in distutils_info
[fpylll-0.2.3dev]     return (self.transitive_merge(filename, self.distutils_info0, DistutilsInfo.merge)
[fpylll-0.2.3dev]   File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py", line 600, in transitive_merge
[fpylll-0.2.3dev]     node, extract, merge, seen, {}, self.cimported_files)[0]
[fpylll-0.2.3dev]   File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py", line 605, in transitive_merge_helper
[fpylll-0.2.3dev]     deps = extract(node)
[fpylll-0.2.3dev]   File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py", line 581, in distutils_info0
[fpylll-0.2.3dev]     externs = self.cimports_and_externs(filename)[1]
[fpylll-0.2.3dev]   File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Utils.py", line 44, in wrapper
[fpylll-0.2.3dev]     res = cache[args] = f(self, *args)
[fpylll-0.2.3dev]   File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py", line 491, in cimports_and_externs
[fpylll-0.2.3dev]     for include in self.included_files(filename):
[fpylll-0.2.3dev]   File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Utils.py", line 44, in wrapper
[fpylll-0.2.3dev]     res = cache[args] = f(self, *args)
[fpylll-0.2.3dev]   File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Build/Dependencies.py", line 474, in included_files
[fpylll-0.2.3dev]     include_path = self.context.find_include_file(include, None)
[fpylll-0.2.3dev]   File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Compiler/Main.py", line 274, in find_include_file
[fpylll-0.2.3dev]     error(pos, "'%s' not found" % filename)
[fpylll-0.2.3dev]   File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/Cython/Compiler/Errors.py", line 177, in error
[fpylll-0.2.3dev]     raise InternalError(message)
[fpylll-0.2.3dev] Cython.Compiler.Errors.InternalError: Internal compiler error: 'cysignals/signals.pxi' not found
[fpylll-0.2.3dev] 
[fpylll-0.2.3dev] real  0m0.363s
[fpylll-0.2.3dev] user  0m0.344s
[fpylll-0.2.3dev] sys   0m0.304s
[fpylll-0.2.3dev] ************************************************************************
[fpylll-0.2.3dev] Error installing package fpylll-0.2.3dev
[fpylll-0.2.3dev] ************************************************************************
[fpylll-0.2.3dev] Please email sage-devel (http://groups.google.com/group/sage-devel)
[fpylll-0.2.3dev] explaining the problem and including the relevant part of the log file
[fpylll-0.2.3dev]   /usr/local/src/sage-config/logs/pkgs/fpylll-0.2.3dev.log
[fpylll-0.2.3dev] Describe your computer, operating system, etc.
[fpylll-0.2.3dev] If you want to try to fix the problem yourself, *don't* just cd to
[fpylll-0.2.3dev] /usr/local/src/sage-config/local/var/tmp/sage/build/fpylll-0.2.3dev and type 'make' or whatever is appropriate.
[fpylll-0.2.3dev] Instead, the following commands setup all environment variables
[fpylll-0.2.3dev] correctly and load a subshell for you to debug the error:
[fpylll-0.2.3dev]   (cd '/usr/local/src/sage-config/local/var/tmp/sage/build/fpylll-0.2.3dev' && '/usr/local/src/sage-config/sage' --sh)
[fpylll-0.2.3dev] When you are done debugging, you can type "exit" to leave the subshell.
[fpylll-0.2.3dev] ************************************************************************
```




---

archive/issue_comments_298944.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-11-02T07:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21558",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21558#issuecomment-298944",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_298945.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-02T19:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21558",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21558#issuecomment-298945",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_298946.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-11-02T19:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21558",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21558#issuecomment-298946",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_298947.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-02T20:20:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21558",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21558#issuecomment-298947",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_298948.json:
```json
{
    "body": "Replying to [comment:2 mkoeppe]:\n> Also, should it perhaps be installed using pip instead of directly using `setup.py`?\n\nYeah, I'm not sure why it isn't using pip.  If this package is switched to being installed with pip, then pip would also be added as an (order-only) dependency.  That said, it's mostly a separate issue.",
    "created_at": "2016-11-07T13:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21558",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21558#issuecomment-298948",
    "user": "https://github.com/embray"
}
```

Replying to [comment:2 mkoeppe]:
> Also, should it perhaps be installed using pip instead of directly using `setup.py`?

Yeah, I'm not sure why it isn't using pip.  If this package is switched to being installed with pip, then pip would also be added as an (order-only) dependency.  That said, it's mostly a separate issue.



---

archive/issue_comments_298949.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-11-07T18:27:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21558",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21558#issuecomment-298949",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_057639.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-07T18:27:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21558",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21558#event-57639"
}
```
