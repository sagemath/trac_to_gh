# Issue 17827: sage_doc crashes on cached_function when __doc__ is empty

Issue created by migration from https://trac.sagemath.org/ticket/18064

Original creator: vdelecroix

Original creation time: 2015-03-26 19:52:23


```
sage: @cached_function
....: def f():
....:     return 3
sage: f._sage_doc_()  # BOOM
```

As a consequence, such a function would prevent the documentation to build.


---

Comment by vdelecroix created at 2015-03-26 19:53:07

New commits:


---

Comment by vdelecroix created at 2015-03-26 19:53:07

Changing status from new to needs_review.


---

Comment by git created at 2015-03-26 19:54:03

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by ncohen created at 2015-03-27 10:39:46

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-03-30 08:04:40

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2015-03-30 08:04:40


```
sage -t --long src/sage/misc/cachefunc.pyx
**********************************************************************
File "src/sage/misc/cachefunc.pyx", line 800, in sage.misc.cachefunc.CachedFunction._sage_doc_
Failed example:
    f._sage_doc_()
Expected:
    'File: <doctest ...> (starting at line 1)\n'
Got:
    'File: /scratch/buildbot/sage/redhawk-1/sage_git/build/<doctest sage.misc.cachefunc.CachedFunction._sage_doc_[7]> (starting at line 1)\n'
**********************************************************************
1 item had failures:
   1 of  10 in sage.misc.cachefunc.CachedFunction._sage_doc_
    [751 tests, 1 failure, 27.69 s]
```



---

Comment by git created at 2015-03-30 08:19:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2015-03-30 08:22:11

Now, there should not be any problem with the name of the file...


---

Comment by vdelecroix created at 2015-03-30 08:22:11

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2015-04-02 00:14:53

Resolution: fixed
