# Issue 14896: post receive hook on git to update commit on trac

archive/issues_014896.json:
```json
{
    "body": "CC:  @robertwb @ohanar\n\nHere is a post-receive hook that updates the \"Commit\" field on trac.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15133\n\n",
    "created_at": "2013-08-31T17:12:01Z",
    "labels": [
        "component: website/wiki"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "post receive hook on git to update commit on trac",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14896",
    "user": "https://github.com/vbraun"
}
```
CC:  @robertwb @ohanar

Here is a post-receive hook that updates the "Commit" field on trac.

Issue created by migration from https://trac.sagemath.org/ticket/15133





---

archive/issue_comments_189896.json:
```json
{
    "body": "Attachment [post-receive-hook.py](tarball://root/attachments/some-uuid/ticket15133/post-receive-hook.py) by @vbraun created at 2013-08-31 17:19:56\n\nUpdated",
    "created_at": "2013-08-31T17:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14896#issuecomment-189896",
    "user": "https://github.com/vbraun"
}
```

Attachment [post-receive-hook.py](tarball://root/attachments/some-uuid/ticket15133/post-receive-hook.py) by @vbraun created at 2013-08-31 17:19:56

Updated



---

archive/issue_comments_189897.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-08-31T17:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14896#issuecomment-189897",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_189898.json:
```json
{
    "body": "Ok, it is now enabled (although I haven't had the chance to test it). I've put up a repository with all the server-side hooks at [http://github.com/sagemath/trac-githooks](http://github.com/sagemath/trac-githooks).",
    "created_at": "2013-08-31T21:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14896#issuecomment-189898",
    "user": "https://github.com/ohanar"
}
```

Ok, it is now enabled (although I haven't had the chance to test it). I've put up a repository with all the server-side hooks at [http://github.com/sagemath/trac-githooks](http://github.com/sagemath/trac-githooks).



---

archive/issue_comments_189899.json:
```json
{
    "body": "The plugin is complaining about authentication, so I've disabled it for the moment(because it displays the git user's password when it errors out).",
    "created_at": "2013-08-31T22:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14896#issuecomment-189899",
    "user": "https://github.com/ohanar"
}
```

The plugin is complaining about authentication, so I've disabled it for the moment(because it displays the git user's password when it errors out).



---

archive/issue_comments_189900.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-08-31T22:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14896#issuecomment-189900",
    "user": "https://github.com/ohanar"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_189901.json:
```json
{
    "body": "Ok, fixed this by basing it off of the development scripts authentication. Please review: https://github.com/sagemath/trac-githooks/commit/730231a1ec874d68e3afdd56523c71a6ac2ce4ed",
    "created_at": "2013-08-31T22:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14896#issuecomment-189901",
    "user": "https://github.com/ohanar"
}
```

Ok, fixed this by basing it off of the development scripts authentication. Please review: https://github.com/sagemath/trac-githooks/commit/730231a1ec874d68e3afdd56523c71a6ac2ce4ed



---

archive/issue_comments_189902.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-08-31T22:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14896#issuecomment-189902",
    "user": "https://github.com/ohanar"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_189903.json:
```json
{
    "body": "Ok, I edited this a bit: sha1s in the log table now link to the appropriate changeset, and the table for non-forced pushes only show the new changesets. I still think we need something when the branch field is changed to automate populating the commit field (and ideally have a table of new/recent commits).",
    "created_at": "2013-09-01T04:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14896#issuecomment-189903",
    "user": "https://github.com/ohanar"
}
```

Ok, I edited this a bit: sha1s in the log table now link to the appropriate changeset, and the table for non-forced pushes only show the new changesets. I still think we need something when the branch field is changed to automate populating the commit field (and ideally have a table of new/recent commits).



---

archive/issue_comments_189904.json:
```json
{
    "body": "Changes look good to me, thanks!\n\nI agree that we ideally would also figure out the commit field automatically if one fills in the \"Branch\" trac field and the branch already exists. Though that obviously requires another trac plugin. At least for now people just have to first fill in the branch field and then push, so its not terribly urgent.",
    "created_at": "2013-09-01T11:14:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14896#issuecomment-189904",
    "user": "https://github.com/vbraun"
}
```

Changes look good to me, thanks!

I agree that we ideally would also figure out the commit field automatically if one fills in the "Branch" trac field and the branch already exists. Though that obviously requires another trac plugin. At least for now people just have to first fill in the branch field and then push, so its not terribly urgent.



---

archive/issue_events_043589.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14896",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14896#event-43589"
}
```



---

archive/issue_comments_189905.json:
```json
{
    "body": "Why is this ticket still in `needs_review` state? Is it intentional?",
    "created_at": "2014-01-31T20:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14896#issuecomment-189905",
    "user": "https://github.com/mezzarobba"
}
```

Why is this ticket still in `needs_review` state? Is it intentional?



---

archive/issue_comments_189906.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-01-31T21:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14896#issuecomment-189906",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_189907.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-01-31T21:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14896",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14896#issuecomment-189907",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_043590.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-01-31T21:23:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14896",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14896#event-43590"
}
```
