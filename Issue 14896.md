# Issue 14896: post receive hook on git to update commit on trac

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2013-08-31 17:12:01

CC:  robertwb ohanar

Here is a post-receive hook that updates the "Commit" field on trac.


---

Attachment

Updated


---

Comment by vbraun created at 2013-08-31 17:21:12

Changing status from new to needs_review.


---

Comment by ohanar created at 2013-08-31 21:35:22

Ok, it is now enabled (although I haven't had the chance to test it). I've put up a repository with all the server-side hooks at [http://github.com/sagemath/trac-githooks](http://github.com/sagemath/trac-githooks).


---

Comment by ohanar created at 2013-08-31 22:30:32

The plugin is complaining about authentication, so I've disabled it for the moment(because it displays the git user's password when it errors out).


---

Comment by ohanar created at 2013-08-31 22:30:32

Changing status from needs_review to needs_work.


---

Comment by ohanar created at 2013-08-31 22:44:18

Ok, fixed this by basing it off of the development scripts authentication. Please review: https://github.com/sagemath/trac-githooks/commit/730231a1ec874d68e3afdd56523c71a6ac2ce4ed


---

Comment by ohanar created at 2013-08-31 22:44:18

Changing status from needs_work to needs_review.


---

Comment by ohanar created at 2013-09-01 04:23:54

Ok, I edited this a bit: sha1s in the log table now link to the appropriate changeset, and the table for non-forced pushes only show the new changesets. I still think we need something when the branch field is changed to automate populating the commit field (and ideally have a table of new/recent commits).


---

Comment by vbraun created at 2013-09-01 11:14:11

Changes look good to me, thanks!

I agree that we ideally would also figure out the commit field automatically if one fills in the "Branch" trac field and the branch already exists. Though that obviously requires another trac plugin. At least for now people just have to first fill in the branch field and then push, so its not terribly urgent.


---

Comment by mmezzarobba created at 2014-01-31 20:51:44

Why is this ticket still in `needs_review` state? Is it intentional?


---

Comment by vbraun created at 2014-01-31 21:23:17

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-01-31 21:23:25

Resolution: fixed
