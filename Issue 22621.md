# Issue 22621: Failed to find kleene star of a finite automaton

Issue created by migration from https://trac.sagemath.org/ticket/22858

Original creator: mirgee

Original creation time: 2017-04-22 20:37:04

Keywords: finite state machines, automata, kleene star

Given the following automaton

```
aut = Automaton({'p':[('p','b'),('q','a')], 'q':[('r','a'), ('r','b')], 'r':[('p','a'),('p','b')]}, initial_states=['p'], final_states=['r'])
```

and its kleene star

```
_kleene = Automaton({'i':[('p','b'),('q','a')], 'p':[('p','b'),('q','a')], 'q':[('r','a'), ('r','b'), ('i','a'), ('i','b')], 'r':[('p','a'),('p','b')]}, initial_states=['i'], final_states=['i'])
```

the following code

```
_kleene.is_equivalent(aut.kleene_star())
```

outputs False, which it shouldn't. The automaton produced by `aut.kleene_star()` differs from `aut` only in that the input state becomes also final state.
