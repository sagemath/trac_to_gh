# Issue 22621: Failed to find kleene star of a finite automaton

archive/issues_022621.json:
```json
{
    "body": "Keywords: finite state machines, automata, kleene star\n\nGiven the following automaton\n\n```\naut = Automaton({'p':[('p','b'),('q','a')], 'q':[('r','a'), ('r','b')], 'r':[('p','a'),('p','b')]}, initial_states=['p'], final_states=['r'])\n```\n\nand its kleene star\n\n```\n_kleene = Automaton({'i':[('p','b'),('q','a')], 'p':[('p','b'),('q','a')], 'q':[('r','a'), ('r','b'), ('i','a'), ('i','b')], 'r':[('p','a'),('p','b')]}, initial_states=['i'], final_states=['i'])\n```\n\nthe following code\n\n```\n_kleene.is_equivalent(aut.kleene_star())\n```\n\noutputs False, which it shouldn't. The automaton produced by `aut.kleene_star()` differs from `aut` only in that the input state becomes also final state.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22858\n\n",
    "created_at": "2017-04-22T20:37:04Z",
    "labels": [
        "combinatorics",
        "minor",
        "bug"
    ],
    "title": "Failed to find kleene star of a finite automaton",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22621",
    "user": "mirgee"
}
```
Keywords: finite state machines, automata, kleene star

Given the following automaton

```
aut = Automaton({'p':[('p','b'),('q','a')], 'q':[('r','a'), ('r','b')], 'r':[('p','a'),('p','b')]}, initial_states=['p'], final_states=['r'])
```

and its kleene star

```
_kleene = Automaton({'i':[('p','b'),('q','a')], 'p':[('p','b'),('q','a')], 'q':[('r','a'), ('r','b'), ('i','a'), ('i','b')], 'r':[('p','a'),('p','b')]}, initial_states=['i'], final_states=['i'])
```

the following code

```
_kleene.is_equivalent(aut.kleene_star())
```

outputs False, which it shouldn't. The automaton produced by `aut.kleene_star()` differs from `aut` only in that the input state becomes also final state.

Issue created by migration from https://trac.sagemath.org/ticket/22858


