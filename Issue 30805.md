# Issue 30805: build/pkgs/_recommended: Remove duplication of the pandoc system package

Issue created by migration from https://trac.sagemath.org/ticket/31042

Original creator: mkoeppe

Original creation time: 2020-12-11 22:16:30

CC:  slabbe jhpalmieri

(split out from #30930)

Although `pandoc` is installed in the system and is correctly detected by `./configure`, it recommends installing it anyway.

This is due to the duplication of `pandoc` in the `_recommended` spkg.

In this ticket, we remove this duplication.  As a result, when the system package is installed, `./configure` will no longer recommend installing it.

We add pandoc separately to the autogenerated part of the documentation that is about "recommended system packages".




---

Comment by mkoeppe created at 2020-12-11 22:16:40

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-12-11 22:27:25

Changing keywords from "" to "sd111".


---

Comment by dimpase created at 2020-12-12 08:36:04

The problem does not reproduce for me on 9.3.beta3 and pandoc installed and detected as accepted to be used. Are you sure this is needed?


---

Comment by dimpase created at 2020-12-12 09:51:30

perhaps it is platform-specific?  I checked on Fedora.


---

Comment by mkoeppe created at 2020-12-12 17:58:22

You confirmed that it works in #30930#comment:8


---

Comment by dimpase created at 2020-12-13 19:19:11

Replying to [comment:6 mkoeppe]:
> You confirmed that it works in #30930#comment:8

what made (?) a difference in a previous beta might not be needed any more,
i.e. the problem has fixed itself?


---

Comment by mkoeppe created at 2020-12-13 20:41:19

OK, we start from scratch. On your system, on the current beta without this ticket, what is the output from `configure` on your system?


---

Comment by dimpase created at 2020-12-13 23:50:01

Replying to [comment:8 mkoeppe]:
> OK, we start from scratch. On your system, on the current beta without this ticket, what is the output from `configure` on your system?

```
$ pandoc -v
pandoc 2.2.1
Compiled with pandoc-types 1.17.5.4, texmath 0.11.1.2, skylighting 0.7.5
...

$ ./configure
...
pandoc-none:                                 using system package; SPKG will not be installed
pandoc_attributes-8bc82f6d:                  does not support check for system package; optional, use "./configure --enable-pandoc_attributes" to install
pandocfilters-1.4.2:                         does not support check for system package; will be installed as an SPKG
...
configure:

    notice: the following SPKGs did not find equivalent system packages:

        _recommended cbc coxeter3 gp2c igraph isl libsemigroups pari_elldata pari_galpol pari_nftables pari_seadata

checking for the package system in use... fedora
configure:

    hint: installing the following system packages, if not
    already present, is recommended and may avoid having to
    build them (though some may have to be built anyway):

      $ sudo yum install  coin-or-Cbc coin-or-Cbc-devel coxeter coxeter-devel coxeter-tools igraph igraph-devel isl-devel pari-galpol pari-seadata

    After installation, re-run configure using:

      $ ./config.status --recheck && ./config.status
```



---

Comment by mkoeppe created at 2020-12-14 00:55:44

On Fedora, we have not even added anything yet to `_recommended/distros`, so there was nothing to remove.

```
$ ls build/pkgs/_recommended/distros
debian.txt    homebrew.txt  
```



---

Comment by dimpase created at 2020-12-14 09:20:09

OK. Sorry for confusion


---

Comment by dimpase created at 2020-12-14 09:20:09

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-12-14 17:14:30

Thanks!


---

Comment by vbraun created at 2020-12-21 23:35:15

Resolution: fixed
