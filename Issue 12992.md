# Issue 12992: Givaro 3.7.0 bus error on SPARC Solaris

archive/issues_012992.json:
```json
{
    "body": "Assignee: @ClementPernet\n\nCC:  jpflori\n\nKeywords: SPARC givaro bus error\n\nThe `test-crt` in the Givaro test suite fails on SPARC with the following backtrace:\n\n```\n-bash-3.00$ /home/vbraun/opt/mark/gdb-7.4.1/gdb/gdb test-crt\nGNU gdb (GDB) 7.4.1\nCopyright (C) 2012 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"sparc-sun-solaris2.10\".\nFor bug reporting instructions, please see:\n<http://www.gnu.org/software/gdb/bugs/>...\nReading symbols from\n/home/vbraun/opt/mark/sage-5.1.beta3/spkg/build/givaro-3.7.0/src/tests/test-crt...done.\n(gdb) run\nStarting program:\n/home/vbraun/opt/mark/sage-5.1.beta3/spkg/build/givaro-3.7.0/src/tests/test-crt\n[Thread debugging using libthread_db enabled]\n[New Thread 1 (LWP 1)]\n\nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 1 (LWP 1)]\n0x00029030 in Givaro::GFqDom<long>::GFqDom (this=0x7eaec, F=...)\n   at /home/vbraun/opt/mark/sage-5.1.beta3/local//include/givaro/givgfq.h:100\n100                     _dcharacteristic = F._dcharacteristic;\n(gdb) bt\n#0  0x00029030 in Givaro::GFqDom<long>::GFqDom (this=0x7eaec, F=...)\n   at /home/vbraun/opt/mark/sage-5.1.beta3/local//include/givaro/givgfq.h:100\n#1  0x00033c3c in Givaro::GivaroMM<Givaro::GFqDom<long> >::initone\n(p=0x7eaec, V=...)\n   at /home/vbraun/opt/mark/sage-5.1.beta3/local//include/givaro/givaromm.h:297\n#2  0x00031110 in Givaro::GivaroMM<Givaro::GFqDom<long> >::initialize\n(bloc=0x7eaec, s=15, V=...)\n   at /home/vbraun/opt/mark/sage-5.1.beta3/local//include/givaro/givaromm.h:300\n#3  0x000268f8 in Givaro::Array0<Givaro::GFqDom<long> >::build\n(this=0xffbff890, s=15, t=...)\n   at /home/vbraun/opt/mark/sage-5.1.beta3/local//include/givaro/givarray0.inl:30\n#4  0x00021ad0 in Givaro::Array0<Givaro::GFqDom<long> >::Array0\n(this=0xffbff890, s=15)\n   at /home/vbraun/opt/mark/sage-5.1.beta3/local//include/givaro/givarray0.inl:39\n#5  0x0001bf04 in tmain<Givaro::GFqDom<long> > (argc=1,\nargv=0xffbffb3c, generator=...) at test-crt.C:49\n#6  0x00013d00 in main (argc=1, argv=0xffbffb3c) at test-crt.C:151\n(gdb) l\n95              {\n96                      zero = F.zero;\n97                      one = F.one;\n98                      mOne = F.mOne;\n99                      _characteristic = F._characteristic;\n100                     _dcharacteristic = F._dcharacteristic;\n101                     _exponent = F._exponent;\n102                     _irred = F._irred;\n103                     _q = F._q;\n104                     _qm1 = F._qm1;\n```\n\nThis is related to placement new in the Givaro array class, which we do not use in Sage at this point. Nevertheless it would be nice to clean this up eventually.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13164\n\n",
    "created_at": "2012-06-25T20:59:30Z",
    "labels": [
        "finite rings",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.4",
    "title": "Givaro 3.7.0 bus error on SPARC Solaris",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12992",
    "user": "@vbraun"
}
```
Assignee: @ClementPernet

CC:  jpflori

Keywords: SPARC givaro bus error

The `test-crt` in the Givaro test suite fails on SPARC with the following backtrace:

```
-bash-3.00$ /home/vbraun/opt/mark/gdb-7.4.1/gdb/gdb test-crt
GNU gdb (GDB) 7.4.1
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "sparc-sun-solaris2.10".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from
/home/vbraun/opt/mark/sage-5.1.beta3/spkg/build/givaro-3.7.0/src/tests/test-crt...done.
(gdb) run
Starting program:
/home/vbraun/opt/mark/sage-5.1.beta3/spkg/build/givaro-3.7.0/src/tests/test-crt
[Thread debugging using libthread_db enabled]
[New Thread 1 (LWP 1)]

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 1 (LWP 1)]
0x00029030 in Givaro::GFqDom<long>::GFqDom (this=0x7eaec, F=...)
   at /home/vbraun/opt/mark/sage-5.1.beta3/local//include/givaro/givgfq.h:100
100                     _dcharacteristic = F._dcharacteristic;
(gdb) bt
#0  0x00029030 in Givaro::GFqDom<long>::GFqDom (this=0x7eaec, F=...)
   at /home/vbraun/opt/mark/sage-5.1.beta3/local//include/givaro/givgfq.h:100
#1  0x00033c3c in Givaro::GivaroMM<Givaro::GFqDom<long> >::initone
(p=0x7eaec, V=...)
   at /home/vbraun/opt/mark/sage-5.1.beta3/local//include/givaro/givaromm.h:297
#2  0x00031110 in Givaro::GivaroMM<Givaro::GFqDom<long> >::initialize
(bloc=0x7eaec, s=15, V=...)
   at /home/vbraun/opt/mark/sage-5.1.beta3/local//include/givaro/givaromm.h:300
#3  0x000268f8 in Givaro::Array0<Givaro::GFqDom<long> >::build
(this=0xffbff890, s=15, t=...)
   at /home/vbraun/opt/mark/sage-5.1.beta3/local//include/givaro/givarray0.inl:30
#4  0x00021ad0 in Givaro::Array0<Givaro::GFqDom<long> >::Array0
(this=0xffbff890, s=15)
   at /home/vbraun/opt/mark/sage-5.1.beta3/local//include/givaro/givarray0.inl:39
#5  0x0001bf04 in tmain<Givaro::GFqDom<long> > (argc=1,
argv=0xffbffb3c, generator=...) at test-crt.C:49
#6  0x00013d00 in main (argc=1, argv=0xffbffb3c) at test-crt.C:151
(gdb) l
95              {
96                      zero = F.zero;
97                      one = F.one;
98                      mOne = F.mOne;
99                      _characteristic = F._characteristic;
100                     _dcharacteristic = F._dcharacteristic;
101                     _exponent = F._exponent;
102                     _irred = F._irred;
103                     _q = F._q;
104                     _qm1 = F._qm1;
```

This is related to placement new in the Givaro array class, which we do not use in Sage at this point. Nevertheless it would be nice to clean this up eventually.

Issue created by migration from https://trac.sagemath.org/ticket/13164





---

archive/issue_comments_157131.json:
```json
{
    "body": "This will be fixed in Givaro-3.7.1, which is scheduled to appear in July 2012.",
    "created_at": "2012-06-27T14:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12992#issuecomment-157131",
    "user": "@vbraun"
}
```

This will be fixed in Givaro-3.7.1, which is scheduled to appear in July 2012.



---

archive/issue_comments_157132.json:
```json
{
    "body": "givaro 3.7.1 was released on 11/07/2012.",
    "created_at": "2012-08-09T09:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12992#issuecomment-157132",
    "user": "jpflori"
}
```

givaro 3.7.1 was released on 11/07/2012.



---

archive/issue_comments_157133.json:
```json
{
    "body": "I've packaged an updated spkg (just updating the src dir, no problems on linux) at\nhttp://perso.telecom-paristech.fr/~flori/sage/givaro-3.7.1.spkg\n\nNo changes committed in yet (all in a queue patch).",
    "created_at": "2012-08-09T15:24:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12992#issuecomment-157133",
    "user": "jpflori"
}
```

I've packaged an updated spkg (just updating the src dir, no problems on linux) at
http://perso.telecom-paristech.fr/~flori/sage/givaro-3.7.1.spkg

No changes committed in yet (all in a queue patch).



---

archive/issue_comments_157134.json:
```json
{
    "body": "I'll review it if you commit your changes.",
    "created_at": "2012-08-24T11:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12992#issuecomment-157134",
    "user": "@vbraun"
}
```

I'll review it if you commit your changes.



---

archive/issue_comments_157135.json:
```json
{
    "body": "Attachment [givaro-3.7.1.diff](tarball://root/attachments/some-uuid/ticket13164/givaro-3.7.1.diff) by jpflori created at 2012-08-24 13:04:34\n\nSpkg diff, for review only. Committed in spkg.",
    "created_at": "2012-08-24T13:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12992#issuecomment-157135",
    "user": "jpflori"
}
```

Attachment [givaro-3.7.1.diff](tarball://root/attachments/some-uuid/ticket13164/givaro-3.7.1.diff) by jpflori created at 2012-08-24 13:04:34

Spkg diff, for review only. Committed in spkg.



---

archive/issue_comments_157136.json:
```json
{
    "body": "Changing keywords from \"SPARC givaro bus error\" to \"SPARC givaro bus error spkg\".",
    "created_at": "2012-08-24T13:13:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12992#issuecomment-157136",
    "user": "jpflori"
}
```

Changing keywords from "SPARC givaro bus error" to "SPARC givaro bus error spkg".



---

archive/issue_comments_157137.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-08-24T13:13:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12992#issuecomment-157137",
    "user": "jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_157138.json:
```json
{
    "body": "SPKG reuploaded with committed changes.\nI did not have the time to run make ptest on Linux x86_64, and even less on SPARC hardware.",
    "created_at": "2012-08-24T13:13:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12992#issuecomment-157138",
    "user": "jpflori"
}
```

SPKG reuploaded with committed changes.
I did not have the time to run make ptest on Linux x86_64, and even less on SPARC hardware.



---

archive/issue_comments_157139.json:
```json
{
    "body": "make ptest passes on Ubuntu 12.04 on x86_64.",
    "created_at": "2012-08-24T14:22:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12992#issuecomment-157139",
    "user": "jpflori"
}
```

make ptest passes on Ubuntu 12.04 on x86_64.



---

archive/issue_comments_157140.json:
```json
{
    "body": "Fixes the testsuite bug on SPARC. Only minor changes wrt. 3.7.0. Tests fine on x86_64. LGTM",
    "created_at": "2012-08-25T17:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12992#issuecomment-157140",
    "user": "@vbraun"
}
```

Fixes the testsuite bug on SPARC. Only minor changes wrt. 3.7.0. Tests fine on x86_64. LGTM



---

archive/issue_comments_157141.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-08-25T17:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12992#issuecomment-157141",
    "user": "@vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_157142.json:
```json
{
    "body": "Attachment [trac_9511_givaro_3_7_x.patch](tarball://root/attachments/some-uuid/ticket13164/trac_9511_givaro_3_7_x.patch) by @vbraun created at 2012-08-25 17:47:55\n\nPatch from #9511",
    "created_at": "2012-08-25T17:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12992#issuecomment-157142",
    "user": "@vbraun"
}
```

Attachment [trac_9511_givaro_3_7_x.patch](tarball://root/attachments/some-uuid/ticket13164/trac_9511_givaro_3_7_x.patch) by @vbraun created at 2012-08-25 17:47:55

Patch from #9511



---

archive/issue_comments_157143.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-09-10T15:10:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12992#issuecomment-157143",
    "user": "@jdemeyer"
}
```

Resolution: fixed
