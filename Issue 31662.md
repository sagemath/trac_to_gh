# Issue 31662: Implementing Composition for Lazy Formal Laurent Series

Issue created by migration from https://trac.sagemath.org/ticket/31899

Original creator: @tejasvicsr1

Original creation time: 2021-06-03 17:42:34

CC:  mantepse

Keywords: LazyPowerSeries, FormalSeries, GSoC

This ticket deals with implementing composition for a formal Laurent Series.

Conditions:

Given two formal Laurent series - f and g

f o g exists, if and only if:

* g = 0 and val(f) >= 0
* g is non-zero and f has only finitely many nonzero coefficients
* g is non-zero and val(g) > 0.

This ticket is part of the meta ticket #31651


---

Comment by mantepse created at 2021-06-04 07:33:07

Changing keywords from "LazyPowerSeries, FormalSeries, GSoC" to "LazyPowerSeries, FormalSeries, GSoC21".


---

Comment by mantepse created at 2021-06-04 08:25:39

Let me note that the second case works already:

```
sage: L.<z> = LaurentPolynomialRing(QQ)
sage: LS.<y> = LazyLaurentSeriesRing(QQ)
sage: f = z^-2 + 1 + z
sage: g = 1/(y*(1-y)); g
y^-1 + 1 + y + y^2 + y^3 + y^4 + y^5 + ...
sage: f(g)
y^-1 + 2 + y + 2*y^2 - y^3 + 2*y^4 + y^5 + ...
```


Here is, why this works: the relevant line in `__call__` in `LaurentPolynomial_univariate` is

```
    return self.__u(x) * (x[0]**self.__n)
```

* `x` is a singleton tuple with the Laurent series as its only element, that is, `g` from above.
* `self.__n` is the valuation of the Laurent polynomial, that is `-2` in our case
* `x[0]**self.__n` therefore is the n-th power of the Laurent series
* `self.__u` is the polynomial obtained by multiplying the Laurent polynomial with z^-n
* `self.__u(x)` is therefore calling the `__call__` method of the polynomial ring, and this works for similar reasons.

It might be a good idea to briefly doctest this in the future `__call__` of `LazyLaurentSeries`.

I am not sure whether this is an efficient way to obtain the composition.  But that's certainly not important now.


---

Comment by git created at 2021-06-10 18:06:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-06-11 09:12:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-06-13 17:48:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-06-14 17:05:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2021-08-12 00:49:10

Changing keywords from "LazyPowerSeries, FormalSeries, GSoC21" to "LazyPowerSeries, FormalSeries, gsoc2021".


---

Comment by mantepse created at 2022-01-29 19:05:02

Changing status from new to needs_review.


---

Comment by mantepse created at 2022-01-29 19:05:02

superseded


---

Comment by tscrim created at 2022-01-30 00:32:24

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-02-12 18:02:50

Resolution: invalid
