# Issue 11433: Typos in PARI's spkg-install (2.4.3.alpha.p5)

Issue created by migration from https://trac.sagemath.org/ticket/11605

Original creator: leif

Original creation time: 2011-07-16 13:29:37

Assignee: tbd

CC:  jdemeyer dimpase kcrisman mhansen

Someone should have noticed this:

```
./spkg-install: line 185: [: missing `]'
Installing PARI/GP...
```


Here's the culprit:

```sh
build()
{
    ...

    $MAKE $PARI_MAKEFLAGS gp
    if [ $? -ne 0]; then
        echo >&2 "Error: building PARI/GP failed."
    fi
}
```

Note that also an `exit 1`(!) is missing there.

(Two patches apply with fuzz 2 btw.)


---

Comment by leif created at 2011-07-16 14:10:23

Changing status from new to needs_review.


---

Comment by leif created at 2011-07-16 14:10:23

Patch is up. New spkg is on the way...


---

Comment by leif created at 2011-07-16 14:58:19

Oh, just came across #10240, which also provided a p6 spkg, but now is marked duplicate since the change made there (for Cygwin) should go into a new PARI 2.5.0 at #11130.

Maybe I should merge that patch (which had positive review already) into my spkg and rename it to p7.


---

Comment by leif created at 2011-07-16 15:43:52

SPKG patch. For review only. (Based on a p6 by me with Dima's patch applied.)


---

Attachment

SPKG patch. Contains both the changes from here and #10240. Apply to pari-2.4.3.alpha.p5 if at all.


---

Attachment

Diff between the p5 and the p7. For reference / review.


---

Attachment

Replying to [comment:2 leif]:
> Maybe I should merge that patch (which had positive review already) into my spkg and rename it to p7.

Ok, merged the changes from #10240 (see attached diff / cumulative spkg patch) and now going to upload a p7 with all of them applied.


---

Comment by leif created at 2011-07-16 16:28:29

Changing keywords from "" to "PARI spkg Cygwin".


---

Comment by leif created at 2011-07-16 16:30:36

New spkg is up. Please review such that we can get this into the upcoming Sage 4.7.1.


---

Comment by kcrisman created at 2011-07-16 19:07:45

I cannot actually test this package on Cygwin for at least two weeks (in fact, I can't on any computer right now), but the change in question for Cygwin looks right still (see #10240, as mentioned), and #10240 does in fact work (I've used it numerous times, and !RegB on the sage-windows list also was able to use it properly).    That's as close as I can get to positive review for now, I'm sorry - is that enough?  I would say that #10240 would have positive review regardless of whether it is "duplicate" or not.

As for the rest, it looks right, but I have not actually tested any of it, including the quoting etc.  I'm sure that someone even a little more advanced in shell script could give it an immediate positive review (or needs work if there is something obvious missed).

Thanks so much for merging the #10240 stuff, by the way!


---

Comment by leif created at 2011-07-16 19:15:05

Replying to [comment:6 kcrisman]:
> Thanks so much for merging the #10240 stuff, by the way!

I just merged it to attract more reviewers. ;-)


---

Comment by jdemeyer created at 2011-07-19 10:32:05

Changing priority from critical to blocker.


---

Comment by jdemeyer created at 2011-07-19 10:32:05

Good!  Never mind the `fuzz 2`, it is harmless.


---

Comment by jdemeyer created at 2011-07-19 10:32:05

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-07-19 17:39:14

Resolution: fixed
