# Issue 11058: Define our own PariOUT

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2011-04-21 08:52:14

Assignee: was

Keywords: pari

Instead of changing `defaultOut` in `sage/libs/pari/gen.pyx`, we should instead define our own `PariOUT` structure and use that.


---

Attachment


---

Comment by jdemeyer created at 2011-04-21 09:08:06

Changing status from new to needs_review.


---

Comment by robertwb created at 2011-04-23 04:43:35

Changing status from needs_review to positive_review.


---

Comment by robertwb created at 2011-04-23 04:43:35

LGTM, pending adding the trac number to the ticket description. 

Why in the world did we define `__x` to do `ctypedef __x pariout_t`?


---

Comment by jdemeyer created at 2011-04-24 18:39:55

Replying to [comment:2 robertwb]:
> LGTM, pending adding the trac number to the ticket description. 
This is no longer necessary (see [http://groups.google.com/group/sage-devel/browse_thread/thread/f5a9c012f6299a9e/a3c2af4a7700bca3](http://groups.google.com/group/sage-devel/browse_thread/thread/f5a9c012f6299a9e/a3c2af4a7700bca3))

> Why in the world did we define `__x` to do `ctypedef __x pariout_t`?
I didn't write that code, but probably to work around some limitation/bug in an earlier version of Cython?


---

Comment by cremona created at 2011-04-25 11:44:22

Changing status from positive_review to needs_info.


---

Comment by cremona created at 2011-04-25 11:44:22

I know this has a positive review from the omnipotent testbot, but when I apply this to a freshly-rolled 4.7.alpha5 and do a full test I get two failures in sage/misc/sagedoc.py:

```
File "/home/jec/sage-4.7.alpha5.pari/devel/sage-main/sage/misc/sagedoc.py", line 874:
    sage: len(search_doc('tree', interact=False).splitlines()) > 2500  # long time
Expected:
    True
Got:
    False
**********************************************************************
File "/home/jec/sage-4.7.alpha5.pari/devel/sage-main/sage/misc/sagedoc.py", line 489:
    sage: 'abvar/homology' in _search_src_or_doc('doc', 'homology', 'variety', interact=False)
Expected:
    True
Got:
    False
```

I built Sage with "make build" rather than "make", in case that is relevant.  Meanwhile I switched the tag to "needs info" but will continue with this applied and go on to #11130.


---

Comment by jdemeyer created at 2011-04-25 11:48:55

Replying to [comment:4 cremona]:
> I built Sage with "make build" rather than "make", in case that is relevant.  
Probably it is, because the doctest failures you mention are related to the *documentation*.  So I would guess that `make doc-html` would solve those problems.


---

Comment by cremona created at 2011-04-25 11:50:20

Replying to [comment:5 jdemeyer]:
> Replying to [comment:4 cremona]:
> > I built Sage with "make build" rather than "make", in case that is relevant.  
> Probably it is, because the doctest failures you mention are related to the *documentation*.  So I would guess that `make doc-html` would solve those problems.

I guessed so, so am about to try again after sage -docbuild all html has finished...


---

Comment by cremona created at 2011-04-25 13:11:46

Changing status from needs_info to needs_review.


---

Comment by cremona created at 2011-04-25 13:11:46

Replying to [comment:6 cremona]:
> Replying to [comment:5 jdemeyer]:
> > Replying to [comment:4 cremona]:
> > > I built Sage with "make build" rather than "make", in case that is relevant.  
> > Probably it is, because the doctest failures you mention are related to the *documentation*.  So I would guess that `make doc-html` would solve those problems.
> 
> I guessed so, so am about to try again after sage -docbuild all html has finished... 

As expected, the problem went away.  I suppose it was silly to base the full test on devel/sage and not devel/sage/sage given that I had not built the docs.


---

Comment by cremona created at 2011-04-25 13:11:59

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-04-26 09:05:40

Resolution: fixed
