# Issue 14764: PPL 1.0 does not build on Cygwin

archive/issues_014764.json:
```json
{
    "body": "CC:  @vbraun @jdemeyer @tscrim\n\nKeywords: cygwin ppl spkg\n\nPPL 1.0 uses some libm long double functions (floorl, frexpl) as soon as it detects the long double type is available and looks functional.\nUnfortunately the Cygwin's libm does not provide such function, and we do not build Cephes on Cygwin.\n\nThe easy solution is to use plain double precision in place of the extended ones (with a std:: prefix, as PPL also defines its own floor function).\nThis is what is implemented in 1.1.pre* releases of ppl available at http://bugseng.com/products/ppl/download/ftp/snapshots/.\n\nThere was a similar report archived at http://www.cs.unipr.it/pipermail/ppl-devel/2012-September/018538.html.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15001\n\n",
    "created_at": "2013-08-05T13:16:10Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.11",
    "title": "PPL 1.0 does not build on Cygwin",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14764",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
CC:  @vbraun @jdemeyer @tscrim

Keywords: cygwin ppl spkg

PPL 1.0 uses some libm long double functions (floorl, frexpl) as soon as it detects the long double type is available and looks functional.
Unfortunately the Cygwin's libm does not provide such function, and we do not build Cephes on Cygwin.

The easy solution is to use plain double precision in place of the extended ones (with a std:: prefix, as PPL also defines its own floor function).
This is what is implemented in 1.1.pre* releases of ppl available at http://bugseng.com/products/ppl/download/ftp/snapshots/.

There was a similar report archived at http://www.cs.unipr.it/pipermail/ppl-devel/2012-September/018538.html.

Issue created by migration from https://trac.sagemath.org/ticket/15001





---

archive/issue_comments_188024.json:
```json
{
    "body": "A straight update to ppl-1.1pre9 solves the issue.\n(I've not run any of the PPL or Sage testsuites yet.)\n\nWould it make sense to update to such a release?\nOr should we backport the needed patches?\nI have no idea how stable the PPL prereleases are.\nMaybe Volker who is the spkg maintainer according to SPKG.txt has a better idea of the stability of such releases?",
    "created_at": "2013-08-05T13:56:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14764#issuecomment-188024",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

A straight update to ppl-1.1pre9 solves the issue.
(I've not run any of the PPL or Sage testsuites yet.)

Would it make sense to update to such a release?
Or should we backport the needed patches?
I have no idea how stable the PPL prereleases are.
Maybe Volker who is the spkg maintainer according to SPKG.txt has a better idea of the stability of such releases?



---

archive/issue_comments_188025.json:
```json
{
    "body": "There are precedents of using pre-release versions in Sage packages. So, if it doesn't break anything, that's fine for me. **Just make sure you clearly label the version as being a pre-release and document where/how you obtained it**. Don't simply call the package `ppl-1.1.spkg`",
    "created_at": "2013-08-05T14:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14764#issuecomment-188025",
    "user": "https://github.com/jdemeyer"
}
```

There are precedents of using pre-release versions in Sage packages. So, if it doesn't break anything, that's fine for me. **Just make sure you clearly label the version as being a pre-release and document where/how you obtained it**. Don't simply call the package `ppl-1.1.spkg`



---

archive/issue_comments_188026.json:
```json
{
    "body": "Also, it must be a **public release**. \"Some developer sent me this tarball\" isn't good enough.",
    "created_at": "2013-08-05T14:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14764#issuecomment-188026",
    "user": "https://github.com/jdemeyer"
}
```

Also, it must be a **public release**. "Some developer sent me this tarball" isn't good enough.



---

archive/issue_comments_188027.json:
```json
{
    "body": "Alternatively you can probably disable the floating-point features with the configure switch `--disable-fpmath`. They are not used by Sage and we only enabled them because it tends to break stuff linked against the system ppl library (did I mention that abusing `LD_LIBRARY_PATH` sucks?)",
    "created_at": "2013-08-05T14:34:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14764#issuecomment-188027",
    "user": "https://github.com/vbraun"
}
```

Alternatively you can probably disable the floating-point features with the configure switch `--disable-fpmath`. They are not used by Sage and we only enabled them because it tends to break stuff linked against the system ppl library (did I mention that abusing `LD_LIBRARY_PATH` sucks?)



---

archive/issue_comments_188028.json:
```json
{
    "body": "As you can see in the ticket description, it is a public release, available at http://bugseng.com/external/ppl/download/ftp/\n\nNote though that it seems only one \"snapshot\" is available at a given time, so when a new one is released, the previous one will disapppear.\nAnd it does not seem trivial to get the right commit from the PPL git server (no recent branches or tags), though it seems that for some time the (pre)release version are \"tagged\" with a \"Version number bumped\" commit message, e.g. http://www.cs.unipr.it/git/gitweb.cgi?p=ppl/ppl.git;a=commit;h=f1487c86784d0b54d566502957b8ae5993bf32b8",
    "created_at": "2013-08-05T14:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14764#issuecomment-188028",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

As you can see in the ticket description, it is a public release, available at http://bugseng.com/external/ppl/download/ftp/

Note though that it seems only one "snapshot" is available at a given time, so when a new one is released, the previous one will disapppear.
And it does not seem trivial to get the right commit from the PPL git server (no recent branches or tags), though it seems that for some time the (pre)release version are "tagged" with a "Version number bumped" commit message, e.g. http://www.cs.unipr.it/git/gitweb.cgi?p=ppl/ppl.git;a=commit;h=f1487c86784d0b54d566502957b8ae5993bf32b8



---

archive/issue_comments_188029.json:
```json
{
    "body": "Replying to [comment:4 vbraun]:\n> Alternatively you can probably disable the floating-point features with the configure switch `--disable-fpmath`. \nThat should do the trick from what I saw in the build system files ...\n>They are not used by Sage and we only enabled them because it tends to break stuff linked against the system ppl library (did I mention that abusing `LD_LIBRARY_PATH` sucks?)\n... but I guess it could be more error-prone then.",
    "created_at": "2013-08-05T14:40:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14764#issuecomment-188029",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Replying to [comment:4 vbraun]:
> Alternatively you can probably disable the floating-point features with the configure switch `--disable-fpmath`. 
That should do the trick from what I saw in the build system files ...
>They are not used by Sage and we only enabled them because it tends to break stuff linked against the system ppl library (did I mention that abusing `LD_LIBRARY_PATH` sucks?)
... but I guess it could be more error-prone then.



---

archive/issue_comments_188030.json:
```json
{
    "body": "Spkg diff, for review only.",
    "created_at": "2013-08-06T21:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14764#issuecomment-188030",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Spkg diff, for review only.



---

archive/issue_comments_188031.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-08-06T21:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14764#issuecomment-188031",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_188032.json:
```json
{
    "body": "Attachment [ppl-1.1pre9.p0.diff](tarball://root/attachments/some-uuid/ticket15001/ppl-1.1pre9.p0.diff) by jpflori created at 2013-08-06 21:29:15",
    "created_at": "2013-08-06T21:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14764#issuecomment-188032",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Attachment [ppl-1.1pre9.p0.diff](tarball://root/attachments/some-uuid/ticket15001/ppl-1.1pre9.p0.diff) by jpflori created at 2013-08-06 21:29:15



---

archive/issue_comments_188033.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-08-06T22:40:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14764#issuecomment-188033",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_188034.json:
```json
{
    "body": "Looks good to me. I trust that it fixes the Cygwin problem since I can't try that myself.",
    "created_at": "2013-08-06T22:40:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14764#issuecomment-188034",
    "user": "https://github.com/vbraun"
}
```

Looks good to me. I trust that it fixes the Cygwin problem since I can't try that myself.



---

archive/issue_comments_188035.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-08-10T06:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14764#issuecomment-188035",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_014492.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-10T06:38:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14764",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14764#event-14492"
}
```
