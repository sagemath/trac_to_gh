# Issue 28860: build/make/Makefile.in: Rename make targets SPKG-clean to SPKG-uninstall

archive/issues_028860.json:
```json
{
    "body": "CC:  @dimpase @embray @jhpalmieri @seblabbe @orlitzky @haraldschilly\n\nCleaning means to remove build artifacts from the directory ``@`builddir`@`` (= SAGE_ROOT).\nBut these targets *uninstall* packages from ``@`prefix`@`=$SAGE_LOCAL`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/29097\n\n",
    "created_at": "2020-01-29T01:51:51Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "build/make/Makefile.in: Rename make targets SPKG-clean to SPKG-uninstall",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28860",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @dimpase @embray @jhpalmieri @seblabbe @orlitzky @haraldschilly

Cleaning means to remove build artifacts from the directory ``@`builddir`@`` (= SAGE_ROOT).
But these targets *uninstall* packages from ``@`prefix`@`=$SAGE_LOCAL`.

Issue created by migration from https://trac.sagemath.org/ticket/29097





---

archive/issue_events_073771.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-09T23:09:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28860#event-73771"
}
```



---

archive/issue_comments_407732.json:
```json
{
    "body": "There is no reason for any deprecation here, is there? I have a branch that I'm testing out now to do the change \"clean -> uninstall\", but not the new phony targets `SPKG-deps`.",
    "created_at": "2020-06-16T21:12:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407732",
    "user": "https://github.com/jhpalmieri"
}
```

There is no reason for any deprecation here, is there? I have a branch that I'm testing out now to do the change "clean -> uninstall", but not the new phony targets `SPKG-deps`.



---

archive/issue_comments_407733.json:
```json
{
    "body": "Here is a branch to test out. I wasn't sure about the instruction when docbuilding fails: \n\n```\n    Note: incremental documentation builds sometimes cause spurious\n    error messages. To be certain that these are real errors, run\n    \"make doc-clean\" first and try again.\n```\nThere could be artifacts that `make doc-uninstall` won't clean up, so I think I want to keep this as `make doc-clean`. I don't know if it should also suggest running `./bootstrap`, but that's a separate issue.\n\n---\nNew commits:",
    "created_at": "2020-06-16T22:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407733",
    "user": "https://github.com/jhpalmieri"
}
```

Here is a branch to test out. I wasn't sure about the instruction when docbuilding fails: 

```
    Note: incremental documentation builds sometimes cause spurious
    error messages. To be certain that these are real errors, run
    "make doc-clean" first and try again.
```
There could be artifacts that `make doc-uninstall` won't clean up, so I think I want to keep this as `make doc-clean`. I don't know if it should also suggest running `./bootstrap`, but that's a separate issue.

---
New commits:



---

archive/issue_comments_407734.json:
```json
{
    "body": "> There could be artifacts that make doc-uninstall won't clean up, so I think I want to keep this as make doc-clean\n\n\nRight now `doc-clean` does both `doc-src-clean doc-output-clean`. I suggest,\n\n0. Rename `doc-output-clean` to `doc-uninstall` (already done).\n1. Drop `doc-clean`\n2. Rename `doc-src-clean` to `doc-clean`\n3. Change the suggestion to run both `doc-clean` and `doc-uninstall`\n\nThat way the targets wind up with the right names, and the suggestion doesn't effectively change.\n\nNB: in this hunk the doc-src-clean was dropped (I don't know which is correct):\n\n```\n-doc-html-no-plot: doc-clean $(DOC_DEPENDENCIES)\n+doc-html-no-plot: doc-uninstall $(DOC_DEPENDENCIES)\n```",
    "created_at": "2020-06-17T00:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407734",
    "user": "https://github.com/orlitzky"
}
```

> There could be artifacts that make doc-uninstall won't clean up, so I think I want to keep this as make doc-clean


Right now `doc-clean` does both `doc-src-clean doc-output-clean`. I suggest,

0. Rename `doc-output-clean` to `doc-uninstall` (already done).
1. Drop `doc-clean`
2. Rename `doc-src-clean` to `doc-clean`
3. Change the suggestion to run both `doc-clean` and `doc-uninstall`

That way the targets wind up with the right names, and the suggestion doesn't effectively change.

NB: in this hunk the doc-src-clean was dropped (I don't know which is correct):

```
-doc-html-no-plot: doc-clean $(DOC_DEPENDENCIES)
+doc-html-no-plot: doc-uninstall $(DOC_DEPENDENCIES)
```



---

archive/issue_comments_407735.json:
```json
{
    "body": "Replying to [comment:9 mjo]:\n> > There could be artifacts that make doc-uninstall won't clean up, so I think I want to keep this as make doc-clean\n\n> \n> Right now `doc-clean` does both `doc-src-clean doc-output-clean`. I suggest,\n> \n> 0. Rename `doc-output-clean` to `doc-uninstall` (already done).\n> 1. Drop `doc-clean`\n> 2. Rename `doc-src-clean` to `doc-clean`\n> 3. Change the suggestion to run both `doc-clean` and `doc-uninstall`\n> \n> That way the targets wind up with the right names, and the suggestion doesn't effectively change.\n\n\nMy only reluctance is that I am very used to typing `make doc-clean` when working with tickets involving docbuilding. I don't know how many others are in the same habit, but we would all have to change that habit.\n\n> NB: in this hunk the doc-src-clean was dropped (I don't know which is correct):\n> \n> \n> ```\n> -doc-html-no-plot: doc-clean $(DOC_DEPENDENCIES)\n> +doc-html-no-plot: doc-uninstall $(DOC_DEPENDENCIES)\n> ```\n\n\nThis should be okay: the reason to clean the docs when toggling `doc-html-no-plot` is because inclusion (or not) of plots is cached in the doc output (in local/share/doc/sage/inventory or maybe .../doctrees). So `doc-uninstall` should be good enough. It works for me, at least.",
    "created_at": "2020-06-17T20:49:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407735",
    "user": "https://github.com/jhpalmieri"
}
```

Replying to [comment:9 mjo]:
> > There could be artifacts that make doc-uninstall won't clean up, so I think I want to keep this as make doc-clean

> 
> Right now `doc-clean` does both `doc-src-clean doc-output-clean`. I suggest,
> 
> 0. Rename `doc-output-clean` to `doc-uninstall` (already done).
> 1. Drop `doc-clean`
> 2. Rename `doc-src-clean` to `doc-clean`
> 3. Change the suggestion to run both `doc-clean` and `doc-uninstall`
> 
> That way the targets wind up with the right names, and the suggestion doesn't effectively change.


My only reluctance is that I am very used to typing `make doc-clean` when working with tickets involving docbuilding. I don't know how many others are in the same habit, but we would all have to change that habit.

> NB: in this hunk the doc-src-clean was dropped (I don't know which is correct):
> 
> 
> ```
> -doc-html-no-plot: doc-clean $(DOC_DEPENDENCIES)
> +doc-html-no-plot: doc-uninstall $(DOC_DEPENDENCIES)
> ```


This should be okay: the reason to clean the docs when toggling `doc-html-no-plot` is because inclusion (or not) of plots is cached in the doc output (in local/share/doc/sage/inventory or maybe .../doctrees). So `doc-uninstall` should be good enough. It works for me, at least.



---

archive/issue_comments_407736.json:
```json
{
    "body": "For the `doc-...` cleaning/uninstalling targets, I would like to understand first whether everything that we put in `$SAGE_LOCAL/share/doc/sage/` should really be installed there. \n\nAre `doctrees` and `inventory` needed in the installation at all? Do other Python packages install inventory files? Or is this just something that is reused and updated in an incremental docbuild?",
    "created_at": "2020-08-10T01:15:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407736",
    "user": "https://github.com/mkoeppe"
}
```

For the `doc-...` cleaning/uninstalling targets, I would like to understand first whether everything that we put in `$SAGE_LOCAL/share/doc/sage/` should really be installed there. 

Are `doctrees` and `inventory` needed in the installation at all? Do other Python packages install inventory files? Or is this just something that is reused and updated in an incremental docbuild?



---

archive/issue_comments_407737.json:
```json
{
    "body": "The inventory files are intended to allow for cross-references among different pieces of the documentation: see https://www.sphinx-doc.org/en/master/usage/extensions/intersphinx.html and `set_intersphinx_mapping` in `src/sage/docs/conf.py`. It allows the tutorial (for example) to refer to the reference manual. For example, the reference `:ref:`sage.rings.padics.tutorial`` in `tour_numtheory.rst` in the tutorial points to the reference manual, and I think this uses the inventory files to construct the link when building the documentation.\n\nAccording to https://www.sphinx-doc.org/en/master/man/sphinx-build.html, the doctrees are used to cache the parsed source files before writing output. Once the output has been written, they aren't needed, so I guess they could be moved somewhere else, and I'm guessing the same for the inventory files, but I think they are all needed when building the docs.",
    "created_at": "2020-08-10T05:30:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407737",
    "user": "https://github.com/jhpalmieri"
}
```

The inventory files are intended to allow for cross-references among different pieces of the documentation: see https://www.sphinx-doc.org/en/master/usage/extensions/intersphinx.html and `set_intersphinx_mapping` in `src/sage/docs/conf.py`. It allows the tutorial (for example) to refer to the reference manual. For example, the reference `:ref:`sage.rings.padics.tutorial`` in `tour_numtheory.rst` in the tutorial points to the reference manual, and I think this uses the inventory files to construct the link when building the documentation.

According to https://www.sphinx-doc.org/en/master/man/sphinx-build.html, the doctrees are used to cache the parsed source files before writing output. Once the output has been written, they aren't needed, so I guess they could be moved somewhere else, and I'm guessing the same for the inventory files, but I think they are all needed when building the docs.



---

archive/issue_events_073772.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T02:57:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28860#event-73772"
}
```



---

archive/issue_events_073773.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T02:57:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28860#event-73773"
}
```



---

archive/issue_events_073774.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28860#event-73774"
}
```



---

archive/issue_events_073775.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28860#event-73775"
}
```



---

archive/issue_comments_407738.json:
```json
{
    "body": "Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407738",
    "user": "https://github.com/mkoeppe"
}
```

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_073776.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28860#event-73776"
}
```



---

archive/issue_events_073777.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28860#event-73777"
}
```



---

archive/issue_events_073778.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-27T01:03:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28860#event-73778"
}
```



---

archive/issue_events_073779.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-27T01:03:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28860#event-73779"
}
```



---

archive/issue_events_073780.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:45:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28860#event-73780"
}
```



---

archive/issue_events_073781.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:45:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28860#event-73781"
}
```



---

archive/issue_comments_407739.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-07-21T06:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407739",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_407740.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-07-21T06:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407740",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_407741.json:
```json
{
    "body": "What is the purpose of the `%-SAGE_LOCAL-uninstall` and `%-SAGE_VENV-uninstall` targets? Where are they used?",
    "created_at": "2022-07-21T19:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407741",
    "user": "https://github.com/jhpalmieri"
}
```

What is the purpose of the `%-SAGE_LOCAL-uninstall` and `%-SAGE_VENV-uninstall` targets? Where are they used?



---

archive/issue_comments_407742.json:
```json
{
    "body": "Fixed the description to explain it",
    "created_at": "2022-07-21T19:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407742",
    "user": "https://github.com/mkoeppe"
}
```

Fixed the description to explain it



---

archive/issue_comments_407743.json:
```json
{
    "body": "Ah, but I can probably do better",
    "created_at": "2022-07-21T19:14:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407743",
    "user": "https://github.com/mkoeppe"
}
```

Ah, but I can probably do better



---

archive/issue_comments_407744.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-21T19:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407744",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407745.json:
```json
{
    "body": "Thank you for the explanation and the new target; that now makes sense.\n\nNot from this branch: I don't understand `SAGE_I_TARGETS`. `List of targets that can be run using `sage -i` or `sage -f``. The list contains only `sagelib` and `doc`, so is the implication that one shouldn't use `sage -i sagetex`? As far as I can tell, `SAGE_I_TARGETS` is only used in the `list` target.\n\nRegarding this change in `sage_bootstrap/uninstall.py`:\n\n```\n     # The default path to this directory; however its value should be read\n     # from the environment if possible\n     spkg_inst = pth.join(sage_local, 'var', 'lib', 'sage', 'installed')\n-    spkg_inst = os.environ.get('SAGE_SPKG_INST', spkg_inst)\n```\nIs the point that we now have two possible locations for the installation files, either SAGE_LOCAL or SAGE_VENV, so we can't use the single variable `SAGE_SPKG_INST`? I think the comment about reading the value from the environment should probably be removed or changed.\n\nOtherwise things look good.",
    "created_at": "2022-07-21T22:06:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407745",
    "user": "https://github.com/jhpalmieri"
}
```

Thank you for the explanation and the new target; that now makes sense.

Not from this branch: I don't understand `SAGE_I_TARGETS`. `List of targets that can be run using `sage -i` or `sage -f``. The list contains only `sagelib` and `doc`, so is the implication that one shouldn't use `sage -i sagetex`? As far as I can tell, `SAGE_I_TARGETS` is only used in the `list` target.

Regarding this change in `sage_bootstrap/uninstall.py`:

```
     # The default path to this directory; however its value should be read
     # from the environment if possible
     spkg_inst = pth.join(sage_local, 'var', 'lib', 'sage', 'installed')
-    spkg_inst = os.environ.get('SAGE_SPKG_INST', spkg_inst)
```
Is the point that we now have two possible locations for the installation files, either SAGE_LOCAL or SAGE_VENV, so we can't use the single variable `SAGE_SPKG_INST`? I think the comment about reading the value from the environment should probably be removed or changed.

Otherwise things look good.



---

archive/issue_comments_407746.json:
```json
{
    "body": "And if you're going to fix the comment about environment variables, maybe also fix the docstring for the function to not refer to just `SAGE_LOCAL` but also `SAGE_VENV`? Or point out in the docstring that the variable `sage_local` should be either `SAGE_LOCAL` or `SAGE_VENV`?",
    "created_at": "2022-07-21T22:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407746",
    "user": "https://github.com/jhpalmieri"
}
```

And if you're going to fix the comment about environment variables, maybe also fix the docstring for the function to not refer to just `SAGE_LOCAL` but also `SAGE_VENV`? Or point out in the docstring that the variable `sage_local` should be either `SAGE_LOCAL` or `SAGE_VENV`?



---

archive/issue_comments_407747.json:
```json
{
    "body": "Replying to [comment:36 jhpalmieri]:\n> Regarding this change in `sage_bootstrap/uninstall.py`:\n> \n> ```\n>      # The default path to this directory; however its value should be read\n>      # from the environment if possible\n>      spkg_inst = pth.join(sage_local, 'var', 'lib', 'sage', 'installed')\n> -    spkg_inst = os.environ.get('SAGE_SPKG_INST', spkg_inst)\n> ```\n> Is the point that we now have two possible locations for the installation files, either SAGE_LOCAL or SAGE_VENV, so we can't use the single variable `SAGE_SPKG_INST`?\n\n\nYes.\n\n> I think the comment about reading the value from the environment should probably be removed or changed.\n\n\nThanks, I'll fix that",
    "created_at": "2022-07-21T22:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407747",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:36 jhpalmieri]:
> Regarding this change in `sage_bootstrap/uninstall.py`:
> 
> ```
>      # The default path to this directory; however its value should be read
>      # from the environment if possible
>      spkg_inst = pth.join(sage_local, 'var', 'lib', 'sage', 'installed')
> -    spkg_inst = os.environ.get('SAGE_SPKG_INST', spkg_inst)
> ```
> Is the point that we now have two possible locations for the installation files, either SAGE_LOCAL or SAGE_VENV, so we can't use the single variable `SAGE_SPKG_INST`?


Yes.

> I think the comment about reading the value from the environment should probably be removed or changed.


Thanks, I'll fix that



---

archive/issue_comments_407748.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-21T22:47:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407748",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407749.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-21T22:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407749",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407750.json:
```json
{
    "body": "Replying to [comment:37 jhpalmieri]:\n> And if you're going to fix the comment about environment variables, maybe also fix the docstring for the function to not refer to just `SAGE_LOCAL` but also `SAGE_VENV`? Or point out in the docstring that the variable `sage_local` should be either `SAGE_LOCAL` or `SAGE_VENV`?\n\n\nDone, please take a look",
    "created_at": "2022-07-21T22:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407750",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:37 jhpalmieri]:
> And if you're going to fix the comment about environment variables, maybe also fix the docstring for the function to not refer to just `SAGE_LOCAL` but also `SAGE_VENV`? Or point out in the docstring that the variable `sage_local` should be either `SAGE_LOCAL` or `SAGE_VENV`?


Done, please take a look



---

archive/issue_comments_407751.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-21T22:55:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407751",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407752.json:
```json
{
    "body": "Looks good to me. I don't have access to my usual computer so I can't push to trac right now. If you feel like fixing it, there is a typo:\n\n```diff\ndiff --git a/build/sage_bootstrap/uninstall.py b/build/sage_bootstrap/uninstall.py\nindex feb91ead158..1ce039921fc 100644\n--- a/build/sage_bootstrap/uninstall.py\n+++ b/build/sage_bootstrap/uninstall.py\n@@ -51,7 +51,7 @@ PKGS = pth.join(SAGE_ROOT, 'build', 'pkgs')\n \n def uninstall(spkg_name, sage_local, keep_files=False, verbose=False):\n     \"\"\"\n-    Given a package name and path to an installation tree (SAGE_LOCAL or SAGE_VENV,\n+    Given a package name and path to an installation tree (SAGE_LOCAL or SAGE_VENV),\n     uninstall that package from that tree if it is currently installed.\n     \"\"\"\n \n```",
    "created_at": "2022-07-21T23:07:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407752",
    "user": "https://github.com/jhpalmieri"
}
```

Looks good to me. I don't have access to my usual computer so I can't push to trac right now. If you feel like fixing it, there is a typo:

```diff
diff --git a/build/sage_bootstrap/uninstall.py b/build/sage_bootstrap/uninstall.py
index feb91ead158..1ce039921fc 100644
--- a/build/sage_bootstrap/uninstall.py
+++ b/build/sage_bootstrap/uninstall.py
@@ -51,7 +51,7 @@ PKGS = pth.join(SAGE_ROOT, 'build', 'pkgs')
 
 def uninstall(spkg_name, sage_local, keep_files=False, verbose=False):
     """
-    Given a package name and path to an installation tree (SAGE_LOCAL or SAGE_VENV,
+    Given a package name and path to an installation tree (SAGE_LOCAL or SAGE_VENV),
     uninstall that package from that tree if it is currently installed.
     """
 
```



---

archive/issue_comments_407753.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-07-21T23:07:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407753",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_407754.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2022-07-21T23:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407754",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_407755.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2022-07-21T23:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407755",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_407756.json:
```json
{
    "body": "Thank you!",
    "created_at": "2022-07-21T23:09:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407756",
    "user": "https://github.com/mkoeppe"
}
```

Thank you!



---

archive/issue_comments_407757.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-07-21T23:09:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407757",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_073782.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-28T19:10:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28860#event-73782"
}
```



---

archive/issue_comments_407758.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-07-28T19:10:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28860",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28860#issuecomment-407758",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
