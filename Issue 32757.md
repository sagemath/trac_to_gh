# Issue 32757: Improve coverage collection

Issue created by migration from https://trac.sagemath.org/ticket/32994

Original creator: @tobiasdiez

Original creation time: 2021-12-08 12:31:26

CC:  mkoeppe tscrim @mjungmath egourgoulhon

The current coverage collection is relatively basic as one only keeps track whether a function has a (doc)test or not. On the other hand, there are more advanced tools like [coverage.py](https://coverage.readthedocs.io/en/6.2/) that give more detailed information about which lines and branches are actually executed.
These reports can uploaded e.g. to [codecov](https://about.codecov.io/product/features/) to get a nice visual representation of the coverage and track changes in coverage (in particular for PRs).

In this ticket, we integrate coverage.py in the sage workflow. In particular,
1. Add configuration for coverage.py.
2. Add tox target to run it.
3. Add github workflow that uploads coverage to codecov. (maybe as a follow-up ticket) 

This is part of #28936 and will improve integration of pytest with the coverage collection.


---

Comment by mkoeppe created at 2022-03-05 00:10:25

dup of #33355


---

Comment by mkoeppe created at 2022-03-05 00:10:25

Changing status from new to needs_review.


---

Comment by @tobiasdiez created at 2022-03-05 22:06:36

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2022-03-27 18:22:11

Resolution: duplicate
