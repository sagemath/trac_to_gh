# Issue 14529: pretty unicode banner

archive/issues_014529.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  tmonteil\n\nKeywords: banner, unicode\n\nUsing unicode, one can get the banner to look like that:\n\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Sage Version 5.8, Release Date: 2013-03-15                         \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503                                                                    \u2503\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2503                                                                    \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n```\n\n\nBut maybe it is better to avoid unicode ?\n\nIssue created by migration from https://trac.sagemath.org/ticket/14733\n\n",
    "created_at": "2013-06-12T14:02:10Z",
    "labels": [
        "PLEASE CHANGE",
        "minor",
        "enhancement"
    ],
    "title": "pretty unicode banner",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14529",
    "user": "chapoton"
}
```
Assignee: tbd

CC:  tmonteil

Keywords: banner, unicode

Using unicode, one can get the banner to look like that:

```
┌────────────────────────────────────────────────────────────────────┐
│ Sage Version 5.8, Release Date: 2013-03-15                         │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                    ┃
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┃                                                                    ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```


But maybe it is better to avoid unicode ?

Issue created by migration from https://trac.sagemath.org/ticket/14733





---

archive/issue_comments_184454.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to user interface.",
    "created_at": "2013-06-12T14:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184454",
    "user": "chapoton"
}
```

Changing component from PLEASE CHANGE to user interface.



---

archive/issue_comments_184455.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-06-12T14:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184455",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_184456.json:
```json
{
    "body": "Attachment [trac_14733_banner_unicode.patch](tarball://root/attachments/some-uuid/ticket14733/trac_14733_banner_unicode.patch) by chapoton created at 2013-06-13 09:46:34",
    "created_at": "2013-06-13T09:46:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184456",
    "user": "chapoton"
}
```

Attachment [trac_14733_banner_unicode.patch](tarball://root/attachments/some-uuid/ticket14733/trac_14733_banner_unicode.patch) by chapoton created at 2013-06-13 09:46:34



---

archive/issue_comments_184457.json:
```json
{
    "body": "Since we are already going all-out, how about color instead of a second box for the warning.",
    "created_at": "2013-06-13T11:22:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184457",
    "user": "vbraun"
}
```

Since we are already going all-out, how about color instead of a second box for the warning.



---

archive/issue_comments_184458.json:
```json
{
    "body": "I do not know how to put color, but this is a good idea.\n\nI would put the bold box in red, or the bold box and its content in red.",
    "created_at": "2013-06-13T11:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184458",
    "user": "chapoton"
}
```

I do not know how to put color, but this is a good idea.

I would put the bold box in red, or the bold box and its content in red.



---

archive/issue_comments_184459.json:
```json
{
    "body": "here is color version\n\nfor the bot:\n\napply trac_14733_banner_unicode_color.patch",
    "created_at": "2013-06-22T19:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184459",
    "user": "chapoton"
}
```

here is color version

for the bot:

apply trac_14733_banner_unicode_color.patch



---

archive/issue_comments_184460.json:
```json
{
    "body": "apply trac_14733_banner_unicode_color.patch",
    "created_at": "2013-06-29T19:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184460",
    "user": "chapoton"
}
```

apply trac_14733_banner_unicode_color.patch



---

archive/issue_comments_184461.json:
```json
{
    "body": "Is there somebody interested to review this patch ?\n\napply trac_14733_banner_unicode_color.patch",
    "created_at": "2013-07-05T19:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184461",
    "user": "chapoton"
}
```

Is there somebody interested to review this patch ?

apply trac_14733_banner_unicode_color.patch



---

archive/issue_comments_184462.json:
```json
{
    "body": "Hmmmmmmmmm `O_o`\n\nI don't know what is happening but applying this patch makes absolutely NO difference to the banner I see when Sage starts `O_o`\n\nNathann",
    "created_at": "2013-07-05T19:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184462",
    "user": "ncohen"
}
```

Hmmmmmmmmm `O_o`

I don't know what is happening but applying this patch makes absolutely NO difference to the banner I see when Sage starts `O_o`

Nathann



---

archive/issue_comments_184463.json:
```json
{
    "body": "The banner you see on startup is cached output from the sage-sdist script.",
    "created_at": "2013-07-05T19:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184463",
    "user": "vbraun"
}
```

The banner you see on startup is cached output from the sage-sdist script.



---

archive/issue_comments_184464.json:
```json
{
    "body": "Oh. And how can I test it then ? `O_o`\n\nNathann",
    "created_at": "2013-07-05T19:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184464",
    "user": "ncohen"
}
```

Oh. And how can I test it then ? `O_o`

Nathann



---

archive/issue_comments_184465.json:
```json
{
    "body": "I manually updated `local/bin/sage-banner` and get the following two doctest errors:\n\n```\n$ sage -t --long devel/sage/sage/tests/cmdline.py  # 1 doctest failed\nRunning doctests with ID 2013-07-05-21-44-50-a5339967.\nDoctesting 1 file.\nsage -t --long devel/sage/sage/tests/cmdline.py\n**********************************************************************\nFile \"devel/sage/sage/tests/cmdline.py\", line 185, in sage.tests.cmdline.test_executable\nFailed example:\n    out.find(version()) >= 0\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   1 of 205 in sage.tests.cmdline.test_executable\n    [204 tests, 1 failure, 17.97 s]\n----------------------------------------------------------------------\nsage -t --long devel/sage/sage/tests/cmdline.py  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 18.0 seconds\n    cpu time: 0.2 seconds\n    cumulative wall time: 18.0 seconds\n$ sage -t --long devel/sage/sage/misc/trace.py  # 1 doctest failed\nRunning doctests with ID 2013-07-05-21-45-09-11b2ac64.\nDoctesting 1 file.\nsage -t --long devel/sage/sage/misc/trace.py\n**********************************************************************\nFile \"devel/sage/sage/misc/trace.py\", line 61, in sage.misc.trace.trace\nFailed example:\n    print s.before[s.before.find('-'):]\nExpected:\n    ---...\n    ipdb> c\n    2 * 5\nGot:\n    -06-21                  \u2502\n    \u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n    \u2502 Type \"help()\" for help.                                            \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n    <CSI-31m>\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n    \u2503                                                                    \u2503\n    \u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n    \u2503                                                                    \u2503\n    \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b<CSI-0m>\n    trace('print factor(10)'); print 3+97\n    s<CSI-?1034h>\n    c\n    <CSI-0;34m>sage: <CSI-0m>trace('print factor(10)'); print 3+97\n    > <string>(1)<module>()\n    \n    ipdb> s\n    --Call--\n    > /home/vbraun/opt/sage-5.11.beta3/local/lib/python2.7/site-packages/sage/rings/arith.py(2314)factor()\n       2313 \n    -> 2314 def factor(n, proof=None, int_=False, algorithm='pari', verbose=0, **kwds):\n       2315     \"\"\"\n    \n    ipdb> c\n    2 * 5\n    <BLANKLINE>\n**********************************************************************\n1 item had failures:\n   1 of   9 in sage.misc.trace.trace\n    [8 tests, 1 failure, 1.28 s]\n----------------------------------------------------------------------\nsage -t --long devel/sage/sage/misc/trace.py  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 1.3 seconds\n    cpu time: 0.0 seconds\n    cumulative wall time: 1.3 seconds\n```\n",
    "created_at": "2013-07-06T01:47:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184465",
    "user": "vbraun"
}
```

I manually updated `local/bin/sage-banner` and get the following two doctest errors:

```
$ sage -t --long devel/sage/sage/tests/cmdline.py  # 1 doctest failed
Running doctests with ID 2013-07-05-21-44-50-a5339967.
Doctesting 1 file.
sage -t --long devel/sage/sage/tests/cmdline.py
**********************************************************************
File "devel/sage/sage/tests/cmdline.py", line 185, in sage.tests.cmdline.test_executable
Failed example:
    out.find(version()) >= 0
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   1 of 205 in sage.tests.cmdline.test_executable
    [204 tests, 1 failure, 17.97 s]
----------------------------------------------------------------------
sage -t --long devel/sage/sage/tests/cmdline.py  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 18.0 seconds
    cpu time: 0.2 seconds
    cumulative wall time: 18.0 seconds
$ sage -t --long devel/sage/sage/misc/trace.py  # 1 doctest failed
Running doctests with ID 2013-07-05-21-45-09-11b2ac64.
Doctesting 1 file.
sage -t --long devel/sage/sage/misc/trace.py
**********************************************************************
File "devel/sage/sage/misc/trace.py", line 61, in sage.misc.trace.trace
Failed example:
    print s.before[s.before.find('-'):]
Expected:
    ---...
    ipdb> c
    2 * 5
Got:
    -06-21                  │
    │ Type "notebook()" for the browser-based notebook interface.        │
    │ Type "help()" for help.                                            │
    └────────────────────────────────────────────────────────────────────┘
    <CSI-31m>┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
    ┃                                                                    ┃
    ┃ Warning: this is a prerelease version, and it may be unstable.     ┃
    ┃                                                                    ┃
    ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛<CSI-0m>
    trace('print factor(10)'); print 3+97
    s<CSI-?1034h>
    c
    <CSI-0;34m>sage: <CSI-0m>trace('print factor(10)'); print 3+97
    > <string>(1)<module>()
    
    ipdb> s
    --Call--
    > /home/vbraun/opt/sage-5.11.beta3/local/lib/python2.7/site-packages/sage/rings/arith.py(2314)factor()
       2313 
    -> 2314 def factor(n, proof=None, int_=False, algorithm='pari', verbose=0, **kwds):
       2315     """
    
    ipdb> c
    2 * 5
    <BLANKLINE>
**********************************************************************
1 item had failures:
   1 of   9 in sage.misc.trace.trace
    [8 tests, 1 failure, 1.28 s]
----------------------------------------------------------------------
sage -t --long devel/sage/sage/misc/trace.py  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 1.3 seconds
    cpu time: 0.0 seconds
    cumulative wall time: 1.3 seconds
```




---

archive/issue_comments_184466.json:
```json
{
    "body": "Also, wouldn't it be better to have no empty lines in the warning box? Having one box with and one box without the blank lines really triggers my OCD ;-) \n\n```\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n```\n",
    "created_at": "2013-07-06T02:14:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184466",
    "user": "vbraun"
}
```

Also, wouldn't it be better to have no empty lines in the warning box? Having one box with and one box without the blank lines really triggers my OCD ;-) 

```
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```




---

archive/issue_comments_184467.json:
```json
{
    "body": "Attachment [trac_14733_banner_unicode_color.patch](tarball://root/attachments/some-uuid/ticket14733/trac_14733_banner_unicode_color.patch) by chapoton created at 2013-07-06 10:20:26\n\napply  trac_14733_banner_unicode_color.patch \n\n* I have remove the empty lines in the warning part\n* I have solved the problem with trace.py\n* the problem with cmdline.py is also there without the patch, namely sage -v on a bare 5.11.beta3 does not display anything",
    "created_at": "2013-07-06T10:20:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184467",
    "user": "chapoton"
}
```

Attachment [trac_14733_banner_unicode_color.patch](tarball://root/attachments/some-uuid/ticket14733/trac_14733_banner_unicode_color.patch) by chapoton created at 2013-07-06 10:20:26

apply  trac_14733_banner_unicode_color.patch 

* I have remove the empty lines in the warning part
* I have solved the problem with trace.py
* the problem with cmdline.py is also there without the patch, namely sage -v on a bare 5.11.beta3 does not display anything



---

archive/issue_comments_184468.json:
```json
{
    "body": "If you look at `$SAGE_ROOT/spkg/bin/sage` then you'll see that `sage -v` gets the version out of the cached `sage-banner`. And the regex doesn't succeed any more in extracting the version information from the new banner. It works fine on a vanilla sage-5.11.beta3 with unmodified `sage-banner`.",
    "created_at": "2013-07-06T13:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184468",
    "user": "vbraun"
}
```

If you look at `$SAGE_ROOT/spkg/bin/sage` then you'll see that `sage -v` gets the version out of the cached `sage-banner`. And the regex doesn't succeed any more in extracting the version information from the new banner. It works fine on a vanilla sage-5.11.beta3 with unmodified `sage-banner`.



---

archive/issue_comments_184469.json:
```json
{
    "body": "ok, you are right. But what to do ?\nIt seems to be sufficient to replace the line 343 in $SAGE_ROOT/spkg/bin/sage by\n\n```\n    exec sed -n -e '/Version/s/^[ \u2502]\\{1,\\}//;/Version/s/[ \u2502]\\{1,\\}$//p' \\\n```\n\nBut maybe one has to declare the unicode encoding in the first line of this file too ? I do not know is bash is friendly with unicode.\n\nAnd I have no idea how to deal with this kind of change, I have only worked with patches so far, never with any spkg.",
    "created_at": "2013-07-06T15:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184469",
    "user": "chapoton"
}
```

ok, you are right. But what to do ?
It seems to be sufficient to replace the line 343 in $SAGE_ROOT/spkg/bin/sage by

```
    exec sed -n -e '/Version/s/^[ │]\{1,\}//;/Version/s/[ │]\{1,\}$//p' \
```

But maybe one has to declare the unicode encoding in the first line of this file too ? I do not know is bash is friendly with unicode.

And I have no idea how to deal with this kind of change, I have only worked with patches so far, never with any spkg.



---

archive/issue_comments_184470.json:
```json
{
    "body": "No spkg changes required, you just need to write a patch against the `$SAGE_ROOT` repository",
    "created_at": "2013-07-06T16:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184470",
    "user": "vbraun"
}
```

No spkg changes required, you just need to write a patch against the `$SAGE_ROOT` repository



---

archive/issue_comments_184471.json:
```json
{
    "body": "ok, so here is a patch, but still I am not sure if bash/sed can handle unicode cleanly.",
    "created_at": "2013-07-06T16:47:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184471",
    "user": "chapoton"
}
```

ok, so here is a patch, but still I am not sure if bash/sed can handle unicode cleanly.



---

archive/issue_comments_184472.json:
```json
{
    "body": "Sed just operates on byte strings. I would prefer to make the regex less likely to break by just matching for the part that we want, not the part that we don't want:\n\n```\nsed -n -e 's/.*\\(Version.*Date: [0-9-]*\\).*/\\1/p'\n```\n",
    "created_at": "2013-07-06T18:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184472",
    "user": "vbraun"
}
```

Sed just operates on byte strings. I would prefer to make the regex less likely to break by just matching for the part that we want, not the part that we don't want:

```
sed -n -e 's/.*\(Version.*Date: [0-9-]*\).*/\1/p'
```




---

archive/issue_comments_184473.json:
```json
{
    "body": "ok, I agree that this is better. Here is a modified patch.\n\napply trac_14733_banner_unicode_color.patch trac_14733_version_regexp.patch",
    "created_at": "2013-07-06T19:06:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184473",
    "user": "chapoton"
}
```

ok, I agree that this is better. Here is a modified patch.

apply trac_14733_banner_unicode_color.patch trac_14733_version_regexp.patch



---

archive/issue_comments_184474.json:
```json
{
    "body": "well, the bot does not seem to understand that one patch is for the SAGE_ROOT directory..",
    "created_at": "2013-07-06T19:54:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184474",
    "user": "chapoton"
}
```

well, the bot does not seem to understand that one patch is for the SAGE_ROOT directory..



---

archive/issue_comments_184475.json:
```json
{
    "body": "Yes, thats a limitation of the patchbot",
    "created_at": "2013-07-06T20:19:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184475",
    "user": "vbraun"
}
```

Yes, thats a limitation of the patchbot



---

archive/issue_comments_184476.json:
```json
{
    "body": "Sorry, I forgot to start the regex with \"Sage Version\". The `cmdline.py` test still fails because it expects \"Sage Version...\" instead of \"Version...\"",
    "created_at": "2013-07-07T01:46:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184476",
    "user": "vbraun"
}
```

Sorry, I forgot to start the regex with "Sage Version". The `cmdline.py` test still fails because it expects "Sage Version..." instead of "Version..."



---

archive/issue_comments_184477.json:
```json
{
    "body": "Attachment [trac_14733_version_regexp.patch](tarball://root/attachments/some-uuid/ticket14733/trac_14733_version_regexp.patch) by chapoton created at 2013-07-07 11:16:43",
    "created_at": "2013-07-07T11:16:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184477",
    "user": "chapoton"
}
```

Attachment [trac_14733_version_regexp.patch](tarball://root/attachments/some-uuid/ticket14733/trac_14733_version_regexp.patch) by chapoton created at 2013-07-07 11:16:43



---

archive/issue_comments_184478.json:
```json
{
    "body": "here is a corrected patch",
    "created_at": "2013-07-07T11:17:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184478",
    "user": "chapoton"
}
```

here is a corrected patch



---

archive/issue_comments_184479.json:
```json
{
    "body": "Looks good to me",
    "created_at": "2013-07-07T14:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184479",
    "user": "vbraun"
}
```

Looks good to me



---

archive/issue_comments_184480.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-07-07T14:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184480",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_184481.json:
```json
{
    "body": "I wonder whether coloured UTF-8 passes easily on most terminal, in particular quite a lot of users use sage through a ssh connection. I didn't test further, but on `xvt` (Debian wheezy) i got:\n\n\n```\nsage: sage.misc.banner.banner()\n\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\n\u00e2 Sage Version 5.10.rc0, Release Date: 2013-05-29                    \u00e2\n\u00e2 Type \"notebook()\" for the browser-based notebook interface.        \u00e2\n\u00e2 Type \"help()\" for help.                                            \u00e2\n\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\n\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\n\u00e2                                                                    \u00e2\n\u00e2 Warning: this is a prerelease version, and it may be unstable.     \u00e2\n\u00e2                                                                    \u00e2\n\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\u00e2\n\n```\n",
    "created_at": "2013-07-07T22:56:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184481",
    "user": "tmonteil"
}
```

I wonder whether coloured UTF-8 passes easily on most terminal, in particular quite a lot of users use sage through a ssh connection. I didn't test further, but on `xvt` (Debian wheezy) i got:


```
sage: sage.misc.banner.banner()
ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â Sage Version 5.10.rc0, Release Date: 2013-05-29                    â
â Type "notebook()" for the browser-based notebook interface.        â
â Type "help()" for help.                                            â
ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â                                                                    â
â Warning: this is a prerelease version, and it may be unstable.     â
â                                                                    â
ââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ

```




---

archive/issue_comments_184482.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2013-07-08T00:26:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184482",
    "user": "tmonteil"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_184483.json:
```json
{
    "body": "I tried with more terminal emulators (still using Debian wheezy), and\n\n- `kterm` does not show the boxes (not a serious problem)\n- `Eterm` leads to a very bad output\n- `aterm`, `mrxvt-mini` and `mrxvt` lead to:\n\n\n```\n$ sage\n+--------------------------------------------------------------------+\n+--------------------------------------------------------------------+\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\nsage: sage.misc.banner.banner()\n\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\n\u00e2\ufffd\ufffd Sage Version 5.10.rc0, Release Date: 2013-05-29                    \u00e2\ufffd\ufffd\n\u00e2\ufffd\ufffd Type \"notebook()\" for the browser-based notebook interface.        \u00e2\ufffd\ufffd\n\u00e2\ufffd\ufffd Type \"help()\" for help.                                            \u00e2\ufffd\ufffd\n\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\n\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\n\u00e2\ufffd\ufffd                                                                    \u00e2\ufffd\ufffd\n\u00e2\ufffd\ufffd Warning: this is a prerelease version, and it may be unstable.     \u00e2\ufffd\ufffd\n\u00e2\ufffd\ufffd                                                                    \u00e2\ufffd\ufffd\n\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\u00e2\ufffd\ufffd\nsage:\n```\n\n| Sage Version 5.10.rc0, Release Date: 2013-05-29                    |\n| Type \"notebook()\" for the browser-based notebook interface.        |\n| Type \"help()\" for help.                                            |\nAcces via various ssh connection (especially Putty on windows connecting to various server settings) should be tested as well.\n\nWhile i find this banner very pretty, i do not have any idea how to fix this encoding issue. Any idea ?",
    "created_at": "2013-07-08T00:26:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184483",
    "user": "tmonteil"
}
```

I tried with more terminal emulators (still using Debian wheezy), and

- `kterm` does not show the boxes (not a serious problem)
- `Eterm` leads to a very bad output
- `aterm`, `mrxvt-mini` and `mrxvt` lead to:


```
$ sage
+--------------------------------------------------------------------+
+--------------------------------------------------------------------+
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************
sage: sage.misc.banner.banner()
â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��
â�� Sage Version 5.10.rc0, Release Date: 2013-05-29                    â��
â�� Type "notebook()" for the browser-based notebook interface.        â��
â�� Type "help()" for help.                                            â��
â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��
â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��
â��                                                                    â��
â�� Warning: this is a prerelease version, and it may be unstable.     â��
â��                                                                    â��
â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��â��
sage:
```

| Sage Version 5.10.rc0, Release Date: 2013-05-29                    |
| Type "notebook()" for the browser-based notebook interface.        |
| Type "help()" for help.                                            |
Acces via various ssh connection (especially Putty on windows connecting to various server settings) should be tested as well.

While i find this banner very pretty, i do not have any idea how to fix this encoding issue. Any idea ?



---

archive/issue_comments_184484.json:
```json
{
    "body": "Given that Sage is gravitating towards UTF-8 encoded source files (and, by extension, docstrings), I would argue that it is a feature that we make it immediately and unambiguously clear to the user that his terminal does not support utf8. There is no API to query the terminal whether it is utf8 capable, you essentially can only check it by displaying some non-ascii characters. Also, even if you don't have a UTF-8 capable terminal you can still use Sage, only the banner looks funky.\n\nIn particular, nobody should be using the following any more at this time:\n* rxvt (and various older *xvt clones) does not support unicode, it has been forked into rxvt-unicode (a.k.a. urxvt).\n* Eterm does not support unicode. Some distros (debian) apply an unofficial patch, but your mileage may vary.\n\nPlain xterm, urxvt, and gnome-terminal work for me.\n\nSsh will happily pass UTF-8 through, it is the terminal at the other end that needs to be able to display it.",
    "created_at": "2013-07-08T01:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184484",
    "user": "vbraun"
}
```

Given that Sage is gravitating towards UTF-8 encoded source files (and, by extension, docstrings), I would argue that it is a feature that we make it immediately and unambiguously clear to the user that his terminal does not support utf8. There is no API to query the terminal whether it is utf8 capable, you essentially can only check it by displaying some non-ascii characters. Also, even if you don't have a UTF-8 capable terminal you can still use Sage, only the banner looks funky.

In particular, nobody should be using the following any more at this time:
* rxvt (and various older *xvt clones) does not support unicode, it has been forked into rxvt-unicode (a.k.a. urxvt).
* Eterm does not support unicode. Some distros (debian) apply an unofficial patch, but your mileage may vary.

Plain xterm, urxvt, and gnome-terminal work for me.

Ssh will happily pass UTF-8 through, it is the terminal at the other end that needs to be able to display it.



---

archive/issue_comments_184485.json:
```json
{
    "body": "I've posted a RFC to sage-devel: https://groups.google.com/d/msg/sage-devel/GbaC9yeicAY/GHYcXAoxxP8J",
    "created_at": "2013-07-08T02:06:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184485",
    "user": "vbraun"
}
```

I've posted a RFC to sage-devel: https://groups.google.com/d/msg/sage-devel/GbaC9yeicAY/GHYcXAoxxP8J



---

archive/issue_comments_184486.json:
```json
{
    "body": "This is somewhat unrelated comment, but the following may be considered by the patch writer.\n\nThe first line  \"Sage Version 5.8, Release Date: 2013-03-15\" may be simplified to\n\n\"Sage 5.8, released on 2013-03-15\"\n\nI think currently \"Version\" is unduly prominent and \"Date\" seems redundant. Too much minimalistic? :-)",
    "created_at": "2013-07-09T02:13:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184486",
    "user": "klee"
}
```

This is somewhat unrelated comment, but the following may be considered by the patch writer.

The first line  "Sage Version 5.8, Release Date: 2013-03-15" may be simplified to

"Sage 5.8, released on 2013-03-15"

I think currently "Version" is unduly prominent and "Date" seems redundant. Too much minimalistic? :-)



---

archive/issue_comments_184487.json:
```json
{
    "body": "well, there seems to be no much hope to get that patch in sage, so let me keep the patch as it is for the moment.",
    "created_at": "2013-07-11T18:51:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184487",
    "user": "chapoton"
}
```

well, there seems to be no much hope to get that patch in sage, so let me keep the patch as it is for the moment.



---

archive/issue_comments_184488.json:
```json
{
    "body": "and let me keep this as need review in the present state, just in case somebody is interested",
    "created_at": "2013-07-25T14:40:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184488",
    "user": "chapoton"
}
```

and let me keep this as need review in the present state, just in case somebody is interested



---

archive/issue_comments_184489.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2013-07-25T14:40:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184489",
    "user": "chapoton"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_184490.json:
```json
{
    "body": "Replying to [comment:29 chapoton]:\n> well, there seems to be no much hope to get that patch in sage, so let me keep the patch as it is for the moment.\n\nI used the patch, and I think it is beautiful.  I completely disagree with the comments such as \" I dislike the UTF-8 banner because it looks too nice.\" and \"Keep the banner short and simple ; people don't come to sage to enjoy that sight!\"    Clean beauty is exactly what people (at least me!) want in software.  The banner in Sage right now, which I probably wrote (?), looks frankly ugly and like a hack, compared to the one on this patch.   \n\nAlso, UTF is clearly the future of strings, having native default support in modern interpreters, editors, etc., and also being critical to supporting users who aren't using English.\n\nThis patch is along the same lines as the recent inclusion of a nice color prompt (thanks volker), in that it makes Sage prettier and more pleasant to use. \n\nSo my strong vote *for* this ticket.  Moreover, I like it so much I'll be henceforth applying it to the standard system-wide version of Sage at https://cloud.sagemath.com, even if it doesn't get into Sage.     In particular, I disagree with \" If you're doing something that requires nice output you should probably be using a notebook interface anyways\" -- since the terminal interface *is* part of the notebook interface now, and it must look nice.",
    "created_at": "2013-07-26T04:52:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184490",
    "user": "was"
}
```

Replying to [comment:29 chapoton]:
> well, there seems to be no much hope to get that patch in sage, so let me keep the patch as it is for the moment.

I used the patch, and I think it is beautiful.  I completely disagree with the comments such as " I dislike the UTF-8 banner because it looks too nice." and "Keep the banner short and simple ; people don't come to sage to enjoy that sight!"    Clean beauty is exactly what people (at least me!) want in software.  The banner in Sage right now, which I probably wrote (?), looks frankly ugly and like a hack, compared to the one on this patch.   

Also, UTF is clearly the future of strings, having native default support in modern interpreters, editors, etc., and also being critical to supporting users who aren't using English.

This patch is along the same lines as the recent inclusion of a nice color prompt (thanks volker), in that it makes Sage prettier and more pleasant to use. 

So my strong vote *for* this ticket.  Moreover, I like it so much I'll be henceforth applying it to the standard system-wide version of Sage at https://cloud.sagemath.com, even if it doesn't get into Sage.     In particular, I disagree with " If you're doing something that requires nice output you should probably be using a notebook interface anyways" -- since the terminal interface *is* part of the notebook interface now, and it must look nice.



---

archive/issue_comments_184491.json:
```json
{
    "body": "Thanks William for your strong opinion. I hope that somebody will soon find the time to review this patch.",
    "created_at": "2013-08-02T09:13:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184491",
    "user": "chapoton"
}
```

Thanks William for your strong opinion. I hope that somebody will soon find the time to review this patch.



---

archive/issue_comments_184492.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-08-05T21:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184492",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_184493.json:
```json
{
    "body": "Replying to [comment:9 ncohen]:\n> Oh. And how can I test it then ? `O_o`\n\nApply the two patches, start sage and type `banner()` at the prompt.  Make it the banner by typing `sage -c \"banner()\" > local/bin/sage-banner`.",
    "created_at": "2013-08-15T19:46:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184493",
    "user": "was"
}
```

Replying to [comment:9 ncohen]:
> Oh. And how can I test it then ? `O_o`

Apply the two patches, start sage and type `banner()` at the prompt.  Make it the banner by typing `sage -c "banner()" > local/bin/sage-banner`.



---

archive/issue_comments_184494.json:
```json
{
    "body": "Wow. Nice ! `:-)`\n\nNathann",
    "created_at": "2013-08-16T18:46:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184494",
    "user": "ncohen"
}
```

Wow. Nice ! `:-)`

Nathann



---

archive/issue_comments_184495.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-08-16T21:12:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184495",
    "user": "jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_184496.json:
```json
{
    "body": "This probably causes `sage -version` to hang on MacOS X; see #15072.",
    "created_at": "2013-08-21T10:06:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14529#issuecomment-184496",
    "user": "nthiery"
}
```

This probably causes `sage -version` to hang on MacOS X; see #15072.
