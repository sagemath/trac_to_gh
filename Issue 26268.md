# Issue 26268: clean and improve convexity_properties.pyx

Issue created by migration from https://trac.sagemath.org/ticket/26505

Original creator: dcoudert

Original creation time: 2018-10-18 16:17:27

In this ticket we:
- use method `c_distances_all_pairs` to speed up initialization and reduce memory consumption (before, the distance matrix was stored in a dict of dict)
- use a binary matrix to simplify some parts of the code (initialization and deallocation)
- clean the file (PEP8)


---

Comment by dcoudert created at 2018-10-18 16:18:35

Changing status from new to needs_review.


---

Comment by dcoudert created at 2018-10-18 16:18:35

New commits:


---

Comment by dcoudert created at 2018-10-18 16:18:35

Changing keywords from "" to "py3, graph".


---

Comment by slelievre created at 2018-10-18 18:06:10

Trick: you can save the + signs here:

```
            raise ValueError("this is currenly implemented for Graphs only, "+
                             "but only minor updates are needed if you want "+
                             "to make it support DiGraphs too")
```

and just write:

```
            raise ValueError("this is currently implemented for Graphs only, "
                             "but only minor updates are needed if you want "
                             "to make it support DiGraphs too")
```

(while you're at it, fix "currenly" -> "currently" in this ValueError message).


---

Comment by git created at 2018-10-18 19:50:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2018-10-18 19:51:37

Thanks for the comments. I didn't know that the `+` signs are not needed in this case.


---

Comment by git created at 2018-10-21 10:12:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-10-23 16:10:04

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2018-10-23 16:10:04

Strictly speaking, this

```
            raise ValueError("this is currently implemented for Graphs only, "
                             "but only minor updates are needed if you want "
                             "to make it support DiGraphs too")
```

should be a `NotImplementedError`, but I won't make you change that (if you do, you can set this back to a positive review on my behalf).


---

Comment by dcoudert created at 2018-10-24 06:46:11

Changing status from positive_review to needs_work.


---

Comment by dcoudert created at 2018-10-24 06:47:07

Changing status from needs_work to positive_review.


---

Comment by dcoudert created at 2018-10-24 06:47:07

I did the change. It's effectively better like that. Thank you.


---

Comment by dcoudert created at 2018-10-24 06:48:51

Changing status from positive_review to needs_work.


---

Comment by dcoudert created at 2018-10-24 06:48:51

forgot the push


---

Comment by git created at 2018-10-24 06:49:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2018-10-24 06:49:47

done.


---

Comment by dcoudert created at 2018-10-24 06:49:47

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2018-10-25 06:47:02

Resolution: fixed
