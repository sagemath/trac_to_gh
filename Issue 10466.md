# Issue 10466: analytic combinatorics: new code for computing asymptotics for multivariate generating functions

archive/issues_010466.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  cyril.banderier zaf tmonteil dkrenn behackl\n\nKeywords: analytic combinatorics, multivariate generating functions, asymptotics\n\nThis code is a collection of functions designed\nto compute asymptotics of Maclaurin coefficients of certain classes of \nmultivariate generating functions. \n\nThe main function asymptotics() returns the first `N` terms of \nthe asymptotic expansion of the Maclaurin coefficients `F_{n\\alpha}` \nof the multivariate meromorphic function `F=G/H` as `n\\to\\infty`.\nIt assumes that `F` is holomorphic in a neighborhood of the origin, \nthat `H` is a polynomial, and that asymptotics in the direction of\n`\\alpha` (a tuple of positive integers) are controlled by smooth\nor multiple points.\n\nIssue created by migration from https://trac.sagemath.org/ticket/10519\n\n",
    "created_at": "2010-12-22T22:27:17Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "title": "analytic combinatorics: new code for computing asymptotics for multivariate generating functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10466",
    "user": "araichev"
}
```
Assignee: sage-combinat

CC:  cyril.banderier zaf tmonteil dkrenn behackl

Keywords: analytic combinatorics, multivariate generating functions, asymptotics

This code is a collection of functions designed
to compute asymptotics of Maclaurin coefficients of certain classes of 
multivariate generating functions. 

The main function asymptotics() returns the first `N` terms of 
the asymptotic expansion of the Maclaurin coefficients `F_{n\alpha}` 
of the multivariate meromorphic function `F=G/H` as `n\to\infty`.
It assumes that `F` is holomorphic in a neighborhood of the origin, 
that `H` is a polynomial, and that asymptotics in the direction of
`\alpha` (a tuple of positive integers) are controlled by smooth
or multiple points.

Issue created by migration from https://trac.sagemath.org/ticket/10519





---

archive/issue_comments_108637.json:
```json
{
    "body": "Attachment [mgf.sage](tarball://root/attachments/some-uuid/ticket10519/mgf.sage) by araichev created at 2010-12-22 22:28:02",
    "created_at": "2010-12-22T22:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108637",
    "user": "araichev"
}
```

Attachment [mgf.sage](tarball://root/attachments/some-uuid/ticket10519/mgf.sage) by araichev created at 2010-12-22 22:28:02



---

archive/issue_comments_108638.json:
```json
{
    "body": "Hi Alex,\n\nI can't address the mathematics on this one, but can give some hints about getting this reviewed.\n\n\n1.  You'll want to submit this as a patch - then folks can run the doctests, check the documentation formatting.  There is a lot of checking that can't happen easily with a *.sage file.  (See below.)  Read the \"Walk Through\" section of the developer guide for help.\n\n\n2.  Your examples need slightly different formatting, like\n\n\n```\n    EXAMPLES::\n\n        sage: input 1\n        output-1\n\n    Something nice to say. ::\n\n        sage: input-2\n        output-2\n```\n\n\nDouble-colons start verbatim blocks and sometimes print as colons.\n\nSage code samples needs indentation.\n\n\n3.  Sage is mostly object-oriented.  \"Internal\" method names should begin with an underscore, then they won't show in tab-completion etc (Python convention).\n\nAll your functions won't be available in teh global namespace (where they could conflict with other).  You should find an **object** (like maybe some kind of polynomial, especially if it is already int eh combinatorial library?) and make your functions be methods on that object.\n\n\nThanks for your contribution - I hope the above is helpful for you.\n\nRob",
    "created_at": "2010-12-27T07:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108638",
    "user": "rbeezer"
}
```

Hi Alex,

I can't address the mathematics on this one, but can give some hints about getting this reviewed.


1.  You'll want to submit this as a patch - then folks can run the doctests, check the documentation formatting.  There is a lot of checking that can't happen easily with a *.sage file.  (See below.)  Read the "Walk Through" section of the developer guide for help.


2.  Your examples need slightly different formatting, like


```
    EXAMPLES::

        sage: input 1
        output-1

    Something nice to say. ::

        sage: input-2
        output-2
```


Double-colons start verbatim blocks and sometimes print as colons.

Sage code samples needs indentation.


3.  Sage is mostly object-oriented.  "Internal" method names should begin with an underscore, then they won't show in tab-completion etc (Python convention).

All your functions won't be available in teh global namespace (where they could conflict with other).  You should find an **object** (like maybe some kind of polynomial, especially if it is already int eh combinatorial library?) and make your functions be methods on that object.


Thanks for your contribution - I hope the above is helpful for you.

Rob



---

archive/issue_comments_108639.json:
```json
{
    "body": "Changing status from new to needs_work.",
    "created_at": "2011-01-05T00:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108639",
    "user": "araichev"
}
```

Changing status from new to needs_work.



---

archive/issue_comments_108640.json:
```json
{
    "body": "Question for you experienced Sage developers: how can i better package my code?  \n\nI think it makes sense to move the major functions such as 'asymptotics' to methods in the class /Applications/sage/devel/sage/sage/rings/polynomial/multi_polynomial.pyx, but what about the subsidiary functions that don't concern polynomials in particular such as 'diff_prod' which calculates derivatives of products and solves equations?",
    "created_at": "2011-01-05T00:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108640",
    "user": "araichev"
}
```

Question for you experienced Sage developers: how can i better package my code?  

I think it makes sense to move the major functions such as 'asymptotics' to methods in the class /Applications/sage/devel/sage/sage/rings/polynomial/multi_polynomial.pyx, but what about the subsidiary functions that don't concern polynomials in particular such as 'diff_prod' which calculates derivatives of products and solves equations?



---

archive/issue_comments_108641.json:
```json
{
    "body": "> Question for you experienced Sage developers: how can i better package my code? \n\nHi, I am currently at Sage Days 28. Right now, there is a discussion about\nAnalytic combinatorics in Sage and your code was mentionned in the discussion.\nI am not an expert of the domain, but I am coding oriented object Python since\nsome time now. So below are just some of my thoughts to, I hope, help you turn\nyour set of functions into an oriented object structure.\n\nHow to structure a bunch of functions into classes?  How to find which objects\n(python classes) you need? Here is the trick I personaly use. Consider each of\nyour functions as a question you ask. Then, ask yourself to who are you asking\neach of your questions? Answers often gives you a good hint about the objects\nyou need to implement. EXAMPLE. Suppose I code the function ``determinant``.\nQuestion : ``To who do I ask the determinant?``. Answer: ``To a matrix``.\nHence, ``matrix`` might be a good object (a python class) to implement. \n\nYou are the best person to answer to these questions. You might have 30\nfunctions in you file, but only two or three different answers to the above\nquestion. Regroup the similar functions together: they will become the methods\nof a same class.\n\nThe sage file you uploaded starts with :\n\n\n```\n> This code relates to analytic combinatorics.\n> More specifically, it is a collection of functions designed\n> to compute asymptotics of Maclaurin coefficients of certain classes of\n> multivariate generating functions.\n\n> The main function asymptotics() returns the first `N` terms of\n> the asymptotic expansion of the Maclaurin coefficients `F_{n\\alpha}`\n> of the multivariate meromorphic function `F=G/H` as `n\\to\\infty`.\n> It assumes that `F` is holomorphic in a neighborhood of the origin,\n> that `H` is a polynomial, and that asymptotics in the direction of\n> `\\alpha` (a tuple of positive integers) are controlled by smooth\n> or multiple points.\n```\n\n\nReading only these lines, I imagine the following structure:\n\n\n```python\n\nclass HolomorphicMultivariateMeromorphicFunction(object):\n\n    # Constructor of the object\n    def __init__(self, F, G):\n        #stores important information on the object as attributes of self\n        self._F = F\n        self._G = G\n\n    def maclaurin_coefficients(self, n, alpha):\n        r\"\"\"\n        Return the maclaurin coefficients of self.\n\n        INPUT:\n\n        - ``alpha`` - tuple of positive integers\n\n        OUTPUT:\n\n        a python list of the first terms \n        \n        OR \n        \n        maybe an object of a class you implement if there exists pertinent\n        questions to ask to it.\n        \"\"\"\n        #Do some computations based (I guess) on self._F and self._G\n        intermediate_result1 = self.some_intermediate_computations_1()\n        #Do more computations\n        return something\n\n    def asymptotics(self, N, alpha):\n        r\"\"\"\n        Returns the asymptotics of Maclaurin coefficients.\n        \"\"\"\n        #Do some computations based (I guess) on self._F and self._G\n        intermediate_result2 = self.some_intermediate_computations_2()\n        intermediate_result3 = self.some_intermediate_computations_3()\n        return something\n\n    #put here all the others functions needed to compute the asymptotics\n    def some_intermediate_computations_1(self):\n        pass\n    def some_intermediate_computations_2(self):\n        pass\n    def some_intermediate_computations_3(self):\n        pass\n\n    ...\n```\n\n\nIt also looks like you need some robustness somehow. But I need to know more\ninformation about what means \n\n> that asymptotics in the direction of `\\alpha` (a tuple of positive integers)\n> are controlled by smooth or multiple points.\n\nto decide whether this is checked at the creation of the object or before\nreturning the asymptotics. But these hypothesis should be checked somewhere.\n\nHope this helps.\n\nCheers,\n\nS\u00e9bastien Labb\u00e9, Montr\u00e9al, (but currently at Sage Days 28, Orsay, France)",
    "created_at": "2011-01-19T15:26:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108641",
    "user": "slabbe"
}
```

> Question for you experienced Sage developers: how can i better package my code? 

Hi, I am currently at Sage Days 28. Right now, there is a discussion about
Analytic combinatorics in Sage and your code was mentionned in the discussion.
I am not an expert of the domain, but I am coding oriented object Python since
some time now. So below are just some of my thoughts to, I hope, help you turn
your set of functions into an oriented object structure.

How to structure a bunch of functions into classes?  How to find which objects
(python classes) you need? Here is the trick I personaly use. Consider each of
your functions as a question you ask. Then, ask yourself to who are you asking
each of your questions? Answers often gives you a good hint about the objects
you need to implement. EXAMPLE. Suppose I code the function ``determinant``.
Question : ``To who do I ask the determinant?``. Answer: ``To a matrix``.
Hence, ``matrix`` might be a good object (a python class) to implement. 

You are the best person to answer to these questions. You might have 30
functions in you file, but only two or three different answers to the above
question. Regroup the similar functions together: they will become the methods
of a same class.

The sage file you uploaded starts with :


```
> This code relates to analytic combinatorics.
> More specifically, it is a collection of functions designed
> to compute asymptotics of Maclaurin coefficients of certain classes of
> multivariate generating functions.

> The main function asymptotics() returns the first `N` terms of
> the asymptotic expansion of the Maclaurin coefficients `F_{n\alpha}`
> of the multivariate meromorphic function `F=G/H` as `n\to\infty`.
> It assumes that `F` is holomorphic in a neighborhood of the origin,
> that `H` is a polynomial, and that asymptotics in the direction of
> `\alpha` (a tuple of positive integers) are controlled by smooth
> or multiple points.
```


Reading only these lines, I imagine the following structure:


```python

class HolomorphicMultivariateMeromorphicFunction(object):

    # Constructor of the object
    def __init__(self, F, G):
        #stores important information on the object as attributes of self
        self._F = F
        self._G = G

    def maclaurin_coefficients(self, n, alpha):
        r"""
        Return the maclaurin coefficients of self.

        INPUT:

        - ``alpha`` - tuple of positive integers

        OUTPUT:

        a python list of the first terms 
        
        OR 
        
        maybe an object of a class you implement if there exists pertinent
        questions to ask to it.
        """
        #Do some computations based (I guess) on self._F and self._G
        intermediate_result1 = self.some_intermediate_computations_1()
        #Do more computations
        return something

    def asymptotics(self, N, alpha):
        r"""
        Returns the asymptotics of Maclaurin coefficients.
        """
        #Do some computations based (I guess) on self._F and self._G
        intermediate_result2 = self.some_intermediate_computations_2()
        intermediate_result3 = self.some_intermediate_computations_3()
        return something

    #put here all the others functions needed to compute the asymptotics
    def some_intermediate_computations_1(self):
        pass
    def some_intermediate_computations_2(self):
        pass
    def some_intermediate_computations_3(self):
        pass

    ...
```


It also looks like you need some robustness somehow. But I need to know more
information about what means 

> that asymptotics in the direction of `\alpha` (a tuple of positive integers)
> are controlled by smooth or multiple points.

to decide whether this is checked at the creation of the object or before
returning the asymptotics. But these hypothesis should be checked somewhere.

Hope this helps.

Cheers,

Sébastien Labbé, Montréal, (but currently at Sage Days 28, Orsay, France)



---

archive/issue_comments_108642.json:
```json
{
    "body": "Hi Sebastien:\n\nThanks very much for your helpful comments.  I've been working on rewriting my code in an object-oriented way and will incorporate your suggestions.  Some functions in mgf.sage, such as deciding whether a list of polynomials is algebraically dependent, are general purpose, and so i'm trying to put them into existing Sage classes.  The others are more specific to asymptotics and deserve their own class similar to the one you outlined above.  Robustness is also something i need to improve upon.\n\nI'll post my modifications here after i write and test them more.\n\nThanks again.  \n\nAlex",
    "created_at": "2011-01-20T00:07:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108642",
    "user": "araichev"
}
```

Hi Sebastien:

Thanks very much for your helpful comments.  I've been working on rewriting my code in an object-oriented way and will incorporate your suggestions.  Some functions in mgf.sage, such as deciding whether a list of polynomials is algebraically dependent, are general purpose, and so i'm trying to put them into existing Sage classes.  The others are more specific to asymptotics and deserve their own class similar to the one you outlined above.  Robustness is also something i need to improve upon.

I'll post my modifications here after i write and test them more.

Thanks again.  

Alex



---

archive/issue_comments_108643.json:
```json
{
    "body": "Attachment [amgf_alpha_0_5.sage](tarball://root/attachments/some-uuid/ticket10519/amgf_alpha_0_5.sage) by araichev created at 2011-05-01 23:59:09\n\nNew object oriented version",
    "created_at": "2011-05-01T23:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108643",
    "user": "araichev"
}
```

Attachment [amgf_alpha_0_5.sage](tarball://root/attachments/some-uuid/ticket10519/amgf_alpha_0_5.sage) by araichev created at 2011-05-01 23:59:09

New object oriented version



---

archive/issue_comments_108644.json:
```json
{
    "body": "Attachment [amgf.sage](tarball://root/attachments/some-uuid/ticket10519/amgf.sage) by araichev created at 2011-05-06 00:27:25\n\nFixed a bug in cohomologous_integrand()",
    "created_at": "2011-05-06T00:27:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108644",
    "user": "araichev"
}
```

Attachment [amgf.sage](tarball://root/attachments/some-uuid/ticket10519/amgf.sage) by araichev created at 2011-05-06 00:27:25

Fixed a bug in cohomologous_integrand()



---

archive/issue_comments_108645.json:
```json
{
    "body": "Hi Sebastien et al:\n\nI rewrote my code in object-oriented style.  Please have a look if you have the time.  Do i need to make the file into a patch, or is it useable as is?\n\nThanks for your help.\nAlex",
    "created_at": "2011-05-06T00:30:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108645",
    "user": "araichev"
}
```

Hi Sebastien et al:

I rewrote my code in object-oriented style.  Please have a look if you have the time.  Do i need to make the file into a patch, or is it useable as is?

Thanks for your help.
Alex



---

archive/issue_comments_108646.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-05-06T00:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108646",
    "user": "araichev"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_108647.json:
```json
{
    "body": "Cool. I now see that a lot of the functions are now inside a class, which looks better. So, as I said earlier, this is not really my field of study, so I don't know how far I can go on that review. But, I can suggest at least two things:\n\n1. It would be better if you post a Mercurial patch instead of a Sage file so that people can apply it and test it. Are you able to do this? Take a look at the [Sage Developper's Guide](http://sagemath.org/doc/developer/), where it should be explain how to create a patch.\n\n\nTo add your file to the documentation, you might want to look [here](http://sagemath.org/doc/developer/sage_manuals.html#adding-a-new-file).\n\nThis winter, I gave a [presentation](http://www.liafa.jussieu.fr/~labbe/Sage/how-to-contribute/) on How to Contribute to Sage. This may helps you to start with Mercurial for instance.\n\nAlso, right now, I am working on #11379 where I am adding a new file to Sage. You might find it helpfull to see how I proceed.\n\n\n2. Some the [Python convention](http://sagemath.org/doc/developer/conventions.html#python-coding-conventions) are not always followed. See also [pep-0008](http://www.python.org/dev/peps/pep-0008/). Especially for spaces :\n\n\n```\n      Yes:\n\n          i = i + 1\n\n      No:\n\n          i= i+1\n```\n",
    "created_at": "2011-06-01T20:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108647",
    "user": "slabbe"
}
```

Cool. I now see that a lot of the functions are now inside a class, which looks better. So, as I said earlier, this is not really my field of study, so I don't know how far I can go on that review. But, I can suggest at least two things:

1. It would be better if you post a Mercurial patch instead of a Sage file so that people can apply it and test it. Are you able to do this? Take a look at the [Sage Developper's Guide](http://sagemath.org/doc/developer/), where it should be explain how to create a patch.


To add your file to the documentation, you might want to look [here](http://sagemath.org/doc/developer/sage_manuals.html#adding-a-new-file).

This winter, I gave a [presentation](http://www.liafa.jussieu.fr/~labbe/Sage/how-to-contribute/) on How to Contribute to Sage. This may helps you to start with Mercurial for instance.

Also, right now, I am working on #11379 where I am adding a new file to Sage. You might find it helpfull to see how I proceed.


2. Some the [Python convention](http://sagemath.org/doc/developer/conventions.html#python-coding-conventions) are not always followed. See also [pep-0008](http://www.python.org/dev/peps/pep-0008/). Especially for spaces :


```
      Yes:

          i = i + 1

      No:

          i= i+1
```




---

archive/issue_comments_108648.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-06-01T20:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108648",
    "user": "slabbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_108649.json:
```json
{
    "body": "To add a file to a patch, you must do:\n\n\n```\nsage -hg add your_file.py\n```\n\n\nI was not able to find this information anywhere which is strange...\n\nTell me if you have questions.\n\nS\u00e9bastien",
    "created_at": "2011-06-01T21:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108649",
    "user": "slabbe"
}
```

To add a file to a patch, you must do:


```
sage -hg add your_file.py
```


I was not able to find this information anywhere which is strange...

Tell me if you have questions.

Sébastien



---

archive/issue_comments_108650.json:
```json
{
    "body": "Thanks for your help, Se'bastien. I'm trying to put my Sage file into a patch by following your presentation slides, but am running into difficulties. I cloned Sage and copied my Sage file as 'amgf.sage' into \n\n/Applications/sage/devel/sage-araichev/sage/combinat/\n\nI rebuilt Sage etc. and made it to step 10 \"Test the changes\" of your slides. But when i run Sage and test a few commands, Sage doesn't seem to see the QuasiRationalExpression class i created in /Applications/sage/devel/sage-araichev/sage/combinat/amgf.sage. \n\nI thought this might be because amgf.sage is a Sage file and not a Python file. So i renamed it amgf.py instead and got syntax errors. What's up with that? Do i have to rewrite all my code in Python instead of Sage? \n\nThanks for your attention.\nAlex",
    "created_at": "2011-06-11T04:01:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108650",
    "user": "araichev"
}
```

Thanks for your help, Se'bastien. I'm trying to put my Sage file into a patch by following your presentation slides, but am running into difficulties. I cloned Sage and copied my Sage file as 'amgf.sage' into 

/Applications/sage/devel/sage-araichev/sage/combinat/

I rebuilt Sage etc. and made it to step 10 "Test the changes" of your slides. But when i run Sage and test a few commands, Sage doesn't seem to see the QuasiRationalExpression class i created in /Applications/sage/devel/sage-araichev/sage/combinat/amgf.sage. 

I thought this might be because amgf.sage is a Sage file and not a Python file. So i renamed it amgf.py instead and got syntax errors. What's up with that? Do i have to rewrite all my code in Python instead of Sage? 

Thanks for your attention.
Alex



---

archive/issue_comments_108651.json:
```json
{
    "body": "Hi Alex,\n\n> I thought this might be because amgf.sage is a Sage file and not a Python\n> file. So i renamed it amgf.py instead and got syntax errors. What's up with\n> that? Do i have to rewrite all my code in Python instead of Sage?\n\nThe basic answer is yes, but Rewriting is a big word for what is really\nneeded. There is little work to do since Sage mostly follows Python syntax.\nThe two main difference are handling of integer (see\nhttp://www.sagemath.org/doc/tutorial/afterword.html), and the necessity to\nimport what you need.\n\n## Handling of integer\n\n- Notation for exponentiation: In Python `**` means exponentiation and\n  `^` means \u201cxor\u201d. \n\n- If you need to return an integer for the user, write it return\n  `Integer(1)` instead of return 1. In Python 1 is a machine integer\n  `int` (32 or 64 bits depending on your machine) and `Integer(1)` is\n  a Sage/Gmp arbitrary precision integer. Also `Integer` are much more\n  powerful than `int`, for example they know about prime and\n  factorization.\n\n## Importing stuff\n\nThe second big change is the necessity to import all what you need. More\nprecisely, each time you use some Sage function, you need to import it at the\nbeginning of the file. for example if you want to you `PolynomialRing`,\nyou need to write\n\n```\nfrom sage.rings.polynomial.polynomial_ring_constructor import PolynomialRing\n```\n\nYou can ask Sage where to find PolynomialRing using:\n\n```\nsage: PolynomialRing.__module__\n'sage.rings.polynomial.polynomial_ring_constructor'\n```\n\nThis also correspond to the path starting after `site-packages`\ngiven when you are asking Sage for\n`PolynomialRing` help:\n\n```\nsage: PolynomialRing?\nType:           function\n[...]\nFile:           /home/florent/src/Sage/sage/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_ring_constructor.py\n[...]\n```\n\n\nI hope this helps,\n\nFlorent",
    "created_at": "2011-06-11T07:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108651",
    "user": "hivert"
}
```

Hi Alex,

> I thought this might be because amgf.sage is a Sage file and not a Python
> file. So i renamed it amgf.py instead and got syntax errors. What's up with
> that? Do i have to rewrite all my code in Python instead of Sage?

The basic answer is yes, but Rewriting is a big word for what is really
needed. There is little work to do since Sage mostly follows Python syntax.
The two main difference are handling of integer (see
http://www.sagemath.org/doc/tutorial/afterword.html), and the necessity to
import what you need.

## Handling of integer

- Notation for exponentiation: In Python `**` means exponentiation and
  `^` means “xor”. 

- If you need to return an integer for the user, write it return
  `Integer(1)` instead of return 1. In Python 1 is a machine integer
  `int` (32 or 64 bits depending on your machine) and `Integer(1)` is
  a Sage/Gmp arbitrary precision integer. Also `Integer` are much more
  powerful than `int`, for example they know about prime and
  factorization.

## Importing stuff

The second big change is the necessity to import all what you need. More
precisely, each time you use some Sage function, you need to import it at the
beginning of the file. for example if you want to you `PolynomialRing`,
you need to write

```
from sage.rings.polynomial.polynomial_ring_constructor import PolynomialRing
```

You can ask Sage where to find PolynomialRing using:

```
sage: PolynomialRing.__module__
'sage.rings.polynomial.polynomial_ring_constructor'
```

This also correspond to the path starting after `site-packages`
given when you are asking Sage for
`PolynomialRing` help:

```
sage: PolynomialRing?
Type:           function
[...]
File:           /home/florent/src/Sage/sage/local/lib/python2.6/site-packages/sage/rings/polynomial/polynomial_ring_constructor.py
[...]
```


I hope this helps,

Florent



---

archive/issue_comments_108652.json:
```json
{
    "body": "Just answering as a complement to Florent's answer.\n\n> But when i run Sage and test a few commands, Sage doesn't seem to see the QuasiRationalExpression class i created in /Applications/sage/devel/sage-araichev/sage/combinat/amgf.sage. \n\nTo test your code in a Sage session, you will first need to import the good class (or function). For instance :\n\n\n```\nsage: from sage.combinat.amgf import QuasiRationalExpression\n```\n\n\nIf you would like `QuasiRationalExpression` to be already imported once Sage is started, you must add the line `from sage.combinat.amgf import QuasiRationalExpression` to the file `sage/combinat/all.py`. Note that it is not \"\u00e0 la mode\" to add new stuff to all.py files because Sage is very slow to start because of all the things that are imported. If you think a lot of people will use the code, then it might be defendable.\n\nS\u00e9bastien",
    "created_at": "2011-06-11T12:51:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108652",
    "user": "slabbe"
}
```

Just answering as a complement to Florent's answer.

> But when i run Sage and test a few commands, Sage doesn't seem to see the QuasiRationalExpression class i created in /Applications/sage/devel/sage-araichev/sage/combinat/amgf.sage. 

To test your code in a Sage session, you will first need to import the good class (or function). For instance :


```
sage: from sage.combinat.amgf import QuasiRationalExpression
```


If you would like `QuasiRationalExpression` to be already imported once Sage is started, you must add the line `from sage.combinat.amgf import QuasiRationalExpression` to the file `sage/combinat/all.py`. Note that it is not "à la mode" to add new stuff to all.py files because Sage is very slow to start because of all the things that are imported. If you think a lot of people will use the code, then it might be defendable.

Sébastien



---

archive/issue_comments_108653.json:
```json
{
    "body": "Thanks for the tips, Florent and Se'bastien. I'll get to work on converting amgf.sage to amgf.py.\n\nAlex",
    "created_at": "2011-06-12T23:07:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108653",
    "user": "araichev"
}
```

Thanks for the tips, Florent and Se'bastien. I'll get to work on converting amgf.sage to amgf.py.

Alex



---

archive/issue_comments_108654.json:
```json
{
    "body": "Hang on, can i somehow use the Sage pre-parser to automatically convert amgf.sage to amgf.py?\n\nAlex",
    "created_at": "2011-06-12T23:17:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108654",
    "user": "araichev"
}
```

Hang on, can i somehow use the Sage pre-parser to automatically convert amgf.sage to amgf.py?

Alex



---

archive/issue_comments_108655.json:
```json
{
    "body": "Aha!  The command 'sage amgf.sage' pre-parses amgf.sage and saves it as amgf.py.  Thank you ask.sagemath.org!\n\nAlex",
    "created_at": "2011-06-13T00:02:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108655",
    "user": "araichev"
}
```

Aha!  The command 'sage amgf.sage' pre-parses amgf.sage and saves it as amgf.py.  Thank you ask.sagemath.org!

Alex



---

archive/issue_comments_108656.json:
```json
{
    "body": "Pythonified amgf.sage",
    "created_at": "2011-06-13T21:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108656",
    "user": "araichev"
}
```

Pythonified amgf.sage



---

archive/issue_comments_108657.json:
```json
{
    "body": "Attachment [amgf.py](tarball://root/attachments/some-uuid/ticket10519/amgf.py) by araichev created at 2011-06-13 21:55:28",
    "created_at": "2011-06-13T21:55:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108657",
    "user": "araichev"
}
```

Attachment [amgf.py](tarball://root/attachments/some-uuid/ticket10519/amgf.py) by araichev created at 2011-06-13 21:55:28



---

archive/issue_comments_108658.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-06-13T21:55:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108658",
    "user": "araichev"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_108659.json:
```json
{
    "body": "The patch is empty. I hope you did not lose anything?\n\nS\u00e9bastien",
    "created_at": "2011-06-15T10:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108659",
    "user": "slabbe"
}
```

The patch is empty. I hope you did not lose anything?

Sébastien



---

archive/issue_comments_108660.json:
```json
{
    "body": "Attachment [trac_10519.patch](tarball://root/attachments/some-uuid/ticket10519/trac_10519.patch) by araichev created at 2011-06-17 03:07:38\n\nHmm, i couldn't figure out how to add the code to the patch. I tried 'sage -hg add amgf.py' as you suggested, Se'bastien, but that didn't work. So i finally copied and pasted it in. I hope that works. Let me know the proper way, yo.\n\nSorry for the delay.\n\nAlex",
    "created_at": "2011-06-17T03:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108660",
    "user": "araichev"
}
```

Attachment [trac_10519.patch](tarball://root/attachments/some-uuid/ticket10519/trac_10519.patch) by araichev created at 2011-06-17 03:07:38

Hmm, i couldn't figure out how to add the code to the patch. I tried 'sage -hg add amgf.py' as you suggested, Se'bastien, but that didn't work. So i finally copied and pasted it in. I hope that works. Let me know the proper way, yo.

Sorry for the delay.

Alex



---

archive/issue_comments_108661.json:
```json
{
    "body": "Attachment [trac_10519-fixed.patch](tarball://root/attachments/some-uuid/ticket10519/trac_10519-fixed.patch) by davidloeffler created at 2012-03-10 17:05:26\n\nPatch against 5.0",
    "created_at": "2012-03-10T17:05:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108661",
    "user": "davidloeffler"
}
```

Attachment [trac_10519-fixed.patch](tarball://root/attachments/some-uuid/ticket10519/trac_10519-fixed.patch) by davidloeffler created at 2012-03-10 17:05:26

Patch against 5.0



---

archive/issue_comments_108662.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-03-10T17:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108662",
    "user": "davidloeffler"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_108663.json:
```json
{
    "body": "Apply trac_10519-fixed.patch\n\n(for the patchbot).\n\nAlex's last \"patch\" wasn't a patch at all, just a Mercurial header with some Python code arbitrarily pasted into it. I've just uploaded a non-broken version of the patch. I also added the necessary import statements -- a file that's supposed to be part of the Sage library can't import the Sage library (with `from all_cmdline import *`), since that would lead to an infinite loop, so the necessary imports have to be done one-by-one.\n\nThe patch now passes doctests on my machine, but there are some worrying errors that came up when I ran a syntax checker on the new file:\n\n```\namgf.py:908: local variable 'R' is assigned to but never used\namgf.py:909: local variable 'd' is assigned to but never used\namgf.py:1070: local variable 'Ht' is assigned to but never used\namgf.py:1251: local variable 'Ht' is assigned to but never used\namgf.py:1591: undefined name 'n'\namgf.py:2199: local variable 'H' is assigned to but never used\namgf.py:2242: undefined name 'verdict'\n```\n\nThe \"undefined name\" errors tend to suggest that some cases have bugs in them, *and* those cases are not checked in any doctest, which is a double whammy. Hence \"needs work\".",
    "created_at": "2012-03-10T17:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108663",
    "user": "davidloeffler"
}
```

Apply trac_10519-fixed.patch

(for the patchbot).

Alex's last "patch" wasn't a patch at all, just a Mercurial header with some Python code arbitrarily pasted into it. I've just uploaded a non-broken version of the patch. I also added the necessary import statements -- a file that's supposed to be part of the Sage library can't import the Sage library (with `from all_cmdline import *`), since that would lead to an infinite loop, so the necessary imports have to be done one-by-one.

The patch now passes doctests on my machine, but there are some worrying errors that came up when I ran a syntax checker on the new file:

```
amgf.py:908: local variable 'R' is assigned to but never used
amgf.py:909: local variable 'd' is assigned to but never used
amgf.py:1070: local variable 'Ht' is assigned to but never used
amgf.py:1251: local variable 'Ht' is assigned to but never used
amgf.py:1591: undefined name 'n'
amgf.py:2199: local variable 'H' is assigned to but never used
amgf.py:2242: undefined name 'verdict'
```

The "undefined name" errors tend to suggest that some cases have bugs in them, *and* those cases are not checked in any doctest, which is a double whammy. Hence "needs work".



---

archive/issue_comments_108664.json:
```json
{
    "body": "Sorry, that list got mangled. It should be\n\n```\namgf.py:908: local variable 'R' is assigned to but never used\namgf.py:909: local variable 'd' is assigned to but never used\namgf.py:1070: local variable 'Ht' is assigned to but never used\namgf.py:1251: local variable 'Ht' is assigned to but never used\namgf.py:1591: undefined name 'n'\namgf.py:2199: local variable 'H' is assigned to but never used\namgf.py:2242: undefined name 'verdict'\n```\n",
    "created_at": "2012-03-10T17:10:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108664",
    "user": "davidloeffler"
}
```

Sorry, that list got mangled. It should be

```
amgf.py:908: local variable 'R' is assigned to but never used
amgf.py:909: local variable 'd' is assigned to but never used
amgf.py:1070: local variable 'Ht' is assigned to but never used
amgf.py:1251: local variable 'Ht' is assigned to but never used
amgf.py:1591: undefined name 'n'
amgf.py:2199: local variable 'H' is assigned to but never used
amgf.py:2242: undefined name 'verdict'
```




---

archive/issue_comments_108665.json:
```json
{
    "body": "Thanks for your review, David. This patch was my first on Sage Trac and i've since learned a lot, thanks to the constructive feedback of fellow Sagers such as yourself.\n\nSince amgf.py was somewhat of a code bomb, i decided to split it up into simpler pieces, submit those pieces, and, once they get accepted, recombine them. If you or anyone else would like to help me in this endeavor, check out the latest amgf piece at http://trac.sagemath.org/sage_trac/ticket/12417.\n\nThanks!    \n\nI'll keep you all updated on the progress of amgf with these comments.",
    "created_at": "2012-03-10T20:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108665",
    "user": "araichev"
}
```

Thanks for your review, David. This patch was my first on Sage Trac and i've since learned a lot, thanks to the constructive feedback of fellow Sagers such as yourself.

Since amgf.py was somewhat of a code bomb, i decided to split it up into simpler pieces, submit those pieces, and, once they get accepted, recombine them. If you or anyone else would like to help me in this endeavor, check out the latest amgf piece at http://trac.sagemath.org/sage_trac/ticket/12417.

Thanks!    

I'll keep you all updated on the progress of amgf with these comments.



---

archive/issue_comments_108666.json:
```json
{
    "body": "Attachment [trac_10519.2.patch](tarball://root/attachments/some-uuid/ticket10519/trac_10519.2.patch) by araichev created at 2012-08-09 00:16:50\n\nMajor rewrite.",
    "created_at": "2012-08-09T00:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108666",
    "user": "araichev"
}
```

Attachment [trac_10519.2.patch](tarball://root/attachments/some-uuid/ticket10519/trac_10519.2.patch) by araichev created at 2012-08-09 00:16:50

Major rewrite.



---

archive/issue_comments_108667.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-08-09T00:17:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108667",
    "user": "araichev"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_108668.json:
```json
{
    "body": "Apply only trac_10519.2.patch",
    "created_at": "2012-09-03T18:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108668",
    "user": "chapoton"
}
```

Apply only trac_10519.2.patch



---

archive/issue_comments_108669.json:
```json
{
    "body": "* Please ensure that every function is doctested\n\n* Please remove all trailing whitespaces",
    "created_at": "2012-09-03T18:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108669",
    "user": "chapoton"
}
```

* Please ensure that every function is doctested

* Please remove all trailing whitespaces



---

archive/issue_comments_108670.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-09-03T18:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108670",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_108671.json:
```json
{
    "body": "Attachment [trac_10519-asymptotic_multiple-v3.patch](tarball://root/attachments/some-uuid/ticket10519/trac_10519-asymptotic_multiple-v3.patch) by chapoton created at 2012-09-22 18:25:10\n\nI have removed all whitespaces in the new patch. All test pass. \n\n**BUT** there remains 6 procedures with no doctest. Remember that it is neccesary to have 100% doctesting.\n\nAlso the name **amgf** is not good. It should be changed to something more descriptive.",
    "created_at": "2012-09-22T18:25:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108671",
    "user": "chapoton"
}
```

Attachment [trac_10519-asymptotic_multiple-v3.patch](tarball://root/attachments/some-uuid/ticket10519/trac_10519-asymptotic_multiple-v3.patch) by chapoton created at 2012-09-22 18:25:10

I have removed all whitespaces in the new patch. All test pass. 

**BUT** there remains 6 procedures with no doctest. Remember that it is neccesary to have 100% doctesting.

Also the name **amgf** is not good. It should be changed to something more descriptive.



---

archive/issue_comments_108672.json:
```json
{
    "body": "Thanks, folks.  I'll document those outstanding 6 procedures within a week.",
    "created_at": "2012-09-24T21:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108672",
    "user": "araichev"
}
```

Thanks, folks.  I'll document those outstanding 6 procedures within a week.



---

archive/issue_comments_108673.json:
```json
{
    "body": "Hmm, i might take longer, because now that i've upgraded to Sage 5.3, i can't create a Sage clone :-(  See http://ask.sagemath.org/question/1821/cant-create-sage-clone-again.",
    "created_at": "2012-10-01T22:41:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108673",
    "user": "araichev"
}
```

Hmm, i might take longer, because now that i've upgraded to Sage 5.3, i can't create a Sage clone :-(  See http://ask.sagemath.org/question/1821/cant-create-sage-clone-again.



---

archive/issue_comments_108674.json:
```json
{
    "body": "Still can't create a Sage clone.  In the meantime, here's my patch as a Python file (which i tested on Sage 5.3 with sage -t --long) for anyone who wants to review it: https://www.dropbox.com/s/fcxsbuw119qclxt/trac_10519v4.py.",
    "created_at": "2012-10-02T23:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108674",
    "user": "araichev"
}
```

Still can't create a Sage clone.  In the meantime, here's my patch as a Python file (which i tested on Sage 5.3 with sage -t --long) for anyone who wants to review it: https://www.dropbox.com/s/fcxsbuw119qclxt/trac_10519v4.py.



---

archive/issue_comments_108675.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-10-07T22:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108675",
    "user": "araichev"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_108676.json:
```json
{
    "body": "Attachment [trac_10519v4.patch](tarball://root/attachments/some-uuid/ticket10519/trac_10519v4.patch) by araichev created at 2012-10-07 22:52:48",
    "created_at": "2012-10-07T22:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108676",
    "user": "araichev"
}
```

Attachment [trac_10519v4.patch](tarball://root/attachments/some-uuid/ticket10519/trac_10519v4.patch) by araichev created at 2012-10-07 22:52:48



---

archive/issue_comments_108677.json:
```json
{
    "body": "apply only trac_10519v4.patch",
    "created_at": "2012-10-26T13:32:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108677",
    "user": "chapoton"
}
```

apply only trac_10519v4.patch



---

archive/issue_comments_108678.json:
```json
{
    "body": "please remove all trailing whitespaces\n\nplease correct the failing doctests",
    "created_at": "2012-10-26T13:59:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108678",
    "user": "chapoton"
}
```

please remove all trailing whitespaces

please correct the failing doctests



---

archive/issue_comments_108679.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-10-26T13:59:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108679",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_108680.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-10-30T20:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108680",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_108681.json:
```json
{
    "body": "apply trac_10519-v5.patch",
    "created_at": "2012-10-30T20:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108681",
    "user": "chapoton"
}
```

apply trac_10519-v5.patch



---

archive/issue_comments_108682.json:
```json
{
    "body": "Attachment [trac_10519-v5.patch](tarball://root/attachments/some-uuid/ticket10519/trac_10519-v5.patch) by chapoton created at 2012-10-30 20:49:04\n\napply trac_10519-v5.patch",
    "created_at": "2012-10-30T20:49:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108682",
    "user": "chapoton"
}
```

Attachment [trac_10519-v5.patch](tarball://root/attachments/some-uuid/ticket10519/trac_10519-v5.patch) by chapoton created at 2012-10-30 20:49:04

apply trac_10519-v5.patch



---

archive/issue_comments_108683.json:
```json
{
    "body": "Attachment [trac_10519-v6.patch](tarball://root/attachments/some-uuid/ticket10519/trac_10519-v6.patch) by araichev created at 2012-11-03 00:35:42\n\nHmm, i don't understand why i didn't get any test errors when i submitted v4.  Anyway, fixed the errors.",
    "created_at": "2012-11-03T00:35:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108683",
    "user": "araichev"
}
```

Attachment [trac_10519-v6.patch](tarball://root/attachments/some-uuid/ticket10519/trac_10519-v6.patch) by araichev created at 2012-11-03 00:35:42

Hmm, i don't understand why i didn't get any test errors when i submitted v4.  Anyway, fixed the errors.



---

archive/issue_comments_108684.json:
```json
{
    "body": "Apply trac_10519-v6.patch",
    "created_at": "2012-11-03T08:15:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108684",
    "user": "chapoton"
}
```

Apply trac_10519-v6.patch



---

archive/issue_comments_108685.json:
```json
{
    "body": "well, now version V5 works and version V6 does not pass the tests. \n\nI had already made all the necessary corrections in version V5.\n\nCan we just forget version V6 ?",
    "created_at": "2012-11-03T13:11:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108685",
    "user": "chapoton"
}
```

well, now version V5 works and version V6 does not pass the tests. 

I had already made all the necessary corrections in version V5.

Can we just forget version V6 ?



---

archive/issue_comments_108686.json:
```json
{
    "body": "OK, let's forget V6.  I bet the problem is one or two docstring lines that output a dictionary.  The random order of the keys is causing a test failure when it doesn't match up with the docstring key order.  We can fix that by sorting the keys before printing them.",
    "created_at": "2012-11-04T20:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108686",
    "user": "araichev"
}
```

OK, let's forget V6.  I bet the problem is one or two docstring lines that output a dictionary.  The random order of the keys is causing a test failure when it doesn't match up with the docstring key order.  We can fix that by sorting the keys before printing them.



---

archive/issue_comments_108687.json:
```json
{
    "body": "apply trac_10519-v5.patch",
    "created_at": "2012-11-05T10:33:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108687",
    "user": "chapoton"
}
```

apply trac_10519-v5.patch



---

archive/issue_comments_108688.json:
```json
{
    "body": "Hi folks, is this patch ready to be added to Sage?  If not, what's the next step?",
    "created_at": "2013-02-11T20:59:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108688",
    "user": "araichev"
}
```

Hi folks, is this patch ready to be added to Sage?  If not, what's the next step?



---

archive/issue_comments_108689.json:
```json
{
    "body": "The next step would be that somebody interested does a real review of this patch. This means looking seriously at the code, using the functions, trying to find bugs, and so on. I am not candidate, sorry.",
    "created_at": "2013-02-13T11:15:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108689",
    "user": "chapoton"
}
```

The next step would be that somebody interested does a real review of this patch. This means looking seriously at the code, using the functions, trying to find bugs, and so on. I am not candidate, sorry.



---

archive/issue_comments_108690.json:
```json
{
    "body": "Here is the report of pyflakes : some things that need to be corrected\n\n```\nsage/combinat/asymptotics_multivariate_generating_functions.py:147: 'UniqueFactorizationDomains' imported but unused\nsage/combinat/asymptotics_multivariate_generating_functions.py:156: 'CartesianProduct' imported but unused\nsage/combinat/asymptotics_multivariate_generating_functions.py:171: 'ZZ' imported but unused\nsage/combinat/asymptotics_multivariate_generating_functions.py:172: redefinition of unused 'PolynomialRing' from line 148\nsage/combinat/asymptotics_multivariate_generating_functions.py:175: 'SageObject' imported but unused\nsage/combinat/asymptotics_multivariate_generating_functions.py:1719: local variable 'Ht' is assigned to but never used\nsage/combinat/asymptotics_multivariate_generating_functions.py:2097: local variable 'Ht' is assigned to but never used\nsage/combinat/asymptotics_multivariate_generating_functions.py:2992: local variable 'X' is assigned to but never used\nsage/combinat/asymptotics_multivariate_generating_functions.py:3083: undefined name 'Subsets'\n```\n",
    "created_at": "2013-03-01T09:29:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108690",
    "user": "chapoton"
}
```

Here is the report of pyflakes : some things that need to be corrected

```
sage/combinat/asymptotics_multivariate_generating_functions.py:147: 'UniqueFactorizationDomains' imported but unused
sage/combinat/asymptotics_multivariate_generating_functions.py:156: 'CartesianProduct' imported but unused
sage/combinat/asymptotics_multivariate_generating_functions.py:171: 'ZZ' imported but unused
sage/combinat/asymptotics_multivariate_generating_functions.py:172: redefinition of unused 'PolynomialRing' from line 148
sage/combinat/asymptotics_multivariate_generating_functions.py:175: 'SageObject' imported but unused
sage/combinat/asymptotics_multivariate_generating_functions.py:1719: local variable 'Ht' is assigned to but never used
sage/combinat/asymptotics_multivariate_generating_functions.py:2097: local variable 'Ht' is assigned to but never used
sage/combinat/asymptotics_multivariate_generating_functions.py:2992: local variable 'X' is assigned to but never used
sage/combinat/asymptotics_multivariate_generating_functions.py:3083: undefined name 'Subsets'
```




---

archive/issue_comments_108691.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-03-01T10:36:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108691",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_108692.json:
```json
{
    "body": "Attachment [trac_10519-v7.patch](tarball://root/attachments/some-uuid/ticket10519/trac_10519-v7.patch) by araichev created at 2013-03-18 04:20:01\n\nThanks. Fixed.",
    "created_at": "2013-03-18T04:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108692",
    "user": "araichev"
}
```

Attachment [trac_10519-v7.patch](tarball://root/attachments/some-uuid/ticket10519/trac_10519-v7.patch) by araichev created at 2013-03-18 04:20:01

Thanks. Fixed.



---

archive/issue_comments_108693.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-03-18T04:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108693",
    "user": "araichev"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_108694.json:
```json
{
    "body": "for the bot\n\nApply trac_10519-v7.patch",
    "created_at": "2013-03-18T09:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108694",
    "user": "chapoton"
}
```

for the bot

Apply trac_10519-v7.patch



---

archive/issue_comments_108695.json:
```json
{
    "body": "It does not seems to be properly integrated into sage:\n\n```\nsage: from sage.combinat.asymptotics_multivariate_generating_functions import *\n---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\n<ipython-input-1-3a279f9ff0e0> in <module>()\n----> 1 from sage.combinat.asymptotics_multivariate_generating_functions import *\n\nImportError: No module named asymptotics_multivariate_generating_functions\nsage: \n```\n\n\nand indeed, you can see that the patch should be for 'sage/combinat' directory, not for './'.\nUnless this is meant to go to the \"combinat queue\" - and I have no clue how such reviews are meant to happen and\nhow the corresponding code \"admin\" should look like.\n\nQuestion: how much of this is dependent upon the \"combinat queue\"?",
    "created_at": "2013-11-21T11:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108695",
    "user": "dimpase"
}
```

It does not seems to be properly integrated into sage:

```
sage: from sage.combinat.asymptotics_multivariate_generating_functions import *
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-1-3a279f9ff0e0> in <module>()
----> 1 from sage.combinat.asymptotics_multivariate_generating_functions import *

ImportError: No module named asymptotics_multivariate_generating_functions
sage: 
```


and indeed, you can see that the patch should be for 'sage/combinat' directory, not for './'.
Unless this is meant to go to the "combinat queue" - and I have no clue how such reviews are meant to happen and
how the corresponding code "admin" should look like.

Question: how much of this is dependent upon the "combinat queue"?



---

archive/issue_comments_108696.json:
```json
{
    "body": "Replying to [comment:53 dimpase]:\n\nYes, the patch should be for `sage/combinat`.  Feel free to change that, if you'd like to review the patch now.  Otherwise, i'll change it when i get some time in the next week.\n\n\n> It does not seems to be properly integrated into sage:\n> {{{\n> sage: from sage.combinat.asymptotics_multivariate_generating_functions import *\n> ---------------------------------------------------------------------------\n> ImportError                               Traceback (most recent call last)\n> <ipython-input-1-3a279f9ff0e0> in <module>()\n> ----> 1 from sage.combinat.asymptotics_multivariate_generating_functions import *\n> \n> ImportError: No module named asymptotics_multivariate_generating_functions\n> sage: \n> }}}\n> \n> and indeed, you can see that the patch should be for 'sage/combinat' directory, not for './'.\n> Unless this is meant to go to the \"combinat queue\" - and I have no clue how such reviews are meant to happen and\n> how the corresponding code \"admin\" should look like.\n> \n> Question: how much of this is dependent upon the \"combinat queue\"?",
    "created_at": "2013-11-21T20:14:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108696",
    "user": "araichev"
}
```

Replying to [comment:53 dimpase]:

Yes, the patch should be for `sage/combinat`.  Feel free to change that, if you'd like to review the patch now.  Otherwise, i'll change it when i get some time in the next week.


> It does not seems to be properly integrated into sage:
> {{{
> sage: from sage.combinat.asymptotics_multivariate_generating_functions import *
> ---------------------------------------------------------------------------
> ImportError                               Traceback (most recent call last)
> <ipython-input-1-3a279f9ff0e0> in <module>()
> ----> 1 from sage.combinat.asymptotics_multivariate_generating_functions import *
> 
> ImportError: No module named asymptotics_multivariate_generating_functions
> sage: 
> }}}
> 
> and indeed, you can see that the patch should be for 'sage/combinat' directory, not for './'.
> Unless this is meant to go to the "combinat queue" - and I have no clue how such reviews are meant to happen and
> how the corresponding code "admin" should look like.
> 
> Question: how much of this is dependent upon the "combinat queue"?



---

archive/issue_comments_108697.json:
```json
{
    "body": "Replying to [comment:54 araichev]:\n> Replying to [comment:53 dimpase]:\n> \n> Yes, the patch should be for `sage/combinat`.  Feel free to change that, if you'd like to review the patch now.  Otherwise, i'll change it when i get some time in the next week.\n\n\nOne should use `lazy_import` in `sage/combinat/all.py` to import the stuff in this patch, rather than \nforcing the user to do the explicit import\n \n> > Question: how much of this is dependent upon the \"combinat queue\"?\n\nSo, how much, if anything at all?",
    "created_at": "2013-11-21T20:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108697",
    "user": "dimpase"
}
```

Replying to [comment:54 araichev]:
> Replying to [comment:53 dimpase]:
> 
> Yes, the patch should be for `sage/combinat`.  Feel free to change that, if you'd like to review the patch now.  Otherwise, i'll change it when i get some time in the next week.


One should use `lazy_import` in `sage/combinat/all.py` to import the stuff in this patch, rather than 
forcing the user to do the explicit import
 
> > Question: how much of this is dependent upon the "combinat queue"?

So, how much, if anything at all?



---

archive/issue_comments_108698.json:
```json
{
    "body": "Here's a git branch version along with some extensive review changes to the documentation. I made some internal methods private to cleanup the namespace (i.e. what you get with tab completion). I also made stuff python 3 compatible. Unfortunately I also cannot really give a good review to the mathematics behind this.\n\n`@`Dima, I think you've misunderstood what the combinat queue is. However it's moot because we are no longer using hg.\n----\nNew commits:",
    "created_at": "2014-02-15T05:14:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108698",
    "user": "tscrim"
}
```

Here's a git branch version along with some extensive review changes to the documentation. I made some internal methods private to cleanup the namespace (i.e. what you get with tab completion). I also made stuff python 3 compatible. Unfortunately I also cannot really give a good review to the mathematics behind this.

`@`Dima, I think you've misunderstood what the combinat queue is. However it's moot because we are no longer using hg.
----
New commits:



---

archive/issue_comments_108699.json:
```json
{
    "body": "Hooray!  Thanks heaps, `@`tscrim.\n\nReplying to [comment:57 tscrim]:\n> Here's a git branch version along with some extensive review changes to the documentation. I made some internal methods private to cleanup the namespace (i.e. what you get with tab completion). I also made stuff python 3 compatible. Unfortunately I also cannot really give a good review to the mathematics behind this.\n> \n> `@`Dima, I think you've misunderstood what the combinat queue is. However it's moot because we are no longer using hg.\n> ----\n> New commits:\n> ||[b01625d](http://git.sagemath.org/sage.git/commit/?id=b01625d4f74ad7b187707254c9e404c97ae7be6d)||`10519: Removed unused modules and variables`||\n> ||[443ab74](http://git.sagemath.org/sage.git/commit/?id=443ab74ab4c0b87eaeae1d790b2abc850fc92377)||`Work on cleaning up documentation.`||\n> ||[7f9b89e](http://git.sagemath.org/sage.git/commit/?id=7f9b89ed07cb5053bce29a48748382da525f6d5c)||`Merge branch 'develop' into public/combinat/analytic-10519`||\n> ||[40dacc9](http://git.sagemath.org/sage.git/commit/?id=40dacc93e20e043d864470693957977fc03f2b25)||`Review changes and added new file to documentation.`||\n> ||[60b9337](http://git.sagemath.org/sage.git/commit/?id=60b93376cbb072a1aab99646806555830799468f)||`Tweaked print statements and list().`||",
    "created_at": "2014-02-15T22:06:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108699",
    "user": "araichev"
}
```

Hooray!  Thanks heaps, `@`tscrim.

Replying to [comment:57 tscrim]:
> Here's a git branch version along with some extensive review changes to the documentation. I made some internal methods private to cleanup the namespace (i.e. what you get with tab completion). I also made stuff python 3 compatible. Unfortunately I also cannot really give a good review to the mathematics behind this.
> 
> `@`Dima, I think you've misunderstood what the combinat queue is. However it's moot because we are no longer using hg.
> ----
> New commits:
> ||[b01625d](http://git.sagemath.org/sage.git/commit/?id=b01625d4f74ad7b187707254c9e404c97ae7be6d)||`10519: Removed unused modules and variables`||
> ||[443ab74](http://git.sagemath.org/sage.git/commit/?id=443ab74ab4c0b87eaeae1d790b2abc850fc92377)||`Work on cleaning up documentation.`||
> ||[7f9b89e](http://git.sagemath.org/sage.git/commit/?id=7f9b89ed07cb5053bce29a48748382da525f6d5c)||`Merge branch 'develop' into public/combinat/analytic-10519`||
> ||[40dacc9](http://git.sagemath.org/sage.git/commit/?id=40dacc93e20e043d864470693957977fc03f2b25)||`Review changes and added new file to documentation.`||
> ||[60b9337](http://git.sagemath.org/sage.git/commit/?id=60b93376cbb072a1aab99646806555830799468f)||`Tweaked print statements and list().`||



---

archive/issue_comments_108700.json:
```json
{
    "body": "Why does one need these FFPD and FFPDSum classes? Are Sage's  multivariate rational functions not good enough?\nOne should have an interface between these FFPD and FFPDSum and \"normal\" Sage's rational functions, anyway.\n\nAlso, I think that the part that computes decomposition(s) of rational functions must be factored out (and put on another ticket, and they should not be in combinat/, as this has noting to do with combinatorics). It has independent uses, which need not have anything to do with the stated purpose of this ticket.",
    "created_at": "2014-02-15T22:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108700",
    "user": "dimpase"
}
```

Why does one need these FFPD and FFPDSum classes? Are Sage's  multivariate rational functions not good enough?
One should have an interface between these FFPD and FFPDSum and "normal" Sage's rational functions, anyway.

Also, I think that the part that computes decomposition(s) of rational functions must be factored out (and put on another ticket, and they should not be in combinat/, as this has noting to do with combinatorics). It has independent uses, which need not have anything to do with the stated purpose of this ticket.



---

archive/issue_comments_108701.json:
```json
{
    "body": "Replying to [comment:57 tscrim]:\n\n> `@`Dima, I think you've misunderstood what the combinat queue is. However it's moot because we are no longer using hg.\nTravis, I think already in 2010 I knew what the combinat queue is  ;-) \n\nSomehow, when reading the code, something made me wonder if this code depends on some features from (what was formerly known as?) combinat queue. I'm happy to know that it's not the case.",
    "created_at": "2014-02-15T23:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108701",
    "user": "dimpase"
}
```

Replying to [comment:57 tscrim]:

> `@`Dima, I think you've misunderstood what the combinat queue is. However it's moot because we are no longer using hg.
Travis, I think already in 2010 I knew what the combinat queue is  ;-) 

Somehow, when reading the code, something made me wonder if this code depends on some features from (what was formerly known as?) combinat queue. I'm happy to know that it's not the case.



---

archive/issue_comments_108702.json:
```json
{
    "body": "Replying to [comment:60 dimpase]:\n> Replying to [comment:57 tscrim]:\n> \n> > `@`Dima, I think you've misunderstood what the combinat queue is. However it's moot because we are no longer using hg.\n> Travis, I think already in 2010 I knew what the combinat queue is  ;-) \n> \n> Somehow, when reading the code, something made me wonder if this code depends on some features from (what was formerly known as?) combinat queue. I'm happy to know that it's not the case.\n\nAh sorry, it seemed to me from comment:53 like there was a misunderstanding. I'm also happy there's no dependence on any patches that are in the (now unused) queue that we might have to untangle.",
    "created_at": "2014-02-16T03:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108702",
    "user": "tscrim"
}
```

Replying to [comment:60 dimpase]:
> Replying to [comment:57 tscrim]:
> 
> > `@`Dima, I think you've misunderstood what the combinat queue is. However it's moot because we are no longer using hg.
> Travis, I think already in 2010 I knew what the combinat queue is  ;-) 
> 
> Somehow, when reading the code, something made me wonder if this code depends on some features from (what was formerly known as?) combinat queue. I'm happy to know that it's not the case.

Ah sorry, it seemed to me from comment:53 like there was a misunderstanding. I'm also happy there's no dependence on any patches that are in the (now unused) queue that we might have to untangle.



---

archive/issue_comments_108703.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-05-09T15:39:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108703",
    "user": "rws"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_108704.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-19T20:03:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108704",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108705.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-06-19T20:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108705",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_108706.json:
```json
{
    "body": "Hi,\n\nJust read the code and glance some remarks. The code looks very interesting but I have some advices/questions.\n\n- as a matter of uniformization class name are better expanded (`FractionWithFactoredPolynomialDenominator` instead of `FFPD`)\n- `cartesian_product_iterator` will be very soonly deprecated, so use `product` from the Python `itertools` module instead.\n- it is generally bad practice to have such a big import list at the begining of the file (because of potential circular import). Moreover some of them can be completely avoided: `L = FractionField(PolynomialRing(K, indets))` can be `PolynomialRing(K, indets).fraction_field()`.\n\n\nMore seriously:\n- I do not understand the specifications. It is said that the numerator must be an element p of a 0 or 1 variate factorial polynomial ring R but you have examples involving `cos(x)`. What is the underlying polynomial ring in that case?\n- repeating comment:59, Why there is a need for the class `FFDP`? Why isn't it directly implemented as the level of fractions of polynomials? It would makes sense to cache the factorization of the denominator if it is required in several places, but I do not see the point of the `FFDP` class.\n- Some of the method needs definition: `critical_cone`, `is_convenient_multiple_point`, ...\n- Some of the method would better be hidden: `combine_like_terms`, ... \n\nBest\nVincent",
    "created_at": "2014-06-19T20:50:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108706",
    "user": "vdelecroix"
}
```

Hi,

Just read the code and glance some remarks. The code looks very interesting but I have some advices/questions.

- as a matter of uniformization class name are better expanded (`FractionWithFactoredPolynomialDenominator` instead of `FFPD`)
- `cartesian_product_iterator` will be very soonly deprecated, so use `product` from the Python `itertools` module instead.
- it is generally bad practice to have such a big import list at the begining of the file (because of potential circular import). Moreover some of them can be completely avoided: `L = FractionField(PolynomialRing(K, indets))` can be `PolynomialRing(K, indets).fraction_field()`.


More seriously:
- I do not understand the specifications. It is said that the numerator must be an element p of a 0 or 1 variate factorial polynomial ring R but you have examples involving `cos(x)`. What is the underlying polynomial ring in that case?
- repeating comment:59, Why there is a need for the class `FFDP`? Why isn't it directly implemented as the level of fractions of polynomials? It would makes sense to cache the factorization of the denominator if it is required in several places, but I do not see the point of the `FFDP` class.
- Some of the method needs definition: `critical_cone`, `is_convenient_multiple_point`, ...
- Some of the method would better be hidden: `combine_like_terms`, ... 

Best
Vincent



---

archive/issue_comments_108707.json:
```json
{
    "body": "Hi folks, because of my new work and responsibilities outside the realm of analytic combinatorics and Sage, i've needed to put this project on hold indefinitely.  Please feel free to change the code as you like.  I hope i've documented it well enough with comments and references so that others can carry it to fruition.",
    "created_at": "2014-06-21T22:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108707",
    "user": "araichev"
}
```

Hi folks, because of my new work and responsibilities outside the realm of analytic combinatorics and Sage, i've needed to put this project on hold indefinitely.  Please feel free to change the code as you like.  I hope i've documented it well enough with comments and references so that others can carry it to fruition.



---

archive/issue_comments_108708.json:
```json
{
    "body": "Replying to [comment:67 araichev]:\n> Hi folks, because of my new work and responsibilities outside the realm of analytic combinatorics and Sage, i've needed to put this project on hold indefinitely.  Please feel free to change the code as you like.  I hope i've documented it well enough with comments and references so that others can carry it to fruition.\n\nHey Alexei,\n\nGood luck with your new work. I will read it carefully and see what I can do. It is definitely a good piece of work.\n\nVincent",
    "created_at": "2014-06-21T23:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108708",
    "user": "vdelecroix"
}
```

Replying to [comment:67 araichev]:
> Hi folks, because of my new work and responsibilities outside the realm of analytic combinatorics and Sage, i've needed to put this project on hold indefinitely.  Please feel free to change the code as you like.  I hope i've documented it well enough with comments and references so that others can carry it to fruition.

Hey Alexei,

Good luck with your new work. I will read it carefully and see what I can do. It is definitely a good piece of work.

Vincent



---

archive/issue_comments_108709.json:
```json
{
    "body": "Replying to [comment:68 vdelecroix]:\n> Replying to [comment:67 araichev]:\n> > Hi folks, because of my new work and responsibilities outside the realm of analytic combinatorics and Sage, i've needed to put this project on hold indefinitely.  Please feel free to change the code as you like.  I hope i've documented it well enough with comments and references so that others can carry it to fruition.\n> \n> Hey Alexei,\n> \n> Good luck with your new work. \n\nYes, good luck with your new work.\n\n> I will read it carefully and see what I can do. It is definitely a good piece of work.\n\nVincent (or Dima), will you be able to check the math for this ticket? If not, I think I could go through it math-wise.\n\nOn the code front:\n\n* Since there are only two classes, I agree with you that we should spell it out.\n* Similar for changing to the built-in python tools.\n* However I think the big import statement is okay since this is going to be a leaf (or at least on a short branch) of the import tree/poset/digraph.\n* What methods do you think should be private? \n* What can I do code-wise to help get this in?",
    "created_at": "2014-06-22T04:25:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108709",
    "user": "tscrim"
}
```

Replying to [comment:68 vdelecroix]:
> Replying to [comment:67 araichev]:
> > Hi folks, because of my new work and responsibilities outside the realm of analytic combinatorics and Sage, i've needed to put this project on hold indefinitely.  Please feel free to change the code as you like.  I hope i've documented it well enough with comments and references so that others can carry it to fruition.
> 
> Hey Alexei,
> 
> Good luck with your new work. 

Yes, good luck with your new work.

> I will read it carefully and see what I can do. It is definitely a good piece of work.

Vincent (or Dima), will you be able to check the math for this ticket? If not, I think I could go through it math-wise.

On the code front:

* Since there are only two classes, I agree with you that we should spell it out.
* Similar for changing to the built-in python tools.
* However I think the big import statement is okay since this is going to be a leaf (or at least on a short branch) of the import tree/poset/digraph.
* What methods do you think should be private? 
* What can I do code-wise to help get this in?



---

archive/issue_comments_108710.json:
```json
{
    "body": "Replying to [comment:69 tscrim]:\n> Replying to [comment:68 vdelecroix]:\n> > Replying to [comment:67 araichev]:\n> > > Hi folks, because of my new work and responsibilities outside the realm of analytic combinatorics and Sage, i've needed to put this project on hold indefinitely.  Please feel free to change the code as you like.  I hope i've documented it well enough with comments and references so that others can carry it to fruition.\n> > \n> > Hey Alexei,\n> > \n> > Good luck with your new work. \n> \n> Yes, good luck with your new work.\n> \n> > I will read it carefully and see what I can do. It is definitely a good piece of work.\n> \n> Vincent (or Dima), will you be able to check the math for this ticket? If not, I think I could go through it math-wise.\n\nplease see my #comment:59\n\nIMHO  refactoring and interfacing with Sage's facilities for rational functions is due, before this can be merged.",
    "created_at": "2014-06-23T07:15:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108710",
    "user": "dimpase"
}
```

Replying to [comment:69 tscrim]:
> Replying to [comment:68 vdelecroix]:
> > Replying to [comment:67 araichev]:
> > > Hi folks, because of my new work and responsibilities outside the realm of analytic combinatorics and Sage, i've needed to put this project on hold indefinitely.  Please feel free to change the code as you like.  I hope i've documented it well enough with comments and references so that others can carry it to fruition.
> > 
> > Hey Alexei,
> > 
> > Good luck with your new work. 
> 
> Yes, good luck with your new work.
> 
> > I will read it carefully and see what I can do. It is definitely a good piece of work.
> 
> Vincent (or Dima), will you be able to check the math for this ticket? If not, I think I could go through it math-wise.

please see my #comment:59

IMHO  refactoring and interfacing with Sage's facilities for rational functions is due, before this can be merged.



---

archive/issue_comments_108711.json:
```json
{
    "body": "rebased to 6.3\n----\nNew commits:",
    "created_at": "2014-08-18T19:46:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108711",
    "user": "dkrenn"
}
```

rebased to 6.3
----
New commits:



---

archive/issue_comments_108712.json:
```json
{
    "body": "There is a doctest (and the doctest using the result below) failing:\n\n```\nsage -t src/sage/combinat/asymptotics_multivariate_generating_functions.py\n**********************************************************************\nFile \"src/sage/combinat/asymptotics_multivariate_generating_functions.py\", line 90, in sage.combinat.asymptotics_multivariate_generating_functions\nFailed example:\n    s\nExpected:\n    [{x: 1, y: 1}]\nGot:\n    []\n```\n\nThis is now #16848.",
    "created_at": "2014-08-18T19:47:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108712",
    "user": "dkrenn"
}
```

There is a doctest (and the doctest using the result below) failing:

```
sage -t src/sage/combinat/asymptotics_multivariate_generating_functions.py
**********************************************************************
File "src/sage/combinat/asymptotics_multivariate_generating_functions.py", line 90, in sage.combinat.asymptotics_multivariate_generating_functions
Failed example:
    s
Expected:
    [{x: 1, y: 1}]
Got:
    []
```

This is now #16848.



---

archive/issue_comments_108713.json:
```json
{
    "body": "Replying to [comment:70 dimpase]:\n> Replying to [comment:69 tscrim]:\n> > Vincent (or Dima), will you be able to check the math for this ticket? If not, I think I could go through it math-wise.\n\nAt least, I started checking the math.\n\n> IMHO  refactoring and interfacing with Sage's facilities for rational functions is due, before this can be merged.\n\nYes, this should be definitely done.",
    "created_at": "2014-08-18T19:50:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108713",
    "user": "dkrenn"
}
```

Replying to [comment:70 dimpase]:
> Replying to [comment:69 tscrim]:
> > Vincent (or Dima), will you be able to check the math for this ticket? If not, I think I could go through it math-wise.

At least, I started checking the math.

> IMHO  refactoring and interfacing with Sage's facilities for rational functions is due, before this can be merged.

Yes, this should be definitely done.



---

archive/issue_comments_108714.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-19T13:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108714",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108715.json:
```json
{
    "body": "Replying to [comment:74 dkrenn]:\n> There is a doctest (and the doctest using the result below) failing:\n> {{{\n> sage -t src/sage/combinat/asymptotics_multivariate_generating_functions.py\n> **********************************************************************\n> File \"src/sage/combinat/asymptotics_multivariate_generating_functions.py\", line 90, in sage.combinat.asymptotics_multivariate_generating_functions\n> Failed example:\n>     s\n> Expected:\n>     [{x: 1, y: 1}]\n> Got:\n>     []\n> }}}\n> This is now #16848.\n\nThis works now (by a workaround).",
    "created_at": "2014-08-19T13:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108715",
    "user": "dkrenn"
}
```

Replying to [comment:74 dkrenn]:
> There is a doctest (and the doctest using the result below) failing:
> {{{
> sage -t src/sage/combinat/asymptotics_multivariate_generating_functions.py
> **********************************************************************
> File "src/sage/combinat/asymptotics_multivariate_generating_functions.py", line 90, in sage.combinat.asymptotics_multivariate_generating_functions
> Failed example:
>     s
> Expected:
>     [{x: 1, y: 1}]
> Got:
>     []
> }}}
> This is now #16848.

This works now (by a workaround).



---

archive/issue_comments_108716.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-08-19T13:27:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108716",
    "user": "dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_108717.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-27T08:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108717",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108718.json:
```json
{
    "body": "I'm currently porting the code to Sage's parent/element framework.",
    "created_at": "2014-12-27T15:24:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108718",
    "user": "dkrenn"
}
```

I'm currently porting the code to Sage's parent/element framework.



---

archive/issue_comments_108719.json:
```json
{
    "body": "My pep8 compliant branch is now available at \"u/chapoton/10519\".\n\nI am not sure it will be easy to merge it with your other changes. Maybe it is not worth the trouble.",
    "created_at": "2014-12-27T16:13:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108719",
    "user": "chapoton"
}
```

My pep8 compliant branch is now available at "u/chapoton/10519".

I am not sure it will be easy to merge it with your other changes. Maybe it is not worth the trouble.



---

archive/issue_comments_108720.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2014-12-29T09:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108720",
    "user": "dkrenn"
}
```

Last 10 new commits:



---

archive/issue_comments_108721.json:
```json
{
    "body": "I've uploaded what I have up to now. There is one major change, namely transitioning to Sage's parent/element framework. There are a couple of minor issues to fix left and some doctests are still failing (this is due to using a wrong base ring...)\n\nReplying to [comment:83 chapoton]:\n> My pep8 compliant branch is now available at \"u/chapoton/10519\".\n> I am not sure it will be easy to merge it with your other changes. Maybe it is not worth the trouble.\n\nI've merged your changes/branch (most of them manually; I think I've got all but please check if in doubt).\n\nIn \"u/chapoton/10519\" Sage 6.5.beta4 was merged, which made some doctests failing. I've created a commit fixing most of them, but there is one annoying issue: The doctest in line 3672\n\n```\nDD = FFDR._diff_op(A, B, AB_derivs, T, M, 1, 2)\n```\n\ntakes now forever (over 45 seconds compared to 1.78 seconds before). Does someone has an idea what between 6.3 and 6.5.beta4 could trigger this?",
    "created_at": "2014-12-29T09:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108721",
    "user": "dkrenn"
}
```

I've uploaded what I have up to now. There is one major change, namely transitioning to Sage's parent/element framework. There are a couple of minor issues to fix left and some doctests are still failing (this is due to using a wrong base ring...)

Replying to [comment:83 chapoton]:
> My pep8 compliant branch is now available at "u/chapoton/10519".
> I am not sure it will be easy to merge it with your other changes. Maybe it is not worth the trouble.

I've merged your changes/branch (most of them manually; I think I've got all but please check if in doubt).

In "u/chapoton/10519" Sage 6.5.beta4 was merged, which made some doctests failing. I've created a commit fixing most of them, but there is one annoying issue: The doctest in line 3672

```
DD = FFDR._diff_op(A, B, AB_derivs, T, M, 1, 2)
```

takes now forever (over 45 seconds compared to 1.78 seconds before). Does someone has an idea what between 6.3 and 6.5.beta4 could trigger this?



---

archive/issue_comments_108722.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-29T12:32:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108722",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108723.json:
```json
{
    "body": "Replying to [comment:86 dkrenn]:\n> Replying to [comment:83 chapoton]:\n> > My pep8 compliant branch is now available at \"u/chapoton/10519\".\n> In \"u/chapoton/10519\" [...] The doctest in line 3672\n> {{{\n> DD = FFDR._diff_op(A, B, AB_derivs, T, M, 1, 2)\n> }}}\n> takes now forever (over 45 seconds compared to 1.78 seconds before). Does someone has an idea what between 6.3 and 6.5.beta4 could trigger this?\n\nFinally found the problem; wasn't the Sage upgrade, but commit c37addd \"trac #10519 pep8 fully compliant\", which simplified \n\n```\nif something != Integer(0):\n```\n\nto\n\n```\nif something:\n```\n\nwhich made this test slow (don't know why...). Anyhow, pushed a commit which fixes this.",
    "created_at": "2014-12-29T12:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108723",
    "user": "dkrenn"
}
```

Replying to [comment:86 dkrenn]:
> Replying to [comment:83 chapoton]:
> > My pep8 compliant branch is now available at "u/chapoton/10519".
> In "u/chapoton/10519" [...] The doctest in line 3672
> {{{
> DD = FFDR._diff_op(A, B, AB_derivs, T, M, 1, 2)
> }}}
> takes now forever (over 45 seconds compared to 1.78 seconds before). Does someone has an idea what between 6.3 and 6.5.beta4 could trigger this?

Finally found the problem; wasn't the Sage upgrade, but commit c37addd "trac #10519 pep8 fully compliant", which simplified 

```
if something != Integer(0):
```

to

```
if something:
```

which made this test slow (don't know why...). Anyhow, pushed a commit which fixes this.



---

archive/issue_comments_108724.json:
```json
{
    "body": "Oops, sorry for this. I thought it was simpler. I do not understand why is is much slower.  Anyway, sorry again for the trouble.",
    "created_at": "2014-12-29T13:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108724",
    "user": "chapoton"
}
```

Oops, sorry for this. I thought it was simpler. I do not understand why is is much slower.  Anyway, sorry again for the trouble.



---

archive/issue_comments_108725.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-29T19:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108725",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108726.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-01T18:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108726",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108727.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-04T14:17:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108727",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108728.json:
```json
{
    "body": "During review I've worked over the code and ported it to Sage's parent/element framework.\n\nHere are comments to the comments above:\n\nReplying to [comment:66 vdelecroix]:\n> - as a matter of uniformization class name are better expanded (`FractionWithFactoredPolynomialDenominator` instead of `FFPD`)\n\nRenaming done.\n\n> - `cartesian_product_iterator` will be very soonly deprecated, so use `product` from the Python `itertools` module instead.\n\n`itertools` are now used here.\n\n> - it is generally bad practice to have such a big import list at the begining of the file (because of potential circular import). Moreover some of them can be completely avoided: `L = FractionField(PolynomialRing(K, indets))` can be `PolynomialRing(K, indets).fraction_field()`.\n\nMoved imports to functions. Only a very few global (in the module) imports are left.\n\n> More seriously:\n> - I do not understand the specifications. It is said that the numerator must be an element p of a 0 or 1 variate factorial polynomial ring R but you have examples involving `cos(x)`. What is the underlying polynomial ring in that case?\n> - repeating comment:59, Why there is a need for the class `FFDP`? Why isn't it directly implemented as the level of fractions of polynomials? It would makes sense to cache the factorization of the denominator if it is required in several places, but I do not see the point of the `FFDP` class.\n\nThe numerator can be any element from a ring into which the denominator coerces in. E.g. the denominator is a polynomial ring, but numerator is allowed to be out of the symbolic ring.\n\n> - Some of the method needs definition: `critical_cone`, `is_convenient_multiple_point`, ...\n\nTried a bit of rephrasing, but they are defined in the cited works.\n\n> - Some of the method would better be hidden: `combine_like_terms`, ... \n\nDone. (also some other functions/methods were made private).\n\n\nConcerning the review:\n- I've did a basic check on the mathematics: seems to be ok.\n- I've read the docstrings and modified some of them either to make them clearer or to fit the guidelines in the developer guide (e.g. INPUT/OUTPUT blocks and so on). This is fine for me here (but documentation can, of course, always be improved ;) ).\n- Documentation builds.\n- All doctests pass.\n- I'm towards a positive review, but, of course, someone has to cross review my transition of the code to parent/element framework.\n\n**Therefore: needs cross-review !**",
    "created_at": "2015-01-04T14:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108728",
    "user": "dkrenn"
}
```

During review I've worked over the code and ported it to Sage's parent/element framework.

Here are comments to the comments above:

Replying to [comment:66 vdelecroix]:
> - as a matter of uniformization class name are better expanded (`FractionWithFactoredPolynomialDenominator` instead of `FFPD`)

Renaming done.

> - `cartesian_product_iterator` will be very soonly deprecated, so use `product` from the Python `itertools` module instead.

`itertools` are now used here.

> - it is generally bad practice to have such a big import list at the begining of the file (because of potential circular import). Moreover some of them can be completely avoided: `L = FractionField(PolynomialRing(K, indets))` can be `PolynomialRing(K, indets).fraction_field()`.

Moved imports to functions. Only a very few global (in the module) imports are left.

> More seriously:
> - I do not understand the specifications. It is said that the numerator must be an element p of a 0 or 1 variate factorial polynomial ring R but you have examples involving `cos(x)`. What is the underlying polynomial ring in that case?
> - repeating comment:59, Why there is a need for the class `FFDP`? Why isn't it directly implemented as the level of fractions of polynomials? It would makes sense to cache the factorization of the denominator if it is required in several places, but I do not see the point of the `FFDP` class.

The numerator can be any element from a ring into which the denominator coerces in. E.g. the denominator is a polynomial ring, but numerator is allowed to be out of the symbolic ring.

> - Some of the method needs definition: `critical_cone`, `is_convenient_multiple_point`, ...

Tried a bit of rephrasing, but they are defined in the cited works.

> - Some of the method would better be hidden: `combine_like_terms`, ... 

Done. (also some other functions/methods were made private).


Concerning the review:
- I've did a basic check on the mathematics: seems to be ok.
- I've read the docstrings and modified some of them either to make them clearer or to fit the guidelines in the developer guide (e.g. INPUT/OUTPUT blocks and so on). This is fine for me here (but documentation can, of course, always be improved ;) ).
- Documentation builds.
- All doctests pass.
- I'm towards a positive review, but, of course, someone has to cross review my transition of the code to parent/element framework.

**Therefore: needs cross-review !**



---

archive/issue_comments_108729.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-01-04T14:30:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108729",
    "user": "dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_108730.json:
```json
{
    "body": "Just two minor comments:\n* If `FractionWithFactoredDenominatorRing` is intended to actually be a ring, shouldn't the numerators also be  restricted to some given parent? (i.e., shouldn't there be a `numerator_ring` and a `denominator_ring`, or something like that, instead of just a `ring`?)\n* Isn't at least some of the code general-purpose enough that it could live in `rings/` or `symbolic/` rather than `combinat/`? If not, perhaps it would be worth at least linking to it from the documentation of related objects.",
    "created_at": "2015-01-23T14:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108730",
    "user": "mmezzarobba"
}
```

Just two minor comments:
* If `FractionWithFactoredDenominatorRing` is intended to actually be a ring, shouldn't the numerators also be  restricted to some given parent? (i.e., shouldn't there be a `numerator_ring` and a `denominator_ring`, or something like that, instead of just a `ring`?)
* Isn't at least some of the code general-purpose enough that it could live in `rings/` or `symbolic/` rather than `combinat/`? If not, perhaps it would be worth at least linking to it from the documentation of related objects.



---

archive/issue_comments_108731.json:
```json
{
    "body": "Replying to [comment:95 mmezzarobba]:\n\n> * Isn't at least some of the code general-purpose enough that it could live in `rings/` or `symbolic/` rather than `combinat/`? If not, perhaps it would be worth at least linking to it from the documentation of related objects.\n\nI have mentioned that in an old comment; IMHO the code must be refactored: the code to decompose a rational function into a sum must not live in combinat/.",
    "created_at": "2015-01-23T14:15:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108731",
    "user": "dimpase"
}
```

Replying to [comment:95 mmezzarobba]:

> * Isn't at least some of the code general-purpose enough that it could live in `rings/` or `symbolic/` rather than `combinat/`? If not, perhaps it would be worth at least linking to it from the documentation of related objects.

I have mentioned that in an old comment; IMHO the code must be refactored: the code to decompose a rational function into a sum must not live in combinat/.



---

archive/issue_comments_108732.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-01-23T14:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108732",
    "user": "mmezzarobba"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_108733.json:
```json
{
    "body": "Moreover, I could reproduce the results from the four doctests of `univariate_decomposition` using the existing `QuotientFields.element_class.partial_fraction_decomposition` and `Expression.partial_fraction` functionality. So, why not use these?",
    "created_at": "2015-01-23T16:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108733",
    "user": "rws"
}
```

Moreover, I could reproduce the results from the four doctests of `univariate_decomposition` using the existing `QuotientFields.element_class.partial_fraction_decomposition` and `Expression.partial_fraction` functionality. So, why not use these?



---

archive/issue_comments_108734.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-28T18:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108734",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108735.json:
```json
{
    "body": "Merged in current stable `SageMath 6.8`",
    "created_at": "2015-07-28T18:29:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108735",
    "user": "dkrenn"
}
```

Merged in current stable `SageMath 6.8`



---

archive/issue_comments_108736.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-31T08:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108736",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108737.json:
```json
{
    "body": "Merged in current stable [SageMath](SageMath) 7.0",
    "created_at": "2016-01-31T08:10:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108737",
    "user": "dkrenn"
}
```

Merged in current stable [SageMath](SageMath) 7.0



---

archive/issue_comments_108738.json:
```json
{
    "body": "Replying to [comment:95 mmezzarobba]:\n> * Isn't at least some of the code general-purpose enough that it could live in `rings/` or `symbolic/` rather than `combinat/`? If not, perhaps it would be worth at least linking to it from the documentation of related objects.\n\nMoved to `sage.rings.asymptotic` (which was created last summer for asymptotic expansions #17601) as this seems very suitable.",
    "created_at": "2016-01-31T08:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108738",
    "user": "dkrenn"
}
```

Replying to [comment:95 mmezzarobba]:
> * Isn't at least some of the code general-purpose enough that it could live in `rings/` or `symbolic/` rather than `combinat/`? If not, perhaps it would be worth at least linking to it from the documentation of related objects.

Moved to `sage.rings.asymptotic` (which was created last summer for asymptotic expansions #17601) as this seems very suitable.



---

archive/issue_comments_108739.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-31T08:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108739",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108740.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-31T12:50:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108740",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108741.json:
```json
{
    "body": "Replying to [comment:96 dimpase]:\n> Replying to [comment:95 mmezzarobba]:\n> > * Isn't at least some of the code general-purpose enough that it could live in `rings/` or `symbolic/` rather than `combinat/`? If not, perhaps it would be worth at least linking to it from the documentation of related objects.\n> \n> I have mentioned that in an old comment; IMHO the code must be refactored: the code to decompose a rational function into a sum must not live in combinat/.\n\nChanged; now `sage.rings.asymptotic`, see [comment:103 comment:103].",
    "created_at": "2016-01-31T12:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108741",
    "user": "dkrenn"
}
```

Replying to [comment:96 dimpase]:
> Replying to [comment:95 mmezzarobba]:
> > * Isn't at least some of the code general-purpose enough that it could live in `rings/` or `symbolic/` rather than `combinat/`? If not, perhaps it would be worth at least linking to it from the documentation of related objects.
> 
> I have mentioned that in an old comment; IMHO the code must be refactored: the code to decompose a rational function into a sum must not live in combinat/.

Changed; now `sage.rings.asymptotic`, see [comment:103 comment:103].



---

archive/issue_comments_108742.json:
```json
{
    "body": "Replying to [comment:95 mmezzarobba]:\n> Just two minor comments:\n> * If `FractionWithFactoredDenominatorRing` is intended to actually be a ring, shouldn't the numerators also be  restricted to some given parent? (i.e., shouldn't there be a `numerator_ring` and a `denominator_ring`, or something like that, instead of just a `ring`?)\n\nI agree; now there is.",
    "created_at": "2016-01-31T12:54:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108742",
    "user": "dkrenn"
}
```

Replying to [comment:95 mmezzarobba]:
> Just two minor comments:
> * If `FractionWithFactoredDenominatorRing` is intended to actually be a ring, shouldn't the numerators also be  restricted to some given parent? (i.e., shouldn't there be a `numerator_ring` and a `denominator_ring`, or something like that, instead of just a `ring`?)

I agree; now there is.



---

archive/issue_comments_108743.json:
```json
{
    "body": "Replying to [comment:98 rws]:\n> Moreover, I could reproduce the results from the four doctests of `univariate_decomposition` using the existing `QuotientFields.element_class.partial_fraction_decomposition` and `Expression.partial_fraction` functionality. So, why not use these?\n\nIn `univariate_decomposition` the already-known factorization of the denominator is used. This gives a speed-up for not too small instances. Below the timings,\n\n- No speedup for the first (small) example in the doctest:\n\n```\nsage: sage: from sage.rings.asymptotic.asymptotics_multivariate_generating_functions import FractionWithFactoredDenominatorRing\nsage: sage: R.<x> = PolynomialRing(QQ)\nsage: sage: FFPD = FractionWithFactoredDenominatorRing(R)\n/local/dakrenn/sage/7.0/local/lib/python2.7/site-packages/sage/structure/unique_representation.py:1021: FutureWarning: This class/method/function is marked as experimental. It, its functionality or its interface might change without a formal deprecation.\nSee http://trac.sagemath.org/10519 for details.\n  instance = typecall(cls, *args, **options)\nsage: sage: f = 5*x^3 + 1/x + 1/(x-1) + 1/(3*x^2 + 1)\nsage: sage: ff = FFPD(f)\nsage: sage: %timeit -n 1 -r 1 ff.univariate_decomposition()\n1 loops, best of 1: 2.24 ms per loop\nsage: sage: %timeit -n 1 -r 1 f.partial_fraction_decomposition()\n1 loops, best of 1: 1.02 ms per loop\n```\n\n- But adding some more terms, we have a speedup:\n\n```\nsage: sage: from sage.rings.asymptotic.asymptotics_multivariate_generating_functions import FractionWithFactoredDenominatorRing\nsage: sage: R.<x> = PolynomialRing(QQ)\nsage: sage: FFPD = FractionWithFactoredDenominatorRing(R)\n/local/dakrenn/sage/7.0/local/lib/python2.7/site-packages/sage/structure/unique_representation.py:1021: FutureWarning: This class/method/function is marked as experimental. It, its functionality or its interface might change without a formal deprecation.\nSee http://trac.sagemath.org/10519 for details.\n  instance = typecall(cls, *args, **options)\nsage: sage: f = 5*x^3 + 1/x + 1/(x-1) + 1/(3*x^2 + 1) + 1/(x-2) + 1/(x-3) + 1/(x-4) + 1/(x-5) + 1/(x-6) + 1/(x-7)  # + 1/(x-8) + 1/(x-9) + 1/(x-10) + 1/(x-11) + 1/(x-12) + 1/(x-13)\nsage: sage: ff = FFPD(f)\nsage: sage: %timeit -n 1 -r 1 ff.univariate_decomposition()\n1 loops, best of 1: 1.53 ms per loop\nsage: sage: %timeit -n 1 -r 1 f.partial_fraction_decomposition()\n1 loops, best of 1: 3.3 ms per loop\n```\n\n- The second example of the doctest is already faster with `univariate_decomposition` as it is:\n\n```\nsage: sage: from sage.rings.asymptotic.asymptotics_multivariate_generating_functions import FractionWithFactoredDenominatorRing\nsage: sage: R.<x> = PolynomialRing(QQ)\nsage: sage: FFPD = FractionWithFactoredDenominatorRing(R, SR)\n/local/dakrenn/sage/7.0/local/lib/python2.7/site-packages/sage/structure/unique_representation.py:1021: FutureWarning: This class/method/function is marked as experimental. It, its functionality or its interface might change without a formal deprecation.\nSee http://trac.sagemath.org/10519 for details.\n  instance = typecall(cls, *args, **options)\nsage: sage: f = 5*x^3 + 1/x + 1/(x-1) + exp(x)/(3*x^2 + 1)\nsage: sage: ff = FFPD(f)\nsage: sage: %timeit -n 1 -r 1 ff.univariate_decomposition()\n1 loops, best of 1: 6.07 ms per loop\nsage: sage: %timeit -n 1 -r 1 f.partial_fraction()\n1 loops, best of 1: 9.7 ms per loop\n```\n\n\nI've added a not in the docstring of the method, where this is pointed out.",
    "created_at": "2016-01-31T12:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108743",
    "user": "dkrenn"
}
```

Replying to [comment:98 rws]:
> Moreover, I could reproduce the results from the four doctests of `univariate_decomposition` using the existing `QuotientFields.element_class.partial_fraction_decomposition` and `Expression.partial_fraction` functionality. So, why not use these?

In `univariate_decomposition` the already-known factorization of the denominator is used. This gives a speed-up for not too small instances. Below the timings,

- No speedup for the first (small) example in the doctest:

```
sage: sage: from sage.rings.asymptotic.asymptotics_multivariate_generating_functions import FractionWithFactoredDenominatorRing
sage: sage: R.<x> = PolynomialRing(QQ)
sage: sage: FFPD = FractionWithFactoredDenominatorRing(R)
/local/dakrenn/sage/7.0/local/lib/python2.7/site-packages/sage/structure/unique_representation.py:1021: FutureWarning: This class/method/function is marked as experimental. It, its functionality or its interface might change without a formal deprecation.
See http://trac.sagemath.org/10519 for details.
  instance = typecall(cls, *args, **options)
sage: sage: f = 5*x^3 + 1/x + 1/(x-1) + 1/(3*x^2 + 1)
sage: sage: ff = FFPD(f)
sage: sage: %timeit -n 1 -r 1 ff.univariate_decomposition()
1 loops, best of 1: 2.24 ms per loop
sage: sage: %timeit -n 1 -r 1 f.partial_fraction_decomposition()
1 loops, best of 1: 1.02 ms per loop
```

- But adding some more terms, we have a speedup:

```
sage: sage: from sage.rings.asymptotic.asymptotics_multivariate_generating_functions import FractionWithFactoredDenominatorRing
sage: sage: R.<x> = PolynomialRing(QQ)
sage: sage: FFPD = FractionWithFactoredDenominatorRing(R)
/local/dakrenn/sage/7.0/local/lib/python2.7/site-packages/sage/structure/unique_representation.py:1021: FutureWarning: This class/method/function is marked as experimental. It, its functionality or its interface might change without a formal deprecation.
See http://trac.sagemath.org/10519 for details.
  instance = typecall(cls, *args, **options)
sage: sage: f = 5*x^3 + 1/x + 1/(x-1) + 1/(3*x^2 + 1) + 1/(x-2) + 1/(x-3) + 1/(x-4) + 1/(x-5) + 1/(x-6) + 1/(x-7)  # + 1/(x-8) + 1/(x-9) + 1/(x-10) + 1/(x-11) + 1/(x-12) + 1/(x-13)
sage: sage: ff = FFPD(f)
sage: sage: %timeit -n 1 -r 1 ff.univariate_decomposition()
1 loops, best of 1: 1.53 ms per loop
sage: sage: %timeit -n 1 -r 1 f.partial_fraction_decomposition()
1 loops, best of 1: 3.3 ms per loop
```

- The second example of the doctest is already faster with `univariate_decomposition` as it is:

```
sage: sage: from sage.rings.asymptotic.asymptotics_multivariate_generating_functions import FractionWithFactoredDenominatorRing
sage: sage: R.<x> = PolynomialRing(QQ)
sage: sage: FFPD = FractionWithFactoredDenominatorRing(R, SR)
/local/dakrenn/sage/7.0/local/lib/python2.7/site-packages/sage/structure/unique_representation.py:1021: FutureWarning: This class/method/function is marked as experimental. It, its functionality or its interface might change without a formal deprecation.
See http://trac.sagemath.org/10519 for details.
  instance = typecall(cls, *args, **options)
sage: sage: f = 5*x^3 + 1/x + 1/(x-1) + exp(x)/(3*x^2 + 1)
sage: sage: ff = FFPD(f)
sage: sage: %timeit -n 1 -r 1 ff.univariate_decomposition()
1 loops, best of 1: 6.07 ms per loop
sage: sage: %timeit -n 1 -r 1 f.partial_fraction()
1 loops, best of 1: 9.7 ms per loop
```


I've added a not in the docstring of the method, where this is pointed out.



---

archive/issue_comments_108744.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-31T14:29:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108744",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108745.json:
```json
{
    "body": "Replying to [comment:109 git]:\n> ||[ae42ad6](http://git.sagemath.org/sage.git/commit/?id=ae42ad6539aaf99a7986a2bb1c2f018262296d5b)||`Trac #10519: partial revert of commit 137f3c and follow-up ticket`||\n\nSee #19989 for this issue.",
    "created_at": "2016-01-31T14:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108745",
    "user": "dkrenn"
}
```

Replying to [comment:109 git]:
> ||[ae42ad6](http://git.sagemath.org/sage.git/commit/?id=ae42ad6539aaf99a7986a2bb1c2f018262296d5b)||`Trac #10519: partial revert of commit 137f3c and follow-up ticket`||

See #19989 for this issue.



---

archive/issue_comments_108746.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-01-31T14:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108746",
    "user": "dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_108747.json:
```json
{
    "body": "Ticket is again at `needs_review`. I've incorporated the comments above; please cross-review these changes.\n\nA short summary (since the ticket is open for over 5 years now): The original code was posted by Alex Raichev. I've reviewed this code about two years ago. Mathematically it is fine, but it had to be included into [SageMath](SageMath) better (see comments above). This is now done and from my part a positive review. However, since I made quite a lot of changes, these changes need a cross-review. Note that I've now marked the code as [experimental](http://doc.sagemath.org/html/en/developer/coding_in_python.html#experimental-unstable-code).",
    "created_at": "2016-01-31T14:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108747",
    "user": "dkrenn"
}
```

Ticket is again at `needs_review`. I've incorporated the comments above; please cross-review these changes.

A short summary (since the ticket is open for over 5 years now): The original code was posted by Alex Raichev. I've reviewed this code about two years ago. Mathematically it is fine, but it had to be included into [SageMath](SageMath) better (see comments above). This is now done and from my part a positive review. However, since I made quite a lot of changes, these changes need a cross-review. Note that I've now marked the code as [experimental](http://doc.sagemath.org/html/en/developer/coding_in_python.html#experimental-unstable-code).



---

archive/issue_comments_108748.json:
```json
{
    "body": "A few very quick thoughts from a very quick glance:\n\n- Remove input/output blocks that have nothing. IMO this adds clutter to the docstrings.\n- How experimental/unstable do you think this code really is?",
    "created_at": "2016-01-31T14:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108748",
    "user": "tscrim"
}
```

A few very quick thoughts from a very quick glance:

- Remove input/output blocks that have nothing. IMO this adds clutter to the docstrings.
- How experimental/unstable do you think this code really is?



---

archive/issue_comments_108749.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-31T14:54:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108749",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108750.json:
```json
{
    "body": "Replying to [comment:112 tscrim]:\n> - Remove input/output blocks that have nothing. IMO this adds clutter to the docstrings.\n\nDone.\n\n> - How experimental/unstable do you think this code really is?\n\nI think the code is quite stable; AFAIK, Mark Wilson (one of the authors of the corresponding theory behind this) uses basically this code (not from the ticket, but a fork) for his research now for some years.\nI've marked it \"experimental\" since it is a new module and the interplay of the code with the whole SageMath-infrastructure was changed on this ticket. This is the part, where there is not that much experience, but this will change once it is in [SageMath](SageMath). If you feel that \"experimental\" should be remove...I'm fine with any choice.",
    "created_at": "2016-01-31T15:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108750",
    "user": "dkrenn"
}
```

Replying to [comment:112 tscrim]:
> - Remove input/output blocks that have nothing. IMO this adds clutter to the docstrings.

Done.

> - How experimental/unstable do you think this code really is?

I think the code is quite stable; AFAIK, Mark Wilson (one of the authors of the corresponding theory behind this) uses basically this code (not from the ticket, but a fork) for his research now for some years.
I've marked it "experimental" since it is a new module and the interplay of the code with the whole SageMath-infrastructure was changed on this ticket. This is the part, where there is not that much experience, but this will change once it is in [SageMath](SageMath). If you feel that "experimental" should be remove...I'm fine with any choice.



---

archive/issue_comments_108751.json:
```json
{
    "body": "Replying to [comment:114 dkrenn]:\n> Replying to [comment:112 tscrim]:\n> > - How experimental/unstable do you think this code really is?\n> \n> I think the code is quite stable; AFAIK, Mark Wilson (one of the authors of the corresponding theory behind this) uses basically this code (not from the ticket, but a fork) for his research now for some years.\n> I've marked it \"experimental\" since it is a new module and the interplay of the code with the whole SageMath-infrastructure was changed on this ticket. This is the part, where there is not that much experience, but this will change once it is in [SageMath](SageMath). If you feel that \"experimental\" should be remove...I'm fine with any choice.\n\nI would be surprised if the (public) API changed much, the current version of the code fits in with the category framework, and it has been/will be (well) reviewed. So I feel that it should not be considered experimental.\n\nWe should also update the references (I can do this on my review changes).",
    "created_at": "2016-01-31T15:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108751",
    "user": "tscrim"
}
```

Replying to [comment:114 dkrenn]:
> Replying to [comment:112 tscrim]:
> > - How experimental/unstable do you think this code really is?
> 
> I think the code is quite stable; AFAIK, Mark Wilson (one of the authors of the corresponding theory behind this) uses basically this code (not from the ticket, but a fork) for his research now for some years.
> I've marked it "experimental" since it is a new module and the interplay of the code with the whole SageMath-infrastructure was changed on this ticket. This is the part, where there is not that much experience, but this will change once it is in [SageMath](SageMath). If you feel that "experimental" should be remove...I'm fine with any choice.

I would be surprised if the (public) API changed much, the current version of the code fits in with the category framework, and it has been/will be (well) reviewed. So I feel that it should not be considered experimental.

We should also update the references (I can do this on my review changes).



---

archive/issue_comments_108752.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-31T15:54:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108752",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108753.json:
```json
{
    "body": "Replying to [comment:115 tscrim]:\n> Replying to [comment:114 dkrenn]:\n> > Replying to [comment:112 tscrim]:\n> > > - How experimental/unstable do you think this code really is?\n> > [...]\n> I would be surprised if the (public) API changed much, the current version of the code fits in with the category framework, and it has been/will be (well) reviewed. So I feel that it should not be considered experimental.\n\nGood; I did `git revert` on the corresponding commit.",
    "created_at": "2016-01-31T15:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108753",
    "user": "dkrenn"
}
```

Replying to [comment:115 tscrim]:
> Replying to [comment:114 dkrenn]:
> > Replying to [comment:112 tscrim]:
> > > - How experimental/unstable do you think this code really is?
> > [...]
> I would be surprised if the (public) API changed much, the current version of the code fits in with the category framework, and it has been/will be (well) reviewed. So I feel that it should not be considered experimental.

Good; I did `git revert` on the corresponding commit.



---

archive/issue_comments_108754.json:
```json
{
    "body": "Replying to [comment:115 tscrim]:\n> We should also update the references (I can do this on my review changes).\n\nYes, we should. Thanks for doing.",
    "created_at": "2016-01-31T15:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108754",
    "user": "dkrenn"
}
```

Replying to [comment:115 tscrim]:
> We should also update the references (I can do this on my review changes).

Yes, we should. Thanks for doing.



---

archive/issue_comments_108755.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-15T04:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108755",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108756.json:
```json
{
    "body": "So I made my pass through the code (finally). I think it looks good with my changes:\n\n- I added a `__classcall_private__` to parse the input for `UniqueRepresentation`.\n- I moved the (other) static methods to separate functions within the module since (IMO) they were not strongly associated with the `FractionWithFactoredDenominatorRing` class. It also allows their doc to be included by default (since they do not have to be _hidden) and allows them to potentially be used outside of the class.\n- I moved around some of the documentation within methods as I feel the descriptive information should come before the `INPUT`/`OUTPUT` blocks. The input signature of the method is the first set of information given by `?` and the documentation.\n- I moved more common imports to the start. There is no danger of circular imports when the file in question is not imported into the global namespace (it is also faster, easier to maintain in the long term, and I'm not as paranoid about these thing).\n- Replaced some Sage implementations with there standard python equivalents.\n- Other misc changes.\n\nIf you're happy with my changes, then you can set a positive review.\n\nPerhaps for a followup, we should figure out what the best way is to expose this functionality into the global namespace. Should we just do a lazy import of `FractionWithFactoredDenominatorRing`?",
    "created_at": "2016-02-15T04:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108756",
    "user": "tscrim"
}
```

So I made my pass through the code (finally). I think it looks good with my changes:

- I added a `__classcall_private__` to parse the input for `UniqueRepresentation`.
- I moved the (other) static methods to separate functions within the module since (IMO) they were not strongly associated with the `FractionWithFactoredDenominatorRing` class. It also allows their doc to be included by default (since they do not have to be _hidden) and allows them to potentially be used outside of the class.
- I moved around some of the documentation within methods as I feel the descriptive information should come before the `INPUT`/`OUTPUT` blocks. The input signature of the method is the first set of information given by `?` and the documentation.
- I moved more common imports to the start. There is no danger of circular imports when the file in question is not imported into the global namespace (it is also faster, easier to maintain in the long term, and I'm not as paranoid about these thing).
- Replaced some Sage implementations with there standard python equivalents.
- Other misc changes.

If you're happy with my changes, then you can set a positive review.

Perhaps for a followup, we should figure out what the best way is to expose this functionality into the global namespace. Should we just do a lazy import of `FractionWithFactoredDenominatorRing`?



---

archive/issue_comments_108757.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-15T12:47:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108757",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108758.json:
```json
{
    "body": "Replying to [comment:121 tscrim]:\n> So I made my pass through the code (finally).\n\nThank you very much.\n\n> - I added a `__classcall_private__` to parse the input for `UniqueRepresentation`.\n\nGood; checked.\n\n> - I moved the (other) static methods to separate functions within the module since (IMO) they were not strongly associated with the `FractionWithFactoredDenominatorRing` class. It also allows their doc to be included by default (since they do not have to be _hidden) and allows them to potentially be used outside of the class.\n\nI agree that this is a good idea.\n\n> - I moved around some of the documentation within methods as I feel the descriptive information should come before the `INPUT`/`OUTPUT` blocks. The input signature of the method is the first set of information given by `?` and the documentation.\n\nOk, looks good.\n\n> - I moved more common imports to the start. There is no danger of circular imports when the file in question is not imported into the global namespace (it is also faster, easier to maintain in the long term, and I'm not as paranoid about these thing).\n\nI'm fine with it. Just out of curiosity, why is this faster?\n\n> - Replaced some Sage implementations with there standard python equivalents.\n\nOk.\n\n> - Other misc changes.\n\nI've checked the diffs (all 200 hunks); LGTM\n\n> If you're happy with my changes, then you can set a positive review.\n\nI've added one doctest to make sage-coverage happier and removed one full-stop.\n\n> Perhaps for a followup, we should figure out what the best way is to expose this functionality into the global namespace. Should we just do a lazy import of `FractionWithFactoredDenominatorRing`?\n\nMaybe. (A lazy import is indeed suitable.)\n\nI set this to positive; all tests pass, doc builds and looks good.",
    "created_at": "2016-02-15T12:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108758",
    "user": "dkrenn"
}
```

Replying to [comment:121 tscrim]:
> So I made my pass through the code (finally).

Thank you very much.

> - I added a `__classcall_private__` to parse the input for `UniqueRepresentation`.

Good; checked.

> - I moved the (other) static methods to separate functions within the module since (IMO) they were not strongly associated with the `FractionWithFactoredDenominatorRing` class. It also allows their doc to be included by default (since they do not have to be _hidden) and allows them to potentially be used outside of the class.

I agree that this is a good idea.

> - I moved around some of the documentation within methods as I feel the descriptive information should come before the `INPUT`/`OUTPUT` blocks. The input signature of the method is the first set of information given by `?` and the documentation.

Ok, looks good.

> - I moved more common imports to the start. There is no danger of circular imports when the file in question is not imported into the global namespace (it is also faster, easier to maintain in the long term, and I'm not as paranoid about these thing).

I'm fine with it. Just out of curiosity, why is this faster?

> - Replaced some Sage implementations with there standard python equivalents.

Ok.

> - Other misc changes.

I've checked the diffs (all 200 hunks); LGTM

> If you're happy with my changes, then you can set a positive review.

I've added one doctest to make sage-coverage happier and removed one full-stop.

> Perhaps for a followup, we should figure out what the best way is to expose this functionality into the global namespace. Should we just do a lazy import of `FractionWithFactoredDenominatorRing`?

Maybe. (A lazy import is indeed suitable.)

I set this to positive; all tests pass, doc builds and looks good.



---

archive/issue_comments_108759.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-15T12:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108759",
    "user": "dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_108760.json:
```json
{
    "body": "Replying to [comment:123 dkrenn]:\n> Replying to [comment:121 tscrim]:\n> > - I moved more common imports to the start. There is no danger of circular imports when the file in question is not imported into the global namespace (it is also faster, easier to maintain in the long term, and I'm not as paranoid about these thing).\n> \n> I'm fine with it. Just out of curiosity, why is this faster?\n\nEvery time the function gets called, Python needs to check to see if it has imported the object. While this is more on the level of micro-optimization, it can matter in those methods used in a tight loop.\n\n> I've added one doctest to make sage-coverage happier and removed one full-stop.\n\nWhoops. Good catch.\n\n> > Perhaps for a followup, we should figure out what the best way is to expose this functionality into the global namespace. Should we just do a lazy import of `FractionWithFactoredDenominatorRing`?\n> \n> Maybe. (A lazy import is indeed suitable.)\n> \n> I set this to positive; all tests pass, doc builds and looks good.\n\nWe also should remove the deprecation warnings in `_element_constructor_` on said followup as I forgot to remove them here.",
    "created_at": "2016-02-15T15:51:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108760",
    "user": "tscrim"
}
```

Replying to [comment:123 dkrenn]:
> Replying to [comment:121 tscrim]:
> > - I moved more common imports to the start. There is no danger of circular imports when the file in question is not imported into the global namespace (it is also faster, easier to maintain in the long term, and I'm not as paranoid about these thing).
> 
> I'm fine with it. Just out of curiosity, why is this faster?

Every time the function gets called, Python needs to check to see if it has imported the object. While this is more on the level of micro-optimization, it can matter in those methods used in a tight loop.

> I've added one doctest to make sage-coverage happier and removed one full-stop.

Whoops. Good catch.

> > Perhaps for a followup, we should figure out what the best way is to expose this functionality into the global namespace. Should we just do a lazy import of `FractionWithFactoredDenominatorRing`?
> 
> Maybe. (A lazy import is indeed suitable.)
> 
> I set this to positive; all tests pass, doc builds and looks good.

We also should remove the deprecation warnings in `_element_constructor_` on said followup as I forgot to remove them here.



---

archive/issue_comments_108761.json:
```json
{
    "body": "Replying to [comment:124 tscrim]:\n> Replying to [comment:123 dkrenn]:\n> > Replying to [comment:121 tscrim]:\n> > > - I moved more common imports to the start. There is no danger of circular imports when the file in question is not imported into the global namespace (it is also faster, easier to maintain in the long term, and I'm not as paranoid about these thing).\n> > \n> > I'm fine with it. Just out of curiosity, why is this faster?\n> \n> Every time the function gets called, Python needs to check to see if it has imported the object. While this is more on the level of micro-optimization, it can matter in those methods used in a tight loop.\n\nOk, thank you for your explanation.\n\n> We also should remove the deprecation warnings in `_element_constructor_` on said followup as I forgot to remove them here.\n\nNot a strong preference, but actually, I am for keeping the deprecation for some time. The code of this ticket has been around for about 5 years outside of SageMath (more or less as https://github.com/araichev/amgf), and there the deprecated parameters were used. People who are using this package will transition to the one soon to be included in SageMath, but I think some hints on what to change could be very helpful.",
    "created_at": "2016-02-15T16:10:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108761",
    "user": "dkrenn"
}
```

Replying to [comment:124 tscrim]:
> Replying to [comment:123 dkrenn]:
> > Replying to [comment:121 tscrim]:
> > > - I moved more common imports to the start. There is no danger of circular imports when the file in question is not imported into the global namespace (it is also faster, easier to maintain in the long term, and I'm not as paranoid about these thing).
> > 
> > I'm fine with it. Just out of curiosity, why is this faster?
> 
> Every time the function gets called, Python needs to check to see if it has imported the object. While this is more on the level of micro-optimization, it can matter in those methods used in a tight loop.

Ok, thank you for your explanation.

> We also should remove the deprecation warnings in `_element_constructor_` on said followup as I forgot to remove them here.

Not a strong preference, but actually, I am for keeping the deprecation for some time. The code of this ticket has been around for about 5 years outside of SageMath (more or less as https://github.com/araichev/amgf), and there the deprecated parameters were used. People who are using this package will transition to the one soon to be included in SageMath, but I think some hints on what to change could be very helpful.



---

archive/issue_comments_108762.json:
```json
{
    "body": "Replying to [comment:125 dkrenn]:\n> Replying to [comment:124 tscrim]:\n> > We also should remove the deprecation warnings in `_element_constructor_` on said followup as I forgot to remove them here.\n> \n> Not a strong preference, but actually, I am for keeping the deprecation for some time. The code of this ticket has been around for about 5 years outside of SageMath (more or less as https://github.com/araichev/amgf), and there the deprecated parameters were used. People who are using this package will transition to the one soon to be included in SageMath, but I think some hints on what to change could be very helpful.\n\nFair enough. Although I think because it had not been reviewed and included in Sage, it is fair game to change the API. However, I don't have a stake in this, but it is something we will eventually want to remove.",
    "created_at": "2016-02-15T16:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108762",
    "user": "tscrim"
}
```

Replying to [comment:125 dkrenn]:
> Replying to [comment:124 tscrim]:
> > We also should remove the deprecation warnings in `_element_constructor_` on said followup as I forgot to remove them here.
> 
> Not a strong preference, but actually, I am for keeping the deprecation for some time. The code of this ticket has been around for about 5 years outside of SageMath (more or less as https://github.com/araichev/amgf), and there the deprecated parameters were used. People who are using this package will transition to the one soon to be included in SageMath, but I think some hints on what to change could be very helpful.

Fair enough. Although I think because it had not been reviewed and included in Sage, it is fair game to change the API. However, I don't have a stake in this, but it is something we will eventually want to remove.



---

archive/issue_comments_108763.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-02-15T21:16:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108763",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_108764.json:
```json
{
    "body": "There are some tests that depend on ordering of symbolic variables:\n\n```\nsage -t --long src/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py\n**********************************************************************\nFile \"src/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py\", line 98, in sage.rings.asymptotic.asymptotics_multivariate_generating_functions\nFailed example:\n    s\nExpected:\n    [{y: 1, x: 1}]\nGot:\n    [{x: 1, y: 1}]\n**********************************************************************\nFile \"src/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py\", line 2828, in sage.rings.asymptotic.asymptotics_multivariate_generating_functions.FractionWithFactoredDenominator.smooth_critical_ideal\nFailed example:\n    F.smooth_critical_ideal(alpha)\nExpected:\n    Ideal (y^2 + 2*a1/a2*y - 1, x + ((-a2)/a1)*y + (-a1 + a2)/a1) of\n     Multivariate Polynomial Ring in x, y over Fraction Field of\n     Multivariate Polynomial Ring in a1, a2 over Rational Field\nGot:\n    Ideal (y^2 + 2*a1/a2*y - 1, x + ((-a2)/a1)*y + (a2 - a1)/a1) of Multivariate Polynomial Ring in x, y over Fraction Field of Multivariate Polynomial Ring in a2, a1 over Rational Field\n**********************************************************************\nFile \"src/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py\", line 4373, in sage.rings.asymptotic.asymptotics_multivariate_generating_functions.coerce_point\nFailed example:\n    p\nExpected:\n    {y: 7/8, x: 1}\nGot:\n    {x: 1, y: 7/8}\n**********************************************************************\nFile \"src/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py\", line 4375, in sage.rings.asymptotic.asymptotics_multivariate_generating_functions.coerce_point\nFailed example:\n    for k in sorted(p.keys()):\n        print k, k.parent()\nExpected:\n    y Symbolic Ring\n    x Symbolic Ring\nGot:\n    x Symbolic Ring\n    y Symbolic Ring\n**********************************************************************\n3 items had failures:\n   1 of  77 in sage.rings.asymptotic.asymptotics_multivariate_generating_functions\n   1 of  16 in sage.rings.asymptotic.asymptotics_multivariate_generating_functions.FractionWithFactoredDenominator.smooth_critical_ideal\n   2 of  11 in sage.rings.asymptotic.asymptotics_multivariate_generating_functions.coerce_point\n    [809 tests, 4 failures, 74.86 s]\n```\n",
    "created_at": "2016-02-15T21:16:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108764",
    "user": "vbraun"
}
```

There are some tests that depend on ordering of symbolic variables:

```
sage -t --long src/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py
**********************************************************************
File "src/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py", line 98, in sage.rings.asymptotic.asymptotics_multivariate_generating_functions
Failed example:
    s
Expected:
    [{y: 1, x: 1}]
Got:
    [{x: 1, y: 1}]
**********************************************************************
File "src/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py", line 2828, in sage.rings.asymptotic.asymptotics_multivariate_generating_functions.FractionWithFactoredDenominator.smooth_critical_ideal
Failed example:
    F.smooth_critical_ideal(alpha)
Expected:
    Ideal (y^2 + 2*a1/a2*y - 1, x + ((-a2)/a1)*y + (-a1 + a2)/a1) of
     Multivariate Polynomial Ring in x, y over Fraction Field of
     Multivariate Polynomial Ring in a1, a2 over Rational Field
Got:
    Ideal (y^2 + 2*a1/a2*y - 1, x + ((-a2)/a1)*y + (a2 - a1)/a1) of Multivariate Polynomial Ring in x, y over Fraction Field of Multivariate Polynomial Ring in a2, a1 over Rational Field
**********************************************************************
File "src/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py", line 4373, in sage.rings.asymptotic.asymptotics_multivariate_generating_functions.coerce_point
Failed example:
    p
Expected:
    {y: 7/8, x: 1}
Got:
    {x: 1, y: 7/8}
**********************************************************************
File "src/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py", line 4375, in sage.rings.asymptotic.asymptotics_multivariate_generating_functions.coerce_point
Failed example:
    for k in sorted(p.keys()):
        print k, k.parent()
Expected:
    y Symbolic Ring
    x Symbolic Ring
Got:
    x Symbolic Ring
    y Symbolic Ring
**********************************************************************
3 items had failures:
   1 of  77 in sage.rings.asymptotic.asymptotics_multivariate_generating_functions
   1 of  16 in sage.rings.asymptotic.asymptotics_multivariate_generating_functions.FractionWithFactoredDenominator.smooth_critical_ideal
   2 of  11 in sage.rings.asymptotic.asymptotics_multivariate_generating_functions.coerce_point
    [809 tests, 4 failures, 74.86 s]
```




---

archive/issue_comments_108765.json:
```json
{
    "body": "Replying to [comment:127 vbraun]:\n> {{{\n> sage -t --long src/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py\n> **********************************************************************\n> File \"src/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py\", line 98, in sage.rings.asymptotic.asymptotics_multivariate_generating_functions\n> Failed example:\n>     s\n> Expected:\n>     [{y: 1, x: 1}]\n> Got:\n>     [{x: 1, y: 1}]\n> }}}\n\nHmmm...I thought there is something like a display-hook, which catches such things (orderings in dicts and sets).\n\n> {{{\n> **********************************************************************\n> File \"src/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py\", line 4373, in sage.rings.asymptotic.asymptotics_multivariate_generating_functions.coerce_point\n> Failed example:\n>     p\n> Expected:\n>     {y: 7/8, x: 1}\n> Got:\n>     {x: 1, y: 7/8}\n> }}}\n\nThe same here...\n\nFor the other issues: I am confident to fix.",
    "created_at": "2016-02-16T07:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108765",
    "user": "dkrenn"
}
```

Replying to [comment:127 vbraun]:
> {{{
> sage -t --long src/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py
> **********************************************************************
> File "src/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py", line 98, in sage.rings.asymptotic.asymptotics_multivariate_generating_functions
> Failed example:
>     s
> Expected:
>     [{y: 1, x: 1}]
> Got:
>     [{x: 1, y: 1}]
> }}}

Hmmm...I thought there is something like a display-hook, which catches such things (orderings in dicts and sets).

> {{{
> **********************************************************************
> File "src/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py", line 4373, in sage.rings.asymptotic.asymptotics_multivariate_generating_functions.coerce_point
> Failed example:
>     p
> Expected:
>     {y: 7/8, x: 1}
> Got:
>     {x: 1, y: 7/8}
> }}}

The same here...

For the other issues: I am confident to fix.



---

archive/issue_comments_108766.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-16T08:05:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108766",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108767.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-16T08:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108767",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108768.json:
```json
{
    "body": "The displayhook sorts but x, y have no particular order\n----\nNew commits:",
    "created_at": "2016-02-16T08:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108768",
    "user": "vbraun"
}
```

The displayhook sorts but x, y have no particular order
----
New commits:



---

archive/issue_comments_108769.json:
```json
{
    "body": "I've now fixed all (at least I hope I got all) platform-dependent. Can someone please check with other platform than Linux, x86_64 on Intel i5-4690?",
    "created_at": "2016-02-16T08:27:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108769",
    "user": "dkrenn"
}
```

I've now fixed all (at least I hope I got all) platform-dependent. Can someone please check with other platform than Linux, x86_64 on Intel i5-4690?



---

archive/issue_comments_108770.json:
```json
{
    "body": "Replying to [comment:131 vbraun]:\n> The displayhook sorts but x, y have no particular order\n\nOh, I see (I thought, that display hooks sort by `str` in such a case). Thanks.",
    "created_at": "2016-02-16T08:28:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108770",
    "user": "dkrenn"
}
```

Replying to [comment:131 vbraun]:
> The displayhook sorts but x, y have no particular order

Oh, I see (I thought, that display hooks sort by `str` in such a case). Thanks.



---

archive/issue_comments_108771.json:
```json
{
    "body": "Replying to [comment:132 dkrenn]:\n> I've now fixed all (at least I hope I got all) platform-dependent. Can someone please check with other platform than Linux, x86_64 on Intel i5-4690?\n\nI didn't see a difference from the original doctests on my laptop, so I can't give an explicit check. However, from looking over the doctestvs and Volker's failures, this seems to do the trick. Although I don't like the changes on \u200b85c1f37. Instead, I think you should just explicitly check that the dictionary of solutions is the correct one:\n\n```\nsage: s == [{SR(x): 1, SR(y): 1}]\nTrue\n```\n",
    "created_at": "2016-02-16T15:42:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108771",
    "user": "tscrim"
}
```

Replying to [comment:132 dkrenn]:
> I've now fixed all (at least I hope I got all) platform-dependent. Can someone please check with other platform than Linux, x86_64 on Intel i5-4690?

I didn't see a difference from the original doctests on my laptop, so I can't give an explicit check. However, from looking over the doctestvs and Volker's failures, this seems to do the trick. Although I don't like the changes on ​85c1f37. Instead, I think you should just explicitly check that the dictionary of solutions is the correct one:

```
sage: s == [{SR(x): 1, SR(y): 1}]
True
```




---

archive/issue_comments_108772.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-16T15:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108772",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_108773.json:
```json
{
    "body": "Replying to [comment:134 tscrim]:\nAlthough I don't like the changes on \u200b85c1f37. Instead, I think you should just explicitly check that the dictionary of solutions is the correct one:\n> {{{\n> sage: s == [{SR(x): 1, SR(y): 1}]\n> True\n> }}}\n\nReverted and changed; indeed much nicer.",
    "created_at": "2016-02-16T16:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108773",
    "user": "dkrenn"
}
```

Replying to [comment:134 tscrim]:
Although I don't like the changes on ​85c1f37. Instead, I think you should just explicitly check that the dictionary of solutions is the correct one:
> {{{
> sage: s == [{SR(x): 1, SR(y): 1}]
> True
> }}}

Reverted and changed; indeed much nicer.



---

archive/issue_comments_108774.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-02-16T16:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108774",
    "user": "dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_108775.json:
```json
{
    "body": "Thanks!",
    "created_at": "2016-02-16T16:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108775",
    "user": "tscrim"
}
```

Thanks!



---

archive/issue_comments_108776.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-16T16:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108776",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_108777.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2016-02-16T16:22:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108777",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_108778.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2016-02-16T16:22:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108778",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_108779.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-16T16:24:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108779",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_108780.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-02-17T21:12:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10466",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10466#issuecomment-108780",
    "user": "vbraun"
}
```

Resolution: fixed
