# Issue 27712: Pull out subfield() method from subfields() method.

Issue created by migration from https://trac.sagemath.org/ticket/27949

Original creator: klee

Original creation time: 2019-06-08 13:01:13

It is currently clumsy to create a subfield of a finite field using subfields() method.

```
sage: k = GF(2^21)
sage: k.subfields(3)
[(Finite Field in z3 of size 2^3, Ring morphism:
    From: Finite Field in z3 of size 2^3
    To:   Finite Field in z21 of size 2^21
    Defn: z3 |--> z21^20 + z21^19 + z21^17 + z21^15 + z21^11 + z21^9 + z21^8 + z21^6 + z21^2)]
sage: K, _ = k.subfields(3)[0]
sage: K
Finite Field in z3 of size 2^3
```


With the patch of this ticket, we have subfield() method such that

```
sage: k = GF(2^21)
sage: k.subfield(3)
Finite Field in z3 of size 2^3
sage: K = _
sage: k.coerce_map_from(K)
Ring morphism:
  From: Finite Field in z3 of size 2^3
  To:   Finite Field in z21 of size 2^21
  Defn: z3 |--> z21^20 + z21^19 + z21^17 + z21^15 + z21^11 + z21^9 + z21^8 + z21^6 + z21^2
```



---

Comment by git created at 2019-06-08 13:05:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klee created at 2019-06-08 13:07:12

Changing status from new to needs_review.


---

Comment by embray created at 2019-07-03 11:37:56

Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).


---

Comment by git created at 2019-07-04 00:58:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-09-16 07:11:44

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by tscrim created at 2019-09-18 01:26:49

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2019-09-18 01:26:49

LGTM.


---

Comment by tscrim created at 2019-09-18 01:28:48

Sorry, I just noticed something:

```
return [self.subfields(m, name=name[m])[0] for m in divisors]
```

Couldn't this use your new `subfield()` method?


---

Comment by tscrim created at 2019-09-18 01:28:48

Changing status from positive_review to needs_info.


---

Comment by klee created at 2019-09-18 01:58:45

Replying to [comment:8 tscrim]:
> Sorry, I just noticed something:
> {{{
> return [self.subfields(m, name=name[m])[0] for m in divisors]
> }}}
> Couldn't this use your new `subfield()` method?

Then it would look like

```
-        return [self.subfields(m, name=name[m])[0] for m in divisors]
+
+        pairs = []
+        for m in divisors:
+            K =  self.subfield(m, name=name[m])
+            pairs.append( (K, self.coerce_map_from(K)) )
+        return pairs
```


It is somewhat duplicating the code above. Is this better?


---

Comment by tscrim created at 2019-09-18 02:07:02

Replying to [comment:9 klee]:
> Replying to [comment:8 tscrim]:
> > Sorry, I just noticed something:
> > {{{
> > return [self.subfields(m, name=name[m])[0] for m in divisors]
> > }}}
> > Couldn't this use your new `subfield()` method?
> 
> Then it would look like
> {{{
> -        return [self.subfields(m, name=name[m])[0] for m in divisors]
> +
> +        pairs = []
> +        for m in divisors:
> +            K =  self.subfield(m, name=name[m])
> +            pairs.append( (K, self.coerce_map_from(K)) )
> +        return pairs
> }}}
> 
> It is somewhat duplicating the code above. Is this better?

Maybe. It seems less wasteful in terms of object creation and it is not too much code duplication. Plus, the current version almost seems to to go against the new method; although I guess not exactly from what you're saying.


---

Comment by git created at 2019-09-18 02:15:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by klee created at 2019-09-18 02:15:36

Changing status from needs_info to needs_review.


---

Comment by tscrim created at 2019-09-18 02:34:10

Thank you.


---

Comment by tscrim created at 2019-09-18 02:34:10

Changing status from needs_review to positive_review.


---

Comment by klee created at 2019-09-18 02:35:57

My pleasure. Thank you!


---

Comment by chapoton created at 2019-09-30 08:12:27

moving milestone to 9.0 (after release of 8.9)


---

Comment by vbraun created at 2019-10-06 23:06:58

Resolution: fixed


---

Comment by mkoeppe created at 2020-07-18 20:10:59

Follow-up: #30171
