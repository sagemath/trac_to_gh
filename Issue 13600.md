# Issue 13600: libfplll fails to build on recent Cygwin

Issue created by migration from Trac.

Original creator: jpflori

Original creation time: 2012-12-06 10:47:40

Assignee: tbd

CC:  kcrisman dimpase

Keywords: libfplll spkg cygwin

On my recent installation of Cywgin (on 64 bits Windows 7), building libfplll fails because make complains there is no rule to build fplll.
Indeed there is one for fplll$(EXEEXT), but no for fplll and $(EXEEXT) is non empty on Cygwin.
Nonetheless, if the file fplll.exe exists, then "make fplll" will happily tell you that its up to date and go on with its job.

What is strange is that the libfplll spkg has not changed for a while and I did not have this problem with Sage 5.2 on the same Windows (but with a previous version of Cygwin or of make I guess).
So there must have been some changes in the order the Makefile rules or dependencies are treated.

Whatsoever I think the proper fix is to modify the Makefiles, but I'll provide the less intrusive solutio I can think of.

And by the way the libfplll we ship is old.
See #12835.
So I won't report this upstream, unless we update libfplll and the problem is still present.


---

Comment by jpflori created at 2012-12-06 10:52:43

Or maybe Cywgin make used to automagically translate targets to add .exe extension and does not anymore.


---

Comment by jpflori created at 2012-12-06 11:03:30

Groumpf, I got it to install by not using a parallel build.


---

Comment by kcrisman created at 2012-12-06 15:05:43

Yeah, I've never seen this because my machine is certainly always with one thread.  I guess I never even thought to try it in parallel, but as it's XP I'm sure that wouldn't be very useful in any case.


---

Comment by kcrisman created at 2012-12-06 15:05:43

Changing type from PLEASE CHANGE to defect.


---

Comment by kcrisman created at 2012-12-06 15:05:43

Changing component from PLEASE CHANGE to cygwin.


---

Comment by jpflori created at 2012-12-20 11:09:22

Spkg diff, for review only.


---

Comment by jpflori created at 2012-12-20 11:13:05

Changing status from new to needs_review.


---

Attachment


---

Comment by kcrisman created at 2013-01-07 14:43:05

Brief look at diff seems okay, and this installed fine on XP with passed (self, SAGE_CHECK=yes) tests.  I obviously can't check whether this actually works in terms of multiple threads, though this is the right command to disable parallel make, and is only on Cygwin, so we should probably let it go through.


---

Comment by kcrisman created at 2013-01-07 15:33:36

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2013-01-07 15:33:36

Same result on Mac and sage.math, and after `./sage -b` passes the `sage/libs/fplll` tests as well.  Let's get this in.


---

Comment by jdemeyer created at 2013-01-12 08:52:10

Resolution: fixed
