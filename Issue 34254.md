# Issue 34254: Upgrade igraph to 0.9.10

Issue created by migration from https://trac.sagemath.org/ticket/34491

Original creator: mkoeppe

Original creation time: 2022-09-04 14:28:23

CC:  dcoudert dimpase

Suggested in https://sagemath.zulipchat.com/#narrow/stream/271086-feedback/topic/hello/near/297088245


---

Comment by mkoeppe created at 2022-09-04 14:32:28

New commits:


---

Comment by mkoeppe created at 2022-09-04 14:36:24

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-09-04 14:36:24

Installs without problems on macOS (Intel), haven't tested anything else.


---

Comment by dcoudert created at 2022-09-04 15:27:57

install ok on fedora 35.

I'm currently upgrading homebrew (and in graph). Will try soon with brew version of igraph.


---

Comment by dcoudert created at 2022-09-06 11:51:35

I'm on macOS 12.5.1 and after a `brew upgrade` I have:

```
sapristi:sage dcoudert$ ls /usr/local/Cellar/igraph/
0.9.10
```


In a fresh shell, I did: `make distclean`, `.bootstrap`, `source .homebrew-build-env`, `./configure enable-download-from-upstream-url`  and `make`.

I'm now trying this ticket and so did `make igraph`.

Configure says:

```
igraph:                         using system package; SPKG will not be installed
```

But it tries to download sources anyway, and of course fails to do so.


```
make --no-print-directory igraph-SAGE_LOCAL-no-deps
[igraph-0.9.10] Attempting to download package igraph-0.9.10.tar.gz from mirrors
[igraph-0.9.10] Downloading the Sage mirror list
[igraph-0.9.10] Searching fastest mirror
[igraph-0.9.10]   195ms: http://files.sagemath.org/
[igraph-0.9.10]   582ms: http://linorg.usp.br/sage/
[igraph-0.9.10]   116ms: https://ftp.rediris.es/mirror/sagemath/
[igraph-0.9.10]  1142ms: https://ftp.riken.jp/sagemath/
[igraph-0.9.10]   954ms: https://ftp.sun.ac.za/ftp/pub/mirrors/www.sagemath.org/
[igraph-0.9.10]  1148ms: https://ftp.yz.yamagata-u.ac.jp/pub/math/sage/
[igraph-0.9.10]   315ms: https://mirror-hk.koddos.net/sagemath/
[igraph-0.9.10]  1912ms: https://mirror.aarnet.edu.au/pub/sage/
[igraph-0.9.10]   217ms: https://mirror.csclub.uwaterloo.ca/sage/
[igraph-0.9.10]   105ms: https://mirror.dogado.de/sage/
[igraph-0.9.10]    80ms: https://mirror.koddos.net/sagemath/
[igraph-0.9.10]    66ms: https://mirror.lyrahosting.com/sagemath/
[igraph-0.9.10]   199ms: https://mirror.marwan.ma/sage/
[igraph-0.9.10]   497ms: https://mirror.rcg.sfu.ca/mirror/sage/
[igraph-0.9.10]   419ms: https://mirror.ufs.ac.za/sagemath/
[igraph-0.9.10]   140ms: https://mirror.yandex.ru/mirrors/sage.math.washington.edu/
[igraph-0.9.10]   335ms: https://mirrors.aliyun.com/sagemath/
[igraph-0.9.10]   124ms: https://mirrors.mit.edu/sage/
[igraph-0.9.10]   936ms: https://mirrors.nju.edu.cn/sagemath/
[igraph-0.9.10]   942ms: https://mirrors.tuna.tsinghua.edu.cn/sagemath/
[igraph-0.9.10]   163ms: https://mirrors.up.pt/pub/sage/
[igraph-0.9.10]  1581ms: https://mirrors.ustc.edu.cn/sagemath/
[igraph-0.9.10]   277ms: https://mirrors.xmission.com/sage/
[igraph-0.9.10]   744ms: https://sage.mirror.garr.it/mirrors/sage/
[igraph-0.9.10]   701ms: https://sagemath.c3sl.ufpr.br/
[igraph-0.9.10]   604ms: https://sagemath.mirror.ac.za/
[igraph-0.9.10]    52ms: https://www-ftp.lip6.fr/pub/math/sagemath/
[igraph-0.9.10]    84ms: https://www.mirrorservice.org/sites/www.sagemath.org/
[igraph-0.9.10] Fastest mirror: https://www-ftp.lip6.fr/pub/math/sagemath/
[igraph-0.9.10] https://www-ftp.lip6.fr/pub/math/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//www-ftp.lip6.fr/pub/math/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirror.lyrahosting.com/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirror.lyrahosting.com/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirror.koddos.net/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirror.koddos.net/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://www.mirrorservice.org/sites/www.sagemath.org/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//www.mirrorservice.org/sites/www.sagemath.org/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirror.dogado.de/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirror.dogado.de/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://ftp.rediris.es/mirror/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//ftp.rediris.es/mirror/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirrors.mit.edu/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirrors.mit.edu/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirror.yandex.ru/mirrors/sage.math.washington.edu/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirror.yandex.ru/mirrors/sage.math.washington.edu/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirrors.up.pt/pub/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirrors.up.pt/pub/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] http://files.sagemath.org/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//files.sagemath.org/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirror.marwan.ma/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirror.marwan.ma/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirror.csclub.uwaterloo.ca/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirror.csclub.uwaterloo.ca/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirrors.xmission.com/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirrors.xmission.com/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirror-hk.koddos.net/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirror-hk.koddos.net/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirrors.aliyun.com/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirrors.aliyun.com/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirror.ufs.ac.za/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirror.ufs.ac.za/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirror.rcg.sfu.ca/mirror/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirror.rcg.sfu.ca/mirror/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] http://linorg.usp.br/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//linorg.usp.br/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://sagemath.mirror.ac.za/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//sagemath.mirror.ac.za/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://sagemath.c3sl.ufpr.br/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//sagemath.c3sl.ufpr.br/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://sage.mirror.garr.it/mirrors/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//sage.mirror.garr.it/mirrors/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirrors.nju.edu.cn/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirrors.nju.edu.cn/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirrors.tuna.tsinghua.edu.cn/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirrors.tuna.tsinghua.edu.cn/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://ftp.sun.ac.za/ftp/pub/mirrors/www.sagemath.org/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//ftp.sun.ac.za/ftp/pub/mirrors/www.sagemath.org/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://ftp.riken.jp/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//ftp.riken.jp/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://ftp.yz.yamagata-u.ac.jp/pub/math/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//ftp.yz.yamagata-u.ac.jp/pub/math/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirrors.ustc.edu.cn/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirrors.ustc.edu.cn/sagemath/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] https://mirror.aarnet.edu.au/pub/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//mirror.aarnet.edu.au/pub/sage/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] http://sagepad.org/spkg/upstream/igraph/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 404] Not Found: '//sagepad.org/spkg/upstream/igraph/igraph-0.9.10.tar.gz'
[igraph-0.9.10] Attempting to download from https://github.com/igraph/igraph/releases/download/0.9.10/igraph-0.9.10.tar.gz
[igraph-0.9.10] [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[igraph-0.9.10] ERROR [transfer|run:135]: [Errno socket error] [Errno 502] Bad Gateway: '//github.com/igraph/igraph/releases/download/0.9.10/igraph-0.9.10.tar.gz'
[igraph-0.9.10] ************************************************************************
[igraph-0.9.10] Traceback (most recent call last):
[igraph-0.9.10]   File "/usr/local/Cellar/python@3.10/3.10.6_2/Frameworks/Python.framework/Versions/3.10/lib/python3.10/urllib/request.py", line 1788, in open
[igraph-0.9.10]     return getattr(self, name)(url)
[igraph-0.9.10]   File "/usr/local/Cellar/python@3.10/3.10.6_2/Frameworks/Python.framework/Versions/3.10/lib/python3.10/urllib/request.py", line 1997, in open_https
[igraph-0.9.10]     return self._open_generic_http(self._https_connection, url, data)
[igraph-0.9.10]   File "/usr/local/Cellar/python@3.10/3.10.6_2/Frameworks/Python.framework/Versions/3.10/lib/python3.10/urllib/request.py", line 1960, in _open_generic_http
[igraph-0.9.10]     return self.http_error(
[igraph-0.9.10]   File "/usr/local/Cellar/python@3.10/3.10.6_2/Frameworks/Python.framework/Versions/3.10/lib/python3.10/urllib/request.py", line 1982, in http_error
[igraph-0.9.10]     return self.http_error_default(url, fp, errcode, errmsg, headers)
[igraph-0.9.10]   File "/Users/dcoudert/sage/build/bin/../sage_bootstrap/download/transfer.py", line 107, in http_error_default
[igraph-0.9.10]     raise DownloadError(errcode, errmsg, url)
[igraph-0.9.10] sage_bootstrap.download.transfer.DownloadError: [Errno 502] Bad Gateway: '//github.com/igraph/igraph/releases/download/0.9.10/igraph-0.9.10.tar.gz'
[igraph-0.9.10] 
[igraph-0.9.10] During handling of the above exception, another exception occurred:
[igraph-0.9.10] 
[igraph-0.9.10] Traceback (most recent call last):
[igraph-0.9.10]   File "/Users/dcoudert/sage/build/bin/../sage_bootstrap/tarball.py", line 175, in download
[igraph-0.9.10]     Download(url, destination).run()
[igraph-0.9.10]   File "/Users/dcoudert/sage/build/bin/../sage_bootstrap/download/transfer.py", line 137, in run
[igraph-0.9.10]     raise error
[igraph-0.9.10]   File "/Users/dcoudert/sage/build/bin/../sage_bootstrap/download/transfer.py", line 128, in run
[igraph-0.9.10]     filename, info = opener.retrieve(
[igraph-0.9.10]   File "/usr/local/Cellar/python@3.10/3.10.6_2/Frameworks/Python.framework/Versions/3.10/lib/python3.10/urllib/request.py", line 1822, in retrieve
[igraph-0.9.10]     fp = self.open(url, data)
[igraph-0.9.10]   File "/usr/local/Cellar/python@3.10/3.10.6_2/Frameworks/Python.framework/Versions/3.10/lib/python3.10/urllib/request.py", line 1794, in open
[igraph-0.9.10]     raise OSError('socket error', msg).with_traceback(sys.exc_info()[2])
[igraph-0.9.10]   File "/usr/local/Cellar/python@3.10/3.10.6_2/Frameworks/Python.framework/Versions/3.10/lib/python3.10/urllib/request.py", line 1788, in open
[igraph-0.9.10]     return getattr(self, name)(url)
[igraph-0.9.10]   File "/usr/local/Cellar/python@3.10/3.10.6_2/Frameworks/Python.framework/Versions/3.10/lib/python3.10/urllib/request.py", line 1997, in open_https
[igraph-0.9.10]     return self._open_generic_http(self._https_connection, url, data)
[igraph-0.9.10]   File "/usr/local/Cellar/python@3.10/3.10.6_2/Frameworks/Python.framework/Versions/3.10/lib/python3.10/urllib/request.py", line 1960, in _open_generic_http
[igraph-0.9.10]     return self.http_error(
[igraph-0.9.10]   File "/usr/local/Cellar/python@3.10/3.10.6_2/Frameworks/Python.framework/Versions/3.10/lib/python3.10/urllib/request.py", line 1982, in http_error
[igraph-0.9.10]     return self.http_error_default(url, fp, errcode, errmsg, headers)
[igraph-0.9.10]   File "/Users/dcoudert/sage/build/bin/../sage_bootstrap/download/transfer.py", line 107, in http_error_default
[igraph-0.9.10]     raise DownloadError(errcode, errmsg, url)
[igraph-0.9.10] OSError: [Errno socket error] [Errno 502] Bad Gateway: '//github.com/igraph/igraph/releases/download/0.9.10/igraph-0.9.10.tar.gz'
[igraph-0.9.10] 
[igraph-0.9.10] During handling of the above exception, another exception occurred:
[igraph-0.9.10] 
[igraph-0.9.10] Traceback (most recent call last):
[igraph-0.9.10]   File "/Users/dcoudert/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 126, in run_safe
[igraph-0.9.10]     run()
[igraph-0.9.10]   File "/Users/dcoudert/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 108, in run
[igraph-0.9.10]     app.download_tarball(args.url_or_tarball, args.destination, args.allow_upstream)
[igraph-0.9.10]   File "/Users/dcoudert/sage/build/bin/../sage_bootstrap/download/app.py", line 41, in download_tarball
[igraph-0.9.10]     tarball.download(allow_upstream=allow_upstream)
[igraph-0.9.10]   File "/Users/dcoudert/sage/build/bin/../sage_bootstrap/tarball.py", line 177, in download
[igraph-0.9.10]     raise FileNotMirroredError('tarball does not exist on mirror network and neither at the upstream URL')
[igraph-0.9.10] sage_bootstrap.tarball.FileNotMirroredError: tarball does not exist on mirror network and neither at the upstream URL
[igraph-0.9.10] ************************************************************************
[igraph-0.9.10] ************************************************************************
[igraph-0.9.10] Error downloading igraph-0.9.10.tar.gz
[igraph-0.9.10] ************************************************************************
[igraph-0.9.10] Please email sage-devel (http://groups.google.com/group/sage-devel)
[igraph-0.9.10] explaining the problem and including the log files
[igraph-0.9.10]   /Users/dcoudert/sage/logs/pkgs/igraph-0.9.10.log
[igraph-0.9.10] and
[igraph-0.9.10]   /Users/dcoudert/sage/config.log
[igraph-0.9.10] Describe your computer, operating system, etc.
[igraph-0.9.10] ************************************************************************
make[2]: *** [igraph-SAGE_LOCAL-no-deps] Error 1
make[1]: *** [/Users/dcoudert/sage/local/var/lib/sage/installed/igraph-0.9.10] Error 2

real	0m44.111s
user	0m1.435s
sys	0m0.866s
***************************************************************
Error building Sage.

The following package(s) may have failed to build (not necessarily
during this run of 'make igraph'):

* package:         igraph-0.9.10
  last build time: 6 sep 13:41
  log file:        /Users/dcoudert/sage/logs/pkgs/igraph-0.9.10.log

It is safe to delete any log files and build directories, but they
contain information that is helpful for debugging build problems.
WARNING: If you now run 'make' again, the build directory of the
same version of the package will, by default, be deleted. Set the
environment variable SAGE_KEEP_BUILT_SPKGS=yes to prevent this.

make: *** [igraph] Error 1
```

What's wrong here ?


---

Comment by dimpase created at 2022-09-06 12:11:03

it should be

```
./configure --enable-download-from-upstream-url
```



---

Comment by dcoudert created at 2022-09-06 12:22:33

just a mistake of  copy paste in the comment, but it's what I did.

The question is more: why is it trying to download from upstream when I have homebrew install if `graph` and that this local install has been detected during configure ?


---

Comment by dimpase created at 2022-09-06 12:51:23

Replying to [comment:7 David Coudert]:
> just a mistake of  copy paste in the comment, but it's what I did.
> 
> The question is more: why is it trying to download from upstream when I have homebrew install if `graph` and that this local install has been detected during configure ?


What's in `config.log` regarding `igraph` ? Was it recognised?


---

Comment by dimpase created at 2022-09-06 12:52:43

in case, run
`make igraph-clean igraph-uninstall` before proceeeding, to remove an old version...


---

Comment by dcoudert created at 2022-09-06 13:52:00

Replying to [comment:8 Dima Pasechnik]:

> What's in `config.log` regarding `igraph` ? Was it recognised?

All lines of `config.log` containing `graph`

```
## ------------------------------------------------------- ##
## Checking whether SageMath should install SPKG igraph... ##
## ------------------------------------------------------- ##
configure:29442: checking whether any of glpk openblas gmp is installed as or will be installed as SPKG
configure:29452: result: no
configure:29457: checking for igraph >= 0.9.5
configure:29464: $PKG_CONFIG --exists --print-errors "igraph >= 0.9.5"
configure:29467: $? = 0
configure:29481: $PKG_CONFIG --exists --print-errors "igraph >= 0.9.5"
configure:29484: $? = 0
configure:29524: result: yes
configure:29537: will use system package and not install SPKG igraph
...
configure:71199: result: igraph:                         using system package; SPKG will not be installed
...
configure:98075: result: python_igraph:                  optional, SPKG version 0.9.11 is already installed
...
ac_cv_env_IGRAPH_CFLAGS_set=
ac_cv_env_IGRAPH_CFLAGS_value=
ac_cv_env_IGRAPH_LIBS_set=
ac_cv_env_IGRAPH_LIBS_value=
...
pkg_cv_IGRAPH_CFLAGS=-I/usr/local/Cellar/igraph/0.9.10/include/igraph
pkg_cv_IGRAPH_LIBS='-L/usr/local/Cellar/igraph/0.9.10/lib -ligraph'
...
    igraph \
    igraph \
...
    python_igraph \
    python_igraph \
    python_igraph \
...
IGRAPH_CFLAGS='-I/usr/local/Cellar/igraph/0.9.10/include/igraph'
IGRAPH_LIBS='-L/usr/local/Cellar/igraph/0.9.10/lib -ligraph'
...
SAGE_ENABLE_igraph='no'
...
SAGE_ENABLE_python_igraph='yes'
...
deps_igraph = $(MP_LIBRARY) glpk $(BLAS) suitesparse | cmake
...
deps_python_igraph = igraph texttable $(PYTHON) | $(PYTHON_TOOLCHAIN)
...
trees_igraph = SAGE_LOCAL
...
trees_python_igraph = SAGE_VENV
...
vers_igraph = 0.9.10
...
vers_python_igraph = 0.9.11
...
```


I did `make igraph-clean igraph-uninstall` and then `make igraph` and now it has downloaded from upstream and compiled the code. It's working well.

However, I don't understand why it's not using the homebrew install


---

Comment by dimpase created at 2022-09-06 14:07:00

`make X` for an spkg `X` will always install `X` from source, that's why.


---

Comment by dcoudert created at 2022-09-06 14:31:05

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2022-09-06 14:31:05

I didn't know that.

So on macOS, it's working well when we compile the source.
I also tried to remove `igraph` and `python_igraph`, and then do `sage -i python_igraph` and it's working well (it uses the homebrew install).

So for me this patch is good to go.


---

Comment by mkoeppe created at 2022-09-06 15:07:23

Upstream cautions that igraph 0.10 is not compatible - https://sagemath.zulipchat.com/#narrow/stream/271086-feedback/topic/hello/near/297322407

So we should either set a version upper bound in igraph's spkg-configure, or to the upgrade of both igraph, python-igraph to 0.10


---

Comment by mkoeppe created at 2022-09-06 15:07:23

Changing status from positive_review to needs_work.


---

Comment by git created at 2022-09-06 15:12:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-09-06 15:13:19

Unlikely that this would still make it into Sage 9.7, but here we go


---

Comment by mkoeppe created at 2022-09-06 15:13:19

Changing priority from major to critical.


---

Comment by mkoeppe created at 2022-09-06 15:13:19

Changing status from needs_work to needs_review.


---

Comment by mkoeppe created at 2022-09-06 15:14:31

Follow-up: #34498 Update igraph, python_igraph to 0.10


---

Comment by dcoudert created at 2022-09-06 15:30:10

LGTM.


---

Comment by dcoudert created at 2022-09-06 15:30:10

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-09-20 20:23:23

Resolution: fixed
