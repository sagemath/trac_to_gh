# Issue 18120: Unicode Art

archive/issues_018120.json:
```json
{
    "body": "CC:  elixyre\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/18357\n\n",
    "created_at": "2015-05-03T18:56:58Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Unicode Art",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18120",
    "user": "@vbraun"
}
```
CC:  elixyre



Issue created by migration from https://trac.sagemath.org/ticket/18357





---

archive/issue_comments_244253.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-05-03T18:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244253",
    "user": "@vbraun"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_244254.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to user interface.",
    "created_at": "2015-05-03T18:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244254",
    "user": "@vbraun"
}
```

Changing component from PLEASE CHANGE to user interface.



---

archive/issue_comments_244255.json:
```json
{
    "body": "What would be your strategy here? A method `_unicode_art_` on objects?",
    "created_at": "2015-05-03T19:21:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244255",
    "user": "@videlec"
}
```

What would be your strategy here? A method `_unicode_art_` on objects?



---

archive/issue_comments_244256.json:
```json
{
    "body": "Yes, objects should use `_unicode_art_` to hook into unicode art generation.",
    "created_at": "2015-05-03T19:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244256",
    "user": "@vbraun"
}
```

Yes, objects should use `_unicode_art_` to hook into unicode art generation.



---

archive/issue_comments_244257.json:
```json
{
    "body": "Is it feasible to have generation of such art from `_latex_` methods when no special one is provided? Is anyone aware of good converters? MathJax 2.5 has that \"fast HTML preview\" that appears before the formula is properly rendered, but it does not support `\\hline` and other frame parts of arrays, for example.\n----\nNew commits:",
    "created_at": "2015-05-14T18:22:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244257",
    "user": "@novoselt"
}
```

Is it feasible to have generation of such art from `_latex_` methods when no special one is provided? Is anyone aware of good converters? MathJax 2.5 has that "fast HTML preview" that appears before the formula is properly rendered, but it does not support `\hline` and other frame parts of arrays, for example.
----
New commits:



---

archive/issue_comments_244258.json:
```json
{
    "body": "The closest I know is http://asciitex.sourceforge.net, though really I don't think its feasible for complicated equations...",
    "created_at": "2015-05-14T18:33:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244258",
    "user": "@vbraun"
}
```

The closest I know is http://asciitex.sourceforge.net, though really I don't think its feasible for complicated equations...



---

archive/issue_comments_244259.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-05-16T20:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244259",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_244260.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-05-16T20:42:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244260",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_244261.json:
```json
{
    "body": "Analogous to ascii art, the following works now:\n\n```\nsage: %display unicode_art\nsage: identity_matrix(ZZ, 2)\n\u239b1 0\u239e\n\u239d0 1\u23a0\n```\n",
    "created_at": "2015-05-16T20:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244261",
    "user": "@vbraun"
}
```

Analogous to ascii art, the following works now:

```
sage: %display unicode_art
sage: identity_matrix(ZZ, 2)
⎛1 0⎞
⎝0 1⎠
```




---

archive/issue_comments_244262.json:
```json
{
    "body": "Replying to [comment:9 vbraun]:\n> Analogous to ascii art, the following works now:\n\nNice!\n\nThough, on 6.7.rc0 I got\n\n```\nsage: %display unicode_art\nvalue must be unset (None) or one of ('plain', 'ascii_art', 'latex'), got unicode_art\n```\n\n\nVincent",
    "created_at": "2015-05-16T20:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244262",
    "user": "@videlec"
}
```

Replying to [comment:9 vbraun]:
> Analogous to ascii art, the following works now:

Nice!

Though, on 6.7.rc0 I got

```
sage: %display unicode_art
value must be unset (None) or one of ('plain', 'ascii_art', 'latex'), got unicode_art
```


Vincent



---

archive/issue_comments_244263.json:
```json
{
    "body": "Replying to [comment:10 vdelecroix]:\n> Replying to [comment:9 vbraun]:\n> > Analogous to ascii art, the following works now:\n> \n> Nice!\n> \n> Though, on 6.7.rc0 I got...\n\n\nIt works perfectly fine after applying the branch! Sorry for the noise.",
    "created_at": "2015-05-16T20:54:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244263",
    "user": "@videlec"
}
```

Replying to [comment:10 vdelecroix]:
> Replying to [comment:9 vbraun]:
> > Analogous to ascii art, the following works now:
> 
> Nice!
> 
> Though, on 6.7.rc0 I got...


It works perfectly fine after applying the branch! Sorry for the noise.



---

archive/issue_comments_244264.json:
```json
{
    "body": "Argh, the Dyck paths looks ugly. I am trying to do something but the BOX DIAGONALS do not match very well...\n\nDo you know why in the ipython notebook we got a failure\n\n```\nsage: unicode_art(matrix([[2,2],[1,1]]))\nTraceback (most recent call last):\n...\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 1: ordinal not in range(128)\n```\n\n\nVincent",
    "created_at": "2015-05-16T21:21:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244264",
    "user": "@videlec"
}
```

Argh, the Dyck paths looks ugly. I am trying to do something but the BOX DIAGONALS do not match very well...

Do you know why in the ipython notebook we got a failure

```
sage: unicode_art(matrix([[2,2],[1,1]]))
Traceback (most recent call last):
...
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 1: ordinal not in range(128)
```


Vincent



---

archive/issue_comments_244265.json:
```json
{
    "body": "A commit with unicode art for Dyck paths and Tableaux at `u/vdelecroix/18357`.",
    "created_at": "2015-05-16T22:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244265",
    "user": "@videlec"
}
```

A commit with unicode art for Dyck paths and Tableaux at `u/vdelecroix/18357`.



---

archive/issue_comments_244266.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-16T23:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244266",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_244267.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-16T23:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244267",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_244268.json:
```json
{
    "body": "Fixed the IPython issue, it wants unicode instead of utf-8 encoded bytes.\n\nI merged your branch",
    "created_at": "2015-05-16T23:16:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244268",
    "user": "@vbraun"
}
```

Fixed the IPython issue, it wants unicode instead of utf-8 encoded bytes.

I merged your branch



---

archive/issue_comments_244269.json:
```json
{
    "body": "Thanks for the inclusion.\n\nI got other troubles with the Ipython notebook:\n- with `%display unicode` it can not export in pdf because latex failed\n\n```\n...\n    ! Package ucs Error: Unknown Unicode character 9115 = U+239B,\n    (ucs)                possibly declared in uni-35.def.\n    (ucs)                Type H to see if it is available with options.\n...\n    l.225 ...lor}Out[{\\color{outcolor}15}]:} \u239b2 2\u239e\n                                                      \n    ? \n    ! Emergency stop.\n     ...                                              \n                                                      \n    l.225 ...lor}Out[{\\color{outcolor}15}]:} \u239b2 2\u239e\n                                                      \n    !  ==> Fatal error occurred, no output PDF file produced!\n    Transcript written on notebook.log.\n```\n\n\n- if `%display latex` then it works fine in the browser for matrices but not for tableaux or Dyck paths. More precisely, I see the latex code.\n- if `%display latex` then after an export pdf, the output which is exported is not the latex one but the plain text! I thought that `latex` would be the ideal mode for notebooks for both the display and the export...\n\nVincent",
    "created_at": "2015-05-17T08:56:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244269",
    "user": "@videlec"
}
```

Thanks for the inclusion.

I got other troubles with the Ipython notebook:
- with `%display unicode` it can not export in pdf because latex failed

```
...
    ! Package ucs Error: Unknown Unicode character 9115 = U+239B,
    (ucs)                possibly declared in uni-35.def.
    (ucs)                Type H to see if it is available with options.
...
    l.225 ...lor}Out[{\color{outcolor}15}]:} ⎛2 2⎞
                                                      
    ? 
    ! Emergency stop.
     ...                                              
                                                      
    l.225 ...lor}Out[{\color{outcolor}15}]:} ⎛2 2⎞
                                                      
    !  ==> Fatal error occurred, no output PDF file produced!
    Transcript written on notebook.log.
```


- if `%display latex` then it works fine in the browser for matrices but not for tableaux or Dyck paths. More precisely, I see the latex code.
- if `%display latex` then after an export pdf, the output which is exported is not the latex one but the plain text! I thought that `latex` would be the ideal mode for notebooks for both the display and the export...

Vincent



---

archive/issue_comments_244270.json:
```json
{
    "body": "`%display latex` uses Sage's mathjax/latex. In particular, matrices are typeset by mathjax and not by this branch. Sage's latex also has problems with unicode that are unrelated to this ticket: \n\n```\nsage: latex(u'Mot\u00f6rhead')\n---------------------------------------------------------------------------\nUnicodeEncodeError                        Traceback (most recent call last)\n<ipython-input-4-0cfcb5f9dc0d> in <module>()\n----> 1 latex(u'Mot\u00f6rhead')\n\n/home/vbraun/Sage/git-develop/local/lib/python2.7/site-packages/sage/misc/latex.pyc in __call__(self, x, combine_all)\n    925             return LatexExpr(f(x))\n    926         except KeyError:\n--> 927             return LatexExpr(str_function(str(x)))\n    928 \n    929 \n\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\xf6' in position 3: ordinal not in range(128)\n```\n",
    "created_at": "2015-05-17T09:49:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244270",
    "user": "@vbraun"
}
```

`%display latex` uses Sage's mathjax/latex. In particular, matrices are typeset by mathjax and not by this branch. Sage's latex also has problems with unicode that are unrelated to this ticket: 

```
sage: latex(u'Motörhead')
---------------------------------------------------------------------------
UnicodeEncodeError                        Traceback (most recent call last)
<ipython-input-4-0cfcb5f9dc0d> in <module>()
----> 1 latex(u'Motörhead')

/home/vbraun/Sage/git-develop/local/lib/python2.7/site-packages/sage/misc/latex.pyc in __call__(self, x, combine_all)
    925             return LatexExpr(f(x))
    926         except KeyError:
--> 927             return LatexExpr(str_function(str(x)))
    928 
    929 

UnicodeEncodeError: 'ascii' codec can't encode character u'\xf6' in position 3: ordinal not in range(128)
```




---

archive/issue_comments_244271.json:
```json
{
    "body": "Upstream bug for PDF export with unicode https://github.com/ipython/ipython/issues/7150 (closed as wontfix)",
    "created_at": "2015-05-17T09:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244271",
    "user": "@vbraun"
}
```

Upstream bug for PDF export with unicode https://github.com/ipython/ipython/issues/7150 (closed as wontfix)



---

archive/issue_comments_244272.json:
```json
{
    "body": "Replying to [comment:19 vbraun]:\n> Upstream bug for PDF export with unicode https://github.com/ipython/ipython/issues/7150 (closed as wontfix)\n\nIt is the author of the request who closes the issue... not sure it is a won't fix but he did not say how he fixed it for himself. Anyway, it looks like a Ipython notebook issue and not a Sage one. Would be nice to have this \"export to pdf\" feature using the latex output!",
    "created_at": "2015-05-17T10:05:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244272",
    "user": "@videlec"
}
```

Replying to [comment:19 vbraun]:
> Upstream bug for PDF export with unicode https://github.com/ipython/ipython/issues/7150 (closed as wontfix)

It is the author of the request who closes the issue... not sure it is a won't fix but he did not say how he fixed it for himself. Anyway, it looks like a Ipython notebook issue and not a Sage one. Would be nice to have this "export to pdf" feature using the latex output!



---

archive/issue_comments_244273.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-17T11:57:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244273",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_244274.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-17T13:52:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244274",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_244275.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-17T16:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244275",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_244276.json:
```json
{
    "body": "This is more than enough for the first implementation, we can add more unicode art in followup tickets..",
    "created_at": "2015-05-17T16:02:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244276",
    "user": "@vbraun"
}
```

This is more than enough for the first implementation, we can add more unicode art in followup tickets..



---

archive/issue_comments_244277.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-17T16:02:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244277",
    "user": "@vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_244278.json:
```json
{
    "body": "Are you going to review this ticket, Vincent?",
    "created_at": "2015-05-19T21:52:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244278",
    "user": "@vbraun"
}
```

Are you going to review this ticket, Vincent?



---

archive/issue_comments_244279.json:
```json
{
    "body": "Replying to [comment:25 vbraun]:\n> Are you going to review this ticket, Vincent?\n\nYep. I planned to. I just need to find the time...",
    "created_at": "2015-05-20T06:15:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244279",
    "user": "@videlec"
}
```

Replying to [comment:25 vbraun]:
> Are you going to review this ticket, Vincent?

Yep. I planned to. I just need to find the time...



---

archive/issue_comments_244280.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-05-20T19:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244280",
    "user": "@videlec"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_244281.json:
```json
{
    "body": "Hello,\n\nTwo commits to:\n- get rid of trailing whitespaces\n- clean up a bit `CharacterArt/CharacterArtFactory`. I would like to do more cleanup but need your opinions on several points.\n\n1. Why does `CharacterArt` inherits from `SageObject`? And `CharacterArtFactory`? Do you mind if I get rid of this?\n\n2. In `build_comma_sequence`, there is a very original\n\n```\n\"\" ** ZZ(repr_elems._h - 1 - repr_elems._baseline)\n```\n\n  Is there any mysterious reason?\n\n3. Wouldn't be better to make the `CharacterArtFactory` callable and make it replace the two functions `unicode_art` and `ascii_art`?\n\n4. It would be cool to make tableaux part of the `CharacterArtFactory` (certainly for another ticket).\n\n5. Could we get rid of `CompoundSymbol.print_to_stdout`? This could be tested inside `__call__`.\n\n6. You defined symbols for the integral but these are not used...\n\n7. In my console the curly braces of height 2 does not print correctly, ie those two\n\n```\nunicodedata.lookup('UPPER LEFT OR LOWER RIGHT CURLY BRACKET SECTION')\nunicodedata.lookup('UPPER RIGHT OR LOWER LEFT CURLY BRACKET SECTION')\n```\n\n  Are these two standard?\n\nVincent\n----\nNew commits:",
    "created_at": "2015-05-20T19:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244281",
    "user": "@videlec"
}
```

Hello,

Two commits to:
- get rid of trailing whitespaces
- clean up a bit `CharacterArt/CharacterArtFactory`. I would like to do more cleanup but need your opinions on several points.

1. Why does `CharacterArt` inherits from `SageObject`? And `CharacterArtFactory`? Do you mind if I get rid of this?

2. In `build_comma_sequence`, there is a very original

```
"" ** ZZ(repr_elems._h - 1 - repr_elems._baseline)
```

  Is there any mysterious reason?

3. Wouldn't be better to make the `CharacterArtFactory` callable and make it replace the two functions `unicode_art` and `ascii_art`?

4. It would be cool to make tableaux part of the `CharacterArtFactory` (certainly for another ticket).

5. Could we get rid of `CompoundSymbol.print_to_stdout`? This could be tested inside `__call__`.

6. You defined symbols for the integral but these are not used...

7. In my console the curly braces of height 2 does not print correctly, ie those two

```
unicodedata.lookup('UPPER LEFT OR LOWER RIGHT CURLY BRACKET SECTION')
unicodedata.lookup('UPPER RIGHT OR LOWER LEFT CURLY BRACKET SECTION')
```

  Are these two standard?

Vincent
----
New commits:



---

archive/issue_comments_244282.json:
```json
{
    "body": "Aah the evils of trailing whitespace. Of course we shouldn't make any improvements to Sage until we have conquered that one.\n\n1. Every object should inherit from `SageObject`. Doesn't really matter for stuff that is not exposed but why not?\n\n2. I just refactored the code, I didn't write it.\n\n3. There is of course always more than one way to do it but they should have different docstrings. Separate functions is the cleanest way to implement that. \n\n5. Of course the bike shed can also be painted pink. Benefit? Feel free to change it if you must.\n\n6. So? Its a good case to show that the code doesn't just apply to parenthesis\n\n7. Afaik yes, e.g. http://en.wikipedia.org/wiki/Bracket",
    "created_at": "2015-05-20T19:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244282",
    "user": "@vbraun"
}
```

Aah the evils of trailing whitespace. Of course we shouldn't make any improvements to Sage until we have conquered that one.

1. Every object should inherit from `SageObject`. Doesn't really matter for stuff that is not exposed but why not?

2. I just refactored the code, I didn't write it.

3. There is of course always more than one way to do it but they should have different docstrings. Separate functions is the cleanest way to implement that. 

5. Of course the bike shed can also be painted pink. Benefit? Feel free to change it if you must.

6. So? Its a good case to show that the code doesn't just apply to parenthesis

7. Afaik yes, e.g. http://en.wikipedia.org/wiki/Bracket



---

archive/issue_comments_244283.json:
```json
{
    "body": "Replying to [comment:28 vbraun]:\n> Aah the evils of trailing whitespace. Of course we shouldn't make any improvements to Sage until we have conquered that one.\n\nThese are very annoying. My `git diff` show them in red!\n\n> 1. Every object should inherit from `SageObject`. Doesn't really matter for stuff that is not exposed but why not?\n\nI thought `SageObject` was meant for mathematical objects. It helps for interfacing with third party libraries/softwares and has this `rename` feature. But I really do not see the point of using it here... Perhaps for the very elegant\n\n```\ndef __hash__(self):\n    return hash(self.__repr__())\n```\n\n\nMoreover avoiding it makes clear that this piece of code is not dependent on the rest of Sage. And that it can be recycled outside of it and/or possible externalized.\n\n> 5. Of course the bike shed can also be painted pink. Benefit? Feel free to change it if you must.\n\nI do not like \"methods for testing purpose\".\n\n> 6. So? Its a good case to show that the code doesn't just apply to parenthesis\n\nRight.\n\n> 7. Afaik yes, e.g. http://en.wikipedia.org/wiki/Bracket\n\nHum. There are fine in the browser! Why unicode have special cases for `height=2` but no differenciation for `height` even versus `height` odd!? For `height=4` this is ugly\n\n```\n\u23a7    \u23a7\n\u23a8    \u23aa\n\u23aa    \u23a8\n\u23a9    \u23a9\n```\n",
    "created_at": "2015-05-20T20:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244283",
    "user": "@videlec"
}
```

Replying to [comment:28 vbraun]:
> Aah the evils of trailing whitespace. Of course we shouldn't make any improvements to Sage until we have conquered that one.

These are very annoying. My `git diff` show them in red!

> 1. Every object should inherit from `SageObject`. Doesn't really matter for stuff that is not exposed but why not?

I thought `SageObject` was meant for mathematical objects. It helps for interfacing with third party libraries/softwares and has this `rename` feature. But I really do not see the point of using it here... Perhaps for the very elegant

```
def __hash__(self):
    return hash(self.__repr__())
```


Moreover avoiding it makes clear that this piece of code is not dependent on the rest of Sage. And that it can be recycled outside of it and/or possible externalized.

> 5. Of course the bike shed can also be painted pink. Benefit? Feel free to change it if you must.

I do not like "methods for testing purpose".

> 6. So? Its a good case to show that the code doesn't just apply to parenthesis

Right.

> 7. Afaik yes, e.g. http://en.wikipedia.org/wiki/Bracket

Hum. There are fine in the browser! Why unicode have special cases for `height=2` but no differenciation for `height` even versus `height` odd!? For `height=4` this is ugly

```
⎧    ⎧
⎨    ⎪
⎪    ⎨
⎩    ⎩
```




---

archive/issue_comments_244284.json:
```json
{
    "body": "Maybe your git diff is just misconfigured?\n\n1. Inheriting from SageObject is also used to decide whether Sage's rich display system applies. Either way you'd have to refactor the code if you wanted to turn it into a self-contained library and taking out SageObject would be the least of your worries.\n\n7. Thats not how the 4-row curly brace works:\n\n```\n\u23a7  \u23ab\n\u23ad  \u23a9\n\u23ab  \u23a7\n\u23a9  \u23ad\n```\n",
    "created_at": "2015-05-20T22:36:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244284",
    "user": "@vbraun"
}
```

Maybe your git diff is just misconfigured?

1. Inheriting from SageObject is also used to decide whether Sage's rich display system applies. Either way you'd have to refactor the code if you wanted to turn it into a self-contained library and taking out SageObject would be the least of your worries.

7. Thats not how the 4-row curly brace works:

```
⎧  ⎫
⎭  ⎩
⎫  ⎧
⎩  ⎭
```




---

archive/issue_comments_244285.json:
```json
{
    "body": "8. Don't we want a deprecation warning?\n\n```\nsage: import sage.misc.ascii_art\nTraceback (most recent call last):\n...\nImportError: No module named ascii_art\n```\n\n  people might have used this feature in their own code.\n\n9. In the Sage notebook, doing\n\n```\nunicode_art(list(DyckWords(1).list()))\n```\n\n  or\n\n```\nascii_art(list(DyckWords(1).list()))\n```\n\n  I got \n\n```\n.../sage/typeset/character_art.py:280: UserWarning:\nthe console size is smaller than the prettyrepresentation\nof the object \"representation of the object\")\n```\n\n  I guess that the width of the screen is not properly detected. Indeed (still in the Sage notebook)\n\n```\nsage: from sage.typeset.character_art import CharacterArt\nsage: c = CharacterArt()\nsage: c._terminal_width()\n0\n```\n\n  I think that this `_terminal_width` should be somewhere else as the `CharacterArt` by itself should not be aware of the output device. What do you think?",
    "created_at": "2015-05-24T08:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244285",
    "user": "@videlec"
}
```

8. Don't we want a deprecation warning?

```
sage: import sage.misc.ascii_art
Traceback (most recent call last):
...
ImportError: No module named ascii_art
```

  people might have used this feature in their own code.

9. In the Sage notebook, doing

```
unicode_art(list(DyckWords(1).list()))
```

  or

```
ascii_art(list(DyckWords(1).list()))
```

  I got 

```
.../sage/typeset/character_art.py:280: UserWarning:
the console size is smaller than the prettyrepresentation
of the object "representation of the object")
```

  I guess that the width of the screen is not properly detected. Indeed (still in the Sage notebook)

```
sage: from sage.typeset.character_art import CharacterArt
sage: c = CharacterArt()
sage: c._terminal_width()
0
```

  I think that this `_terminal_width` should be somewhere else as the `CharacterArt` by itself should not be aware of the output device. What do you think?



---

archive/issue_comments_244286.json:
```json
{
    "body": "Deprecation is for the external user interface (whats in the global namespace at the commandline), not for implementation details.\n\nI also noted that terminal width needs to be refactored, it should be part of the output backends. But that should be done on a different ticket.",
    "created_at": "2015-05-24T08:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244286",
    "user": "@vbraun"
}
```

Deprecation is for the external user interface (whats in the global namespace at the commandline), not for implementation details.

I also noted that terminal width needs to be refactored, it should be part of the output backends. But that should be done on a different ticket.



---

archive/issue_comments_244287.json:
```json
{
    "body": "Replying to [comment:32 vbraun]:\n> Deprecation is for the external user interface (whats in the global namespace at the commandline), not for implementation details.\n\nThis is not only an implementation detail. If somebody has a personal file with\n\n```\nclass MyObject(...):\n    ...\n    def _ascii_art_(self):\n        from sage.misc.ascii_art import AsciiArt\n        ...\n```\n\nthen I think it should still work after this ticket being closed. Don't you think?\n\n> I also noted that terminal width needs to be refactored, it should be part of the output backends. But that should be done on a different ticket. \n\nRight.",
    "created_at": "2015-05-24T09:49:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244287",
    "user": "@videlec"
}
```

Replying to [comment:32 vbraun]:
> Deprecation is for the external user interface (whats in the global namespace at the commandline), not for implementation details.

This is not only an implementation detail. If somebody has a personal file with

```
class MyObject(...):
    ...
    def _ascii_art_(self):
        from sage.misc.ascii_art import AsciiArt
        ...
```

then I think it should still work after this ticket being closed. Don't you think?

> I also noted that terminal width needs to be refactored, it should be part of the output backends. But that should be done on a different ticket. 

Right.



---

archive/issue_comments_244288.json:
```json
{
    "body": "If you write a `.sage` file then you don't need to import `ascii_art`. If you write a Python file then you are supposed to import `sage.all` and not individual bits and pieces. The precise layout inside the Sage namespace is an implementation detail, we can't possibly make any promises about that and still be able to refactor code. For starters, there is no framework to test so its going to be broken anyways.",
    "created_at": "2015-05-24T09:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244288",
    "user": "@vbraun"
}
```

If you write a `.sage` file then you don't need to import `ascii_art`. If you write a Python file then you are supposed to import `sage.all` and not individual bits and pieces. The precise layout inside the Sage namespace is an implementation detail, we can't possibly make any promises about that and still be able to refactor code. For starters, there is no framework to test so its going to be broken anyways.



---

archive/issue_comments_244289.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-24T10:33:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244289",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_244290.json:
```json
{
    "body": "Hi Volker,\n\nIn the review commit `\u200b2b0207c` I did some more cleaning in `CharacterArt`. The way breakpoints are used was completely wrong... it is a bit better but not perfect. I can move it to another ticket if you prefer. I will not add change anymore.\n\nI still wonder about the `AsciiArt`. It is not available from `sage.all` so the only way somebody can use it from a `.sage` and a `.py` file is to import it from its module. Why are you against a lazy import with `deprecation=True`?\n\nVincent",
    "created_at": "2015-05-24T10:39:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244290",
    "user": "@videlec"
}
```

Hi Volker,

In the review commit `​2b0207c` I did some more cleaning in `CharacterArt`. The way breakpoints are used was completely wrong... it is a bit better but not perfect. I can move it to another ticket if you prefer. I will not add change anymore.

I still wonder about the `AsciiArt`. It is not available from `sage.all` so the only way somebody can use it from a `.sage` and a `.py` file is to import it from its module. Why are you against a lazy import with `deprecation=True`?

Vincent



---

archive/issue_comments_244291.json:
```json
{
    "body": "I'm against \"deprecations for implementation details\" because it will totally kill our ability to do anything. If you want to guarantee stable apis for private imports then you also must guarantee that the argspec of any private function/method remains stable, and that will be effectively the end of Sage.",
    "created_at": "2015-05-24T11:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244291",
    "user": "@vbraun"
}
```

I'm against "deprecations for implementation details" because it will totally kill our ability to do anything. If you want to guarantee stable apis for private imports then you also must guarantee that the argspec of any private function/method remains stable, and that will be effectively the end of Sage.



---

archive/issue_comments_244292.json:
```json
{
    "body": "PS: your cleanup of the character art code looks good!",
    "created_at": "2015-05-24T11:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244292",
    "user": "@vbraun"
}
```

PS: your cleanup of the character art code looks good!



---

archive/issue_comments_244293.json:
```json
{
    "body": "Of course, I do not want stable apis! Where did I suggest that? Deprecation is a transition state. Changing a variable name inside a function is a detail but moving a module, changing a function name is not. This is precisely the purpose of `lazy_import(..., deprecation=True)` and `deprecated_function_alias`. Some changes in this ticket might break Sage user's code instead of advertising them that the module is now somewhere else.",
    "created_at": "2015-05-24T11:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244293",
    "user": "@videlec"
}
```

Of course, I do not want stable apis! Where did I suggest that? Deprecation is a transition state. Changing a variable name inside a function is a detail but moving a module, changing a function name is not. This is precisely the purpose of `lazy_import(..., deprecation=True)` and `deprecated_function_alias`. Some changes in this ticket might break Sage user's code instead of advertising them that the module is now somewhere else.



---

archive/issue_comments_244294.json:
```json
{
    "body": "Deprecation is **only** for public interfaces, and that is the only purpose of the various deprecation utilities. If its not imported in `sage.all` then by definition it is not public. Trying to extend deprecations to implementation details will kill our ability to refactor anything.",
    "created_at": "2015-05-24T11:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244294",
    "user": "@vbraun"
}
```

Deprecation is **only** for public interfaces, and that is the only purpose of the various deprecation utilities. If its not imported in `sage.all` then by definition it is not public. Trying to extend deprecations to implementation details will kill our ability to refactor anything.



---

archive/issue_comments_244295.json:
```json
{
    "body": "In the present situation I just suggest\n\n```diff\ndiff --git a/src/sage/misc/ascii_art.py b/src/sage/misc/ascii_art.py\nnew file mode 100644\nindex 0000000..9611f10\n--- /dev/null\n+++ b/src/sage/misc/ascii_art.py\n@@ -0,0 +1,2 @@\n+from sage.misc.lazy_import import lazy_import\n+lazy_import('sage.typeset.ascii_art', ['AsciiArt', 'ascii_art'], deprecation=18357)\n```\n\nIt does not prevent you from any refactoring + it will still support user's old code.",
    "created_at": "2015-05-24T11:47:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244295",
    "user": "@videlec"
}
```

In the present situation I just suggest

```diff
diff --git a/src/sage/misc/ascii_art.py b/src/sage/misc/ascii_art.py
new file mode 100644
index 0000000..9611f10
--- /dev/null
+++ b/src/sage/misc/ascii_art.py
@@ -0,0 +1,2 @@
+from sage.misc.lazy_import import lazy_import
+lazy_import('sage.typeset.ascii_art', ['AsciiArt', 'ascii_art'], deprecation=18357)
```

It does not prevent you from any refactoring + it will still support user's old code.



---

archive/issue_comments_244296.json:
```json
{
    "body": "I understood you. But once you agree that this is a good thing you'll also have to do it for every private function. And then you need to add deprecations to changes of argspecs of private functions. And then we are dead in the water.",
    "created_at": "2015-05-24T11:49:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244296",
    "user": "@vbraun"
}
```

I understood you. But once you agree that this is a good thing you'll also have to do it for every private function. And then you need to add deprecations to changes of argspecs of private functions. And then we are dead in the water.



---

archive/issue_comments_244297.json:
```json
{
    "body": "Replying to [comment:42 vbraun]:\n> I understood you. But once you agree that this is a good thing you'll also have to do it for every private function. And then you need to add deprecations to changes of argspecs of private functions. And then we are dead in the water.\n\nNot all. But a reasonable subset, yes. In the particular case we are talking about, if somebody did implement some ascii art for his/her own object then the way he/she did is\n\n```\nclass MyObject(Element):\n     def _ascii_art_(self):\n          from sage.misc.ascii_art import AsciiArt\n          ...\n          return AsciiArt(...)\n```\n\nI just do not want to completely break that.\n\nBy the way, `sage.structure.element.Element` is not public. Will I be able to move it without deprecation? Of course not!!",
    "created_at": "2015-05-24T11:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244297",
    "user": "@videlec"
}
```

Replying to [comment:42 vbraun]:
> I understood you. But once you agree that this is a good thing you'll also have to do it for every private function. And then you need to add deprecations to changes of argspecs of private functions. And then we are dead in the water.

Not all. But a reasonable subset, yes. In the particular case we are talking about, if somebody did implement some ascii art for his/her own object then the way he/she did is

```
class MyObject(Element):
     def _ascii_art_(self):
          from sage.misc.ascii_art import AsciiArt
          ...
          return AsciiArt(...)
```

I just do not want to completely break that.

By the way, `sage.structure.element.Element` is not public. Will I be able to move it without deprecation? Of course not!!



---

archive/issue_comments_244298.json:
```json
{
    "body": "If we are not able to sort it out here, I suggest to ask for more people opinion on sage-devel. What do you think?",
    "created_at": "2015-05-24T11:54:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244298",
    "user": "@videlec"
}
```

If we are not able to sort it out here, I suggest to ask for more people opinion on sage-devel. What do you think?



---

archive/issue_comments_244299.json:
```json
{
    "body": "\"Reasonable subset\" == \"endless bickering on track than will make it even more time-consuming to do anything\". You need a clear-cut rule.\n\n`Element` is at a pretty good place in the namespace so its unlikely that we would move it. But if we were to, we would probably do it while refactoring a big chunk of Sage basics. Most likely with a major version change. Insisting on backward compatibility for implementation details would forever kill our ability to do that.",
    "created_at": "2015-05-24T12:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244299",
    "user": "@vbraun"
}
```

"Reasonable subset" == "endless bickering on track than will make it even more time-consuming to do anything". You need a clear-cut rule.

`Element` is at a pretty good place in the namespace so its unlikely that we would move it. But if we were to, we would probably do it while refactoring a big chunk of Sage basics. Most likely with a major version change. Insisting on backward compatibility for implementation details would forever kill our ability to do that.



---

archive/issue_comments_244300.json:
```json
{
    "body": "Replying to [comment:44 vdelecroix]:\n> If we are not able to sort it out here, I suggest to ask for more people opinion on sage-devel. What do you think?\n\nThe [sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/PqUKaKVtjOk) in question.",
    "created_at": "2015-05-24T13:24:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244300",
    "user": "@videlec"
}
```

Replying to [comment:44 vdelecroix]:
> If we are not able to sort it out here, I suggest to ask for more people opinion on sage-devel. What do you think?

The [sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/PqUKaKVtjOk) in question.



---

archive/issue_comments_244301.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-05-26T07:15:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244301",
    "user": "@videlec"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_244302.json:
```json
{
    "body": "It seems that your point of view about deprecation is more largely shared than mine.\n\nIf you are happy with `\u200b2b0207c` you can set to positive review.\n\nVincent",
    "created_at": "2015-05-26T07:15:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244302",
    "user": "@videlec"
}
```

It seems that your point of view about deprecation is more largely shared than mine.

If you are happy with `​2b0207c` you can set to positive review.

Vincent



---

archive/issue_comments_244303.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-26T07:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244303",
    "user": "@vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_244304.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-05-26T21:38:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244304",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_244305.json:
```json
{
    "body": "There are a number of doctest failures due to different baselines because of your changes, like:\n\n```\nFile \"src/sage/combinat/binary_tree.py\", line 2511, in sage.combinat.binary_tree.BinaryTree.under\nFailed example:\n    ascii_art((b1, b2, b1 \\ b2))\nExpected:\n    (   o    o        _o_   )\n    (  / \\    \\      /   \\  )\n    ( o   o,   o,   o     o )\n    (              / \\      )\n    (             o   o     )\nGot:\n    (   o  , o  ,     _o_   )\n    (  / \\    \\      /   \\  )\n    ( o   o    o    o     o )\n    (              / \\      )\n    (             o   o     )\n```\n\nIMHO the previous baseline was better.",
    "created_at": "2015-05-26T21:38:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244305",
    "user": "@vbraun"
}
```

There are a number of doctest failures due to different baselines because of your changes, like:

```
File "src/sage/combinat/binary_tree.py", line 2511, in sage.combinat.binary_tree.BinaryTree.under
Failed example:
    ascii_art((b1, b2, b1 \ b2))
Expected:
    (   o    o        _o_   )
    (  / \    \      /   \  )
    ( o   o,   o,   o     o )
    (              / \      )
    (             o   o     )
Got:
    (   o  , o  ,     _o_   )
    (  / \    \      /   \  )
    ( o   o    o    o     o )
    (              / \      )
    (             o   o     )
```

IMHO the previous baseline was better.



---

archive/issue_comments_244306.json:
```json
{
    "body": "Right. Sorry. With a one line modification I get the previous behavior. But do you really think that we should keep this behavior\n\n```\n            [                                       ]\n            [ , o, ,   _o_        o      o      o   ]\n            [         /   \\             / \\         ]\n            [        o     o           o   o        ]\n            [             / \\                       ]\n            [            o   o, ,  , ,      , ,  ,  ]\n```\n\nWould be better with all commas at the same position, isn't it?\n\nVincent",
    "created_at": "2015-05-27T15:14:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244306",
    "user": "@videlec"
}
```

Right. Sorry. With a one line modification I get the previous behavior. But do you really think that we should keep this behavior

```
            [                                       ]
            [ , o, ,   _o_        o      o      o   ]
            [         /   \             / \         ]
            [        o     o           o   o        ]
            [             / \                       ]
            [            o   o, ,  , ,      , ,  ,  ]
```

Would be better with all commas at the same position, isn't it?

Vincent



---

archive/issue_comments_244307.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2015-05-27T15:14:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244307",
    "user": "@videlec"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_244308.json:
```json
{
    "body": "I think ideally the boxes are vertically aligned along their baseline (=bottom of the box in this case):\n\n```\n            [                                       ]\n            [          _o_                          ]\n            [         /   \\                         ]\n            [        o     o             o          ]\n            [             / \\           / \\         ]\n            [ , o, ,     o   o, , o, , o   o, , o,  ]\n```\n\nthough we don't necessarily have to do it on this ticket.",
    "created_at": "2015-05-27T15:22:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244308",
    "user": "@vbraun"
}
```

I think ideally the boxes are vertically aligned along their baseline (=bottom of the box in this case):

```
            [                                       ]
            [          _o_                          ]
            [         /   \                         ]
            [        o     o             o          ]
            [             / \           / \         ]
            [ , o, ,     o   o, , o, , o   o, , o,  ]
```

though we don't necessarily have to do it on this ticket.



---

archive/issue_comments_244309.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-27T17:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244309",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_244310.json:
```json
{
    "body": "Replying to [comment:51 vbraun]:\n> I think ideally the boxes are vertically aligned along their baseline (=bottom of the box in this case):\n> <SNIP>\n> though we don't necessarily have to do it on this ticket.\n\nI hope it implies \"you can do it\". I did a test all and it went smoothly.\n\nVincent",
    "created_at": "2015-05-27T17:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244310",
    "user": "@videlec"
}
```

Replying to [comment:51 vbraun]:
> I think ideally the boxes are vertically aligned along their baseline (=bottom of the box in this case):
> <SNIP>
> though we don't necessarily have to do it on this ticket.

I hope it implies "you can do it". I did a test all and it went smoothly.

Vincent



---

archive/issue_comments_244311.json:
```json
{
    "body": "The commas are now on the common base line, but the constituent object is still top-aligned instead of aligned on the baseline:\n\n```\n[ o    o   ]     \n[     / \\  ]     \n[  , o   o ]\n```\n\ninstead of \n\n```\n[      o   ]     \n[     / \\  ]     \n[ o, o   o ]\n```\n",
    "created_at": "2015-05-27T19:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244311",
    "user": "@vbraun"
}
```

The commas are now on the common base line, but the constituent object is still top-aligned instead of aligned on the baseline:

```
[ o    o   ]     
[     / \  ]     
[  , o   o ]
```

instead of 

```
[      o   ]     
[     / \  ]     
[ o, o   o ]
```




---

archive/issue_comments_244312.json:
```json
{
    "body": "I am not responsible for that (with current develop version)\n\n```\nsage: b3 = BinaryTrees(3).an_element()\nsage: b1 = BinaryTrees(1).an_element()\nsage: ascii_art(b1) + ascii_art(b3) + ascii_art(b1)\noo    o\n  \\   \n   o  \n    \\ \n     o\n```\n\nYou would like to change the semantic of `__add__`? Of course it would make sense that the objects get aligned on their baseline (I thought it was precisely the purpose of baseline).\n\nThat way, I could remove the current hack for the separator as it will naturally appear on the baseline.",
    "created_at": "2015-05-27T20:08:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244312",
    "user": "@videlec"
}
```

I am not responsible for that (with current develop version)

```
sage: b3 = BinaryTrees(3).an_element()
sage: b1 = BinaryTrees(1).an_element()
sage: ascii_art(b1) + ascii_art(b3) + ascii_art(b1)
oo    o
  \   
   o  
    \ 
     o
```

You would like to change the semantic of `__add__`? Of course it would make sense that the objects get aligned on their baseline (I thought it was precisely the purpose of baseline).

That way, I could remove the current hack for the separator as it will naturally appear on the baseline.



---

archive/issue_comments_244313.json:
```json
{
    "body": "I think that we should follow the usual glyph layout convention, which always aligns on the baseline as you said. Right now its pretty confusing to have such a huge space between the top-aligned object and the comma at the bottom.",
    "created_at": "2015-05-27T20:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244313",
    "user": "@vbraun"
}
```

I think that we should follow the usual glyph layout convention, which always aligns on the baseline as you said. Right now its pretty confusing to have such a huge space between the top-aligned object and the comma at the bottom.



---

archive/issue_comments_244314.json:
```json
{
    "body": "Actually, this is the expected behavior. Baselines are computed from the bottom, not from the top (this is crazy to me). In particular, the baseline of a tree is at its root (which is comprehensible).",
    "created_at": "2015-05-30T17:21:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244314",
    "user": "@videlec"
}
```

Actually, this is the expected behavior. Baselines are computed from the bottom, not from the top (this is crazy to me). In particular, the baseline of a tree is at its root (which is comprehensible).



---

archive/issue_comments_244315.json:
```json
{
    "body": "Ok, I wasn't aware that the trees have their baseline at the top. Thats a valid design choice for trees I guess. Then we should revert the last commit (but fix the doctests) to display as \n\n```\n    (   o  , o  ,     _o_   )\n    (  / \\    \\      /   \\  )\n    ( o   o    o    o     o )\n    (              / \\      )\n    (             o   o     )\n```\n",
    "created_at": "2015-05-30T18:28:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244315",
    "user": "@vbraun"
}
```

Ok, I wasn't aware that the trees have their baseline at the top. Thats a valid design choice for trees I guess. Then we should revert the last commit (but fix the doctests) to display as 

```
    (   o  , o  ,     _o_   )
    (  / \    \      /   \  )
    ( o   o    o    o     o )
    (              / \      )
    (             o   o     )
```




---

archive/issue_comments_244316.json:
```json
{
    "body": "PS: In an ideal world we would have kerning to move the commas in:\n\n``` \n    (   o,   o,       _o_   )\n    (  / \\    \\      /   \\  )\n    ( o   o    o    o     o )\n    (              / \\      )\n    (             o   o     )\n```\n",
    "created_at": "2015-05-30T18:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244316",
    "user": "@vbraun"
}
```

PS: In an ideal world we would have kerning to move the commas in:

``` 
    (   o,   o,       _o_   )
    (  / \    \      /   \  )
    ( o   o    o    o     o )
    (              / \      )
    (             o   o     )
```




---

archive/issue_comments_244317.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-05-31T20:31:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244317",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_244318.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-05-31T21:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244318",
    "user": "@videlec"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_244319.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-31T21:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244319",
    "user": "@vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_244320.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-02T14:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18120#issuecomment-244320",
    "user": "@vbraun"
}
```

Resolution: fixed
