# Issue 23345: Robustify doctest in hyperbolic_geodesic.py

Issue created by migration from https://trac.sagemath.org/ticket/23582

Original creator: rws

Original creation time: 2017-08-05 07:07:48

A doctest of the `midpoint` code in `geometry/hyperbolic_space/hyperbolic_geodesic.py` relies on exact reproduction of complicated symbolic expressions involving square roots. With recent changes in Pynac the representation of the result no longer matches, although it is mathematically identical.

The ticket changes the doctest to match results numerically.



---

Comment by rws created at 2017-08-05 07:12:26

New commits:


---

Comment by rws created at 2017-08-05 07:12:26

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-08-05 17:02:51

ok, looks good


---

Comment by chapoton created at 2017-08-05 17:02:51

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-08-09 14:09:29

I'm not completely sure about this. If it is mathematically identical, why not simply change the doctest with the new version of pynac? Should then all (sufficiently complicated) symbolic expressions output not be used for doctests? IMO, this makes the doctest less likely to catch errors and feels like a tiny step backwards in that regard.


---

Comment by tscrim created at 2017-08-09 14:09:29

Changing status from positive_review to needs_info.


---

Comment by rws created at 2017-08-10 06:51:11

Changing status from needs_info to positive_review.


---

Comment by rws created at 2017-08-10 06:51:11

The change is no longer necessary because the mentioned change in Pynac didn't happen. I agree to make the ticket invalid.

However, let me point out that it is highly unlikely that a symbolic error would pass such a numeric test. Note that such numeric tests additionally test the FP evaluation code so it's more likely to catch bugs.


---

Comment by embray created at 2017-12-12 08:23:33

Resolution: wontfix
