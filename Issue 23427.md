# Issue 23427: Simplify & extend FractionField element constructor

Issue created by migration from Trac.

Original creator: mmezzarobba

Original creation time: 2017-08-21 13:18:16

CC:  pbruin




---

Comment by mmezzarobba created at 2017-08-21 13:35:01

An attempt to improve `FractionField._element_constructor_`. To be honest, I'm not too happy with the code, but I think it may still be an improvement. Comments welcome!

The tests in `rings/` pass.
----
New commits:


---

Comment by mmezzarobba created at 2017-08-21 13:35:01

Changing status from new to needs_review.


---

Comment by mmezzarobba created at 2017-08-21 13:35:01

Changing component from PLEASE CHANGE to algebra.


---

Comment by mmezzarobba created at 2017-08-21 13:35:01

Changing type from PLEASE CHANGE to enhancement.


---

Comment by mmezzarobba created at 2017-08-21 15:10:01

Changing status from needs_review to needs_work.


---

Comment by git created at 2017-08-21 18:43:14

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mmezzarobba created at 2017-08-21 18:43:50

Changing status from needs_work to needs_review.


---

Comment by mmezzarobba created at 2017-08-22 07:46:03

The failing tests look unrelated.


---

Comment by vdelecroix created at 2017-08-22 09:29:20

the failing doctest is #23586


---

Comment by vdelecroix created at 2017-08-22 10:27:31

why `y = ZZ.one()` instead of `self.base_ring().one()`?


---

Comment by vdelecroix created at 2017-08-22 10:35:22

These two lines

```
x = py_scalar_to_element(x)
y = py_scalar_to_element(y)
```

would better occur after the treatment of strings and pari types.


---

Comment by mmezzarobba created at 2017-08-22 12:28:38

Hi Vincent,

Thank you for your comments.

Replying to [comment:7 vdelecroix]:
> why `y = ZZ.one()` instead of `self.base_ring().one()`?

Just a leftover from previous experiments.

Replying to [comment:8 vdelecroix]:
> These two lines
> {{{
> x = py_scalar_to_element(x)
> y = py_scalar_to_element(y)
> }}}
> would better occur after the treatment of strings and pari types.

Agreed.


---

Comment by git created at 2017-08-22 12:38:01

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mmezzarobba created at 2017-08-25 14:27:01

(The patchbot is again green.)


---

Comment by vdelecroix created at 2017-08-25 21:46:52

Changing status from needs_review to positive_review.


---

Comment by mmezzarobba created at 2017-08-26 07:26:06

Thank you for the review!


---

Comment by vbraun created at 2017-09-04 06:10:31

Resolution: fixed
