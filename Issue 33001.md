# Issue 33001: a bijectionist's toolkit

archive/issues_033001.json:
```json
{
    "body": "CC:  stumpc5 @tscrim @fchapoton\n\nWe provide a toolkit for the combinatorialist to help find functions (\"statistics\") `s: A -> Z` and bijections `A -> B` given sequences of finite sets `A` and `B` that satisfy various constraints.\n\nIssue created by migration from https://trac.sagemath.org/ticket/33238\n\n",
    "created_at": "2022-01-28T10:16:02Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "a bijectionist's toolkit",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33001",
    "user": "@mantepse"
}
```
CC:  stumpc5 @tscrim @fchapoton

We provide a toolkit for the combinatorialist to help find functions ("statistics") `s: A -> Z` and bijections `A -> B` given sequences of finite sets `A` and `B` that satisfy various constraints.

Issue created by migration from https://trac.sagemath.org/ticket/33238





---

archive/issue_comments_470607.json:
```json
{
    "body": "Comments welcome!  In particular, it would be wonderful to find more interesting applications.  \n\nIn short: given two finite sets `A` and `B`, a statistic `tau: B -> Z`, and a set partition `P` of `A`, the program finds all possible statistics `s: A -> Z` which have the same distribution as `tau` but are constant on the blocks of `P`.\n\nThere is still some ongoing work. In particular, we try to implement a cache of solutions, which is checked for counterexamples before asking the solver to produce a counterexample from scratch.\n\n----\nNew commits:",
    "created_at": "2022-10-18T13:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470607",
    "user": "@mantepse"
}
```

Comments welcome!  In particular, it would be wonderful to find more interesting applications.  

In short: given two finite sets `A` and `B`, a statistic `tau: B -> Z`, and a set partition `P` of `A`, the program finds all possible statistics `s: A -> Z` which have the same distribution as `tau` but are constant on the blocks of `P`.

There is still some ongoing work. In particular, we try to implement a cache of solutions, which is checked for counterexamples before asking the solver to produce a counterexample from scratch.

----
New commits:



---

archive/issue_comments_470608.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2022-10-18T13:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470608",
    "user": "@mantepse"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_470609.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-18T13:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470609",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470610.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-18T16:10:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470610",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470611.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-18T22:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470611",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470612.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-18T22:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470612",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470613.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-19T15:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470613",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470614.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-02T09:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470614",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470615.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-05T08:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470615",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470616.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-05T08:41:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470616",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470617.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-21T15:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470617",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470618.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-21T23:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470618",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470619.json:
```json
{
    "body": "There are still some doctests and some documentation missing, but otherwise this is ready.",
    "created_at": "2022-12-21T23:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470619",
    "user": "@mantepse"
}
```

There are still some doctests and some documentation missing, but otherwise this is ready.



---

archive/issue_comments_470620.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-22T00:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470620",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470621.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-22T10:05:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470621",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470622.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-22T22:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470622",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470623.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-22T22:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470623",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470624.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-22T23:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470624",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470625.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-22T23:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470625",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470626.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2022-12-22T23:43:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470626",
    "user": "@mantepse"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_470627.json:
```json
{
    "body": "You may want to try this with a better IP solver - see #31329 for SCIP",
    "created_at": "2022-12-23T00:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470627",
    "user": "@mkoeppe"
}
```

You may want to try this with a better IP solver - see #31329 for SCIP



---

archive/issue_comments_470628.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-23T08:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470628",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470629.json:
```json
{
    "body": "Replying to [comment:24 Matthias K\u00f6ppe]:\n> You may want to try this with a better IP solver - see #31329 for SCIP\n\nExcellent, I have now managed to install SCIP, and indeed, many doctests fail :-)\n\nPreviously, I only tested with gurobi (which was much faster), but apparently, we got sloppy during the last few big reorganisations.",
    "created_at": "2022-12-23T12:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470629",
    "user": "@mantepse"
}
```

Replying to [comment:24 Matthias Köppe]:
> You may want to try this with a better IP solver - see #31329 for SCIP

Excellent, I have now managed to install SCIP, and indeed, many doctests fail :-)

Previously, I only tested with gurobi (which was much faster), but apparently, we got sloppy during the last few big reorganisations.



---

archive/issue_comments_470630.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-12-23T12:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470630",
    "user": "@mantepse"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_470631.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-23T15:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470631",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470632.json:
```json
{
    "body": "With the simple fix from #31329, comment:45:ticket:31329, this now also seems to work with SCIP.  However, SCIP seems to be much slower, by far.  In particular, GLPK finishes the doctest in line 3157-3171\n\n```\n    sage: As = Bs = [[],\n    ....:            [(1,i,j) for i in [-1,0,1] for j in [-1,1]],\n    ....:            [(2,i,j) for i in [-1,0,1] for j in [-1,1]],\n    ....:            [(3,i,j) for i in [-2,-1,0,1,2] for j in [-1,1]]]\n\n    sage: c1 = lambda a, b: (a[0]+b[0], a[1]*b[1], a[2]*b[2])\n    sage: c2 = lambda a: (a[0], -a[1], a[2])\n\n    sage: bij = Bijectionist(sum(As, []), sum(Bs, []))\n    sage: bij.set_statistics((lambda x: x[0], lambda x: x[0]))\n    sage: bij.set_intertwining_relations((2, c1, c1), (1, c2, c2))\n    sage: l = list(bij.solutions_iterator()); len(l)                            # long time\n    64\n```\n\nin about 1 minute on my laptop, while SCIP seems to take about an hour.  Is there a way to find out what's going on?  Even finding the first solution takes 25 seconds, vs. 0.3 seconds with GLPK.",
    "created_at": "2022-12-23T15:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470632",
    "user": "@mantepse"
}
```

With the simple fix from #31329, comment:45:ticket:31329, this now also seems to work with SCIP.  However, SCIP seems to be much slower, by far.  In particular, GLPK finishes the doctest in line 3157-3171

```
    sage: As = Bs = [[],
    ....:            [(1,i,j) for i in [-1,0,1] for j in [-1,1]],
    ....:            [(2,i,j) for i in [-1,0,1] for j in [-1,1]],
    ....:            [(3,i,j) for i in [-2,-1,0,1,2] for j in [-1,1]]]

    sage: c1 = lambda a, b: (a[0]+b[0], a[1]*b[1], a[2]*b[2])
    sage: c2 = lambda a: (a[0], -a[1], a[2])

    sage: bij = Bijectionist(sum(As, []), sum(Bs, []))
    sage: bij.set_statistics((lambda x: x[0], lambda x: x[0]))
    sage: bij.set_intertwining_relations((2, c1, c1), (1, c2, c2))
    sage: l = list(bij.solutions_iterator()); len(l)                            # long time
    64
```

in about 1 minute on my laptop, while SCIP seems to take about an hour.  Is there a way to find out what's going on?  Even finding the first solution takes 25 seconds, vs. 0.3 seconds with GLPK.



---

archive/issue_comments_470633.json:
```json
{
    "body": "I have found the culprit already - `deepcopy` takes forever:\n\n```\nsage: %prun next(bij.solutions_iterator())\n         54830 function calls (54618 primitive calls) in 25.558 seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n        1   24.908   24.908   24.908   24.908 {method '__deepcopy__' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}\n   ...\n```\n\nvs.\n\n```\nsage: %prun next(bij.solutions_iterator())\n         53403 function calls (53231 primitive calls) in 0.353 seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n        1    0.123    0.123    0.287    0.287 bijectionist.py:3005(add_intertwining_relation_constraints)\n     4093    0.114    0.000    0.124    0.000 {method 'add_constraint' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}\n        1    0.051    0.051    0.051    0.051 {method 'solve' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}\n     4083    0.021    0.000    0.031    0.000 {built-in method builtins.sum}\n     4372    0.010    0.000    0.010    0.000 <ipython-input-3-f7b4b09ab02e>:1(<lambda>)\n    12008    0.009    0.000    0.009    0.000 bijectionist.py:3068(<genexpr>)\n     4096    0.004    0.000    0.006    0.000 copy.py:66(copy)\n     4082    0.004    0.000    0.004    0.000 {method 'is_zero' of 'sage.numerical.linear_functions.LinearFunction' objects}\n        1    0.003    0.003    0.006    0.006 bijectionist.py:2026(_preprocess_intertwining_relations)\n     4093    0.003    0.000    0.003    0.000 {built-in method builtins.isinstance}\n        1    0.002    0.002    0.003    0.003 bijectionist.py:2892(add_alpha_beta_constraints)\n     4093    0.002    0.000    0.004    0.000 linear_tensor.py:112(is_LinearTensor)\n      194    0.001    0.000    0.001    0.000 bijectionist.py:2671(<genexpr>)\n      628    0.001    0.000    0.001    0.000 {method 'find' of 'sage.sets.disjoint_set.DisjointSet_of_hashables' objects}\n     4098    0.001    0.000    0.001    0.000 {method 'get' of 'dict' objects}\n     4095    0.001    0.000    0.001    0.000 {method 'copy' of 'dict' objects}\n        1    0.001    0.001    0.001    0.001 {method '__deepcopy__' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}\n```\n",
    "created_at": "2022-12-23T15:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470633",
    "user": "@mantepse"
}
```

I have found the culprit already - `deepcopy` takes forever:

```
sage: %prun next(bij.solutions_iterator())
         54830 function calls (54618 primitive calls) in 25.558 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1   24.908   24.908   24.908   24.908 {method '__deepcopy__' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}
   ...
```

vs.

```
sage: %prun next(bij.solutions_iterator())
         53403 function calls (53231 primitive calls) in 0.353 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.123    0.123    0.287    0.287 bijectionist.py:3005(add_intertwining_relation_constraints)
     4093    0.114    0.000    0.124    0.000 {method 'add_constraint' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}
        1    0.051    0.051    0.051    0.051 {method 'solve' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}
     4083    0.021    0.000    0.031    0.000 {built-in method builtins.sum}
     4372    0.010    0.000    0.010    0.000 <ipython-input-3-f7b4b09ab02e>:1(<lambda>)
    12008    0.009    0.000    0.009    0.000 bijectionist.py:3068(<genexpr>)
     4096    0.004    0.000    0.006    0.000 copy.py:66(copy)
     4082    0.004    0.000    0.004    0.000 {method 'is_zero' of 'sage.numerical.linear_functions.LinearFunction' objects}
        1    0.003    0.003    0.006    0.006 bijectionist.py:2026(_preprocess_intertwining_relations)
     4093    0.003    0.000    0.003    0.000 {built-in method builtins.isinstance}
        1    0.002    0.002    0.003    0.003 bijectionist.py:2892(add_alpha_beta_constraints)
     4093    0.002    0.000    0.004    0.000 linear_tensor.py:112(is_LinearTensor)
      194    0.001    0.000    0.001    0.000 bijectionist.py:2671(<genexpr>)
      628    0.001    0.000    0.001    0.000 {method 'find' of 'sage.sets.disjoint_set.DisjointSet_of_hashables' objects}
     4098    0.001    0.000    0.001    0.000 {method 'get' of 'dict' objects}
     4095    0.001    0.000    0.001    0.000 {method 'copy' of 'dict' objects}
        1    0.001    0.001    0.001    0.001 {method '__deepcopy__' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}
```




---

archive/issue_comments_470634.json:
```json
{
    "body": "(I don't know whether copy would suffice for my purpose, but it takes forever, too)\n\nSince this is almost certainly a SCIP problem, I'm going back to needs-review.",
    "created_at": "2022-12-23T15:48:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470634",
    "user": "@mantepse"
}
```

(I don't know whether copy would suffice for my purpose, but it takes forever, too)

Since this is almost certainly a SCIP problem, I'm going back to needs-review.



---

archive/issue_comments_470635.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-23T16:22:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470635",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470636.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-12-23T16:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470636",
    "user": "@mantepse"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_470637.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-23T21:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470637",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470638.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-23T22:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470638",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470639.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-12-23T23:00:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470639",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_470640.json:
```json
{
    "body": "\n```\n+            d = minimal_subdistribution.get_values(D)  # a dict from P to multiplicities\n[...]\n+                support = [X[p] for p in P if d[p]]\n```\n\nI would recommend to use the recently added `convert` parameter of `get_values` https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/mip.html#sage.numerical.mip.MixedIntegerLinearProgram.get_values, which makes such tests much more robust.",
    "created_at": "2022-12-23T23:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33001",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33001#issuecomment-470640",
    "user": "@mkoeppe"
}
```


```
+            d = minimal_subdistribution.get_values(D)  # a dict from P to multiplicities
[...]
+                support = [X[p] for p in P if d[p]]
```

I would recommend to use the recently added `convert` parameter of `get_values` https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/mip.html#sage.numerical.mip.MixedIntegerLinearProgram.get_values, which makes such tests much more robust.
