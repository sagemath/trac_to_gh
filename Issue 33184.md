# Issue 33184: Add elliptic_curves dependency to sagemath_doc_html

Issue created by migration from https://trac.sagemath.org/ticket/33421

Original creator: slelievre

Original creation time: 2022-02-27 10:59:23

CC:  jhonrubia6 klee slelievre vdelecroix

Keywords: dependency

Needed after #32993, which enriched the documentation
with pictures of elliptic curve plots.

The code for drawing those uses labels from Cremona's
elliptic curve database.

In a fresh clone, `make -j1` builds `sagemath_doc_html`
before `elliptic_curves`, and fails.

The error message somewhat misleadingly suggests to install
the full elliptic curves database provided by the
`database_cremona_ellcurve` optional spkg,
when only the mini Cremona database provided by the
`elliptic_curves` standard spkg is in fact needed.

Since `elliptic_curves` is standard, hinting at
installing `database_cremona_ellcurve` when an
elliptic curve cannot be found by label is understandable.

Thus adding the missing new dependency on `elliptic_curves`
to `sagemath_doc_html` is all that is needed here.


---

Comment by klee created at 2022-02-27 11:39:27

> In a fresh clone, `make -j1` builds `sagemath_doc_html` before `elliptic_curves`, and fails.

Is this, building the doc before the sage library, normal?


---

Comment by slelievre created at 2022-02-27 12:38:13

No, `sagemath_doc_html` depends on `sagelib` which depends on `eclib`.

Should `elliptic_curves` be added to `sagelib`'s or `eclib`'s dependencies?


---

Comment by mkoeppe created at 2022-02-27 19:08:03

I'd be in favor of adding it to `sagemath_doc_html`'s dependencies as proposed


---

Comment by slelievre created at 2022-03-01 11:16:23

Should it go before or after the `|` in the `dependencies` file?


---

Comment by mkoeppe created at 2022-03-01 18:34:33

It does not matter in this case, perhaps put it after


---

Comment by mkoeppe created at 2022-03-01 18:40:37

Changing priority from major to critical.


---

Comment by slelievre created at 2022-03-01 18:46:43

Ready for review.
----
New commits:


---

Comment by slelievre created at 2022-03-01 18:46:43

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-03-01 18:53:13

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-03-03 22:19:57

Resolution: fixed
