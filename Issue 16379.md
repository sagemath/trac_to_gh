# Issue 16379: assumption inconsistency check inconsistent

Issue created by migration from Trac.

Original creator: rws

Original creation time: 2014-07-04 14:00:34

While the error

```
sage: assume(x,'even')
sage: assume(x,'odd')
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: Assumption is inconsistent
```

is thrown as expected the following is silently accepted:

```
sage: assume(x,'integer')
sage: assume(x,'irrational')
```




---

Comment by nbruin created at 2014-07-04 18:15:02

upstream (maxima):

```
(%i1) declare(x,odd);
(%o1)                                done
(%i2) declare(x,even);

declare: inconsistent declaration declare(x,even)
 -- an error. To debug this try: debugmode(true);
(%i3) declare(x,integer);
(%o3)                                done
(%i4) declare(x,irrational);
(%o4)                                done
```

proving full (relative) consistency of assumptions in maxima lies well beyond maxima's scope and capabilities, and probably every computer algebra system, so I don't think it's worth reporting upstream.


---

Comment by rws created at 2014-07-05 15:06:23

First, the resolution of the ticket does not require to fix it in Maxima---the potential author may decide to donate fresh assumption handling code to Sage, which then uses Maxima for integration/ODEs, but bypasses Maxima for other tasks.

That it's difficult in general may be true if the full math vocabulary were implemented. I don't see why it's difficult with this very limited set of strings:

```
ValueError: ... must be one of [integer, noninteger, even, odd, rational,
irrational, real, imaginary, complex, analytic, increasing, decreasing,
oddfun, evenfun, posfun, constant, commutative, lassociative, rassociative,
symmetric, antisymmetric, integervalued, one_to_one]
```

Granted it's more difficult if equations or relations come into play. Also granted that the algorithms to ensure this (theorem proving?) are not in Sage at the moment.

OTOH the title says "inconsistent". I think that another resolution of the ticket could be to catch consistency errors and don't bother the user with them, at all.


---

Comment by nbruin created at 2014-07-05 15:48:12

First, (I only realized this later), the behaviour in the ticket is not necessarily inconsistent: "sqrt(2)" and "i" are integral and hence (algebraic) integers, but are not rational--so they are irrational integers. So ... perhaps close as "invalid"?

It may be that the "integer" property is used for "rational integer" and in that case there is an inconsistency. For that you'd have to look in maxima, since maxima is the only thing that presently attaches semantics to "assume" in sage. (and if you search previous discussions about "assume" you'll find that maxima developers themselves acknowledge the system is flawed, but they don't have a plan for improving it)

Given how limited the use of assume is, I'd say that "won't fix" would be a reasonable resolution (if there is indeed an inconsistency).

With that background info in hand, please do try some other approaches if you feel like it. You may develop something that really improves the "assume" framework. However, if you don't do that in maxima then it probably involves making maxima use obsolete in sage, so that would be a rather large project.


---

Comment by rws created at 2014-07-05 16:33:44

Changing status from new to needs_review.


---

Comment by nbruin created at 2014-07-05 18:28:29

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-07-05 20:08:19

Resolution: invalid
