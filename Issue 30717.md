# Issue 30717: Implement a proper equality check for representation objects

Issue created by migration from https://trac.sagemath.org/ticket/30954

Original creator: @kliem

Original creation time: 2020-11-23 20:09:26

CC:  jipilab @laisrast

Keywords: scalars, polyhedra


```
sage: P = (1/2)*polytopes.cube()                                                                                                                                                    
sage: Q = (1/2)*polytopes.cube(backend='field')                                                                                                                                     
sage: for p in P.inequalities(): 
....:     assert p in Q.inequalities() 
....:                                                                                                                                                                               
---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
<ipython-input-16-d0a8f3fbfdbb> in <module>
      1 for p in P.inequalities():
----> 2     assert p in Q.inequalities()
      3 

AssertionError: 
```

This isn't acceptable. Those inequalites are the same, only the defining vector differs by a positive scalar.


---

Comment by @kliem created at 2020-11-23 21:15:36

New commits:


---

Comment by git created at 2020-11-24 11:12:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2020-11-24 11:16:33

Changing status from new to needs_review.


---

Comment by jipilab created at 2020-11-24 13:59:49

Minor things:


```diff
-        cross_slack_matrix = self_matrix*hom_Vrep
+        cross_slack_matrix = self_matrix * hom_Vrep
```



```diff
-        if any(self.A()*line.vector() for line in other.lines()):
+        if any(self.A() * line.vector() for line in other.lines()):
```


In the TEST block, I would remove the `QQ(*)` to save some space... (could you also indent/line split?)

Why is there a lonely `::` ?:


```diff
+            False
+
+        ::
+
+            sage: P = Polyhedron(vertices=[[0,0,0],[0,1,0]], lines=[[1,0,0]])
```



---

Comment by @kliem created at 2020-11-24 14:01:13

Replying to [comment:4 jipilab]:
> 
> Why is there a lonely `::` ?:
> 
> {{{#!diff
> +            False
> +
> +        ::
> +
> +            sage: P = Polyhedron(vertices=[[0,0,0],[0,1,0]], lines=[This is the Trac macro *1,0,0* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,0,0-macro))
> }}}
> 
People use it to group examples, when they are too lazy to write down a nice sentence for each example.


---

Comment by @kliem created at 2020-11-24 14:01:51

It's just a new example, I redefine `P`, I redefine `Q`.


---

Comment by jipilab created at 2020-11-24 14:03:25

You forgot `# optional - pynormaliz` in the test-block.


---

Comment by git created at 2020-11-24 14:09:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jipilab created at 2020-11-25 15:33:38

Changing status from needs_review to positive_review.


---

Comment by jipilab created at 2020-11-25 15:33:38

Thanks! Looks good and will be useful!


---

Comment by vbraun created at 2020-12-05 22:13:02

Resolution: fixed
