# Issue 30717: Implement a proper equality check for representation objects

archive/issues_030717.json:
```json
{
    "body": "CC:  @jplab @laisrast\n\nKeywords: scalars, polyhedra\n\n\n```\nsage: P = (1/2)*polytopes.cube()                                                                                                                                                    \nsage: Q = (1/2)*polytopes.cube(backend='field')                                                                                                                                     \nsage: for p in P.inequalities(): \n....:     assert p in Q.inequalities() \n....:                                                                                                                                                                               \n---------------------------------------------------------------------------\nAssertionError                            Traceback (most recent call last)\n<ipython-input-16-d0a8f3fbfdbb> in <module>\n      1 for p in P.inequalities():\n----> 2     assert p in Q.inequalities()\n      3 \n\nAssertionError: \n```\n\nThis isn't acceptable. Those inequalites are the same, only the defining vector differs by a positive scalar.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30954\n\n",
    "created_at": "2020-11-23T20:09:26Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Implement a proper equality check for representation objects",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30717",
    "user": "https://github.com/kliem"
}
```
CC:  @jplab @laisrast

Keywords: scalars, polyhedra


```
sage: P = (1/2)*polytopes.cube()                                                                                                                                                    
sage: Q = (1/2)*polytopes.cube(backend='field')                                                                                                                                     
sage: for p in P.inequalities(): 
....:     assert p in Q.inequalities() 
....:                                                                                                                                                                               
---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
<ipython-input-16-d0a8f3fbfdbb> in <module>
      1 for p in P.inequalities():
----> 2     assert p in Q.inequalities()
      3 

AssertionError: 
```

This isn't acceptable. Those inequalites are the same, only the defining vector differs by a positive scalar.

Issue created by migration from https://trac.sagemath.org/ticket/30954





---

archive/issue_comments_438654.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-11-23T21:15:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30717#issuecomment-438654",
    "user": "https://github.com/kliem"
}
```

New commits:



---

archive/issue_comments_438655.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-24T11:12:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30717#issuecomment-438655",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_438656.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-24T11:16:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30717#issuecomment-438656",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_438657.json:
```json
{
    "body": "Minor things:\n\n\n```diff\n-        cross_slack_matrix = self_matrix*hom_Vrep\n+        cross_slack_matrix = self_matrix * hom_Vrep\n```\n\n\n\n```diff\n-        if any(self.A()*line.vector() for line in other.lines()):\n+        if any(self.A() * line.vector() for line in other.lines()):\n```\n\n\nIn the TEST block, I would remove the `QQ(*)` to save some space... (could you also indent/line split?)\n\nWhy is there a lonely `::` ?:\n\n\n```diff\n+            False\n+\n+        ::\n+\n+            sage: P = Polyhedron(vertices=[[0,0,0],[0,1,0]], lines=[[1,0,0]])\n```\n",
    "created_at": "2020-11-24T13:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30717#issuecomment-438657",
    "user": "https://github.com/jplab"
}
```

Minor things:


```diff
-        cross_slack_matrix = self_matrix*hom_Vrep
+        cross_slack_matrix = self_matrix * hom_Vrep
```



```diff
-        if any(self.A()*line.vector() for line in other.lines()):
+        if any(self.A() * line.vector() for line in other.lines()):
```


In the TEST block, I would remove the `QQ(*)` to save some space... (could you also indent/line split?)

Why is there a lonely `::` ?:


```diff
+            False
+
+        ::
+
+            sage: P = Polyhedron(vertices=[[0,0,0],[0,1,0]], lines=[[1,0,0]])
```




---

archive/issue_comments_438658.json:
```json
{
    "body": "Replying to [comment:4 jipilab]:\n> \n> Why is there a lonely `::` ?:\n> \n> {{{#!diff\n> +            False\n> +\n> +        ::\n> +\n> +            sage: P = Polyhedron(vertices=[[0,0,0],[0,1,0]], lines=[This is the Trac macro *1,0,0* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,0,0-macro))\n> }}}\n> \nPeople use it to group examples, when they are too lazy to write down a nice sentence for each example.",
    "created_at": "2020-11-24T14:01:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30717#issuecomment-438658",
    "user": "https://github.com/kliem"
}
```

Replying to [comment:4 jipilab]:
> 
> Why is there a lonely `::` ?:
> 
> {{{#!diff
> +            False
> +
> +        ::
> +
> +            sage: P = Polyhedron(vertices=[[0,0,0],[0,1,0]], lines=[This is the Trac macro *1,0,0* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,0,0-macro))
> }}}
> 
People use it to group examples, when they are too lazy to write down a nice sentence for each example.



---

archive/issue_comments_438659.json:
```json
{
    "body": "It's just a new example, I redefine `P`, I redefine `Q`.",
    "created_at": "2020-11-24T14:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30717#issuecomment-438659",
    "user": "https://github.com/kliem"
}
```

It's just a new example, I redefine `P`, I redefine `Q`.



---

archive/issue_comments_438660.json:
```json
{
    "body": "You forgot `# optional - pynormaliz` in the test-block.",
    "created_at": "2020-11-24T14:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30717#issuecomment-438660",
    "user": "https://github.com/jplab"
}
```

You forgot `# optional - pynormaliz` in the test-block.



---

archive/issue_comments_438661.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-24T14:09:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30717#issuecomment-438661",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_438662.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-25T15:33:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30717#issuecomment-438662",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_438663.json:
```json
{
    "body": "Thanks! Looks good and will be useful!",
    "created_at": "2020-11-25T15:33:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30717#issuecomment-438663",
    "user": "https://github.com/jplab"
}
```

Thanks! Looks good and will be useful!



---

archive/issue_events_028184.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-05T22:13:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30717",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30717#event-28184"
}
```



---

archive/issue_comments_438664.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-12-05T22:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30717",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30717#issuecomment-438664",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
