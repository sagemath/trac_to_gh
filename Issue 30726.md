# Issue 30726: remove CombinatorialClass in graph_path.py

Issue created by migration from https://trac.sagemath.org/ticket/30963

Original creator: chapoton

Original creation time: 2020-11-25 17:38:54

as part of #12913


---

Comment by chapoton created at 2020-11-25 17:39:23

Changing status from new to needs_review.


---

Comment by chapoton created at 2020-11-25 17:39:23

New commits:


---

Comment by tscrim created at 2020-11-30 04:51:47

Failures seem unrelated, but why did you get rid of this doctest?

```diff
diff --git a/src/sage/combinat/graph_path.py b/src/sage/combinat/graph_path.py
index dc2c7ce..620ef03 100644
--- a/src/sage/combinat/graph_path.py
+++ b/src/sage/combinat/graph_path.py
@@ -239,10 +240,9 @@ class GraphPaths_all(CombinatorialClass, GraphPaths_common):
 
             sage: G = DiGraph({1:[2,2,3], 2:[3,4], 3:[4], 4:[5,5]}, multiedges=True)
             sage: p = GraphPaths(G)
-            sage: p == loads(dumps(p))
-            True
         """
         self.graph = g
+        Parent.__init__(self, category=FiniteEnumeratedSets())
 
     def __repr__(self):
         """
```



---

Comment by chapoton created at 2020-11-30 08:30:41

Hello Travis,

failures on darwin patchbot are due to usage of python 3.9

failures on petitbonum are because of a pexpect problem with singular #30945

Here, I have a problem with loads-dumps, because I cannot use `UniqueRepresentation`, the input (a graph) being not compatible with that. Should I make a custom `__eq__` and `__ne__` to be able to restore this doctest ?


---

Comment by tscrim created at 2020-11-30 13:05:38

Replying to [comment:3 chapoton]:
> Here, I have a problem with loads-dumps, because I cannot use `UniqueRepresentation`, the input (a graph) being not compatible with that. Should I make a custom `__eq__` and `__ne__` to be able to restore this doctest ?

Yes, I think that is best. In fact, the lack of equality testing might end up being a backwards incompatible change (although I do see it as being unlikely). Probably also should have a `__hash__` too...


---

Comment by git created at 2020-12-02 20:02:20

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2020-12-02 20:28:30

ok, here is the equality test


---

Comment by tscrim created at 2020-12-03 07:03:26

Thank you. LGTM.


---

Comment by tscrim created at 2020-12-03 07:03:26

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2020-12-03 08:17:25

one moment, I see that I forgot to put back all the loads-dumps doctests..


---

Comment by git created at 2020-12-03 08:24:03

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2020-12-03 08:24:03

Changing status from positive_review to needs_review.


---

Comment by chapoton created at 2020-12-03 08:25:08

done. I also removed the `.Facade()` that I added before and was probably used wrongly. Back to needs review, sorry for that.


---

Comment by chapoton created at 2020-12-05 20:29:56

given the green bot, I will allow mself to set this back to positive


---

Comment by chapoton created at 2020-12-05 20:29:56

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-12-06 12:49:22

Resolution: fixed
