# Issue 21576: LatticePosets: Add skeleton

Issue created by migration from Trac.

Original creator: jmantysalo

Original creation time: 2016-11-04 09:39:44

CC:  chapoton

Add a function to get the skeleton of a pseudocomplemented lattice.


---

Comment by git created at 2016-11-04 10:20:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-11-04 10:21:16

Changing status from new to needs_review.


---

Comment by tscrim created at 2016-11-04 14:11:28

IMO, a better way to do

```python
        pseudocomplements = [self.pseudocomplement(e) for e in self]
        if None in pseudocomplements:
            raise ValueError("lattice is not pseudocomplemented")
```

would be

```python
        pseudocomplements = []
        for e in self:
            p = self.pseudocomplement(e)
            if p is None:
                raise ValueError("lattice is not pseudocomplemented")
            pseudocomplements.append(p)
```

because it will error out faster if there is a problem.


---

Comment by jmantysalo created at 2016-11-04 15:50:25

Replying to [comment:4 tscrim]:

> - - because it will error out faster if there is a problem.

Can be done, of course, but are you sure about this? It means optimizing for a part that should not be run often. (`is_pseudcomplemented()` has short-circuit evaluation, of course.)

To compare, I have not thinked speed at all when making this. There might be some easy way to compute the skeleton much faster.


---

Comment by tscrim created at 2016-11-04 16:36:53

More subjective, I think it also makes the code easier to read and is only marginally slower due to Python being Python. Actually, is there some way to push the computation to the Hasse diagram?


---

Comment by jmantysalo created at 2016-11-04 17:13:09

Replying to [comment:6 tscrim]:
> More subjective, I think it also makes the code easier to read and is only marginally slower due to Python being Python. Actually, is there some way to push the computation to the Hasse diagram?

Can be done. Actually the code could first make vertical decomposition, take the lowest part and compute skeleton for that. If an element `e` is comparable to every other element and is not the bottom element, then the pseudocomplement for every element `\ge e` is the bottom element.

What more to optimize? Not useful but very interesting question!


---

Comment by git created at 2016-11-05 12:56:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-11-05 12:59:14

Replying to [comment:6 tscrim]:
>  Actually, is there some way to push the computation to the Hasse diagram?

How about this?


---

Comment by tscrim created at 2016-11-05 16:34:28

Same as comment:4, but I guess you're still against that?

Also, I don't like `See posets.py for definition.` You should put an explicit link to the method where it is defined. At the very least, you should put a link `:mod:`path.to.file``.


---

Comment by git created at 2016-11-06 07:25:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-11-06 07:27:59

Replying to [comment:6 tscrim]:
> More subjective, I think it also makes the code easier to read - -

I think it is harder to read... But whatever. Here is a version with explicit loop.


---

Comment by tscrim created at 2016-11-06 14:30:22

Thanks. Although I just wanted to make sure you considered it or had a counterargument. Positive review.


---

Comment by tscrim created at 2016-11-06 14:30:22

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-11-08 23:42:06

Resolution: fixed
