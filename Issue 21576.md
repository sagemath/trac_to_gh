# Issue 21576: LatticePosets: Add skeleton

archive/issues_021576.json:
```json
{
    "body": "CC:  chapoton\n\nAdd a function to get the skeleton of a pseudocomplemented lattice.\n\nIssue created by migration from https://trac.sagemath.org/ticket/21813\n\n",
    "created_at": "2016-11-04T09:39:44Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "LatticePosets: Add skeleton",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21576",
    "user": "jmantysalo"
}
```
CC:  chapoton

Add a function to get the skeleton of a pseudocomplemented lattice.

Issue created by migration from https://trac.sagemath.org/ticket/21813





---

archive/issue_comments_299563.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-04T10:20:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21576#issuecomment-299563",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299564.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-11-04T10:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21576#issuecomment-299564",
    "user": "jmantysalo"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_299565.json:
```json
{
    "body": "IMO, a better way to do\n\n```python\n        pseudocomplements = [self.pseudocomplement(e) for e in self]\n        if None in pseudocomplements:\n            raise ValueError(\"lattice is not pseudocomplemented\")\n```\n\nwould be\n\n```python\n        pseudocomplements = []\n        for e in self:\n            p = self.pseudocomplement(e)\n            if p is None:\n                raise ValueError(\"lattice is not pseudocomplemented\")\n            pseudocomplements.append(p)\n```\n\nbecause it will error out faster if there is a problem.",
    "created_at": "2016-11-04T14:11:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21576#issuecomment-299565",
    "user": "tscrim"
}
```

IMO, a better way to do

```python
        pseudocomplements = [self.pseudocomplement(e) for e in self]
        if None in pseudocomplements:
            raise ValueError("lattice is not pseudocomplemented")
```

would be

```python
        pseudocomplements = []
        for e in self:
            p = self.pseudocomplement(e)
            if p is None:
                raise ValueError("lattice is not pseudocomplemented")
            pseudocomplements.append(p)
```

because it will error out faster if there is a problem.



---

archive/issue_comments_299566.json:
```json
{
    "body": "Replying to [comment:4 tscrim]:\n\n> - - because it will error out faster if there is a problem.\n\nCan be done, of course, but are you sure about this? It means optimizing for a part that should not be run often. (`is_pseudcomplemented()` has short-circuit evaluation, of course.)\n\nTo compare, I have not thinked speed at all when making this. There might be some easy way to compute the skeleton much faster.",
    "created_at": "2016-11-04T15:50:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21576#issuecomment-299566",
    "user": "jmantysalo"
}
```

Replying to [comment:4 tscrim]:

> - - because it will error out faster if there is a problem.

Can be done, of course, but are you sure about this? It means optimizing for a part that should not be run often. (`is_pseudcomplemented()` has short-circuit evaluation, of course.)

To compare, I have not thinked speed at all when making this. There might be some easy way to compute the skeleton much faster.



---

archive/issue_comments_299567.json:
```json
{
    "body": "More subjective, I think it also makes the code easier to read and is only marginally slower due to Python being Python. Actually, is there some way to push the computation to the Hasse diagram?",
    "created_at": "2016-11-04T16:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21576#issuecomment-299567",
    "user": "tscrim"
}
```

More subjective, I think it also makes the code easier to read and is only marginally slower due to Python being Python. Actually, is there some way to push the computation to the Hasse diagram?



---

archive/issue_comments_299568.json:
```json
{
    "body": "Replying to [comment:6 tscrim]:\n> More subjective, I think it also makes the code easier to read and is only marginally slower due to Python being Python. Actually, is there some way to push the computation to the Hasse diagram?\n\nCan be done. Actually the code could first make vertical decomposition, take the lowest part and compute skeleton for that. If an element `e` is comparable to every other element and is not the bottom element, then the pseudocomplement for every element `\\ge e` is the bottom element.\n\nWhat more to optimize? Not useful but very interesting question!",
    "created_at": "2016-11-04T17:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21576#issuecomment-299568",
    "user": "jmantysalo"
}
```

Replying to [comment:6 tscrim]:
> More subjective, I think it also makes the code easier to read and is only marginally slower due to Python being Python. Actually, is there some way to push the computation to the Hasse diagram?

Can be done. Actually the code could first make vertical decomposition, take the lowest part and compute skeleton for that. If an element `e` is comparable to every other element and is not the bottom element, then the pseudocomplement for every element `\ge e` is the bottom element.

What more to optimize? Not useful but very interesting question!



---

archive/issue_comments_299569.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-05T12:56:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21576#issuecomment-299569",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299570.json:
```json
{
    "body": "Replying to [comment:6 tscrim]:\n>  Actually, is there some way to push the computation to the Hasse diagram?\n\nHow about this?",
    "created_at": "2016-11-05T12:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21576#issuecomment-299570",
    "user": "jmantysalo"
}
```

Replying to [comment:6 tscrim]:
>  Actually, is there some way to push the computation to the Hasse diagram?

How about this?



---

archive/issue_comments_299571.json:
```json
{
    "body": "Same as comment:4, but I guess you're still against that?\n\nAlso, I don't like `See posets.py for definition.` You should put an explicit link to the method where it is defined. At the very least, you should put a link `:mod:`path.to.file``.",
    "created_at": "2016-11-05T16:34:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21576#issuecomment-299571",
    "user": "tscrim"
}
```

Same as comment:4, but I guess you're still against that?

Also, I don't like `See posets.py for definition.` You should put an explicit link to the method where it is defined. At the very least, you should put a link `:mod:`path.to.file``.



---

archive/issue_comments_299572.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-06T07:25:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21576#issuecomment-299572",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_299573.json:
```json
{
    "body": "Replying to [comment:6 tscrim]:\n> More subjective, I think it also makes the code easier to read - -\n\nI think it is harder to read... But whatever. Here is a version with explicit loop.",
    "created_at": "2016-11-06T07:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21576#issuecomment-299573",
    "user": "jmantysalo"
}
```

Replying to [comment:6 tscrim]:
> More subjective, I think it also makes the code easier to read - -

I think it is harder to read... But whatever. Here is a version with explicit loop.



---

archive/issue_comments_299574.json:
```json
{
    "body": "Thanks. Although I just wanted to make sure you considered it or had a counterargument. Positive review.",
    "created_at": "2016-11-06T14:30:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21576#issuecomment-299574",
    "user": "tscrim"
}
```

Thanks. Although I just wanted to make sure you considered it or had a counterargument. Positive review.



---

archive/issue_comments_299575.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-06T14:30:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21576#issuecomment-299575",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_299576.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-11-08T23:42:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21576",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21576#issuecomment-299576",
    "user": "vbraun"
}
```

Resolution: fixed
