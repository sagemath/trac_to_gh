# Issue 19464: Port SageMath to Power8

Issue created by migration from https://trac.sagemath.org/ticket/19701

Original creator: jdemeyer

Original creation time: 2015-12-14 17:56:28

Port [SageMath](SageMath) to the [POWER8](https://en.wikipedia.org/wiki/POWER8) architecture.


---

Comment by git created at 2015-12-15 21:54:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-12-23 12:46:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2015-12-24 08:37:09

This now works, modulo #19767 and the following doctest failures (which are probably due to GMP):

```
sage -t --long --warn-long 199.7 src/sage/interfaces/maxima.py  # 2 doctests failed
sage -t --long --warn-long 199.7 src/sage/structure/sage_object.pyx  # Killed due to abort
sage -t --long --warn-long 199.7 src/sage/symbolic/expression.pyx  # 1 doctest failed
sage -t --long --warn-long 199.7 src/sage/libs/libecm.pyx  # 1 doctest failed
sage -t --long --warn-long 199.7 src/doc/en/constructions/algebraic_geometry.rst  # 1 doctest failed
sage -t --long --warn-long 199.7 src/sage/ext/memory.pyx  # 1 doctest failed
sage -t --long --warn-long 199.7 src/sage/rings/real_arb.pyx  # Killed due to abort
```



---

Comment by git created at 2015-12-24 10:01:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-12-25 13:13:32

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2015-12-30 11:07:50

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2015-12-30 22:12:10

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2015-12-30 22:27:54

First completely successful run of `make ptestlong`! There might still be non-reproducible failures though...


---

Comment by jdemeyer created at 2016-01-01 11:56:50

There is still some pexpect issue with GAP (random failures or timeouts).


---

Comment by git created at 2016-01-07 13:52:31

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2016-01-08 13:02:38

Random failure:

```
sage -t --long --warn-long 101.9 src/sage/combinat/integer_vectors_mod_permgroup.py
**********************************************************************
File "src/sage/combinat/integer_vectors_mod_permgroup.py", line 169, in sage.combinat.integer_vectors_mod_permgroup.IntegerVectorsModPermutationGroup
Failed example:
    for i in range(10): # long time
          d1 = I.subset(i).cardinality()
          d2 = Partitions(i, max_length=5).cardinality()
          print d1
          assert d1 == d2
Exception raised:
    Traceback (most recent call last):
      File "/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.integer_vectors_mod_permgroup.IntegerVectorsModPermutationGroup[25]>", line 2, in <module>
        d1 = I.subset(i).cardinality()
      File "/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/combinat/integer_vectors_mod_permgroup.py", line 526, in subset
        return IntegerVectorsModPermutationGroup_with_constraints(self.permutation_group(), sum, max_part)
      File "sage/misc/classcall_metaclass.pyx", line 326, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/home/jdemeyer/sage7b3/src/build/cythonized/sage
/misc/classcall_metaclass.c:1239)
        return cls.classcall(cls, *args, **kwds)
      File "sage/misc/cachefunc.pyx", line 973, in sage.misc.cachefunc.CachedFunction.__call__ (/home/jdemeyer/sage7b3/src/build/cythonized/sage/misc/cachefunc.c:5371)
        w = self.f(*args, **kwds)
      File "/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 1021, in __classcall__
        instance = typecall(cls, *args, **options)
      File "sage/misc/classcall_metaclass.pyx", line 493, in sage.misc.classcall_metaclass.typecall (/home/jdemeyer/sage7b3/src/build/cythonized/sage/misc/classcall_met
aclass.c:1665)
        return (<PyTypeObject*>type).tp_call(cls, args, kwds)
      File "/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/combinat/integer_vectors_mod_permgroup.py", line 618, in __init__
        self._sgs = G.strong_generating_system()
      File "/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup.py", line 1477, in strong_generating_system
        sgs.append(stab.transversals(j))
      File "/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup.py", line 1274, in transversals
        for i in self.orbit(point)]
      File "/home/jdemeyer/sage7b3/local/lib/python2.7/site-packages/sage/groups/perm_gps/permgroup.py", line 662, in __call__
        return self._element_class()(x, self, check=check)
      File "sage/groups/perm_gps/permgroup_element.pyx", line 457, in sage.groups.perm_gps.permgroup_element.PermutationGroupElement.__init__ (/home/jdemeyer/sage7b3/sr
c/build/cythonized/sage/groups/perm_gps/permgroup_element.c:5135)
        raise TypeError, 'permutation %s not in %s'%(g, parent)
    TypeError: permutation (1,5) not in Symmetric group of order 5! as a permutation group
```



---

Comment by git created at 2016-01-13 08:42:15

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2016-02-29 13:23:48

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2016-03-04 08:40:13

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jpflori created at 2016-10-25 16:34:55

Now that OpenBlas replaced ATLAS maybe we're good?


---

Comment by jdemeyer created at 2016-10-25 20:18:22

Depends on #19845. I haven't looked at it for a while...


---

Comment by jdemeyer created at 2017-09-22 10:55:27

Resolution: fixed


---

Comment by jdemeyer created at 2017-09-22 10:55:27

I'm running a ppc64le patchbot "sardonis" and everything seems to work fine...
