# Issue 30764: Some bugs concerning the trivial knot diagram

archive/issues_030764.json:
```json
{
    "body": "CC:  mmarco\n\nKeywords: knot, link, jones polynomial, alternating, khovanov homology\n\nThis ticket is related to #30346 which fixed a segmentation fault in the method `homfly_polynomial` applied to the trivial knot diagram. Here we treat similar cases for the methods `is_alternating`, `khovanov_homology` and `jones_polynomial`.\n\nWhile the first two cases produce errors you get a wrong result in the third case (which is the result for two unknots that do not cross each other):\n\n\n```\nsage: Ua = Link([]); Ua\nLink with 1 component represented by 0 crossings\nsage: Ua.khovanov_homology()\nTraceback (most recent call last):\n...\nValueError: max() arg is an empty sequence\n\nsage: Ua.is_alternating()\nTraceback (most recent call last):\n...\nIndexError: list index out of range\n\nsage: Ua.jones_polynomial()\n-sqrt(t) - 1/sqrt(t)\nsage: Ub = Link(BraidGroup(2).gen(0))\nsage: Ub.jones_polynomial()\n1\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/31001\n\n",
    "created_at": "2020-12-04T08:20:54Z",
    "labels": [
        "algebraic topology",
        "major",
        "bug"
    ],
    "title": "Some bugs concerning the trivial knot diagram",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30764",
    "user": "soehms"
}
```
CC:  mmarco

Keywords: knot, link, jones polynomial, alternating, khovanov homology

This ticket is related to #30346 which fixed a segmentation fault in the method `homfly_polynomial` applied to the trivial knot diagram. Here we treat similar cases for the methods `is_alternating`, `khovanov_homology` and `jones_polynomial`.

While the first two cases produce errors you get a wrong result in the third case (which is the result for two unknots that do not cross each other):


```
sage: Ua = Link([]); Ua
Link with 1 component represented by 0 crossings
sage: Ua.khovanov_homology()
Traceback (most recent call last):
...
ValueError: max() arg is an empty sequence

sage: Ua.is_alternating()
Traceback (most recent call last):
...
IndexError: list index out of range

sage: Ua.jones_polynomial()
-sqrt(t) - 1/sqrt(t)
sage: Ub = Link(BraidGroup(2).gen(0))
sage: Ub.jones_polynomial()
1
```


Issue created by migration from https://trac.sagemath.org/ticket/31001





---

archive/issue_comments_439701.json:
```json
{
    "body": "The bug for the Jones polynomial originates in the braid group code with trying to deal with the fact that it wants to remove unbraided strands.",
    "created_at": "2020-12-14T05:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30764#issuecomment-439701",
    "user": "tscrim"
}
```

The bug for the Jones polynomial originates in the braid group code with trying to deal with the fact that it wants to remove unbraided strands.



---

archive/issue_comments_439702.json:
```json
{
    "body": "Replying to [comment:1 tscrim]:\n> The bug for the Jones polynomial originates in the braid group code with trying to deal with the fact that it wants to remove unbraided strands.\nIndeed, `algorithm='statesum'` returns the correct result:\n\n\n```\nsage: U=Link([])\nsage: U.jones_polynomial(algorithm='statesum')\n1\n```\n\n\n\nExplicitly the bug is in the method `braid`. I think the problem is a kind of dilemma: The correct result of the method `braid` for the trivial diagram would be `one` of the braid group on one strand. But since the braid group construction doesn't allow to define it the `one` of the braid group on two strands is returned the closure of which are two isolated unknots.\n\nThe clearest way to fix this would be to implement the trivial group as the braid group on one strand, but probably annoying to work this through all methods of the class.\n\nAnother possibility is to let the generator of the two strand braid group be the braid of the trivial diagram. But this disturbs the recursive structure of the method. So, I don't know what to do here!",
    "created_at": "2020-12-18T18:02:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30764#issuecomment-439702",
    "user": "soehms"
}
```

Replying to [comment:1 tscrim]:
> The bug for the Jones polynomial originates in the braid group code with trying to deal with the fact that it wants to remove unbraided strands.
Indeed, `algorithm='statesum'` returns the correct result:


```
sage: U=Link([])
sage: U.jones_polynomial(algorithm='statesum')
1
```



Explicitly the bug is in the method `braid`. I think the problem is a kind of dilemma: The correct result of the method `braid` for the trivial diagram would be `one` of the braid group on one strand. But since the braid group construction doesn't allow to define it the `one` of the braid group on two strands is returned the closure of which are two isolated unknots.

The clearest way to fix this would be to implement the trivial group as the braid group on one strand, but probably annoying to work this through all methods of the class.

Another possibility is to let the generator of the two strand braid group be the braid of the trivial diagram. But this disturbs the recursive structure of the method. So, I don't know what to do here!



---

archive/issue_comments_439703.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-12-19T09:11:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30764#issuecomment-439703",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_439704.json:
```json
{
    "body": "I think it is just best to special case stuff in the `Link` code. That is the best way to ensure consistency of assumptions.\n----\nNew commits:",
    "created_at": "2020-12-19T09:11:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30764#issuecomment-439704",
    "user": "tscrim"
}
```

I think it is just best to special case stuff in the `Link` code. That is the best way to ensure consistency of assumptions.
----
New commits:



---

archive/issue_comments_439705.json:
```json
{
    "body": "Replying to [comment:3 tscrim]:\n> I think it is just best to special case stuff in the `Link` code. That is the best way to ensure consistency of assumptions.\n\nYou are right! But, shouldn't we add a note in the `braid` method pointing out that - on the one hand - the closure of the trivial diagram's braid is the union of two unknots (mathematically)  which - on the other hand - is consistent with the braid closure construction according to the note in the docstring of the class. Maybe the phrasing of the latter should take the unknot into account, as well.\n\nFurthermore, in the note you add to `is_alternating` I think we should say that the result may return `False` even though isotopic alternating diagrams exist (to make clear that the term is used differently as in the Hoste-Thistlethwaite table). I mean for example this:\n\n\n\n```\nsage: K5_2 = Link([[1, 4, 2, 5], [3, 8, 4, 9], [5, 10, 6, 1], [7, 2, 8, 3], [9, 6, 10, 7]])\nsage: K5_2.is_alternating()\nTrue\nsage: K5_2b = Link(K5_2.braid())\nsage: K5_2b.is_alternating()\nFalse\n```\n\n\nOnce this is done, you may switch to positive review.",
    "created_at": "2020-12-21T08:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30764#issuecomment-439705",
    "user": "soehms"
}
```

Replying to [comment:3 tscrim]:
> I think it is just best to special case stuff in the `Link` code. That is the best way to ensure consistency of assumptions.

You are right! But, shouldn't we add a note in the `braid` method pointing out that - on the one hand - the closure of the trivial diagram's braid is the union of two unknots (mathematically)  which - on the other hand - is consistent with the braid closure construction according to the note in the docstring of the class. Maybe the phrasing of the latter should take the unknot into account, as well.

Furthermore, in the note you add to `is_alternating` I think we should say that the result may return `False` even though isotopic alternating diagrams exist (to make clear that the term is used differently as in the Hoste-Thistlethwaite table). I mean for example this:



```
sage: K5_2 = Link([[1, 4, 2, 5], [3, 8, 4, 9], [5, 10, 6, 1], [7, 2, 8, 3], [9, 6, 10, 7]])
sage: K5_2.is_alternating()
True
sage: K5_2b = Link(K5_2.braid())
sage: K5_2b.is_alternating()
False
```


Once this is done, you may switch to positive review.



---

archive/issue_comments_439706.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-23T09:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30764#issuecomment-439706",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_439707.json:
```json
{
    "body": "All good suggestions. I have done them. Please check that they are satisfactory.",
    "created_at": "2020-12-23T09:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30764#issuecomment-439707",
    "user": "tscrim"
}
```

All good suggestions. I have done them. Please check that they are satisfactory.



---

archive/issue_comments_439708.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-23T11:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30764#issuecomment-439708",
    "user": "soehms"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_439709.json:
```json
{
    "body": "LGTM",
    "created_at": "2020-12-23T11:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30764#issuecomment-439709",
    "user": "soehms"
}
```

LGTM



---

archive/issue_comments_439710.json:
```json
{
    "body": "Thank you. I hope you are doing well.",
    "created_at": "2020-12-23T23:42:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30764#issuecomment-439710",
    "user": "tscrim"
}
```

Thank you. I hope you are doing well.



---

archive/issue_comments_439711.json:
```json
{
    "body": "Replying to [comment:8 tscrim]:\n> Thank you. I hope you are doing well.\n\nThank you, too! Yes, everthing for me and my family is o.K. I hope the same is true for you! Have a nice Chrismas time!",
    "created_at": "2020-12-24T12:01:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30764#issuecomment-439711",
    "user": "soehms"
}
```

Replying to [comment:8 tscrim]:
> Thank you. I hope you are doing well.

Thank you, too! Yes, everthing for me and my family is o.K. I hope the same is true for you! Have a nice Chrismas time!



---

archive/issue_comments_439712.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-12-27T23:25:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30764#issuecomment-439712",
    "user": "vbraun"
}
```

Resolution: fixed
