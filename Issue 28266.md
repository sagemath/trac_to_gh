# Issue 28266: Bug in formal composition of maps

Issue created by migration from https://trac.sagemath.org/ticket/28503

Original creator: caruso

Original creation time: 2019-09-15 16:54:11


```
sage: f = QQ.coerce_map_from(ZZ)
sage: f = f.extend_domain(ZZ).extend_codomain(QQ)
sage: f
Composite map:
  From: Integer Ring
  To:   Rational Field
  Defn:   Identity endomorphism of Integer Ring
        then
          Natural morphism:
          From: Integer Ring
          To:   Rational Field
        then
          Identity endomorphism of Rational Field
sage: f.then()
Traceback (most recent call):
...
TypeError: __init__() takes at least 2 positional arguments (1 given)
```


By the way, shouldn't `extend_domain` and `extend_codomain` check if the requested extension is trivial and just return `self` in this case?


---

Comment by chapoton created at 2019-09-15 18:59:05

Here is a fix for the "then" method. 
----
New commits:


---

Comment by chapoton created at 2019-09-15 18:59:05

Changing status from new to needs_review.


---

Comment by caruso created at 2019-09-15 22:11:06

Looks good. Thanks.


---

Comment by caruso created at 2019-09-15 22:11:06

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2019-09-29 15:23:01

moving milestone to 9.0


---

Comment by vbraun created at 2019-10-05 07:57:50

Resolution: fixed
