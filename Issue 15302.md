# Issue 15302: use Pillow instead of PIL

archive/issues_015302.json:
```json
{
    "body": "PIL is has not been maintained an a few years. Pillow is the canonical fork of PIL that most distributions have switch to using, we should do the same.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15539\n\n",
    "created_at": "2013-12-18T04:55:36Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.1",
    "title": "use Pillow instead of PIL",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15302",
    "user": "@ohanar"
}
```
PIL is has not been maintained an a few years. Pillow is the canonical fork of PIL that most distributions have switch to using, we should do the same.

Issue created by migration from https://trac.sagemath.org/ticket/15539





---

archive/issue_comments_196897.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-12-18T04:55:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196897",
    "user": "@ohanar"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_196898.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-12-18T05:37:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196898",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196899.json:
```json
{
    "body": "sage/plot/plot3d/base.pyx needs to be fixed as well:\nimport Image\nneeds to be replaced by \nfrom PIL import Image",
    "created_at": "2013-12-18T05:57:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196899",
    "user": "@kiwifb"
}
```

sage/plot/plot3d/base.pyx needs to be fixed as well:
import Image
needs to be replaced by 
from PIL import Image



---

archive/issue_comments_196900.json:
```json
{
    "body": "Replying to [comment:4 fbissey]:\n> sage/plot/plot3d/base.pyx needs to be fixed as well\npart of this commit: http://git.sagemath.org/sage.git/commit/?h=u/ohanar/pillow&id=6df0adb542b651cdfde5c9088edf18522963aff0",
    "created_at": "2013-12-18T06:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196900",
    "user": "@ohanar"
}
```

Replying to [comment:4 fbissey]:
> sage/plot/plot3d/base.pyx needs to be fixed as well
part of this commit: http://git.sagemath.org/sage.git/commit/?h=u/ohanar/pillow&id=6df0adb542b651cdfde5c9088edf18522963aff0



---

archive/issue_comments_196901.json:
```json
{
    "body": "Great, one less patch in sage-on-gentoo. I don't see that commit attached to this ticket. Is it attached to another ticket or work in progress?",
    "created_at": "2013-12-18T06:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196901",
    "user": "@kiwifb"
}
```

Great, one less patch in sage-on-gentoo. I don't see that commit attached to this ticket. Is it attached to another ticket or work in progress?



---

archive/issue_comments_196902.json:
```json
{
    "body": "Replying to [comment:6 fbissey]:\n> Great, one less patch in sage-on-gentoo. I don't see that commit attached to this ticket.\nIt's attached to this ticket -- you can see all the commits on the branch for this ticket at\nhttp://git.sagemath.org/sage.git/log/?h=u/ohanar/pillow.",
    "created_at": "2013-12-18T07:12:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196902",
    "user": "@ohanar"
}
```

Replying to [comment:6 fbissey]:
> Great, one less patch in sage-on-gentoo. I don't see that commit attached to this ticket.
It's attached to this ticket -- you can see all the commits on the branch for this ticket at
http://git.sagemath.org/sage.git/log/?h=u/ohanar/pillow.



---

archive/issue_comments_196903.json:
```json
{
    "body": "OK, I am not properly used to the way git and trac integrate. Hit me on the head with it a few more times and I'll get it.\n\nI see you ditched the variables for binary distribution (were they even used anymore with the old pil? apparently yes.). Good riddance, did you \"steal\" the setup.py patch from somewhere else? Gentoo has a similar one.\nI think the only missing from that ticket is the removal of pil itself.",
    "created_at": "2013-12-18T08:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196903",
    "user": "@kiwifb"
}
```

OK, I am not properly used to the way git and trac integrate. Hit me on the head with it a few more times and I'll get it.

I see you ditched the variables for binary distribution (were they even used anymore with the old pil? apparently yes.). Good riddance, did you "steal" the setup.py patch from somewhere else? Gentoo has a similar one.
I think the only missing from that ticket is the removal of pil itself.



---

archive/issue_comments_196904.json:
```json
{
    "body": "Replying to [comment:8 fbissey]:\n> I see you ditched the variables for binary distribution (were they even used anymore with the old pil? apparently yes.).\nThey weren't even the standard binary environment variables, and they relied on experimental spkgs.\n\n> Good riddance, did you \"steal\" the setup.py patch from somewhere else?\n\nIt's a patch that I submitted upstream (was originally based on the development branch - hence broken, but now fixed).\n\n> Gentoo has a similar one.\n> I think the only missing from that ticket is the removal of pil itself.\n\nI see no reason to delete PIL -- it can just be an optional/experiment spkg.",
    "created_at": "2013-12-18T09:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196904",
    "user": "@ohanar"
}
```

Replying to [comment:8 fbissey]:
> I see you ditched the variables for binary distribution (were they even used anymore with the old pil? apparently yes.).
They weren't even the standard binary environment variables, and they relied on experimental spkgs.

> Good riddance, did you "steal" the setup.py patch from somewhere else?

It's a patch that I submitted upstream (was originally based on the development branch - hence broken, but now fixed).

> Gentoo has a similar one.
> I think the only missing from that ticket is the removal of pil itself.

I see no reason to delete PIL -- it can just be an optional/experiment spkg.



---

archive/issue_comments_196905.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-12-18T09:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196905",
    "user": "@kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_196906.json:
```json
{
    "body": "Replying to [comment:9 ohanar]:\n> Replying to [comment:8 fbissey]:\n> > I think the only missing from that ticket is the removal of pil itself.\n> \n> I see no reason to delete PIL -- it can just be an optional/experiment spkg.\n\nI see no reason to keep something that is, for all purpose, dead. But the point is minor\nand I am quite ready to give this a positive review.",
    "created_at": "2013-12-18T09:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196906",
    "user": "@kiwifb"
}
```

Replying to [comment:9 ohanar]:
> Replying to [comment:8 fbissey]:
> > I think the only missing from that ticket is the removal of pil itself.
> 
> I see no reason to delete PIL -- it can just be an optional/experiment spkg.

I see no reason to keep something that is, for all purpose, dead. But the point is minor
and I am quite ready to give this a positive review.



---

archive/issue_comments_196907.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2013-12-20T20:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196907",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_196908.json:
```json
{
    "body": "The tarball works but don't we lower-case the packages? E.g. \"r\" instead of \"R\".",
    "created_at": "2013-12-20T20:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196908",
    "user": "@vbraun"
}
```

The tarball works but don't we lower-case the packages? E.g. "r" instead of "R".



---

archive/issue_comments_196909.json:
```json
{
    "body": "I must say I am not aware of any such policies in sage but it is not uncommon in linux distro to \"prefer\" lower case, funny you brought R up because it is usually one of the exception.",
    "created_at": "2013-12-20T22:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196909",
    "user": "@kiwifb"
}
```

I must say I am not aware of any such policies in sage but it is not uncommon in linux distro to "prefer" lower case, funny you brought R up because it is usually one of the exception.



---

archive/issue_comments_196910.json:
```json
{
    "body": "I would be in favor of having everything lower case, otherwise it'll be annoying to type on the commandline `build/pkgs/PyCrypto` etc... But then its not a big deal if you insist on capital letters for Pillow ;-)",
    "created_at": "2013-12-20T23:05:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196910",
    "user": "@vbraun"
}
```

I would be in favor of having everything lower case, otherwise it'll be annoying to type on the commandline `build/pkgs/PyCrypto` etc... But then its not a big deal if you insist on capital letters for Pillow ;-)



---

archive/issue_comments_196911.json:
```json
{
    "body": "I will leave the final word to our fellow author on the capital \"P\" not a big deal but I appreciate your reasons.",
    "created_at": "2013-12-21T00:52:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196911",
    "user": "@kiwifb"
}
```

I will leave the final word to our fellow author on the capital "P" not a big deal but I appreciate your reasons.



---

archive/issue_comments_196912.json:
```json
{
    "body": "Replying to [comment:9 ohanar]:\n> Replying to [comment:8 fbissey]:\n> > I see you ditched the variables for binary distribution (were they even used anymore with the old pil? apparently yes.).\n> They weren't even the standard binary environment variables, and they relied on experimental spkgs.\n> \n> > Good riddance, did you \"steal\" the setup.py patch from somewhere else?\n> \n> It's a patch that I submitted upstream (was originally based on the development branch - hence broken, but now fixed).\n> \n> > Gentoo has a similar one.\n> > I think the only missing from that ticket is the removal of pil itself.\n> \n> I see no reason to delete PIL -- it can just be an optional/experiment spkg.\n\nI think it would make more sense to remove `build/pkgs/pil/`: we don't have any files in `build/pkgs` for other optional/experimental packages, do we? I actually don't know how optional packages are implemented: still as spkgs? Is that going to change?\n\nI would also vote for a lowercase \"p\".",
    "created_at": "2013-12-21T01:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196912",
    "user": "@jhpalmieri"
}
```

Replying to [comment:9 ohanar]:
> Replying to [comment:8 fbissey]:
> > I see you ditched the variables for binary distribution (were they even used anymore with the old pil? apparently yes.).
> They weren't even the standard binary environment variables, and they relied on experimental spkgs.
> 
> > Good riddance, did you "steal" the setup.py patch from somewhere else?
> 
> It's a patch that I submitted upstream (was originally based on the development branch - hence broken, but now fixed).
> 
> > Gentoo has a similar one.
> > I think the only missing from that ticket is the removal of pil itself.
> 
> I see no reason to delete PIL -- it can just be an optional/experiment spkg.

I think it would make more sense to remove `build/pkgs/pil/`: we don't have any files in `build/pkgs` for other optional/experimental packages, do we? I actually don't know how optional packages are implemented: still as spkgs? Is that going to change?

I would also vote for a lowercase "p".



---

archive/issue_comments_196913.json:
```json
{
    "body": "Not all optional/experimental packages have been converted but yes I think they are supposed to go in build/pkgs. If you have a look you'll see some optional stuff already.",
    "created_at": "2013-12-21T02:29:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196913",
    "user": "@kiwifb"
}
```

Not all optional/experimental packages have been converted but yes I think they are supposed to go in build/pkgs. If you have a look you'll see some optional stuff already.



---

archive/issue_comments_196914.json:
```json
{
    "body": "Oh, I see. Then keep the directory, of course.",
    "created_at": "2013-12-21T03:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196914",
    "user": "@jhpalmieri"
}
```

Oh, I see. Then keep the directory, of course.



---

archive/issue_comments_196915.json:
```json
{
    "body": "IMO, it would be better to have package names be the same as the upstream version (including capitalization), I would also vote to have this changed for other packages (such as R or Python). (Also, it is not hard to setup your shell [well at least zsh] to be case-insensitive for tab completion.) However, it seems like most disagree, so I can change this when I have a chance.\n\nActually, I think a good reason to remove PIL would be conflicts from having both Pillow and PIL installed side-by-side (or PIL instead of Pillow). I would rather not have to maintain support for both libraries.",
    "created_at": "2013-12-21T06:06:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196915",
    "user": "@ohanar"
}
```

IMO, it would be better to have package names be the same as the upstream version (including capitalization), I would also vote to have this changed for other packages (such as R or Python). (Also, it is not hard to setup your shell [well at least zsh] to be case-insensitive for tab completion.) However, it seems like most disagree, so I can change this when I have a chance.

Actually, I think a good reason to remove PIL would be conflicts from having both Pillow and PIL installed side-by-side (or PIL instead of Pillow). I would rather not have to maintain support for both libraries.



---

archive/issue_comments_196916.json:
```json
{
    "body": "I think that the naming convention must still be the old SPKG naming rule: only lowercase letters, numbers, and underscores. I personally wouldn't object to changing this convention, but that needs to be discussed on sage-devel, not here.\n\nIf we end up changing it, then because of the brain-dead way the standard OS X file system treats upper and lower case, I think we can never have two packages whose name only differs in capitalization. So then we should have commands like `sage -i PKG_NAME` ignore case, to make `sage -i Pillow` and `sage -i pillow` (for example) perform the same function.",
    "created_at": "2013-12-21T06:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196916",
    "user": "@jhpalmieri"
}
```

I think that the naming convention must still be the old SPKG naming rule: only lowercase letters, numbers, and underscores. I personally wouldn't object to changing this convention, but that needs to be discussed on sage-devel, not here.

If we end up changing it, then because of the brain-dead way the standard OS X file system treats upper and lower case, I think we can never have two packages whose name only differs in capitalization. So then we should have commands like `sage -i PKG_NAME` ignore case, to make `sage -i Pillow` and `sage -i pillow` (for example) perform the same function.



---

archive/issue_comments_196917.json:
```json
{
    "body": "Since Pillow is a backward-compatible replacement for PIL I'm also in favor of removing PIL.",
    "created_at": "2013-12-21T12:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196917",
    "user": "@vbraun"
}
```

Since Pillow is a backward-compatible replacement for PIL I'm also in favor of removing PIL.



---

archive/issue_comments_196918.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-12-23T03:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196918",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_196919.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2013-12-23T03:40:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196919",
    "user": "@ohanar"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_196920.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-12-23T03:44:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196920",
    "user": "@kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_196921.json:
```json
{
    "body": "I think that covers all the issue raised for this particular package. So back to positive review. Not sure who to put in reviewer(s) though.",
    "created_at": "2013-12-23T03:44:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196921",
    "user": "@kiwifb"
}
```

I think that covers all the issue raised for this particular package. So back to positive review. Not sure who to put in reviewer(s) though.



---

archive/issue_comments_196922.json:
```json
{
    "body": "checksums.ini still has capital-P(illow) in it...",
    "created_at": "2013-12-23T14:27:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196922",
    "user": "@vbraun"
}
```

checksums.ini still has capital-P(illow) in it...



---

archive/issue_comments_196923.json:
```json
{
    "body": "The tarball is already on the server, for the record. Please make sure that it downloads...",
    "created_at": "2013-12-23T14:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196923",
    "user": "@vbraun"
}
```

The tarball is already on the server, for the record. Please make sure that it downloads...



---

archive/issue_comments_196924.json:
```json
{
    "body": "Replying to [comment:24 vbraun]:\n> checksums.ini still has capital-P(illow) in it...\nYes, that is a fully conscious decision, as it matches the tarball that is provided by upstream. I think it is much better to just use the upstream tarball in this case, rather than untaring, changing the name of the untared directory, and then retaring (which is what one must do if they decapitalize Pillow in checksums.ini). This is part of the reason why I think that matching upstreams capitalization is preferable.",
    "created_at": "2013-12-23T20:08:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196924",
    "user": "@ohanar"
}
```

Replying to [comment:24 vbraun]:
> checksums.ini still has capital-P(illow) in it...
Yes, that is a fully conscious decision, as it matches the tarball that is provided by upstream. I think it is much better to just use the upstream tarball in this case, rather than untaring, changing the name of the untared directory, and then retaring (which is what one must do if they decapitalize Pillow in checksums.ini). This is part of the reason why I think that matching upstreams capitalization is preferable.



---

archive/issue_comments_196925.json:
```json
{
    "body": "Ok, good. But it still doesn't build.",
    "created_at": "2013-12-23T20:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196925",
    "user": "@vbraun"
}
```

Ok, good. But it still doesn't build.



---

archive/issue_comments_196926.json:
```json
{
    "body": "Log: http://build.sagemath.org/sage/builders/%20%20fast%20UW%20redhawk%20%28Ubuntu%2010.04%20x86_64%29%20incremental/builds/26/steps/compile/logs/stdio",
    "created_at": "2013-12-23T20:11:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196926",
    "user": "@vbraun"
}
```

Log: http://build.sagemath.org/sage/builders/%20%20fast%20UW%20redhawk%20%28Ubuntu%2010.04%20x86_64%29%20incremental/builds/26/steps/compile/logs/stdio



---

archive/issue_comments_196927.json:
```json
{
    "body": "Replying to [comment:27 vbraun]:\n> Ok, good. But it still doesn't build.\nWorks fine on OSX (case-insensitive). The problem is probably because the package was misplaced on boxen (should be `.../Pillow/Pillow-*.tar.gz` not `.../pillow/Pillow-*.tar.gz`). (Again, less breakage if we just matched upstream's capitalization).",
    "created_at": "2013-12-23T20:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196927",
    "user": "@ohanar"
}
```

Replying to [comment:27 vbraun]:
> Ok, good. But it still doesn't build.
Works fine on OSX (case-insensitive). The problem is probably because the package was misplaced on boxen (should be `.../Pillow/Pillow-*.tar.gz` not `.../pillow/Pillow-*.tar.gz`). (Again, less breakage if we just matched upstream's capitalization).



---

archive/issue_comments_196928.json:
```json
{
    "body": "Surely the OSX filesystem has no influence on whether *downloading* http://www.sagemath.org/packages/upstream//Pillow/Pillow-2.2.2.tar.gz works or not? If it works for you then it must be because you have the tarball already in your upstream directory.",
    "created_at": "2013-12-23T20:30:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196928",
    "user": "@vbraun"
}
```

Surely the OSX filesystem has no influence on whether *downloading* http://www.sagemath.org/packages/upstream//Pillow/Pillow-2.2.2.tar.gz works or not? If it works for you then it must be because you have the tarball already in your upstream directory.



---

archive/issue_comments_196929.json:
```json
{
    "body": "Replying to [comment:30 vbraun]:\n> Surely the OSX filesystem has no influence on whether *downloading* http://www.sagemath.org/packages/upstream//Pillow/Pillow-2.2.2.tar.gz works or not?\n\nMaybe it doesn't have to do with the OSX filesystem (although, maybe python's urllib stuff builds to be case-insensitive on a case-insensitive filesystem).\n\n> If it works for you then it must be because you have the tarball already in your upstream directory.\n\nNo, I purposely deleted it to test, and it indeed downloaded a new tarball.",
    "created_at": "2013-12-23T20:38:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196929",
    "user": "@ohanar"
}
```

Replying to [comment:30 vbraun]:
> Surely the OSX filesystem has no influence on whether *downloading* http://www.sagemath.org/packages/upstream//Pillow/Pillow-2.2.2.tar.gz works or not?

Maybe it doesn't have to do with the OSX filesystem (although, maybe python's urllib stuff builds to be case-insensitive on a case-insensitive filesystem).

> If it works for you then it must be because you have the tarball already in your upstream directory.

No, I purposely deleted it to test, and it indeed downloaded a new tarball.



---

archive/issue_comments_196930.json:
```json
{
    "body": "Ok, seems to download now. But build fails on a bunch of older machines (bsd, eno, cicero). Missing dependency?\n\n```\nFound local metadata for pillow-2.2.2\nAttempting to download package pillow-2.2.2\n>>> Trying to download http://www.sagemath.org/packages/upstream//pillow/Pillow-2.2.2.tar.gz\n[............................................................]\nChecksum: 053337a612dd16ec6f1f6fc544374ca5fe65ae2c vs 053337a612dd16ec6f1f6fc544374ca5fe65ae2c\npillow-2.2.2\n====================================================\nSetting up build directory for pillow-2.2.2\nFinished set up\n****************************************************\nHost system:\nDarwin bsd.local 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:32:41 PDT 2011; root:xnu-1504.15.3~1/RELEASE_X86_64 x86_64\n****************************************************\nC compiler: gcc\nC compiler version:\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/Users/buildbot/build/sage/bsd-1/sage_git/build/local/libexec/gcc/x86_64-apple-darwin10.8.0/4.7.3/lto-wrapper\nTarget: x86_64-apple-darwin10.8.0\nConfigured with: ../src/configure --prefix=/Users/buildbot/build/sage/bsd-1/sage_git/build/local --with-local-prefix=/Users/buildbot/build/sage/bsd-1/sage_git/build/local --with-gmp=/Users/buildbot/build/sage/bsd-1/sage_git/build/local --with-mpfr=/Users/buildbot/build/sage/bsd-1/sage_git/build/local --with-mpc=/Users/buildbot/build/sage/bsd-1/sage_git/build/local --with-system-zlib --disable-multilib --disable-nls  \nThread model: posix\ngcc version 4.7.3 (GCC) \n****************************************************\npatching file setup.py\nTraceback (most recent call last):\n  File \"setup.py\", line 19, in <module>\n    from setuptools import Extension, setup, find_packages\nImportError: No module named setuptools\nError building / installing Pillow\n\nreal    0m0.069s\nuser    0m0.038s\nsys     0m0.028s\n************************************************************************\nError installing package pillow-2.2.2\n************************************************************************\n```\n",
    "created_at": "2013-12-24T12:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196930",
    "user": "@vbraun"
}
```

Ok, seems to download now. But build fails on a bunch of older machines (bsd, eno, cicero). Missing dependency?

```
Found local metadata for pillow-2.2.2
Attempting to download package pillow-2.2.2
>>> Trying to download http://www.sagemath.org/packages/upstream//pillow/Pillow-2.2.2.tar.gz
[............................................................]
Checksum: 053337a612dd16ec6f1f6fc544374ca5fe65ae2c vs 053337a612dd16ec6f1f6fc544374ca5fe65ae2c
pillow-2.2.2
====================================================
Setting up build directory for pillow-2.2.2
Finished set up
****************************************************
Host system:
Darwin bsd.local 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:32:41 PDT 2011; root:xnu-1504.15.3~1/RELEASE_X86_64 x86_64
****************************************************
C compiler: gcc
C compiler version:
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/Users/buildbot/build/sage/bsd-1/sage_git/build/local/libexec/gcc/x86_64-apple-darwin10.8.0/4.7.3/lto-wrapper
Target: x86_64-apple-darwin10.8.0
Configured with: ../src/configure --prefix=/Users/buildbot/build/sage/bsd-1/sage_git/build/local --with-local-prefix=/Users/buildbot/build/sage/bsd-1/sage_git/build/local --with-gmp=/Users/buildbot/build/sage/bsd-1/sage_git/build/local --with-mpfr=/Users/buildbot/build/sage/bsd-1/sage_git/build/local --with-mpc=/Users/buildbot/build/sage/bsd-1/sage_git/build/local --with-system-zlib --disable-multilib --disable-nls  
Thread model: posix
gcc version 4.7.3 (GCC) 
****************************************************
patching file setup.py
Traceback (most recent call last):
  File "setup.py", line 19, in <module>
    from setuptools import Extension, setup, find_packages
ImportError: No module named setuptools
Error building / installing Pillow

real    0m0.069s
user    0m0.038s
sys     0m0.028s
************************************************************************
Error installing package pillow-2.2.2
************************************************************************
```




---

archive/issue_comments_196931.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2013-12-24T12:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196931",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_196932.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2013-12-24T12:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196932",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_196933.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-12-24T20:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15302",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15302#issuecomment-196933",
    "user": "@vbraun"
}
```

Resolution: fixed
