# Issue 11311: enable abs_integrate package from maxima

Issue created by migration from Trac.

Original creator: kcrisman

Original creation time: 2011-06-14 18:14:23

Assignee: burcin

CC:  burcin jason

This is the followup to #8624, as suggested in #10434.

We want to do more integrals!  There are lots at the patch at #8624 which it would be great to add.




---

Comment by kcrisman created at 2011-07-29 18:14:15

This would fix #11594.


---

Comment by kcrisman created at 2011-08-21 04:09:32

See [this sage-support thread](http://groups.google.com/group/sage-support/browse_thread/thread/e641001f8b8d1129) for another example.


---

Comment by kcrisman created at 2011-11-28 17:58:11

See [this sage-devel discussion](http://groups.google.com/group/sage-devel/browse_thread/thread/534d936ed8bb1060) for someone working on this!  

Also, see #11966 for a newer spkg to base upon.


---

Comment by mjo created at 2011-11-29 03:26:16

Here's my shot at this. There's one regression (a Maxima bug) that's fixed by Maxima 5.24.0, thus the dependency.


---

Comment by mjo created at 2012-01-27 03:54:44

Changing status from new to needs_review.


---

Comment by kcrisman created at 2012-01-28 02:21:54

Ok, this looks good, and is the proper way to deal with this.   All tests pass.  

Should we add Jason as an author due to his work at #8624?   Up to him, probably.


---

Comment by kcrisman created at 2012-01-28 02:23:50

Changing status from needs_review to needs_work.


---

Comment by kcrisman created at 2012-01-28 02:23:50

Scratch that - Michael, can you update and give a proper commit message etc.?  Also, the documentation is incorrectly formatted with double colons etc. - including the zXXX comment, which should have the double colon for EXAMPLES made single and then have a double colon after "subject to change".


---

Comment by mjo created at 2012-01-28 03:34:42

Updated patch addressing reviewer comments.


---

Attachment

That should be a little bit better.

Jason should get author credit too. I unfortunately didn't realize there was a patch at #8624, since it's closed: fixed, until after I had created my patch. Once I saw his, I went back and added some of his doctests to mine.

If he _doesn't_ get author credit, then it looks like I just stole everything =)


---

Comment by mjo created at 2012-01-28 03:40:31

Changing status from needs_work to needs_review.


---

Comment by kcrisman created at 2012-01-28 04:01:30

In retrospect, I realize that this file (`maxima_lib`) isn't even in the reference manual, and it might be nice to have some of these examples in more places (note that `x.integrate?` is horrible, though it points to a better place).  Anyway, this is all fine now.


---

Comment by kcrisman created at 2012-01-28 04:01:30

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-02-06 21:25:07

Resolution: fixed


---

Comment by dimpase created at 2012-12-17 06:30:32

abs_integrate can't do easy things like integrate(abs(cos(x)),x) right.

```
(%i8) integrate(abs(cos(x)),x);

log: encountered log(0).
log: encountered log(0).
log: encountered log(0).
log: encountered log(0).
log: encountered log(0).
log: encountered log(0).
log: encountered log(0).
log: encountered log(0).
log: encountered log(0).
log: encountered log(0).
log: encountered log(0).
log: encountered log(0).
log: encountered log(0).
log: encountered log(0).
log: encountered log(0).
log: encountered log(0).
log: encountered log(0).
log: encountered log(0).
(%o8) 2*((1/2-sin(x)/((cos(x)+1)*(sin(x)^2/(cos(x)+1)^2+1)))
        *signum(sin(x)/(cos(x)+1)-1)
        +1)*signum(sin(x)/(cos(x)+1)+1)
```

and the resulting expression is wrong, as it is 1 at 0, and not 0. As a result, we get `integrate(abs(cos(x)),x,0,pi)==-1`.
Needless to say, same happens in Sage:

```
sage: integrate(abs(cos(x)),(x,0,pi))
-1
```

This is with maxima 5.26, as well as with 5.29, see #13364.


---

Comment by rws created at 2015-03-07 13:59:50

Please don't add to this closed ticket. The current ticket about `abs_integrate` is #12731.
