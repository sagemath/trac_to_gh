# Issue 34256: TrivialFamily.map

Issue created by migration from https://trac.sagemath.org/ticket/34493

Original creator: mkoeppe

Original creation time: 2022-09-05 03:14:05

CC:  tscrim

calling the `map` method of a `TrivialFamily` should give a `TrivialFamily` again.



---

Comment by mkoeppe created at 2022-09-05 03:18:26

New commits:


---

Comment by mkoeppe created at 2022-09-05 03:18:26

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-09-09 02:13:15

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2022-09-09 02:14:21

Some repr changes cause doctest failures

```
sage -t --random-seed=132492493708920017793326064502063977887 sage/categories/additive_magmas.py  # 1 doctest failed
sage -t --random-seed=132492493708920017793326064502063977887 sage/categories/additive_semigroups.py  # 1 doctest failed
sage -t --random-seed=132492493708920017793326064502063977887 sage/categories/monoids.py  # 3 doctests failed
sage -t --random-seed=132492493708920017793326064502063977887 sage/categories/semigroups.py  # 1 doctest failed
```



---

Comment by git created at 2022-09-09 02:38:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-09-09 02:39:23

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2022-09-09 06:07:58

Two little things:

```diff
-        Returns the family `( f(\mathtt{self}[i]) )_{i \in I}`, where
-        `I` is the index set of self.
+        Return the family `( f(\mathtt{self}[i]) )_{i \in I}`, where
+        `I` is the index set of ``self``.
 
         The result is again a :class:`TrivialFamily`.
 
         EXAMPLES::
 
             sage: from sage.sets.family import TrivialFamily
             sage: f = TrivialFamily(['a', 'b', 'd'])
             sage: g = f.map(lambda x: x + '1'); g
             Family ('a1', 'b1', 'd1')
         """
-        return Family(tuple(f(x) for x in self._enumeration), name=name)
+        return Family(tuple([f(x) for x in self._enumeration]), name=name)
```

(Don't ask me why the `tuple([x in foo])` is faster than `tuple(x in foo)`, but it is.)


---

Comment by git created at 2022-09-09 14:43:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2022-09-09 23:02:27

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2022-09-09 23:02:27

Thank you. LGTM.


---

Comment by mkoeppe created at 2022-09-09 23:32:14

Thanks!


---

Comment by vbraun created at 2022-09-27 22:27:24

Resolution: fixed
