# Issue 15577: cunningham_table-1.0 fails to install, should be upgraded too

archive/issues_015577.json:
```json
{
    "body": "CC:  @roed314\n\nKeywords: cunningham, factorization\n\nThe old package still uses $SAGE_DATA and so it fails to install after sage-6.0. Moreover, it should be upgraded as the newest version is http://sage.math.washington.edu/home/roed/cunningham_tables-2.2.spkg\n\nThat version however still uses $SAGE_DATA but the upgrader could just fix that by changing usage of it to $SAGE_SHARE.\n\nMaintainer is cc'ed.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15814\n\n",
    "created_at": "2014-02-13T09:36:46Z",
    "labels": [
        "packages: optional",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "cunningham_table-1.0 fails to install, should be upgraded too",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15577",
    "user": "@rwst"
}
```
CC:  @roed314

Keywords: cunningham, factorization

The old package still uses $SAGE_DATA and so it fails to install after sage-6.0. Moreover, it should be upgraded as the newest version is http://sage.math.washington.edu/home/roed/cunningham_tables-2.2.spkg

That version however still uses $SAGE_DATA but the upgrader could just fix that by changing usage of it to $SAGE_SHARE.

Maintainer is cc'ed.

Issue created by migration from https://trac.sagemath.org/ticket/15814





---

archive/issue_comments_201374.json:
```json
{
    "body": "Changing component from packages: optional to packages: standard.",
    "created_at": "2014-04-04T17:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15577#issuecomment-201374",
    "user": "@rwst"
}
```

Changing component from packages: optional to packages: standard.



---

archive/issue_comments_201375.json:
```json
{
    "body": "So, that's all to make the linked SPKG work:\n\n```\ndiff -u --recursive cunningham_tables-2.2-old/spkg-install cunningham_tables-2.2/spkg-install\n--- cunningham_tables-2.2-old/spkg-install      2009-10-17 22:46:12.000000000 +0200\n+++ cunningham_tables-2.2/spkg-install  2014-02-21 09:42:48.599254970 +0100\n@@ -1,4 +1,4 @@\n #!/bin/sh\n \n-rm -rf $SAGE_DATA/cunningham_tables\n-cp -r src/cunningham_tables $SAGE_DATA/cunningham_tables\n+rm -rf $SAGE_SHARE/cunningham_tables\n+cp -r src/cunningham_tables $SAGE_SHARE/cunningham_tables\n```\n\nNow to figure out what the actual patch should look like.",
    "created_at": "2014-04-04T17:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15577#issuecomment-201375",
    "user": "@rwst"
}
```

So, that's all to make the linked SPKG work:

```
diff -u --recursive cunningham_tables-2.2-old/spkg-install cunningham_tables-2.2/spkg-install
--- cunningham_tables-2.2-old/spkg-install      2009-10-17 22:46:12.000000000 +0200
+++ cunningham_tables-2.2/spkg-install  2014-02-21 09:42:48.599254970 +0100
@@ -1,4 +1,4 @@
 #!/bin/sh
 
-rm -rf $SAGE_DATA/cunningham_tables
-cp -r src/cunningham_tables $SAGE_DATA/cunningham_tables
+rm -rf $SAGE_SHARE/cunningham_tables
+cp -r src/cunningham_tables $SAGE_SHARE/cunningham_tables
```

Now to figure out what the actual patch should look like.



---

archive/issue_comments_201376.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-05T07:08:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15577#issuecomment-201376",
    "user": "@rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_201377.json:
```json
{
    "body": "The `sage-spkg` script simply grabs any `spkg-install` in the tarball without looking into `build/pkgs/cunningham_tables` so, unless this has been enhanced, the only way to present this patched SPKG is by giving the patch above.\n\nSo, to include the new package, download the SPKG from the link above, extract the tarball, and patch the `spkg-install` using the snippet above. The Sage tarball patch mechanism is not usable here, AFAIK, and neither is git.",
    "created_at": "2014-04-05T07:08:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15577#issuecomment-201377",
    "user": "@rwst"
}
```

The `sage-spkg` script simply grabs any `spkg-install` in the tarball without looking into `build/pkgs/cunningham_tables` so, unless this has been enhanced, the only way to present this patched SPKG is by giving the patch above.

So, to include the new package, download the SPKG from the link above, extract the tarball, and patch the `spkg-install` using the snippet above. The Sage tarball patch mechanism is not usable here, AFAIK, and neither is git.



---

archive/issue_comments_201378.json:
```json
{
    "body": "Duplicate of #15813.",
    "created_at": "2015-01-09T13:30:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15577#issuecomment-201378",
    "user": "@a-andre"
}
```

Duplicate of #15813.



---

archive/issue_comments_201379.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-01-09T13:51:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15577#issuecomment-201379",
    "user": "@rwst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_201380.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2015-01-13T01:22:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15577",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15577#issuecomment-201380",
    "user": "@vbraun"
}
```

Resolution: duplicate
