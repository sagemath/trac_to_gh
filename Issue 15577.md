# Issue 15577: cunningham_table-1.0 fails to install, should be upgraded too

Issue created by migration from Trac.

Original creator: rws

Original creation time: 2014-02-13 09:36:46

CC:  roed

Keywords: cunningham, factorization

The old package still uses $SAGE_DATA and so it fails to install after sage-6.0. Moreover, it should be upgraded as the newest version is http://sage.math.washington.edu/home/roed/cunningham_tables-2.2.spkg

That version however still uses $SAGE_DATA but the upgrader could just fix that by changing usage of it to $SAGE_SHARE.

Maintainer is cc'ed.


---

Comment by rws created at 2014-04-04 17:14:21

Changing component from packages: optional to packages: standard.


---

Comment by rws created at 2014-04-04 17:14:21

So, that's all to make the linked SPKG work:

```
diff -u --recursive cunningham_tables-2.2-old/spkg-install cunningham_tables-2.2/spkg-install
--- cunningham_tables-2.2-old/spkg-install      2009-10-17 22:46:12.000000000 +0200
+++ cunningham_tables-2.2/spkg-install  2014-02-21 09:42:48.599254970 +0100
`@``@` -1,4 +1,4 `@``@`
 #!/bin/sh
 
-rm -rf $SAGE_DATA/cunningham_tables
-cp -r src/cunningham_tables $SAGE_DATA/cunningham_tables
+rm -rf $SAGE_SHARE/cunningham_tables
+cp -r src/cunningham_tables $SAGE_SHARE/cunningham_tables
```

Now to figure out what the actual patch should look like.


---

Comment by rws created at 2014-04-05 07:08:18

Changing status from new to needs_review.


---

Comment by rws created at 2014-04-05 07:08:18

The `sage-spkg` script simply grabs any `spkg-install` in the tarball without looking into `build/pkgs/cunningham_tables` so, unless this has been enhanced, the only way to present this patched SPKG is by giving the patch above.

So, to include the new package, download the SPKG from the link above, extract the tarball, and patch the `spkg-install` using the snippet above. The Sage tarball patch mechanism is not usable here, AFAIK, and neither is git.


---

Comment by aapitzsch created at 2015-01-09 13:30:11

Duplicate of #15813.


---

Comment by rws created at 2015-01-09 13:51:54

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-01-13 01:22:03

Resolution: duplicate
