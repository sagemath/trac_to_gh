# Issue 14954: Add tests in the category of euclidean domains

Issue created by migration from Trac.

Original creator: saraedum

Original creation time: 2013-09-13 12:22:14

Currently, there are no generic tests in the category of euclidean domain which test the correctness of the quotient with remainder.


---

Comment by saraedum created at 2013-09-13 13:51:30

Changing status from new to needs_review.


---

Comment by git created at 2013-09-13 15:57:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pbruin created at 2014-04-26 13:52:53

resolved merge conflicts


---

Comment by pbruin created at 2014-04-26 14:12:38

After resolving the conflicts there are various doctest failures:

```
sage -t --long src/sage/rings/padics/padic_base_leaves.py  # 3 doctests failed
sage -t --long src/sage/rings/polynomial/polynomial_ring.py  # 1 doctest failed
sage -t --long src/doc/en/thematic_tutorials/coercion_and_categories.rst  # 3 doctests failed
sage -t --long src/doc/en/thematic_tutorials/tutorial-objects-and-classes.rst  # 2 doctests failed
```

Some of these are due to the testsuite running `euclidean_degree()` on random elements; these may be zero, which causes

```
NotImplementedError: euclidean degree not defined for the zero element
```



---

Comment by pbruin created at 2014-04-26 14:12:38

Changing status from needs_review to needs_work.


---

Comment by saraedum created at 2014-06-26 05:50:35

Changing status from needs_work to needs_review.


---

Comment by saraedum created at 2014-06-26 05:50:35

Changing keywords from "" to "sd59".


---

Comment by git created at 2014-06-29 03:07:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-06-30 04:41:47

Hey Julian, I made some review tweaks. In particular, I made the test stronger which checks the zero product property (which technically can be moved higher up into the integral domains category). However this caused `padic_base_leaves.py` to fail:

```
sage -t ../padics/padic_base_leaves.py
**********************************************************************
File "../padics/padic_base_leaves.py", line 323, in sage.rings.padics.padic_base_leaves.pAdicRingCappedAbsolute.__init__
Failed example:
    TestSuite(R).run(elements = [R.random_element() for i in range(3^6)])
Expected nothing
Got:
    Failure in _test_euclidean_degree:
    Traceback (most recent call last):
      File "/home/travis/sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 282, in run
        test_method(tester = tester)
      File "/home/travis/sage/local/lib/python2.7/site-packages/sage/categories/euclidean_domains.py", line 93, in _test_euclidean_degree
        tester.assertFalse(p.is_zero())
      File "/home/travis/sage/local/lib/python/unittest/case.py", line 416, in assertFalse
        raise self.failureException(msg)
    AssertionError: True is not false
    ------------------------------------------------------------
    The following tests failed: _test_euclidean_degree
**********************************************************************
File "../padics/padic_base_leaves.py", line 414, in sage.rings.padics.padic_base_leaves.pAdicRingFixedMod.__init__
Failed example:
    TestSuite(R).run(elements = [R.random_element() for i in range(3^6)])
Expected nothing
Got:
    Failure in _test_euclidean_degree:
    Traceback (most recent call last):
      File "/home/travis/sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 282, in run
        test_method(tester = tester)
      File "/home/travis/sage/local/lib/python2.7/site-packages/sage/categories/euclidean_domains.py", line 93, in _test_euclidean_degree
        tester.assertFalse(p.is_zero())
      File "/home/travis/sage/local/lib/python/unittest/case.py", line 416, in assertFalse
        raise self.failureException(msg)
    AssertionError: True is not false
    ------------------------------------------------------------
    The following tests failed: _test_euclidean_degree
**********************************************************************
2 items had failures:
   1 of  11 in sage.rings.padics.padic_base_leaves.pAdicRingCappedAbsolute.__init__
   1 of  11 in sage.rings.padics.padic_base_leaves.pAdicRingFixedMod.__init__
```

However IDK if this is a problem with precision with the padics or...?
----
New commits:


---

Comment by saraedum created at 2014-06-30 12:00:22

Changing status from needs_review to needs_work.


---

Comment by saraedum created at 2014-06-30 12:00:22

Like many inexact rings, the p-adics have zerodivisors. Not in theory of course, but in practice (i.e. the p-adics are an integral domain but typically implemented with finite precision which leads to zero-divisors). That's why I put the continue there if a or a*b are zero. I had put a remark in the commit message but not in the code (which was probably not very smart).

The check you put there is valid for exact rings however. As you say it should probably not be in the category of euclidean domains. Would you mind moving this to a different ticket?


---

Comment by git created at 2014-07-01 03:18:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-07-01 03:22:59

Okay, I'v reverted the change and created #16596 for the zero divisors tests (I'll post a branch there shortly).


---

Comment by tscrim created at 2014-07-01 03:23:27

Changing status from needs_work to needs_review.


---

Comment by git created at 2014-07-30 13:46:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-08-01 06:00:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-08-01 06:01:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2014-08-01 14:42:59

Thanks for your review patches. What is the status of this ticket now? Do you want a review of your latest changes?


---

Comment by saraedum created at 2014-08-01 14:42:59

Changing status from needs_review to needs_info.


---

Comment by tscrim created at 2014-08-01 16:23:57

Yes please (and Frédéric's too). If you're happy with the changes, then I believe it's a positive review. (Also I'd appreciate a review of #16596 too.)


---

Comment by tscrim created at 2014-08-01 16:23:57

Changing status from needs_info to needs_review.


---

Comment by saraedum created at 2014-08-04 07:29:12

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-08-04 16:03:16

Resolution: fixed
