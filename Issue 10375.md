# Issue 10375: Singular's spkg-install error messages don't start with "Error"

Issue created by migration from https://trac.sagemath.org/ticket/10428

Original creator: leif

Original creation time: 2010-12-04 16:42:48

Assignee: tbd

CC:  malb drkirkby

Keywords: searching warning failed failure grep

Especially for parallel builds, it's useful if all error messages and warnings start with a similar phrase, such that one can easily `grep` (search) for them.

In the `spkg-install` of Singular 3-1-1-4.p3 [sic], we currently have:

```sh
$ grep -B2 "exit 1" spkg-install # -B is not POSIX, use GNU grep
   echo "SAGE_LOCAL undefined ... exiting";
   echo "Maybe run 'sage -sh'?"
   exit 1
--
    if [ $? -ne 0 ]; then
        echo "Unable to configure Singular."
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "Unable to build Singular."
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "Unable to change to directory $SRC"
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "Unable to install Singular."
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "The Singular binary was not installed in $SAGE_ROOT/local/bin/ as it should have been."
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "Unable to change to directory $SRC"
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "Unable to build Singular."
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "Unable to install libsingular."
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "Error configuring the standalone factory."
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "Error building the standalone factory."
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "Error installing the standalone factory."
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "Error changing to directory $SRC/libfac"
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "Error configuring libfac."
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "Error building libfac."
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "Error installing libfac."
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "Error installing documentation while copying singular.hlp"
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "Error installing documentation while copying singular.idx"
        exit 1
--
    if [ $? -ne 0 ]; then
        echo "Error building Singular at stage '$i'."
        exit 1
```


So the messages are indeed inconsistent there as well, and I think unless someone knows that, it's rather unlikely one will search for `"^Unable "`; more common is `"^[Ee]rror[ :]"` (perhaps case-insensitive, i.e. with `grep -i`) and `"^[Ff]ailed "`, though I prefer the former, i.e. all error messages starting with `"Error"`, which also many upstream packages do.



---

Comment by drkirkby created at 2010-12-05 11:41:12

If you create a patch it should be easy to review. IMHO, all error messages should be redirected to stderr and not stdout. But that would require even more changes.

dave


---

Comment by jdemeyer created at 2017-09-22 13:54:04

Resolution: invalid


---

Comment by jdemeyer created at 2017-09-22 13:54:04

Obsolete
