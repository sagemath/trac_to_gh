# Issue 29792: Implement another nonexistence check for symmetric BIBDs

archive/issues_029792.json:
```json
{
    "body": "CC:  @dimpase @JohnCremona\n\nKeywords: bibd\n\nImplemented a nonexistence check based on the Bruck\u2013Ryser\u2013Chowla theorem.\nBefore generating a BIBD for some given parameters, we check if the theorem holds for the parameters. If it does not, then no symmetric BIBD exists for such parameters\n\nSee https://en.wikipedia.org/wiki/Bruck\u2013Ryser\u2013Chowla_theorem\n\nIssue created by migration from https://trac.sagemath.org/ticket/30029\n\n",
    "created_at": "2020-06-30T16:35:07Z",
    "labels": [
        "component: combinatorial designs"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Implement another nonexistence check for symmetric BIBDs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29792",
    "user": "https://github.com/Ivo-Maffei"
}
```
CC:  @dimpase @JohnCremona

Keywords: bibd

Implemented a nonexistence check based on the Bruck–Ryser–Chowla theorem.
Before generating a BIBD for some given parameters, we check if the theorem holds for the parameters. If it does not, then no symmetric BIBD exists for such parameters

See https://en.wikipedia.org/wiki/Bruck–Ryser–Chowla_theorem

Issue created by migration from https://trac.sagemath.org/ticket/30029





---

archive/issue_comments_422685.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-01T14:43:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29792#issuecomment-422685",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_422686.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-07-01T14:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29792#issuecomment-422686",
    "user": "https://github.com/Ivo-Maffei"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_422687.json:
```json
{
    "body": "please mention BRC thm in the relevant docstring, with a link to Wikipedia article.\n\nalso, I think a version of BRC for lambda=1 is already used somewhere in designs code, so it would be good to unify these.",
    "created_at": "2020-07-03T08:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29792#issuecomment-422687",
    "user": "https://github.com/dimpase"
}
```

please mention BRC thm in the relevant docstring, with a link to Wikipedia article.

also, I think a version of BRC for lambda=1 is already used somewhere in designs code, so it would be good to unify these.



---

archive/issue_comments_422688.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-03T12:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29792#issuecomment-422688",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_422689.json:
```json
{
    "body": "I extracted the code in a stand-alone function. I hope this is what you meant.\nThe issue is that the check is quite slow. Moreover, for projective planes it could be simplified quite a lot (see old code).\nSo now a few docstring fail because of timed out",
    "created_at": "2020-07-03T13:01:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29792#issuecomment-422689",
    "user": "https://github.com/Ivo-Maffei"
}
```

I extracted the code in a stand-alone function. I hope this is what you meant.
The issue is that the check is quite slow. Moreover, for projective planes it could be simplified quite a lot (see old code).
So now a few docstring fail because of timed out



---

archive/issue_comments_422690.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-03T17:11:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29792#issuecomment-422690",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_422691.json:
```json
{
    "body": "This is a so-called Legendre equation, see\nhttps://www.ams.org/journals/mcom/2003-72-243/S0025-5718-02-01480-1/S0025-5718-02-01480-1.pdf\n(note that it talks about rational solutions, but every solution in our case, \nx<sup>2</sup>+ay<sup>2</sup>+bz<sup>2</sup>=0 gives rise to an integer one, as we can clear denominators).\n\nI hope John (one of the authors of this paper) can tell us  how testing that there is no rational solution can be done in Sage quickly (perhaps it would need some programming though).",
    "created_at": "2020-07-03T23:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29792#issuecomment-422691",
    "user": "https://github.com/dimpase"
}
```

This is a so-called Legendre equation, see
https://www.ams.org/journals/mcom/2003-72-243/S0025-5718-02-01480-1/S0025-5718-02-01480-1.pdf
(note that it talks about rational solutions, but every solution in our case, 
x<sup>2</sup>+ay<sup>2</sup>+bz<sup>2</sup>=0 gives rise to an integer one, as we can clear denominators).

I hope John (one of the authors of this paper) can tell us  how testing that there is no rational solution can be done in Sage quickly (perhaps it would need some programming though).



---

archive/issue_comments_422692.json:
```json
{
    "body": "actually, this is implemented in Sage:\n\n```\nsage: C.<a,b,c> = Conic(QQ, [1, 1, -2]) #  a^2+b^2-2c^2=0\nsage: C\nProjective Conic Curve over Rational Field defined by a^2 + b^2 - 2*c^2\nsage: C.has_rational_point(point=True)\n(True, (-1 : -1 : 1))\nsage: C.<a,b,c> = Conic(QQ, [1, 1, -3])\nsage: C.has_rational_point(point=True)\n(False, 3)\nsage: v,k,l=(211,15,1)\nsage: C.<x,y,z>=Conic(QQ,[1, l-k, (-1 if v%4 == 1 else 1)*l]); C\nProjective Conic Curve over Rational Field defined by x^2 - 14*y^2 + z^2\nsage: C.has_rational_point(point=True) # no projective plane of order 14\n(False, 7)\n```\n\n\nhere is a more fun example:\n\n```\nsage: n=15; v = 1 + (n + 2)*(n + 1)/2; k=n+2; l=2; (v,k,l) # biplane of order 15?\n(137, 17, 2)\nsage: C.<x,y,z>=Conic(QQ,[1, l-k, (-1 if v%4 == 1 else 1)*l]); C\nProjective Conic Curve over Rational Field defined by x^2 - 15*y^2 - 2*z^2\nsage: C.has_rational_point(point=True) # no\n(False, 3)\n```\n",
    "created_at": "2020-07-04T08:37:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29792#issuecomment-422692",
    "user": "https://github.com/dimpase"
}
```

actually, this is implemented in Sage:

```
sage: C.<a,b,c> = Conic(QQ, [1, 1, -2]) #  a^2+b^2-2c^2=0
sage: C
Projective Conic Curve over Rational Field defined by a^2 + b^2 - 2*c^2
sage: C.has_rational_point(point=True)
(True, (-1 : -1 : 1))
sage: C.<a,b,c> = Conic(QQ, [1, 1, -3])
sage: C.has_rational_point(point=True)
(False, 3)
sage: v,k,l=(211,15,1)
sage: C.<x,y,z>=Conic(QQ,[1, l-k, (-1 if v%4 == 1 else 1)*l]); C
Projective Conic Curve over Rational Field defined by x^2 - 14*y^2 + z^2
sage: C.has_rational_point(point=True) # no projective plane of order 14
(False, 7)
```


here is a more fun example:

```
sage: n=15; v = 1 + (n + 2)*(n + 1)/2; k=n+2; l=2; (v,k,l) # biplane of order 15?
(137, 17, 2)
sage: C.<x,y,z>=Conic(QQ,[1, l-k, (-1 if v%4 == 1 else 1)*l]); C
Projective Conic Curve over Rational Field defined by x^2 - 15*y^2 - 2*z^2
sage: C.has_rational_point(point=True) # no
(False, 3)
```




---

archive/issue_comments_422693.json:
```json
{
    "body": "As Dima noted, Sage can test conics for solibility and also solve them.  The default is to call appropriate pari functions.  It would be possible to wrap the conic-solving functions in eclib which implement what's in my paper, but that seem unnecessary for this application.",
    "created_at": "2020-07-04T10:12:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29792#issuecomment-422693",
    "user": "https://github.com/JohnCremona"
}
```

As Dima noted, Sage can test conics for solibility and also solve them.  The default is to call appropriate pari functions.  It would be possible to wrap the conic-solving functions in eclib which implement what's in my paper, but that seem unnecessary for this application.



---

archive/issue_comments_422694.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-04T20:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29792#issuecomment-422694",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_422695.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-05T09:51:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29792#issuecomment-422695",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_422696.json:
```json
{
    "body": "OK, good to go.",
    "created_at": "2020-07-05T09:51:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29792#issuecomment-422696",
    "user": "https://github.com/dimpase"
}
```

OK, good to go.



---

archive/issue_events_027466.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-10T19:33:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29792",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29792#event-27466"
}
```



---

archive/issue_comments_422697.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-07-10T19:33:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29792",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29792#issuecomment-422697",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
