# Issue 28956: Optional package 4ti2 test failures on Cygwin

archive/issues_028956.json:
```json
{
    "body": "Keywords: 4ti2 cygwin windows\n\nI get the following test failure on Cygwin when the 4ti2 optional package install:\n\n\n```\nsage -t --long --warn-long 151.0 /opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py\n**********************************************************************\nFile \"/opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py\", line 314, in sage.interfaces.four_ti_2.FourTi2.zsolve\nFailed example:\n    four_ti_2.zsolve(A, rel, rhs, sign) # optional - 4ti2\nExpected:\n    [\n             [ 1 -1  0]\n             [ 0 -1  0]\n    [0 0 1]  [ 0 -3  2]\n    [1 1 0]  [ 1 -2  1]\n    [0 1 0], [ 0 -2  1], []\n    ]\nGot:\n    [[], [], []]\n**********************************************************************\nFile \"/opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py\", line 322, in sage.interfaces.four_ti_2.FourTi2.zsolve\nFailed example:\n    four_ti_2.zsolve(lat=[[1,2,3],[1,1,1]]) # optional - 4ti2\nExpected:\n    [\n                 [1 2 3]\n    [0 0 0], [], [1 1 1]\n    ]\nGot:\n    [[], [], []]\n**********************************************************************\nFile \"/opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py\", line 377, in sage.interfaces.four_ti_2.FourTi2.hilbert\nFailed example:\n    four_ti_2.hilbert(four_ti_2._magic3x3()) # optional - 4ti2\nExpected:\n    [2 0 1 0 1 2 1 2 0]\n    [1 0 2 2 1 0 0 2 1]\n    [0 2 1 2 1 0 1 0 2]\n    [1 2 0 0 1 2 2 0 1]\n    [1 1 1 1 1 1 1 1 1]\nGot:\n    []\n**********************************************************************\nFile \"/opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py\", line 383, in sage.interfaces.four_ti_2.FourTi2.hilbert\nFailed example:\n    four_ti_2.hilbert(lat=[[1,2,3],[1,1,1]])   # optional - 4ti2\nExpected:\n    [2 1 0]\n    [0 1 2]\n    [1 1 1]\nGot:\n    []\n**********************************************************************\nFile \"/opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py\", line 400, in sage.interfaces.four_ti_2.FourTi2.graver\nFailed example:\n    four_ti_2.graver([1,2,3]) # optional - 4ti2\nExpected:\n    [ 2 -1  0]\n    [ 3  0 -1]\n    [ 1  1 -1]\n    [ 1 -2  1]\n    [ 0  3 -2]\nGot:\n    []\n**********************************************************************\nFile \"/opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py\", line 406, in sage.interfaces.four_ti_2.FourTi2.graver\nFailed example:\n    four_ti_2.graver(lat=[[1,2,3],[1,1,1]])  # optional - 4ti2\nExpected:\n    [ 1  0 -1]\n    [ 0  1  2]\n    [ 1  1  1]\n    [ 2  1  0]\nGot:\n    []\n**********************************************************************\nFile \"/opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py\", line 478, in sage.interfaces.four_ti_2.FourTi2.groebner\nFailed example:\n    four_ti_2.groebner(A) # optional - 4ti2\nExpected:\n    [-5  0  2]\n    [-5  3  0]\nGot:\n    /opt/sagemath-9.0/local/bin/groebner: line 64: 37007 Segmentation fault      (core dumped) \"$DIR\"/$EXECUTABLE $FUNCTION $@\n    []\n**********************************************************************\nFile \"/opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py\", line 481, in sage.interfaces.four_ti_2.FourTi2.groebner\nFailed example:\n    four_ti_2.groebner(lat=[[1,2,3],[1,1,1]]) # optional - 4ti2\nExpected:\n    [-1  0  1]\n    [ 2  1  0]\nGot:\n    /opt/sagemath-9.0/local/bin/groebner: line 64: 37121 Segmentation fault      (core dumped) \"$DIR\"/$EXECUTABLE $FUNCTION $@\n    []\n**********************************************************************\n4 items had failures:\n   2 of   4 in sage.interfaces.four_ti_2.FourTi2.graver\n   2 of   5 in sage.interfaces.four_ti_2.FourTi2.groebner\n   2 of   4 in sage.interfaces.four_ti_2.FourTi2.hilbert\n   2 of   8 in sage.interfaces.four_ti_2.FourTi2.zsolve\n    [54 tests, 8 failures, 35.30 s]\n```\n\n\nIt looks like in some, possibly all cases it's segfaulting.\n\nIssue created by migration from https://trac.sagemath.org/ticket/29193\n\n",
    "created_at": "2020-02-13T18:12:12Z",
    "labels": [
        "component: packages: standard",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-pending",
    "title": "Optional package 4ti2 test failures on Cygwin",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28956",
    "user": "https://github.com/embray"
}
```
Keywords: 4ti2 cygwin windows

I get the following test failure on Cygwin when the 4ti2 optional package install:


```
sage -t --long --warn-long 151.0 /opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py
**********************************************************************
File "/opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py", line 314, in sage.interfaces.four_ti_2.FourTi2.zsolve
Failed example:
    four_ti_2.zsolve(A, rel, rhs, sign) # optional - 4ti2
Expected:
    [
             [ 1 -1  0]
             [ 0 -1  0]
    [0 0 1]  [ 0 -3  2]
    [1 1 0]  [ 1 -2  1]
    [0 1 0], [ 0 -2  1], []
    ]
Got:
    [[], [], []]
**********************************************************************
File "/opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py", line 322, in sage.interfaces.four_ti_2.FourTi2.zsolve
Failed example:
    four_ti_2.zsolve(lat=[[1,2,3],[1,1,1]]) # optional - 4ti2
Expected:
    [
                 [1 2 3]
    [0 0 0], [], [1 1 1]
    ]
Got:
    [[], [], []]
**********************************************************************
File "/opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py", line 377, in sage.interfaces.four_ti_2.FourTi2.hilbert
Failed example:
    four_ti_2.hilbert(four_ti_2._magic3x3()) # optional - 4ti2
Expected:
    [2 0 1 0 1 2 1 2 0]
    [1 0 2 2 1 0 0 2 1]
    [0 2 1 2 1 0 1 0 2]
    [1 2 0 0 1 2 2 0 1]
    [1 1 1 1 1 1 1 1 1]
Got:
    []
**********************************************************************
File "/opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py", line 383, in sage.interfaces.four_ti_2.FourTi2.hilbert
Failed example:
    four_ti_2.hilbert(lat=[[1,2,3],[1,1,1]])   # optional - 4ti2
Expected:
    [2 1 0]
    [0 1 2]
    [1 1 1]
Got:
    []
**********************************************************************
File "/opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py", line 400, in sage.interfaces.four_ti_2.FourTi2.graver
Failed example:
    four_ti_2.graver([1,2,3]) # optional - 4ti2
Expected:
    [ 2 -1  0]
    [ 3  0 -1]
    [ 1  1 -1]
    [ 1 -2  1]
    [ 0  3 -2]
Got:
    []
**********************************************************************
File "/opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py", line 406, in sage.interfaces.four_ti_2.FourTi2.graver
Failed example:
    four_ti_2.graver(lat=[[1,2,3],[1,1,1]])  # optional - 4ti2
Expected:
    [ 1  0 -1]
    [ 0  1  2]
    [ 1  1  1]
    [ 2  1  0]
Got:
    []
**********************************************************************
File "/opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py", line 478, in sage.interfaces.four_ti_2.FourTi2.groebner
Failed example:
    four_ti_2.groebner(A) # optional - 4ti2
Expected:
    [-5  0  2]
    [-5  3  0]
Got:
    /opt/sagemath-9.0/local/bin/groebner: line 64: 37007 Segmentation fault      (core dumped) "$DIR"/$EXECUTABLE $FUNCTION $@
    []
**********************************************************************
File "/opt/sagemath-9.0/src/sage/interfaces/four_ti_2.py", line 481, in sage.interfaces.four_ti_2.FourTi2.groebner
Failed example:
    four_ti_2.groebner(lat=[[1,2,3],[1,1,1]]) # optional - 4ti2
Expected:
    [-1  0  1]
    [ 2  1  0]
Got:
    /opt/sagemath-9.0/local/bin/groebner: line 64: 37121 Segmentation fault      (core dumped) "$DIR"/$EXECUTABLE $FUNCTION $@
    []
**********************************************************************
4 items had failures:
   2 of   4 in sage.interfaces.four_ti_2.FourTi2.graver
   2 of   5 in sage.interfaces.four_ti_2.FourTi2.groebner
   2 of   4 in sage.interfaces.four_ti_2.FourTi2.hilbert
   2 of   8 in sage.interfaces.four_ti_2.FourTi2.zsolve
    [54 tests, 8 failures, 35.30 s]
```


It looks like in some, possibly all cases it's segfaulting.

Issue created by migration from https://trac.sagemath.org/ticket/29193





---

archive/issue_comments_409431.json:
```json
{
    "body": "Upstream 4ti2 has no CI infrastructure for cygwin but would accept a pull request that adds it.",
    "created_at": "2020-02-17T01:08:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28956#issuecomment-409431",
    "user": "https://github.com/mkoeppe"
}
```

Upstream 4ti2 has no CI infrastructure for cygwin but would accept a pull request that adds it.



---

archive/issue_comments_409432.json:
```json
{
    "body": "Changing component from packages: standard to porting: Cygwin.",
    "created_at": "2020-05-04T20:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28956#issuecomment-409432",
    "user": "https://github.com/mkoeppe"
}
```

Changing component from packages: standard to porting: Cygwin.



---

archive/issue_comments_409433.json:
```json
{
    "body": "Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28956",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28956#issuecomment-409433",
    "user": "https://github.com/mkoeppe"
}
```

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.
