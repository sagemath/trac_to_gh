# Issue 23487: Allow random sampling for unit testing

Issue created by migration from https://trac.sagemath.org/ticket/23724

Original creator: roed

Original creation time: 2017-08-26 04:10:20

CC:  nthiery

#16244 removed random sampling, but there are times when it would be nice to have.  This ticket adds it back in, but optionally.


---

Comment by roed created at 2017-08-26 04:12:01

New commits:


---

Comment by roed created at 2017-08-26 04:12:01

Changing status from new to needs_review.


---

Comment by git created at 2017-08-28 20:09:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2017-08-29 03:24:13

What about also changing `some_tuples` for consistency?


---

Comment by roed created at 2017-08-29 04:29:32

Changing how?  Adding an optional keyword argument to use sampling instead?  Something like


```
def some_tuples(elements, repeat, bound, sampling=False):
    from itertools import islice, product
    from random import sample
    P = product(elements, repeat=repeat)
    if sampling:
        try:
            return random.sample(P, bound)
        except ValueError:
            return P
    else:
        return islice(product(elements, repeat=repeat), bound)
```



---

Comment by tscrim created at 2017-08-29 05:51:04

I was thinking it would have the same idiom as the `TestSuite` with a `max_samples=None` argument, but basically, yes.


---

Comment by git created at 2017-09-05 05:41:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2017-09-06 17:23:04

New commits:


---

Comment by saraedum created at 2017-09-06 17:23:04

Changing status from needs_review to positive_review.


---

Comment by saraedum created at 2017-09-06 17:25:36

Changing status from positive_review to needs_review.


---

Comment by saraedum created at 2017-09-06 17:25:36

I am confused about the patchbots errors. I first thought that was noise but it seems to be consistent for several patchbots.


---

Comment by saraedum created at 2017-09-06 17:26:08

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-09-11 13:47:18

Resolution: fixed
