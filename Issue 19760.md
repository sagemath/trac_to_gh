# Issue 19760: substitution in symbolic series: losing Order

Issue created by migration from Trac.

Original creator: dkrenn

Original creation time: 2016-02-01 12:00:48


```
sage: (x+1).sqrt().series(x,3)
1 + 1/2*x + (-1/8)*x^2 + Order(x^3)
sage: (x+1).sqrt().series(x,3).subs(x=1/x)
1/2/x - 1/8/x^2 + 1
```




---

Comment by rws created at 2016-02-05 09:11:23

The substitution is fine. To support other than power series would be a major enhancement.


---

Comment by rws created at 2016-02-05 09:11:23

Changing type from defect to enhancement.


---

Comment by dkrenn created at 2016-02-08 09:25:28

Replying to [comment:1 rws]:
> The substitution is fine. To support other than power series would be a major enhancement.

I'm not sure if I understand your comment. What I see (as someone having only little idea how power series are done in SR) is that in

```
sage: a = 1 + x/2 - x^2/8 + (x^3).Order()
sage: a
-1/8*x^2 + 1/2*x + Order(x^3) + 1
sage: a.subs(x=1/x)
1/2/x - 1/8/x^2 + Order(x^(-3)) + 1
```

substitution works (somehow at least), but in the example stated in the ticket not, the O-Term disappears.


---

Comment by rws created at 2016-02-09 14:14:19

So, until that enhancement is implemented, a second ticket is needed for consistency, which throws an error. But note that the user won't even encounter this inconsistency if she creates symbolic series the way the documentation suggests it:

```
sage: (1/(1-x)).series(x,2)
1 + 1*x + Order(x^2)
sage: s=_
sage: s.subs(x==sin(x))
sin(x) + 1
sage: s.subs(x==exp(x))
e^x + 1
sage: s.subs(x==1/x)
1/x + 1
sage: s.subs(x=1/x)
1/x + 1
```

