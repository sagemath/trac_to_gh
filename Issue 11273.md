# Issue 11273: symbolic integration fails on a very simple test case

archive/issues_011273.json:
```json
{
    "body": "Assignee: @burcin\n\nCC:  @kcrisman\n\nKeywords: integrate\n\nThe following happens\n\n```\nsage: var(\"x\")\nx\nsage: integrate(abs(x - 1) + abs(x + 1) - 2*abs(x), (x,-Infinity,Infinity))\n0\nsage: integrate(abs(x - 1) + abs(x + 1) - 2*abs(x),(x,-Infinity,10))\n2\n```\nThe second answer is the correct one, of course...\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/11445\n\n",
    "created_at": "2011-06-07T20:57:50Z",
    "labels": [
        "component: calculus",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "symbolic integration fails on a very simple test case",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11273",
    "user": "https://trac.sagemath.org/admin/accounts/users/pdehaye"
}
```
Assignee: @burcin

CC:  @kcrisman

Keywords: integrate

The following happens

```
sage: var("x")
x
sage: integrate(abs(x - 1) + abs(x + 1) - 2*abs(x), (x,-Infinity,Infinity))
0
sage: integrate(abs(x - 1) + abs(x + 1) - 2*abs(x),(x,-Infinity,10))
2
```
The second answer is the correct one, of course...



Issue created by migration from https://trac.sagemath.org/ticket/11445





---

archive/issue_comments_123971.json:
```json
{
    "body": "This also happens in Maxima.\n\n```\n\nMaxima 5.24.0 http://maxima.sourceforge.net\nusing Lisp SBCL 1.0.24\nDistributed under the GNU Public License. See the file COPYING.\nDedicated to the memory of William Schelter.\nThe function bug_report() provides bug reporting information.\n(%i1) integrate(abs(x - 1) + abs(x + 1) - 2*abs(x),x,minf,10);\n(%o1)                                  2\n(%i2) integrate(abs(x - 1) + abs(x + 1) - 2*abs(x),x,minf,inf);\n(%o2)                                  0\n```\nI don't know that I would call this \"very simple\", though, as integrating absolute value things is somewhat tricky when done symbolically.",
    "created_at": "2011-06-07T21:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11273#issuecomment-123971",
    "user": "https://github.com/kcrisman"
}
```

This also happens in Maxima.

```

Maxima 5.24.0 http://maxima.sourceforge.net
using Lisp SBCL 1.0.24
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) integrate(abs(x - 1) + abs(x + 1) - 2*abs(x),x,minf,10);
(%o1)                                  2
(%i2) integrate(abs(x - 1) + abs(x + 1) - 2*abs(x),x,minf,inf);
(%o2)                                  0
```
I don't know that I would call this "very simple", though, as integrating absolute value things is somewhat tricky when done symbolically.



---

archive/issue_comments_123972.json:
```json
{
    "body": "sure, but certainly something i would hope works! also not sure how much of it is due to the infinite interval and how much due to the function itself",
    "created_at": "2011-06-07T21:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11273#issuecomment-123972",
    "user": "https://trac.sagemath.org/admin/accounts/users/pdehaye"
}
```

sure, but certainly something i would hope works! also not sure how much of it is due to the infinite interval and how much due to the function itself



---

archive/issue_comments_123973.json:
```json
{
    "body": "This is now [reported at this location](https://sourceforge.net/tracker/?func=detail&aid=3313531&group_id=4933&atid=104933).",
    "created_at": "2011-06-08T03:23:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11273#issuecomment-123973",
    "user": "https://github.com/kcrisman"
}
```

This is now [reported at this location](https://sourceforge.net/tracker/?func=detail&aid=3313531&group_id=4933&atid=104933).



---

archive/issue_comments_123974.json:
```json
{
    "body": "fixed over there",
    "created_at": "2011-06-13T07:21:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11273#issuecomment-123974",
    "user": "https://trac.sagemath.org/admin/accounts/users/pdehaye"
}
```

fixed over there



---

archive/issue_comments_123975.json:
```json
{
    "body": "Doctest for the correct result.",
    "created_at": "2012-03-22T13:33:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11273#issuecomment-123975",
    "user": "https://github.com/orlitzky"
}
```

Doctest for the correct result.



---

archive/issue_comments_123976.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-03-22T13:36:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11273#issuecomment-123976",
    "user": "https://github.com/orlitzky"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_123977.json:
```json
{
    "body": "Attachment [sage-trac_11445.patch](tarball://root/attachments/some-uuid/ticket11445/sage-trac_11445.patch) by @orlitzky created at 2012-03-22 13:36:15\n\nFixed now that we've got Maxima 5.26.0. Here's a doctest.",
    "created_at": "2012-03-22T13:36:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11273#issuecomment-123977",
    "user": "https://github.com/orlitzky"
}
```

Attachment [sage-trac_11445.patch](tarball://root/attachments/some-uuid/ticket11445/sage-trac_11445.patch) by @orlitzky created at 2012-03-22 13:36:15

Fixed now that we've got Maxima 5.26.0. Here's a doctest.



---

archive/issue_comments_123978.json:
```json
{
    "body": "I probably would have put it in `sage.symbolic.integration.integral.integral` somewhere, where there are lots of tests, but I guess this is fine, and otherwise all is well.  I'd hate to have you rebase it to that other location, seems a waste... but then again, that's where they are...\n\nOr what do you think?  The problem is that we have no canonical location for integral stuff.  `integrate?` is a wasteland, though it points to better sources of doc.",
    "created_at": "2012-03-22T14:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11273#issuecomment-123978",
    "user": "https://github.com/kcrisman"
}
```

I probably would have put it in `sage.symbolic.integration.integral.integral` somewhere, where there are lots of tests, but I guess this is fine, and otherwise all is well.  I'd hate to have you rebase it to that other location, seems a waste... but then again, that's where they are...

Or what do you think?  The problem is that we have no canonical location for integral stuff.  `integrate?` is a wasteland, though it points to better sources of doc.



---

archive/issue_comments_123979.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-03-22T14:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11273#issuecomment-123979",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_123980.json:
```json
{
    "body": "I honestly went through the same thought process. At first, I thought, \"I'll put it with the Maxima stuff because it was a Maxima bug.\" But then I thought, what if we ever drop Maxima completely? This isn't a *Maxima* test: this tests that our integration works. Whatever we would replace Maxima with should also pass this test!\n\nThen, I had to decide whether to put it in functional.py or under symbolics. I settled on this because it's what gets called first when the user calls `integrate()`. It's also where you're sent if you look up the code with `integrate?` or `integrate??`, so to stay true to the report on the ticket, I put it there.\n\nIf the reporter had done,\n\n```\nf = abs(x - 1) + abs(x + 1) - 2*abs(x)\nf.integral(...)\n```\n\nI probably would have stuck it in symbolics. It's no big deal to move it, in any case.",
    "created_at": "2012-03-22T14:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11273#issuecomment-123980",
    "user": "https://github.com/orlitzky"
}
```

I honestly went through the same thought process. At first, I thought, "I'll put it with the Maxima stuff because it was a Maxima bug." But then I thought, what if we ever drop Maxima completely? This isn't a *Maxima* test: this tests that our integration works. Whatever we would replace Maxima with should also pass this test!

Then, I had to decide whether to put it in functional.py or under symbolics. I settled on this because it's what gets called first when the user calls `integrate()`. It's also where you're sent if you look up the code with `integrate?` or `integrate??`, so to stay true to the report on the ticket, I put it there.

If the reporter had done,

```
f = abs(x - 1) + abs(x + 1) - 2*abs(x)
f.integral(...)
```

I probably would have stuck it in symbolics. It's no big deal to move it, in any case.



---

archive/issue_comments_123981.json:
```json
{
    "body": "Well, you'll notice that I did give positive review.  You are right about the integration tests not belonging in the Maxima docs, of course.",
    "created_at": "2012-03-22T17:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11273#issuecomment-123981",
    "user": "https://github.com/kcrisman"
}
```

Well, you'll notice that I did give positive review.  You are right about the integration tests not belonging in the Maxima docs, of course.



---

archive/issue_comments_123982.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-03-28T10:03:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11273",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11273#issuecomment-123982",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_029743.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-03-28T10:03:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11273",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11273#event-29743"
}
```
