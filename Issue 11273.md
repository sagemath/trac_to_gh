# Issue 11273: symbolic integration fails on a very simple test case

Issue created by migration from Trac.

Original creator: pdehaye

Original creation time: 2011-06-07 20:57:50

Assignee: burcin

CC:  kcrisman

Keywords: integrate

The following happens

```
sage: var("x")
x
sage: integrate(abs(x - 1) + abs(x + 1) - 2*abs(x), (x,-Infinity,Infinity))
0
sage: integrate(abs(x - 1) + abs(x + 1) - 2*abs(x),(x,-Infinity,10))
2
```

The second answer is the correct one, of course...




---

Comment by kcrisman created at 2011-06-07 21:23:36

This also happens in Maxima.

```

Maxima 5.24.0 http://maxima.sourceforge.net
using Lisp SBCL 1.0.24
Distributed under the GNU Public License. See the file COPYING.
Dedicated to the memory of William Schelter.
The function bug_report() provides bug reporting information.
(%i1) integrate(abs(x - 1) + abs(x + 1) - 2*abs(x),x,minf,10);
(%o1)                                  2
(%i2) integrate(abs(x - 1) + abs(x + 1) - 2*abs(x),x,minf,inf);
(%o2)                                  0
```

I don't know that I would call this "very simple", though, as integrating absolute value things is somewhat tricky when done symbolically.


---

Comment by pdehaye created at 2011-06-07 21:26:39

sure, but certainly something i would hope works! also not sure how much of it is due to the infinite interval and how much due to the function itself


---

Comment by kcrisman created at 2011-06-08 03:23:34

This is now [reported at this location](https://sourceforge.net/tracker/?func=detail&aid=3313531&group_id=4933&atid=104933).


---

Comment by pdehaye created at 2011-06-13 07:21:30

fixed over there


---

Comment by kcrisman created at 2011-06-15 21:22:29

Changing priority from critical to major.


---

Comment by mjo created at 2012-03-22 13:33:57

Doctest for the correct result.


---

Comment by mjo created at 2012-03-22 13:36:15

Changing status from new to needs_review.


---

Attachment

Fixed now that we've got Maxima 5.26.0. Here's a doctest.


---

Comment by kcrisman created at 2012-03-22 14:23:20

I probably would have put it in `sage.symbolic.integration.integral.integral` somewhere, where there are lots of tests, but I guess this is fine, and otherwise all is well.  I'd hate to have you rebase it to that other location, seems a waste... but then again, that's where they are...

Or what do you think?  The problem is that we have no canonical location for integral stuff.  `integrate?` is a wasteland, though it points to better sources of doc.


---

Comment by kcrisman created at 2012-03-22 14:23:20

Changing status from needs_review to positive_review.


---

Comment by mjo created at 2012-03-22 14:57:15

I honestly went through the same thought process. At first, I thought, "I'll put it with the Maxima stuff because it was a Maxima bug." But then I thought, what if we ever drop Maxima completely? This isn't a _Maxima_ test: this tests that our integration works. Whatever we would replace Maxima with should also pass this test!

Then, I had to decide whether to put it in functional.py or under symbolics. I settled on this because it's what gets called first when the user calls `integrate()`. It's also where you're sent if you look up the code with `integrate?` or `integrate??`, so to stay true to the report on the ticket, I put it there.

If the reporter had done,


```
f = abs(x - 1) + abs(x + 1) - 2*abs(x)
f.integral(...)
```


I probably would have stuck it in symbolics. It's no big deal to move it, in any case.


---

Comment by kcrisman created at 2012-03-22 17:45:21

Well, you'll notice that I did give positive review.  You are right about the integration tests not belonging in the Maxima docs, of course.


---

Comment by jdemeyer created at 2012-03-28 10:03:04

Resolution: fixed
