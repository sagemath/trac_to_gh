# Issue 30447: make "a in NN" work in more cases

Issue created by migration from https://trac.sagemath.org/ticket/30684

Original creator: mmezzarobba

Original creation time: 2020-09-30 15:53:59


```
sage: a = AA(sqrt(2))                                                                                                  
sage: a in ZZ                                                                                                          
False
sage: a in NN                                                                                                          
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-6-fbb0c498acb4> in <module>
----> 1 a in NN

~/co/sage/local/lib/python3.8/site-packages/sage/misc/lazy_import.pyx in sage.misc.lazy_import.LazyImport.__contains__ (build/cythonized/sage/misc/lazy_import.c:4975)()
    584             True
    585         """
--> 586         return item in self.get_object()
    587 
    588     def __add__(left, right):

~/co/sage/local/lib/python3.8/site-packages/sage/sets/non_negative_integers.py in __contains__(self, elt)
    107         """
    108         try:
--> 109             i = Integer(elt)
    110             return  i >= Integer(0) and i == elt
    111         except TypeError:

~/co/sage/local/lib/python3.8/site-packages/sage/rings/integer.pyx in sage.rings.integer.Integer.__init__ (build/cythonized/sage/rings/integer.c:6235)()
    691                 otmp = getattr(x, "_integer_", None)
    692                 if otmp is not None:
--> 693                     set_from_Integer(self, otmp(the_integer_ring))
    694                     return
    695 

~/co/sage/local/lib/python3.8/site-packages/sage/rings/qqbar.py in _integer_(self, Z)
   5267         if self._value.lower().ceiling() > self._value.upper().floor():
   5268             # The value is known to be non-integral.
-> 5269             raise ValueError("Cannot coerce non-integral Algebraic Real %s to Integer" % self)
   5270 
   5271         self.exactify()

ValueError: Cannot coerce non-integral Algebraic Real 1.414213562373095? to Integer
```



---

Comment by mmezzarobba created at 2020-09-30 16:08:59

Changing status from new to needs_review.


---

Comment by mmezzarobba created at 2020-09-30 16:08:59

Changing priority from minor to trivial.


---

Comment by mmezzarobba created at 2020-09-30 16:08:59

Note that `NonNegativeIntegers._element_constructor_()` calls `__contains__()`, so that we cannot just remove the `__contains__()` method and rely on the generic one from `Parent`.
----
New commits:


---

Comment by tscrim created at 2020-10-02 08:36:14

LGTM.


---

Comment by tscrim created at 2020-10-02 08:36:14

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-11-07 16:21:51

Resolution: fixed
