# Issue 20639: GLPK: glp_exact ignores verbosity level

archive/issues_020639.json:
```json
{
    "body": "CC:  fbissey jdemeyer dimpase vdelecroix\n\nKeywords: glpk\n\nThe GLPK exact solver ignores `msg_lev` \nand prints a lot of things on the screen while solving (see tests in #20424). \n\nSince we're already patching GLPK (see #20710), should we patch this as well?\n\nIssue created by migration from https://trac.sagemath.org/ticket/20876\n\n",
    "created_at": "2016-06-24T22:44:20Z",
    "labels": [
        "packages: standard",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "GLPK: glp_exact ignores verbosity level",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20639",
    "user": "mkoeppe"
}
```
CC:  fbissey jdemeyer dimpase vdelecroix

Keywords: glpk

The GLPK exact solver ignores `msg_lev` 
and prints a lot of things on the screen while solving (see tests in #20424). 

Since we're already patching GLPK (see #20710), should we patch this as well?

Issue created by migration from https://trac.sagemath.org/ticket/20876





---

archive/issue_comments_284797.json:
```json
{
    "body": "I am ok with patching but I prefer stuff that is also submitted upstream so we have hope that the functionality will eventually be there (cross fingers).",
    "created_at": "2016-06-27T04:48:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20639#issuecomment-284797",
    "user": "fbissey"
}
```

I am ok with patching but I prefer stuff that is also submitted upstream so we have hope that the functionality will eventually be there (cross fingers).



---

archive/issue_comments_284798.json:
```json
{
    "body": "another example.\n\n```\nsage: p = MixedIntegerLinearProgram(solver=\"GLPK/exact\")\nsage: b = p.new_variable(nonnegative=True)\nsage: p.add_constraint(b[0]+b[1] == 1)\nsage: p.solve(log=0)\nglp_exact: 1 rows, 2 columns, 2 non-zeros\nGNU MP bignum library is being used\n      0:   infsum =                      1   (0)\n      1:   infsum =                      0   (0)\n*     1:   objval =                      0   (0)\n*     1:   objval =                      0   (0)\nOPTIMAL SOLUTION FOUND\n0.0\n```\n\n\n\n\nHowever, it's not the only issue with this solver:\n\n```\nsage: for solver in ['Cplex', 'Gurobi', 'Coin', 'PPL', 'GLPK']:\n....:     p = MixedIntegerLinearProgram(solver=solver)\n....:     _ = p.solve()\n....:     \nsage: p = MixedIntegerLinearProgram(solver=\"GLPK/exact\")\nsage: p.solve()\nglp_exact: problem has no rows/columns\n---------------------------------------------------------------------------\nMIPSolverException                        Traceback (most recent call last)\n...\nMIPSolverException: GLPK: Solver failure\n```\n\n\nWe also have this with another solver...\n\n```\nsage: p = MixedIntegerLinearProgram(solver=\"CVXOPT\")\nsage: p.solve()\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n...\nTypeError: 'c' must be a dense column matrix\n```\n",
    "created_at": "2017-05-12T08:59:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20639#issuecomment-284798",
    "user": "dcoudert"
}
```

another example.

```
sage: p = MixedIntegerLinearProgram(solver="GLPK/exact")
sage: b = p.new_variable(nonnegative=True)
sage: p.add_constraint(b[0]+b[1] == 1)
sage: p.solve(log=0)
glp_exact: 1 rows, 2 columns, 2 non-zeros
GNU MP bignum library is being used
      0:   infsum =                      1   (0)
      1:   infsum =                      0   (0)
*     1:   objval =                      0   (0)
*     1:   objval =                      0   (0)
OPTIMAL SOLUTION FOUND
0.0
```




However, it's not the only issue with this solver:

```
sage: for solver in ['Cplex', 'Gurobi', 'Coin', 'PPL', 'GLPK']:
....:     p = MixedIntegerLinearProgram(solver=solver)
....:     _ = p.solve()
....:     
sage: p = MixedIntegerLinearProgram(solver="GLPK/exact")
sage: p.solve()
glp_exact: problem has no rows/columns
---------------------------------------------------------------------------
MIPSolverException                        Traceback (most recent call last)
...
MIPSolverException: GLPK: Solver failure
```


We also have this with another solver...

```
sage: p = MixedIntegerLinearProgram(solver="CVXOPT")
sage: p.solve()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
...
TypeError: 'c' must be a dense column matrix
```




---

archive/issue_comments_284799.json:
```json
{
    "body": "Re-reading the summary, is this a deliberate behavior from upstream? If not, ignoring the verbosity level sounds like an upstream bug. In that case I have no problem with going forward with a fix.",
    "created_at": "2017-05-12T09:03:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20639#issuecomment-284799",
    "user": "fbissey"
}
```

Re-reading the summary, is this a deliberate behavior from upstream? If not, ignoring the verbosity level sounds like an upstream bug. In that case I have no problem with going forward with a fix.



---

archive/issue_comments_284800.json:
```json
{
    "body": "I had a look at the code of the backends, but I'm not confident with inheritance. The backend of `GLPK/exact` inherits from the backend of `GLPK` and has no specific method modifying the verbosity level. So I don't understand what's going on. However, the doc of the backend suggests that the default behavior is verbose (see after `cdef class GLPKExactBackend(GLPKBackend)`).",
    "created_at": "2017-05-12T12:03:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20639#issuecomment-284800",
    "user": "dcoudert"
}
```

I had a look at the code of the backends, but I'm not confident with inheritance. The backend of `GLPK/exact` inherits from the backend of `GLPK` and has no specific method modifying the verbosity level. So I don't understand what's going on. However, the doc of the backend suggests that the default behavior is verbose (see after `cdef class GLPKExactBackend(GLPKBackend)`).



---

archive/issue_comments_284801.json:
```json
{
    "body": "Replying to [comment:5 fbissey]:\n> Re-reading the summary, is this a deliberate behavior from upstream? If not, ignoring the verbosity level sounds like an upstream bug. In that case I have no problem with going forward with a fix.\n\nI think it is an upstream bug that should be fixed.\n\nReplying to [comment:6 dcoudert]:\nThe problem is not in our sage code.",
    "created_at": "2017-05-14T00:41:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20639#issuecomment-284801",
    "user": "mkoeppe"
}
```

Replying to [comment:5 fbissey]:
> Re-reading the summary, is this a deliberate behavior from upstream? If not, ignoring the verbosity level sounds like an upstream bug. In that case I have no problem with going forward with a fix.

I think it is an upstream bug that should be fixed.

Replying to [comment:6 dcoudert]:
The problem is not in our sage code.



---

archive/issue_comments_284802.json:
```json
{
    "body": "Replying to [comment:5 fbissey]:\n> Re-reading the summary, is this a deliberate behavior from upstream? If not, ignoring the verbosity level sounds like an upstream bug. In that case I have no problem with going forward with a fix.\n\n+1 to adding a patch in Sage and submitting that patch upstream.",
    "created_at": "2017-05-14T07:57:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20639#issuecomment-284802",
    "user": "jdemeyer"
}
```

Replying to [comment:5 fbissey]:
> Re-reading the summary, is this a deliberate behavior from upstream? If not, ignoring the verbosity level sounds like an upstream bug. In that case I have no problem with going forward with a fix.

+1 to adding a patch in Sage and submitting that patch upstream.



---

archive/issue_comments_284803.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-08-31T12:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20639#issuecomment-284803",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_284804.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-08-31T12:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20639#issuecomment-284804",
    "user": "jdemeyer"
}
```

New commits:



---

archive/issue_comments_284805.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-02T21:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20639#issuecomment-284805",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_284806.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-09-07T12:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20639#issuecomment-284806",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_284807.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:",
    "created_at": "2017-09-07T12:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20639#issuecomment-284807",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:



---

archive/issue_comments_284808.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-07T12:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20639#issuecomment-284808",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_284809.json:
```json
{
    "body": "Rebased on new version of #23596.",
    "created_at": "2017-09-07T12:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20639#issuecomment-284809",
    "user": "jdemeyer"
}
```

Rebased on new version of #23596.



---

archive/issue_comments_284810.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-10T22:05:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20639",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20639#issuecomment-284810",
    "user": "vbraun"
}
```

Resolution: fixed
