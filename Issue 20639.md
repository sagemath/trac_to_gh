# Issue 20639: GLPK: glp_exact ignores verbosity level

Issue created by migration from https://trac.sagemath.org/ticket/20876

Original creator: mkoeppe

Original creation time: 2016-06-24 22:44:20

CC:  fbissey jdemeyer dimpase vdelecroix

Keywords: glpk

The GLPK exact solver ignores `msg_lev` 
and prints a lot of things on the screen while solving (see tests in #20424). 

Since we're already patching GLPK (see #20710), should we patch this as well?


---

Comment by fbissey created at 2016-06-27 04:48:05

I am ok with patching but I prefer stuff that is also submitted upstream so we have hope that the functionality will eventually be there (cross fingers).


---

Comment by dcoudert created at 2017-05-12 08:59:37

another example.

```
sage: p = MixedIntegerLinearProgram(solver="GLPK/exact")
sage: b = p.new_variable(nonnegative=True)
sage: p.add_constraint(b[0]+b[1] == 1)
sage: p.solve(log=0)
glp_exact: 1 rows, 2 columns, 2 non-zeros
GNU MP bignum library is being used
      0:   infsum =                      1   (0)
      1:   infsum =                      0   (0)
*     1:   objval =                      0   (0)
*     1:   objval =                      0   (0)
OPTIMAL SOLUTION FOUND
0.0
```




However, it's not the only issue with this solver:

```
sage: for solver in ['Cplex', 'Gurobi', 'Coin', 'PPL', 'GLPK']:
....:     p = MixedIntegerLinearProgram(solver=solver)
....:     _ = p.solve()
....:     
sage: p = MixedIntegerLinearProgram(solver="GLPK/exact")
sage: p.solve()
glp_exact: problem has no rows/columns
---------------------------------------------------------------------------
MIPSolverException                        Traceback (most recent call last)
...
MIPSolverException: GLPK: Solver failure
```


We also have this with another solver...

```
sage: p = MixedIntegerLinearProgram(solver="CVXOPT")
sage: p.solve()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
...
TypeError: 'c' must be a dense column matrix
```



---

Comment by fbissey created at 2017-05-12 09:03:02

Re-reading the summary, is this a deliberate behavior from upstream? If not, ignoring the verbosity level sounds like an upstream bug. In that case I have no problem with going forward with a fix.


---

Comment by dcoudert created at 2017-05-12 12:03:19

I had a look at the code of the backends, but I'm not confident with inheritance. The backend of `GLPK/exact` inherits from the backend of `GLPK` and has no specific method modifying the verbosity level. So I don't understand what's going on. However, the doc of the backend suggests that the default behavior is verbose (see after `cdef class GLPKExactBackend(GLPKBackend)`).


---

Comment by mkoeppe created at 2017-05-14 00:41:10

Replying to [comment:5 fbissey]:
> Re-reading the summary, is this a deliberate behavior from upstream? If not, ignoring the verbosity level sounds like an upstream bug. In that case I have no problem with going forward with a fix.

I think it is an upstream bug that should be fixed.

Replying to [comment:6 dcoudert]:
The problem is not in our sage code.


---

Comment by jdemeyer created at 2017-05-14 07:57:09

Replying to [comment:5 fbissey]:
> Re-reading the summary, is this a deliberate behavior from upstream? If not, ignoring the verbosity level sounds like an upstream bug. In that case I have no problem with going forward with a fix.

+1 to adding a patch in Sage and submitting that patch upstream.


---

Comment by jdemeyer created at 2017-08-31 12:35:58

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-08-31 12:35:58

New commits:


---

Comment by mkoeppe created at 2017-09-02 21:56:25

Changing status from needs_review to positive_review.


---

Comment by git created at 2017-09-07 12:09:08

Changing status from positive_review to needs_review.


---

Comment by git created at 2017-09-07 12:09:08

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:


---

Comment by jdemeyer created at 2017-09-07 12:09:27

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2017-09-07 12:09:27

Rebased on new version of #23596.


---

Comment by vbraun created at 2017-09-10 22:05:55

Resolution: fixed
