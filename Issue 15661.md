# Issue 15661: UniqueFactory for DirichletGroup

Issue created by migration from Trac.

Original creator: saraedum

Original creation time: 2014-03-06 14:34:07

Dirichlet groups use a generic dictionary to cache objects (instead of UniqueRepresentation or UniqueFactory). This ticket replaces this generic cache with a UniqueFactory implementation.


---

Comment by saraedum created at 2014-03-06 15:46:34

Changing status from new to needs_review.


---

Comment by saraedum created at 2014-03-06 15:46:34

New commits:


---

Comment by pbruin created at 2014-04-08 10:56:20

Looks good (although I haven't tested it yet).  Two questions:
- why include `base_ring` in `key`?  It can be recovered as the parent of `zeta`, and isn't used in `create_object()`.
- could you add a doctest to show that it works as intended, i.e. really creates a unique instance?


---

Comment by git created at 2014-04-09 17:21:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by pbruin created at 2014-04-09 17:56:56

Replying to [comment:4 git]:
> ||[0521e97](http://git.sagemath.org/sage.git/commit/?id=0521e977661e2e56da15e9cbcbbe6d68cb1809e7)||`Doctest to illustrate that base_ring must be a part of the cache key created by the DirichletGroup factory`||
Nice, I hadn't thought of the fact that two roots of unity can still compare as equal when they are in different fields!  Now testing.


---

Comment by pbruin created at 2014-04-09 18:13:06

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-04-10 21:24:27

Conflicts with #15990, please fix


---

Comment by pbruin created at 2014-04-21 08:51:01

Merged with 6.2.beta8.


---

Comment by vbraun created at 2014-04-22 17:55:07

Resolution: fixed
