# Issue 21931: Implement Quantum Shuffle Algebra Class

archive/issues_021931.json:
```json
{
    "body": "CC:  jessicapalencia chapoton tscrim egunawan\n\nKeywords: algebra, quantum shuffle\n\nCreate new class based on shuffle algebra that models quantum shuffle algebra. \n\nIssue created by migration from https://trac.sagemath.org/ticket/22168\n\n",
    "created_at": "2017-01-11T10:10:59Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Implement Quantum Shuffle Algebra Class",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21931",
    "user": "maryb"
}
```
CC:  jessicapalencia chapoton tscrim egunawan

Keywords: algebra, quantum shuffle

Create new class based on shuffle algebra that models quantum shuffle algebra. 

Issue created by migration from https://trac.sagemath.org/ticket/22168





---

archive/issue_comments_304623.json:
```json
{
    "body": "Set assignee to maryb.",
    "created_at": "2017-01-11T10:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304623",
    "user": "maryb"
}
```

Set assignee to maryb.



---

archive/issue_comments_304624.json:
```json
{
    "body": "Changing keywords from \"algebra, quantum shuffle\" to \"SageDays 82 algebra, quantum shuffle\".",
    "created_at": "2017-01-11T10:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304624",
    "user": "maryb"
}
```

Changing keywords from "algebra, quantum shuffle" to "SageDays 82 algebra, quantum shuffle".



---

archive/issue_comments_304625.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to algebra.",
    "created_at": "2017-01-11T10:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304625",
    "user": "maryb"
}
```

Changing component from PLEASE CHANGE to algebra.



---

archive/issue_comments_304626.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-11T10:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304626",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304627.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-01-11T10:51:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304627",
    "user": "maryb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_304628.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2017-01-11T11:09:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304628",
    "user": "jen"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_304629.json:
```json
{
    "body": "Changing keywords from \"SageDays 82 algebra, quantum shuffle\" to \"days82, algebra, quantum shuffle\".",
    "created_at": "2017-01-11T11:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304629",
    "user": "jen"
}
```

Changing keywords from "SageDays 82 algebra, quantum shuffle" to "days82, algebra, quantum shuffle".



---

archive/issue_comments_304630.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-11T11:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304630",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304631.json:
```json
{
    "body": "Add a few sentences to the doc to explain what a quantum shuffle algebra is, if someone knows what a shuffle algebra is. Also, capitalize the first word in the doc string for each function and end the sentence with a period. Finally, the first word in the doc for each function should most of the time be Return.",
    "created_at": "2017-01-11T11:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304631",
    "user": "jessicapalencia"
}
```

Add a few sentences to the doc to explain what a quantum shuffle algebra is, if someone knows what a shuffle algebra is. Also, capitalize the first word in the doc string for each function and end the sentence with a period. Finally, the first word in the doc for each function should most of the time be Return.



---

archive/issue_comments_304632.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-11T11:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304632",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304633.json:
```json
{
    "body": "every function must have doctests, including the auxiliary functions at the end of your file",
    "created_at": "2017-01-11T12:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304633",
    "user": "chapoton"
}
```

every function must have doctests, including the auxiliary functions at the end of your file



---

archive/issue_comments_304634.json:
```json
{
    "body": "* laurent should be Laurent with a capital, everywhere in the doc\n\n* you should add your alegbra to the catalog of algebras, see #20854 for how to do that\n\n* you should then try to build the doc of your file, using\n\n\n```\nsage -docbuild reference/algebras html\n```\n",
    "created_at": "2017-01-11T13:55:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304634",
    "user": "chapoton"
}
```

* laurent should be Laurent with a capital, everywhere in the doc

* you should add your alegbra to the catalog of algebras, see #20854 for how to do that

* you should then try to build the doc of your file, using


```
sage -docbuild reference/algebras html
```




---

archive/issue_comments_304635.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-11T14:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304635",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304636.json:
```json
{
    "body": "in the Author field (top of this page here), you need to write your full name\n----\nNew commits:",
    "created_at": "2017-01-11T14:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304636",
    "user": "chapoton"
}
```

in the Author field (top of this page here), you need to write your full name
----
New commits:



---

archive/issue_comments_304637.json:
```json
{
    "body": "There is at least one\n\n```\n+        EXAMPLES: \n```\n\nthat should take 2 colons and be followed by a blank line.",
    "created_at": "2017-01-11T15:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304637",
    "user": "chapoton"
}
```

There is at least one

```
+        EXAMPLES: 
```

that should take 2 colons and be followed by a blank line.



---

archive/issue_comments_304638.json:
```json
{
    "body": "This is starting lo look good.\n\nInstead of\n\n```\nrange(0, something)\n```\n\nyou can write\n\n```\nrange(something)\n```\n\n(appears twice in your code)",
    "created_at": "2017-01-11T15:16:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304638",
    "user": "chapoton"
}
```

This is starting lo look good.

Instead of

```
range(0, something)
```

you can write

```
range(something)
```

(appears twice in your code)



---

archive/issue_comments_304639.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-11T15:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304639",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304640.json:
```json
{
    "body": "You may also be interested in #14914.",
    "created_at": "2017-01-11T18:11:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304640",
    "user": "tscrim"
}
```

You may also be interested in #14914.



---

archive/issue_comments_304641.json:
```json
{
    "body": "in the doc, cartan should take a capital: Cartan",
    "created_at": "2017-01-11T18:12:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304641",
    "user": "chapoton"
}
```

in the doc, cartan should take a capital: Cartan



---

archive/issue_comments_304642.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-11T18:27:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304642",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304643.json:
```json
{
    "body": "There is one spot where there is no blank line after EXAMPLES::\n\nAlso, I think it would be better to change the reference at the top to the callable reference style:\nhttp://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings\n\nOtherwise, looks good to me!",
    "created_at": "2017-01-12T08:55:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304643",
    "user": "jessicapalencia"
}
```

There is one spot where there is no blank line after EXAMPLES::

Also, I think it would be better to change the reference at the top to the callable reference style:
http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings

Otherwise, looks good to me!



---

archive/issue_comments_304644.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-12T09:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304644",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304645.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-12T10:17:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304645",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304646.json:
```json
{
    "body": "Just found out that I needed to add an entry for quantum shuffle algebra to src/doc/en/reference/algebra/index.rst so that it gets included in the catalog. see http://doc.sagemath.org/html/en/developer/sage_manuals.html",
    "created_at": "2017-01-12T10:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304646",
    "user": "maryb"
}
```

Just found out that I needed to add an entry for quantum shuffle algebra to src/doc/en/reference/algebra/index.rst so that it gets included in the catalog. see http://doc.sagemath.org/html/en/developer/sage_manuals.html



---

archive/issue_comments_304647.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-12T12:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304647",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304648.json:
```json
{
    "body": "According to patchbot, it seems that the doc does not build, probably because of the entry in the reference file:\n\n```\n+[dochtml] [reference] /home/u1/chapoton/sage/src/doc/en/reference/references/index.rst:974:\nWARNING: Inline interpreted text or phrase reference start-string without end-string.\n```\n\nI would say you should not break the line in the middle of the `*title*`, because the complaints is probably about not finding the closing `*`",
    "created_at": "2017-01-12T18:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304648",
    "user": "chapoton"
}
```

According to patchbot, it seems that the doc does not build, probably because of the entry in the reference file:

```
+[dochtml] [reference] /home/u1/chapoton/sage/src/doc/en/reference/references/index.rst:974:
WARNING: Inline interpreted text or phrase reference start-string without end-string.
```

I would say you should not break the line in the middle of the `*title*`, because the complaints is probably about not finding the closing `*`



---

archive/issue_comments_304649.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-12T20:21:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304649",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304650.json:
```json
{
    "body": "Thanks! Apparently I had used a normal single quote on the ending of the doi  instead of a slanted one as I was supposed to.",
    "created_at": "2017-01-12T20:23:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304650",
    "user": "maryb"
}
```

Thanks! Apparently I had used a normal single quote on the ending of the doi  instead of a slanted one as I was supposed to.



---

archive/issue_comments_304651.json:
```json
{
    "body": "Should have Sage give an error if you define a quantum shuffle algebra that doesn't make sense, such as:\n\nQ = QuantumShuffleAlgebra('abcdghi', CartanMatrix(['A',3]))\n\nRight now, it let me define the above, but then when I applied a function, it gave an uninformative error.",
    "created_at": "2017-01-13T14:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304651",
    "user": "jessicapalencia"
}
```

Should have Sage give an error if you define a quantum shuffle algebra that doesn't make sense, such as:

Q = QuantumShuffleAlgebra('abcdghi', CartanMatrix(['A',3]))

Right now, it let me define the above, but then when I applied a function, it gave an uninformative error.



---

archive/issue_comments_304652.json:
```json
{
    "body": "In the documentation, connectivitystructure -> connectivity structure",
    "created_at": "2017-01-13T14:34:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304652",
    "user": "jessicapalencia"
}
```

In the documentation, connectivitystructure -> connectivity structure



---

archive/issue_comments_304653.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-13T22:07:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304653",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_304654.json:
```json
{
    "body": "in the last commit, you should not print an error, but raise a ValueError, something\nlike\n\n```\n+    raise ValueError(\"Cartan Matrix is not the same size as the associated generator set\")\n```\n",
    "created_at": "2017-01-16T14:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304654",
    "user": "chapoton"
}
```

in the last commit, you should not print an error, but raise a ValueError, something
like

```
+    raise ValueError("Cartan Matrix is not the same size as the associated generator set")
```




---

archive/issue_comments_304655.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-01-16T17:54:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304655",
    "user": "tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_304656.json:
```json
{
    "body": "I've removed the inheritance of `ShuffleAlgebra` because `ShuffleAlgebra` has a bialgebra structure and I don't think that structure naturally lifts to the quantum setting (at least without some modification, but some quick searching didn't yield anything). I also fixed another issues with multiplication returning basis elements indexed by strings instead of words. Improvements were made to the string representations too.\n\nHowever, there is still more work needed on the documentation, in particular, precisely defining/stating the multiplication in the doc.\n----\nNew commits:",
    "created_at": "2017-01-16T17:54:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21931#issuecomment-304656",
    "user": "tscrim"
}
```

I've removed the inheritance of `ShuffleAlgebra` because `ShuffleAlgebra` has a bialgebra structure and I don't think that structure naturally lifts to the quantum setting (at least without some modification, but some quick searching didn't yield anything). I also fixed another issues with multiplication returning basis elements indexed by strings instead of words. Improvements were made to the string representations too.

However, there is still more work needed on the documentation, in particular, precisely defining/stating the multiplication in the doc.
----
New commits:
