# Issue 15437: Update cryptominisat (optional package) from CryptoMiniSat version 2.9.6 to version 3+

Issue created by migration from https://trac.sagemath.org/ticket/15674

Original creator: equaeghe

Original creation time: 2014-01-14 20:42:40

CC:  malb mmezzarobba

Currently, the optional cryptominisat package spkg refers to CryptoMiniSat 2.9.6. Currently, CryptoMiniSat version 3.2 is released. Actually, there is no release (git tag) for versions < 3. To include this package in sage-on-gentoo, it is convenient to be able to refer to a release.

So, both 'to stay current' and for practical reasons (for Gentoo Linux developers), I would like to request that the cryptominisat package be updated. (And understand that time constraints may not allow for this.)

Links:
* CryptoMiniSat git repo: https://github.com/msoos/cryptominisat/
* cryptominisat spkg hg repo: https://bitbucket.org/malb/cryptominisat-spkg
* sage-on-gentoo git repo: https://github.com/cschwan/sage-on-gentoo
* sage reference mention: http://www.sagemath.org/doc/reference/sat


---

Comment by malb created at 2014-01-15 14:28:50

I've imported cryptominisat-2.9.6, the update to 3.x is next.
----
New commits:


---

Comment by malb created at 2014-01-15 14:33:41

Looks like it isn't going to be that straight forward:

CryptoMiniSat needs

 * CMake (we don't have that)
 * libz (we have that)
 * libboost (we have a cropped version, possibly not all we need)
 * libboost-program-options (we don't have that)
 * m4ri from GITHUB (we have that)

https://github.com/msoos/cryptominisat/blob/master/INSTALL


---

Comment by ncohen created at 2014-01-15 14:50:31

And I read that yesterday which is not a problem for me but may be one for you :

http://www.msoos.org/cryptominisat-3/
Is CryptoMiniSat 3 tuned to solve cryptographic instances?
No. In fact, it can’t process XOR clauses natively so maybe CryptoMiniSat 2 would be a better choice for those types of instances.

By the way, I was impressed at how fast Cryptominisat solved a graph problem I had at that time. Too bad I cannot easily say that the sum of 50 bolean variables should be equal to 10 with SAT clauses `T_T`

Nathann


---

Comment by equaeghe created at 2014-01-15 16:26:04

Replying to [comment:3 malb]:
> Looks like it isn't going to be that straight forward:

Perhaps I should, to solve the "sage-on-gentoo wants releases" problem until the dependency problem can be sorted out, ask upstream to provide a release of 2.9.6?


---

Comment by equaeghe created at 2014-01-16 15:51:24

Replying to [comment:5 equaeghe]:
> Perhaps I should [...] ask upstream to provide a release of 2.9.6?

Done: https://github.com/msoos/cryptominisat/issues/149


---

Comment by msoos created at 2014-01-16 16:27:53

I'm the author of CryptoMiniSat. The 3.x series doesn't support XOR naively. It should be much faster on many instances, though, and has substantially improved in stability and with 3.4 a much cleaner interface too. I am planning on a python interface, too for 3.4 which should make things drag-and-drop from your perspective. See https://github.com/netom/satispy for an example.

As a library, 3.x it doesn't need boost, zlib, mysql or m4ri, but needs C++11. It's 2014, so it's been 3 years now, I hope that's okay :S C++11 substantially increases portability due to uint32_t/uint64_t and threads being part of C++11, not to mention the readability of the code. As for cmake, I think I'll make a simple automake version as well. I'll update this ticket when 3.4 is released.

BTW, 3.x supports DRUP (http://www.cs.utexas.edu/~marijn/drup/), which means UNSAT can be verified(!) and potentially traced back to the exact clauses causing UNSAT. This means that the solver can give more meaningful feedback than just a 1-bit value (UNSAT) in case it's not SAT -- in which case it gives a satisfying assignment, a very helpful trace.


---

Comment by malb created at 2014-01-16 18:44:40

Excellent! I'll ask on [sage-devel] about C++11.


---

Comment by malb created at 2014-01-24 16:01:25

I created a new ticket which merely integrates CryptoMiniSat properly into the new SPKG structure at #15723.


---

Comment by git created at 2014-02-06 14:49:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by malb created at 2014-04-10 12:10:43

CryptoMiniSat 4.0 is out and it support for XOR clauses was added back. Hence, we should be able to just upgrade: http://www.msoos.org/2014/04/cryptominisat-4-released/


---

Comment by malb created at 2014-04-22 17:06:08

There are two holdups. CryptoMiniSat 4 uses 

 * cmake and not autotools, but Sage does not include cmake
 * more of Boost than Sage includes.


---

Comment by msoos created at 2015-09-27 10:41:53

Actually, latest release would be best (4.5+) :) It's almost fully backward-compatible with the old one, so all should easy. By the way, CryptoMiniSat now has a python interface, you can even use that.


---

Comment by malb created at 2015-09-29 17:32:37

Hi Mate, IIRC the hold up was because of missing autotools support. Maybe it's time to revive https://github.com/msoos/cryptominisat/pull/196 ? :)


---

Comment by msoos created at 2015-09-29 20:04:35

Wow. Can't cmake be used? Does it have to have autotools? I mean, it's over 1000 lines of code for the cmake. To make that feature-compatible with autotools it'd be about a month of work. That's a lot. Can cmake be hooked in somehow?


---

Comment by jdemeyer created at 2015-09-30 06:43:26

Replying to [comment:21 msoos]:
> Wow. Can't cmake be used? Does it have to have autotools? I mean, it's over 1000 lines of code for the cmake. To make that feature-compatible with autotools it'd be about a month of work. That's a lot. Can cmake be hooked in somehow?

Well, there is an experimental `cmake` package for Sage. So, if you're willing to "downgrade" `cryptominisat` to experimental, you can use it.


---

Comment by malb created at 2015-09-30 08:15:07

Hi Máté, how much of comment:7 is still current? IIRC my pull request does most of the work for that.


---

Comment by ncohen created at 2015-09-30 12:34:02

Just advertising here that I wrote a 'cheap' support for SAT in standard sage at #19042 (needs review)


---

Comment by msoos created at 2015-10-09 20:43:21

Well... I can create an autotools-based package. I'll do that in the coming days. But I will not release this to the general public, because re-writing all the build system for autotools and making sure it works for both is simply too much work. I hope this middle ground is good enough :)

And thanks for your pull request! Based on that I should be able to create a good enough autotools-based release :)


---

Comment by fbissey created at 2017-07-12 23:26:45

Changing status from new to needs_review.


---

Comment by fbissey created at 2017-07-12 23:26:45

Superseded by #22817 (cryptominisat 5).


---

Comment by embray created at 2017-07-13 07:52:09

Resolution: wontfix


---

Comment by embray created at 2017-07-13 07:52:09

Goes without saying.
