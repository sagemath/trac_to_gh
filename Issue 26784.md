# Issue 26784: Clean up import structure of coercion_model

Issue created by migration from https://trac.sagemath.org/ticket/27021

Original creator: jdemeyer

Original creation time: 2019-01-04 15:27:32




---

Comment by jdemeyer created at 2019-01-07 15:44:30

New commits:


---

Comment by jdemeyer created at 2019-01-07 15:44:30

Changing status from new to needs_review.


---

Comment by tscrim created at 2019-01-07 18:07:58

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2019-01-07 18:07:58

LGTM.


---

Comment by git created at 2019-01-07 18:26:37

Changing status from positive_review to needs_review.


---

Comment by git created at 2019-01-07 18:26:37

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by jdemeyer created at 2019-01-07 19:04:41

There is an issue with docbuilding.


---

Comment by jdemeyer created at 2019-01-07 19:04:41

Changing status from needs_review to needs_work.


---

Comment by git created at 2019-01-08 06:21:14

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2019-01-08 09:11:57

Changing status from needs_work to needs_review.


---

Comment by git created at 2019-01-08 11:18:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2019-01-08 17:55:45

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2019-01-08 17:55:45

Patchbots are green.


---

Comment by chapoton created at 2019-01-08 20:42:32

arando is not exactly green...


---

Comment by tscrim created at 2019-01-08 22:09:39

When I was looking at it, it looked like it was morally green with some sort of misbuild with giac. However, looking at all of the failures, there are some doctests that indicate an import error from this ticket.


---

Comment by tscrim created at 2019-01-08 22:09:39

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2019-01-09 08:47:41

I suspect (but still need to confirm) that this is just a matter of rebuilding `giacpy_sage`. The API of `element.pxd` changed, so any package cimporting that needs to be recompiled.


---

Comment by git created at 2019-01-09 08:50:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2019-01-09 09:18:54

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2019-01-09 09:18:54

A rebuild of `giacpy_sage` fixes it indeed.


---

Comment by jdemeyer created at 2019-01-09 09:26:38

This again shows why patchbots should install optional packages...


---

Comment by tscrim created at 2019-01-09 16:42:28

A real green bot. Thanks.


---

Comment by tscrim created at 2019-01-09 16:42:28

Changing status from needs_review to positive_review.


---

Comment by embray created at 2019-01-15 18:16:10

Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.


---

Comment by vbraun created at 2019-01-19 19:10:19


```
[sagelib-8.6] Error compiling Cython file:
[sagelib-8.6] ------------------------------------------------------------
[sagelib-8.6] ...
[sagelib-8.6] from sage.structure.parent import Parent
[sagelib-8.6] from sage.rings.all import ZZ, QQ, RDF
[sagelib-8.6] 
[sagelib-8.6] from sage.groups.perm_gps.permgroup_element cimport PermutationGroupElement
[sagelib-8.6] from sage.combinat.permutation import Permutation
[sagelib-8.6] from sage.structure.element cimport coercion_model as cm
[sagelib-8.6] ^
[sagelib-8.6] ------------------------------------------------------------
[sagelib-8.6] 
[sagelib-8.6] sage/libs/gap/element.pyx:34:0: 'sage/structure/element/coercion_model.pxd' not found
```



---

Comment by vbraun created at 2019-01-19 19:10:19

Changing status from positive_review to needs_work.


---

Comment by chapoton created at 2019-01-19 19:38:33

`@`vbraun: Volker, there was a conflict with #21020, that we fixed by letting #21020 depend on the present ticket. So now you can merge either #27021 only, or both #27021 and the new version of #21020


---

Comment by jdemeyer created at 2019-01-20 13:47:54

Changing status from needs_work to positive_review.


---

Comment by jdemeyer created at 2019-01-20 13:47:54

If you want this to be merged, it should be set back to positive review.


---

Comment by vbraun created at 2019-01-24 18:17:46

Resolution: fixed
