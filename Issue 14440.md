# Issue 14440: Unable to coerce (<type 'unicode'>) to Rational

Issue created by migration from Trac.

Original creator: pdehaye

Original creation time: 2013-05-25 22:41:38

Assignee: robertwb

I think

```
sage:  QQ(u'1') 
TypeError: Unable to coerce 1 (<type 'unicode'>) to Rational
```

should work. At least it would be more consistent with 

```
sage: ZZ(u'3')
3
sage: QQ('3')
3
```




---

Comment by jdemeyer created at 2016-07-26 09:17:18

New commits:


---

Comment by jdemeyer created at 2016-07-26 09:17:18

Changing status from new to needs_review.


---

Comment by tscrim created at 2016-07-26 17:26:00

We should match #16064 to be python2/3 compatible.


---

Comment by vdelecroix created at 2016-07-26 21:30:20

It is hard to have a Python2 and 3 compatible code here:

|               | Python2          | Python3  |
|---------------|:------------------:|:----------:|
| common base |  `basestring`      |  ?         |
| bytes       |  `str` or `bytes`  |  `bytes` |
| unicode     |  `bytes`           |  `str`     |
A 2/3 compatible way is to add (do not know if it applies to Cython)

```
from past.builtins import basestring
```

Or alternatively use the `str` available in `builtins`

```
sage: from builtins import str
sage: isinstance('toto', str)
False
sage: isinstance(u'toto', str)
True
```

see http://python-future.org/compatible_idioms.html


---

Comment by tscrim created at 2016-07-26 21:55:25

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2016-07-26 21:55:25

Hmm...Well, we currently use `basestring` for integers, so I guess it is fine in this case as well.


---

Comment by jdemeyer created at 2016-07-27 07:22:05

Replying to [comment:8 vdelecroix]:
> It is hard to have a Python2 and 3 compatible code here:

This isn't about Python 2 or Python 3. This is about Cython, which is actually a different language than either Python 2 or Python 3. And Cython always supports `basestring`.


---

Comment by vbraun created at 2016-07-27 20:24:38

Resolution: fixed


---

Comment by tscrim created at 2016-07-28 16:28:58

I didn't know that. Thank you for clarifying Jeroen.
