# Issue 17724: Move darwin_utilities to a directory of its own

Issue created by migration from Trac.

Original creator: gouezel

Original creation time: 2015-03-15 21:43:50

Since #17767, all `pyx` files in `sage/misc` are compiled on all platforms, due to the following line in `modules_list.py`:

```
Extension('*', ['sage/misc/*.pyx'])
```


This is in particular the case of `sage/misc/darwin_utilities.pyx`, which should however only be included on Darwin as specified on lines 2096 and following of `modules_list.py`:

```
# Only include darwin_utilities on OS_X >= 10.5
```


This ticket moves this file and its friends to a subdirectory of its own.


---

Comment by gouezel created at 2015-03-15 21:44:52

NB: the patch is untested as I don't have a Mac...


---

Comment by gouezel created at 2015-03-15 21:44:52

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2015-03-16 07:24:56

I would not put this inside `misc` but perhaps a new top-level directory like `src/sage/platform`.


---

Comment by git created at 2015-03-22 20:50:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2015-03-22 21:11:13

If you really go for a `src/sage/platforms/darwin/` directory, you can drop the `darwin_` prefix on all files.


---

Comment by jdemeyer created at 2015-03-22 21:12:24

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2015-03-22 21:12:24

Changing component from build to porting: BSD.


---

Comment by git created at 2015-03-22 21:21:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by gouezel created at 2015-03-22 21:49:29

Changing status from needs_work to needs_review.


---

Comment by gouezel created at 2015-03-22 21:49:29

Good idea, done.


---

Comment by jdemeyer created at 2015-03-23 14:11:21

I have no more comments but somebody with OS X (not me, unfortunately) should test this.


---

Comment by jdemeyer created at 2015-04-08 14:03:23

I think that #18145 also fixes the issue on this ticket, but in a completely different way.


---

Comment by jdemeyer created at 2015-04-09 06:21:46

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2015-04-09 06:21:46

In any case, this patch will conflict with #18145.


---

Comment by gouezel created at 2015-04-09 10:21:55

Indeed, #18145 fixes the issue, so this ticket is not needed any more.


---

Comment by gouezel created at 2015-04-09 10:21:55

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2015-04-09 12:14:09

Resolution: duplicate
