# Issue 11476: Contour plot cannot deal with non-real numbers

Issue created by migration from Trac.

Original creator: eviatarbach

Original creation time: 2011-08-04 06:51:45

Assignee: jason, was

CC:  kcrisman mjo

When trying to contour_plot a function that can return non-real numbers, such as 


```
sage: contour_plot(log(x) + log(y), (-1000, 1000), (-1000, 1000))
```


the following error is returned:


```
TypeError: can't convert complex to float
```


Sage should print a warning and skip over the those points. This is the way R behaves.


---

Comment by eviatarbach created at 2012-06-12 23:22:08

I don't know how, but it seems that this was fixed sometime. It now skips non-real points. Can someone close this ticket? Thanks.


---

Comment by kcrisman created at 2012-06-12 23:52:06

Nope!  Now we need a patch that adds a doctest in that file that confirms that this one doesn't return an error.  I think you know how to do this, right?

Can you try some other possible contour plots like that, to make sure it wasn't just this particular one that did it?  What does the graph look like?  (You should be able to attach a png file and then refer to it here with the wiki syntax.)


---

Attachment

Sure! I do know how to do this, but Mercurial queues are so aggravating that I'm going to have to put it off until I have time to re-learn them.

I did try several different functions. Attached is the example given in the description.


---

Comment by kcrisman created at 2012-06-13 00:10:22

Seems like a reasonable pic.

Totally don't do Mercurial queues, it's not worth it unless you're going to be doing a lot of development; for once-off stuff it's not needed, especially if there is only one patch involved.  See [this part of the developer guide](http://www.sagemath.org/doc/developer/walk_through.html#submitting-a-change) - I used this `hg_sage` functionality for years.  Looking forward to it.


---

Comment by eviatarbach created at 2012-06-13 00:21:30

Okay.

Another issue is whether the real part of the complex number should be plotted, like [Wolfram Alpha](http://www.wolframalpha.com/input/?i=log%28x%29+%2B+log%28y%29) does.


---

Comment by kcrisman created at 2012-06-13 00:26:33

> Another issue is whether the real part of the complex number should be plotted, like [Wolfram Alpha](http://www.wolframalpha.com/input/?i=log%28x%29+%2B+log%28y%29) does.

I'd say no, because those are very clearly labeled as "real part" and so forth, which we don't do.  As long as we aren't doing something _wrong_, I think that the picture you have and similar behavior is ok; it's understood that one doesn't plot complex values.


---

Comment by mjo created at 2021-07-26 23:48:58

Time to close this!
----
New commits:


---

Comment by mjo created at 2021-07-26 23:48:58

Changing status from new to needs_review.


---

Comment by slelievre created at 2021-07-27 10:37:12

I would rephrase:

```
-    Domain points in :trac:`11648` with complex output are now skipped::
+    Domain points where the function takes complex values are skipped
+    (:trac:`11648`)::
```

Please set to positive review on my behalf,
with or without this rephrasing.


---

Comment by mjo created at 2021-07-29 14:30:57

Replying to [comment:13 slelievre]:
> Please set to positive review on my behalf,
> with or without this rephrasing.

Thanks. Your wording is more precise, but I really don't want to waste a few hours rebuilding sage if I re-checkout this branch to make the change. (Release manager, or anyone else, feel free.)


---

Comment by mjo created at 2021-07-29 14:31:09

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-08-29 09:38:04

Resolution: fixed
