# Issue 12691: Roots of polynomial dies with PariError: division by zero (27)

archive/issues_012691.json:
```json
{
    "body": "Assignee: was\n\nCC:  cremona was\n\nWith a rather special polynomial of degree 32 with two roots with multiplicity 4, `roots()` dies with a PariError:\n\n```\nsage: R.<t> = PolynomialRing(ComplexField(2700), 1)\nsage: p = (special polynomial)\nsage: p.roots()\n... correct output ...\nsage: p.roots(ring=CDF)\n---------------------------------------------------------------------------\nPariError                                 Traceback (most recent call last)\n\n/home/vbraun/Sage/EllipticFibration/<ipython console> in <module>()\n\n/home/vbraun/opt/sage-5.0.beta13/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31077)()\n\n/home/vbraun/opt/sage-5.0.beta13/local/lib/python2.7/site-packages/sage/libs/pari/gen.so in sage.libs.pari.gen._pari_trap (sage/libs/pari/gen.c:49842)()\n\nPariError: division by zero (27)\n```\n\n\nMight be related to #2418\n\nIssue created by migration from https://trac.sagemath.org/ticket/12863\n\n",
    "created_at": "2012-04-20T23:14:44Z",
    "labels": [
        "interfaces",
        "major",
        "bug"
    ],
    "title": "Roots of polynomial dies with PariError: division by zero (27)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12691",
    "user": "vbraun"
}
```
Assignee: was

CC:  cremona was

With a rather special polynomial of degree 32 with two roots with multiplicity 4, `roots()` dies with a PariError:

```
sage: R.<t> = PolynomialRing(ComplexField(2700), 1)
sage: p = (special polynomial)
sage: p.roots()
... correct output ...
sage: p.roots(ring=CDF)
---------------------------------------------------------------------------
PariError                                 Traceback (most recent call last)

/home/vbraun/Sage/EllipticFibration/<ipython console> in <module>()

/home/vbraun/opt/sage-5.0.beta13/local/lib/python2.7/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:31077)()

/home/vbraun/opt/sage-5.0.beta13/local/lib/python2.7/site-packages/sage/libs/pari/gen.so in sage.libs.pari.gen._pari_trap (sage/libs/pari/gen.c:49842)()

PariError: division by zero (27)
```


Might be related to #2418

Issue created by migration from https://trac.sagemath.org/ticket/12863





---

archive/issue_comments_151626.json:
```json
{
    "body": "example polynomial exhibiting the problem",
    "created_at": "2012-04-20T23:15:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12691#issuecomment-151626",
    "user": "vbraun"
}
```

example polynomial exhibiting the problem



---

archive/issue_comments_151627.json:
```json
{
    "body": "Attachment",
    "created_at": "2012-04-20T23:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12691#issuecomment-151627",
    "user": "vbraun"
}
```

Attachment



---

archive/issue_comments_151628.json:
```json
{
    "body": "Changing keywords from \"\" to \"pari roots\".",
    "created_at": "2012-04-20T23:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12691#issuecomment-151628",
    "user": "vbraun"
}
```

Changing keywords from "" to "pari roots".



---

archive/issue_comments_151629.json:
```json
{
    "body": "I've isolated a test case and reported the bug upstream at\n\nhttp://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1309",
    "created_at": "2012-04-28T20:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12691#issuecomment-151629",
    "user": "vbraun"
}
```

I've isolated a test case and reported the bug upstream at

http://pari.math.u-bordeaux.fr/cgi-bin/bugreport.cgi?bug=1309



---

archive/issue_comments_151630.json:
```json
{
    "body": "It turns out that this was a floating point bug in pari's `sqrt()`. For the record:\n\nFixed in branches master (testing, commit d1eb887b21) and pari-2.5 (stable,\ncommit 1550af281).",
    "created_at": "2012-05-02T13:47:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12691#issuecomment-151630",
    "user": "vbraun"
}
```

It turns out that this was a floating point bug in pari's `sqrt()`. For the record:

Fixed in branches master (testing, commit d1eb887b21) and pari-2.5 (stable,
commit 1550af281).



---

archive/issue_comments_151631.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-10-30T16:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12691#issuecomment-151631",
    "user": "pbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_151632.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-10-30T16:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12691#issuecomment-151632",
    "user": "pbruin"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_151633.json:
```json
{
    "body": "This was fixed in PARI 2.5 (see comment:4), which has been in Sage for some time.",
    "created_at": "2013-10-30T16:34:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12691#issuecomment-151633",
    "user": "pbruin"
}
```

This was fixed in PARI 2.5 (see comment:4), which has been in Sage for some time.



---

archive/issue_comments_151634.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2013-10-31T08:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12691#issuecomment-151634",
    "user": "jdemeyer"
}
```

Resolution: worksforme
