# Issue 10781: matrix_plot can now plot subdivisions

Issue created by migration from https://trac.sagemath.org/ticket/10847

Original creator: jason

Original creation time: 2011-02-24 18:36:33

Assignee: jason, was

CC:  rbeezer kcrisman ryan

This patch makes matrix_plot learn about plotting subdivisions.


---

Attachment


---

Comment by jason created at 2011-02-24 18:43:40

Changing status from new to needs_review.


---

Comment by jason created at 2011-02-24 18:43:40

I think this is ready for review.  I was trying to create a graph like in the Wikipedia page on DCT (http://en.wikipedia.org/wiki/File:Dctjpeg.png), but we didn't support plotting matrix subdivisions and adding lines to a matrix plot was messing it up.

Well, it all works beautifully now, after this patch! :).


---

Comment by kcrisman created at 2011-03-13 03:17:39

Changing status from needs_review to needs_work.


---

Comment by kcrisman created at 2011-03-13 03:17:39

This is such a great patch, really nicely put together and documented, everything.  I really want to say positive review, except plotting sparse matrices now does not work.

```
sage: sparse = matrix(dict([((randint(0, 10), randint(0, 10)), 1) for i in xrange(100)])); matrix_plot(sparse)
<snip>
AttributeError: Unknown property subdivisions
```

I have no idea how to fix this - all the obvious things I tried, including adding to the list of options deleted for sparse plotting, or deleting this options after creating the lines, did not work. I must be missing something pretty obvious, I guess, but since this is *one of the doctest examples* it now fails the tests and obviously this needs work!


---

Comment by rbeezer created at 2011-03-13 04:56:13

Replying to [comment:3 kcrisman]:
> AttributeError: Unknown property subdivisions

Matrices have a _function_ subdivision() and an _attribute_ subdivisions.


```
sage: A= matrix(2, range(4))
sage: type(A.subdivision)
<type 'builtin_function_or_method'>
sage: type(A.subdivisions)
<type 'NoneType'>
```


The latter should go away, see #4983.  Maybe it is not visible outside of a *.pyx file?

Anyway, hope this helps some.


---

Comment by kcrisman created at 2011-03-14 13:10:40

Well, for some reason doing the right thing (adding to the deleted options for sparse matrices) worked this morning.    Patch coming up, once I run relevant tests.


---

Comment by kcrisman created at 2011-03-14 13:20:16

Attach after main patch


---

Attachment

Okay, now all is well, unless someone is *really* tricky and circumvents the decorators and explicitly removes the subdivision keyword.  That would also be true for circumventing the vmin keyword, so I judge it to be a non-issue.  Positive review.

Apply attachment:trac-10847-matrix_plot-subdivisions.patch and attachment:trac_10847-reviewer.patch


---

Comment by kcrisman created at 2011-03-14 13:23:21

Changing status from needs_work to needs_review.


---

Comment by kcrisman created at 2011-03-14 13:24:03

Changing status from needs_review to positive_review.


---

Comment by jason created at 2011-03-22 22:30:13

#4983 probably conflicts with this patch.


---

Comment by jason created at 2011-03-22 22:31:11

(where "conflicts" means that #10847 probably needs to be changed after this patch too.)


---

Comment by kcrisman created at 2011-03-22 23:54:37

It would be nice if a patch that has had positive review for over a week did not have to be rebased for a patch that has had positive review for seven hours. Could that patch not be based on this instead?


---

Comment by jhpalmieri created at 2011-03-23 00:16:44

apply on top of other patches


---

Attachment

I think this patch should fix any incompatibilities with #4983.  With this, you can apply the patches here independently of #4983.


---

Comment by jason created at 2011-03-23 00:23:45

But I thought #4983 got rid of the get_subdivisions() command.  Won't you have a problem when you apply #4983 now?


---

Comment by jhpalmieri created at 2011-03-23 00:32:24

#4983 keeps get_subdivisions as a synonym for "subdivisions", for backwards compatibility.


---

Comment by rbeezer created at 2011-03-23 00:57:17

Replying to [comment:12 jason]:
> But I thought #4983 got rid of the get_subdivisions() command.  Won't you have a problem when you apply #4983 now?

#4983, as of about mid-day yesterday, said


```
Here's patch. This keeps get_subdivisions as a synonym for subdivisions. 
```


So it was never slated for removal.


---

Comment by jason created at 2011-03-23 01:01:49

Thanks.  I didn't read that patch carefully enough, apparently.


---

Comment by rbeezer created at 2011-03-23 03:05:02

I applied #4983, then all the patches here.  Passed long tests and patch looks good.  So I'll check off on John P's patch as an interested observer, and leave this at positive review.


---

Comment by kcrisman created at 2011-03-23 11:41:37

Wow, thanks for the quick work, guys!


---

Comment by jdemeyer created at 2011-04-12 08:05:19

Resolution: fixed
