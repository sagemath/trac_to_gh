# Issue 27606: Tab_completion in Mathematica interface causes Sage to crash

archive/issues_027606.json:
```json
{
    "body": "Keywords: Mathematica, IPython, Unicode\n\nCalling the tab completion of the Mathematica interface like `mathematica.[TAB]` causes Sage to crash.\n\nThe error is a `UnicodeDecodeError` in the IPython interpreter. Some of the Mathematica keywords involve Unicode characters which do not seem to be correctly encoded. For example:\n\n\n```\nsage: s = mathematica._tab_completion()[-1]; s\n'\\xef\\x8e\\xaf'\nsage: type(s)\n<type 'str'>\n```\n\n\nThis was tested using Sage 8.7, Python 2 and Mathematica 11.3 on Linux. The crash report is attached.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/27843\n\n",
    "created_at": "2019-05-16T20:47:11Z",
    "labels": [
        "component: interfaces",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Tab_completion in Mathematica interface causes Sage to crash",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27606",
    "user": "https://github.com/mwageringel"
}
```
Keywords: Mathematica, IPython, Unicode

Calling the tab completion of the Mathematica interface like `mathematica.[TAB]` causes Sage to crash.

The error is a `UnicodeDecodeError` in the IPython interpreter. Some of the Mathematica keywords involve Unicode characters which do not seem to be correctly encoded. For example:


```
sage: s = mathematica._tab_completion()[-1]; s
'\xef\x8e\xaf'
sage: type(s)
<type 'str'>
```


This was tested using Sage 8.7, Python 2 and Mathematica 11.3 on Linux. The crash report is attached.


Issue created by migration from https://trac.sagemath.org/ticket/27843





---

archive/issue_comments_389098.json:
```json
{
    "body": "Attachment [Sage_crash_report.txt](tarball://root/attachments/some-uuid/ticket27843/Sage_crash_report.txt) by @mwageringel created at 2019-05-20 21:53:21\n\nApparently this is part of a larger problem \u2013 support for unicode in this and other interfaces. See also #24268. In Python 3, the problem above does not seem to exist. I am not sure how to make this work in Python 2.",
    "created_at": "2019-05-20T21:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27606#issuecomment-389098",
    "user": "https://github.com/mwageringel"
}
```

Attachment [Sage_crash_report.txt](tarball://root/attachments/some-uuid/ticket27843/Sage_crash_report.txt) by @mwageringel created at 2019-05-20 21:53:21

Apparently this is part of a larger problem â€“ support for unicode in this and other interfaces. See also #24268. In Python 3, the problem above does not seem to exist. I am not sure how to make this work in Python 2.



---

archive/issue_comments_389099.json:
```json
{
    "body": "As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27606#issuecomment-389099",
    "user": "https://github.com/embray"
}
```

As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_comments_389100.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-05-21T17:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27606#issuecomment-389100",
    "user": "https://github.com/mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_389101.json:
```json
{
    "body": "This problem does not exist anymore with Python 3, so this ticket can be closed.",
    "created_at": "2020-05-21T17:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27606#issuecomment-389101",
    "user": "https://github.com/mwageringel"
}
```

This problem does not exist anymore with Python 3, so this ticket can be closed.



---

archive/issue_comments_389102.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-05-21T17:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27606#issuecomment-389102",
    "user": "https://github.com/mwageringel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_389103.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2020-05-21T18:19:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27606",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27606#issuecomment-389103",
    "user": "https://github.com/fchapoton"
}
```

Resolution: invalid
