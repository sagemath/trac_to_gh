# Issue 30963: Small improvements to binary matrix

Issue created by migration from https://trac.sagemath.org/ticket/31200

Original creator: @kliem

Original creation time: 2021-01-07 19:56:46

CC:  tscrim dcoudert

Keywords: binary matrix

We move binary_matrix.pxi to binary_matrix.pxd and add a realloc function.

Furthermore we add a few type specifications of the output and use `mp_bitcnt` instead of `Py_ssize_t`, as this is used in bitset_base.pxd.


---

Comment by @kliem created at 2021-01-07 19:56:53

Changing status from new to needs_review.


---

Comment by dcoudert created at 2021-01-07 21:40:50

I'm not sure `binary_matrix.pxd` should contain

```
+from sage.data_structures.binary_matrix cimport *
```


Isn't it necessary to also get a .pyx file, even if empty ?


---

Comment by git created at 2021-01-07 21:47:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2021-01-07 21:49:30

I don't think a .pyx file is needed. After all, we didn't have it there before.

And `src/sage/geometry/polyhedron/combinatorial_polyhedron/face_data_structure.pxd` doesn't have a pyx file for it.


---

Comment by dcoudert created at 2021-01-07 21:53:02

right, the usage is online with cimport.

For me this patch is OK. Thank you.


---

Comment by dcoudert created at 2021-01-07 21:53:12

Changing status from needs_review to positive_review.


---

Comment by @kliem created at 2021-01-07 21:54:02

Thanks.


---

Comment by vbraun created at 2021-01-24 10:37:36

Resolution: fixed
