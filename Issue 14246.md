# Issue 14246: MPIR build is broken on arm with ubuntu raring

Issue created by migration from Trac.

Original creator: Snark

Original creation time: 2013-04-15 07:40:16

Assignee: drkirkby

CC:  jdemeyer

A change in the binutils on arm in ubuntu raring breaks the build (apparently the asm changed slightly).

I have seen the problem, and ubuntu has patches which solve the problem for their gmp package here:
[https://launchpad.net/ubuntu/+source/gmp/2%3A5.0.5%2Bdfsg-2ubuntu3](https://launchpad.net/ubuntu/+source/gmp/2%3A5.0.5%2Bdfsg-2ubuntu3)
I have been able to check that they fix the compilation issue, but:
 1. I don't know who the author is (it's not documented in the patch as it would be in debian) ;
 2. I don't know if it was forwarded to upstream gmp, and even so, it perhaps wasn't realized that it was also a problem with mpir upstream.

So I'll probably have a mpir-2.6.0.p1.spkg to attach to this bug quite soon. [Notice: again, there might be a mpir-2.6.0.p123 somewhere of which I don't know about... I'm longing for the git transition!]


---

Attachment

Patch to fix the problem


---

Comment by Snark created at 2013-04-15 10:59:39

Changing status from new to needs_review.


---

Comment by Snark created at 2013-04-15 10:59:39

The spkg is too big to attach in trac ; here is the "hg export tip" from my known-working package.


---

Comment by jpflori created at 2013-04-23 21:02:25

You should not attach spkg to trac anyway, but put them somewhere online where you have space and which is publicly available and put a link in the ticket description.
Request William Stein an account on boxen if you don't want to use another place for this.

According to https://launchpad.net/ubuntu/+source/gmp/2%3A5.0.5%2Bdfsg-2ubuntu3 the authir seem to be Adam Conrad as you already mention it in the patch itself, so please update the ticket descritpion.

Trac search quickly showed there's at least a p2 spkg already at #14399, so your spkg should be based on top of that.

I've seen no reports of this problem on mpir-devel by the way, so it would be nice if you could do that!

And the bug looks really stupid.
Is this really invalid syntax in GMP/MPIR? or rather a broken update to as in binutils...
I fear that the line two lines after the fixed one will break when as is updated again...

Ok just read the patch comment and it is indeed a bug in binutils.
It would be nice to document which version is buggy, hoping we can discard the work around at some point.


---

Comment by jpflori created at 2013-04-23 21:02:25

Changing priority from major to critical.


---

Comment by jpflori created at 2013-04-23 21:02:25

Changing status from needs_review to needs_work.


---

Comment by Snark created at 2013-04-24 19:06:37

Since I reported this bug, ubuntu uploaded a package for binutils which contains a workaround for this problem. And as far as I know, the fix was forwarded upstream.

I propose to close this report.


---

Comment by jpflori created at 2013-04-25 18:36:02

Yes let's close this one.


---

Comment by jpflori created at 2013-04-25 18:36:02

Changing status from needs_work to positive_review.


---

Comment by jpflori created at 2013-04-25 18:36:02

Changing keywords from "" to "mpir spkg as binutils".


---

Comment by jdemeyer created at 2013-04-28 12:48:05

Resolution: invalid
