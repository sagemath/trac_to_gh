# Issue 15973: Bug in is_hamiltonian: wrong exceptions are caught

Issue created by migration from Trac.

Original creator: ncohen

Original creation time: 2014-04-22 21:55:58

This happens because in `traveling_salesman_problem` the call to `_scream_is_not_simple` raises a `ValueError` when the graph is not simple, and the same exception is raised when the graph is not hamiltonian.

We can use the `EmptySetError` to differentiate them, as we cannot optimize anything on an empty set.

Nathann


---

Comment by ncohen created at 2014-04-22 21:57:09

Changing status from new to needs_review.


---

Comment by git created at 2014-04-22 22:07:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-04-23 08:19:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2014-04-23 09:56:57

Hi Nathann,

Why not a `NonImplementedError` (with a shorter message)?

Vincent


---

Comment by ncohen created at 2014-04-23 12:55:32

Because I am not sure that `_scream_if_not_simple` should always raise a NotImplementedError in all functions that call it.

What is the problem with long messages ? They give more meaningful information.

Nathann


---

Comment by vdelecroix created at 2014-04-23 17:55:38

Let us go for long messages...

I simplified (I hope) the implementation of the function `_scream...` and correct the doctest in is_hamiltonian. Set it to positive review if you like it...


---

Comment by git created at 2014-04-23 17:56:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2014-04-23 18:28:21

AHahah. Well, it does more tests than in the first version, but I don't think this can ever become a very important problem `:-P`

Nathann


---

Comment by ncohen created at 2014-04-23 18:28:21

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-04-30 08:12:52

Resolution: fixed
