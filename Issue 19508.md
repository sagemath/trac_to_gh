# Issue 19508: Tutorial for new structures in coding theory

archive/issues_019508.json:
```json
{
    "body": "This year, we reworked the API of Sage's coding theory library and now have an object-oriented structure to manage code families, encoders and decoders.\n\nIn this ticket we introduce a thematic tutorial which explains how to use this new API to develop new code families.\n\nThis tutorials relies on a step-by-step example, in which we construct a code, a few encoders for it, a decoder for it and a somehow related channel.\n\nIssue created by migration from https://trac.sagemath.org/ticket/19745\n\n",
    "created_at": "2015-12-18T14:54:29Z",
    "labels": [
        "component: coding theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.0",
    "title": "Tutorial for new structures in coding theory",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19508",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```
This year, we reworked the API of Sage's coding theory library and now have an object-oriented structure to manage code families, encoders and decoders.

In this ticket we introduce a thematic tutorial which explains how to use this new API to develop new code families.

This tutorials relies on a step-by-step example, in which we construct a code, a few encoders for it, a decoder for it and a somehow related channel.

Issue created by migration from https://trac.sagemath.org/ticket/19745





---

archive/issue_comments_267744.json:
```json
{
    "body": "I wrote the tutorial and pushed the branch which contains it...\nBut there's a bug I cannot fix:\n\nanytime I try to compile the documentation, I receive the following error message:\n\n```\nOSError: [thematic_] /home/david/Desktop/sage_coding_project/src/doc/en/thematic_tutorials/structures_in_coding_theory.rst:: WARNING: document isn't included in any toctree\n```\n\neven after running `make doc-clean` and adding this tutorial to `index.rst`.\nThing is, my file appears in `thematic_tutorials` html index page, properly formatted...\n\nIf someone knows how to deal with it, I'll be glad!\n\nIn the meanwhile, one can still read this tutorial and do some comments ;)\n\nDavid\n\n---\nNew commits:",
    "created_at": "2015-12-18T15:00:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267744",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

I wrote the tutorial and pushed the branch which contains it...
But there's a bug I cannot fix:

anytime I try to compile the documentation, I receive the following error message:

```
OSError: [thematic_] /home/david/Desktop/sage_coding_project/src/doc/en/thematic_tutorials/structures_in_coding_theory.rst:: WARNING: document isn't included in any toctree
```

even after running `make doc-clean` and adding this tutorial to `index.rst`.
Thing is, my file appears in `thematic_tutorials` html index page, properly formatted...

If someone knows how to deal with it, I'll be glad!

In the meanwhile, one can still read this tutorial and do some comments ;)

David

---
New commits:



---

archive/issue_comments_267745.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2015-12-18T15:00:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267745",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_267746.json:
```json
{
    "body": "I remember you mentioned this problem ages ago. Post on sage-devel if someone knows what it is.",
    "created_at": "2015-12-18T15:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267746",
    "user": "https://github.com/johanrosenkilde"
}
```

I remember you mentioned this problem ages ago. Post on sage-devel if someone knows what it is.



---

archive/issue_comments_267747.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-18T15:31:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267747",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_267748.json:
```json
{
    "body": "Ok, I got it *in fine* : you also have to add you document in `toctree.rst`. \nAnyway, it works now!",
    "created_at": "2015-12-18T15:32:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267748",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Ok, I got it *in fine* : you also have to add you document in `toctree.rst`. 
Anyway, it works now!



---

archive/issue_comments_267749.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-12-18T15:32:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267749",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_267750.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-18T15:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267750",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_267751.json:
```json
{
    "body": "I fixed some bugs I found, this is still open for review.",
    "created_at": "2015-12-18T15:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267751",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

I fixed some bugs I found, this is still open for review.



---

archive/issue_comments_267752.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-06T13:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267752",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_267753.json:
```json
{
    "body": "I updated this ticket to latest beta, and fixed some broken tests.\nThis is still open for review.",
    "created_at": "2016-01-06T13:28:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267753",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

I updated this ticket to latest beta, and fixed some broken tests.
This is still open for review.



---

archive/issue_comments_267754.json:
```json
{
    "body": "Some comments:\n\n- The second line of\n  {{{\n    ....: class BinaryRepetitionCode(AbstractLinearCode):\n    ....:   _registered_encoders = {}\n  }}}\n  should be indented 4 spaces from the beginning of `class` to reflect Python coding conventions (similar changes are needed throughout the whole tutorial).\n- I would put all of these in ```code_format``` or `:meth:`reference_them``:\n\n```\n- dimension,\n- length,\n- base_field and\n- ambient space\n```\n- This is not formatted properly. In particular, I would make these changes:\n  {{{#!diff\n3. Add this line in the class' constructor::\n+\n-    super(ClassName, self).__init__(base_field, length, \"DefaultEncoder\", \"DefaultDecoder\")\n+      super(ClassName, self).__init__(base_field, length, \"DefaultEncoder\", \"DefaultDecoder\")\n  }}}\n  Similar changes in Section VI.\n- All of those numbered points in the summary are missing periods.\n- You should make this change because `\\t` is a tab character:\n  {{{#!diff\n-return \"\\textnormal{Binary repetition code of length } %s\" % self.length()\n+return \"\\\\textnormal{Binary repetition code of length } %s\" % self.length()\n  }}}\n- It is considered better to have multiline statements wrapped in parentheses rather than use the line break `\\`. The parentheses have the effect that it groups things together in logical units and the line break is not needed.\n- Errors should be phrases, and as such, should not start with a capital letter: `DecodingFailure(\"impossible to find a majority\")`\n\nOtherwise it looks good to me. (Although I'm somewhat torn about using contractions in tutorials/documentation. I leave that decision up to you.)",
    "created_at": "2016-01-07T00:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267754",
    "user": "https://github.com/tscrim"
}
```

Some comments:

- The second line of
  {{{
    ....: class BinaryRepetitionCode(AbstractLinearCode):
    ....:   _registered_encoders = {}
  }}}
  should be indented 4 spaces from the beginning of `class` to reflect Python coding conventions (similar changes are needed throughout the whole tutorial).
- I would put all of these in ```code_format``` or `:meth:`reference_them``:

```
- dimension,
- length,
- base_field and
- ambient space
```
- This is not formatted properly. In particular, I would make these changes:
  {{{#!diff
3. Add this line in the class' constructor::
+
-    super(ClassName, self).__init__(base_field, length, "DefaultEncoder", "DefaultDecoder")
+      super(ClassName, self).__init__(base_field, length, "DefaultEncoder", "DefaultDecoder")
  }}}
  Similar changes in Section VI.
- All of those numbered points in the summary are missing periods.
- You should make this change because `\t` is a tab character:
  {{{#!diff
-return "\textnormal{Binary repetition code of length } %s" % self.length()
+return "\\textnormal{Binary repetition code of length } %s" % self.length()
  }}}
- It is considered better to have multiline statements wrapped in parentheses rather than use the line break `\`. The parentheses have the effect that it groups things together in logical units and the line break is not needed.
- Errors should be phrases, and as such, should not start with a capital letter: `DecodingFailure("impossible to find a majority")`

Otherwise it looks good to me. (Although I'm somewhat torn about using contractions in tutorials/documentation. I leave that decision up to you.)



---

archive/issue_comments_267755.json:
```json
{
    "body": "Hi all,\n\nI think most of the corrections have been done; I add a few comments:\n\n* The repetition code can correct up to `:math: \\lceil n-1/2 \\rceil` errors (you wrote `n/2`); you should also change the `decoding_radius` method in the code.\n* In `decode_to_code`: maybe you should return `vector(GF(2), [GF(2).one()] * n]` instead of `vector(GF(2), [1] * n]`; it's the same for `0`.\n* Some typos: \"all we have to do know is to implement\", \"we can store a lists\".\n* In the channel: maybe change `w[i] += 1` into `w[i] += GF2.one()`.\n* You mixed `message` and `word` in:\n\n```\ndef encode(self, message):\n    return vector(GF(2), [word] * self.code().length())\n```\n* You didn't repeat some of the previous fixes of your code, in the big scripts of part VII (for example: `for i in sample(xrange(V.dimension(), number_err)`), so that it doesn't compile. Take care to do it also for the fixes related to my comments.\n* I don't know if that's a real problem (that's also the case for other chapters): in the .pdf output of the tutorial, some code lines are cropped because they are too long.\n\nOtherwise it looks fine!\n\nJulien",
    "created_at": "2016-01-07T16:59:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267755",
    "user": "https://github.com/jlavauzelle"
}
```

Hi all,

I think most of the corrections have been done; I add a few comments:

* The repetition code can correct up to `:math: \lceil n-1/2 \rceil` errors (you wrote `n/2`); you should also change the `decoding_radius` method in the code.
* In `decode_to_code`: maybe you should return `vector(GF(2), [GF(2).one()] * n]` instead of `vector(GF(2), [1] * n]`; it's the same for `0`.
* Some typos: "all we have to do know is to implement", "we can store a lists".
* In the channel: maybe change `w[i] += 1` into `w[i] += GF2.one()`.
* You mixed `message` and `word` in:

```
def encode(self, message):
    return vector(GF(2), [word] * self.code().length())
```
* You didn't repeat some of the previous fixes of your code, in the big scripts of part VII (for example: `for i in sample(xrange(V.dimension(), number_err)`), so that it doesn't compile. Take care to do it also for the fixes related to my comments.
* I don't know if that's a real problem (that's also the case for other chapters): in the .pdf output of the tutorial, some code lines are cropped because they are too long.

Otherwise it looks fine!

Julien



---

archive/issue_comments_267756.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-08T09:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267756",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_267757.json:
```json
{
    "body": "Hello,\n\nThank you for your comments!\n\nI fixed everything you noticed.\nI also fixed a few more bugs I noticed, several syntax errors and inconsistencies (`DecodingFailure` against `DecodingError` as discussed in #18376) with the existing coding theory library naming conventions.\n\nDavid",
    "created_at": "2016-01-08T09:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267757",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Hello,

Thank you for your comments!

I fixed everything you noticed.
I also fixed a few more bugs I noticed, several syntax errors and inconsistencies (`DecodingFailure` against `DecodingError` as discussed in #18376) with the existing coding theory library naming conventions.

David



---

archive/issue_comments_267758.json:
```json
{
    "body": "Two other things from me (last things, promise):\n\n- `\\mathbb{F}_{2}` can use the standard Sage latex macro `\\GF{2}` (it makes the docs uniform).\n- Where possible, keep line lengths under 80 characters. (I know this isn't possible for some of the code blocks, but in particular, in the tutorial's text this should be achievable).\n\n`@`jlavauzelle Could you add your name to the reviewers list? Also, do you have any other comments?",
    "created_at": "2016-01-10T00:30:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267758",
    "user": "https://github.com/tscrim"
}
```

Two other things from me (last things, promise):

- `\mathbb{F}_{2}` can use the standard Sage latex macro `\GF{2}` (it makes the docs uniform).
- Where possible, keep line lengths under 80 characters. (I know this isn't possible for some of the code blocks, but in particular, in the tutorial's text this should be achievable).

`@`jlavauzelle Could you add your name to the reviewers list? Also, do you have any other comments?



---

archive/issue_comments_267759.json:
```json
{
    "body": "No more comment, it works for me.",
    "created_at": "2016-01-10T10:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267759",
    "user": "https://github.com/jlavauzelle"
}
```

No more comment, it works for me.



---

archive/issue_comments_267760.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-11T09:24:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267760",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_267761.json:
```json
{
    "body": "> Two other things from me (last things, promise):\n\n\nDone! And don't worry, I prefer this to stay a little longer in review and be perfect. \nEspecially I wasn't aware of the `\\GF` macro, it will definitely save me some time later.\n\nDavid",
    "created_at": "2016-01-11T09:26:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267761",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

> Two other things from me (last things, promise):


Done! And don't worry, I prefer this to stay a little longer in review and be perfect. 
Especially I wasn't aware of the `\GF` macro, it will definitely save me some time later.

David



---

archive/issue_comments_267762.json:
```json
{
    "body": "I went through and made some other little tweaks in regards to little grammar and formatting things. If you're happy with my changes, then go ahead and set a positive review.\n\nThis is very well done tutorial, can we get you to write more (and for other areas of Sage)?\n\n---\nNew commits:",
    "created_at": "2016-01-12T13:18:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267762",
    "user": "https://github.com/tscrim"
}
```

I went through and made some other little tweaks in regards to little grammar and formatting things. If you're happy with my changes, then go ahead and set a positive review.

This is very well done tutorial, can we get you to write more (and for other areas of Sage)?

---
New commits:



---

archive/issue_comments_267763.json:
```json
{
    "body": "> I went through and made some other little tweaks in regards to little grammar and formatting things. If you're happy with my changes, then go ahead and set a positive review.\n\n\nI'm happy with the changes, thanks for the help! I'm giving the green light.\n\n> This is very well done tutorial, can we get you to write more (and for other areas of Sage)?\n\n\nMy plans was to rewrite the [original thematic tutorial on coding theory](http://doc.sagemath.org/html/en/thematic_tutorials/coding_theory.html#coding-theory), which can be quite improved according to me.\n\nI'm actually working for Inria's [ACTIS](https://bitbucket.org/lucasdavid/sage_coding_project/wiki/Home) project which aims to enhance Sage's coding theory library, so I have to admit I barely looked at other tutorials `^^'`\n\nIf you think I can improve some of these, I'll be happy to help!\n\nDavid",
    "created_at": "2016-01-12T14:00:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267763",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

> I went through and made some other little tweaks in regards to little grammar and formatting things. If you're happy with my changes, then go ahead and set a positive review.


I'm happy with the changes, thanks for the help! I'm giving the green light.

> This is very well done tutorial, can we get you to write more (and for other areas of Sage)?


My plans was to rewrite the [original thematic tutorial on coding theory](http://doc.sagemath.org/html/en/thematic_tutorials/coding_theory.html#coding-theory), which can be quite improved according to me.

I'm actually working for Inria's [ACTIS](https://bitbucket.org/lucasdavid/sage_coding_project/wiki/Home) project which aims to enhance Sage's coding theory library, so I have to admit I barely looked at other tutorials `^^'`

If you think I can improve some of these, I'll be happy to help!

David



---

archive/issue_comments_267764.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-12T14:00:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267764",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_267765.json:
```json
{
    "body": "Feel free to cc me on the tickets. I'd be happy to help where I can (although I can't do a mathematical review since I really don't know too much about coding theory).",
    "created_at": "2016-01-12T15:53:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267765",
    "user": "https://github.com/tscrim"
}
```

Feel free to cc me on the tickets. I'd be happy to help where I can (although I can't do a mathematical review since I really don't know too much about coding theory).



---

archive/issue_events_054133.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-01-12T22:07:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19508#event-54133"
}
```



---

archive/issue_comments_267766.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-01-12T22:07:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19508#issuecomment-267766",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
