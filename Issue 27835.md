# Issue 27835: Issue in calculus on manifolds with incomplete set of transition maps

Issue created by migration from https://trac.sagemath.org/ticket/28072

Original creator: egourgoulhon

Original creation time: 2019-06-27 14:07:04

CC:  tscrim

Keywords: manifolds, scalar field

In Sage 8.8, we have

```
sage: M = Manifold(2, 'M')
sage: X.<x,y> = M.chart()
sage: Y.<u,v> = M.chart()
sage: X_to_Y = X.transition_map(Y, [x+y, x-y])
sage: f = M.scalar_field({X: x*y})
sage: g = M.scalar_field({Y: u*v})
sage: f + g
...
KeyError: (Chart (M, (u, v)), Chart (M, (x, y)))
```

If one initializes the inverse transition map, it is OK:

```
sage: X_to_Y.inverse()
Change of coordinates from Chart (M, (u, v)) to Chart (M, (x, y))
sage: f + g
Scalar field on the 2-dimensional differentiable manifold M
sage: _.display()
M --> R
(x, y) |--> x^2 + x*y - y^2
(u, v) |--> 1/4*u^2 + u*v - 1/4*v^2
```

But even without knowing the inverse transition map, Sage should be capable to compute the value of `f + g`, with the result expressed in the chart `X` only.


---

Comment by egourgoulhon created at 2019-06-27 14:34:56

New commits:


---

Comment by egourgoulhon created at 2019-06-27 14:34:56

Changing status from new to needs_review.


---

Comment by tscrim created at 2019-06-29 05:52:27

LGTM.


---

Comment by tscrim created at 2019-06-29 05:52:27

Changing status from needs_review to positive_review.


---

Comment by egourgoulhon created at 2019-07-01 09:49:41

Thanks for the review!


---

Comment by vbraun created at 2019-07-05 15:29:18

Resolution: fixed
