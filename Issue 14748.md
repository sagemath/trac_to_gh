# Issue 14748: Let zlib 1.2.8 build on Cygwin

Issue created by migration from https://trac.sagemath.org/ticket/14985

Original creator: jpflori

Original creation time: 2013-07-30 20:29:12

CC:  jdemeyer tscrim

The update from 1.2.6 to 1.2.8 broke building on Cygwin because of calls to the gzopen_w function introduced in 1.2.7 and unavailable on Cygwin.


---

Comment by jpflori created at 2013-07-30 20:29:31

See http://trac.sagemath.org/ticket/14661#comment:6 for the original report.


---

Comment by jpflori created at 2013-07-30 20:34:43

See https://github.com/madler/zlib/issues/45 on upstream bugtracker.


---

Comment by jpflori created at 2013-07-31 22:07:18

Maybe we could make this a blocker for 5.11?
Note that different fixes are already proposed on the upstream bugtracker, so that crafting an spkg will not take ages.

I'm sorry I had no time to test the 5.10 rc's on Cygwin and let that go in...
let's try to release a 5.11 version compilable on Cygwin(32)!


---

Attachment

Cygwin's folk patch


---

Comment by jpflori created at 2013-08-01 09:56:12

Such a patch prevents the definition of gzopen_w on Windows, but he, the Cygwin's folk does not care, and we don't support MSVC so, we can do just the same I guess.


---

Attachment

Spkg diff, for review only.


---

Comment by jpflori created at 2013-08-06 21:19:15

Changing keywords from "" to "cygwin zlib spkg".


---

Comment by jpflori created at 2013-08-06 21:19:15

Changing status from new to needs_review.


---

Comment by jpflori created at 2013-08-06 21:19:15

Changing priority from major to critical.


---

Comment by jpflori created at 2013-08-06 21:19:15

I've upped a spkg using the same fix as Cygwin.


---

Comment by jpflori created at 2013-08-06 21:20:35

Cannot test on a real install till tomorrow...


---

Comment by tscrim created at 2013-08-07 00:10:11

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2013-08-07 00:10:11

It built for me both on cygwin 32 and 64.


---

Comment by jdemeyer created at 2013-08-10 06:38:34

Resolution: fixed
