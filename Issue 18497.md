# Issue 18497: Construct an interactive_simplex_method.LPDictionary from a MixedIntegerLinearProgram

archive/issues_018497.json:
```json
{
    "body": "CC:  @nathanncohen @yuan-zhou zwang @novoselt @dimpase @videlec\n\nKeywords: lp\n\nFor teaching, presentation, and debugging purposes, it could be powerful \nto have a function that sets up a sage.numerical.interactive_simplex_method.LPDictionary\ncorresponding to the current basis of a MixedIntegerLinearProgram (with all variables real). \n\n#18685 added the prerequisite basis status information for the case of the GLPK backend.\n#18688 provides corresponding MixedIntegerLinearProgram methods.\n\n#18732 adds the missing functions for retrieving the data of the dictionary (for the GLPK backend). \n#18733 provides corresponding MixedIntegerLinearProgram methods.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18734\n\n",
    "created_at": "2015-06-19T03:32:31Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.2",
    "title": "Construct an interactive_simplex_method.LPDictionary from a MixedIntegerLinearProgram",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18497",
    "user": "@mkoeppe"
}
```
CC:  @nathanncohen @yuan-zhou zwang @novoselt @dimpase @videlec

Keywords: lp

For teaching, presentation, and debugging purposes, it could be powerful 
to have a function that sets up a sage.numerical.interactive_simplex_method.LPDictionary
corresponding to the current basis of a MixedIntegerLinearProgram (with all variables real). 

#18685 added the prerequisite basis status information for the case of the GLPK backend.
#18688 provides corresponding MixedIntegerLinearProgram methods.

#18732 adds the missing functions for retrieving the data of the dictionary (for the GLPK backend). 
#18733 provides corresponding MixedIntegerLinearProgram methods.

Issue created by migration from https://trac.sagemath.org/ticket/18734





---

archive/issue_comments_251391.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-06-19T03:32:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251391",
    "user": "@mkoeppe"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_251392.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to numerical.",
    "created_at": "2015-06-19T03:32:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251392",
    "user": "@mkoeppe"
}
```

Changing component from PLEASE CHANGE to numerical.



---

archive/issue_comments_251393.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-30T06:39:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251393",
    "user": "@mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_251394.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-06-30T06:39:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251394",
    "user": "@mkoeppe"
}
```

New commits:



---

archive/issue_comments_251395.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-06-30T07:05:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251395",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_251396.json:
```json
{
    "body": "Hello,\n\nYou assume in this code that the backend is GLPK. Also, I have to say that I do not like this `get_variables` function much. It returns to the users the symbolic variables of the LP, to which he already has access through his calls to `new_variable`. We may need this kind of things for our own methods, but in this case I think that it would be better to work directly with the integer id of the variables than with the symbolic ones.\n\nThat woud lead us to make function like `get_values` accept an integer parameter (a variable's id), which is not a bad move. Especially if we plan to work with the dual LP later.\n\nAlso, return `[k for k in self._variables.keys()]` is better written as `self._variables().keys()`\n\nNathann\n\nP.S.: Oh. And what about renaming \"construct_interactive_lp\" to \"interactive_linear_program\"? We usually try to write the long names in Sage.",
    "created_at": "2015-06-30T07:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251396",
    "user": "@nathanncohen"
}
```

Hello,

You assume in this code that the backend is GLPK. Also, I have to say that I do not like this `get_variables` function much. It returns to the users the symbolic variables of the LP, to which he already has access through his calls to `new_variable`. We may need this kind of things for our own methods, but in this case I think that it would be better to work directly with the integer id of the variables than with the symbolic ones.

That woud lead us to make function like `get_values` accept an integer parameter (a variable's id), which is not a bad move. Especially if we plan to work with the dual LP later.

Also, return `[k for k in self._variables.keys()]` is better written as `self._variables().keys()`

Nathann

P.S.: Oh. And what about renaming "construct_interactive_lp" to "interactive_linear_program"? We usually try to write the long names in Sage.



---

archive/issue_comments_251397.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-30T07:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251397",
    "user": "@nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_251398.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-06-30T18:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251398",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_251399.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-06-30T18:51:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251399",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_251400.json:
```json
{
    "body": "Hi Nathann,\n\n`new_variable` has been dropped for this ticket, and the method has been renamed to `interactive_linear_program` as you suggest.\n\nThe code is indeed GLPK-specific (explicit testing for it has been added) -- more general support would require designing a common interface to basis status, which is #18688.",
    "created_at": "2015-06-30T19:38:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251400",
    "user": "@mkoeppe"
}
```

Hi Nathann,

`new_variable` has been dropped for this ticket, and the method has been renamed to `interactive_linear_program` as you suggest.

The code is indeed GLPK-specific (explicit testing for it has been added) -- more general support would require designing a common interface to basis status, which is #18688.



---

archive/issue_comments_251401.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-30T19:38:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251401",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_251402.json:
```json
{
    "body": "Hello !\n\n> `new_variable` has been dropped for this ticket, and the method has been renamed to `interactive_linear_program` as you suggest.\n\nThanks!\n\n> The code is indeed GLPK-specific (explicit testing for it has been added) -- more general support would require designing a common interface to basis status, which is #18688.\n\nOkayokayokay. For as long as a meaningful exception is raised when the backend is not one that the code handle, it's fine by me. Especially since in this case the 'right backend' is GLPK. It's more awkward when the only backend that supports a feature is one that Sage does not ship by default.\n\nNathann",
    "created_at": "2015-07-01T10:45:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251402",
    "user": "@nathanncohen"
}
```

Hello !

> `new_variable` has been dropped for this ticket, and the method has been renamed to `interactive_linear_program` as you suggest.

Thanks!

> The code is indeed GLPK-specific (explicit testing for it has been added) -- more general support would require designing a common interface to basis status, which is #18688.

Okayokayokay. For as long as a meaningful exception is raised when the backend is not one that the code handle, it's fine by me. Especially since in this case the 'right backend' is GLPK. It's more awkward when the only backend that supports a feature is one that Sage does not ship by default.

Nathann



---

archive/issue_comments_251403.json:
```json
{
    "body": "Hello,\n\nThere are some possible improvements in the documentation:\n- some of the lines are too long. Try to make them the same width as they are in the rest of the file.\n- If you mention a class you can make a clickable reference to it by using :class:`name_of_the_class`\n- You wrote ```\"std\"``` (as a string) and ```standard``` (as a variable). I guess both of them should be strings.\n- you should add a line break after `TESTS::`\n\nFor all of these, look at the [reference manual](http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings).\n\nVincent",
    "created_at": "2015-08-15T15:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251403",
    "user": "@videlec"
}
```

Hello,

There are some possible improvements in the documentation:
- some of the lines are too long. Try to make them the same width as they are in the rest of the file.
- If you mention a class you can make a clickable reference to it by using :class:`name_of_the_class`
- You wrote ```"std"``` (as a string) and ```standard``` (as a variable). I guess both of them should be strings.
- you should add a line break after `TESTS::`

For all of these, look at the [reference manual](http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings).

Vincent



---

archive/issue_comments_251404.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-08-28T08:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251404",
    "user": "@fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_251405.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-02T20:46:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251405",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_251406.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-09-02T20:49:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251406",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_251407.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-09-11T06:51:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251407",
    "user": "@fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_251408.json:
```json
{
    "body": "branch does not apply, needs rebase",
    "created_at": "2015-09-11T06:51:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251408",
    "user": "@fchapoton"
}
```

branch does not apply, needs rebase



---

archive/issue_comments_251409.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-09-11T23:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251409",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_251410.json:
```json
{
    "body": "It's rebased.",
    "created_at": "2015-09-11T23:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251410",
    "user": "@mkoeppe"
}
```

It's rebased.



---

archive/issue_comments_251411.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-09-11T23:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251411",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_251412.json:
```json
{
    "body": "\n```\n+        TESTS::\n+            sage: b = p.get_backend()\n```\n\nThere should be a blank line in between these two lines.",
    "created_at": "2015-09-14T13:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251412",
    "user": "@fchapoton"
}
```


```
+        TESTS::
+            sage: b = p.get_backend()
```

There should be a blank line in between these two lines.



---

archive/issue_comments_251413.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-09-16T18:20:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251413",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_251414.json:
```json
{
    "body": "Needs review.",
    "created_at": "2015-09-18T22:46:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251414",
    "user": "@mkoeppe"
}
```

Needs review.



---

archive/issue_comments_251415.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-10-24T04:37:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251415",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_251416.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-10-24T05:14:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251416",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_251417.json:
```json
{
    "body": "This supports two backends now: GLPK, COIN. \nNeeds review.",
    "created_at": "2015-10-24T17:11:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251417",
    "user": "@mkoeppe"
}
```

This supports two backends now: GLPK, COIN. 
Needs review.



---

archive/issue_comments_251418.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-11-02T17:16:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251418",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_251419.json:
```json
{
    "body": "there is an indentation error that prevents docs from building. Here is how it should be:\n\n```\ndiff --git a/src/sage/numerical/mip.pyx b/src/sage/numerical/mip.pyx\nindex 76a7eff..01ce34a 100644\n--- a/src/sage/numerical/mip.pyx\n+++ b/src/sage/numerical/mip.pyx\n@@ -2489,9 +2489,9 @@ cdef class MixedIntegerLinearProgram(SageObject):\n         INPUT:\n \n         - ``form`` -- (default: ``\"standard\"``) a string specifying return type:\n-        either ``None``, or ``\"std\"`` or ``\"standard\"``, respectively returns an\n-        instance of :class:`InteractiveLPProblem` or an instance of \n-        :class:`InteractiveLPProblemStandardForm`\n+          either ``None``, or ``\"std\"`` or ``\"standard\"``, respectively returns an\n+          instance of :class:`InteractiveLPProblem` or an instance of \n+          :class:`InteractiveLPProblemStandardForm`\n \n         OUTPUT:\n \n```\n",
    "created_at": "2015-11-11T23:49:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251419",
    "user": "@dimpase"
}
```

there is an indentation error that prevents docs from building. Here is how it should be:

```
diff --git a/src/sage/numerical/mip.pyx b/src/sage/numerical/mip.pyx
index 76a7eff..01ce34a 100644
--- a/src/sage/numerical/mip.pyx
+++ b/src/sage/numerical/mip.pyx
@@ -2489,9 +2489,9 @@ cdef class MixedIntegerLinearProgram(SageObject):
         INPUT:
 
         - ``form`` -- (default: ``"standard"``) a string specifying return type:
-        either ``None``, or ``"std"`` or ``"standard"``, respectively returns an
-        instance of :class:`InteractiveLPProblem` or an instance of 
-        :class:`InteractiveLPProblemStandardForm`
+          either ``None``, or ``"std"`` or ``"standard"``, respectively returns an
+          instance of :class:`InteractiveLPProblem` or an instance of 
+          :class:`InteractiveLPProblemStandardForm`
 
         OUTPUT:
 
```




---

archive/issue_comments_251420.json:
```json
{
    "body": "Attachment [err-doctests](tarball://root/attachments/some-uuid/ticket18734/err-doctests) by @dimpase created at 2015-11-11 23:53:21\n\ndoctest errors with Sage 6.10 beta3.",
    "created_at": "2015-11-11T23:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251420",
    "user": "@dimpase"
}
```

Attachment [err-doctests](tarball://root/attachments/some-uuid/ticket18734/err-doctests) by @dimpase created at 2015-11-11 23:53:21

doctest errors with Sage 6.10 beta3.



---

archive/issue_comments_251421.json:
```json
{
    "body": "please see doctest errors in the attachment. Looks like there should be more dependencies, no?",
    "created_at": "2015-11-11T23:54:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251421",
    "user": "@dimpase"
}
```

please see doctest errors in the attachment. Looks like there should be more dependencies, no?



---

archive/issue_comments_251422.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-11-11T23:55:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251422",
    "user": "@dimpase"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_251423.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-11-16T17:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251423",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_251424.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-11-16T17:51:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251424",
    "user": "zwang"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_251425.json:
```json
{
    "body": "fixed.",
    "created_at": "2015-11-16T17:51:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251425",
    "user": "zwang"
}
```

fixed.



---

archive/issue_comments_251426.json:
```json
{
    "body": "\n```\n$ sage -tp --long src/sage/numerical/mip.pyx \nRunning doctests with ID 2015-11-16-19-56-36-49d68035.\nGit branch: boo\nUsing --optional=bliss,cbc,d3js,database_gap,database_jones_numfield,gap_packages,mpir,nauty,python2,sage,scons\nDoctesting 1 file using 4 threads.\nsage -t --long --warn-long 46.3 src/sage/numerical/mip.pyx\n**********************************************************************\nFile \"src/sage/numerical/mip.pyx\", line 2527, in sage.numerical.mip.MixedIntegerLinearProgram.number_of_variables.interactive_linear_program\nFailed example:\n    d2.is_optimal()\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   1 of  24 in sage.numerical.mip.MixedIntegerLinearProgram.number_of_variables.interactive_linear_program\n    [514 tests, 1 failure, 1.41 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 46.3 src/sage/numerical/mip.pyx  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 1.5 seconds\n    cpu time: 1.4 seconds\n    cumulative wall time: 1.4 seconds\n```\n",
    "created_at": "2015-11-16T19:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251426",
    "user": "@dimpase"
}
```


```
$ sage -tp --long src/sage/numerical/mip.pyx 
Running doctests with ID 2015-11-16-19-56-36-49d68035.
Git branch: boo
Using --optional=bliss,cbc,d3js,database_gap,database_jones_numfield,gap_packages,mpir,nauty,python2,sage,scons
Doctesting 1 file using 4 threads.
sage -t --long --warn-long 46.3 src/sage/numerical/mip.pyx
**********************************************************************
File "src/sage/numerical/mip.pyx", line 2527, in sage.numerical.mip.MixedIntegerLinearProgram.number_of_variables.interactive_linear_program
Failed example:
    d2.is_optimal()
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   1 of  24 in sage.numerical.mip.MixedIntegerLinearProgram.number_of_variables.interactive_linear_program
    [514 tests, 1 failure, 1.41 s]
----------------------------------------------------------------------
sage -t --long --warn-long 46.3 src/sage/numerical/mip.pyx  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 1.5 seconds
    cpu time: 1.4 seconds
    cumulative wall time: 1.4 seconds
```




---

archive/issue_comments_251427.json:
```json
{
    "body": "Attachment [sage.pdf](tarball://root/attachments/some-uuid/ticket18734/sage.pdf) by @dimpase created at 2015-11-16 20:02:40\n\nwhat I get as 'view(d2)' in the latest test error",
    "created_at": "2015-11-16T20:02:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251427",
    "user": "@dimpase"
}
```

Attachment [sage.pdf](tarball://root/attachments/some-uuid/ticket18734/sage.pdf) by @dimpase created at 2015-11-16 20:02:40

what I get as 'view(d2)' in the latest test error



---

archive/issue_comments_251428.json:
```json
{
    "body": "this is on Ubuntu 14.04, x86_64",
    "created_at": "2015-11-16T20:05:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251428",
    "user": "@dimpase"
}
```

this is on Ubuntu 14.04, x86_64



---

archive/issue_comments_251429.json:
```json
{
    "body": "tests do not pass, see patchbot reports",
    "created_at": "2015-11-24T07:30:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251429",
    "user": "@fchapoton"
}
```

tests do not pass, see patchbot reports



---

archive/issue_comments_251430.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-11-24T07:30:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251430",
    "user": "@fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_251431.json:
```json
{
    "body": "ping?",
    "created_at": "2016-01-15T12:24:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251431",
    "user": "@dimpase"
}
```

ping?



---

archive/issue_comments_251432.json:
```json
{
    "body": "Just to comment on the test error: of course it is not optimal since it has a positive coefficient and of course it is optimal since that is just numerical noise. There were some places in interactive problems/dictionaries that were trying to mitigate such issues, but they were not perfect and we agreed to just get rid of them all together - the code is for learning \"ideal simplex method\" and works perfectly with rationals, numeric computations and errors are a different topic and are taken care off by \"real solvers\".",
    "created_at": "2016-01-17T19:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251432",
    "user": "@novoselt"
}
```

Just to comment on the test error: of course it is not optimal since it has a positive coefficient and of course it is optimal since that is just numerical noise. There were some places in interactive problems/dictionaries that were trying to mitigate such issues, but they were not perfect and we agreed to just get rid of them all together - the code is for learning "ideal simplex method" and works perfectly with rationals, numeric computations and errors are a different topic and are taken care off by "real solvers".



---

archive/issue_comments_251433.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-03T08:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251433",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_251434.json:
```json
{
    "body": "Changed the example so that the optimal dictionary is not dual degenerate, so the test should now work. \n\nAlso removed the \"get_variables\" method which had creeped in again.\nAnd rebased to current develop.\n\nNeeds review.\n----\nNew commits:",
    "created_at": "2016-03-03T08:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251434",
    "user": "@mkoeppe"
}
```

Changed the example so that the optimal dictionary is not dual degenerate, so the test should now work. 

Also removed the "get_variables" method which had creeped in again.
And rebased to current develop.

Needs review.
----
New commits:



---

archive/issue_comments_251435.json:
```json
{
    "body": "`form == None` should be `form is None`.\n\nAnd there should be test(s) for non-default value(s) of the parameter `form`.",
    "created_at": "2016-03-03T08:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251435",
    "user": "@dimpase"
}
```

`form == None` should be `form is None`.

And there should be test(s) for non-default value(s) of the parameter `form`.



---

archive/issue_comments_251436.json:
```json
{
    "body": "I also do not like that the code seems to assume that the default backend is always GLPK. If this is true this needs to be fixed. One might run\n\n```\ndefault_mip_solver()\n```\n\nto see the default.",
    "created_at": "2016-03-03T09:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251436",
    "user": "@dimpase"
}
```

I also do not like that the code seems to assume that the default backend is always GLPK. If this is true this needs to be fixed. One might run

```
default_mip_solver()
```

to see the default.



---

archive/issue_comments_251437.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-04T00:48:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251437",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_251438.json:
```json
{
    "body": "you don't seem to need `slack_names` if `form is None`, why would you always create them?\n\n\n```\n+        # Construct slack names\n+        slack_names = [format(back_end.row_name(i), 'w', i) for i in range(back_end.nrows())]\n+\n+        A = coef_matrix\n+        b = upper_bound_vector\n+        c = objective_coefs_vector\n+        x = var_names\n+        w = slack_names\n+\n+        if form is None:\n+            from sage.numerical.interactive_simplex_method import InteractiveLPProblem\n+            return InteractiveLPProblem(A, b, c, x), None\n+        elif form == 'standard' or form == 'std':\n+            from sage.numerical.interactive_simplex_method import InteractiveLPProblemStandardForm\n```\n",
    "created_at": "2016-03-04T12:25:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251438",
    "user": "@dimpase"
}
```

you don't seem to need `slack_names` if `form is None`, why would you always create them?


```
+        # Construct slack names
+        slack_names = [format(back_end.row_name(i), 'w', i) for i in range(back_end.nrows())]
+
+        A = coef_matrix
+        b = upper_bound_vector
+        c = objective_coefs_vector
+        x = var_names
+        w = slack_names
+
+        if form is None:
+            from sage.numerical.interactive_simplex_method import InteractiveLPProblem
+            return InteractiveLPProblem(A, b, c, x), None
+        elif form == 'standard' or form == 'std':
+            from sage.numerical.interactive_simplex_method import InteractiveLPProblemStandardForm
```




---

archive/issue_comments_251439.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-05T04:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251439",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_251440.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-03-05T09:32:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251440",
    "user": "@dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_251441.json:
```json
{
    "body": "ok, good :)",
    "created_at": "2016-03-05T09:32:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251441",
    "user": "@dimpase"
}
```

ok, good :)



---

archive/issue_comments_251442.json:
```json
{
    "body": "sorry, please have a look at the patchbots' output:\n\n```\n OUTPUT::\n```\n\nin mip.pyx should be \n\n```\n OUTPUT:\n```\n",
    "created_at": "2016-03-05T09:36:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251442",
    "user": "@dimpase"
}
```

sorry, please have a look at the patchbots' output:

```
 OUTPUT::
```

in mip.pyx should be 

```
 OUTPUT:
```




---

archive/issue_comments_251443.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-03-05T09:36:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251443",
    "user": "@dimpase"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_251444.json:
```json
{
    "body": "after you fix this little typo, please feel free to set the ticket to positive review.",
    "created_at": "2016-03-05T09:37:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251444",
    "user": "@dimpase"
}
```

after you fix this little typo, please feel free to set the ticket to positive review.



---

archive/issue_comments_251445.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-05T15:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251445",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_251446.json:
```json
{
    "body": "Fixed, it should have been \"EXAMPLE::\" actually.\n\nThanks for reviewing, Dima.",
    "created_at": "2016-03-05T16:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251446",
    "user": "@mkoeppe"
}
```

Fixed, it should have been "EXAMPLE::" actually.

Thanks for reviewing, Dima.



---

archive/issue_comments_251447.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2016-03-05T16:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251447",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_251448.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-03-06T10:03:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18497",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18497#issuecomment-251448",
    "user": "@vbraun"
}
```

Resolution: fixed
