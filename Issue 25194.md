# Issue 25194: Timeouts in lattice precision

Issue created by migration from Trac.

Original creator: saraedum

Original creation time: 2018-05-23 11:49:01

CC:  caruso roed chapoton

The patchbots time out with some lattice precision tests https://patchbot.sagemath.org/log/0/Ubuntu/18.04/x86_64/4.15.0-20-generic/petitbonum/2018-05-11%2012:03:31?short

I have also seen the same issues with [GitLab](GitLab) CI tests. The timeout is in `padic_lattice_element` here:

```
sage: R = ZpLC(2, label='init') # indirect doctest ## line 868 ##
sage: R ## line 869 ##
2-adic Ring with lattice-cap precision (label: init)
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 871 ##
0
sage: R = ZpLC(7, label='init') ## line 878 ##
sage: TestSuite(R).run(skip='_test_teichmuller') ## line 879 ##
```


and in `padic_base_leaves` here

```
sage: TestSuite(R).run(skip=['_test_teichmuller']) ## line 13 ##
```



---

Comment by saraedum created at 2018-05-23 12:16:22

I have not run doctests yet, so let's see if the patchbots are happy now.
----
New commits:


---

Comment by saraedum created at 2018-05-23 12:16:22

Changing status from new to needs_review.


---

Comment by git created at 2018-05-23 12:19:27

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by chapoton created at 2018-05-23 19:25:38

I have launched my patchbot having the timeout issue, to see if the branch brings any progress.


---

Comment by chapoton created at 2018-05-24 05:25:23

This indeed seems to fix the timeout issue (see petibonum report)

Note: my patchbot has found some pyflakes errors in the modified files, see the pyflakes plugin.


---

Comment by jdemeyer created at 2018-05-24 19:39:22

FYI: short doctests should take at most 1 second or so and long doctests at most 30 seconds (unless for exceptional reasons).


---

Comment by caruso created at 2018-05-24 22:01:49

I fixed the pyflakes warnings.
----
New commits:


---

Comment by saraedum created at 2018-05-26 11:08:18

Xavier, your changes look good. Can you review my original changes?


---

Comment by davidloeffler created at 2018-05-26 14:58:20

Changing status from needs_review to positive_review.


---

Comment by davidloeffler created at 2018-05-26 14:58:20

Changes look reasonable + it gets the timings down to an acceptable level. Positive review.


---

Comment by vbraun created at 2018-05-28 07:45:39

Resolution: fixed


---

Comment by embray created at 2018-05-31 09:48:59

As noted on the mailing list, I am also getting


```
sage -t src/sage/rings/padics/padic_base_leaves.py
    Timed out (with segmentation fault after interrupt)
```


on cygwin.  I will test this patch and see if the tests at least pass with these tests skipped by default (and I will also test with `--long`)
