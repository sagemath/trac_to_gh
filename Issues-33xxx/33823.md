# Issue 33823: sage -t --optional='sage,!FEATURE'

archive/issues_033586.json:
```json
{
    "body": "`sage -t --optional='sage,!FEATURE'` will disable autodetection of `FEATURE`.\n\nUseful for checking sequences of `# optional - FEATURE` annotations in particular when `FEATURE` is standard in Sage, for example `sage.misc.cython` (#33029):\n\n```\n./sage -t --optional='sage,!sage.misc.cython' src/sage/misc/inherit_comparison.pyx  \n```\n\n\nAlso, `sage -t --optional='sage,optional,!FEATURE'` will remove it from the list of optional features supplied by the package list and disable auto-detection. \n\nFor example, when the optional SPKG `bliss` is installed, `--optional='sage,optional'` would expand to a list including `bliss`. By using `--optional='sage,optional,!bliss'`, it can be removed.\n\n\n\nCC:  @kwankyu @orlitzky @kiwifb @seblabbe\n\nReviewer: Sebastian Oehms\n\nAuthor: Matthias Koeppe\n\nBranch: ba86146e5a5e3308026aac49d87d2716a80c6a93\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33823\n\n",
    "closed_at": "2022-06-12T23:08:44Z",
    "created_at": "2022-05-08T23:39:24Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "sage -t --optional='sage,!FEATURE'",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33823",
    "user": "https://github.com/mkoeppe"
}
```
`sage -t --optional='sage,!FEATURE'` will disable autodetection of `FEATURE`.

Useful for checking sequences of `# optional - FEATURE` annotations in particular when `FEATURE` is standard in Sage, for example `sage.misc.cython` (#33029):

```
./sage -t --optional='sage,!sage.misc.cython' src/sage/misc/inherit_comparison.pyx  
```


Also, `sage -t --optional='sage,optional,!FEATURE'` will remove it from the list of optional features supplied by the package list and disable auto-detection. 

For example, when the optional SPKG `bliss` is installed, `--optional='sage,optional'` would expand to a list including `bliss`. By using `--optional='sage,optional,!bliss'`, it can be removed.



CC:  @kwankyu @orlitzky @kiwifb @seblabbe

Reviewer: Sebastian Oehms

Author: Matthias Koeppe

Branch: ba86146e5a5e3308026aac49d87d2716a80c6a93

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33823





---

archive/issue_comments_674608.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,11 @@\n This will disable autodetection of `FEATURE`.\n \n-Useful for checking `# optional - FEATURE` annotations in particular when `FEATURE` is standard in Sage, for example `sage.misc.cython` (#33029).\n+Useful for checking `# optional - FEATURE` annotations in particular when `FEATURE` is standard in Sage, for example `sage.misc.cython` (#33029):\n+\n+```\n+./sage -t --optional='sage,!sage.misc.cython' src/sage/misc/inherit_comparison.pyx  \n+```\n+\n \n Summary: sage -t --optional=sage,!FEATURE\n \n``````\n",
    "created_at": "2022-05-09T00:20:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674608",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,11 @@
 This will disable autodetection of `FEATURE`.
 
-Useful for checking `# optional - FEATURE` annotations in particular when `FEATURE` is standard in Sage, for example `sage.misc.cython` (#33029).
+Useful for checking `# optional - FEATURE` annotations in particular when `FEATURE` is standard in Sage, for example `sage.misc.cython` (#33029):
+
+```
+./sage -t --optional='sage,!sage.misc.cython' src/sage/misc/inherit_comparison.pyx  
+```
+
 
 Summary: sage -t --optional=sage,!FEATURE
 
``````




---

archive/issue_comments_674609.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2022-05-09T00:20:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674609",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_674610.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/sage__t___optional__sage__feature_\"",
    "created_at": "2022-05-09T00:21:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674610",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/sage__t___optional__sage__feature_"



---

archive/issue_comments_674611.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-05-09T00:22:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674611",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_674612.json:
```json
{
    "body": "<a id='comment:4'></a>New commits:",
    "created_at": "2022-05-09T00:22:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674612",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>New commits:



---

archive/issue_comments_674613.json:
```json
{
    "body": "Changing commit from \"\" to \"800032050b15c7b743635b7c08892375f7f5c563\"",
    "created_at": "2022-05-09T00:22:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674613",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "800032050b15c7b743635b7c08892375f7f5c563"



---

archive/issue_comments_674614.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,16 @@\n+`sage -t --optional='sage,!FEATURE'` will disable autodetection of `FEATURE`.\n+\n+Useful for checking `# optional - FEATURE` annotations in particular when `FEATURE` is standard in Sage, for example `sage.misc.cython` (#33029):\n+\n+```\n+./sage -t --optional='sage,!sage.misc.cython' src/sage/misc/inherit_comparison.pyx  \n+```\n+\n+\n+Also, `sage -t --optional='sage,optional,!FEATURE'` will remove it from the list of optional features supplied by the package list and disable auto-detection. \n+\n+For example, when the optional SPKG `bliss` is installed, `--optional='sage,optional'` would expand to a list including `bliss`. By using `--optional='sage,optional,!bliss'`, it can be removed.\n+\n \n \n Summary: sage -t --optional=sage,!FEATURE\n``````\n",
    "created_at": "2022-05-09T00:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674614",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,16 @@
+`sage -t --optional='sage,!FEATURE'` will disable autodetection of `FEATURE`.
+
+Useful for checking `# optional - FEATURE` annotations in particular when `FEATURE` is standard in Sage, for example `sage.misc.cython` (#33029):
+
+```
+./sage -t --optional='sage,!sage.misc.cython' src/sage/misc/inherit_comparison.pyx  
+```
+
+
+Also, `sage -t --optional='sage,optional,!FEATURE'` will remove it from the list of optional features supplied by the package list and disable auto-detection. 
+
+For example, when the optional SPKG `bliss` is installed, `--optional='sage,optional'` would expand to a list including `bliss`. By using `--optional='sage,optional,!bliss'`, it can be removed.
+
 
 
 Summary: sage -t --optional=sage,!FEATURE
``````




---

archive/issue_comments_674615.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-09T00:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674615",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_674616.json:
```json
{
    "body": "Changing commit from \"800032050b15c7b743635b7c08892375f7f5c563\" to \"d0a52ed409ed07ae060c305f7481ab41479d3403\"",
    "created_at": "2022-05-09T00:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674616",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "800032050b15c7b743635b7c08892375f7f5c563" to "d0a52ed409ed07ae060c305f7481ab41479d3403"



---

archive/issue_comments_674617.json:
```json
{
    "body": "<a id='comment:8'></a>How about respecting `--disable-bliss` instead?",
    "created_at": "2022-05-09T19:16:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674617",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:8'></a>How about respecting `--disable-bliss` instead?



---

archive/issue_comments_674618.json:
```json
{
    "body": "<a id='comment:9'></a>We don't have a mechanism for that, and it does not help for the main use case of this ticket - disabling standard features such as `sage.misc.cython` when doctesting.",
    "created_at": "2022-05-09T20:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674618",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>We don't have a mechanism for that, and it does not help for the main use case of this ticket - disabling standard features such as `sage.misc.cython` when doctesting.



---

archive/issue_comments_674619.json:
```json
{
    "body": "<a id='comment:10'></a>Yes, you are giving yourself some tools to be able to isolate what you are testing more. Which is interesting in and of itself. But if we completely migrate to pytest (let's be honest that will/would take years), will that feature survive the migration? Does pytest support such disabling?",
    "created_at": "2022-05-09T20:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674619",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:10'></a>Yes, you are giving yourself some tools to be able to isolate what you are testing more. Which is interesting in and of itself. But if we completely migrate to pytest (let's be honest that will/would take years), will that feature survive the migration? Does pytest support such disabling?



---

archive/issue_comments_674620.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:9 mkoeppe]:\n> We don't have a mechanism for that\n\n\nIt worked for years until you added runtime detection that overrides it. Now you want to add a third layer of complexity without fixing the previous two.\n\nI posted one possible solution recently on the mailing list and another ticket. Another (inevitable, eventually) option is to add a `./configure` script to whatever modularized component of sage requires bliss, and to copy `AC_ARG_ENABLE([bliss])` there. Then the \"feature\" that detects it from the other components becomes simply e.g. `import sage.whatever.BLISS`. There is already precedent for having setup.py run `sh ./configure` to keep that component pip-installable.",
    "created_at": "2022-05-09T20:45:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674620",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:11'></a>Replying to [comment:9 mkoeppe]:
> We don't have a mechanism for that


It worked for years until you added runtime detection that overrides it. Now you want to add a third layer of complexity without fixing the previous two.

I posted one possible solution recently on the mailing list and another ticket. Another (inevitable, eventually) option is to add a `./configure` script to whatever modularized component of sage requires bliss, and to copy `AC_ARG_ENABLE([bliss])` there. Then the "feature" that detects it from the other components becomes simply e.g. `import sage.whatever.BLISS`. There is already precedent for having setup.py run `sh ./configure` to keep that component pip-installable.



---

archive/issue_comments_674621.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 mjo]:\n> Replying to [comment:9 mkoeppe]:\n> > We don't have a mechanism for that\n\n> \n> It worked for years until you added runtime detection that overrides it.\n\n\nSage has never had a mechanism to disable the use of optional features by the Sage library. \n\nThe only thing that has changed is what the doctester tests. The present ticket gives you the tool that you need if you have problems with an optional package in your distribution packaging.",
    "created_at": "2022-05-09T20:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674621",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Replying to [comment:11 mjo]:
> Replying to [comment:9 mkoeppe]:
> > We don't have a mechanism for that

> 
> It worked for years until you added runtime detection that overrides it.


Sage has never had a mechanism to disable the use of optional features by the Sage library. 

The only thing that has changed is what the doctester tests. The present ticket gives you the tool that you need if you have problems with an optional package in your distribution packaging.



---

archive/issue_comments_674622.json:
```json
{
    "body": "<a id='comment:13'></a>Let's keep the ticket focused. It is not meant as an invitation to continue your musings from sage-devel",
    "created_at": "2022-05-09T20:56:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674622",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>Let's keep the ticket focused. It is not meant as an invitation to continue your musings from sage-devel



---

archive/issue_comments_674623.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:10 fbissey]:\n> Yes, you are giving yourself some tools to be able to isolate what you are testing more. Which is interesting in and of itself. But if we completely migrate to pytest (let's be honest that will/would take years), will that feature survive the migration? Does pytest support such disabling?\n\n\nConditionalizing tests on the presence of features is a key idea of the modularization, and we'll make it work with pytest too. Skipping tests based on predicates is a standard feature of all test frameworks. \n\n#33546 implements the Sage doctest discovery in pytest. It continues to use code from `sage.doctest`, so I see no issue in making `# optional` annotations work, but I don't know the details.",
    "created_at": "2022-05-09T21:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674623",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>Replying to [comment:10 fbissey]:
> Yes, you are giving yourself some tools to be able to isolate what you are testing more. Which is interesting in and of itself. But if we completely migrate to pytest (let's be honest that will/would take years), will that feature survive the migration? Does pytest support such disabling?


Conditionalizing tests on the presence of features is a key idea of the modularization, and we'll make it work with pytest too. Skipping tests based on predicates is a standard feature of all test frameworks. 

#33546 implements the Sage doctest discovery in pytest. It continues to use code from `sage.doctest`, so I see no issue in making `# optional` annotations work, but I don't know the details.



---

archive/issue_comments_674624.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,16 @@\n+`sage -t --optional='sage,!FEATURE'` will disable autodetection of `FEATURE`.\n+\n+Useful for checking sequences of `# optional - FEATURE` annotations in particular when `FEATURE` is standard in Sage, for example `sage.misc.cython` (#33029):\n+\n+```\n+./sage -t --optional='sage,!sage.misc.cython' src/sage/misc/inherit_comparison.pyx  \n+```\n+\n+\n+Also, `sage -t --optional='sage,optional,!FEATURE'` will remove it from the list of optional features supplied by the package list and disable auto-detection. \n+\n+For example, when the optional SPKG `bliss` is installed, `--optional='sage,optional'` would expand to a list including `bliss`. By using `--optional='sage,optional,!bliss'`, it can be removed.\n+\n \n \n Summary: sage -t --optional=sage,!FEATURE\n``````\n",
    "created_at": "2022-05-09T21:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674624",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,16 @@
+`sage -t --optional='sage,!FEATURE'` will disable autodetection of `FEATURE`.
+
+Useful for checking sequences of `# optional - FEATURE` annotations in particular when `FEATURE` is standard in Sage, for example `sage.misc.cython` (#33029):
+
+```
+./sage -t --optional='sage,!sage.misc.cython' src/sage/misc/inherit_comparison.pyx  
+```
+
+
+Also, `sage -t --optional='sage,optional,!FEATURE'` will remove it from the list of optional features supplied by the package list and disable auto-detection. 
+
+For example, when the optional SPKG `bliss` is installed, `--optional='sage,optional'` would expand to a list including `bliss`. By using `--optional='sage,optional,!bliss'`, it can be removed.
+
 
 
 Summary: sage -t --optional=sage,!FEATURE
``````




---

archive/issue_comments_674625.json:
```json
{
    "body": "<a id='comment:17'></a>I think it's a good idea to have a negation possibility here. Maybe the following needs a clarification in the help-string:\n\nIn a positive list of features you don't need to type `'` and maybe a lot of people use it in this way. But if you want to exclude a feature using this new functionality you must type them or use `\\!` instead of `!`. \n\n\nBTW: If you have installed some optional feature `xyz` on your system and forgot a `# optional - xyz` or `xyz.is_present()` somewhere in your change of code then this new doctest option will not bring this to your attention. That was what I hoped when I've first seen this ticket. Do you know, how this can be achieved without uninstalling the package?\n\n\nFurther: I really don't know the intention of the log-message `Features detected for doctesting`. My observation is that this messages shows nothing even though optional tests were performed. At least this is irritating. Example:\n\n\n```\nUsing --optional=!database_knotinfo,sage\nFeatures to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,dvipng,gfan,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,msolve,nauty,palp,pandoc,pdf2svg,pdftocairo,phitigra,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib\nDoctesting 1 file.\nsage -t --random-seed=71318033978106427613212696911118388467 src/sage/knots/knotinfo.py\n    [323 tests, 5.51 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 5.6 seconds\n    cpu time: 5.5 seconds\n    cumulative wall time: 5.5 seconds\nFeatures detected for doctesting:\n```\n\nTogether with 30 optional doctests, the log-message shows the same result:\n\n```\nUsing --optional=database_knotinfo,sage\nFeatures to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,gfan,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,msolve,nauty,palp,pandoc,pdf2svg,pdftocairo,phitigra,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib\nDoctesting 1 file.\nsage -t --random-seed=32074844050499063835156990883996507444 src/sage/knots/knotinfo.py\n    [353 tests, 7.94 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 8.1 seconds\n    cpu time: 7.9 seconds\n    cumulative wall time: 7.9 seconds\nFeatures detected for doctesting:\n```\n\nThis seems to be due to:\n\n```sage\nsage: from sage.doctest.external import AvailableSoftware\nsage: S = AvailableSoftware()\nsage: S._indices['database_knotinfo']\n10\nsage: S._seen[10]\n0\n```\n\nBut this can be changed by performing a `__contains__` test:\n\n```sage\nsage: 'database_knotinfo' in S\nTrue\nsage: S._seen[10]\n1\n```\n\nSo it looks as if such a test is missing somewhere.",
    "created_at": "2022-06-01T16:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674625",
    "user": "https://github.com/soehms"
}
```

<a id='comment:17'></a>I think it's a good idea to have a negation possibility here. Maybe the following needs a clarification in the help-string:

In a positive list of features you don't need to type `'` and maybe a lot of people use it in this way. But if you want to exclude a feature using this new functionality you must type them or use `\!` instead of `!`. 


BTW: If you have installed some optional feature `xyz` on your system and forgot a `# optional - xyz` or `xyz.is_present()` somewhere in your change of code then this new doctest option will not bring this to your attention. That was what I hoped when I've first seen this ticket. Do you know, how this can be achieved without uninstalling the package?


Further: I really don't know the intention of the log-message `Features detected for doctesting`. My observation is that this messages shows nothing even though optional tests were performed. At least this is irritating. Example:


```
Using --optional=!database_knotinfo,sage
Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,dvipng,gfan,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,msolve,nauty,palp,pandoc,pdf2svg,pdftocairo,phitigra,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib
Doctesting 1 file.
sage -t --random-seed=71318033978106427613212696911118388467 src/sage/knots/knotinfo.py
    [323 tests, 5.51 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 5.6 seconds
    cpu time: 5.5 seconds
    cumulative wall time: 5.5 seconds
Features detected for doctesting:
```

Together with 30 optional doctests, the log-message shows the same result:

```
Using --optional=database_knotinfo,sage
Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,gfan,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,msolve,nauty,palp,pandoc,pdf2svg,pdftocairo,phitigra,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib
Doctesting 1 file.
sage -t --random-seed=32074844050499063835156990883996507444 src/sage/knots/knotinfo.py
    [353 tests, 7.94 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 8.1 seconds
    cpu time: 7.9 seconds
    cumulative wall time: 7.9 seconds
Features detected for doctesting:
```

This seems to be due to:

```sage
sage: from sage.doctest.external import AvailableSoftware
sage: S = AvailableSoftware()
sage: S._indices['database_knotinfo']
10
sage: S._seen[10]
0
```

But this can be changed by performing a `__contains__` test:

```sage
sage: 'database_knotinfo' in S
True
sage: S._seen[10]
1
```

So it looks as if such a test is missing somewhere.



---

archive/issue_comments_674626.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-06-05T18:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674626",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_674627.json:
```json
{
    "body": "Changing commit from \"d0a52ed409ed07ae060c305f7481ab41479d3403\" to \"ba86146e5a5e3308026aac49d87d2716a80c6a93\"",
    "created_at": "2022-06-05T18:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674627",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d0a52ed409ed07ae060c305f7481ab41479d3403" to "ba86146e5a5e3308026aac49d87d2716a80c6a93"



---

archive/issue_comments_674628.json:
```json
{
    "body": "<a id='comment:19'></a>The line `Features detected for doctesting:` only reports the dynamically detected features, a subset of what is listed as `Features to be detected:`.\nThe statically known ones (from `--optional`) are not reported there.\n\nThis works as designed, but if you have a suggestion how it should be changed, we can change it.",
    "created_at": "2022-06-05T18:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674628",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>The line `Features detected for doctesting:` only reports the dynamically detected features, a subset of what is listed as `Features to be detected:`.
The statically known ones (from `--optional`) are not reported there.

This works as designed, but if you have a suggestion how it should be changed, we can change it.



---

archive/issue_comments_674629.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:17 soehms]:\n> If you have installed some optional feature `xyz` on your system and forgot a `# optional - xyz` or `xyz.is_present()` somewhere in your change of code then this new doctest option will not bring this to your attention. That was what I hoped when I've first seen this ticket. Do you know, how this can be achieved without uninstalling the package?\n\n\nThe doctests marked `# optional - xyz` *are* disabled using `--optional=\"!xyz\"` -- as your test above with `--optional=!database_knotinfo,sage` verified.\n\nThere is no mechanism to disable the actual feature in the Sage runtime. What `xyz.is_present()` does is not affected by the present ticket.",
    "created_at": "2022-06-05T18:47:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674629",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>Replying to [comment:17 soehms]:
> If you have installed some optional feature `xyz` on your system and forgot a `# optional - xyz` or `xyz.is_present()` somewhere in your change of code then this new doctest option will not bring this to your attention. That was what I hoped when I've first seen this ticket. Do you know, how this can be achieved without uninstalling the package?


The doctests marked `# optional - xyz` *are* disabled using `--optional="!xyz"` -- as your test above with `--optional=!database_knotinfo,sage` verified.

There is no mechanism to disable the actual feature in the Sage runtime. What `xyz.is_present()` does is not affected by the present ticket.



---

archive/issue_comments_674630.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Sebastian Oehms\"",
    "created_at": "2022-06-08T06:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674630",
    "user": "https://github.com/soehms"
}
```

Changing reviewer from "" to "Sebastian Oehms"



---

archive/issue_comments_674631.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:20 mkoeppe]:\n\n> The line Features detected for doctesting: only reports the dynamically detected features, a subset of what is listed as Features to be detected:. The statically known ones (from --optional) are not reported there.\n\n\nI'm wondering what *dynamically* means here? From the code I displayed in my previous comment it appears that a feature is dynamically detected if it is tested to be contained in `available_software`. Where is that supposed to happen?\n\n> This works as designed, but if you have a suggestion how it should be changed, we can change it.\n\n\nIt's difficult to make a suggestion before I've completely understood the intention. According to the given phrase I assumed it would correspond to the *Features to be detected*. So, at least in order to resolve that irritation it would be enough to change the phrase into `Dynamically detected features ...` (whatever this means).\n\n> Replying to [comment:17 soehms]:\n> There is no mechanism to disable the actual feature in the Sage runtime. What `xyz.is_present()` does is not affected by the present ticket. \n\n\nPerhaps I have in mind a new option `sage -t --hide=FEATURES` which would imply `--optional='!FEATURE1,!FEATURE2,..'`. Is there something against having such an additional option? I think that could be realized via a boolean `_hidden` in class `Feature`, which default is `False` and would be switched to `True` in case of this option.",
    "created_at": "2022-06-08T06:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674631",
    "user": "https://github.com/soehms"
}
```

<a id='comment:21'></a>Replying to [comment:20 mkoeppe]:

> The line Features detected for doctesting: only reports the dynamically detected features, a subset of what is listed as Features to be detected:. The statically known ones (from --optional) are not reported there.


I'm wondering what *dynamically* means here? From the code I displayed in my previous comment it appears that a feature is dynamically detected if it is tested to be contained in `available_software`. Where is that supposed to happen?

> This works as designed, but if you have a suggestion how it should be changed, we can change it.


It's difficult to make a suggestion before I've completely understood the intention. According to the given phrase I assumed it would correspond to the *Features to be detected*. So, at least in order to resolve that irritation it would be enough to change the phrase into `Dynamically detected features ...` (whatever this means).

> Replying to [comment:17 soehms]:
> There is no mechanism to disable the actual feature in the Sage runtime. What `xyz.is_present()` does is not affected by the present ticket. 


Perhaps I have in mind a new option `sage -t --hide=FEATURES` which would imply `--optional='!FEATURE1,!FEATURE2,..'`. Is there something against having such an additional option? I think that could be realized via a boolean `_hidden` in class `Feature`, which default is `False` and would be switched to `True` in case of this option.



---

archive/issue_comments_674632.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-06-08T06:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674632",
    "user": "https://github.com/soehms"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_674633.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:21 soehms]:\n> Replying to [comment:20 mkoeppe]:\n> \n> > The line Features detected for doctesting: only reports the dynamically detected features, a subset of what is listed as Features to be detected:. The statically known ones (from --optional) are not reported there.\n\n> \n> I'm wondering what *dynamically* means here? From the code I displayed in my previous comment it appears that a feature is dynamically detected if it is tested to be contained in `available_software`. Where is that supposed to happen?\n\n\nSorry for using undefined terminology. \n\nWhen you use `sage -t --optional=sage,FEATURE`, then FEATURE is \"statically known\".\n\nWhen you use `sage -t --optional=sage,optional` and SPKG is the name of a normal package that is installed, then SPKG is \"statically known\".\n\nOther features, by default those enumerated by `sage.features.all.all_features` except for those enumerated by `sage.doctest.external.external_software`, are subject to detection the first time that their name appears as an `# optional - FEATURE` annotation. (This is done by `sage.doctest.parsing.SageDocTestParser`.)",
    "created_at": "2022-06-08T07:00:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674633",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>Replying to [comment:21 soehms]:
> Replying to [comment:20 mkoeppe]:
> 
> > The line Features detected for doctesting: only reports the dynamically detected features, a subset of what is listed as Features to be detected:. The statically known ones (from --optional) are not reported there.

> 
> I'm wondering what *dynamically* means here? From the code I displayed in my previous comment it appears that a feature is dynamically detected if it is tested to be contained in `available_software`. Where is that supposed to happen?


Sorry for using undefined terminology. 

When you use `sage -t --optional=sage,FEATURE`, then FEATURE is "statically known".

When you use `sage -t --optional=sage,optional` and SPKG is the name of a normal package that is installed, then SPKG is "statically known".

Other features, by default those enumerated by `sage.features.all.all_features` except for those enumerated by `sage.doctest.external.external_software`, are subject to detection the first time that their name appears as an `# optional - FEATURE` annotation. (This is done by `sage.doctest.parsing.SageDocTestParser`.)



---

archive/issue_comments_674634.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:22 mkoeppe]:\n> Replying to [comment:21 soehms]:\n> > Replying to [comment:20 mkoeppe]:\n> > \n> > > The line Features detected for doctesting: only reports the dynamically detected features, a subset of what is listed as Features to be detected:. The statically known ones (from --optional) are not reported there.\n\n> > \n> > I'm wondering what *dynamically* means here? From the code I displayed in my previous comment it appears that a feature is dynamically detected if it is tested to be contained in `available_software`. Where is that supposed to happen?\n\n> \n> Sorry for using undefined terminology. \n> \n> When you use `sage -t --optional=sage,FEATURE`, then FEATURE is \"statically known\".\n> \n> When you use `sage -t --optional=sage,optional` and SPKG is the name of a normal package that is installed, then SPKG is \"statically known\".\n> \n> Other features, by default those enumerated by `sage.features.all.all_features` except for those enumerated by `sage.doctest.external.external_software`, are subject to detection the first time that their name appears as an `# optional - FEATURE` annotation. (This is done by `sage.doctest.parsing.SageDocTestParser`.)\n\n\nThanks for the explanation (I missed the fact that `issuperset` does the job)!",
    "created_at": "2022-06-08T16:45:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674634",
    "user": "https://github.com/soehms"
}
```

<a id='comment:23'></a>Replying to [comment:22 mkoeppe]:
> Replying to [comment:21 soehms]:
> > Replying to [comment:20 mkoeppe]:
> > 
> > > The line Features detected for doctesting: only reports the dynamically detected features, a subset of what is listed as Features to be detected:. The statically known ones (from --optional) are not reported there.

> > 
> > I'm wondering what *dynamically* means here? From the code I displayed in my previous comment it appears that a feature is dynamically detected if it is tested to be contained in `available_software`. Where is that supposed to happen?

> 
> Sorry for using undefined terminology. 
> 
> When you use `sage -t --optional=sage,FEATURE`, then FEATURE is "statically known".
> 
> When you use `sage -t --optional=sage,optional` and SPKG is the name of a normal package that is installed, then SPKG is "statically known".
> 
> Other features, by default those enumerated by `sage.features.all.all_features` except for those enumerated by `sage.doctest.external.external_software`, are subject to detection the first time that their name appears as an `# optional - FEATURE` annotation. (This is done by `sage.doctest.parsing.SageDocTestParser`.)


Thanks for the explanation (I missed the fact that `issuperset` does the job)!



---

archive/issue_comments_674635.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:21 soehms]:\n> > There is no mechanism to disable the actual feature in the Sage runtime. What `xyz.is_present()` does is not affected by the present ticket. \n\n> \n> Perhaps I have in mind a new option `sage -t --hide=FEATURES` which would imply `--optional='!FEATURE1,!FEATURE2,..'`. Is there something against having such an additional option? \n\n\nYes, I think something like this could make sense if there's a strong enough use case for it. It would probably be best to provide this mechanism also for non-doctest situations. So this would be a separate ticket. \n\nThanks for reviewing!",
    "created_at": "2022-06-08T17:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674635",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>Replying to [comment:21 soehms]:
> > There is no mechanism to disable the actual feature in the Sage runtime. What `xyz.is_present()` does is not affected by the present ticket. 

> 
> Perhaps I have in mind a new option `sage -t --hide=FEATURES` which would imply `--optional='!FEATURE1,!FEATURE2,..'`. Is there something against having such an additional option? 


Yes, I think something like this could make sense if there's a strong enough use case for it. It would probably be best to provide this mechanism also for non-doctest situations. So this would be a separate ticket. 

Thanks for reviewing!



---

archive/issue_comments_674636.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:24 mkoeppe]:\n> Replying to [comment:21 soehms]:\n> > > There is no mechanism to disable the actual feature in the Sage runtime. What `xyz.is_present()` does is not affected by the present ticket. \n\n> > \n> > Perhaps I have in mind a new option `sage -t --hide=FEATURES` which would imply `--optional='!FEATURE1,!FEATURE2,..'`. Is there something against having such an additional option? \n\n> \n> Yes, I think something like this could make sense if there's a strong enough use case for it.\n\n\nThe use case I'm thinking of is the following: If you have installed an optional package `xyz` and run a test on your changes, say\n\n```\nsage -t src/sage/....py\n```\n\nthen it might happen that you get `All tests passed!` here. But after\n\n```\nmake xyz-clean\n```\n\nthe same invocation of `sage -t` could find failures. Probably we will get more situations like that as modularization goes ahead. Surely, the patchbots will detect these. But it will be more convenient if you can detect these failures easily on your own system. I don't know how difficult it would be to fake the absence of an optional package in general. But in all cases where the `Features` functionality is used consequently, it should be doable.\n\n\n\n> It would probably be best to provide this mechanism also for non-doctest situations. So this would be a separate ticket. \n\n\nOf course! After my vacation (that is in a couple of weeks) I will try to figure out how this could be done.",
    "created_at": "2022-06-10T16:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674636",
    "user": "https://github.com/soehms"
}
```

<a id='comment:25'></a>Replying to [comment:24 mkoeppe]:
> Replying to [comment:21 soehms]:
> > > There is no mechanism to disable the actual feature in the Sage runtime. What `xyz.is_present()` does is not affected by the present ticket. 

> > 
> > Perhaps I have in mind a new option `sage -t --hide=FEATURES` which would imply `--optional='!FEATURE1,!FEATURE2,..'`. Is there something against having such an additional option? 

> 
> Yes, I think something like this could make sense if there's a strong enough use case for it.


The use case I'm thinking of is the following: If you have installed an optional package `xyz` and run a test on your changes, say

```
sage -t src/sage/....py
```

then it might happen that you get `All tests passed!` here. But after

```
make xyz-clean
```

the same invocation of `sage -t` could find failures. Probably we will get more situations like that as modularization goes ahead. Surely, the patchbots will detect these. But it will be more convenient if you can detect these failures easily on your own system. I don't know how difficult it would be to fake the absence of an optional package in general. But in all cases where the `Features` functionality is used consequently, it should be doable.



> It would probably be best to provide this mechanism also for non-doctest situations. So this would be a separate ticket. 


Of course! After my vacation (that is in a couple of weeks) I will try to figure out how this could be done.



---

archive/issue_comments_674637.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/sage__t___optional__sage__feature_\" to \"ba86146e5a5e3308026aac49d87d2716a80c6a93\"",
    "created_at": "2022-06-12T23:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674637",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/sage__t___optional__sage__feature_" to "ba86146e5a5e3308026aac49d87d2716a80c6a93"



---

archive/issue_events_088810.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-06-12T23:08:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33823#event-88810"
}
```



---

archive/issue_comments_674638.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-06-12T23:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674638",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_674639.json:
```json
{
    "body": "<a id='comment:27'></a>Thanks for this ticket. It will be quite useful for example to test that `sage -t` works even when let's say there is no latex on the machine (which is the case for the computer on which Volker makes tests before merging tickets).",
    "created_at": "2022-06-24T08:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674639",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:27'></a>Thanks for this ticket. It will be quite useful for example to test that `sage -t` works even when let's say there is no latex on the machine (which is the case for the computer on which Volker makes tests before merging tickets).



---

archive/issue_comments_674640.json:
```json
{
    "body": "Changing commit from \"ba86146e5a5e3308026aac49d87d2716a80c6a93\" to \"\"",
    "created_at": "2022-06-24T08:04:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674640",
    "user": "https://github.com/seblabbe"
}
```

Changing commit from "ba86146e5a5e3308026aac49d87d2716a80c6a93" to ""



---

archive/issue_comments_674641.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:25 soehms]:\n> Replying to [comment:24 mkoeppe]:\n> > Replying to [comment:21 soehms]:\n> > > > There is no mechanism to disable the actual feature in the Sage runtime. What `xyz.is_present()` does is not affected by the present ticket. \n\n> > > \n> > > Perhaps I have in mind a new option `sage -t --hide=FEATURES` which would imply `--optional='!FEATURE1,!FEATURE2,..'`. Is there something against having such an additional option? \n\n> > \n> > Yes, I think something like this could make sense if there's a strong enough use case for it.\n\n> \n> The use case I'm thinking of is the following: If you have installed an optional package `xyz` and run a test on your changes, say\n> \n> \n> ```\n> sage -t src/sage/....py\n> ```\n> \n> then it might happen that you get `All tests passed!` here. But after\n> \n> \n> ```\n> make xyz-clean\n> ```\n> \n> the same invocation of `sage -t` could find failures. Probably we will get more situations like that as modularization goes ahead. Surely, the patchbots will detect these. But it will be more convenient if you can detect these failures easily on your own system. I don't know how difficult it would be to fake the absence of an optional package in general. But in all cases where the `Features` functionality is used consequently, it should be doable.\n> \n> \n> \n> > It would probably be best to provide this mechanism also for non-doctest situations. So this would be a separate ticket. \n\n> \n> Of course! After my vacation (that is in a couple of weeks) I will try to figure out how this could be done.\n\n\nsee #34185!",
    "created_at": "2022-07-15T07:10:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33823",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33823#issuecomment-674641",
    "user": "https://github.com/soehms"
}
```

<a id='comment:28'></a>Replying to [comment:25 soehms]:
> Replying to [comment:24 mkoeppe]:
> > Replying to [comment:21 soehms]:
> > > > There is no mechanism to disable the actual feature in the Sage runtime. What `xyz.is_present()` does is not affected by the present ticket. 

> > > 
> > > Perhaps I have in mind a new option `sage -t --hide=FEATURES` which would imply `--optional='!FEATURE1,!FEATURE2,..'`. Is there something against having such an additional option? 

> > 
> > Yes, I think something like this could make sense if there's a strong enough use case for it.

> 
> The use case I'm thinking of is the following: If you have installed an optional package `xyz` and run a test on your changes, say
> 
> 
> ```
> sage -t src/sage/....py
> ```
> 
> then it might happen that you get `All tests passed!` here. But after
> 
> 
> ```
> make xyz-clean
> ```
> 
> the same invocation of `sage -t` could find failures. Probably we will get more situations like that as modularization goes ahead. Surely, the patchbots will detect these. But it will be more convenient if you can detect these failures easily on your own system. I don't know how difficult it would be to fake the absence of an optional package in general. But in all cases where the `Features` functionality is used consequently, it should be doable.
> 
> 
> 
> > It would probably be best to provide this mechanism also for non-doctest situations. So this would be a separate ticket. 

> 
> Of course! After my vacation (that is in a couple of weeks) I will try to figure out how this could be done.


see #34185!
