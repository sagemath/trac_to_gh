# Issue 33734: variety() for polynomial systems over ℚ using msolve

archive/issues_033497.json:
```json
{
    "assignees": [],
    "body": "Add the option of using the external package [msolve](https://msolve.lip6.fr/) for computing the variety of a polynomial system. Only systems over\u00a0\u211a are supported at the moment, because I cannot make sense of msolve's output in the positive characteristic case.\n\nNote that this ticket does not add msolve as a dependency\u2014see #31664 for that.\n\n\nUpstream: **Reported upstream. Developers acknowledge bug.**\n\nComponent: **commutative algebra**\n\nAuthor: **Marc Mezzarobba**\n\nBranch/Commit: **[`0312ac6`](https://github.com/sagemath/sagetrac-mirror/commit/0312ac6af931b936bdf0476f522078f6e55c2622)**\n\nReviewer: **S\u00e9bastien Labb\u00e9, Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33734_\n\n",
    "closed_at": "2022-05-22T16:32:23Z",
    "created_at": "2022-04-20T08:36:32Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20commutative%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "variety() for polynomial systems over \u211a using msolve",
    "type": "issue",
    "updated_at": "2022-05-22T16:32:23Z",
    "url": "https://github.com/sagemath/sage/issues/33734",
    "user": "https://github.com/mezzarobba"
}
```
Add the option of using the external package [msolve](https://msolve.lip6.fr/) for computing the variety of a polynomial system. Only systems over ℚ are supported at the moment, because I cannot make sense of msolve's output in the positive characteristic case.

Note that this ticket does not add msolve as a dependency—see #31664 for that.


Upstream: **Reported upstream. Developers acknowledge bug.**

Component: **commutative algebra**

Author: **Marc Mezzarobba**

Branch/Commit: **[`0312ac6`](https://github.com/sagemath/sagetrac-mirror/commit/0312ac6af931b936bdf0476f522078f6e55c2622)**

Reviewer: **Sébastien Labbé, Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/33734_





---

archive/issue_events_459571.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2022-04-20T08:36:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459571"
}
```



---

archive/issue_events_459572.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2022-04-20T08:36:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20commutative%20algebra",
    "label_color": "0000ff",
    "label_name": "c: commutative algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459572"
}
```



---

archive/issue_events_459573.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2022-04-20T08:36:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459573"
}
```



---

archive/issue_events_459574.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2022-04-20T08:36:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459574"
}
```



---

archive/issue_events_459575.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2022-04-20T08:49:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459575"
}
```



---

archive/issue_comments_545267.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/384780b5cdb41b76bb0ab4496b661fe493d465ed\"><code>384780b</code></a></td><td><code>#33734 variety(): prepare for multiple algorithm options</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae6c4bf19797719974b88038cc0caf62d84622b3\"><code>ae6c4bf</code></a></td><td><code>#33734 variety() over \u211a using msolve</code></td></tr></table>\n",
    "created_at": "2022-04-20T08:49:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545267",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/384780b5cdb41b76bb0ab4496b661fe493d465ed"><code>384780b</code></a></td><td><code>#33734 variety(): prepare for multiple algorithm options</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae6c4bf19797719974b88038cc0caf62d84622b3"><code>ae6c4bf</code></a></td><td><code>#33734 variety() over ℚ using msolve</code></td></tr></table>




---

archive/issue_comments_545268.json:
```json
{
    "body": "Commit: **[`ae6c4bf`](https://github.com/sagemath/sagetrac-mirror/commit/ae6c4bf19797719974b88038cc0caf62d84622b3)**",
    "created_at": "2022-04-20T08:49:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545268",
    "user": "https://github.com/mezzarobba"
}
```

Commit: **[`ae6c4bf`](https://github.com/sagemath/sagetrac-mirror/commit/ae6c4bf19797719974b88038cc0caf62d84622b3)**



---

archive/issue_comments_545269.json:
```json
{
    "body": "Branch: **[u/mmezzarobba/33734-msolve](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/33734-msolve)**",
    "created_at": "2022-04-20T08:49:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545269",
    "user": "https://github.com/mezzarobba"
}
```

Branch: **[u/mmezzarobba/33734-msolve](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/33734-msolve)**



---

archive/issue_comments_545270.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\n8 lines of triangLfak part uses 2 space identation, 4 spaces are preferred",
    "created_at": "2022-04-20T09:07:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545270",
    "user": "https://github.com/sheerluck"
}
```

<div id="comment:2" align="right">comment:2</div>

8 lines of triangLfak part uses 2 space identation, 4 spaces are preferred



---

archive/issue_comments_545271.json:
```json
{
    "body": "Changed commit from **[`ae6c4bf`](https://github.com/sagemath/sagetrac-mirror/commit/ae6c4bf19797719974b88038cc0caf62d84622b3)** to **[`10ae301`](https://github.com/sagemath/sagetrac-mirror/commit/10ae301d340ac35f74a3b92bc8752a9d3331c4ae)**",
    "created_at": "2022-04-20T09:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545271",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ae6c4bf`](https://github.com/sagemath/sagetrac-mirror/commit/ae6c4bf19797719974b88038cc0caf62d84622b3)** to **[`10ae301`](https://github.com/sagemath/sagetrac-mirror/commit/10ae301d340ac35f74a3b92bc8752a9d3331c4ae)**



---

archive/issue_comments_545272.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5f0063bab8c7e0d18dbbd9ae88996649809f8b7\"><code>e5f0063</code></a></td><td><code>#33734 variety(): prepare for multiple algorithm options</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10ae301d340ac35f74a3b92bc8752a9d3331c4ae\"><code>10ae301</code></a></td><td><code>#33734 variety() over \u211a using msolve</code></td></tr></table>\n",
    "created_at": "2022-04-20T09:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545272",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5f0063bab8c7e0d18dbbd9ae88996649809f8b7"><code>e5f0063</code></a></td><td><code>#33734 variety(): prepare for multiple algorithm options</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10ae301d340ac35f74a3b92bc8752a9d3331c4ae"><code>10ae301</code></a></td><td><code>#33734 variety() over ℚ using msolve</code></td></tr></table>




---

archive/issue_comments_545273.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@sheerluck](#comment%3A2):\n> 8 lines of triangLfak part uses 2 space identation, 4 spaces are preferred\n\nOops, rebasing mistake (I guess). Thanks!",
    "created_at": "2022-04-20T09:25:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545273",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@sheerluck](#comment%3A2):
> 8 lines of triangLfak part uses 2 space identation, 4 spaces are preferred

Oops, rebasing mistake (I guess). Thanks!



---

archive/issue_comments_545274.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/567cb9170a4d1d146c5b23810f9572d76ba83468\"><code>567cb91</code></a></td><td><code>#33734 variety() over \u211a using msolve</code></td></tr></table>\n",
    "created_at": "2022-04-20T09:28:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545274",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/567cb9170a4d1d146c5b23810f9572d76ba83468"><code>567cb91</code></a></td><td><code>#33734 variety() over ℚ using msolve</code></td></tr></table>




---

archive/issue_comments_545275.json:
```json
{
    "body": "Changed commit from **[`10ae301`](https://github.com/sagemath/sagetrac-mirror/commit/10ae301d340ac35f74a3b92bc8752a9d3331c4ae)** to **[`567cb91`](https://github.com/sagemath/sagetrac-mirror/commit/567cb9170a4d1d146c5b23810f9572d76ba83468)**",
    "created_at": "2022-04-20T09:28:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545275",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`10ae301`](https://github.com/sagemath/sagetrac-mirror/commit/10ae301d340ac35f74a3b92bc8752a9d3331c4ae)** to **[`567cb91`](https://github.com/sagemath/sagetrac-mirror/commit/567cb9170a4d1d146c5b23810f9572d76ba83468)**



---

archive/issue_comments_545276.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ff11480395c86e9aa62560ce6960c1b2cbe81c0\"><code>6ff1148</code></a></td><td><code>#33734 variety() over \u211a using msolve</code></td></tr></table>\n",
    "created_at": "2022-04-20T09:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545276",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ff11480395c86e9aa62560ce6960c1b2cbe81c0"><code>6ff1148</code></a></td><td><code>#33734 variety() over ℚ using msolve</code></td></tr></table>




---

archive/issue_comments_545277.json:
```json
{
    "body": "Changed commit from **[`567cb91`](https://github.com/sagemath/sagetrac-mirror/commit/567cb9170a4d1d146c5b23810f9572d76ba83468)** to **[`6ff1148`](https://github.com/sagemath/sagetrac-mirror/commit/6ff11480395c86e9aa62560ce6960c1b2cbe81c0)**",
    "created_at": "2022-04-20T09:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545277",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`567cb91`](https://github.com/sagemath/sagetrac-mirror/commit/567cb9170a4d1d146c5b23810f9572d76ba83468)** to **[`6ff1148`](https://github.com/sagemath/sagetrac-mirror/commit/6ff11480395c86e9aa62560ce6960c1b2cbe81c0)**



---

archive/issue_events_459576.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-04-20T10:15:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459576"
}
```



---

archive/issue_events_459577.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-04-20T10:15:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459577"
}
```



---

archive/issue_comments_545278.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI think it is preferable to add within this ticket a file `sage/features/msolve.py` which would check the presence (and functionality) of `msolve`. You can check other similar files in `sage/features` which are based on a single command available in PATH. For instance, check at `sage/features/pdf2svg.py` which also has a `spkg=` since such a dummy sage package exists, but this is not mandatory, see for instance `sage/features/dvipng.py` which I think you can essentially copy paste.\n\nIf you want, you may also add a `is_functional` method. See `sage/features/latex.py` and `sage/features/lrs.py` for such examples. The `is_functional` method is not to be used from outside: it is automatically called by `is_present()` and by `require()`, see #33114.\n\nThe following lines\n\n```\n+    except FileNotFoundError:\n+        raise RuntimeError(\n+            \"could not find the msolve binary. Please install msolve \"\n+            \"(https://msolve.lip6.fr/) and try again.\")\n```\nwill get replaced by\n\n```\nfrom sage.features.msolve import msolve\nmsolve.require()\n```\nbefore you use the `msolve` command.\n\nAlso, this will automatically select the optional tag `msolve` when doctesting the new added file (provided you define the `all_features()` function at the end of the file `sage/features/msolve.py`).",
    "created_at": "2022-04-20T10:15:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545278",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:7" align="right">comment:7</div>

I think it is preferable to add within this ticket a file `sage/features/msolve.py` which would check the presence (and functionality) of `msolve`. You can check other similar files in `sage/features` which are based on a single command available in PATH. For instance, check at `sage/features/pdf2svg.py` which also has a `spkg=` since such a dummy sage package exists, but this is not mandatory, see for instance `sage/features/dvipng.py` which I think you can essentially copy paste.

If you want, you may also add a `is_functional` method. See `sage/features/latex.py` and `sage/features/lrs.py` for such examples. The `is_functional` method is not to be used from outside: it is automatically called by `is_present()` and by `require()`, see #33114.

The following lines

```
+    except FileNotFoundError:
+        raise RuntimeError(
+            "could not find the msolve binary. Please install msolve "
+            "(https://msolve.lip6.fr/) and try again.")
```
will get replaced by

```
from sage.features.msolve import msolve
msolve.require()
```
before you use the `msolve` command.

Also, this will automatically select the optional tag `msolve` when doctesting the new added file (provided you define the `all_features()` function at the end of the file `sage/features/msolve.py`).



---

archive/issue_comments_545279.json:
```json
{
    "body": "Changed commit from **[`6ff1148`](https://github.com/sagemath/sagetrac-mirror/commit/6ff11480395c86e9aa62560ce6960c1b2cbe81c0)** to **[`bd6bb36`](https://github.com/sagemath/sagetrac-mirror/commit/bd6bb36b6f3100801a0bceeec0874791da87ead4)**",
    "created_at": "2022-04-20T11:50:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545279",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6ff1148`](https://github.com/sagemath/sagetrac-mirror/commit/6ff11480395c86e9aa62560ce6960c1b2cbe81c0)** to **[`bd6bb36`](https://github.com/sagemath/sagetrac-mirror/commit/bd6bb36b6f3100801a0bceeec0874791da87ead4)**



---

archive/issue_comments_545280.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd6bb36b6f3100801a0bceeec0874791da87ead4\"><code>bd6bb36</code></a></td><td><code>#33734 sage.features.msolve</code></td></tr></table>\n",
    "created_at": "2022-04-20T11:50:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545280",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd6bb36b6f3100801a0bceeec0874791da87ead4"><code>bd6bb36</code></a></td><td><code>#33734 sage.features.msolve</code></td></tr></table>




---

archive/issue_comments_545281.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@seblabbe](#comment%3A7):\n> I think it is preferable to add within this ticket a file `sage/features/msolve.py` which would check the presence (and functionality) of `msolve`.\n\nMakes sense; thanks for the pointers!",
    "created_at": "2022-04-20T11:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545281",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@seblabbe](#comment%3A7):
> I think it is preferable to add within this ticket a file `sage/features/msolve.py` which would check the presence (and functionality) of `msolve`.

Makes sense; thanks for the pointers!



---

archive/issue_events_459578.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2022-04-20T11:51:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459578"
}
```



---

archive/issue_events_459579.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2022-04-20T11:51:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459579"
}
```



---

archive/issue_comments_545282.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nFew comments on the code:\n\n1. Are you sure you need all the following imports in the header of the file? I try to keep in the header only the imports that are needed more than once in the file.\n\n```\n+import os\n+import tempfile\n+import subprocess\n+\n+import sage.structure.proof.proof\n+\n+from sage.features.msolve import msolve\n+from sage.misc.all import SAGE_TMP\n+from sage.misc.converting_dict import KeyConvertingDict\n+from sage.misc.sage_eval import sage_eval\n+from sage.rings.polynomial.polynomial_ring_constructor import PolynomialRing\n+from sage.rings.rational_field import QQ\n+from sage.rings.real_arb import RealBallField\n+from sage.rings.real_double import RealDoubleField_class\n+from sage.rings.real_mpfr import RealField_class\n+from sage.rings.real_mpfi import RealIntervalField_class, RealIntervalField\n```\n\nMaybe few could be moved into where they are needed, for instance `sage_eval`, `SAGE_TMP` and `KeyConvertingDict`. Also `RealDoubleField_class`, `RealField_class` and `RealIntervalField_class`.\n\nI would maybe move `import subprocess` into the method also in the `sage/features/msolve.py`.\n\n2. Now that the `except` clause is gone. It is weird to have a `try` with no `except`:\n\n```\n+    try:\n+        print(\",\".join(drlpolring.variable_names()), file=msolve_in)\n+        print(base.characteristic(), file=msolve_in)\n+        print(*(pol._repr_().replace(\" \", \"\") for pol in polys),\n+                sep=',\\n', file=msolve_in)\n+        msolve_in.close()\n+        msolve_out = subprocess.run(command, capture_output=True)\n+    finally:\n+        os.unlink(msolve_in.name)\n```\n\n3. You write `.decode('ascii')` here:\n\n```\ndata = sage_eval(msolve_out.stdout[:-2].decode('ascii'))\n```\n\nMaybe instead, you can use the option `text=True` in the call to `subprocess.run`?\n\n4. Why is the line `os.unlink(msolve_in.name)` needed even after closing the file?",
    "created_at": "2022-04-20T12:16:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545282",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:10" align="right">comment:10</div>

Few comments on the code:

1. Are you sure you need all the following imports in the header of the file? I try to keep in the header only the imports that are needed more than once in the file.

```
+import os
+import tempfile
+import subprocess
+
+import sage.structure.proof.proof
+
+from sage.features.msolve import msolve
+from sage.misc.all import SAGE_TMP
+from sage.misc.converting_dict import KeyConvertingDict
+from sage.misc.sage_eval import sage_eval
+from sage.rings.polynomial.polynomial_ring_constructor import PolynomialRing
+from sage.rings.rational_field import QQ
+from sage.rings.real_arb import RealBallField
+from sage.rings.real_double import RealDoubleField_class
+from sage.rings.real_mpfr import RealField_class
+from sage.rings.real_mpfi import RealIntervalField_class, RealIntervalField
```

Maybe few could be moved into where they are needed, for instance `sage_eval`, `SAGE_TMP` and `KeyConvertingDict`. Also `RealDoubleField_class`, `RealField_class` and `RealIntervalField_class`.

I would maybe move `import subprocess` into the method also in the `sage/features/msolve.py`.

2. Now that the `except` clause is gone. It is weird to have a `try` with no `except`:

```
+    try:
+        print(",".join(drlpolring.variable_names()), file=msolve_in)
+        print(base.characteristic(), file=msolve_in)
+        print(*(pol._repr_().replace(" ", "") for pol in polys),
+                sep=',\n', file=msolve_in)
+        msolve_in.close()
+        msolve_out = subprocess.run(command, capture_output=True)
+    finally:
+        os.unlink(msolve_in.name)
```

3. You write `.decode('ascii')` here:

```
data = sage_eval(msolve_out.stdout[:-2].decode('ascii'))
```

Maybe instead, you can use the option `text=True` in the call to `subprocess.run`?

4. Why is the line `os.unlink(msolve_in.name)` needed even after closing the file?



---

archive/issue_comments_545283.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThanks for your comments.\n\nReplying to [@seblabbe](#comment%3A10):\n> 1. Are you sure you need all the following imports in the header of the file? I try to keep in the header only the imports that are needed more than once in the file.\n\nI understand why you may want to do that with the huge source files with functions using widely different tools that we often have in Sage. But what would be the benefit for this module where there is a single function, and other functions we might want to add are likely to need more or less the same imports?\n\n> 2. Now that the `except` clause is gone. It is weird to have a `try` with no `except`:\n\nIsn't that the standard way of cleaning up after an operation that may raise an error or be interrupted?\n\n> 3. You write `.decode('ascii')` here:\n> \n> ```\n> data = sage_eval(msolve_out.stdout[:-2].decode('ascii'))\n> ```\n> \n> Maybe instead, you can use the option `text=True` in the call to `subprocess.run`?\n\nMaybe. As far as I understand msolve will always feed us pure ascii text with unix newlines, so `decode('ascii')` felt more natural to me, but I'm fine with changing it if there is a reason to do so.\n\n> 4. Why is the line `os.unlink(msolve_in.name)` needed even after closing the file?\n\nI am not sure I understand the question. I suppose I could write\n\n```\n    with tempfile.NamedTemporaryFile(dir=SAGE_TMP, mode='w',\n                                     encoding='ascii') as msolve_in:\n        command = [\"msolve\", \"-f\", msolve_in.name]\n        if isinstance(ring, (RealIntervalField_class, RealBallField,\n                            RealField_class, RealDoubleField_class)):\n            parameterization = False\n            command += [\"-p\", str(ring.precision())]\n        else:\n            parameterization = True\n            command += [\"-P\", \"1\"]\n        print(\",\".join(drlpolring.variable_names()), file=msolve_in)\n        print(base.characteristic(), file=msolve_in)\n        print(*(pol._repr_().replace(\" \", \"\") for pol in polys),\n                sep=',\\n', file=msolve_in, flush=True)\n        msolve_out = subprocess.run(command, capture_output=True)\n```\nbut (1)\u00a0I find that closing the file is clearer than putting a `flush()` in the right place, and (2)\u00a0I need msolve to be able to open the file, which, according to the Python docs, is not allowed on all platforms if Sage keeps it open. So I create the tempfile with `delete=False`, and hence I am responsible for deleting it.",
    "created_at": "2022-04-20T13:04:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545283",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:11" align="right">comment:11</div>

Thanks for your comments.

Replying to [@seblabbe](#comment%3A10):
> 1. Are you sure you need all the following imports in the header of the file? I try to keep in the header only the imports that are needed more than once in the file.

I understand why you may want to do that with the huge source files with functions using widely different tools that we often have in Sage. But what would be the benefit for this module where there is a single function, and other functions we might want to add are likely to need more or less the same imports?

> 2. Now that the `except` clause is gone. It is weird to have a `try` with no `except`:

Isn't that the standard way of cleaning up after an operation that may raise an error or be interrupted?

> 3. You write `.decode('ascii')` here:
> 
> ```
> data = sage_eval(msolve_out.stdout[:-2].decode('ascii'))
> ```
> 
> Maybe instead, you can use the option `text=True` in the call to `subprocess.run`?

Maybe. As far as I understand msolve will always feed us pure ascii text with unix newlines, so `decode('ascii')` felt more natural to me, but I'm fine with changing it if there is a reason to do so.

> 4. Why is the line `os.unlink(msolve_in.name)` needed even after closing the file?

I am not sure I understand the question. I suppose I could write

```
    with tempfile.NamedTemporaryFile(dir=SAGE_TMP, mode='w',
                                     encoding='ascii') as msolve_in:
        command = ["msolve", "-f", msolve_in.name]
        if isinstance(ring, (RealIntervalField_class, RealBallField,
                            RealField_class, RealDoubleField_class)):
            parameterization = False
            command += ["-p", str(ring.precision())]
        else:
            parameterization = True
            command += ["-P", "1"]
        print(",".join(drlpolring.variable_names()), file=msolve_in)
        print(base.characteristic(), file=msolve_in)
        print(*(pol._repr_().replace(" ", "") for pol in polys),
                sep=',\n', file=msolve_in, flush=True)
        msolve_out = subprocess.run(command, capture_output=True)
```
but (1) I find that closing the file is clearer than putting a `flush()` in the right place, and (2) I need msolve to be able to open the file, which, according to the Python docs, is not allowed on all platforms if Sage keeps it open. So I create the tempfile with `delete=False`, and hence I am responsible for deleting it.



---

archive/issue_comments_545284.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThanks for your answers. I reply below.\n\nReplying to [@mezzarobba](#comment%3A11):\n> Thanks for your comments.\n> \n> Replying to [@seblabbe](#comment%3A10):\n> > 1. Are you sure you need all the following imports in the header of the file? I try to keep in the header only the imports that are needed more than once in the file.\n\n> \n> I understand why you may want to do that with the huge source files with functions using widely different tools that we often have in Sage. But what would be the benefit for this module where there is a single function, and other functions we might want to add are likely to need more or less the same imports?\n\nBy experience, sometimes the import in the module creates dependencies just for importing the module which breaks a package which would work (except some parts) if those imports were local imports. But this is when developping an external package. In Sage, this will be fixed anyway. But, I don't know, in my case, I try keep this habit. But, it is true it might not be a sage convention.\n\nAnother reason which might be less pointless is to avoid to cluter the tab completion with lots of technical stuff when we do `from sage.rings.polynomial.msolve import [TAB]`.\n\n> \n> > 2. Now that the `except` clause is gone. It is weird to have a `try` with no `except`:\n\n> \n> Isn't that the standard way of cleaning up after an operation that may raise an error or be interrupted?\n\nOups, you are right. I am learning something here. The `print(2)` is executed here before the exception is raised:\n\n```\nsage: try:\n....:     raise Exception\n....: finally:\n....:     print(2)\n....:     \n2\nTraceback (most recent call last):\n...\nException: \n```\n\nWhereas below it is not:\n\n```\nsage: raise Exception; print(2)\nTraceback (most recent call last):\n...\nException: \n```\n\nSo, I now see the point of the `try` with no `except`.\n\n> \n> > 3. You write `.decode('ascii')` here:\n> > \n> > ```\n> > data = sage_eval(msolve_out.stdout[:-2].decode('ascii'))\n> > ```\n> > \n> > Maybe instead, you can use the option `text=True` in the call to `subprocess.run`?\n\n> \n> Maybe. As far as I understand msolve will always feed us pure ascii text with unix newlines, so `decode('ascii')` felt more natural to me, but I'm fine with changing it if there is a reason to do so.\n\nWell, I think you write `.decode('ascii')` because it returns the stdout as binary. I am just saying that if you write `text=True` in the `run` command, the stdout will already be translated into ascii. So you will not need to translate the binary stdout to to ascii.\n\n> \n> > 4. Why is the line `os.unlink(msolve_in.name)` needed even after closing the file?\n\n> \n> I am not sure I understand the question. I suppose I could write\n> \n> ```\n>     with tempfile.NamedTemporaryFile(dir=SAGE_TMP, mode='w',\n>                                      encoding='ascii') as msolve_in:\n>         command = [\"msolve\", \"-f\", msolve_in.name]\n>         if isinstance(ring, (RealIntervalField_class, RealBallField,\n>                             RealField_class, RealDoubleField_class)):\n>             parameterization = False\n>             command += [\"-p\", str(ring.precision())]\n>         else:\n>             parameterization = True\n>             command += [\"-P\", \"1\"]\n>         print(\",\".join(drlpolring.variable_names()), file=msolve_in)\n>         print(base.characteristic(), file=msolve_in)\n>         print(*(pol._repr_().replace(\" \", \"\") for pol in polys),\n>                 sep=',\\n', file=msolve_in, flush=True)\n>         msolve_out = subprocess.run(command, capture_output=True)\n> ```\n> but (1)\u00a0I find that closing the file is clearer than putting a `flush()` in the right place, and (2)\u00a0I need msolve to be able to open the file, which, according to the Python docs, is not allowed on all platforms if Sage keeps it open. So I create the tempfile with `delete=False`, and hence I am responsible for deleting it.\n\nOk I see.",
    "created_at": "2022-04-21T10:14:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545284",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:12" align="right">comment:12</div>

Thanks for your answers. I reply below.

Replying to [@mezzarobba](#comment%3A11):
> Thanks for your comments.
> 
> Replying to [@seblabbe](#comment%3A10):
> > 1. Are you sure you need all the following imports in the header of the file? I try to keep in the header only the imports that are needed more than once in the file.

> 
> I understand why you may want to do that with the huge source files with functions using widely different tools that we often have in Sage. But what would be the benefit for this module where there is a single function, and other functions we might want to add are likely to need more or less the same imports?

By experience, sometimes the import in the module creates dependencies just for importing the module which breaks a package which would work (except some parts) if those imports were local imports. But this is when developping an external package. In Sage, this will be fixed anyway. But, I don't know, in my case, I try keep this habit. But, it is true it might not be a sage convention.

Another reason which might be less pointless is to avoid to cluter the tab completion with lots of technical stuff when we do `from sage.rings.polynomial.msolve import [TAB]`.

> 
> > 2. Now that the `except` clause is gone. It is weird to have a `try` with no `except`:

> 
> Isn't that the standard way of cleaning up after an operation that may raise an error or be interrupted?

Oups, you are right. I am learning something here. The `print(2)` is executed here before the exception is raised:

```
sage: try:
....:     raise Exception
....: finally:
....:     print(2)
....:     
2
Traceback (most recent call last):
...
Exception: 
```

Whereas below it is not:

```
sage: raise Exception; print(2)
Traceback (most recent call last):
...
Exception: 
```

So, I now see the point of the `try` with no `except`.

> 
> > 3. You write `.decode('ascii')` here:
> > 
> > ```
> > data = sage_eval(msolve_out.stdout[:-2].decode('ascii'))
> > ```
> > 
> > Maybe instead, you can use the option `text=True` in the call to `subprocess.run`?

> 
> Maybe. As far as I understand msolve will always feed us pure ascii text with unix newlines, so `decode('ascii')` felt more natural to me, but I'm fine with changing it if there is a reason to do so.

Well, I think you write `.decode('ascii')` because it returns the stdout as binary. I am just saying that if you write `text=True` in the `run` command, the stdout will already be translated into ascii. So you will not need to translate the binary stdout to to ascii.

> 
> > 4. Why is the line `os.unlink(msolve_in.name)` needed even after closing the file?

> 
> I am not sure I understand the question. I suppose I could write
> 
> ```
>     with tempfile.NamedTemporaryFile(dir=SAGE_TMP, mode='w',
>                                      encoding='ascii') as msolve_in:
>         command = ["msolve", "-f", msolve_in.name]
>         if isinstance(ring, (RealIntervalField_class, RealBallField,
>                             RealField_class, RealDoubleField_class)):
>             parameterization = False
>             command += ["-p", str(ring.precision())]
>         else:
>             parameterization = True
>             command += ["-P", "1"]
>         print(",".join(drlpolring.variable_names()), file=msolve_in)
>         print(base.characteristic(), file=msolve_in)
>         print(*(pol._repr_().replace(" ", "") for pol in polys),
>                 sep=',\n', file=msolve_in, flush=True)
>         msolve_out = subprocess.run(command, capture_output=True)
> ```
> but (1) I find that closing the file is clearer than putting a `flush()` in the right place, and (2) I need msolve to be able to open the file, which, according to the Python docs, is not allowed on all platforms if Sage keeps it open. So I create the tempfile with `delete=False`, and hence I am responsible for deleting it.

Ok I see.



---

archive/issue_comments_545285.json:
```json
{
    "body": "Changed commit from **[`bd6bb36`](https://github.com/sagemath/sagetrac-mirror/commit/bd6bb36b6f3100801a0bceeec0874791da87ead4)** to **[`c7bb8aa`](https://github.com/sagemath/sagetrac-mirror/commit/c7bb8aa274b1b86829b4c8445cff111b6e841649)**",
    "created_at": "2022-04-21T15:47:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545285",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bd6bb36`](https://github.com/sagemath/sagetrac-mirror/commit/bd6bb36b6f3100801a0bceeec0874791da87ead4)** to **[`c7bb8aa`](https://github.com/sagemath/sagetrac-mirror/commit/c7bb8aa274b1b86829b4c8445cff111b6e841649)**



---

archive/issue_comments_545286.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7bb8aa274b1b86829b4c8445cff111b6e841649\"><code>c7bb8aa</code></a></td><td><code>#33734 minor style change following reviewer comment</code></td></tr></table>\n",
    "created_at": "2022-04-21T15:47:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545286",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7bb8aa274b1b86829b4c8445cff111b6e841649"><code>c7bb8aa</code></a></td><td><code>#33734 minor style change following reviewer comment</code></td></tr></table>




---

archive/issue_comments_545287.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@seblabbe](#comment%3A12):\n\n> By experience, sometimes the import in the module creates dependencies just for importing the module which breaks a package which would work (except some parts) if those imports were local imports.\n\nSure, but again, this does not apply here. I agree however that it makes sense not to `import msolve` at the top of `polynomial_ideal` but only when someone calls a function with `algorithm=\"msolve\"` (and that's what my code is doing).\n\n> Well, I think you write `.decode('ascii')` because it returns the stdout as binary. I am just saying that if you write `text=True` in the `run` command, the stdout will already be translated into ascii. So you will not need to translate the binary stdout to to ascii.\n\nI still don't see the point, but I don't think it can hurt either, so fine, let's use `text=True`.",
    "created_at": "2022-04-21T15:51:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545287",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@seblabbe](#comment%3A12):

> By experience, sometimes the import in the module creates dependencies just for importing the module which breaks a package which would work (except some parts) if those imports were local imports.

Sure, but again, this does not apply here. I agree however that it makes sense not to `import msolve` at the top of `polynomial_ideal` but only when someone calls a function with `algorithm="msolve"` (and that's what my code is doing).

> Well, I think you write `.decode('ascii')` because it returns the stdout as binary. I am just saying that if you write `text=True` in the `run` command, the stdout will already be translated into ascii. So you will not need to translate the binary stdout to to ascii.

I still don't see the point, but I don't think it can hurt either, so fine, let's use `text=True`.



---

archive/issue_comments_545288.json:
```json
{
    "body": "Upstream: **Reported upstream. Developers acknowledge bug.**",
    "created_at": "2022-04-25T09:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545288",
    "user": "https://github.com/dimpase"
}
```

Upstream: **Reported upstream. Developers acknowledge bug.**



---

archive/issue_comments_545289.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nupsteam promises a docs update next week",
    "created_at": "2022-04-25T09:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545289",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">comment:15</div>

upsteam promises a docs update next week



---

archive/issue_comments_545290.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@dimpase](#comment%3A15):\n> upsteam promises a docs update next week \n\nI assume you are taking about the comment I left about the positive characteristic case? If yes, that's indeed what Mohab replied after I reported the issue, but it does not impact this ticket.\n\n(What does impact it a little is that, even in characteristic zero, the descriptions in the msolve tutorial and in `msolve --help` do not exactly match the output actually produced by the program, so I had to guess some details.)",
    "created_at": "2022-04-25T09:18:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545290",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@dimpase](#comment%3A15):
> upsteam promises a docs update next week 

I assume you are taking about the comment I left about the positive characteristic case? If yes, that's indeed what Mohab replied after I reported the issue, but it does not impact this ticket.

(What does impact it a little is that, even in characteristic zero, the descriptions in the msolve tutorial and in `msolve --help` do not exactly match the output actually produced by the program, so I had to guess some details.)



---

archive/issue_events_459580.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-04-25T10:24:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459580"
}
```



---

archive/issue_events_459581.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-04-25T10:24:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459581"
}
```



---

archive/issue_comments_545291.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nlgtm\n\n(yes, I meant positive char msolve docs)",
    "created_at": "2022-04-25T10:24:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545291",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

lgtm

(yes, I meant positive char msolve docs)



---

archive/issue_comments_545292.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2022-04-25T10:24:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545292",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_comments_545293.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nthanks!",
    "created_at": "2022-04-25T11:04:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545293",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:18" align="right">comment:18</div>

thanks!



---

archive/issue_comments_545294.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\npyflakes plugin is not happy",
    "created_at": "2022-04-25T11:24:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545294",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:19" align="right">comment:19</div>

pyflakes plugin is not happy



---

archive/issue_comments_545295.json:
```json
{
    "body": "Changed commit from **[`c7bb8aa`](https://github.com/sagemath/sagetrac-mirror/commit/c7bb8aa274b1b86829b4c8445cff111b6e841649)** to **[`0312ac6`](https://github.com/sagemath/sagetrac-mirror/commit/0312ac6af931b936bdf0476f522078f6e55c2622)**",
    "created_at": "2022-04-25T12:18:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545295",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c7bb8aa`](https://github.com/sagemath/sagetrac-mirror/commit/c7bb8aa274b1b86829b4c8445cff111b6e841649)** to **[`0312ac6`](https://github.com/sagemath/sagetrac-mirror/commit/0312ac6af931b936bdf0476f522078f6e55c2622)**



---

archive/issue_comments_545296.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a76ffbc23338e4ffc97c6c006e52340ea7723e3\"><code>4a76ffb</code></a></td><td><code>#33734 variety(): prepare for multiple algorithm options</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc858c51c259363bbf4ff29f226dab3009bb396c\"><code>dc858c5</code></a></td><td><code>#33734 variety() over \u211a using msolve</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43f9458f40012e3d456a1a3f5e0bd2117f7952f1\"><code>43f9458</code></a></td><td><code>#33734 sage.features.msolve</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0312ac6af931b936bdf0476f522078f6e55c2622\"><code>0312ac6</code></a></td><td><code>#33734 minor style change following reviewer comment</code></td></tr></table>\n",
    "created_at": "2022-04-25T12:18:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545296",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a76ffbc23338e4ffc97c6c006e52340ea7723e3"><code>4a76ffb</code></a></td><td><code>#33734 variety(): prepare for multiple algorithm options</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc858c51c259363bbf4ff29f226dab3009bb396c"><code>dc858c5</code></a></td><td><code>#33734 variety() over ℚ using msolve</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43f9458f40012e3d456a1a3f5e0bd2117f7952f1"><code>43f9458</code></a></td><td><code>#33734 sage.features.msolve</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0312ac6af931b936bdf0476f522078f6e55c2622"><code>0312ac6</code></a></td><td><code>#33734 minor style change following reviewer comment</code></td></tr></table>




---

archive/issue_events_459582.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-04-25T12:18:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459582"
}
```



---

archive/issue_events_459583.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-04-25T12:18:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459583"
}
```



---

archive/issue_comments_545297.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@fchapoton](#comment%3A19):\n> pyflakes plugin is not happy\n\nfixed, thanks",
    "created_at": "2022-04-25T12:19:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545297",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@fchapoton](#comment%3A19):
> pyflakes plugin is not happy

fixed, thanks



---

archive/issue_comments_545298.json:
```json
{
    "body": "Changed reviewer from **Dima Pasechnik** to **S\u00e9bastien Labb\u00e9, Dima Pasechnik**",
    "created_at": "2022-04-25T12:20:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545298",
    "user": "https://github.com/mezzarobba"
}
```

Changed reviewer from **Dima Pasechnik** to **Sébastien Labbé, Dima Pasechnik**



---

archive/issue_events_459584.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-04-25T20:12:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459584"
}
```



---

archive/issue_events_459585.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-04-25T20:12:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459585"
}
```



---

archive/issue_events_459586.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-07T18:42:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459586"
}
```



---

archive/issue_events_459587.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-07T18:42:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459587"
}
```



---

archive/issue_comments_545299.json:
```json
{
    "body": "Changed branch from **[u/mmezzarobba/33734-msolve](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/33734-msolve)** to **[`0312ac6`](https://github.com/sagemath/sagetrac-mirror/commit/0312ac6af931b936bdf0476f522078f6e55c2622)**",
    "created_at": "2022-05-22T16:32:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33734#issuecomment-545299",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mmezzarobba/33734-msolve](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/33734-msolve)** to **[`0312ac6`](https://github.com/sagemath/sagetrac-mirror/commit/0312ac6af931b936bdf0476f522078f6e55c2622)**



---

archive/issue_events_459588.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-22T16:32:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459588"
}
```



---

archive/issue_events_459589.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5e65c161086dec1d07edda70ce51726f2bb241e0",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-05-22T16:32:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33734",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33734#event-459589"
}
```
