# Issue 33040: Update matplotlib to 3.5

archive/issues_032803.json:
```json
{
    "body": "Previous update: #31580\n\nCC:  @dimpase @kiwifb @antonio-rojas @tornaria\n\nReviewer: Fran\u00e7ois Bissey, Eric Gourgoulhon\n\nAuthor: Matthias Koeppe\n\nBranch: 41de5febd8c2c69a0072f1d0708cf8d7a6f3553a\n\nDependencies: #31580\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33040\n\n",
    "closed_at": "2021-12-28T21:15:38Z",
    "created_at": "2021-12-17T16:56:49Z",
    "labels": [
        "component: packages: standard",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Update matplotlib to 3.5",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33040",
    "user": "https://github.com/mkoeppe"
}
```
Previous update: #31580

CC:  @dimpase @kiwifb @antonio-rojas @tornaria

Reviewer: François Bissey, Eric Gourgoulhon

Author: Matthias Koeppe

Branch: 41de5febd8c2c69a0072f1d0708cf8d7a6f3553a

Dependencies: #31580

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33040





---

archive/issue_comments_658738.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/update_matplotlib_to_3_5\"",
    "created_at": "2021-12-18T03:51:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658738",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/update_matplotlib_to_3_5"



---

archive/issue_comments_658739.json:
```json
{
    "body": "<a id='comment:2'></a>Last 10 new commits:",
    "created_at": "2021-12-18T03:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658739",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>Last 10 new commits:



---

archive/issue_comments_658740.json:
```json
{
    "body": "Changing commit from \"\" to \"9b5a66335b9cf7b46c27c35b75ed12511660f858\"",
    "created_at": "2021-12-18T03:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658740",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "9b5a66335b9cf7b46c27c35b75ed12511660f858"



---

archive/issue_comments_658741.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-12-18T03:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658741",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_658742.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-12-18T03:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658742",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_658743.json:
```json
{
    "body": "<a id='comment:3'></a>According to the gentoo ebuild for 3.5.1 there should be another new runtime dependency https://pypi.org/project/fonttools/ although it may work without it for all I know.",
    "created_at": "2021-12-18T03:58:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658743",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:3'></a>According to the gentoo ebuild for 3.5.1 there should be another new runtime dependency https://pypi.org/project/fonttools/ although it may work without it for all I know.



---

archive/issue_comments_658744.json:
```json
{
    "body": "Changing commit from \"9b5a66335b9cf7b46c27c35b75ed12511660f858\" to \"d865a54526829b79d5d236a40f83ddc6ce7b2696\"",
    "created_at": "2021-12-18T20:33:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658744",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9b5a66335b9cf7b46c27c35b75ed12511660f858" to "d865a54526829b79d5d236a40f83ddc6ce7b2696"



---

archive/issue_comments_658745.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-18T20:33:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658745",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_658746.json:
```json
{
    "body": "<a id='comment:5'></a>Looks good to me, and it solves the issue with deprecated distutils and python 3.10.",
    "created_at": "2021-12-19T21:38:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658746",
    "user": "https://github.com/tornaria"
}
```

<a id='comment:5'></a>Looks good to me, and it solves the issue with deprecated distutils and python 3.10.



---

archive/issue_comments_658747.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2021-12-19T22:25:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658747",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_658748.json:
```json
{
    "body": "<a id='comment:7'></a>My changes to qhull in #31580 need to be merged here.",
    "created_at": "2021-12-20T01:25:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658748",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>My changes to qhull in #31580 need to be merged here.



---

archive/issue_comments_658749.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-20T03:35:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658749",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_658750.json:
```json
{
    "body": "Changing commit from \"d865a54526829b79d5d236a40f83ddc6ce7b2696\" to \"41de5febd8c2c69a0072f1d0708cf8d7a6f3553a\"",
    "created_at": "2021-12-20T03:35:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658750",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d865a54526829b79d5d236a40f83ddc6ce7b2696" to "41de5febd8c2c69a0072f1d0708cf8d7a6f3553a"



---

archive/issue_comments_658751.json:
```json
{
    "body": "<a id='comment:9'></a>LGTM",
    "created_at": "2021-12-20T20:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658751",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:9'></a>LGTM



---

archive/issue_comments_658752.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-20T20:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658752",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_658753.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fran\u00e7ois Bissey\"",
    "created_at": "2021-12-20T20:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658753",
    "user": "https://github.com/kiwifb"
}
```

Changing reviewer from "" to "François Bissey"



---

archive/issue_comments_658754.json:
```json
{
    "body": "<a id='comment:10'></a>Thanks!",
    "created_at": "2021-12-20T20:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658754",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>Thanks!



---

archive/issue_comments_658755.json:
```json
{
    "body": "<a id='comment:11'></a>Just to tell that I've tested the update on a few notebooks involving various matplotlib plots, either via Sage graphics or via direct use of matplotlib. Everything is OK. Thanks for the update!",
    "created_at": "2021-12-21T16:25:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658755",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:11'></a>Just to tell that I've tested the update on a few notebooks involving various matplotlib plots, either via Sage graphics or via direct use of matplotlib. Everything is OK. Thanks for the update!



---

archive/issue_comments_658756.json:
```json
{
    "body": "<a id='comment:12'></a>Thanks for testing!",
    "created_at": "2021-12-21T16:27:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658756",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Thanks for testing!



---

archive/issue_comments_658757.json:
```json
{
    "body": "Changing reviewer from \"Fran\u00e7ois Bissey\" to \"Fran\u00e7ois Bissey, Eric Gourgoulhon\"",
    "created_at": "2021-12-21T16:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658757",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "François Bissey" to "François Bissey, Eric Gourgoulhon"



---

archive/issue_comments_658758.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/update_matplotlib_to_3_5\" to \"41de5febd8c2c69a0072f1d0708cf8d7a6f3553a\"",
    "created_at": "2021-12-28T21:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658758",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/update_matplotlib_to_3_5" to "41de5febd8c2c69a0072f1d0708cf8d7a6f3553a"



---

archive/issue_events_087305.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-12-28T21:15:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33040#event-87305"
}
```



---

archive/issue_comments_658759.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-12-28T21:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658759",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_658760.json:
```json
{
    "body": "<a id='comment:15'></a>New warning after this upgrade (or possibly that to\u00a03.4?):\n\n```\nsage: list_plot([0], marker='x')\n/home/marc/co/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/plot/point.py:288: UserWarning: You passed a edgecolor/edgecolors ('none') for an unfilled marker ('x').  Matplotlib is ignoring the edgecolor in favor of the facecolor.  This behavior may change in the future.\n  subplot.scatter(self.xdata, self.ydata, s=s, c=c, alpha=a, zorder=z,\n```",
    "created_at": "2022-01-13T10:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658760",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:15'></a>New warning after this upgrade (or possibly that to 3.4?):

```
sage: list_plot([0], marker='x')
/home/marc/co/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/plot/point.py:288: UserWarning: You passed a edgecolor/edgecolors ('none') for an unfilled marker ('x').  Matplotlib is ignoring the edgecolor in favor of the facecolor.  This behavior may change in the future.
  subplot.scatter(self.xdata, self.ydata, s=s, c=c, alpha=a, zorder=z,
```



---

archive/issue_comments_658761.json:
```json
{
    "body": "Changing commit from \"41de5febd8c2c69a0072f1d0708cf8d7a6f3553a\" to \"\"",
    "created_at": "2022-01-13T10:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33040",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33040#issuecomment-658761",
    "user": "https://github.com/mezzarobba"
}
```

Changing commit from "41de5febd8c2c69a0072f1d0708cf8d7a6f3553a" to ""
