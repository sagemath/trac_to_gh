# Issue 33931: Deprecate sage.misc.viewer

archive/issues_033694.json:
```json
{
    "assignees": [],
    "body": "As part of #32957, let's deprecate `sage.misc.viewer` in favor of (a) for images, a version that uses Sage's `Features` and (b) for web browsing, the Python library `webbrowser`.\n\nCC:  @seblabbe\n\nBranch/Commit: **[u/jhpalmieri/deprecate-viewer](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/deprecate-viewer) @ [cb099ed](https://github.com/sagemath/sagetrac-mirror/commit/cb099ed8dbda154cacbee460eced5d885bfbb353)**\n\nReviewer: **S\u00e9bastien Labb\u00e9**\n\nAuthor: **John Palmieri**\n\nComponent: **misc**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33931_\n\n",
    "created_at": "2022-05-29T00:49:15Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20review"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Deprecate sage.misc.viewer",
    "type": "issue",
    "updated_at": "2022-09-30T17:57:42Z",
    "url": "https://github.com/sagemath/sage/issues/33931",
    "user": "https://github.com/jhpalmieri"
}
```
As part of #32957, let's deprecate `sage.misc.viewer` in favor of (a) for images, a version that uses Sage's `Features` and (b) for web browsing, the Python library `webbrowser`.

CC:  @seblabbe

Branch/Commit: **[u/jhpalmieri/deprecate-viewer](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/deprecate-viewer) @ [cb099ed](https://github.com/sagemath/sagetrac-mirror/commit/cb099ed8dbda154cacbee460eced5d885bfbb353)**

Reviewer: **Sébastien Labbé**

Author: **John Palmieri**

Component: **misc**

_Issue created by migration from https://trac.sagemath.org/ticket/33931_





---

archive/issue_events_465137.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-05-29T00:49:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465137"
}
```



---

archive/issue_events_465138.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-05-29T00:49:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465138"
}
```



---

archive/issue_events_465139.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-05-29T00:49:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465139"
}
```



---

archive/issue_comments_548683.json:
```json
{
    "body": "Branch: **[u/jhpalmieri/deprecate-viewer](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/deprecate-viewer)**",
    "created_at": "2022-05-29T00:50:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548683",
    "user": "https://github.com/jhpalmieri"
}
```

Branch: **[u/jhpalmieri/deprecate-viewer](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/deprecate-viewer)**



---

archive/issue_comments_548684.json:
```json
{
    "body": "Commit: **[bbe8110](https://github.com/sagemath/sagetrac-mirror/commit/bbe811080a104370911d952e80434e2f27707baa)**",
    "created_at": "2022-05-29T00:53:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548684",
    "user": "https://github.com/jhpalmieri"
}
```

Commit: **[bbe8110](https://github.com/sagemath/sagetrac-mirror/commit/bbe811080a104370911d952e80434e2f27707baa)**



---

archive/issue_comments_548685.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI tested this by running these commands in Sage from the command line and in the notebook:\n\n```\nC = graphs.CubeGraph(8)\nC.plot(vertex_labels=False, vertex_size=0, graph_border=True).show()\n\nview(4)\nview(4, viewer='pdf')\n\nfrom sage.misc.latex_standalone import Standalone\ns = Standalone('hello world')\ns.pdf()\ns.png()\ns.svg()  # fails on my machine: missing feature\n\nbrowse_sage_doc._open('reference')\nbrowse_sage_doc(identity_matrix)\n```\nI did this with the develop branch, with this branch, and with a more radical branch in which I completely deleted `sage.misc.viewer` and its entry in the reference manual. It looked like the same behavior in all of these cases. This was all on OS X, I encourage more testing on more platforms.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bbe811080a104370911d952e80434e2f27707baa\">bbe8110</a></td><td><code>trac 33931: deprecate sage.misc.viewer</code></td></tr></table>\n",
    "created_at": "2022-05-29T00:53:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548685",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:2" align="right">comment:2</div>

I tested this by running these commands in Sage from the command line and in the notebook:

```
C = graphs.CubeGraph(8)
C.plot(vertex_labels=False, vertex_size=0, graph_border=True).show()

view(4)
view(4, viewer='pdf')

from sage.misc.latex_standalone import Standalone
s = Standalone('hello world')
s.pdf()
s.png()
s.svg()  # fails on my machine: missing feature

browse_sage_doc._open('reference')
browse_sage_doc(identity_matrix)
```
I did this with the develop branch, with this branch, and with a more radical branch in which I completely deleted `sage.misc.viewer` and its entry in the reference manual. It looked like the same behavior in all of these cases. This was all on OS X, I encourage more testing on more platforms.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bbe811080a104370911d952e80434e2f27707baa">bbe8110</a></td><td><code>trac 33931: deprecate sage.misc.viewer</code></td></tr></table>




---

archive/issue_events_465140.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-05-29T00:53:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465140"
}
```



---

archive/issue_comments_548686.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThis is not working on an Ubuntu virtual machine. It tries to open every png and pdf in a web browser and produces a message like `File not found. Firefox can't find the file at //tmp/....`. Not sure why there are two slashes, but the file is there with the right name and the right contents.",
    "created_at": "2022-06-13T21:12:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548686",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:3" align="right">comment:3</div>

This is not working on an Ubuntu virtual machine. It tries to open every png and pdf in a web browser and produces a message like `File not found. Firefox can't find the file at //tmp/....`. Not sure why there are two slashes, but the file is there with the right name and the right contents.



---

archive/issue_comments_548687.json:
```json
{
    "body": "Changed commit from **[bbe8110](https://github.com/sagemath/sagetrac-mirror/commit/bbe811080a104370911d952e80434e2f27707baa)** to **[426e39d](https://github.com/sagemath/sagetrac-mirror/commit/426e39dc5f280da4df9c4c04562b8832644eaa09)**",
    "created_at": "2022-06-13T21:49:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548687",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bbe8110](https://github.com/sagemath/sagetrac-mirror/commit/bbe811080a104370911d952e80434e2f27707baa)** to **[426e39d](https://github.com/sagemath/sagetrac-mirror/commit/426e39dc5f280da4df9c4c04562b8832644eaa09)**



---

archive/issue_comments_548688.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/046849e62453aa74c103dd25bc450b4dd1e74d6e\">046849e</a></td><td><code>trac 33931: deprecate sage.misc.viewer</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/426e39dc5f280da4df9c4c04562b8832644eaa09\">426e39d</a></td><td><code>trad 33931: try PIL first, then a browser</code></td></tr></table>\n",
    "created_at": "2022-06-13T21:49:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548688",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/046849e62453aa74c103dd25bc450b4dd1e74d6e">046849e</a></td><td><code>trac 33931: deprecate sage.misc.viewer</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/426e39dc5f280da4df9c4c04562b8832644eaa09">426e39d</a></td><td><code>trad 33931: try PIL first, then a browser</code></td></tr></table>




---

archive/issue_events_465141.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-06-13T21:50:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465141"
}
```



---

archive/issue_events_465142.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-06-13T21:50:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465142"
}
```



---

archive/issue_comments_548689.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nWith these changes (trying PIL first, then a browser as a backup), some images work for me on Ubuntu, but PDF files still fail with the same error message. Suggestions?",
    "created_at": "2022-06-13T21:50:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548689",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

With these changes (trying PIL first, then a browser as a backup), some images work for me on Ubuntu, but PDF files still fail with the same error message. Suggestions?



---

archive/issue_comments_548690.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@jhpalmieri](#comment:2):\n> I tested this by running these commands in Sage from the command line and in the notebook:\n> \n> ```\n> C = graphs.CubeGraph(8)\n> C.plot(vertex_labels=False, vertex_size=0, graph_border=True).show()\n> \n> view(4)\n> view(4, viewer='pdf')\n> \n> from sage.misc.latex_standalone import Standalone\n> s = Standalone('hello world')\n> s.pdf()\n> s.png()\n> s.svg()  # fails on my machine: missing feature\n> \n> browse_sage_doc._open('reference')\n> browse_sage_doc(identity_matrix)\n> ```\n> I did this with the develop branch, with this branch, and with a more radical branch in which I completely deleted `sage.misc.viewer` and its entry in the reference manual. It looked like the same behavior in all of these cases. This was all on OS X, I encourage more testing on more platforms.\n\nOn Ubuntu 20.04, all of the above work. The behavior of `s.pdf()`, `s.png()` and `s.svg()` changed as it now open in the browser at url like `file:////tmp/tmp0jvfbjec/tikz_u5t2ot7z.pdf`. It is fine with me.\n\nPositive review from my side.",
    "created_at": "2022-06-23T10:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548690",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@jhpalmieri](#comment:2):
> I tested this by running these commands in Sage from the command line and in the notebook:
> 
> ```
> C = graphs.CubeGraph(8)
> C.plot(vertex_labels=False, vertex_size=0, graph_border=True).show()
> 
> view(4)
> view(4, viewer='pdf')
> 
> from sage.misc.latex_standalone import Standalone
> s = Standalone('hello world')
> s.pdf()
> s.png()
> s.svg()  # fails on my machine: missing feature
> 
> browse_sage_doc._open('reference')
> browse_sage_doc(identity_matrix)
> ```
> I did this with the develop branch, with this branch, and with a more radical branch in which I completely deleted `sage.misc.viewer` and its entry in the reference manual. It looked like the same behavior in all of these cases. This was all on OS X, I encourage more testing on more platforms.

On Ubuntu 20.04, all of the above work. The behavior of `s.pdf()`, `s.png()` and `s.svg()` changed as it now open in the browser at url like `file:////tmp/tmp0jvfbjec/tikz_u5t2ot7z.pdf`. It is fine with me.

Positive review from my side.



---

archive/issue_comments_548691.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c76c948b86758e6ca14b00d287f602d1dc047516\">c76c948</a></td><td><code>Merge branch 'develop' into t/33931/deprecate-viewer</code></td></tr></table>\n",
    "created_at": "2022-08-17T22:55:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548691",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c76c948b86758e6ca14b00d287f602d1dc047516">c76c948</a></td><td><code>Merge branch 'develop' into t/33931/deprecate-viewer</code></td></tr></table>




---

archive/issue_comments_548692.json:
```json
{
    "body": "Changed commit from **[426e39d](https://github.com/sagemath/sagetrac-mirror/commit/426e39dc5f280da4df9c4c04562b8832644eaa09)** to **[c76c948](https://github.com/sagemath/sagetrac-mirror/commit/c76c948b86758e6ca14b00d287f602d1dc047516)**",
    "created_at": "2022-08-17T22:55:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548692",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[426e39d](https://github.com/sagemath/sagetrac-mirror/commit/426e39dc5f280da4df9c4c04562b8832644eaa09)** to **[c76c948](https://github.com/sagemath/sagetrac-mirror/commit/c76c948b86758e6ca14b00d287f602d1dc047516)**



---

archive/issue_events_465143.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-08-17T22:55:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465143"
}
```



---

archive/issue_events_465144.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-08-17T22:55:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465144"
}
```



---

archive/issue_comments_548693.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nRebased to 9.7.beta8, ready for review.",
    "created_at": "2022-08-17T22:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548693",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

Rebased to 9.7.beta8, ready for review.



---

archive/issue_comments_548694.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@jhpalmieri](#comment:5):\n> With these changes (trying PIL first, then a browser as a backup), some images work for me on Ubuntu, but PDF files still fail with the same error message. Suggestions?\n\nDefault webbrowser do not open pdf files. Maybe this is why?",
    "created_at": "2022-08-24T18:11:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548694",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@jhpalmieri](#comment:5):
> With these changes (trying PIL first, then a browser as a backup), some images work for me on Ubuntu, but PDF files still fail with the same error message. Suggestions?

Default webbrowser do not open pdf files. Maybe this is why?



---

archive/issue_comments_548695.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@seblabbe](#comment:10):\n> Replying to [@jhpalmieri](#comment:5):\n> > With these changes (trying PIL first, then a browser as a backup), some images work for me on Ubuntu, but PDF files still fail with the same error message. Suggestions?\n\n> \n> Default webbrowser do not open pdf files. Maybe this is why?\n\nWhat, are we still living in the 90s?",
    "created_at": "2022-08-24T18:29:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548695",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@seblabbe](#comment:10):
> Replying to [@jhpalmieri](#comment:5):
> > With these changes (trying PIL first, then a browser as a backup), some images work for me on Ubuntu, but PDF files still fail with the same error message. Suggestions?

> 
> Default webbrowser do not open pdf files. Maybe this is why?

What, are we still living in the 90s?



---

archive/issue_comments_548696.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nMaybe we need to keep some of the old functionality for opening pdfs, or reimplement it using `Features`.",
    "created_at": "2022-08-24T18:32:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548696",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:12" align="right">comment:12</div>

Maybe we need to keep some of the old functionality for opening pdfs, or reimplement it using `Features`.



---

archive/issue_comments_548697.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@seblabbe](#comment:7):\n> On Ubuntu 20.04, all of the above work. The behavior of `s.pdf()`, `s.png()` and `s.svg()` changed as it now open in the browser at url like `file:////tmp/tmp0jvfbjec/tikz_u5t2ot7z.pdf`. It is fine with me.\n> Positive review from my side.\n\nLooking at this ticket again, I don't think I am confident anymore to give a positive review. Deprecating `viewer` in favor of webbrowser changes a behavior in sage that exists since 15 years. In particular, on my Ubuntu, viewer is an equivalent for the more general `xdg-open`:\n\n```\nsage: from sage.misc.viewer import viewer\nsage: viewer('pdf')\n'xdg-open'\n```\n\nAlso, the current state which exists for years allows the user to specify its preferated viewer:\n\n```\nsage: from sage.misc.viewer import viewer, _viewer_prefs\nsage: viewer.pdf_viewer('evince')\nsage: _viewer_prefs\n{'pdf_viewer': 'evince'}\n```\n\nSo, the current branch might be a step backward for many long time users which have old written code. Personnaly, I am afraid the current change will break something on a platform I am not familiar with like Windows or OS X, which I can't test.\n\nFinally, is the motivation for the current branch only to get rid of `have_program`? If so, I would suggest to create a feature for `xdg-open` and use webbrowser in the lines where `firefox`, etc. is involved.",
    "created_at": "2022-08-24T18:35:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548697",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@seblabbe](#comment:7):
> On Ubuntu 20.04, all of the above work. The behavior of `s.pdf()`, `s.png()` and `s.svg()` changed as it now open in the browser at url like `file:////tmp/tmp0jvfbjec/tikz_u5t2ot7z.pdf`. It is fine with me.
> Positive review from my side.

Looking at this ticket again, I don't think I am confident anymore to give a positive review. Deprecating `viewer` in favor of webbrowser changes a behavior in sage that exists since 15 years. In particular, on my Ubuntu, viewer is an equivalent for the more general `xdg-open`:

```
sage: from sage.misc.viewer import viewer
sage: viewer('pdf')
'xdg-open'
```

Also, the current state which exists for years allows the user to specify its preferated viewer:

```
sage: from sage.misc.viewer import viewer, _viewer_prefs
sage: viewer.pdf_viewer('evince')
sage: _viewer_prefs
{'pdf_viewer': 'evince'}
```

So, the current branch might be a step backward for many long time users which have old written code. Personnaly, I am afraid the current change will break something on a platform I am not familiar with like Windows or OS X, which I can't test.

Finally, is the motivation for the current branch only to get rid of `have_program`? If so, I would suggest to create a feature for `xdg-open` and use webbrowser in the lines where `firefox`, etc. is involved.



---

archive/issue_events_465145.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-08-24T18:39:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465145"
}
```



---

archive/issue_events_465146.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-08-24T18:39:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465146"
}
```



---

archive/issue_comments_548698.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n(The motivation came from the brief discussion at [#32957 comment:14](https://github.com/sagemath/sage/issues/32957#comment:14).)",
    "created_at": "2022-08-24T21:30:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548698",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:15" align="right">comment:15</div>

(The motivation came from the brief discussion at [#32957 comment:14](https://github.com/sagemath/sage/issues/32957#comment:14).)



---

archive/issue_comments_548699.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@jhpalmieri](#comment:15):\n> (The motivation came from the brief discussion at [#32957 comment:14](https://github.com/sagemath/sage/issues/32957#comment:14).)\n\nOk, I remember now. Maybe we can start by replacing occurences of `have_program` by some usage of `webbrowser`.\n\nAlso, in the documentation of [webbrowser.open](https://docs.python.org/3/library/webbrowser.html#webbrowser.open), I see:\n\n*\"Note that on some platforms, trying to open a filename using this function, may work and start the operating system\u2019s associated program. However, this is neither supported nor portable.\"*\n\nHowever, I don't know if this comment refers to `r'file:///path/to/file'` or only `r'path/to/file'`.",
    "created_at": "2022-08-25T10:36:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548699",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@jhpalmieri](#comment:15):
> (The motivation came from the brief discussion at [#32957 comment:14](https://github.com/sagemath/sage/issues/32957#comment:14).)

Ok, I remember now. Maybe we can start by replacing occurences of `have_program` by some usage of `webbrowser`.

Also, in the documentation of [webbrowser.open](https://docs.python.org/3/library/webbrowser.html#webbrowser.open), I see:

*"Note that on some platforms, trying to open a filename using this function, may work and start the operating system’s associated program. However, this is neither supported nor portable."*

However, I don't know if this comment refers to `r'file:///path/to/file'` or only `r'path/to/file'`.



---

archive/issue_comments_548700.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b07ec304d944f07d7e89c726a9f182dc034f50f4\">b07ec30</a></td><td><code>trac 33931: deprecate viewer.py as part of eliminating the use of</code></td></tr></table>\n",
    "created_at": "2022-09-07T22:54:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548700",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b07ec304d944f07d7e89c726a9f182dc034f50f4">b07ec30</a></td><td><code>trac 33931: deprecate viewer.py as part of eliminating the use of</code></td></tr></table>




---

archive/issue_comments_548701.json:
```json
{
    "body": "Changed commit from **[c76c948](https://github.com/sagemath/sagetrac-mirror/commit/c76c948b86758e6ca14b00d287f602d1dc047516)** to **[b07ec30](https://github.com/sagemath/sagetrac-mirror/commit/b07ec304d944f07d7e89c726a9f182dc034f50f4)**",
    "created_at": "2022-09-07T22:54:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548701",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c76c948](https://github.com/sagemath/sagetrac-mirror/commit/c76c948b86758e6ca14b00d287f602d1dc047516)** to **[b07ec30](https://github.com/sagemath/sagetrac-mirror/commit/b07ec304d944f07d7e89c726a9f182dc034f50f4)**



---

archive/issue_comments_548702.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHere is a new version. This deprecates `viewer.py` and introduces `image_viewer.py`. A few differences between these: `image_viewer.py` only deals with images: web browsing is done through Python's `webbrowser` module. Also, `image_viewer.py` uses `Features` to detect the presence of `xdg-open` and similar.",
    "created_at": "2022-09-07T22:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548702",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:18" align="right">comment:18</div>

Here is a new version. This deprecates `viewer.py` and introduces `image_viewer.py`. A few differences between these: `image_viewer.py` only deals with images: web browsing is done through Python's `webbrowser` module. Also, `image_viewer.py` uses `Features` to detect the presence of `xdg-open` and similar.



---

archive/issue_comments_548703.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-As part of #32957, let's deprecate `sage.misc.viewer` in favor of the Python library `webbrowser`.\n+As part of #32957, let's deprecate `sage.misc.viewer` in favor of (a) for images, a version that uses Sage's `Features` and (b) for web browsing, the Python library `webbrowser`.\n``````\n",
    "created_at": "2022-09-07T22:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548703",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-As part of #32957, let's deprecate `sage.misc.viewer` in favor of the Python library `webbrowser`.
+As part of #32957, let's deprecate `sage.misc.viewer` in favor of (a) for images, a version that uses Sage's `Features` and (b) for web browsing, the Python library `webbrowser`.
``````




---

archive/issue_events_465147.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-09-07T22:56:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465147"
}
```



---

archive/issue_events_465148.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-09-07T22:56:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465148"
}
```



---

archive/issue_comments_548704.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nQuestions and comments:\n\n- I don't know a good way to test whether `open` (for example) is functional. While `xdg-open` and `cygstart` are pretty specific names, I can imagine someone installing an executable called `open` on their linux box which doesn't do anything what we expect here. If I actually call `open` to try to open a file, then if successful, it will start an app and open up a window, and that does not seem ideal. Right now there is no `is_functional` test for these new features.\n\n- the change in `latex.py`\n\n```diff\ndiff --git a/src/sage/misc/latex.py b/src/sage/misc/latex.py\nindex 3ec3a3e..5d9ebdb 100644\n--- a/src/sage/misc/latex.py\n+++ b/src/sage/misc/latex.py\n@@ -1859,7 +1859,7 @@ def view(objects, title='Sage', debug=False, sep='', tiny=False,\n         sage: with NamedTemporaryFile(mode=\"w+t\", suffix=\".tex\") as f:  # optional - latex latex_package_tkz_graph\n         ....:     _ = f.write(_latex_file_(g))\n         ....:     f.flush()\n-        ....:     _run_latex_(file, engine=\"pdflatex\")\n+        ....:     _run_latex_(f.name, engine=\"pdflatex\")\n         'pdf'\n```\n is just fixing a bug: `file` is not defined, whereas `f.name` is the name of the temporary file being used in `with ... as f:`. I guess no one runs doctests using `latex` as an optional flag?",
    "created_at": "2022-09-07T23:03:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548704",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:19" align="right">comment:19</div>

Questions and comments:

- I don't know a good way to test whether `open` (for example) is functional. While `xdg-open` and `cygstart` are pretty specific names, I can imagine someone installing an executable called `open` on their linux box which doesn't do anything what we expect here. If I actually call `open` to try to open a file, then if successful, it will start an app and open up a window, and that does not seem ideal. Right now there is no `is_functional` test for these new features.

- the change in `latex.py`

```diff
diff --git a/src/sage/misc/latex.py b/src/sage/misc/latex.py
index 3ec3a3e..5d9ebdb 100644
--- a/src/sage/misc/latex.py
+++ b/src/sage/misc/latex.py
@@ -1859,7 +1859,7 @@ def view(objects, title='Sage', debug=False, sep='', tiny=False,
         sage: with NamedTemporaryFile(mode="w+t", suffix=".tex") as f:  # optional - latex latex_package_tkz_graph
         ....:     _ = f.write(_latex_file_(g))
         ....:     f.flush()
-        ....:     _run_latex_(file, engine="pdflatex")
+        ....:     _run_latex_(f.name, engine="pdflatex")
         'pdf'
```
 is just fixing a bug: `file` is not defined, whereas `f.name` is the name of the temporary file being used in `with ... as f:`. I guess no one runs doctests using `latex` as an optional flag?



---

archive/issue_comments_548705.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI don't see a way to edit my comments. The first item in the previous comment perhaps should have ended with a question: suggestions for what to do?",
    "created_at": "2022-09-07T23:04:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548705",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:20" align="right">comment:20</div>

I don't see a way to edit my comments. The first item in the previous comment perhaps should have ended with a question: suggestions for what to do?



---

archive/issue_events_465149.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465149"
}
```



---

archive/issue_events_465150.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465150"
}
```



---

archive/issue_comments_548706.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84107aa04ad1a1b21b25a92088d53ed818f3fa7d\">84107aa</a></td><td><code>Merge branch 'develop' into t/33931/deprecate-viewer</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a99f59d7c3e7b7a8d0b07b465313396251bf6484\">a99f59d</a></td><td><code>trac 33931: merge develop and undo `_run_latex_` fix: that is now in #34594.</code></td></tr></table>\n",
    "created_at": "2022-09-27T21:27:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548706",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84107aa04ad1a1b21b25a92088d53ed818f3fa7d">84107aa</a></td><td><code>Merge branch 'develop' into t/33931/deprecate-viewer</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a99f59d7c3e7b7a8d0b07b465313396251bf6484">a99f59d</a></td><td><code>trac 33931: merge develop and undo `_run_latex_` fix: that is now in #34594.</code></td></tr></table>




---

archive/issue_comments_548707.json:
```json
{
    "body": "Changed commit from **[b07ec30](https://github.com/sagemath/sagetrac-mirror/commit/b07ec304d944f07d7e89c726a9f182dc034f50f4)** to **[a99f59d](https://github.com/sagemath/sagetrac-mirror/commit/a99f59d7c3e7b7a8d0b07b465313396251bf6484)**",
    "created_at": "2022-09-27T21:27:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548707",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b07ec30](https://github.com/sagemath/sagetrac-mirror/commit/b07ec304d944f07d7e89c726a9f182dc034f50f4)** to **[a99f59d](https://github.com/sagemath/sagetrac-mirror/commit/a99f59d7c3e7b7a8d0b07b465313396251bf6484)**



---

archive/issue_comments_548708.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb78cbc3ff6d0b86762e5f2bb8b136ffab74940f\">cb78cbc</a></td><td><code>trac 33931: undo `_run_latex_` fix: that is now in #34594.</code></td></tr></table>\n",
    "created_at": "2022-09-27T21:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548708",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb78cbc3ff6d0b86762e5f2bb8b136ffab74940f">cb78cbc</a></td><td><code>trac 33931: undo `_run_latex_` fix: that is now in #34594.</code></td></tr></table>




---

archive/issue_comments_548709.json:
```json
{
    "body": "Changed commit from **[a99f59d](https://github.com/sagemath/sagetrac-mirror/commit/a99f59d7c3e7b7a8d0b07b465313396251bf6484)** to **[cb78cbc](https://github.com/sagemath/sagetrac-mirror/commit/cb78cbc3ff6d0b86762e5f2bb8b136ffab74940f)**",
    "created_at": "2022-09-27T21:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548709",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a99f59d](https://github.com/sagemath/sagetrac-mirror/commit/a99f59d7c3e7b7a8d0b07b465313396251bf6484)** to **[cb78cbc](https://github.com/sagemath/sagetrac-mirror/commit/cb78cbc3ff6d0b86762e5f2bb8b136ffab74940f)**



---

archive/issue_comments_548710.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThe current branch has a conflict with 9.8.beta1.",
    "created_at": "2022-09-30T11:56:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548710",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:24" align="right">comment:24</div>

The current branch has a conflict with 9.8.beta1.



---

archive/issue_events_465151.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-09-30T11:56:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465151"
}
```



---

archive/issue_events_465152.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-09-30T11:56:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465152"
}
```



---

archive/issue_comments_548711.json:
```json
{
    "body": "Reviewer: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2022-09-30T11:56:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548711",
    "user": "https://github.com/seblabbe"
}
```

Reviewer: **Sébastien Labbé**



---

archive/issue_comments_548712.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb099ed8dbda154cacbee460eced5d885bfbb353\">cb099ed</a></td><td><code>Merge branch 'develop' into t/33931/deprecate-viewer</code></td></tr></table>\n",
    "created_at": "2022-09-30T17:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548712",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb099ed8dbda154cacbee460eced5d885bfbb353">cb099ed</a></td><td><code>Merge branch 'develop' into t/33931/deprecate-viewer</code></td></tr></table>




---

archive/issue_comments_548713.json:
```json
{
    "body": "Changed commit from **[cb78cbc](https://github.com/sagemath/sagetrac-mirror/commit/cb78cbc3ff6d0b86762e5f2bb8b136ffab74940f)** to **[cb099ed](https://github.com/sagemath/sagetrac-mirror/commit/cb099ed8dbda154cacbee460eced5d885bfbb353)**",
    "created_at": "2022-09-30T17:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548713",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cb78cbc](https://github.com/sagemath/sagetrac-mirror/commit/cb78cbc3ff6d0b86762e5f2bb8b136ffab74940f)** to **[cb099ed](https://github.com/sagemath/sagetrac-mirror/commit/cb099ed8dbda154cacbee460eced5d885bfbb353)**



---

archive/issue_comments_548714.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nMerge conflict fixed.",
    "created_at": "2022-09-30T17:57:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33931#issuecomment-548714",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:26" align="right">comment:26</div>

Merge conflict fixed.



---

archive/issue_events_465153.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-09-30T17:57:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465153"
}
```



---

archive/issue_events_465154.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-09-30T17:57:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33931",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33931#event-465154"
}
```
