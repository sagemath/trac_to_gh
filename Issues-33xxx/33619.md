# Issue 33619: clean up ell_curve_isogeny.py

archive/issues_033382.json:
```json
{
    "assignees": [],
    "body": "The core of the elliptic-curve isogeny functionality in Sage is from #5976 \u2014 almost 13 years old! \u2014 and quite a few things in the `EllipticCurveIsogeny` class look somewhat dated by now.\n\nIn this patch, we make an effort to clean up `ell_curve_isogeny.py`. Besides plenty of style improvements, the main changes are:\n\n- The documentation used to claim that only normalized, cyclic isogenies are supported. This is false for most of the codebase; these limitations only apply to a few selected algorithms (Kohel's formulas, Starks).\n\n- The `EllipticCurveIsogeny` class contained some unused member variables, and some whose design choices seemed a bit random at times. I've streamlined the fields used to store the data of `EllipticCurveIsogeny`; among other things, this means we can unify the implementation of `.degree()` for all `EllipticCurveHom` children.\n\n- The `degree` parameter for the `isogeny_codomain` method was unused; I've removed it.\n\n- The `split_kernel_polynomial()` function appears to be equivalent to calling `.radical()` on the polynomial, which also seems a little bit faster.\n\n- The `.n()` method only raised a `NotImplementedError`, but simply letting the call fall through to the parent class also fails gracefully. I've thus removed the specialized implementation.\n\n- The `.get_{pre,post}_isomorphism()` methods won't really make sense once the corresponding (already deprecated) setters are removed. I added a remark to that effect.\n\n\nDepends on #33582\nDepends on #33214\n\nCC:  shumow @JohnCremona @categorie @defeo @fchapoton @tscrim @videlec @slel @seblabbe\n\nBranch/Commit: **[2833869](https://github.com/sagemath/sagetrac-mirror/commit/2833869127e40dd0a8e36ef42316517aed9e464b)**\n\nReviewer: **John Cremona, Kwankyu Lee**\n\nAuthor: **Lorenz Panny**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33619_\n\n",
    "closed_at": "2022-06-28T22:12:37Z",
    "created_at": "2022-04-01T07:54:59Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20elliptic%20curves",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "clean up ell_curve_isogeny.py",
    "type": "issue",
    "updated_at": "2022-06-28T22:12:37Z",
    "url": "https://github.com/sagemath/sage/issues/33619",
    "user": "https://github.com/yyyyx4"
}
```
The core of the elliptic-curve isogeny functionality in Sage is from #5976 — almost 13 years old! — and quite a few things in the `EllipticCurveIsogeny` class look somewhat dated by now.

In this patch, we make an effort to clean up `ell_curve_isogeny.py`. Besides plenty of style improvements, the main changes are:

- The documentation used to claim that only normalized, cyclic isogenies are supported. This is false for most of the codebase; these limitations only apply to a few selected algorithms (Kohel's formulas, Starks).

- The `EllipticCurveIsogeny` class contained some unused member variables, and some whose design choices seemed a bit random at times. I've streamlined the fields used to store the data of `EllipticCurveIsogeny`; among other things, this means we can unify the implementation of `.degree()` for all `EllipticCurveHom` children.

- The `degree` parameter for the `isogeny_codomain` method was unused; I've removed it.

- The `split_kernel_polynomial()` function appears to be equivalent to calling `.radical()` on the polynomial, which also seems a little bit faster.

- The `.n()` method only raised a `NotImplementedError`, but simply letting the call fall through to the parent class also fails gracefully. I've thus removed the specialized implementation.

- The `.get_{pre,post}_isomorphism()` methods won't really make sense once the corresponding (already deprecated) setters are removed. I added a remark to that effect.


Depends on #33582
Depends on #33214

CC:  shumow @JohnCremona @categorie @defeo @fchapoton @tscrim @videlec @slel @seblabbe

Branch/Commit: **[2833869](https://github.com/sagemath/sagetrac-mirror/commit/2833869127e40dd0a8e36ef42316517aed9e464b)**

Reviewer: **John Cremona, Kwankyu Lee**

Author: **Lorenz Panny**

_Issue created by migration from https://trac.sagemath.org/ticket/33619_





---

archive/issue_events_428785.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-04-01T07:54:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33619#event-428785"
}
```



---

archive/issue_events_428786.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-04-01T07:54:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20elliptic%20curves",
    "label_color": "0000ff",
    "label_name": "component: elliptic curves",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33619#event-428786"
}
```



---

archive/issue_events_428787.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-04-01T07:54:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33619#event-428787"
}
```



---

archive/issue_events_428788.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-04-01T07:54:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33619#event-428788"
}
```



---

archive/issue_comments_546340.json:
```json
{
    "body": "Changed commit from **[d11e46d](https://github.com/sagemath/sagetrac-mirror/commit/d11e46d2968df9d4c72f108b3f26aed46e337a24)** to **[fe19afa](https://github.com/sagemath/sagetrac-mirror/commit/fe19afa17c216ab0daeb7e2051d21368a07475bf)**",
    "created_at": "2022-04-01T07:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546340",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d11e46d](https://github.com/sagemath/sagetrac-mirror/commit/d11e46d2968df9d4c72f108b3f26aed46e337a24)** to **[fe19afa](https://github.com/sagemath/sagetrac-mirror/commit/fe19afa17c216ab0daeb7e2051d21368a07475bf)**



---

archive/issue_comments_546341.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09c3718abc559cc10ba5a4a4b75cfc3c96396568\">09c3718</a></td><td><code>simplify 2tors/non2tors logic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52e6b02183482fce55851ef6ba962a312ef0be0b\">52e6b02</a></td><td><code>remove obsolete __kernel_polynomial_list member</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5709c305b982b749f8f38aa2fe7c9b10c2f497d4\">5709c30</a></td><td><code>remove obsolete __intermediate_codomain member</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41d6c704e435899de526ba6b01dcba788af214d9\">41d6c70</a></td><td><code>convert various [xy]_rational_maps fields into tuples</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca50d62265549efbe702fd3b3d32c1440541cffd\">ca50d62</a></td><td><code>deduplicate __E1,__E2/_domain,_codomain members</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a82205967e45718b489d2c966f47c5eb1f861d6e\">a822059</a></td><td><code>rename __degree->_degree and move .degree() up to EllipticCurveHom</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3071445140803453e184814a55f1f41a9adb8143\">3071445</a></td><td><code>clarify that {pre,post}-isomorphisms are an implementation detail</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b67b1e9bfac31b21d432fc8a04544098c27892a6\">b67b1e9</a></td><td><code>no need to override .n(); the default implementation fails gracefully</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4cd83987d8a8add01e58d044fa53fcca2491ddc\">c4cd839</a></td><td><code>replace split_kernel_polynomial() by .radical()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe19afa17c216ab0daeb7e2051d21368a07475bf\">fe19afa</a></td><td><code>add this spring cleaning to the file history</code></td></tr></table>\n",
    "created_at": "2022-04-01T07:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546341",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:1'>Comment 1:</a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09c3718abc559cc10ba5a4a4b75cfc3c96396568">09c3718</a></td><td><code>simplify 2tors/non2tors logic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52e6b02183482fce55851ef6ba962a312ef0be0b">52e6b02</a></td><td><code>remove obsolete __kernel_polynomial_list member</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5709c305b982b749f8f38aa2fe7c9b10c2f497d4">5709c30</a></td><td><code>remove obsolete __intermediate_codomain member</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41d6c704e435899de526ba6b01dcba788af214d9">41d6c70</a></td><td><code>convert various [xy]_rational_maps fields into tuples</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca50d62265549efbe702fd3b3d32c1440541cffd">ca50d62</a></td><td><code>deduplicate __E1,__E2/_domain,_codomain members</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a82205967e45718b489d2c966f47c5eb1f861d6e">a822059</a></td><td><code>rename __degree->_degree and move .degree() up to EllipticCurveHom</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3071445140803453e184814a55f1f41a9adb8143">3071445</a></td><td><code>clarify that {pre,post}-isomorphisms are an implementation detail</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b67b1e9bfac31b21d432fc8a04544098c27892a6">b67b1e9</a></td><td><code>no need to override .n(); the default implementation fails gracefully</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4cd83987d8a8add01e58d044fa53fcca2491ddc">c4cd839</a></td><td><code>replace split_kernel_polynomial() by .radical()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe19afa17c216ab0daeb7e2051d21368a07475bf">fe19afa</a></td><td><code>add this spring cleaning to the file history</code></td></tr></table>




---

archive/issue_events_428789.json:
```json
{
    "actor": "https://github.com/yyyyx4",
    "created_at": "2022-04-01T08:00:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33619#event-428789"
}
```



---

archive/issue_comments_546342.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,3 +13,5 @@\n - The `.n()` method only raised a `NotImplementedError`, but simply letting the call fall through to the parent class also fails gracefully. I've thus removed the specialized implementation.\n \n - The `.get_{pre,post}_isomorphism()` methods won't really make sense once the corresponding (already deprecated) setters are removed. I added a remark to that effect.\n+\n+Here's a diff without the dependencies: https://github.com/sagemath/sagetrac-mirror/compare/d11e46d2968df9d4c72f108b3f26aed46e337a24...fe19afa17c216ab0daeb7e2051d21368a07475bf\n``````\n",
    "created_at": "2022-04-01T08:00:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546342",
    "user": "https://github.com/yyyyx4"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,3 +13,5 @@
 - The `.n()` method only raised a `NotImplementedError`, but simply letting the call fall through to the parent class also fails gracefully. I've thus removed the specialized implementation.
 
 - The `.get_{pre,post}_isomorphism()` methods won't really make sense once the corresponding (already deprecated) setters are removed. I added a remark to that effect.
+
+Here's a diff without the dependencies: https://github.com/sagemath/sagetrac-mirror/compare/d11e46d2968df9d4c72f108b3f26aed46e337a24...fe19afa17c216ab0daeb7e2051d21368a07475bf
``````




---

archive/issue_comments_546343.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nThanks for doing this.  I won't have time to review properly for a while, but as I wrote a lot of code (in Sage library for isogenies over Q and number fields) which uses this, if all those tests pass I'm sure I'll be happy.  I have wanted to do some of the things suggested here since this class was created.",
    "created_at": "2022-04-01T08:53:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546343",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:3'>Comment 3:</a>
Thanks for doing this.  I won't have time to review properly for a while, but as I wrote a lot of code (in Sage library for isogenies over Q and number fields) which uses this, if all those tests pass I'm sure I'll be happy.  I have wanted to do some of the things suggested here since this class was created.



---

archive/issue_comments_546344.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nSame here. This looks like very good work, but it will take to look through all and I doubt I have time to do it soon.",
    "created_at": "2022-04-01T13:47:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546344",
    "user": "https://github.com/categorie"
}
```

<a id='comment:4'>Comment 4:</a>
Same here. This looks like very good work, but it will take to look through all and I doubt I have time to do it soon.



---

archive/issue_comments_546345.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42f64e4ea5caf149f745acdfeac0d6f7afad6eca\">42f64e4</a></td><td><code>Merge tag '9.6.rc0' into public/clean_up_ell_curve_isogeny_file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1439e5420fc6acc2ab0d3a66b8b8671f3d49abb1\">1439e54</a></td><td><code>fix one minor patchbot warning</code></td></tr></table>\n",
    "created_at": "2022-04-14T06:59:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546345",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>Comment 5:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42f64e4ea5caf149f745acdfeac0d6f7afad6eca">42f64e4</a></td><td><code>Merge tag '9.6.rc0' into public/clean_up_ell_curve_isogeny_file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1439e5420fc6acc2ab0d3a66b8b8671f3d49abb1">1439e54</a></td><td><code>fix one minor patchbot warning</code></td></tr></table>




---

archive/issue_comments_546346.json:
```json
{
    "body": "Changed commit from **[fe19afa](https://github.com/sagemath/sagetrac-mirror/commit/fe19afa17c216ab0daeb7e2051d21368a07475bf)** to **[1439e54](https://github.com/sagemath/sagetrac-mirror/commit/1439e5420fc6acc2ab0d3a66b8b8671f3d49abb1)**",
    "created_at": "2022-04-14T06:59:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546346",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fe19afa](https://github.com/sagemath/sagetrac-mirror/commit/fe19afa17c216ab0daeb7e2051d21368a07475bf)** to **[1439e54](https://github.com/sagemath/sagetrac-mirror/commit/1439e5420fc6acc2ab0d3a66b8b8671f3d49abb1)**



---

archive/issue_comments_546347.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,4 +14,3 @@\n \n - The `.get_{pre,post}_isomorphism()` methods won't really make sense once the corresponding (already deprecated) setters are removed. I added a remark to that effect.\n \n-Here's a diff without the dependencies: https://github.com/sagemath/sagetrac-mirror/compare/d11e46d2968df9d4c72f108b3f26aed46e337a24...fe19afa17c216ab0daeb7e2051d21368a07475bf\n``````\n",
    "created_at": "2022-04-14T09:38:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546347",
    "user": "https://github.com/yyyyx4"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,4 +14,3 @@
 
 - The `.get_{pre,post}_isomorphism()` methods won't really make sense once the corresponding (already deprecated) setters are removed. I added a remark to that effect.
 
-Here's a diff without the dependencies: https://github.com/sagemath/sagetrac-mirror/compare/d11e46d2968df9d4c72f108b3f26aed46e337a24...fe19afa17c216ab0daeb7e2051d21368a07475bf
``````




---

archive/issue_comments_546348.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nThanks for your responses!\n\nIn order to alleviate the burden of reviewing this admittedly rather large patch, how about splitting the review load by commits? This could be especially useful as some of the biggest changes are generic code quality improvements which shouldn't require any specific elliptic-curve expertise.\n\nIt's also worth noticing that the vast majority of the changes belong to only two commits:\n- `472c1629198`, which contains *mostly* style and phrasing tweaks, with the only real difference being in the claims about requiring separable and/or normalized isogenies.\n- `5c527009396`, which consists of generic code tweaks.\n\nOf course, none of this is urgent in principle, but it will keep causing merge conflicts with pretty much anything touching this file down the line, so it'd be nice to get it merged sooner rather than later.\n\nBottom line: If any of you happens to find a moment to look at just one or a few of the commits, please do, and comment here which part you've reviewed.\n\nI'm also adding a few more people to Cc who've recently been active reviewing elliptic-curve tickets.",
    "created_at": "2022-04-24T10:30:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546348",
    "user": "https://github.com/yyyyx4"
}
```

<a id='comment:7'>Comment 7:</a>
Thanks for your responses!

In order to alleviate the burden of reviewing this admittedly rather large patch, how about splitting the review load by commits? This could be especially useful as some of the biggest changes are generic code quality improvements which shouldn't require any specific elliptic-curve expertise.

It's also worth noticing that the vast majority of the changes belong to only two commits:
- `472c1629198`, which contains *mostly* style and phrasing tweaks, with the only real difference being in the claims about requiring separable and/or normalized isogenies.
- `5c527009396`, which consists of generic code tweaks.

Of course, none of this is urgent in principle, but it will keep causing merge conflicts with pretty much anything touching this file down the line, so it'd be nice to get it merged sooner rather than later.

Bottom line: If any of you happens to find a moment to look at just one or a few of the commits, please do, and comment here which part you've reviewed.

I'm also adding a few more people to Cc who've recently been active reviewing elliptic-curve tickets.



---

archive/issue_comments_546349.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nI'll be able to look at some of this, if not all, over the next couple of days",
    "created_at": "2022-04-24T11:52:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546349",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:8'>Comment 8:</a>
I'll be able to look at some of this, if not all, over the next couple of days



---

archive/issue_comments_546350.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nJust a quick comment from a very quick look: Removing arguments from public functions breaks backwards compatibility. They should be deprecated (with saying it is unused).",
    "created_at": "2022-04-25T00:13:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546350",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'>Comment 9:</a>
Just a quick comment from a very quick look: Removing arguments from public functions breaks backwards compatibility. They should be deprecated (with saying it is unused).



---

archive/issue_comments_546351.json:
```json
{
    "body": "Changed commit from **[1439e54](https://github.com/sagemath/sagetrac-mirror/commit/1439e5420fc6acc2ab0d3a66b8b8671f3d49abb1)** to **[e698562](https://github.com/sagemath/sagetrac-mirror/commit/e69856246e821c8288b3ba58e40f94a014f25994)**",
    "created_at": "2022-04-25T03:03:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546351",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1439e54](https://github.com/sagemath/sagetrac-mirror/commit/1439e5420fc6acc2ab0d3a66b8b8671f3d49abb1)** to **[e698562](https://github.com/sagemath/sagetrac-mirror/commit/e69856246e821c8288b3ba58e40f94a014f25994)**



---

archive/issue_comments_546352.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6093062db8b4239ab9dc653e072dc4f26258849b\">6093062</a></td><td><code>Merge tag '9.6.rc1' into public/clean_up_ell_curve_isogeny_file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e69856246e821c8288b3ba58e40f94a014f25994\">e698562</a></td><td><code>add deprecation warnings for obsolete \"degree\" argument</code></td></tr></table>\n",
    "created_at": "2022-04-25T03:03:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546352",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'>Comment 10:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6093062db8b4239ab9dc653e072dc4f26258849b">6093062</a></td><td><code>Merge tag '9.6.rc1' into public/clean_up_ell_curve_isogeny_file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e69856246e821c8288b3ba58e40f94a014f25994">e698562</a></td><td><code>add deprecation warnings for obsolete "degree" argument</code></td></tr></table>




---

archive/issue_events_428790.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33619#event-428790"
}
```



---

archive/issue_events_428791.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33619#event-428791"
}
```



---

archive/issue_comments_546353.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nI think it is a convention to write a condition in this way:\n\n```diff\n--- a/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py\n+++ b/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py\n@@ -217,7 +217,7 @@ def isogeny_codomain_from_kernel(E, kernel, degree=None):\n \n     algorithm = isogeny_determine_algorithm(E, kernel)\n \n-    if \"velu\" == algorithm:\n+    if algorithm == \"velu\":\n         # if we are using Velu's formula, just instantiate the isogeny\n         # and return the codomain\n         return EllipticCurveIsogeny(E, kernel).codomain()\n```\nin many places.",
    "created_at": "2022-06-17T11:47:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546353",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:12'>Comment 12:</a>
I think it is a convention to write a condition in this way:

```diff
--- a/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py
+++ b/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py
@@ -217,7 +217,7 @@ def isogeny_codomain_from_kernel(E, kernel, degree=None):
 
     algorithm = isogeny_determine_algorithm(E, kernel)
 
-    if "velu" == algorithm:
+    if algorithm == "velu":
         # if we are using Velu's formula, just instantiate the isogeny
         # and return the codomain
         return EllipticCurveIsogeny(E, kernel).codomain()
```
in many places.



---

archive/issue_comments_546354.json:
```json
{
    "body": "Reviewer: **John Cremona**",
    "created_at": "2022-06-17T12:53:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546354",
    "user": "https://github.com/JohnCremona"
}
```

Reviewer: **John Cremona**



---

archive/issue_comments_546355.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nThis all looks good to me (I did read all the changes).  The following suggestions are very minor and only affect docstrings.  Otherwise, positive review (please add more names to the reviewers list too).\n\nI agree with the previous comment but do not feel strongly enough about it to change it myself (as I never have all the other times I have worked on this file!)\n\n\"little-endian\"?  I don't think saying this helps much.  In Sage, coefficient lists are always such that the i'th entry (indexed from 0 of course) is the coefficient of `x^i`.  Perhaps remove it.\n\nThe `_latex` and `_repr` methods for some reason describe themselves as \"Sage-specific\": surely a redundant thing to do.\n\nThe line\n\n```\nsage: P, = E.gens()\n```\nsurprised me! I would have written `P = E.gens()[0]`, so I have learnt something, though I am not sure that the version with a comma on the left looks great.",
    "created_at": "2022-06-17T12:53:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546355",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:13'>Comment 13:</a>
This all looks good to me (I did read all the changes).  The following suggestions are very minor and only affect docstrings.  Otherwise, positive review (please add more names to the reviewers list too).

I agree with the previous comment but do not feel strongly enough about it to change it myself (as I never have all the other times I have worked on this file!)

"little-endian"?  I don't think saying this helps much.  In Sage, coefficient lists are always such that the i'th entry (indexed from 0 of course) is the coefficient of `x^i`.  Perhaps remove it.

The `_latex` and `_repr` methods for some reason describe themselves as "Sage-specific": surely a redundant thing to do.

The line

```
sage: P, = E.gens()
```
surprised me! I would have written `P = E.gens()[0]`, so I have learnt something, though I am not sure that the version with a comma on the left looks great.



---

archive/issue_comments_546356.json:
```json
{
    "body": "Changed commit from **[e698562](https://github.com/sagemath/sagetrac-mirror/commit/e69856246e821c8288b3ba58e40f94a014f25994)** to **[0d8b6c8](https://github.com/sagemath/sagetrac-mirror/commit/0d8b6c811aedae0332e213fb34fdc0c4f5f26211)**",
    "created_at": "2022-06-17T18:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546356",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e698562](https://github.com/sagemath/sagetrac-mirror/commit/e69856246e821c8288b3ba58e40f94a014f25994)** to **[0d8b6c8](https://github.com/sagemath/sagetrac-mirror/commit/0d8b6c811aedae0332e213fb34fdc0c4f5f26211)**



---

archive/issue_comments_546357.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e5816d5b7ab3056006838f84666fb64e4dc1733\">4e5816d</a></td><td><code>Merge tag '9.7.beta2' into public/clean_up_ell_curve_isogeny_file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3dc4316510077311844d03ea28735e2a9c558bb2\">3dc4316</a></td><td><code>more standard order for variable-to-constant comparisons</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d103a7e3e13ff8b3b5928bda92bb69dbe0720a57\">d103a7e</a></td><td><code>clarify docstrings for ._repr_() and ._latex_()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d8b6c811aedae0332e213fb34fdc0c4f5f26211\">0d8b6c8</a></td><td><code>little-endian is standard for polynomials in Sage; specifying this again might be more confusing than helpful</code></td></tr></table>\n",
    "created_at": "2022-06-17T18:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546357",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'>Comment 14:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e5816d5b7ab3056006838f84666fb64e4dc1733">4e5816d</a></td><td><code>Merge tag '9.7.beta2' into public/clean_up_ell_curve_isogeny_file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3dc4316510077311844d03ea28735e2a9c558bb2">3dc4316</a></td><td><code>more standard order for variable-to-constant comparisons</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d103a7e3e13ff8b3b5928bda92bb69dbe0720a57">d103a7e</a></td><td><code>clarify docstrings for ._repr_() and ._latex_()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d8b6c811aedae0332e213fb34fdc0c4f5f26211">0d8b6c8</a></td><td><code>little-endian is standard for polynomials in Sage; specifying this again might be more confusing than helpful</code></td></tr></table>




---

archive/issue_comments_546358.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nThanks a lot for your time, everyone. I've applied all suggested changes.\n\nReplying to [@JohnCremona](#comment%3A13):\n> The line\n> \n> ```\n> sage: P, = E.gens()\n> ```\n> surprised me! I would have written `P = E.gens()[0]`, so I have learnt something, though I am not sure that the version with a comma on the left looks great.\n\nI agree that the comma is not very pretty, and it's easy enough to miss at a quick glance. But there's a real difference between the two styles: `x, = xs` will throw an exception if `xs` has more than one element, whereas `xs[0]` will simply ignore everything after the first element. This can cause subtle bugs by breaking an unstated assumption of the code; by contrast, the tuple syntax makes explicit that a singleton list is expected and causes the assignment to fail loudly if this assumption is violated. We can think of it as a shorthand for `assert len(xs) == 1; x = xs[0]`. (The variant `(x,) = xs` also works.)",
    "created_at": "2022-06-17T19:00:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546358",
    "user": "https://github.com/yyyyx4"
}
```

<a id='comment:15'>Comment 15:</a>
Thanks a lot for your time, everyone. I've applied all suggested changes.

Replying to [@JohnCremona](#comment%3A13):
> The line
> 
> ```
> sage: P, = E.gens()
> ```
> surprised me! I would have written `P = E.gens()[0]`, so I have learnt something, though I am not sure that the version with a comma on the left looks great.

I agree that the comma is not very pretty, and it's easy enough to miss at a quick glance. But there's a real difference between the two styles: `x, = xs` will throw an exception if `xs` has more than one element, whereas `xs[0]` will simply ignore everything after the first element. This can cause subtle bugs by breaking an unstated assumption of the code; by contrast, the tuple syntax makes explicit that a singleton list is expected and causes the assignment to fail loudly if this assumption is violated. We can think of it as a shorthand for `assert len(xs) == 1; x = xs[0]`. (The variant `(x,) = xs` also works.)



---

archive/issue_comments_546359.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nChange of `pre isomorphism` to `pre-isomorphism`: I think the former is better since the latter wrongly suggests there is a mathematical notion pre-isomorphism.  \n\n`__prei_ratl_maps`: Why is this plural? There is one rational map (the isogeny), which consists of several rational functions (rational map components). No?\n\nPerhaps you can write about the `degree` option in a similar format to \n\n```diff\n    - ``codomain`` -- an elliptic curve (default: ``None``).\n\n      - If ``kernel`` is ``None``, ...\n \n      - If ``kernel`` is not ``None``, ...\n```\n\nThese hyphens are not necessary. Not improvements. \n\n```diff\n-    A more complicated example of a characteristic 2 field::\n+    A more complicated example of a characteristic-2 field::\n```\n\n```diff\n-        Function that implements the call-ability of elliptic curve\n-        isogenies.\n+        Implement evaluation of elliptic-curve isogenies using the\n+        function-call syntax.\n```\n\n```diff\n     def __getitem__(self, i):\n         r\"\"\"\n-        Return one of the rational map components.\n+        Return one of the rational-map components.\n \n         .. NOTE::\n```\n\nI doubt this change is an improvement. The names `E1` and `E2` are consistenly used internally throughout the code while `domain()` and `codomain()` are the method names for a user. With this change, `E*` and `*domain` are mixed in the code. \n\n```diff\n-    __E1 = None  # domain curve\n-    __E2 = None  # codomain curve\n+    _domain = None\n+    _codomain = None\n```\nThe original author protected `__E*` by using double underscores from subclasses. Is it intentional that you use single-underscored names?\n\n\"using the unary - operator\" is not better?\n\n```diff\n     def __neg__(self):\n         r\"\"\"\n-        Function to implement unary negation (-) operator on\n-        isogenies. Return a copy of this isogeny that has been\n-        negated.\n+        Implement negation of isogenies using the unary `-` syntax.\n \n         EXAMPLES:\n```\n\nI don't see the value of these changes. The latter is hard to read:\n\n```diff\n-        a1 = E.a1()\n-        a3 = E.a3()\n+        a1, a3 = E.a1(), E.a3()\n```\nSimilarly\n\n```diff\n-        self.__psi = psi\n-        self.__phi = phi\n-        self.__omega = omega\n+        self.__psi, self.__phi, self.__omega = psi, phi, omega\n \n-        self.__v = v\n-        self.__w = w\n+        self.__v, self.__w = v, w\n```\n\nRemoving spaces after commas are hardly improvements. \n\n```diff\n-        b2, b4, b6, _ = E.b_invariants()\n+        b2,b4,b6,_ = E.b_invariants()\n``` \nSimilarly here\n\n```diff\n-        a1, a2, a3, a4, a6 = E.ainvs()\n-        b2, b4, _, _ = E.b_invariants()\n+        a1,a2,a3,a4,a6 = E.a_invariants()\n+        b2,b4,_,_ = E.b_invariants()\n```\n\nThe comment about `'velu' == algorithm` applies here:\n\n```diff\n-        if (0 != psi_G.degree()): # even degree case\n+        if 0 != psi_G.degree(): # even degree case\n```",
    "created_at": "2022-06-18T00:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546359",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:16'>Comment 16:</a>
Change of `pre isomorphism` to `pre-isomorphism`: I think the former is better since the latter wrongly suggests there is a mathematical notion pre-isomorphism.  

`__prei_ratl_maps`: Why is this plural? There is one rational map (the isogeny), which consists of several rational functions (rational map components). No?

Perhaps you can write about the `degree` option in a similar format to 

```diff
    - ``codomain`` -- an elliptic curve (default: ``None``).

      - If ``kernel`` is ``None``, ...
 
      - If ``kernel`` is not ``None``, ...
```

These hyphens are not necessary. Not improvements. 

```diff
-    A more complicated example of a characteristic 2 field::
+    A more complicated example of a characteristic-2 field::
```

```diff
-        Function that implements the call-ability of elliptic curve
-        isogenies.
+        Implement evaluation of elliptic-curve isogenies using the
+        function-call syntax.
```

```diff
     def __getitem__(self, i):
         r"""
-        Return one of the rational map components.
+        Return one of the rational-map components.
 
         .. NOTE::
```

I doubt this change is an improvement. The names `E1` and `E2` are consistenly used internally throughout the code while `domain()` and `codomain()` are the method names for a user. With this change, `E*` and `*domain` are mixed in the code. 

```diff
-    __E1 = None  # domain curve
-    __E2 = None  # codomain curve
+    _domain = None
+    _codomain = None
```
The original author protected `__E*` by using double underscores from subclasses. Is it intentional that you use single-underscored names?

"using the unary - operator" is not better?

```diff
     def __neg__(self):
         r"""
-        Function to implement unary negation (-) operator on
-        isogenies. Return a copy of this isogeny that has been
-        negated.
+        Implement negation of isogenies using the unary `-` syntax.
 
         EXAMPLES:
```

I don't see the value of these changes. The latter is hard to read:

```diff
-        a1 = E.a1()
-        a3 = E.a3()
+        a1, a3 = E.a1(), E.a3()
```
Similarly

```diff
-        self.__psi = psi
-        self.__phi = phi
-        self.__omega = omega
+        self.__psi, self.__phi, self.__omega = psi, phi, omega
 
-        self.__v = v
-        self.__w = w
+        self.__v, self.__w = v, w
```

Removing spaces after commas are hardly improvements. 

```diff
-        b2, b4, b6, _ = E.b_invariants()
+        b2,b4,b6,_ = E.b_invariants()
``` 
Similarly here

```diff
-        a1, a2, a3, a4, a6 = E.ainvs()
-        b2, b4, _, _ = E.b_invariants()
+        a1,a2,a3,a4,a6 = E.a_invariants()
+        b2,b4,_,_ = E.b_invariants()
```

The comment about `'velu' == algorithm` applies here:

```diff
-        if (0 != psi_G.degree()): # even degree case
+        if 0 != psi_G.degree(): # even degree case
```



---

archive/issue_comments_546360.json:
```json
{
    "body": "Changed commit from **[0d8b6c8](https://github.com/sagemath/sagetrac-mirror/commit/0d8b6c811aedae0332e213fb34fdc0c4f5f26211)** to **[68cfda6](https://github.com/sagemath/sagetrac-mirror/commit/68cfda68ee55f5d5cde70eca19607652e75bb586)**",
    "created_at": "2022-06-18T05:34:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546360",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0d8b6c8](https://github.com/sagemath/sagetrac-mirror/commit/0d8b6c811aedae0332e213fb34fdc0c4f5f26211)** to **[68cfda6](https://github.com/sagemath/sagetrac-mirror/commit/68cfda68ee55f5d5cde70eca19607652e75bb586)**



---

archive/issue_comments_546361.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0973c013d6d8a705098cafa38fe141f1b6a6bdea\">0973c01</a></td><td><code>swap another bunch of variable-to-constant comparisons</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f445a92670c1f4b853a3e706ac83b2bdcc99ea2\">8f445a9</a></td><td><code>individual assignments may be more readable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/206f62a44be674e74d987596ffe1f6606d43fecf\">206f62a</a></td><td><code>spaces after commas</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68cfda68ee55f5d5cde70eca19607652e75bb586\">68cfda6</a></td><td><code>small tweaks in docstring</code></td></tr></table>\n",
    "created_at": "2022-06-18T05:34:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546361",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>Comment 17:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0973c013d6d8a705098cafa38fe141f1b6a6bdea">0973c01</a></td><td><code>swap another bunch of variable-to-constant comparisons</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f445a92670c1f4b853a3e706ac83b2bdcc99ea2">8f445a9</a></td><td><code>individual assignments may be more readable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/206f62a44be674e74d987596ffe1f6606d43fecf">206f62a</a></td><td><code>spaces after commas</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68cfda68ee55f5d5cde70eca19607652e75bb586">68cfda6</a></td><td><code>small tweaks in docstring</code></td></tr></table>




---

archive/issue_comments_546362.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nReplying to [@kwankyu](#comment%3A16):\n> Change of `pre isomorphism` to `pre-isomorphism`: I think the former is better since the latter wrongly suggests there is a mathematical notion pre-isomorphism.  \n\nIt doesn't suggest that to me. I think of it as shorthand for \"isomorphism that we pre-compose with\". Either way, this part of the functionality is being phased out with the more general composite-morphism class added in #32744. We shouldn't waste much energy on it.\n\n> `__prei_ratl_maps`: Why is this plural? There is one rational map (the isogeny), which consists of several rational functions (rational map components). No?\n\nThere is also a `.rational_maps()` method, and an `.x_rational_map()` method. It may be considered an abuse of language, but it's in line with terminology used elsewhere in Sage. I don't have strong feelings about it.\n\n> Perhaps you can write about the `degree` option in a similar format to \n> \n> ```diff\n>     - ``codomain`` -- an elliptic curve (default: ``None``).\n> \n>       - If ``kernel`` is ``None``, ...\n>  \n>       - If ``kernel`` is not ``None``, ...\n> ```\n\nDone.\n\n> These hyphens are not necessary. Not improvements. \n> \n> ```diff\n> -    A more complicated example of a characteristic 2 field::\n> +    A more complicated example of a characteristic-2 field::\n> ```\n> \n> ```diff\n> -        Function that implements the call-ability of elliptic curve\n> -        isogenies.\n> +        Implement evaluation of elliptic-curve isogenies using the\n> +        function-call syntax.\n> ```\n> \n> ```diff\n>      def __getitem__(self, i):\n>          r\"\"\"\n> -        Return one of the rational map components.\n> +        Return one of the rational-map components.\n>  \n>          .. NOTE::\n> ```\n\nAll of these are examples of compound modifiers. Hyphenating them or not is fundamentally a question of personal style, but at least to my eyes the version with the hyphen is easier to parse. Your eyes seem to disagree. `:-)` Does \"not improvements\" mean you think the change makes it *worse* or just *not better*?\n\n> I doubt this change is an improvement. The names `E1` and `E2` are consistenly used internally throughout the code while `domain()` and `codomain()` are the method names for a user. With this change, `E*` and `*domain` are mixed in the code. \n> \n> ```diff\n> -    __E1 = None  # domain curve\n> -    __E2 = None  # codomain curve\n> +    _domain = None\n> +    _codomain = None\n> ```\n> The original author protected `__E*` by using double underscores from subclasses. Is it intentional that you use single-underscored names?\n\nI don't think there was any reason for the double underscores. The names\n`_domain` and `_codomain` are inherited from the parent class. Previously, `EllipticCurveIsogeny` was duplicating `__E1,__E2` into `_domain,_codomain` each time they changed, an unnecessary complication which does nothing useful while increasing the risk of mistakes.\n\n> \"using the unary - operator\" is not better?\n> \n> ```diff\n>      def __neg__(self):\n>          r\"\"\"\n> -        Function to implement unary negation (-) operator on\n> -        isogenies. Return a copy of this isogeny that has been\n> -        negated.\n> +        Implement negation of isogenies using the unary `-` syntax.\n>  \n>          EXAMPLES:\n> ```\n\nRephrased.\n\n> I don't see the value of these changes. The latter is hard to read:\n> \n> ```diff\n> -        a1 = E.a1()\n> -        a3 = E.a3()\n> +        a1, a3 = E.a1(), E.a3()\n> ```\n> Similarly\n> \n> ```diff\n> -        self.__psi = psi\n> -        self.__phi = phi\n> -        self.__omega = omega\n> +        self.__psi, self.__phi, self.__omega = psi, phi, omega\n>  \n> -        self.__v = v\n> -        self.__w = w\n> +        self.__v, self.__w = v, w\n> ```\n\nReverted.\n\n> Removing spaces after commas are hardly improvements. \n> \n> ```diff\n> -        b2, b4, b6, _ = E.b_invariants()\n> +        b2,b4,b6,_ = E.b_invariants()\n> ``` \n> Similarly here\n> \n> ```diff\n> -        a1, a2, a3, a4, a6 = E.ainvs()\n> -        b2, b4, _, _ = E.b_invariants()\n> +        a1,a2,a3,a4,a6 = E.a_invariants()\n> +        b2,b4,_,_ = E.b_invariants()\n> ```\n\nChanged it to commas with spaces throughout.\n\n> The comment about `'velu' == algorithm` applies here:\n> \n> ```diff\n> -        if (0 != psi_G.degree()): # even degree case\n> +        if 0 != psi_G.degree(): # even degree case\n> ```\n\nFixed (here and elsewhere).",
    "created_at": "2022-06-18T05:36:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546362",
    "user": "https://github.com/yyyyx4"
}
```

<a id='comment:18'>Comment 18:</a>
Replying to [@kwankyu](#comment%3A16):
> Change of `pre isomorphism` to `pre-isomorphism`: I think the former is better since the latter wrongly suggests there is a mathematical notion pre-isomorphism.  

It doesn't suggest that to me. I think of it as shorthand for "isomorphism that we pre-compose with". Either way, this part of the functionality is being phased out with the more general composite-morphism class added in #32744. We shouldn't waste much energy on it.

> `__prei_ratl_maps`: Why is this plural? There is one rational map (the isogeny), which consists of several rational functions (rational map components). No?

There is also a `.rational_maps()` method, and an `.x_rational_map()` method. It may be considered an abuse of language, but it's in line with terminology used elsewhere in Sage. I don't have strong feelings about it.

> Perhaps you can write about the `degree` option in a similar format to 
> 
> ```diff
>     - ``codomain`` -- an elliptic curve (default: ``None``).
> 
>       - If ``kernel`` is ``None``, ...
>  
>       - If ``kernel`` is not ``None``, ...
> ```

Done.

> These hyphens are not necessary. Not improvements. 
> 
> ```diff
> -    A more complicated example of a characteristic 2 field::
> +    A more complicated example of a characteristic-2 field::
> ```
> 
> ```diff
> -        Function that implements the call-ability of elliptic curve
> -        isogenies.
> +        Implement evaluation of elliptic-curve isogenies using the
> +        function-call syntax.
> ```
> 
> ```diff
>      def __getitem__(self, i):
>          r"""
> -        Return one of the rational map components.
> +        Return one of the rational-map components.
>  
>          .. NOTE::
> ```

All of these are examples of compound modifiers. Hyphenating them or not is fundamentally a question of personal style, but at least to my eyes the version with the hyphen is easier to parse. Your eyes seem to disagree. `:-)` Does "not improvements" mean you think the change makes it *worse* or just *not better*?

> I doubt this change is an improvement. The names `E1` and `E2` are consistenly used internally throughout the code while `domain()` and `codomain()` are the method names for a user. With this change, `E*` and `*domain` are mixed in the code. 
> 
> ```diff
> -    __E1 = None  # domain curve
> -    __E2 = None  # codomain curve
> +    _domain = None
> +    _codomain = None
> ```
> The original author protected `__E*` by using double underscores from subclasses. Is it intentional that you use single-underscored names?

I don't think there was any reason for the double underscores. The names
`_domain` and `_codomain` are inherited from the parent class. Previously, `EllipticCurveIsogeny` was duplicating `__E1,__E2` into `_domain,_codomain` each time they changed, an unnecessary complication which does nothing useful while increasing the risk of mistakes.

> "using the unary - operator" is not better?
> 
> ```diff
>      def __neg__(self):
>          r"""
> -        Function to implement unary negation (-) operator on
> -        isogenies. Return a copy of this isogeny that has been
> -        negated.
> +        Implement negation of isogenies using the unary `-` syntax.
>  
>          EXAMPLES:
> ```

Rephrased.

> I don't see the value of these changes. The latter is hard to read:
> 
> ```diff
> -        a1 = E.a1()
> -        a3 = E.a3()
> +        a1, a3 = E.a1(), E.a3()
> ```
> Similarly
> 
> ```diff
> -        self.__psi = psi
> -        self.__phi = phi
> -        self.__omega = omega
> +        self.__psi, self.__phi, self.__omega = psi, phi, omega
>  
> -        self.__v = v
> -        self.__w = w
> +        self.__v, self.__w = v, w
> ```

Reverted.

> Removing spaces after commas are hardly improvements. 
> 
> ```diff
> -        b2, b4, b6, _ = E.b_invariants()
> +        b2,b4,b6,_ = E.b_invariants()
> ``` 
> Similarly here
> 
> ```diff
> -        a1, a2, a3, a4, a6 = E.ainvs()
> -        b2, b4, _, _ = E.b_invariants()
> +        a1,a2,a3,a4,a6 = E.a_invariants()
> +        b2,b4,_,_ = E.b_invariants()
> ```

Changed it to commas with spaces throughout.

> The comment about `'velu' == algorithm` applies here:
> 
> ```diff
> -        if (0 != psi_G.degree()): # even degree case
> +        if 0 != psi_G.degree(): # even degree case
> ```

Fixed (here and elsewhere).



---

archive/issue_comments_546363.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nReplying to [@yyyyx4](#comment%3A18): \n> There is also a `.rational_maps()` method, and an `.x_rational_map()` method. \n\nRight. It was already there.\n\n> All of these are examples of compound modifiers. Hyphenating them or not is fundamentally a question of personal style, but at least to my eyes the version with the hyphen is easier to parse. Your eyes seem to disagree. `:-)` Does \"not improvements\" mean you think the change makes it *worse* or just *not better*?\n\nIt makes it worse \"to me\", perhaps because it is rare (if not none) in sage source files to see both adjective form (\"rational map\") and compound modifier (\"rational-map\") in one place. As you think this is a personal style, I would not insist on it.\n\n> I don't think there was any reason for the double underscores. The names\n> `_domain` and `_codomain` are inherited from the parent class. Previously, `EllipticCurveIsogeny` was duplicating `__E1,__E2` into `_domain,_codomain` each time they changed, an unnecessary complication which does nothing useful while increasing the risk of mistakes.\n\nOkay as you know what you are doing.\n\nThanks for the fixes.",
    "created_at": "2022-06-18T07:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546363",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:19'>Comment 19:</a>
Replying to [@yyyyx4](#comment%3A18): 
> There is also a `.rational_maps()` method, and an `.x_rational_map()` method. 

Right. It was already there.

> All of these are examples of compound modifiers. Hyphenating them or not is fundamentally a question of personal style, but at least to my eyes the version with the hyphen is easier to parse. Your eyes seem to disagree. `:-)` Does "not improvements" mean you think the change makes it *worse* or just *not better*?

It makes it worse "to me", perhaps because it is rare (if not none) in sage source files to see both adjective form ("rational map") and compound modifier ("rational-map") in one place. As you think this is a personal style, I would not insist on it.

> I don't think there was any reason for the double underscores. The names
> `_domain` and `_codomain` are inherited from the parent class. Previously, `EllipticCurveIsogeny` was duplicating `__E1,__E2` into `_domain,_codomain` each time they changed, an unnecessary complication which does nothing useful while increasing the risk of mistakes.

Okay as you know what you are doing.

Thanks for the fixes.



---

archive/issue_comments_546364.json:
```json
{
    "body": "Changed reviewer from **John Cremona** to **John Cremona, Kwankyu Lee**",
    "created_at": "2022-06-18T07:48:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546364",
    "user": "https://github.com/kwankyu"
}
```

Changed reviewer from **John Cremona** to **John Cremona, Kwankyu Lee**



---

archive/issue_comments_546365.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nPlease consider this change:\n\n```diff\n--- a/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py\n+++ b/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py\n@@ -628,17 +628,19 @@ class EllipticCurveIsogeny(EllipticCurveHom):\n \n     We can create an isogeny whose kernel equals the full 2-torsion::\n \n-        sage: E = EllipticCurve(GF(3), [0,0,0,1,1])\n+        sage: k = GF(3).algebraic_closure()\n+        sage: E = EllipticCurve(k, [0,0,0,1,1])\n         sage: ker_list = E.division_polynomial(2).list()\n         sage: phi = EllipticCurveIsogeny(E, ker_list); phi\n-        Isogeny of degree 4 from Elliptic Curve defined by y^2 = x^3 + x + 1 over Finite Field of size 3 to Elliptic Curve defined by y^2 = x^3 + x + 1 over Finite Field of size 3\n+        Isogeny of degree 4 from Elliptic Curve defined by y^2 = x^3 + x + 1 over\n+        Algebraic closure of Finite Field of size 3 to Elliptic Curve\n+        defined by y^2 = x^3 + x + 1 over Algebraic closure of Finite Field of size 3\n         sage: phi(E(0))\n         (0 : 1 : 0)\n-        sage: phi(E((0,1)))\n-        (1 : 0 : 1)\n-        sage: phi(E((0,2)))\n-        (1 : 0 : 1)\n-        sage: phi(E((1,0)))\n+        sage: (x1,_), (x2,_), (x3,_) = E.division_polynomial(2).roots()\n+        sage: phi(E((x1,0)))\n+        (0 : 1 : 0)\n+        sage: phi(E((x2,0)))\n+        (0 : 1 : 0)\n+        sage: phi(E((x3,0)))\n         (0 : 1 : 0)\n         sage: phi.degree()\n         4\n```\n\nor `k = GF((3,2))`.",
    "created_at": "2022-06-18T08:04:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546365",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:21'>Comment 21:</a>
Please consider this change:

```diff
--- a/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py
+++ b/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py
@@ -628,17 +628,19 @@ class EllipticCurveIsogeny(EllipticCurveHom):
 
     We can create an isogeny whose kernel equals the full 2-torsion::
 
-        sage: E = EllipticCurve(GF(3), [0,0,0,1,1])
+        sage: k = GF(3).algebraic_closure()
+        sage: E = EllipticCurve(k, [0,0,0,1,1])
         sage: ker_list = E.division_polynomial(2).list()
         sage: phi = EllipticCurveIsogeny(E, ker_list); phi
-        Isogeny of degree 4 from Elliptic Curve defined by y^2 = x^3 + x + 1 over Finite Field of size 3 to Elliptic Curve defined by y^2 = x^3 + x + 1 over Finite Field of size 3
+        Isogeny of degree 4 from Elliptic Curve defined by y^2 = x^3 + x + 1 over
+        Algebraic closure of Finite Field of size 3 to Elliptic Curve
+        defined by y^2 = x^3 + x + 1 over Algebraic closure of Finite Field of size 3
         sage: phi(E(0))
         (0 : 1 : 0)
-        sage: phi(E((0,1)))
-        (1 : 0 : 1)
-        sage: phi(E((0,2)))
-        (1 : 0 : 1)
-        sage: phi(E((1,0)))
+        sage: (x1,_), (x2,_), (x3,_) = E.division_polynomial(2).roots()
+        sage: phi(E((x1,0)))
+        (0 : 1 : 0)
+        sage: phi(E((x2,0)))
+        (0 : 1 : 0)
+        sage: phi(E((x3,0)))
         (0 : 1 : 0)
         sage: phi.degree()
         4
```

or `k = GF((3,2))`.



---

archive/issue_comments_546366.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdab998b25021a9d5ae5fc5c7c2b1538337e34f5\">cdab998</a></td><td><code>demonstrate vanishing on full 2-torsion in example</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37346c80aba6f443dc9330446811d7e6bbe1a81f\">37346c8</a></td><td><code>remove some unnecessary polynomial-to-list conversions</code></td></tr></table>\n",
    "created_at": "2022-06-19T05:03:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546366",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'>Comment 22:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdab998b25021a9d5ae5fc5c7c2b1538337e34f5">cdab998</a></td><td><code>demonstrate vanishing on full 2-torsion in example</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37346c80aba6f443dc9330446811d7e6bbe1a81f">37346c8</a></td><td><code>remove some unnecessary polynomial-to-list conversions</code></td></tr></table>




---

archive/issue_comments_546367.json:
```json
{
    "body": "Changed commit from **[68cfda6](https://github.com/sagemath/sagetrac-mirror/commit/68cfda68ee55f5d5cde70eca19607652e75bb586)** to **[37346c8](https://github.com/sagemath/sagetrac-mirror/commit/37346c80aba6f443dc9330446811d7e6bbe1a81f)**",
    "created_at": "2022-06-19T05:03:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546367",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[68cfda6](https://github.com/sagemath/sagetrac-mirror/commit/68cfda68ee55f5d5cde70eca19607652e75bb586)** to **[37346c8](https://github.com/sagemath/sagetrac-mirror/commit/37346c80aba6f443dc9330446811d7e6bbe1a81f)**



---

archive/issue_comments_546368.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nDone. Also removed some unnecessary calls to `Polynomial.list()`.",
    "created_at": "2022-06-19T05:07:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546368",
    "user": "https://github.com/yyyyx4"
}
```

<a id='comment:23'>Comment 23:</a>
Done. Also removed some unnecessary calls to `Polynomial.list()`.



---

archive/issue_comments_546369.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\n`Q` is a tuple explicitly\n\n```diff\n--- a/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py\n+++ b/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py\n@@ -1065,7 +1065,7 @@ class EllipticCurveIsogeny(EllipticCurveHom):\n         try:\n             Q = compute(*Q)\n         except ZeroDivisionError:\n-            Q = 0, 1, 0\n+            Q = (0, 1, 0)\n \n         if self.__post_isomorphism is not None:\n             Q = baseWI.__call__(self.__post_isomorphism, Q)\n```\nUnary operator?\n\n```diff\n--- a/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py\n+++ b/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py\n@@ -1229,7 +1229,7 @@ class EllipticCurveIsogeny(EllipticCurveHom):\n         r\"\"\"\n         Return a copy of the isogeny that has been negated.\n \n-        This implements the unary `-` syntax.\n+        This implements the unary `-` operator.\n \n         EXAMPLES:\n```\n\nHow about `codomain` or `codomain_elliptic_curve`, for consistency?\n\n```diff\n--- a/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py\n+++ b/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py \n@@ -1814,7 +1814,7 @@ class EllipticCurveIsogeny(EllipticCurveHom):\n     #\n     # Velu's formula computing the codomain curve\n     #\n-    def __compute_E2_via_velu(self):\n+    def __compute_codomain_elliptic_curve_via_velu(self):\n         r\"\"\"\n         Private function that computes the codomain via V\u00e9lu's\n         formulas.\n```\n\nOther suggestions (but subject to your discretion as always):\n\n```diff\n--- a/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py\n+++ b/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py\n@@ -1862,7 +1862,7 @@ class EllipticCurveIsogeny(EllipticCurveHom):\n             sage: phi._EllipticCurveIsogeny__velu_sum_helper(0, Qvals, 0, 0, x, y)\n             (1/x, y/x^2)\n         \"\"\"\n-        yQ,gxQ,gyQ,vQ,uQ = Qvalues\n+        yQ, gxQ, gyQ, vQ, uQ = Qvalues\n \n         t1 = x - xQ\n         inv_t1 = t1**-1\n@@ -1965,9 +1965,11 @@ class EllipticCurveIsogeny(EllipticCurveHom):\n         else:\n             E = self.__pre_isomorphism.codomain()\n \n-        a1, a3 = E.a1(), E.a3()\n+        a1 = E.a1()\n+        a3 = E.a3()\n \n-        X, Y = xP, yP\n+        X = xP\n+        Y = yP\n \n         for xQ, Qvalues in self.__kernel_mod_sign.items():\n             tX, tY = self.__velu_sum_helper(xQ, Qvalues, a1, a3, xP, yP)\n@@ -2088,7 +2090,8 @@ class EllipticCurveIsogeny(EllipticCurveHom):\n         # Set up the necessary instance variables\n         #\n \n-        self.__kernel_polynomial = self.__inner_kernel_polynomial = psi\n+        self.__kernel_polynomial = psi\n+        self.__inner_kernel_polynomial = psi\n \n         self._degree = Integer(d)  # degree of the isogeny\n \n@@ -2359,7 +2362,9 @@ class EllipticCurveIsogeny(EllipticCurveHom):\n             sage: phi._EllipticCurveIsogeny__compute_omega_fast(E, psi, psi_pr, fi, fi_pr)\n             x^3*y - 3*x^2*y + x*y\n         \"\"\"\n-        a1, a3 = E.a1(), E.a3()\n+        a1 = E.a1()\n+        a3 = E.a3()\n+\n         x, y = self.__mpoly_ring.gens()\n \n         psi_2 = 2*y + a1*x + a3\n@@ -2510,7 +2515,7 @@ class EllipticCurveIsogeny(EllipticCurveHom):\n         a = self.__phi(xP)\n         b = self.__omega(xP, yP)\n         c = self.__psi(xP)\n-        return a/c**2, b/c**3\n+        return a / c**2, b / c**3\n \n     def __initialize_rational_maps_via_kohel(self):\n         r\"\"\"\n@@ -2536,7 +2541,7 @@ class EllipticCurveIsogeny(EllipticCurveHom):\n     #\n     # Kohel's formula computing the codomain curve\n     #\n-    def __compute_E2_via_kohel(self):\n+    def __compute_codomain_elliptic_curve_via_kohel(self):\n         r\"\"\"\n         Private function that computes and initializes the codomain of\n         the isogeny (via Kohel's.)\n@@ -3300,9 +3305,11 @@ def compute_isogeny_starks(E1, E2, ell):\n \n     INPUT:\n \n-    - ``E1``  -- an elliptic curve in short Weierstrass form, the domain.\n-    - ``E2``  -- an elliptic curve in short Weierstrass form, the codomain.\n-    - ``ell`` -- the degree of an isogeny from E1 to E2.\n+    - ``E1``  -- an elliptic curve in short Weierstrass form, the domain\n+\n+    - ``E2``  -- an elliptic curve in short Weierstrass form, the codomain\n+\n+    - ``ell`` -- the degree of an isogeny from E1 to E2\n \n     OUTPUT:\n \n@@ -3433,8 +3440,8 @@ def split_kernel_polynomial(poly):\n         True\n     \"\"\"\n     from sage.misc.superseded import deprecation\n-    deprecation(33619, 'The split_kernel_polynomial() function is obsolete.' \\\n-                      ' Use .radical() instead.')\n+    deprecation(33619, 'The split_kernel_polynomial() function is obsolete. '\n+                       'Use .radical() instead.')\n     from sage.misc.misc_c import prod\n     return prod([p for p,e in poly.squarefree_decomposition()])\n```\n\n```diff\ndiff --git a/src/sage/schemes/elliptic_curves/ell_field.py b/src/sage/schemes/elliptic_curves/ell_field.py\nindex d2d8dc0334..e7f56fa78a 100644\n--- a/src/sage/schemes/elliptic_curves/ell_field.py\n+++ b/src/sage/schemes/elliptic_curves/ell_field.py\n@@ -855,7 +855,9 @@ class EllipticCurve_field(ell_generic.EllipticCurve_generic, ProjectivePlaneCurv\n             this case, the isogeny is post-composed with an isomorphism so\n             that the codomain equals the given curve.\n \n-        - ``degree`` -- an integer (default: ``None``).  If ``kernel`` is\n+        - ``degree`` -- an integer (default: ``None``).\n+\n+          - If ``kernel`` is ...\n```\n\n```diff\ndiff --git a/src/sage/schemes/elliptic_curves/hom.py b/src/sage/schemes/elliptic_curves/hom.py\nindex 4156e595bd..de40a53422 100644\n--- a/src/sage/schemes/elliptic_curves/hom.py\n+++ b/src/sage/schemes/elliptic_curves/hom.py\n@@ -32,7 +32,6 @@ class EllipticCurveHom(Morphism):\n     \"\"\"\n     Base class for elliptic-curve morphisms.\n     \"\"\"\n-\n     def _repr_type(self):\n         \"\"\"\n         Return a textual representation of what kind of morphism\n\n```",
    "created_at": "2022-06-19T09:17:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546369",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:24'>Comment 24:</a>
`Q` is a tuple explicitly

```diff
--- a/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py
+++ b/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py
@@ -1065,7 +1065,7 @@ class EllipticCurveIsogeny(EllipticCurveHom):
         try:
             Q = compute(*Q)
         except ZeroDivisionError:
-            Q = 0, 1, 0
+            Q = (0, 1, 0)
 
         if self.__post_isomorphism is not None:
             Q = baseWI.__call__(self.__post_isomorphism, Q)
```
Unary operator?

```diff
--- a/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py
+++ b/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py
@@ -1229,7 +1229,7 @@ class EllipticCurveIsogeny(EllipticCurveHom):
         r"""
         Return a copy of the isogeny that has been negated.
 
-        This implements the unary `-` syntax.
+        This implements the unary `-` operator.
 
         EXAMPLES:
```

How about `codomain` or `codomain_elliptic_curve`, for consistency?

```diff
--- a/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py
+++ b/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py 
@@ -1814,7 +1814,7 @@ class EllipticCurveIsogeny(EllipticCurveHom):
     #
     # Velu's formula computing the codomain curve
     #
-    def __compute_E2_via_velu(self):
+    def __compute_codomain_elliptic_curve_via_velu(self):
         r"""
         Private function that computes the codomain via Vélu's
         formulas.
```

Other suggestions (but subject to your discretion as always):

```diff
--- a/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py
+++ b/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py
@@ -1862,7 +1862,7 @@ class EllipticCurveIsogeny(EllipticCurveHom):
             sage: phi._EllipticCurveIsogeny__velu_sum_helper(0, Qvals, 0, 0, x, y)
             (1/x, y/x^2)
         """
-        yQ,gxQ,gyQ,vQ,uQ = Qvalues
+        yQ, gxQ, gyQ, vQ, uQ = Qvalues
 
         t1 = x - xQ
         inv_t1 = t1**-1
@@ -1965,9 +1965,11 @@ class EllipticCurveIsogeny(EllipticCurveHom):
         else:
             E = self.__pre_isomorphism.codomain()
 
-        a1, a3 = E.a1(), E.a3()
+        a1 = E.a1()
+        a3 = E.a3()
 
-        X, Y = xP, yP
+        X = xP
+        Y = yP
 
         for xQ, Qvalues in self.__kernel_mod_sign.items():
             tX, tY = self.__velu_sum_helper(xQ, Qvalues, a1, a3, xP, yP)
@@ -2088,7 +2090,8 @@ class EllipticCurveIsogeny(EllipticCurveHom):
         # Set up the necessary instance variables
         #
 
-        self.__kernel_polynomial = self.__inner_kernel_polynomial = psi
+        self.__kernel_polynomial = psi
+        self.__inner_kernel_polynomial = psi
 
         self._degree = Integer(d)  # degree of the isogeny
 
@@ -2359,7 +2362,9 @@ class EllipticCurveIsogeny(EllipticCurveHom):
             sage: phi._EllipticCurveIsogeny__compute_omega_fast(E, psi, psi_pr, fi, fi_pr)
             x^3*y - 3*x^2*y + x*y
         """
-        a1, a3 = E.a1(), E.a3()
+        a1 = E.a1()
+        a3 = E.a3()
+
         x, y = self.__mpoly_ring.gens()
 
         psi_2 = 2*y + a1*x + a3
@@ -2510,7 +2515,7 @@ class EllipticCurveIsogeny(EllipticCurveHom):
         a = self.__phi(xP)
         b = self.__omega(xP, yP)
         c = self.__psi(xP)
-        return a/c**2, b/c**3
+        return a / c**2, b / c**3
 
     def __initialize_rational_maps_via_kohel(self):
         r"""
@@ -2536,7 +2541,7 @@ class EllipticCurveIsogeny(EllipticCurveHom):
     #
     # Kohel's formula computing the codomain curve
     #
-    def __compute_E2_via_kohel(self):
+    def __compute_codomain_elliptic_curve_via_kohel(self):
         r"""
         Private function that computes and initializes the codomain of
         the isogeny (via Kohel's.)
@@ -3300,9 +3305,11 @@ def compute_isogeny_starks(E1, E2, ell):
 
     INPUT:
 
-    - ``E1``  -- an elliptic curve in short Weierstrass form, the domain.
-    - ``E2``  -- an elliptic curve in short Weierstrass form, the codomain.
-    - ``ell`` -- the degree of an isogeny from E1 to E2.
+    - ``E1``  -- an elliptic curve in short Weierstrass form, the domain
+
+    - ``E2``  -- an elliptic curve in short Weierstrass form, the codomain
+
+    - ``ell`` -- the degree of an isogeny from E1 to E2
 
     OUTPUT:
 
@@ -3433,8 +3440,8 @@ def split_kernel_polynomial(poly):
         True
     """
     from sage.misc.superseded import deprecation
-    deprecation(33619, 'The split_kernel_polynomial() function is obsolete.' \
-                      ' Use .radical() instead.')
+    deprecation(33619, 'The split_kernel_polynomial() function is obsolete. '
+                       'Use .radical() instead.')
     from sage.misc.misc_c import prod
     return prod([p for p,e in poly.squarefree_decomposition()])
```

```diff
diff --git a/src/sage/schemes/elliptic_curves/ell_field.py b/src/sage/schemes/elliptic_curves/ell_field.py
index d2d8dc0334..e7f56fa78a 100644
--- a/src/sage/schemes/elliptic_curves/ell_field.py
+++ b/src/sage/schemes/elliptic_curves/ell_field.py
@@ -855,7 +855,9 @@ class EllipticCurve_field(ell_generic.EllipticCurve_generic, ProjectivePlaneCurv
             this case, the isogeny is post-composed with an isomorphism so
             that the codomain equals the given curve.
 
-        - ``degree`` -- an integer (default: ``None``).  If ``kernel`` is
+        - ``degree`` -- an integer (default: ``None``).
+
+          - If ``kernel`` is ...
```

```diff
diff --git a/src/sage/schemes/elliptic_curves/hom.py b/src/sage/schemes/elliptic_curves/hom.py
index 4156e595bd..de40a53422 100644
--- a/src/sage/schemes/elliptic_curves/hom.py
+++ b/src/sage/schemes/elliptic_curves/hom.py
@@ -32,7 +32,6 @@ class EllipticCurveHom(Morphism):
     """
     Base class for elliptic-curve morphisms.
     """
-
     def _repr_type(self):
         """
         Return a textual representation of what kind of morphism

```



---

archive/issue_comments_546370.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/454f3edaf6146316fa9fb3f9664695b19bd9f306\">454f3ed</a></td><td><code>E2 -> codomain in method names</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f131ae3bbabd072ba5c8cd3d6d6cd08a3e34ecfb\">f131ae3</a></td><td><code>code style tweaks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de6552e40aa26dd30ac082624aca047c5270df8a\">de6552e</a></td><td><code>hide internal helper function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2833869127e40dd0a8e36ef42316517aed9e464b\">2833869</a></td><td><code>some doc tweaks</code></td></tr></table>\n",
    "created_at": "2022-06-20T09:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546370",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:25'>Comment 25:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/454f3edaf6146316fa9fb3f9664695b19bd9f306">454f3ed</a></td><td><code>E2 -> codomain in method names</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f131ae3bbabd072ba5c8cd3d6d6cd08a3e34ecfb">f131ae3</a></td><td><code>code style tweaks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de6552e40aa26dd30ac082624aca047c5270df8a">de6552e</a></td><td><code>hide internal helper function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2833869127e40dd0a8e36ef42316517aed9e464b">2833869</a></td><td><code>some doc tweaks</code></td></tr></table>




---

archive/issue_comments_546371.json:
```json
{
    "body": "Changed commit from **[37346c8](https://github.com/sagemath/sagetrac-mirror/commit/37346c80aba6f443dc9330446811d7e6bbe1a81f)** to **[2833869](https://github.com/sagemath/sagetrac-mirror/commit/2833869127e40dd0a8e36ef42316517aed9e464b)**",
    "created_at": "2022-06-20T09:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546371",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[37346c8](https://github.com/sagemath/sagetrac-mirror/commit/37346c80aba6f443dc9330446811d7e6bbe1a81f)** to **[2833869](https://github.com/sagemath/sagetrac-mirror/commit/2833869127e40dd0a8e36ef42316517aed9e464b)**



---

archive/issue_comments_546372.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nThanks. Done, and also cleaned up the docstrings some more.\n\nI've also prefixed an underscore to `isogeny_determine_algorithm`, as I can't imagine any way in which it could be helpful to users. In fact, I'd personally consider hiding some more of the helper functions in this module, but have resisted the temptation so far.",
    "created_at": "2022-06-20T09:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546372",
    "user": "https://github.com/yyyyx4"
}
```

<a id='comment:26'>Comment 26:</a>
Thanks. Done, and also cleaned up the docstrings some more.

I've also prefixed an underscore to `isogeny_determine_algorithm`, as I can't imagine any way in which it could be helpful to users. In fact, I'd personally consider hiding some more of the helper functions in this module, but have resisted the temptation so far.



---

archive/issue_events_428792.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-06-21T01:21:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33619#event-428792"
}
```



---

archive/issue_events_428793.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-06-21T01:21:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33619#event-428793"
}
```



---

archive/issue_comments_546373.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nReplying to [@yyyyx4](#comment%3A26):\n> Thanks. Done, and also cleaned up the docstrings some more.\n\nThank you.\n\n> I've also prefixed an underscore to `isogeny_determine_algorithm`, as I can't imagine any way in which it could be helpful to users. In fact, I'd personally consider hiding some more of the helper functions in this module, but have resisted the temptation so far.\n\nOkay.\n\nI have no more comments. This looks good. I believe John amply checked the mathematics.",
    "created_at": "2022-06-21T01:21:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546373",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:27'>Comment 27:</a>
Replying to [@yyyyx4](#comment%3A26):
> Thanks. Done, and also cleaned up the docstrings some more.

Thank you.

> I've also prefixed an underscore to `isogeny_determine_algorithm`, as I can't imagine any way in which it could be helpful to users. In fact, I'd personally consider hiding some more of the helper functions in this module, but have resisted the temptation so far.

Okay.

I have no more comments. This looks good. I believe John amply checked the mathematics.



---

archive/issue_comments_546374.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nThanks a lot!",
    "created_at": "2022-06-21T01:37:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546374",
    "user": "https://github.com/yyyyx4"
}
```

<a id='comment:28'>Comment 28:</a>
Thanks a lot!



---

archive/issue_events_428794.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-06-28T22:12:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33619#event-428794"
}
```



---

archive/issue_events_428795.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0b2741d399ae2737ca3effda3701b30e34ef011f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-06-28T22:12:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33619#event-428795"
}
```



---

archive/issue_comments_546375.json:
```json
{
    "body": "Changed branch from **[public/clean_up_ell_curve_isogeny_file](https://github.com/sagemath/sagetrac-mirror/tree/public/clean_up_ell_curve_isogeny_file)** to **[2833869](https://github.com/sagemath/sagetrac-mirror/commit/2833869127e40dd0a8e36ef42316517aed9e464b)**",
    "created_at": "2022-06-28T22:12:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33619#issuecomment-546375",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/clean_up_ell_curve_isogeny_file](https://github.com/sagemath/sagetrac-mirror/tree/public/clean_up_ell_curve_isogeny_file)** to **[2833869](https://github.com/sagemath/sagetrac-mirror/commit/2833869127e40dd0a8e36ef42316517aed9e464b)**
