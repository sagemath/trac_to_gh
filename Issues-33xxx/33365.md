# Issue 33365: Add interface to nauty-genbg (generator of bipartite graphs with given bipartition)

archive/issues_033128.json:
```json
{
    "body": "We add missing interface to `nauty-genbg`, a generator of bipartite graphs.\n\nNauty's genbg was already compiled and accessible but the interface was missing. \n\n\nCC:  @tscrim\n\nReviewer: Travis Scrimshaw\n\nAuthor: David Coudert\n\nBranch: 695a66741f4eb2377d6a158ddade89e335b57e2e\n\nDependencies: #33366\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33365\n\n",
    "closed_at": "2022-06-19T15:24:38Z",
    "created_at": "2022-02-17T16:02:38Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Add interface to nauty-genbg (generator of bipartite graphs with given bipartition)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33365",
    "user": "https://github.com/maxale"
}
```
We add missing interface to `nauty-genbg`, a generator of bipartite graphs.

Nauty's genbg was already compiled and accessible but the interface was missing. 


CC:  @tscrim

Reviewer: Travis Scrimshaw

Author: David Coudert

Branch: 695a66741f4eb2377d6a158ddade89e335b57e2e

Dependencies: #33366

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33365





---

archive/issue_events_088020.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T04:32:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33365#event-88020"
}
```



---

archive/issue_comments_665416.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-04-10T13:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665416",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_665417.json:
```json
{
    "body": "Changing commit from \"\" to \"804b062b8701604b4075037de7adc14f547bc970\"",
    "created_at": "2022-04-10T13:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665417",
    "user": "https://github.com/dcoudert"
}
```

Changing commit from "" to "804b062b8701604b4075037de7adc14f547bc970"



---

archive/issue_comments_665418.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#33366\"",
    "created_at": "2022-04-10T13:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665418",
    "user": "https://github.com/dcoudert"
}
```

Changing dependencies from "" to "#33366"



---

archive/issue_comments_665419.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2022-04-10T13:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665419",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_665420.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n-Sage provides interface to `nauty-geng` tool via `graph.nauty_geng()`, but interface for `nauty-genbg` tool is missing. \n+We add missing interface to `nauty-genbg`, a generator of bipartite graphs.\n+\n+Nauty's genbg was already compiled and accessible but the interface was missing. \n+\n``````\n",
    "created_at": "2022-04-10T13:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665420",
    "user": "https://github.com/dcoudert"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
-Sage provides interface to `nauty-geng` tool via `graph.nauty_geng()`, but interface for `nauty-genbg` tool is missing. 
+We add missing interface to `nauty-genbg`, a generator of bipartite graphs.
+
+Nauty's genbg was already compiled and accessible but the interface was missing. 
+
``````




---

archive/issue_comments_665421.json:
```json
{
    "body": "Changing branch from \"\" to \"public/graphs/33365_genbg\"",
    "created_at": "2022-04-10T13:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665421",
    "user": "https://github.com/dcoudert"
}
```

Changing branch from "" to "public/graphs/33365_genbg"



---

archive/issue_comments_665422.json:
```json
{
    "body": "Changing author from \"\" to \"David Coudert\"",
    "created_at": "2022-04-10T13:46:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665422",
    "user": "https://github.com/dcoudert"
}
```

Changing author from "" to "David Coudert"



---

archive/issue_comments_665423.json:
```json
{
    "body": "<a id='comment:3'></a>I see that the resulting graphs are created via \n\n```\n         G = BipartiteGraph(s[:-1], format='graph6')\n\n```\n\nPlease notice that `graph6` format does not bear bipartition information, and the bipartition produced by `BipartiteGraph()` may be different from the requested one (via parameters `n1` and `n2`), especially for non-connected ones, where multiple bipartitions may exist. I believe `genbg` produces the graph under assumption that left and right partite sets are formed by vertices `(0..n1-1)` and `(n1..n1+n2-1)`, respectively. This needs to be enforced for the resulting graphs like:\n\n```\n         G = BipartiteGraph(s[:-1], format='graph6', partition=(set(0..n1-1),set(n1..n1+n2-1)))\n\n```\n\nI did not test this, but I hope the idea is clear.",
    "created_at": "2022-04-10T15:32:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665423",
    "user": "https://github.com/maxale"
}
```

<a id='comment:3'></a>I see that the resulting graphs are created via 

```
         G = BipartiteGraph(s[:-1], format='graph6')

```

Please notice that `graph6` format does not bear bipartition information, and the bipartition produced by `BipartiteGraph()` may be different from the requested one (via parameters `n1` and `n2`), especially for non-connected ones, where multiple bipartitions may exist. I believe `genbg` produces the graph under assumption that left and right partite sets are formed by vertices `(0..n1-1)` and `(n1..n1+n2-1)`, respectively. This needs to be enforced for the resulting graphs like:

```
         G = BipartiteGraph(s[:-1], format='graph6', partition=(set(0..n1-1),set(n1..n1+n2-1)))

```

I did not test this, but I hope the idea is clear.



---

archive/issue_comments_665424.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-10T17:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_665425.json:
```json
{
    "body": "Changing commit from \"804b062b8701604b4075037de7adc14f547bc970\" to \"e57e4561f3402641c366aedb4a4db38695bbad3c\"",
    "created_at": "2022-04-10T17:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665425",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "804b062b8701604b4075037de7adc14f547bc970" to "e57e4561f3402641c366aedb4a4db38695bbad3c"



---

archive/issue_comments_665426.json:
```json
{
    "body": "<a id='comment:5'></a>You are right. Not easy when `n1` and `n2` are somewhere in the `options` string...\n\nI'm not particularly proud of my solution of parsing the auxiliary output, but it's working for as long as the user don't pass option -q (which suppress the auxiliary output).",
    "created_at": "2022-04-10T17:26:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665426",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:5'></a>You are right. Not easy when `n1` and `n2` are somewhere in the `options` string...

I'm not particularly proud of my solution of parsing the auxiliary output, but it's working for as long as the user don't pass option -q (which suppress the auxiliary output).



---

archive/issue_comments_665427.json:
```json
{
    "body": "<a id='comment:6'></a>green bot, please review.",
    "created_at": "2022-04-30T12:29:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665427",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'></a>green bot, please review.



---

archive/issue_comments_665428.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2022-06-16T23:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665428",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_665429.json:
```json
{
    "body": "<a id='comment:8'></a>More of a nitpick: I think `(-s, -a)` and, e.g., `\">M\"` should be code-formatted.\n\nI agree that it is not that elegant, but it seems to work. If issues arise down the road, we can fix them then.\n\nWhether or not you include my above nitpick, you can set a positive review on my behalf.",
    "created_at": "2022-06-16T23:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665429",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>More of a nitpick: I think `(-s, -a)` and, e.g., `">M"` should be code-formatted.

I agree that it is not that elegant, but it seems to work. If issues arise down the road, we can fix them then.

Whether or not you include my above nitpick, you can set a positive review on my behalf.



---

archive/issue_comments_665430.json:
```json
{
    "body": "Changing commit from \"e57e4561f3402641c366aedb4a4db38695bbad3c\" to \"695a66741f4eb2377d6a158ddade89e335b57e2e\"",
    "created_at": "2022-06-17T14:33:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665430",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e57e4561f3402641c366aedb4a4db38695bbad3c" to "695a66741f4eb2377d6a158ddade89e335b57e2e"



---

archive/issue_comments_665431.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-17T14:33:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665431",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_665432.json:
```json
{
    "body": "<a id='comment:10'></a>I'm not sure to understand what you asked for... I changed to `(``-s``, ``-a``)`.\n\nI prefer to avoid mentioning `\">M\"`. It can effectively be used to count graphs, but it's not documented and does not even appear in the source code of `genbg`.",
    "created_at": "2022-06-17T14:36:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665432",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:10'></a>I'm not sure to understand what you asked for... I changed to `(``-s``, ``-a``)`.

I prefer to avoid mentioning `">M"`. It can effectively be used to count graphs, but it's not documented and does not even appear in the source code of `genbg`.



---

archive/issue_comments_665433.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-06-17T14:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665433",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_665434.json:
```json
{
    "body": "<a id='comment:11'></a>As proposed, I set this ticket to positive review.\n\nThanks.",
    "created_at": "2022-06-17T14:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665434",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:11'></a>As proposed, I set this ticket to positive review.

Thanks.



---

archive/issue_comments_665435.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:10 dcoudert]:\n> I'm not sure to understand what you asked for... I changed to `(``-s``, ``-a``)`.\n\n\nYes, that\u2019s right: code formatting is ````.\n\n> I prefer to avoid mentioning `\">M\"`. It can effectively be used to count graphs, but it's not documented and does not even appear in the source code of `genbg`.\n\n\nThose kind of things were included in the doc though. Anyways, not so important.\n\nThank you.",
    "created_at": "2022-06-18T04:56:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665435",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>Replying to [comment:10 dcoudert]:
> I'm not sure to understand what you asked for... I changed to `(``-s``, ``-a``)`.


Yes, thatâ€™s right: code formatting is ````.

> I prefer to avoid mentioning `">M"`. It can effectively be used to count graphs, but it's not documented and does not even appear in the source code of `genbg`.


Those kind of things were included in the doc though. Anyways, not so important.

Thank you.



---

archive/issue_comments_665436.json:
```json
{
    "body": "Changing branch from \"public/graphs/33365_genbg\" to \"695a66741f4eb2377d6a158ddade89e335b57e2e\"",
    "created_at": "2022-06-19T15:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665436",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/graphs/33365_genbg" to "695a66741f4eb2377d6a158ddade89e335b57e2e"



---

archive/issue_comments_665437.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-06-19T15:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665437",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_088021.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-06-19T15:24:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33365#event-88021"
}
```



---

archive/issue_comments_665438.json:
```json
{
    "body": "Changing commit from \"695a66741f4eb2377d6a158ddade89e335b57e2e\" to \"\"",
    "created_at": "2022-07-13T15:37:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665438",
    "user": "https://github.com/maxale"
}
```

Changing commit from "695a66741f4eb2377d6a158ddade89e335b57e2e" to ""



---

archive/issue_comments_665439.json:
```json
{
    "body": "<a id='comment:14'></a>Please notice that `nauty-genbg` has the following restrictions on `n1` and `n2`:\n\n```\n$ nauty-genbg 5 28\n>E genbg: must have n1=1..24, n1+n2=1..32\n```\n\nShould these restrictions be checked by the interface and an appropriate error be raised?",
    "created_at": "2022-07-13T15:37:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665439",
    "user": "https://github.com/maxale"
}
```

<a id='comment:14'></a>Please notice that `nauty-genbg` has the following restrictions on `n1` and `n2`:

```
$ nauty-genbg 5 28
>E genbg: must have n1=1..24, n1+n2=1..32
```

Should these restrictions be checked by the interface and an appropriate error be raised?



---

archive/issue_comments_665440.json:
```json
{
    "body": "<a id='comment:15'></a>Yes, and these restrictions should be properly documented. Can you open a ticket ?",
    "created_at": "2022-07-13T15:50:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665440",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:15'></a>Yes, and these restrictions should be properly documented. Can you open a ticket ?



---

archive/issue_comments_665441.json:
```json
{
    "body": "<a id='comment:16'></a>Added as ticket #34179.",
    "created_at": "2022-07-13T17:33:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33365",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33365#issuecomment-665441",
    "user": "https://github.com/maxale"
}
```

<a id='comment:16'></a>Added as ticket #34179.
