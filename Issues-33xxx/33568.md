# Issue 33568: Add method `is_integral_domain` for polynomial quotient rings

archive/issues_033331.json:
```json
{
    "body": "We add a method `is_integral_domain`\nto the `PolynomialQuotientRing` class.\n\n**CC:**  @slel\n\n**Branch/Commit:** [3173fbe57cdce8ff5c427ec8bbaf042083efeb2b](https://github.com/sagemath/sagetrac-mirror/commit/3173fbe57cdce8ff5c427ec8bbaf042083efeb2b)\n\n**Reviewer:** Vincent Delecroix\n\n**Author:** Johannes Schmitt\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33568\n\n",
    "closed_at": "2022-04-02T10:52:57Z",
    "created_at": "2022-03-26T14:46:52Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Add method `is_integral_domain` for polynomial quotient rings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33568",
    "user": "https://github.com/schmittj"
}
```
We add a method `is_integral_domain`
to the `PolynomialQuotientRing` class.

**CC:**  @slel

**Branch/Commit:** [3173fbe57cdce8ff5c427ec8bbaf042083efeb2b](https://github.com/sagemath/sagetrac-mirror/commit/3173fbe57cdce8ff5c427ec8bbaf042083efeb2b)

**Reviewer:** Vincent Delecroix

**Author:** Johannes Schmitt

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/33568





---

archive/issue_comments_669023.json:
```json
{
    "body": "**Branch:** [u/gh-schmittj/is_integral_domain_for_quotients](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-schmittj/is_integral_domain_for_quotients)",
    "created_at": "2022-03-26T14:51:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669023",
    "user": "https://github.com/schmittj"
}
```

**Branch:** [u/gh-schmittj/is_integral_domain_for_quotients](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-schmittj/is_integral_domain_for_quotients)



---

archive/issue_comments_669024.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3dc50ed1ae80ab446cdb6d4d4d965781b8f1c874\">3dc50ed</a></td><td><code>Added method is_integral_domain to PolynomialQuotientRing</code></td></tr></table>\n",
    "created_at": "2022-03-26T14:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669024",
    "user": "https://github.com/schmittj"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3dc50ed1ae80ab446cdb6d4d4d965781b8f1c874">3dc50ed</a></td><td><code>Added method is_integral_domain to PolynomialQuotientRing</code></td></tr></table>




---

archive/issue_events_099403.json:
```json
{
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "label": "minor",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33568#event-99403"
}
```



---

archive/issue_comments_669025.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+Added method is_integral_domain to PolynomialQuotientRing\n``````\n",
    "created_at": "2022-03-26T14:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669025",
    "user": "https://github.com/schmittj"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+Added method is_integral_domain to PolynomialQuotientRing
``````




---

archive/issue_comments_669026.json:
```json
{
    "body": "**Commit:** [3dc50ed1ae80ab446cdb6d4d4d965781b8f1c874](https://github.com/sagemath/sagetrac-mirror/commit/3dc50ed1ae80ab446cdb6d4d4d965781b8f1c874)",
    "created_at": "2022-03-26T14:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669026",
    "user": "https://github.com/schmittj"
}
```

**Commit:** [3dc50ed1ae80ab446cdb6d4d4d965781b8f1c874](https://github.com/sagemath/sagetrac-mirror/commit/3dc50ed1ae80ab446cdb6d4d4d965781b8f1c874)



---

archive/issue_comments_669027.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e9c2728efb25a16cfb62bf88d42a27efaff04c5\">8e9c272</a></td><td><code>Fixed some first doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/579951a75118252d45fd8b2e8e8f6c8058f4198d\">579951a</a></td><td><code>Added test checking whether ring is already known to be integral domain</code></td></tr></table>\n",
    "created_at": "2022-03-26T19:44:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669027",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e9c2728efb25a16cfb62bf88d42a27efaff04c5">8e9c272</a></td><td><code>Fixed some first doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/579951a75118252d45fd8b2e8e8f6c8058f4198d">579951a</a></td><td><code>Added test checking whether ring is already known to be integral domain</code></td></tr></table>




---

archive/issue_comments_669028.json:
```json
{
    "body": "**Changing commit** from \"[3dc50ed1ae80ab446cdb6d4d4d965781b8f1c874](https://github.com/sagemath/sagetrac-mirror/commit/3dc50ed1ae80ab446cdb6d4d4d965781b8f1c874)\" to \"[579951a75118252d45fd8b2e8e8f6c8058f4198d](https://github.com/sagemath/sagetrac-mirror/commit/579951a75118252d45fd8b2e8e8f6c8058f4198d)\".",
    "created_at": "2022-03-26T19:44:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669028",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3dc50ed1ae80ab446cdb6d4d4d965781b8f1c874](https://github.com/sagemath/sagetrac-mirror/commit/3dc50ed1ae80ab446cdb6d4d4d965781b8f1c874)" to "[579951a75118252d45fd8b2e8e8f6c8058f4198d](https://github.com/sagemath/sagetrac-mirror/commit/579951a75118252d45fd8b2e8e8f6c8058f4198d)".



---

archive/issue_events_099404.json:
```json
{
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "label": "minor",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33568#event-99404"
}
```



---

archive/issue_events_099405.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "rename": {
        "from": "is_integral_domain_for_quotients",
        "to": "Add method `is_integral_domain` for polynomial quotient rings"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33568#event-99405"
}
```



---

archive/issue_comments_669029.json:
```json
{
    "body": "<a id='comment:4'></a>\nRemember to add your name in the \"authors\" field\nand to set to \"needs review\" when ready.",
    "created_at": "2022-03-26T21:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669029",
    "user": "https://github.com/slel"
}
```

<a id='comment:4'></a>
Remember to add your name in the "authors" field
and to set to "needs review" when ready.



---

archive/issue_comments_669030.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n-Added method is_integral_domain to PolynomialQuotientRing\n+We add a method `is_integral_domain`\n+to the `PolynomialQuotientRing` class.\n``````\n",
    "created_at": "2022-03-26T21:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669030",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,2 @@
-Added method is_integral_domain to PolynomialQuotientRing
+We add a method `is_integral_domain`
+to the `PolynomialQuotientRing` class.
``````




---

archive/issue_comments_669031.json:
```json
{
    "body": "**Changing commit** from \"[579951a75118252d45fd8b2e8e8f6c8058f4198d](https://github.com/sagemath/sagetrac-mirror/commit/579951a75118252d45fd8b2e8e8f6c8058f4198d)\" to \"[5a617af22813832a77b2715d3a34ab92fe30cf86](https://github.com/sagemath/sagetrac-mirror/commit/5a617af22813832a77b2715d3a34ab92fe30cf86)\".",
    "created_at": "2022-03-27T12:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669031",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[579951a75118252d45fd8b2e8e8f6c8058f4198d](https://github.com/sagemath/sagetrac-mirror/commit/579951a75118252d45fd8b2e8e8f6c8058f4198d)" to "[5a617af22813832a77b2715d3a34ab92fe30cf86](https://github.com/sagemath/sagetrac-mirror/commit/5a617af22813832a77b2715d3a34ab92fe30cf86)".



---

archive/issue_comments_669032.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a617af22813832a77b2715d3a34ab92fe30cf86\">5a617af</a></td><td><code>Added some more doctests</code></td></tr></table>\n",
    "created_at": "2022-03-27T12:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669032",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a617af22813832a77b2715d3a34ab92fe30cf86">5a617af</a></td><td><code>Added some more doctests</code></td></tr></table>




---

archive/issue_comments_669033.json:
```json
{
    "body": "<a id='comment:6'></a>\nWith respect to the documentation. Anything after a `::` must be indented. The correct syntax for a `TESTS` or `EXAMPLES` block starting with a sentence is\n\n```\n        TESTS:\n\n        Here is an example of a quotient ring which is not an integral\n        domain, even though the base ring is integral and the modulus is\n        irreducible::\n\n            sage: B = ZZ.extension(x^2 - 5, 'a')\n```\n\nInstead of `if IntegralDomains() in self.categories()` you might want to do `if self in IntegralDomains()`.\n\nThe test `if self.base_ring() in GcdDomains` would better be `if self.base_ring() in GcdDomains()`. I am surprised that it works the way you wrote it (as `GcdDomains` is a class).\n\nWhen `proof=False` I am not sure that the shortcut `NotImplementedError => False` is desirable\n\n```\n            except NotImplementedError:\n                if proof:\n                    raise\n                else:\n                    ret = False\n```\nYou indeed catch the `raise NotImplementedError` that could be raised few lines above but also any `NotImplementedError` that would come from `irr = self.modulus().is_irreducible()`.",
    "created_at": "2022-03-27T16:35:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669033",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>
With respect to the documentation. Anything after a `::` must be indented. The correct syntax for a `TESTS` or `EXAMPLES` block starting with a sentence is

```
        TESTS:

        Here is an example of a quotient ring which is not an integral
        domain, even though the base ring is integral and the modulus is
        irreducible::

            sage: B = ZZ.extension(x^2 - 5, 'a')
```

Instead of `if IntegralDomains() in self.categories()` you might want to do `if self in IntegralDomains()`.

The test `if self.base_ring() in GcdDomains` would better be `if self.base_ring() in GcdDomains()`. I am surprised that it works the way you wrote it (as `GcdDomains` is a class).

When `proof=False` I am not sure that the shortcut `NotImplementedError => False` is desirable

```
            except NotImplementedError:
                if proof:
                    raise
                else:
                    ret = False
```
You indeed catch the `raise NotImplementedError` that could be raised few lines above but also any `NotImplementedError` that would come from `irr = self.modulus().is_irreducible()`.



---

archive/issue_comments_669034.json:
```json
{
    "body": "<a id='comment:7'></a>\nThanks for taking a close look!\n> With respect to the documentation. Anything after a `::` must be indented. \n\nI'll change this.\n\n> Instead of `if IntegralDomains() in self.categories()` you might want to do `if self in IntegralDomains()`.\n\n\nOk, I can do that, though one small comment: I believe in most cases this will mean that `is_integral_domain` will go into an infinite loop alternating with `IntegralDomains().__contains__` until an exception is raised and the `__contains__` method returns `False`. But maybe this is ok? \n\nI only added this check since otherwise doctests about splitting algebras broke. There the problem was: one of these algebras was initialized knowing it is an integral domain, but then later it was also initialized as a quotient ring, and its previous `is_integral_domain` method (which just returned `True`) was overwritten with my method which couldn't find a proof and raised an exception. (See the doctest failures in 3dc50ed for reference)\n\n> The test `if self.base_ring() in GcdDomains` would better be `if self.base_ring() in GcdDomains()`. I am surprised that it works the way you wrote it (as `GcdDomains` is a class).\n\nYes, in retrospect I am also surprised - I'll change this.\n\n> When `proof=False` I am not sure that the shortcut `NotImplementedError => False` is desirable\n> \n> ```\n>             except NotImplementedError:\n>                 if proof:\n>                     raise\n>                 else:\n>                     ret = False\n> ```\n> You indeed catch the `raise NotImplementedError` that could be raised few lines above but also any `NotImplementedError` that would come from `irr = self.modulus().is_irreducible()`.\n\n\nIt's true that there are two sources where the `NotImplementedError` could come from, but I think in both cases there is nothing we can do mathematically - to confirm that we are an integral domain, the only path leading to `True` right now is that we can verify that `self.modulus()` is irreducible AND that the base ring is a GCD. If you know another sufficient condition, I am happy to include it.\n\nIn fact the previous method `PolynomialQuotientRing.is_field`, which I tried to emulate, specifically uses such a `try: ... except NotImplementedError` to catch a missing implementation of `is_irreducible`.",
    "created_at": "2022-03-28T15:28:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669034",
    "user": "https://github.com/schmittj"
}
```

<a id='comment:7'></a>
Thanks for taking a close look!
> With respect to the documentation. Anything after a `::` must be indented. 

I'll change this.

> Instead of `if IntegralDomains() in self.categories()` you might want to do `if self in IntegralDomains()`.


Ok, I can do that, though one small comment: I believe in most cases this will mean that `is_integral_domain` will go into an infinite loop alternating with `IntegralDomains().__contains__` until an exception is raised and the `__contains__` method returns `False`. But maybe this is ok? 

I only added this check since otherwise doctests about splitting algebras broke. There the problem was: one of these algebras was initialized knowing it is an integral domain, but then later it was also initialized as a quotient ring, and its previous `is_integral_domain` method (which just returned `True`) was overwritten with my method which couldn't find a proof and raised an exception. (See the doctest failures in 3dc50ed for reference)

> The test `if self.base_ring() in GcdDomains` would better be `if self.base_ring() in GcdDomains()`. I am surprised that it works the way you wrote it (as `GcdDomains` is a class).

Yes, in retrospect I am also surprised - I'll change this.

> When `proof=False` I am not sure that the shortcut `NotImplementedError => False` is desirable
> 
> ```
>             except NotImplementedError:
>                 if proof:
>                     raise
>                 else:
>                     ret = False
> ```
> You indeed catch the `raise NotImplementedError` that could be raised few lines above but also any `NotImplementedError` that would come from `irr = self.modulus().is_irreducible()`.


It's true that there are two sources where the `NotImplementedError` could come from, but I think in both cases there is nothing we can do mathematically - to confirm that we are an integral domain, the only path leading to `True` right now is that we can verify that `self.modulus()` is irreducible AND that the base ring is a GCD. If you know another sufficient condition, I am happy to include it.

In fact the previous method `PolynomialQuotientRing.is_field`, which I tried to emulate, specifically uses such a `try: ... except NotImplementedError` to catch a missing implementation of `is_irreducible`.



---

archive/issue_comments_669035.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [gh-schmittj](#comment%3A7):\n> Thanks for taking a close look!\n> > With respect to the documentation. Anything after a `::` must be indented. \n\n> I'll change this.\n> \n> > Instead of `if IntegralDomains() in self.categories()` you might want to do `if self in IntegralDomains()`.\n\n> \n> Ok, I can do that, though one small comment: I believe in most cases this will mean that `is_integral_domain` will go into an infinite loop alternating with `IntegralDomains().__contains__` until an exception is raised and the `__contains__` method returns `False`. But maybe this is ok? \n\n\nThe method `self in IntegralDomains()` ought to be a faster equivalent of `IntegralDomains() in self.categories()`... which is not the case. Could you simply add a comment in the code? There is a note at the end of the documentation of `IntegralDomains.__contains__` mentionning that this method should disappear (in favour of the generic one being equivalent to `IntegralDomains() in self.categories()`).\n\n> > When `proof=False` I am not sure that the shortcut `NotImplementedError => False` is desirable\n> > \n> > ```\n> >             except NotImplementedError:\n> >                 if proof:\n> >                     raise\n> >                 else:\n> >                     ret = False\n> > ```\n> > You indeed catch the `raise NotImplementedError` that could be raised few lines above but also any `NotImplementedError` that would come from `irr = self.modulus().is_irreducible()`.\n\n> \n> It's true that there are two sources where the `NotImplementedError` could come from, but I think in both cases there is nothing we can do mathematically - to confirm that we are an integral domain, the only path leading to `True` right now is that we can verify that `self.modulus()` is irreducible AND that the base ring is a GCD. If you know another sufficient condition, I am happy to include it.\n> \n> In fact the previous method `PolynomialQuotientRing.is_field`, which I tried to emulate, specifically uses such a `try: ... except NotImplementedError` to catch a missing implementation of `is_irreducible`.\n\n\nI think my misunderstanding comes from the weird semantic of the keyword `proof=True`/`proof=False`. I thought that `proof=False` meant \"the answer assumes some standard conjecture such as the generalized Riemann hypothesis\" (as in https://doc.sagemath.org/html/en/reference/structure/sage/structure/proof/proof.html). What your `proof=False` means is rather \"do not raise NotImplementedError but return False instead\".",
    "created_at": "2022-03-28T15:56:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669035",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>
Replying to [gh-schmittj](#comment%3A7):
> Thanks for taking a close look!
> > With respect to the documentation. Anything after a `::` must be indented. 

> I'll change this.
> 
> > Instead of `if IntegralDomains() in self.categories()` you might want to do `if self in IntegralDomains()`.

> 
> Ok, I can do that, though one small comment: I believe in most cases this will mean that `is_integral_domain` will go into an infinite loop alternating with `IntegralDomains().__contains__` until an exception is raised and the `__contains__` method returns `False`. But maybe this is ok? 


The method `self in IntegralDomains()` ought to be a faster equivalent of `IntegralDomains() in self.categories()`... which is not the case. Could you simply add a comment in the code? There is a note at the end of the documentation of `IntegralDomains.__contains__` mentionning that this method should disappear (in favour of the generic one being equivalent to `IntegralDomains() in self.categories()`).

> > When `proof=False` I am not sure that the shortcut `NotImplementedError => False` is desirable
> > 
> > ```
> >             except NotImplementedError:
> >                 if proof:
> >                     raise
> >                 else:
> >                     ret = False
> > ```
> > You indeed catch the `raise NotImplementedError` that could be raised few lines above but also any `NotImplementedError` that would come from `irr = self.modulus().is_irreducible()`.

> 
> It's true that there are two sources where the `NotImplementedError` could come from, but I think in both cases there is nothing we can do mathematically - to confirm that we are an integral domain, the only path leading to `True` right now is that we can verify that `self.modulus()` is irreducible AND that the base ring is a GCD. If you know another sufficient condition, I am happy to include it.
> 
> In fact the previous method `PolynomialQuotientRing.is_field`, which I tried to emulate, specifically uses such a `try: ... except NotImplementedError` to catch a missing implementation of `is_irreducible`.


I think my misunderstanding comes from the weird semantic of the keyword `proof=True`/`proof=False`. I thought that `proof=False` meant "the answer assumes some standard conjecture such as the generalized Riemann hypothesis" (as in https://doc.sagemath.org/html/en/reference/structure/sage/structure/proof/proof.html). What your `proof=False` means is rather "do not raise NotImplementedError but return False instead".



---

archive/issue_comments_669036.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [vdelecroix](#comment%3A8):\n> Replying to [gh-schmittj](#comment%3A7):\n> > Thanks for taking a close look!\n> > > With respect to the documentation. Anything after a `::` must be indented. \n\n> > I'll change this.\n> > \n> > > Instead of `if IntegralDomains() in self.categories()` you might want to do `if self in IntegralDomains()`.\n\n> > \n> > Ok, I can do that, though one small comment: I believe in most cases this will mean that `is_integral_domain` will go into an infinite loop alternating with `IntegralDomains().__contains__` until an exception is raised and the `__contains__` method returns `False`. But maybe this is ok? \n\n> \n> The method `self in IntegralDomains()` ought to be a faster equivalent of `IntegralDomains() in self.categories()`... which is not the case. Could you simply add a comment in the code? There is a note at the end of the documentation of `IntegralDomains.__contains__` mentionning that this method should disappear (in favour of the generic one being equivalent to `IntegralDomains() in self.categories()`).\n\n\nYou might want to use what the generic `__contains__` does\n\n```\nself.category().is_subcategory(IntegralDomains())\n```\n(see `sage/categories/category.py`).",
    "created_at": "2022-03-28T16:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669036",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>
Replying to [vdelecroix](#comment%3A8):
> Replying to [gh-schmittj](#comment%3A7):
> > Thanks for taking a close look!
> > > With respect to the documentation. Anything after a `::` must be indented. 

> > I'll change this.
> > 
> > > Instead of `if IntegralDomains() in self.categories()` you might want to do `if self in IntegralDomains()`.

> > 
> > Ok, I can do that, though one small comment: I believe in most cases this will mean that `is_integral_domain` will go into an infinite loop alternating with `IntegralDomains().__contains__` until an exception is raised and the `__contains__` method returns `False`. But maybe this is ok? 

> 
> The method `self in IntegralDomains()` ought to be a faster equivalent of `IntegralDomains() in self.categories()`... which is not the case. Could you simply add a comment in the code? There is a note at the end of the documentation of `IntegralDomains.__contains__` mentionning that this method should disappear (in favour of the generic one being equivalent to `IntegralDomains() in self.categories()`).


You might want to use what the generic `__contains__` does

```
self.category().is_subcategory(IntegralDomains())
```
(see `sage/categories/category.py`).



---

archive/issue_comments_669037.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3173fbe57cdce8ff5c427ec8bbaf042083efeb2b\">3173fbe</a></td><td><code>Made suggested changes to documentation and details in code</code></td></tr></table>\n",
    "created_at": "2022-03-28T16:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669037",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3173fbe57cdce8ff5c427ec8bbaf042083efeb2b">3173fbe</a></td><td><code>Made suggested changes to documentation and details in code</code></td></tr></table>




---

archive/issue_comments_669038.json:
```json
{
    "body": "**Changing commit** from \"[5a617af22813832a77b2715d3a34ab92fe30cf86](https://github.com/sagemath/sagetrac-mirror/commit/5a617af22813832a77b2715d3a34ab92fe30cf86)\" to \"[3173fbe57cdce8ff5c427ec8bbaf042083efeb2b](https://github.com/sagemath/sagetrac-mirror/commit/3173fbe57cdce8ff5c427ec8bbaf042083efeb2b)\".",
    "created_at": "2022-03-28T16:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669038",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5a617af22813832a77b2715d3a34ab92fe30cf86](https://github.com/sagemath/sagetrac-mirror/commit/5a617af22813832a77b2715d3a34ab92fe30cf86)" to "[3173fbe57cdce8ff5c427ec8bbaf042083efeb2b](https://github.com/sagemath/sagetrac-mirror/commit/3173fbe57cdce8ff5c427ec8bbaf042083efeb2b)".



---

archive/issue_comments_669039.json:
```json
{
    "body": "<a id='comment:11'></a>\nI really like the proposal with `self.category().is_subcategory(IntegralDomains())`. I made all corresponding changes",
    "created_at": "2022-03-28T16:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669039",
    "user": "https://github.com/schmittj"
}
```

<a id='comment:11'></a>
I really like the proposal with `self.category().is_subcategory(IntegralDomains())`. I made all corresponding changes



---

archive/issue_comments_669040.json:
```json
{
    "body": "**Author:** Johannes Schmitt",
    "created_at": "2022-03-28T16:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669040",
    "user": "https://github.com/schmittj"
}
```

**Author:** Johannes Schmitt



---

archive/issue_comments_669041.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2022-03-28T16:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669041",
    "user": "https://github.com/schmittj"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_669042.json:
```json
{
    "body": "<a id='comment:12'></a>\nAre you sure about the semantic of `proof=False` that I mentioned in my [This is the Trac macro *comment:8* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#comment:8-macro)? For `Zmod(n)` this does turns on/off random primality tests (which is very different from `NotImplementedError` becomes `False`). See the file in [sage/rings/finite_rings/integer_mod_ring.py](https://github.com/sagemath/sage/blob/develop/src/sage/rings/finite_rings/integer_mod_ring.py). To my mind, the method should always raise `NotImplementedError` when it is not able to decide.",
    "created_at": "2022-03-28T17:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669042",
    "user": "https://github.com/videlec"
}
```

<a id='comment:12'></a>
Are you sure about the semantic of `proof=False` that I mentioned in my [This is the Trac macro *comment:8* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#comment:8-macro)? For `Zmod(n)` this does turns on/off random primality tests (which is very different from `NotImplementedError` becomes `False`). See the file in [sage/rings/finite_rings/integer_mod_ring.py](https://github.com/sagemath/sage/blob/develop/src/sage/rings/finite_rings/integer_mod_ring.py). To my mind, the method should always raise `NotImplementedError` when it is not able to decide.



---

archive/issue_comments_669043.json:
```json
{
    "body": "**Reviewer:** Vincent Delecroix",
    "created_at": "2022-03-28T17:18:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669043",
    "user": "https://github.com/videlec"
}
```

**Reviewer:** Vincent Delecroix



---

archive/issue_comments_669044.json:
```json
{
    "body": "<a id='comment:14'></a>\nIn the documentation of `Ring.is_integral_domain` it says\n\n```\n   Return \"True\" if this ring is an integral domain.\n\n   INPUT:\n\n   * \"proof\" -- (default: \"True\") Determines what to do in unknown\n     cases\n\n   ALGORITHM:\n\n   If the parameter \"proof\" is set to \"True\", the returned value is\n   correct but the method might throw an error.  Otherwise, if it is\n   set to \"False\", the method returns \"True\" if it can establish that\n   self is an integral domain and \"False\" otherwise.\n```\nMy impression is: if the primality tests have a nonzero chance of returning a false positive, then the implementation in `Zmod(n)` is not strictly speaking conforming to this specification in `Ring.is_integral_domain`.",
    "created_at": "2022-03-29T06:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669044",
    "user": "https://github.com/schmittj"
}
```

<a id='comment:14'></a>
In the documentation of `Ring.is_integral_domain` it says

```
   Return "True" if this ring is an integral domain.

   INPUT:

   * "proof" -- (default: "True") Determines what to do in unknown
     cases

   ALGORITHM:

   If the parameter "proof" is set to "True", the returned value is
   correct but the method might throw an error.  Otherwise, if it is
   set to "False", the method returns "True" if it can establish that
   self is an integral domain and "False" otherwise.
```
My impression is: if the primality tests have a nonzero chance of returning a false positive, then the implementation in `Zmod(n)` is not strictly speaking conforming to this specification in `Ring.is_integral_domain`.



---

archive/issue_comments_669045.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2022-03-29T07:32:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669045",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_669046.json:
```json
{
    "body": "<a id='comment:15'></a>\nThanks for the reference. I don't like very much this specification but changing it is definitely not the goal of this ticket.",
    "created_at": "2022-03-29T07:32:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669046",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'></a>
Thanks for the reference. I don't like very much this specification but changing it is definitely not the goal of this ticket.



---

archive/issue_comments_669047.json:
```json
{
    "body": "**Changing branch** from \"[u/gh-schmittj/is_integral_domain_for_quotients](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-schmittj/is_integral_domain_for_quotients)\" to \"[3173fbe57cdce8ff5c427ec8bbaf042083efeb2b](https://github.com/sagemath/sagetrac-mirror/commit/3173fbe57cdce8ff5c427ec8bbaf042083efeb2b)\".",
    "created_at": "2022-04-02T10:52:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669047",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/gh-schmittj/is_integral_domain_for_quotients](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-schmittj/is_integral_domain_for_quotients)" to "[3173fbe57cdce8ff5c427ec8bbaf042083efeb2b](https://github.com/sagemath/sagetrac-mirror/commit/3173fbe57cdce8ff5c427ec8bbaf042083efeb2b)".



---

archive/issue_comments_669048.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2022-04-02T10:52:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33568#issuecomment-669048",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_events_099406.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-04-02T10:52:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33568",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33568#event-99406"
}
```
