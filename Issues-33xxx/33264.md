# Issue 33264: Define `x` as symbolic variable in many `animate` examples

archive/issues_033027.json:
```json
{
    "assignees": [],
    "body": "The animated plots examples in the documentation at\n\n- https://doc.sagemath.org/html/en/reference/plotting/sage/plot/animate.html\n\ninclude an example where `x = lambda t: cos(t)`\nand `y = ...` are used for a parametric plot.\n\nMany subsequent examples fail with a type error\nif run without resetting `x` to its default value,\neither with `reset('x')` or with `x = SR.var('x')`.\n\n```\nsage: a = animate([plot(x^2 + n) for n in range(4)], ymin=0, ymax=4)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-...-...> in <module>\n----> 1 a = animate([plot(x**Integer(2) + n) for n in ...], ymin=..., ymax=...)\n\n<ipython-input-...-...> in <listcomp>(.0)\n----> 1 a = animate([plot(x**Integer(2) + n) for n in ...], ymin=..., ymax=...)\n\n.../site-packages/sage/rings/integer.pyx in sage.rings.integer.Integer.__pow__ (build/cythonized/sage/rings/integer.c:14496)()\n   2153             return coercion_model.bin_op(left, right, operator.pow)\n   2154         # left is a non-Element: do the powering with a Python int\n-> 2155         return left ** int(right)\n   2156\n   2157     cpdef _pow_(self, other):\n\nTypeError: unsupported operand type(s) for ** or pow(): 'function' and 'int'\n```\n\n```\nsage: a = animate([sin(x + float(k)) for k in srange(0,2*pi,0.7)],\n....:             xmin=0, xmax=2*pi, ymin=-1, ymax=1, figsize=[2,1])\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-...> in <module>\n----> 1 a = animate([sin(x + float(k)) for ...],\n      2             xmin=..., xmax=..., ymin=..., ymax=..., figsize=...)\n\n<ipython-input-...> in <listcomp>(.0)\n----> 1 a = animate([sin(x + float(k)) for ...],\n      2             xmin=..., xmax=..., ymin=..., ymax=..., figsize=...)\n\nTypeError: unsupported operand type(s) for +: 'function' and 'float'\n```\n\n```\nsage: a = animate([sin(x + float(k)) for k in srange(0,2*pi,0.7)],\n....:                xmin=0, xmax=2*pi, figsize=[2,1])\n....:\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-...> in <module>\n----> 1 a = animate([sin(x + float(k)) for ...],\n      2                xmin=..., xmax=..., figsize=...)\n\n<ipython-input-...> in <listcomp>(.0)\n----> 1 a = animate([sin(x + float(k)) for ...],\n      2                xmin=..., xmax=..., figsize=...)\n\nTypeError: unsupported operand type(s) for +: 'function' and 'float'\n```\n\nCC:  @slel @mkoeppe\n\nKeywords: **SR.var('x')**\n\nBranch/Commit: **[`e73cd12`](https://github.com/sagemath/sagetrac-mirror/commit/e73cd12435a21f22f440bd21fff270361a1ac890)**\n\nReviewer: **Samuel Leli\u00e8vre**\n\nAuthor: **Michael Orlitzky**\n\nComponent: **graphics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33264_\n\n",
    "closed_at": "2022-02-16T23:57:14Z",
    "created_at": "2022-01-31T21:55:31Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Define `x` as symbolic variable in many `animate` examples",
    "type": "issue",
    "updated_at": "2022-02-16T23:57:14Z",
    "url": "https://github.com/sagemath/sage/issues/33264",
    "user": "https://github.com/umedoblock"
}
```
The animated plots examples in the documentation at

- https://doc.sagemath.org/html/en/reference/plotting/sage/plot/animate.html

include an example where `x = lambda t: cos(t)`
and `y = ...` are used for a parametric plot.

Many subsequent examples fail with a type error
if run without resetting `x` to its default value,
either with `reset('x')` or with `x = SR.var('x')`.

```
sage: a = animate([plot(x^2 + n) for n in range(4)], ymin=0, ymax=4)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-...-...> in <module>
----> 1 a = animate([plot(x**Integer(2) + n) for n in ...], ymin=..., ymax=...)

<ipython-input-...-...> in <listcomp>(.0)
----> 1 a = animate([plot(x**Integer(2) + n) for n in ...], ymin=..., ymax=...)

.../site-packages/sage/rings/integer.pyx in sage.rings.integer.Integer.__pow__ (build/cythonized/sage/rings/integer.c:14496)()
   2153             return coercion_model.bin_op(left, right, operator.pow)
   2154         # left is a non-Element: do the powering with a Python int
-> 2155         return left ** int(right)
   2156
   2157     cpdef _pow_(self, other):

TypeError: unsupported operand type(s) for ** or pow(): 'function' and 'int'
```

```
sage: a = animate([sin(x + float(k)) for k in srange(0,2*pi,0.7)],
....:             xmin=0, xmax=2*pi, ymin=-1, ymax=1, figsize=[2,1])
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-...> in <module>
----> 1 a = animate([sin(x + float(k)) for ...],
      2             xmin=..., xmax=..., ymin=..., ymax=..., figsize=...)

<ipython-input-...> in <listcomp>(.0)
----> 1 a = animate([sin(x + float(k)) for ...],
      2             xmin=..., xmax=..., ymin=..., ymax=..., figsize=...)

TypeError: unsupported operand type(s) for +: 'function' and 'float'
```

```
sage: a = animate([sin(x + float(k)) for k in srange(0,2*pi,0.7)],
....:                xmin=0, xmax=2*pi, figsize=[2,1])
....:
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-...> in <module>
----> 1 a = animate([sin(x + float(k)) for ...],
      2                xmin=..., xmax=..., figsize=...)

<ipython-input-...> in <listcomp>(.0)
----> 1 a = animate([sin(x + float(k)) for ...],
      2                xmin=..., xmax=..., figsize=...)

TypeError: unsupported operand type(s) for +: 'function' and 'float'
```

CC:  @slel @mkoeppe

Keywords: **SR.var('x')**

Branch/Commit: **[`e73cd12`](https://github.com/sagemath/sagetrac-mirror/commit/e73cd12435a21f22f440bd21fff270361a1ac890)**

Reviewer: **Samuel Leli√®vre**

Author: **Michael Orlitzky**

Component: **graphics**

_Issue created by migration from https://trac.sagemath.org/ticket/33264_





---

archive/issue_events_454250.json:
```json
{
    "actor": "https://github.com/umedoblock",
    "created_at": "2022-01-31T21:55:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454250"
}
```



---

archive/issue_events_454251.json:
```json
{
    "actor": "https://github.com/umedoblock",
    "created_at": "2022-01-31T21:55:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454251"
}
```



---

archive/issue_comments_537660.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nDid you redefine `x` before that?\n\nTry running `reset('x')` and running the examples again.",
    "created_at": "2022-02-01T12:22:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537660",
    "user": "https://github.com/slel"
}
```

<div id="comment:1" align="right">comment:1</div>

Did you redefine `x` before that?

Try running `reset('x')` and running the examples again.



---

archive/issue_events_454252.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-02-01T12:38:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454252"
}
```



---

archive/issue_comments_537661.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAll the examples work fine for me in a fresh Sage session\n\n- using the Sage-macOS 9.5 prerelease\n- or using Sage 9.5 final, built from source\n\nIf I first redefine `x` as a function, e.g.\n\n```\nsage: x = lambda t: t + 1\n```\nthen the failures in the ticket description arise.\n\nResetting `x` to its starting value with\n\n```\nsage: reset('x')\n```\nsolves the issues, and the examples work fine again.",
    "created_at": "2022-02-01T12:38:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537661",
    "user": "https://github.com/slel"
}
```

<div id="comment:2" align="right">comment:2</div>

All the examples work fine for me in a fresh Sage session

- using the Sage-macOS 9.5 prerelease
- or using Sage 9.5 final, built from source

If I first redefine `x` as a function, e.g.

```
sage: x = lambda t: t + 1
```
then the failures in the ticket description arise.

Resetting `x` to its starting value with

```
sage: reset('x')
```
solves the issues, and the examples work fine again.



---

archive/issue_events_454253.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-02-01T12:38:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "c: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454253"
}
```



---

archive/issue_events_454254.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-02-01T12:38:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454254"
}
```



---

archive/issue_comments_537662.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThis seems like user error rather than a defect in Sage.\n\nPropose to close as invalid.",
    "created_at": "2022-02-01T12:42:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537662",
    "user": "https://github.com/slel"
}
```

<div id="comment:3" align="right">comment:3</div>

This seems like user error rather than a defect in Sage.

Propose to close as invalid.



---

archive/issue_events_454255.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-02-01T12:42:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454255"
}
```



---

archive/issue_events_454256.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-02-01T12:42:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454256"
}
```



---

archive/issue_events_454257.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-02-01T12:42:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454257"
}
```



---

archive/issue_comments_537663.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHello slelievre.\n\nYou said \"redefine x\" means below sentence ?\n\n```\nx = lambda t: cos(t)\n```\n\nIf it's correct, I redefined.\n\nI tried running reset('x') and running the examples again.\n\nThen TypeError disappeared.\n\nThanks slelievre.\n\nI'm a beginner of sagemath, so I have no idea how to recovery from TypeError.\n\nAnd I couldn't run below sentence.\n\n```\nreset('x')\n```\n\nI believe that all of the sagemath beginner cannot recovery from TypeError.\n\nPlease change document of \"make_image(frame, filename, **kwds)\" in [Animated plots](https://doc.sagemath.org/html/en/reference/plotting/sage/plot/animate.html).\n\nEXAMPLES:\n\n```\nfrom sage.plot.animate import Animation\nclass MyAnimation(Animation):\n   def make_image(self, frame, filename, **kwds):\n       P = parametric_plot(frame[0], frame[1], **frame[2])\n       P.save_image(filename,**kwds)\n\nt = var('t')\n\nvvvvvvvvvvvvvvvvvvvv\nx = lambda t: cos(t)\n^^^^^^^^^^^^^^^^^^^^\n\ny = lambda n,t: sin(t)/n\nB = MyAnimation([([x(t), y(i+1,t)],(t,0,1), {'color':Color((1,0,i/4)), 'aspect_ratio':1, 'ymax':1}) for i in range(4)])\n\nd = B.png(); v = os.listdir(d); v.sort(); v  # long time\n['00000000.png', '00000001.png', '00000002.png', '00000003.png']\nB.show()  # not tested\n\nclass MyAnimation(Animation):\n   def make_image(self, frame, filename, **kwds):\n       G = frame.plot()\n\nG.set_axes_range(floor(G.xmin()),ceil(G.xmax()),floor(G.ymin()),ceil(G.ymax()))\n       G.save_image(filename, **kwds)\n\nB = MyAnimation([graphs.CompleteGraph(n) for n in range(7,11)], figsize=5)\nd = B.png()\nv = os.listdir(d); v.sort(); v\n['00000000.png', '00000001.png', '00000002.png', '00000003.png']\nB.show()  # not tested\n```",
    "created_at": "2022-02-01T16:16:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537663",
    "user": "https://github.com/umedoblock"
}
```

<div id="comment:4" align="right">comment:4</div>

Hello slelievre.

You said "redefine x" means below sentence ?

```
x = lambda t: cos(t)
```

If it's correct, I redefined.

I tried running reset('x') and running the examples again.

Then TypeError disappeared.

Thanks slelievre.

I'm a beginner of sagemath, so I have no idea how to recovery from TypeError.

And I couldn't run below sentence.

```
reset('x')
```

I believe that all of the sagemath beginner cannot recovery from TypeError.

Please change document of "make_image(frame, filename, **kwds)" in [Animated plots](https://doc.sagemath.org/html/en/reference/plotting/sage/plot/animate.html).

EXAMPLES:

```
from sage.plot.animate import Animation
class MyAnimation(Animation):
   def make_image(self, frame, filename, **kwds):
       P = parametric_plot(frame[0], frame[1], **frame[2])
       P.save_image(filename,**kwds)

t = var('t')

vvvvvvvvvvvvvvvvvvvv
x = lambda t: cos(t)
^^^^^^^^^^^^^^^^^^^^

y = lambda n,t: sin(t)/n
B = MyAnimation([([x(t), y(i+1,t)],(t,0,1), {'color':Color((1,0,i/4)), 'aspect_ratio':1, 'ymax':1}) for i in range(4)])

d = B.png(); v = os.listdir(d); v.sort(); v  # long time
['00000000.png', '00000001.png', '00000002.png', '00000003.png']
B.show()  # not tested

class MyAnimation(Animation):
   def make_image(self, frame, filename, **kwds):
       G = frame.plot()

G.set_axes_range(floor(G.xmin()),ceil(G.xmax()),floor(G.ymin()),ceil(G.ymax()))
       G.save_image(filename, **kwds)

B = MyAnimation([graphs.CompleteGraph(n) for n in range(7,11)], figsize=5)
d = B.png()
v = os.listdir(d); v.sort(); v
['00000000.png', '00000001.png', '00000002.png', '00000003.png']
B.show()  # not tested
```



---

archive/issue_comments_537664.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nIn gh-umedoblock's defense, our examples *do* rely on some implicit magic, the symbolic variable `x` being automatically defined whenever sage starts or the doctest environment resets. I would much rather see us begin them all with `x = SR.var(\"x\")` so that they're truly copy/paste-able, but I expect I'd be pelted with tomatoes if I proposed it.",
    "created_at": "2022-02-02T19:18:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537664",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:5" align="right">comment:5</div>

In gh-umedoblock's defense, our examples *do* rely on some implicit magic, the symbolic variable `x` being automatically defined whenever sage starts or the doctest environment resets. I would much rather see us begin them all with `x = SR.var("x")` so that they're truly copy/paste-able, but I expect I'd be pelted with tomatoes if I proposed it.



---

archive/issue_comments_537665.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@orlitzky](#comment:5):\n> In gh-umedoblock's defense, our examples *do* rely on some implicit magic, the symbolic variable `x` being automatically defined whenever sage starts or the doctest environment resets. I would much rather see us begin them all with `x = SR.var(\"x\")` so that they're truly copy/paste-able [...]\n\nHuge +1 from me.",
    "created_at": "2022-02-02T19:25:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537665",
    "user": "https://github.com/slel"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@orlitzky](#comment:5):
> In gh-umedoblock's defense, our examples *do* rely on some implicit magic, the symbolic variable `x` being automatically defined whenever sage starts or the doctest environment resets. I would much rather see us begin them all with `x = SR.var("x")` so that they're truly copy/paste-able [...]

Huge +1 from me.



---

archive/issue_comments_537666.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIt looks like maybe there's a reason to propose this that won't make me look like a busybody: #32721",
    "created_at": "2022-02-02T19:27:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537666",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:7" align="right">comment:7</div>

It looks like maybe there's a reason to propose this that won't make me look like a busybody: #32721



---

archive/issue_comments_537667.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nDo you irritate me ?\n\nSorry.\n\nI insert `reset('x')` under `MyAnimation()`\n\nAnd `animate()` doesn't raise `TypeError`.\n\nSo please insert `reset('x')` under `MyAnimation()`.\n\n```\nfrom sage.plot.animate import Animation\nclass MyAnimation(Animation):\n    def make_image(self, frame, filename, **kwds):\n        P = parametric_plot(frame[0], frame[1], **frame[2])\n        P.save_image(filename,**kwds)\n\nt = var('t')\nx = lambda t: cos(t)\ny = lambda n,t: sin(t)/n\nB = MyAnimation([([x(t), y(i+1,t)],(t,0,1), {'color':Color((1,0,i/4)), 'aspect_ratio':1, 'ymax':1}) for i in range(4)])\n\nvvvvvvvvvv\nreset('x')\n^^^^^^^^^^\n\nd = B.png(); v = os.listdir(d); v.sort(); v  # long time\nB.show()  # not tested\n\na = animate([plot(x^2 + n) for n in range(4)], ymin=0, ymax=4)\nd = a.png(); v = os.listdir(d); v.sort(); v  # long time\n```",
    "created_at": "2022-02-02T20:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537667",
    "user": "https://github.com/umedoblock"
}
```

<div id="comment:8" align="right">comment:8</div>

Do you irritate me ?

Sorry.

I insert `reset('x')` under `MyAnimation()`

And `animate()` doesn't raise `TypeError`.

So please insert `reset('x')` under `MyAnimation()`.

```
from sage.plot.animate import Animation
class MyAnimation(Animation):
    def make_image(self, frame, filename, **kwds):
        P = parametric_plot(frame[0], frame[1], **frame[2])
        P.save_image(filename,**kwds)

t = var('t')
x = lambda t: cos(t)
y = lambda n,t: sin(t)/n
B = MyAnimation([([x(t), y(i+1,t)],(t,0,1), {'color':Color((1,0,i/4)), 'aspect_ratio':1, 'ymax':1}) for i in range(4)])

vvvvvvvvvv
reset('x')
^^^^^^^^^^

d = B.png(); v = os.listdir(d); v.sort(); v  # long time
B.show()  # not tested

a = animate([plot(x^2 + n) for n in range(4)], ymin=0, ymax=4)
d = a.png(); v = os.listdir(d); v.sort(); v  # long time
```



---

archive/issue_comments_537668.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nInstead of `reset('x')`, you can also use `x = SR.var('x')`.\n\nI agree many documentation examples would be improved\nif they started with that.",
    "created_at": "2022-02-02T21:51:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537668",
    "user": "https://github.com/slel"
}
```

<div id="comment:9" align="right">comment:9</div>

Instead of `reset('x')`, you can also use `x = SR.var('x')`.

I agree many documentation examples would be improved
if they started with that.



---

archive/issue_events_454258.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-02-02T21:51:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454258"
}
```



---

archive/issue_events_454259.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-02-02T21:51:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454259"
}
```



---

archive/issue_events_454260.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-02-02T21:51:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454260"
}
```



---

archive/issue_comments_537669.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nImproved.\n\nAnd works it.\n\nThanks slelieve and mjo.\n\n```\nfrom sage.plot.animate import Animation\nclass MyAnimation(Animation):\n    def make_image(self, frame, filename, **kwds):\n        P = parametric_plot(frame[0], frame[1], **frame[2])\n        P.save_image(filename,**kwds)\n\nt = var('t')\nx = lambda t: cos(t)\ny = lambda n,t: sin(t)/n\nB = MyAnimation([([x(t), y(i+1,t)],(t,0,1), {'color':Color((1,0,i/4)), 'aspect_ratio':1, 'ymax':1}) for i in range(4)])\n\nvvvvvvvvvvvvvvv\nx = SR.var('x')\n^^^^^^^^^^^^^^^\n\nd = B.png(); v = os.listdir(d); v.sort(); v  # long time\nB.show()  # not tested\n\na = animate([plot(x^2 + n) for n in range(4)], ymin=0, ymax=4)\nd = a.png(); v = os.listdir(d); v.sort(); v  # long time\n```",
    "created_at": "2022-02-03T04:52:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537669",
    "user": "https://github.com/umedoblock"
}
```

<div id="comment:10" align="right">comment:10</div>

Improved.

And works it.

Thanks slelieve and mjo.

```
from sage.plot.animate import Animation
class MyAnimation(Animation):
    def make_image(self, frame, filename, **kwds):
        P = parametric_plot(frame[0], frame[1], **frame[2])
        P.save_image(filename,**kwds)

t = var('t')
x = lambda t: cos(t)
y = lambda n,t: sin(t)/n
B = MyAnimation([([x(t), y(i+1,t)],(t,0,1), {'color':Color((1,0,i/4)), 'aspect_ratio':1, 'ymax':1}) for i in range(4)])

vvvvvvvvvvvvvvv
x = SR.var('x')
^^^^^^^^^^^^^^^

d = B.png(); v = os.listdir(d); v.sort(); v  # long time
B.show()  # not tested

a = animate([plot(x^2 + n) for n in range(4)], ymin=0, ymax=4)
d = a.png(); v = os.listdir(d); v.sort(); v  # long time
```



---

archive/issue_comments_537670.json:
```json
{
    "body": "Commit: **[`e73cd12`](https://github.com/sagemath/sagetrac-mirror/commit/e73cd12435a21f22f440bd21fff270361a1ac890)**",
    "created_at": "2022-02-03T13:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537670",
    "user": "https://github.com/orlitzky"
}
```

Commit: **[`e73cd12`](https://github.com/sagemath/sagetrac-mirror/commit/e73cd12435a21f22f440bd21fff270361a1ac890)**



---

archive/issue_comments_537671.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nOne down, a million to go.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e73cd12435a21f22f440bd21fff270361a1ac890\"><code>e73cd12</code></a></td><td><code>Trac #33264: add \"x = SR.var('x')\" to several animation examples.</code></td></tr></table>\n",
    "created_at": "2022-02-03T13:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537671",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:11" align="right">comment:11</div>

One down, a million to go.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e73cd12435a21f22f440bd21fff270361a1ac890"><code>e73cd12</code></a></td><td><code>Trac #33264: add "x = SR.var('x')" to several animation examples.</code></td></tr></table>




---

archive/issue_comments_537672.json:
```json
{
    "body": "Branch: **[u/mjo/ticket/33264](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/33264)**",
    "created_at": "2022-02-03T13:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537672",
    "user": "https://github.com/orlitzky"
}
```

Branch: **[u/mjo/ticket/33264](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/33264)**



---

archive/issue_comments_537673.json:
```json
{
    "body": "Author: **Michael Orlitzky**",
    "created_at": "2022-02-03T13:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537673",
    "user": "https://github.com/orlitzky"
}
```

Author: **Michael Orlitzky**



---

archive/issue_events_454261.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2022-02-03T13:55:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454261"
}
```



---

archive/issue_events_454262.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2022-02-03T13:55:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454262"
}
```



---

archive/issue_comments_537674.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,80 +1,63 @@\n-# I tried to run all of the EXAMPLE in [Animated plots](https://doc.sagemath.org/html/en/reference/plotting/sage/plot/animate.html)\n+The animated plots examples in the documentation at\n \n-## environment\n+- https://doc.sagemath.org/html/en/reference/plotting/sage/plot/animate.html\n+\n+include an example where `x = lambda t: cos(t)`\n+and `y = ...` are used for a parametric plot.\n+\n+Subsequent examples fail with a type error\n+if run without resetting `x` to its default value,\n+either with `reset('x')` or with `x = SR.var('x')`.\n \n ```\n-macOS Monterey\n-Version 12.1\n-```\n-\n-```\n-\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n-\u2502 SageMath version 9.5.rc2, Release Date: 2022-01-16                 \u2502\n-\u2502 Using Python 3.9.9. Type \"help()\" for help.                        \u2502\n-\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n-\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n-\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n-\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n-```\n-\n-# Some TypeError occurred after run below EXAMPLES:\n-\n-## TypeError1\n-\n-```\n-sage: sage: sage: a = animate([plot(x^2 + n) for n in range(4)], ymin=0, ymax=4)\n-....:   \n-....:                                                                           \n+sage: a = animate([plot(x^2 + n) for n in range(4)], ymin=0, ymax=4)\n ---------------------------------------------------------------------------\n TypeError                                 Traceback (most recent call last)\n-<ipython-input-46-05cc8220246d> in <module>\n-----> 1 a = animate([plot(x**Integer(2) + n) for n in range(Integer(4))], ymin=Integer(0), ymax=Integer(4))\n+<ipython-input-...-...> in <module>\n+----> 1 a = animate([plot(x**Integer(2) + n) for n in ...], ymin=..., ymax=...)\n \n-<ipython-input-46-05cc8220246d> in <listcomp>(.0)\n-----> 1 a = animate([plot(x**Integer(2) + n) for n in range(Integer(4))], ymin=Integer(0), ymax=Integer(4))\n+<ipython-input-...-...> in <listcomp>(.0)\n+----> 1 a = animate([plot(x**Integer(2) + n) for n in ...], ymin=..., ymax=...)\n \n-/private/var/tmp/sage-9.5-current/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/rings/integer.pyx in sage.rings.integer.Integer.__pow__ (build/cythonized/sage/rings/integer.c:14496)()\n+.../site-packages/sage/rings/integer.pyx in sage.rings.integer.Integer.__pow__ (build/cythonized/sage/rings/integer.c:14496)()\n    2153             return coercion_model.bin_op(left, right, operator.pow)\n    2154         # left is a non-Element: do the powering with a Python int\n -> 2155         return left ** int(right)\n-   2156 \n+   2156\n    2157     cpdef _pow_(self, other):\n \n TypeError: unsupported operand type(s) for ** or pow(): 'function' and 'int'\n ```\n \n-## TypeError2\n-\n ```\n-sage: sage: a = animate([sin(x + float(k)) for k in srange(0,2*pi,0.7)], \n-....: ....:             xmin=0, xmax=2*pi, ymin=-1, ymax=1, figsize=[2,1])      \n+sage: a = animate([sin(x + float(k)) for k in srange(0,2*pi,0.7)],\n+....:             xmin=0, xmax=2*pi, ymin=-1, ymax=1, figsize=[2,1])\n ---------------------------------------------------------------------------\n TypeError                                 Traceback (most recent call last)\n-<ipython-input-41-d043bfa4db4e> in <module>\n-----> 1 a = animate([sin(x + float(k)) for k in srange(Integer(0),Integer(2)*pi,RealNumber('0.7'))],\n-      2             xmin=Integer(0), xmax=Integer(2)*pi, ymin=-Integer(1), ymax=Integer(1), figsize=[Integer(2),Integer(1)])\n+<ipython-input-...> in <module>\n+----> 1 a = animate([sin(x + float(k)) for ...],\n+      2             xmin=..., xmax=..., ymin=..., ymax=..., figsize=...)\n \n-<ipython-input-41-d043bfa4db4e> in <listcomp>(.0)\n-----> 1 a = animate([sin(x + float(k)) for k in srange(Integer(0),Integer(2)*pi,RealNumber('0.7'))],\n-      2             xmin=Integer(0), xmax=Integer(2)*pi, ymin=-Integer(1), ymax=Integer(1), figsize=[Integer(2),Integer(1)])\n+<ipython-input-...> in <listcomp>(.0)\n+----> 1 a = animate([sin(x + float(k)) for ...],\n+      2             xmin=..., xmax=..., ymin=..., ymax=..., figsize=...)\n \n TypeError: unsupported operand type(s) for +: 'function' and 'float'\n ```\n \n-## TypeError3\n-\n ```\n-sage: sage: a = animate([sin(x + float(k)) for k in srange(0,2*pi,0.7)], \n-....: ....:                xmin=0, xmax=2*pi, figsize=[2,1])                    \n+sage: a = animate([sin(x + float(k)) for k in srange(0,2*pi,0.7)],\n+....:                xmin=0, xmax=2*pi, figsize=[2,1])\n+....:\n ---------------------------------------------------------------------------\n TypeError                                 Traceback (most recent call last)\n-<ipython-input-44-65f74ffcfd6c> in <module>\n-----> 1 a = animate([sin(x + float(k)) for k in srange(Integer(0),Integer(2)*pi,RealNumber('0.7'))],\n-      2                xmin=Integer(0), xmax=Integer(2)*pi, figsize=[Integer(2),Integer(1)])\n+<ipython-input-...> in <module>\n+----> 1 a = animate([sin(x + float(k)) for ...],\n+      2                xmin=..., xmax=..., figsize=...)\n \n-<ipython-input-44-65f74ffcfd6c> in <listcomp>(.0)\n-----> 1 a = animate([sin(x + float(k)) for k in srange(Integer(0),Integer(2)*pi,RealNumber('0.7'))],\n-      2                xmin=Integer(0), xmax=Integer(2)*pi, figsize=[Integer(2),Integer(1)])\n+<ipython-input-...> in <listcomp>(.0)\n+----> 1 a = animate([sin(x + float(k)) for ...],\n+      2                xmin=..., xmax=..., figsize=...)\n \n TypeError: unsupported operand type(s) for +: 'function' and 'float'\n ```\n``````\n",
    "created_at": "2022-02-04T00:32:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537674",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,80 +1,63 @@
-# I tried to run all of the EXAMPLE in [Animated plots](https://doc.sagemath.org/html/en/reference/plotting/sage/plot/animate.html)
+The animated plots examples in the documentation at
 
-## environment
+- https://doc.sagemath.org/html/en/reference/plotting/sage/plot/animate.html
+
+include an example where `x = lambda t: cos(t)`
+and `y = ...` are used for a parametric plot.
+
+Subsequent examples fail with a type error
+if run without resetting `x` to its default value,
+either with `reset('x')` or with `x = SR.var('x')`.
 
 ```
-macOS Monterey
-Version 12.1
-```
-
-```
-‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
-‚îÇ SageMath version 9.5.rc2, Release Date: 2022-01-16                 ‚îÇ
-‚îÇ Using Python 3.9.9. Type "help()" for help.                        ‚îÇ
-‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
-‚îè‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì
-‚îÉ Warning: this is a prerelease version, and it may be unstable.     ‚îÉ
-‚îó‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îõ
-```
-
-# Some TypeError occurred after run below EXAMPLES:
-
-## TypeError1
-
-```
-sage: sage: sage: a = animate([plot(x^2 + n) for n in range(4)], ymin=0, ymax=4)
-....:   
-....:                                                                           
+sage: a = animate([plot(x^2 + n) for n in range(4)], ymin=0, ymax=4)
 ---------------------------------------------------------------------------
 TypeError                                 Traceback (most recent call last)
-<ipython-input-46-05cc8220246d> in <module>
-----> 1 a = animate([plot(x**Integer(2) + n) for n in range(Integer(4))], ymin=Integer(0), ymax=Integer(4))
+<ipython-input-...-...> in <module>
+----> 1 a = animate([plot(x**Integer(2) + n) for n in ...], ymin=..., ymax=...)
 
-<ipython-input-46-05cc8220246d> in <listcomp>(.0)
-----> 1 a = animate([plot(x**Integer(2) + n) for n in range(Integer(4))], ymin=Integer(0), ymax=Integer(4))
+<ipython-input-...-...> in <listcomp>(.0)
+----> 1 a = animate([plot(x**Integer(2) + n) for n in ...], ymin=..., ymax=...)
 
-/private/var/tmp/sage-9.5-current/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/rings/integer.pyx in sage.rings.integer.Integer.__pow__ (build/cythonized/sage/rings/integer.c:14496)()
+.../site-packages/sage/rings/integer.pyx in sage.rings.integer.Integer.__pow__ (build/cythonized/sage/rings/integer.c:14496)()
    2153             return coercion_model.bin_op(left, right, operator.pow)
    2154         # left is a non-Element: do the powering with a Python int
 -> 2155         return left ** int(right)
-   2156 
+   2156
    2157     cpdef _pow_(self, other):
 
 TypeError: unsupported operand type(s) for ** or pow(): 'function' and 'int'
 ```
 
-## TypeError2
-
 ```
-sage: sage: a = animate([sin(x + float(k)) for k in srange(0,2*pi,0.7)], 
-....: ....:             xmin=0, xmax=2*pi, ymin=-1, ymax=1, figsize=[2,1])      
+sage: a = animate([sin(x + float(k)) for k in srange(0,2*pi,0.7)],
+....:             xmin=0, xmax=2*pi, ymin=-1, ymax=1, figsize=[2,1])
 ---------------------------------------------------------------------------
 TypeError                                 Traceback (most recent call last)
-<ipython-input-41-d043bfa4db4e> in <module>
-----> 1 a = animate([sin(x + float(k)) for k in srange(Integer(0),Integer(2)*pi,RealNumber('0.7'))],
-      2             xmin=Integer(0), xmax=Integer(2)*pi, ymin=-Integer(1), ymax=Integer(1), figsize=[Integer(2),Integer(1)])
+<ipython-input-...> in <module>
+----> 1 a = animate([sin(x + float(k)) for ...],
+      2             xmin=..., xmax=..., ymin=..., ymax=..., figsize=...)
 
-<ipython-input-41-d043bfa4db4e> in <listcomp>(.0)
-----> 1 a = animate([sin(x + float(k)) for k in srange(Integer(0),Integer(2)*pi,RealNumber('0.7'))],
-      2             xmin=Integer(0), xmax=Integer(2)*pi, ymin=-Integer(1), ymax=Integer(1), figsize=[Integer(2),Integer(1)])
+<ipython-input-...> in <listcomp>(.0)
+----> 1 a = animate([sin(x + float(k)) for ...],
+      2             xmin=..., xmax=..., ymin=..., ymax=..., figsize=...)
 
 TypeError: unsupported operand type(s) for +: 'function' and 'float'
 ```
 
-## TypeError3
-
 ```
-sage: sage: a = animate([sin(x + float(k)) for k in srange(0,2*pi,0.7)], 
-....: ....:                xmin=0, xmax=2*pi, figsize=[2,1])                    
+sage: a = animate([sin(x + float(k)) for k in srange(0,2*pi,0.7)],
+....:                xmin=0, xmax=2*pi, figsize=[2,1])
+....:
 ---------------------------------------------------------------------------
 TypeError                                 Traceback (most recent call last)
-<ipython-input-44-65f74ffcfd6c> in <module>
-----> 1 a = animate([sin(x + float(k)) for k in srange(Integer(0),Integer(2)*pi,RealNumber('0.7'))],
-      2                xmin=Integer(0), xmax=Integer(2)*pi, figsize=[Integer(2),Integer(1)])
+<ipython-input-...> in <module>
+----> 1 a = animate([sin(x + float(k)) for ...],
+      2                xmin=..., xmax=..., figsize=...)
 
-<ipython-input-44-65f74ffcfd6c> in <listcomp>(.0)
-----> 1 a = animate([sin(x + float(k)) for k in srange(Integer(0),Integer(2)*pi,RealNumber('0.7'))],
-      2                xmin=Integer(0), xmax=Integer(2)*pi, figsize=[Integer(2),Integer(1)])
+<ipython-input-...> in <listcomp>(.0)
+----> 1 a = animate([sin(x + float(k)) for ...],
+      2                xmin=..., xmax=..., figsize=...)
 
 TypeError: unsupported operand type(s) for +: 'function' and 'float'
 ```
``````




---

archive/issue_events_454263.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-02-04T00:32:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454263"
}
```



---

archive/issue_events_454264.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-02-04T00:32:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454264"
}
```



---

archive/issue_comments_537675.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThat will help!",
    "created_at": "2022-02-04T00:32:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537675",
    "user": "https://github.com/slel"
}
```

<div id="comment:13" align="right">comment:13</div>

That will help!



---

archive/issue_comments_537676.json:
```json
{
    "body": "Reviewer: **Samuel Leli\u00e8vre**",
    "created_at": "2022-02-04T00:32:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537676",
    "user": "https://github.com/slel"
}
```

Reviewer: **Samuel Leli√®vre**



---

archive/issue_events_454265.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-02-04T00:53:51Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "title_is": "Define `x` as symbolic variable in many `animate` examples",
    "title_was": "some TypeError occurred in animate()",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454265"
}
```



---

archive/issue_comments_537677.json:
```json
{
    "body": "Changed keywords from none to **SR.var('x')**",
    "created_at": "2022-02-04T00:53:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537677",
    "user": "https://github.com/slel"
}
```

Changed keywords from none to **SR.var('x')**



---

archive/issue_comments_537678.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n include an example where `x = lambda t: cos(t)`\n and `y = ...` are used for a parametric plot.\n \n-Subsequent examples fail with a type error\n+Many subsequent examples fail with a type error\n if run without resetting `x` to its default value,\n either with `reset('x')` or with `x = SR.var('x')`.\n \n``````\n",
    "created_at": "2022-02-04T00:53:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537678",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 include an example where `x = lambda t: cos(t)`
 and `y = ...` are used for a parametric plot.
 
-Subsequent examples fail with a type error
+Many subsequent examples fail with a type error
 if run without resetting `x` to its default value,
 either with `reset('x')` or with `x = SR.var('x')`.
 
``````




---

archive/issue_events_454266.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-16T23:57:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454266"
}
```



---

archive/issue_events_454267.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "2e1f8d27ec4e23d1d62e38fd4e963024b4055c99",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-02-16T23:57:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33264#event-454267"
}
```



---

archive/issue_comments_537679.json:
```json
{
    "body": "Changed branch from **[u/mjo/ticket/33264](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/33264)** to **[`e73cd12`](https://github.com/sagemath/sagetrac-mirror/commit/e73cd12435a21f22f440bd21fff270361a1ac890)**",
    "created_at": "2022-02-16T23:57:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33264#issuecomment-537679",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mjo/ticket/33264](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/33264)** to **[`e73cd12`](https://github.com/sagemath/sagetrac-mirror/commit/e73cd12435a21f22f440bd21fff270361a1ac890)**
