# Issue 33134: doctest failure in hilbert_poincare_series with singular 4.2.1

archive/issues_032897.json:
```json
{
    "assignees": [],
    "body": "This was found on 9.5-rc0, using singular 4.2.1 from system (void linux, we haven't upgraded to 4.2.1p3 yet). In case this is relevant, flint is up to date (2.8.4). I wasn't able to reproduce on 9.5-beta9.\n\n```\nsage -t --long --random-seed=136266901849903582203467517333467427001 src/sage/rings/polynomial/hilbert.pyx\n**********************************************************************\nFile \"src/sage/rings/polynomial/hilbert.pyx\", line 581, in sage.rings.polynomial.hilbert.hilbert_poincare_series\nFailed example:\n    J.hilbert_numerator(algorithm='singular')\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/lib/sage-9.5.rc0/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/lib/sage-9.5.rc0/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.polynomial.hilbert.hilbert_poincare_series[11]>\", line 1, in <module>\n        J.hilbert_numerator(algorithm='singular')\n      File \"/usr/lib/sage-9.5.rc0/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py\", line 297, in __call__\n        return self.f(self._instance, *args, **kwds)\n      File \"/usr/lib/sage-9.5.rc0/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/sage/rings/qqbar_decorators.py\", line 96, in wrapper\n        return func(*args, **kwds)\n      File \"/usr/lib/sage-9.5.rc0/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py\", line 2900, in hilbert_numerator\n        hs = hilb(gb, 1, attributes={gb: {'isSB': 1}})\n      File \"sage/libs/singular/function.pyx\", line 1334, in sage.libs.singular.function.SingularFunction.__call__ (build/cythonized/sage/libs/singular/function.cpp:15222)\n        return call_function(self, args, ring, interruptible, attributes)\n      File \"sage/libs/singular/function.pyx\", line 1532, in sage.libs.singular.function.call_function (build/cythonized/sage/libs/singular/function.cpp:17224)\n        raise RuntimeError(\"error in Singular function call %r:\\n%s\" %\n    RuntimeError: error in Singular function call 'hilb':\n    int overflow in hilb 1\n**********************************************************************\n1 item had failures:\n   1 of  13 in sage.rings.polynomial.hilbert.hilbert_poincare_series\n    [25 tests, 1 failure, 0.22 s]\n----------------------------------------------------------------------\n```\n\nDepends on #33160\n\nCC:  @dkwo @antonio-rojas @orlitzky @simon-king-jena\n\nBranch/Commit: **[u/dimpase/ticket/33134](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/ticket/33134) @ [`83af1a8`](https://github.com/sagemath/sagetrac-mirror/commit/83af1a834990144156faf04325945f4c59851d48)**\n\nReviewer: **Dima Pasechnik**\n\nComponent: **build: configure**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33134_\n\n",
    "closed_at": "2022-07-29T09:03:11Z",
    "created_at": "2022-01-09T19:01:27Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/duplicate"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "doctest failure in hilbert_poincare_series with singular 4.2.1",
    "type": "issue",
    "updated_at": "2022-07-29T09:03:11Z",
    "url": "https://github.com/sagemath/sage/issues/33134",
    "user": "https://github.com/tornaria"
}
```
This was found on 9.5-rc0, using singular 4.2.1 from system (void linux, we haven't upgraded to 4.2.1p3 yet). In case this is relevant, flint is up to date (2.8.4). I wasn't able to reproduce on 9.5-beta9.

```
sage -t --long --random-seed=136266901849903582203467517333467427001 src/sage/rings/polynomial/hilbert.pyx
**********************************************************************
File "src/sage/rings/polynomial/hilbert.pyx", line 581, in sage.rings.polynomial.hilbert.hilbert_poincare_series
Failed example:
    J.hilbert_numerator(algorithm='singular')
Exception raised:
    Traceback (most recent call last):
      File "/usr/lib/sage-9.5.rc0/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/lib/sage-9.5.rc0/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.polynomial.hilbert.hilbert_poincare_series[11]>", line 1, in <module>
        J.hilbert_numerator(algorithm='singular')
      File "/usr/lib/sage-9.5.rc0/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py", line 297, in __call__
        return self.f(self._instance, *args, **kwds)
      File "/usr/lib/sage-9.5.rc0/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/sage/rings/qqbar_decorators.py", line 96, in wrapper
        return func(*args, **kwds)
      File "/usr/lib/sage-9.5.rc0/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py", line 2900, in hilbert_numerator
        hs = hilb(gb, 1, attributes={gb: {'isSB': 1}})
      File "sage/libs/singular/function.pyx", line 1334, in sage.libs.singular.function.SingularFunction.__call__ (build/cythonized/sage/libs/singular/function.cpp:15222)
        return call_function(self, args, ring, interruptible, attributes)
      File "sage/libs/singular/function.pyx", line 1532, in sage.libs.singular.function.call_function (build/cythonized/sage/libs/singular/function.cpp:17224)
        raise RuntimeError("error in Singular function call %r:\n%s" %
    RuntimeError: error in Singular function call 'hilb':
    int overflow in hilb 1
**********************************************************************
1 item had failures:
   1 of  13 in sage.rings.polynomial.hilbert.hilbert_poincare_series
    [25 tests, 1 failure, 0.22 s]
----------------------------------------------------------------------
```

Depends on #33160

CC:  @dkwo @antonio-rojas @orlitzky @simon-king-jena

Branch/Commit: **[u/dimpase/ticket/33134](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/ticket/33134) @ [`83af1a8`](https://github.com/sagemath/sagetrac-mirror/commit/83af1a834990144156faf04325945f4c59851d48)**

Reviewer: **Dima Pasechnik**

Component: **build: configure**

_Issue created by migration from https://trac.sagemath.org/ticket/33134_





---

archive/issue_events_455921.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2022-01-09T19:01:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455921"
}
```



---

archive/issue_events_455922.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2022-01-09T19:01:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455922"
}
```



---

archive/issue_events_455923.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2022-01-09T19:01:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455923"
}
```



---

archive/issue_events_455924.json:
```json
{
    "actor": "https://github.com/tornaria",
    "created_at": "2022-01-09T21:40:09Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "title_is": "doctest failure in hilbert_poincare_series with singular 4.2.1",
    "title_was": "random error in hilbert_poincare_series",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455924"
}
```



---

archive/issue_comments_535482.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThis doctest was changed in [720d10e](https://github.com/sagemath/sagetrac-mirror/commit/720d10e8a7f7d2bf4038b65c64e73db494106a57), so I guess (a) this is not random at all (b) we need to update singular in void linux.",
    "created_at": "2022-01-09T21:40:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535482",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:1" align="right">comment:1</div>

This doctest was changed in [720d10e](https://github.com/sagemath/sagetrac-mirror/commit/720d10e8a7f7d2bf4038b65c64e73db494106a57), so I guess (a) this is not random at all (b) we need to update singular in void linux.



---

archive/issue_comments_535483.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\n@antonio-rojas: I wonder if we should change/remove this doctest, or else require singular >= 4.2.1p2?\n\nEdit: I meant 4.2.1p2",
    "created_at": "2022-01-09T21:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535483",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:2" align="right">comment:2</div>

@antonio-rojas: I wonder if we should change/remove this doctest, or else require singular >= 4.2.1p2?

Edit: I meant 4.2.1p2



---

archive/issue_events_455925.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-09T21:44:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
    "label_color": "000080",
    "label_name": "c: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455925"
}
```



---

archive/issue_comments_535484.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nSee also #32789",
    "created_at": "2022-01-09T21:45:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535484",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

See also #32789



---

archive/issue_comments_535485.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@tornaria](#comment:2):\n> @antonio-rojas: I wonder if we should change/remove this doctest, or else require singular >= 4.2.1p2?\n> \n> Edit: I meant 4.2.1p2\n\nThat's what I already asked in [#32907 comment:18](https://github.com/sagemath/sage/issues/32907#comment:18)",
    "created_at": "2022-01-09T21:56:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535485",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@tornaria](#comment:2):
> @antonio-rojas: I wonder if we should change/remove this doctest, or else require singular >= 4.2.1p2?
> 
> Edit: I meant 4.2.1p2

That's what I already asked in [#32907 comment:18](https://github.com/sagemath/sage/issues/32907#comment:18)



---

archive/issue_comments_535486.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIs this the only failing test with 4.2.1? Either way, I think we should change the tests to pass with >=singular-4.2.1, for two reasons. First, v4.2.1 is not that old, and it's polite to give distros some time to catch up. Second, testing for \"patchlevel 2 or higher\" is a pain in the ass because it doesn't show up in the pkg-config file.",
    "created_at": "2022-01-09T22:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535486",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:6" align="right">comment:6</div>

Is this the only failing test with 4.2.1? Either way, I think we should change the tests to pass with >=singular-4.2.1, for two reasons. First, v4.2.1 is not that old, and it's polite to give distros some time to catch up. Second, testing for "patchlevel 2 or higher" is a pain in the ass because it doesn't show up in the pkg-config file.



---

archive/issue_comments_535487.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIt's going to take me a while to build rc0, but something like this should do the trick:\n\n```\n    This example exceeded the capabilities of Singular before version 4.2.1p2:: \n                                                                                \n        sage: expected = (120*t^33 - 3465*t^32 + 48180*t^31 - 429374*t^30       \n        ....:             + 2753520*t^29 - 13522410*t^28 + 52832780*t^27        \n        ....:             - 168384150*t^26 + 445188744*t^25 - 987193350*t^24    \n        ....:             + 1847488500*t^23 + 1372406746*t^22 - 403422496*t^21  \n        ....:             - 8403314*t^20 - 471656596*t^19 + 1806623746*t^18     \n        ....:             + 752776200*t^17 + 752776200*t^16 - 1580830020*t^15   \n        ....:             + 1673936550*t^14 - 1294246800*t^13 + 786893250*t^12  \n        ....:             - 382391100*t^11 + 146679390*t^10 - 42299400*t^9      \n        ....:             + 7837830*t^8 - 172260*t^7 - 468930*t^6 + 183744*t^5  \n        ....:             - 39270*t^4 + 5060*t^3 - 330*t^2 + 1)                 \n        ....: actual = None                                                     \n        sage: try:                                                              \n        ....:     actual = J.hilbert_numerator(algorithm='singular')            \n        ....: except RuntimeError:                                              \n        ....:     pass                                                          \n        ....: actual is None or (actual == expected)                            \n        True                                                                    \n```",
    "created_at": "2022-01-09T22:23:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535487",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:7" align="right">comment:7</div>

It's going to take me a while to build rc0, but something like this should do the trick:

```
    This example exceeded the capabilities of Singular before version 4.2.1p2:: 
                                                                                
        sage: expected = (120*t^33 - 3465*t^32 + 48180*t^31 - 429374*t^30       
        ....:             + 2753520*t^29 - 13522410*t^28 + 52832780*t^27        
        ....:             - 168384150*t^26 + 445188744*t^25 - 987193350*t^24    
        ....:             + 1847488500*t^23 + 1372406746*t^22 - 403422496*t^21  
        ....:             - 8403314*t^20 - 471656596*t^19 + 1806623746*t^18     
        ....:             + 752776200*t^17 + 752776200*t^16 - 1580830020*t^15   
        ....:             + 1673936550*t^14 - 1294246800*t^13 + 786893250*t^12  
        ....:             - 382391100*t^11 + 146679390*t^10 - 42299400*t^9      
        ....:             + 7837830*t^8 - 172260*t^7 - 468930*t^6 + 183744*t^5  
        ....:             - 39270*t^4 + 5060*t^3 - 330*t^2 + 1)                 
        ....: actual = None                                                     
        sage: try:                                                              
        ....:     actual = J.hilbert_numerator(algorithm='singular')            
        ....: except RuntimeError:                                              
        ....:     pass                                                          
        ....: actual is None or (actual == expected)                            
        True                                                                    
```



---

archive/issue_comments_535488.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@orlitzky](#comment:6):\n> Is this the only failing test with 4.2.1? Either way, I think we should change the tests to pass with >=singular-4.2.1, for two reasons. First, v4.2.1 is not that old, and it's polite to give distros some time to catch up. Second, testing for \"patchlevel 2 or higher\" is a pain in the ass because it doesn't show up in the pkg-config file.\n\nYes, this is the only failing test for me.\n\nI'm not sure what's the purpose of this example/test. It seems to me the simplest thing is to tag it as \"# not tested - requires singular >=4.2.1p2\".",
    "created_at": "2022-01-10T03:02:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535488",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@orlitzky](#comment:6):
> Is this the only failing test with 4.2.1? Either way, I think we should change the tests to pass with >=singular-4.2.1, for two reasons. First, v4.2.1 is not that old, and it's polite to give distros some time to catch up. Second, testing for "patchlevel 2 or higher" is a pain in the ass because it doesn't show up in the pkg-config file.

Yes, this is the only failing test for me.

I'm not sure what's the purpose of this example/test. It seems to me the simplest thing is to tag it as "# not tested - requires singular >=4.2.1p2".



---

archive/issue_comments_535489.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nWell, something else is going on. With 4.2.1p3...\n\n```\nsage: n=4; m=11; P = PolynomialRing(QQ,n*m,\"x\")\nsage: x = P.gens(); M = Matrix(n,x)\nsage: I = P.ideal(M.minors(2))\nsage: J = P*[m.lm() for m in I.groebner_basis()]\nsage: expected = J.hilbert_numerator()\nsage: actual = J.hilbert_numerator(algorithm='singular')\nsage: actual == expected\nFalse\nsage: actual - expected\n4294967296*t^22 - 4294967296*t^21 + 4294967296*t^20 - 4294967296*t^19 + 4294967296*t^18\n```",
    "created_at": "2022-01-10T11:41:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535489",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:9" align="right">comment:9</div>

Well, something else is going on. With 4.2.1p3...

```
sage: n=4; m=11; P = PolynomialRing(QQ,n*m,"x")
sage: x = P.gens(); M = Matrix(n,x)
sage: I = P.ideal(M.minors(2))
sage: J = P*[m.lm() for m in I.groebner_basis()]
sage: expected = J.hilbert_numerator()
sage: actual = J.hilbert_numerator(algorithm='singular')
sage: actual == expected
False
sage: actual - expected
4294967296*t^22 - 4294967296*t^21 + 4294967296*t^20 - 4294967296*t^19 + 4294967296*t^18
```



---

archive/issue_comments_535490.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nSimon, we should be expecting the Hilbert numerators to be the same with both algorithm=sage and algorithm=singular, right?",
    "created_at": "2022-01-10T11:50:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535490",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:10" align="right">comment:10</div>

Simon, we should be expecting the Hilbert numerators to be the same with both algorithm=sage and algorithm=singular, right?



---

archive/issue_comments_535491.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWe updated to singular-4.3.0 (released wed) and everything passes now.",
    "created_at": "2022-01-14T17:51:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535491",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:11" align="right">comment:11</div>

We updated to singular-4.3.0 (released wed) and everything passes now.



---

archive/issue_comments_535492.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@tornaria](#comment:11):\n> We updated to singular-4.3.0 (released wed) and everything passes now.\n\nDo the \"sage\" and \"singular\" algorithms still produce different results (comment:9)? At this point I'm more worried that we've added a doctest for the wrong answer...",
    "created_at": "2022-01-14T17:59:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535492",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@tornaria](#comment:11):
> We updated to singular-4.3.0 (released wed) and everything passes now.

Do the "sage" and "singular" algorithms still produce different results (comment:9)? At this point I'm more worried that we've added a doctest for the wrong answer...



---

archive/issue_comments_535493.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@orlitzky](#comment:12):\n> Replying to [@tornaria](#comment:11):\n> > We updated to singular-4.3.0 (released wed) and everything passes now.\n\n> \n> Do the \"sage\" and \"singular\" algorithms still produce different results (comment:9)? At this point I'm more worried that we've added a doctest for the wrong answer...\n\nI'm getting the same as you. I couldn't help but notice that the difference is a multiple of `2^32`. In fact the coefficients we get from singular are just the truncation to `int32_t` of the ones we get from sage.\n\nMay be a bug in singular?",
    "created_at": "2022-01-14T18:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535493",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@orlitzky](#comment:12):
> Replying to [@tornaria](#comment:11):
> > We updated to singular-4.3.0 (released wed) and everything passes now.

> 
> Do the "sage" and "singular" algorithms still produce different results (comment:9)? At this point I'm more worried that we've added a doctest for the wrong answer...

I'm getting the same as you. I couldn't help but notice that the difference is a multiple of `2^32`. In fact the coefficients we get from singular are just the truncation to `int32_t` of the ones we get from sage.

May be a bug in singular?



---

archive/issue_comments_535494.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n.. or in the conversion from singular -> sage?",
    "created_at": "2022-01-14T18:37:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535494",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:14" align="right">comment:14</div>

.. or in the conversion from singular -> sage?



---

archive/issue_comments_535495.json:
```json
{
    "body": "Author: **Michael Orlitzky**",
    "created_at": "2022-01-15T03:19:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535495",
    "user": "https://github.com/orlitzky"
}
```

Author: **Michael Orlitzky**



---

archive/issue_comments_535496.json:
```json
{
    "body": "Branch: **[u/mjo/ticket/33134](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/33134)**",
    "created_at": "2022-01-15T03:19:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535496",
    "user": "https://github.com/orlitzky"
}
```

Branch: **[u/mjo/ticket/33134](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/33134)**



---

archive/issue_comments_535497.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI've opened #33178 to investigate the underlying problem since that will take more time. For now let's just get rid of the test.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7326adcff8ef603c91727f28adc3ef3be9fdb79b\">7326adc</a></td><td><code>Trac #33134: remove a failing doctest in sage.rings.polynomial.hilbert.</code></td></tr></table>\n",
    "created_at": "2022-01-15T03:19:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535497",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:15" align="right">comment:15</div>

I've opened #33178 to investigate the underlying problem since that will take more time. For now let's just get rid of the test.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7326adcff8ef603c91727f28adc3ef3be9fdb79b">7326adc</a></td><td><code>Trac #33134: remove a failing doctest in sage.rings.polynomial.hilbert.</code></td></tr></table>




---

archive/issue_events_455926.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2022-01-15T03:19:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455926"
}
```



---

archive/issue_events_455927.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2022-01-15T03:19:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455927"
}
```



---

archive/issue_comments_535498.json:
```json
{
    "body": "Commit: **[`7326adc`](https://github.com/sagemath/sagetrac-mirror/commit/7326adcff8ef603c91727f28adc3ef3be9fdb79b)**",
    "created_at": "2022-01-15T03:19:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535498",
    "user": "https://github.com/orlitzky"
}
```

Commit: **[`7326adc`](https://github.com/sagemath/sagetrac-mirror/commit/7326adcff8ef603c91727f28adc3ef3be9fdb79b)**



---

archive/issue_events_455928.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2022-01-15T03:19:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455928"
}
```



---

archive/issue_events_455929.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-01-30T15:44:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455929"
}
```



---

archive/issue_events_455930.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-01-30T15:44:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455930"
}
```



---

archive/issue_comments_535499.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nSet milestone to sage-9.6 after Sage 9.5 release.",
    "created_at": "2022-01-30T15:44:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535499",
    "user": "https://github.com/slel"
}
```

<div id="comment:16" align="right">comment:16</div>

Set milestone to sage-9.6 after Sage 9.5 release.



---

archive/issue_comments_535500.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nWouldn't it be better to mark it as `# known bug`?",
    "created_at": "2022-04-07T06:30:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535500",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">comment:17</div>

Wouldn't it be better to mark it as `# known bug`?



---

archive/issue_comments_535501.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@tscrim](#comment:17):\n> Wouldn't it be better to mark it as `# known bug`?\n\nWhile it *is* a known bug, I don't see what benefit there is to (temporarily) recording one of the many possible wrong answers in the sage source code. Once the bug is fixed in #33178, the test will be brought back with the correct answer and a meaningful explanation.",
    "created_at": "2022-04-07T12:07:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535501",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@tscrim](#comment:17):
> Wouldn't it be better to mark it as `# known bug`?

While it *is* a known bug, I don't see what benefit there is to (temporarily) recording one of the many possible wrong answers in the sage source code. Once the bug is fixed in #33178, the test will be brought back with the correct answer and a meaningful explanation.



---

archive/issue_comments_535502.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@orlitzky](#comment:18):\n> Replying to [@tscrim](#comment:17):\n> > Wouldn't it be better to mark it as `# known bug`?\n\n> \n> While it *is* a known bug, I don't see what benefit there is to (temporarily) recording one of the many possible wrong answers in the sage source code.\n\nWe should find what we believe to be the correct answer and record it there.\n\n> Once the bug is fixed in #33178, the test will be brought back with the correct answer and a meaningful explanation.\n\nFrom my experience, I would be skeptical of it reappearing. This doctest is testing something, but the answer doesn't necessarily reflect that. If we don't trust at least one way of generating the \"answer,\" then the other algorithm should have big warnings attached to it. One other option if we don't trust any output is to add some more information to the discussion before the doctest to warn the user IMO.",
    "created_at": "2022-04-08T08:25:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535502",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@orlitzky](#comment:18):
> Replying to [@tscrim](#comment:17):
> > Wouldn't it be better to mark it as `# known bug`?

> 
> While it *is* a known bug, I don't see what benefit there is to (temporarily) recording one of the many possible wrong answers in the sage source code.

We should find what we believe to be the correct answer and record it there.

> Once the bug is fixed in #33178, the test will be brought back with the correct answer and a meaningful explanation.

From my experience, I would be skeptical of it reappearing. This doctest is testing something, but the answer doesn't necessarily reflect that. If we don't trust at least one way of generating the "answer," then the other algorithm should have big warnings attached to it. One other option if we don't trust any output is to add some more information to the discussion before the doctest to warn the user IMO.



---

archive/issue_events_455931.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455931"
}
```



---

archive/issue_events_455932.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455932"
}
```



---

archive/issue_comments_535503.json:
```json
{
    "body": "Changed commit from **[`7326adc`](https://github.com/sagemath/sagetrac-mirror/commit/7326adcff8ef603c91727f28adc3ef3be9fdb79b)** to **[`1e06126`](https://github.com/sagemath/sagetrac-mirror/commit/1e0612611512c863d9667786caab2be38a83e137)**",
    "created_at": "2022-05-05T12:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535503",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7326adc`](https://github.com/sagemath/sagetrac-mirror/commit/7326adcff8ef603c91727f28adc3ef3be9fdb79b)** to **[`1e06126`](https://github.com/sagemath/sagetrac-mirror/commit/1e0612611512c863d9667786caab2be38a83e137)**



---

archive/issue_comments_535504.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f67929f233c7ed51cc65d2f4fa65733b8602328\">1f67929</a></td><td><code>Trac #33134: remove a failing doctest in sage.rings.polynomial.hilbert.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e0612611512c863d9667786caab2be38a83e137\">1e06126</a></td><td><code>Trac #33134: add random (disabled) test for hilbert_numerator() algorithms.</code></td></tr></table>\n",
    "created_at": "2022-05-05T12:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535504",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f67929f233c7ed51cc65d2f4fa65733b8602328">1f67929</a></td><td><code>Trac #33134: remove a failing doctest in sage.rings.polynomial.hilbert.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e0612611512c863d9667786caab2be38a83e137">1e06126</a></td><td><code>Trac #33134: add random (disabled) test for hilbert_numerator() algorithms.</code></td></tr></table>




---

archive/issue_comments_535505.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@tscrim](#comment:19):\n>\n> From my experience, I would be skeptical of it reappearing. This doctest is testing something, but the answer doesn't necessarily reflect that. If we don't trust at least one way of generating the \"answer,\" then the other algorithm should have big warnings attached to it. One other option if we don't trust any output is to add some more information to the discussion before the doctest to warn the user IMO.\n\nI wrote a random test for `hilbert_numerator()` that will help to ensure the two algorithms agree, once they do. I think that's a better approach than strcmp on the result.",
    "created_at": "2022-05-05T13:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535505",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@tscrim](#comment:19):
>
> From my experience, I would be skeptical of it reappearing. This doctest is testing something, but the answer doesn't necessarily reflect that. If we don't trust at least one way of generating the "answer," then the other algorithm should have big warnings attached to it. One other option if we don't trust any output is to add some more information to the discussion before the doctest to warn the user IMO.

I wrote a random test for `hilbert_numerator()` that will help to ensure the two algorithms agree, once they do. I think that's a better approach than strcmp on the result.



---

archive/issue_comments_535506.json:
```json
{
    "body": "Changed branch from **[u/mjo/ticket/33134](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/33134)** to **[u/dimpase/ticket/33134](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/ticket/33134)**",
    "created_at": "2022-07-11T12:00:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535506",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[u/mjo/ticket/33134](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/33134)** to **[u/dimpase/ticket/33134](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/ticket/33134)**



---

archive/issue_comments_535507.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nrebased over #33160\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8fe7620e7af842ed610fa9b99f87ccb521c8d636\">8fe7620</a></td><td><code>build/pkgs/singular: Update to 4.3.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c36a49b947ac22cbbd1a851b6dfd52f391367afe\">c36a49b</a></td><td><code>build/pkgs/singular: Update to 4.3.0p1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e6927423bda7911cc524b686e1a19f1159cd984\">4e69274</a></td><td><code>build/pkgs/singular/patches/1128.patch: Remove (upstreamed)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/192efb25ab349d06e64ea4bd18988ab8f31fdca0\">192efb2</a></td><td><code>build/pkgs/singular: Update to 4.3.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea08a04c3a8a77b51e7125af231fb79fe3ded21a\">ea08a04</a></td><td><code>src/sage/rings/polynomial/hilbert.pyx: Restrict a doctest to 64 bit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0679154f75f20d2d1929873591e27f5011c4256b\">0679154</a></td><td><code>build/pkgs/singular: Update to 4.3.1p1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b8e7cbcde42e2bd7067456d3c0c370531e56a56\">9b8e7cb</a></td><td><code>Trac #33134: add random (disabled) test for hilbert_numerator() algorithms.</code></td></tr></table>\n",
    "created_at": "2022-07-11T12:00:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535507",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

rebased over #33160

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8fe7620e7af842ed610fa9b99f87ccb521c8d636">8fe7620</a></td><td><code>build/pkgs/singular: Update to 4.3.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c36a49b947ac22cbbd1a851b6dfd52f391367afe">c36a49b</a></td><td><code>build/pkgs/singular: Update to 4.3.0p1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e6927423bda7911cc524b686e1a19f1159cd984">4e69274</a></td><td><code>build/pkgs/singular/patches/1128.patch: Remove (upstreamed)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/192efb25ab349d06e64ea4bd18988ab8f31fdca0">192efb2</a></td><td><code>build/pkgs/singular: Update to 4.3.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea08a04c3a8a77b51e7125af231fb79fe3ded21a">ea08a04</a></td><td><code>src/sage/rings/polynomial/hilbert.pyx: Restrict a doctest to 64 bit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0679154f75f20d2d1929873591e27f5011c4256b">0679154</a></td><td><code>build/pkgs/singular: Update to 4.3.1p1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b8e7cbcde42e2bd7067456d3c0c370531e56a56">9b8e7cb</a></td><td><code>Trac #33134: add random (disabled) test for hilbert_numerator() algorithms.</code></td></tr></table>




---

archive/issue_comments_535508.json:
```json
{
    "body": "Changed commit from **[`1e06126`](https://github.com/sagemath/sagetrac-mirror/commit/1e0612611512c863d9667786caab2be38a83e137)** to **[`9b8e7cb`](https://github.com/sagemath/sagetrac-mirror/commit/9b8e7cbcde42e2bd7067456d3c0c370531e56a56)**",
    "created_at": "2022-07-11T12:00:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535508",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[`1e06126`](https://github.com/sagemath/sagetrac-mirror/commit/1e0612611512c863d9667786caab2be38a83e137)** to **[`9b8e7cb`](https://github.com/sagemath/sagetrac-mirror/commit/9b8e7cbcde42e2bd7067456d3c0c370531e56a56)**



---

archive/issue_comments_535509.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2022-07-11T12:02:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535509",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_comments_535510.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nthis just adds one `#not tested` example, the rest is taken care in #33160",
    "created_at": "2022-07-11T12:02:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535510",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:24" align="right">comment:24</div>

this just adds one `#not tested` example, the rest is taken care in #33160



---

archive/issue_events_455933.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-07-11T12:02:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455933"
}
```



---

archive/issue_events_455934.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-07-11T12:02:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455934"
}
```



---

archive/issue_comments_535511.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nOn 32-bit:\n\n```\n**********************************************************************\nFile \"src/sage/rings/polynomial/hilbert.pyx\", line 583, in sage.rings.polynomial.hilbert.hilbert_poincare_series\nFailed example:\n    J.hilbert_numerator(algorithm='singular')\nExpected nothing\nGot:\n    overflow at t^22\n    overflow at t^21\n    overflow at t^20\n    overflow at t^19\n    overflow at t^18\n    120*t^33 - 3465*t^32 + 48180*t^31 - 429374*t^30 + 2753520*t^29 - 13522410*t^28 + 52832780*t^27 - 168384150*t^26 + 445188744*t^25 - 987193350*t^24 + 1847488500*t^23 + 752776200*t^17 + 752776200*t^16 - 1580830020*t^15 + 1673936550*t^14 - 1294246800*t^13 + 786893250*t^12 - 382391100*t^11 + 146679390*t^10 - 42299400*t^9 + 7837830*t^8 - 172260*t^7 - 468930*t^6 + 183744*t^5 - 39270*t^4 + 5060*t^3 - 330*t^2 + 1\n**********************************************************************\n```",
    "created_at": "2022-07-17T08:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535511",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:25" align="right">comment:25</div>

On 32-bit:

```
**********************************************************************
File "src/sage/rings/polynomial/hilbert.pyx", line 583, in sage.rings.polynomial.hilbert.hilbert_poincare_series
Failed example:
    J.hilbert_numerator(algorithm='singular')
Expected nothing
Got:
    overflow at t^22
    overflow at t^21
    overflow at t^20
    overflow at t^19
    overflow at t^18
    120*t^33 - 3465*t^32 + 48180*t^31 - 429374*t^30 + 2753520*t^29 - 13522410*t^28 + 52832780*t^27 - 168384150*t^26 + 445188744*t^25 - 987193350*t^24 + 1847488500*t^23 + 752776200*t^17 + 752776200*t^16 - 1580830020*t^15 + 1673936550*t^14 - 1294246800*t^13 + 786893250*t^12 - 382391100*t^11 + 146679390*t^10 - 42299400*t^9 + 7837830*t^8 - 172260*t^7 - 468930*t^6 + 183744*t^5 - 39270*t^4 + 5060*t^3 - 330*t^2 + 1
**********************************************************************
```



---

archive/issue_events_455935.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-17T08:53:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455935"
}
```



---

archive/issue_events_455936.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-17T08:53:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455936"
}
```



---

archive/issue_comments_535512.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\none needs to add 32-bit test case",
    "created_at": "2022-07-17T10:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535512",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">comment:27</div>

one needs to add 32-bit test case



---

archive/issue_comments_535513.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83af1a834990144156faf04325945f4c59851d48\">83af1a8</a></td><td><code>add 32-bit catch-all case</code></td></tr></table>\n",
    "created_at": "2022-07-17T16:24:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535513",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83af1a834990144156faf04325945f4c59851d48">83af1a8</a></td><td><code>add 32-bit catch-all case</code></td></tr></table>




---

archive/issue_comments_535514.json:
```json
{
    "body": "Changed commit from **[`9b8e7cb`](https://github.com/sagemath/sagetrac-mirror/commit/9b8e7cbcde42e2bd7067456d3c0c370531e56a56)** to **[`83af1a8`](https://github.com/sagemath/sagetrac-mirror/commit/83af1a834990144156faf04325945f4c59851d48)**",
    "created_at": "2022-07-17T16:24:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535514",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9b8e7cb`](https://github.com/sagemath/sagetrac-mirror/commit/9b8e7cbcde42e2bd7067456d3c0c370531e56a56)** to **[`83af1a8`](https://github.com/sagemath/sagetrac-mirror/commit/83af1a834990144156faf04325945f4c59851d48)**



---

archive/issue_events_455937.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-07-17T16:26:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455937"
}
```



---

archive/issue_events_455938.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-07-17T16:26:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455938"
}
```



---

archive/issue_comments_535515.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nthis should be it",
    "created_at": "2022-07-17T16:26:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535515",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">comment:29</div>

this should be it



---

archive/issue_comments_535516.json:
```json
{
    "body": "Dependencies: **#33160**",
    "created_at": "2022-07-17T16:27:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535516",
    "user": "https://github.com/dimpase"
}
```

Dependencies: **#33160**



---

archive/issue_events_455939.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-18T19:48:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455939"
}
```



---

archive/issue_events_455940.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-18T19:48:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455940"
}
```



---

archive/issue_comments_535517.json:
```json
{
    "body": "Changed author from **Michael Orlitzky** to none",
    "created_at": "2022-07-18T23:20:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535517",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Michael Orlitzky** to none



---

archive/issue_events_455941.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-18T23:20:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455941"
}
```



---

archive/issue_events_455942.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-18T23:20:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455942"
}
```



---

archive/issue_events_455943.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-18T23:20:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455943"
}
```



---

archive/issue_comments_535518.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI've made it part of #33160 now",
    "created_at": "2022-07-18T23:20:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535518",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

I've made it part of #33160 now



---

archive/issue_comments_535519.json:
```json
{
    "body": "Changed reviewer from **Dima Pasechnik** to none",
    "created_at": "2022-07-18T23:20:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535519",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Dima Pasechnik** to none



---

archive/issue_events_455944.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-18T23:20:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455944"
}
```



---

archive/issue_events_455945.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-18T23:20:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455945"
}
```



---

archive/issue_events_455946.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-07-18T23:23:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455946"
}
```



---

archive/issue_events_455947.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-07-18T23:23:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455947"
}
```



---

archive/issue_comments_535520.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2022-07-18T23:23:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33134#issuecomment-535520",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_events_455948.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-07-29T09:03:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "a6a6a6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455948"
}
```



---

archive/issue_events_455949.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-07-29T09:03:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455949"
}
```



---

archive/issue_events_455950.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-07-29T09:03:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33134",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33134#event-455950"
}
```
