# Issue 33627: Remove sage-gdb-commands from src/bin

archive/issues_033390.json:
```json
{
    "assignees": [],
    "body": "(from #33625)\n\nCritical because this file is not compatible with editable installs (`setup.py develop`), see #31049\n\n\nCC:  @tornaria @jhpalmieri @kiwifb @dimpase\n\nBranch: **[`d24b928`](https://github.com/sagemath/sagetrac-mirror/commit/d24b928c9710baab95281d2a26bc071366a6b72b)**\n\nReviewer: **John Palmieri**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **scripts**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33627_\n\n",
    "closed_at": "2022-08-01T20:23:18Z",
    "created_at": "2022-04-02T05:51:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20scripts",
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Remove sage-gdb-commands from src/bin",
    "type": "issue",
    "updated_at": "2022-08-06T21:57:29Z",
    "url": "https://github.com/sagemath/sage/issues/33627",
    "user": "https://github.com/mkoeppe"
}
```
(from #33625)

Critical because this file is not compatible with editable installs (`setup.py develop`), see #31049


CC:  @tornaria @jhpalmieri @kiwifb @dimpase

Branch: **[`d24b928`](https://github.com/sagemath/sagetrac-mirror/commit/d24b928c9710baab95281d2a26bc071366a6b72b)**

Reviewer: **John Palmieri**

Author: **Matthias Koeppe**

Component: **scripts**

_Issue created by migration from https://trac.sagemath.org/ticket/33627_





---

archive/issue_events_461693.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T05:51:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461693"
}
```



---

archive/issue_events_461694.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T05:51:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20scripts",
    "label_color": "000080",
    "label_name": "c: scripts",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461694"
}
```



---

archive/issue_events_461695.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T05:51:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461695"
}
```



---

archive/issue_events_461696.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T05:51:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461696"
}
```



---

archive/issue_events_461697.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461697"
}
```



---

archive/issue_events_461698.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461698"
}
```



---

archive/issue_events_461699.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-22T22:54:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461699"
}
```



---

archive/issue_events_461700.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-22T22:54:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461700"
}
```



---

archive/issue_comments_543479.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,4 @@\n \n This is just package_data and should be moved into `src/sage/doctest/`.\n \n+Critical because this file is not compatible with editable installs (`setup.py develop`), see #31049\n``````\n",
    "created_at": "2022-07-22T22:54:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543479",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,4 @@
 
 This is just package_data and should be moved into `src/sage/doctest/`.
 
+Critical because this file is not compatible with editable installs (`setup.py develop`), see #31049
``````




---

archive/issue_comments_543480.json:
```json
{
    "body": "Branch: **[u/mkoeppe/move_sage_gdb_commands_out_of_src_bin](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/move_sage_gdb_commands_out_of_src_bin)**",
    "created_at": "2022-07-22T23:50:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543480",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/move_sage_gdb_commands_out_of_src_bin](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/move_sage_gdb_commands_out_of_src_bin)**



---

archive/issue_comments_543481.json:
```json
{
    "body": "Commit: **[`a9a2fde`](https://github.com/sagemath/sagetrac-mirror/commit/a9a2fdec13b87c95008bd45ed03e97d43c114836)**",
    "created_at": "2022-07-22T23:50:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543481",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`a9a2fde`](https://github.com/sagemath/sagetrac-mirror/commit/a9a2fdec13b87c95008bd45ed03e97d43c114836)**



---

archive/issue_comments_543482.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2022-07-22T23:50:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543482",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_461701.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-22T23:50:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461701"
}
```



---

archive/issue_comments_543483.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0c9408a83f9be80e6c0556c2d30a5d56201168f\">e0c9408</a></td><td><code>Move sage-gdb-commands from src/bin to src/sage/doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9a2fdec13b87c95008bd45ed03e97d43c114836\">a9a2fde</a></td><td><code>src/sage/doctest/control.py: Get sage-gdb-commands with importlib.resources</code></td></tr></table>\n",
    "created_at": "2022-07-22T23:50:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543483",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0c9408a83f9be80e6c0556c2d30a5d56201168f">e0c9408</a></td><td><code>Move sage-gdb-commands from src/bin to src/sage/doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9a2fdec13b87c95008bd45ed03e97d43c114836">a9a2fde</a></td><td><code>src/sage/doctest/control.py: Get sage-gdb-commands with importlib.resources</code></td></tr></table>




---

archive/issue_comments_543484.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nWould `sage-gdb-commands` not be in a better location in `ext_data`? It is not a function that is specific to doctests. That's my only reaction so far to that change, but I wouldn't push for the move too strongly if you tell me that it is too hard.",
    "created_at": "2022-07-23T01:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543484",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:6" align="right">comment:6</div>

Would `sage-gdb-commands` not be in a better location in `ext_data`? It is not a function that is specific to doctests. That's my only reaction so far to that change, but I wouldn't push for the move too strongly if you tell me that it is too hard.



---

archive/issue_comments_543485.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@kiwifb](#comment:6):\n> Would `sage-gdb-commands` not be in a better location in `ext_data`? It is not a function that is specific to doctests. \n\nThe purpose of this file is not documented, and it is only used there",
    "created_at": "2022-07-23T01:20:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543485",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@kiwifb](#comment:6):
> Would `sage-gdb-commands` not be in a better location in `ext_data`? It is not a function that is specific to doctests. 

The purpose of this file is not documented, and it is only used there



---

archive/issue_comments_543486.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI just looked at the content of the file for the first time in some years. \n\n```\nr\n```\nmay be we can just get rid of it if it is the only place it is used. And that's what the gdb manual has to say about what it does https://sourceware.org/gdb/current/onlinedocs/gdb/Starting.html#Starting",
    "created_at": "2022-07-23T01:28:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543486",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:8" align="right">comment:8</div>

I just looked at the content of the file for the first time in some years. 

```
r
```
may be we can just get rid of it if it is the only place it is used. And that's what the gdb manual has to say about what it does https://sourceware.org/gdb/current/onlinedocs/gdb/Starting.html#Starting



---

archive/issue_comments_543487.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nIn any case, `ext_data` is an outdated design and I'd rather not add to it.",
    "created_at": "2022-07-23T01:33:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543487",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

In any case, `ext_data` is an outdated design and I'd rather not add to it.



---

archive/issue_comments_543488.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nFran\u00e7ois asks a good question about the purpose of this file. Could we instead just have a variable `SAGE_GDB_COMMANDS` defined as `'r'` in `doctest/control.py`? Having a file which contains a single character seems a little ridiculous.",
    "created_at": "2022-07-23T03:05:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543488",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:10" align="right">comment:10</div>

Fran√ßois asks a good question about the purpose of this file. Could we instead just have a variable `SAGE_GDB_COMMANDS` defined as `'r'` in `doctest/control.py`? Having a file which contains a single character seems a little ridiculous.



---

archive/issue_comments_543489.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThe name of the file is passed to `gdb`, it's a list of commands to execute upon starting. Of course we could also generate this file as a temporary file, but I don't think that's a cleaner design",
    "created_at": "2022-07-23T03:17:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543489",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

The name of the file is passed to `gdb`, it's a list of commands to execute upon starting. Of course we could also generate this file as a temporary file, but I don't think that's a cleaner design



---

archive/issue_comments_543490.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nYes, it is all coming back to me now. I guess it is meant to be clever. In any case it is the design we have to deal with and if it is only used from the `dosctest` folder, then yes it should live there.",
    "created_at": "2022-07-23T04:09:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543490",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:12" align="right">comment:12</div>

Yes, it is all coming back to me now. I guess it is meant to be clever. In any case it is the design we have to deal with and if it is only used from the `dosctest` folder, then yes it should live there.



---

archive/issue_events_461702.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-23T04:29:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461702"
}
```



---

archive/issue_events_461703.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-23T04:29:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461703"
}
```



---

archive/issue_comments_543491.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nActually the file is also used in `src/bin/sage`. I missed it because it's written as `\"${SELF}-gdb-commands\"`",
    "created_at": "2022-07-23T04:29:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543491",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Actually the file is also used in `src/bin/sage`. I missed it because it's written as `"${SELF}-gdb-commands"`



---

archive/issue_comments_543492.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6cc5205f998b31d0790ed82ec914c0dfa9b7c19f\">6cc5205</a></td><td><code>src/sage/doctest/control.py: When invoking gdb, use sys.executable</code></td></tr></table>\n",
    "created_at": "2022-07-23T06:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543492",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6cc5205f998b31d0790ed82ec914c0dfa9b7c19f">6cc5205</a></td><td><code>src/sage/doctest/control.py: When invoking gdb, use sys.executable</code></td></tr></table>




---

archive/issue_comments_543493.json:
```json
{
    "body": "Changed commit from **[`a9a2fde`](https://github.com/sagemath/sagetrac-mirror/commit/a9a2fdec13b87c95008bd45ed03e97d43c114836)** to **[`6cc5205`](https://github.com/sagemath/sagetrac-mirror/commit/6cc5205f998b31d0790ed82ec914c0dfa9b7c19f)**",
    "created_at": "2022-07-23T06:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543493",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a9a2fde`](https://github.com/sagemath/sagetrac-mirror/commit/a9a2fdec13b87c95008bd45ed03e97d43c114836)** to **[`6cc5205`](https://github.com/sagemath/sagetrac-mirror/commit/6cc5205f998b31d0790ed82ec914c0dfa9b7c19f)**



---

archive/issue_comments_543494.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nWith recent gdb versions we can just use this option instead and get rid of the command file altogether\n\n```\n  --eval-command=COMMAND, -ex\n\t\t     Execute a single GDB command.\n```",
    "created_at": "2022-07-23T07:08:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543494",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

With recent gdb versions we can just use this option instead and get rid of the command file altogether

```
  --eval-command=COMMAND, -ex
		     Execute a single GDB command.
```



---

archive/issue_comments_543495.json:
```json
{
    "body": "Changed commit from **[`6cc5205`](https://github.com/sagemath/sagetrac-mirror/commit/6cc5205f998b31d0790ed82ec914c0dfa9b7c19f)** to **[`9d2c48f`](https://github.com/sagemath/sagetrac-mirror/commit/9d2c48f0ed85c53a2eb06bab090613f7e7cd6311)**",
    "created_at": "2022-07-23T07:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543495",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6cc5205`](https://github.com/sagemath/sagetrac-mirror/commit/6cc5205f998b31d0790ed82ec914c0dfa9b7c19f)** to **[`9d2c48f`](https://github.com/sagemath/sagetrac-mirror/commit/9d2c48f0ed85c53a2eb06bab090613f7e7cd6311)**



---

archive/issue_comments_543496.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d2c48f0ed85c53a2eb06bab090613f7e7cd6311\">9d2c48f</a></td><td><code>src/bin/sage, src/sage/doctest/control.py: Eliminate use of sage-gdb-commands</code></td></tr></table>\n",
    "created_at": "2022-07-23T07:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543496",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d2c48f0ed85c53a2eb06bab090613f7e7cd6311">9d2c48f</a></td><td><code>src/bin/sage, src/sage/doctest/control.py: Eliminate use of sage-gdb-commands</code></td></tr></table>




---

archive/issue_comments_543497.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,4 @@\n (from #33625)\n \n-This is just package_data and should be moved into `src/sage/doctest/`.\n+Critical because this file is not compatible with editable installs (`setup.py develop`), see #31049\n \n-Critical because this file is not compatible with editable installs (`setup.py develop`), see #31049\n``````\n",
    "created_at": "2022-07-23T07:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543497",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,4 @@
 (from #33625)
 
-This is just package_data and should be moved into `src/sage/doctest/`.
+Critical because this file is not compatible with editable installs (`setup.py develop`), see #31049
 
-Critical because this file is not compatible with editable installs (`setup.py develop`), see #31049
``````




---

archive/issue_events_461704.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-23T07:21:50Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "title_is": "Remove sage-gdb-commands from src/bin",
    "title_was": "Move sage-gdb-commands out of src/bin",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461704"
}
```



---

archive/issue_comments_543498.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThe code handling `./sage --gdb` in `src/bin/sage` has clearly not been tried in a long time. The `SAGE_DEBUG` logic is broken because this environment variable is only set in the build environment, not in `sage -sh`",
    "created_at": "2022-07-23T07:29:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543498",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

The code handling `./sage --gdb` in `src/bin/sage` has clearly not been tried in a long time. The `SAGE_DEBUG` logic is broken because this environment variable is only set in the build environment, not in `sage -sh`



---

archive/issue_comments_543499.json:
```json
{
    "body": "Changed commit from **[`9d2c48f`](https://github.com/sagemath/sagetrac-mirror/commit/9d2c48f0ed85c53a2eb06bab090613f7e7cd6311)** to **[`d24b928`](https://github.com/sagemath/sagetrac-mirror/commit/d24b928c9710baab95281d2a26bc071366a6b72b)**",
    "created_at": "2022-07-23T07:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543499",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9d2c48f`](https://github.com/sagemath/sagetrac-mirror/commit/9d2c48f0ed85c53a2eb06bab090613f7e7cd6311)** to **[`d24b928`](https://github.com/sagemath/sagetrac-mirror/commit/d24b928c9710baab95281d2a26bc071366a6b72b)**



---

archive/issue_comments_543500.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d24b928c9710baab95281d2a26bc071366a6b72b\">d24b928</a></td><td><code>src/bin/sage (--gdb): Do not try to run cygdb unless SAGE_DEBUG=yes</code></td></tr></table>\n",
    "created_at": "2022-07-23T07:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543500",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d24b928c9710baab95281d2a26bc071366a6b72b">d24b928</a></td><td><code>src/bin/sage (--gdb): Do not try to run cygdb unless SAGE_DEBUG=yes</code></td></tr></table>




---

archive/issue_events_461705.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-23T07:34:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461705"
}
```



---

archive/issue_events_461706.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-23T07:34:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461706"
}
```



---

archive/issue_comments_543501.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nWhat's the advantage to explicitly including `python` (a.k.a. `sys.executable`) in\n\n```\nexec gdb --eval-command=\"run\" --args ...python... sage-runtests --serial --timeout=0 hello_world.py\n```",
    "created_at": "2022-07-23T18:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543501",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:22" align="right">comment:22</div>

What's the advantage to explicitly including `python` (a.k.a. `sys.executable`) in

```
exec gdb --eval-command="run" --args ...python... sage-runtests --serial --timeout=0 hello_world.py
```



---

archive/issue_comments_543502.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nWithout this change it wasn't working for me at all (on macOS): I got\n\n```\n\"/Users/mkoeppe/s/sage/sage-rebasing/src/bin/sage-runtests\": not in executable format: file format not recognized\n```",
    "created_at": "2022-07-23T18:50:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543502",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

Without this change it wasn't working for me at all (on macOS): I got

```
"/Users/mkoeppe/s/sage/sage-rebasing/src/bin/sage-runtests": not in executable format: file format not recognized
```



---

archive/issue_comments_543503.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI can't get it to work on OS X either way. The SPKG doesn't build for me (\"C compiler cannot create executables\" because \"ld: library not found for -ltinfo\"). If I run `brew install gdb`, then I get complaints about things not being codesigned. Anyway, with this branch things fail a bit better than with `develop`, and the changes make sense to me. Comments from anyone else?",
    "created_at": "2022-07-23T19:58:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543503",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:24" align="right">comment:24</div>

I can't get it to work on OS X either way. The SPKG doesn't build for me ("C compiler cannot create executables" because "ld: library not found for -ltinfo"). If I run `brew install gdb`, then I get complaints about things not being codesigned. Anyway, with this branch things fail a bit better than with `develop`, and the changes make sense to me. Comments from anyone else?



---

archive/issue_comments_543504.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nYes, the `gdb` SPKG is too old (see #30158). I have also not done the codesigning dance with the homebrew gdb this time to try out whether it really works on macOS",
    "created_at": "2022-07-23T20:02:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543504",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Yes, the `gdb` SPKG is too old (see #30158). I have also not done the codesigning dance with the homebrew gdb this time to try out whether it really works on macOS



---

archive/issue_comments_543505.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nisn't gdb pretty much useless with macOS clang, and one should use lldb instead?",
    "created_at": "2022-07-24T10:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543505",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">comment:26</div>

isn't gdb pretty much useless with macOS clang, and one should use lldb instead?



---

archive/issue_comments_543506.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nHence #31568",
    "created_at": "2022-07-24T16:22:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543506",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Hence #31568



---

archive/issue_comments_543507.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nLet's merge this.",
    "created_at": "2022-07-25T05:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543507",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:28" align="right">comment:28</div>

Let's merge this.



---

archive/issue_events_461707.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-07-25T05:33:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461707"
}
```



---

archive/issue_events_461708.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-07-25T05:33:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461708"
}
```



---

archive/issue_comments_543508.json:
```json
{
    "body": "Reviewer: **John Palmieri**",
    "created_at": "2022-07-25T05:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543508",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri**



---

archive/issue_comments_543509.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThanks!",
    "created_at": "2022-07-25T05:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543509",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Thanks!



---

archive/issue_events_461709.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-08-01T20:23:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461709"
}
```



---

archive/issue_events_461710.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "be272221fa1d4e7a511b03d2bd2c48172a3e7bc7",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-08-01T20:23:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33627#event-461710"
}
```



---

archive/issue_comments_543510.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/move_sage_gdb_commands_out_of_src_bin](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/move_sage_gdb_commands_out_of_src_bin)** to **[`d24b928`](https://github.com/sagemath/sagetrac-mirror/commit/d24b928c9710baab95281d2a26bc071366a6b72b)**",
    "created_at": "2022-08-01T20:23:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543510",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/move_sage_gdb_commands_out_of_src_bin](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/move_sage_gdb_commands_out_of_src_bin)** to **[`d24b928`](https://github.com/sagemath/sagetrac-mirror/commit/d24b928c9710baab95281d2a26bc071366a6b72b)**



---

archive/issue_comments_543511.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nBy the way, we missed an example in `developer/doctesting.rst` that mentions `sage-gdb-commands`. See #34295 for a follow-up.",
    "created_at": "2022-08-06T21:57:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543511",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:31" align="right">comment:31</div>

By the way, we missed an example in `developer/doctesting.rst` that mentions `sage-gdb-commands`. See #34295 for a follow-up.



---

archive/issue_comments_543512.json:
```json
{
    "body": "Changed commit from **[`d24b928`](https://github.com/sagemath/sagetrac-mirror/commit/d24b928c9710baab95281d2a26bc071366a6b72b)** to none",
    "created_at": "2022-08-06T21:57:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33627#issuecomment-543512",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[`d24b928`](https://github.com/sagemath/sagetrac-mirror/commit/d24b928c9710baab95281d2a26bc071366a6b72b)** to none
