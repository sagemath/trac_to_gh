# Issue 33866: Make jupyter_packaging standard; add hatchling, editables, pathspec, poetry_core, tomlkit, deprecation; update tomli, flit_core, setuptools, pip, wheel

archive/issues_033629.json:
```json
{
    "body": "In preparation for an upgrade of `jupyter_jsmol` and jupyter component packages (#33530), we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.\n\nThere should be no user-visible change.\n\nCC:  @egourgoulhon @dimpase @jhpalmieri @kiwifb @antonio-rojas @tornaria\n\nReviewer: Dima Pasechnik, Fran\u00e7ois Bissey, John Palmieri\n\nAuthor: Matthias Koeppe\n\nBranch: 6607401b099778c2178ee7eed0a60691248b7c48\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33866\n\n",
    "closed_at": "2022-07-03T22:06:00Z",
    "created_at": "2022-05-18T05:46:42Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Make jupyter_packaging standard; add hatchling, editables, pathspec, poetry_core, tomlkit, deprecation; update tomli, flit_core, setuptools, pip, wheel",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33866",
    "user": "https://github.com/mkoeppe"
}
```
In preparation for an upgrade of `jupyter_jsmol` and jupyter component packages (#33530), we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.

There should be no user-visible change.

CC:  @egourgoulhon @dimpase @jhpalmieri @kiwifb @antonio-rojas @tornaria

Reviewer: Dima Pasechnik, François Bissey, John Palmieri

Author: Matthias Koeppe

Branch: 6607401b099778c2178ee7eed0a60691248b7c48

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33866





---

archive/issue_comments_675610.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/upgrade_jupyter_jsmol__make_jupyter_packaging_standard\"",
    "created_at": "2022-05-27T04:07:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675610",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/upgrade_jupyter_jsmol__make_jupyter_packaging_standard"



---

archive/issue_comments_675611.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-05-27T04:16:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675611",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_675612.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2022-05-27T04:16:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675612",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_675613.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2022-05-27T04:16:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675613",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_675614.json:
```json
{
    "body": "Changing commit from \"\" to \"cea777c7a0d971e12a0ef37a0922e2a885d91256\"",
    "created_at": "2022-05-27T04:16:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675614",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "cea777c7a0d971e12a0ef37a0922e2a885d91256"



---

archive/issue_comments_675615.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,3 @@\n-`jupyter_packaging` is a new dependency, so it needs to become standard\n+`jupyter_packaging` is a new dependency of `jupyter_jsmol`, so it needs to become standard\n \n+`jupyter_packaging` now uses `hatchling` as its build backend, so we add it and its dependencies as standard packages and upgrade related packages.\n``````\n",
    "created_at": "2022-06-26T20:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675615",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,3 @@
-`jupyter_packaging` is a new dependency, so it needs to become standard
+`jupyter_packaging` is a new dependency of `jupyter_jsmol`, so it needs to become standard
 
+`jupyter_packaging` now uses `hatchling` as its build backend, so we add it and its dependencies as standard packages and upgrade related packages.
``````




---

archive/issue_comments_675616.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-06-26T20:11:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675616",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_675617.json:
```json
{
    "body": "Changing commit from \"cea777c7a0d971e12a0ef37a0922e2a885d91256\" to \"bfa7d35c0e71dd316bda6c1f32190e44e0e587d4\"",
    "created_at": "2022-06-26T20:11:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675617",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cea777c7a0d971e12a0ef37a0922e2a885d91256" to "bfa7d35c0e71dd316bda6c1f32190e44e0e587d4"



---

archive/issue_comments_675618.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,2 @@\n-`jupyter_packaging` is a new dependency of `jupyter_jsmol`, so it needs to become standard\n+In preparation for an upgrade of `jupyter_jsmol`, we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.\n \n-`jupyter_packaging` now uses `hatchling` as its build backend, so we add it and its dependencies as standard packages and upgrade related packages.\n``````\n",
    "created_at": "2022-06-26T21:54:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675618",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,2 @@
-`jupyter_packaging` is a new dependency of `jupyter_jsmol`, so it needs to become standard
+In preparation for an upgrade of `jupyter_jsmol`, we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.
 
-`jupyter_packaging` now uses `hatchling` as its build backend, so we add it and its dependencies as standard packages and upgrade related packages.
``````




---

archive/issue_comments_675619.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-06-26T21:54:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675619",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_675620.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-06-26T21:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675620",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_675621.json:
```json
{
    "body": "Changing commit from \"bfa7d35c0e71dd316bda6c1f32190e44e0e587d4\" to \"b82667f866a1852fc058b96e4f9368f9a9331a1e\"",
    "created_at": "2022-06-26T21:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675621",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bfa7d35c0e71dd316bda6c1f32190e44e0e587d4" to "b82667f866a1852fc058b96e4f9368f9a9331a1e"



---

archive/issue_comments_675622.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-06-26T21:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675622",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_675623.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,3 @@\n In preparation for an upgrade of `jupyter_jsmol`, we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.\n \n+There should be user-visible change.\n``````\n",
    "created_at": "2022-06-26T21:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675623",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,3 @@
 In preparation for an upgrade of `jupyter_jsmol`, we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.
 
+There should be user-visible change.
``````




---

archive/issue_comments_675624.json:
```json
{
    "body": "<a id='comment:8'></a>Deferred the actual update of `jupyter_jsmol` to a follow-up ticket.",
    "created_at": "2022-06-26T21:57:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675624",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Deferred the actual update of `jupyter_jsmol` to a follow-up ticket.



---

archive/issue_comments_675625.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-26T22:19:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675625",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_675626.json:
```json
{
    "body": "Changing commit from \"b82667f866a1852fc058b96e4f9368f9a9331a1e\" to \"708d8464ade4e20a45f3487ff03af888b92b4dca\"",
    "created_at": "2022-06-26T22:19:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675626",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b82667f866a1852fc058b96e4f9368f9a9331a1e" to "708d8464ade4e20a45f3487ff03af888b92b4dca"



---

archive/issue_comments_675627.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n In preparation for an upgrade of `jupyter_jsmol`, we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.\n \n-There should be user-visible change.\n+There should be no user-visible change.\n``````\n",
    "created_at": "2022-06-27T00:49:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675627",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 In preparation for an upgrade of `jupyter_jsmol`, we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.
 
-There should be user-visible change.
+There should be no user-visible change.
``````




---

archive/issue_comments_675628.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-27T00:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675628",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_675629.json:
```json
{
    "body": "Changing commit from \"708d8464ade4e20a45f3487ff03af888b92b4dca\" to \"6f72e8cbe566c550c6580136b2bfd57a762d32c0\"",
    "created_at": "2022-06-27T00:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675629",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "708d8464ade4e20a45f3487ff03af888b92b4dca" to "6f72e8cbe566c550c6580136b2bfd57a762d32c0"



---

archive/issue_comments_675630.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-In preparation for an upgrade of `jupyter_jsmol`, we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.\n+In preparation for an upgrade of `jupyter_jsmol` and jupyter component packages (#33530), we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.\n \n There should be no user-visible change.\n``````\n",
    "created_at": "2022-06-27T18:20:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675630",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-In preparation for an upgrade of `jupyter_jsmol`, we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.
+In preparation for an upgrade of `jupyter_jsmol` and jupyter component packages (#33530), we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.
 
 There should be no user-visible change.
``````




---

archive/issue_comments_675631.json:
```json
{
    "body": "Changing commit from \"6f72e8cbe566c550c6580136b2bfd57a762d32c0\" to \"3e9d4a85c976573eb55e617a5c6eacd78629afa0\"",
    "created_at": "2022-06-27T20:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675631",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6f72e8cbe566c550c6580136b2bfd57a762d32c0" to "3e9d4a85c976573eb55e617a5c6eacd78629afa0"



---

archive/issue_comments_675632.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-27T20:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675632",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_675633.json:
```json
{
    "body": "<a id='comment:20'></a>The `setuptools_scm` upgrade made `matplotlib` think that it is version 0.0",
    "created_at": "2022-06-27T20:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675633",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>The `setuptools_scm` upgrade made `matplotlib` think that it is version 0.0



---

archive/issue_comments_675634.json:
```json
{
    "body": "<a id='comment:22'></a>lgtm",
    "created_at": "2022-06-28T20:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675634",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>lgtm



---

archive/issue_comments_675635.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-06-28T20:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675635",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_675636.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2022-06-28T20:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675636",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_675637.json:
```json
{
    "body": "<a id='comment:23'></a>Nitpick, you did not list a license for `hatchling`\n\n```\ndiff --git a/build/pkgs/hatchling/SPKG.rst b/build/pkgs/hatchling/SPKG.rst\nnew file mode 100644\nindex 00000000..23d86bd\n--- /dev/null\n+++ b/build/pkgs/hatchling/SPKG.rst\n@@ -0,0 +1,16 @@\n+hatchling: Modern, extensible Python build backend\n+==================================================\n+\n+Description\n+-----------\n+\n+Modern, extensible Python build backend\n+\n+License\n+-------\n+\n+Upstream Contact\n+----------------\n+\n+https://pypi.org/project/hatchling/\n+\n```\nIt is `MIT`.",
    "created_at": "2022-06-28T20:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675637",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:23'></a>Nitpick, you did not list a license for `hatchling`

```
diff --git a/build/pkgs/hatchling/SPKG.rst b/build/pkgs/hatchling/SPKG.rst
new file mode 100644
index 00000000..23d86bd
--- /dev/null
+++ b/build/pkgs/hatchling/SPKG.rst
@@ -0,0 +1,16 @@
+hatchling: Modern, extensible Python build backend
+==================================================
+
+Description
+-----------
+
+Modern, extensible Python build backend
+
+License
+-------
+
+Upstream Contact
+----------------
+
+https://pypi.org/project/hatchling/
+
```
It is `MIT`.



---

archive/issue_comments_675638.json:
```json
{
    "body": "Changing commit from \"3e9d4a85c976573eb55e617a5c6eacd78629afa0\" to \"5d8111f78a7acf9b3abe670c44d9721708f8e3d9\"",
    "created_at": "2022-06-28T23:58:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675638",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3e9d4a85c976573eb55e617a5c6eacd78629afa0" to "5d8111f78a7acf9b3abe670c44d9721708f8e3d9"



---

archive/issue_comments_675639.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2022-06-28T23:58:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675639",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_675640.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2022-06-28T23:58:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675640",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_675641.json:
```json
{
    "body": "<a id='comment:25'></a>Thanks!",
    "created_at": "2022-06-28T23:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675641",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>Thanks!



---

archive/issue_comments_675642.json:
```json
{
    "body": "Changing reviewer from \"Dima Pasechnik\" to \"Dima Pasechnik, Fran\u00e7ois Bissey\"",
    "created_at": "2022-06-28T23:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675642",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "Dima Pasechnik" to "Dima Pasechnik, François Bissey"



---

archive/issue_comments_675643.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-06-28T23:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675643",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_675644.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-06-30T04:39:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675644",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_675645.json:
```json
{
    "body": "<a id='comment:26'></a>Doctest failures, I think because of the `pip` upgrade:\n\n```\nsage -t --random-seed=40701510628761718232931312764279214628 src/sage/misc/package.py\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 146, in sage.misc.package.pip_installed_packages\nFailed example:\n    'scipy' in d  # optional - sage_spkg\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 148, in sage.misc.package.pip_installed_packages\nFailed example:\n    d['scipy']  # optional - sage_spkg\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.7.beta3/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 695, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.7.beta3/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1093, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.pip_installed_packages[3]>\", line 1, in <module>\n        d['scipy']  # optional - sage_spkg\n    KeyError: 'scipy'\n```",
    "created_at": "2022-06-30T04:39:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675645",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:26'></a>Doctest failures, I think because of the `pip` upgrade:

```
sage -t --random-seed=40701510628761718232931312764279214628 src/sage/misc/package.py
**********************************************************************
File "src/sage/misc/package.py", line 146, in sage.misc.package.pip_installed_packages
Failed example:
    'scipy' in d  # optional - sage_spkg
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/misc/package.py", line 148, in sage.misc.package.pip_installed_packages
Failed example:
    d['scipy']  # optional - sage_spkg
Exception raised:
    Traceback (most recent call last):
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.7.beta3/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.7.beta3/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.misc.package.pip_installed_packages[3]>", line 1, in <module>
        d['scipy']  # optional - sage_spkg
    KeyError: 'scipy'
```



---

archive/issue_comments_675646.json:
```json
{
    "body": "<a id='comment:27'></a>The issue is that the dictionary `pip_installed_packages()` now has a key `\"SciPy\"` rather than `\"scipy\"`. I suggested several possible fixes at ticket:33530#comment:68 and ticket:33530#comment:69.",
    "created_at": "2022-06-30T04:40:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675646",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:27'></a>The issue is that the dictionary `pip_installed_packages()` now has a key `"SciPy"` rather than `"scipy"`. I suggested several possible fixes at ticket:33530#comment:68 and ticket:33530#comment:69.



---

archive/issue_comments_675647.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-30T17:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675647",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_675648.json:
```json
{
    "body": "Changing commit from \"5d8111f78a7acf9b3abe670c44d9721708f8e3d9\" to \"6607401b099778c2178ee7eed0a60691248b7c48\"",
    "created_at": "2022-06-30T17:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675648",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5d8111f78a7acf9b3abe670c44d9721708f8e3d9" to "6607401b099778c2178ee7eed0a60691248b7c48"



---

archive/issue_comments_675649.json:
```json
{
    "body": "<a id='comment:29'></a>Thanks for catching this and your suggestions. I have made similar changes to the doctests. The doctests now accept both formats. I think it's not necessary to track down which of the updated packages is responsible for this change. I wouldn't want to have to tighten version bounds in `install-requires.txt` for this package just for this doctest.",
    "created_at": "2022-06-30T18:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675649",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>Thanks for catching this and your suggestions. I have made similar changes to the doctests. The doctests now accept both formats. I think it's not necessary to track down which of the updated packages is responsible for this change. I wouldn't want to have to tighten version bounds in `install-requires.txt` for this package just for this doctest.



---

archive/issue_comments_675650.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-06-30T18:06:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675650",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_675651.json:
```json
{
    "body": "<a id='comment:31'></a>Looks good, thank you.",
    "created_at": "2022-06-30T18:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675651",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:31'></a>Looks good, thank you.



---

archive/issue_comments_675652.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-06-30T18:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675652",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_675653.json:
```json
{
    "body": "Changing reviewer from \"Dima Pasechnik, Fran\u00e7ois Bissey\" to \"Dima Pasechnik, Fran\u00e7ois Bissey, John Palmieri\"",
    "created_at": "2022-06-30T18:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675653",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "Dima Pasechnik, François Bissey" to "Dima Pasechnik, François Bissey, John Palmieri"



---

archive/issue_comments_675654.json:
```json
{
    "body": "<a id='comment:32'></a>Thanks!",
    "created_at": "2022-06-30T18:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675654",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>Thanks!



---

archive/issue_comments_675655.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/upgrade_jupyter_jsmol__make_jupyter_packaging_standard\" to \"6607401b099778c2178ee7eed0a60691248b7c48\"",
    "created_at": "2022-07-03T22:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675655",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/upgrade_jupyter_jsmol__make_jupyter_packaging_standard" to "6607401b099778c2178ee7eed0a60691248b7c48"



---

archive/issue_events_088859.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-03T22:06:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33866#event-88859"
}
```



---

archive/issue_comments_675656.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-07-03T22:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675656",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_675657.json:
```json
{
    "body": "Changing commit from \"6607401b099778c2178ee7eed0a60691248b7c48\" to \"\"",
    "created_at": "2022-08-24T10:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675657",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "6607401b099778c2178ee7eed0a60691248b7c48" to ""



---

archive/issue_comments_675658.json:
```json
{
    "body": "<a id='comment:34'></a>as it turns out, jupyter_jsmol installation process fetches more js stuff than there is in the tarball:\n\n```\njjupyter_jsmol-2022.1.0] Building wheels for collected packages: jupyter-jsmol\n[jupyter_jsmol-2022.1.0]   WARNING: Ignoring --build-option when building jupyter-jsmol using PEP 517\n[jupyter_jsmol-2022.1.0]   Building wheel for jupyter-jsmol (pyproject.toml): started\n[jupyter_jsmol-2022.1.0]   Running command Building wheel for jupyter-jsmol (pyproject.toml)\n[jupyter_jsmol-2022.1.0]   setup.py entered\n[jupyter_jsmol-2022.1.0]   $PATH=/mnt/opt/Sage/sage-dev/build/bin:/mnt/opt/Sage/sage-dev/local/var/lib/sage/venv-python3.10/bin:/mnt/opt/Sage/sage-dev/local/bin:/mnt/opt/Sage/sage-dev/build/bin:/mnt/opt/Sage/sage-dev/local/bin:/mnt/opt/Sage/sage-dev/local/var/lib/sage/venv-python3.10/bin:/mnt/opt/Sage/sage-dev/build/bin:/mnt/opt/Sage/sage-dev/src/bin:/mnt/opt/Sage/sage-dev/local/bin:/home/dima/.elan/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin:/usr/lib/llvm/14/bin:/home/dima/.local/bin:/home/dima/.local/bin\n[jupyter_jsmol-2022.1.0]   <string>:47: DeprecatedWarning: create_cmdclass is deprecated as of 0.8 and will be removed in 1.0. \"\n[jupyter_jsmol-2022.1.0]   Use `wrap_installers` to handle prebuild steps in cmdclass.\n[jupyter_jsmol-2022.1.0]   Use `get_data_files` to handle data files.\n[jupyter_jsmol-2022.1.0]   Use `include_package_data=True` and `MANIFEST.in` for package data.\n[jupyter_jsmol-2022.1.0] \n[jupyter_jsmol-2022.1.0]   <string>:49: DeprecatedWarning: install_npm is deprecated as of 0.8 and will be removed in 1.0. Use `npm_builder` and `wrap_installers`\n[jupyter_jsmol-2022.1.0]   running bdist_wheel\n[jupyter_jsmol-2022.1.0]   running jsdeps\n[jupyter_jsmol-2022.1.0]   Installing build dependencies with npm.  This may take a while...\n[jupyter_jsmol-2022.1.0]   > yarn install\n[jupyter_jsmol-2022.1.0]   yarn install v1.22.19\n[jupyter_jsmol-2022.1.0]   warning package.json: No license field\n[jupyter_jsmol-2022.1.0]   warning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.\n[jupyter_jsmol-2022.1.0]   warning jupyter-jsmol@2022.1.0: No license field\n[jupyter_jsmol-2022.1.0]   [1/4] Resolving packages...\n[jupyter_jsmol-2022.1.0]   [2/4] Fetching packages...\n[jupyter_jsmol-2022.1.0]   info There appears to be trouble with your network connection. Retrying...\n...\n```\n\naand it hangs - even tough the network is OK :-(",
    "created_at": "2022-08-24T10:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675658",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'></a>as it turns out, jupyter_jsmol installation process fetches more js stuff than there is in the tarball:

```
jjupyter_jsmol-2022.1.0] Building wheels for collected packages: jupyter-jsmol
[jupyter_jsmol-2022.1.0]   WARNING: Ignoring --build-option when building jupyter-jsmol using PEP 517
[jupyter_jsmol-2022.1.0]   Building wheel for jupyter-jsmol (pyproject.toml): started
[jupyter_jsmol-2022.1.0]   Running command Building wheel for jupyter-jsmol (pyproject.toml)
[jupyter_jsmol-2022.1.0]   setup.py entered
[jupyter_jsmol-2022.1.0]   $PATH=/mnt/opt/Sage/sage-dev/build/bin:/mnt/opt/Sage/sage-dev/local/var/lib/sage/venv-python3.10/bin:/mnt/opt/Sage/sage-dev/local/bin:/mnt/opt/Sage/sage-dev/build/bin:/mnt/opt/Sage/sage-dev/local/bin:/mnt/opt/Sage/sage-dev/local/var/lib/sage/venv-python3.10/bin:/mnt/opt/Sage/sage-dev/build/bin:/mnt/opt/Sage/sage-dev/src/bin:/mnt/opt/Sage/sage-dev/local/bin:/home/dima/.elan/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin:/usr/lib/llvm/14/bin:/home/dima/.local/bin:/home/dima/.local/bin
[jupyter_jsmol-2022.1.0]   <string>:47: DeprecatedWarning: create_cmdclass is deprecated as of 0.8 and will be removed in 1.0. "
[jupyter_jsmol-2022.1.0]   Use `wrap_installers` to handle prebuild steps in cmdclass.
[jupyter_jsmol-2022.1.0]   Use `get_data_files` to handle data files.
[jupyter_jsmol-2022.1.0]   Use `include_package_data=True` and `MANIFEST.in` for package data.
[jupyter_jsmol-2022.1.0] 
[jupyter_jsmol-2022.1.0]   <string>:49: DeprecatedWarning: install_npm is deprecated as of 0.8 and will be removed in 1.0. Use `npm_builder` and `wrap_installers`
[jupyter_jsmol-2022.1.0]   running bdist_wheel
[jupyter_jsmol-2022.1.0]   running jsdeps
[jupyter_jsmol-2022.1.0]   Installing build dependencies with npm.  This may take a while...
[jupyter_jsmol-2022.1.0]   > yarn install
[jupyter_jsmol-2022.1.0]   yarn install v1.22.19
[jupyter_jsmol-2022.1.0]   warning package.json: No license field
[jupyter_jsmol-2022.1.0]   warning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.
[jupyter_jsmol-2022.1.0]   warning jupyter-jsmol@2022.1.0: No license field
[jupyter_jsmol-2022.1.0]   [1/4] Resolving packages...
[jupyter_jsmol-2022.1.0]   [2/4] Fetching packages...
[jupyter_jsmol-2022.1.0]   info There appears to be trouble with your network connection. Retrying...
...
```

aand it hangs - even tough the network is OK :-(



---

archive/issue_comments_675659.json:
```json
{
    "body": "<a id='comment:35'></a>follow-up on #34421",
    "created_at": "2022-08-24T11:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-675659",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:35'></a>follow-up on #34421
