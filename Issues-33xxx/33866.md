# Issue 33866: Make jupyter_packaging standard; add hatchling, editables, pathspec, poetry_core, tomlkit, deprecation; update tomli, flit_core, setuptools, pip, wheel

archive/issues_033629.json:
```json
{
    "body": "In preparation for an upgrade of `jupyter_jsmol` and jupyter component packages (#33530), we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.\n\nThere should be no user-visible change.\n\nCC:  @egourgoulhon @dimpase @jhpalmieri @kiwifb @antonio-rojas @tornaria\n\nReviewer: Dima Pasechnik, Fran\u00e7ois Bissey, John Palmieri\n\nAuthor: Matthias Koeppe\n\nBranch: 6607401b099778c2178ee7eed0a60691248b7c48\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33866\n\n",
    "closed_at": "2022-07-03T22:06:00Z",
    "created_at": "2022-05-18T05:46:42Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Make jupyter_packaging standard; add hatchling, editables, pathspec, poetry_core, tomlkit, deprecation; update tomli, flit_core, setuptools, pip, wheel",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33866",
    "user": "https://github.com/mkoeppe"
}
```
In preparation for an upgrade of `jupyter_jsmol` and jupyter component packages (#33530), we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.

There should be no user-visible change.

CC:  @egourgoulhon @dimpase @jhpalmieri @kiwifb @antonio-rojas @tornaria

Reviewer: Dima Pasechnik, François Bissey, John Palmieri

Author: Matthias Koeppe

Branch: 6607401b099778c2178ee7eed0a60691248b7c48

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33866





---

archive/issue_comments_667220.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/upgrade_jupyter_jsmol__make_jupyter_packaging_standard\"",
    "created_at": "2022-05-27T04:07:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667220",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/upgrade_jupyter_jsmol__make_jupyter_packaging_standard"



---

archive/issue_comments_667221.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-05-27T04:16:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667221",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_667222.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2022-05-27T04:16:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667222",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_667223.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[ce9a905](https://github.com/sagemath/sagetrac-mirror/commit/ce9a9050a77e048a26868f81ed5ea0e492566b81)|`build/pkgs/jupyter_jsmol: Update to 2022.1.0`|\n|[cea777c](https://github.com/sagemath/sagetrac-mirror/commit/cea777c7a0d971e12a0ef37a0922e2a885d91256)|`build/pkgs/jupyter_packaging: Make it a normal standard package`|",
    "created_at": "2022-05-27T04:16:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667223",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                              |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[ce9a905](https://github.com/sagemath/sagetrac-mirror/commit/ce9a9050a77e048a26868f81ed5ea0e492566b81)|`build/pkgs/jupyter_jsmol: Update to 2022.1.0`|
|[cea777c](https://github.com/sagemath/sagetrac-mirror/commit/cea777c7a0d971e12a0ef37a0922e2a885d91256)|`build/pkgs/jupyter_packaging: Make it a normal standard package`|



---

archive/issue_comments_667224.json:
```json
{
    "body": "Changing commit from \"\" to \"cea777c7a0d971e12a0ef37a0922e2a885d91256\"",
    "created_at": "2022-05-27T04:16:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667224",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "cea777c7a0d971e12a0ef37a0922e2a885d91256"



---

archive/issue_comments_667225.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,3 @@\n-`jupyter_packaging` is a new dependency, so it needs to become standard\n+`jupyter_packaging` is a new dependency of `jupyter_jsmol`, so it needs to become standard\n \n+`jupyter_packaging` now uses `hatchling` as its build backend, so we add it and its dependencies as standard packages and upgrade related packages.\n``````\n",
    "created_at": "2022-06-26T20:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667225",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,3 @@
-`jupyter_packaging` is a new dependency, so it needs to become standard
+`jupyter_packaging` is a new dependency of `jupyter_jsmol`, so it needs to become standard
 
+`jupyter_packaging` now uses `hatchling` as its build backend, so we add it and its dependencies as standard packages and upgrade related packages.
``````




---

archive/issue_comments_667226.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[f8c42c7](https://github.com/sagemath/sagetrac-mirror/commit/f8c42c74ab1ab5b78efcfa9656f0c4ece7689b23)|`build/pkgs/jupyter_jsmol: Update to 2022.1.0`|\n|[a843a53](https://github.com/sagemath/sagetrac-mirror/commit/a843a53ab3976ecc8daa98d08b5871a976bc5f31)|`build/pkgs/jupyter_packaging: Make it a normal standard package`|\n|[fbddf49](https://github.com/sagemath/sagetrac-mirror/commit/fbddf490d367a396c5081a83516a6bae5a0b271d)|`build/pkgs/hatchling: New standard package, build dep of jupyter_client, jsonschema`|\n|[a3dcb2f](https://github.com/sagemath/sagetrac-mirror/commit/a3dcb2f1fb22407a9adbaa1b5ed0720c2ea7ed5b)|`build/pkgs/editables: New standard package, build dep of hatchling`|\n|[04b430e](https://github.com/sagemath/sagetrac-mirror/commit/04b430ebaa92b30df2633d00e93f60aa308847b2)|`build/pkgs/tomli: Update to 2.0.1`|\n|[6d149c9](https://github.com/sagemath/sagetrac-mirror/commit/6d149c9560c751b08ce015fe3dd2f835e1124f4a)|`build/pkgs/hatchling/dependencies: Add tomli, editables`|\n|[6b8c0be](https://github.com/sagemath/sagetrac-mirror/commit/6b8c0bea08fdd4ffc5d1c834aca8e933e239b4e7)|`build/pkgs/flit_core: Update to 3.7.1`|\n|[bfa7d35](https://github.com/sagemath/sagetrac-mirror/commit/bfa7d35c0e71dd316bda6c1f32190e44e0e587d4)|`build/pkgs/jupyter_packaging: Update to 0.12.2`|",
    "created_at": "2022-06-26T20:11:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667226",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[f8c42c7](https://github.com/sagemath/sagetrac-mirror/commit/f8c42c74ab1ab5b78efcfa9656f0c4ece7689b23)|`build/pkgs/jupyter_jsmol: Update to 2022.1.0`|
|[a843a53](https://github.com/sagemath/sagetrac-mirror/commit/a843a53ab3976ecc8daa98d08b5871a976bc5f31)|`build/pkgs/jupyter_packaging: Make it a normal standard package`|
|[fbddf49](https://github.com/sagemath/sagetrac-mirror/commit/fbddf490d367a396c5081a83516a6bae5a0b271d)|`build/pkgs/hatchling: New standard package, build dep of jupyter_client, jsonschema`|
|[a3dcb2f](https://github.com/sagemath/sagetrac-mirror/commit/a3dcb2f1fb22407a9adbaa1b5ed0720c2ea7ed5b)|`build/pkgs/editables: New standard package, build dep of hatchling`|
|[04b430e](https://github.com/sagemath/sagetrac-mirror/commit/04b430ebaa92b30df2633d00e93f60aa308847b2)|`build/pkgs/tomli: Update to 2.0.1`|
|[6d149c9](https://github.com/sagemath/sagetrac-mirror/commit/6d149c9560c751b08ce015fe3dd2f835e1124f4a)|`build/pkgs/hatchling/dependencies: Add tomli, editables`|
|[6b8c0be](https://github.com/sagemath/sagetrac-mirror/commit/6b8c0bea08fdd4ffc5d1c834aca8e933e239b4e7)|`build/pkgs/flit_core: Update to 3.7.1`|
|[bfa7d35](https://github.com/sagemath/sagetrac-mirror/commit/bfa7d35c0e71dd316bda6c1f32190e44e0e587d4)|`build/pkgs/jupyter_packaging: Update to 0.12.2`|



---

archive/issue_comments_667227.json:
```json
{
    "body": "Changing commit from \"cea777c7a0d971e12a0ef37a0922e2a885d91256\" to \"bfa7d35c0e71dd316bda6c1f32190e44e0e587d4\"",
    "created_at": "2022-06-26T20:11:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667227",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cea777c7a0d971e12a0ef37a0922e2a885d91256" to "bfa7d35c0e71dd316bda6c1f32190e44e0e587d4"



---

archive/issue_events_107930.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "rename": {
        "from": "Upgrade jupyter_jsmol, make jupyter_packaging standard",
        "to": "Make jupyter_packaging standard, add"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33866#event-107930"
}
```



---

archive/issue_comments_667228.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,2 @@\n-`jupyter_packaging` is a new dependency of `jupyter_jsmol`, so it needs to become standard\n+In preparation for an upgrade of `jupyter_jsmol`, we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.\n \n-`jupyter_packaging` now uses `hatchling` as its build backend, so we add it and its dependencies as standard packages and upgrade related packages.\n``````\n",
    "created_at": "2022-06-26T21:54:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667228",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,2 @@
-`jupyter_packaging` is a new dependency of `jupyter_jsmol`, so it needs to become standard
+In preparation for an upgrade of `jupyter_jsmol`, we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.
 
-`jupyter_packaging` now uses `hatchling` as its build backend, so we add it and its dependencies as standard packages and upgrade related packages.
``````




---

archive/issue_comments_667229.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-06-26T21:54:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667229",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_667230.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|\n|[1a63ff6](https://github.com/sagemath/sagetrac-mirror/commit/1a63ff69f7eb6e7a9f4a412cb6af8629b54b8a10)|`build/pkgs/jupyter_packaging: Make it a normal standard package`|\n|[a675336](https://github.com/sagemath/sagetrac-mirror/commit/a675336c4f4f42047d47389319648dee122009b9)|`build/pkgs/hatchling: New standard package, build dep of jupyter_client, jsonschema`|\n|[f12287a](https://github.com/sagemath/sagetrac-mirror/commit/f12287a72e3245d3c0901efe15415e5e76a909c9)|`build/pkgs/editables: New standard package, build dep of hatchling`|\n|[f715db8](https://github.com/sagemath/sagetrac-mirror/commit/f715db86542ce7d7417751b24839757e7a752107)|`build/pkgs/tomli: Update to 2.0.1`|\n|[10f216b](https://github.com/sagemath/sagetrac-mirror/commit/10f216b9f20da2594f42c67e3bf2f6cbafb6fa2b)|`build/pkgs/hatchling/dependencies: Add tomli, editables`|\n|[4738f8c](https://github.com/sagemath/sagetrac-mirror/commit/4738f8c67a72df9aa5304192f86f737b21a9af29)|`build/pkgs/flit_core: Update to 3.7.1`|\n|[b82667f](https://github.com/sagemath/sagetrac-mirror/commit/b82667f866a1852fc058b96e4f9368f9a9331a1e)|`build/pkgs/jupyter_packaging: Update to 0.12.2`|",
    "created_at": "2022-06-26T21:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667230",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|
|[1a63ff6](https://github.com/sagemath/sagetrac-mirror/commit/1a63ff69f7eb6e7a9f4a412cb6af8629b54b8a10)|`build/pkgs/jupyter_packaging: Make it a normal standard package`|
|[a675336](https://github.com/sagemath/sagetrac-mirror/commit/a675336c4f4f42047d47389319648dee122009b9)|`build/pkgs/hatchling: New standard package, build dep of jupyter_client, jsonschema`|
|[f12287a](https://github.com/sagemath/sagetrac-mirror/commit/f12287a72e3245d3c0901efe15415e5e76a909c9)|`build/pkgs/editables: New standard package, build dep of hatchling`|
|[f715db8](https://github.com/sagemath/sagetrac-mirror/commit/f715db86542ce7d7417751b24839757e7a752107)|`build/pkgs/tomli: Update to 2.0.1`|
|[10f216b](https://github.com/sagemath/sagetrac-mirror/commit/10f216b9f20da2594f42c67e3bf2f6cbafb6fa2b)|`build/pkgs/hatchling/dependencies: Add tomli, editables`|
|[4738f8c](https://github.com/sagemath/sagetrac-mirror/commit/4738f8c67a72df9aa5304192f86f737b21a9af29)|`build/pkgs/flit_core: Update to 3.7.1`|
|[b82667f](https://github.com/sagemath/sagetrac-mirror/commit/b82667f866a1852fc058b96e4f9368f9a9331a1e)|`build/pkgs/jupyter_packaging: Update to 0.12.2`|



---

archive/issue_comments_667231.json:
```json
{
    "body": "Changing commit from \"bfa7d35c0e71dd316bda6c1f32190e44e0e587d4\" to \"b82667f866a1852fc058b96e4f9368f9a9331a1e\"",
    "created_at": "2022-06-26T21:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667231",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bfa7d35c0e71dd316bda6c1f32190e44e0e587d4" to "b82667f866a1852fc058b96e4f9368f9a9331a1e"



---

archive/issue_comments_667232.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-06-26T21:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667232",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_107931.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "rename": {
        "from": "Make jupyter_packaging standard, add",
        "to": "Make jupyter_packaging standard, add hatchling, editables, update tomli, flit_core"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33866#event-107931"
}
```



---

archive/issue_comments_667233.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,3 @@\n In preparation for an upgrade of `jupyter_jsmol`, we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.\n \n+There should be user-visible change.\n``````\n",
    "created_at": "2022-06-26T21:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667233",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,3 @@
 In preparation for an upgrade of `jupyter_jsmol`, we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.
 
+There should be user-visible change.
``````




---

archive/issue_comments_667234.json:
```json
{
    "body": "<a id='comment:8'></a>\nDeferred the actual update of `jupyter_jsmol` to a follow-up ticket.",
    "created_at": "2022-06-26T21:57:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667234",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Deferred the actual update of `jupyter_jsmol` to a follow-up ticket.



---

archive/issue_comments_667235.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|\n|[95e1955](https://github.com/sagemath/sagetrac-mirror/commit/95e1955994892fd80796c679948f680a90c93a47)|`build/pkgs/jupyter_packaging/dependencies: Add hatchling`|\n|[708d846](https://github.com/sagemath/sagetrac-mirror/commit/708d8464ade4e20a45f3487ff03af888b92b4dca)|`build/pkgs/pathspec: New`|",
    "created_at": "2022-06-26T22:19:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667235",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|
|[95e1955](https://github.com/sagemath/sagetrac-mirror/commit/95e1955994892fd80796c679948f680a90c93a47)|`build/pkgs/jupyter_packaging/dependencies: Add hatchling`|
|[708d846](https://github.com/sagemath/sagetrac-mirror/commit/708d8464ade4e20a45f3487ff03af888b92b4dca)|`build/pkgs/pathspec: New`|



---

archive/issue_comments_667236.json:
```json
{
    "body": "Changing commit from \"b82667f866a1852fc058b96e4f9368f9a9331a1e\" to \"708d8464ade4e20a45f3487ff03af888b92b4dca\"",
    "created_at": "2022-06-26T22:19:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667236",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b82667f866a1852fc058b96e4f9368f9a9331a1e" to "708d8464ade4e20a45f3487ff03af888b92b4dca"



---

archive/issue_events_107932.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "rename": {
        "from": "Make jupyter_packaging standard, add hatchling, editables, update tomli, flit_core",
        "to": "Make jupyter_packaging standard; add hatchling, editables, pathspec; update tomli, flit_core"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33866#event-107932"
}
```



---

archive/issue_events_107933.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "rename": {
        "from": "Make jupyter_packaging standard; add hatchling, editables, pathspec; update tomli, flit_core",
        "to": "Make jupyter_packaging standard; add hatchling, editables, pathspec, poetry_core; update tomli, flit_core, setuptools"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33866#event-107933"
}
```



---

archive/issue_comments_667237.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n In preparation for an upgrade of `jupyter_jsmol`, we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.\n \n-There should be user-visible change.\n+There should be no user-visible change.\n``````\n",
    "created_at": "2022-06-27T00:49:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667237",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 In preparation for an upgrade of `jupyter_jsmol`, we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.
 
-There should be user-visible change.
+There should be no user-visible change.
``````




---

archive/issue_comments_667238.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|\n|[416603f](https://github.com/sagemath/sagetrac-mirror/commit/416603ffa23a4cf8875ed9756fe0d07d0a517e2f)|`build/pkgs/deprecation: New (jupyter_packaging dep)`|\n|[f5076ba](https://github.com/sagemath/sagetrac-mirror/commit/f5076ba6603d2a9fc23526b29f027b938c9ba73b)|`build/pkgs/tomlkit: New (jupyter_packaging dep)`|\n|[255126a](https://github.com/sagemath/sagetrac-mirror/commit/255126ab0cd6043457c150bb0f24c6f7aac8b20f)|`build/pkgs/setuptools: Update to 62.6.0`|\n|[5f29fb6](https://github.com/sagemath/sagetrac-mirror/commit/5f29fb68ee3e3de80cd8af6703eed7fc52b84cd9)|`build/pkgs/poetry_core: New (tomlkit build dep)`|\n|[0804b62](https://github.com/sagemath/sagetrac-mirror/commit/0804b6252e8b1933bc652c12b8ac58e601edf291)|`build/pkgs/poetry_core/patches/5547.diff_bin: New`|\n|[0c4d0eb](https://github.com/sagemath/sagetrac-mirror/commit/0c4d0ebcee22f0956285b6690d718bbc93bf6c44)|`build/pkgs/hatchling/dependencies: Add pluggy, packaging`|\n|[3e54474](https://github.com/sagemath/sagetrac-mirror/commit/3e544748d11ccba8234d4618d84320af4c6b20c1)|`build/pkgs/pip: Update to 22.1.2`|\n|[7e9722f](https://github.com/sagemath/sagetrac-mirror/commit/7e9722fc222adeaa047dd778b7b5fce8d0194a7a)|`build/pkgs/setuptools_scm: Update to 7.0.2, add typing_extensions as dep`|\n|[6f72e8c](https://github.com/sagemath/sagetrac-mirror/commit/6f72e8cbe566c550c6580136b2bfd57a762d32c0)|`build/pkgs/wheel: Update to 0.37.1`|",
    "created_at": "2022-06-27T00:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667238",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
|[416603f](https://github.com/sagemath/sagetrac-mirror/commit/416603ffa23a4cf8875ed9756fe0d07d0a517e2f)|`build/pkgs/deprecation: New (jupyter_packaging dep)`|
|[f5076ba](https://github.com/sagemath/sagetrac-mirror/commit/f5076ba6603d2a9fc23526b29f027b938c9ba73b)|`build/pkgs/tomlkit: New (jupyter_packaging dep)`|
|[255126a](https://github.com/sagemath/sagetrac-mirror/commit/255126ab0cd6043457c150bb0f24c6f7aac8b20f)|`build/pkgs/setuptools: Update to 62.6.0`|
|[5f29fb6](https://github.com/sagemath/sagetrac-mirror/commit/5f29fb68ee3e3de80cd8af6703eed7fc52b84cd9)|`build/pkgs/poetry_core: New (tomlkit build dep)`|
|[0804b62](https://github.com/sagemath/sagetrac-mirror/commit/0804b6252e8b1933bc652c12b8ac58e601edf291)|`build/pkgs/poetry_core/patches/5547.diff_bin: New`|
|[0c4d0eb](https://github.com/sagemath/sagetrac-mirror/commit/0c4d0ebcee22f0956285b6690d718bbc93bf6c44)|`build/pkgs/hatchling/dependencies: Add pluggy, packaging`|
|[3e54474](https://github.com/sagemath/sagetrac-mirror/commit/3e544748d11ccba8234d4618d84320af4c6b20c1)|`build/pkgs/pip: Update to 22.1.2`|
|[7e9722f](https://github.com/sagemath/sagetrac-mirror/commit/7e9722fc222adeaa047dd778b7b5fce8d0194a7a)|`build/pkgs/setuptools_scm: Update to 7.0.2, add typing_extensions as dep`|
|[6f72e8c](https://github.com/sagemath/sagetrac-mirror/commit/6f72e8cbe566c550c6580136b2bfd57a762d32c0)|`build/pkgs/wheel: Update to 0.37.1`|



---

archive/issue_comments_667239.json:
```json
{
    "body": "Changing commit from \"708d8464ade4e20a45f3487ff03af888b92b4dca\" to \"6f72e8cbe566c550c6580136b2bfd57a762d32c0\"",
    "created_at": "2022-06-27T00:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667239",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "708d8464ade4e20a45f3487ff03af888b92b4dca" to "6f72e8cbe566c550c6580136b2bfd57a762d32c0"



---

archive/issue_events_107934.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "rename": {
        "from": "Make jupyter_packaging standard; add hatchling, editables, pathspec, poetry_core; update tomli, flit_core, setuptools",
        "to": "Make jupyter_packaging standard; add hatchling, editables, pathspec, poetry_core, tomlkit, deprecation; update tomli, flit_core, setuptools, pip, wheel"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33866#event-107934"
}
```



---

archive/issue_events_107935.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "rename": {
        "from": "Make jupyter_packaging standard; add hatchling, editables, pathspec, poetry_core, tomlkit, deprecation; update tomli, flit_core, setuptools, pip, wheel",
        "to": "Make jupyter_packaging standard; add hatchling, editables, pathspec, poetry_core, tomlkit, deprecation; update tomli, flit_core, setuptools, setuptools_scm, pip, wheel"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33866#event-107935"
}
```



---

archive/issue_comments_667240.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-In preparation for an upgrade of `jupyter_jsmol`, we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.\n+In preparation for an upgrade of `jupyter_jsmol` and jupyter component packages (#33530), we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.\n \n There should be no user-visible change.\n``````\n",
    "created_at": "2022-06-27T18:20:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667240",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-In preparation for an upgrade of `jupyter_jsmol`, we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.
+In preparation for an upgrade of `jupyter_jsmol` and jupyter component packages (#33530), we make the `jupyter_packaging` package standard. As the latest version of `jupyter_packaging` now uses `hatchling` as its build backend, we add it and its dependencies as standard packages and upgrade related packages.
 
 There should be no user-visible change.
``````




---

archive/issue_comments_667241.json:
```json
{
    "body": "Changing commit from \"6f72e8cbe566c550c6580136b2bfd57a762d32c0\" to \"3e9d4a85c976573eb55e617a5c6eacd78629afa0\"",
    "created_at": "2022-06-27T20:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667241",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6f72e8cbe566c550c6580136b2bfd57a762d32c0" to "3e9d4a85c976573eb55e617a5c6eacd78629afa0"



---

archive/issue_comments_667242.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------|\n|[3e9d4a8](https://github.com/sagemath/sagetrac-mirror/commit/3e9d4a85c976573eb55e617a5c6eacd78629afa0)|`Revert \"build/pkgs/setuptools_scm: Update to 7.0.2, add typing_extensions as dep\"`|",
    "created_at": "2022-06-27T20:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667242",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------|
|[3e9d4a8](https://github.com/sagemath/sagetrac-mirror/commit/3e9d4a85c976573eb55e617a5c6eacd78629afa0)|`Revert "build/pkgs/setuptools_scm: Update to 7.0.2, add typing_extensions as dep"`|



---

archive/issue_comments_667243.json:
```json
{
    "body": "<a id='comment:20'></a>\nThe `setuptools_scm` upgrade made `matplotlib` think that it is version 0.0",
    "created_at": "2022-06-27T20:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667243",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>
The `setuptools_scm` upgrade made `matplotlib` think that it is version 0.0



---

archive/issue_events_107936.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "rename": {
        "from": "Make jupyter_packaging standard; add hatchling, editables, pathspec, poetry_core, tomlkit, deprecation; update tomli, flit_core, setuptools, setuptools_scm, pip, wheel",
        "to": "Make jupyter_packaging standard; add hatchling, editables, pathspec, poetry_core, tomlkit, deprecation; update tomli, flit_core, setuptools, pip, wheel"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33866#event-107936"
}
```



---

archive/issue_comments_667244.json:
```json
{
    "body": "<a id='comment:22'></a>\nlgtm",
    "created_at": "2022-06-28T20:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667244",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>
lgtm



---

archive/issue_comments_667245.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-06-28T20:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667245",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_667246.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2022-06-28T20:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667246",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_667247.json:
```json
{
    "body": "<a id='comment:23'></a>\nNitpick, you did not list a license for `hatchling`\n\n```\ndiff --git a/build/pkgs/hatchling/SPKG.rst b/build/pkgs/hatchling/SPKG.rst\nnew file mode 100644\nindex 00000000..23d86bd\n--- /dev/null\n+++ b/build/pkgs/hatchling/SPKG.rst\n@@ -0,0 +1,16 @@\n+hatchling: Modern, extensible Python build backend\n+==================================================\n+\n+Description\n+-----------\n+\n+Modern, extensible Python build backend\n+\n+License\n+-------\n+\n+Upstream Contact\n+----------------\n+\n+https://pypi.org/project/hatchling/\n+\n```\nIt is `MIT`.",
    "created_at": "2022-06-28T20:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667247",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:23'></a>
Nitpick, you did not list a license for `hatchling`

```
diff --git a/build/pkgs/hatchling/SPKG.rst b/build/pkgs/hatchling/SPKG.rst
new file mode 100644
index 00000000..23d86bd
--- /dev/null
+++ b/build/pkgs/hatchling/SPKG.rst
@@ -0,0 +1,16 @@
+hatchling: Modern, extensible Python build backend
+==================================================
+
+Description
+-----------
+
+Modern, extensible Python build backend
+
+License
+-------
+
+Upstream Contact
+----------------
+
+https://pypi.org/project/hatchling/
+
```
It is `MIT`.



---

archive/issue_comments_667248.json:
```json
{
    "body": "Changing commit from \"3e9d4a85c976573eb55e617a5c6eacd78629afa0\" to \"5d8111f78a7acf9b3abe670c44d9721708f8e3d9\"",
    "created_at": "2022-06-28T23:58:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667248",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3e9d4a85c976573eb55e617a5c6eacd78629afa0" to "5d8111f78a7acf9b3abe670c44d9721708f8e3d9"



---

archive/issue_comments_667249.json:
```json
{
    "body": "<a id='comment:24'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[5d8111f](https://github.com/sagemath/sagetrac-mirror/commit/5d8111f78a7acf9b3abe670c44d9721708f8e3d9)|`build/pkgs/hatchling/SPKG.rst: Add license info`|",
    "created_at": "2022-06-28T23:58:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667249",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[5d8111f](https://github.com/sagemath/sagetrac-mirror/commit/5d8111f78a7acf9b3abe670c44d9721708f8e3d9)|`build/pkgs/hatchling/SPKG.rst: Add license info`|



---

archive/issue_comments_667250.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2022-06-28T23:58:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667250",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_667251.json:
```json
{
    "body": "<a id='comment:25'></a>\nThanks!",
    "created_at": "2022-06-28T23:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667251",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
Thanks!



---

archive/issue_comments_667252.json:
```json
{
    "body": "Changing reviewer from \"Dima Pasechnik\" to \"Dima Pasechnik, Fran\u00e7ois Bissey\"",
    "created_at": "2022-06-28T23:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667252",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "Dima Pasechnik" to "Dima Pasechnik, François Bissey"



---

archive/issue_comments_667253.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-06-28T23:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667253",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_667254.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-06-30T04:39:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667254",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_667255.json:
```json
{
    "body": "<a id='comment:26'></a>\nDoctest failures, I think because of the `pip` upgrade:\n\n```\nsage -t --random-seed=40701510628761718232931312764279214628 src/sage/misc/package.py\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 146, in sage.misc.package.pip_installed_packages\nFailed example:\n    'scipy' in d  # optional - sage_spkg\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 148, in sage.misc.package.pip_installed_packages\nFailed example:\n    d['scipy']  # optional - sage_spkg\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.7.beta3/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 695, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.7.beta3/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1093, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.pip_installed_packages[3]>\", line 1, in <module>\n        d['scipy']  # optional - sage_spkg\n    KeyError: 'scipy'\n```",
    "created_at": "2022-06-30T04:39:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667255",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:26'></a>
Doctest failures, I think because of the `pip` upgrade:

```
sage -t --random-seed=40701510628761718232931312764279214628 src/sage/misc/package.py
**********************************************************************
File "src/sage/misc/package.py", line 146, in sage.misc.package.pip_installed_packages
Failed example:
    'scipy' in d  # optional - sage_spkg
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/misc/package.py", line 148, in sage.misc.package.pip_installed_packages
Failed example:
    d['scipy']  # optional - sage_spkg
Exception raised:
    Traceback (most recent call last):
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.7.beta3/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.7.beta3/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.misc.package.pip_installed_packages[3]>", line 1, in <module>
        d['scipy']  # optional - sage_spkg
    KeyError: 'scipy'
```



---

archive/issue_comments_667256.json:
```json
{
    "body": "<a id='comment:27'></a>\nThe issue is that the dictionary `pip_installed_packages()` now has a key `\"SciPy\"` rather than `\"scipy\"`. I suggested several possible fixes atticket: ticket:33530#comment:68#comment:33530 andticket: ticket:33530#comment:69#comment:33530.",
    "created_at": "2022-06-30T04:40:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667256",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:27'></a>
The issue is that the dictionary `pip_installed_packages()` now has a key `"SciPy"` rather than `"scipy"`. I suggested several possible fixes atticket: ticket:33530#comment:68#comment:33530 andticket: ticket:33530#comment:69#comment:33530.



---

archive/issue_comments_667257.json:
```json
{
    "body": "<a id='comment:28'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|\n|[6607401](https://github.com/sagemath/sagetrac-mirror/commit/6607401b099778c2178ee7eed0a60691248b7c48)|`src/sage/misc/package.py (pip_installed_packages): Make doctests more flexible`|",
    "created_at": "2022-06-30T17:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667257",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|
|[6607401](https://github.com/sagemath/sagetrac-mirror/commit/6607401b099778c2178ee7eed0a60691248b7c48)|`src/sage/misc/package.py (pip_installed_packages): Make doctests more flexible`|



---

archive/issue_comments_667258.json:
```json
{
    "body": "Changing commit from \"5d8111f78a7acf9b3abe670c44d9721708f8e3d9\" to \"6607401b099778c2178ee7eed0a60691248b7c48\"",
    "created_at": "2022-06-30T17:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667258",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5d8111f78a7acf9b3abe670c44d9721708f8e3d9" to "6607401b099778c2178ee7eed0a60691248b7c48"



---

archive/issue_comments_667259.json:
```json
{
    "body": "<a id='comment:29'></a>\nThanks for catching this and your suggestions. I have made similar changes to the doctests. The doctests now accept both formats. I think it's not necessary to track down which of the updated packages is responsible for this change. I wouldn't want to have to tighten version bounds in `install-requires.txt` for this package just for this doctest.",
    "created_at": "2022-06-30T18:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667259",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>
Thanks for catching this and your suggestions. I have made similar changes to the doctests. The doctests now accept both formats. I think it's not necessary to track down which of the updated packages is responsible for this change. I wouldn't want to have to tighten version bounds in `install-requires.txt` for this package just for this doctest.



---

archive/issue_comments_667260.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-06-30T18:06:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667260",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_667261.json:
```json
{
    "body": "<a id='comment:31'></a>\nLooks good, thank you.",
    "created_at": "2022-06-30T18:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667261",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:31'></a>
Looks good, thank you.



---

archive/issue_comments_667262.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-06-30T18:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667262",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_667263.json:
```json
{
    "body": "Changing reviewer from \"Dima Pasechnik, Fran\u00e7ois Bissey\" to \"Dima Pasechnik, Fran\u00e7ois Bissey, John Palmieri\"",
    "created_at": "2022-06-30T18:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667263",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "Dima Pasechnik, François Bissey" to "Dima Pasechnik, François Bissey, John Palmieri"



---

archive/issue_comments_667264.json:
```json
{
    "body": "<a id='comment:32'></a>\nThanks!",
    "created_at": "2022-06-30T18:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667264",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>
Thanks!



---

archive/issue_comments_667265.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/upgrade_jupyter_jsmol__make_jupyter_packaging_standard\" to \"6607401b099778c2178ee7eed0a60691248b7c48\"",
    "created_at": "2022-07-03T22:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667265",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/upgrade_jupyter_jsmol__make_jupyter_packaging_standard" to "6607401b099778c2178ee7eed0a60691248b7c48"



---

archive/issue_events_107937.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-03T22:06:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33866#event-107937"
}
```



---

archive/issue_comments_667266.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-07-03T22:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667266",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_667267.json:
```json
{
    "body": "Changing commit from \"6607401b099778c2178ee7eed0a60691248b7c48\" to \"\"",
    "created_at": "2022-08-24T10:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667267",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "6607401b099778c2178ee7eed0a60691248b7c48" to ""



---

archive/issue_comments_667268.json:
```json
{
    "body": "<a id='comment:34'></a>\nas it turns out, jupyter_jsmol installation process fetches more js stuff than there is in the tarball:\n\n```\njjupyter_jsmol-2022.1.0] Building wheels for collected packages: jupyter-jsmol\n[jupyter_jsmol-2022.1.0]   WARNING: Ignoring --build-option when building jupyter-jsmol using PEP 517\n[jupyter_jsmol-2022.1.0]   Building wheel for jupyter-jsmol (pyproject.toml): started\n[jupyter_jsmol-2022.1.0]   Running command Building wheel for jupyter-jsmol (pyproject.toml)\n[jupyter_jsmol-2022.1.0]   setup.py entered\n[jupyter_jsmol-2022.1.0]   $PATH=/mnt/opt/Sage/sage-dev/build/bin:/mnt/opt/Sage/sage-dev/local/var/lib/sage/venv-python3.10/bin:/mnt/opt/Sage/sage-dev/local/bin:/mnt/opt/Sage/sage-dev/build/bin:/mnt/opt/Sage/sage-dev/local/bin:/mnt/opt/Sage/sage-dev/local/var/lib/sage/venv-python3.10/bin:/mnt/opt/Sage/sage-dev/build/bin:/mnt/opt/Sage/sage-dev/src/bin:/mnt/opt/Sage/sage-dev/local/bin:/home/dima/.elan/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin:/usr/lib/llvm/14/bin:/home/dima/.local/bin:/home/dima/.local/bin\n[jupyter_jsmol-2022.1.0]   <string>:47: DeprecatedWarning: create_cmdclass is deprecated as of 0.8 and will be removed in 1.0. \"\n[jupyter_jsmol-2022.1.0]   Use `wrap_installers` to handle prebuild steps in cmdclass.\n[jupyter_jsmol-2022.1.0]   Use `get_data_files` to handle data files.\n[jupyter_jsmol-2022.1.0]   Use `include_package_data=True` and `MANIFEST.in` for package data.\n[jupyter_jsmol-2022.1.0] \n[jupyter_jsmol-2022.1.0]   <string>:49: DeprecatedWarning: install_npm is deprecated as of 0.8 and will be removed in 1.0. Use `npm_builder` and `wrap_installers`\n[jupyter_jsmol-2022.1.0]   running bdist_wheel\n[jupyter_jsmol-2022.1.0]   running jsdeps\n[jupyter_jsmol-2022.1.0]   Installing build dependencies with npm.  This may take a while...\n[jupyter_jsmol-2022.1.0]   > yarn install\n[jupyter_jsmol-2022.1.0]   yarn install v1.22.19\n[jupyter_jsmol-2022.1.0]   warning package.json: No license field\n[jupyter_jsmol-2022.1.0]   warning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.\n[jupyter_jsmol-2022.1.0]   warning jupyter-jsmol@2022.1.0: No license field\n[jupyter_jsmol-2022.1.0]   [1/4] Resolving packages...\n[jupyter_jsmol-2022.1.0]   [2/4] Fetching packages...\n[jupyter_jsmol-2022.1.0]   info There appears to be trouble with your network connection. Retrying...\n...\n```\n\naand it hangs - even tough the network is OK :-(",
    "created_at": "2022-08-24T10:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667268",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'></a>
as it turns out, jupyter_jsmol installation process fetches more js stuff than there is in the tarball:

```
jjupyter_jsmol-2022.1.0] Building wheels for collected packages: jupyter-jsmol
[jupyter_jsmol-2022.1.0]   WARNING: Ignoring --build-option when building jupyter-jsmol using PEP 517
[jupyter_jsmol-2022.1.0]   Building wheel for jupyter-jsmol (pyproject.toml): started
[jupyter_jsmol-2022.1.0]   Running command Building wheel for jupyter-jsmol (pyproject.toml)
[jupyter_jsmol-2022.1.0]   setup.py entered
[jupyter_jsmol-2022.1.0]   $PATH=/mnt/opt/Sage/sage-dev/build/bin:/mnt/opt/Sage/sage-dev/local/var/lib/sage/venv-python3.10/bin:/mnt/opt/Sage/sage-dev/local/bin:/mnt/opt/Sage/sage-dev/build/bin:/mnt/opt/Sage/sage-dev/local/bin:/mnt/opt/Sage/sage-dev/local/var/lib/sage/venv-python3.10/bin:/mnt/opt/Sage/sage-dev/build/bin:/mnt/opt/Sage/sage-dev/src/bin:/mnt/opt/Sage/sage-dev/local/bin:/home/dima/.elan/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin:/usr/lib/llvm/14/bin:/home/dima/.local/bin:/home/dima/.local/bin
[jupyter_jsmol-2022.1.0]   <string>:47: DeprecatedWarning: create_cmdclass is deprecated as of 0.8 and will be removed in 1.0. "
[jupyter_jsmol-2022.1.0]   Use `wrap_installers` to handle prebuild steps in cmdclass.
[jupyter_jsmol-2022.1.0]   Use `get_data_files` to handle data files.
[jupyter_jsmol-2022.1.0]   Use `include_package_data=True` and `MANIFEST.in` for package data.
[jupyter_jsmol-2022.1.0] 
[jupyter_jsmol-2022.1.0]   <string>:49: DeprecatedWarning: install_npm is deprecated as of 0.8 and will be removed in 1.0. Use `npm_builder` and `wrap_installers`
[jupyter_jsmol-2022.1.0]   running bdist_wheel
[jupyter_jsmol-2022.1.0]   running jsdeps
[jupyter_jsmol-2022.1.0]   Installing build dependencies with npm.  This may take a while...
[jupyter_jsmol-2022.1.0]   > yarn install
[jupyter_jsmol-2022.1.0]   yarn install v1.22.19
[jupyter_jsmol-2022.1.0]   warning package.json: No license field
[jupyter_jsmol-2022.1.0]   warning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.
[jupyter_jsmol-2022.1.0]   warning jupyter-jsmol@2022.1.0: No license field
[jupyter_jsmol-2022.1.0]   [1/4] Resolving packages...
[jupyter_jsmol-2022.1.0]   [2/4] Fetching packages...
[jupyter_jsmol-2022.1.0]   info There appears to be trouble with your network connection. Retrying...
...
```

aand it hangs - even tough the network is OK :-(



---

archive/issue_comments_667269.json:
```json
{
    "body": "<a id='comment:35'></a>\nfollow-up on #34421",
    "created_at": "2022-08-24T11:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33866",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33866#issuecomment-667269",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:35'></a>
follow-up on #34421
