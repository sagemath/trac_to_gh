# Issue 33733: allow to use flint for Stirling numbers

archive/issues_033496.json:
```json
{
    "body": "of both kind\n\nCC:  @tscrim @slel @kliem @kwankyu\n\nBranch/Commit: bbd7807cf9aa149776067cde757b2a81bc85f3e5\n\nReviewer: Marc Mezzarobba, Travis Scrimshaw\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33733\n\n",
    "closed_at": "2022-05-22T16:32:25Z",
    "created_at": "2022-04-19T15:12:57Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "allow to use flint for Stirling numbers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33733",
    "user": "https://github.com/fchapoton"
}
```
of both kind

CC:  @tscrim @slel @kliem @kwankyu

Branch/Commit: bbd7807cf9aa149776067cde757b2a81bc85f3e5

Reviewer: Marc Mezzarobba, Travis Scrimshaw

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33733





---

archive/issue_comments_672778.json:
```json
{
    "body": "Changing commit from \"\" to \"adf124483735f8ef246f75393adc76e874d32a61\"",
    "created_at": "2022-04-19T15:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672778",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "adf124483735f8ef246f75393adc76e874d32a61"



---

archive/issue_comments_672779.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/33733\"",
    "created_at": "2022-04-19T15:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672779",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/33733"



---

archive/issue_comments_672780.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-04-19T15:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672780",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_672781.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2022-04-19T15:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672781",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_672782.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-19T15:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672782",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_672783.json:
```json
{
    "body": "Changing commit from \"adf124483735f8ef246f75393adc76e874d32a61\" to \"722c2db180aa6f8c6d2f1ebf8cda1ff0571abe32\"",
    "created_at": "2022-04-19T15:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672783",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "adf124483735f8ef246f75393adc76e874d32a61" to "722c2db180aa6f8c6d2f1ebf8cda1ff0571abe32"



---

archive/issue_comments_672784.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-19T15:17:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672784",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_672785.json:
```json
{
    "body": "Changing commit from \"722c2db180aa6f8c6d2f1ebf8cda1ff0571abe32\" to \"384ac6eb47efd51f63297a9bf165534bbe29c01d\"",
    "created_at": "2022-04-19T15:17:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672785",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "722c2db180aa6f8c6d2f1ebf8cda1ff0571abe32" to "384ac6eb47efd51f63297a9bf165534bbe29c01d"



---

archive/issue_comments_672786.json:
```json
{
    "body": "<a id='comment:4'></a>green bot, so please review",
    "created_at": "2022-04-21T15:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672786",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>green bot, so please review



---

archive/issue_comments_672787.json:
```json
{
    "body": "<a id='comment:5'></a>Maybe one should not remove the maxima algorithm, which is not using the pexpect interface in fact ?",
    "created_at": "2022-04-21T15:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672787",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>Maybe one should not remove the maxima algorithm, which is not using the pexpect interface in fact ?



---

archive/issue_comments_672788.json:
```json
{
    "body": "<a id='comment:6'></a>I agree that it would be better not to remove the `algorithm=\"maxima\"` option without deprecating it first.\n\nAs far as I understand, the native Sage implementation of the Stirling numbers of the second kind and the Sage implementation were both written by Fredrik. Is the native Sage version better in some way? Do we need to keep it at all?\n\nWould it make sense to change the default implementation for some of the functions?\n\nA minor style point: why do you write\n\n```\ndef stirling_number1(n, k, algorithm=None) -> Integer:\n    ...\n    if algorithm is None:\n        algorithm='gap'\n```\nrather than\n\n```\ndef stirling_number1(n, k, algorithm=\"gap\") -> Integer:\n    ...\n```\n?",
    "created_at": "2022-04-21T16:07:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672788",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:6'></a>I agree that it would be better not to remove the `algorithm="maxima"` option without deprecating it first.

As far as I understand, the native Sage implementation of the Stirling numbers of the second kind and the Sage implementation were both written by Fredrik. Is the native Sage version better in some way? Do we need to keep it at all?

Would it make sense to change the default implementation for some of the functions?

A minor style point: why do you write

```
def stirling_number1(n, k, algorithm=None) -> Integer:
    ...
    if algorithm is None:
        algorithm='gap'
```
rather than

```
def stirling_number1(n, k, algorithm="gap") -> Integer:
    ...
```
?



---

archive/issue_comments_672789.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-21T18:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672789",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_672790.json:
```json
{
    "body": "Changing commit from \"384ac6eb47efd51f63297a9bf165534bbe29c01d\" to \"bbd7807cf9aa149776067cde757b2a81bc85f3e5\"",
    "created_at": "2022-04-21T18:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672790",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "384ac6eb47efd51f63297a9bf165534bbe29c01d" to "bbd7807cf9aa149776067cde757b2a81bc85f3e5"



---

archive/issue_comments_672791.json:
```json
{
    "body": "<a id='comment:8'></a>voila, j'ai remis l'algorithme \"maxima\" en place",
    "created_at": "2022-04-21T18:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672791",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>voila, j'ai remis l'algorithme "maxima" en place



---

archive/issue_comments_672792.json:
```json
{
    "body": "<a id='comment:9'></a>et le patchbot est tout vert",
    "created_at": "2022-04-22T06:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672792",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>et le patchbot est tout vert



---

archive/issue_comments_672793.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1 @@\n of both kind\n-\n-also get rid of slow usage of maxima pexpect interface\n``````\n",
    "created_at": "2022-04-29T11:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672793",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1 @@
 of both kind
-
-also get rid of slow usage of maxima pexpect interface
``````




---

archive/issue_comments_672794.json:
```json
{
    "body": "<a id='comment:11'></a>please review",
    "created_at": "2022-04-29T11:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672794",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'></a>please review



---

archive/issue_comments_672795.json:
```json
{
    "body": "<a id='comment:12'></a>What about Marc's other questions in[comment:6](#comment%3A6)?",
    "created_at": "2022-04-29T23:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672795",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>What about Marc's other questions in[comment:6](#comment%3A6)?



---

archive/issue_comments_672796.json:
```json
{
    "body": "<a id='comment:13'></a>> As far as I understand, the native Sage implementation of the Stirling numbers of the second kind and the Sage implementation were both written by Fredrik. Is the native Sage version better in some way? Do we need to keep it at all?\n\n\n> Would it make sense to change the default implementation for some of the functions?\n\n\nI have no idea, and do not plan to investigate",
    "created_at": "2022-04-30T06:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672796",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:13'></a>> As far as I understand, the native Sage implementation of the Stirling numbers of the second kind and the Sage implementation were both written by Fredrik. Is the native Sage version better in some way? Do we need to keep it at all?


> Would it make sense to change the default implementation for some of the functions?


I have no idea, and do not plan to investigate



---

archive/issue_events_088655.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33733#event-88655"
}
```



---

archive/issue_comments_672797.json:
```json
{
    "body": "<a id='comment:15'></a>may we please move forward here ?",
    "created_at": "2022-05-20T06:28:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672797",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:15'></a>may we please move forward here ?



---

archive/issue_comments_672798.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Marc Mezzarobba, Travis Scrimshaw\"",
    "created_at": "2022-05-20T07:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672798",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Marc Mezzarobba, Travis Scrimshaw"



---

archive/issue_comments_672799.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-20T07:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672799",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_672800.json:
```json
{
    "body": "<a id='comment:16'></a>Sorry, I lost track of this. Thank you. LGTM.",
    "created_at": "2022-05-20T07:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672800",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>Sorry, I lost track of this. Thank you. LGTM.



---

archive/issue_events_088656.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-22T16:32:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33733#event-88656"
}
```



---

archive/issue_comments_672801.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-05-22T16:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672801",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_672802.json:
```json
{
    "body": "Changing branch from \"u/chapoton/33733\" to \"bbd7807cf9aa149776067cde757b2a81bc85f3e5\"",
    "created_at": "2022-05-22T16:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33733#issuecomment-672802",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/chapoton/33733" to "bbd7807cf9aa149776067cde757b2a81bc85f3e5"
