# Issue 33277: build/pkgs/_recommended/dependencies

archive/issues_033040.json:
```json
{
    "body": "From #32956#comment:7\n\n`src/doc/bootstrap` currently hardcodes the \"recommended\" packages.\n\nWe replace this by using the new file `build/pkgs/_recommended/dependencies`\n\nThe new file can then also be used for provisioning system packages for the new `recommended` factor (added in #33222).\n\nWe also add `git` as a recommended package.\n\nCC:  @seblabbe @dimpase\n\nBranch/Commit: 3164fff57cc72a83b5ce6f7177e7bfa4e4ad82b4\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nDependencies: #31529\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33277\n\n",
    "closed_at": "2022-02-13T10:17:44Z",
    "created_at": "2022-02-02T18:43:14Z",
    "labels": [
        "component: build",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "build/pkgs/_recommended/dependencies",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33277",
    "user": "https://github.com/mkoeppe"
}
```
From #32956#comment:7

`src/doc/bootstrap` currently hardcodes the "recommended" packages.

We replace this by using the new file `build/pkgs/_recommended/dependencies`

The new file can then also be used for provisioning system packages for the new `recommended` factor (added in #33222).

We also add `git` as a recommended package.

CC:  @seblabbe @dimpase

Branch/Commit: 3164fff57cc72a83b5ce6f7177e7bfa4e4ad82b4

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Dependencies: #31529

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33277





---

archive/issue_comments_663905.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/build_pkgs__recommended_dependencies\"",
    "created_at": "2022-02-02T19:08:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663905",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/build_pkgs__recommended_dependencies"



---

archive/issue_comments_663906.json:
```json
{
    "body": "Changing commit from \"\" to \"855314d5d2a9ccaa612b50baacab2cdf4e7e802a\"",
    "created_at": "2022-02-02T19:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663906",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "855314d5d2a9ccaa612b50baacab2cdf4e7e802a"



---

archive/issue_comments_663907.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2022-02-02T19:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663907",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_663908.json:
```json
{
    "body": "<a id='comment:2'></a>\nLast 10 new commits:\n|                                                                                                                                          |                                                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|\n|[a505487](https://git.sagemath.org/sage.git/commit?id=a50548772c74a04901c44e563c3d7cc5a47e6608)|`build/pkgs/texlive/distros/fedora.txt: Add texlive-collection-latexextra`|\n|[7daedd9](https://git.sagemath.org/sage.git/commit?id=7daedd97d05d1820b828ae5baf3dae0c20df3f1c)|`build/pkgs/texlive/distros/fedora.txt: Add texlive-collection-lang*`|\n|[6952de4](https://git.sagemath.org/sage.git/commit?id=6952de429b08d78f03854ce22498db3581118ebf)|`build/pkgs/texlive/spkg-configure.m4: Check for pdflatex, latexmk, dvipng`|\n|[b85356f](https://git.sagemath.org/sage.git/commit?id=b85356f7beea417338a64b856649251a30a1bdc6)|`build/pkgs/texlive/spkg-configure.m4: Check for tgtermes.sty`|\n|[62fbc45](https://git.sagemath.org/sage.git/commit?id=62fbc45faba4a9e95d851f92bcb1c19d3bc50021)|`build/pkgs/sagemath_doc_pdf/dependencies: Add texlive`|\n|[e63b9f2](https://git.sagemath.org/sage.git/commit?id=e63b9f293d779c630f802cf8ff7622d8bfd45d84)|`Merge tag '9.5' into t/31529/packages/texlive/add_spkg_configure_m4_and_system_package_information__remove_install_script`|\n|[8b2490e](https://git.sagemath.org/sage.git/commit?id=8b2490e6f6aa700462a97bfc827855c80218c1b0)|`build/pkgs/texlive/spkg-configure.m4: ALso check for fncychap.sty`|\n|[7b97dd4](https://git.sagemath.org/sage.git/commit?id=7b97dd40a69ce62d908849a7ab9b3f5418dc0600)|`update list of gentoo packages`|\n|[016ff89](https://git.sagemath.org/sage.git/commit?id=016ff897d9aa941928f0c1865f02da3ed491dc80)|`Merge #31529`|\n|[855314d](https://git.sagemath.org/sage.git/commit?id=855314d5d2a9ccaa612b50baacab2cdf4e7e802a)|`src/doc/bootstrap: Get recommended spkg from build/pkgs/_recommended/dependencies`|",
    "created_at": "2022-02-02T19:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663908",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
Last 10 new commits:
|                                                                                                                                          |                                                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|
|[a505487](https://git.sagemath.org/sage.git/commit?id=a50548772c74a04901c44e563c3d7cc5a47e6608)|`build/pkgs/texlive/distros/fedora.txt: Add texlive-collection-latexextra`|
|[7daedd9](https://git.sagemath.org/sage.git/commit?id=7daedd97d05d1820b828ae5baf3dae0c20df3f1c)|`build/pkgs/texlive/distros/fedora.txt: Add texlive-collection-lang*`|
|[6952de4](https://git.sagemath.org/sage.git/commit?id=6952de429b08d78f03854ce22498db3581118ebf)|`build/pkgs/texlive/spkg-configure.m4: Check for pdflatex, latexmk, dvipng`|
|[b85356f](https://git.sagemath.org/sage.git/commit?id=b85356f7beea417338a64b856649251a30a1bdc6)|`build/pkgs/texlive/spkg-configure.m4: Check for tgtermes.sty`|
|[62fbc45](https://git.sagemath.org/sage.git/commit?id=62fbc45faba4a9e95d851f92bcb1c19d3bc50021)|`build/pkgs/sagemath_doc_pdf/dependencies: Add texlive`|
|[e63b9f2](https://git.sagemath.org/sage.git/commit?id=e63b9f293d779c630f802cf8ff7622d8bfd45d84)|`Merge tag '9.5' into t/31529/packages/texlive/add_spkg_configure_m4_and_system_package_information__remove_install_script`|
|[8b2490e](https://git.sagemath.org/sage.git/commit?id=8b2490e6f6aa700462a97bfc827855c80218c1b0)|`build/pkgs/texlive/spkg-configure.m4: ALso check for fncychap.sty`|
|[7b97dd4](https://git.sagemath.org/sage.git/commit?id=7b97dd40a69ce62d908849a7ab9b3f5418dc0600)|`update list of gentoo packages`|
|[016ff89](https://git.sagemath.org/sage.git/commit?id=016ff897d9aa941928f0c1865f02da3ed491dc80)|`Merge #31529`|
|[855314d](https://git.sagemath.org/sage.git/commit?id=855314d5d2a9ccaa612b50baacab2cdf4e7e802a)|`src/doc/bootstrap: Get recommended spkg from build/pkgs/_recommended/dependencies`|



---

archive/issue_comments_663909.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-02-02T19:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663909",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_663910.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,3 +6,4 @@\n \n The new file can then also be used for provisioning system packages for the new `recommended` factor (added in #33222).\n \n+We also add `git` as a recommended package.\n``````\n",
    "created_at": "2022-02-05T01:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663910",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,3 +6,4 @@
 
 The new file can then also be used for provisioning system packages for the new `recommended` factor (added in #33222).
 
+We also add `git` as a recommended package.
``````




---

archive/issue_comments_663911.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[3164fff](https://git.sagemath.org/sage.git/commit/?id=3164fff57cc72a83b5ce6f7177e7bfa4e4ad82b4)|`build/pkgs/_recommended/dependencies: Add git`|",
    "created_at": "2022-02-05T01:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663911",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[3164fff](https://git.sagemath.org/sage.git/commit/?id=3164fff57cc72a83b5ce6f7177e7bfa4e4ad82b4)|`build/pkgs/_recommended/dependencies: Add git`|



---

archive/issue_comments_663912.json:
```json
{
    "body": "Changing commit from \"855314d5d2a9ccaa612b50baacab2cdf4e7e802a\" to \"3164fff57cc72a83b5ce6f7177e7bfa4e4ad82b4\"",
    "created_at": "2022-02-05T01:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663912",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "855314d5d2a9ccaa612b50baacab2cdf4e7e802a" to "3164fff57cc72a83b5ce6f7177e7bfa4e4ad82b4"



---

archive/issue_comments_663913.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2022-02-05T04:35:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663913",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_663914.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-02-05T04:35:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663914",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_663915.json:
```json
{
    "body": "<a id='comment:6'></a>\nlgtm (it's just 1-line diff)",
    "created_at": "2022-02-05T04:35:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663915",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>
lgtm (it's just 1-line diff)



---

archive/issue_comments_663916.json:
```json
{
    "body": "<a id='comment:7'></a>\nNo, there's more",
    "created_at": "2022-02-05T05:29:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663916",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
No, there's more



---

archive/issue_comments_663917.json:
```json
{
    "body": "<a id='comment:8'></a>\nSorry, I am arriving late here. When I run configure, I see:\n\n```\n-----------------------------------------------------------------------------\nChecking whether SageMath should install SPKG _recommended...\nconfigure: no suitable system package found for SPKG _recommended\n-----------------------------------------------------------------------------\n```\n\nIs this normal? I have the dependencies ffmpeg, texlive, pandoc, imagemagick, git installed.",
    "created_at": "2022-02-10T10:43:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663917",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:8'></a>
Sorry, I am arriving late here. When I run configure, I see:

```
-----------------------------------------------------------------------------
Checking whether SageMath should install SPKG _recommended...
configure: no suitable system package found for SPKG _recommended
-----------------------------------------------------------------------------
```

Is this normal? I have the dependencies ffmpeg, texlive, pandoc, imagemagick, git installed.



---

archive/issue_comments_663918.json:
```json
{
    "body": "<a id='comment:9'></a>\nAlso, I observe that the following command returns:\n\n```\n$ (for a in $(head -n 1 build/pkgs/_recommended/dependencies); do echo -n \"|\"$a; done)\n```\n|pandoc|ffmpeg|imagemagick|texlive|git\n\nTherefore, I understand the current change\n\n```diff\n-                           _recommended:*|pandoc:*|ffmpeg:*|imagemagick:*|texlive:*)\n+                           $RECOMMENDED_SPKG_PATTERN:*)\n```\n\nas\n\n```diff\n-                           _recommended:*|pandoc:*|ffmpeg:*|imagemagick:*|texlive:*)\n+                           _recommended:|pandoc|ffmpeg|imagemagick|texlive|git:*)\n```\n\nI feel there are some `*` and `:` missing...",
    "created_at": "2022-02-10T10:51:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663918",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:9'></a>
Also, I observe that the following command returns:

```
$ (for a in $(head -n 1 build/pkgs/_recommended/dependencies); do echo -n "|"$a; done)
```
|pandoc|ffmpeg|imagemagick|texlive|git

Therefore, I understand the current change

```diff
-                           _recommended:*|pandoc:*|ffmpeg:*|imagemagick:*|texlive:*)
+                           $RECOMMENDED_SPKG_PATTERN:*)
```

as

```diff
-                           _recommended:*|pandoc:*|ffmpeg:*|imagemagick:*|texlive:*)
+                           _recommended:|pandoc|ffmpeg|imagemagick|texlive|git:*)
```

I feel there are some `*` and `:` missing...



---

archive/issue_comments_663919.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2022-02-10T10:51:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663919",
    "user": "https://github.com/seblabbe"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_663920.json:
```json
{
    "body": "<a id='comment:10'></a>\nYou're missing that there is a ``@`(...)`, see https://www.gnu.org/software/bash/manual/html_node/Pattern-Matching.html\n\nThe `case` is\n\n```\n@(_recommended:|pandoc|ffmpeg|imagemagick|texlive|git):* \n```",
    "created_at": "2022-02-10T18:20:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663920",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
You're missing that there is a ``@`(...)`, see https://www.gnu.org/software/bash/manual/html_node/Pattern-Matching.html

The `case` is

```
@(_recommended:|pandoc|ffmpeg|imagemagick|texlive|git):* 
```



---

archive/issue_comments_663921.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [slabbe](#comment%3A8):\n> Sorry, I am arriving late here. When I run configure, I see:\n> \n> \n> ```\n> -----------------------------------------------------------------------------\n> Checking whether SageMath should install SPKG _recommended...\n> configure: no suitable system package found for SPKG _recommended\n> -----------------------------------------------------------------------------\n> ```\n> \n> Is this normal?\n\n\nYes, see #30930#comment:6",
    "created_at": "2022-02-10T18:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663921",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Replying to [slabbe](#comment%3A8):
> Sorry, I am arriving late here. When I run configure, I see:
> 
> 
> ```
> -----------------------------------------------------------------------------
> Checking whether SageMath should install SPKG _recommended...
> configure: no suitable system package found for SPKG _recommended
> -----------------------------------------------------------------------------
> ```
> 
> Is this normal?


Yes, see #30930#comment:6



---

archive/issue_comments_663922.json:
```json
{
    "body": "<a id='comment:12'></a>\nOk, looks good then!",
    "created_at": "2022-02-10T21:59:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663922",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:12'></a>
Ok, looks good then!



---

archive/issue_comments_663923.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2022-02-10T21:59:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663923",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_663924.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [mkoeppe](#comment%3A10):\n> The `case` is\n> \n> ```\n> @(_recommended:|pandoc|ffmpeg|imagemagick|texlive|git):* \n> ```\n\n\nShould it be?\n\n```\n@(_recommended|pandoc|ffmpeg|imagemagick|texlive|git):* \n```",
    "created_at": "2022-02-11T07:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663924",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:13'></a>
Replying to [mkoeppe](#comment%3A10):
> The `case` is
> 
> ```
> @(_recommended:|pandoc|ffmpeg|imagemagick|texlive|git):* 
> ```


Should it be?

```
@(_recommended|pandoc|ffmpeg|imagemagick|texlive|git):* 
```



---

archive/issue_comments_663925.json:
```json
{
    "body": "<a id='comment:14'></a>\nYes, a typo in my comment. The actual code:\n\n```\n$ echo \"@(_recommended$(for a in $(head -n 1 build/pkgs/_recommended/dependencies); do echo -n \"|\"$a; done))\"\n@(_recommended|pandoc|ffmpeg|imagemagick|texlive|git)\n```",
    "created_at": "2022-02-11T18:23:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663925",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Yes, a typo in my comment. The actual code:

```
$ echo "@(_recommended$(for a in $(head -n 1 build/pkgs/_recommended/dependencies); do echo -n "|"$a; done))"
@(_recommended|pandoc|ffmpeg|imagemagick|texlive|git)
```



---

archive/issue_comments_663926.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2022-02-11T19:50:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663926",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_events_087859.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-13T10:17:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33277#event-87859"
}
```



---

archive/issue_comments_663927.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-02-13T10:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663927",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_663928.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/build_pkgs__recommended_dependencies\" to \"3164fff57cc72a83b5ce6f7177e7bfa4e4ad82b4\"",
    "created_at": "2022-02-13T10:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33277",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33277#issuecomment-663928",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/build_pkgs__recommended_dependencies" to "3164fff57cc72a83b5ce6f7177e7bfa4e4ad82b4"
