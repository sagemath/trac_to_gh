# Issue 33017: LazyImport.__instancecheck__, __subclasscheck__: Return False on ImportError

archive/issues_032780.json:
```json
{
    "body": "No object is an instance of a class that cannot be imported.\n\nNo class is a subclass of a class that cannot be imported.\n\nHence, we change `LazyImport` so that the special methods `__instancecheck__`, `__subclasscheck__` catch `ImportError` and just return False.\n\n(We do not use the stronger versions of these two statements: \"No object is an instance of a class that has not been imported yet (i.e., the module name is not in `sys.modules`).\" These are true only if there are no re-exports.)\n\nWith this change to `LazyImport`, we have another instrument for modularization of code that uses `isinstance` checks. (The use of `isinstance` with ABCs (#32566) is preferable because it avoids importing an otherwise unused implementation class.)\n\n\nCC:  @tscrim @kliem\n\nReviewer: Jonathan Kliem\n\nAuthor: Matthias Koeppe\n\nBranch: 7adef969f2dcb713b570fdafbb780a8b3081c5e6\n\nDependencies: #32899\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33017\n\n",
    "closed_at": "2022-04-10T13:12:41Z",
    "created_at": "2021-12-13T06:33:25Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "LazyImport.__instancecheck__, __subclasscheck__: Return False on ImportError",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33017",
    "user": "https://github.com/mkoeppe"
}
```
No object is an instance of a class that cannot be imported.

No class is a subclass of a class that cannot be imported.

Hence, we change `LazyImport` so that the special methods `__instancecheck__`, `__subclasscheck__` catch `ImportError` and just return False.

(We do not use the stronger versions of these two statements: "No object is an instance of a class that has not been imported yet (i.e., the module name is not in `sys.modules`)." These are true only if there are no re-exports.)

With this change to `LazyImport`, we have another instrument for modularization of code that uses `isinstance` checks. (The use of `isinstance` with ABCs (#32566) is preferable because it avoids importing an otherwise unused implementation class.)


CC:  @tscrim @kliem

Reviewer: Jonathan Kliem

Author: Matthias Koeppe

Branch: 7adef969f2dcb713b570fdafbb780a8b3081c5e6

Dependencies: #32899

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33017





---

archive/issue_comments_499200.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-12-13T06:44:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33017#issuecomment-499200",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_499201.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2021-12-13T06:44:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33017#issuecomment-499201",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_499202.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,13 @@\n No object is an instance of a class that cannot be imported.\n \n No class is a subclass of a class that cannot be imported.\n+\n+Hence, we change `LazyImport` so that the special methods `__instancecheck__`, `__subclasscheck__` catch `ImportError` and just return False.\n+\n+(We do not use the stronger versions of these two statements: \"No object is an instance of a class that has not been imported yet (i.e., the module is in `sys.modules`.\" These are true only if there are no re-exports.)\n+\n+With this change to `LazyImport`, we have another instrument for modularization of code that uses `isinstance` checks. (The use of `isinstance` with ABCs (#32566) is preferable because it avoids importing an otherwise unused implementation class.)\n+\n \n Comment: 1\n \n```\n",
    "created_at": "2021-12-13T08:03:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33017#issuecomment-499202",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,13 @@
 No object is an instance of a class that cannot be imported.
 
 No class is a subclass of a class that cannot be imported.
+
+Hence, we change `LazyImport` so that the special methods `__instancecheck__`, `__subclasscheck__` catch `ImportError` and just return False.
+
+(We do not use the stronger versions of these two statements: "No object is an instance of a class that has not been imported yet (i.e., the module is in `sys.modules`." These are true only if there are no re-exports.)
+
+With this change to `LazyImport`, we have another instrument for modularization of code that uses `isinstance` checks. (The use of `isinstance` with ABCs (#32566) is preferable because it avoids importing an otherwise unused implementation class.)
+
 
 Comment: 1
 
```




---

archive/issue_comments_499203.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,12 @@\n+No object is an instance of a class that cannot be imported.\n+\n+No class is a subclass of a class that cannot be imported.\n+\n+Hence, we change `LazyImport` so that the special methods `__instancecheck__`, `__subclasscheck__` catch `ImportError` and just return False.\n+\n+(We do not use the stronger versions of these two statements: \"No object is an instance of a class that has not been imported yet (i.e., the module name is not in `sys.modules`).\" These are true only if there are no re-exports.)\n+\n+With this change to `LazyImport`, we have another instrument for modularization of code that uses `isinstance` checks. (The use of `isinstance` with ABCs (#32566) is preferable because it avoids importing an otherwise unused implementation class.)\n \n \n Comment: 1\n```\n",
    "created_at": "2021-12-13T08:04:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33017#issuecomment-499203",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,12 @@
+No object is an instance of a class that cannot be imported.
+
+No class is a subclass of a class that cannot be imported.
+
+Hence, we change `LazyImport` so that the special methods `__instancecheck__`, `__subclasscheck__` catch `ImportError` and just return False.
+
+(We do not use the stronger versions of these two statements: "No object is an instance of a class that has not been imported yet (i.e., the module name is not in `sys.modules`)." These are true only if there are no re-exports.)
+
+With this change to `LazyImport`, we have another instrument for modularization of code that uses `isinstance` checks. (The use of `isinstance` with ABCs (#32566) is preferable because it avoids importing an otherwise unused implementation class.)
 
 
 Comment: 1
```




---

archive/issue_comments_499204.json:
```json
{
    "body": "<a id='comment:5'></a>It's not fast I suspect, as it tries an import and fails every time. But it is correct at least.",
    "created_at": "2021-12-13T09:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33017#issuecomment-499204",
    "user": "https://github.com/kliem"
}
```

<a id='comment:5'></a>It's not fast I suspect, as it tries an import and fails every time. But it is correct at least.



---

archive/issue_comments_499205.json:
```json
{
    "body": "<a id='comment:8'></a>I'll add some documentation to discuss performance",
    "created_at": "2021-12-13T20:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33017#issuecomment-499205",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>I'll add some documentation to discuss performance



---

archive/issue_comments_499206.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-12-14T00:17:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33017#issuecomment-499206",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_499207.json:
```json
{
    "body": "<a id='comment:10'></a>No patchbot yet, due to\n\nhttps://groups.google.com/g/sage-devel/c/epajAbPvg6s/m/-yWW1gFyCAAJ",
    "created_at": "2021-12-15T14:42:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33017#issuecomment-499207",
    "user": "https://github.com/kliem"
}
```

<a id='comment:10'></a>No patchbot yet, due to

https://groups.google.com/g/sage-devel/c/epajAbPvg6s/m/-yWW1gFyCAAJ



---

archive/issue_comments_499208.json:
```json
{
    "body": "<a id='comment:11'></a>Edited to remove unrelated failure.\n\n```\n$ sage -t --long --random-seed=57900501385357039198738698054253811820 src/doc/en/developer/packaging_sage_library.rst  # 8 doctests failed\ntoo many failed tests, not using stored timings\nRunning doctests with ID 2021-12-17-15-38-43-8b38ad21.\nGit branch: test_33017\nUsing --optional=4ti2,build,debian,dochtml,e_antic,latte_int,lidia,normaliz,pip,pynormaliz,sage,sage.geometry.polyhedron,sage.rings.real_double,sage_spkg\nDoctesting 1 file.\nsage -t --long --random-seed=57900501385357039198738698054253811820 src/doc/en/developer/packaging_sage_library.rst\n**********************************************************************\nFile \"src/doc/en/developer/packaging_sage_library.rst\", line 285, in doc.en.developer.packaging_sage_library\nFailed example:\n    %timeit isinstance(object, pAdicFieldGeneric)            # fast                           # random\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1086, in compile_and_execute\n        compiled = compiler(example)\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 662, in compiler\n        compileflags, 1)\n      File \"<doctest doc.en.developer.packaging_sage_library[2]>\", line 1\n        %timeit isinstance(object, pAdicFieldGeneric)            # fast                           # random\n        ^\n    SyntaxError: invalid syntax\n**********************************************************************\nFile \"src/doc/en/developer/packaging_sage_library.rst\", line 289, in doc.en.developer.packaging_sage_library\nFailed example:\n    %timeit isinstance(object, sage.rings.abc.pAdicField)    # also fast                      # random\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1086, in compile_and_execute\n        compiled = compiler(example)\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 662, in compiler\n        compileflags, 1)\n      File \"<doctest doc.en.developer.packaging_sage_library[4]>\", line 1\n        %timeit isinstance(object, sage.rings.abc.pAdicField)    # also fast                      # random\n        ^\n    SyntaxError: invalid syntax\n**********************************************************************\nFile \"src/doc/en/developer/packaging_sage_library.rst\", line 311, in doc.en.developer.packaging_sage_library\nFailed example:\n    %timeit is_Scheme_or_Pluffe(sZZ)                         # fast                           # random\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1086, in compile_and_execute\n        compiled = compiler(example)\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 662, in compiler\n        compileflags, 1)\n      File \"<doctest doc.en.developer.packaging_sage_library[3]>\", line 1\n        %timeit is_Scheme_or_Pluffe(sZZ)                         # fast                           # random\n        ^\n    SyntaxError: invalid syntax\n**********************************************************************\nFile \"src/doc/en/developer/packaging_sage_library.rst\", line 314, in doc.en.developer.packaging_sage_library\nFailed example:\n    %timeit is_Scheme_or_Pluffe(ZZ)                          # slow                           # random\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1086, in compile_and_execute\n        compiled = compiler(example)\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 662, in compiler\n        compileflags, 1)\n      File \"<doctest doc.en.developer.packaging_sage_library[4]>\", line 1\n        %timeit is_Scheme_or_Pluffe(ZZ)                          # slow                           # random\n        ^\n    SyntaxError: invalid syntax\n**********************************************************************\nFile \"src/doc/en/developer/packaging_sage_library.rst\", line 323, in doc.en.developer.packaging_sage_library\nFailed example:\n    %timeit isinstance(sZZ, (Scheme, Pluffe))                # fast                           # random\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1086, in compile_and_execute\n        compiled = compiler(example)\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 662, in compiler\n        compileflags, 1)\n      File \"<doctest doc.en.developer.packaging_sage_library[1]>\", line 1\n        %timeit isinstance(sZZ, (Scheme, Pluffe))                # fast                           # random\n        ^\n    SyntaxError: invalid syntax\n**********************************************************************\nFile \"src/doc/en/developer/packaging_sage_library.rst\", line 326, in doc.en.developer.packaging_sage_library\nFailed example:\n    %timeit isinstance(ZZ, (Scheme, Pluffe))                 # slow                           # random\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1086, in compile_and_execute\n        compiled = compiler(example)\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 662, in compiler\n        compileflags, 1)\n      File \"<doctest doc.en.developer.packaging_sage_library[2]>\", line 1\n        %timeit isinstance(ZZ, (Scheme, Pluffe))                 # slow                           # random\n        ^\n    SyntaxError: invalid syntax\n**********************************************************************\nFile \"src/doc/en/developer/packaging_sage_library.rst\", line 340, in doc.en.developer.packaging_sage_library\nFailed example:\n    %timeit isinstance(sZZ, (Scheme, Pluffe))                # fast                           # random\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1086, in compile_and_execute\n        compiled = compiler(example)\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 662, in compiler\n        compileflags, 1)\n      File \"<doctest doc.en.developer.packaging_sage_library[1]>\", line 1\n        %timeit isinstance(sZZ, (Scheme, Pluffe))                # fast                           # random\n        ^\n    SyntaxError: invalid syntax\n**********************************************************************\nFile \"src/doc/en/developer/packaging_sage_library.rst\", line 343, in doc.en.developer.packaging_sage_library\nFailed example:\n    %timeit isinstance(ZZ, (Scheme, Pluffe))                 # fast                           # random\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 694, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1086, in compile_and_execute\n        compiled = compiler(example)\n      File \"/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py\", line 662, in compiler\n        compileflags, 1)\n      File \"<doctest doc.en.developer.packaging_sage_library[2]>\", line 1\n        %timeit isinstance(ZZ, (Scheme, Pluffe))                 # fast                           # random\n        ^\n    SyntaxError: invalid syntax\n```",
    "created_at": "2021-12-17T14:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33017#issuecomment-499208",
    "user": "https://github.com/kliem"
}
```

<a id='comment:11'></a>Edited to remove unrelated failure.

```
$ sage -t --long --random-seed=57900501385357039198738698054253811820 src/doc/en/developer/packaging_sage_library.rst  # 8 doctests failed
too many failed tests, not using stored timings
Running doctests with ID 2021-12-17-15-38-43-8b38ad21.
Git branch: test_33017
Using --optional=4ti2,build,debian,dochtml,e_antic,latte_int,lidia,normaliz,pip,pynormaliz,sage,sage.geometry.polyhedron,sage.rings.real_double,sage_spkg
Doctesting 1 file.
sage -t --long --random-seed=57900501385357039198738698054253811820 src/doc/en/developer/packaging_sage_library.rst
**********************************************************************
File "src/doc/en/developer/packaging_sage_library.rst", line 285, in doc.en.developer.packaging_sage_library
Failed example:
    %timeit isinstance(object, pAdicFieldGeneric)            # fast                           # random
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 1086, in compile_and_execute
        compiled = compiler(example)
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 662, in compiler
        compileflags, 1)
      File "<doctest doc.en.developer.packaging_sage_library[2]>", line 1
        %timeit isinstance(object, pAdicFieldGeneric)            # fast                           # random
        ^
    SyntaxError: invalid syntax
**********************************************************************
File "src/doc/en/developer/packaging_sage_library.rst", line 289, in doc.en.developer.packaging_sage_library
Failed example:
    %timeit isinstance(object, sage.rings.abc.pAdicField)    # also fast                      # random
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 1086, in compile_and_execute
        compiled = compiler(example)
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 662, in compiler
        compileflags, 1)
      File "<doctest doc.en.developer.packaging_sage_library[4]>", line 1
        %timeit isinstance(object, sage.rings.abc.pAdicField)    # also fast                      # random
        ^
    SyntaxError: invalid syntax
**********************************************************************
File "src/doc/en/developer/packaging_sage_library.rst", line 311, in doc.en.developer.packaging_sage_library
Failed example:
    %timeit is_Scheme_or_Pluffe(sZZ)                         # fast                           # random
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 1086, in compile_and_execute
        compiled = compiler(example)
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 662, in compiler
        compileflags, 1)
      File "<doctest doc.en.developer.packaging_sage_library[3]>", line 1
        %timeit is_Scheme_or_Pluffe(sZZ)                         # fast                           # random
        ^
    SyntaxError: invalid syntax
**********************************************************************
File "src/doc/en/developer/packaging_sage_library.rst", line 314, in doc.en.developer.packaging_sage_library
Failed example:
    %timeit is_Scheme_or_Pluffe(ZZ)                          # slow                           # random
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 1086, in compile_and_execute
        compiled = compiler(example)
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 662, in compiler
        compileflags, 1)
      File "<doctest doc.en.developer.packaging_sage_library[4]>", line 1
        %timeit is_Scheme_or_Pluffe(ZZ)                          # slow                           # random
        ^
    SyntaxError: invalid syntax
**********************************************************************
File "src/doc/en/developer/packaging_sage_library.rst", line 323, in doc.en.developer.packaging_sage_library
Failed example:
    %timeit isinstance(sZZ, (Scheme, Pluffe))                # fast                           # random
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 1086, in compile_and_execute
        compiled = compiler(example)
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 662, in compiler
        compileflags, 1)
      File "<doctest doc.en.developer.packaging_sage_library[1]>", line 1
        %timeit isinstance(sZZ, (Scheme, Pluffe))                # fast                           # random
        ^
    SyntaxError: invalid syntax
**********************************************************************
File "src/doc/en/developer/packaging_sage_library.rst", line 326, in doc.en.developer.packaging_sage_library
Failed example:
    %timeit isinstance(ZZ, (Scheme, Pluffe))                 # slow                           # random
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 1086, in compile_and_execute
        compiled = compiler(example)
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 662, in compiler
        compileflags, 1)
      File "<doctest doc.en.developer.packaging_sage_library[2]>", line 1
        %timeit isinstance(ZZ, (Scheme, Pluffe))                 # slow                           # random
        ^
    SyntaxError: invalid syntax
**********************************************************************
File "src/doc/en/developer/packaging_sage_library.rst", line 340, in doc.en.developer.packaging_sage_library
Failed example:
    %timeit isinstance(sZZ, (Scheme, Pluffe))                # fast                           # random
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 1086, in compile_and_execute
        compiled = compiler(example)
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 662, in compiler
        compileflags, 1)
      File "<doctest doc.en.developer.packaging_sage_library[1]>", line 1
        %timeit isinstance(sZZ, (Scheme, Pluffe))                # fast                           # random
        ^
    SyntaxError: invalid syntax
**********************************************************************
File "src/doc/en/developer/packaging_sage_library.rst", line 343, in doc.en.developer.packaging_sage_library
Failed example:
    %timeit isinstance(ZZ, (Scheme, Pluffe))                 # fast                           # random
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 694, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 1086, in compile_and_execute
        compiled = compiler(example)
      File "/srv/public/kliem/sage/local/var/lib/sage/venv-python3.7/lib/python3.7/site-packages/sage/doctest/forker.py", line 662, in compiler
        compileflags, 1)
      File "<doctest doc.en.developer.packaging_sage_library[2]>", line 1
        %timeit isinstance(ZZ, (Scheme, Pluffe))                 # fast                           # random
        ^
    SyntaxError: invalid syntax
```



---

archive/issue_comments_499209.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-12-17T14:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33017#issuecomment-499209",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_499210.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-17T18:13:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33017#issuecomment-499210",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_499211.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-12-17T18:14:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33017#issuecomment-499211",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_087245.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T21:42:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33017#event-87245"
}
```



---

archive/issue_events_087246.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33017#event-87246"
}
```



---

archive/issue_events_087247.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33017#event-87247"
}
```



---

archive/issue_comments_499212.json:
```json
{
    "body": "<a id='comment:16'></a>Sorry, I completely forgot about this. I think figured to wait on a patchbot.\n\nYou know, you can also ping me. I might not react, but I won't be annoyed.",
    "created_at": "2022-04-08T19:42:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33017#issuecomment-499212",
    "user": "https://github.com/kliem"
}
```

<a id='comment:16'></a>Sorry, I completely forgot about this. I think figured to wait on a patchbot.

You know, you can also ping me. I might not react, but I won't be annoyed.



---

archive/issue_comments_499213.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-04-08T19:42:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33017#issuecomment-499213",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_499214.json:
```json
{
    "body": "<a id='comment:17'></a>Thanks! There was no urgency",
    "created_at": "2022-04-08T20:04:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33017#issuecomment-499214",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>Thanks! There was no urgency



---

archive/issue_comments_499215.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-04-10T13:12:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33017#issuecomment-499215",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_087248.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-04-10T13:12:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33017#event-87248"
}
```



---

archive/issue_events_087249.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-10T16:40:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33017#event-87249"
}
```



---

archive/issue_events_087250.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-10T16:40:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33017",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33017#event-87250"
}
```
