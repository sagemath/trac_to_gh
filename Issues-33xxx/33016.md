# Issue 33016: Fix global import of sage.repl.rich_output.display_manager.get_display_manager

archive/issues_032779.json:
```json
{
    "body": "This function leaks in via `sage.interfaces.all`.\n\nSince it is being used in doctest, we import it properly through `sage.repl.all`.\n\n\nCC:  @egourgoulhon\n\nBranch/Commit: d6cf9f6b386fd39dc203cb26b551a157e441bcaa\n\nReviewer: Kwankyu Lee\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33016\n\n",
    "closed_at": "2022-05-24T22:44:42Z",
    "created_at": "2021-12-13T04:06:58Z",
    "labels": [
        "component: user interface",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Fix global import of sage.repl.rich_output.display_manager.get_display_manager",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33016",
    "user": "https://github.com/mkoeppe"
}
```
This function leaks in via `sage.interfaces.all`.

Since it is being used in doctest, we import it properly through `sage.repl.all`.


CC:  @egourgoulhon

Branch/Commit: d6cf9f6b386fd39dc203cb26b551a157e441bcaa

Reviewer: Kwankyu Lee

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33016





---

archive/issue_comments_658352.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/deprecate_global_import_of_sage_repl_rich_output_display_manager_get_display_manager\"",
    "created_at": "2021-12-13T04:51:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658352",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/deprecate_global_import_of_sage_repl_rich_output_display_manager_get_display_manager"



---

archive/issue_comments_658353.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-12-13T04:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658353",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_658354.json:
```json
{
    "body": "Changing commit from \"\" to \"5c0604653a63326219ea9c8c3638d7cd9c28e992\"",
    "created_at": "2021-12-13T04:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658354",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "5c0604653a63326219ea9c8c3638d7cd9c28e992"



---

archive/issue_comments_658355.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|\n|[5c06046](https://github.com/sagemath/sagetrac-mirror/commit/5c0604653a63326219ea9c8c3638d7cd9c28e992)|`src/sage/interfaces/all.py: Deprecate re-export of get_display_manager`|",
    "created_at": "2021-12-13T04:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658355",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|
|[5c06046](https://github.com/sagemath/sagetrac-mirror/commit/5c0604653a63326219ea9c8c3638d7cd9c28e992)|`src/sage/interfaces/all.py: Deprecate re-export of get_display_manager`|



---

archive/issue_comments_658356.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-12-13T04:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658356",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_658357.json:
```json
{
    "body": "<a id='comment:3'></a>\nI have used this function only for testing. But it seems people use get_display_manager to set display preferences in jupyter. It would be inconvenient if it should be imported first from an obscure place.",
    "created_at": "2021-12-14T03:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658357",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:3'></a>
I have used this function only for testing. But it seems people use get_display_manager to set display preferences in jupyter. It would be inconvenient if it should be imported first from an obscure place.



---

archive/issue_events_098138.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-21T17:47:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33016#event-98138"
}
```



---

archive/issue_comments_658358.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2021-12-21T17:47:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658358",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_658359.json:
```json
{
    "body": "Changing commit from \"5c0604653a63326219ea9c8c3638d7cd9c28e992\" to \"d6cf9f6b386fd39dc203cb26b551a157e441bcaa\"",
    "created_at": "2022-02-19T21:45:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658359",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5c0604653a63326219ea9c8c3638d7cd9c28e992" to "d6cf9f6b386fd39dc203cb26b551a157e441bcaa"



---

archive/issue_comments_658360.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|\n|[738b703](https://github.com/sagemath/sagetrac-mirror/commit/738b703c246b9ca90aeb041633d0b97e168cf6e8)|`src/sage/repl/all.py: Also import get_display_manager`|\n|[d6cf9f6](https://github.com/sagemath/sagetrac-mirror/commit/d6cf9f6b386fd39dc203cb26b551a157e441bcaa)|`src/sage/interfaces/all.py: Do not re-export get_display_manager; do not fail if get_display_manager cannot be imported`|",
    "created_at": "2022-02-19T21:45:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658360",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
|[738b703](https://github.com/sagemath/sagetrac-mirror/commit/738b703c246b9ca90aeb041633d0b97e168cf6e8)|`src/sage/repl/all.py: Also import get_display_manager`|
|[d6cf9f6](https://github.com/sagemath/sagetrac-mirror/commit/d6cf9f6b386fd39dc203cb26b551a157e441bcaa)|`src/sage/interfaces/all.py: Do not re-export get_display_manager; do not fail if get_display_manager cannot be imported`|



---

archive/issue_events_098139.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "rename": {
        "from": "Deprecate global import of sage.repl.rich_output.display_manager.get_display_manager",
        "to": "Fix global import of sage.repl.rich_output.display_manager.get_display_manager"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33016#event-98139"
}
```



---

archive/issue_comments_658361.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n This function leaks in via `sage.interfaces.all`.\n \n+Since it is being used in doctest, we import it properly through `sage.repl.all`.\n+\n``````\n",
    "created_at": "2022-02-19T21:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658361",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 This function leaks in via `sage.interfaces.all`.
 
+Since it is being used in doctest, we import it properly through `sage.repl.all`.
+
``````




---

archive/issue_comments_658362.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2022-02-19T21:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658362",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_658363.json:
```json
{
    "body": "<a id='comment:6'></a>\nHere's a new version",
    "created_at": "2022-02-19T21:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658363",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Here's a new version



---

archive/issue_comments_658364.json:
```json
{
    "body": "<a id='comment:7'></a>\nPerhaps we still need a deprecation warning about the change of import location?",
    "created_at": "2022-02-20T07:47:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658364",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:7'></a>
Perhaps we still need a deprecation warning about the change of import location?



---

archive/issue_comments_658365.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Kwankyu Lee\"",
    "created_at": "2022-02-20T07:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658365",
    "user": "https://github.com/kwankyu"
}
```

Changing reviewer from "" to "Kwankyu Lee"



---

archive/issue_comments_658366.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [klee](#comment%3A7):\n> Perhaps we still need a deprecation warning about the change of import location?\n\n\nI'd say we don't, according to the leak theory",
    "created_at": "2022-02-20T18:49:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658366",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Replying to [klee](#comment%3A7):
> Perhaps we still need a deprecation warning about the change of import location?


I'd say we don't, according to the leak theory



---

archive/issue_comments_658367.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [mkoeppe](#comment%3A9):\n> Replying to [klee](#comment%3A7):\n> > Perhaps we still need a deprecation warning about the change of import location?\n\n> \n> I'd say we don't, according to the leak theory\n\n\nSorry, but what is the leak theory?\n\nOne argument for no deprecation warning might be that we already made an announcement that no library code should import from `all` modules. Is this what you meant?",
    "created_at": "2022-02-20T23:21:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658367",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:10'></a>
Replying to [mkoeppe](#comment%3A9):
> Replying to [klee](#comment%3A7):
> > Perhaps we still need a deprecation warning about the change of import location?

> 
> I'd say we don't, according to the leak theory


Sorry, but what is the leak theory?

One argument for no deprecation warning might be that we already made an announcement that no library code should import from `all` modules. Is this what you meant?



---

archive/issue_events_098140.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33016#event-98140"
}
```



---

archive/issue_events_098141.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33016#event-98141"
}
```



---

archive/issue_comments_658368.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [klee](#comment%3A7):\n> Perhaps we still need a deprecation warning about the change of import location?\n\n\nI still don't know the leak theory. But I now agree that we don't need a deprecation warning.",
    "created_at": "2022-04-14T02:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658368",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:12'></a>
Replying to [klee](#comment%3A7):
> Perhaps we still need a deprecation warning about the change of import location?


I still don't know the leak theory. But I now agree that we don't need a deprecation warning.



---

archive/issue_comments_658369.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-04-14T02:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658369",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_658370.json:
```json
{
    "body": "<a id='comment:13'></a>\nThanks!",
    "created_at": "2022-04-14T06:07:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658370",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
Thanks!



---

archive/issue_events_098142.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-24T22:44:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33016#event-98142"
}
```



---

archive/issue_comments_658371.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-05-24T22:44:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658371",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_658372.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/deprecate_global_import_of_sage_repl_rich_output_display_manager_get_display_manager\" to \"d6cf9f6b386fd39dc203cb26b551a157e441bcaa\"",
    "created_at": "2022-05-24T22:44:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33016",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33016#issuecomment-658372",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/deprecate_global_import_of_sage_repl_rich_output_display_manager_get_display_manager" to "d6cf9f6b386fd39dc203cb26b551a157e441bcaa"
