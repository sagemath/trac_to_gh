# Issue 33169: Update awali to v2.1.1-220111

archive/issues_032932.json:
```json
{
    "body": "It was released on January 11, 2022: http://files.vaucanson-project.org/2.1/tarballs/awali-all-v2.1.1-220111.tgz\n\nBranch: [u/slabbe/33169](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/33169)\n\nCommit: [725afa7ca05139c7de4816ee91484f698512db97](https://github.com/sagemath/sagetrac-mirror/commit/725afa7ca05139c7de4816ee91484f698512db97)\n\nAuthor: S\u00e9bastien Labb\u00e9\n\nStatus: needs_work\n\nIssue created by migration from https://trac.sagemath.org/ticket/33169\n\n",
    "created_at": "2022-01-14T15:07:19Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Update awali to v2.1.1-220111",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33169",
    "user": "https://github.com/seblabbe"
}
```
It was released on January 11, 2022: http://files.vaucanson-project.org/2.1/tarballs/awali-all-v2.1.1-220111.tgz

Branch: [u/slabbe/33169](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/33169)

Commit: [725afa7ca05139c7de4816ee91484f698512db97](https://github.com/sagemath/sagetrac-mirror/commit/725afa7ca05139c7de4816ee91484f698512db97)

Author: Sébastien Labbé

Status: needs_work

Issue created by migration from https://trac.sagemath.org/ticket/33169





---

archive/issue_comments_661875.json:
```json
{
    "body": "Commit: [9db7fb1cada1d75c98bc5b9792bf0a0459ab67b2](https://github.com/sagemath/sagetrac-mirror/commit/9db7fb1cada1d75c98bc5b9792bf0a0459ab67b2)",
    "created_at": "2022-01-14T15:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661875",
    "user": "https://github.com/seblabbe"
}
```

Commit: [9db7fb1cada1d75c98bc5b9792bf0a0459ab67b2](https://github.com/sagemath/sagetrac-mirror/commit/9db7fb1cada1d75c98bc5b9792bf0a0459ab67b2)



---

archive/issue_comments_661876.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-01-14T15:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661876",
    "user": "https://github.com/seblabbe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_661877.json:
```json
{
    "body": "Branch: [u/slabbe/33169](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/33169)",
    "created_at": "2022-01-14T15:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661877",
    "user": "https://github.com/seblabbe"
}
```

Branch: [u/slabbe/33169](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/33169)



---

archive/issue_comments_661878.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[9db7fb1](https://github.com/sagemath/sagetrac-mirror/commit/9db7fb1cada1d75c98bc5b9792bf0a0459ab67b2)|`33169: updated awali to 2.1.1-220111`|",
    "created_at": "2022-01-14T15:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661878",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[9db7fb1](https://github.com/sagemath/sagetrac-mirror/commit/9db7fb1cada1d75c98bc5b9792bf0a0459ab67b2)|`33169: updated awali to 2.1.1-220111`|



---

archive/issue_comments_661879.json:
```json
{
    "body": "Author: S\u00e9bastien Labb\u00e9",
    "created_at": "2022-01-14T15:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661879",
    "user": "https://github.com/seblabbe"
}
```

Author: Sébastien Labbé



---

archive/issue_comments_661880.json:
```json
{
    "body": "<a id='comment:2'></a>\nNeeds `upstream_url` in `checksums.ini`",
    "created_at": "2022-01-14T15:59:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661880",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
Needs `upstream_url` in `checksums.ini`



---

archive/issue_comments_661881.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-01-14T15:59:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661881",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_661882.json:
```json
{
    "body": "<a id='comment:3'></a>\nI first put it, and then removed it before the commit because the url \n\n```\nupstream_url=http://files.vaucanson-project.org/2.1/tarballs/awali-all-vVERSION.tgz\n```\ncontains a `2.1` which is kind of not so generic. Do I still put it?",
    "created_at": "2022-01-14T16:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661882",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:3'></a>
I first put it, and then removed it before the commit because the url 

```
upstream_url=http://files.vaucanson-project.org/2.1/tarballs/awali-all-vVERSION.tgz
```
contains a `2.1` which is kind of not so generic. Do I still put it?



---

archive/issue_comments_661883.json:
```json
{
    "body": "<a id='comment:4'></a>\nYes",
    "created_at": "2022-01-14T16:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661883",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
Yes



---

archive/issue_comments_661884.json:
```json
{
    "body": "Changing commit from \"[9db7fb1cada1d75c98bc5b9792bf0a0459ab67b2](https://github.com/sagemath/sagetrac-mirror/commit/9db7fb1cada1d75c98bc5b9792bf0a0459ab67b2)\" to \"[e44d4d9b21b04eb7ef6f7fea7b6a66e9506d9a00](https://github.com/sagemath/sagetrac-mirror/commit/e44d4d9b21b04eb7ef6f7fea7b6a66e9506d9a00)\"",
    "created_at": "2022-01-14T17:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661884",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[9db7fb1cada1d75c98bc5b9792bf0a0459ab67b2](https://github.com/sagemath/sagetrac-mirror/commit/9db7fb1cada1d75c98bc5b9792bf0a0459ab67b2)" to "[e44d4d9b21b04eb7ef6f7fea7b6a66e9506d9a00](https://github.com/sagemath/sagetrac-mirror/commit/e44d4d9b21b04eb7ef6f7fea7b6a66e9506d9a00)"



---

archive/issue_comments_661885.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[e44d4d9](https://github.com/sagemath/sagetrac-mirror/commit/e44d4d9b21b04eb7ef6f7fea7b6a66e9506d9a00)|`33169: updated awali to 2.1.1-220111`|",
    "created_at": "2022-01-14T17:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661885",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[e44d4d9](https://github.com/sagemath/sagetrac-mirror/commit/e44d4d9b21b04eb7ef6f7fea7b6a66e9506d9a00)|`33169: updated awali to 2.1.1-220111`|



---

archive/issue_comments_661886.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-01-14T17:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661886",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_661887.json:
```json
{
    "body": "<a id='comment:6'></a>\nand rebased on top of 9.5.rc1",
    "created_at": "2022-01-14T17:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661887",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:6'></a>
and rebased on top of 9.5.rc1



---

archive/issue_comments_661888.json:
```json
{
    "body": "<a id='comment:7'></a>\noups, spkg-install needs to be updated:\n\n```\n[awali-2.1.1-220111] make[3]: *** No rule to make target 'b'.  Stop.\n[awali-2.1.1-220111] ***************************************************\n[awali-2.1.1-220111] Error building awali-2.1.1-220111\n```",
    "created_at": "2022-01-14T17:10:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661888",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:7'></a>
oups, spkg-install needs to be updated:

```
[awali-2.1.1-220111] make[3]: *** No rule to make target 'b'.  Stop.
[awali-2.1.1-220111] ***************************************************
[awali-2.1.1-220111] Error building awali-2.1.1-220111
```



---

archive/issue_comments_661889.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-01-14T17:10:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661889",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_661890.json:
```json
{
    "body": "Changing commit from \"[e44d4d9b21b04eb7ef6f7fea7b6a66e9506d9a00](https://github.com/sagemath/sagetrac-mirror/commit/e44d4d9b21b04eb7ef6f7fea7b6a66e9506d9a00)\" to \"[88308ff0f2a1c55f9050c3e5d70c72094e99d0dc](https://github.com/sagemath/sagetrac-mirror/commit/88308ff0f2a1c55f9050c3e5d70c72094e99d0dc)\"",
    "created_at": "2022-01-14T17:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661890",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[e44d4d9b21b04eb7ef6f7fea7b6a66e9506d9a00](https://github.com/sagemath/sagetrac-mirror/commit/e44d4d9b21b04eb7ef6f7fea7b6a66e9506d9a00)" to "[88308ff0f2a1c55f9050c3e5d70c72094e99d0dc](https://github.com/sagemath/sagetrac-mirror/commit/88308ff0f2a1c55f9050c3e5d70c72094e99d0dc)"



---

archive/issue_comments_661891.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[88308ff](https://github.com/sagemath/sagetrac-mirror/commit/88308ff0f2a1c55f9050c3e5d70c72094e99d0dc)|`33169: remove 'make b'`|",
    "created_at": "2022-01-14T17:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661891",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[88308ff](https://github.com/sagemath/sagetrac-mirror/commit/88308ff0f2a1c55f9050c3e5d70c72094e99d0dc)|`33169: remove 'make b'`|



---

archive/issue_comments_661892.json:
```json
{
    "body": "<a id='comment:9'></a>\nThe change is not sufficient. I now get\n\n```\n[awali-2.1.1-220111] -- Installing: /usr/local/lib/libawalidyn.so\n[awali-2.1.1-220111] CMake Error at awali/cmake_install.cmake:55 (file):\n[awali-2.1.1-220111]   file INSTALL cannot copy file\n[awali-2.1.1-220111]   \"/home/slabbe/GitBox/sage/local/var/tmp/sage/build/awali-2.1.1-220111/src/_build/awali/libawalidyn.so\"\n[awali-2.1.1-220111]   to \"/usr/local/lib/libawalidyn.so\": Permission denied.\n[awali-2.1.1-220111] Call Stack (most recent call first):\n[awali-2.1.1-220111]   cmake_install.cmake:46 (include)\n[awali-2.1.1-220111] \n[awali-2.1.1-220111] \n[awali-2.1.1-220111] make[3]: *** [Makefile:74: install] Error 1\n[awali-2.1.1-220111] ****************************************************************************************************************************************************************\n[awali-2.1.1-220111] Error building awali-2.1.1-220111\n```\n\nIndeed, http://vaucanson-project.org/Awali/2.1/download.html and their readme says to use `sudo`:\n\n```\n$ cd _build\n\n### Configuration\n$ cmake ..\n\n### Compilation\n$ make\n\n### Installation\n$ sudo make install\n```\nbut I think we don't want to use sudo.",
    "created_at": "2022-01-14T17:14:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661892",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:9'></a>
The change is not sufficient. I now get

```
[awali-2.1.1-220111] -- Installing: /usr/local/lib/libawalidyn.so
[awali-2.1.1-220111] CMake Error at awali/cmake_install.cmake:55 (file):
[awali-2.1.1-220111]   file INSTALL cannot copy file
[awali-2.1.1-220111]   "/home/slabbe/GitBox/sage/local/var/tmp/sage/build/awali-2.1.1-220111/src/_build/awali/libawalidyn.so"
[awali-2.1.1-220111]   to "/usr/local/lib/libawalidyn.so": Permission denied.
[awali-2.1.1-220111] Call Stack (most recent call first):
[awali-2.1.1-220111]   cmake_install.cmake:46 (include)
[awali-2.1.1-220111] 
[awali-2.1.1-220111] 
[awali-2.1.1-220111] make[3]: *** [Makefile:74: install] Error 1
[awali-2.1.1-220111] ****************************************************************************************************************************************************************
[awali-2.1.1-220111] Error building awali-2.1.1-220111
```

Indeed, http://vaucanson-project.org/Awali/2.1/download.html and their readme says to use `sudo`:

```
$ cd _build

### Configuration
$ cmake ..

### Compilation
$ make

### Installation
$ sudo make install
```
but I think we don't want to use sudo.



---

archive/issue_comments_661893.json:
```json
{
    "body": "<a id='comment:10'></a>\nWe need to specify environment variables, but I am not an expert on this. They speak about a dozen of such variables and I don't know which we need to set and how.\n\nI tried\n\n```diff\ndiff --git a/build/pkgs/awali/spkg-install.in b/build/pkgs/awali/spkg-install.in\nindex 6ad2f054b5..e0e52f93dd 100644\n--- a/build/pkgs/awali/spkg-install.in\n+++ b/build/pkgs/awali/spkg-install.in\n@@ -4,7 +4,8 @@ mkdir _build\n cd _build\n cmake ..  -DINSTALL_DIR=\"${SAGE_LOCAL}\" \\\n           -DPYTHON=python3 \\\n-          -DCORA=False\n+          -DCORA=False \\\n+          -AWALICPP_DYNLIB_INSTALL_DIR=\"${SAGE_LOCAL}/lib/\"\n \n sdh_make\n sdh_make install\n```\nbut it is not sufficient as it creates the error\n\n```\n[awali-2.1.1-220111] CMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage\n[awali-2.1.1-220111] -- Configuring incomplete, errors occurred!\n```\n`CMAKE_CXX_COMPILER` is not mentionned in their readme. I take a break on this now.",
    "created_at": "2022-01-14T17:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661893",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:10'></a>
We need to specify environment variables, but I am not an expert on this. They speak about a dozen of such variables and I don't know which we need to set and how.

I tried

```diff
diff --git a/build/pkgs/awali/spkg-install.in b/build/pkgs/awali/spkg-install.in
index 6ad2f054b5..e0e52f93dd 100644
--- a/build/pkgs/awali/spkg-install.in
+++ b/build/pkgs/awali/spkg-install.in
@@ -4,7 +4,8 @@ mkdir _build
 cd _build
 cmake ..  -DINSTALL_DIR="${SAGE_LOCAL}" \
           -DPYTHON=python3 \
-          -DCORA=False
+          -DCORA=False \
+          -AWALICPP_DYNLIB_INSTALL_DIR="${SAGE_LOCAL}/lib/"
 
 sdh_make
 sdh_make install
```
but it is not sufficient as it creates the error

```
[awali-2.1.1-220111] CMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage
[awali-2.1.1-220111] -- Configuring incomplete, errors occurred!
```
`CMAKE_CXX_COMPILER` is not mentionned in their readme. I take a break on this now.



---

archive/issue_comments_661894.json:
```json
{
    "body": "<a id='comment:11'></a>\nHi,\n\nI'm one of the developer of awali and I managed to have awali compiling and installing boxed into sage.\n\nI tweaked `spkg-install.in` as:\n\n```bash\ncd src/\n\nmkdir _build\ncd _build\ncmake ..  -DCMAKE_INSTALL_PREFIX=\"${SAGE_LOCAL}\" \\\n          -DCOMPILE_MODULE_IN_INSTALL_DIR=TRUE \\\n          -DFORCE_INSTALL_IN_PREFIX=TRUE \\\n          -DPYTHON_BIN=python3 \\\n          -DCYTHON_BIN=cython \\\n          -DCORA=FALSE \\\n          -DDOCUMENTATION=FALSE\n\nsdh_make\nsdh_make recommended\nsdh_make install\n```\nand `dependencies` as:\n\n```\n$(PYTHON) cmake cython graphviz\n```\n\nHowever I did not solve the error *CMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage * mentioned above.   I simply did not encounter it.  This error apparently indicates that CMake does not find the C++ compiler.\n\nI managed to obtain it by uninstalling g++ from my system.  In that case, it seemed that CMake was failing to infer the compiler path from environment variable `${CXX}`.  The value of `${CXX}` was set by sage as `g++ -std=gnu++11`, and according to a Google search, it seems it is because CMake does not like the space in it.\n\nPrecisely:\n\n```\n[awali-2.1.2-220122] CMake Error at /usr/share/cmake-3.18/Modules/CMakeDetermineCXXCompiler.cmake:48 (message):\n[awali-2.1.2-220122]   Could not find compiler set in environment variable CXX:\n[awali-2.1.2-220122]\n[awali-2.1.2-220122]   g++ -std=gnu++11.\n[awali-2.1.2-220122]\n[awali-2.1.2-220122] Call Stack (most recent call first):\n[awali-2.1.2-220122]   CMakeLists.txt:22 (project)\n[awali-2.1.2-220122]\n[awali-2.1.2-220122]\n[awali-2.1.2-220122] CMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage\n[awali-2.1.2-220122] -- Configuring incomplete, errors occurred!\n```\n\nSince having a C++ compiler is a general prerequisite for sage, it seems this error should not happen.  I don't how to solve it.\n\n(I did not try adding `-DCMAKE_CXX_COMPILER=${CXX}` to the `cmake` line.  It could work but seems wrong: awali uses a different C++ standard, `--std=c++11`, and probably `--std=c++17` in future versions.)",
    "created_at": "2022-01-26T07:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661894",
    "user": "https://github.com/marsault"
}
```

<a id='comment:11'></a>
Hi,

I'm one of the developer of awali and I managed to have awali compiling and installing boxed into sage.

I tweaked `spkg-install.in` as:

```bash
cd src/

mkdir _build
cd _build
cmake ..  -DCMAKE_INSTALL_PREFIX="${SAGE_LOCAL}" \
          -DCOMPILE_MODULE_IN_INSTALL_DIR=TRUE \
          -DFORCE_INSTALL_IN_PREFIX=TRUE \
          -DPYTHON_BIN=python3 \
          -DCYTHON_BIN=cython \
          -DCORA=FALSE \
          -DDOCUMENTATION=FALSE

sdh_make
sdh_make recommended
sdh_make install
```
and `dependencies` as:

```
$(PYTHON) cmake cython graphviz
```

However I did not solve the error *CMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage * mentioned above.   I simply did not encounter it.  This error apparently indicates that CMake does not find the C++ compiler.

I managed to obtain it by uninstalling g++ from my system.  In that case, it seemed that CMake was failing to infer the compiler path from environment variable `${CXX}`.  The value of `${CXX}` was set by sage as `g++ -std=gnu++11`, and according to a Google search, it seems it is because CMake does not like the space in it.

Precisely:

```
[awali-2.1.2-220122] CMake Error at /usr/share/cmake-3.18/Modules/CMakeDetermineCXXCompiler.cmake:48 (message):
[awali-2.1.2-220122]   Could not find compiler set in environment variable CXX:
[awali-2.1.2-220122]
[awali-2.1.2-220122]   g++ -std=gnu++11.
[awali-2.1.2-220122]
[awali-2.1.2-220122] Call Stack (most recent call first):
[awali-2.1.2-220122]   CMakeLists.txt:22 (project)
[awali-2.1.2-220122]
[awali-2.1.2-220122]
[awali-2.1.2-220122] CMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage
[awali-2.1.2-220122] -- Configuring incomplete, errors occurred!
```

Since having a C++ compiler is a general prerequisite for sage, it seems this error should not happen.  I don't how to solve it.

(I did not try adding `-DCMAKE_CXX_COMPILER=${CXX}` to the `cmake` line.  It could work but seems wrong: awali uses a different C++ standard, `--std=c++11`, and probably `--std=c++17` in future versions.)



---

archive/issue_comments_661895.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[798238c](https://github.com/sagemath/sagetrac-mirror/commit/798238c1906479c3c3e705bd6c98c4fdacbe00a7)|`33169: updated awali to 2.1.1-220111`|\n|[a4a43b0](https://github.com/sagemath/sagetrac-mirror/commit/a4a43b0cd64a5a76e859fe0b4bf7615709230357)|`33169: remove 'make b'`|\n|[9c9510b](https://github.com/sagemath/sagetrac-mirror/commit/9c9510bc634bb5040f9b4c86e6c391dca39d3b68)|`33169: changes as suggested in[comment:11](#comment%3A11)`|",
    "created_at": "2022-01-26T20:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661895",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[798238c](https://github.com/sagemath/sagetrac-mirror/commit/798238c1906479c3c3e705bd6c98c4fdacbe00a7)|`33169: updated awali to 2.1.1-220111`|
|[a4a43b0](https://github.com/sagemath/sagetrac-mirror/commit/a4a43b0cd64a5a76e859fe0b4bf7615709230357)|`33169: remove 'make b'`|
|[9c9510b](https://github.com/sagemath/sagetrac-mirror/commit/9c9510bc634bb5040f9b4c86e6c391dca39d3b68)|`33169: changes as suggested in[comment:11](#comment%3A11)`|



---

archive/issue_comments_661896.json:
```json
{
    "body": "Changing commit from \"[88308ff0f2a1c55f9050c3e5d70c72094e99d0dc](https://github.com/sagemath/sagetrac-mirror/commit/88308ff0f2a1c55f9050c3e5d70c72094e99d0dc)\" to \"[9c9510bc634bb5040f9b4c86e6c391dca39d3b68](https://github.com/sagemath/sagetrac-mirror/commit/9c9510bc634bb5040f9b4c86e6c391dca39d3b68)\"",
    "created_at": "2022-01-26T20:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661896",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[88308ff0f2a1c55f9050c3e5d70c72094e99d0dc](https://github.com/sagemath/sagetrac-mirror/commit/88308ff0f2a1c55f9050c3e5d70c72094e99d0dc)" to "[9c9510bc634bb5040f9b4c86e6c391dca39d3b68](https://github.com/sagemath/sagetrac-mirror/commit/9c9510bc634bb5040f9b4c86e6c391dca39d3b68)"



---

archive/issue_comments_661897.json:
```json
{
    "body": "<a id='comment:13'></a>\nMerci Victor, I made the changes you suggested in[comment:11](#comment%3A11).",
    "created_at": "2022-01-26T20:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661897",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:13'></a>
Merci Victor, I made the changes you suggested in[comment:11](#comment%3A11).



---

archive/issue_comments_661898.json:
```json
{
    "body": "<a id='comment:14'></a>\nNow, I get this:\n\n```\n[awali-2.1.1-220111] Attempting to download from http://files.vaucanson-project.org/2.1/tarballs/awali-all-v2.1.1-220111.tgz\n[awali-2.1.1-220111] [......................................................................]\n[awali-2.1.1-220111] awali-2.1.1-220111\n[awali-2.1.1-220111] ====================================================\n[awali-2.1.1-220111] Setting up build directory for awali-2.1.1-220111\n[awali-2.1.1-220111] Finished extraction\n[awali-2.1.1-220111] No patch files found in ../patches\n[awali-2.1.1-220111] ****************************************************\n[awali-2.1.1-220111] Host system:\n[awali-2.1.1-220111] Linux miami 4.15.0-162-generic #170-Ubuntu SMP Mon Oct 18 11:38:05 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux\n[awali-2.1.1-220111] ****************************************************\n[awali-2.1.1-220111] C compiler: gcc\n[awali-2.1.1-220111] C compiler version:\n[awali-2.1.1-220111] Using built-in specs.\n[awali-2.1.1-220111] COLLECT_GCC=/usr/bin/gcc\n[awali-2.1.1-220111] COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/7/lto-wrapper\n[awali-2.1.1-220111] OFFLOAD_TARGET_NAMES=nvptx-none\n[awali-2.1.1-220111] OFFLOAD_TARGET_DEFAULT=1\n[awali-2.1.1-220111] Target: x86_64-linux-gnu\n[awali-2.1.1-220111] Configured with: ../src/configure -v --with-pkgversion='Ubuntu 7.5.0-3ubuntu1~18.04' --with-bugurl=file:///usr/share/doc/gcc-7/README.Bugs --enable-languages=c,ada,c++,go,brig,d,fortran,objc,obj-c++ --prefix=/usr --with-gcc-major-version-only --program-suffix=-7 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --enable-bootstrap --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --enable-plugin --enable-default-pie --with-system-zlib --with-target-system-zlib --enable-objc-gc=auto --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-offload-targets=nvptx-none --without-cuda-driver --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\n[awali-2.1.1-220111] Thread model: posix\n[awali-2.1.1-220111] gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04) \n[awali-2.1.1-220111] ****************************************************\n[awali-2.1.1-220111] Warning: No files to uninstall for 'awali'\n[awali-2.1.1-220111] Uninstalling existing 'awali'\n[awali-2.1.1-220111] Removing stamp file '/home/slabbe/GitBox/sage/local/var/lib/sage/installed/awali-1.0.2-190218'\n[awali-2.1.1-220111] -- The CXX compiler identification is GNU 7.5.0\n[awali-2.1.1-220111] -- Check for working CXX compiler: /home/slabbe/GitBox/sage/local/libexec/ccache/g++\n[awali-2.1.1-220111] -- Check for working CXX compiler: /home/slabbe/GitBox/sage/local/libexec/ccache/g++ -- works\n[awali-2.1.1-220111] -- Detecting CXX compiler ABI info\n[awali-2.1.1-220111] -- Detecting CXX compiler ABI info - done\n[awali-2.1.1-220111] -- Detecting CXX compile features\n[awali-2.1.1-220111] -- Detecting CXX compile features - done\n[awali-2.1.1-220111] -- CMake configuration for Awali, version 2.1.1\n[awali-2.1.1-220111] -- Performing Test COMPILER_SUPPORTS_CXX11\n[awali-2.1.1-220111] -- Performing Test COMPILER_SUPPORTS_CXX11 - Success\n[awali-2.1.1-220111] -- Found PkgConfig: /usr/bin/pkg-config (found version \"0.29.1\") \n[awali-2.1.1-220111] CMake Warning at awali/CMakeLists.txt:45 (MESSAGE):\n[awali-2.1.1-220111]   A directory was specified for on-the-fly compilation of module.  Any\n[awali-2.1.1-220111]   program linked to awalidyn might attempt to write in that directory; it\n[awali-2.1.1-220111]   thus must be writable by any user that might use the program.\n[awali-2.1.1-220111] \n[awali-2.1.1-220111] \n[awali-2.1.1-220111] CMake Error at awali/sttc/tests/CMakeLists.txt:44 (add_compile_definitions):\n[awali-2.1.1-220111]   Unknown CMake command \"add_compile_definitions\".\n[awali-2.1.1-220111] \n[awali-2.1.1-220111] \n[awali-2.1.1-220111] -- Configuring incomplete, errors occurred!\n[awali-2.1.1-220111] See also \"/home/slabbe/GitBox/sage/local/var/tmp/sage/build/awali-2.1.1-220111/src/_build/CMakeFiles/CMakeOutput.log\".\n[awali-2.1.1-220111] Building awali-2.1.1-220111\n[awali-2.1.1-220111] make[3]: *** No targets specified and no makefile found.  Stop.\n[awali-2.1.1-220111] *****************************************************************************************************\n[awali-2.1.1-220111] Error building awali-2.1.1-220111\n[awali-2.1.1-220111] *****************************************************************************************************\n```",
    "created_at": "2022-01-26T20:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661898",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:14'></a>
Now, I get this:

```
[awali-2.1.1-220111] Attempting to download from http://files.vaucanson-project.org/2.1/tarballs/awali-all-v2.1.1-220111.tgz
[awali-2.1.1-220111] [......................................................................]
[awali-2.1.1-220111] awali-2.1.1-220111
[awali-2.1.1-220111] ====================================================
[awali-2.1.1-220111] Setting up build directory for awali-2.1.1-220111
[awali-2.1.1-220111] Finished extraction
[awali-2.1.1-220111] No patch files found in ../patches
[awali-2.1.1-220111] ****************************************************
[awali-2.1.1-220111] Host system:
[awali-2.1.1-220111] Linux miami 4.15.0-162-generic #170-Ubuntu SMP Mon Oct 18 11:38:05 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux
[awali-2.1.1-220111] ****************************************************
[awali-2.1.1-220111] C compiler: gcc
[awali-2.1.1-220111] C compiler version:
[awali-2.1.1-220111] Using built-in specs.
[awali-2.1.1-220111] COLLECT_GCC=/usr/bin/gcc
[awali-2.1.1-220111] COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/7/lto-wrapper
[awali-2.1.1-220111] OFFLOAD_TARGET_NAMES=nvptx-none
[awali-2.1.1-220111] OFFLOAD_TARGET_DEFAULT=1
[awali-2.1.1-220111] Target: x86_64-linux-gnu
[awali-2.1.1-220111] Configured with: ../src/configure -v --with-pkgversion='Ubuntu 7.5.0-3ubuntu1~18.04' --with-bugurl=file:///usr/share/doc/gcc-7/README.Bugs --enable-languages=c,ada,c++,go,brig,d,fortran,objc,obj-c++ --prefix=/usr --with-gcc-major-version-only --program-suffix=-7 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --enable-bootstrap --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --enable-plugin --enable-default-pie --with-system-zlib --with-target-system-zlib --enable-objc-gc=auto --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-offload-targets=nvptx-none --without-cuda-driver --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
[awali-2.1.1-220111] Thread model: posix
[awali-2.1.1-220111] gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04) 
[awali-2.1.1-220111] ****************************************************
[awali-2.1.1-220111] Warning: No files to uninstall for 'awali'
[awali-2.1.1-220111] Uninstalling existing 'awali'
[awali-2.1.1-220111] Removing stamp file '/home/slabbe/GitBox/sage/local/var/lib/sage/installed/awali-1.0.2-190218'
[awali-2.1.1-220111] -- The CXX compiler identification is GNU 7.5.0
[awali-2.1.1-220111] -- Check for working CXX compiler: /home/slabbe/GitBox/sage/local/libexec/ccache/g++
[awali-2.1.1-220111] -- Check for working CXX compiler: /home/slabbe/GitBox/sage/local/libexec/ccache/g++ -- works
[awali-2.1.1-220111] -- Detecting CXX compiler ABI info
[awali-2.1.1-220111] -- Detecting CXX compiler ABI info - done
[awali-2.1.1-220111] -- Detecting CXX compile features
[awali-2.1.1-220111] -- Detecting CXX compile features - done
[awali-2.1.1-220111] -- CMake configuration for Awali, version 2.1.1
[awali-2.1.1-220111] -- Performing Test COMPILER_SUPPORTS_CXX11
[awali-2.1.1-220111] -- Performing Test COMPILER_SUPPORTS_CXX11 - Success
[awali-2.1.1-220111] -- Found PkgConfig: /usr/bin/pkg-config (found version "0.29.1") 
[awali-2.1.1-220111] CMake Warning at awali/CMakeLists.txt:45 (MESSAGE):
[awali-2.1.1-220111]   A directory was specified for on-the-fly compilation of module.  Any
[awali-2.1.1-220111]   program linked to awalidyn might attempt to write in that directory; it
[awali-2.1.1-220111]   thus must be writable by any user that might use the program.
[awali-2.1.1-220111] 
[awali-2.1.1-220111] 
[awali-2.1.1-220111] CMake Error at awali/sttc/tests/CMakeLists.txt:44 (add_compile_definitions):
[awali-2.1.1-220111]   Unknown CMake command "add_compile_definitions".
[awali-2.1.1-220111] 
[awali-2.1.1-220111] 
[awali-2.1.1-220111] -- Configuring incomplete, errors occurred!
[awali-2.1.1-220111] See also "/home/slabbe/GitBox/sage/local/var/tmp/sage/build/awali-2.1.1-220111/src/_build/CMakeFiles/CMakeOutput.log".
[awali-2.1.1-220111] Building awali-2.1.1-220111
[awali-2.1.1-220111] make[3]: *** No targets specified and no makefile found.  Stop.
[awali-2.1.1-220111] *****************************************************************************************************
[awali-2.1.1-220111] Error building awali-2.1.1-220111
[awali-2.1.1-220111] *****************************************************************************************************
```



---

archive/issue_comments_661899.json:
```json
{
    "body": "<a id='comment:15'></a>\nFunction `add_compile_definitions` was added to CMake 3.12, you probably have a prior version.\n\nWe generally require a much lesser version of CMake (3.0) hence the cryptic error message.  We will use a substitute for `add_compile_definitions` for the next release of awali (2.1.3) to enforce compatibility with CMake 3.0.  It should be out by the end of the week.\n\nOn another topic, I created a generic address for tarballs download: http://files.vaucanson-project.org/tarballs/",
    "created_at": "2022-01-27T09:00:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661899",
    "user": "https://github.com/marsault"
}
```

<a id='comment:15'></a>
Function `add_compile_definitions` was added to CMake 3.12, you probably have a prior version.

We generally require a much lesser version of CMake (3.0) hence the cryptic error message.  We will use a substitute for `add_compile_definitions` for the next release of awali (2.1.3) to enforce compatibility with CMake 3.0.  It should be out by the end of the week.

On another topic, I created a generic address for tarballs download: http://files.vaucanson-project.org/tarballs/



---

archive/issue_comments_661900.json:
```json
{
    "body": "<a id='comment:16'></a>\nMy config.log says that my system cmake was accepted by sagemath:\n\n```\n## ------------------------------------------------------ ##\n## Checking whether SageMath should install SPKG cmake... ##\n## ------------------------------------------------------ ##\nconfigure:18367: checking for cmake >= 3.4\nconfigure:18445: result: /usr/bin/cmake\nconfigure:18454: will use system package and not install SPKG cmake\n```\n\nThe version of cmake on my machine is:\n\n```\n$ /usr/bin/cmake --version\ncmake version 3.10.2\n\nCMake suite maintained and supported by Kitware (kitware.com/cmake).\n```\nIndeed, it is older than 3.12.\n\nI think it is better if awali is compatible with the cmake that is currently accepted by sage, i.e., >=3.4.",
    "created_at": "2022-01-27T14:01:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661900",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:16'></a>
My config.log says that my system cmake was accepted by sagemath:

```
## ------------------------------------------------------ ##
## Checking whether SageMath should install SPKG cmake... ##
## ------------------------------------------------------ ##
configure:18367: checking for cmake >= 3.4
configure:18445: result: /usr/bin/cmake
configure:18454: will use system package and not install SPKG cmake
```

The version of cmake on my machine is:

```
$ /usr/bin/cmake --version
cmake version 3.10.2

CMake suite maintained and supported by Kitware (kitware.com/cmake).
```
Indeed, it is older than 3.12.

I think it is better if awali is compatible with the cmake that is currently accepted by sage, i.e., >=3.4.



---

archive/issue_comments_661901.json:
```json
{
    "body": "<a id='comment:17'></a>\nI agree; `cmake` older than 3.12 is still widespread on many of our supported platforms (see https://repology.org/project/cmake/versions). We could probably increase the lower bound 3.4 a bit, but not by much unless well motivated",
    "created_at": "2022-01-27T20:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661901",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
I agree; `cmake` older than 3.12 is still widespread on many of our supported platforms (see https://repology.org/project/cmake/versions). We could probably increase the lower bound 3.4 a bit, but not by much unless well motivated



---

archive/issue_comments_661902.json:
```json
{
    "body": "<a id='comment:18'></a>\nVersion 2.1.3 of awali was released earlier today: http://files.vaucanson-project.org/tarballs/awali-all-v2.1.3-220128.tgz\n\nIt is compatible with CMake 3.1.0 so the above problem should no longer happen.",
    "created_at": "2022-01-28T19:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661902",
    "user": "https://github.com/marsault"
}
```

<a id='comment:18'></a>
Version 2.1.3 of awali was released earlier today: http://files.vaucanson-project.org/tarballs/awali-all-v2.1.3-220128.tgz

It is compatible with CMake 3.1.0 so the above problem should no longer happen.



---

archive/issue_events_098591.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33169#event-98591"
}
```



---

archive/issue_comments_661903.json:
```json
{
    "body": "Changing commit from \"[9c9510bc634bb5040f9b4c86e6c391dca39d3b68](https://github.com/sagemath/sagetrac-mirror/commit/9c9510bc634bb5040f9b4c86e6c391dca39d3b68)\" to \"[725afa7ca05139c7de4816ee91484f698512db97](https://github.com/sagemath/sagetrac-mirror/commit/725afa7ca05139c7de4816ee91484f698512db97)\"",
    "created_at": "2022-05-05T09:34:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661903",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[9c9510bc634bb5040f9b4c86e6c391dca39d3b68](https://github.com/sagemath/sagetrac-mirror/commit/9c9510bc634bb5040f9b4c86e6c391dca39d3b68)" to "[725afa7ca05139c7de4816ee91484f698512db97](https://github.com/sagemath/sagetrac-mirror/commit/725afa7ca05139c7de4816ee91484f698512db97)"



---

archive/issue_comments_661904.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[8102592](https://github.com/sagemath/sagetrac-mirror/commit/8102592b5091764b4365cb0652f8f35243c6e6cb)|`33169: updated awali to 2.1.1-220111`|\n|[b6a1e33](https://github.com/sagemath/sagetrac-mirror/commit/b6a1e333011a6b2a6349a517b9126c857480b340)|`33169: remove 'make b'`|\n|[7abd422](https://github.com/sagemath/sagetrac-mirror/commit/7abd422cada3499b0b1ac7d3c73adafa7e6a2bcc)|`33169: changes as suggested in[comment:11](#comment%3A11)`|\n|[725afa7](https://github.com/sagemath/sagetrac-mirror/commit/725afa7ca05139c7de4816ee91484f698512db97)|`33169: updated awali to 2.1.3-220128`|",
    "created_at": "2022-05-05T09:34:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661904",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[8102592](https://github.com/sagemath/sagetrac-mirror/commit/8102592b5091764b4365cb0652f8f35243c6e6cb)|`33169: updated awali to 2.1.1-220111`|
|[b6a1e33](https://github.com/sagemath/sagetrac-mirror/commit/b6a1e333011a6b2a6349a517b9126c857480b340)|`33169: remove 'make b'`|
|[7abd422](https://github.com/sagemath/sagetrac-mirror/commit/7abd422cada3499b0b1ac7d3c73adafa7e6a2bcc)|`33169: changes as suggested in[comment:11](#comment%3A11)`|
|[725afa7](https://github.com/sagemath/sagetrac-mirror/commit/725afa7ca05139c7de4816ee91484f698512db97)|`33169: updated awali to 2.1.3-220128`|



---

archive/issue_comments_661905.json:
```json
{
    "body": "<a id='comment:21'></a>\nI rebased the branch and updated the url and version and checksums to the 2.1.3 version.",
    "created_at": "2022-05-05T09:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661905",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:21'></a>
I rebased the branch and updated the url and version and checksums to the 2.1.3 version.



---

archive/issue_comments_661906.json:
```json
{
    "body": "<a id='comment:22'></a>\nUnfortunately, I can still not build it on my machine. The main error seems to be `g++: fatal error: no input files` :\n\n```\n[awali-2.1.3-220128] [100%] Building Awalipy\n[awali-2.1.3-220128] -- Awalipy (1/3) - Start\n[awali-2.1.3-220128] -- Awalipy (2/3) - Defering to Python module 'distutils'\n[awali-2.1.3-220128] -- Awalipy (3/3) - Done\n[awali-2.1.3-220128] Building awali-2.1.3-220128\n[awali-2.1.3-220128] Scanning dependencies of target touch_module_directories\n[awali-2.1.3-220128] Scanning dependencies of target awali_module_compiler\n[awali-2.1.3-220128] [  0%] Building CXX object awali/extras/CMakeFiles/awali_module_compiler.dir/module-compiler.cc.o\n[awali-2.1.3-220128] [  2%] Linking CXX executable awali_module_compiler\n[awali-2.1.3-220128] Scanning dependencies of target lat-lan-lal_char-_lal_char-_b_lat-lan-lal_char-_lal_char-_b-compose\n[awali-2.1.3-220128] Scanning dependencies of target lat-lan-lal_char-_lan-lal_char--_b-transducer\n[awali-2.1.3-220128] Scanning dependencies of target lat-lan-lal_char-_lan-lal_char--_b-output\n[awali-2.1.3-220128] Scanning dependencies of target lat-lan-lal_char-_lan-lal_char--_b-context\n[awali-2.1.3-220128] Scanning dependencies of target lan-lal_char-_b-output\n[awali-2.1.3-220128] Scanning dependencies of target lal_char_b-ratexp\n[awali-2.1.3-220128] Scanning dependencies of target lan-lal_char-_b-context\n[awali-2.1.3-220128] Compiling module \"compose\" for a new automaton context (lat<lan<lal_char>,lal_char>_b_lat<lan<lal_char>,lal_char>_b)\n[awali-2.1.3-220128] Compiling module \"transducer\" for a new automaton context (lat<lan<lal_char>,lan<lal_char>>_b)\n[awali-2.1.3-220128] Compiling module \"ratexp\" for a new automaton context (lal_char_b)\n[awali-2.1.3-220128] Compiling module \"context\" for a new automaton context (lat<lan<lal_char>,lan<lal_char>>_b)\n[awali-2.1.3-220128] Compiling module \"output\" for a new automaton context (lan<lal_char>_b)\n[awali-2.1.3-220128] Compiling module \"output\" for a new automaton context (lat<lan<lal_char>,lan<lal_char>>_b)\n[awali-2.1.3-220128] Compiling module \"context\" for a new automaton context (lan<lal_char>_b)\n[awali-2.1.3-220128] Linking module \"output\" for a new automaton context (lat<lan<lal_char>,lan<lal_char>>_b)\n[awali-2.1.3-220128] Scanning dependencies of target lan-lal_char-_b-ratexp\n[awali-2.1.3-220128] Compiling module \"ratexp\" for a new automaton context (lan<lal_char>_b)\n[awali-2.1.3-220128] Linking module \"output\" for a new automaton context (lan<lal_char>_b)\n[awali-2.1.3-220128] Scanning dependencies of target lal_char_b_lal_char_b-product\n[awali-2.1.3-220128] Compiling module \"product\" for a new automaton context (lal_char_b_lal_char_b)\n[awali-2.1.3-220128] Linking module \"compose\" for a new automaton context (lat<lan<lal_char>,lal_char>_b_lat<lan<lal_char>,lal_char>_b)\n[awali-2.1.3-220128] Scanning dependencies of target lal_char_b-determinize\n[awali-2.1.3-220128] Compiling module \"determinize\" for a new automaton context (lal_char_b)\n[awali-2.1.3-220128] Linking module \"context\" for a new automaton context (lat<lan<lal_char>,lan<lal_char>>_b)\n[awali-2.1.3-220128] Scanning dependencies of target lal_char_b-context\n[awali-2.1.3-220128] Compiling module \"context\" for a new automaton context (lal_char_b)\n[awali-2.1.3-220128] Linking module \"ratexp\" for a new automaton context (lal_char_b)\n[awali-2.1.3-220128] Linking module \"context\" for a new automaton context (lan<lal_char>_b)\n[awali-2.1.3-220128] Scanning dependencies of target lal_char_b-automaton\n[awali-2.1.3-220128] Compiling module \"automaton\" for a new automaton context (lal_char_b)\n[awali-2.1.3-220128] Scanning dependencies of target lal_char_b-quotient\n[awali-2.1.3-220128] Compiling module \"quotient\" for a new automaton context (lal_char_b)\n[awali-2.1.3-220128] Linking module \"product\" for a new automaton context (lal_char_b_lal_char_b)\n[awali-2.1.3-220128] Scanning dependencies of target lal_char_b-derivation\n[awali-2.1.3-220128] Compiling module \"derivation\" for a new automaton context (lal_char_b)\n[awali-2.1.3-220128] Linking module \"determinize\" for a new automaton context (lal_char_b)\n[awali-2.1.3-220128] Scanning dependencies of target lal_char_b-partial_id\n[awali-2.1.3-220128] Compiling module \"partial_id\" for a new automaton context (lal_char_b)\n[awali-2.1.3-220128] g++: fatal error: no input files\n[awali-2.1.3-220128] compilation terminated.\n[awali-2.1.3-220128] terminate called after throwing an instance of 'std::runtime_error'\n[awali-2.1.3-220128]   what():  Compilation of module partial_id for lal_char_b failed, command was: /home/slabbe/GitBox/sage/local/libexec/ccache/g++ -g -O2 -std=c++11 -I. -Wall -Wextra -Wsign-conversion -g -rdynamic -w -O3 -fpic -I/home/slabbe/.awali/tmp/liblal_char_b-partial_id -I/home/slabbe/GitBox/sage/local/var/tmp/sage/build/awali-1.0.2-190218/src -I/home/slabbe/GitBox/sage/local/include -I/home/slabbe/GitBox/sage/local/var/tmp/sage/build/awali-1.0.2-190218/src/_build -I/home/slabbe/GitBox/sage/local/var/tmp/sage/build/awali-1.0.2-190218/src -I/home/slabbe/GitBox/sage/local/share -c  -o /home/slabbe/.awali/tmp/liblal_char_b-partial_id/liblal_char_b-partial_id.o -MMD -MF /home/slabbe/.awali/tmp/liblal_char_b-partial_id/Makefile -MT /home/slabbe/.awali/otf/liblal_char_b-partial_id.so\n[awali-2.1.3-220128] Aborted\n[awali-2.1.3-220128] awali/extras/CMakeFiles/lal_char_b-partial_id.dir/build.make:58: recipe for target 'awali/extras/CMakeFiles/lal_char_b-partial_id' failed\n[awali-2.1.3-220128] make[6]: *** [awali/extras/CMakeFiles/lal_char_b-partial_id] Error 134\n[awali-2.1.3-220128] CMakeFiles/Makefile2:99588: recipe for target 'awali/extras/CMakeFiles/lal_char_b-partial_id.dir/all' failed\n[awali-2.1.3-220128] make[5]: *** [awali/extras/CMakeFiles/lal_char_b-partial_id.dir/all] Error 2\n[awali-2.1.3-220128] make[5]: *** Waiting for unfinished jobs....\n[awali-2.1.3-220128] Linking module \"context\" for a new automaton context (lal_char_b)\n[awali-2.1.3-220128] Linking module \"ratexp\" for a new automaton context (lan<lal_char>_b)\n[awali-2.1.3-220128] Linking module \"automaton\" for a new automaton context (lal_char_b)\n[awali-2.1.3-220128] Linking module \"quotient\" for a new automaton context (lal_char_b)\n[awali-2.1.3-220128] Linking module \"derivation\" for a new automaton context (lal_char_b)\n[awali-2.1.3-220128] Linking module \"transducer\" for a new automaton context (lat<lan<lal_char>,lan<lal_char>>_b)\n[awali-2.1.3-220128] CMakeFiles/Makefile2:378: recipe for target 'CMakeFiles/recommended.dir/rule' failed\n[awali-2.1.3-220128] make[4]: *** [CMakeFiles/recommended.dir/rule] Error 2\n[awali-2.1.3-220128] Makefile:253: recipe for target 'recommended' failed\n[awali-2.1.3-220128] make[3]: *** [recommended] Error 2\n[awali-2.1.3-220128] *****************************************************************************************************\n[awali-2.1.3-220128] Error building awali-2.1.3-220128\n[awali-2.1.3-220128] *****************************************************************************************************\n```",
    "created_at": "2022-05-05T09:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33169#issuecomment-661906",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:22'></a>
Unfortunately, I can still not build it on my machine. The main error seems to be `g++: fatal error: no input files` :

```
[awali-2.1.3-220128] [100%] Building Awalipy
[awali-2.1.3-220128] -- Awalipy (1/3) - Start
[awali-2.1.3-220128] -- Awalipy (2/3) - Defering to Python module 'distutils'
[awali-2.1.3-220128] -- Awalipy (3/3) - Done
[awali-2.1.3-220128] Building awali-2.1.3-220128
[awali-2.1.3-220128] Scanning dependencies of target touch_module_directories
[awali-2.1.3-220128] Scanning dependencies of target awali_module_compiler
[awali-2.1.3-220128] [  0%] Building CXX object awali/extras/CMakeFiles/awali_module_compiler.dir/module-compiler.cc.o
[awali-2.1.3-220128] [  2%] Linking CXX executable awali_module_compiler
[awali-2.1.3-220128] Scanning dependencies of target lat-lan-lal_char-_lal_char-_b_lat-lan-lal_char-_lal_char-_b-compose
[awali-2.1.3-220128] Scanning dependencies of target lat-lan-lal_char-_lan-lal_char--_b-transducer
[awali-2.1.3-220128] Scanning dependencies of target lat-lan-lal_char-_lan-lal_char--_b-output
[awali-2.1.3-220128] Scanning dependencies of target lat-lan-lal_char-_lan-lal_char--_b-context
[awali-2.1.3-220128] Scanning dependencies of target lan-lal_char-_b-output
[awali-2.1.3-220128] Scanning dependencies of target lal_char_b-ratexp
[awali-2.1.3-220128] Scanning dependencies of target lan-lal_char-_b-context
[awali-2.1.3-220128] Compiling module "compose" for a new automaton context (lat<lan<lal_char>,lal_char>_b_lat<lan<lal_char>,lal_char>_b)
[awali-2.1.3-220128] Compiling module "transducer" for a new automaton context (lat<lan<lal_char>,lan<lal_char>>_b)
[awali-2.1.3-220128] Compiling module "ratexp" for a new automaton context (lal_char_b)
[awali-2.1.3-220128] Compiling module "context" for a new automaton context (lat<lan<lal_char>,lan<lal_char>>_b)
[awali-2.1.3-220128] Compiling module "output" for a new automaton context (lan<lal_char>_b)
[awali-2.1.3-220128] Compiling module "output" for a new automaton context (lat<lan<lal_char>,lan<lal_char>>_b)
[awali-2.1.3-220128] Compiling module "context" for a new automaton context (lan<lal_char>_b)
[awali-2.1.3-220128] Linking module "output" for a new automaton context (lat<lan<lal_char>,lan<lal_char>>_b)
[awali-2.1.3-220128] Scanning dependencies of target lan-lal_char-_b-ratexp
[awali-2.1.3-220128] Compiling module "ratexp" for a new automaton context (lan<lal_char>_b)
[awali-2.1.3-220128] Linking module "output" for a new automaton context (lan<lal_char>_b)
[awali-2.1.3-220128] Scanning dependencies of target lal_char_b_lal_char_b-product
[awali-2.1.3-220128] Compiling module "product" for a new automaton context (lal_char_b_lal_char_b)
[awali-2.1.3-220128] Linking module "compose" for a new automaton context (lat<lan<lal_char>,lal_char>_b_lat<lan<lal_char>,lal_char>_b)
[awali-2.1.3-220128] Scanning dependencies of target lal_char_b-determinize
[awali-2.1.3-220128] Compiling module "determinize" for a new automaton context (lal_char_b)
[awali-2.1.3-220128] Linking module "context" for a new automaton context (lat<lan<lal_char>,lan<lal_char>>_b)
[awali-2.1.3-220128] Scanning dependencies of target lal_char_b-context
[awali-2.1.3-220128] Compiling module "context" for a new automaton context (lal_char_b)
[awali-2.1.3-220128] Linking module "ratexp" for a new automaton context (lal_char_b)
[awali-2.1.3-220128] Linking module "context" for a new automaton context (lan<lal_char>_b)
[awali-2.1.3-220128] Scanning dependencies of target lal_char_b-automaton
[awali-2.1.3-220128] Compiling module "automaton" for a new automaton context (lal_char_b)
[awali-2.1.3-220128] Scanning dependencies of target lal_char_b-quotient
[awali-2.1.3-220128] Compiling module "quotient" for a new automaton context (lal_char_b)
[awali-2.1.3-220128] Linking module "product" for a new automaton context (lal_char_b_lal_char_b)
[awali-2.1.3-220128] Scanning dependencies of target lal_char_b-derivation
[awali-2.1.3-220128] Compiling module "derivation" for a new automaton context (lal_char_b)
[awali-2.1.3-220128] Linking module "determinize" for a new automaton context (lal_char_b)
[awali-2.1.3-220128] Scanning dependencies of target lal_char_b-partial_id
[awali-2.1.3-220128] Compiling module "partial_id" for a new automaton context (lal_char_b)
[awali-2.1.3-220128] g++: fatal error: no input files
[awali-2.1.3-220128] compilation terminated.
[awali-2.1.3-220128] terminate called after throwing an instance of 'std::runtime_error'
[awali-2.1.3-220128]   what():  Compilation of module partial_id for lal_char_b failed, command was: /home/slabbe/GitBox/sage/local/libexec/ccache/g++ -g -O2 -std=c++11 -I. -Wall -Wextra -Wsign-conversion -g -rdynamic -w -O3 -fpic -I/home/slabbe/.awali/tmp/liblal_char_b-partial_id -I/home/slabbe/GitBox/sage/local/var/tmp/sage/build/awali-1.0.2-190218/src -I/home/slabbe/GitBox/sage/local/include -I/home/slabbe/GitBox/sage/local/var/tmp/sage/build/awali-1.0.2-190218/src/_build -I/home/slabbe/GitBox/sage/local/var/tmp/sage/build/awali-1.0.2-190218/src -I/home/slabbe/GitBox/sage/local/share -c  -o /home/slabbe/.awali/tmp/liblal_char_b-partial_id/liblal_char_b-partial_id.o -MMD -MF /home/slabbe/.awali/tmp/liblal_char_b-partial_id/Makefile -MT /home/slabbe/.awali/otf/liblal_char_b-partial_id.so
[awali-2.1.3-220128] Aborted
[awali-2.1.3-220128] awali/extras/CMakeFiles/lal_char_b-partial_id.dir/build.make:58: recipe for target 'awali/extras/CMakeFiles/lal_char_b-partial_id' failed
[awali-2.1.3-220128] make[6]: *** [awali/extras/CMakeFiles/lal_char_b-partial_id] Error 134
[awali-2.1.3-220128] CMakeFiles/Makefile2:99588: recipe for target 'awali/extras/CMakeFiles/lal_char_b-partial_id.dir/all' failed
[awali-2.1.3-220128] make[5]: *** [awali/extras/CMakeFiles/lal_char_b-partial_id.dir/all] Error 2
[awali-2.1.3-220128] make[5]: *** Waiting for unfinished jobs....
[awali-2.1.3-220128] Linking module "context" for a new automaton context (lal_char_b)
[awali-2.1.3-220128] Linking module "ratexp" for a new automaton context (lan<lal_char>_b)
[awali-2.1.3-220128] Linking module "automaton" for a new automaton context (lal_char_b)
[awali-2.1.3-220128] Linking module "quotient" for a new automaton context (lal_char_b)
[awali-2.1.3-220128] Linking module "derivation" for a new automaton context (lal_char_b)
[awali-2.1.3-220128] Linking module "transducer" for a new automaton context (lat<lan<lal_char>,lan<lal_char>>_b)
[awali-2.1.3-220128] CMakeFiles/Makefile2:378: recipe for target 'CMakeFiles/recommended.dir/rule' failed
[awali-2.1.3-220128] make[4]: *** [CMakeFiles/recommended.dir/rule] Error 2
[awali-2.1.3-220128] Makefile:253: recipe for target 'recommended' failed
[awali-2.1.3-220128] make[3]: *** [recommended] Error 2
[awali-2.1.3-220128] *****************************************************************************************************
[awali-2.1.3-220128] Error building awali-2.1.3-220128
[awali-2.1.3-220128] *****************************************************************************************************
```



---

archive/issue_events_098592.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33169#event-98592"
}
```



---

archive/issue_events_098593.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33169",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33169#event-98593"
}
```
