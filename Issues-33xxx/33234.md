# Issue 33234: Fix randrange deprecation warning with python-3.10

archive/issues_032997.json:
```json
{
    "body": "```\n.../sage/rings/qqbar.py:2863: DeprecationWarning: non-integer arguments to randrange() have been deprecated since Python 3.10 and will be removed in a subsequent version\n  roots = p.roots(ring, False)\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/33234\n\n",
    "closed_at": "2022-05-24T22:44:38Z",
    "created_at": "2022-01-27T00:48:02Z",
    "labels": [
        "component: porting",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Fix randrange deprecation warning with python-3.10",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33234",
    "user": "https://github.com/orlitzky"
}
```
```
.../sage/rings/qqbar.py:2863: DeprecationWarning: non-integer arguments to randrange() have been deprecated since Python 3.10 and will be removed in a subsequent version
  roots = p.roots(ring, False)
```


Issue created by migration from https://trac.sagemath.org/ticket/33234





---

archive/issue_comments_470000.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-01-27T00:55:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33234#issuecomment-470000",
    "user": "https://github.com/orlitzky"
}
```

New commits:



---

archive/issue_comments_470001.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-01-27T00:55:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33234#issuecomment-470001",
    "user": "https://github.com/orlitzky"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_470002.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-01-27T18:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33234#issuecomment-470002",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_470003.json:
```json
{
    "body": "ok",
    "created_at": "2022-01-27T18:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33234#issuecomment-470003",
    "user": "https://github.com/fchapoton"
}
```

ok



---

archive/issue_comments_470004.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-02-28T22:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33234#issuecomment-470004",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_470005.json:
```json
{
    "body": "```\n**********************************************************************\n72\nFile \"src/sage/schemes/cyclic_covers/charpoly_frobenius.py\", line 146, in sage.schemes.cyclic_covers.charpoly_frobenius.charpoly_frobenius\n73\nFailed example:\n74\n    charpoly_frobenius(M,\n75\n    [31, 30, 29, 28, 27, 26, 25, 24, 23, 22, 21, 20, 19, 18, 17, 16,\n76\n     15, 14, 13, 12] + [11]*21, 1129, 1, 1)\n77\nException raised:\n78\n    Traceback (most recent call last):\n79\n      File \"/var/home/agent-99/actions-runner/_work/sage/sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 694, in _run\n80\n        self.compile_and_execute(example, compiler, test.globs)\n81\n      File \"/var/home/agent-99/actions-runner/_work/sage/sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1088, in compile_and_execute\n82\n        exec(compiled, globs)\n83\n      File \"<doctest sage.schemes.cyclic_covers.charpoly_frobenius.charpoly_frobenius[17]>\", line 1, in <module>\n84\n        charpoly_frobenius(M,\n85\n      File \"/var/home/agent-99/actions-runner/_work/sage/sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/schemes/cyclic_covers/charpoly_frobenius.py\", line 208, in charpoly_frobenius\n86\n        assert cp[-1] == 1\n87\n    AssertionError\n88\n**********************************************************************\n89\n1 item had failures:\n90\n   1 of  22 in sage.schemes.cyclic_covers.charpoly_frobenius.charpoly_frobenius\n91\n    [21 tests, 1 failure, 0.26 s]\n92\n----------------------------------------------------------------------\n93\nsage -t --long --warn-long 40.9 --random-seed=123 src/sage/schemes/cyclic_covers/charpoly_frobenius.py  # 1 doctest failed\n94\n----------------------------------------------------------------------\n95\n```",
    "created_at": "2022-02-28T22:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33234#issuecomment-470005",
    "user": "https://github.com/vbraun"
}
```

```
**********************************************************************
72
File "src/sage/schemes/cyclic_covers/charpoly_frobenius.py", line 146, in sage.schemes.cyclic_covers.charpoly_frobenius.charpoly_frobenius
73
Failed example:
74
    charpoly_frobenius(M,
75
    [31, 30, 29, 28, 27, 26, 25, 24, 23, 22, 21, 20, 19, 18, 17, 16,
76
     15, 14, 13, 12] + [11]*21, 1129, 1, 1)
77
Exception raised:
78
    Traceback (most recent call last):
79
      File "/var/home/agent-99/actions-runner/_work/sage/sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 694, in _run
80
        self.compile_and_execute(example, compiler, test.globs)
81
      File "/var/home/agent-99/actions-runner/_work/sage/sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1088, in compile_and_execute
82
        exec(compiled, globs)
83
      File "<doctest sage.schemes.cyclic_covers.charpoly_frobenius.charpoly_frobenius[17]>", line 1, in <module>
84
        charpoly_frobenius(M,
85
      File "/var/home/agent-99/actions-runner/_work/sage/sage/local/var/lib/sage/venv-python3.9.9/lib/python3.9/site-packages/sage/schemes/cyclic_covers/charpoly_frobenius.py", line 208, in charpoly_frobenius
86
        assert cp[-1] == 1
87
    AssertionError
88
**********************************************************************
89
1 item had failures:
90
   1 of  22 in sage.schemes.cyclic_covers.charpoly_frobenius.charpoly_frobenius
91
    [21 tests, 1 failure, 0.26 s]
92
----------------------------------------------------------------------
93
sage -t --long --warn-long 40.9 --random-seed=123 src/sage/schemes/cyclic_covers/charpoly_frobenius.py  # 1 doctest failed
94
----------------------------------------------------------------------
95
```



---

archive/issue_comments_470006.json:
```json
{
    "body": "Whatever that failure was, I don't think it was caused by this change:\n\n```\n$ sage -t --long --random-seed=123 src/sage/schemes/cyclic_covers/charpoly_frobenius.py\nRunning doctests with ID 2022-04-30-06-40-43-a8b7a991.\nGit branch: u/mjo/ticket/33234\nUsing --optional=gentoo,pip,sage,sage_spkg\nFeatures to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,gfan,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,nauty,palp,pandoc,pdf2svg,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib\nDoctesting 1 file.\nsage -t --long --warn-long 276.9 --random-seed=123 src/sage/schemes/cyclic_covers/charpoly_frobenius.py\n    [21 tests, 0.75 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 0.9 seconds\n    cpu time: 0.8 seconds\n    cumulative wall time: 0.8 seconds\nFeatures detected for doctesting: \npytest is not installed in the venv, skip checking tests that rely on it\n```",
    "created_at": "2022-04-30T10:43:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33234#issuecomment-470006",
    "user": "https://github.com/orlitzky"
}
```

Whatever that failure was, I don't think it was caused by this change:

```
$ sage -t --long --random-seed=123 src/sage/schemes/cyclic_covers/charpoly_frobenius.py
Running doctests with ID 2022-04-30-06-40-43-a8b7a991.
Git branch: u/mjo/ticket/33234
Using --optional=gentoo,pip,sage,sage_spkg
Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,gfan,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,nauty,palp,pandoc,pdf2svg,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib
Doctesting 1 file.
sage -t --long --warn-long 276.9 --random-seed=123 src/sage/schemes/cyclic_covers/charpoly_frobenius.py
    [21 tests, 0.75 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 0.9 seconds
    cpu time: 0.8 seconds
    cumulative wall time: 0.8 seconds
Features detected for doctesting: 
pytest is not installed in the venv, skip checking tests that rely on it
```



---

archive/issue_comments_470007.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-04-30T10:43:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33234#issuecomment-470007",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_470008.json:
```json
{
    "body": "indeed, so let's try again",
    "created_at": "2022-04-30T10:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33234#issuecomment-470008",
    "user": "https://github.com/fchapoton"
}
```

indeed, so let's try again



---

archive/issue_events_087775.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-04-30T10:59:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33234",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33234#event-87775"
}
```



---

archive/issue_comments_470009.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-04-30T10:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33234#issuecomment-470009",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_087776.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-24T22:44:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33234",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33234#event-87776"
}
```



---

archive/issue_comments_470010.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-05-24T22:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33234#issuecomment-470010",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_470011.json:
```json
{
    "body": "The issue with randrange deprecation seems to be more widespread - see #34202 for another instance.",
    "created_at": "2022-07-23T18:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33234",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33234#issuecomment-470011",
    "user": "https://github.com/maxale"
}
```

The issue with randrange deprecation seems to be more widespread - see #34202 for another instance.
