# Issue 33103: gitpod integration using Docker images from portability testing workflow

archive/issues_032866.json:
```json
{
    "assignees": [],
    "body": "[Gitpod](https://www.gitpod.io/) allows one to setup a complete dev environment in the cloud. It is free to use for up to 50 hours per month. In this ticket the config necessary for making this work with sagemath is added. \n\nYou can try this out by going to https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates. \n\nIt works by building docker images on github, push them to GH packages (https://github.com/mkoeppe?tab=packages&q=gitpod) and then use these ones as the base for the gitpod workspace.\n\nAfter this ticket is merged, we should activate the automatic prebuild by installing the github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env very quickly without the need to build anything.\n\nFollow-up: #33113 gitpod usability improvements\n\nAlternative: #32749, which only builds the docker image on gitpod (which is currently not really feasible as they have a time limit of 1h) \n\n\nDepends on #30933\nDepends on #29285\n\nCC:  @tobiasdiez @dimpase @saraedum\n\nBranch/Commit: **[`078f247`](https://github.com/sagemath/sagetrac-mirror/commit/078f247c9a5ea383178499e9b0e990777f497a6e)**\n\nReviewer: **Matthias Koeppe, Dima Pasechnik**\n\nAuthor: **Tobias Diez, Matthias Koeppe**\n\nComponent: **docker**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33103_\n\n",
    "closed_at": "2022-02-12T22:04:53Z",
    "created_at": "2022-01-01T19:34:16Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20docker",
        "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "gitpod integration using Docker images from portability testing workflow",
    "type": "issue",
    "updated_at": "2022-02-12T22:04:53Z",
    "url": "https://github.com/sagemath/sage/issues/33103",
    "user": "https://github.com/mkoeppe"
}
```
[Gitpod](https://www.gitpod.io/) allows one to setup a complete dev environment in the cloud. It is free to use for up to 50 hours per month. In this ticket the config necessary for making this work with sagemath is added. 

You can try this out by going to https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates. 

It works by building docker images on github, push them to GH packages (https://github.com/mkoeppe?tab=packages&q=gitpod) and then use these ones as the base for the gitpod workspace.

After this ticket is merged, we should activate the automatic prebuild by installing the github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env very quickly without the need to build anything.

Follow-up: #33113 gitpod usability improvements

Alternative: #32749, which only builds the docker image on gitpod (which is currently not really feasible as they have a time limit of 1h) 


Depends on #30933
Depends on #29285

CC:  @tobiasdiez @dimpase @saraedum

Branch/Commit: **[`078f247`](https://github.com/sagemath/sagetrac-mirror/commit/078f247c9a5ea383178499e9b0e990777f497a6e)**

Reviewer: **Matthias Koeppe, Dima Pasechnik**

Author: **Tobias Diez, Matthias Koeppe**

Component: **docker**

_Issue created by migration from https://trac.sagemath.org/ticket/33103_





---

archive/issue_events_452207.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-01T19:34:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452207"
}
```



---

archive/issue_events_452208.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-01T19:34:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20docker",
    "label_color": "0000b0",
    "label_name": "c: docker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452208"
}
```



---

archive/issue_events_452209.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-01T19:34:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452209"
}
```



---

archive/issue_events_452210.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-01T19:34:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452210"
}
```



---

archive/issue_comments_534639.json:
```json
{
    "body": "Branch: **[u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow)**",
    "created_at": "2022-01-01T19:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534639",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow)**



---

archive/issue_comments_534640.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e99a09e55439e4276e87d248ab80d816f9735065\"><code>e99a09e</code></a></td><td><code>sed -i.bak 's/ubunty/ubuntu/g' .github/workflows/*.yml</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edb4364000d32c72f057bad0faa81d9ba2a79b9b\"><code>edb4364</code></a></td><td><code>.github/workflows/tox.yml: Replace homebrew-macos-python3_xcode-standard by homebrew-macos-usrlocal-python3_xcode-standard</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e27e16187ea939402737bdc8a30c4c43e1bcf11e\"><code>e27e161</code></a></td><td><code>Merge #32703</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96a45d12870f2b11ab4d98f500a9d601fe420f1b\"><code>96a45d1</code></a></td><td><code>tox.ini, .github/workflows: Remove ubuntu-groovy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59ec3d05225db5a8a5896a7ad123c49e2d26e157\"><code>59ec3d0</code></a></td><td><code>Merge #33068</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbf03d1786d24bc9ec6d437f2b820bfa687c52fd\"><code>cbf03d1</code></a></td><td><code>.github/workflows/tox.yml: Add docker-gitpod</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a9edfcc73c5ccbaadb064beccd80df75f8f9b9f\"><code>4a9edfc</code></a></td><td><code>build/bin/write-dockerfile.sh: Handle __SUDO</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d697d9424d45f27699493a0d6773a1e90eccbe23\"><code>d697d94</code></a></td><td><code>build/bin/write-dockerfile.sh: Use relative workdir 'sage'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7cc5cd68a9018d2e3168683f860736696288b9b\"><code>c7cc5cd</code></a></td><td><code>.gitpod.yml, docker/.gitpod.Dockerfile: Reverse SAGE_LOCAL symlink</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda\"><code>bde9f74</code></a></td><td><code>build/bin/write-dockerfile.sh: Handle $__CHOWN</code></td></tr></table>\n",
    "created_at": "2022-01-01T19:41:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534640",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e99a09e55439e4276e87d248ab80d816f9735065"><code>e99a09e</code></a></td><td><code>sed -i.bak 's/ubunty/ubuntu/g' .github/workflows/*.yml</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edb4364000d32c72f057bad0faa81d9ba2a79b9b"><code>edb4364</code></a></td><td><code>.github/workflows/tox.yml: Replace homebrew-macos-python3_xcode-standard by homebrew-macos-usrlocal-python3_xcode-standard</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e27e16187ea939402737bdc8a30c4c43e1bcf11e"><code>e27e161</code></a></td><td><code>Merge #32703</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96a45d12870f2b11ab4d98f500a9d601fe420f1b"><code>96a45d1</code></a></td><td><code>tox.ini, .github/workflows: Remove ubuntu-groovy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59ec3d05225db5a8a5896a7ad123c49e2d26e157"><code>59ec3d0</code></a></td><td><code>Merge #33068</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbf03d1786d24bc9ec6d437f2b820bfa687c52fd"><code>cbf03d1</code></a></td><td><code>.github/workflows/tox.yml: Add docker-gitpod</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a9edfcc73c5ccbaadb064beccd80df75f8f9b9f"><code>4a9edfc</code></a></td><td><code>build/bin/write-dockerfile.sh: Handle __SUDO</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d697d9424d45f27699493a0d6773a1e90eccbe23"><code>d697d94</code></a></td><td><code>build/bin/write-dockerfile.sh: Use relative workdir 'sage'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7cc5cd68a9018d2e3168683f860736696288b9b"><code>c7cc5cd</code></a></td><td><code>.gitpod.yml, docker/.gitpod.Dockerfile: Reverse SAGE_LOCAL symlink</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda"><code>bde9f74</code></a></td><td><code>build/bin/write-dockerfile.sh: Handle $__CHOWN</code></td></tr></table>




---

archive/issue_comments_534641.json:
```json
{
    "body": "Commit: **[`bde9f74`](https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda)**",
    "created_at": "2022-01-01T19:41:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534641",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`bde9f74`](https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda)**



---

archive/issue_comments_534642.json:
```json
{
    "body": "Author: **Tobias Diez, Matthias Koeppe**",
    "created_at": "2022-01-01T19:41:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534642",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Tobias Diez, Matthias Koeppe**



---

archive/issue_comments_534643.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21afe511f1e903647102127204f47c2d29e04fef\"><code>21afe51</code></a></td><td><code>.github/workflows/tox*.yml, tox.ini: Pass ddocker.pkg.github.com credentials via DOCKER_CONFIG_FILE</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76b5e76ab2c28a3ee4a5c1571737bc2f8571f5ff\"><code>76b5e76</code></a></td><td><code>Merge #30933</code></td></tr></table>\n",
    "created_at": "2022-01-01T19:44:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534643",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21afe511f1e903647102127204f47c2d29e04fef"><code>21afe51</code></a></td><td><code>.github/workflows/tox*.yml, tox.ini: Pass ddocker.pkg.github.com credentials via DOCKER_CONFIG_FILE</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76b5e76ab2c28a3ee4a5c1571737bc2f8571f5ff"><code>76b5e76</code></a></td><td><code>Merge #30933</code></td></tr></table>




---

archive/issue_comments_534644.json:
```json
{
    "body": "Changed commit from **[`bde9f74`](https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda)** to **[`76b5e76`](https://github.com/sagemath/sagetrac-mirror/commit/76b5e76ab2c28a3ee4a5c1571737bc2f8571f5ff)**",
    "created_at": "2022-01-01T19:44:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534644",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bde9f74`](https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda)** to **[`76b5e76`](https://github.com/sagemath/sagetrac-mirror/commit/76b5e76ab2c28a3ee4a5c1571737bc2f8571f5ff)**



---

archive/issue_comments_534645.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n Based on #32749.\n+\n+Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod\n+\n+\n``````\n",
    "created_at": "2022-01-01T19:59:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534645",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,5 @@
 Based on #32749.
+
+Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod
+
+
``````




---

archive/issue_comments_534646.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ef6a6e3333a43153b92e54dceb3b06ab0713387\"><code>7ef6a6e</code></a></td><td><code>docker/.gitpod.Dockerfile: Remove, use custom image from GH Packages instead</code></td></tr></table>\n",
    "created_at": "2022-01-01T20:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534646",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ef6a6e3333a43153b92e54dceb3b06ab0713387"><code>7ef6a6e</code></a></td><td><code>docker/.gitpod.Dockerfile: Remove, use custom image from GH Packages instead</code></td></tr></table>




---

archive/issue_comments_534647.json:
```json
{
    "body": "Changed commit from **[`76b5e76`](https://github.com/sagemath/sagetrac-mirror/commit/76b5e76ab2c28a3ee4a5c1571737bc2f8571f5ff)** to **[`7ef6a6e`](https://github.com/sagemath/sagetrac-mirror/commit/7ef6a6e3333a43153b92e54dceb3b06ab0713387)**",
    "created_at": "2022-01-01T20:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534647",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`76b5e76`](https://github.com/sagemath/sagetrac-mirror/commit/76b5e76ab2c28a3ee4a5c1571737bc2f8571f5ff)** to **[`7ef6a6e`](https://github.com/sagemath/sagetrac-mirror/commit/7ef6a6e3333a43153b92e54dceb3b06ab0713387)**



---

archive/issue_comments_534648.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,5 @@\n \n Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod\n \n-\n+To try out (after the image has been built):\n+- https://gitpod.io/#https://github.com/mkoeppe/sage/tree/t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow\n``````\n",
    "created_at": "2022-01-01T20:31:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534648",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,5 @@
 
 Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod
 
-
+To try out (after the image has been built):
+- https://gitpod.io/#https://github.com/mkoeppe/sage/tree/t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow
``````




---

archive/issue_comments_534649.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,5 +2,5 @@\n \n Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod\n \n-To try out (after the image has been built):\n+To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4680839663?check_suite_focus=true):\n - https://gitpod.io/#https://github.com/mkoeppe/sage/tree/t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow\n``````\n",
    "created_at": "2022-01-01T20:32:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534649",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,5 +2,5 @@
 
 Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod
 
-To try out (after the image has been built):
+To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4680839663?check_suite_focus=true):
 - https://gitpod.io/#https://github.com/mkoeppe/sage/tree/t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow
``````




---

archive/issue_comments_534650.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b41c4af670b9e8a653e8c2e4049848e4e87d8a1\"><code>6b41c4a</code></a></td><td><code>.github/workflows/tox.yml: Also push ...-with-targets-pre</code></td></tr></table>\n",
    "created_at": "2022-01-01T20:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534650",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b41c4af670b9e8a653e8c2e4049848e4e87d8a1"><code>6b41c4a</code></a></td><td><code>.github/workflows/tox.yml: Also push ...-with-targets-pre</code></td></tr></table>




---

archive/issue_comments_534651.json:
```json
{
    "body": "Changed commit from **[`7ef6a6e`](https://github.com/sagemath/sagetrac-mirror/commit/7ef6a6e3333a43153b92e54dceb3b06ab0713387)** to **[`6b41c4a`](https://github.com/sagemath/sagetrac-mirror/commit/6b41c4af670b9e8a653e8c2e4049848e4e87d8a1)**",
    "created_at": "2022-01-01T20:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534651",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7ef6a6e`](https://github.com/sagemath/sagetrac-mirror/commit/7ef6a6e3333a43153b92e54dceb3b06ab0713387)** to **[`6b41c4a`](https://github.com/sagemath/sagetrac-mirror/commit/6b41c4af670b9e8a653e8c2e4049848e4e87d8a1)**



---

archive/issue_comments_534652.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nRunning into `pyenv` issues (#29285) here too: \n\n```\n[pytest] installing. Log file: /home/gitpod/sage/logs/pkgs/pytest.log\n  [pytest] error installing, exit status 1. End of log file:\n  [pytest]   /home/gitpod/sage-local/var/lib/sage/venv-python3.8/bin/python3: No module named pip\n  [pytest] Full log file: /home/gitpod/sage/logs/pkgs/pytest.log\nmake[4]: *** [Makefile:2756: pytest-no-deps] Error 1\n```",
    "created_at": "2022-01-01T21:35:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534652",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Running into `pyenv` issues (#29285) here too: 

```
[pytest] installing. Log file: /home/gitpod/sage/logs/pkgs/pytest.log
  [pytest] error installing, exit status 1. End of log file:
  [pytest]   /home/gitpod/sage-local/var/lib/sage/venv-python3.8/bin/python3: No module named pip
  [pytest] Full log file: /home/gitpod/sage/logs/pkgs/pytest.log
make[4]: *** [Makefile:2756: pytest-no-deps] Error 1
```



---

archive/issue_comments_534653.json:
```json
{
    "body": "Changed dependencies from **#33068, #30933** to **#33068, #30933, #29285**",
    "created_at": "2022-01-02T02:01:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534653",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#33068, #30933** to **#33068, #30933, #29285**



---

archive/issue_comments_534654.json:
```json
{
    "body": "Changed commit from **[`6b41c4a`](https://github.com/sagemath/sagetrac-mirror/commit/6b41c4af670b9e8a653e8c2e4049848e4e87d8a1)** to **[`5f0c36c`](https://github.com/sagemath/sagetrac-mirror/commit/5f0c36cc73b59e64eba006ed5a5dfb51efd920bf)**",
    "created_at": "2022-01-02T02:01:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534654",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6b41c4a`](https://github.com/sagemath/sagetrac-mirror/commit/6b41c4af670b9e8a653e8c2e4049848e4e87d8a1)** to **[`5f0c36c`](https://github.com/sagemath/sagetrac-mirror/commit/5f0c36cc73b59e64eba006ed5a5dfb51efd920bf)**



---

archive/issue_comments_534655.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/376932f6933c7c210dc169d5682489f454229c66\"><code>376932f</code></a></td><td><code>build/bin/sage-bootstrap-python: Reject pyenv shims</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f0c36cc73b59e64eba006ed5a5dfb51efd920bf\"><code>5f0c36c</code></a></td><td><code>Merge #29285</code></td></tr></table>\n",
    "created_at": "2022-01-02T02:01:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534655",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/376932f6933c7c210dc169d5682489f454229c66"><code>376932f</code></a></td><td><code>build/bin/sage-bootstrap-python: Reject pyenv shims</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f0c36cc73b59e64eba006ed5a5dfb51efd920bf"><code>5f0c36c</code></a></td><td><code>Merge #29285</code></td></tr></table>




---

archive/issue_comments_534656.json:
```json
{
    "body": "Changed dependencies from **#33068, #30933, #29285** to **#33068, #30933, #29285, #32868**",
    "created_at": "2022-01-02T02:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534656",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#33068, #30933, #29285** to **#33068, #30933, #29285, #32868**



---

archive/issue_comments_534657.json:
```json
{
    "body": "Changed dependencies from **#33068, #30933, #29285, #32868** to **#33068, #30933, #29285, #32868, #33067**",
    "created_at": "2022-01-02T02:08:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534657",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#33068, #30933, #29285, #32868** to **#33068, #30933, #29285, #32868, #33067**



---

archive/issue_comments_534658.json:
```json
{
    "body": "Changed commit from **[`5f0c36c`](https://github.com/sagemath/sagetrac-mirror/commit/5f0c36cc73b59e64eba006ed5a5dfb51efd920bf)** to **[`af7c8d3`](https://github.com/sagemath/sagetrac-mirror/commit/af7c8d3c2237980a12b89ffad4c0cc0531662ad3)**",
    "created_at": "2022-01-02T02:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534658",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5f0c36c`](https://github.com/sagemath/sagetrac-mirror/commit/5f0c36cc73b59e64eba006ed5a5dfb51efd920bf)** to **[`af7c8d3`](https://github.com/sagemath/sagetrac-mirror/commit/af7c8d3c2237980a12b89ffad4c0cc0531662ad3)**



---

archive/issue_comments_534659.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aeca1a03015f27b74c6641cb7bbcdd9c5e82bf16\"><code>aeca1a0</code></a></td><td><code>Makefile (pypi-sdists): Add sage_setup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd3dce9e076ba81febc4e8f838e1b5ca03b12459\"><code>cd3dce9</code></a></td><td><code>pkgs/sage-conf_pypi/setup.py: Update directory of configured sage_conf.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c695921c3cee61a32a8d7ec9443bb4e315eb481b\"><code>c695921</code></a></td><td><code>pkgs/sage-conf/sage_conf.py.in (SAGE_SPKG_WHEELS): Update so it works if SAGE_VENV != SAGE_LOCAL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cebcda3fa7e1ae0ecd0e7cbf1a0aba15bed1a010\"><code>cebcda3</code></a></td><td><code>Merge tag '9.5.beta4' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0026892c983828c7925626d2bc9165967f0bebe5\"><code>0026892</code></a></td><td><code>Merge tag '9.5.beta5' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a4a32384133408ef05edb4f40b9d363697d3087\"><code>2a4a323</code></a></td><td><code>Merge tag '9.5.beta7' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02234ce0b51908c0dfa233da5942721428fe9f9b\"><code>02234ce</code></a></td><td><code>Merge #29039</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1413d45fe041d7e4b017961d8b273b2a97ddb18\"><code>b1413d4</code></a></td><td><code>build/bin/write-dockerfile.sh: Move 'ADD pkgs' earlier</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/859be3ef9e3293f63fb18d8ac2a87e16f6f2114c\"><code>859be3e</code></a></td><td><code>build/bin/write-dockerfile.sh: ADD src/*.m4 files for bootstrapping</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af7c8d3c2237980a12b89ffad4c0cc0531662ad3\"><code>af7c8d3</code></a></td><td><code>Merge #33067</code></td></tr></table>\n",
    "created_at": "2022-01-02T02:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534659",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aeca1a03015f27b74c6641cb7bbcdd9c5e82bf16"><code>aeca1a0</code></a></td><td><code>Makefile (pypi-sdists): Add sage_setup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd3dce9e076ba81febc4e8f838e1b5ca03b12459"><code>cd3dce9</code></a></td><td><code>pkgs/sage-conf_pypi/setup.py: Update directory of configured sage_conf.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c695921c3cee61a32a8d7ec9443bb4e315eb481b"><code>c695921</code></a></td><td><code>pkgs/sage-conf/sage_conf.py.in (SAGE_SPKG_WHEELS): Update so it works if SAGE_VENV != SAGE_LOCAL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cebcda3fa7e1ae0ecd0e7cbf1a0aba15bed1a010"><code>cebcda3</code></a></td><td><code>Merge tag '9.5.beta4' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0026892c983828c7925626d2bc9165967f0bebe5"><code>0026892</code></a></td><td><code>Merge tag '9.5.beta5' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a4a32384133408ef05edb4f40b9d363697d3087"><code>2a4a323</code></a></td><td><code>Merge tag '9.5.beta7' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02234ce0b51908c0dfa233da5942721428fe9f9b"><code>02234ce</code></a></td><td><code>Merge #29039</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1413d45fe041d7e4b017961d8b273b2a97ddb18"><code>b1413d4</code></a></td><td><code>build/bin/write-dockerfile.sh: Move 'ADD pkgs' earlier</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/859be3ef9e3293f63fb18d8ac2a87e16f6f2114c"><code>859be3e</code></a></td><td><code>build/bin/write-dockerfile.sh: ADD src/*.m4 files for bootstrapping</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af7c8d3c2237980a12b89ffad4c0cc0531662ad3"><code>af7c8d3</code></a></td><td><code>Merge #33067</code></td></tr></table>




---

archive/issue_comments_534660.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,5 +2,5 @@\n \n Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod\n \n-To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4680839663?check_suite_focus=true):\n+To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4682227249?check_suite_focus=true):\n - https://gitpod.io/#https://github.com/mkoeppe/sage/tree/t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow\n``````\n",
    "created_at": "2022-01-02T02:21:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534660",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,5 +2,5 @@
 
 Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod
 
-To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4680839663?check_suite_focus=true):
+To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4682227249?check_suite_focus=true):
 - https://gitpod.io/#https://github.com/mkoeppe/sage/tree/t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow
``````




---

archive/issue_comments_534661.json:
```json
{
    "body": "Changed commit from **[`af7c8d3`](https://github.com/sagemath/sagetrac-mirror/commit/af7c8d3c2237980a12b89ffad4c0cc0531662ad3)** to **[`fad8942`](https://github.com/sagemath/sagetrac-mirror/commit/fad8942c93702e6c098fe6b9cd2d68704b256334)**",
    "created_at": "2022-01-02T02:26:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534661",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`af7c8d3`](https://github.com/sagemath/sagetrac-mirror/commit/af7c8d3c2237980a12b89ffad4c0cc0531662ad3)** to **[`fad8942`](https://github.com/sagemath/sagetrac-mirror/commit/fad8942c93702e6c098fe6b9cd2d68704b256334)**



---

archive/issue_comments_534662.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fad8942c93702e6c098fe6b9cd2d68704b256334\"><code>fad8942</code></a></td><td><code>build/bin/write-dockerfile.sh: Use relative workdir 'sage' (again)</code></td></tr></table>\n",
    "created_at": "2022-01-02T02:26:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534662",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fad8942c93702e6c098fe6b9cd2d68704b256334"><code>fad8942</code></a></td><td><code>build/bin/write-dockerfile.sh: Use relative workdir 'sage' (again)</code></td></tr></table>




---

archive/issue_comments_534663.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod\n \n To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4682227249?check_suite_focus=true):\n-- https://gitpod.io/#https://github.com/mkoeppe/sage/tree/t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow\n+- https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates\n``````\n",
    "created_at": "2022-01-02T04:54:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534663",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod
 
 To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4682227249?check_suite_focus=true):
-- https://gitpod.io/#https://github.com/mkoeppe/sage/tree/t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow
+- https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates
``````




---

archive/issue_comments_534664.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/601a3b56f66d185c3d32069149446c189bf89ea2\"><code>601a3b5</code></a></td><td><code>.gitpod.yml: Remove pyenv workarounds</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1258c702dac22a428cf0d1ede65ccea35cf50d0f\"><code>1258c70</code></a></td><td><code>.gitpod.yml: configure --enable-download-from-upstream-url</code></td></tr></table>\n",
    "created_at": "2022-01-02T05:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534664",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/601a3b56f66d185c3d32069149446c189bf89ea2"><code>601a3b5</code></a></td><td><code>.gitpod.yml: Remove pyenv workarounds</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1258c702dac22a428cf0d1ede65ccea35cf50d0f"><code>1258c70</code></a></td><td><code>.gitpod.yml: configure --enable-download-from-upstream-url</code></td></tr></table>




---

archive/issue_comments_534665.json:
```json
{
    "body": "Changed commit from **[`fad8942`](https://github.com/sagemath/sagetrac-mirror/commit/fad8942c93702e6c098fe6b9cd2d68704b256334)** to **[`1258c70`](https://github.com/sagemath/sagetrac-mirror/commit/1258c702dac22a428cf0d1ede65ccea35cf50d0f)**",
    "created_at": "2022-01-02T05:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534665",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fad8942`](https://github.com/sagemath/sagetrac-mirror/commit/fad8942c93702e6c098fe6b9cd2d68704b256334)** to **[`1258c70`](https://github.com/sagemath/sagetrac-mirror/commit/1258c702dac22a428cf0d1ede65ccea35cf50d0f)**



---

archive/issue_comments_534666.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThis works. To be done:\n- Additional tags for the images, for example `latest` for releases, or branch/tag name (`${GITHUB_REF_NAME}` - https://docs.github.com/en/actions/learn-github-actions/environment-variables#default-environment-variables) -  suitable for `.gitpod.yml`\n- Could use `docker/.gitpod.Dockerfile` again with `COPY --from` to make the final image smaller (currently /home/gitpod/sage has the old source tree)",
    "created_at": "2022-01-02T06:56:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534666",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

This works. To be done:
- Additional tags for the images, for example `latest` for releases, or branch/tag name (`${GITHUB_REF_NAME}` - https://docs.github.com/en/actions/learn-github-actions/environment-variables#default-environment-variables) -  suitable for `.gitpod.yml`
- Could use `docker/.gitpod.Dockerfile` again with `COPY --from` to make the final image smaller (currently /home/gitpod/sage has the old source tree)



---

archive/issue_comments_534667.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,5 +2,5 @@\n \n Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod\n \n-To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4682227249?check_suite_focus=true):\n+To try out:\n - https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates\n``````\n",
    "created_at": "2022-01-02T20:51:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534667",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,5 +2,5 @@
 
 Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod
 
-To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4682227249?check_suite_focus=true):
+To try out:
 - https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates
``````




---

archive/issue_comments_534668.json:
```json
{
    "body": "Changed commit from **[`1258c70`](https://github.com/sagemath/sagetrac-mirror/commit/1258c702dac22a428cf0d1ede65ccea35cf50d0f)** to **[`fdb49a1`](https://github.com/sagemath/sagetrac-mirror/commit/fdb49a1d7865f8105c50470715368af9a8ede02d)**",
    "created_at": "2022-01-02T21:42:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534668",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1258c70`](https://github.com/sagemath/sagetrac-mirror/commit/1258c702dac22a428cf0d1ede65ccea35cf50d0f)** to **[`fdb49a1`](https://github.com/sagemath/sagetrac-mirror/commit/fdb49a1d7865f8105c50470715368af9a8ede02d)**



---

archive/issue_comments_534669.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdb49a1d7865f8105c50470715368af9a8ede02d\"><code>fdb49a1</code></a></td><td><code>tox.ini, .github/workflows/tox*.yml: Also tag the Docker images with GITHUB_REF_NAME</code></td></tr></table>\n",
    "created_at": "2022-01-02T21:42:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534669",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdb49a1d7865f8105c50470715368af9a8ede02d"><code>fdb49a1</code></a></td><td><code>tox.ini, .github/workflows/tox*.yml: Also tag the Docker images with GITHUB_REF_NAME</code></td></tr></table>




---

archive/issue_comments_534670.json:
```json
{
    "body": "Reviewer: **https://github.com/mkoeppe/sage/runs/4686167146**",
    "created_at": "2022-01-02T21:48:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534670",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **https://github.com/mkoeppe/sage/runs/4686167146**



---

archive/issue_comments_534671.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab757ba44a661a0c358764d3aa40c49709f4c6cd\"><code>ab757ba</code></a></td><td><code>.github/workflows/tox.yml: Fix passing of EXTRA_DOCKER_TAGS</code></td></tr></table>\n",
    "created_at": "2022-01-02T22:30:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534671",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab757ba44a661a0c358764d3aa40c49709f4c6cd"><code>ab757ba</code></a></td><td><code>.github/workflows/tox.yml: Fix passing of EXTRA_DOCKER_TAGS</code></td></tr></table>




---

archive/issue_comments_534672.json:
```json
{
    "body": "Changed commit from **[`fdb49a1`](https://github.com/sagemath/sagetrac-mirror/commit/fdb49a1d7865f8105c50470715368af9a8ede02d)** to **[`ab757ba`](https://github.com/sagemath/sagetrac-mirror/commit/ab757ba44a661a0c358764d3aa40c49709f4c6cd)**",
    "created_at": "2022-01-02T22:30:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534672",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fdb49a1`](https://github.com/sagemath/sagetrac-mirror/commit/fdb49a1d7865f8105c50470715368af9a8ede02d)** to **[`ab757ba`](https://github.com/sagemath/sagetrac-mirror/commit/ab757ba44a661a0c358764d3aa40c49709f4c6cd)**



---

archive/issue_comments_534673.json:
```json
{
    "body": "Changed commit from **[`ab757ba`](https://github.com/sagemath/sagetrac-mirror/commit/ab757ba44a661a0c358764d3aa40c49709f4c6cd)** to **[`96528eb`](https://github.com/sagemath/sagetrac-mirror/commit/96528ebee43305123a813b340ad3e027ba2f8712)**",
    "created_at": "2022-01-02T23:51:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534673",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ab757ba`](https://github.com/sagemath/sagetrac-mirror/commit/ab757ba44a661a0c358764d3aa40c49709f4c6cd)** to **[`96528eb`](https://github.com/sagemath/sagetrac-mirror/commit/96528ebee43305123a813b340ad3e027ba2f8712)**



---

archive/issue_comments_534674.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96528ebee43305123a813b340ad3e027ba2f8712\"><code>96528eb</code></a></td><td><code>.github/workflows/tox*.yml: Tag docker images 'latest' or 'dev' when building a release tag</code></td></tr></table>\n",
    "created_at": "2022-01-02T23:51:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534674",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96528ebee43305123a813b340ad3e027ba2f8712"><code>96528eb</code></a></td><td><code>.github/workflows/tox*.yml: Tag docker images 'latest' or 'dev' when building a release tag</code></td></tr></table>




---

archive/issue_comments_534675.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/runs/4686167146** to **https://github.com/mkoeppe/sage/runs/4686610379**",
    "created_at": "2022-01-03T01:27:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534675",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/runs/4686167146** to **https://github.com/mkoeppe/sage/runs/4686610379**



---

archive/issue_comments_534676.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/runs/4686610379** to **https://github.com/mkoeppe/sage/runs/4687073955**",
    "created_at": "2022-01-03T01:37:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534676",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/runs/4686610379** to **https://github.com/mkoeppe/sage/runs/4687073955**



---

archive/issue_comments_534677.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/runs/4687073955** to **https://github.com/mkoeppe/sage/runs/4687310789**",
    "created_at": "2022-01-03T02:28:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534677",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/runs/4687073955** to **https://github.com/mkoeppe/sage/runs/4687310789**



---

archive/issue_comments_534678.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/runs/4687310789** to **https://github.com/mkoeppe/sage/runs/4687310728**",
    "created_at": "2022-01-03T02:30:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534678",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/runs/4687310789** to **https://github.com/mkoeppe/sage/runs/4687310728**



---

archive/issue_comments_534679.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d1dc0fa92a7192bee0bb56e9ea13944da97007f\"><code>5d1dc0f</code></a></td><td><code>.gitpod.yml: Use tag :dev</code></td></tr></table>\n",
    "created_at": "2022-01-03T05:36:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534679",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d1dc0fa92a7192bee0bb56e9ea13944da97007f"><code>5d1dc0f</code></a></td><td><code>.gitpod.yml: Use tag :dev</code></td></tr></table>




---

archive/issue_comments_534680.json:
```json
{
    "body": "Changed commit from **[`96528eb`](https://github.com/sagemath/sagetrac-mirror/commit/96528ebee43305123a813b340ad3e027ba2f8712)** to **[`5d1dc0f`](https://github.com/sagemath/sagetrac-mirror/commit/5d1dc0fa92a7192bee0bb56e9ea13944da97007f)**",
    "created_at": "2022-01-03T05:36:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534680",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`96528eb`](https://github.com/sagemath/sagetrac-mirror/commit/96528ebee43305123a813b340ad3e027ba2f8712)** to **[`5d1dc0f`](https://github.com/sagemath/sagetrac-mirror/commit/5d1dc0fa92a7192bee0bb56e9ea13944da97007f)**



---

archive/issue_comments_534681.json:
```json
{
    "body": "Work Issues: **Change .gitpod.yml to use sagemath instead of mkoeppe**",
    "created_at": "2022-01-03T05:46:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534681",
    "user": "https://github.com/mkoeppe"
}
```

Work Issues: **Change .gitpod.yml to use sagemath instead of mkoeppe**



---

archive/issue_events_452211.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-03T05:46:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452211"
}
```



---

archive/issue_comments_534682.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nAlso the configuration of VS Code should be improved. It seems to start up using the wrong interpreter (not `venv/bin/python3`), and also one needs to manually select the right Jupyter kernel. \n\nThe scipy folks have some good documentation and configuration (https://scipy.github.io/devdocs/dev/contributor/quickstart_gitpod.html), perhaps we can lift something from there.",
    "created_at": "2022-01-03T07:19:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534682",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

Also the configuration of VS Code should be improved. It seems to start up using the wrong interpreter (not `venv/bin/python3`), and also one needs to manually select the right Jupyter kernel. 

The scipy folks have some good documentation and configuration (https://scipy.github.io/devdocs/dev/contributor/quickstart_gitpod.html), perhaps we can lift something from there.



---

archive/issue_comments_534683.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nIs the prebuild working for this branch?\n\nHow can one work with branches that update sage packages? With #32749 one could trigger a rebuild of the docker image (and thus of the system packages) using the `#imagebuild` context. Can something like this also be implemented here? For example, take the github action build docker as base, and then re-install system or python packages on top of this if they have newer versions?\n\nFor the VS integration, #30677 is closed but not yet merged into develop.",
    "created_at": "2022-01-03T12:11:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534683",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:32" align="right">comment:32</div>

Is the prebuild working for this branch?

How can one work with branches that update sage packages? With #32749 one could trigger a rebuild of the docker image (and thus of the system packages) using the `#imagebuild` context. Can something like this also be implemented here? For example, take the github action build docker as base, and then re-install system or python packages on top of this if they have newer versions?

For the VS integration, #30677 is closed but not yet merged into develop.



---

archive/issue_comments_534684.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@tobiasdiez](#comment:32):\n> Is the prebuild working for this branch?\n\nI've just merged #33071 into the branch https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates to try this out.\n\n> How can one work with branches that update sage packages? \n\nNothing special, `make` just rebuilds what needs rebuilding.",
    "created_at": "2022-01-03T17:35:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534684",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@tobiasdiez](#comment:32):
> Is the prebuild working for this branch?

I've just merged #33071 into the branch https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates to try this out.

> How can one work with branches that update sage packages? 

Nothing special, `make` just rebuilds what needs rebuilding.



---

archive/issue_comments_534685.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@tobiasdiez](#comment:32):\n> For the VS integration, #30677 is closed but not yet merged into develop.\n\nI forgot to say that the branch https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates already contains #30677 and other updates",
    "created_at": "2022-01-03T17:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534685",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@tobiasdiez](#comment:32):
> For the VS integration, #30677 is closed but not yet merged into develop.

I forgot to say that the branch https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates already contains #30677 and other updates



---

archive/issue_comments_534686.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@mkoeppe](#comment:33):\n> Replying to [@tobiasdiez](#comment:32):\n> > Is the prebuild working for this branch?\n\n> \n> I've just merged #33071 into the branch https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates to try this out.\n> \n> > How can one work with branches that update sage packages? \n\n> \n> Nothing special, `make` just rebuilds what needs rebuilding.\n\nSo this would then be done as part of the prebuild?",
    "created_at": "2022-01-03T17:44:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534686",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@mkoeppe](#comment:33):
> Replying to [@tobiasdiez](#comment:32):
> > Is the prebuild working for this branch?

> 
> I've just merged #33071 into the branch https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates to try this out.
> 
> > How can one work with branches that update sage packages? 

> 
> Nothing special, `make` just rebuilds what needs rebuilding.

So this would then be done as part of the prebuild?



---

archive/issue_comments_534687.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nYes, I think so",
    "created_at": "2022-01-03T18:14:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534687",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

Yes, I think so



---

archive/issue_comments_534688.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nLooks like I'll have to add some configuration so that it does prebuilds on all branches",
    "created_at": "2022-01-03T18:18:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534688",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:37" align="right">comment:37</div>

Looks like I'll have to add some configuration so that it does prebuilds on all branches



---

archive/issue_comments_534689.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI created a \"project\" and now it looks like the prebuild triggered by a push is running - https://gitpod.io/projects/sage",
    "created_at": "2022-01-03T18:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534689",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">comment:38</div>

I created a "project" and now it looks like the prebuild triggered by a push is running - https://gitpod.io/projects/sage



---

archive/issue_comments_534690.json:
```json
{
    "body": "Changed commit from **[`5d1dc0f`](https://github.com/sagemath/sagetrac-mirror/commit/5d1dc0fa92a7192bee0bb56e9ea13944da97007f)** to **[`3e28e13`](https://github.com/sagemath/sagetrac-mirror/commit/3e28e13afa9d3a61aceb4d6b3c3d66451f47133f)**",
    "created_at": "2022-01-03T18:25:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534690",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5d1dc0f`](https://github.com/sagemath/sagetrac-mirror/commit/5d1dc0fa92a7192bee0bb56e9ea13944da97007f)** to **[`3e28e13`](https://github.com/sagemath/sagetrac-mirror/commit/3e28e13afa9d3a61aceb4d6b3c3d66451f47133f)**



---

archive/issue_comments_534691.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e28e13afa9d3a61aceb4d6b3c3d66451f47133f\"><code>3e28e13</code></a></td><td><code>.gitpod.yml: Set github prebuild options to true</code></td></tr></table>\n",
    "created_at": "2022-01-03T18:25:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534691",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e28e13afa9d3a61aceb4d6b3c3d66451f47133f"><code>3e28e13</code></a></td><td><code>.gitpod.yml: Set github prebuild options to true</code></td></tr></table>




---

archive/issue_comments_534692.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nBefore the push I had merged #32968 with the Sphinx update; and the prebuild has just installed the upgraded package",
    "created_at": "2022-01-03T18:31:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534692",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">comment:40</div>

Before the push I had merged #32968 with the Sphinx update; and the prebuild has just installed the upgraded package



---

archive/issue_comments_534693.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@mkoeppe](#comment:40):\n> Before the push I had merged #32968 with the Sphinx update; and the prebuild has just installed the upgraded package\n\nThat's very nice!",
    "created_at": "2022-01-03T18:33:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534693",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@mkoeppe](#comment:40):
> Before the push I had merged #32968 with the Sphinx update; and the prebuild has just installed the upgraded package

That's very nice!



---

archive/issue_comments_534694.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49575f56f74343fb81b401a6077a3f05bb037c61\"><code>49575f5</code></a></td><td><code>.gitpod.yml: Switch to image ghcr.io/sagemath/sage/sage-docker-gitpod-standard-with-targets:dev</code></td></tr></table>\n",
    "created_at": "2022-01-03T18:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534694",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49575f56f74343fb81b401a6077a3f05bb037c61"><code>49575f5</code></a></td><td><code>.gitpod.yml: Switch to image ghcr.io/sagemath/sage/sage-docker-gitpod-standard-with-targets:dev</code></td></tr></table>




---

archive/issue_comments_534695.json:
```json
{
    "body": "Changed commit from **[`3e28e13`](https://github.com/sagemath/sagetrac-mirror/commit/3e28e13afa9d3a61aceb4d6b3c3d66451f47133f)** to **[`49575f5`](https://github.com/sagemath/sagetrac-mirror/commit/49575f56f74343fb81b401a6077a3f05bb037c61)**",
    "created_at": "2022-01-03T18:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534695",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3e28e13`](https://github.com/sagemath/sagetrac-mirror/commit/3e28e13afa9d3a61aceb4d6b3c3d66451f47133f)** to **[`49575f5`](https://github.com/sagemath/sagetrac-mirror/commit/49575f56f74343fb81b401a6077a3f05bb037c61)**



---

archive/issue_comments_534696.json:
```json
{
    "body": "Changed work issues from **Change .gitpod.yml to use sagemath instead of mkoeppe** to none",
    "created_at": "2022-01-03T18:58:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534696",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **Change .gitpod.yml to use sagemath instead of mkoeppe** to none



---

archive/issue_comments_534697.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,6 @@\n \n To try out:\n - https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates\n+\n+Follow-up: #33113 gitpod usability improvements\n+\n``````\n",
    "created_at": "2022-01-03T18:58:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534697",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,6 @@
 
 To try out:
 - https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates
+
+Follow-up: #33113 gitpod usability improvements
+
``````




---

archive/issue_comments_534698.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nThe prebuild was just killed because of the 35m timeout. \nWhat's the best choice of timeout according to your experiments?",
    "created_at": "2022-01-03T19:06:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534698",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:44" align="right">comment:44</div>

The prebuild was just killed because of the 35m timeout. 
What's the best choice of timeout according to your experiments?



---

archive/issue_comments_534699.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nIf its really the timeout that killed the prebuild (in which the prebuild would be green and be used for the next workspace, but maybe doesn't contain all packages) then you can go to 50min. Maybe a bit less since the docker image is quite big so this part may take some time. But essentially you have to calculate 60min - bootstrap and config (2-3min) - docker init and copying (?? min).\n\nHowever, for me the prebuild often timed out after 1h (then its shown red in the project view). The only solution I've found for this is not using symlinks into /home/.",
    "created_at": "2022-01-03T19:12:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534699",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:45" align="right">comment:45</div>

If its really the timeout that killed the prebuild (in which the prebuild would be green and be used for the next workspace, but maybe doesn't contain all packages) then you can go to 50min. Maybe a bit less since the docker image is quite big so this part may take some time. But essentially you have to calculate 60min - bootstrap and config (2-3min) - docker init and copying (?? min).

However, for me the prebuild often timed out after 1h (then its shown red in the project view). The only solution I've found for this is not using symlinks into /home/.



---

archive/issue_comments_534700.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nhttps://gitpod.io/projects/sage/e8780c03-b8b8-4810-a772-d4cc2994b6bf shows\n\n```\n[sagelib-9.5.beta9] installing. Log file: /workspace/sage/logs/pkgs/sagelib-9.5.beta9.log\n  [pytest] successfully installed.\n  [sphinx-4.3.1] successfully installed.\nmake[1]: *** [Makefile:39: all-build] Terminated\nmake: *** [Makefile:16: build] Terminated\nexit\n```\n\nbut it is still claims \"RUNNING: Prebuild in progress\"",
    "created_at": "2022-01-03T19:13:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534700",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:46" align="right">comment:46</div>

https://gitpod.io/projects/sage/e8780c03-b8b8-4810-a772-d4cc2994b6bf shows

```
[sagelib-9.5.beta9] installing. Log file: /workspace/sage/logs/pkgs/sagelib-9.5.beta9.log
  [pytest] successfully installed.
  [sphinx-4.3.1] successfully installed.
make[1]: *** [Makefile:39: all-build] Terminated
make: *** [Makefile:16: build] Terminated
exit
```

but it is still claims "RUNNING: Prebuild in progress"



---

archive/issue_comments_534701.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nHowever, https://gitpod.io/projects/sage/prebuilds shows READY.",
    "created_at": "2022-01-03T19:14:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534701",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

However, https://gitpod.io/projects/sage/prebuilds shows READY.



---

archive/issue_comments_534702.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\n\n```\n\n\ud83e\udd19 This task ran as a workspace prebuild\n\ud83c\udf89 Well done on saving 37 minutes\n```",
    "created_at": "2022-01-03T19:14:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534702",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:48" align="right">comment:48</div>


```

 This task ran as a workspace prebuild
 Well done on saving 37 minutes
```



---

archive/issue_comments_534703.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nA few more points:\n- please use the recent version of gitpod.yml from https://github.com/tobiasdiez/sagetrac-mirror/blob/develop/.gitpod.yml (the ssh stuff and num threads = 8)\n- `--prefix=$HOME/sage-local` in gitpod.yml should probably be `/workspace/sage-local` or a few lines above `$HOME` should be used?\n- probably 8 parallel tasks are fine. gitpod gives 6 (or 7?) vCPUs to users.",
    "created_at": "2022-01-03T19:21:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534703",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:49" align="right">comment:49</div>

A few more points:
- please use the recent version of gitpod.yml from https://github.com/tobiasdiez/sagetrac-mirror/blob/develop/.gitpod.yml (the ssh stuff and num threads = 8)
- `--prefix=$HOME/sage-local` in gitpod.yml should probably be `/workspace/sage-local` or a few lines above `$HOME` should be used?
- probably 8 parallel tasks are fine. gitpod gives 6 (or 7?) vCPUs to users.



---

archive/issue_comments_534704.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@mkoeppe](#comment:48):\n> \n> ```\n> \n> \ud83e\udd19 This task ran as a workspace prebuild\n> \ud83c\udf89 Well done on saving 37 minutes\n> ```\n\nNice, then you can go to 50min indeed.",
    "created_at": "2022-01-03T19:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534704",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@mkoeppe](#comment:48):
> 
> ```
> 
>  This task ran as a workspace prebuild
>  Well done on saving 37 minutes
> ```

Nice, then you can go to 50min indeed.



---

archive/issue_comments_534705.json:
```json
{
    "body": "Changed commit from **[`49575f5`](https://github.com/sagemath/sagetrac-mirror/commit/49575f56f74343fb81b401a6077a3f05bb037c61)** to **[`e7d4e96`](https://github.com/sagemath/sagetrac-mirror/commit/e7d4e966d8d25281befe14c5b66bae991c4736e3)**",
    "created_at": "2022-01-03T19:26:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534705",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`49575f5`](https://github.com/sagemath/sagetrac-mirror/commit/49575f56f74343fb81b401a6077a3f05bb037c61)** to **[`e7d4e96`](https://github.com/sagemath/sagetrac-mirror/commit/e7d4e966d8d25281befe14c5b66bae991c4736e3)**



---

archive/issue_comments_534706.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e7d4e966d8d25281befe14c5b66bae991c4736e3\"><code>e7d4e96</code></a></td><td><code>.gitpod.yml: Increase timeout for make in prebuild, increase parallelism</code></td></tr></table>\n",
    "created_at": "2022-01-03T19:26:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534706",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e7d4e966d8d25281befe14c5b66bae991c4736e3"><code>e7d4e96</code></a></td><td><code>.gitpod.yml: Increase timeout for make in prebuild, increase parallelism</code></td></tr></table>




---

archive/issue_comments_534707.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nPresumably the `before` script should try to resume the build in case the prebuild timed out.",
    "created_at": "2022-01-03T19:28:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534707",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:52" align="right">comment:52</div>

Presumably the `before` script should try to resume the build in case the prebuild timed out.



---

archive/issue_comments_534708.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nI agree. But `init` is called after `before` during the prebuild, and I couldn't find a way to detect if one is in a prebuild or not...",
    "created_at": "2022-01-03T19:34:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534708",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:53" align="right">comment:53</div>

I agree. But `init` is called after `before` during the prebuild, and I couldn't find a way to detect if one is in a prebuild or not...



---

archive/issue_comments_534709.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdb332d2a52db9f63fc54960d029a5ad9c529a61\"><code>fdb332d</code></a></td><td><code>.gitpod.yml: Run 'make' again in 'before' task if prebuild 'make' timed out</code></td></tr></table>\n",
    "created_at": "2022-01-03T19:43:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534709",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdb332d2a52db9f63fc54960d029a5ad9c529a61"><code>fdb332d</code></a></td><td><code>.gitpod.yml: Run 'make' again in 'before' task if prebuild 'make' timed out</code></td></tr></table>




---

archive/issue_comments_534710.json:
```json
{
    "body": "Changed commit from **[`e7d4e96`](https://github.com/sagemath/sagetrac-mirror/commit/e7d4e966d8d25281befe14c5b66bae991c4736e3)** to **[`fdb332d`](https://github.com/sagemath/sagetrac-mirror/commit/fdb332d2a52db9f63fc54960d029a5ad9c529a61)**",
    "created_at": "2022-01-03T19:43:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534710",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e7d4e96`](https://github.com/sagemath/sagetrac-mirror/commit/e7d4e966d8d25281befe14c5b66bae991c4736e3)** to **[`fdb332d`](https://github.com/sagemath/sagetrac-mirror/commit/fdb332d2a52db9f63fc54960d029a5ad9c529a61)**



---

archive/issue_comments_534711.json:
```json
{
    "body": "Changed commit from **[`fdb332d`](https://github.com/sagemath/sagetrac-mirror/commit/fdb332d2a52db9f63fc54960d029a5ad9c529a61)** to **[`aaa9777`](https://github.com/sagemath/sagetrac-mirror/commit/aaa97778417b2142d9f3cf83c29dce9d38d1853e)**",
    "created_at": "2022-01-03T19:54:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534711",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fdb332d`](https://github.com/sagemath/sagetrac-mirror/commit/fdb332d2a52db9f63fc54960d029a5ad9c529a61)** to **[`aaa9777`](https://github.com/sagemath/sagetrac-mirror/commit/aaa97778417b2142d9f3cf83c29dce9d38d1853e)**



---

archive/issue_comments_534712.json:
```json
{
    "body": "<div id=\"comment:55\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aaa97778417b2142d9f3cf83c29dce9d38d1853e\"><code>aaa9777</code></a></td><td><code>.gitpod.yml: Use SAGE_NUM_THREADS=8</code></td></tr></table>\n",
    "created_at": "2022-01-03T19:54:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534712",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aaa97778417b2142d9f3cf83c29dce9d38d1853e"><code>aaa9777</code></a></td><td><code>.gitpod.yml: Use SAGE_NUM_THREADS=8</code></td></tr></table>




---

archive/issue_comments_534713.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@tobiasdiez](#comment:49):\n> - please use the recent version of gitpod.yml from https://github.com/tobiasdiez/sagetrac-mirror/blob/develop/.gitpod.yml (the ssh stuff and num threads = 8)\n\nI've updated it - the ssh stuff was already same",
    "created_at": "2022-01-03T19:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534713",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@tobiasdiez](#comment:49):
> - please use the recent version of gitpod.yml from https://github.com/tobiasdiez/sagetrac-mirror/blob/develop/.gitpod.yml (the ssh stuff and num threads = 8)

I've updated it - the ssh stuff was already same



---

archive/issue_comments_534714.json:
```json
{
    "body": "Changed commit from **[`aaa9777`](https://github.com/sagemath/sagetrac-mirror/commit/aaa97778417b2142d9f3cf83c29dce9d38d1853e)** to **[`87900a7`](https://github.com/sagemath/sagetrac-mirror/commit/87900a7d0188247be6d0c6db7b87349759621ca3)**",
    "created_at": "2022-01-03T20:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534714",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`aaa9777`](https://github.com/sagemath/sagetrac-mirror/commit/aaa97778417b2142d9f3cf83c29dce9d38d1853e)** to **[`87900a7`](https://github.com/sagemath/sagetrac-mirror/commit/87900a7d0188247be6d0c6db7b87349759621ca3)**



---

archive/issue_comments_534715.json:
```json
{
    "body": "<div id=\"comment:57\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87900a7d0188247be6d0c6db7b87349759621ca3\"><code>87900a7</code></a></td><td><code>.gitpod.yml: Refer to /home/gitpod as /Users/mkoeppe</code></td></tr></table>\n",
    "created_at": "2022-01-03T20:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534715",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87900a7d0188247be6d0c6db7b87349759621ca3"><code>87900a7</code></a></td><td><code>.gitpod.yml: Refer to /home/gitpod as /Users/mkoeppe</code></td></tr></table>




---

archive/issue_comments_534716.json:
```json
{
    "body": "<div id=\"comment:58\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0864c6ec3e00d24566b586472ffb88e1471a2e30\"><code>0864c6e</code></a></td><td><code>.github/workflows/tox*.yml: Push stable releases also to Docker tag 'dev'</code></td></tr></table>\n",
    "created_at": "2022-01-03T20:11:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534716",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:58"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0864c6ec3e00d24566b586472ffb88e1471a2e30"><code>0864c6e</code></a></td><td><code>.github/workflows/tox*.yml: Push stable releases also to Docker tag 'dev'</code></td></tr></table>




---

archive/issue_comments_534717.json:
```json
{
    "body": "Changed commit from **[`87900a7`](https://github.com/sagemath/sagetrac-mirror/commit/87900a7d0188247be6d0c6db7b87349759621ca3)** to **[`0864c6e`](https://github.com/sagemath/sagetrac-mirror/commit/0864c6ec3e00d24566b586472ffb88e1471a2e30)**",
    "created_at": "2022-01-03T20:11:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534717",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`87900a7`](https://github.com/sagemath/sagetrac-mirror/commit/87900a7d0188247be6d0c6db7b87349759621ca3)** to **[`0864c6e`](https://github.com/sagemath/sagetrac-mirror/commit/0864c6ec3e00d24566b586472ffb88e1471a2e30)**



---

archive/issue_comments_534718.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nhttps://gitpod.io/projects/sage/134676a9-2a0e-429a-816d-68ad30441f58\n\n```\n[sphinx-4.3.1] installing. Log file: /workspace/sage/logs/pkgs/sphinx-4.3.1.log\n[sagelib-9.5.beta9] installing. Log file: /workspace/sage/logs/pkgs/sagelib-9.5.beta9.log\n  [pytest] successfully installed.\n  [sphinx-4.3.1] successfully installed.\n  [sagelib-9.5.beta9] successfully installed.\nmake --no-print-directory sage_docbuild-SAGE_VENV-no-deps\n[sage_docbuild-9.5.beta9] installing. Log file: /workspace/sage/logs/pkgs/sage_docbuild-9.5.beta9.log\n  [sage_docbuild-9.5.beta9] successfully installed.\nmake[2]: Leaving directory '/workspace/sage/build/make'\n\nreal    31m8.684s\nuser    101m44.392s\nsys     3m47.093s\nSAGE_CHECK=warn, so scanning the log files. This may take a few seconds.\nSage build/upgrade complete!\nmake[1]: Leaving directory '/workspace/sage'\nexit\n\n\ud83e\udd19 This task ran as a workspace prebuild\n\ud83c\udf89 Well done on saving 34 minutes\n```",
    "created_at": "2022-01-03T20:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534718",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:59" align="right">comment:59</div>

https://gitpod.io/projects/sage/134676a9-2a0e-429a-816d-68ad30441f58

```
[sphinx-4.3.1] installing. Log file: /workspace/sage/logs/pkgs/sphinx-4.3.1.log
[sagelib-9.5.beta9] installing. Log file: /workspace/sage/logs/pkgs/sagelib-9.5.beta9.log
  [pytest] successfully installed.
  [sphinx-4.3.1] successfully installed.
  [sagelib-9.5.beta9] successfully installed.
make --no-print-directory sage_docbuild-SAGE_VENV-no-deps
[sage_docbuild-9.5.beta9] installing. Log file: /workspace/sage/logs/pkgs/sage_docbuild-9.5.beta9.log
  [sage_docbuild-9.5.beta9] successfully installed.
make[2]: Leaving directory '/workspace/sage/build/make'

real    31m8.684s
user    101m44.392s
sys     3m47.093s
SAGE_CHECK=warn, so scanning the log files. This may take a few seconds.
Sage build/upgrade complete!
make[1]: Leaving directory '/workspace/sage'
exit

 This task ran as a workspace prebuild
 Well done on saving 34 minutes
```



---

archive/issue_comments_534719.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@sagetrac-git](#comment:54):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdb332d2a52db9f63fc54960d029a5ad9c529a61\"><code>fdb332d</code></a></td><td><code>.gitpod.yml: Run 'make' again in 'before' task if prebuild 'make' timed out</code></td></tr></table>\n\nThis worked but for some reason the Sphinx package installation was repeated in this step. It's fast but I'll try if refreshing the timestamps of the install records will avoid it.",
    "created_at": "2022-01-03T22:52:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534719",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@sagetrac-git](#comment:54):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdb332d2a52db9f63fc54960d029a5ad9c529a61"><code>fdb332d</code></a></td><td><code>.gitpod.yml: Run 'make' again in 'before' task if prebuild 'make' timed out</code></td></tr></table>

This worked but for some reason the Sphinx package installation was repeated in this step. It's fast but I'll try if refreshing the timestamps of the install records will avoid it.



---

archive/issue_comments_534720.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36e0c546caed4bd77400317118b3345ae86b8cc5\"><code>36e0c54</code></a></td><td><code>.gitpod.yml (before): Set timestamps of installation records to same mtime</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9fa0152e86c3631ae69cb6d7ad75ed133e93bd6\"><code>c9fa015</code></a></td><td><code>.gitpod.yml: Use /workspace/sage/local as physical location of SAGE_LOCAL</code></td></tr></table>\n",
    "created_at": "2022-01-04T00:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534720",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36e0c546caed4bd77400317118b3345ae86b8cc5"><code>36e0c54</code></a></td><td><code>.gitpod.yml (before): Set timestamps of installation records to same mtime</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9fa0152e86c3631ae69cb6d7ad75ed133e93bd6"><code>c9fa015</code></a></td><td><code>.gitpod.yml: Use /workspace/sage/local as physical location of SAGE_LOCAL</code></td></tr></table>




---

archive/issue_comments_534721.json:
```json
{
    "body": "Changed commit from **[`0864c6e`](https://github.com/sagemath/sagetrac-mirror/commit/0864c6ec3e00d24566b586472ffb88e1471a2e30)** to **[`c9fa015`](https://github.com/sagemath/sagetrac-mirror/commit/c9fa0152e86c3631ae69cb6d7ad75ed133e93bd6)**",
    "created_at": "2022-01-04T00:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534721",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0864c6e`](https://github.com/sagemath/sagetrac-mirror/commit/0864c6ec3e00d24566b586472ffb88e1471a2e30)** to **[`c9fa015`](https://github.com/sagemath/sagetrac-mirror/commit/c9fa0152e86c3631ae69cb6d7ad75ed133e93bd6)**



---

archive/issue_comments_534722.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nThere are some weird synchronization issues on the server side - it seems that if one creates a workspace right after a prebuild has completed, it can happen that it does not use the prebuild.",
    "created_at": "2022-01-04T01:10:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534722",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:62" align="right">comment:62</div>

There are some weird synchronization issues on the server side - it seems that if one creates a workspace right after a prebuild has completed, it can happen that it does not use the prebuild.



---

archive/issue_comments_534723.json:
```json
{
    "body": "Changed commit from **[`c9fa015`](https://github.com/sagemath/sagetrac-mirror/commit/c9fa0152e86c3631ae69cb6d7ad75ed133e93bd6)** to **[`38dafc6`](https://github.com/sagemath/sagetrac-mirror/commit/38dafc60837e3de5455e24e6913150791b05e509)**",
    "created_at": "2022-01-04T01:21:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534723",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c9fa015`](https://github.com/sagemath/sagetrac-mirror/commit/c9fa0152e86c3631ae69cb6d7ad75ed133e93bd6)** to **[`38dafc6`](https://github.com/sagemath/sagetrac-mirror/commit/38dafc60837e3de5455e24e6913150791b05e509)**



---

archive/issue_comments_534724.json:
```json
{
    "body": "<div id=\"comment:63\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38dafc60837e3de5455e24e6913150791b05e509\"><code>38dafc6</code></a></td><td><code>.gitpod.yml (before): Refer to /workspace/sage/local by full path</code></td></tr></table>\n",
    "created_at": "2022-01-04T01:21:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534724",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:63"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38dafc60837e3de5455e24e6913150791b05e509"><code>38dafc6</code></a></td><td><code>.gitpod.yml (before): Refer to /workspace/sage/local by full path</code></td></tr></table>




---

archive/issue_comments_534725.json:
```json
{
    "body": "<div id=\"comment:64\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6be067e2c7210f5f04e0903a5e45a101461da63\"><code>e6be067</code></a></td><td><code>.gitpod.yml (init): Make sure to remove the directory /home/gitpod/sage-local</code></td></tr></table>\n",
    "created_at": "2022-01-04T01:30:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534725",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:64"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6be067e2c7210f5f04e0903a5e45a101461da63"><code>e6be067</code></a></td><td><code>.gitpod.yml (init): Make sure to remove the directory /home/gitpod/sage-local</code></td></tr></table>




---

archive/issue_comments_534726.json:
```json
{
    "body": "Changed commit from **[`38dafc6`](https://github.com/sagemath/sagetrac-mirror/commit/38dafc60837e3de5455e24e6913150791b05e509)** to **[`e6be067`](https://github.com/sagemath/sagetrac-mirror/commit/e6be067e2c7210f5f04e0903a5e45a101461da63)**",
    "created_at": "2022-01-04T01:30:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534726",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`38dafc6`](https://github.com/sagemath/sagetrac-mirror/commit/38dafc60837e3de5455e24e6913150791b05e509)** to **[`e6be067`](https://github.com/sagemath/sagetrac-mirror/commit/e6be067e2c7210f5f04e0903a5e45a101461da63)**



---

archive/issue_comments_534727.json:
```json
{
    "body": "Changed commit from **[`e6be067`](https://github.com/sagemath/sagetrac-mirror/commit/e6be067e2c7210f5f04e0903a5e45a101461da63)** to **[`cdcf2ac`](https://github.com/sagemath/sagetrac-mirror/commit/cdcf2acb4e53644963484644e2c0e244f28d36b1)**",
    "created_at": "2022-01-04T06:46:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534727",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e6be067`](https://github.com/sagemath/sagetrac-mirror/commit/e6be067e2c7210f5f04e0903a5e45a101461da63)** to **[`cdcf2ac`](https://github.com/sagemath/sagetrac-mirror/commit/cdcf2acb4e53644963484644e2c0e244f28d36b1)**



---

archive/issue_comments_534728.json:
```json
{
    "body": "<div id=\"comment:65\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdcf2acb4e53644963484644e2c0e244f28d36b1\"><code>cdcf2ac</code></a></td><td><code>.gitpod.yml (before): establish SAGE_LOCAL here, not in 'init'</code></td></tr></table>\n",
    "created_at": "2022-01-04T06:46:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534728",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:65"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdcf2acb4e53644963484644e2c0e244f28d36b1"><code>cdcf2ac</code></a></td><td><code>.gitpod.yml (before): establish SAGE_LOCAL here, not in 'init'</code></td></tr></table>




---

archive/issue_comments_534729.json:
```json
{
    "body": "<div id=\"comment:66\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b44b6b004b97ab73327a4817d0513ea2394097f\"><code>5b44b6b</code></a></td><td><code>.gitpod.yml: Remove install-record timestamping</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f58453d1aeeb84d5508498d6178751405798657a\"><code>f58453d</code></a></td><td><code>.gitpod.yml: Also remove the source tree used by the Docker build</code></td></tr></table>\n",
    "created_at": "2022-01-04T07:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534729",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:66"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b44b6b004b97ab73327a4817d0513ea2394097f"><code>5b44b6b</code></a></td><td><code>.gitpod.yml: Remove install-record timestamping</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f58453d1aeeb84d5508498d6178751405798657a"><code>f58453d</code></a></td><td><code>.gitpod.yml: Also remove the source tree used by the Docker build</code></td></tr></table>




---

archive/issue_comments_534730.json:
```json
{
    "body": "Changed commit from **[`cdcf2ac`](https://github.com/sagemath/sagetrac-mirror/commit/cdcf2acb4e53644963484644e2c0e244f28d36b1)** to **[`f58453d`](https://github.com/sagemath/sagetrac-mirror/commit/f58453d1aeeb84d5508498d6178751405798657a)**",
    "created_at": "2022-01-04T07:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534730",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cdcf2ac`](https://github.com/sagemath/sagetrac-mirror/commit/cdcf2acb4e53644963484644e2c0e244f28d36b1)** to **[`f58453d`](https://github.com/sagemath/sagetrac-mirror/commit/f58453d1aeeb84d5508498d6178751405798657a)**



---

archive/issue_comments_534731.json:
```json
{
    "body": "Changed commit from **[`f58453d`](https://github.com/sagemath/sagetrac-mirror/commit/f58453d1aeeb84d5508498d6178751405798657a)** to **[`aef75eb`](https://github.com/sagemath/sagetrac-mirror/commit/aef75ebe0986f6c499585fcdad36231808e5d21b)**",
    "created_at": "2022-01-04T08:59:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534731",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f58453d`](https://github.com/sagemath/sagetrac-mirror/commit/f58453d1aeeb84d5508498d6178751405798657a)** to **[`aef75eb`](https://github.com/sagemath/sagetrac-mirror/commit/aef75ebe0986f6c499585fcdad36231808e5d21b)**



---

archive/issue_comments_534732.json:
```json
{
    "body": "<div id=\"comment:67\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aef75ebe0986f6c499585fcdad36231808e5d21b\"><code>aef75eb</code></a></td><td><code>.gitpod.yml (before): Always remove the source tree used by the Docker build</code></td></tr></table>\n",
    "created_at": "2022-01-04T08:59:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534732",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:67"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aef75ebe0986f6c499585fcdad36231808e5d21b"><code>aef75eb</code></a></td><td><code>.gitpod.yml (before): Always remove the source tree used by the Docker build</code></td></tr></table>




---

archive/issue_comments_534733.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nOK, now it's in good shape.\n\nCould you check that the SSH stuff works as intended and matches the added documentation?\nI see\n\n```\n$ ls -l ~/.ssh\ntotal 24\n-rw-r--r-- 1 gitpod gitpod   381 Jan  4 08:53 authorized_keys\n-rw------- 1 gitpod gitpod     0 Jan  4 08:53 id_rsa\n-rw-r--r-- 1 gitpod gitpod   664 Jan  4 08:53 known_hosts\n-rw-r--r-- 1 gitpod gitpod 15544 Jan  4 08:53 supervisor_env\n```\nand am not sure what the empty `id_rsa` is intended for",
    "created_at": "2022-01-04T09:01:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534733",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:68" align="right">comment:68</div>

OK, now it's in good shape.

Could you check that the SSH stuff works as intended and matches the added documentation?
I see

```
$ ls -l ~/.ssh
total 24
-rw-r--r-- 1 gitpod gitpod   381 Jan  4 08:53 authorized_keys
-rw------- 1 gitpod gitpod     0 Jan  4 08:53 id_rsa
-rw-r--r-- 1 gitpod gitpod   664 Jan  4 08:53 known_hosts
-rw-r--r-- 1 gitpod gitpod 15544 Jan  4 08:53 supervisor_env
```
and am not sure what the empty `id_rsa` is intended for



---

archive/issue_comments_534734.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nhttps://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-370a022e48cb18faf98122794ffc5ce775b2606b09a9d1f80b71333425ec078eR27\n\nThere you don't need/want the timeout.",
    "created_at": "2022-01-04T12:16:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534734",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:69" align="right">comment:69</div>

https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-370a022e48cb18faf98122794ffc5ce775b2606b09a9d1f80b71333425ec078eR27

There you don't need/want the timeout.



---

archive/issue_comments_534735.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nhttps://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-370a022e48cb18faf98122794ffc5ce775b2606b09a9d1f80b71333425ec078eR17\n\nI'm not sure if I understand the logic behind this and related commands (maybe add a bit more documentation of what's going on?). But please be aware that the code may be in a different location such as `/workspace/sagetrac-mirror` if someone starts gitpod from https://github.com/sagemath/sagetrac-mirror (which is probably what's going to happen if you want to check someone elses branch)",
    "created_at": "2022-01-04T12:20:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534735",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:70" align="right">comment:70</div>

https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-370a022e48cb18faf98122794ffc5ce775b2606b09a9d1f80b71333425ec078eR17

I'm not sure if I understand the logic behind this and related commands (maybe add a bit more documentation of what's going on?). But please be aware that the code may be in a different location such as `/workspace/sagetrac-mirror` if someone starts gitpod from https://github.com/sagemath/sagetrac-mirror (which is probably what's going to happen if you want to check someone elses branch)



---

archive/issue_comments_534736.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nReplying to [@mkoeppe](#comment:68):\n> Could you check that the SSH stuff works as intended and matches the added documentation?\n> and am not sure what the empty `id_rsa` is intended for\n\nDid you added a `PRIVATE_SSH_KEY` env variable in gitpod with your trac ssh as described in the docs? It's working for me.",
    "created_at": "2022-01-04T12:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534736",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:71" align="right">comment:71</div>

Replying to [@mkoeppe](#comment:68):
> Could you check that the SSH stuff works as intended and matches the added documentation?
> and am not sure what the empty `id_rsa` is intended for

Did you added a `PRIVATE_SSH_KEY` env variable in gitpod with your trac ssh as described in the docs? It's working for me.



---

archive/issue_comments_534737.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@mkoeppe](#comment:68):\n> OK, now it's in good shape.\n\nFor me it takes over 5min to start a workspace due to the large workspace image (it displays \"fetching build image\" or something like this in the loading screen). I think this should be optimized as part of this ticket since otherwise I fear people will not adopt gitpod for e.g. reviewing of tickets.\n\nAlso it still loads `pyenv`: `pyenv shell 3.8.12` so https://github.com/tobiasdiez/sagetrac-mirror/blob/20ca179bed4ff605de4111362b02c8e2acca617e/.gitpod.yml#L18-L19 should probably be readded.",
    "created_at": "2022-01-04T12:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534737",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@mkoeppe](#comment:68):
> OK, now it's in good shape.

For me it takes over 5min to start a workspace due to the large workspace image (it displays "fetching build image" or something like this in the loading screen). I think this should be optimized as part of this ticket since otherwise I fear people will not adopt gitpod for e.g. reviewing of tickets.

Also it still loads `pyenv`: `pyenv shell 3.8.12` so https://github.com/tobiasdiez/sagetrac-mirror/blob/20ca179bed4ff605de4111362b02c8e2acca617e/.gitpod.yml#L18-L19 should probably be readded.



---

archive/issue_comments_534738.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nhttps://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-ef2cef9f88b4fe09ca3082140e67f5ad34fb65fb6e228f119d3812261ae51449R438-R442\n\nIs the somewhat strange indention by design?",
    "created_at": "2022-01-04T12:32:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534738",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:73" align="right">comment:73</div>

https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-ef2cef9f88b4fe09ca3082140e67f5ad34fb65fb6e228f119d3812261ae51449R438-R442

Is the somewhat strange indention by design?



---

archive/issue_comments_534739.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nReplying to [@tobiasdiez](#comment:72):\n> Also it still loads `pyenv`: `pyenv shell 3.8.12` so https://github.com/tobiasdiez/sagetrac-mirror/blob/20ca179bed4ff605de4111362b02c8e2acca617e/.gitpod.yml#L18-L19 should probably be readded.\n\nIt no longer breaks the Sage build since #29285, but I'll add it anyway",
    "created_at": "2022-01-04T13:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534739",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:74" align="right">comment:74</div>

Replying to [@tobiasdiez](#comment:72):
> Also it still loads `pyenv`: `pyenv shell 3.8.12` so https://github.com/tobiasdiez/sagetrac-mirror/blob/20ca179bed4ff605de4111362b02c8e2acca617e/.gitpod.yml#L18-L19 should probably be readded.

It no longer breaks the Sage build since #29285, but I'll add it anyway



---

archive/issue_comments_534740.json:
```json
{
    "body": "<div id=\"comment:75\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6215a9ffd51478d617d6bb3718c7af2a2261a5f3\"><code>6215a9f</code></a></td><td><code>Revert \".gitpod.yml (before): Refer to /workspace/sage/local by full path\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cec1f44e4cacb9e32a2a15af030e80d9a3d88fad\"><code>cec1f44</code></a></td><td><code>.gitpod.yml (before): No timeout for 'before' task that runs after the prebuild</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa237c7780e17f5e41babab91bf088908ce721a7\"><code>fa237c7</code></a></td><td><code>.gitpod.yml (before): Disable pyenv</code></td></tr></table>\n",
    "created_at": "2022-01-04T13:19:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534740",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:75"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6215a9ffd51478d617d6bb3718c7af2a2261a5f3"><code>6215a9f</code></a></td><td><code>Revert ".gitpod.yml (before): Refer to /workspace/sage/local by full path"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cec1f44e4cacb9e32a2a15af030e80d9a3d88fad"><code>cec1f44</code></a></td><td><code>.gitpod.yml (before): No timeout for 'before' task that runs after the prebuild</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa237c7780e17f5e41babab91bf088908ce721a7"><code>fa237c7</code></a></td><td><code>.gitpod.yml (before): Disable pyenv</code></td></tr></table>




---

archive/issue_comments_534741.json:
```json
{
    "body": "Changed commit from **[`aef75eb`](https://github.com/sagemath/sagetrac-mirror/commit/aef75ebe0986f6c499585fcdad36231808e5d21b)** to **[`fa237c7`](https://github.com/sagemath/sagetrac-mirror/commit/fa237c7780e17f5e41babab91bf088908ce721a7)**",
    "created_at": "2022-01-04T13:19:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534741",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`aef75eb`](https://github.com/sagemath/sagetrac-mirror/commit/aef75ebe0986f6c499585fcdad36231808e5d21b)** to **[`fa237c7`](https://github.com/sagemath/sagetrac-mirror/commit/fa237c7780e17f5e41babab91bf088908ce721a7)**



---

archive/issue_comments_534742.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nReplying to [@tobiasdiez](#comment:73):\n> https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-ef2cef9f88b4fe09ca3082140e67f5ad34fb65fb6e228f119d3812261ae51449R438-R442\n> \n> Is the somewhat strange indention by design?\n\nThe link does not show a particular line -- what are you referring to?",
    "created_at": "2022-01-04T13:21:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534742",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:76" align="right">comment:76</div>

Replying to [@tobiasdiez](#comment:73):
> https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-ef2cef9f88b4fe09ca3082140e67f5ad34fb65fb6e228f119d3812261ae51449R438-R442
> 
> Is the somewhat strange indention by design?

The link does not show a particular line -- what are you referring to?



---

archive/issue_comments_534743.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nReplying to [@tobiasdiez](#comment:70):\n>  please be aware that the code may be in a different location such as `/workspace/sagetrac-mirror` if someone starts gitpod from https://github.com/sagemath/sagetrac-mirror \n\nThanks, done.",
    "created_at": "2022-01-04T13:22:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534743",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:77" align="right">comment:77</div>

Replying to [@tobiasdiez](#comment:70):
>  please be aware that the code may be in a different location such as `/workspace/sagetrac-mirror` if someone starts gitpod from https://github.com/sagemath/sagetrac-mirror 

Thanks, done.



---

archive/issue_comments_534744.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nReplying to [@tobiasdiez](#comment:71):\n> Replying to [@mkoeppe](#comment:68):\n> > Could you check that the SSH stuff works as intended and matches the added documentation?\n> > and am not sure what the empty `id_rsa` is intended for\n\n> \n> Did you added a `PRIVATE_SSH_KEY` env variable in gitpod with your trac ssh as described in the docs? It's working for me.\n\nThanks for checking - I had missed a step.",
    "created_at": "2022-01-04T13:27:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534744",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:78" align="right">comment:78</div>

Replying to [@tobiasdiez](#comment:71):
> Replying to [@mkoeppe](#comment:68):
> > Could you check that the SSH stuff works as intended and matches the added documentation?
> > and am not sure what the empty `id_rsa` is intended for

> 
> Did you added a `PRIVATE_SSH_KEY` env variable in gitpod with your trac ssh as described in the docs? It's working for me.

Thanks for checking - I had missed a step.



---

archive/issue_comments_534745.json:
```json
{
    "body": "Changed commit from **[`fa237c7`](https://github.com/sagemath/sagetrac-mirror/commit/fa237c7780e17f5e41babab91bf088908ce721a7)** to **[`8d32070`](https://github.com/sagemath/sagetrac-mirror/commit/8d32070e4d5389244c563db39897a3e61347aeb3)**",
    "created_at": "2022-01-04T13:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534745",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fa237c7`](https://github.com/sagemath/sagetrac-mirror/commit/fa237c7780e17f5e41babab91bf088908ce721a7)** to **[`8d32070`](https://github.com/sagemath/sagetrac-mirror/commit/8d32070e4d5389244c563db39897a3e61347aeb3)**



---

archive/issue_comments_534746.json:
```json
{
    "body": "<div id=\"comment:79\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d32070e4d5389244c563db39897a3e61347aeb3\"><code>8d32070</code></a></td><td><code>.gitpod.yml: Add comments</code></td></tr></table>\n",
    "created_at": "2022-01-04T13:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534746",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:79"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d32070e4d5389244c563db39897a3e61347aeb3"><code>8d32070</code></a></td><td><code>.gitpod.yml: Add comments</code></td></tr></table>




---

archive/issue_comments_534747.json:
```json
{
    "body": "<div id=\"comment:80\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b9eccfd5733d96d888b0734bef5ed29c53ef0cf\"><code>7b9eccf</code></a></td><td><code>.gitpod.yml: Fix inconsistent indentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/081de0e1219da5718d6c25a93f7e1b12089288fb\"><code>081de0e</code></a></td><td><code>.gitpod.yml: Log to logs/install.log</code></td></tr></table>\n",
    "created_at": "2022-01-04T13:57:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534747",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:80"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b9eccfd5733d96d888b0734bef5ed29c53ef0cf"><code>7b9eccf</code></a></td><td><code>.gitpod.yml: Fix inconsistent indentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/081de0e1219da5718d6c25a93f7e1b12089288fb"><code>081de0e</code></a></td><td><code>.gitpod.yml: Log to logs/install.log</code></td></tr></table>




---

archive/issue_comments_534748.json:
```json
{
    "body": "Changed commit from **[`8d32070`](https://github.com/sagemath/sagetrac-mirror/commit/8d32070e4d5389244c563db39897a3e61347aeb3)** to **[`081de0e`](https://github.com/sagemath/sagetrac-mirror/commit/081de0e1219da5718d6c25a93f7e1b12089288fb)**",
    "created_at": "2022-01-04T13:57:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534748",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8d32070`](https://github.com/sagemath/sagetrac-mirror/commit/8d32070e4d5389244c563db39897a3e61347aeb3)** to **[`081de0e`](https://github.com/sagemath/sagetrac-mirror/commit/081de0e1219da5718d6c25a93f7e1b12089288fb)**



---

archive/issue_comments_534749.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nReplying to [@mkoeppe](#comment:76):\n> Replying to [@tobiasdiez](#comment:73):\n> > https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-ef2cef9f88b4fe09ca3082140e67f5ad34fb65fb6e228f119d3812261ae51449R438-R442\n> > \n> > Is the somewhat strange indention by design?\n\n> \n> The link does not show a particular line -- what are you referring to?\n\nStrange, normally that works. It's the gitpod related changes in `tox.ini` (l. 438)",
    "created_at": "2022-01-04T17:12:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534749",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:81" align="right">comment:81</div>

Replying to [@mkoeppe](#comment:76):
> Replying to [@tobiasdiez](#comment:73):
> > https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-ef2cef9f88b4fe09ca3082140e67f5ad34fb65fb6e228f119d3812261ae51449R438-R442
> > 
> > Is the somewhat strange indention by design?

> 
> The link does not show a particular line -- what are you referring to?

Strange, normally that works. It's the gitpod related changes in `tox.ini` (l. 438)



---

archive/issue_comments_534750.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nReplying to [@tobiasdiez](#comment:81):\n> Replying to [@mkoeppe](#comment:76):\n> > Replying to [@tobiasdiez](#comment:73):\n> > > Is the somewhat strange indention by design?\n\n> \n> the gitpod related changes in `tox.ini` (l. 438)\n\nIt is indented as intended. This file aspires to be a spreadsheet.",
    "created_at": "2022-01-04T17:47:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534750",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:82" align="right">comment:82</div>

Replying to [@tobiasdiez](#comment:81):
> Replying to [@mkoeppe](#comment:76):
> > Replying to [@tobiasdiez](#comment:73):
> > > Is the somewhat strange indention by design?

> 
> the gitpod related changes in `tox.ini` (l. 438)

It is indented as intended. This file aspires to be a spreadsheet.



---

archive/issue_comments_534751.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nThere are still some minor details wrong. In `logs/sphinx-4.3.1.log`:\n\n```\nUninstalling existing 'sphinx'\nWarning: File '/home/gitpod/sage-local/var/lib/sage/wheels/Sphinx-4.2.0-py3-none-any.whl' not found\nWarning: Directory '/home/gitpod/sage-local/var/lib/sage/wheels' not found\nRunning pip-uninstall script for 'sphinx'\n/home/gitpod/sage-local/var/lib/sage/venv-python3.8/var/lib/sage/scripts/sphinx/spkg-piprm: line 14: /home/gitpod/sage/build/bin/sage-dist-helpers: No such file or directory\nError: failed to source /home/gitpod/sage/build/bin/sage-dist-helpers\nIs /home/gitpod/sage the correct SAGE_ROOT?\nWarning: Error running the pip-uninstall script for 'sphinx'; uninstallation may have left behind some files\nRemoving stamp file '/home/gitpod/sage-local/var/lib/sage/venv-python3.8/var/lib/sage/installed/sphinx-4.2.0'\n```",
    "created_at": "2022-01-04T19:03:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534751",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:83" align="right">comment:83</div>

There are still some minor details wrong. In `logs/sphinx-4.3.1.log`:

```
Uninstalling existing 'sphinx'
Warning: File '/home/gitpod/sage-local/var/lib/sage/wheels/Sphinx-4.2.0-py3-none-any.whl' not found
Warning: Directory '/home/gitpod/sage-local/var/lib/sage/wheels' not found
Running pip-uninstall script for 'sphinx'
/home/gitpod/sage-local/var/lib/sage/venv-python3.8/var/lib/sage/scripts/sphinx/spkg-piprm: line 14: /home/gitpod/sage/build/bin/sage-dist-helpers: No such file or directory
Error: failed to source /home/gitpod/sage/build/bin/sage-dist-helpers
Is /home/gitpod/sage the correct SAGE_ROOT?
Warning: Error running the pip-uninstall script for 'sphinx'; uninstallation may have left behind some files
Removing stamp file '/home/gitpod/sage-local/var/lib/sage/venv-python3.8/var/lib/sage/installed/sphinx-4.2.0'
```



---

archive/issue_comments_534752.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nPackage-removal scripts (`{prefix,venv}/var/lib/sage/scripts/*/spkg-piprm`) hardcode the `SAGE_ROOT` and `SAGE_SRC` from the time when the package was installed (the Docker-build phase); so I will also put a symlink in place for that.",
    "created_at": "2022-01-04T19:09:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534752",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:84" align="right">comment:84</div>

Package-removal scripts (`{prefix,venv}/var/lib/sage/scripts/*/spkg-piprm`) hardcode the `SAGE_ROOT` and `SAGE_SRC` from the time when the package was installed (the Docker-build phase); so I will also put a symlink in place for that.



---

archive/issue_comments_534753.json:
```json
{
    "body": "<div id=\"comment:85\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/952bb4e8442ee273fb02eac5977a6203bc5fcd5e\"><code>952bb4e</code></a></td><td><code>.gitpod.yml (before): Create symlink from /home/gitpod/sage to the workspace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f89af7a68f9a36a59135f6f541bda204f05896f\"><code>9f89af7</code></a></td><td><code>build/bin/sage-spkg: Run sage-spkg-uninstall on the correct tree</code></td></tr></table>\n",
    "created_at": "2022-01-04T19:19:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534753",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:85"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/952bb4e8442ee273fb02eac5977a6203bc5fcd5e"><code>952bb4e</code></a></td><td><code>.gitpod.yml (before): Create symlink from /home/gitpod/sage to the workspace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f89af7a68f9a36a59135f6f541bda204f05896f"><code>9f89af7</code></a></td><td><code>build/bin/sage-spkg: Run sage-spkg-uninstall on the correct tree</code></td></tr></table>




---

archive/issue_comments_534754.json:
```json
{
    "body": "Changed commit from **[`081de0e`](https://github.com/sagemath/sagetrac-mirror/commit/081de0e1219da5718d6c25a93f7e1b12089288fb)** to **[`9f89af7`](https://github.com/sagemath/sagetrac-mirror/commit/9f89af7a68f9a36a59135f6f541bda204f05896f)**",
    "created_at": "2022-01-04T19:19:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534754",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`081de0e`](https://github.com/sagemath/sagetrac-mirror/commit/081de0e1219da5718d6c25a93f7e1b12089288fb)** to **[`9f89af7`](https://github.com/sagemath/sagetrac-mirror/commit/9f89af7a68f9a36a59135f6f541bda204f05896f)**



---

archive/issue_comments_534755.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nFixed now, `logs/sphinx-4.3.1.log` now shows:\n\n```\nFound existing installation: Sphinx 4.2.0\nUninstalling Sphinx-4.2.0:\n  Successfully uninstalled Sphinx-4.2.0\nRemoving stamp file '/home/gitpod/sage-local/var/lib/sage/venv-python3.8/var/lib/sage/installed/sphinx-4.2.0'\nInstalling sphinx-4.3.1\n```\nand also `venv/var/lib/sage/wheels/` now only contains one sphinx wheel.",
    "created_at": "2022-01-04T21:12:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534755",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:86" align="right">comment:86</div>

Fixed now, `logs/sphinx-4.3.1.log` now shows:

```
Found existing installation: Sphinx 4.2.0
Uninstalling Sphinx-4.2.0:
  Successfully uninstalled Sphinx-4.2.0
Removing stamp file '/home/gitpod/sage-local/var/lib/sage/venv-python3.8/var/lib/sage/installed/sphinx-4.2.0'
Installing sphinx-4.3.1
```
and also `venv/var/lib/sage/wheels/` now only contains one sphinx wheel.



---

archive/issue_comments_534756.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/runs/4687310728** to **Matthias Koeppe, ...**",
    "created_at": "2022-01-04T21:12:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534756",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/runs/4687310728** to **Matthias Koeppe, ...**



---

archive/issue_comments_534757.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nNice, also docker-in-docker works in the gitpod, so I can run commands such as `tox -e docker-ubuntu-bionic-minimal -- config.status` there",
    "created_at": "2022-01-04T22:05:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534757",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:88" align="right">comment:88</div>

Nice, also docker-in-docker works in the gitpod, so I can run commands such as `tox -e docker-ubuntu-bionic-minimal -- config.status` there



---

archive/issue_comments_534758.json:
```json
{
    "body": "Changed commit from **[`9f89af7`](https://github.com/sagemath/sagetrac-mirror/commit/9f89af7a68f9a36a59135f6f541bda204f05896f)** to **[`15e112a`](https://github.com/sagemath/sagetrac-mirror/commit/15e112a8b86cdde1a21224edc414e4779488b85d)**",
    "created_at": "2022-01-05T03:46:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534758",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9f89af7`](https://github.com/sagemath/sagetrac-mirror/commit/9f89af7a68f9a36a59135f6f541bda204f05896f)** to **[`15e112a`](https://github.com/sagemath/sagetrac-mirror/commit/15e112a8b86cdde1a21224edc414e4779488b85d)**



---

archive/issue_comments_534759.json:
```json
{
    "body": "<div id=\"comment:89\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0eadcd118d2da14981cd17def91446232940d2f1\"><code>0eadcd1</code></a></td><td><code>Add VS Code config for SAGE_ROOT/venv</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/075b22c398625238da1f47b86d2ad297369f6a0b\"><code>075b22c</code></a></td><td><code>Merge #30677</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15e112a8b86cdde1a21224edc414e4779488b85d\"><code>15e112a</code></a></td><td><code>.vscode/settings.json: Update interpreter settings</code></td></tr></table>\n",
    "created_at": "2022-01-05T03:46:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534759",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:89"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0eadcd118d2da14981cd17def91446232940d2f1"><code>0eadcd1</code></a></td><td><code>Add VS Code config for SAGE_ROOT/venv</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/075b22c398625238da1f47b86d2ad297369f6a0b"><code>075b22c</code></a></td><td><code>Merge #30677</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15e112a8b86cdde1a21224edc414e4779488b85d"><code>15e112a</code></a></td><td><code>.vscode/settings.json: Update interpreter settings</code></td></tr></table>




---

archive/issue_comments_534760.json:
```json
{
    "body": "Changed dependencies from **#33068, #30933, #29285, #32868, #33067** to **#33068, #30933, #29285, #32868, #33067, #30677**",
    "created_at": "2022-01-05T03:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534760",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#33068, #30933, #29285, #32868, #33067** to **#33068, #30933, #29285, #32868, #33067, #30677**



---

archive/issue_comments_534761.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nNow it starts with the right interpreter, and also \"Jupyter: Create New Jupyter Notebook\" works - \"Select Kernel\" offers the Sage kernel.",
    "created_at": "2022-01-05T05:04:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534761",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:91" align="right">comment:91</div>

Now it starts with the right interpreter, and also "Jupyter: Create New Jupyter Notebook" works - "Select Kernel" offers the Sage kernel.



---

archive/issue_events_452212.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-01-05T12:19:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452212"
}
```



---

archive/issue_events_452213.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-01-05T12:19:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452213"
}
```



---

archive/issue_comments_534762.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nIt still takes over 8min until the workspace is loaded for me due to \"Pulling container image\". This should really optimized as part of this ticket. \n\nAlso pyenv shell still seems to be activated, I think it needs to be disabled in before and init.",
    "created_at": "2022-01-05T12:19:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534762",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:92" align="right">comment:92</div>

It still takes over 8min until the workspace is loaded for me due to "Pulling container image". This should really optimized as part of this ticket. 

Also pyenv shell still seems to be activated, I think it needs to be disabled in before and init.



---

archive/issue_comments_534763.json:
```json
{
    "body": "Work Issues: **Optimize docker image**",
    "created_at": "2022-01-05T12:19:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534763",
    "user": "https://github.com/tobiasdiez"
}
```

Work Issues: **Optimize docker image**



---

archive/issue_comments_534764.json:
```json
{
    "body": "Changed commit from **[`15e112a`](https://github.com/sagemath/sagetrac-mirror/commit/15e112a8b86cdde1a21224edc414e4779488b85d)** to **[`2bf20ed`](https://github.com/sagemath/sagetrac-mirror/commit/2bf20ed651e0914847d82105891f04a04cc23464)**",
    "created_at": "2022-01-05T16:48:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534764",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`15e112a`](https://github.com/sagemath/sagetrac-mirror/commit/15e112a8b86cdde1a21224edc414e4779488b85d)** to **[`2bf20ed`](https://github.com/sagemath/sagetrac-mirror/commit/2bf20ed651e0914847d82105891f04a04cc23464)**



---

archive/issue_comments_534765.json:
```json
{
    "body": "<div id=\"comment:93\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bf20ed651e0914847d82105891f04a04cc23464\"><code>2bf20ed</code></a></td><td><code>.github/workflows/tox.yml (docker): Also push -with-system-packages</code></td></tr></table>\n",
    "created_at": "2022-01-05T16:48:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534765",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:93"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bf20ed651e0914847d82105891f04a04cc23464"><code>2bf20ed</code></a></td><td><code>.github/workflows/tox.yml (docker): Also push -with-system-packages</code></td></tr></table>




---

archive/issue_comments_534766.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nReady now in https://github.com/mkoeppe?tab=packages&q=gitpod",
    "created_at": "2022-01-05T17:04:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534766",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:94" align="right">comment:94</div>

Ready now in https://github.com/mkoeppe?tab=packages&q=gitpod



---

archive/issue_comments_534767.json:
```json
{
    "body": "Changed commit from **[`2bf20ed`](https://github.com/sagemath/sagetrac-mirror/commit/2bf20ed651e0914847d82105891f04a04cc23464)** to **[`cb678a8`](https://github.com/sagemath/sagetrac-mirror/commit/cb678a8df1b4dafe0281b6f2def371d955ff7ef7)**",
    "created_at": "2022-01-05T19:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534767",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2bf20ed`](https://github.com/sagemath/sagetrac-mirror/commit/2bf20ed651e0914847d82105891f04a04cc23464)** to **[`cb678a8`](https://github.com/sagemath/sagetrac-mirror/commit/cb678a8df1b4dafe0281b6f2def371d955ff7ef7)**



---

archive/issue_comments_534768.json:
```json
{
    "body": "<div id=\"comment:95\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6edf67b6256c83842a366a2a684e9335745d0eb\"><code>c6edf67</code></a></td><td><code>.gitpod.yml: Use a Dockerfile again</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb678a8df1b4dafe0281b6f2def371d955ff7ef7\"><code>cb678a8</code></a></td><td><code>docker/.gitpod.Dockerfile: Go through ARGs BASE_GITHUB_REPOSITORY, BASE_TAG</code></td></tr></table>\n",
    "created_at": "2022-01-05T19:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534768",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:95"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6edf67b6256c83842a366a2a684e9335745d0eb"><code>c6edf67</code></a></td><td><code>.gitpod.yml: Use a Dockerfile again</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb678a8df1b4dafe0281b6f2def371d955ff7ef7"><code>cb678a8</code></a></td><td><code>docker/.gitpod.Dockerfile: Go through ARGs BASE_GITHUB_REPOSITORY, BASE_TAG</code></td></tr></table>




---

archive/issue_comments_534769.json:
```json
{
    "body": "Changed commit from **[`cb678a8`](https://github.com/sagemath/sagetrac-mirror/commit/cb678a8df1b4dafe0281b6f2def371d955ff7ef7)** to **[`e01dd83`](https://github.com/sagemath/sagetrac-mirror/commit/e01dd838a52064f37079c7ed62b7a7aa513ccbe6)**",
    "created_at": "2022-01-05T19:25:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534769",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cb678a8`](https://github.com/sagemath/sagetrac-mirror/commit/cb678a8df1b4dafe0281b6f2def371d955ff7ef7)** to **[`e01dd83`](https://github.com/sagemath/sagetrac-mirror/commit/e01dd838a52064f37079c7ed62b7a7aa513ccbe6)**



---

archive/issue_comments_534770.json:
```json
{
    "body": "<div id=\"comment:96\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e01dd838a52064f37079c7ed62b7a7aa513ccbe6\"><code>e01dd83</code></a></td><td><code>.gitpod.yml (before): Run 'pyenv global system'</code></td></tr></table>\n",
    "created_at": "2022-01-05T19:25:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534770",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:96"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e01dd838a52064f37079c7ed62b7a7aa513ccbe6"><code>e01dd83</code></a></td><td><code>.gitpod.yml (before): Run 'pyenv global system'</code></td></tr></table>




---

archive/issue_events_452214.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-05T19:25:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452214"
}
```



---

archive/issue_events_452215.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-05T19:25:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452215"
}
```



---

archive/issue_comments_534771.json:
```json
{
    "body": "Changed work issues from **Optimize docker image** to none",
    "created_at": "2022-01-05T19:31:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534771",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **Optimize docker image** to none



---

archive/issue_comments_534772.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nThat sadly doesn't solve the issue for me. Starting a workspace still takes 8+ mins, while #32749 takes about 2mins.\n\nIt also seems that the workspace image is quite large at around 16GB. In particular, the sage folder contains\n\n``` \n4.9G    local\n6.2G    src\n```\n\nI'm not sure if the following folders are really necessary or if they can be deleted (latest at the end of the prebuild):\n\n```\n1.8G    ./local/share/doc\n4.3G    ./src/build\n```\n\nMoreover,\n\n```\n3.0G    /usr\n3.3G    /home\n```\n\nis also bigger than the one from the other image of #32749\n\n```\n2.2G    /usr\n2.3G    /home\n```\n\nSo I suggest to use gitpod/workspace-base as a base.",
    "created_at": "2022-01-06T12:38:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534772",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:99" align="right">comment:99</div>

That sadly doesn't solve the issue for me. Starting a workspace still takes 8+ mins, while #32749 takes about 2mins.

It also seems that the workspace image is quite large at around 16GB. In particular, the sage folder contains

``` 
4.9G    local
6.2G    src
```

I'm not sure if the following folders are really necessary or if they can be deleted (latest at the end of the prebuild):

```
1.8G    ./local/share/doc
4.3G    ./src/build
```

Moreover,

```
3.0G    /usr
3.3G    /home
```

is also bigger than the one from the other image of #32749

```
2.2G    /usr
2.3G    /home
```

So I suggest to use gitpod/workspace-base as a base.



---

archive/issue_comments_534773.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nReplying to [@tobiasdiez](#comment:99):\n> Starting a workspace still takes 8+ mins\n\nProbably depends on the data center region. I just timed it here, it took < 3.5 minutes; but there is considerable variance",
    "created_at": "2022-01-06T17:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534773",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:100" align="right">comment:100</div>

Replying to [@tobiasdiez](#comment:99):
> Starting a workspace still takes 8+ mins

Probably depends on the data center region. I just timed it here, it took < 3.5 minutes; but there is considerable variance



---

archive/issue_comments_534774.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nReplying to [@tobiasdiez](#comment:99):\n> I'm not sure if the following folders are really necessary or if they can be deleted (latest at the end of the prebuild):\n> \n> ```\n> 1.8G    ./local/share/doc\n> 4.3G    ./src/build\n> ```\n\nI'll check if we can delete them without sacrificing fast rebuilds of documentation (`make doc-html`) and sagelib (`./sage -b`). \n\nFor documentation, I see\n\n```\n[sagemath_doc_html-none] make doc-inventory--reference-references\n[sagemath_doc_html-none] cd /workspace/sage && ./sage --docbuild --no-pdf-links reference/references inventory \n[sagemath_doc_html-none] [reference] loading pickled environment... failed\n[sagemath_doc_html-none] [reference] failed: source directory has changed\n```\n... so something is not ideal there anyway",
    "created_at": "2022-01-06T17:31:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534774",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:101" align="right">comment:101</div>

Replying to [@tobiasdiez](#comment:99):
> I'm not sure if the following folders are really necessary or if they can be deleted (latest at the end of the prebuild):
> 
> ```
> 1.8G    ./local/share/doc
> 4.3G    ./src/build
> ```

I'll check if we can delete them without sacrificing fast rebuilds of documentation (`make doc-html`) and sagelib (`./sage -b`). 

For documentation, I see

```
[sagemath_doc_html-none] make doc-inventory--reference-references
[sagemath_doc_html-none] cd /workspace/sage && ./sage --docbuild --no-pdf-links reference/references inventory 
[sagemath_doc_html-none] [reference] loading pickled environment... failed
[sagemath_doc_html-none] [reference] failed: source directory has changed
```
... so something is not ideal there anyway



---

archive/issue_comments_534775.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nReplying to [@mkoeppe](#comment:100):\n> Replying to [@tobiasdiez](#comment:99):\n> > Starting a workspace still takes 8+ mins\n\n> \n> Probably depends on the data center region. I just timed it here, it took < 3.5 minutes; but there is considerable variance\n\nApparently, images are built in the US and then downloaded every time from there without caching. This explains why it takes so much longer for me. Gitpod is working on a solution https://github.com/gitpod-io/gitpod/issues/7002 and https://github.com/gitpod-io/gitpod/issues/6145. But having a 15GB+ image is not ideal anyway.",
    "created_at": "2022-01-06T17:40:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534775",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:102" align="right">comment:102</div>

Replying to [@mkoeppe](#comment:100):
> Replying to [@tobiasdiez](#comment:99):
> > Starting a workspace still takes 8+ mins

> 
> Probably depends on the data center region. I just timed it here, it took < 3.5 minutes; but there is considerable variance

Apparently, images are built in the US and then downloaded every time from there without caching. This explains why it takes so much longer for me. Gitpod is working on a solution https://github.com/gitpod-io/gitpod/issues/7002 and https://github.com/gitpod-io/gitpod/issues/6145. But having a 15GB+ image is not ideal anyway.



---

archive/issue_comments_534776.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\ntop-level `Makefile` has targets `micro_release`, `fast-rebuild-clean` that do related stuff.",
    "created_at": "2022-01-06T18:01:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534776",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

top-level `Makefile` has targets `micro_release`, `fast-rebuild-clean` that do related stuff.



---

archive/issue_comments_534777.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4814334dff7c990489df1441d4244a60ca7b2c59\"><code>4814334</code></a></td><td><code>docker/.gitpod.Dockerfile: Remove doctrees/inventory</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/874dddd4ef5445ace3d8855106f36e37d7d56472\"><code>874dddd</code></a></td><td><code>tox.ini (gitpod): Use gitpod/workspace-base by default</code></td></tr></table>\n",
    "created_at": "2022-01-06T19:31:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534777",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4814334dff7c990489df1441d4244a60ca7b2c59"><code>4814334</code></a></td><td><code>docker/.gitpod.Dockerfile: Remove doctrees/inventory</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/874dddd4ef5445ace3d8855106f36e37d7d56472"><code>874dddd</code></a></td><td><code>tox.ini (gitpod): Use gitpod/workspace-base by default</code></td></tr></table>




---

archive/issue_comments_534778.json:
```json
{
    "body": "Changed commit from **[`e01dd83`](https://github.com/sagemath/sagetrac-mirror/commit/e01dd838a52064f37079c7ed62b7a7aa513ccbe6)** to **[`874dddd`](https://github.com/sagemath/sagetrac-mirror/commit/874dddd4ef5445ace3d8855106f36e37d7d56472)**",
    "created_at": "2022-01-06T19:31:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534778",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e01dd83`](https://github.com/sagemath/sagetrac-mirror/commit/e01dd838a52064f37079c7ed62b7a7aa513ccbe6)** to **[`874dddd`](https://github.com/sagemath/sagetrac-mirror/commit/874dddd4ef5445ace3d8855106f36e37d7d56472)**



---

archive/issue_comments_534779.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nReplying to [@tobiasdiez](#comment:99):\n> \n> ```\n> 3.0G    /usr\n> 3.3G    /home\n> ```\n> \n> is also bigger than the one from the other image of #32749\n> \n> ```\n> 2.2G    /usr\n> 2.3G    /home\n> ```\n> \n> So I suggest to use gitpod/workspace-base as a base.\n\nBuilding a new image at https://github.com/mkoeppe/sage/runs/4731195747",
    "created_at": "2022-01-06T19:32:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534779",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:105" align="right">comment:105</div>

Replying to [@tobiasdiez](#comment:99):
> 
> ```
> 3.0G    /usr
> 3.3G    /home
> ```
> 
> is also bigger than the one from the other image of #32749
> 
> ```
> 2.2G    /usr
> 2.3G    /home
> ```
> 
> So I suggest to use gitpod/workspace-base as a base.

Building a new image at https://github.com/mkoeppe/sage/runs/4731195747



---

archive/issue_comments_534780.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n\n```\nfast-rebuild-clean: misc-clean\n\trm -rf upstream/\n\trm -rf build/pkgs/sagelib/src/build/temp.*\n\t# The .py files in src/build are restored from src/sage without their\n\t# mtimes changed.\n\t-find build/pkgs/sagelib/src/build -name '*.py' -exec rm \\{\\} \\;\n\t# Remove leftovers from ancient branches\n\trm -rf src/build\n```\nThis is not compatible with `configure --enable-editable`, which uses `src/build/` instead of `build/pkgs/sagelib/src/build/`.",
    "created_at": "2022-01-06T19:48:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534780",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>


```
fast-rebuild-clean: misc-clean
	rm -rf upstream/
	rm -rf build/pkgs/sagelib/src/build/temp.*
	# The .py files in src/build are restored from src/sage without their
	# mtimes changed.
	-find build/pkgs/sagelib/src/build -name '*.py' -exec rm \{\} \;
	# Remove leftovers from ancient branches
	rm -rf src/build
```
This is not compatible with `configure --enable-editable`, which uses `src/build/` instead of `build/pkgs/sagelib/src/build/`.



---

archive/issue_comments_534781.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nWhy does the editable install actually needs `src/build` or even copies something there? The compiled cython code (.so files) are placed next to the cython file.",
    "created_at": "2022-01-06T20:43:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534781",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:7" align="right">comment:7</div>

Why does the editable install actually needs `src/build` or even copies something there? The compiled cython code (.so files) are placed next to the cython file.



---

archive/issue_comments_534782.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI think that's just standard `setuptools` behavior",
    "created_at": "2022-01-06T21:20:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534782",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

I think that's just standard `setuptools` behavior



---

archive/issue_comments_534783.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThe `setuptools` option `--build-temp` could be used to put the temp directories outside of `/workspace`.\n\nOr we could just unconditionally remove the temp directory at the end of `build/pkgs/sagelib/spkg-install`.",
    "created_at": "2022-01-06T22:38:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534783",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

The `setuptools` option `--build-temp` could be used to put the temp directories outside of `/workspace`.

Or we could just unconditionally remove the temp directory at the end of `build/pkgs/sagelib/spkg-install`.



---

archive/issue_comments_534784.json:
```json
{
    "body": "<div id=\"comment:0\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c97dc015a437f7746635e7de3577dc25c422213e\"><code>c97dc01</code></a></td><td><code>build/pkgs/sagelib/spkg-install: Remove build/temp.* directories after build</code></td></tr></table>\n",
    "created_at": "2022-01-06T23:08:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534784",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c97dc015a437f7746635e7de3577dc25c422213e"><code>c97dc01</code></a></td><td><code>build/pkgs/sagelib/spkg-install: Remove build/temp.* directories after build</code></td></tr></table>




---

archive/issue_comments_534785.json:
```json
{
    "body": "Changed commit from **[`874dddd`](https://github.com/sagemath/sagetrac-mirror/commit/874dddd4ef5445ace3d8855106f36e37d7d56472)** to **[`c97dc01`](https://github.com/sagemath/sagetrac-mirror/commit/c97dc015a437f7746635e7de3577dc25c422213e)**",
    "created_at": "2022-01-06T23:08:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534785",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`874dddd`](https://github.com/sagemath/sagetrac-mirror/commit/874dddd4ef5445ace3d8855106f36e37d7d56472)** to **[`c97dc01`](https://github.com/sagemath/sagetrac-mirror/commit/c97dc015a437f7746635e7de3577dc25c422213e)**



---

archive/issue_comments_534786.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nIt's much smaller now\n\n```\ngitpod /workspace/sage (mkoeppe-9.5.beta9+updates) $ du -sh src local /usr /home\n3.1G    src\n3.9G    local\n2.4G    /usr\n76K     /home\n```\nand rebuilds are still fast",
    "created_at": "2022-01-07T07:34:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534786",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">comment:1</div>

It's much smaller now

```
gitpod /workspace/sage (mkoeppe-9.5.beta9+updates) $ du -sh src local /usr /home
3.1G    src
3.9G    local
2.4G    /usr
76K     /home
```
and rebuilds are still fast



---

archive/issue_comments_534787.json:
```json
{
    "body": "Changed commit from **[`c97dc01`](https://github.com/sagemath/sagetrac-mirror/commit/c97dc015a437f7746635e7de3577dc25c422213e)** to **[`3605076`](https://github.com/sagemath/sagetrac-mirror/commit/36050766eb9d84679210ead65650869ba0e46412)**",
    "created_at": "2022-01-07T07:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534787",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c97dc01`](https://github.com/sagemath/sagetrac-mirror/commit/c97dc015a437f7746635e7de3577dc25c422213e)** to **[`3605076`](https://github.com/sagemath/sagetrac-mirror/commit/36050766eb9d84679210ead65650869ba0e46412)**



---

archive/issue_comments_534788.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36050766eb9d84679210ead65650869ba0e46412\"><code>3605076</code></a></td><td><code>build/pkgs/sagelib/spkg-install: Fix up deleting temp.*</code></td></tr></table>\n",
    "created_at": "2022-01-07T07:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534788",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36050766eb9d84679210ead65650869ba0e46412"><code>3605076</code></a></td><td><code>build/pkgs/sagelib/spkg-install: Fix up deleting temp.*</code></td></tr></table>




---

archive/issue_comments_534789.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThanks, its way better now (around 4-5min). I would say the doc folder can still be removed. If someone is working on the docs, then one can easily only create the relevant file without the need to build the whole docs.",
    "created_at": "2022-01-07T12:59:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534789",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:3" align="right">comment:3</div>

Thanks, its way better now (around 4-5min). I would say the doc folder can still be removed. If someone is working on the docs, then one can easily only create the relevant file without the need to build the whole docs.



---

archive/issue_comments_534790.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe following folders should be deleted as well\n\n```\n212M    /tmp\n32M     /var/lib/apt/lists (remove as part of the apt-get install command)\n```\n\nA few packages that I think are not used by the built script or needed in general:\n\n```\n3722    python2.7-minimal\n9370    libflint-dev\n10026   pari-gp (and other pari-related stuff)\n13215   ecl\n14279   libsingular4-dev (and other singular-related stuff)\n19531   libgiac0 (and other giac-related stuff)\n30765   vim-runtime\n41291   emacs-nox\n66816   emacs-common\n330712  libgl1-mesa-dri (?)\n```\nI would suggest to exclude them from the installation / uninstall them, similar to what is done in #32749. \n\nTogether that should give another 1GB.",
    "created_at": "2022-01-07T16:04:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534790",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:4" align="right">comment:4</div>

The following folders should be deleted as well

```
212M    /tmp
32M     /var/lib/apt/lists (remove as part of the apt-get install command)
```

A few packages that I think are not used by the built script or needed in general:

```
3722    python2.7-minimal
9370    libflint-dev
10026   pari-gp (and other pari-related stuff)
13215   ecl
14279   libsingular4-dev (and other singular-related stuff)
19531   libgiac0 (and other giac-related stuff)
30765   vim-runtime
41291   emacs-nox
66816   emacs-common
330712  libgl1-mesa-dri (?)
```
I would suggest to exclude them from the installation / uninstall them, similar to what is done in #32749. 

Together that should give another 1GB.



---

archive/issue_comments_534791.json:
```json
{
    "body": "Changed commit from **[`3605076`](https://github.com/sagemath/sagetrac-mirror/commit/36050766eb9d84679210ead65650869ba0e46412)** to **[`c02c03c`](https://github.com/sagemath/sagetrac-mirror/commit/c02c03c8465a2515676b25f0686c1485083bb757)**",
    "created_at": "2022-01-07T18:19:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534791",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3605076`](https://github.com/sagemath/sagetrac-mirror/commit/36050766eb9d84679210ead65650869ba0e46412)** to **[`c02c03c`](https://github.com/sagemath/sagetrac-mirror/commit/c02c03c8465a2515676b25f0686c1485083bb757)**



---

archive/issue_comments_534792.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d87027c8d35dbd268d12de6e6d8fa03b1afaa63d\"><code>d87027c</code></a></td><td><code>sage --package list: Add option --exclude</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c02c03c8465a2515676b25f0686c1485083bb757\"><code>c02c03c</code></a></td><td><code>tox.ini (gitpod-standard): Exclude some packages</code></td></tr></table>\n",
    "created_at": "2022-01-07T18:19:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534792",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d87027c8d35dbd268d12de6e6d8fa03b1afaa63d"><code>d87027c</code></a></td><td><code>sage --package list: Add option --exclude</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c02c03c8465a2515676b25f0686c1485083bb757"><code>c02c03c</code></a></td><td><code>tox.ini (gitpod-standard): Exclude some packages</code></td></tr></table>




---

archive/issue_comments_534793.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nNew image building at https://github.com/mkoeppe/sage/runs/4742213151",
    "created_at": "2022-01-07T18:23:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534793",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

New image building at https://github.com/mkoeppe/sage/runs/4742213151



---

archive/issue_comments_534794.json:
```json
{
    "body": "Changed commit from **[`c02c03c`](https://github.com/sagemath/sagetrac-mirror/commit/c02c03c8465a2515676b25f0686c1485083bb757)** to **[`7e74607`](https://github.com/sagemath/sagetrac-mirror/commit/7e74607979224e0b8f7d2803fc8b68f3802a64f4)**",
    "created_at": "2022-01-07T18:39:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534794",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c02c03c`](https://github.com/sagemath/sagetrac-mirror/commit/c02c03c8465a2515676b25f0686c1485083bb757)** to **[`7e74607`](https://github.com/sagemath/sagetrac-mirror/commit/7e74607979224e0b8f7d2803fc8b68f3802a64f4)**



---

archive/issue_comments_534795.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6285cd9563c8d3a4dc3f8b97e128373a6021a668\"><code>6285cd9</code></a></td><td><code>.gitpod.Dockerfile: Save space by removing apt lists</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e74607979224e0b8f7d2803fc8b68f3802a64f4\"><code>7e74607</code></a></td><td><code>.gitpod.Dockerfile: Remove built Sage documentation</code></td></tr></table>\n",
    "created_at": "2022-01-07T18:39:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534795",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6285cd9563c8d3a4dc3f8b97e128373a6021a668"><code>6285cd9</code></a></td><td><code>.gitpod.Dockerfile: Save space by removing apt lists</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e74607979224e0b8f7d2803fc8b68f3802a64f4"><code>7e74607</code></a></td><td><code>.gitpod.Dockerfile: Remove built Sage documentation</code></td></tr></table>




---

archive/issue_comments_534796.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nFor the record, that's how gitpod is cleaning up the package installation cache/log: https://github.com/gitpod-io/workspace-images/blob/master/base/install-packages#L32-L36",
    "created_at": "2022-01-07T20:10:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534796",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:8" align="right">comment:8</div>

For the record, that's how gitpod is cleaning up the package installation cache/log: https://github.com/gitpod-io/workspace-images/blob/master/base/install-packages#L32-L36



---

archive/issue_comments_534797.json:
```json
{
    "body": "<div id=\"comment:119\" align=\"right\">comment:119</div>\n\nReplying to [@mkoeppe](#comment:116):\n> New image building at https://github.com/mkoeppe/sage/runs/4742213151\n\nThanks! Will try it once its finished.",
    "created_at": "2022-01-07T20:11:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534797",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:119" align="right">comment:119</div>

Replying to [@mkoeppe](#comment:116):
> New image building at https://github.com/mkoeppe/sage/runs/4742213151

Thanks! Will try it once its finished.



---

archive/issue_comments_534798.json:
```json
{
    "body": "<div id=\"comment:0\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f71c8b6c625017b0d37e956b0386111630ad6fe1\"><code>f71c8b6</code></a></td><td><code>docker/.gitpod.Dockerfile: Clean more</code></td></tr></table>\n",
    "created_at": "2022-01-07T20:14:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534798",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f71c8b6c625017b0d37e956b0386111630ad6fe1"><code>f71c8b6</code></a></td><td><code>docker/.gitpod.Dockerfile: Clean more</code></td></tr></table>




---

archive/issue_comments_534799.json:
```json
{
    "body": "Changed commit from **[`7e74607`](https://github.com/sagemath/sagetrac-mirror/commit/7e74607979224e0b8f7d2803fc8b68f3802a64f4)** to **[`f71c8b6`](https://github.com/sagemath/sagetrac-mirror/commit/f71c8b6c625017b0d37e956b0386111630ad6fe1)**",
    "created_at": "2022-01-07T20:14:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534799",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7e74607`](https://github.com/sagemath/sagetrac-mirror/commit/7e74607979224e0b8f7d2803fc8b68f3802a64f4)** to **[`f71c8b6`](https://github.com/sagemath/sagetrac-mirror/commit/f71c8b6c625017b0d37e956b0386111630ad6fe1)**



---

archive/issue_comments_534800.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\n\n```\n$ du -sh src local /usr /home /tmp /var/tmp\n3.1G    src\n3.1G    local\n2.0G    /usr\n36K     /home\n31M     /tmp\n0       /var/tmp\n```",
    "created_at": "2022-01-08T06:04:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534800",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">comment:1</div>


```
$ du -sh src local /usr /home /tmp /var/tmp
3.1G    src
3.1G    local
2.0G    /usr
36K     /home
31M     /tmp
0       /var/tmp
```



---

archive/issue_comments_534801.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI don't think it's necessary to remove packages such as `emacs` that come with `gitpod/workspace-base`.",
    "created_at": "2022-01-08T06:23:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534801",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

I don't think it's necessary to remove packages such as `emacs` that come with `gitpod/workspace-base`.



---

archive/issue_comments_534802.json:
```json
{
    "body": "<div id=\"comment:123\" align=\"right\">comment:123</div>\n\nReplying to [@mkoeppe](#comment:88):\n> Nice, also docker-in-docker works in the gitpod, so I can run commands such as `tox -e docker-ubuntu-bionic-minimal -- config.status` there\n\nToo bad, this no longer works with the smaller base image because it does not have docker. \n\nAnd `sudo apt-get install docker.io` is not sufficient to fix it:\n\n```\n$ docker run -it ubuntu:bionic bash\n[...]\ndocker: Error response from daemon: failed to create shim: OCI runtime create failed: container_linux.go:380: starting container process caused: error adding seccomp filter rule for syscall clone3: permission denied: unknown.\nERRO[0008] error waiting for container: context canceled \n\n$ sudo docker run -it ubuntu:bionic bash\ndocker: Error response from daemon: failed to create shim: OCI runtime create failed: container_linux.go:380: starting container process caused: error adding seccomp filter rule for syscall clone3: permission denied: unknown.\nERRO[0001] error waiting for container: context canceled \n```",
    "created_at": "2022-01-08T07:11:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534802",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:123" align="right">comment:123</div>

Replying to [@mkoeppe](#comment:88):
> Nice, also docker-in-docker works in the gitpod, so I can run commands such as `tox -e docker-ubuntu-bionic-minimal -- config.status` there

Too bad, this no longer works with the smaller base image because it does not have docker. 

And `sudo apt-get install docker.io` is not sufficient to fix it:

```
$ docker run -it ubuntu:bionic bash
[...]
docker: Error response from daemon: failed to create shim: OCI runtime create failed: container_linux.go:380: starting container process caused: error adding seccomp filter rule for syscall clone3: permission denied: unknown.
ERRO[0008] error waiting for container: context canceled 

$ sudo docker run -it ubuntu:bionic bash
docker: Error response from daemon: failed to create shim: OCI runtime create failed: container_linux.go:380: starting container process caused: error adding seccomp filter rule for syscall clone3: permission denied: unknown.
ERRO[0001] error waiting for container: context canceled 
```



---

archive/issue_comments_534803.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,12 @@\n-Based on #32749.\n+[Gitpod](https://www.gitpod.io/) allows one to setup a complete dev environment in the cloud. It is free to use for up to 50 hours per month. In this ticket the config necessary for making this work with sagemath is added. \n \n-Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod\n+You can try this out by going to https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates. \n \n-To try out:\n-- https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates\n+It works by building docker images on github, push them to GH packages (https://github.com/mkoeppe?tab=packages&q=gitpod) and then use these ones as the base for the gitpod workspace.\n+\n+After this ticket is merged, we should the automatic prebuild using a github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env very quickly without the need to build anything.\n \n Follow-up: #33113 gitpod usability improvements\n \n+Alternative: #32749, which only builds the docker image on gitpod (which is currently not really feasible as they have a time limit of 1h) \n+\n``````\n",
    "created_at": "2022-01-08T19:49:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534803",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,12 @@
-Based on #32749.
+[Gitpod](https://www.gitpod.io/) allows one to setup a complete dev environment in the cloud. It is free to use for up to 50 hours per month. In this ticket the config necessary for making this work with sagemath is added. 
 
-Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod
+You can try this out by going to https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates. 
 
-To try out:
-- https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates
+It works by building docker images on github, push them to GH packages (https://github.com/mkoeppe?tab=packages&q=gitpod) and then use these ones as the base for the gitpod workspace.
+
+After this ticket is merged, we should the automatic prebuild using a github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env very quickly without the need to build anything.
 
 Follow-up: #33113 gitpod usability improvements
 
+Alternative: #32749, which only builds the docker image on gitpod (which is currently not really feasible as they have a time limit of 1h) 
+
``````




---

archive/issue_comments_534804.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThanks, this seems to work reasonable well for me (still 4 mins, but well...).\n\nOne could still shave off 250mb by uninstalling emacs-nox, vim and python2.7 but that is not very significant in view of an 8GB image in total.",
    "created_at": "2022-01-08T20:11:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534804",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:5" align="right">comment:5</div>

Thanks, this seems to work reasonable well for me (still 4 mins, but well...).

One could still shave off 250mb by uninstalling emacs-nox, vim and python2.7 but that is not very significant in view of an 8GB image in total.



---

archive/issue_comments_534805.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nTicket description misses verb in this sentence:\n\n> After this ticket is merged, we should\n> the automatic prebuild using a github app",
    "created_at": "2022-01-09T06:05:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534805",
    "user": "https://github.com/slel"
}
```

<div id="comment:6" align="right">comment:6</div>

Ticket description misses verb in this sentence:

> After this ticket is merged, we should
> the automatic prebuild using a github app



---

archive/issue_comments_534806.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n \n It works by building docker images on github, push them to GH packages (https://github.com/mkoeppe?tab=packages&q=gitpod) and then use these ones as the base for the gitpod workspace.\n \n-After this ticket is merged, we should the automatic prebuild using a github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env very quickly without the need to build anything.\n+After this ticket is merged, we should activate the automatic prebuild by installing the github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env very quickly without the need to build anything.\n \n Follow-up: #33113 gitpod usability improvements\n \n``````\n",
    "created_at": "2022-01-09T12:05:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534806",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 
 It works by building docker images on github, push them to GH packages (https://github.com/mkoeppe?tab=packages&q=gitpod) and then use these ones as the base for the gitpod workspace.
 
-After this ticket is merged, we should the automatic prebuild using a github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env very quickly without the need to build anything.
+After this ticket is merged, we should activate the automatic prebuild by installing the github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env very quickly without the need to build anything.
 
 Follow-up: #33113 gitpod usability improvements
 
``````




---

archive/issue_comments_534807.json:
```json
{
    "body": "Changed commit from **[`f71c8b6`](https://github.com/sagemath/sagetrac-mirror/commit/f71c8b6c625017b0d37e956b0386111630ad6fe1)** to **[`f953228`](https://github.com/sagemath/sagetrac-mirror/commit/f95322851c6494818bc08cd6fb3ce94e9c27debb)**",
    "created_at": "2022-01-09T18:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534807",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f71c8b6`](https://github.com/sagemath/sagetrac-mirror/commit/f71c8b6c625017b0d37e956b0386111630ad6fe1)** to **[`f953228`](https://github.com/sagemath/sagetrac-mirror/commit/f95322851c6494818bc08cd6fb3ce94e9c27debb)**



---

archive/issue_comments_534808.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f95322851c6494818bc08cd6fb3ce94e9c27debb\"><code>f953228</code></a></td><td><code>Merge tag '9.5.rc0' into t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow</code></td></tr></table>\n",
    "created_at": "2022-01-09T18:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534808",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f95322851c6494818bc08cd6fb3ce94e9c27debb"><code>f953228</code></a></td><td><code>Merge tag '9.5.rc0' into t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow</code></td></tr></table>




---

archive/issue_comments_534809.json:
```json
{
    "body": "Changed dependencies from **#33068, #30933, #29285, #32868, #33067, #30677** to **#30933, #29285**",
    "created_at": "2022-01-09T18:32:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534809",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#33068, #30933, #29285, #32868, #33067, #30677** to **#30933, #29285**



---

archive/issue_events_452216.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-01-11T12:17:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452216"
}
```



---

archive/issue_events_452217.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-01-11T12:17:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452217"
}
```



---

archive/issue_comments_534810.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe, ...** to **Matthias Koeppe, Dima Pasechnik**",
    "created_at": "2022-01-11T12:17:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534810",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Matthias Koeppe, ...** to **Matthias Koeppe, Dima Pasechnik**



---

archive/issue_comments_534811.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nlet's get this in, it seems to work, I can get `./sage` in console there, etc.\n`./sage -n` leads to problems, but probably that's not the way it's intendend.",
    "created_at": "2022-01-11T12:17:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534811",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:0" align="right">comment:0</div>

let's get this in, it seems to work, I can get `./sage` in console there, etc.
`./sage -n` leads to problems, but probably that's not the way it's intendend.



---

archive/issue_comments_534812.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThanks for the review!",
    "created_at": "2022-01-11T12:21:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534812",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:1" align="right">comment:1</div>

Thanks for the review!



---

archive/issue_comments_534813.json:
```json
{
    "body": "<div id=\"comment:132\" align=\"right\">comment:132</div>\n\nReplying to [@dimpase](#comment:130):\n> `./sage -n` leads to problems, but probably that's not the way it's intendend.\n\nThere's no web browser in the container, so you can't use `sage -n`.\nTo use Jupyter notebooks, use the Command Palette to run \"Jupyter: Create New Jupyter Notebook\", see\nhttps://code.visualstudio.com/docs/datascience/jupyter-notebooks",
    "created_at": "2022-01-11T16:33:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534813",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:132" align="right">comment:132</div>

Replying to [@dimpase](#comment:130):
> `./sage -n` leads to problems, but probably that's not the way it's intendend.

There's no web browser in the container, so you can't use `sage -n`.
To use Jupyter notebooks, use the Command Palette to run "Jupyter: Create New Jupyter Notebook", see
https://code.visualstudio.com/docs/datascience/jupyter-notebooks



---

archive/issue_comments_534814.json:
```json
{
    "body": "Changed commit from **[`f953228`](https://github.com/sagemath/sagetrac-mirror/commit/f95322851c6494818bc08cd6fb3ce94e9c27debb)** to **[`2d0902a`](https://github.com/sagemath/sagetrac-mirror/commit/2d0902a1fee81d0749cc274fbec1d965cc522466)**",
    "created_at": "2022-01-11T20:47:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534814",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f953228`](https://github.com/sagemath/sagetrac-mirror/commit/f95322851c6494818bc08cd6fb3ce94e9c27debb)** to **[`2d0902a`](https://github.com/sagemath/sagetrac-mirror/commit/2d0902a1fee81d0749cc274fbec1d965cc522466)**



---

archive/issue_events_452218.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-01-11T20:47:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452218"
}
```



---

archive/issue_events_452219.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-01-11T20:47:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452219"
}
```



---

archive/issue_comments_534815.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d0902a1fee81d0749cc274fbec1d965cc522466\"><code>2d0902a</code></a></td><td><code>src/doc/en/developer/workspace.rst: Fix markup</code></td></tr></table>\n",
    "created_at": "2022-01-11T20:47:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534815",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d0902a1fee81d0749cc274fbec1d965cc522466"><code>2d0902a</code></a></td><td><code>src/doc/en/developer/workspace.rst: Fix markup</code></td></tr></table>




---

archive/issue_comments_534816.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nFixes the PDF docbuild",
    "created_at": "2022-01-11T20:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534816",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

Fixes the PDF docbuild



---

archive/issue_events_452220.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-11T20:47:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452220"
}
```



---

archive/issue_events_452221.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-11T20:47:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452221"
}
```



---

archive/issue_comments_534817.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08048c3e5d5d995cb5ebfd952d84eb204cb8c41c\"><code>08048c3</code></a></td><td><code>.github/workflows/tox.yml: Transform GITHUB_REF_NAME to a valid docker tag</code></td></tr></table>\n",
    "created_at": "2022-01-12T06:25:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534817",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08048c3e5d5d995cb5ebfd952d84eb204cb8c41c"><code>08048c3</code></a></td><td><code>.github/workflows/tox.yml: Transform GITHUB_REF_NAME to a valid docker tag</code></td></tr></table>




---

archive/issue_events_452222.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-01-12T06:25:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452222"
}
```



---

archive/issue_events_452223.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-01-12T06:25:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452223"
}
```



---

archive/issue_comments_534818.json:
```json
{
    "body": "Changed commit from **[`2d0902a`](https://github.com/sagemath/sagetrac-mirror/commit/2d0902a1fee81d0749cc274fbec1d965cc522466)** to **[`08048c3`](https://github.com/sagemath/sagetrac-mirror/commit/08048c3e5d5d995cb5ebfd952d84eb204cb8c41c)**",
    "created_at": "2022-01-12T06:25:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534818",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2d0902a`](https://github.com/sagemath/sagetrac-mirror/commit/2d0902a1fee81d0749cc274fbec1d965cc522466)** to **[`08048c3`](https://github.com/sagemath/sagetrac-mirror/commit/08048c3e5d5d995cb5ebfd952d84eb204cb8c41c)**



---

archive/issue_comments_534819.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/078f247c9a5ea383178499e9b0e990777f497a6e\"><code>078f247</code></a></td><td><code>.github/workflows/tox*.yml: Transform GITHUB_REF_NAME to a valid docker tag</code></td></tr></table>\n",
    "created_at": "2022-01-12T07:06:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534819",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/078f247c9a5ea383178499e9b0e990777f497a6e"><code>078f247</code></a></td><td><code>.github/workflows/tox*.yml: Transform GITHUB_REF_NAME to a valid docker tag</code></td></tr></table>




---

archive/issue_comments_534820.json:
```json
{
    "body": "Changed commit from **[`08048c3`](https://github.com/sagemath/sagetrac-mirror/commit/08048c3e5d5d995cb5ebfd952d84eb204cb8c41c)** to **[`078f247`](https://github.com/sagemath/sagetrac-mirror/commit/078f247c9a5ea383178499e9b0e990777f497a6e)**",
    "created_at": "2022-01-12T07:06:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534820",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`08048c3`](https://github.com/sagemath/sagetrac-mirror/commit/08048c3e5d5d995cb5ebfd952d84eb204cb8c41c)** to **[`078f247`](https://github.com/sagemath/sagetrac-mirror/commit/078f247c9a5ea383178499e9b0e990777f497a6e)**



---

archive/issue_events_452224.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-12T07:07:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452224"
}
```



---

archive/issue_events_452225.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-12T07:07:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452225"
}
```



---

archive/issue_comments_534821.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIs it easy to configure launching this (with prebuids) on branches in https://github.com/sagemath/sagetrac-mirror ?",
    "created_at": "2022-01-13T13:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534821",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">comment:8</div>

Is it easy to configure launching this (with prebuids) on branches in https://github.com/sagemath/sagetrac-mirror ?



---

archive/issue_comments_534822.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nYes, it's only a few clicks see: https://www.gitpod.io/docs/prebuilds#projects-and-prebuilds\nHowever, it needs to be done by someone with rights to install apps in the sagemath org.",
    "created_at": "2022-01-13T14:31:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534822",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:9" align="right">comment:9</div>

Yes, it's only a few clicks see: https://www.gitpod.io/docs/prebuilds#projects-and-prebuilds
However, it needs to be done by someone with rights to install apps in the sagemath org.



---

archive/issue_comments_534823.json:
```json
{
    "body": "<div id=\"comment:140\" align=\"right\">comment:140</div>\n\nReplying to [@tobiasdiez](#comment:139):\n> Yes, it's only a few clicks see: https://www.gitpod.io/docs/prebuilds#projects-and-prebuilds\n> However, it needs to be done by someone with rights to install apps in the sagemath org.\n\nI've sent you an invite. I guess I installed their \"app\", but I don't see how to proceed.\n(I think it should be enabled on the branch of this ticket only, before it's merged.)\n\nDid you see my email message about trac access?",
    "created_at": "2022-01-13T17:40:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534823",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:140" align="right">comment:140</div>

Replying to [@tobiasdiez](#comment:139):
> Yes, it's only a few clicks see: https://www.gitpod.io/docs/prebuilds#projects-and-prebuilds
> However, it needs to be done by someone with rights to install apps in the sagemath org.

I've sent you an invite. I guess I installed their "app", but I don't see how to proceed.
(I think it should be enabled on the branch of this ticket only, before it's merged.)

Did you see my email message about trac access?



---

archive/issue_comments_534824.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThanks! I've now created a \"team\" sagemath and added the `sage` and `sagetrac-mirror` as projects. If you have a gitpod account and want to be invited to this team (in order to access the config), just post your email address and I send an invite.\n\nCurrently, the creation of the image fails however due to a permission error:\n\n```\n > [internal] load metadata for ghcr.io/sagemath/sage/sage-docker-gitpod-standard-with-targets:dev:\n------\n.gitpod.Dockerfile:3\n--------------------\n   1 |     ARG BASE_GITHUB_REPOSITORY=sagemath/sage\n   2 |     ARG BASE_TAG=dev\n   3 | >>> FROM ghcr.io/${BASE_GITHUB_REPOSITORY}/sage-docker-gitpod-standard-with-targets:${BASE_TAG} as with-targets\n   4 |     RUN sudo rm -rf /var/cache/debconf/* /var/lib/apt/lists/* /tmp/* /var/tmp/*\n   5 |     # Fast doc rebuilds do not work because\n--------------------\nerror: failed to solve: failed to fetch anonymous token: unexpected status: 403 Forbidden\n```\nMatthias, can you have a look please?\n\nhttps://gitpod.io/#prebuild/https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow",
    "created_at": "2022-01-14T11:59:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534824",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:1" align="right">comment:1</div>

Thanks! I've now created a "team" sagemath and added the `sage` and `sagetrac-mirror` as projects. If you have a gitpod account and want to be invited to this team (in order to access the config), just post your email address and I send an invite.

Currently, the creation of the image fails however due to a permission error:

```
 > [internal] load metadata for ghcr.io/sagemath/sage/sage-docker-gitpod-standard-with-targets:dev:
------
.gitpod.Dockerfile:3
--------------------
   1 |     ARG BASE_GITHUB_REPOSITORY=sagemath/sage
   2 |     ARG BASE_TAG=dev
   3 | >>> FROM ghcr.io/${BASE_GITHUB_REPOSITORY}/sage-docker-gitpod-standard-with-targets:${BASE_TAG} as with-targets
   4 |     RUN sudo rm -rf /var/cache/debconf/* /var/lib/apt/lists/* /tmp/* /var/tmp/*
   5 |     # Fast doc rebuilds do not work because
--------------------
error: failed to solve: failed to fetch anonymous token: unexpected status: 403 Forbidden
```
Matthias, can you have a look please?

https://gitpod.io/#prebuild/https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow



---

archive/issue_comments_534825.json:
```json
{
    "body": "<div id=\"comment:142\" align=\"right\">comment:142</div>\n\nReplying to [@tobiasdiez](#comment:141):\n> Thanks! I've now created a \"team\" sagemath and added the `sage` and `sagetrac-mirror` as projects. If you have a gitpod account and want to be invited to this team (in order to access the config), just post your email address and I send an invite.\n\nmy email is shown on my [GitHub](../wiki/GitHub) account https://github.com/dimpase\n\nThanks!",
    "created_at": "2022-01-14T12:17:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534825",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:142" align="right">comment:142</div>

Replying to [@tobiasdiez](#comment:141):
> Thanks! I've now created a "team" sagemath and added the `sage` and `sagetrac-mirror` as projects. If you have a gitpod account and want to be invited to this team (in order to access the config), just post your email address and I send an invite.

my email is shown on my [GitHub](../wiki/GitHub) account https://github.com/dimpase

Thanks!



---

archive/issue_comments_534826.json:
```json
{
    "body": "<div id=\"comment:143\" align=\"right\">comment:143</div>\n\nReplying to [@tobiasdiez](#comment:141):\n> Currently, the creation of the image fails however due to a permission error:\n> \n> ```\n>  > [internal] load metadata for ghcr.io/sagemath/sage/sage-docker-gitpod-standard-with-targets:dev:\n> ------\n> .gitpod.Dockerfile:3\n> --------------------\n>    1 |     ARG BASE_GITHUB_REPOSITORY=sagemath/sage\n>    2 |     ARG BASE_TAG=dev\n>    3 | >>> FROM ghcr.io/${BASE_GITHUB_REPOSITORY}/sage-docker-gitpod-standard-with-targets:${BASE_TAG} as with-targets\n>    4 |     RUN sudo rm -rf /var/cache/debconf/* /var/lib/apt/lists/* /tmp/* /var/tmp/*\n>    5 |     # Fast doc rebuilds do not work because\n> --------------------\n> error: failed to solve: failed to fetch anonymous token: unexpected status: 403 Forbidden\n> ```\n\nI think you need to deposit a secret providing read access similar to what is explained in\nhttps://www.gitpod.io/docs/self-hosted/latest/configuration/docker-registry",
    "created_at": "2022-01-14T16:20:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534826",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:143" align="right">comment:143</div>

Replying to [@tobiasdiez](#comment:141):
> Currently, the creation of the image fails however due to a permission error:
> 
> ```
>  > [internal] load metadata for ghcr.io/sagemath/sage/sage-docker-gitpod-standard-with-targets:dev:
> ------
> .gitpod.Dockerfile:3
> --------------------
>    1 |     ARG BASE_GITHUB_REPOSITORY=sagemath/sage
>    2 |     ARG BASE_TAG=dev
>    3 | >>> FROM ghcr.io/${BASE_GITHUB_REPOSITORY}/sage-docker-gitpod-standard-with-targets:${BASE_TAG} as with-targets
>    4 |     RUN sudo rm -rf /var/cache/debconf/* /var/lib/apt/lists/* /tmp/* /var/tmp/*
>    5 |     # Fast doc rebuilds do not work because
> --------------------
> error: failed to solve: failed to fetch anonymous token: unexpected status: 403 Forbidden
> ```

I think you need to deposit a secret providing read access similar to what is explained in
https://www.gitpod.io/docs/self-hosted/latest/configuration/docker-registry



---

archive/issue_comments_534827.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\n... alternatively I suppose we could push the required Docker images to DockerHub -- but I don't have write access there; @saraedum, could you deposit an access token for that as a secret here? https://github.com/organizations/sagemath/settings/secrets/actions",
    "created_at": "2022-01-14T18:51:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534827",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

... alternatively I suppose we could push the required Docker images to DockerHub -- but I don't have write access there; @saraedum, could you deposit an access token for that as a secret here? https://github.com/organizations/sagemath/settings/secrets/actions



---

archive/issue_comments_534828.json:
```json
{
    "body": "<div id=\"comment:146\" align=\"right\">comment:146</div>\n\nReplying to [@mkoeppe](#comment:143):\n> Replying to [@tobiasdiez](#comment:141):\n> > Currently, the creation of the image fails however due to a permission error:\n> > \n> > ```\n> >  > [internal] load metadata for ghcr.io/sagemath/sage/sage-docker-gitpod-standard-with-targets:dev:\n> > ------\n> > .gitpod.Dockerfile:3\n> > --------------------\n> >    1 |     ARG BASE_GITHUB_REPOSITORY=sagemath/sage\n> >    2 |     ARG BASE_TAG=dev\n> >    3 | >>> FROM ghcr.io/${BASE_GITHUB_REPOSITORY}/sage-docker-gitpod-standard-with-targets:${BASE_TAG} as with-targets\n> >    4 |     RUN sudo rm -rf /var/cache/debconf/* /var/lib/apt/lists/* /tmp/* /var/tmp/*\n> >    5 |     # Fast doc rebuilds do not work because\n> > --------------------\n> > error: failed to solve: failed to fetch anonymous token: unexpected status: 403 Forbidden\n> > ```\n\n> \n> I think you need to deposit a secret providing read access similar to what is explained in\n> https://www.gitpod.io/docs/self-hosted/latest/configuration/docker-registry\n\nThat link is for a self-hosted gitpod and thus does not apply to our situation (we don't have a gitpod config other than what is committed in this branch).\n\nI think the issue is that the image `sage-docker-gitpod-standard-with-targets` is not yet published under `sagemath/sage`. But how is this then working with your account Matthias?",
    "created_at": "2022-01-14T20:09:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534828",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:146" align="right">comment:146</div>

Replying to [@mkoeppe](#comment:143):
> Replying to [@tobiasdiez](#comment:141):
> > Currently, the creation of the image fails however due to a permission error:
> > 
> > ```
> >  > [internal] load metadata for ghcr.io/sagemath/sage/sage-docker-gitpod-standard-with-targets:dev:
> > ------
> > .gitpod.Dockerfile:3
> > --------------------
> >    1 |     ARG BASE_GITHUB_REPOSITORY=sagemath/sage
> >    2 |     ARG BASE_TAG=dev
> >    3 | >>> FROM ghcr.io/${BASE_GITHUB_REPOSITORY}/sage-docker-gitpod-standard-with-targets:${BASE_TAG} as with-targets
> >    4 |     RUN sudo rm -rf /var/cache/debconf/* /var/lib/apt/lists/* /tmp/* /var/tmp/*
> >    5 |     # Fast doc rebuilds do not work because
> > --------------------
> > error: failed to solve: failed to fetch anonymous token: unexpected status: 403 Forbidden
> > ```

> 
> I think you need to deposit a secret providing read access similar to what is explained in
> https://www.gitpod.io/docs/self-hosted/latest/configuration/docker-registry

That link is for a self-hosted gitpod and thus does not apply to our situation (we don't have a gitpod config other than what is committed in this branch).

I think the issue is that the image `sage-docker-gitpod-standard-with-targets` is not yet published under `sagemath/sage`. But how is this then working with your account Matthias?



---

archive/issue_comments_534829.json:
```json
{
    "body": "<div id=\"comment:147\" align=\"right\">comment:147</div>\n\nReplying to [@tobiasdiez](#comment:146):\n> the image `sage-docker-gitpod-standard-with-targets` is not yet published under `sagemath/sage`. But how is this then working with your account Matthias?\n\nBecause on my testing branch used for the prebuild, I am setting the correct repo:\nhttps://github.com/mkoeppe/sage/blob/mkoeppe-9.5.beta9%2Bupdates/docker/.gitpod.Dockerfile",
    "created_at": "2022-01-14T20:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534829",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:147" align="right">comment:147</div>

Replying to [@tobiasdiez](#comment:146):
> the image `sage-docker-gitpod-standard-with-targets` is not yet published under `sagemath/sage`. But how is this then working with your account Matthias?

Because on my testing branch used for the prebuild, I am setting the correct repo:
https://github.com/mkoeppe/sage/blob/mkoeppe-9.5.beta9%2Bupdates/docker/.gitpod.Dockerfile



---

archive/issue_comments_534830.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n(And because every GH workflow automatically has the credentials to access its own GH packages (gchr.io)!)",
    "created_at": "2022-01-14T20:14:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534830",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

(And because every GH workflow automatically has the credentials to access its own GH packages (gchr.io)!)



---

archive/issue_comments_534831.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAhh okay, I thought this is an environment variable that is picked up somewhere.\n\nSo in this case we just have to wait until this ticket is merged, which would then build and publish the docker image to `sagemath/sage`, right?",
    "created_at": "2022-01-14T20:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534831",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:9" align="right">comment:9</div>

Ahh okay, I thought this is an environment variable that is picked up somewhere.

So in this case we just have to wait until this ticket is merged, which would then build and publish the docker image to `sagemath/sage`, right?



---

archive/issue_comments_534832.json:
```json
{
    "body": "<div id=\"comment:150\" align=\"right\">comment:150</div>\n\nReplying to [@tobiasdiez](#comment:149):\n> wait until this ticket is merged, which would then build and publish the docker image to `sagemath/sage`, right?\n\nYes, on the next release that includes this branch, the Docker image will be pushed (by separate instances of the workflow) both to `gchr.io/sagemath/sage` and to `gchr.io/sagemath/sagetrac-mirror`.\n\nWe will then see whether the 403 Forbidden will go away. I think it will not, for workflows run on `github.com/sagemath/sagetrac-mirror`, because it may not have the `read:packages` credential for `gchr.io/sagemath/sage`.",
    "created_at": "2022-01-14T20:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534832",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:150" align="right">comment:150</div>

Replying to [@tobiasdiez](#comment:149):
> wait until this ticket is merged, which would then build and publish the docker image to `sagemath/sage`, right?

Yes, on the next release that includes this branch, the Docker image will be pushed (by separate instances of the workflow) both to `gchr.io/sagemath/sage` and to `gchr.io/sagemath/sagetrac-mirror`.

We will then see whether the 403 Forbidden will go away. I think it will not, for workflows run on `github.com/sagemath/sagetrac-mirror`, because it may not have the `read:packages` credential for `gchr.io/sagemath/sage`.



---

archive/issue_comments_534833.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI think we may need to do this:\nhttps://docs.github.com/en/packages/learn-github-packages/configuring-a-packages-access-control-and-visibility#configuring-visibility-of-container-images-for-an-organization",
    "created_at": "2022-01-16T21:38:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534833",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">comment:1</div>

I think we may need to do this:
https://docs.github.com/en/packages/learn-github-packages/configuring-a-packages-access-control-and-visibility#configuring-visibility-of-container-images-for-an-organization



---

archive/issue_comments_534834.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWell, no, all packages are already set to \"public\": For example https://github.com/orgs/sagemath/packages/container/sage%2Fsage-docker-ubuntu-focal-standard-configured/settings",
    "created_at": "2022-01-16T21:44:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534834",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

Well, no, all packages are already set to "public": For example https://github.com/orgs/sagemath/packages/container/sage%2Fsage-docker-ubuntu-focal-standard-configured/settings



---

archive/issue_comments_534835.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nBut perhaps this is needed: https://docs.github.com/en/packages/learn-github-packages/configuring-a-packages-access-control-and-visibility#github-actions-access-for-organization-owned-container-images",
    "created_at": "2022-01-16T21:46:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534835",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

But perhaps this is needed: https://docs.github.com/en/packages/learn-github-packages/configuring-a-packages-access-control-and-visibility#github-actions-access-for-organization-owned-container-images



---

archive/issue_comments_534836.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nNo, this makes no sense.",
    "created_at": "2022-01-16T21:53:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534836",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

No, this makes no sense.



---

archive/issue_events_452226.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-28T23:03:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452226"
}
```



---

archive/issue_events_452227.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-28T23:03:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452227"
}
```



---

archive/issue_events_452228.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-11T19:50:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452228"
}
```



---

archive/issue_events_452229.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-11T19:50:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452229"
}
```



---

archive/issue_comments_534837.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow)** to **[`078f247`](https://github.com/sagemath/sagetrac-mirror/commit/078f247c9a5ea383178499e9b0e990777f497a6e)**",
    "created_at": "2022-02-12T22:04:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33103#issuecomment-534837",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow)** to **[`078f247`](https://github.com/sagemath/sagetrac-mirror/commit/078f247c9a5ea383178499e9b0e990777f497a6e)**



---

archive/issue_events_452230.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-12T22:04:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452230"
}
```



---

archive/issue_events_452231.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "88a98d50c3ba9aa72f876644c828bf129002c848",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-02-12T22:04:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33103",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33103#event-452231"
}
```
