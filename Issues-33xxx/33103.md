# Issue 33103: gitpod integration using Docker images from portability testing workflow

archive/issues_032866.json:
```json
{
    "body": "[Gitpod](https://www.gitpod.io/) allows one to setup a complete dev environment in the cloud. It is free to use for up to 50 hours per month. In this ticket the config necessary for making this work with sagemath is added. \n\nYou can try this out by going to https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates. \n\nIt works by building docker images on github, push them to GH packages (https://github.com/mkoeppe?tab=packages&q=gitpod) and then use these ones as the base for the gitpod workspace.\n\nAfter this ticket is merged, we should activate the automatic prebuild by installing the github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env very quickly without the need to build anything.\n\nFollow-up: #33113 gitpod usability improvements\n\nAlternative: #32749, which only builds the docker image on gitpod (which is currently not really feasible as they have a time limit of 1h) \n\n\n**CC:**  @tobiasdiez @dimpase @saraedum\n\n**Branch/Commit:** [078f247c9a5ea383178499e9b0e990777f497a6e](https://github.com/sagemath/sagetrac-mirror/commit/078f247c9a5ea383178499e9b0e990777f497a6e)\n\n**Reviewer:** Matthias Koeppe, Dima Pasechnik\n\n**Author:** Tobias Diez, Matthias Koeppe\n\n**Dependencies:** #30933, #29285\n\nIssue created by migration from https://trac.sagemath.org/ticket/33103\n\n",
    "closed_at": "2022-02-12T22:04:53Z",
    "created_at": "2022-01-01T19:34:16Z",
    "labels": [
        "component: docker",
        "critical",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "gitpod integration using Docker images from portability testing workflow",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33103",
    "user": "https://github.com/mkoeppe"
}
```
[Gitpod](https://www.gitpod.io/) allows one to setup a complete dev environment in the cloud. It is free to use for up to 50 hours per month. In this ticket the config necessary for making this work with sagemath is added. 

You can try this out by going to https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates. 

It works by building docker images on github, push them to GH packages (https://github.com/mkoeppe?tab=packages&q=gitpod) and then use these ones as the base for the gitpod workspace.

After this ticket is merged, we should activate the automatic prebuild by installing the github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env very quickly without the need to build anything.

Follow-up: #33113 gitpod usability improvements

Alternative: #32749, which only builds the docker image on gitpod (which is currently not really feasible as they have a time limit of 1h) 


**CC:**  @tobiasdiez @dimpase @saraedum

**Branch/Commit:** [078f247c9a5ea383178499e9b0e990777f497a6e](https://github.com/sagemath/sagetrac-mirror/commit/078f247c9a5ea383178499e9b0e990777f497a6e)

**Reviewer:** Matthias Koeppe, Dima Pasechnik

**Author:** Tobias Diez, Matthias Koeppe

**Dependencies:** #30933, #29285

Issue created by migration from https://trac.sagemath.org/ticket/33103





---

archive/issue_comments_537389.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow)",
    "created_at": "2022-01-01T19:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537389",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow)



---

archive/issue_comments_537390.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e99a09e55439e4276e87d248ab80d816f9735065\">e99a09e</a></td><td><code>sed -i.bak 's/ubunty/ubuntu/g' .github/workflows/*.yml</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edb4364000d32c72f057bad0faa81d9ba2a79b9b\">edb4364</a></td><td><code>.github/workflows/tox.yml: Replace homebrew-macos-python3_xcode-standard by homebrew-macos-usrlocal-python3_xcode-standard</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e27e16187ea939402737bdc8a30c4c43e1bcf11e\">e27e161</a></td><td><code>Merge #32703</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96a45d12870f2b11ab4d98f500a9d601fe420f1b\">96a45d1</a></td><td><code>tox.ini, .github/workflows: Remove ubuntu-groovy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59ec3d05225db5a8a5896a7ad123c49e2d26e157\">59ec3d0</a></td><td><code>Merge #33068</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbf03d1786d24bc9ec6d437f2b820bfa687c52fd\">cbf03d1</a></td><td><code>.github/workflows/tox.yml: Add docker-gitpod</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a9edfcc73c5ccbaadb064beccd80df75f8f9b9f\">4a9edfc</a></td><td><code>build/bin/write-dockerfile.sh: Handle __SUDO</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d697d9424d45f27699493a0d6773a1e90eccbe23\">d697d94</a></td><td><code>build/bin/write-dockerfile.sh: Use relative workdir 'sage'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7cc5cd68a9018d2e3168683f860736696288b9b\">c7cc5cd</a></td><td><code>.gitpod.yml, docker/.gitpod.Dockerfile: Reverse SAGE_LOCAL symlink</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda\">bde9f74</a></td><td><code>build/bin/write-dockerfile.sh: Handle $__CHOWN</code></td></tr></table>\n",
    "created_at": "2022-01-01T19:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537390",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e99a09e55439e4276e87d248ab80d816f9735065">e99a09e</a></td><td><code>sed -i.bak 's/ubunty/ubuntu/g' .github/workflows/*.yml</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edb4364000d32c72f057bad0faa81d9ba2a79b9b">edb4364</a></td><td><code>.github/workflows/tox.yml: Replace homebrew-macos-python3_xcode-standard by homebrew-macos-usrlocal-python3_xcode-standard</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e27e16187ea939402737bdc8a30c4c43e1bcf11e">e27e161</a></td><td><code>Merge #32703</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96a45d12870f2b11ab4d98f500a9d601fe420f1b">96a45d1</a></td><td><code>tox.ini, .github/workflows: Remove ubuntu-groovy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59ec3d05225db5a8a5896a7ad123c49e2d26e157">59ec3d0</a></td><td><code>Merge #33068</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbf03d1786d24bc9ec6d437f2b820bfa687c52fd">cbf03d1</a></td><td><code>.github/workflows/tox.yml: Add docker-gitpod</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a9edfcc73c5ccbaadb064beccd80df75f8f9b9f">4a9edfc</a></td><td><code>build/bin/write-dockerfile.sh: Handle __SUDO</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d697d9424d45f27699493a0d6773a1e90eccbe23">d697d94</a></td><td><code>build/bin/write-dockerfile.sh: Use relative workdir 'sage'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7cc5cd68a9018d2e3168683f860736696288b9b">c7cc5cd</a></td><td><code>.gitpod.yml, docker/.gitpod.Dockerfile: Reverse SAGE_LOCAL symlink</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda">bde9f74</a></td><td><code>build/bin/write-dockerfile.sh: Handle $__CHOWN</code></td></tr></table>




---

archive/issue_comments_537391.json:
```json
{
    "body": "**Commit:** [bde9f74bc7be3ca657f3d6ca8ab420709abfbeda](https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda)",
    "created_at": "2022-01-01T19:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537391",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [bde9f74bc7be3ca657f3d6ca8ab420709abfbeda](https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda)



---

archive/issue_comments_537392.json:
```json
{
    "body": "**Author:** Tobias Diez, Matthias Koeppe",
    "created_at": "2022-01-01T19:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537392",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Tobias Diez, Matthias Koeppe



---

archive/issue_comments_537393.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21afe511f1e903647102127204f47c2d29e04fef\">21afe51</a></td><td><code>.github/workflows/tox*.yml, tox.ini: Pass ddocker.pkg.github.com credentials via DOCKER_CONFIG_FILE</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76b5e76ab2c28a3ee4a5c1571737bc2f8571f5ff\">76b5e76</a></td><td><code>Merge #30933</code></td></tr></table>\n",
    "created_at": "2022-01-01T19:44:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537393",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21afe511f1e903647102127204f47c2d29e04fef">21afe51</a></td><td><code>.github/workflows/tox*.yml, tox.ini: Pass ddocker.pkg.github.com credentials via DOCKER_CONFIG_FILE</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76b5e76ab2c28a3ee4a5c1571737bc2f8571f5ff">76b5e76</a></td><td><code>Merge #30933</code></td></tr></table>




---

archive/issue_comments_537394.json:
```json
{
    "body": "**Changing commit** from \"[bde9f74bc7be3ca657f3d6ca8ab420709abfbeda](https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda)\" to \"[76b5e76ab2c28a3ee4a5c1571737bc2f8571f5ff](https://github.com/sagemath/sagetrac-mirror/commit/76b5e76ab2c28a3ee4a5c1571737bc2f8571f5ff)\".",
    "created_at": "2022-01-01T19:44:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537394",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bde9f74bc7be3ca657f3d6ca8ab420709abfbeda](https://github.com/sagemath/sagetrac-mirror/commit/bde9f74bc7be3ca657f3d6ca8ab420709abfbeda)" to "[76b5e76ab2c28a3ee4a5c1571737bc2f8571f5ff](https://github.com/sagemath/sagetrac-mirror/commit/76b5e76ab2c28a3ee4a5c1571737bc2f8571f5ff)".



---

archive/issue_comments_537395.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n Based on #32749.\n+\n+Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod\n+\n+\n``````\n",
    "created_at": "2022-01-01T19:59:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537395",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,5 @@
 Based on #32749.
+
+Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod
+
+
``````




---

archive/issue_comments_537396.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ef6a6e3333a43153b92e54dceb3b06ab0713387\">7ef6a6e</a></td><td><code>docker/.gitpod.Dockerfile: Remove, use custom image from GH Packages instead</code></td></tr></table>\n",
    "created_at": "2022-01-01T20:27:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537396",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ef6a6e3333a43153b92e54dceb3b06ab0713387">7ef6a6e</a></td><td><code>docker/.gitpod.Dockerfile: Remove, use custom image from GH Packages instead</code></td></tr></table>




---

archive/issue_comments_537397.json:
```json
{
    "body": "**Changing commit** from \"[76b5e76ab2c28a3ee4a5c1571737bc2f8571f5ff](https://github.com/sagemath/sagetrac-mirror/commit/76b5e76ab2c28a3ee4a5c1571737bc2f8571f5ff)\" to \"[7ef6a6e3333a43153b92e54dceb3b06ab0713387](https://github.com/sagemath/sagetrac-mirror/commit/7ef6a6e3333a43153b92e54dceb3b06ab0713387)\".",
    "created_at": "2022-01-01T20:27:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537397",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[76b5e76ab2c28a3ee4a5c1571737bc2f8571f5ff](https://github.com/sagemath/sagetrac-mirror/commit/76b5e76ab2c28a3ee4a5c1571737bc2f8571f5ff)" to "[7ef6a6e3333a43153b92e54dceb3b06ab0713387](https://github.com/sagemath/sagetrac-mirror/commit/7ef6a6e3333a43153b92e54dceb3b06ab0713387)".



---

archive/issue_comments_537398.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,4 +2,5 @@\n \n Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod\n \n-\n+To try out (after the image has been built):\n+- https://gitpod.io/#https://github.com/mkoeppe/sage/tree/t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow\n``````\n",
    "created_at": "2022-01-01T20:31:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537398",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,4 +2,5 @@
 
 Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod
 
-
+To try out (after the image has been built):
+- https://gitpod.io/#https://github.com/mkoeppe/sage/tree/t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow
``````




---

archive/issue_comments_537399.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,5 +2,5 @@\n \n Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod\n \n-To try out (after the image has been built):\n+To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4680839663?check_suite_focus=true):\n - https://gitpod.io/#https://github.com/mkoeppe/sage/tree/t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow\n``````\n",
    "created_at": "2022-01-01T20:32:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537399",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,5 +2,5 @@
 
 Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod
 
-To try out (after the image has been built):
+To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4680839663?check_suite_focus=true):
 - https://gitpod.io/#https://github.com/mkoeppe/sage/tree/t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow
``````




---

archive/issue_comments_537400.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b41c4af670b9e8a653e8c2e4049848e4e87d8a1\">6b41c4a</a></td><td><code>.github/workflows/tox.yml: Also push ...-with-targets-pre</code></td></tr></table>\n",
    "created_at": "2022-01-01T20:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537400",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b41c4af670b9e8a653e8c2e4049848e4e87d8a1">6b41c4a</a></td><td><code>.github/workflows/tox.yml: Also push ...-with-targets-pre</code></td></tr></table>




---

archive/issue_comments_537401.json:
```json
{
    "body": "**Changing commit** from \"[7ef6a6e3333a43153b92e54dceb3b06ab0713387](https://github.com/sagemath/sagetrac-mirror/commit/7ef6a6e3333a43153b92e54dceb3b06ab0713387)\" to \"[6b41c4af670b9e8a653e8c2e4049848e4e87d8a1](https://github.com/sagemath/sagetrac-mirror/commit/6b41c4af670b9e8a653e8c2e4049848e4e87d8a1)\".",
    "created_at": "2022-01-01T20:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537401",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7ef6a6e3333a43153b92e54dceb3b06ab0713387](https://github.com/sagemath/sagetrac-mirror/commit/7ef6a6e3333a43153b92e54dceb3b06ab0713387)" to "[6b41c4af670b9e8a653e8c2e4049848e4e87d8a1](https://github.com/sagemath/sagetrac-mirror/commit/6b41c4af670b9e8a653e8c2e4049848e4e87d8a1)".



---

archive/issue_comments_537402.json:
```json
{
    "body": "<a id='comment:9'></a>\nRunning into `pyenv` issues (#29285) here too: \n\n```\n[pytest] installing. Log file: /home/gitpod/sage/logs/pkgs/pytest.log\n  [pytest] error installing, exit status 1. End of log file:\n  [pytest]   /home/gitpod/sage-local/var/lib/sage/venv-python3.8/bin/python3: No module named pip\n  [pytest] Full log file: /home/gitpod/sage/logs/pkgs/pytest.log\nmake[4]: *** [Makefile:2756: pytest-no-deps] Error 1\n```",
    "created_at": "2022-01-01T21:35:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537402",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Running into `pyenv` issues (#29285) here too: 

```
[pytest] installing. Log file: /home/gitpod/sage/logs/pkgs/pytest.log
  [pytest] error installing, exit status 1. End of log file:
  [pytest]   /home/gitpod/sage-local/var/lib/sage/venv-python3.8/bin/python3: No module named pip
  [pytest] Full log file: /home/gitpod/sage/logs/pkgs/pytest.log
make[4]: *** [Makefile:2756: pytest-no-deps] Error 1
```



---

archive/issue_comments_537403.json:
```json
{
    "body": "**Changing dependencies** from \"#33068, #30933\" to \"#33068, #30933, #29285\".",
    "created_at": "2022-01-02T02:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537403",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#33068, #30933" to "#33068, #30933, #29285".



---

archive/issue_comments_537404.json:
```json
{
    "body": "**Changing commit** from \"[6b41c4af670b9e8a653e8c2e4049848e4e87d8a1](https://github.com/sagemath/sagetrac-mirror/commit/6b41c4af670b9e8a653e8c2e4049848e4e87d8a1)\" to \"[5f0c36cc73b59e64eba006ed5a5dfb51efd920bf](https://github.com/sagemath/sagetrac-mirror/commit/5f0c36cc73b59e64eba006ed5a5dfb51efd920bf)\".",
    "created_at": "2022-01-02T02:01:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537404",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6b41c4af670b9e8a653e8c2e4049848e4e87d8a1](https://github.com/sagemath/sagetrac-mirror/commit/6b41c4af670b9e8a653e8c2e4049848e4e87d8a1)" to "[5f0c36cc73b59e64eba006ed5a5dfb51efd920bf](https://github.com/sagemath/sagetrac-mirror/commit/5f0c36cc73b59e64eba006ed5a5dfb51efd920bf)".



---

archive/issue_comments_537405.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/376932f6933c7c210dc169d5682489f454229c66\">376932f</a></td><td><code>build/bin/sage-bootstrap-python: Reject pyenv shims</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f0c36cc73b59e64eba006ed5a5dfb51efd920bf\">5f0c36c</a></td><td><code>Merge #29285</code></td></tr></table>\n",
    "created_at": "2022-01-02T02:01:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537405",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/376932f6933c7c210dc169d5682489f454229c66">376932f</a></td><td><code>build/bin/sage-bootstrap-python: Reject pyenv shims</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f0c36cc73b59e64eba006ed5a5dfb51efd920bf">5f0c36c</a></td><td><code>Merge #29285</code></td></tr></table>




---

archive/issue_comments_537406.json:
```json
{
    "body": "**Changing dependencies** from \"#33068, #30933, #29285\" to \"#33068, #30933, #29285, #32868\".",
    "created_at": "2022-01-02T02:05:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537406",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#33068, #30933, #29285" to "#33068, #30933, #29285, #32868".



---

archive/issue_comments_537407.json:
```json
{
    "body": "**Changing dependencies** from \"#33068, #30933, #29285, #32868\" to \"#33068, #30933, #29285, #32868, #33067\".",
    "created_at": "2022-01-02T02:08:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537407",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#33068, #30933, #29285, #32868" to "#33068, #30933, #29285, #32868, #33067".



---

archive/issue_comments_537408.json:
```json
{
    "body": "**Changing commit** from \"[5f0c36cc73b59e64eba006ed5a5dfb51efd920bf](https://github.com/sagemath/sagetrac-mirror/commit/5f0c36cc73b59e64eba006ed5a5dfb51efd920bf)\" to \"[af7c8d3c2237980a12b89ffad4c0cc0531662ad3](https://github.com/sagemath/sagetrac-mirror/commit/af7c8d3c2237980a12b89ffad4c0cc0531662ad3)\".",
    "created_at": "2022-01-02T02:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537408",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5f0c36cc73b59e64eba006ed5a5dfb51efd920bf](https://github.com/sagemath/sagetrac-mirror/commit/5f0c36cc73b59e64eba006ed5a5dfb51efd920bf)" to "[af7c8d3c2237980a12b89ffad4c0cc0531662ad3](https://github.com/sagemath/sagetrac-mirror/commit/af7c8d3c2237980a12b89ffad4c0cc0531662ad3)".



---

archive/issue_comments_537409.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aeca1a03015f27b74c6641cb7bbcdd9c5e82bf16\">aeca1a0</a></td><td><code>Makefile (pypi-sdists): Add sage_setup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd3dce9e076ba81febc4e8f838e1b5ca03b12459\">cd3dce9</a></td><td><code>pkgs/sage-conf_pypi/setup.py: Update directory of configured sage_conf.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c695921c3cee61a32a8d7ec9443bb4e315eb481b\">c695921</a></td><td><code>pkgs/sage-conf/sage_conf.py.in (SAGE_SPKG_WHEELS): Update so it works if SAGE_VENV != SAGE_LOCAL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cebcda3fa7e1ae0ecd0e7cbf1a0aba15bed1a010\">cebcda3</a></td><td><code>Merge tag '9.5.beta4' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0026892c983828c7925626d2bc9165967f0bebe5\">0026892</a></td><td><code>Merge tag '9.5.beta5' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a4a32384133408ef05edb4f40b9d363697d3087\">2a4a323</a></td><td><code>Merge tag '9.5.beta7' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02234ce0b51908c0dfa233da5942721428fe9f9b\">02234ce</a></td><td><code>Merge #29039</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1413d45fe041d7e4b017961d8b273b2a97ddb18\">b1413d4</a></td><td><code>build/bin/write-dockerfile.sh: Move 'ADD pkgs' earlier</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/859be3ef9e3293f63fb18d8ac2a87e16f6f2114c\">859be3e</a></td><td><code>build/bin/write-dockerfile.sh: ADD src/*.m4 files for bootstrapping</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af7c8d3c2237980a12b89ffad4c0cc0531662ad3\">af7c8d3</a></td><td><code>Merge #33067</code></td></tr></table>\n",
    "created_at": "2022-01-02T02:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537409",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aeca1a03015f27b74c6641cb7bbcdd9c5e82bf16">aeca1a0</a></td><td><code>Makefile (pypi-sdists): Add sage_setup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd3dce9e076ba81febc4e8f838e1b5ca03b12459">cd3dce9</a></td><td><code>pkgs/sage-conf_pypi/setup.py: Update directory of configured sage_conf.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c695921c3cee61a32a8d7ec9443bb4e315eb481b">c695921</a></td><td><code>pkgs/sage-conf/sage_conf.py.in (SAGE_SPKG_WHEELS): Update so it works if SAGE_VENV != SAGE_LOCAL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cebcda3fa7e1ae0ecd0e7cbf1a0aba15bed1a010">cebcda3</a></td><td><code>Merge tag '9.5.beta4' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0026892c983828c7925626d2bc9165967f0bebe5">0026892</a></td><td><code>Merge tag '9.5.beta5' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a4a32384133408ef05edb4f40b9d363697d3087">2a4a323</a></td><td><code>Merge tag '9.5.beta7' into t/29039/pip_installable_package_sage_bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02234ce0b51908c0dfa233da5942721428fe9f9b">02234ce</a></td><td><code>Merge #29039</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1413d45fe041d7e4b017961d8b273b2a97ddb18">b1413d4</a></td><td><code>build/bin/write-dockerfile.sh: Move 'ADD pkgs' earlier</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/859be3ef9e3293f63fb18d8ac2a87e16f6f2114c">859be3e</a></td><td><code>build/bin/write-dockerfile.sh: ADD src/*.m4 files for bootstrapping</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af7c8d3c2237980a12b89ffad4c0cc0531662ad3">af7c8d3</a></td><td><code>Merge #33067</code></td></tr></table>




---

archive/issue_comments_537410.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,5 +2,5 @@\n \n Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod\n \n-To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4680839663?check_suite_focus=true):\n+To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4682227249?check_suite_focus=true):\n - https://gitpod.io/#https://github.com/mkoeppe/sage/tree/t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow\n``````\n",
    "created_at": "2022-01-02T02:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537410",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,5 +2,5 @@
 
 Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod
 
-To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4680839663?check_suite_focus=true):
+To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4682227249?check_suite_focus=true):
 - https://gitpod.io/#https://github.com/mkoeppe/sage/tree/t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow
``````




---

archive/issue_comments_537411.json:
```json
{
    "body": "**Changing commit** from \"[af7c8d3c2237980a12b89ffad4c0cc0531662ad3](https://github.com/sagemath/sagetrac-mirror/commit/af7c8d3c2237980a12b89ffad4c0cc0531662ad3)\" to \"[fad8942c93702e6c098fe6b9cd2d68704b256334](https://github.com/sagemath/sagetrac-mirror/commit/fad8942c93702e6c098fe6b9cd2d68704b256334)\".",
    "created_at": "2022-01-02T02:26:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537411",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[af7c8d3c2237980a12b89ffad4c0cc0531662ad3](https://github.com/sagemath/sagetrac-mirror/commit/af7c8d3c2237980a12b89ffad4c0cc0531662ad3)" to "[fad8942c93702e6c098fe6b9cd2d68704b256334](https://github.com/sagemath/sagetrac-mirror/commit/fad8942c93702e6c098fe6b9cd2d68704b256334)".



---

archive/issue_comments_537412.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fad8942c93702e6c098fe6b9cd2d68704b256334\">fad8942</a></td><td><code>build/bin/write-dockerfile.sh: Use relative workdir 'sage' (again)</code></td></tr></table>\n",
    "created_at": "2022-01-02T02:26:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537412",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fad8942c93702e6c098fe6b9cd2d68704b256334">fad8942</a></td><td><code>build/bin/write-dockerfile.sh: Use relative workdir 'sage' (again)</code></td></tr></table>




---

archive/issue_comments_537413.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod\n \n To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4682227249?check_suite_focus=true):\n-- https://gitpod.io/#https://github.com/mkoeppe/sage/tree/t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow\n+- https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates\n``````\n",
    "created_at": "2022-01-02T04:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537413",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod
 
 To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4682227249?check_suite_focus=true):
-- https://gitpod.io/#https://github.com/mkoeppe/sage/tree/t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow
+- https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates
``````




---

archive/issue_comments_537414.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/601a3b56f66d185c3d32069149446c189bf89ea2\">601a3b5</a></td><td><code>.gitpod.yml: Remove pyenv workarounds</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1258c702dac22a428cf0d1ede65ccea35cf50d0f\">1258c70</a></td><td><code>.gitpod.yml: configure --enable-download-from-upstream-url</code></td></tr></table>\n",
    "created_at": "2022-01-02T05:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537414",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/601a3b56f66d185c3d32069149446c189bf89ea2">601a3b5</a></td><td><code>.gitpod.yml: Remove pyenv workarounds</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1258c702dac22a428cf0d1ede65ccea35cf50d0f">1258c70</a></td><td><code>.gitpod.yml: configure --enable-download-from-upstream-url</code></td></tr></table>




---

archive/issue_comments_537415.json:
```json
{
    "body": "**Changing commit** from \"[fad8942c93702e6c098fe6b9cd2d68704b256334](https://github.com/sagemath/sagetrac-mirror/commit/fad8942c93702e6c098fe6b9cd2d68704b256334)\" to \"[1258c702dac22a428cf0d1ede65ccea35cf50d0f](https://github.com/sagemath/sagetrac-mirror/commit/1258c702dac22a428cf0d1ede65ccea35cf50d0f)\".",
    "created_at": "2022-01-02T05:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537415",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fad8942c93702e6c098fe6b9cd2d68704b256334](https://github.com/sagemath/sagetrac-mirror/commit/fad8942c93702e6c098fe6b9cd2d68704b256334)" to "[1258c702dac22a428cf0d1ede65ccea35cf50d0f](https://github.com/sagemath/sagetrac-mirror/commit/1258c702dac22a428cf0d1ede65ccea35cf50d0f)".



---

archive/issue_comments_537416.json:
```json
{
    "body": "<a id='comment:19'></a>\nThis works. To be done:\n- Additional tags for the images, for example `latest` for releases, or branch/tag name (`${GITHUB_REF_NAME}` - https://docs.github.com/en/actions/learn-github-actions/environment-variables#default-environment-variables) -  suitable for `.gitpod.yml`\n- Could use `docker/.gitpod.Dockerfile` again with `COPY --from` to make the final image smaller (currently /home/gitpod/sage has the old source tree)",
    "created_at": "2022-01-02T06:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537416",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>
This works. To be done:
- Additional tags for the images, for example `latest` for releases, or branch/tag name (`${GITHUB_REF_NAME}` - https://docs.github.com/en/actions/learn-github-actions/environment-variables#default-environment-variables) -  suitable for `.gitpod.yml`
- Could use `docker/.gitpod.Dockerfile` again with `COPY --from` to make the final image smaller (currently /home/gitpod/sage has the old source tree)



---

archive/issue_comments_537417.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,5 +2,5 @@\n \n Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod\n \n-To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4682227249?check_suite_focus=true):\n+To try out:\n - https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates\n``````\n",
    "created_at": "2022-01-02T20:51:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537417",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,5 +2,5 @@
 
 Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod
 
-To try out (after the image has been built, https://github.com/mkoeppe/sage/runs/4682227249?check_suite_focus=true):
+To try out:
 - https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates
``````




---

archive/issue_comments_537418.json:
```json
{
    "body": "**Changing commit** from \"[1258c702dac22a428cf0d1ede65ccea35cf50d0f](https://github.com/sagemath/sagetrac-mirror/commit/1258c702dac22a428cf0d1ede65ccea35cf50d0f)\" to \"[fdb49a1d7865f8105c50470715368af9a8ede02d](https://github.com/sagemath/sagetrac-mirror/commit/fdb49a1d7865f8105c50470715368af9a8ede02d)\".",
    "created_at": "2022-01-02T21:42:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537418",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1258c702dac22a428cf0d1ede65ccea35cf50d0f](https://github.com/sagemath/sagetrac-mirror/commit/1258c702dac22a428cf0d1ede65ccea35cf50d0f)" to "[fdb49a1d7865f8105c50470715368af9a8ede02d](https://github.com/sagemath/sagetrac-mirror/commit/fdb49a1d7865f8105c50470715368af9a8ede02d)".



---

archive/issue_comments_537419.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdb49a1d7865f8105c50470715368af9a8ede02d\">fdb49a1</a></td><td><code>tox.ini, .github/workflows/tox*.yml: Also tag the Docker images with GITHUB_REF_NAME</code></td></tr></table>\n",
    "created_at": "2022-01-02T21:42:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537419",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdb49a1d7865f8105c50470715368af9a8ede02d">fdb49a1</a></td><td><code>tox.ini, .github/workflows/tox*.yml: Also tag the Docker images with GITHUB_REF_NAME</code></td></tr></table>




---

archive/issue_comments_537420.json:
```json
{
    "body": "**Reviewer:** https://github.com/mkoeppe/sage/runs/4686167146",
    "created_at": "2022-01-02T21:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537420",
    "user": "https://github.com/mkoeppe"
}
```

**Reviewer:** https://github.com/mkoeppe/sage/runs/4686167146



---

archive/issue_comments_537421.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab757ba44a661a0c358764d3aa40c49709f4c6cd\">ab757ba</a></td><td><code>.github/workflows/tox.yml: Fix passing of EXTRA_DOCKER_TAGS</code></td></tr></table>\n",
    "created_at": "2022-01-02T22:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537421",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab757ba44a661a0c358764d3aa40c49709f4c6cd">ab757ba</a></td><td><code>.github/workflows/tox.yml: Fix passing of EXTRA_DOCKER_TAGS</code></td></tr></table>




---

archive/issue_comments_537422.json:
```json
{
    "body": "**Changing commit** from \"[fdb49a1d7865f8105c50470715368af9a8ede02d](https://github.com/sagemath/sagetrac-mirror/commit/fdb49a1d7865f8105c50470715368af9a8ede02d)\" to \"[ab757ba44a661a0c358764d3aa40c49709f4c6cd](https://github.com/sagemath/sagetrac-mirror/commit/ab757ba44a661a0c358764d3aa40c49709f4c6cd)\".",
    "created_at": "2022-01-02T22:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537422",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fdb49a1d7865f8105c50470715368af9a8ede02d](https://github.com/sagemath/sagetrac-mirror/commit/fdb49a1d7865f8105c50470715368af9a8ede02d)" to "[ab757ba44a661a0c358764d3aa40c49709f4c6cd](https://github.com/sagemath/sagetrac-mirror/commit/ab757ba44a661a0c358764d3aa40c49709f4c6cd)".



---

archive/issue_comments_537423.json:
```json
{
    "body": "**Changing commit** from \"[ab757ba44a661a0c358764d3aa40c49709f4c6cd](https://github.com/sagemath/sagetrac-mirror/commit/ab757ba44a661a0c358764d3aa40c49709f4c6cd)\" to \"[96528ebee43305123a813b340ad3e027ba2f8712](https://github.com/sagemath/sagetrac-mirror/commit/96528ebee43305123a813b340ad3e027ba2f8712)\".",
    "created_at": "2022-01-02T23:51:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537423",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ab757ba44a661a0c358764d3aa40c49709f4c6cd](https://github.com/sagemath/sagetrac-mirror/commit/ab757ba44a661a0c358764d3aa40c49709f4c6cd)" to "[96528ebee43305123a813b340ad3e027ba2f8712](https://github.com/sagemath/sagetrac-mirror/commit/96528ebee43305123a813b340ad3e027ba2f8712)".



---

archive/issue_comments_537424.json:
```json
{
    "body": "<a id='comment:24'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96528ebee43305123a813b340ad3e027ba2f8712\">96528eb</a></td><td><code>.github/workflows/tox*.yml: Tag docker images 'latest' or 'dev' when building a release tag</code></td></tr></table>\n",
    "created_at": "2022-01-02T23:51:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96528ebee43305123a813b340ad3e027ba2f8712">96528eb</a></td><td><code>.github/workflows/tox*.yml: Tag docker images 'latest' or 'dev' when building a release tag</code></td></tr></table>




---

archive/issue_comments_537425.json:
```json
{
    "body": "**Changing reviewer** from \"https://github.com/mkoeppe/sage/runs/4686167146\" to \"https://github.com/mkoeppe/sage/runs/4686610379\".",
    "created_at": "2022-01-03T01:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537425",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "https://github.com/mkoeppe/sage/runs/4686167146" to "https://github.com/mkoeppe/sage/runs/4686610379".



---

archive/issue_comments_537426.json:
```json
{
    "body": "**Changing reviewer** from \"https://github.com/mkoeppe/sage/runs/4686610379\" to \"https://github.com/mkoeppe/sage/runs/4687073955\".",
    "created_at": "2022-01-03T01:37:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537426",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "https://github.com/mkoeppe/sage/runs/4686610379" to "https://github.com/mkoeppe/sage/runs/4687073955".



---

archive/issue_comments_537427.json:
```json
{
    "body": "**Changing reviewer** from \"https://github.com/mkoeppe/sage/runs/4687073955\" to \"https://github.com/mkoeppe/sage/runs/4687310789\".",
    "created_at": "2022-01-03T02:28:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537427",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "https://github.com/mkoeppe/sage/runs/4687073955" to "https://github.com/mkoeppe/sage/runs/4687310789".



---

archive/issue_comments_537428.json:
```json
{
    "body": "**Changing reviewer** from \"https://github.com/mkoeppe/sage/runs/4687310789\" to \"https://github.com/mkoeppe/sage/runs/4687310728\".",
    "created_at": "2022-01-03T02:30:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537428",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "https://github.com/mkoeppe/sage/runs/4687310789" to "https://github.com/mkoeppe/sage/runs/4687310728".



---

archive/issue_comments_537429.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d1dc0fa92a7192bee0bb56e9ea13944da97007f\">5d1dc0f</a></td><td><code>.gitpod.yml: Use tag :dev</code></td></tr></table>\n",
    "created_at": "2022-01-03T05:36:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537429",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d1dc0fa92a7192bee0bb56e9ea13944da97007f">5d1dc0f</a></td><td><code>.gitpod.yml: Use tag :dev</code></td></tr></table>




---

archive/issue_comments_537430.json:
```json
{
    "body": "**Changing commit** from \"[96528ebee43305123a813b340ad3e027ba2f8712](https://github.com/sagemath/sagetrac-mirror/commit/96528ebee43305123a813b340ad3e027ba2f8712)\" to \"[5d1dc0fa92a7192bee0bb56e9ea13944da97007f](https://github.com/sagemath/sagetrac-mirror/commit/5d1dc0fa92a7192bee0bb56e9ea13944da97007f)\".",
    "created_at": "2022-01-03T05:36:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537430",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[96528ebee43305123a813b340ad3e027ba2f8712](https://github.com/sagemath/sagetrac-mirror/commit/96528ebee43305123a813b340ad3e027ba2f8712)" to "[5d1dc0fa92a7192bee0bb56e9ea13944da97007f](https://github.com/sagemath/sagetrac-mirror/commit/5d1dc0fa92a7192bee0bb56e9ea13944da97007f)".



---

archive/issue_comments_537431.json:
```json
{
    "body": "**Work_Issues:** Change .gitpod.yml to use sagemath instead of mkoeppe",
    "created_at": "2022-01-03T05:46:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537431",
    "user": "https://github.com/mkoeppe"
}
```

**Work_Issues:** Change .gitpod.yml to use sagemath instead of mkoeppe



---

archive/issue_events_296864.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-03T05:46:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296864"
}
```



---

archive/issue_comments_537432.json:
```json
{
    "body": "<a id='comment:31'></a>\nAlso the configuration of VS Code should be improved. It seems to start up using the wrong interpreter (not `venv/bin/python3`), and also one needs to manually select the right Jupyter kernel. \n\nThe scipy folks have some good documentation and configuration (https://scipy.github.io/devdocs/dev/contributor/quickstart_gitpod.html), perhaps we can lift something from there.",
    "created_at": "2022-01-03T07:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537432",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>
Also the configuration of VS Code should be improved. It seems to start up using the wrong interpreter (not `venv/bin/python3`), and also one needs to manually select the right Jupyter kernel. 

The scipy folks have some good documentation and configuration (https://scipy.github.io/devdocs/dev/contributor/quickstart_gitpod.html), perhaps we can lift something from there.



---

archive/issue_comments_537433.json:
```json
{
    "body": "<a id='comment:32'></a>\nIs the prebuild working for this branch?\n\nHow can one work with branches that update sage packages? With #32749 one could trigger a rebuild of the docker image (and thus of the system packages) using the `#imagebuild` context. Can something like this also be implemented here? For example, take the github action build docker as base, and then re-install system or python packages on top of this if they have newer versions?\n\nFor the VS integration, #30677 is closed but not yet merged into develop.",
    "created_at": "2022-01-03T12:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537433",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:32'></a>
Is the prebuild working for this branch?

How can one work with branches that update sage packages? With #32749 one could trigger a rebuild of the docker image (and thus of the system packages) using the `#imagebuild` context. Can something like this also be implemented here? For example, take the github action build docker as base, and then re-install system or python packages on top of this if they have newer versions?

For the VS integration, #30677 is closed but not yet merged into develop.



---

archive/issue_comments_537434.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [gh-tobiasdiez](#comment%3A32):\n> Is the prebuild working for this branch?\n\n\nI've just merged #33071 into the branch https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates to try this out.\n\n> How can one work with branches that update sage packages? \n\n\nNothing special, `make` just rebuilds what needs rebuilding.",
    "created_at": "2022-01-03T17:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537434",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>
Replying to [gh-tobiasdiez](#comment%3A32):
> Is the prebuild working for this branch?


I've just merged #33071 into the branch https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates to try this out.

> How can one work with branches that update sage packages? 


Nothing special, `make` just rebuilds what needs rebuilding.



---

archive/issue_comments_537435.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [gh-tobiasdiez](#comment%3A32):\n> For the VS integration, #30677 is closed but not yet merged into develop.\n\n\nI forgot to say that the branch https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates already contains #30677 and other updates",
    "created_at": "2022-01-03T17:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537435",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>
Replying to [gh-tobiasdiez](#comment%3A32):
> For the VS integration, #30677 is closed but not yet merged into develop.


I forgot to say that the branch https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates already contains #30677 and other updates



---

archive/issue_comments_537436.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [mkoeppe](#comment%3A33):\n> Replying to [gh-tobiasdiez](#comment%3A32):\n> > Is the prebuild working for this branch?\n\n> \n> I've just merged #33071 into the branch https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates to try this out.\n> \n> > How can one work with branches that update sage packages? \n\n> \n> Nothing special, `make` just rebuilds what needs rebuilding.\n\n\nSo this would then be done as part of the prebuild?",
    "created_at": "2022-01-03T17:44:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537436",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:35'></a>
Replying to [mkoeppe](#comment%3A33):
> Replying to [gh-tobiasdiez](#comment%3A32):
> > Is the prebuild working for this branch?

> 
> I've just merged #33071 into the branch https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates to try this out.
> 
> > How can one work with branches that update sage packages? 

> 
> Nothing special, `make` just rebuilds what needs rebuilding.


So this would then be done as part of the prebuild?



---

archive/issue_comments_537437.json:
```json
{
    "body": "<a id='comment:36'></a>\nYes, I think so",
    "created_at": "2022-01-03T18:14:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537437",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>
Yes, I think so



---

archive/issue_comments_537438.json:
```json
{
    "body": "<a id='comment:37'></a>\nLooks like I'll have to add some configuration so that it does prebuilds on all branches",
    "created_at": "2022-01-03T18:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537438",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:37'></a>
Looks like I'll have to add some configuration so that it does prebuilds on all branches



---

archive/issue_comments_537439.json:
```json
{
    "body": "<a id='comment:38'></a>\nI created a \"project\" and now it looks like the prebuild triggered by a push is running - https://gitpod.io/projects/sage",
    "created_at": "2022-01-03T18:24:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537439",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>
I created a "project" and now it looks like the prebuild triggered by a push is running - https://gitpod.io/projects/sage



---

archive/issue_comments_537440.json:
```json
{
    "body": "**Changing commit** from \"[5d1dc0fa92a7192bee0bb56e9ea13944da97007f](https://github.com/sagemath/sagetrac-mirror/commit/5d1dc0fa92a7192bee0bb56e9ea13944da97007f)\" to \"[3e28e13afa9d3a61aceb4d6b3c3d66451f47133f](https://github.com/sagemath/sagetrac-mirror/commit/3e28e13afa9d3a61aceb4d6b3c3d66451f47133f)\".",
    "created_at": "2022-01-03T18:25:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537440",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5d1dc0fa92a7192bee0bb56e9ea13944da97007f](https://github.com/sagemath/sagetrac-mirror/commit/5d1dc0fa92a7192bee0bb56e9ea13944da97007f)" to "[3e28e13afa9d3a61aceb4d6b3c3d66451f47133f](https://github.com/sagemath/sagetrac-mirror/commit/3e28e13afa9d3a61aceb4d6b3c3d66451f47133f)".



---

archive/issue_comments_537441.json:
```json
{
    "body": "<a id='comment:39'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e28e13afa9d3a61aceb4d6b3c3d66451f47133f\">3e28e13</a></td><td><code>.gitpod.yml: Set github prebuild options to true</code></td></tr></table>\n",
    "created_at": "2022-01-03T18:25:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537441",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e28e13afa9d3a61aceb4d6b3c3d66451f47133f">3e28e13</a></td><td><code>.gitpod.yml: Set github prebuild options to true</code></td></tr></table>




---

archive/issue_comments_537442.json:
```json
{
    "body": "<a id='comment:40'></a>\nBefore the push I had merged #32968 with the Sphinx update; and the prebuild has just installed the upgraded package",
    "created_at": "2022-01-03T18:31:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537442",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:40'></a>
Before the push I had merged #32968 with the Sphinx update; and the prebuild has just installed the upgraded package



---

archive/issue_comments_537443.json:
```json
{
    "body": "<a id='comment:41'></a>\nReplying to [mkoeppe](#comment%3A40):\n> Before the push I had merged #32968 with the Sphinx update; and the prebuild has just installed the upgraded package\n\n\nThat's very nice!",
    "created_at": "2022-01-03T18:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537443",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:41'></a>
Replying to [mkoeppe](#comment%3A40):
> Before the push I had merged #32968 with the Sphinx update; and the prebuild has just installed the upgraded package


That's very nice!



---

archive/issue_comments_537444.json:
```json
{
    "body": "<a id='comment:42'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49575f56f74343fb81b401a6077a3f05bb037c61\">49575f5</a></td><td><code>.gitpod.yml: Switch to image ghcr.io/sagemath/sage/sage-docker-gitpod-standard-with-targets:dev</code></td></tr></table>\n",
    "created_at": "2022-01-03T18:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537444",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49575f56f74343fb81b401a6077a3f05bb037c61">49575f5</a></td><td><code>.gitpod.yml: Switch to image ghcr.io/sagemath/sage/sage-docker-gitpod-standard-with-targets:dev</code></td></tr></table>




---

archive/issue_comments_537445.json:
```json
{
    "body": "**Changing commit** from \"[3e28e13afa9d3a61aceb4d6b3c3d66451f47133f](https://github.com/sagemath/sagetrac-mirror/commit/3e28e13afa9d3a61aceb4d6b3c3d66451f47133f)\" to \"[49575f56f74343fb81b401a6077a3f05bb037c61](https://github.com/sagemath/sagetrac-mirror/commit/49575f56f74343fb81b401a6077a3f05bb037c61)\".",
    "created_at": "2022-01-03T18:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537445",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3e28e13afa9d3a61aceb4d6b3c3d66451f47133f](https://github.com/sagemath/sagetrac-mirror/commit/3e28e13afa9d3a61aceb4d6b3c3d66451f47133f)" to "[49575f56f74343fb81b401a6077a3f05bb037c61](https://github.com/sagemath/sagetrac-mirror/commit/49575f56f74343fb81b401a6077a3f05bb037c61)".



---

archive/issue_comments_537446.json:
```json
{
    "body": "**Changing work_issues** from \"Change .gitpod.yml to use sagemath instead of mkoeppe\" to \"\".",
    "created_at": "2022-01-03T18:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537446",
    "user": "https://github.com/mkoeppe"
}
```

**Changing work_issues** from "Change .gitpod.yml to use sagemath instead of mkoeppe" to "".



---

archive/issue_comments_537447.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,3 +4,6 @@\n \n To try out:\n - https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates\n+\n+Follow-up: #33113 gitpod usability improvements\n+\n``````\n",
    "created_at": "2022-01-03T18:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537447",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,3 +4,6 @@
 
 To try out:
 - https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates
+
+Follow-up: #33113 gitpod usability improvements
+
``````




---

archive/issue_comments_537448.json:
```json
{
    "body": "<a id='comment:44'></a>\nThe prebuild was just killed because of the 35m timeout. \nWhat's the best choice of timeout according to your experiments?",
    "created_at": "2022-01-03T19:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537448",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:44'></a>
The prebuild was just killed because of the 35m timeout. 
What's the best choice of timeout according to your experiments?



---

archive/issue_comments_537449.json:
```json
{
    "body": "<a id='comment:45'></a>\nIf its really the timeout that killed the prebuild (in which the prebuild would be green and be used for the next workspace, but maybe doesn't contain all packages) then you can go to 50min. Maybe a bit less since the docker image is quite big so this part may take some time. But essentially you have to calculate 60min - bootstrap and config (2-3min) - docker init and copying (?? min).\n\nHowever, for me the prebuild often timed out after 1h (then its shown red in the project view). The only solution I've found for this is not using symlinks into /home/.",
    "created_at": "2022-01-03T19:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537449",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:45'></a>
If its really the timeout that killed the prebuild (in which the prebuild would be green and be used for the next workspace, but maybe doesn't contain all packages) then you can go to 50min. Maybe a bit less since the docker image is quite big so this part may take some time. But essentially you have to calculate 60min - bootstrap and config (2-3min) - docker init and copying (?? min).

However, for me the prebuild often timed out after 1h (then its shown red in the project view). The only solution I've found for this is not using symlinks into /home/.



---

archive/issue_comments_537450.json:
```json
{
    "body": "<a id='comment:46'></a>\nhttps://gitpod.io/projects/sage/e8780c03-b8b8-4810-a772-d4cc2994b6bf shows\n\n```\n[sagelib-9.5.beta9] installing. Log file: /workspace/sage/logs/pkgs/sagelib-9.5.beta9.log\n  [pytest] successfully installed.\n  [sphinx-4.3.1] successfully installed.\nmake[1]: *** [Makefile:39: all-build] Terminated\nmake: *** [Makefile:16: build] Terminated\nexit\n```\n\nbut it is still claims \"RUNNING: Prebuild in progress\"",
    "created_at": "2022-01-03T19:13:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537450",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>
https://gitpod.io/projects/sage/e8780c03-b8b8-4810-a772-d4cc2994b6bf shows

```
[sagelib-9.5.beta9] installing. Log file: /workspace/sage/logs/pkgs/sagelib-9.5.beta9.log
  [pytest] successfully installed.
  [sphinx-4.3.1] successfully installed.
make[1]: *** [Makefile:39: all-build] Terminated
make: *** [Makefile:16: build] Terminated
exit
```

but it is still claims "RUNNING: Prebuild in progress"



---

archive/issue_comments_537451.json:
```json
{
    "body": "<a id='comment:47'></a>\nHowever, https://gitpod.io/projects/sage/prebuilds shows READY.",
    "created_at": "2022-01-03T19:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537451",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>
However, https://gitpod.io/projects/sage/prebuilds shows READY.



---

archive/issue_comments_537452.json:
```json
{
    "body": "<a id='comment:48'></a>\n\n```\n\n\ud83e\udd19 This task ran as a workspace prebuild\n\ud83c\udf89 Well done on saving 37 minutes\n```",
    "created_at": "2022-01-03T19:14:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537452",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:48'></a>

```

 This task ran as a workspace prebuild
 Well done on saving 37 minutes
```



---

archive/issue_comments_537453.json:
```json
{
    "body": "<a id='comment:49'></a>\nA few more points:\n- please use the recent version of gitpod.yml from https://github.com/tobiasdiez/sagetrac-mirror/blob/develop/.gitpod.yml (the ssh stuff and num threads = 8)\n- `--prefix=$HOME/sage-local` in gitpod.yml should probably be `/workspace/sage-local` or a few lines above `$HOME` should be used?\n- probably 8 parallel tasks are fine. gitpod gives 6 (or 7?) vCPUs to users.",
    "created_at": "2022-01-03T19:21:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537453",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:49'></a>
A few more points:
- please use the recent version of gitpod.yml from https://github.com/tobiasdiez/sagetrac-mirror/blob/develop/.gitpod.yml (the ssh stuff and num threads = 8)
- `--prefix=$HOME/sage-local` in gitpod.yml should probably be `/workspace/sage-local` or a few lines above `$HOME` should be used?
- probably 8 parallel tasks are fine. gitpod gives 6 (or 7?) vCPUs to users.



---

archive/issue_comments_537454.json:
```json
{
    "body": "<a id='comment:50'></a>\nReplying to [mkoeppe](#comment%3A48):\n> \n> ```\n> \n> \ud83e\udd19 This task ran as a workspace prebuild\n> \ud83c\udf89 Well done on saving 37 minutes\n> ```\n\n\nNice, then you can go to 50min indeed.",
    "created_at": "2022-01-03T19:21:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537454",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:50'></a>
Replying to [mkoeppe](#comment%3A48):
> 
> ```
> 
>  This task ran as a workspace prebuild
>  Well done on saving 37 minutes
> ```


Nice, then you can go to 50min indeed.



---

archive/issue_comments_537455.json:
```json
{
    "body": "**Changing commit** from \"[49575f56f74343fb81b401a6077a3f05bb037c61](https://github.com/sagemath/sagetrac-mirror/commit/49575f56f74343fb81b401a6077a3f05bb037c61)\" to \"[e7d4e966d8d25281befe14c5b66bae991c4736e3](https://github.com/sagemath/sagetrac-mirror/commit/e7d4e966d8d25281befe14c5b66bae991c4736e3)\".",
    "created_at": "2022-01-03T19:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537455",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[49575f56f74343fb81b401a6077a3f05bb037c61](https://github.com/sagemath/sagetrac-mirror/commit/49575f56f74343fb81b401a6077a3f05bb037c61)" to "[e7d4e966d8d25281befe14c5b66bae991c4736e3](https://github.com/sagemath/sagetrac-mirror/commit/e7d4e966d8d25281befe14c5b66bae991c4736e3)".



---

archive/issue_comments_537456.json:
```json
{
    "body": "<a id='comment:51'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e7d4e966d8d25281befe14c5b66bae991c4736e3\">e7d4e96</a></td><td><code>.gitpod.yml: Increase timeout for make in prebuild, increase parallelism</code></td></tr></table>\n",
    "created_at": "2022-01-03T19:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537456",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e7d4e966d8d25281befe14c5b66bae991c4736e3">e7d4e96</a></td><td><code>.gitpod.yml: Increase timeout for make in prebuild, increase parallelism</code></td></tr></table>




---

archive/issue_comments_537457.json:
```json
{
    "body": "<a id='comment:52'></a>\nPresumably the `before` script should try to resume the build in case the prebuild timed out.",
    "created_at": "2022-01-03T19:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537457",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:52'></a>
Presumably the `before` script should try to resume the build in case the prebuild timed out.



---

archive/issue_comments_537458.json:
```json
{
    "body": "<a id='comment:53'></a>\nI agree. But `init` is called after `before` during the prebuild, and I couldn't find a way to detect if one is in a prebuild or not...",
    "created_at": "2022-01-03T19:34:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537458",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:53'></a>
I agree. But `init` is called after `before` during the prebuild, and I couldn't find a way to detect if one is in a prebuild or not...



---

archive/issue_comments_537459.json:
```json
{
    "body": "<a id='comment:54'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdb332d2a52db9f63fc54960d029a5ad9c529a61\">fdb332d</a></td><td><code>.gitpod.yml: Run 'make' again in 'before' task if prebuild 'make' timed out</code></td></tr></table>\n",
    "created_at": "2022-01-03T19:43:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537459",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdb332d2a52db9f63fc54960d029a5ad9c529a61">fdb332d</a></td><td><code>.gitpod.yml: Run 'make' again in 'before' task if prebuild 'make' timed out</code></td></tr></table>




---

archive/issue_comments_537460.json:
```json
{
    "body": "**Changing commit** from \"[e7d4e966d8d25281befe14c5b66bae991c4736e3](https://github.com/sagemath/sagetrac-mirror/commit/e7d4e966d8d25281befe14c5b66bae991c4736e3)\" to \"[fdb332d2a52db9f63fc54960d029a5ad9c529a61](https://github.com/sagemath/sagetrac-mirror/commit/fdb332d2a52db9f63fc54960d029a5ad9c529a61)\".",
    "created_at": "2022-01-03T19:43:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537460",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e7d4e966d8d25281befe14c5b66bae991c4736e3](https://github.com/sagemath/sagetrac-mirror/commit/e7d4e966d8d25281befe14c5b66bae991c4736e3)" to "[fdb332d2a52db9f63fc54960d029a5ad9c529a61](https://github.com/sagemath/sagetrac-mirror/commit/fdb332d2a52db9f63fc54960d029a5ad9c529a61)".



---

archive/issue_comments_537461.json:
```json
{
    "body": "**Changing commit** from \"[fdb332d2a52db9f63fc54960d029a5ad9c529a61](https://github.com/sagemath/sagetrac-mirror/commit/fdb332d2a52db9f63fc54960d029a5ad9c529a61)\" to \"[aaa97778417b2142d9f3cf83c29dce9d38d1853e](https://github.com/sagemath/sagetrac-mirror/commit/aaa97778417b2142d9f3cf83c29dce9d38d1853e)\".",
    "created_at": "2022-01-03T19:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537461",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fdb332d2a52db9f63fc54960d029a5ad9c529a61](https://github.com/sagemath/sagetrac-mirror/commit/fdb332d2a52db9f63fc54960d029a5ad9c529a61)" to "[aaa97778417b2142d9f3cf83c29dce9d38d1853e](https://github.com/sagemath/sagetrac-mirror/commit/aaa97778417b2142d9f3cf83c29dce9d38d1853e)".



---

archive/issue_comments_537462.json:
```json
{
    "body": "<a id='comment:55'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aaa97778417b2142d9f3cf83c29dce9d38d1853e\">aaa9777</a></td><td><code>.gitpod.yml: Use SAGE_NUM_THREADS=8</code></td></tr></table>\n",
    "created_at": "2022-01-03T19:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537462",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aaa97778417b2142d9f3cf83c29dce9d38d1853e">aaa9777</a></td><td><code>.gitpod.yml: Use SAGE_NUM_THREADS=8</code></td></tr></table>




---

archive/issue_comments_537463.json:
```json
{
    "body": "<a id='comment:56'></a>\nReplying to [gh-tobiasdiez](#comment%3A49):\n> - please use the recent version of gitpod.yml from https://github.com/tobiasdiez/sagetrac-mirror/blob/develop/.gitpod.yml (the ssh stuff and num threads = 8)\n\n\nI've updated it - the ssh stuff was already same",
    "created_at": "2022-01-03T19:56:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537463",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:56'></a>
Replying to [gh-tobiasdiez](#comment%3A49):
> - please use the recent version of gitpod.yml from https://github.com/tobiasdiez/sagetrac-mirror/blob/develop/.gitpod.yml (the ssh stuff and num threads = 8)


I've updated it - the ssh stuff was already same



---

archive/issue_comments_537464.json:
```json
{
    "body": "**Changing commit** from \"[aaa97778417b2142d9f3cf83c29dce9d38d1853e](https://github.com/sagemath/sagetrac-mirror/commit/aaa97778417b2142d9f3cf83c29dce9d38d1853e)\" to \"[87900a7d0188247be6d0c6db7b87349759621ca3](https://github.com/sagemath/sagetrac-mirror/commit/87900a7d0188247be6d0c6db7b87349759621ca3)\".",
    "created_at": "2022-01-03T20:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537464",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[aaa97778417b2142d9f3cf83c29dce9d38d1853e](https://github.com/sagemath/sagetrac-mirror/commit/aaa97778417b2142d9f3cf83c29dce9d38d1853e)" to "[87900a7d0188247be6d0c6db7b87349759621ca3](https://github.com/sagemath/sagetrac-mirror/commit/87900a7d0188247be6d0c6db7b87349759621ca3)".



---

archive/issue_comments_537465.json:
```json
{
    "body": "<a id='comment:57'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87900a7d0188247be6d0c6db7b87349759621ca3\">87900a7</a></td><td><code>.gitpod.yml: Refer to /home/gitpod as /Users/mkoeppe</code></td></tr></table>\n",
    "created_at": "2022-01-03T20:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537465",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87900a7d0188247be6d0c6db7b87349759621ca3">87900a7</a></td><td><code>.gitpod.yml: Refer to /home/gitpod as /Users/mkoeppe</code></td></tr></table>




---

archive/issue_comments_537466.json:
```json
{
    "body": "<a id='comment:58'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0864c6ec3e00d24566b586472ffb88e1471a2e30\">0864c6e</a></td><td><code>.github/workflows/tox*.yml: Push stable releases also to Docker tag 'dev'</code></td></tr></table>\n",
    "created_at": "2022-01-03T20:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537466",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0864c6ec3e00d24566b586472ffb88e1471a2e30">0864c6e</a></td><td><code>.github/workflows/tox*.yml: Push stable releases also to Docker tag 'dev'</code></td></tr></table>




---

archive/issue_comments_537467.json:
```json
{
    "body": "**Changing commit** from \"[87900a7d0188247be6d0c6db7b87349759621ca3](https://github.com/sagemath/sagetrac-mirror/commit/87900a7d0188247be6d0c6db7b87349759621ca3)\" to \"[0864c6ec3e00d24566b586472ffb88e1471a2e30](https://github.com/sagemath/sagetrac-mirror/commit/0864c6ec3e00d24566b586472ffb88e1471a2e30)\".",
    "created_at": "2022-01-03T20:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537467",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[87900a7d0188247be6d0c6db7b87349759621ca3](https://github.com/sagemath/sagetrac-mirror/commit/87900a7d0188247be6d0c6db7b87349759621ca3)" to "[0864c6ec3e00d24566b586472ffb88e1471a2e30](https://github.com/sagemath/sagetrac-mirror/commit/0864c6ec3e00d24566b586472ffb88e1471a2e30)".



---

archive/issue_comments_537468.json:
```json
{
    "body": "<a id='comment:59'></a>\nhttps://gitpod.io/projects/sage/134676a9-2a0e-429a-816d-68ad30441f58\n\n```\n[sphinx-4.3.1] installing. Log file: /workspace/sage/logs/pkgs/sphinx-4.3.1.log\n[sagelib-9.5.beta9] installing. Log file: /workspace/sage/logs/pkgs/sagelib-9.5.beta9.log\n  [pytest] successfully installed.\n  [sphinx-4.3.1] successfully installed.\n  [sagelib-9.5.beta9] successfully installed.\nmake --no-print-directory sage_docbuild-SAGE_VENV-no-deps\n[sage_docbuild-9.5.beta9] installing. Log file: /workspace/sage/logs/pkgs/sage_docbuild-9.5.beta9.log\n  [sage_docbuild-9.5.beta9] successfully installed.\nmake[2]: Leaving directory '/workspace/sage/build/make'\n\nreal    31m8.684s\nuser    101m44.392s\nsys     3m47.093s\nSAGE_CHECK=warn, so scanning the log files. This may take a few seconds.\nSage build/upgrade complete!\nmake[1]: Leaving directory '/workspace/sage'\nexit\n\n\ud83e\udd19 This task ran as a workspace prebuild\n\ud83c\udf89 Well done on saving 34 minutes\n```",
    "created_at": "2022-01-03T20:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537468",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:59'></a>
https://gitpod.io/projects/sage/134676a9-2a0e-429a-816d-68ad30441f58

```
[sphinx-4.3.1] installing. Log file: /workspace/sage/logs/pkgs/sphinx-4.3.1.log
[sagelib-9.5.beta9] installing. Log file: /workspace/sage/logs/pkgs/sagelib-9.5.beta9.log
  [pytest] successfully installed.
  [sphinx-4.3.1] successfully installed.
  [sagelib-9.5.beta9] successfully installed.
make --no-print-directory sage_docbuild-SAGE_VENV-no-deps
[sage_docbuild-9.5.beta9] installing. Log file: /workspace/sage/logs/pkgs/sage_docbuild-9.5.beta9.log
  [sage_docbuild-9.5.beta9] successfully installed.
make[2]: Leaving directory '/workspace/sage/build/make'

real    31m8.684s
user    101m44.392s
sys     3m47.093s
SAGE_CHECK=warn, so scanning the log files. This may take a few seconds.
Sage build/upgrade complete!
make[1]: Leaving directory '/workspace/sage'
exit

 This task ran as a workspace prebuild
 Well done on saving 34 minutes
```



---

archive/issue_comments_537469.json:
```json
{
    "body": "<a id='comment:60'></a>\nReplying to [git](#comment%3A54):\n> Branch pushed to git repo; I updated commit sha1. **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdb332d2a52db9f63fc54960d029a5ad9c529a61\">fdb332d</a></td><td><code>.gitpod.yml: Run 'make' again in 'before' task if prebuild 'make' timed out</code></td></tr></table>\n\n\nThis worked but for some reason the Sphinx package installation was repeated in this step. It's fast but I'll try if refreshing the timestamps of the install records will avoid it.",
    "created_at": "2022-01-03T22:52:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537469",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:60'></a>
Replying to [git](#comment%3A54):
> Branch pushed to git repo; I updated commit sha1. **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdb332d2a52db9f63fc54960d029a5ad9c529a61">fdb332d</a></td><td><code>.gitpod.yml: Run 'make' again in 'before' task if prebuild 'make' timed out</code></td></tr></table>


This worked but for some reason the Sphinx package installation was repeated in this step. It's fast but I'll try if refreshing the timestamps of the install records will avoid it.



---

archive/issue_comments_537470.json:
```json
{
    "body": "<a id='comment:61'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36e0c546caed4bd77400317118b3345ae86b8cc5\">36e0c54</a></td><td><code>.gitpod.yml (before): Set timestamps of installation records to same mtime</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9fa0152e86c3631ae69cb6d7ad75ed133e93bd6\">c9fa015</a></td><td><code>.gitpod.yml: Use /workspace/sage/local as physical location of SAGE_LOCAL</code></td></tr></table>\n",
    "created_at": "2022-01-04T00:15:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537470",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:61'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36e0c546caed4bd77400317118b3345ae86b8cc5">36e0c54</a></td><td><code>.gitpod.yml (before): Set timestamps of installation records to same mtime</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9fa0152e86c3631ae69cb6d7ad75ed133e93bd6">c9fa015</a></td><td><code>.gitpod.yml: Use /workspace/sage/local as physical location of SAGE_LOCAL</code></td></tr></table>




---

archive/issue_comments_537471.json:
```json
{
    "body": "**Changing commit** from \"[0864c6ec3e00d24566b586472ffb88e1471a2e30](https://github.com/sagemath/sagetrac-mirror/commit/0864c6ec3e00d24566b586472ffb88e1471a2e30)\" to \"[c9fa0152e86c3631ae69cb6d7ad75ed133e93bd6](https://github.com/sagemath/sagetrac-mirror/commit/c9fa0152e86c3631ae69cb6d7ad75ed133e93bd6)\".",
    "created_at": "2022-01-04T00:15:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537471",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0864c6ec3e00d24566b586472ffb88e1471a2e30](https://github.com/sagemath/sagetrac-mirror/commit/0864c6ec3e00d24566b586472ffb88e1471a2e30)" to "[c9fa0152e86c3631ae69cb6d7ad75ed133e93bd6](https://github.com/sagemath/sagetrac-mirror/commit/c9fa0152e86c3631ae69cb6d7ad75ed133e93bd6)".



---

archive/issue_comments_537472.json:
```json
{
    "body": "<a id='comment:62'></a>\nThere are some weird synchronization issues on the server side - it seems that if one creates a workspace right after a prebuild has completed, it can happen that it does not use the prebuild.",
    "created_at": "2022-01-04T01:10:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537472",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:62'></a>
There are some weird synchronization issues on the server side - it seems that if one creates a workspace right after a prebuild has completed, it can happen that it does not use the prebuild.



---

archive/issue_comments_537473.json:
```json
{
    "body": "**Changing commit** from \"[c9fa0152e86c3631ae69cb6d7ad75ed133e93bd6](https://github.com/sagemath/sagetrac-mirror/commit/c9fa0152e86c3631ae69cb6d7ad75ed133e93bd6)\" to \"[38dafc60837e3de5455e24e6913150791b05e509](https://github.com/sagemath/sagetrac-mirror/commit/38dafc60837e3de5455e24e6913150791b05e509)\".",
    "created_at": "2022-01-04T01:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537473",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c9fa0152e86c3631ae69cb6d7ad75ed133e93bd6](https://github.com/sagemath/sagetrac-mirror/commit/c9fa0152e86c3631ae69cb6d7ad75ed133e93bd6)" to "[38dafc60837e3de5455e24e6913150791b05e509](https://github.com/sagemath/sagetrac-mirror/commit/38dafc60837e3de5455e24e6913150791b05e509)".



---

archive/issue_comments_537474.json:
```json
{
    "body": "<a id='comment:63'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38dafc60837e3de5455e24e6913150791b05e509\">38dafc6</a></td><td><code>.gitpod.yml (before): Refer to /workspace/sage/local by full path</code></td></tr></table>\n",
    "created_at": "2022-01-04T01:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537474",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:63'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38dafc60837e3de5455e24e6913150791b05e509">38dafc6</a></td><td><code>.gitpod.yml (before): Refer to /workspace/sage/local by full path</code></td></tr></table>




---

archive/issue_comments_537475.json:
```json
{
    "body": "<a id='comment:64'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6be067e2c7210f5f04e0903a5e45a101461da63\">e6be067</a></td><td><code>.gitpod.yml (init): Make sure to remove the directory /home/gitpod/sage-local</code></td></tr></table>\n",
    "created_at": "2022-01-04T01:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537475",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6be067e2c7210f5f04e0903a5e45a101461da63">e6be067</a></td><td><code>.gitpod.yml (init): Make sure to remove the directory /home/gitpod/sage-local</code></td></tr></table>




---

archive/issue_comments_537476.json:
```json
{
    "body": "**Changing commit** from \"[38dafc60837e3de5455e24e6913150791b05e509](https://github.com/sagemath/sagetrac-mirror/commit/38dafc60837e3de5455e24e6913150791b05e509)\" to \"[e6be067e2c7210f5f04e0903a5e45a101461da63](https://github.com/sagemath/sagetrac-mirror/commit/e6be067e2c7210f5f04e0903a5e45a101461da63)\".",
    "created_at": "2022-01-04T01:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537476",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[38dafc60837e3de5455e24e6913150791b05e509](https://github.com/sagemath/sagetrac-mirror/commit/38dafc60837e3de5455e24e6913150791b05e509)" to "[e6be067e2c7210f5f04e0903a5e45a101461da63](https://github.com/sagemath/sagetrac-mirror/commit/e6be067e2c7210f5f04e0903a5e45a101461da63)".



---

archive/issue_comments_537477.json:
```json
{
    "body": "**Changing commit** from \"[e6be067e2c7210f5f04e0903a5e45a101461da63](https://github.com/sagemath/sagetrac-mirror/commit/e6be067e2c7210f5f04e0903a5e45a101461da63)\" to \"[cdcf2acb4e53644963484644e2c0e244f28d36b1](https://github.com/sagemath/sagetrac-mirror/commit/cdcf2acb4e53644963484644e2c0e244f28d36b1)\".",
    "created_at": "2022-01-04T06:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537477",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e6be067e2c7210f5f04e0903a5e45a101461da63](https://github.com/sagemath/sagetrac-mirror/commit/e6be067e2c7210f5f04e0903a5e45a101461da63)" to "[cdcf2acb4e53644963484644e2c0e244f28d36b1](https://github.com/sagemath/sagetrac-mirror/commit/cdcf2acb4e53644963484644e2c0e244f28d36b1)".



---

archive/issue_comments_537478.json:
```json
{
    "body": "<a id='comment:65'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdcf2acb4e53644963484644e2c0e244f28d36b1\">cdcf2ac</a></td><td><code>.gitpod.yml (before): establish SAGE_LOCAL here, not in 'init'</code></td></tr></table>\n",
    "created_at": "2022-01-04T06:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537478",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:65'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdcf2acb4e53644963484644e2c0e244f28d36b1">cdcf2ac</a></td><td><code>.gitpod.yml (before): establish SAGE_LOCAL here, not in 'init'</code></td></tr></table>




---

archive/issue_comments_537479.json:
```json
{
    "body": "<a id='comment:66'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b44b6b004b97ab73327a4817d0513ea2394097f\">5b44b6b</a></td><td><code>.gitpod.yml: Remove install-record timestamping</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f58453d1aeeb84d5508498d6178751405798657a\">f58453d</a></td><td><code>.gitpod.yml: Also remove the source tree used by the Docker build</code></td></tr></table>\n",
    "created_at": "2022-01-04T07:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537479",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b44b6b004b97ab73327a4817d0513ea2394097f">5b44b6b</a></td><td><code>.gitpod.yml: Remove install-record timestamping</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f58453d1aeeb84d5508498d6178751405798657a">f58453d</a></td><td><code>.gitpod.yml: Also remove the source tree used by the Docker build</code></td></tr></table>




---

archive/issue_comments_537480.json:
```json
{
    "body": "**Changing commit** from \"[cdcf2acb4e53644963484644e2c0e244f28d36b1](https://github.com/sagemath/sagetrac-mirror/commit/cdcf2acb4e53644963484644e2c0e244f28d36b1)\" to \"[f58453d1aeeb84d5508498d6178751405798657a](https://github.com/sagemath/sagetrac-mirror/commit/f58453d1aeeb84d5508498d6178751405798657a)\".",
    "created_at": "2022-01-04T07:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537480",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cdcf2acb4e53644963484644e2c0e244f28d36b1](https://github.com/sagemath/sagetrac-mirror/commit/cdcf2acb4e53644963484644e2c0e244f28d36b1)" to "[f58453d1aeeb84d5508498d6178751405798657a](https://github.com/sagemath/sagetrac-mirror/commit/f58453d1aeeb84d5508498d6178751405798657a)".



---

archive/issue_comments_537481.json:
```json
{
    "body": "**Changing commit** from \"[f58453d1aeeb84d5508498d6178751405798657a](https://github.com/sagemath/sagetrac-mirror/commit/f58453d1aeeb84d5508498d6178751405798657a)\" to \"[aef75ebe0986f6c499585fcdad36231808e5d21b](https://github.com/sagemath/sagetrac-mirror/commit/aef75ebe0986f6c499585fcdad36231808e5d21b)\".",
    "created_at": "2022-01-04T08:59:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537481",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f58453d1aeeb84d5508498d6178751405798657a](https://github.com/sagemath/sagetrac-mirror/commit/f58453d1aeeb84d5508498d6178751405798657a)" to "[aef75ebe0986f6c499585fcdad36231808e5d21b](https://github.com/sagemath/sagetrac-mirror/commit/aef75ebe0986f6c499585fcdad36231808e5d21b)".



---

archive/issue_comments_537482.json:
```json
{
    "body": "<a id='comment:67'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aef75ebe0986f6c499585fcdad36231808e5d21b\">aef75eb</a></td><td><code>.gitpod.yml (before): Always remove the source tree used by the Docker build</code></td></tr></table>\n",
    "created_at": "2022-01-04T08:59:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537482",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:67'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aef75ebe0986f6c499585fcdad36231808e5d21b">aef75eb</a></td><td><code>.gitpod.yml (before): Always remove the source tree used by the Docker build</code></td></tr></table>




---

archive/issue_comments_537483.json:
```json
{
    "body": "<a id='comment:68'></a>\nOK, now it's in good shape.\n\nCould you check that the SSH stuff works as intended and matches the added documentation?\nI see\n\n```\n$ ls -l ~/.ssh\ntotal 24\n-rw-r--r-- 1 gitpod gitpod   381 Jan  4 08:53 authorized_keys\n-rw------- 1 gitpod gitpod     0 Jan  4 08:53 id_rsa\n-rw-r--r-- 1 gitpod gitpod   664 Jan  4 08:53 known_hosts\n-rw-r--r-- 1 gitpod gitpod 15544 Jan  4 08:53 supervisor_env\n```\nand am not sure what the empty `id_rsa` is intended for",
    "created_at": "2022-01-04T09:01:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537483",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:68'></a>
OK, now it's in good shape.

Could you check that the SSH stuff works as intended and matches the added documentation?
I see

```
$ ls -l ~/.ssh
total 24
-rw-r--r-- 1 gitpod gitpod   381 Jan  4 08:53 authorized_keys
-rw------- 1 gitpod gitpod     0 Jan  4 08:53 id_rsa
-rw-r--r-- 1 gitpod gitpod   664 Jan  4 08:53 known_hosts
-rw-r--r-- 1 gitpod gitpod 15544 Jan  4 08:53 supervisor_env
```
and am not sure what the empty `id_rsa` is intended for



---

archive/issue_comments_537484.json:
```json
{
    "body": "<a id='comment:69'></a>\nhttps://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-370a022e48cb18faf98122794ffc5ce775b2606b09a9d1f80b71333425ec078eR27\n\nThere you don't need/want the timeout.",
    "created_at": "2022-01-04T12:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537484",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:69'></a>
https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-370a022e48cb18faf98122794ffc5ce775b2606b09a9d1f80b71333425ec078eR27

There you don't need/want the timeout.



---

archive/issue_comments_537485.json:
```json
{
    "body": "<a id='comment:70'></a>\nhttps://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-370a022e48cb18faf98122794ffc5ce775b2606b09a9d1f80b71333425ec078eR17\n\nI'm not sure if I understand the logic behind this and related commands (maybe add a bit more documentation of what's going on?). But please be aware that the code may be in a different location such as `/workspace/sagetrac-mirror` if someone starts gitpod from https://github.com/sagemath/sagetrac-mirror (which is probably what's going to happen if you want to check someone elses branch)",
    "created_at": "2022-01-04T12:20:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537485",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:70'></a>
https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-370a022e48cb18faf98122794ffc5ce775b2606b09a9d1f80b71333425ec078eR17

I'm not sure if I understand the logic behind this and related commands (maybe add a bit more documentation of what's going on?). But please be aware that the code may be in a different location such as `/workspace/sagetrac-mirror` if someone starts gitpod from https://github.com/sagemath/sagetrac-mirror (which is probably what's going to happen if you want to check someone elses branch)



---

archive/issue_comments_537486.json:
```json
{
    "body": "<a id='comment:71'></a>\nReplying to [mkoeppe](#comment%3A68):\n> Could you check that the SSH stuff works as intended and matches the added documentation?\n> and am not sure what the empty `id_rsa` is intended for\n\n\nDid you added a `PRIVATE_SSH_KEY` env variable in gitpod with your trac ssh as described in the docs? It's working for me.",
    "created_at": "2022-01-04T12:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537486",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:71'></a>
Replying to [mkoeppe](#comment%3A68):
> Could you check that the SSH stuff works as intended and matches the added documentation?
> and am not sure what the empty `id_rsa` is intended for


Did you added a `PRIVATE_SSH_KEY` env variable in gitpod with your trac ssh as described in the docs? It's working for me.



---

archive/issue_comments_537487.json:
```json
{
    "body": "<a id='comment:72'></a>\nReplying to [mkoeppe](#comment%3A68):\n> OK, now it's in good shape.\n\n\nFor me it takes over 5min to start a workspace due to the large workspace image (it displays \"fetching build image\" or something like this in the loading screen). I think this should be optimized as part of this ticket since otherwise I fear people will not adopt gitpod for e.g. reviewing of tickets.\n\nAlso it still loads `pyenv`: `pyenv shell 3.8.12` so https://github.com/tobiasdiez/sagetrac-mirror/blob/20ca179bed4ff605de4111362b02c8e2acca617e/.gitpod.yml#L18-L19 should probably be readded.",
    "created_at": "2022-01-04T12:28:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537487",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:72'></a>
Replying to [mkoeppe](#comment%3A68):
> OK, now it's in good shape.


For me it takes over 5min to start a workspace due to the large workspace image (it displays "fetching build image" or something like this in the loading screen). I think this should be optimized as part of this ticket since otherwise I fear people will not adopt gitpod for e.g. reviewing of tickets.

Also it still loads `pyenv`: `pyenv shell 3.8.12` so https://github.com/tobiasdiez/sagetrac-mirror/blob/20ca179bed4ff605de4111362b02c8e2acca617e/.gitpod.yml#L18-L19 should probably be readded.



---

archive/issue_comments_537488.json:
```json
{
    "body": "<a id='comment:73'></a>\nhttps://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-ef2cef9f88b4fe09ca3082140e67f5ad34fb65fb6e228f119d3812261ae51449R438-R442\n\nIs the somewhat strange indention by design?",
    "created_at": "2022-01-04T12:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537488",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:73'></a>
https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-ef2cef9f88b4fe09ca3082140e67f5ad34fb65fb6e228f119d3812261ae51449R438-R442

Is the somewhat strange indention by design?



---

archive/issue_comments_537489.json:
```json
{
    "body": "<a id='comment:74'></a>\nReplying to [gh-tobiasdiez](#comment%3A72):\n> Also it still loads `pyenv`: `pyenv shell 3.8.12` so https://github.com/tobiasdiez/sagetrac-mirror/blob/20ca179bed4ff605de4111362b02c8e2acca617e/.gitpod.yml#L18-L19 should probably be readded.\n\n\nIt no longer breaks the Sage build since #29285, but I'll add it anyway",
    "created_at": "2022-01-04T13:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537489",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:74'></a>
Replying to [gh-tobiasdiez](#comment%3A72):
> Also it still loads `pyenv`: `pyenv shell 3.8.12` so https://github.com/tobiasdiez/sagetrac-mirror/blob/20ca179bed4ff605de4111362b02c8e2acca617e/.gitpod.yml#L18-L19 should probably be readded.


It no longer breaks the Sage build since #29285, but I'll add it anyway



---

archive/issue_comments_537490.json:
```json
{
    "body": "<a id='comment:75'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6215a9ffd51478d617d6bb3718c7af2a2261a5f3\">6215a9f</a></td><td><code>Revert \".gitpod.yml (before): Refer to /workspace/sage/local by full path\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cec1f44e4cacb9e32a2a15af030e80d9a3d88fad\">cec1f44</a></td><td><code>.gitpod.yml (before): No timeout for 'before' task that runs after the prebuild</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa237c7780e17f5e41babab91bf088908ce721a7\">fa237c7</a></td><td><code>.gitpod.yml (before): Disable pyenv</code></td></tr></table>\n",
    "created_at": "2022-01-04T13:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537490",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:75'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6215a9ffd51478d617d6bb3718c7af2a2261a5f3">6215a9f</a></td><td><code>Revert ".gitpod.yml (before): Refer to /workspace/sage/local by full path"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cec1f44e4cacb9e32a2a15af030e80d9a3d88fad">cec1f44</a></td><td><code>.gitpod.yml (before): No timeout for 'before' task that runs after the prebuild</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa237c7780e17f5e41babab91bf088908ce721a7">fa237c7</a></td><td><code>.gitpod.yml (before): Disable pyenv</code></td></tr></table>




---

archive/issue_comments_537491.json:
```json
{
    "body": "**Changing commit** from \"[aef75ebe0986f6c499585fcdad36231808e5d21b](https://github.com/sagemath/sagetrac-mirror/commit/aef75ebe0986f6c499585fcdad36231808e5d21b)\" to \"[fa237c7780e17f5e41babab91bf088908ce721a7](https://github.com/sagemath/sagetrac-mirror/commit/fa237c7780e17f5e41babab91bf088908ce721a7)\".",
    "created_at": "2022-01-04T13:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537491",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[aef75ebe0986f6c499585fcdad36231808e5d21b](https://github.com/sagemath/sagetrac-mirror/commit/aef75ebe0986f6c499585fcdad36231808e5d21b)" to "[fa237c7780e17f5e41babab91bf088908ce721a7](https://github.com/sagemath/sagetrac-mirror/commit/fa237c7780e17f5e41babab91bf088908ce721a7)".



---

archive/issue_comments_537492.json:
```json
{
    "body": "<a id='comment:76'></a>\nReplying to [gh-tobiasdiez](#comment%3A73):\n> https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-ef2cef9f88b4fe09ca3082140e67f5ad34fb65fb6e228f119d3812261ae51449R438-R442\n> \n> Is the somewhat strange indention by design?\n\n\nThe link does not show a particular line -- what are you referring to?",
    "created_at": "2022-01-04T13:21:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537492",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:76'></a>
Replying to [gh-tobiasdiez](#comment%3A73):
> https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-ef2cef9f88b4fe09ca3082140e67f5ad34fb65fb6e228f119d3812261ae51449R438-R442
> 
> Is the somewhat strange indention by design?


The link does not show a particular line -- what are you referring to?



---

archive/issue_comments_537493.json:
```json
{
    "body": "<a id='comment:77'></a>\nReplying to [gh-tobiasdiez](#comment%3A70):\n>  please be aware that the code may be in a different location such as `/workspace/sagetrac-mirror` if someone starts gitpod from https://github.com/sagemath/sagetrac-mirror \n\n\nThanks, done.",
    "created_at": "2022-01-04T13:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537493",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:77'></a>
Replying to [gh-tobiasdiez](#comment%3A70):
>  please be aware that the code may be in a different location such as `/workspace/sagetrac-mirror` if someone starts gitpod from https://github.com/sagemath/sagetrac-mirror 


Thanks, done.



---

archive/issue_comments_537494.json:
```json
{
    "body": "<a id='comment:78'></a>\nReplying to [gh-tobiasdiez](#comment%3A71):\n> Replying to [mkoeppe](#comment%3A68):\n> > Could you check that the SSH stuff works as intended and matches the added documentation?\n> > and am not sure what the empty `id_rsa` is intended for\n\n> \n> Did you added a `PRIVATE_SSH_KEY` env variable in gitpod with your trac ssh as described in the docs? It's working for me.\n\n\nThanks for checking - I had missed a step.",
    "created_at": "2022-01-04T13:27:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537494",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:78'></a>
Replying to [gh-tobiasdiez](#comment%3A71):
> Replying to [mkoeppe](#comment%3A68):
> > Could you check that the SSH stuff works as intended and matches the added documentation?
> > and am not sure what the empty `id_rsa` is intended for

> 
> Did you added a `PRIVATE_SSH_KEY` env variable in gitpod with your trac ssh as described in the docs? It's working for me.


Thanks for checking - I had missed a step.



---

archive/issue_comments_537495.json:
```json
{
    "body": "**Changing commit** from \"[fa237c7780e17f5e41babab91bf088908ce721a7](https://github.com/sagemath/sagetrac-mirror/commit/fa237c7780e17f5e41babab91bf088908ce721a7)\" to \"[8d32070e4d5389244c563db39897a3e61347aeb3](https://github.com/sagemath/sagetrac-mirror/commit/8d32070e4d5389244c563db39897a3e61347aeb3)\".",
    "created_at": "2022-01-04T13:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537495",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fa237c7780e17f5e41babab91bf088908ce721a7](https://github.com/sagemath/sagetrac-mirror/commit/fa237c7780e17f5e41babab91bf088908ce721a7)" to "[8d32070e4d5389244c563db39897a3e61347aeb3](https://github.com/sagemath/sagetrac-mirror/commit/8d32070e4d5389244c563db39897a3e61347aeb3)".



---

archive/issue_comments_537496.json:
```json
{
    "body": "<a id='comment:79'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d32070e4d5389244c563db39897a3e61347aeb3\">8d32070</a></td><td><code>.gitpod.yml: Add comments</code></td></tr></table>\n",
    "created_at": "2022-01-04T13:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537496",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:79'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d32070e4d5389244c563db39897a3e61347aeb3">8d32070</a></td><td><code>.gitpod.yml: Add comments</code></td></tr></table>




---

archive/issue_comments_537497.json:
```json
{
    "body": "<a id='comment:80'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b9eccfd5733d96d888b0734bef5ed29c53ef0cf\">7b9eccf</a></td><td><code>.gitpod.yml: Fix inconsistent indentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/081de0e1219da5718d6c25a93f7e1b12089288fb\">081de0e</a></td><td><code>.gitpod.yml: Log to logs/install.log</code></td></tr></table>\n",
    "created_at": "2022-01-04T13:57:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537497",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:80'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b9eccfd5733d96d888b0734bef5ed29c53ef0cf">7b9eccf</a></td><td><code>.gitpod.yml: Fix inconsistent indentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/081de0e1219da5718d6c25a93f7e1b12089288fb">081de0e</a></td><td><code>.gitpod.yml: Log to logs/install.log</code></td></tr></table>




---

archive/issue_comments_537498.json:
```json
{
    "body": "**Changing commit** from \"[8d32070e4d5389244c563db39897a3e61347aeb3](https://github.com/sagemath/sagetrac-mirror/commit/8d32070e4d5389244c563db39897a3e61347aeb3)\" to \"[081de0e1219da5718d6c25a93f7e1b12089288fb](https://github.com/sagemath/sagetrac-mirror/commit/081de0e1219da5718d6c25a93f7e1b12089288fb)\".",
    "created_at": "2022-01-04T13:57:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537498",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8d32070e4d5389244c563db39897a3e61347aeb3](https://github.com/sagemath/sagetrac-mirror/commit/8d32070e4d5389244c563db39897a3e61347aeb3)" to "[081de0e1219da5718d6c25a93f7e1b12089288fb](https://github.com/sagemath/sagetrac-mirror/commit/081de0e1219da5718d6c25a93f7e1b12089288fb)".



---

archive/issue_comments_537499.json:
```json
{
    "body": "<a id='comment:81'></a>\nReplying to [mkoeppe](#comment%3A76):\n> Replying to [gh-tobiasdiez](#comment%3A73):\n> > https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-ef2cef9f88b4fe09ca3082140e67f5ad34fb65fb6e228f119d3812261ae51449R438-R442\n> > \n> > Is the somewhat strange indention by design?\n\n> \n> The link does not show a particular line -- what are you referring to?\n\n\nStrange, normally that works. It's the gitpod related changes in `tox.ini` (l. 438)",
    "created_at": "2022-01-04T17:12:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537499",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:81'></a>
Replying to [mkoeppe](#comment%3A76):
> Replying to [gh-tobiasdiez](#comment%3A73):
> > https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow#diff-ef2cef9f88b4fe09ca3082140e67f5ad34fb65fb6e228f119d3812261ae51449R438-R442
> > 
> > Is the somewhat strange indention by design?

> 
> The link does not show a particular line -- what are you referring to?


Strange, normally that works. It's the gitpod related changes in `tox.ini` (l. 438)



---

archive/issue_comments_537500.json:
```json
{
    "body": "<a id='comment:82'></a>\nReplying to [gh-tobiasdiez](#comment%3A81):\n> Replying to [mkoeppe](#comment%3A76):\n> > Replying to [gh-tobiasdiez](#comment%3A73):\n> > > Is the somewhat strange indention by design?\n\n> \n> the gitpod related changes in `tox.ini` (l. 438)\n\n\nIt is indented as intended. This file aspires to be a spreadsheet.",
    "created_at": "2022-01-04T17:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537500",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:82'></a>
Replying to [gh-tobiasdiez](#comment%3A81):
> Replying to [mkoeppe](#comment%3A76):
> > Replying to [gh-tobiasdiez](#comment%3A73):
> > > Is the somewhat strange indention by design?

> 
> the gitpod related changes in `tox.ini` (l. 438)


It is indented as intended. This file aspires to be a spreadsheet.



---

archive/issue_comments_537501.json:
```json
{
    "body": "<a id='comment:83'></a>\nThere are still some minor details wrong. In `logs/sphinx-4.3.1.log`:\n\n```\nUninstalling existing 'sphinx'\nWarning: File '/home/gitpod/sage-local/var/lib/sage/wheels/Sphinx-4.2.0-py3-none-any.whl' not found\nWarning: Directory '/home/gitpod/sage-local/var/lib/sage/wheels' not found\nRunning pip-uninstall script for 'sphinx'\n/home/gitpod/sage-local/var/lib/sage/venv-python3.8/var/lib/sage/scripts/sphinx/spkg-piprm: line 14: /home/gitpod/sage/build/bin/sage-dist-helpers: No such file or directory\nError: failed to source /home/gitpod/sage/build/bin/sage-dist-helpers\nIs /home/gitpod/sage the correct SAGE_ROOT?\nWarning: Error running the pip-uninstall script for 'sphinx'; uninstallation may have left behind some files\nRemoving stamp file '/home/gitpod/sage-local/var/lib/sage/venv-python3.8/var/lib/sage/installed/sphinx-4.2.0'\n```",
    "created_at": "2022-01-04T19:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537501",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:83'></a>
There are still some minor details wrong. In `logs/sphinx-4.3.1.log`:

```
Uninstalling existing 'sphinx'
Warning: File '/home/gitpod/sage-local/var/lib/sage/wheels/Sphinx-4.2.0-py3-none-any.whl' not found
Warning: Directory '/home/gitpod/sage-local/var/lib/sage/wheels' not found
Running pip-uninstall script for 'sphinx'
/home/gitpod/sage-local/var/lib/sage/venv-python3.8/var/lib/sage/scripts/sphinx/spkg-piprm: line 14: /home/gitpod/sage/build/bin/sage-dist-helpers: No such file or directory
Error: failed to source /home/gitpod/sage/build/bin/sage-dist-helpers
Is /home/gitpod/sage the correct SAGE_ROOT?
Warning: Error running the pip-uninstall script for 'sphinx'; uninstallation may have left behind some files
Removing stamp file '/home/gitpod/sage-local/var/lib/sage/venv-python3.8/var/lib/sage/installed/sphinx-4.2.0'
```



---

archive/issue_comments_537502.json:
```json
{
    "body": "<a id='comment:84'></a>\nPackage-removal scripts (`{prefix,venv}/var/lib/sage/scripts/*/spkg-piprm`) hardcode the `SAGE_ROOT` and `SAGE_SRC` from the time when the package was installed (the Docker-build phase); so I will also put a symlink in place for that.",
    "created_at": "2022-01-04T19:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537502",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:84'></a>
Package-removal scripts (`{prefix,venv}/var/lib/sage/scripts/*/spkg-piprm`) hardcode the `SAGE_ROOT` and `SAGE_SRC` from the time when the package was installed (the Docker-build phase); so I will also put a symlink in place for that.



---

archive/issue_comments_537503.json:
```json
{
    "body": "<a id='comment:85'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/952bb4e8442ee273fb02eac5977a6203bc5fcd5e\">952bb4e</a></td><td><code>.gitpod.yml (before): Create symlink from /home/gitpod/sage to the workspace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f89af7a68f9a36a59135f6f541bda204f05896f\">9f89af7</a></td><td><code>build/bin/sage-spkg: Run sage-spkg-uninstall on the correct tree</code></td></tr></table>\n",
    "created_at": "2022-01-04T19:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537503",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:85'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/952bb4e8442ee273fb02eac5977a6203bc5fcd5e">952bb4e</a></td><td><code>.gitpod.yml (before): Create symlink from /home/gitpod/sage to the workspace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f89af7a68f9a36a59135f6f541bda204f05896f">9f89af7</a></td><td><code>build/bin/sage-spkg: Run sage-spkg-uninstall on the correct tree</code></td></tr></table>




---

archive/issue_comments_537504.json:
```json
{
    "body": "**Changing commit** from \"[081de0e1219da5718d6c25a93f7e1b12089288fb](https://github.com/sagemath/sagetrac-mirror/commit/081de0e1219da5718d6c25a93f7e1b12089288fb)\" to \"[9f89af7a68f9a36a59135f6f541bda204f05896f](https://github.com/sagemath/sagetrac-mirror/commit/9f89af7a68f9a36a59135f6f541bda204f05896f)\".",
    "created_at": "2022-01-04T19:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537504",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[081de0e1219da5718d6c25a93f7e1b12089288fb](https://github.com/sagemath/sagetrac-mirror/commit/081de0e1219da5718d6c25a93f7e1b12089288fb)" to "[9f89af7a68f9a36a59135f6f541bda204f05896f](https://github.com/sagemath/sagetrac-mirror/commit/9f89af7a68f9a36a59135f6f541bda204f05896f)".



---

archive/issue_comments_537505.json:
```json
{
    "body": "<a id='comment:86'></a>\nFixed now, `logs/sphinx-4.3.1.log` now shows:\n\n```\nFound existing installation: Sphinx 4.2.0\nUninstalling Sphinx-4.2.0:\n  Successfully uninstalled Sphinx-4.2.0\nRemoving stamp file '/home/gitpod/sage-local/var/lib/sage/venv-python3.8/var/lib/sage/installed/sphinx-4.2.0'\nInstalling sphinx-4.3.1\n```\nand also `venv/var/lib/sage/wheels/` now only contains one sphinx wheel.",
    "created_at": "2022-01-04T21:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537505",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:86'></a>
Fixed now, `logs/sphinx-4.3.1.log` now shows:

```
Found existing installation: Sphinx 4.2.0
Uninstalling Sphinx-4.2.0:
  Successfully uninstalled Sphinx-4.2.0
Removing stamp file '/home/gitpod/sage-local/var/lib/sage/venv-python3.8/var/lib/sage/installed/sphinx-4.2.0'
Installing sphinx-4.3.1
```
and also `venv/var/lib/sage/wheels/` now only contains one sphinx wheel.



---

archive/issue_comments_537506.json:
```json
{
    "body": "**Changing reviewer** from \"https://github.com/mkoeppe/sage/runs/4687310728\" to \"Matthias Koeppe, ...\".",
    "created_at": "2022-01-04T21:12:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537506",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "https://github.com/mkoeppe/sage/runs/4687310728" to "Matthias Koeppe, ...".



---

archive/issue_comments_537507.json:
```json
{
    "body": "<a id='comment:88'></a>\nNice, also docker-in-docker works in the gitpod, so I can run commands such as `tox -e docker-ubuntu-bionic-minimal -- config.status` there",
    "created_at": "2022-01-04T22:05:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537507",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:88'></a>
Nice, also docker-in-docker works in the gitpod, so I can run commands such as `tox -e docker-ubuntu-bionic-minimal -- config.status` there



---

archive/issue_comments_537508.json:
```json
{
    "body": "**Changing commit** from \"[9f89af7a68f9a36a59135f6f541bda204f05896f](https://github.com/sagemath/sagetrac-mirror/commit/9f89af7a68f9a36a59135f6f541bda204f05896f)\" to \"[15e112a8b86cdde1a21224edc414e4779488b85d](https://github.com/sagemath/sagetrac-mirror/commit/15e112a8b86cdde1a21224edc414e4779488b85d)\".",
    "created_at": "2022-01-05T03:46:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537508",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9f89af7a68f9a36a59135f6f541bda204f05896f](https://github.com/sagemath/sagetrac-mirror/commit/9f89af7a68f9a36a59135f6f541bda204f05896f)" to "[15e112a8b86cdde1a21224edc414e4779488b85d](https://github.com/sagemath/sagetrac-mirror/commit/15e112a8b86cdde1a21224edc414e4779488b85d)".



---

archive/issue_comments_537509.json:
```json
{
    "body": "<a id='comment:89'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0eadcd118d2da14981cd17def91446232940d2f1\">0eadcd1</a></td><td><code>Add VS Code config for SAGE_ROOT/venv</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/075b22c398625238da1f47b86d2ad297369f6a0b\">075b22c</a></td><td><code>Merge #30677</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15e112a8b86cdde1a21224edc414e4779488b85d\">15e112a</a></td><td><code>.vscode/settings.json: Update interpreter settings</code></td></tr></table>\n",
    "created_at": "2022-01-05T03:46:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537509",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:89'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0eadcd118d2da14981cd17def91446232940d2f1">0eadcd1</a></td><td><code>Add VS Code config for SAGE_ROOT/venv</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/075b22c398625238da1f47b86d2ad297369f6a0b">075b22c</a></td><td><code>Merge #30677</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15e112a8b86cdde1a21224edc414e4779488b85d">15e112a</a></td><td><code>.vscode/settings.json: Update interpreter settings</code></td></tr></table>




---

archive/issue_comments_537510.json:
```json
{
    "body": "**Changing dependencies** from \"#33068, #30933, #29285, #32868, #33067\" to \"#33068, #30933, #29285, #32868, #33067, #30677\".",
    "created_at": "2022-01-05T03:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537510",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#33068, #30933, #29285, #32868, #33067" to "#33068, #30933, #29285, #32868, #33067, #30677".



---

archive/issue_comments_537511.json:
```json
{
    "body": "<a id='comment:91'></a>\nNow it starts with the right interpreter, and also \"Jupyter: Create New Jupyter Notebook\" works - \"Select Kernel\" offers the Sage kernel.",
    "created_at": "2022-01-05T05:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537511",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:91'></a>
Now it starts with the right interpreter, and also "Jupyter: Create New Jupyter Notebook" works - "Select Kernel" offers the Sage kernel.



---

archive/issue_events_296865.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-01-05T12:19:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296865"
}
```



---

archive/issue_events_296866.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-01-05T12:19:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296866"
}
```



---

archive/issue_comments_537512.json:
```json
{
    "body": "<a id='comment:92'></a>\nIt still takes over 8min until the workspace is loaded for me due to \"Pulling container image\". This should really optimized as part of this ticket. \n\nAlso pyenv shell still seems to be activated, I think it needs to be disabled in before and init.",
    "created_at": "2022-01-05T12:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537512",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:92'></a>
It still takes over 8min until the workspace is loaded for me due to "Pulling container image". This should really optimized as part of this ticket. 

Also pyenv shell still seems to be activated, I think it needs to be disabled in before and init.



---

archive/issue_comments_537513.json:
```json
{
    "body": "**Work_Issues:** Optimize docker image",
    "created_at": "2022-01-05T12:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537513",
    "user": "https://github.com/tobiasdiez"
}
```

**Work_Issues:** Optimize docker image



---

archive/issue_comments_537514.json:
```json
{
    "body": "**Changing commit** from \"[15e112a8b86cdde1a21224edc414e4779488b85d](https://github.com/sagemath/sagetrac-mirror/commit/15e112a8b86cdde1a21224edc414e4779488b85d)\" to \"[2bf20ed651e0914847d82105891f04a04cc23464](https://github.com/sagemath/sagetrac-mirror/commit/2bf20ed651e0914847d82105891f04a04cc23464)\".",
    "created_at": "2022-01-05T16:48:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537514",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[15e112a8b86cdde1a21224edc414e4779488b85d](https://github.com/sagemath/sagetrac-mirror/commit/15e112a8b86cdde1a21224edc414e4779488b85d)" to "[2bf20ed651e0914847d82105891f04a04cc23464](https://github.com/sagemath/sagetrac-mirror/commit/2bf20ed651e0914847d82105891f04a04cc23464)".



---

archive/issue_comments_537515.json:
```json
{
    "body": "<a id='comment:93'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bf20ed651e0914847d82105891f04a04cc23464\">2bf20ed</a></td><td><code>.github/workflows/tox.yml (docker): Also push -with-system-packages</code></td></tr></table>\n",
    "created_at": "2022-01-05T16:48:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537515",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:93'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bf20ed651e0914847d82105891f04a04cc23464">2bf20ed</a></td><td><code>.github/workflows/tox.yml (docker): Also push -with-system-packages</code></td></tr></table>




---

archive/issue_comments_537516.json:
```json
{
    "body": "<a id='comment:94'></a>\nReady now in https://github.com/mkoeppe?tab=packages&q=gitpod",
    "created_at": "2022-01-05T17:04:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537516",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:94'></a>
Ready now in https://github.com/mkoeppe?tab=packages&q=gitpod



---

archive/issue_comments_537517.json:
```json
{
    "body": "**Changing commit** from \"[2bf20ed651e0914847d82105891f04a04cc23464](https://github.com/sagemath/sagetrac-mirror/commit/2bf20ed651e0914847d82105891f04a04cc23464)\" to \"[cb678a8df1b4dafe0281b6f2def371d955ff7ef7](https://github.com/sagemath/sagetrac-mirror/commit/cb678a8df1b4dafe0281b6f2def371d955ff7ef7)\".",
    "created_at": "2022-01-05T19:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537517",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2bf20ed651e0914847d82105891f04a04cc23464](https://github.com/sagemath/sagetrac-mirror/commit/2bf20ed651e0914847d82105891f04a04cc23464)" to "[cb678a8df1b4dafe0281b6f2def371d955ff7ef7](https://github.com/sagemath/sagetrac-mirror/commit/cb678a8df1b4dafe0281b6f2def371d955ff7ef7)".



---

archive/issue_comments_537518.json:
```json
{
    "body": "<a id='comment:95'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6edf67b6256c83842a366a2a684e9335745d0eb\">c6edf67</a></td><td><code>.gitpod.yml: Use a Dockerfile again</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb678a8df1b4dafe0281b6f2def371d955ff7ef7\">cb678a8</a></td><td><code>docker/.gitpod.Dockerfile: Go through ARGs BASE_GITHUB_REPOSITORY, BASE_TAG</code></td></tr></table>\n",
    "created_at": "2022-01-05T19:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537518",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:95'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6edf67b6256c83842a366a2a684e9335745d0eb">c6edf67</a></td><td><code>.gitpod.yml: Use a Dockerfile again</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb678a8df1b4dafe0281b6f2def371d955ff7ef7">cb678a8</a></td><td><code>docker/.gitpod.Dockerfile: Go through ARGs BASE_GITHUB_REPOSITORY, BASE_TAG</code></td></tr></table>




---

archive/issue_comments_537519.json:
```json
{
    "body": "**Changing commit** from \"[cb678a8df1b4dafe0281b6f2def371d955ff7ef7](https://github.com/sagemath/sagetrac-mirror/commit/cb678a8df1b4dafe0281b6f2def371d955ff7ef7)\" to \"[e01dd838a52064f37079c7ed62b7a7aa513ccbe6](https://github.com/sagemath/sagetrac-mirror/commit/e01dd838a52064f37079c7ed62b7a7aa513ccbe6)\".",
    "created_at": "2022-01-05T19:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537519",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cb678a8df1b4dafe0281b6f2def371d955ff7ef7](https://github.com/sagemath/sagetrac-mirror/commit/cb678a8df1b4dafe0281b6f2def371d955ff7ef7)" to "[e01dd838a52064f37079c7ed62b7a7aa513ccbe6](https://github.com/sagemath/sagetrac-mirror/commit/e01dd838a52064f37079c7ed62b7a7aa513ccbe6)".



---

archive/issue_comments_537520.json:
```json
{
    "body": "<a id='comment:96'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e01dd838a52064f37079c7ed62b7a7aa513ccbe6\">e01dd83</a></td><td><code>.gitpod.yml (before): Run 'pyenv global system'</code></td></tr></table>\n",
    "created_at": "2022-01-05T19:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537520",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:96'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e01dd838a52064f37079c7ed62b7a7aa513ccbe6">e01dd83</a></td><td><code>.gitpod.yml (before): Run 'pyenv global system'</code></td></tr></table>




---

archive/issue_events_296867.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-05T19:25:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296867"
}
```



---

archive/issue_events_296868.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-05T19:25:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296868"
}
```



---

archive/issue_comments_537521.json:
```json
{
    "body": "**Changing work_issues** from \"Optimize docker image\" to \"\".",
    "created_at": "2022-01-05T19:31:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537521",
    "user": "https://github.com/mkoeppe"
}
```

**Changing work_issues** from "Optimize docker image" to "".



---

archive/issue_comments_537522.json:
```json
{
    "body": "<a id='comment:99'></a>\nThat sadly doesn't solve the issue for me. Starting a workspace still takes 8+ mins, while #32749 takes about 2mins.\n\nIt also seems that the workspace image is quite large at around 16GB. In particular, the sage folder contains\n\n``` \n4.9G    local\n6.2G    src\n```\n\nI'm not sure if the following folders are really necessary or if they can be deleted (latest at the end of the prebuild):\n\n```\n1.8G    ./local/share/doc\n4.3G    ./src/build\n```\n\nMoreover,\n\n```\n3.0G    /usr\n3.3G    /home\n```\n\nis also bigger than the one from the other image of #32749\n\n```\n2.2G    /usr\n2.3G    /home\n```\n\nSo I suggest to use gitpod/workspace-base as a base.",
    "created_at": "2022-01-06T12:38:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537522",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:99'></a>
That sadly doesn't solve the issue for me. Starting a workspace still takes 8+ mins, while #32749 takes about 2mins.

It also seems that the workspace image is quite large at around 16GB. In particular, the sage folder contains

``` 
4.9G    local
6.2G    src
```

I'm not sure if the following folders are really necessary or if they can be deleted (latest at the end of the prebuild):

```
1.8G    ./local/share/doc
4.3G    ./src/build
```

Moreover,

```
3.0G    /usr
3.3G    /home
```

is also bigger than the one from the other image of #32749

```
2.2G    /usr
2.3G    /home
```

So I suggest to use gitpod/workspace-base as a base.



---

archive/issue_comments_537523.json:
```json
{
    "body": "<a id='comment:100'></a>\nReplying to [gh-tobiasdiez](#comment%3A99):\n> Starting a workspace still takes 8+ mins\n\n\nProbably depends on the data center region. I just timed it here, it took < 3.5 minutes; but there is considerable variance",
    "created_at": "2022-01-06T17:27:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537523",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:100'></a>
Replying to [gh-tobiasdiez](#comment%3A99):
> Starting a workspace still takes 8+ mins


Probably depends on the data center region. I just timed it here, it took < 3.5 minutes; but there is considerable variance



---

archive/issue_comments_537524.json:
```json
{
    "body": "<a id='comment:101'></a>\nReplying to [gh-tobiasdiez](#comment%3A99):\n> I'm not sure if the following folders are really necessary or if they can be deleted (latest at the end of the prebuild):\n> \n> ```\n> 1.8G    ./local/share/doc\n> 4.3G    ./src/build\n> ```\n\n\nI'll check if we can delete them without sacrificing fast rebuilds of documentation (`make doc-html`) and sagelib (`./sage -b`). \n\nFor documentation, I see\n\n```\n[sagemath_doc_html-none] make doc-inventory--reference-references\n[sagemath_doc_html-none] cd /workspace/sage && ./sage --docbuild --no-pdf-links reference/references inventory \n[sagemath_doc_html-none] [reference] loading pickled environment... failed\n[sagemath_doc_html-none] [reference] failed: source directory has changed\n```\n... so something is not ideal there anyway",
    "created_at": "2022-01-06T17:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537524",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:101'></a>
Replying to [gh-tobiasdiez](#comment%3A99):
> I'm not sure if the following folders are really necessary or if they can be deleted (latest at the end of the prebuild):
> 
> ```
> 1.8G    ./local/share/doc
> 4.3G    ./src/build
> ```


I'll check if we can delete them without sacrificing fast rebuilds of documentation (`make doc-html`) and sagelib (`./sage -b`). 

For documentation, I see

```
[sagemath_doc_html-none] make doc-inventory--reference-references
[sagemath_doc_html-none] cd /workspace/sage && ./sage --docbuild --no-pdf-links reference/references inventory 
[sagemath_doc_html-none] [reference] loading pickled environment... failed
[sagemath_doc_html-none] [reference] failed: source directory has changed
```
... so something is not ideal there anyway



---

archive/issue_comments_537525.json:
```json
{
    "body": "<a id='comment:102'></a>\nReplying to [mkoeppe](#comment%3A100):\n> Replying to [gh-tobiasdiez](#comment%3A99):\n> > Starting a workspace still takes 8+ mins\n\n> \n> Probably depends on the data center region. I just timed it here, it took < 3.5 minutes; but there is considerable variance\n\n\nApparently, images are built in the US and then downloaded every time from there without caching. This explains why it takes so much longer for me. Gitpod is working on a solution https://github.com/gitpod-io/gitpod/issues/7002 and https://github.com/gitpod-io/gitpod/issues/6145. But having a 15GB+ image is not ideal anyway.",
    "created_at": "2022-01-06T17:40:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537525",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:102'></a>
Replying to [mkoeppe](#comment%3A100):
> Replying to [gh-tobiasdiez](#comment%3A99):
> > Starting a workspace still takes 8+ mins

> 
> Probably depends on the data center region. I just timed it here, it took < 3.5 minutes; but there is considerable variance


Apparently, images are built in the US and then downloaded every time from there without caching. This explains why it takes so much longer for me. Gitpod is working on a solution https://github.com/gitpod-io/gitpod/issues/7002 and https://github.com/gitpod-io/gitpod/issues/6145. But having a 15GB+ image is not ideal anyway.



---

archive/issue_comments_537526.json:
```json
{
    "body": "<a id='comment:3'></a>\ntop-level `Makefile` has targets `micro_release`, `fast-rebuild-clean` that do related stuff.",
    "created_at": "2022-01-06T18:01:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537526",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
top-level `Makefile` has targets `micro_release`, `fast-rebuild-clean` that do related stuff.



---

archive/issue_comments_537527.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4814334dff7c990489df1441d4244a60ca7b2c59\">4814334</a></td><td><code>docker/.gitpod.Dockerfile: Remove doctrees/inventory</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/874dddd4ef5445ace3d8855106f36e37d7d56472\">874dddd</a></td><td><code>tox.ini (gitpod): Use gitpod/workspace-base by default</code></td></tr></table>\n",
    "created_at": "2022-01-06T19:31:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537527",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4814334dff7c990489df1441d4244a60ca7b2c59">4814334</a></td><td><code>docker/.gitpod.Dockerfile: Remove doctrees/inventory</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/874dddd4ef5445ace3d8855106f36e37d7d56472">874dddd</a></td><td><code>tox.ini (gitpod): Use gitpod/workspace-base by default</code></td></tr></table>




---

archive/issue_comments_537528.json:
```json
{
    "body": "**Changing commit** from \"[e01dd838a52064f37079c7ed62b7a7aa513ccbe6](https://github.com/sagemath/sagetrac-mirror/commit/e01dd838a52064f37079c7ed62b7a7aa513ccbe6)\" to \"[874dddd4ef5445ace3d8855106f36e37d7d56472](https://github.com/sagemath/sagetrac-mirror/commit/874dddd4ef5445ace3d8855106f36e37d7d56472)\".",
    "created_at": "2022-01-06T19:31:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537528",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e01dd838a52064f37079c7ed62b7a7aa513ccbe6](https://github.com/sagemath/sagetrac-mirror/commit/e01dd838a52064f37079c7ed62b7a7aa513ccbe6)" to "[874dddd4ef5445ace3d8855106f36e37d7d56472](https://github.com/sagemath/sagetrac-mirror/commit/874dddd4ef5445ace3d8855106f36e37d7d56472)".



---

archive/issue_comments_537529.json:
```json
{
    "body": "<a id='comment:105'></a>\nReplying to [gh-tobiasdiez](#comment%3A99):\n> \n> ```\n> 3.0G    /usr\n> 3.3G    /home\n> ```\n> \n> is also bigger than the one from the other image of #32749\n> \n> ```\n> 2.2G    /usr\n> 2.3G    /home\n> ```\n> \n> So I suggest to use gitpod/workspace-base as a base.\n\n\nBuilding a new image at https://github.com/mkoeppe/sage/runs/4731195747",
    "created_at": "2022-01-06T19:32:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537529",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:105'></a>
Replying to [gh-tobiasdiez](#comment%3A99):
> 
> ```
> 3.0G    /usr
> 3.3G    /home
> ```
> 
> is also bigger than the one from the other image of #32749
> 
> ```
> 2.2G    /usr
> 2.3G    /home
> ```
> 
> So I suggest to use gitpod/workspace-base as a base.


Building a new image at https://github.com/mkoeppe/sage/runs/4731195747



---

archive/issue_comments_537530.json:
```json
{
    "body": "<a id='comment:6'></a>\n\n```\nfast-rebuild-clean: misc-clean\n\trm -rf upstream/\n\trm -rf build/pkgs/sagelib/src/build/temp.*\n\t# The .py files in src/build are restored from src/sage without their\n\t# mtimes changed.\n\t-find build/pkgs/sagelib/src/build -name '*.py' -exec rm \\{\\} \\;\n\t# Remove leftovers from ancient branches\n\trm -rf src/build\n```\nThis is not compatible with `configure --enable-editable`, which uses `src/build/` instead of `build/pkgs/sagelib/src/build/`.",
    "created_at": "2022-01-06T19:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537530",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>

```
fast-rebuild-clean: misc-clean
	rm -rf upstream/
	rm -rf build/pkgs/sagelib/src/build/temp.*
	# The .py files in src/build are restored from src/sage without their
	# mtimes changed.
	-find build/pkgs/sagelib/src/build -name '*.py' -exec rm \{\} \;
	# Remove leftovers from ancient branches
	rm -rf src/build
```
This is not compatible with `configure --enable-editable`, which uses `src/build/` instead of `build/pkgs/sagelib/src/build/`.



---

archive/issue_comments_537531.json:
```json
{
    "body": "<a id='comment:7'></a>\nWhy does the editable install actually needs `src/build` or even copies something there? The compiled cython code (.so files) are placed next to the cython file.",
    "created_at": "2022-01-06T20:43:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537531",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:7'></a>
Why does the editable install actually needs `src/build` or even copies something there? The compiled cython code (.so files) are placed next to the cython file.



---

archive/issue_comments_537532.json:
```json
{
    "body": "<a id='comment:8'></a>\nI think that's just standard `setuptools` behavior",
    "created_at": "2022-01-06T21:20:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537532",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
I think that's just standard `setuptools` behavior



---

archive/issue_comments_537533.json:
```json
{
    "body": "<a id='comment:9'></a>\nThe `setuptools` option `--build-temp` could be used to put the temp directories outside of `/workspace`.\n\nOr we could just unconditionally remove the temp directory at the end of `build/pkgs/sagelib/spkg-install`.",
    "created_at": "2022-01-06T22:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537533",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
The `setuptools` option `--build-temp` could be used to put the temp directories outside of `/workspace`.

Or we could just unconditionally remove the temp directory at the end of `build/pkgs/sagelib/spkg-install`.



---

archive/issue_comments_537534.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c97dc015a437f7746635e7de3577dc25c422213e\">c97dc01</a></td><td><code>build/pkgs/sagelib/spkg-install: Remove build/temp.* directories after build</code></td></tr></table>\n",
    "created_at": "2022-01-06T23:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537534",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c97dc015a437f7746635e7de3577dc25c422213e">c97dc01</a></td><td><code>build/pkgs/sagelib/spkg-install: Remove build/temp.* directories after build</code></td></tr></table>




---

archive/issue_comments_537535.json:
```json
{
    "body": "**Changing commit** from \"[874dddd4ef5445ace3d8855106f36e37d7d56472](https://github.com/sagemath/sagetrac-mirror/commit/874dddd4ef5445ace3d8855106f36e37d7d56472)\" to \"[c97dc015a437f7746635e7de3577dc25c422213e](https://github.com/sagemath/sagetrac-mirror/commit/c97dc015a437f7746635e7de3577dc25c422213e)\".",
    "created_at": "2022-01-06T23:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537535",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[874dddd4ef5445ace3d8855106f36e37d7d56472](https://github.com/sagemath/sagetrac-mirror/commit/874dddd4ef5445ace3d8855106f36e37d7d56472)" to "[c97dc015a437f7746635e7de3577dc25c422213e](https://github.com/sagemath/sagetrac-mirror/commit/c97dc015a437f7746635e7de3577dc25c422213e)".



---

archive/issue_comments_537536.json:
```json
{
    "body": "<a id='comment:1'></a>\nIt's much smaller now\n\n```\ngitpod /workspace/sage (mkoeppe-9.5.beta9+updates) $ du -sh src local /usr /home\n3.1G    src\n3.9G    local\n2.4G    /usr\n76K     /home\n```\nand rebuilds are still fast",
    "created_at": "2022-01-07T07:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537536",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
It's much smaller now

```
gitpod /workspace/sage (mkoeppe-9.5.beta9+updates) $ du -sh src local /usr /home
3.1G    src
3.9G    local
2.4G    /usr
76K     /home
```
and rebuilds are still fast



---

archive/issue_comments_537537.json:
```json
{
    "body": "**Changing commit** from \"[c97dc015a437f7746635e7de3577dc25c422213e](https://github.com/sagemath/sagetrac-mirror/commit/c97dc015a437f7746635e7de3577dc25c422213e)\" to \"[36050766eb9d84679210ead65650869ba0e46412](https://github.com/sagemath/sagetrac-mirror/commit/36050766eb9d84679210ead65650869ba0e46412)\".",
    "created_at": "2022-01-07T07:35:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537537",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c97dc015a437f7746635e7de3577dc25c422213e](https://github.com/sagemath/sagetrac-mirror/commit/c97dc015a437f7746635e7de3577dc25c422213e)" to "[36050766eb9d84679210ead65650869ba0e46412](https://github.com/sagemath/sagetrac-mirror/commit/36050766eb9d84679210ead65650869ba0e46412)".



---

archive/issue_comments_537538.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36050766eb9d84679210ead65650869ba0e46412\">3605076</a></td><td><code>build/pkgs/sagelib/spkg-install: Fix up deleting temp.*</code></td></tr></table>\n",
    "created_at": "2022-01-07T07:35:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537538",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36050766eb9d84679210ead65650869ba0e46412">3605076</a></td><td><code>build/pkgs/sagelib/spkg-install: Fix up deleting temp.*</code></td></tr></table>




---

archive/issue_comments_537539.json:
```json
{
    "body": "<a id='comment:3'></a>\nThanks, its way better now (around 4-5min). I would say the doc folder can still be removed. If someone is working on the docs, then one can easily only create the relevant file without the need to build the whole docs.",
    "created_at": "2022-01-07T12:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537539",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:3'></a>
Thanks, its way better now (around 4-5min). I would say the doc folder can still be removed. If someone is working on the docs, then one can easily only create the relevant file without the need to build the whole docs.



---

archive/issue_comments_537540.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe following folders should be deleted as well\n\n```\n212M    /tmp\n32M     /var/lib/apt/lists (remove as part of the apt-get install command)\n```\n\nA few packages that I think are not used by the built script or needed in general:\n\n```\n3722    python2.7-minimal\n9370    libflint-dev\n10026   pari-gp (and other pari-related stuff)\n13215   ecl\n14279   libsingular4-dev (and other singular-related stuff)\n19531   libgiac0 (and other giac-related stuff)\n30765   vim-runtime\n41291   emacs-nox\n66816   emacs-common\n330712  libgl1-mesa-dri (?)\n```\nI would suggest to exclude them from the installation / uninstall them, similar to what is done in #32749. \n\nTogether that should give another 1GB.",
    "created_at": "2022-01-07T16:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537540",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:4'></a>
The following folders should be deleted as well

```
212M    /tmp
32M     /var/lib/apt/lists (remove as part of the apt-get install command)
```

A few packages that I think are not used by the built script or needed in general:

```
3722    python2.7-minimal
9370    libflint-dev
10026   pari-gp (and other pari-related stuff)
13215   ecl
14279   libsingular4-dev (and other singular-related stuff)
19531   libgiac0 (and other giac-related stuff)
30765   vim-runtime
41291   emacs-nox
66816   emacs-common
330712  libgl1-mesa-dri (?)
```
I would suggest to exclude them from the installation / uninstall them, similar to what is done in #32749. 

Together that should give another 1GB.



---

archive/issue_comments_537541.json:
```json
{
    "body": "**Changing commit** from \"[36050766eb9d84679210ead65650869ba0e46412](https://github.com/sagemath/sagetrac-mirror/commit/36050766eb9d84679210ead65650869ba0e46412)\" to \"[c02c03c8465a2515676b25f0686c1485083bb757](https://github.com/sagemath/sagetrac-mirror/commit/c02c03c8465a2515676b25f0686c1485083bb757)\".",
    "created_at": "2022-01-07T18:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537541",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[36050766eb9d84679210ead65650869ba0e46412](https://github.com/sagemath/sagetrac-mirror/commit/36050766eb9d84679210ead65650869ba0e46412)" to "[c02c03c8465a2515676b25f0686c1485083bb757](https://github.com/sagemath/sagetrac-mirror/commit/c02c03c8465a2515676b25f0686c1485083bb757)".



---

archive/issue_comments_537542.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d87027c8d35dbd268d12de6e6d8fa03b1afaa63d\">d87027c</a></td><td><code>sage --package list: Add option --exclude</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c02c03c8465a2515676b25f0686c1485083bb757\">c02c03c</a></td><td><code>tox.ini (gitpod-standard): Exclude some packages</code></td></tr></table>\n",
    "created_at": "2022-01-07T18:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537542",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d87027c8d35dbd268d12de6e6d8fa03b1afaa63d">d87027c</a></td><td><code>sage --package list: Add option --exclude</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c02c03c8465a2515676b25f0686c1485083bb757">c02c03c</a></td><td><code>tox.ini (gitpod-standard): Exclude some packages</code></td></tr></table>




---

archive/issue_comments_537543.json:
```json
{
    "body": "<a id='comment:6'></a>\nNew image building at https://github.com/mkoeppe/sage/runs/4742213151",
    "created_at": "2022-01-07T18:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537543",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
New image building at https://github.com/mkoeppe/sage/runs/4742213151



---

archive/issue_comments_537544.json:
```json
{
    "body": "**Changing commit** from \"[c02c03c8465a2515676b25f0686c1485083bb757](https://github.com/sagemath/sagetrac-mirror/commit/c02c03c8465a2515676b25f0686c1485083bb757)\" to \"[7e74607979224e0b8f7d2803fc8b68f3802a64f4](https://github.com/sagemath/sagetrac-mirror/commit/7e74607979224e0b8f7d2803fc8b68f3802a64f4)\".",
    "created_at": "2022-01-07T18:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537544",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c02c03c8465a2515676b25f0686c1485083bb757](https://github.com/sagemath/sagetrac-mirror/commit/c02c03c8465a2515676b25f0686c1485083bb757)" to "[7e74607979224e0b8f7d2803fc8b68f3802a64f4](https://github.com/sagemath/sagetrac-mirror/commit/7e74607979224e0b8f7d2803fc8b68f3802a64f4)".



---

archive/issue_comments_537545.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6285cd9563c8d3a4dc3f8b97e128373a6021a668\">6285cd9</a></td><td><code>.gitpod.Dockerfile: Save space by removing apt lists</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e74607979224e0b8f7d2803fc8b68f3802a64f4\">7e74607</a></td><td><code>.gitpod.Dockerfile: Remove built Sage documentation</code></td></tr></table>\n",
    "created_at": "2022-01-07T18:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537545",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6285cd9563c8d3a4dc3f8b97e128373a6021a668">6285cd9</a></td><td><code>.gitpod.Dockerfile: Save space by removing apt lists</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e74607979224e0b8f7d2803fc8b68f3802a64f4">7e74607</a></td><td><code>.gitpod.Dockerfile: Remove built Sage documentation</code></td></tr></table>




---

archive/issue_comments_537546.json:
```json
{
    "body": "<a id='comment:8'></a>\nFor the record, that's how gitpod is cleaning up the package installation cache/log: https://github.com/gitpod-io/workspace-images/blob/master/base/install-packages#L32-L36",
    "created_at": "2022-01-07T20:10:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537546",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:8'></a>
For the record, that's how gitpod is cleaning up the package installation cache/log: https://github.com/gitpod-io/workspace-images/blob/master/base/install-packages#L32-L36



---

archive/issue_comments_537547.json:
```json
{
    "body": "<a id='comment:119'></a>\nReplying to [mkoeppe](#comment%3A116):\n> New image building at https://github.com/mkoeppe/sage/runs/4742213151\n\n\nThanks! Will try it once its finished.",
    "created_at": "2022-01-07T20:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537547",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:119'></a>
Replying to [mkoeppe](#comment%3A116):
> New image building at https://github.com/mkoeppe/sage/runs/4742213151


Thanks! Will try it once its finished.



---

archive/issue_comments_537548.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f71c8b6c625017b0d37e956b0386111630ad6fe1\">f71c8b6</a></td><td><code>docker/.gitpod.Dockerfile: Clean more</code></td></tr></table>\n",
    "created_at": "2022-01-07T20:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537548",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f71c8b6c625017b0d37e956b0386111630ad6fe1">f71c8b6</a></td><td><code>docker/.gitpod.Dockerfile: Clean more</code></td></tr></table>




---

archive/issue_comments_537549.json:
```json
{
    "body": "**Changing commit** from \"[7e74607979224e0b8f7d2803fc8b68f3802a64f4](https://github.com/sagemath/sagetrac-mirror/commit/7e74607979224e0b8f7d2803fc8b68f3802a64f4)\" to \"[f71c8b6c625017b0d37e956b0386111630ad6fe1](https://github.com/sagemath/sagetrac-mirror/commit/f71c8b6c625017b0d37e956b0386111630ad6fe1)\".",
    "created_at": "2022-01-07T20:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537549",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7e74607979224e0b8f7d2803fc8b68f3802a64f4](https://github.com/sagemath/sagetrac-mirror/commit/7e74607979224e0b8f7d2803fc8b68f3802a64f4)" to "[f71c8b6c625017b0d37e956b0386111630ad6fe1](https://github.com/sagemath/sagetrac-mirror/commit/f71c8b6c625017b0d37e956b0386111630ad6fe1)".



---

archive/issue_comments_537550.json:
```json
{
    "body": "<a id='comment:1'></a>\n\n```\n$ du -sh src local /usr /home /tmp /var/tmp\n3.1G    src\n3.1G    local\n2.0G    /usr\n36K     /home\n31M     /tmp\n0       /var/tmp\n```",
    "created_at": "2022-01-08T06:04:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537550",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>

```
$ du -sh src local /usr /home /tmp /var/tmp
3.1G    src
3.1G    local
2.0G    /usr
36K     /home
31M     /tmp
0       /var/tmp
```



---

archive/issue_comments_537551.json:
```json
{
    "body": "<a id='comment:2'></a>\nI don't think it's necessary to remove packages such as `emacs` that come with `gitpod/workspace-base`.",
    "created_at": "2022-01-08T06:23:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537551",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
I don't think it's necessary to remove packages such as `emacs` that come with `gitpod/workspace-base`.



---

archive/issue_comments_537552.json:
```json
{
    "body": "<a id='comment:123'></a>\nReplying to [mkoeppe](#comment%3A88):\n> Nice, also docker-in-docker works in the gitpod, so I can run commands such as `tox -e docker-ubuntu-bionic-minimal -- config.status` there\n\n\nToo bad, this no longer works with the smaller base image because it does not have docker. \n\nAnd `sudo apt-get install docker.io` is not sufficient to fix it:\n\n```\n$ docker run -it ubuntu:bionic bash\n[...]\ndocker: Error response from daemon: failed to create shim: OCI runtime create failed: container_linux.go:380: starting container process caused: error adding seccomp filter rule for syscall clone3: permission denied: unknown.\nERRO[0008] error waiting for container: context canceled \n\n$ sudo docker run -it ubuntu:bionic bash\ndocker: Error response from daemon: failed to create shim: OCI runtime create failed: container_linux.go:380: starting container process caused: error adding seccomp filter rule for syscall clone3: permission denied: unknown.\nERRO[0001] error waiting for container: context canceled \n```",
    "created_at": "2022-01-08T07:11:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537552",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:123'></a>
Replying to [mkoeppe](#comment%3A88):
> Nice, also docker-in-docker works in the gitpod, so I can run commands such as `tox -e docker-ubuntu-bionic-minimal -- config.status` there


Too bad, this no longer works with the smaller base image because it does not have docker. 

And `sudo apt-get install docker.io` is not sufficient to fix it:

```
$ docker run -it ubuntu:bionic bash
[...]
docker: Error response from daemon: failed to create shim: OCI runtime create failed: container_linux.go:380: starting container process caused: error adding seccomp filter rule for syscall clone3: permission denied: unknown.
ERRO[0008] error waiting for container: context canceled 

$ sudo docker run -it ubuntu:bionic bash
docker: Error response from daemon: failed to create shim: OCI runtime create failed: container_linux.go:380: starting container process caused: error adding seccomp filter rule for syscall clone3: permission denied: unknown.
ERRO[0001] error waiting for container: context canceled 
```



---

archive/issue_comments_537553.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,12 @@\n-Based on #32749.\n+[Gitpod](https://www.gitpod.io/) allows one to setup a complete dev environment in the cloud. It is free to use for up to 50 hours per month. In this ticket the config necessary for making this work with sagemath is added. \n \n-Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod\n+You can try this out by going to https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates. \n \n-To try out:\n-- https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates\n+It works by building docker images on github, push them to GH packages (https://github.com/mkoeppe?tab=packages&q=gitpod) and then use these ones as the base for the gitpod workspace.\n+\n+After this ticket is merged, we should the automatic prebuild using a github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env very quickly without the need to build anything.\n \n Follow-up: #33113 gitpod usability improvements\n \n+Alternative: #32749, which only builds the docker image on gitpod (which is currently not really feasible as they have a time limit of 1h) \n+\n``````\n",
    "created_at": "2022-01-08T19:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537553",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,12 @@
-Based on #32749.
+[Gitpod](https://www.gitpod.io/) allows one to setup a complete dev environment in the cloud. It is free to use for up to 50 hours per month. In this ticket the config necessary for making this work with sagemath is added. 
 
-Docker images are pushed to GH Packages - https://github.com/mkoeppe?tab=packages&q=gitpod - and can be used to initialize gitpod
+You can try this out by going to https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates. 
 
-To try out:
-- https://gitpod.io/#https://github.com/mkoeppe/sage/tree/mkoeppe-9.5.beta9%2Bupdates
+It works by building docker images on github, push them to GH packages (https://github.com/mkoeppe?tab=packages&q=gitpod) and then use these ones as the base for the gitpod workspace.
+
+After this ticket is merged, we should the automatic prebuild using a github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env very quickly without the need to build anything.
 
 Follow-up: #33113 gitpod usability improvements
 
+Alternative: #32749, which only builds the docker image on gitpod (which is currently not really feasible as they have a time limit of 1h) 
+
``````




---

archive/issue_comments_537554.json:
```json
{
    "body": "<a id='comment:5'></a>\nThanks, this seems to work reasonable well for me (still 4 mins, but well...).\n\nOne could still shave off 250mb by uninstalling emacs-nox, vim and python2.7 but that is not very significant in view of an 8GB image in total.",
    "created_at": "2022-01-08T20:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537554",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:5'></a>
Thanks, this seems to work reasonable well for me (still 4 mins, but well...).

One could still shave off 250mb by uninstalling emacs-nox, vim and python2.7 but that is not very significant in view of an 8GB image in total.



---

archive/issue_comments_537555.json:
```json
{
    "body": "<a id='comment:6'></a>\nTicket description misses verb in this sentence:\n\n> After this ticket is merged, we should\n> the automatic prebuild using a github app\n",
    "created_at": "2022-01-09T06:05:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537555",
    "user": "https://github.com/slel"
}
```

<a id='comment:6'></a>
Ticket description misses verb in this sentence:

> After this ticket is merged, we should
> the automatic prebuild using a github app




---

archive/issue_comments_537556.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n \n It works by building docker images on github, push them to GH packages (https://github.com/mkoeppe?tab=packages&q=gitpod) and then use these ones as the base for the gitpod workspace.\n \n-After this ticket is merged, we should the automatic prebuild using a github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env very quickly without the need to build anything.\n+After this ticket is merged, we should activate the automatic prebuild by installing the github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env very quickly without the need to build anything.\n \n Follow-up: #33113 gitpod usability improvements\n \n``````\n",
    "created_at": "2022-01-09T12:05:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537556",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 
 It works by building docker images on github, push them to GH packages (https://github.com/mkoeppe?tab=packages&q=gitpod) and then use these ones as the base for the gitpod workspace.
 
-After this ticket is merged, we should the automatic prebuild using a github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env very quickly without the need to build anything.
+After this ticket is merged, we should activate the automatic prebuild by installing the github app (https://www.gitpod.io/docs/prebuilds#on-github). With this enabled, every push would trigger a prebuild of the complete environment (including the build of all dependencies and cythonizion) so that one has a up-to-date code env very quickly without the need to build anything.
 
 Follow-up: #33113 gitpod usability improvements
 
``````




---

archive/issue_comments_537557.json:
```json
{
    "body": "**Changing commit** from \"[f71c8b6c625017b0d37e956b0386111630ad6fe1](https://github.com/sagemath/sagetrac-mirror/commit/f71c8b6c625017b0d37e956b0386111630ad6fe1)\" to \"[f95322851c6494818bc08cd6fb3ce94e9c27debb](https://github.com/sagemath/sagetrac-mirror/commit/f95322851c6494818bc08cd6fb3ce94e9c27debb)\".",
    "created_at": "2022-01-09T18:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537557",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f71c8b6c625017b0d37e956b0386111630ad6fe1](https://github.com/sagemath/sagetrac-mirror/commit/f71c8b6c625017b0d37e956b0386111630ad6fe1)" to "[f95322851c6494818bc08cd6fb3ce94e9c27debb](https://github.com/sagemath/sagetrac-mirror/commit/f95322851c6494818bc08cd6fb3ce94e9c27debb)".



---

archive/issue_comments_537558.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f95322851c6494818bc08cd6fb3ce94e9c27debb\">f953228</a></td><td><code>Merge tag '9.5.rc0' into t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow</code></td></tr></table>\n",
    "created_at": "2022-01-09T18:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537558",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f95322851c6494818bc08cd6fb3ce94e9c27debb">f953228</a></td><td><code>Merge tag '9.5.rc0' into t/33103/gitpod_integration_using_docker_images_from_portability_testing_workflow</code></td></tr></table>




---

archive/issue_comments_537559.json:
```json
{
    "body": "**Changing dependencies** from \"#33068, #30933, #29285, #32868, #33067, #30677\" to \"#30933, #29285\".",
    "created_at": "2022-01-09T18:32:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537559",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#33068, #30933, #29285, #32868, #33067, #30677" to "#30933, #29285".



---

archive/issue_events_296869.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-01-11T12:17:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296869"
}
```



---

archive/issue_events_296870.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-01-11T12:17:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296870"
}
```



---

archive/issue_comments_537560.json:
```json
{
    "body": "**Changing reviewer** from \"Matthias Koeppe, ...\" to \"Matthias Koeppe, Dima Pasechnik\".",
    "created_at": "2022-01-11T12:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537560",
    "user": "https://github.com/dimpase"
}
```

**Changing reviewer** from "Matthias Koeppe, ..." to "Matthias Koeppe, Dima Pasechnik".



---

archive/issue_comments_537561.json:
```json
{
    "body": "<a id='comment:0'></a>\nlet's get this in, it seems to work, I can get `./sage` in console there, etc.\n`./sage -n` leads to problems, but probably that's not the way it's intendend.",
    "created_at": "2022-01-11T12:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537561",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:0'></a>
let's get this in, it seems to work, I can get `./sage` in console there, etc.
`./sage -n` leads to problems, but probably that's not the way it's intendend.



---

archive/issue_comments_537562.json:
```json
{
    "body": "<a id='comment:1'></a>\nThanks for the review!",
    "created_at": "2022-01-11T12:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537562",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:1'></a>
Thanks for the review!



---

archive/issue_comments_537563.json:
```json
{
    "body": "<a id='comment:132'></a>\nReplying to [dimpase](#comment%3A130):\n> `./sage -n` leads to problems, but probably that's not the way it's intendend.\n\n\nThere's no web browser in the container, so you can't use `sage -n`.\nTo use Jupyter notebooks, use the Command Palette to run \"Jupyter: Create New Jupyter Notebook\", see\nhttps://code.visualstudio.com/docs/datascience/jupyter-notebooks",
    "created_at": "2022-01-11T16:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537563",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:132'></a>
Replying to [dimpase](#comment%3A130):
> `./sage -n` leads to problems, but probably that's not the way it's intendend.


There's no web browser in the container, so you can't use `sage -n`.
To use Jupyter notebooks, use the Command Palette to run "Jupyter: Create New Jupyter Notebook", see
https://code.visualstudio.com/docs/datascience/jupyter-notebooks



---

archive/issue_comments_537564.json:
```json
{
    "body": "**Changing commit** from \"[f95322851c6494818bc08cd6fb3ce94e9c27debb](https://github.com/sagemath/sagetrac-mirror/commit/f95322851c6494818bc08cd6fb3ce94e9c27debb)\" to \"[2d0902a1fee81d0749cc274fbec1d965cc522466](https://github.com/sagemath/sagetrac-mirror/commit/2d0902a1fee81d0749cc274fbec1d965cc522466)\".",
    "created_at": "2022-01-11T20:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537564",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f95322851c6494818bc08cd6fb3ce94e9c27debb](https://github.com/sagemath/sagetrac-mirror/commit/f95322851c6494818bc08cd6fb3ce94e9c27debb)" to "[2d0902a1fee81d0749cc274fbec1d965cc522466](https://github.com/sagemath/sagetrac-mirror/commit/2d0902a1fee81d0749cc274fbec1d965cc522466)".



---

archive/issue_events_296871.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2022-01-11T20:47:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296871"
}
```



---

archive/issue_events_296872.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2022-01-11T20:47:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296872"
}
```



---

archive/issue_comments_537565.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d0902a1fee81d0749cc274fbec1d965cc522466\">2d0902a</a></td><td><code>src/doc/en/developer/workspace.rst: Fix markup</code></td></tr></table>\n",
    "created_at": "2022-01-11T20:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537565",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d0902a1fee81d0749cc274fbec1d965cc522466">2d0902a</a></td><td><code>src/doc/en/developer/workspace.rst: Fix markup</code></td></tr></table>




---

archive/issue_comments_537566.json:
```json
{
    "body": "<a id='comment:4'></a>\nFixes the PDF docbuild",
    "created_at": "2022-01-11T20:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537566",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
Fixes the PDF docbuild



---

archive/issue_events_296873.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-11T20:47:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296873"
}
```



---

archive/issue_events_296874.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-11T20:47:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296874"
}
```



---

archive/issue_comments_537567.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08048c3e5d5d995cb5ebfd952d84eb204cb8c41c\">08048c3</a></td><td><code>.github/workflows/tox.yml: Transform GITHUB_REF_NAME to a valid docker tag</code></td></tr></table>\n",
    "created_at": "2022-01-12T06:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537567",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08048c3e5d5d995cb5ebfd952d84eb204cb8c41c">08048c3</a></td><td><code>.github/workflows/tox.yml: Transform GITHUB_REF_NAME to a valid docker tag</code></td></tr></table>




---

archive/issue_events_296875.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2022-01-12T06:25:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296875"
}
```



---

archive/issue_events_296876.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2022-01-12T06:25:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296876"
}
```



---

archive/issue_comments_537568.json:
```json
{
    "body": "**Changing commit** from \"[2d0902a1fee81d0749cc274fbec1d965cc522466](https://github.com/sagemath/sagetrac-mirror/commit/2d0902a1fee81d0749cc274fbec1d965cc522466)\" to \"[08048c3e5d5d995cb5ebfd952d84eb204cb8c41c](https://github.com/sagemath/sagetrac-mirror/commit/08048c3e5d5d995cb5ebfd952d84eb204cb8c41c)\".",
    "created_at": "2022-01-12T06:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537568",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2d0902a1fee81d0749cc274fbec1d965cc522466](https://github.com/sagemath/sagetrac-mirror/commit/2d0902a1fee81d0749cc274fbec1d965cc522466)" to "[08048c3e5d5d995cb5ebfd952d84eb204cb8c41c](https://github.com/sagemath/sagetrac-mirror/commit/08048c3e5d5d995cb5ebfd952d84eb204cb8c41c)".



---

archive/issue_comments_537569.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/078f247c9a5ea383178499e9b0e990777f497a6e\">078f247</a></td><td><code>.github/workflows/tox*.yml: Transform GITHUB_REF_NAME to a valid docker tag</code></td></tr></table>\n",
    "created_at": "2022-01-12T07:06:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537569",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/078f247c9a5ea383178499e9b0e990777f497a6e">078f247</a></td><td><code>.github/workflows/tox*.yml: Transform GITHUB_REF_NAME to a valid docker tag</code></td></tr></table>




---

archive/issue_comments_537570.json:
```json
{
    "body": "**Changing commit** from \"[08048c3e5d5d995cb5ebfd952d84eb204cb8c41c](https://github.com/sagemath/sagetrac-mirror/commit/08048c3e5d5d995cb5ebfd952d84eb204cb8c41c)\" to \"[078f247c9a5ea383178499e9b0e990777f497a6e](https://github.com/sagemath/sagetrac-mirror/commit/078f247c9a5ea383178499e9b0e990777f497a6e)\".",
    "created_at": "2022-01-12T07:06:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537570",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[08048c3e5d5d995cb5ebfd952d84eb204cb8c41c](https://github.com/sagemath/sagetrac-mirror/commit/08048c3e5d5d995cb5ebfd952d84eb204cb8c41c)" to "[078f247c9a5ea383178499e9b0e990777f497a6e](https://github.com/sagemath/sagetrac-mirror/commit/078f247c9a5ea383178499e9b0e990777f497a6e)".



---

archive/issue_events_296877.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-12T07:07:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296877"
}
```



---

archive/issue_events_296878.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-12T07:07:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296878"
}
```



---

archive/issue_comments_537571.json:
```json
{
    "body": "<a id='comment:8'></a>\nIs it easy to configure launching this (with prebuids) on branches in https://github.com/sagemath/sagetrac-mirror ?",
    "created_at": "2022-01-13T13:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537571",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>
Is it easy to configure launching this (with prebuids) on branches in https://github.com/sagemath/sagetrac-mirror ?



---

archive/issue_comments_537572.json:
```json
{
    "body": "<a id='comment:9'></a>\nYes, it's only a few clicks see: https://www.gitpod.io/docs/prebuilds#projects-and-prebuilds\nHowever, it needs to be done by someone with rights to install apps in the sagemath org.",
    "created_at": "2022-01-13T14:31:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537572",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:9'></a>
Yes, it's only a few clicks see: https://www.gitpod.io/docs/prebuilds#projects-and-prebuilds
However, it needs to be done by someone with rights to install apps in the sagemath org.



---

archive/issue_comments_537573.json:
```json
{
    "body": "<a id='comment:140'></a>\nReplying to [gh-tobiasdiez](#comment%3A139):\n> Yes, it's only a few clicks see: https://www.gitpod.io/docs/prebuilds#projects-and-prebuilds\n> However, it needs to be done by someone with rights to install apps in the sagemath org.\n\n\nI've sent you an invite. I guess I installed their \"app\", but I don't see how to proceed.\n(I think it should be enabled on the branch of this ticket only, before it's merged.)\n\nDid you see my email message about trac access?",
    "created_at": "2022-01-13T17:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537573",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:140'></a>
Replying to [gh-tobiasdiez](#comment%3A139):
> Yes, it's only a few clicks see: https://www.gitpod.io/docs/prebuilds#projects-and-prebuilds
> However, it needs to be done by someone with rights to install apps in the sagemath org.


I've sent you an invite. I guess I installed their "app", but I don't see how to proceed.
(I think it should be enabled on the branch of this ticket only, before it's merged.)

Did you see my email message about trac access?



---

archive/issue_comments_537574.json:
```json
{
    "body": "<a id='comment:1'></a>\nThanks! I've now created a \"team\" sagemath and added the `sage` and `sagetrac-mirror` as projects. If you have a gitpod account and want to be invited to this team (in order to access the config), just post your email address and I send an invite.\n\nCurrently, the creation of the image fails however due to a permission error:\n\n```\n > [internal] load metadata for ghcr.io/sagemath/sage/sage-docker-gitpod-standard-with-targets:dev:\n------\n.gitpod.Dockerfile:3\n--------------------\n   1 |     ARG BASE_GITHUB_REPOSITORY=sagemath/sage\n   2 |     ARG BASE_TAG=dev\n   3 | >>> FROM ghcr.io/${BASE_GITHUB_REPOSITORY}/sage-docker-gitpod-standard-with-targets:${BASE_TAG} as with-targets\n   4 |     RUN sudo rm -rf /var/cache/debconf/* /var/lib/apt/lists/* /tmp/* /var/tmp/*\n   5 |     # Fast doc rebuilds do not work because\n--------------------\nerror: failed to solve: failed to fetch anonymous token: unexpected status: 403 Forbidden\n```\nMatthias, can you have a look please?\n\nhttps://gitpod.io/#prebuild/https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow",
    "created_at": "2022-01-14T11:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537574",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:1'></a>
Thanks! I've now created a "team" sagemath and added the `sage` and `sagetrac-mirror` as projects. If you have a gitpod account and want to be invited to this team (in order to access the config), just post your email address and I send an invite.

Currently, the creation of the image fails however due to a permission error:

```
 > [internal] load metadata for ghcr.io/sagemath/sage/sage-docker-gitpod-standard-with-targets:dev:
------
.gitpod.Dockerfile:3
--------------------
   1 |     ARG BASE_GITHUB_REPOSITORY=sagemath/sage
   2 |     ARG BASE_TAG=dev
   3 | >>> FROM ghcr.io/${BASE_GITHUB_REPOSITORY}/sage-docker-gitpod-standard-with-targets:${BASE_TAG} as with-targets
   4 |     RUN sudo rm -rf /var/cache/debconf/* /var/lib/apt/lists/* /tmp/* /var/tmp/*
   5 |     # Fast doc rebuilds do not work because
--------------------
error: failed to solve: failed to fetch anonymous token: unexpected status: 403 Forbidden
```
Matthias, can you have a look please?

https://gitpod.io/#prebuild/https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow



---

archive/issue_comments_537575.json:
```json
{
    "body": "<a id='comment:142'></a>\nReplying to [gh-tobiasdiez](#comment%3A141):\n> Thanks! I've now created a \"team\" sagemath and added the `sage` and `sagetrac-mirror` as projects. If you have a gitpod account and want to be invited to this team (in order to access the config), just post your email address and I send an invite.\n\n\nmy email is shown on my [GitHub](GitHub) account https://github.com/dimpase\n\nThanks!",
    "created_at": "2022-01-14T12:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537575",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:142'></a>
Replying to [gh-tobiasdiez](#comment%3A141):
> Thanks! I've now created a "team" sagemath and added the `sage` and `sagetrac-mirror` as projects. If you have a gitpod account and want to be invited to this team (in order to access the config), just post your email address and I send an invite.


my email is shown on my [GitHub](GitHub) account https://github.com/dimpase

Thanks!



---

archive/issue_comments_537576.json:
```json
{
    "body": "<a id='comment:143'></a>\nReplying to [gh-tobiasdiez](#comment%3A141):\n> Currently, the creation of the image fails however due to a permission error:\n> \n> ```\n>  > [internal] load metadata for ghcr.io/sagemath/sage/sage-docker-gitpod-standard-with-targets:dev:\n> ------\n> .gitpod.Dockerfile:3\n> --------------------\n>    1 |     ARG BASE_GITHUB_REPOSITORY=sagemath/sage\n>    2 |     ARG BASE_TAG=dev\n>    3 | >>> FROM ghcr.io/${BASE_GITHUB_REPOSITORY}/sage-docker-gitpod-standard-with-targets:${BASE_TAG} as with-targets\n>    4 |     RUN sudo rm -rf /var/cache/debconf/* /var/lib/apt/lists/* /tmp/* /var/tmp/*\n>    5 |     # Fast doc rebuilds do not work because\n> --------------------\n> error: failed to solve: failed to fetch anonymous token: unexpected status: 403 Forbidden\n> ```\n\n\nI think you need to deposit a secret providing read access similar to what is explained in\nhttps://www.gitpod.io/docs/self-hosted/latest/configuration/docker-registry",
    "created_at": "2022-01-14T16:20:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537576",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:143'></a>
Replying to [gh-tobiasdiez](#comment%3A141):
> Currently, the creation of the image fails however due to a permission error:
> 
> ```
>  > [internal] load metadata for ghcr.io/sagemath/sage/sage-docker-gitpod-standard-with-targets:dev:
> ------
> .gitpod.Dockerfile:3
> --------------------
>    1 |     ARG BASE_GITHUB_REPOSITORY=sagemath/sage
>    2 |     ARG BASE_TAG=dev
>    3 | >>> FROM ghcr.io/${BASE_GITHUB_REPOSITORY}/sage-docker-gitpod-standard-with-targets:${BASE_TAG} as with-targets
>    4 |     RUN sudo rm -rf /var/cache/debconf/* /var/lib/apt/lists/* /tmp/* /var/tmp/*
>    5 |     # Fast doc rebuilds do not work because
> --------------------
> error: failed to solve: failed to fetch anonymous token: unexpected status: 403 Forbidden
> ```


I think you need to deposit a secret providing read access similar to what is explained in
https://www.gitpod.io/docs/self-hosted/latest/configuration/docker-registry



---

archive/issue_comments_537577.json:
```json
{
    "body": "<a id='comment:4'></a>\n... alternatively I suppose we could push the required Docker images to DockerHub -- but I don't have write access there; @saraedum, could you deposit an access token for that as a secret here? https://github.com/organizations/sagemath/settings/secrets/actions",
    "created_at": "2022-01-14T18:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537577",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
... alternatively I suppose we could push the required Docker images to DockerHub -- but I don't have write access there; @saraedum, could you deposit an access token for that as a secret here? https://github.com/organizations/sagemath/settings/secrets/actions



---

archive/issue_comments_537578.json:
```json
{
    "body": "<a id='comment:146'></a>\nReplying to [mkoeppe](#comment%3A143):\n> Replying to [gh-tobiasdiez](#comment%3A141):\n> > Currently, the creation of the image fails however due to a permission error:\n> > \n> > ```\n> >  > [internal] load metadata for ghcr.io/sagemath/sage/sage-docker-gitpod-standard-with-targets:dev:\n> > ------\n> > .gitpod.Dockerfile:3\n> > --------------------\n> >    1 |     ARG BASE_GITHUB_REPOSITORY=sagemath/sage\n> >    2 |     ARG BASE_TAG=dev\n> >    3 | >>> FROM ghcr.io/${BASE_GITHUB_REPOSITORY}/sage-docker-gitpod-standard-with-targets:${BASE_TAG} as with-targets\n> >    4 |     RUN sudo rm -rf /var/cache/debconf/* /var/lib/apt/lists/* /tmp/* /var/tmp/*\n> >    5 |     # Fast doc rebuilds do not work because\n> > --------------------\n> > error: failed to solve: failed to fetch anonymous token: unexpected status: 403 Forbidden\n> > ```\n\n> \n> I think you need to deposit a secret providing read access similar to what is explained in\n> https://www.gitpod.io/docs/self-hosted/latest/configuration/docker-registry\n\n\nThat link is for a self-hosted gitpod and thus does not apply to our situation (we don't have a gitpod config other than what is committed in this branch).\n\nI think the issue is that the image `sage-docker-gitpod-standard-with-targets` is not yet published under `sagemath/sage`. But how is this then working with your account Matthias?",
    "created_at": "2022-01-14T20:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537578",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:146'></a>
Replying to [mkoeppe](#comment%3A143):
> Replying to [gh-tobiasdiez](#comment%3A141):
> > Currently, the creation of the image fails however due to a permission error:
> > 
> > ```
> >  > [internal] load metadata for ghcr.io/sagemath/sage/sage-docker-gitpod-standard-with-targets:dev:
> > ------
> > .gitpod.Dockerfile:3
> > --------------------
> >    1 |     ARG BASE_GITHUB_REPOSITORY=sagemath/sage
> >    2 |     ARG BASE_TAG=dev
> >    3 | >>> FROM ghcr.io/${BASE_GITHUB_REPOSITORY}/sage-docker-gitpod-standard-with-targets:${BASE_TAG} as with-targets
> >    4 |     RUN sudo rm -rf /var/cache/debconf/* /var/lib/apt/lists/* /tmp/* /var/tmp/*
> >    5 |     # Fast doc rebuilds do not work because
> > --------------------
> > error: failed to solve: failed to fetch anonymous token: unexpected status: 403 Forbidden
> > ```

> 
> I think you need to deposit a secret providing read access similar to what is explained in
> https://www.gitpod.io/docs/self-hosted/latest/configuration/docker-registry


That link is for a self-hosted gitpod and thus does not apply to our situation (we don't have a gitpod config other than what is committed in this branch).

I think the issue is that the image `sage-docker-gitpod-standard-with-targets` is not yet published under `sagemath/sage`. But how is this then working with your account Matthias?



---

archive/issue_comments_537579.json:
```json
{
    "body": "<a id='comment:147'></a>\nReplying to [gh-tobiasdiez](#comment%3A146):\n> the image `sage-docker-gitpod-standard-with-targets` is not yet published under `sagemath/sage`. But how is this then working with your account Matthias?\n\n\nBecause on my testing branch used for the prebuild, I am setting the correct repo:\nhttps://github.com/mkoeppe/sage/blob/mkoeppe-9.5.beta9%2Bupdates/docker/.gitpod.Dockerfile",
    "created_at": "2022-01-14T20:12:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537579",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:147'></a>
Replying to [gh-tobiasdiez](#comment%3A146):
> the image `sage-docker-gitpod-standard-with-targets` is not yet published under `sagemath/sage`. But how is this then working with your account Matthias?


Because on my testing branch used for the prebuild, I am setting the correct repo:
https://github.com/mkoeppe/sage/blob/mkoeppe-9.5.beta9%2Bupdates/docker/.gitpod.Dockerfile



---

archive/issue_comments_537580.json:
```json
{
    "body": "<a id='comment:8'></a>\n(And because every GH workflow automatically has the credentials to access its own GH packages (gchr.io)!)",
    "created_at": "2022-01-14T20:14:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537580",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
(And because every GH workflow automatically has the credentials to access its own GH packages (gchr.io)!)



---

archive/issue_comments_537581.json:
```json
{
    "body": "<a id='comment:9'></a>\nAhh okay, I thought this is an environment variable that is picked up somewhere.\n\nSo in this case we just have to wait until this ticket is merged, which would then build and publish the docker image to `sagemath/sage`, right?",
    "created_at": "2022-01-14T20:15:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537581",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:9'></a>
Ahh okay, I thought this is an environment variable that is picked up somewhere.

So in this case we just have to wait until this ticket is merged, which would then build and publish the docker image to `sagemath/sage`, right?



---

archive/issue_comments_537582.json:
```json
{
    "body": "<a id='comment:150'></a>\nReplying to [gh-tobiasdiez](#comment%3A149):\n> wait until this ticket is merged, which would then build and publish the docker image to `sagemath/sage`, right?\n\n\nYes, on the next release that includes this branch, the Docker image will be pushed (by separate instances of the workflow) both to `gchr.io/sagemath/sage` and to `gchr.io/sagemath/sagetrac-mirror`.\n\nWe will then see whether the 403 Forbidden will go away. I think it will not, for workflows run on `github.com/sagemath/sagetrac-mirror`, because it may not have the `read:packages` credential for `gchr.io/sagemath/sage`.",
    "created_at": "2022-01-14T20:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537582",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:150'></a>
Replying to [gh-tobiasdiez](#comment%3A149):
> wait until this ticket is merged, which would then build and publish the docker image to `sagemath/sage`, right?


Yes, on the next release that includes this branch, the Docker image will be pushed (by separate instances of the workflow) both to `gchr.io/sagemath/sage` and to `gchr.io/sagemath/sagetrac-mirror`.

We will then see whether the 403 Forbidden will go away. I think it will not, for workflows run on `github.com/sagemath/sagetrac-mirror`, because it may not have the `read:packages` credential for `gchr.io/sagemath/sage`.



---

archive/issue_comments_537583.json:
```json
{
    "body": "<a id='comment:1'></a>\nI think we may need to do this:\nhttps://docs.github.com/en/packages/learn-github-packages/configuring-a-packages-access-control-and-visibility#configuring-visibility-of-container-images-for-an-organization",
    "created_at": "2022-01-16T21:38:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537583",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
I think we may need to do this:
https://docs.github.com/en/packages/learn-github-packages/configuring-a-packages-access-control-and-visibility#configuring-visibility-of-container-images-for-an-organization



---

archive/issue_comments_537584.json:
```json
{
    "body": "<a id='comment:2'></a>\nWell, no, all packages are already set to \"public\": For example https://github.com/orgs/sagemath/packages/container/sage%2Fsage-docker-ubuntu-focal-standard-configured/settings",
    "created_at": "2022-01-16T21:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537584",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
Well, no, all packages are already set to "public": For example https://github.com/orgs/sagemath/packages/container/sage%2Fsage-docker-ubuntu-focal-standard-configured/settings



---

archive/issue_comments_537585.json:
```json
{
    "body": "<a id='comment:3'></a>\nBut perhaps this is needed: https://docs.github.com/en/packages/learn-github-packages/configuring-a-packages-access-control-and-visibility#github-actions-access-for-organization-owned-container-images",
    "created_at": "2022-01-16T21:46:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537585",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
But perhaps this is needed: https://docs.github.com/en/packages/learn-github-packages/configuring-a-packages-access-control-and-visibility#github-actions-access-for-organization-owned-container-images



---

archive/issue_comments_537586.json:
```json
{
    "body": "<a id='comment:4'></a>\nNo, this makes no sense.",
    "created_at": "2022-01-16T21:53:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537586",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
No, this makes no sense.



---

archive/issue_events_296879.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-28T23:03:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296879"
}
```



---

archive/issue_events_296880.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-28T23:03:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296880"
}
```



---

archive/issue_events_296881.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-11T19:50:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296881"
}
```



---

archive/issue_comments_537587.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow)\" to \"[078f247c9a5ea383178499e9b0e990777f497a6e](https://github.com/sagemath/sagetrac-mirror/commit/078f247c9a5ea383178499e9b0e990777f497a6e)\".",
    "created_at": "2022-02-12T22:04:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33103#issuecomment-537587",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/gitpod_integration_using_docker_images_from_portability_testing_workflow)" to "[078f247c9a5ea383178499e9b0e990777f497a6e](https://github.com/sagemath/sagetrac-mirror/commit/078f247c9a5ea383178499e9b0e990777f497a6e)".



---

archive/issue_events_296882.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-12T22:04:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296882"
}
```



---

archive/issue_events_296883.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-12T22:04:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33103",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33103#event-296883"
}
```
