# Issue 33507: sagemath_doc_html: Use jupyter-sphinx for 3D graphics

archive/issues_033270.json:
```json
{
    "assignees": [],
    "body": "We use jupyter-sphinx\n\n\u200b    https://jupyter-sphinx.readthedocs.io/en/latest/\n\nto facilitate live sage documentation based on jupyter and Thebe.\n\nFor documentation authors, new directives are available:\n\n```\n.. ONLY:: pdf \n```\n\n```\n.. JUPYTER-EXECUTE::  \n```\nin addition to\n\n```\n.. ONLY:: html\n```\n\nSee the branch for examples.\n\nRelated tickets: #31027\n\nDepends on #33529\n\nCC:  @kwankyu @jhpalmieri @nthiery @egourgoulhon @dimpase\n\nBranch: **[`72c8378`](https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746)**\n\nReviewer: **Matthias Koeppe, Dima Pasechnik**\n\nAuthor: **Kwankyu Lee, Matthias Koeppe**\n\nComponent: **documentation**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33507_\n\n",
    "closed_at": "2022-04-02T10:52:54Z",
    "created_at": "2022-03-15T20:50:22Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20documentation",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sagemath_doc_html: Use jupyter-sphinx for 3D graphics",
    "type": "issue",
    "updated_at": "2022-04-06T04:38:14Z",
    "url": "https://github.com/sagemath/sage/issues/33507",
    "user": "https://github.com/mkoeppe"
}
```
We use jupyter-sphinx

â€‹    https://jupyter-sphinx.readthedocs.io/en/latest/

to facilitate live sage documentation based on jupyter and Thebe.

For documentation authors, new directives are available:

```
.. ONLY:: pdf 
```

```
.. JUPYTER-EXECUTE::  
```
in addition to

```
.. ONLY:: html
```

See the branch for examples.

Related tickets: #31027

Depends on #33529

CC:  @kwankyu @jhpalmieri @nthiery @egourgoulhon @dimpase

Branch: **[`72c8378`](https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746)**

Reviewer: **Matthias Koeppe, Dima Pasechnik**

Author: **Kwankyu Lee, Matthias Koeppe**

Component: **documentation**

_Issue created by migration from https://trac.sagemath.org/ticket/33507_





---

archive/issue_events_456893.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-15T20:50:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33507#event-456893"
}
```



---

archive/issue_events_456894.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-15T20:50:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "c: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33507#event-456894"
}
```



---

archive/issue_events_456895.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-15T20:50:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33507#event-456895"
}
```



---

archive/issue_events_456896.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-15T20:50:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33507#event-456896"
}
```



---

archive/issue_comments_541098.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,4 @@\n \n We should be able to do the same.\n \n+See also #31027\n``````\n",
    "created_at": "2022-03-15T20:52:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541098",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,4 @@
 
 We should be able to do the same.
 
+See also #31027
``````




---

archive/issue_comments_541099.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nIt uses nbsphinx: https://nbsphinx.readthedocs.io/en/0.8.8/\n\nnbsphinx allows including jupyter notebooks in toctrees. It seems that we cannot include a single cell of a jupyter notebook as a part of our documentation, which I guess is what we want.",
    "created_at": "2022-03-16T03:58:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541099",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:2" align="right">comment:2</div>

It uses nbsphinx: https://nbsphinx.readthedocs.io/en/0.8.8/

nbsphinx allows including jupyter notebooks in toctrees. It seems that we cannot include a single cell of a jupyter notebook as a part of our documentation, which I guess is what we want.



---

archive/issue_comments_541100.json:
```json
{
    "body": "Branch: **[public/33507](https://github.com/sagemath/sagetrac-mirror/tree/public/33507)**",
    "created_at": "2022-03-16T05:05:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541100",
    "user": "https://github.com/kwankyu"
}
```

Branch: **[public/33507](https://github.com/sagemath/sagetrac-mirror/tree/public/33507)**



---

archive/issue_comments_541101.json:
```json
{
    "body": "Commit: **[`1b7e46b`](https://github.com/sagemath/sagetrac-mirror/commit/1b7e46b866c078967768f5bda751e47fd9e22aee)**",
    "created_at": "2022-03-16T05:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541101",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`1b7e46b`](https://github.com/sagemath/sagetrac-mirror/commit/1b7e46b866c078967768f5bda751e47fd9e22aee)**



---

archive/issue_comments_541102.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b7e46b866c078967768f5bda751e47fd9e22aee\"><code>1b7e46b</code></a></td><td><code>Experiments with jupyter-spinx</code></td></tr></table>\n",
    "created_at": "2022-03-16T05:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541102",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b7e46b866c078967768f5bda751e47fd9e22aee"><code>1b7e46b</code></a></td><td><code>Experiments with jupyter-spinx</code></td></tr></table>




---

archive/issue_comments_541103.json:
```json
{
    "body": "Changed commit from **[`1b7e46b`](https://github.com/sagemath/sagetrac-mirror/commit/1b7e46b866c078967768f5bda751e47fd9e22aee)** to **[`58f1338`](https://github.com/sagemath/sagetrac-mirror/commit/58f1338077b41558db78b6c5e4f84543ba9c86ce)**",
    "created_at": "2022-03-16T05:08:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541103",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1b7e46b`](https://github.com/sagemath/sagetrac-mirror/commit/1b7e46b866c078967768f5bda751e47fd9e22aee)** to **[`58f1338`](https://github.com/sagemath/sagetrac-mirror/commit/58f1338077b41558db78b6c5e4f84543ba9c86ce)**



---

archive/issue_comments_541104.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58f1338077b41558db78b6c5e4f84543ba9c86ce\"><code>58f1338</code></a></td><td><code>Experiments with jupyter-sphinx</code></td></tr></table>\n",
    "created_at": "2022-03-16T05:08:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541104",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58f1338077b41558db78b6c5e4f84543ba9c86ce"><code>58f1338</code></a></td><td><code>Experiments with jupyter-sphinx</code></td></tr></table>




---

archive/issue_comments_541105.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThis tool \n\nhttps://jupyter-sphinx.readthedocs.io/en/latest/\n\nworks well.\n\nI uploaded a branch to experiment with the tool. First `sage -pip install jupyter-sphinx`.",
    "created_at": "2022-03-16T05:10:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541105",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:6" align="right">comment:6</div>

This tool 

https://jupyter-sphinx.readthedocs.io/en/latest/

works well.

I uploaded a branch to experiment with the tool. First `sage -pip install jupyter-sphinx`.



---

archive/issue_events_456897.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-16T05:28:00Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "title_is": "sagemath_doc_html: Use jupyter-sphinx for 3D graphics",
    "title_was": "sagemath_doc_html: Use pythreejs for 3D graphics",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33507#event-456897"
}
```



---

archive/issue_comments_541106.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThis package would be easy to add, we already have all dependencies -  https://github.com/jupyter/jupyter-sphinx/blob/master/setup.py#L30",
    "created_at": "2022-03-16T05:28:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541106",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

This package would be easy to add, we already have all dependencies -  https://github.com/jupyter/jupyter-sphinx/blob/master/setup.py#L30



---

archive/issue_comments_541107.json:
```json
{
    "body": "Changed commit from **[`58f1338`](https://github.com/sagemath/sagetrac-mirror/commit/58f1338077b41558db78b6c5e4f84543ba9c86ce)** to **[`8f8cd2b`](https://github.com/sagemath/sagetrac-mirror/commit/8f8cd2bb2e4939fe56bcf7353f01d62e1083e972)**",
    "created_at": "2022-03-16T05:33:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541107",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`58f1338`](https://github.com/sagemath/sagetrac-mirror/commit/58f1338077b41558db78b6c5e4f84543ba9c86ce)** to **[`8f8cd2b`](https://github.com/sagemath/sagetrac-mirror/commit/8f8cd2bb2e4939fe56bcf7353f01d62e1083e972)**



---

archive/issue_comments_541108.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f8cd2bb2e4939fe56bcf7353f01d62e1083e972\"><code>8f8cd2b</code></a></td><td><code>Activate Thebelab</code></td></tr></table>\n",
    "created_at": "2022-03-16T05:33:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541108",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f8cd2bb2e4939fe56bcf7353f01d62e1083e972"><code>8f8cd2b</code></a></td><td><code>Activate Thebelab</code></td></tr></table>




---

archive/issue_comments_541109.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nWe need a sagemath binder repo for Thebe to work.",
    "created_at": "2022-03-16T08:30:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541109",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:10" align="right">comment:10</div>

We need a sagemath binder repo for Thebe to work.



---

archive/issue_comments_541110.json:
```json
{
    "body": "Changed commit from **[`8f8cd2b`](https://github.com/sagemath/sagetrac-mirror/commit/8f8cd2bb2e4939fe56bcf7353f01d62e1083e972)** to **[`84cec60`](https://github.com/sagemath/sagetrac-mirror/commit/84cec60baa8e0969bc81dcc797cdf37aafeb76c9)**",
    "created_at": "2022-03-17T04:53:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541110",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8f8cd2b`](https://github.com/sagemath/sagetrac-mirror/commit/8f8cd2bb2e4939fe56bcf7353f01d62e1083e972)** to **[`84cec60`](https://github.com/sagemath/sagetrac-mirror/commit/84cec60baa8e0969bc81dcc797cdf37aafeb76c9)**



---

archive/issue_comments_541111.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84cec60baa8e0969bc81dcc797cdf37aafeb76c9\"><code>84cec60</code></a></td><td><code>For pdf documentation</code></td></tr></table>\n",
    "created_at": "2022-03-17T04:53:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541111",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84cec60baa8e0969bc81dcc797cdf37aafeb76c9"><code>84cec60</code></a></td><td><code>For pdf documentation</code></td></tr></table>




---

archive/issue_comments_541112.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThe last commit provides an example to provide live images to htmls and static images to pdfs.",
    "created_at": "2022-03-17T05:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541112",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:12" align="right">comment:12</div>

The last commit provides an example to provide live images to htmls and static images to pdfs.



---

archive/issue_comments_541113.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOne annoying thing is that `.. only:: latex` works but `.. only:: pdf` doesn't.",
    "created_at": "2022-03-17T05:18:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541113",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:13" align="right">comment:13</div>

One annoying thing is that `.. only:: latex` works but `.. only:: pdf` doesn't.



---

archive/issue_comments_541114.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f01f21a8310b8d1003c72a3f023e8be253edcb2\"><code>5f01f21</code></a></td><td><code>Forgotten images</code></td></tr></table>\n",
    "created_at": "2022-03-17T05:22:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541114",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f01f21a8310b8d1003c72a3f023e8be253edcb2"><code>5f01f21</code></a></td><td><code>Forgotten images</code></td></tr></table>




---

archive/issue_comments_541115.json:
```json
{
    "body": "Changed commit from **[`84cec60`](https://github.com/sagemath/sagetrac-mirror/commit/84cec60baa8e0969bc81dcc797cdf37aafeb76c9)** to **[`5f01f21`](https://github.com/sagemath/sagetrac-mirror/commit/5f01f21a8310b8d1003c72a3f023e8be253edcb2)**",
    "created_at": "2022-03-17T05:22:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541115",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`84cec60`](https://github.com/sagemath/sagetrac-mirror/commit/84cec60baa8e0969bc81dcc797cdf37aafeb76c9)** to **[`5f01f21`](https://github.com/sagemath/sagetrac-mirror/commit/5f01f21a8310b8d1003c72a3f023e8be253edcb2)**



---

archive/issue_comments_541116.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73c8c37a71e423adcc2a1f16a9e54854f883d408\"><code>73c8c37</code></a></td><td><code>build/pkgs/jupyter_sphinx: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bbc276e7b1682a3fe18c4eca88b95d97664ee06c\"><code>bbc276e</code></a></td><td><code>build/pkgs/sagemath_doc_html/dependencies: Add jupyter_sphinx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6133f9ffa93630f48746630730886ec52cf53e02\"><code>6133f9f</code></a></td><td><code>configure.ac (--disable-doc): Disable jupyter_sphinx too</code></td></tr></table>\n",
    "created_at": "2022-03-17T07:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541116",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73c8c37a71e423adcc2a1f16a9e54854f883d408"><code>73c8c37</code></a></td><td><code>build/pkgs/jupyter_sphinx: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bbc276e7b1682a3fe18c4eca88b95d97664ee06c"><code>bbc276e</code></a></td><td><code>build/pkgs/sagemath_doc_html/dependencies: Add jupyter_sphinx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6133f9ffa93630f48746630730886ec52cf53e02"><code>6133f9f</code></a></td><td><code>configure.ac (--disable-doc): Disable jupyter_sphinx too</code></td></tr></table>




---

archive/issue_comments_541117.json:
```json
{
    "body": "Changed commit from **[`5f01f21`](https://github.com/sagemath/sagetrac-mirror/commit/5f01f21a8310b8d1003c72a3f023e8be253edcb2)** to **[`6133f9f`](https://github.com/sagemath/sagetrac-mirror/commit/6133f9ffa93630f48746630730886ec52cf53e02)**",
    "created_at": "2022-03-17T07:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541117",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5f01f21`](https://github.com/sagemath/sagetrac-mirror/commit/5f01f21a8310b8d1003c72a3f023e8be253edcb2)** to **[`6133f9f`](https://github.com/sagemath/sagetrac-mirror/commit/6133f9ffa93630f48746630730886ec52cf53e02)**



---

archive/issue_comments_541118.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHere's the package",
    "created_at": "2022-03-17T07:13:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541118",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

Here's the package



---

archive/issue_comments_541119.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@kwankyu](#comment:10):\n> We need a sagemath binder repo for Thebe to work.\n\nI fixed 'Sage binder env' about a month ago:\n\nhttps://github.com/sagemath/sage-binder-env\n\nIt now uses conda to install Sage which is more maintained than\nSage's docker image.",
    "created_at": "2022-03-17T08:15:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541119",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@kwankyu](#comment:10):
> We need a sagemath binder repo for Thebe to work.

I fixed 'Sage binder env' about a month ago:

https://github.com/sagemath/sage-binder-env

It now uses conda to install Sage which is more maintained than
Sage's docker image.



---

archive/issue_comments_541120.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@mkoeppe](#comment:16):\n> Here's the package\n\nThank you!",
    "created_at": "2022-03-17T08:29:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541120",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@mkoeppe](#comment:16):
> Here's the package

Thank you!



---

archive/issue_comments_541121.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@nthiery](#comment:17):\n> Replying to [@kwankyu](#comment:10):\n> > We need a sagemath binder repo for Thebe to work.\n\n> \n> I fixed 'Sage binder env' about a month ago:\n> \n> https://github.com/sagemath/sage-binder-env\n> \n> It now uses conda to install Sage which is more maintained than\n> Sage's docker image.\n\nI have no experience with Thebe. Jupyter-sphinx supports Thebe. But running an interact example cell through jupyter-sphinx only shows `Waiting for kernel...`. Is this supposed to take long? Would the interact work well once the kernel is up?",
    "created_at": "2022-03-17T08:52:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541121",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@nthiery](#comment:17):
> Replying to [@kwankyu](#comment:10):
> > We need a sagemath binder repo for Thebe to work.

> 
> I fixed 'Sage binder env' about a month ago:
> 
> https://github.com/sagemath/sage-binder-env
> 
> It now uses conda to install Sage which is more maintained than
> Sage's docker image.

I have no experience with Thebe. Jupyter-sphinx supports Thebe. But running an interact example cell through jupyter-sphinx only shows `Waiting for kernel...`. Is this supposed to take long? Would the interact work well once the kernel is up?



---

archive/issue_comments_541122.json:
```json
{
    "body": "Changed commit from **[`6133f9f`](https://github.com/sagemath/sagetrac-mirror/commit/6133f9ffa93630f48746630730886ec52cf53e02)** to **[`7641a72`](https://github.com/sagemath/sagetrac-mirror/commit/7641a72d901080420d59dbc5c3dfa02320b0e56d)**",
    "created_at": "2022-03-18T09:00:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541122",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6133f9f`](https://github.com/sagemath/sagetrac-mirror/commit/6133f9ffa93630f48746630730886ec52cf53e02)** to **[`7641a72`](https://github.com/sagemath/sagetrac-mirror/commit/7641a72d901080420d59dbc5c3dfa02320b0e56d)**



---

archive/issue_comments_541123.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7641a72d901080420d59dbc5c3dfa02320b0e56d\"><code>7641a72</code></a></td><td><code>Add pdf tag</code></td></tr></table>\n",
    "created_at": "2022-03-18T09:00:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541123",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7641a72d901080420d59dbc5c3dfa02320b0e56d"><code>7641a72</code></a></td><td><code>Add pdf tag</code></td></tr></table>




---

archive/issue_comments_541124.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@kwankyu](#comment:19):\n> Replying to [@nthiery](#comment:17):\n> > Replying to [@kwankyu](#comment:10):\n> > > We need a sagemath binder repo for Thebe to work.\n\n> > \n> > I fixed 'Sage binder env' about a month ago:\n> > \n> > https://github.com/sagemath/sage-binder-env\n> > \n> > It now uses conda to install Sage which is more maintained than\n> > Sage's docker image.\n\n> \n> I have no experience with Thebe. Jupyter-sphinx supports Thebe. But running an interact example cell through jupyter-sphinx only shows `Waiting for kernel...`. Is this supposed to take long? Would the interact work well once the kernel is up?\n\nIt now seems work almost...only that the sage in conda doesn't work well.",
    "created_at": "2022-03-18T09:03:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541124",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@kwankyu](#comment:19):
> Replying to [@nthiery](#comment:17):
> > Replying to [@kwankyu](#comment:10):
> > > We need a sagemath binder repo for Thebe to work.

> > 
> > I fixed 'Sage binder env' about a month ago:
> > 
> > https://github.com/sagemath/sage-binder-env
> > 
> > It now uses conda to install Sage which is more maintained than
> > Sage's docker image.

> 
> I have no experience with Thebe. Jupyter-sphinx supports Thebe. But running an interact example cell through jupyter-sphinx only shows `Waiting for kernel...`. Is this supposed to take long? Would the interact work well once the kernel is up?

It now seems work almost...only that the sage in conda doesn't work well.



---

archive/issue_comments_541125.json:
```json
{
    "body": "Changed commit from **[`7641a72`](https://github.com/sagemath/sagetrac-mirror/commit/7641a72d901080420d59dbc5c3dfa02320b0e56d)** to **[`8cae79e`](https://github.com/sagemath/sagetrac-mirror/commit/8cae79ee88981f6318acfc02355fa893f3832c6c)**",
    "created_at": "2022-03-18T09:15:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541125",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7641a72`](https://github.com/sagemath/sagetrac-mirror/commit/7641a72d901080420d59dbc5c3dfa02320b0e56d)** to **[`8cae79e`](https://github.com/sagemath/sagetrac-mirror/commit/8cae79ee88981f6318acfc02355fa893f3832c6c)**



---

archive/issue_comments_541126.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cae79ee88981f6318acfc02355fa893f3832c6c\"><code>8cae79e</code></a></td><td><code>Remove sage: promtps</code></td></tr></table>\n",
    "created_at": "2022-03-18T09:15:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541126",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cae79ee88981f6318acfc02355fa893f3832c6c"><code>8cae79e</code></a></td><td><code>Remove sage: promtps</code></td></tr></table>




---

archive/issue_comments_541127.json:
```json
{
    "body": "Changed commit from **[`8cae79e`](https://github.com/sagemath/sagetrac-mirror/commit/8cae79ee88981f6318acfc02355fa893f3832c6c)** to **[`845e449`](https://github.com/sagemath/sagetrac-mirror/commit/845e4494f48857df4b452c340704bbfa1ad74596)**",
    "created_at": "2022-03-18T10:02:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541127",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8cae79e`](https://github.com/sagemath/sagetrac-mirror/commit/8cae79ee88981f6318acfc02355fa893f3832c6c)** to **[`845e449`](https://github.com/sagemath/sagetrac-mirror/commit/845e4494f48857df4b452c340704bbfa1ad74596)**



---

archive/issue_comments_541128.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f6a3919b2cb81fbe45d7f7c43386d8aaf324f0d\"><code>9f6a391</code></a></td><td><code>build/pkgs/pythran: Update to 0.11.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15478829fa39db7e3778ab9e50fca9f3f3839086\"><code>1547882</code></a></td><td><code>Merge #33522</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/845e4494f48857df4b452c340704bbfa1ad74596\"><code>845e449</code></a></td><td><code>Position thebe button at right bottom</code></td></tr></table>\n",
    "created_at": "2022-03-18T10:02:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541128",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f6a3919b2cb81fbe45d7f7c43386d8aaf324f0d"><code>9f6a391</code></a></td><td><code>build/pkgs/pythran: Update to 0.11.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15478829fa39db7e3778ab9e50fca9f3f3839086"><code>1547882</code></a></td><td><code>Merge #33522</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/845e4494f48857df4b452c340704bbfa1ad74596"><code>845e449</code></a></td><td><code>Position thebe button at right bottom</code></td></tr></table>




---

archive/issue_comments_541129.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\n> It now seems work almost...\n\nGood.\n\n> only that the sage in conda doesn't work well.\n\nCould this be made more specific?",
    "created_at": "2022-03-18T11:48:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541129",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:25" align="right">comment:25</div>

> It now seems work almost...

Good.

> only that the sage in conda doesn't work well.

Could this be made more specific?



---

archive/issue_comments_541130.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAttachment: **[screenshot.png](https://github.com/sagemath/sage/files/ticket33507/screenshot.png)**\n\nReplying to [@nthiery](#comment:25):\n> > It now seems work almost...\n\n> \n> Good.\n> \n> > only that the sage in conda doesn't work well.\n\n> \n> Could this be made more specific?\n\nSee the screenshot.",
    "created_at": "2022-03-18T13:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541130",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:26" align="right">comment:26</div>

Attachment: **[screenshot.png](https://github.com/sagemath/sage/files/ticket33507/screenshot.png)**

Replying to [@nthiery](#comment:25):
> > It now seems work almost...

> 
> Good.
> 
> > only that the sage in conda doesn't work well.

> 
> Could this be made more specific?

See the screenshot.



---

archive/issue_comments_541131.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nIt seems python not sage runs.",
    "created_at": "2022-03-18T13:11:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541131",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:27" align="right">comment:27</div>

It seems python not sage runs.



---

archive/issue_comments_541132.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@kwankyu](#comment:27):\n> It seems python not sage runs.\n\nI see.\n\nIn Thebe you can configure which kernel should be used;\nsee the kernel section in:\n\nhttps://thebe.readthedocs.io/en/latest/config_reference.html\n\nI assume that this can be done too through Jupyter-sphinx, though\nI don't know the details from the top of my head.",
    "created_at": "2022-03-18T16:29:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541132",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@kwankyu](#comment:27):
> It seems python not sage runs.

I see.

In Thebe you can configure which kernel should be used;
see the kernel section in:

https://thebe.readthedocs.io/en/latest/config_reference.html

I assume that this can be done too through Jupyter-sphinx, though
I don't know the details from the top of my head.



---

archive/issue_comments_541133.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nPresumably it should be enough to insert a kernel section \nas documented in the thebe manual in the jupyter-sphinx\nthebe configuration:\n\nhttps://jupyter-sphinx.readthedocs.io/en/latest/#thebelab-support\n\nSee also:\n\nhttps://jupyter-sphinx.readthedocs.io/en/latest/#controlling-the-execution-environment\n\nThank you for pushing this forward!",
    "created_at": "2022-03-18T16:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541133",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:29" align="right">comment:29</div>

Presumably it should be enough to insert a kernel section 
as documented in the thebe manual in the jupyter-sphinx
thebe configuration:

https://jupyter-sphinx.readthedocs.io/en/latest/#thebelab-support

See also:

https://jupyter-sphinx.readthedocs.io/en/latest/#controlling-the-execution-environment

Thank you for pushing this forward!



---

archive/issue_comments_541134.json:
```json
{
    "body": "Changed commit from **[`845e449`](https://github.com/sagemath/sagetrac-mirror/commit/845e4494f48857df4b452c340704bbfa1ad74596)** to **[`d0b2628`](https://github.com/sagemath/sagetrac-mirror/commit/d0b2628121b159a7ee9704b19e09661bbc6e19e6)**",
    "created_at": "2022-03-18T23:10:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541134",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`845e449`](https://github.com/sagemath/sagetrac-mirror/commit/845e4494f48857df4b452c340704bbfa1ad74596)** to **[`d0b2628`](https://github.com/sagemath/sagetrac-mirror/commit/d0b2628121b159a7ee9704b19e09661bbc6e19e6)**



---

archive/issue_comments_541135.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0b2628121b159a7ee9704b19e09661bbc6e19e6\"><code>d0b2628</code></a></td><td><code>Add Thebe kernel specs</code></td></tr></table>\n",
    "created_at": "2022-03-18T23:10:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541135",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0b2628121b159a7ee9704b19e09661bbc6e19e6"><code>d0b2628</code></a></td><td><code>Add Thebe kernel specs</code></td></tr></table>




---

archive/issue_comments_541136.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@nthiery](#comment:28):\n> In Thebe you can configure which kernel should be used;\n> see the kernel section in:\n> \n> https://thebe.readthedocs.io/en/latest/config_reference.html\n> \n> I assume that this can be done too through Jupyter-sphinx, though\n> I don't know the details from the top of my head.\n\nAdding the kernel spec makes it work perfect. Thank you!",
    "created_at": "2022-03-18T23:12:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541136",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@nthiery](#comment:28):
> In Thebe you can configure which kernel should be used;
> see the kernel section in:
> 
> https://thebe.readthedocs.io/en/latest/config_reference.html
> 
> I assume that this can be done too through Jupyter-sphinx, though
> I don't know the details from the top of my head.

Adding the kernel spec makes it work perfect. Thank you!



---

archive/issue_comments_541137.json:
```json
{
    "body": "Author: **Kwankyu Lee, Matthias Koeppe**",
    "created_at": "2022-03-18T23:13:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541137",
    "user": "https://github.com/kwankyu"
}
```

Author: **Kwankyu Lee, Matthias Koeppe**



---

archive/issue_comments_541138.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nGiven that all the old thebe stuff is commented out in `src/doc/common/themes/sage-classic/layout.html`, should we just remove it entirely (`build/pkgs/thebe/` etc.)?",
    "created_at": "2022-03-19T00:56:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541138",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

Given that all the old thebe stuff is commented out in `src/doc/common/themes/sage-classic/layout.html`, should we just remove it entirely (`build/pkgs/thebe/` etc.)?



---

archive/issue_comments_541139.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\n(Looks like the branch at #24593 does this)",
    "created_at": "2022-03-19T01:02:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541139",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

(Looks like the branch at #24593 does this)



---

archive/issue_comments_541140.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nDone now in #33529.",
    "created_at": "2022-03-19T01:10:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541140",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

Done now in #33529.



---

archive/issue_comments_541141.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nWith the present ticket, I am getting: \n\n```\n[sagemath_doc_html-none] [reference] WARNING: failed to reach any of the inventories with the following issues:\n[sagemath_doc_html-none] [reference] intersphinx inventory '/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/share/doc/sage/inventory/en/reference/jupyter_execute/objects.inv' not fetchable due to <class 'FileNotFoundError'>: [Errno 2] No such file or directory: '/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/share/doc/sage/inventory/en/reference/jupyter_execute/objects.inv'\n[sagemath_doc_html-none] [reference] building [html]: targets for 1 source files that are out of date\n[sagemath_doc_html-none] [reference] dumping search index in English (code: en)... done\n[sagemath_doc_html-none] [reference] The HTML pages are in local/share/doc/sage/html/en/reference/references.\n```\n(even after `make doc-uninstall`)",
    "created_at": "2022-03-19T01:40:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541141",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

With the present ticket, I am getting: 

```
[sagemath_doc_html-none] [reference] WARNING: failed to reach any of the inventories with the following issues:
[sagemath_doc_html-none] [reference] intersphinx inventory '/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/share/doc/sage/inventory/en/reference/jupyter_execute/objects.inv' not fetchable due to <class 'FileNotFoundError'>: [Errno 2] No such file or directory: '/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/share/doc/sage/inventory/en/reference/jupyter_execute/objects.inv'
[sagemath_doc_html-none] [reference] building [html]: targets for 1 source files that are out of date
[sagemath_doc_html-none] [reference] dumping search index in English (code: en)... done
[sagemath_doc_html-none] [reference] The HTML pages are in local/share/doc/sage/html/en/reference/references.
```
(even after `make doc-uninstall`)



---

archive/issue_comments_541142.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI saw that strange thing. I just deleted the directory. I have no idea where that came from.",
    "created_at": "2022-03-19T02:53:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541142",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:37" align="right">comment:37</div>

I saw that strange thing. I just deleted the directory. I have no idea where that came from.



---

archive/issue_comments_541143.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThanks, this helped.",
    "created_at": "2022-03-19T03:04:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541143",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">comment:38</div>

Thanks, this helped.



---

archive/issue_comments_541144.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nThis looks very good already!",
    "created_at": "2022-03-19T03:09:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541144",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">comment:39</div>

This looks very good already!



---

archive/issue_comments_541145.json:
```json
{
    "body": "Changed commit from **[`d0b2628`](https://github.com/sagemath/sagetrac-mirror/commit/d0b2628121b159a7ee9704b19e09661bbc6e19e6)** to **[`bfd667d`](https://github.com/sagemath/sagetrac-mirror/commit/bfd667d73ce950419ac9b20d67edada89327671d)**",
    "created_at": "2022-03-19T11:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541145",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d0b2628`](https://github.com/sagemath/sagetrac-mirror/commit/d0b2628121b159a7ee9704b19e09661bbc6e19e6)** to **[`bfd667d`](https://github.com/sagemath/sagetrac-mirror/commit/bfd667d73ce950419ac9b20d67edada89327671d)**



---

archive/issue_comments_541146.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bfd667d73ce950419ac9b20d67edada89327671d\"><code>bfd667d</code></a></td><td><code>Fix missing inventory file error</code></td></tr></table>\n",
    "created_at": "2022-03-19T11:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541146",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bfd667d73ce950419ac9b20d67edada89327671d"><code>bfd667d</code></a></td><td><code>Fix missing inventory file error</code></td></tr></table>




---

archive/issue_comments_541147.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n-The Sphinx documentation of `pythreejs` has proper 3D graphics, see for example\n-https://pythreejs.readthedocs.io/en/stable/examples/Animation.html \n+We use jupyter-sphinx\n \n-We should be able to do the same.\n+\u200b    https://jupyter-sphinx.readthedocs.io/en/latest/\n+\n+to facilitate live sage documentation based on jupyter and Thebe.\n \n See also #31027\n``````\n",
    "created_at": "2022-03-19T11:49:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541147",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
-The Sphinx documentation of `pythreejs` has proper 3D graphics, see for example
-https://pythreejs.readthedocs.io/en/stable/examples/Animation.html 
+We use jupyter-sphinx
 
-We should be able to do the same.
+â€‹    https://jupyter-sphinx.readthedocs.io/en/latest/
+
+to facilitate live sage documentation based on jupyter and Thebe.
 
 See also #31027
``````




---

archive/issue_comments_541148.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nAs shown by the examples provided by the branch, static images for pdf documentation can either be provided (1) by `sphinx_plot` (this is the status quo), or (2) by prepared png image files saved from live threejs graphics. \n\nThere are pros and cons of both ways. Though both ways may coexist in sage, I think we should choose one of them as a norm, to guide future efforts to improve the documentation.\n\nPros of (1): It is the current standard; It does not increase the size of the sage distribution.\n\nPros of (2): It is of better quality; It is consistent with the live threejs renderings.\n\nCons of (1) is the negative of pros of (2), and vice versa. In particular, a big con of (2) is that it would increase the size of the sage distribution greatly.\n\nSo what do you think?",
    "created_at": "2022-03-19T12:16:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541148",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:42" align="right">comment:42</div>

As shown by the examples provided by the branch, static images for pdf documentation can either be provided (1) by `sphinx_plot` (this is the status quo), or (2) by prepared png image files saved from live threejs graphics. 

There are pros and cons of both ways. Though both ways may coexist in sage, I think we should choose one of them as a norm, to guide future efforts to improve the documentation.

Pros of (1): It is the current standard; It does not increase the size of the sage distribution.

Pros of (2): It is of better quality; It is consistent with the live threejs renderings.

Cons of (1) is the negative of pros of (2), and vice versa. In particular, a big con of (2) is that it would increase the size of the sage distribution greatly.

So what do you think?



---

archive/issue_comments_541149.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nI'd say for this ticket (1) is better; actually not so much because of the added size but rather because of maintainability concerns. I'm not too worried about the output quality of the PDF documentation (I'd be surprised if anyone looks at it)",
    "created_at": "2022-03-19T18:36:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541149",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">comment:43</div>

I'd say for this ticket (1) is better; actually not so much because of the added size but rather because of maintainability concerns. I'm not too worried about the output quality of the PDF documentation (I'd be surprised if anyone looks at it)



---

archive/issue_comments_541150.json:
```json
{
    "body": "Changed commit from **[`bfd667d`](https://github.com/sagemath/sagetrac-mirror/commit/bfd667d73ce950419ac9b20d67edada89327671d)** to **[`d64b0a3`](https://github.com/sagemath/sagetrac-mirror/commit/d64b0a3652d7925096ac263334690aa63701c8a1)**",
    "created_at": "2022-03-20T04:52:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541150",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bfd667d`](https://github.com/sagemath/sagetrac-mirror/commit/bfd667d73ce950419ac9b20d67edada89327671d)** to **[`d64b0a3`](https://github.com/sagemath/sagetrac-mirror/commit/d64b0a3652d7925096ac263334690aa63701c8a1)**



---

archive/issue_comments_541151.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d64b0a3652d7925096ac263334690aa63701c8a1\"><code>d64b0a3</code></a></td><td><code>Use sphinx_plot for pdf documentation</code></td></tr></table>\n",
    "created_at": "2022-03-20T04:52:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541151",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d64b0a3652d7925096ac263334690aa63701c8a1"><code>d64b0a3</code></a></td><td><code>Use sphinx_plot for pdf documentation</code></td></tr></table>




---

archive/issue_comments_541152.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@mkoeppe](#comment:43):\n> I'd say for this ticket (1) is better; actually not so much because of the added size but rather because of maintainability concerns. I'm not too worried about the output quality of the PDF documentation \n\nOkay.\n\n> (I'd be surprised if anyone looks at it)\n\n:)",
    "created_at": "2022-03-20T04:53:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541152",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@mkoeppe](#comment:43):
> I'd say for this ticket (1) is better; actually not so much because of the added size but rather because of maintainability concerns. I'm not too worried about the output quality of the PDF documentation 

Okay.

> (I'd be surprised if anyone looks at it)

:)



---

archive/issue_comments_541153.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nIn the last commit, I added many jupyter-sphinx images to plot3d.py.\n\nBut if you see the page in a webbrowser (at least in my case), many initial images disappear as more images are rendered. \n\nI don't know why this happens. Too many iframes?",
    "created_at": "2022-03-20T04:58:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541153",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:46" align="right">comment:46</div>

In the last commit, I added many jupyter-sphinx images to plot3d.py.

But if you see the page in a webbrowser (at least in my case), many initial images disappear as more images are rendered. 

I don't know why this happens. Too many iframes?



---

archive/issue_comments_541154.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nIt seems a limit on threejs images:\n\nhttps://stackoverflow.com/questions/41919341/is-there-a-limit-to-the-number-of-three-webglrenderer-instances-in-a-page",
    "created_at": "2022-03-20T05:11:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541154",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:47" align="right">comment:47</div>

It seems a limit on threejs images:

https://stackoverflow.com/questions/41919341/is-there-a-limit-to-the-number-of-three-webglrenderer-instances-in-a-page



---

archive/issue_comments_541155.json:
```json
{
    "body": "Changed commit from **[`d64b0a3`](https://github.com/sagemath/sagetrac-mirror/commit/d64b0a3652d7925096ac263334690aa63701c8a1)** to **[`c2304f3`](https://github.com/sagemath/sagetrac-mirror/commit/c2304f3aeaa3516c2eacd3b115bf3c24708e842f)**",
    "created_at": "2022-03-20T08:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541155",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d64b0a3`](https://github.com/sagemath/sagetrac-mirror/commit/d64b0a3652d7925096ac263334690aa63701c8a1)** to **[`c2304f3`](https://github.com/sagemath/sagetrac-mirror/commit/c2304f3aeaa3516c2eacd3b115bf3c24708e842f)**



---

archive/issue_comments_541156.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2304f3aeaa3516c2eacd3b115bf3c24708e842f\"><code>c2304f3</code></a></td><td><code>Revert back to static images</code></td></tr></table>\n",
    "created_at": "2022-03-20T08:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541156",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2304f3aeaa3516c2eacd3b115bf3c24708e842f"><code>c2304f3</code></a></td><td><code>Revert back to static images</code></td></tr></table>




---

archive/issue_events_456898.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-03-20T08:45:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33507#event-456898"
}
```



---

archive/issue_comments_541157.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@kwankyu](#comment:45):\n> Replying to [@mkoeppe](#comment:43):\n> > I'd say for this ticket (1) is better; actually not so much because of the added size but rather because of maintainability concerns. I'm not too worried about the output quality of the PDF documentation \n\n> \n> Okay.\n> \n> > (I'd be surprised if anyone looks at it)\n\n> \n> :)\n\nI would also vote for (1) for the same reason.",
    "created_at": "2022-03-20T09:36:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541157",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@kwankyu](#comment:45):
> Replying to [@mkoeppe](#comment:43):
> > I'd say for this ticket (1) is better; actually not so much because of the added size but rather because of maintainability concerns. I'm not too worried about the output quality of the PDF documentation 

> 
> Okay.
> 
> > (I'd be surprised if anyone looks at it)

> 
> :)

I would also vote for (1) for the same reason.



---

archive/issue_comments_541158.json:
```json
{
    "body": "Changed commit from **[`c2304f3`](https://github.com/sagemath/sagetrac-mirror/commit/c2304f3aeaa3516c2eacd3b115bf3c24708e842f)** to **[`004da22`](https://github.com/sagemath/sagetrac-mirror/commit/004da229f2d3ad03a3e09e90e9dbdf7a40676250)**",
    "created_at": "2022-03-20T10:34:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541158",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c2304f3`](https://github.com/sagemath/sagetrac-mirror/commit/c2304f3aeaa3516c2eacd3b115bf3c24708e842f)** to **[`004da22`](https://github.com/sagemath/sagetrac-mirror/commit/004da229f2d3ad03a3e09e90e9dbdf7a40676250)**



---

archive/issue_comments_541159.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/004da229f2d3ad03a3e09e90e9dbdf7a40676250\"><code>004da22</code></a></td><td><code>Live images only when requested</code></td></tr></table>\n",
    "created_at": "2022-03-20T10:34:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541159",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/004da229f2d3ad03a3e09e90e9dbdf7a40676250"><code>004da22</code></a></td><td><code>Live images only when requested</code></td></tr></table>




---

archive/issue_comments_541160.json:
```json
{
    "body": "Changed commit from **[`004da22`](https://github.com/sagemath/sagetrac-mirror/commit/004da229f2d3ad03a3e09e90e9dbdf7a40676250)** to **[`8cc9697`](https://github.com/sagemath/sagetrac-mirror/commit/8cc9697a9935ea35c9c232694a1d953b97707b40)**",
    "created_at": "2022-03-21T00:48:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541160",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`004da22`](https://github.com/sagemath/sagetrac-mirror/commit/004da229f2d3ad03a3e09e90e9dbdf7a40676250)** to **[`8cc9697`](https://github.com/sagemath/sagetrac-mirror/commit/8cc9697a9935ea35c9c232694a1d953b97707b40)**



---

archive/issue_comments_541161.json:
```json
{
    "body": "<div id=\"comment:52\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cc9697a9935ea35c9c232694a1d953b97707b40\"><code>8cc9697</code></a></td><td><code>Prevent duplicate code display</code></td></tr></table>\n",
    "created_at": "2022-03-21T00:48:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541161",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:52"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cc9697a9935ea35c9c232694a1d953b97707b40"><code>8cc9697</code></a></td><td><code>Prevent duplicate code display</code></td></tr></table>




---

archive/issue_comments_541162.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nThe last commit prevents input code display in Thebe cell as it is duplicate of the example just above it. This in effect also prevents a user from editing the input.",
    "created_at": "2022-03-21T00:57:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541162",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:53" align="right">comment:53</div>

The last commit prevents input code display in Thebe cell as it is duplicate of the example just above it. This in effect also prevents a user from editing the input.



---

archive/issue_comments_541163.json:
```json
{
    "body": "Dependencies: **#33522**",
    "created_at": "2022-03-21T05:24:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541163",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#33522**



---

archive/issue_comments_541164.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe, ...**",
    "created_at": "2022-03-21T05:24:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541164",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe, ...**



---

archive/issue_comments_541165.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nI have built HTML and PDF. HTML is great, a very nice improvement. PDF is unchanged. I would be ready to give it a positive review.",
    "created_at": "2022-03-21T06:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541165",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:55" align="right">comment:55</div>

I have built HTML and PDF. HTML is great, a very nice improvement. PDF is unchanged. I would be ready to give it a positive review.



---

archive/issue_comments_541166.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@mkoeppe](#comment:55):\n> PDF is unchanged. \n\nI guess you are positive about this.",
    "created_at": "2022-03-21T06:54:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541166",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@mkoeppe](#comment:55):
> PDF is unchanged. 

I guess you are positive about this.



---

archive/issue_comments_541167.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@mkoeppe](#comment:55):\n> I have built HTML and PDF. HTML is great, a very nice improvement. \n\nIndeed, we are fortunate to have a very nice tool: jupyter-sphix.",
    "created_at": "2022-03-21T06:56:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541167",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@mkoeppe](#comment:55):
> I have built HTML and PDF. HTML is great, a very nice improvement. 

Indeed, we are fortunate to have a very nice tool: jupyter-sphix.



---

archive/issue_comments_541168.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@kwankyu](#comment:56):\n> Replying to [@mkoeppe](#comment:55):\n> > PDF is unchanged. \n\n> \n> I guess you are positive about this.\n\nYes, this matches the scope of the ticket.",
    "created_at": "2022-03-21T07:16:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541168",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@kwankyu](#comment:56):
> Replying to [@mkoeppe](#comment:55):
> > PDF is unchanged. 

> 
> I guess you are positive about this.

Yes, this matches the scope of the ticket.



---

archive/issue_comments_541169.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nThank you @kwankyu! Very nice addition :-)\n\nI am super glad to see Thebe support in the Sage documentation!",
    "created_at": "2022-03-21T14:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541169",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:59" align="right">comment:59</div>

Thank you @kwankyu! Very nice addition :-)

I am super glad to see Thebe support in the Sage documentation!



---

archive/issue_comments_541170.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nThank you for setting up the sage binder repo!",
    "created_at": "2022-03-21T14:09:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541170",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:60" align="right">comment:60</div>

Thank you for setting up the sage binder repo!



---

archive/issue_comments_541171.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nany reason to delay this until 9.7?",
    "created_at": "2022-03-21T20:21:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541171",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:62" align="right">comment:62</div>

any reason to delay this until 9.7?



---

archive/issue_events_456899.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-21T20:36:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33507#event-456899"
}
```



---

archive/issue_events_456900.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-21T20:36:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33507#event-456900"
}
```



---

archive/issue_comments_541172.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\neven after doc-clean, I get an error building docs:\n\n```\n[sagemath_doc_html-none] OSError: WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/plot3d/environment.pickle\n```",
    "created_at": "2022-03-21T20:43:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541172",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:64" align="right">comment:64</div>

even after doc-clean, I get an error building docs:

```
[sagemath_doc_html-none] OSError: WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/plot3d/environment.pickle
```



---

archive/issue_comments_541173.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nJust tested it. This is very nice!\n\n+1 for a positive review. \n\nJust for curiosity: why is #33522 a dependency?",
    "created_at": "2022-03-21T20:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541173",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:65" align="right">comment:65</div>

Just tested it. This is very nice!

+1 for a positive review. 

Just for curiosity: why is #33522 a dependency?



---

archive/issue_comments_541174.json:
```json
{
    "body": "Changed commit from **[`8cc9697`](https://github.com/sagemath/sagetrac-mirror/commit/8cc9697a9935ea35c9c232694a1d953b97707b40)** to **[`567730c`](https://github.com/sagemath/sagetrac-mirror/commit/567730c81c468869dcd9c17f1f6434b4e1ef00b6)**",
    "created_at": "2022-03-22T00:05:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541174",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8cc9697`](https://github.com/sagemath/sagetrac-mirror/commit/8cc9697a9935ea35c9c232694a1d953b97707b40)** to **[`567730c`](https://github.com/sagemath/sagetrac-mirror/commit/567730c81c468869dcd9c17f1f6434b4e1ef00b6)**



---

archive/issue_comments_541175.json:
```json
{
    "body": "<div id=\"comment:66\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0801dbd569d826098c7259b342bd2f50373c651e\"><code>0801dbd</code></a></td><td><code>Remove sage: prompts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/018da51aa2b0fcf1efd7a4d11a75a3f6d366a484\"><code>018da51</code></a></td><td><code>Position thebe button at right bottom</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c619fa2d80c0e7eac4ac217818ced68fe05686fb\"><code>c619fa2</code></a></td><td><code>Add Thebe kernel specs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72ae5707c37015f73e6f0b9067b0a237fe37100a\"><code>72ae570</code></a></td><td><code>Fix missing inventory file error</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e499c2fe1523c721bf7eb383f926815187e51255\"><code>e499c2f</code></a></td><td><code>Use sphinx_plot for pdf documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/777e25efd39e13235ca56500e4d6f35276418234\"><code>777e25e</code></a></td><td><code>Live images only when requested</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/567730c81c468869dcd9c17f1f6434b4e1ef00b6\"><code>567730c</code></a></td><td><code>Prevent duplicate code display</code></td></tr></table>\n",
    "created_at": "2022-03-22T00:05:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541175",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:66"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0801dbd569d826098c7259b342bd2f50373c651e"><code>0801dbd</code></a></td><td><code>Remove sage: prompts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/018da51aa2b0fcf1efd7a4d11a75a3f6d366a484"><code>018da51</code></a></td><td><code>Position thebe button at right bottom</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c619fa2d80c0e7eac4ac217818ced68fe05686fb"><code>c619fa2</code></a></td><td><code>Add Thebe kernel specs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72ae5707c37015f73e6f0b9067b0a237fe37100a"><code>72ae570</code></a></td><td><code>Fix missing inventory file error</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e499c2fe1523c721bf7eb383f926815187e51255"><code>e499c2f</code></a></td><td><code>Use sphinx_plot for pdf documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/777e25efd39e13235ca56500e4d6f35276418234"><code>777e25e</code></a></td><td><code>Live images only when requested</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/567730c81c468869dcd9c17f1f6434b4e1ef00b6"><code>567730c</code></a></td><td><code>Prevent duplicate code display</code></td></tr></table>




---

archive/issue_comments_541176.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,21 @@\n \n to facilitate live sage documentation based on jupyter and Thebe.\n \n-See also #31027\n+For documentation authors, new directives are available:\n+\n+```\n+.. ONLY:: pdf \n+```\n+\n+```\n+.. JUPYTER-EXECUTE::  \n+```\n+in addition to\n+\n+```\n+.. ONLY:: html\n+```\n+\n+See the branch for examples.\n+\n+Related tickets: #31027\n``````\n",
    "created_at": "2022-03-22T00:15:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541176",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,21 @@
 
 to facilitate live sage documentation based on jupyter and Thebe.
 
-See also #31027
+For documentation authors, new directives are available:
+
+```
+.. ONLY:: pdf 
+```
+
+```
+.. JUPYTER-EXECUTE::  
+```
+in addition to
+
+```
+.. ONLY:: html
+```
+
+See the branch for examples.
+
+Related tickets: #31027
``````




---

archive/issue_comments_541177.json:
```json
{
    "body": "Changed dependencies from **#33522** to none",
    "created_at": "2022-03-22T00:15:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541177",
    "user": "https://github.com/kwankyu"
}
```

Changed dependencies from **#33522** to none



---

archive/issue_comments_541178.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nReplying to [@egourgoulhon](#comment:65): \n> Just for curiosity: why is #33522 a dependency?\n\nThat was just a temporary dependency. Now removed.",
    "created_at": "2022-03-22T00:16:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541178",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:68" align="right">comment:68</div>

Replying to [@egourgoulhon](#comment:65): 
> Just for curiosity: why is #33522 a dependency?

That was just a temporary dependency. Now removed.



---

archive/issue_comments_541179.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [@dimpase](#comment:64):\n> even after doc-clean, I get an error building docs:\n> \n> ```\n> [sagemath_doc_html-none] OSError: WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/plot3d/environment.pickle\n> ```\n\nI do: `make doc-clean; make doc-uninstall; make`",
    "created_at": "2022-03-22T00:17:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541179",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [@dimpase](#comment:64):
> even after doc-clean, I get an error building docs:
> 
> ```
> [sagemath_doc_html-none] OSError: WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/plot3d/environment.pickle
> ```

I do: `make doc-clean; make doc-uninstall; make`



---

archive/issue_comments_541180.json:
```json
{
    "body": "Dependencies: **#33529**",
    "created_at": "2022-03-22T01:58:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541180",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#33529**



---

archive/issue_comments_541181.json:
```json
{
    "body": "Changed commit from **[`567730c`](https://github.com/sagemath/sagetrac-mirror/commit/567730c81c468869dcd9c17f1f6434b4e1ef00b6)** to **[`9c8fe88`](https://github.com/sagemath/sagetrac-mirror/commit/9c8fe88abc05571c6821d1991d10b38a31b58ac6)**",
    "created_at": "2022-03-22T02:00:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541181",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`567730c`](https://github.com/sagemath/sagetrac-mirror/commit/567730c81c468869dcd9c17f1f6434b4e1ef00b6)** to **[`9c8fe88`](https://github.com/sagemath/sagetrac-mirror/commit/9c8fe88abc05571c6821d1991d10b38a31b58ac6)**



---

archive/issue_comments_541182.json:
```json
{
    "body": "<div id=\"comment:71\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/845e4494f48857df4b452c340704bbfa1ad74596\"><code>845e449</code></a></td><td><code>Position thebe button at right bottom</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0b2628121b159a7ee9704b19e09661bbc6e19e6\"><code>d0b2628</code></a></td><td><code>Add Thebe kernel specs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bfd667d73ce950419ac9b20d67edada89327671d\"><code>bfd667d</code></a></td><td><code>Fix missing inventory file error</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d64b0a3652d7925096ac263334690aa63701c8a1\"><code>d64b0a3</code></a></td><td><code>Use sphinx_plot for pdf documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/004da229f2d3ad03a3e09e90e9dbdf7a40676250\"><code>004da22</code></a></td><td><code>Live images only when requested</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cc9697a9935ea35c9c232694a1d953b97707b40\"><code>8cc9697</code></a></td><td><code>Prevent duplicate code display</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51b35c787b33604baad65c5b0951667fd86914f3\"><code>51b35c7</code></a></td><td><code>Merge branch 'public/33507' of git://trac.sagemath.org/sage into t/33507/public/33507</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e881abca1f2e7b806608b6b6f2bbffec5f338b55\"><code>e881abc</code></a></td><td><code>build/pkgs/thebe: Remove</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9621c97820a393c0835c9fadcfbc4f2f60fc17f7\"><code>9621c97</code></a></td><td><code>build/pkgs/sagemath_doc_html/dependencies: Remove thebe</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c8fe88abc05571c6821d1991d10b38a31b58ac6\"><code>9c8fe88</code></a></td><td><code>Merge #33529</code></td></tr></table>\n",
    "created_at": "2022-03-22T02:00:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541182",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:71"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/845e4494f48857df4b452c340704bbfa1ad74596"><code>845e449</code></a></td><td><code>Position thebe button at right bottom</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0b2628121b159a7ee9704b19e09661bbc6e19e6"><code>d0b2628</code></a></td><td><code>Add Thebe kernel specs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bfd667d73ce950419ac9b20d67edada89327671d"><code>bfd667d</code></a></td><td><code>Fix missing inventory file error</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d64b0a3652d7925096ac263334690aa63701c8a1"><code>d64b0a3</code></a></td><td><code>Use sphinx_plot for pdf documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/004da229f2d3ad03a3e09e90e9dbdf7a40676250"><code>004da22</code></a></td><td><code>Live images only when requested</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cc9697a9935ea35c9c232694a1d953b97707b40"><code>8cc9697</code></a></td><td><code>Prevent duplicate code display</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51b35c787b33604baad65c5b0951667fd86914f3"><code>51b35c7</code></a></td><td><code>Merge branch 'public/33507' of git://trac.sagemath.org/sage into t/33507/public/33507</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e881abca1f2e7b806608b6b6f2bbffec5f338b55"><code>e881abc</code></a></td><td><code>build/pkgs/thebe: Remove</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9621c97820a393c0835c9fadcfbc4f2f60fc17f7"><code>9621c97</code></a></td><td><code>build/pkgs/sagemath_doc_html/dependencies: Remove thebe</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c8fe88abc05571c6821d1991d10b38a31b58ac6"><code>9c8fe88</code></a></td><td><code>Merge #33529</code></td></tr></table>




---

archive/issue_comments_541183.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nYou revived the dependency #33522 that I removed.",
    "created_at": "2022-03-22T03:46:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541183",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:72" align="right">comment:72</div>

You revived the dependency #33522 that I removed.



---

archive/issue_comments_541184.json:
```json
{
    "body": "<div id=\"comment:73\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746\"><code>72c8378</code></a></td><td><code>Merge #33529</code></td></tr></table>\n",
    "created_at": "2022-03-22T04:34:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541184",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746"><code>72c8378</code></a></td><td><code>Merge #33529</code></td></tr></table>




---

archive/issue_comments_541185.json:
```json
{
    "body": "Changed commit from **[`9c8fe88`](https://github.com/sagemath/sagetrac-mirror/commit/9c8fe88abc05571c6821d1991d10b38a31b58ac6)** to **[`72c8378`](https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746)**",
    "created_at": "2022-03-22T04:34:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541185",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9c8fe88`](https://github.com/sagemath/sagetrac-mirror/commit/9c8fe88abc05571c6821d1991d10b38a31b58ac6)** to **[`72c8378`](https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746)**



---

archive/issue_comments_541186.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nSorry, fixed now",
    "created_at": "2022-03-22T04:34:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541186",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:74" align="right">comment:74</div>

Sorry, fixed now



---

archive/issue_comments_541187.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nI am still getting this docbuild error on macOS, even after `git clean -fdx`.\n\n```\n[sagemath_doc_html-none] [repl     ] executing interact\n[sagemath_doc_html-none] [repl     ] /Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jsonschema/validators.py:188: DeprecationWarning: Passing a schema to Validator.iter_errors is deprecated and will be removed in a future release. Call validator.evolve(schema=new_schema).iter_errors(...) instead.\n[sagemath_doc_html-none] [repl     ]   warnings.warn(\n[sagemath_doc_html-none] [repl     ] Extension error:\n[sagemath_doc_html-none] [repl     ] Notebook execution failed (exception: [Errno 2] No such file or directory: '/Users/dima/sage/local/bin/sage')\n...\n[sagemath_doc_html-none] [plot3d   ] executing plot3d\n[sagemath_doc_html-none] [plot3d   ] /Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jsonschema/validators.py:188: DeprecationWarning: Passing a schema to Validator.iter_errors is deprecated and will be removed in a future release. Call validator.evolve(schema=new_schema).iter_errors(...) instead.\n[sagemath_doc_html-none] [plot3d   ]   warnings.warn(\n[sagemath_doc_html-none] [plot3d   ] Extension error:\n[sagemath_doc_html-none] [plot3d   ] Notebook execution failed (exception: [Errno 2] No such file or directory: '/Users/dima/sage/local/bin/sage')\n...\nsagemath_doc_html-none] [reference] ... done (500 todos, 2546 index, 1665 citations, 2139 modules)\n[sagemath_doc_html-none] [reference] WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/plot3d/environment.pickle\n[sagemath_doc_html-none] [reference] WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/repl/environment.pickle\n[sagemath_doc_html-none] [reference] preparing documents... skipping loading of indexes... done\n[sagemath_doc_html-none] [reference] /Users/dima/sage/src/doc/en/reference/index.rst:17: WARNING: unknown document: repl/index\n[sagemath_doc_html-none] [reference] /Users/dima/sage/src/doc/en/reference/index.rst:24: WARNING: unknown document: plot3d/index\n[sagemath_doc_html-none] [reference] The inventory files are in local/share/doc/sage/inventory/en/reference.\n[sagemath_doc_html-none] Error building the documentation.\n[sagemath_doc_html-none] Traceback (most recent call last):\n[sagemath_doc_html-none]   File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\", line 197, in _run_module_as_main\n[sagemath_doc_html-none]     return _run_code(code, main_globals, None,\n[sagemath_doc_html-none]   File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\", line 87, in _run_code\n[sagemath_doc_html-none]     exec(code, run_globals)\n[sagemath_doc_html-none]   File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/__main__.py\", line 2, in <module>\n[sagemath_doc_html-none]     main()\n[sagemath_doc_html-none]   File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 1751, in main\n[sagemath_doc_html-none]     builder()\n[sagemath_doc_html-none]   File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 141, in f\n[sagemath_doc_html-none]     runsphinx()\n[sagemath_doc_html-none]   File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/sphinxbuild.py\", line 326, in runsphinx\n[sagemath_doc_html-none]     sys.stderr.raise_errors()\n[sagemath_doc_html-none]   File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/sphinxbuild.py\", line 262, in raise_errors\n[sagemath_doc_html-none]     raise OSError(self._error)\n[sagemath_doc_html-none] OSError: WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/plot3d/environment.pickle \n[sagemath_doc_html-none] \n[sagemath_doc_html-none]     Note: incremental documentation builds sometimes cause spurious\n[sagemath_doc_html-none]     error messages. To be certain that these are real errors, run\n[sagemath_doc_html-none]     \"make doc-clean doc-uninstall\" first and try again.\n[sagemath_doc_html-none] make[6]: *** [doc-inventory--reference_top] Error 1\n[sagemath_doc_html-none] make[5]: *** [doc-inventory-reference] Error 2\nmake[4]: *** [sagemath_doc_html-SAGE_DOCS-no-deps] Error 2\n```\n\nsomething in these two modules wants to call `'/Users/dima/sage/local/bin/sage'` - \nwhich is absent, naturally, and probably this leads to absent `environment.pickle` in plot3d.\n\nI presume the message \"Notebook execution failed\" comes from jupyter-sphinx:\nhttps://github.com/jupyter/jupyter-sphinx/blob/master/jupyter_sphinx/execute.py",
    "created_at": "2022-03-22T15:46:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541187",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:75" align="right">comment:75</div>

I am still getting this docbuild error on macOS, even after `git clean -fdx`.

```
[sagemath_doc_html-none] [repl     ] executing interact
[sagemath_doc_html-none] [repl     ] /Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jsonschema/validators.py:188: DeprecationWarning: Passing a schema to Validator.iter_errors is deprecated and will be removed in a future release. Call validator.evolve(schema=new_schema).iter_errors(...) instead.
[sagemath_doc_html-none] [repl     ]   warnings.warn(
[sagemath_doc_html-none] [repl     ] Extension error:
[sagemath_doc_html-none] [repl     ] Notebook execution failed (exception: [Errno 2] No such file or directory: '/Users/dima/sage/local/bin/sage')
...
[sagemath_doc_html-none] [plot3d   ] executing plot3d
[sagemath_doc_html-none] [plot3d   ] /Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jsonschema/validators.py:188: DeprecationWarning: Passing a schema to Validator.iter_errors is deprecated and will be removed in a future release. Call validator.evolve(schema=new_schema).iter_errors(...) instead.
[sagemath_doc_html-none] [plot3d   ]   warnings.warn(
[sagemath_doc_html-none] [plot3d   ] Extension error:
[sagemath_doc_html-none] [plot3d   ] Notebook execution failed (exception: [Errno 2] No such file or directory: '/Users/dima/sage/local/bin/sage')
...
sagemath_doc_html-none] [reference] ... done (500 todos, 2546 index, 1665 citations, 2139 modules)
[sagemath_doc_html-none] [reference] WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/plot3d/environment.pickle
[sagemath_doc_html-none] [reference] WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/repl/environment.pickle
[sagemath_doc_html-none] [reference] preparing documents... skipping loading of indexes... done
[sagemath_doc_html-none] [reference] /Users/dima/sage/src/doc/en/reference/index.rst:17: WARNING: unknown document: repl/index
[sagemath_doc_html-none] [reference] /Users/dima/sage/src/doc/en/reference/index.rst:24: WARNING: unknown document: plot3d/index
[sagemath_doc_html-none] [reference] The inventory files are in local/share/doc/sage/inventory/en/reference.
[sagemath_doc_html-none] Error building the documentation.
[sagemath_doc_html-none] Traceback (most recent call last):
[sagemath_doc_html-none]   File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py", line 197, in _run_module_as_main
[sagemath_doc_html-none]     return _run_code(code, main_globals, None,
[sagemath_doc_html-none]   File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py", line 87, in _run_code
[sagemath_doc_html-none]     exec(code, run_globals)
[sagemath_doc_html-none]   File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/__main__.py", line 2, in <module>
[sagemath_doc_html-none]     main()
[sagemath_doc_html-none]   File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 1751, in main
[sagemath_doc_html-none]     builder()
[sagemath_doc_html-none]   File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 141, in f
[sagemath_doc_html-none]     runsphinx()
[sagemath_doc_html-none]   File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/sphinxbuild.py", line 326, in runsphinx
[sagemath_doc_html-none]     sys.stderr.raise_errors()
[sagemath_doc_html-none]   File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/sphinxbuild.py", line 262, in raise_errors
[sagemath_doc_html-none]     raise OSError(self._error)
[sagemath_doc_html-none] OSError: WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/plot3d/environment.pickle 
[sagemath_doc_html-none] 
[sagemath_doc_html-none]     Note: incremental documentation builds sometimes cause spurious
[sagemath_doc_html-none]     error messages. To be certain that these are real errors, run
[sagemath_doc_html-none]     "make doc-clean doc-uninstall" first and try again.
[sagemath_doc_html-none] make[6]: *** [doc-inventory--reference_top] Error 1
[sagemath_doc_html-none] make[5]: *** [doc-inventory-reference] Error 2
make[4]: *** [sagemath_doc_html-SAGE_DOCS-no-deps] Error 2
```

something in these two modules wants to call `'/Users/dima/sage/local/bin/sage'` - 
which is absent, naturally, and probably this leads to absent `environment.pickle` in plot3d.

I presume the message "Notebook execution failed" comes from jupyter-sphinx:
https://github.com/jupyter/jupyter-sphinx/blob/master/jupyter_sphinx/execute.py



---

archive/issue_comments_541188.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe, ...** to **Matthias Koeppe, Dima Pasechnik**",
    "created_at": "2022-03-22T20:30:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541188",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Matthias Koeppe, ...** to **Matthias Koeppe, Dima Pasechnik**



---

archive/issue_events_456901.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-03-22T20:30:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33507#event-456901"
}
```



---

archive/issue_events_456902.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-03-22T20:30:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33507#event-456902"
}
```



---

archive/issue_comments_541189.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nafter \n\n```\nln -s /Users/dima/sage/sage /Users/dima/sage/local/bin/sage\n```\nthe docbuild completes, but it's certainly a problem to be fixed that needs this workaround.",
    "created_at": "2022-03-22T20:30:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541189",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:76" align="right">comment:76</div>

after 

```
ln -s /Users/dima/sage/sage /Users/dima/sage/local/bin/sage
```
the docbuild completes, but it's certainly a problem to be fixed that needs this workaround.



---

archive/issue_comments_541190.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nReplying to [@dimpase](#comment:75):\n> I am still getting this docbuild error on macOS, even after `git clean -fdx`.\n> \n> ```\n> [sagemath_doc_html-none] [repl     ] executing interact\n> [sagemath_doc_html-none] [repl     ] /Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jsonschema/validators.py:188: DeprecationWarning: Passing a schema to Validator.iter_errors is deprecated and will be removed in a future release. Call validator.evolve(schema=new_schema).iter_errors(...) instead.\n> [sagemath_doc_html-none] [repl     ]   warnings.warn(\n> [sagemath_doc_html-none] [repl     ] Extension error:\n> [sagemath_doc_html-none] [repl     ] Notebook execution failed (exception: [Errno 2] No such file or directory: '/Users/dima/sage/local/bin/sage')\n> ```\n> I presume the message \"Notebook execution failed\" comes from jupyter-sphinx:\n> https://github.com/jupyter/jupyter-sphinx/blob/master/jupyter_sphinx/execute.py\n\nI am on macOS too. Do you have no problem in running sagemath kernel in jupyter from your sage installation?",
    "created_at": "2022-03-23T01:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541190",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:77" align="right">comment:77</div>

Replying to [@dimpase](#comment:75):
> I am still getting this docbuild error on macOS, even after `git clean -fdx`.
> 
> ```
> [sagemath_doc_html-none] [repl     ] executing interact
> [sagemath_doc_html-none] [repl     ] /Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jsonschema/validators.py:188: DeprecationWarning: Passing a schema to Validator.iter_errors is deprecated and will be removed in a future release. Call validator.evolve(schema=new_schema).iter_errors(...) instead.
> [sagemath_doc_html-none] [repl     ]   warnings.warn(
> [sagemath_doc_html-none] [repl     ] Extension error:
> [sagemath_doc_html-none] [repl     ] Notebook execution failed (exception: [Errno 2] No such file or directory: '/Users/dima/sage/local/bin/sage')
> ```
> I presume the message "Notebook execution failed" comes from jupyter-sphinx:
> https://github.com/jupyter/jupyter-sphinx/blob/master/jupyter_sphinx/execute.py

I am on macOS too. Do you have no problem in running sagemath kernel in jupyter from your sage installation?



---

archive/issue_comments_541191.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nIf I remove the symlink as in [comment:76](#comment:76) I get a jupyter kernel error\n\n```\nTraceback (most recent call last):\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/web.py\", line 1704, in _execute\n    result = await result\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py\", line 328, in __wakeup\n    future.result()\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py\", line 769, in run\n    yielded = self.gen.throw(*exc_info)  # type: ignore\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/notebook/services/sessions/handlers.py\", line 74, in post\n    model = yield maybe_future(\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py\", line 762, in run\n    value = future.result()\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py\", line 769, in run\n    yielded = self.gen.throw(*exc_info)  # type: ignore\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/notebook/services/sessions/sessionmanager.py\", line 98, in create_session\n    kernel_id = yield self.start_kernel_for_session(session_id, path, name, type, kernel_name)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py\", line 762, in run\n    value = future.result()\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py\", line 769, in run\n    yielded = self.gen.throw(*exc_info)  # type: ignore\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/notebook/services/sessions/sessionmanager.py\", line 110, in start_kernel_for_session\n    kernel_id = yield maybe_future(\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py\", line 762, in run\n    value = future.result()\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/futures.py\", line 201, in result\n    raise self._exception\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py\", line 256, in __step\n    result = coro.send(None)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/notebook/services/kernels/kernelmanager.py\", line 176, in start_kernel\n    kernel_id = await maybe_future(self.pinned_superclass.start_kernel(self, **kwargs))\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py\", line 26, in wrapped\n    raise e\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py\", line 23, in wrapped\n    return loop.run_until_complete(future)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/nest_asyncio.py\", line 81, in run_until_complete\n    return f.result()\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/futures.py\", line 201, in result\n    raise self._exception\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py\", line 256, in __step\n    result = coro.send(None)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/multikernelmanager.py\", line 187, in _async_start_kernel\n    starter = ensure_async(km.start_kernel(**kwargs))\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py\", line 26, in wrapped\n    raise e\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py\", line 23, in wrapped\n    return loop.run_until_complete(future)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/nest_asyncio.py\", line 81, in run_until_complete\n    return f.result()\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/futures.py\", line 201, in result\n    raise self._exception\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py\", line 256, in __step\n    result = coro.send(None)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/manager.py\", line 362, in _async_start_kernel\n    raise e\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/manager.py\", line 351, in _async_start_kernel\n    await ensure_async(self._launch_kernel(kernel_cmd, **kw))\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py\", line 26, in wrapped\n    raise e\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py\", line 23, in wrapped\n    return loop.run_until_complete(future)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/nest_asyncio.py\", line 81, in run_until_complete\n    return f.result()\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/futures.py\", line 201, in result\n    raise self._exception\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py\", line 256, in __step\n    result = coro.send(None)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/manager.py\", line 269, in _async_launch_kernel\n    connection_info = await self.provisioner.launch_kernel(kernel_cmd, **kw)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/provisioning/local_provisioner.py\", line 179, in launch_kernel\n    self.process = launch_kernel(cmd, **scrubbed_kwargs)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/launcher.py\", line 169, in launch_kernel\n    raise ex\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/launcher.py\", line 157, in launch_kernel\n    proc = Popen(cmd, **kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/subprocess.py\", line 951, in __init__\n    self._execute_child(args, executable, preexec_fn, close_fds,\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/subprocess.py\", line 1821, in _execute_child\n    raise child_exception_type(errno_num, err_msg, err_filename)\nFileNotFoundError: [Errno 2] No such file or directory: '/Users/dima/sage/local/bin/sage'\n```\n\nWith the link it works. It turns out I have outdated things in `~/Library/Jupyter`, in particular `sagemath/kernel.json` with the obsolete path to `sage` (version 9.4.beta3).\n\nSorry for noise, it's OK.",
    "created_at": "2022-03-23T09:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541191",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:78" align="right">comment:78</div>

If I remove the symlink as in [comment:76](#comment:76) I get a jupyter kernel error

```
Traceback (most recent call last):
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/web.py", line 1704, in _execute
    result = await result
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py", line 328, in __wakeup
    future.result()
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py", line 769, in run
    yielded = self.gen.throw(*exc_info)  # type: ignore
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/notebook/services/sessions/handlers.py", line 74, in post
    model = yield maybe_future(
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py", line 762, in run
    value = future.result()
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py", line 769, in run
    yielded = self.gen.throw(*exc_info)  # type: ignore
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/notebook/services/sessions/sessionmanager.py", line 98, in create_session
    kernel_id = yield self.start_kernel_for_session(session_id, path, name, type, kernel_name)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py", line 762, in run
    value = future.result()
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py", line 769, in run
    yielded = self.gen.throw(*exc_info)  # type: ignore
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/notebook/services/sessions/sessionmanager.py", line 110, in start_kernel_for_session
    kernel_id = yield maybe_future(
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py", line 762, in run
    value = future.result()
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py", line 256, in __step
    result = coro.send(None)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/notebook/services/kernels/kernelmanager.py", line 176, in start_kernel
    kernel_id = await maybe_future(self.pinned_superclass.start_kernel(self, **kwargs))
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py", line 26, in wrapped
    raise e
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py", line 23, in wrapped
    return loop.run_until_complete(future)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/nest_asyncio.py", line 81, in run_until_complete
    return f.result()
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py", line 256, in __step
    result = coro.send(None)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/multikernelmanager.py", line 187, in _async_start_kernel
    starter = ensure_async(km.start_kernel(**kwargs))
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py", line 26, in wrapped
    raise e
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py", line 23, in wrapped
    return loop.run_until_complete(future)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/nest_asyncio.py", line 81, in run_until_complete
    return f.result()
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py", line 256, in __step
    result = coro.send(None)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/manager.py", line 362, in _async_start_kernel
    raise e
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/manager.py", line 351, in _async_start_kernel
    await ensure_async(self._launch_kernel(kernel_cmd, **kw))
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py", line 26, in wrapped
    raise e
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py", line 23, in wrapped
    return loop.run_until_complete(future)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/nest_asyncio.py", line 81, in run_until_complete
    return f.result()
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py", line 256, in __step
    result = coro.send(None)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/manager.py", line 269, in _async_launch_kernel
    connection_info = await self.provisioner.launch_kernel(kernel_cmd, **kw)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/provisioning/local_provisioner.py", line 179, in launch_kernel
    self.process = launch_kernel(cmd, **scrubbed_kwargs)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/launcher.py", line 169, in launch_kernel
    raise ex
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/launcher.py", line 157, in launch_kernel
    proc = Popen(cmd, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/subprocess.py", line 951, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/subprocess.py", line 1821, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
FileNotFoundError: [Errno 2] No such file or directory: '/Users/dima/sage/local/bin/sage'
```

With the link it works. It turns out I have outdated things in `~/Library/Jupyter`, in particular `sagemath/kernel.json` with the obsolete path to `sage` (version 9.4.beta3).

Sorry for noise, it's OK.



---

archive/issue_events_456903.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-03-23T09:56:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33507#event-456903"
}
```



---

archive/issue_events_456904.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-03-23T09:56:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33507#event-456904"
}
```



---

archive/issue_comments_541192.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nProbably the docbuild should try to isolate from such user settings.",
    "created_at": "2022-03-23T18:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541192",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:79" align="right">comment:79</div>

Probably the docbuild should try to isolate from such user settings.



---

archive/issue_comments_541193.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nReplying to [@mkoeppe](#comment:79):\n> Probably the docbuild should try to isolate from such user settings.\n\nI don't understand the precise mechanism. But it seems that jupyter-sphinx just runs a new jupyter notebook with sagemath kernel. Then there is nothing to do with the docbuild.",
    "created_at": "2022-03-23T23:49:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541193",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:80" align="right">comment:80</div>

Replying to [@mkoeppe](#comment:79):
> Probably the docbuild should try to isolate from such user settings.

I don't understand the precise mechanism. But it seems that jupyter-sphinx just runs a new jupyter notebook with sagemath kernel. Then there is nothing to do with the docbuild.



---

archive/issue_comments_541194.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nReplying to [@dimpase](#comment:78):\n\nThank you for review.",
    "created_at": "2022-03-23T23:52:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541194",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:81" align="right">comment:81</div>

Replying to [@dimpase](#comment:78):

Thank you for review.



---

archive/issue_comments_541195.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nReplying to [@kwankyu](#comment:80):\n> Replying to [@mkoeppe](#comment:79):\n> > Probably the docbuild should try to isolate from such user settings.\n\n> \n> I don't understand the precise mechanism. But it seems that jupyter-sphinx just runs a new jupyter notebook with sagemath kernel. Then there is nothing to do with the docbuild.\n\nBut its happening during the docbuild according to the output that Dima shared",
    "created_at": "2022-03-24T00:16:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541195",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:82" align="right">comment:82</div>

Replying to [@kwankyu](#comment:80):
> Replying to [@mkoeppe](#comment:79):
> > Probably the docbuild should try to isolate from such user settings.

> 
> I don't understand the precise mechanism. But it seems that jupyter-sphinx just runs a new jupyter notebook with sagemath kernel. Then there is nothing to do with the docbuild.

But its happening during the docbuild according to the output that Dima shared



---

archive/issue_comments_541196.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nReplying to [@mkoeppe](#comment:82):\n> But its happening during the docbuild according to the output that Dima shared\n\nThe source of the problem may be in our jupyter kernel configuration in `repl.ipython_kernel.kernel`.",
    "created_at": "2022-03-24T00:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541196",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:83" align="right">comment:83</div>

Replying to [@mkoeppe](#comment:82):
> But its happening during the docbuild according to the output that Dima shared

The source of the problem may be in our jupyter kernel configuration in `repl.ipython_kernel.kernel`.



---

archive/issue_comments_541197.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nReplying to [@mkoeppe](#comment:82):\n> Replying to [@kwankyu](#comment:80):\n> > Replying to [@mkoeppe](#comment:79):\n> > > Probably the docbuild should try to isolate from such user settings.\n\n> > \n> > I don't understand the precise mechanism. But it seems that jupyter-sphinx just runs a new jupyter notebook with sagemath kernel. Then there is nothing to do with the docbuild.\n\n> \n> But its happening during the docbuild according to the output that Dima shared\n\nI could reproduce this issue just by running `./sage -n`. So this is indeed a \"pure\" notebook problem.",
    "created_at": "2022-03-24T08:55:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541197",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:84" align="right">comment:84</div>

Replying to [@mkoeppe](#comment:82):
> Replying to [@kwankyu](#comment:80):
> > Replying to [@mkoeppe](#comment:79):
> > > Probably the docbuild should try to isolate from such user settings.

> > 
> > I don't understand the precise mechanism. But it seems that jupyter-sphinx just runs a new jupyter notebook with sagemath kernel. Then there is nothing to do with the docbuild.

> 
> But its happening during the docbuild according to the output that Dima shared

I could reproduce this issue just by running `./sage -n`. So this is indeed a "pure" notebook problem.



---

archive/issue_events_456905.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-04-02T10:52:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33507#event-456905"
}
```



---

archive/issue_events_456906.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "08a942330a6b52809fd48dc34d6ce3b135f87db6",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-04-02T10:52:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33507#event-456906"
}
```



---

archive/issue_comments_541198.json:
```json
{
    "body": "Changed branch from **[public/33507](https://github.com/sagemath/sagetrac-mirror/tree/public/33507)** to **[`72c8378`](https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746)**",
    "created_at": "2022-04-02T10:52:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541198",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/33507](https://github.com/sagemath/sagetrac-mirror/tree/public/33507)** to **[`72c8378`](https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746)**



---

archive/issue_comments_541199.json:
```json
{
    "body": "Changed commit from **[`72c8378`](https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746)** to none",
    "created_at": "2022-04-05T19:18:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541199",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`72c8378`](https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746)** to none



---

archive/issue_comments_541200.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nThe first bug report on this may have arrived: https://groups.google.com/g/sage-release/c/-0luW4DPEPs/m/1bST2lbcCAAJ",
    "created_at": "2022-04-05T19:18:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541200",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:86" align="right">comment:86</div>

The first bug report on this may have arrived: https://groups.google.com/g/sage-release/c/-0luW4DPEPs/m/1bST2lbcCAAJ



---

archive/issue_comments_541201.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nReplying to [@mkoeppe](#comment:86):\n> The first bug report on this may have arrived: https://groups.google.com/g/sage-release/c/-0luW4DPEPs/m/1bST2lbcCAAJ\n\nYou mean \n\n```\n[sagemath_doc_html-none] [plot3d   ] Notebook execution failed (exception: [Errno 2] No such file or directory: '/home/furutaka/work/sage/sage-9.0-git-bld/local/bin/sage')\n```\nI suppose.\n\nThis looks identical to [comment:75](#comment:75) - a stale Jupyter kernel somewhere.",
    "created_at": "2022-04-05T20:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541201",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:87" align="right">comment:87</div>

Replying to [@mkoeppe](#comment:86):
> The first bug report on this may have arrived: https://groups.google.com/g/sage-release/c/-0luW4DPEPs/m/1bST2lbcCAAJ

You mean 

```
[sagemath_doc_html-none] [plot3d   ] Notebook execution failed (exception: [Errno 2] No such file or directory: '/home/furutaka/work/sage/sage-9.0-git-bld/local/bin/sage')
```
I suppose.

This looks identical to [comment:75](#comment:75) - a stale Jupyter kernel somewhere.



---

archive/issue_comments_541202.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nYes. I have opened #33650 for this.",
    "created_at": "2022-04-06T04:38:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33507#issuecomment-541202",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:88" align="right">comment:88</div>

Yes. I have opened #33650 for this.
