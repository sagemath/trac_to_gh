# Issue 33507: sagemath_doc_html: Use jupyter-sphinx for 3D graphics

archive/issues_033270.json:
```json
{
    "body": "We use jupyter-sphinx\n\n\u200b    https://jupyter-sphinx.readthedocs.io/en/latest/\n\nto facilitate live sage documentation based on jupyter and Thebe.\n\nFor documentation authors, new directives are available:\n\n```\n.. ONLY:: pdf \n```\n\n```\n.. JUPYTER-EXECUTE::  \n```\nin addition to\n\n```\n.. ONLY:: html\n```\n\nSee the branch for examples.\n\nRelated tickets: #31027\n\n**CC:**  @kwankyu @jhpalmieri @nthiery @egourgoulhon @dimpase\n\n**Branch:** [72c8378de1f5ab1de0d1062610a0d5d947415746](https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746)\n\n**Reviewer:** Matthias Koeppe, Dima Pasechnik\n\n**Author:** Kwankyu Lee, Matthias Koeppe\n\n**Dependencies:** #33529\n\nIssue created by migration from https://trac.sagemath.org/ticket/33507\n\n",
    "closed_at": "2022-04-02T10:52:54Z",
    "created_at": "2022-03-15T20:50:22Z",
    "labels": [
        "component: documentation",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "sagemath_doc_html: Use jupyter-sphinx for 3D graphics",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33507",
    "user": "https://github.com/mkoeppe"
}
```
We use jupyter-sphinx

​    https://jupyter-sphinx.readthedocs.io/en/latest/

to facilitate live sage documentation based on jupyter and Thebe.

For documentation authors, new directives are available:

```
.. ONLY:: pdf 
```

```
.. JUPYTER-EXECUTE::  
```
in addition to

```
.. ONLY:: html
```

See the branch for examples.

Related tickets: #31027

**CC:**  @kwankyu @jhpalmieri @nthiery @egourgoulhon @dimpase

**Branch:** [72c8378de1f5ab1de0d1062610a0d5d947415746](https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746)

**Reviewer:** Matthias Koeppe, Dima Pasechnik

**Author:** Kwankyu Lee, Matthias Koeppe

**Dependencies:** #33529

Issue created by migration from https://trac.sagemath.org/ticket/33507





---

archive/issue_comments_545337.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,3 +3,4 @@\n \n We should be able to do the same.\n \n+See also #31027\n``````\n",
    "created_at": "2022-03-15T20:52:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545337",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,3 +3,4 @@
 
 We should be able to do the same.
 
+See also #31027
``````




---

archive/issue_comments_545338.json:
```json
{
    "body": "<a id='comment:2'></a>\nIt uses nbsphinx: https://nbsphinx.readthedocs.io/en/0.8.8/\n\nnbsphinx allows including jupyter notebooks in toctrees. It seems that we cannot include a single cell of a jupyter notebook as a part of our documentation, which I guess is what we want.",
    "created_at": "2022-03-16T03:58:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545338",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:2'></a>
It uses nbsphinx: https://nbsphinx.readthedocs.io/en/0.8.8/

nbsphinx allows including jupyter notebooks in toctrees. It seems that we cannot include a single cell of a jupyter notebook as a part of our documentation, which I guess is what we want.



---

archive/issue_comments_545339.json:
```json
{
    "body": "**Branch:** [public/33507](https://github.com/sagemath/sagetrac-mirror/tree/public/33507)",
    "created_at": "2022-03-16T05:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545339",
    "user": "https://github.com/kwankyu"
}
```

**Branch:** [public/33507](https://github.com/sagemath/sagetrac-mirror/tree/public/33507)



---

archive/issue_comments_545340.json:
```json
{
    "body": "**Commit:** [1b7e46b866c078967768f5bda751e47fd9e22aee](https://github.com/sagemath/sagetrac-mirror/commit/1b7e46b866c078967768f5bda751e47fd9e22aee)",
    "created_at": "2022-03-16T05:06:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545340",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [1b7e46b866c078967768f5bda751e47fd9e22aee](https://github.com/sagemath/sagetrac-mirror/commit/1b7e46b866c078967768f5bda751e47fd9e22aee)



---

archive/issue_comments_545341.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b7e46b866c078967768f5bda751e47fd9e22aee\">1b7e46b</a></td><td><code>Experiments with jupyter-spinx</code></td></tr></table>\n",
    "created_at": "2022-03-16T05:06:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545341",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b7e46b866c078967768f5bda751e47fd9e22aee">1b7e46b</a></td><td><code>Experiments with jupyter-spinx</code></td></tr></table>




---

archive/issue_comments_545342.json:
```json
{
    "body": "**Changing commit** from \"[1b7e46b866c078967768f5bda751e47fd9e22aee](https://github.com/sagemath/sagetrac-mirror/commit/1b7e46b866c078967768f5bda751e47fd9e22aee)\" to \"[58f1338077b41558db78b6c5e4f84543ba9c86ce](https://github.com/sagemath/sagetrac-mirror/commit/58f1338077b41558db78b6c5e4f84543ba9c86ce)\".",
    "created_at": "2022-03-16T05:08:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545342",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1b7e46b866c078967768f5bda751e47fd9e22aee](https://github.com/sagemath/sagetrac-mirror/commit/1b7e46b866c078967768f5bda751e47fd9e22aee)" to "[58f1338077b41558db78b6c5e4f84543ba9c86ce](https://github.com/sagemath/sagetrac-mirror/commit/58f1338077b41558db78b6c5e4f84543ba9c86ce)".



---

archive/issue_comments_545343.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58f1338077b41558db78b6c5e4f84543ba9c86ce\">58f1338</a></td><td><code>Experiments with jupyter-sphinx</code></td></tr></table>\n",
    "created_at": "2022-03-16T05:08:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545343",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58f1338077b41558db78b6c5e4f84543ba9c86ce">58f1338</a></td><td><code>Experiments with jupyter-sphinx</code></td></tr></table>




---

archive/issue_comments_545344.json:
```json
{
    "body": "<a id='comment:6'></a>\nThis tool \n\nhttps://jupyter-sphinx.readthedocs.io/en/latest/\n\nworks well.\n\nI uploaded a branch to experiment with the tool. First `sage -pip install jupyter-sphinx`.",
    "created_at": "2022-03-16T05:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545344",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:6'></a>
This tool 

https://jupyter-sphinx.readthedocs.io/en/latest/

works well.

I uploaded a branch to experiment with the tool. First `sage -pip install jupyter-sphinx`.



---

archive/issue_events_304756.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-16T05:28:00Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "rename": {
        "from": "sagemath_doc_html: Use pythreejs for 3D graphics",
        "to": "sagemath_doc_html: Use jupyter-sphinx for 3D graphics"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33507#event-304756"
}
```



---

archive/issue_comments_545345.json:
```json
{
    "body": "<a id='comment:7'></a>\nThis package would be easy to add, we already have all dependencies -  https://github.com/jupyter/jupyter-sphinx/blob/master/setup.py#L30",
    "created_at": "2022-03-16T05:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545345",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
This package would be easy to add, we already have all dependencies -  https://github.com/jupyter/jupyter-sphinx/blob/master/setup.py#L30



---

archive/issue_comments_545346.json:
```json
{
    "body": "**Changing commit** from \"[58f1338077b41558db78b6c5e4f84543ba9c86ce](https://github.com/sagemath/sagetrac-mirror/commit/58f1338077b41558db78b6c5e4f84543ba9c86ce)\" to \"[8f8cd2bb2e4939fe56bcf7353f01d62e1083e972](https://github.com/sagemath/sagetrac-mirror/commit/8f8cd2bb2e4939fe56bcf7353f01d62e1083e972)\".",
    "created_at": "2022-03-16T05:33:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545346",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[58f1338077b41558db78b6c5e4f84543ba9c86ce](https://github.com/sagemath/sagetrac-mirror/commit/58f1338077b41558db78b6c5e4f84543ba9c86ce)" to "[8f8cd2bb2e4939fe56bcf7353f01d62e1083e972](https://github.com/sagemath/sagetrac-mirror/commit/8f8cd2bb2e4939fe56bcf7353f01d62e1083e972)".



---

archive/issue_comments_545347.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f8cd2bb2e4939fe56bcf7353f01d62e1083e972\">8f8cd2b</a></td><td><code>Activate Thebelab</code></td></tr></table>\n",
    "created_at": "2022-03-16T05:33:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545347",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f8cd2bb2e4939fe56bcf7353f01d62e1083e972">8f8cd2b</a></td><td><code>Activate Thebelab</code></td></tr></table>




---

archive/issue_comments_545348.json:
```json
{
    "body": "<a id='comment:10'></a>\nWe need a sagemath binder repo for Thebe to work.",
    "created_at": "2022-03-16T08:30:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545348",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:10'></a>
We need a sagemath binder repo for Thebe to work.



---

archive/issue_comments_545349.json:
```json
{
    "body": "**Changing commit** from \"[8f8cd2bb2e4939fe56bcf7353f01d62e1083e972](https://github.com/sagemath/sagetrac-mirror/commit/8f8cd2bb2e4939fe56bcf7353f01d62e1083e972)\" to \"[84cec60baa8e0969bc81dcc797cdf37aafeb76c9](https://github.com/sagemath/sagetrac-mirror/commit/84cec60baa8e0969bc81dcc797cdf37aafeb76c9)\".",
    "created_at": "2022-03-17T04:53:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545349",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8f8cd2bb2e4939fe56bcf7353f01d62e1083e972](https://github.com/sagemath/sagetrac-mirror/commit/8f8cd2bb2e4939fe56bcf7353f01d62e1083e972)" to "[84cec60baa8e0969bc81dcc797cdf37aafeb76c9](https://github.com/sagemath/sagetrac-mirror/commit/84cec60baa8e0969bc81dcc797cdf37aafeb76c9)".



---

archive/issue_comments_545350.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84cec60baa8e0969bc81dcc797cdf37aafeb76c9\">84cec60</a></td><td><code>For pdf documentation</code></td></tr></table>\n",
    "created_at": "2022-03-17T04:53:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545350",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84cec60baa8e0969bc81dcc797cdf37aafeb76c9">84cec60</a></td><td><code>For pdf documentation</code></td></tr></table>




---

archive/issue_comments_545351.json:
```json
{
    "body": "<a id='comment:12'></a>\nThe last commit provides an example to provide live images to htmls and static images to pdfs.",
    "created_at": "2022-03-17T05:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545351",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:12'></a>
The last commit provides an example to provide live images to htmls and static images to pdfs.



---

archive/issue_comments_545352.json:
```json
{
    "body": "<a id='comment:13'></a>\nOne annoying thing is that `.. only:: latex` works but `.. only:: pdf` doesn't.",
    "created_at": "2022-03-17T05:18:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545352",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:13'></a>
One annoying thing is that `.. only:: latex` works but `.. only:: pdf` doesn't.



---

archive/issue_comments_545353.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f01f21a8310b8d1003c72a3f023e8be253edcb2\">5f01f21</a></td><td><code>Forgotten images</code></td></tr></table>\n",
    "created_at": "2022-03-17T05:22:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545353",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f01f21a8310b8d1003c72a3f023e8be253edcb2">5f01f21</a></td><td><code>Forgotten images</code></td></tr></table>




---

archive/issue_comments_545354.json:
```json
{
    "body": "**Changing commit** from \"[84cec60baa8e0969bc81dcc797cdf37aafeb76c9](https://github.com/sagemath/sagetrac-mirror/commit/84cec60baa8e0969bc81dcc797cdf37aafeb76c9)\" to \"[5f01f21a8310b8d1003c72a3f023e8be253edcb2](https://github.com/sagemath/sagetrac-mirror/commit/5f01f21a8310b8d1003c72a3f023e8be253edcb2)\".",
    "created_at": "2022-03-17T05:22:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545354",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[84cec60baa8e0969bc81dcc797cdf37aafeb76c9](https://github.com/sagemath/sagetrac-mirror/commit/84cec60baa8e0969bc81dcc797cdf37aafeb76c9)" to "[5f01f21a8310b8d1003c72a3f023e8be253edcb2](https://github.com/sagemath/sagetrac-mirror/commit/5f01f21a8310b8d1003c72a3f023e8be253edcb2)".



---

archive/issue_comments_545355.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73c8c37a71e423adcc2a1f16a9e54854f883d408\">73c8c37</a></td><td><code>build/pkgs/jupyter_sphinx: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bbc276e7b1682a3fe18c4eca88b95d97664ee06c\">bbc276e</a></td><td><code>build/pkgs/sagemath_doc_html/dependencies: Add jupyter_sphinx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6133f9ffa93630f48746630730886ec52cf53e02\">6133f9f</a></td><td><code>configure.ac (--disable-doc): Disable jupyter_sphinx too</code></td></tr></table>\n",
    "created_at": "2022-03-17T07:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545355",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73c8c37a71e423adcc2a1f16a9e54854f883d408">73c8c37</a></td><td><code>build/pkgs/jupyter_sphinx: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bbc276e7b1682a3fe18c4eca88b95d97664ee06c">bbc276e</a></td><td><code>build/pkgs/sagemath_doc_html/dependencies: Add jupyter_sphinx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6133f9ffa93630f48746630730886ec52cf53e02">6133f9f</a></td><td><code>configure.ac (--disable-doc): Disable jupyter_sphinx too</code></td></tr></table>




---

archive/issue_comments_545356.json:
```json
{
    "body": "**Changing commit** from \"[5f01f21a8310b8d1003c72a3f023e8be253edcb2](https://github.com/sagemath/sagetrac-mirror/commit/5f01f21a8310b8d1003c72a3f023e8be253edcb2)\" to \"[6133f9ffa93630f48746630730886ec52cf53e02](https://github.com/sagemath/sagetrac-mirror/commit/6133f9ffa93630f48746630730886ec52cf53e02)\".",
    "created_at": "2022-03-17T07:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545356",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5f01f21a8310b8d1003c72a3f023e8be253edcb2](https://github.com/sagemath/sagetrac-mirror/commit/5f01f21a8310b8d1003c72a3f023e8be253edcb2)" to "[6133f9ffa93630f48746630730886ec52cf53e02](https://github.com/sagemath/sagetrac-mirror/commit/6133f9ffa93630f48746630730886ec52cf53e02)".



---

archive/issue_comments_545357.json:
```json
{
    "body": "<a id='comment:16'></a>\nHere's the package",
    "created_at": "2022-03-17T07:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545357",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
Here's the package



---

archive/issue_comments_545358.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [klee](#comment%3A10):\n> We need a sagemath binder repo for Thebe to work.\n\n\nI fixed 'Sage binder env' about a month ago:\n\nhttps://github.com/sagemath/sage-binder-env\n\nIt now uses conda to install Sage which is more maintained than\nSage's docker image.",
    "created_at": "2022-03-17T08:15:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545358",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:17'></a>
Replying to [klee](#comment%3A10):
> We need a sagemath binder repo for Thebe to work.


I fixed 'Sage binder env' about a month ago:

https://github.com/sagemath/sage-binder-env

It now uses conda to install Sage which is more maintained than
Sage's docker image.



---

archive/issue_comments_545359.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [mkoeppe](#comment%3A16):\n> Here's the package\n\n\nThank you!",
    "created_at": "2022-03-17T08:29:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545359",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:18'></a>
Replying to [mkoeppe](#comment%3A16):
> Here's the package


Thank you!



---

archive/issue_comments_545360.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [nthiery](#comment%3A17):\n> Replying to [klee](#comment%3A10):\n> > We need a sagemath binder repo for Thebe to work.\n\n> \n> I fixed 'Sage binder env' about a month ago:\n> \n> https://github.com/sagemath/sage-binder-env\n> \n> It now uses conda to install Sage which is more maintained than\n> Sage's docker image.\n\n\nI have no experience with Thebe. Jupyter-sphinx supports Thebe. But running an interact example cell through jupyter-sphinx only shows `Waiting for kernel...`. Is this supposed to take long? Would the interact work well once the kernel is up?",
    "created_at": "2022-03-17T08:52:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545360",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:19'></a>
Replying to [nthiery](#comment%3A17):
> Replying to [klee](#comment%3A10):
> > We need a sagemath binder repo for Thebe to work.

> 
> I fixed 'Sage binder env' about a month ago:
> 
> https://github.com/sagemath/sage-binder-env
> 
> It now uses conda to install Sage which is more maintained than
> Sage's docker image.


I have no experience with Thebe. Jupyter-sphinx supports Thebe. But running an interact example cell through jupyter-sphinx only shows `Waiting for kernel...`. Is this supposed to take long? Would the interact work well once the kernel is up?



---

archive/issue_comments_545361.json:
```json
{
    "body": "**Changing commit** from \"[6133f9ffa93630f48746630730886ec52cf53e02](https://github.com/sagemath/sagetrac-mirror/commit/6133f9ffa93630f48746630730886ec52cf53e02)\" to \"[7641a72d901080420d59dbc5c3dfa02320b0e56d](https://github.com/sagemath/sagetrac-mirror/commit/7641a72d901080420d59dbc5c3dfa02320b0e56d)\".",
    "created_at": "2022-03-18T09:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545361",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6133f9ffa93630f48746630730886ec52cf53e02](https://github.com/sagemath/sagetrac-mirror/commit/6133f9ffa93630f48746630730886ec52cf53e02)" to "[7641a72d901080420d59dbc5c3dfa02320b0e56d](https://github.com/sagemath/sagetrac-mirror/commit/7641a72d901080420d59dbc5c3dfa02320b0e56d)".



---

archive/issue_comments_545362.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7641a72d901080420d59dbc5c3dfa02320b0e56d\">7641a72</a></td><td><code>Add pdf tag</code></td></tr></table>\n",
    "created_at": "2022-03-18T09:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545362",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7641a72d901080420d59dbc5c3dfa02320b0e56d">7641a72</a></td><td><code>Add pdf tag</code></td></tr></table>




---

archive/issue_comments_545363.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [klee](#comment%3A19):\n> Replying to [nthiery](#comment%3A17):\n> > Replying to [klee](#comment%3A10):\n> > > We need a sagemath binder repo for Thebe to work.\n\n> > \n> > I fixed 'Sage binder env' about a month ago:\n> > \n> > https://github.com/sagemath/sage-binder-env\n> > \n> > It now uses conda to install Sage which is more maintained than\n> > Sage's docker image.\n\n> \n> I have no experience with Thebe. Jupyter-sphinx supports Thebe. But running an interact example cell through jupyter-sphinx only shows `Waiting for kernel...`. Is this supposed to take long? Would the interact work well once the kernel is up?\n\n\nIt now seems work almost...only that the sage in conda doesn't work well.",
    "created_at": "2022-03-18T09:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545363",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:22'></a>
Replying to [klee](#comment%3A19):
> Replying to [nthiery](#comment%3A17):
> > Replying to [klee](#comment%3A10):
> > > We need a sagemath binder repo for Thebe to work.

> > 
> > I fixed 'Sage binder env' about a month ago:
> > 
> > https://github.com/sagemath/sage-binder-env
> > 
> > It now uses conda to install Sage which is more maintained than
> > Sage's docker image.

> 
> I have no experience with Thebe. Jupyter-sphinx supports Thebe. But running an interact example cell through jupyter-sphinx only shows `Waiting for kernel...`. Is this supposed to take long? Would the interact work well once the kernel is up?


It now seems work almost...only that the sage in conda doesn't work well.



---

archive/issue_comments_545364.json:
```json
{
    "body": "**Changing commit** from \"[7641a72d901080420d59dbc5c3dfa02320b0e56d](https://github.com/sagemath/sagetrac-mirror/commit/7641a72d901080420d59dbc5c3dfa02320b0e56d)\" to \"[8cae79ee88981f6318acfc02355fa893f3832c6c](https://github.com/sagemath/sagetrac-mirror/commit/8cae79ee88981f6318acfc02355fa893f3832c6c)\".",
    "created_at": "2022-03-18T09:15:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545364",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7641a72d901080420d59dbc5c3dfa02320b0e56d](https://github.com/sagemath/sagetrac-mirror/commit/7641a72d901080420d59dbc5c3dfa02320b0e56d)" to "[8cae79ee88981f6318acfc02355fa893f3832c6c](https://github.com/sagemath/sagetrac-mirror/commit/8cae79ee88981f6318acfc02355fa893f3832c6c)".



---

archive/issue_comments_545365.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cae79ee88981f6318acfc02355fa893f3832c6c\">8cae79e</a></td><td><code>Remove sage: promtps</code></td></tr></table>\n",
    "created_at": "2022-03-18T09:15:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545365",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cae79ee88981f6318acfc02355fa893f3832c6c">8cae79e</a></td><td><code>Remove sage: promtps</code></td></tr></table>




---

archive/issue_comments_545366.json:
```json
{
    "body": "**Changing commit** from \"[8cae79ee88981f6318acfc02355fa893f3832c6c](https://github.com/sagemath/sagetrac-mirror/commit/8cae79ee88981f6318acfc02355fa893f3832c6c)\" to \"[845e4494f48857df4b452c340704bbfa1ad74596](https://github.com/sagemath/sagetrac-mirror/commit/845e4494f48857df4b452c340704bbfa1ad74596)\".",
    "created_at": "2022-03-18T10:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545366",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8cae79ee88981f6318acfc02355fa893f3832c6c](https://github.com/sagemath/sagetrac-mirror/commit/8cae79ee88981f6318acfc02355fa893f3832c6c)" to "[845e4494f48857df4b452c340704bbfa1ad74596](https://github.com/sagemath/sagetrac-mirror/commit/845e4494f48857df4b452c340704bbfa1ad74596)".



---

archive/issue_comments_545367.json:
```json
{
    "body": "<a id='comment:24'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f6a3919b2cb81fbe45d7f7c43386d8aaf324f0d\">9f6a391</a></td><td><code>build/pkgs/pythran: Update to 0.11.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15478829fa39db7e3778ab9e50fca9f3f3839086\">1547882</a></td><td><code>Merge #33522</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/845e4494f48857df4b452c340704bbfa1ad74596\">845e449</a></td><td><code>Position thebe button at right bottom</code></td></tr></table>\n",
    "created_at": "2022-03-18T10:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545367",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f6a3919b2cb81fbe45d7f7c43386d8aaf324f0d">9f6a391</a></td><td><code>build/pkgs/pythran: Update to 0.11.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15478829fa39db7e3778ab9e50fca9f3f3839086">1547882</a></td><td><code>Merge #33522</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/845e4494f48857df4b452c340704bbfa1ad74596">845e449</a></td><td><code>Position thebe button at right bottom</code></td></tr></table>




---

archive/issue_comments_545368.json:
```json
{
    "body": "<a id='comment:25'></a>\n> It now seems work almost...\n\n\nGood.\n\n> only that the sage in conda doesn't work well.\n\n\nCould this be made more specific?",
    "created_at": "2022-03-18T11:48:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545368",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:25'></a>
> It now seems work almost...


Good.

> only that the sage in conda doesn't work well.


Could this be made more specific?



---

archive/attachments_021602.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "screenshot.png",
    "asset_url": "tarball://root/attachments/some-uuid/ticket33507/screenshot.png",
    "created_at": "2022-03-18T13:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.png",
    "user": "https://github.com/kwankyu"
}
```



---

archive/issue_comments_545369.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [nthiery](#comment%3A25):\n> > It now seems work almost...\n\n> \n> Good.\n> \n> > only that the sage in conda doesn't work well.\n\n> \n> Could this be made more specific?\n\n\nSee the screenshot.",
    "created_at": "2022-03-18T13:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545369",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:26'></a>
Replying to [nthiery](#comment%3A25):
> > It now seems work almost...

> 
> Good.
> 
> > only that the sage in conda doesn't work well.

> 
> Could this be made more specific?


See the screenshot.



---

archive/issue_comments_545370.json:
```json
{
    "body": "<a id='comment:27'></a>\nIt seems python not sage runs.",
    "created_at": "2022-03-18T13:11:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545370",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:27'></a>
It seems python not sage runs.



---

archive/issue_comments_545371.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [klee](#comment%3A27):\n> It seems python not sage runs.\n\n\nI see.\n\nIn Thebe you can configure which kernel should be used;\nsee the kernel section in:\n\nhttps://thebe.readthedocs.io/en/latest/config_reference.html\n\nI assume that this can be done too through Jupyter-sphinx, though\nI don't know the details from the top of my head.",
    "created_at": "2022-03-18T16:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545371",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:28'></a>
Replying to [klee](#comment%3A27):
> It seems python not sage runs.


I see.

In Thebe you can configure which kernel should be used;
see the kernel section in:

https://thebe.readthedocs.io/en/latest/config_reference.html

I assume that this can be done too through Jupyter-sphinx, though
I don't know the details from the top of my head.



---

archive/issue_comments_545372.json:
```json
{
    "body": "<a id='comment:29'></a>\nPresumably it should be enough to insert a kernel section \nas documented in the thebe manual in the jupyter-sphinx\nthebe configuration:\n\nhttps://jupyter-sphinx.readthedocs.io/en/latest/#thebelab-support\n\nSee also:\n\nhttps://jupyter-sphinx.readthedocs.io/en/latest/#controlling-the-execution-environment\n\nThank you for pushing this forward!",
    "created_at": "2022-03-18T16:33:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545372",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:29'></a>
Presumably it should be enough to insert a kernel section 
as documented in the thebe manual in the jupyter-sphinx
thebe configuration:

https://jupyter-sphinx.readthedocs.io/en/latest/#thebelab-support

See also:

https://jupyter-sphinx.readthedocs.io/en/latest/#controlling-the-execution-environment

Thank you for pushing this forward!



---

archive/issue_comments_545373.json:
```json
{
    "body": "**Changing commit** from \"[845e4494f48857df4b452c340704bbfa1ad74596](https://github.com/sagemath/sagetrac-mirror/commit/845e4494f48857df4b452c340704bbfa1ad74596)\" to \"[d0b2628121b159a7ee9704b19e09661bbc6e19e6](https://github.com/sagemath/sagetrac-mirror/commit/d0b2628121b159a7ee9704b19e09661bbc6e19e6)\".",
    "created_at": "2022-03-18T23:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545373",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[845e4494f48857df4b452c340704bbfa1ad74596](https://github.com/sagemath/sagetrac-mirror/commit/845e4494f48857df4b452c340704bbfa1ad74596)" to "[d0b2628121b159a7ee9704b19e09661bbc6e19e6](https://github.com/sagemath/sagetrac-mirror/commit/d0b2628121b159a7ee9704b19e09661bbc6e19e6)".



---

archive/issue_comments_545374.json:
```json
{
    "body": "<a id='comment:30'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0b2628121b159a7ee9704b19e09661bbc6e19e6\">d0b2628</a></td><td><code>Add Thebe kernel specs</code></td></tr></table>\n",
    "created_at": "2022-03-18T23:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545374",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0b2628121b159a7ee9704b19e09661bbc6e19e6">d0b2628</a></td><td><code>Add Thebe kernel specs</code></td></tr></table>




---

archive/issue_comments_545375.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [nthiery](#comment%3A28):\n> In Thebe you can configure which kernel should be used;\n> see the kernel section in:\n> \n> https://thebe.readthedocs.io/en/latest/config_reference.html\n> \n> I assume that this can be done too through Jupyter-sphinx, though\n> I don't know the details from the top of my head.\n\n\nAdding the kernel spec makes it work perfect. Thank you!",
    "created_at": "2022-03-18T23:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545375",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:31'></a>
Replying to [nthiery](#comment%3A28):
> In Thebe you can configure which kernel should be used;
> see the kernel section in:
> 
> https://thebe.readthedocs.io/en/latest/config_reference.html
> 
> I assume that this can be done too through Jupyter-sphinx, though
> I don't know the details from the top of my head.


Adding the kernel spec makes it work perfect. Thank you!



---

archive/issue_comments_545376.json:
```json
{
    "body": "**Author:** Kwankyu Lee, Matthias Koeppe",
    "created_at": "2022-03-18T23:13:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545376",
    "user": "https://github.com/kwankyu"
}
```

**Author:** Kwankyu Lee, Matthias Koeppe



---

archive/issue_comments_545377.json:
```json
{
    "body": "<a id='comment:33'></a>\nGiven that all the old thebe stuff is commented out in `src/doc/common/themes/sage-classic/layout.html`, should we just remove it entirely (`build/pkgs/thebe/` etc.)?",
    "created_at": "2022-03-19T00:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545377",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>
Given that all the old thebe stuff is commented out in `src/doc/common/themes/sage-classic/layout.html`, should we just remove it entirely (`build/pkgs/thebe/` etc.)?



---

archive/issue_comments_545378.json:
```json
{
    "body": "<a id='comment:34'></a>\n(Looks like the branch at #24593 does this)",
    "created_at": "2022-03-19T01:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545378",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>
(Looks like the branch at #24593 does this)



---

archive/issue_comments_545379.json:
```json
{
    "body": "<a id='comment:35'></a>\nDone now in #33529.",
    "created_at": "2022-03-19T01:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545379",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>
Done now in #33529.



---

archive/issue_comments_545380.json:
```json
{
    "body": "<a id='comment:36'></a>\nWith the present ticket, I am getting: \n\n```\n[sagemath_doc_html-none] [reference] WARNING: failed to reach any of the inventories with the following issues:\n[sagemath_doc_html-none] [reference] intersphinx inventory '/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/share/doc/sage/inventory/en/reference/jupyter_execute/objects.inv' not fetchable due to <class 'FileNotFoundError'>: [Errno 2] No such file or directory: '/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/share/doc/sage/inventory/en/reference/jupyter_execute/objects.inv'\n[sagemath_doc_html-none] [reference] building [html]: targets for 1 source files that are out of date\n[sagemath_doc_html-none] [reference] dumping search index in English (code: en)... done\n[sagemath_doc_html-none] [reference] The HTML pages are in local/share/doc/sage/html/en/reference/references.\n```\n(even after `make doc-uninstall`)",
    "created_at": "2022-03-19T01:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545380",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>
With the present ticket, I am getting: 

```
[sagemath_doc_html-none] [reference] WARNING: failed to reach any of the inventories with the following issues:
[sagemath_doc_html-none] [reference] intersphinx inventory '/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/share/doc/sage/inventory/en/reference/jupyter_execute/objects.inv' not fetchable due to <class 'FileNotFoundError'>: [Errno 2] No such file or directory: '/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/share/doc/sage/inventory/en/reference/jupyter_execute/objects.inv'
[sagemath_doc_html-none] [reference] building [html]: targets for 1 source files that are out of date
[sagemath_doc_html-none] [reference] dumping search index in English (code: en)... done
[sagemath_doc_html-none] [reference] The HTML pages are in local/share/doc/sage/html/en/reference/references.
```
(even after `make doc-uninstall`)



---

archive/issue_comments_545381.json:
```json
{
    "body": "<a id='comment:37'></a>\nI saw that strange thing. I just deleted the directory. I have no idea where that came from.",
    "created_at": "2022-03-19T02:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545381",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:37'></a>
I saw that strange thing. I just deleted the directory. I have no idea where that came from.



---

archive/issue_comments_545382.json:
```json
{
    "body": "<a id='comment:38'></a>\nThanks, this helped.",
    "created_at": "2022-03-19T03:04:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545382",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>
Thanks, this helped.



---

archive/issue_comments_545383.json:
```json
{
    "body": "<a id='comment:39'></a>\nThis looks very good already!",
    "created_at": "2022-03-19T03:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545383",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>
This looks very good already!



---

archive/issue_comments_545384.json:
```json
{
    "body": "**Changing commit** from \"[d0b2628121b159a7ee9704b19e09661bbc6e19e6](https://github.com/sagemath/sagetrac-mirror/commit/d0b2628121b159a7ee9704b19e09661bbc6e19e6)\" to \"[bfd667d73ce950419ac9b20d67edada89327671d](https://github.com/sagemath/sagetrac-mirror/commit/bfd667d73ce950419ac9b20d67edada89327671d)\".",
    "created_at": "2022-03-19T11:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545384",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d0b2628121b159a7ee9704b19e09661bbc6e19e6](https://github.com/sagemath/sagetrac-mirror/commit/d0b2628121b159a7ee9704b19e09661bbc6e19e6)" to "[bfd667d73ce950419ac9b20d67edada89327671d](https://github.com/sagemath/sagetrac-mirror/commit/bfd667d73ce950419ac9b20d67edada89327671d)".



---

archive/issue_comments_545385.json:
```json
{
    "body": "<a id='comment:40'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bfd667d73ce950419ac9b20d67edada89327671d\">bfd667d</a></td><td><code>Fix missing inventory file error</code></td></tr></table>\n",
    "created_at": "2022-03-19T11:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545385",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bfd667d73ce950419ac9b20d67edada89327671d">bfd667d</a></td><td><code>Fix missing inventory file error</code></td></tr></table>




---

archive/issue_comments_545386.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n-The Sphinx documentation of `pythreejs` has proper 3D graphics, see for example\n-https://pythreejs.readthedocs.io/en/stable/examples/Animation.html \n+We use jupyter-sphinx\n \n-We should be able to do the same.\n+\u200b    https://jupyter-sphinx.readthedocs.io/en/latest/\n+\n+to facilitate live sage documentation based on jupyter and Thebe.\n \n See also #31027\n``````\n",
    "created_at": "2022-03-19T11:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545386",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
-The Sphinx documentation of `pythreejs` has proper 3D graphics, see for example
-https://pythreejs.readthedocs.io/en/stable/examples/Animation.html 
+We use jupyter-sphinx
 
-We should be able to do the same.
+​    https://jupyter-sphinx.readthedocs.io/en/latest/
+
+to facilitate live sage documentation based on jupyter and Thebe.
 
 See also #31027
``````




---

archive/issue_comments_545387.json:
```json
{
    "body": "<a id='comment:42'></a>\nAs shown by the examples provided by the branch, static images for pdf documentation can either be provided (1) by `sphinx_plot` (this is the status quo), or (2) by prepared png image files saved from live threejs graphics. \n\nThere are pros and cons of both ways. Though both ways may coexist in sage, I think we should choose one of them as a norm, to guide future efforts to improve the documentation.\n\nPros of (1): It is the current standard; It does not increase the size of the sage distribution.\n\nPros of (2): It is of better quality; It is consistent with the live threejs renderings.\n\nCons of (1) is the negative of pros of (2), and vice versa. In particular, a big con of (2) is that it would increase the size of the sage distribution greatly.\n\nSo what do you think?",
    "created_at": "2022-03-19T12:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545387",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:42'></a>
As shown by the examples provided by the branch, static images for pdf documentation can either be provided (1) by `sphinx_plot` (this is the status quo), or (2) by prepared png image files saved from live threejs graphics. 

There are pros and cons of both ways. Though both ways may coexist in sage, I think we should choose one of them as a norm, to guide future efforts to improve the documentation.

Pros of (1): It is the current standard; It does not increase the size of the sage distribution.

Pros of (2): It is of better quality; It is consistent with the live threejs renderings.

Cons of (1) is the negative of pros of (2), and vice versa. In particular, a big con of (2) is that it would increase the size of the sage distribution greatly.

So what do you think?



---

archive/issue_comments_545388.json:
```json
{
    "body": "<a id='comment:43'></a>\nI'd say for this ticket (1) is better; actually not so much because of the added size but rather because of maintainability concerns. I'm not too worried about the output quality of the PDF documentation (I'd be surprised if anyone looks at it)",
    "created_at": "2022-03-19T18:36:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545388",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>
I'd say for this ticket (1) is better; actually not so much because of the added size but rather because of maintainability concerns. I'm not too worried about the output quality of the PDF documentation (I'd be surprised if anyone looks at it)



---

archive/issue_comments_545389.json:
```json
{
    "body": "**Changing commit** from \"[bfd667d73ce950419ac9b20d67edada89327671d](https://github.com/sagemath/sagetrac-mirror/commit/bfd667d73ce950419ac9b20d67edada89327671d)\" to \"[d64b0a3652d7925096ac263334690aa63701c8a1](https://github.com/sagemath/sagetrac-mirror/commit/d64b0a3652d7925096ac263334690aa63701c8a1)\".",
    "created_at": "2022-03-20T04:52:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545389",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bfd667d73ce950419ac9b20d67edada89327671d](https://github.com/sagemath/sagetrac-mirror/commit/bfd667d73ce950419ac9b20d67edada89327671d)" to "[d64b0a3652d7925096ac263334690aa63701c8a1](https://github.com/sagemath/sagetrac-mirror/commit/d64b0a3652d7925096ac263334690aa63701c8a1)".



---

archive/issue_comments_545390.json:
```json
{
    "body": "<a id='comment:44'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d64b0a3652d7925096ac263334690aa63701c8a1\">d64b0a3</a></td><td><code>Use sphinx_plot for pdf documentation</code></td></tr></table>\n",
    "created_at": "2022-03-20T04:52:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545390",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d64b0a3652d7925096ac263334690aa63701c8a1">d64b0a3</a></td><td><code>Use sphinx_plot for pdf documentation</code></td></tr></table>




---

archive/issue_comments_545391.json:
```json
{
    "body": "<a id='comment:45'></a>\nReplying to [mkoeppe](#comment%3A43):\n> I'd say for this ticket (1) is better; actually not so much because of the added size but rather because of maintainability concerns. I'm not too worried about the output quality of the PDF documentation \n\n\nOkay.\n\n> (I'd be surprised if anyone looks at it)\n\n\n:)",
    "created_at": "2022-03-20T04:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545391",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:45'></a>
Replying to [mkoeppe](#comment%3A43):
> I'd say for this ticket (1) is better; actually not so much because of the added size but rather because of maintainability concerns. I'm not too worried about the output quality of the PDF documentation 


Okay.

> (I'd be surprised if anyone looks at it)


:)



---

archive/issue_comments_545392.json:
```json
{
    "body": "<a id='comment:46'></a>\nIn the last commit, I added many jupyter-sphinx images to plot3d.py.\n\nBut if you see the page in a webbrowser (at least in my case), many initial images disappear as more images are rendered. \n\nI don't know why this happens. Too many iframes?",
    "created_at": "2022-03-20T04:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545392",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:46'></a>
In the last commit, I added many jupyter-sphinx images to plot3d.py.

But if you see the page in a webbrowser (at least in my case), many initial images disappear as more images are rendered. 

I don't know why this happens. Too many iframes?



---

archive/issue_comments_545393.json:
```json
{
    "body": "<a id='comment:47'></a>\nIt seems a limit on threejs images:\n\nhttps://stackoverflow.com/questions/41919341/is-there-a-limit-to-the-number-of-three-webglrenderer-instances-in-a-page",
    "created_at": "2022-03-20T05:11:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545393",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:47'></a>
It seems a limit on threejs images:

https://stackoverflow.com/questions/41919341/is-there-a-limit-to-the-number-of-three-webglrenderer-instances-in-a-page



---

archive/issue_comments_545394.json:
```json
{
    "body": "**Changing commit** from \"[d64b0a3652d7925096ac263334690aa63701c8a1](https://github.com/sagemath/sagetrac-mirror/commit/d64b0a3652d7925096ac263334690aa63701c8a1)\" to \"[c2304f3aeaa3516c2eacd3b115bf3c24708e842f](https://github.com/sagemath/sagetrac-mirror/commit/c2304f3aeaa3516c2eacd3b115bf3c24708e842f)\".",
    "created_at": "2022-03-20T08:44:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545394",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d64b0a3652d7925096ac263334690aa63701c8a1](https://github.com/sagemath/sagetrac-mirror/commit/d64b0a3652d7925096ac263334690aa63701c8a1)" to "[c2304f3aeaa3516c2eacd3b115bf3c24708e842f](https://github.com/sagemath/sagetrac-mirror/commit/c2304f3aeaa3516c2eacd3b115bf3c24708e842f)".



---

archive/issue_comments_545395.json:
```json
{
    "body": "<a id='comment:48'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2304f3aeaa3516c2eacd3b115bf3c24708e842f\">c2304f3</a></td><td><code>Revert back to static images</code></td></tr></table>\n",
    "created_at": "2022-03-20T08:44:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545395",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2304f3aeaa3516c2eacd3b115bf3c24708e842f">c2304f3</a></td><td><code>Revert back to static images</code></td></tr></table>




---

archive/issue_events_304757.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-03-20T08:45:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33507#event-304757"
}
```



---

archive/issue_comments_545396.json:
```json
{
    "body": "<a id='comment:50'></a>\nReplying to [klee](#comment%3A45):\n> Replying to [mkoeppe](#comment%3A43):\n> > I'd say for this ticket (1) is better; actually not so much because of the added size but rather because of maintainability concerns. I'm not too worried about the output quality of the PDF documentation \n\n> \n> Okay.\n> \n> > (I'd be surprised if anyone looks at it)\n\n> \n> :)\n\n\nI would also vote for (1) for the same reason.",
    "created_at": "2022-03-20T09:36:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545396",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:50'></a>
Replying to [klee](#comment%3A45):
> Replying to [mkoeppe](#comment%3A43):
> > I'd say for this ticket (1) is better; actually not so much because of the added size but rather because of maintainability concerns. I'm not too worried about the output quality of the PDF documentation 

> 
> Okay.
> 
> > (I'd be surprised if anyone looks at it)

> 
> :)


I would also vote for (1) for the same reason.



---

archive/issue_comments_545397.json:
```json
{
    "body": "**Changing commit** from \"[c2304f3aeaa3516c2eacd3b115bf3c24708e842f](https://github.com/sagemath/sagetrac-mirror/commit/c2304f3aeaa3516c2eacd3b115bf3c24708e842f)\" to \"[004da229f2d3ad03a3e09e90e9dbdf7a40676250](https://github.com/sagemath/sagetrac-mirror/commit/004da229f2d3ad03a3e09e90e9dbdf7a40676250)\".",
    "created_at": "2022-03-20T10:34:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545397",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c2304f3aeaa3516c2eacd3b115bf3c24708e842f](https://github.com/sagemath/sagetrac-mirror/commit/c2304f3aeaa3516c2eacd3b115bf3c24708e842f)" to "[004da229f2d3ad03a3e09e90e9dbdf7a40676250](https://github.com/sagemath/sagetrac-mirror/commit/004da229f2d3ad03a3e09e90e9dbdf7a40676250)".



---

archive/issue_comments_545398.json:
```json
{
    "body": "<a id='comment:51'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/004da229f2d3ad03a3e09e90e9dbdf7a40676250\">004da22</a></td><td><code>Live images only when requested</code></td></tr></table>\n",
    "created_at": "2022-03-20T10:34:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545398",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/004da229f2d3ad03a3e09e90e9dbdf7a40676250">004da22</a></td><td><code>Live images only when requested</code></td></tr></table>




---

archive/issue_comments_545399.json:
```json
{
    "body": "**Changing commit** from \"[004da229f2d3ad03a3e09e90e9dbdf7a40676250](https://github.com/sagemath/sagetrac-mirror/commit/004da229f2d3ad03a3e09e90e9dbdf7a40676250)\" to \"[8cc9697a9935ea35c9c232694a1d953b97707b40](https://github.com/sagemath/sagetrac-mirror/commit/8cc9697a9935ea35c9c232694a1d953b97707b40)\".",
    "created_at": "2022-03-21T00:48:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545399",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[004da229f2d3ad03a3e09e90e9dbdf7a40676250](https://github.com/sagemath/sagetrac-mirror/commit/004da229f2d3ad03a3e09e90e9dbdf7a40676250)" to "[8cc9697a9935ea35c9c232694a1d953b97707b40](https://github.com/sagemath/sagetrac-mirror/commit/8cc9697a9935ea35c9c232694a1d953b97707b40)".



---

archive/issue_comments_545400.json:
```json
{
    "body": "<a id='comment:52'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cc9697a9935ea35c9c232694a1d953b97707b40\">8cc9697</a></td><td><code>Prevent duplicate code display</code></td></tr></table>\n",
    "created_at": "2022-03-21T00:48:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545400",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cc9697a9935ea35c9c232694a1d953b97707b40">8cc9697</a></td><td><code>Prevent duplicate code display</code></td></tr></table>




---

archive/issue_comments_545401.json:
```json
{
    "body": "<a id='comment:53'></a>\nThe last commit prevents input code display in Thebe cell as it is duplicate of the example just above it. This in effect also prevents a user from editing the input.",
    "created_at": "2022-03-21T00:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545401",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:53'></a>
The last commit prevents input code display in Thebe cell as it is duplicate of the example just above it. This in effect also prevents a user from editing the input.



---

archive/issue_comments_545402.json:
```json
{
    "body": "**Dependencies:** #33522",
    "created_at": "2022-03-21T05:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545402",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #33522



---

archive/issue_comments_545403.json:
```json
{
    "body": "**Reviewer:** Matthias Koeppe, ...",
    "created_at": "2022-03-21T05:24:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545403",
    "user": "https://github.com/mkoeppe"
}
```

**Reviewer:** Matthias Koeppe, ...



---

archive/issue_comments_545404.json:
```json
{
    "body": "<a id='comment:55'></a>\nI have built HTML and PDF. HTML is great, a very nice improvement. PDF is unchanged. I would be ready to give it a positive review.",
    "created_at": "2022-03-21T06:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545404",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'></a>
I have built HTML and PDF. HTML is great, a very nice improvement. PDF is unchanged. I would be ready to give it a positive review.



---

archive/issue_comments_545405.json:
```json
{
    "body": "<a id='comment:56'></a>\nReplying to [mkoeppe](#comment%3A55):\n> PDF is unchanged. \n\n\nI guess you are positive about this.",
    "created_at": "2022-03-21T06:54:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545405",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:56'></a>
Replying to [mkoeppe](#comment%3A55):
> PDF is unchanged. 


I guess you are positive about this.



---

archive/issue_comments_545406.json:
```json
{
    "body": "<a id='comment:57'></a>\nReplying to [mkoeppe](#comment%3A55):\n> I have built HTML and PDF. HTML is great, a very nice improvement. \n\n\nIndeed, we are fortunate to have a very nice tool: jupyter-sphix.",
    "created_at": "2022-03-21T06:56:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545406",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:57'></a>
Replying to [mkoeppe](#comment%3A55):
> I have built HTML and PDF. HTML is great, a very nice improvement. 


Indeed, we are fortunate to have a very nice tool: jupyter-sphix.



---

archive/issue_comments_545407.json:
```json
{
    "body": "<a id='comment:58'></a>\nReplying to [klee](#comment%3A56):\n> Replying to [mkoeppe](#comment%3A55):\n> > PDF is unchanged. \n\n> \n> I guess you are positive about this.\n\n\nYes, this matches the scope of the ticket.",
    "created_at": "2022-03-21T07:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545407",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:58'></a>
Replying to [klee](#comment%3A56):
> Replying to [mkoeppe](#comment%3A55):
> > PDF is unchanged. 

> 
> I guess you are positive about this.


Yes, this matches the scope of the ticket.



---

archive/issue_comments_545408.json:
```json
{
    "body": "<a id='comment:59'></a>\nThank you @kwankyu! Very nice addition :-)\n\nI am super glad to see Thebe support in the Sage documentation!",
    "created_at": "2022-03-21T14:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545408",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:59'></a>
Thank you @kwankyu! Very nice addition :-)

I am super glad to see Thebe support in the Sage documentation!



---

archive/issue_comments_545409.json:
```json
{
    "body": "<a id='comment:60'></a>\nThank you for setting up the sage binder repo!",
    "created_at": "2022-03-21T14:09:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545409",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:60'></a>
Thank you for setting up the sage binder repo!



---

archive/issue_comments_545410.json:
```json
{
    "body": "<a id='comment:62'></a>\nany reason to delay this until 9.7?",
    "created_at": "2022-03-21T20:21:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545410",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:62'></a>
any reason to delay this until 9.7?



---

archive/issue_events_304758.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-21T20:36:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33507#event-304758"
}
```



---

archive/issue_events_304759.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-21T20:36:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33507#event-304759"
}
```



---

archive/issue_comments_545411.json:
```json
{
    "body": "<a id='comment:64'></a>\neven after doc-clean, I get an error building docs:\n\n```\n[sagemath_doc_html-none] OSError: WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/plot3d/environment.pickle\n```",
    "created_at": "2022-03-21T20:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545411",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:64'></a>
even after doc-clean, I get an error building docs:

```
[sagemath_doc_html-none] OSError: WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/plot3d/environment.pickle
```



---

archive/issue_comments_545412.json:
```json
{
    "body": "<a id='comment:65'></a>\nJust tested it. This is very nice!\n\n+1 for a positive review. \n\nJust for curiosity: why is #33522 a dependency?",
    "created_at": "2022-03-21T20:44:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545412",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:65'></a>
Just tested it. This is very nice!

+1 for a positive review. 

Just for curiosity: why is #33522 a dependency?



---

archive/issue_comments_545413.json:
```json
{
    "body": "**Changing commit** from \"[8cc9697a9935ea35c9c232694a1d953b97707b40](https://github.com/sagemath/sagetrac-mirror/commit/8cc9697a9935ea35c9c232694a1d953b97707b40)\" to \"[567730c81c468869dcd9c17f1f6434b4e1ef00b6](https://github.com/sagemath/sagetrac-mirror/commit/567730c81c468869dcd9c17f1f6434b4e1ef00b6)\".",
    "created_at": "2022-03-22T00:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545413",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8cc9697a9935ea35c9c232694a1d953b97707b40](https://github.com/sagemath/sagetrac-mirror/commit/8cc9697a9935ea35c9c232694a1d953b97707b40)" to "[567730c81c468869dcd9c17f1f6434b4e1ef00b6](https://github.com/sagemath/sagetrac-mirror/commit/567730c81c468869dcd9c17f1f6434b4e1ef00b6)".



---

archive/issue_comments_545414.json:
```json
{
    "body": "<a id='comment:66'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0801dbd569d826098c7259b342bd2f50373c651e\">0801dbd</a></td><td><code>Remove sage: prompts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/018da51aa2b0fcf1efd7a4d11a75a3f6d366a484\">018da51</a></td><td><code>Position thebe button at right bottom</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c619fa2d80c0e7eac4ac217818ced68fe05686fb\">c619fa2</a></td><td><code>Add Thebe kernel specs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72ae5707c37015f73e6f0b9067b0a237fe37100a\">72ae570</a></td><td><code>Fix missing inventory file error</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e499c2fe1523c721bf7eb383f926815187e51255\">e499c2f</a></td><td><code>Use sphinx_plot for pdf documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/777e25efd39e13235ca56500e4d6f35276418234\">777e25e</a></td><td><code>Live images only when requested</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/567730c81c468869dcd9c17f1f6434b4e1ef00b6\">567730c</a></td><td><code>Prevent duplicate code display</code></td></tr></table>\n",
    "created_at": "2022-03-22T00:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545414",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0801dbd569d826098c7259b342bd2f50373c651e">0801dbd</a></td><td><code>Remove sage: prompts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/018da51aa2b0fcf1efd7a4d11a75a3f6d366a484">018da51</a></td><td><code>Position thebe button at right bottom</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c619fa2d80c0e7eac4ac217818ced68fe05686fb">c619fa2</a></td><td><code>Add Thebe kernel specs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72ae5707c37015f73e6f0b9067b0a237fe37100a">72ae570</a></td><td><code>Fix missing inventory file error</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e499c2fe1523c721bf7eb383f926815187e51255">e499c2f</a></td><td><code>Use sphinx_plot for pdf documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/777e25efd39e13235ca56500e4d6f35276418234">777e25e</a></td><td><code>Live images only when requested</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/567730c81c468869dcd9c17f1f6434b4e1ef00b6">567730c</a></td><td><code>Prevent duplicate code display</code></td></tr></table>




---

archive/issue_comments_545415.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,21 @@\n \n to facilitate live sage documentation based on jupyter and Thebe.\n \n-See also #31027\n+For documentation authors, new directives are available:\n+\n+```\n+.. ONLY:: pdf \n+```\n+\n+```\n+.. JUPYTER-EXECUTE::  \n+```\n+in addition to\n+\n+```\n+.. ONLY:: html\n+```\n+\n+See the branch for examples.\n+\n+Related tickets: #31027\n``````\n",
    "created_at": "2022-03-22T00:15:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545415",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,21 @@
 
 to facilitate live sage documentation based on jupyter and Thebe.
 
-See also #31027
+For documentation authors, new directives are available:
+
+```
+.. ONLY:: pdf 
+```
+
+```
+.. JUPYTER-EXECUTE::  
+```
+in addition to
+
+```
+.. ONLY:: html
+```
+
+See the branch for examples.
+
+Related tickets: #31027
``````




---

archive/issue_comments_545416.json:
```json
{
    "body": "**Changing dependencies** from \"#33522\" to \"\".",
    "created_at": "2022-03-22T00:15:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545416",
    "user": "https://github.com/kwankyu"
}
```

**Changing dependencies** from "#33522" to "".



---

archive/issue_comments_545417.json:
```json
{
    "body": "<a id='comment:68'></a>\nReplying to [egourgoulhon](#comment%3A65): \n> Just for curiosity: why is #33522 a dependency?\n\n\nThat was just a temporary dependency. Now removed.",
    "created_at": "2022-03-22T00:16:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545417",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:68'></a>
Replying to [egourgoulhon](#comment%3A65): 
> Just for curiosity: why is #33522 a dependency?


That was just a temporary dependency. Now removed.



---

archive/issue_comments_545418.json:
```json
{
    "body": "<a id='comment:69'></a>\nReplying to [dimpase](#comment%3A64):\n> even after doc-clean, I get an error building docs:\n> \n> ```\n> [sagemath_doc_html-none] OSError: WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/plot3d/environment.pickle\n> ```\n\n\nI do: `make doc-clean; make doc-uninstall; make`",
    "created_at": "2022-03-22T00:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545418",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:69'></a>
Replying to [dimpase](#comment%3A64):
> even after doc-clean, I get an error building docs:
> 
> ```
> [sagemath_doc_html-none] OSError: WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/plot3d/environment.pickle
> ```


I do: `make doc-clean; make doc-uninstall; make`



---

archive/issue_comments_545419.json:
```json
{
    "body": "**Dependencies:** #33529",
    "created_at": "2022-03-22T01:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545419",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #33529



---

archive/issue_comments_545420.json:
```json
{
    "body": "**Changing commit** from \"[567730c81c468869dcd9c17f1f6434b4e1ef00b6](https://github.com/sagemath/sagetrac-mirror/commit/567730c81c468869dcd9c17f1f6434b4e1ef00b6)\" to \"[9c8fe88abc05571c6821d1991d10b38a31b58ac6](https://github.com/sagemath/sagetrac-mirror/commit/9c8fe88abc05571c6821d1991d10b38a31b58ac6)\".",
    "created_at": "2022-03-22T02:00:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545420",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[567730c81c468869dcd9c17f1f6434b4e1ef00b6](https://github.com/sagemath/sagetrac-mirror/commit/567730c81c468869dcd9c17f1f6434b4e1ef00b6)" to "[9c8fe88abc05571c6821d1991d10b38a31b58ac6](https://github.com/sagemath/sagetrac-mirror/commit/9c8fe88abc05571c6821d1991d10b38a31b58ac6)".



---

archive/issue_comments_545421.json:
```json
{
    "body": "<a id='comment:71'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/845e4494f48857df4b452c340704bbfa1ad74596\">845e449</a></td><td><code>Position thebe button at right bottom</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0b2628121b159a7ee9704b19e09661bbc6e19e6\">d0b2628</a></td><td><code>Add Thebe kernel specs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bfd667d73ce950419ac9b20d67edada89327671d\">bfd667d</a></td><td><code>Fix missing inventory file error</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d64b0a3652d7925096ac263334690aa63701c8a1\">d64b0a3</a></td><td><code>Use sphinx_plot for pdf documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/004da229f2d3ad03a3e09e90e9dbdf7a40676250\">004da22</a></td><td><code>Live images only when requested</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cc9697a9935ea35c9c232694a1d953b97707b40\">8cc9697</a></td><td><code>Prevent duplicate code display</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51b35c787b33604baad65c5b0951667fd86914f3\">51b35c7</a></td><td><code>Merge branch 'public/33507' of git://trac.sagemath.org/sage into t/33507/public/33507</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e881abca1f2e7b806608b6b6f2bbffec5f338b55\">e881abc</a></td><td><code>build/pkgs/thebe: Remove</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9621c97820a393c0835c9fadcfbc4f2f60fc17f7\">9621c97</a></td><td><code>build/pkgs/sagemath_doc_html/dependencies: Remove thebe</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c8fe88abc05571c6821d1991d10b38a31b58ac6\">9c8fe88</a></td><td><code>Merge #33529</code></td></tr></table>\n",
    "created_at": "2022-03-22T02:00:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545421",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:71'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/845e4494f48857df4b452c340704bbfa1ad74596">845e449</a></td><td><code>Position thebe button at right bottom</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0b2628121b159a7ee9704b19e09661bbc6e19e6">d0b2628</a></td><td><code>Add Thebe kernel specs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bfd667d73ce950419ac9b20d67edada89327671d">bfd667d</a></td><td><code>Fix missing inventory file error</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d64b0a3652d7925096ac263334690aa63701c8a1">d64b0a3</a></td><td><code>Use sphinx_plot for pdf documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/004da229f2d3ad03a3e09e90e9dbdf7a40676250">004da22</a></td><td><code>Live images only when requested</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cc9697a9935ea35c9c232694a1d953b97707b40">8cc9697</a></td><td><code>Prevent duplicate code display</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51b35c787b33604baad65c5b0951667fd86914f3">51b35c7</a></td><td><code>Merge branch 'public/33507' of git://trac.sagemath.org/sage into t/33507/public/33507</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e881abca1f2e7b806608b6b6f2bbffec5f338b55">e881abc</a></td><td><code>build/pkgs/thebe: Remove</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9621c97820a393c0835c9fadcfbc4f2f60fc17f7">9621c97</a></td><td><code>build/pkgs/sagemath_doc_html/dependencies: Remove thebe</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c8fe88abc05571c6821d1991d10b38a31b58ac6">9c8fe88</a></td><td><code>Merge #33529</code></td></tr></table>




---

archive/issue_comments_545422.json:
```json
{
    "body": "<a id='comment:72'></a>\nYou revived the dependency #33522 that I removed.",
    "created_at": "2022-03-22T03:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545422",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:72'></a>
You revived the dependency #33522 that I removed.



---

archive/issue_comments_545423.json:
```json
{
    "body": "<a id='comment:73'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746\">72c8378</a></td><td><code>Merge #33529</code></td></tr></table>\n",
    "created_at": "2022-03-22T04:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545423",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:73'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746">72c8378</a></td><td><code>Merge #33529</code></td></tr></table>




---

archive/issue_comments_545424.json:
```json
{
    "body": "**Changing commit** from \"[9c8fe88abc05571c6821d1991d10b38a31b58ac6](https://github.com/sagemath/sagetrac-mirror/commit/9c8fe88abc05571c6821d1991d10b38a31b58ac6)\" to \"[72c8378de1f5ab1de0d1062610a0d5d947415746](https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746)\".",
    "created_at": "2022-03-22T04:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9c8fe88abc05571c6821d1991d10b38a31b58ac6](https://github.com/sagemath/sagetrac-mirror/commit/9c8fe88abc05571c6821d1991d10b38a31b58ac6)" to "[72c8378de1f5ab1de0d1062610a0d5d947415746](https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746)".



---

archive/issue_comments_545425.json:
```json
{
    "body": "<a id='comment:74'></a>\nSorry, fixed now",
    "created_at": "2022-03-22T04:34:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545425",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:74'></a>
Sorry, fixed now



---

archive/issue_comments_545426.json:
```json
{
    "body": "<a id='comment:75'></a>\nI am still getting this docbuild error on macOS, even after `git clean -fdx`.\n\n```\n[sagemath_doc_html-none] [repl     ] executing interact\n[sagemath_doc_html-none] [repl     ] /Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jsonschema/validators.py:188: DeprecationWarning: Passing a schema to Validator.iter_errors is deprecated and will be removed in a future release. Call validator.evolve(schema=new_schema).iter_errors(...) instead.\n[sagemath_doc_html-none] [repl     ]   warnings.warn(\n[sagemath_doc_html-none] [repl     ] Extension error:\n[sagemath_doc_html-none] [repl     ] Notebook execution failed (exception: [Errno 2] No such file or directory: '/Users/dima/sage/local/bin/sage')\n...\n[sagemath_doc_html-none] [plot3d   ] executing plot3d\n[sagemath_doc_html-none] [plot3d   ] /Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jsonschema/validators.py:188: DeprecationWarning: Passing a schema to Validator.iter_errors is deprecated and will be removed in a future release. Call validator.evolve(schema=new_schema).iter_errors(...) instead.\n[sagemath_doc_html-none] [plot3d   ]   warnings.warn(\n[sagemath_doc_html-none] [plot3d   ] Extension error:\n[sagemath_doc_html-none] [plot3d   ] Notebook execution failed (exception: [Errno 2] No such file or directory: '/Users/dima/sage/local/bin/sage')\n...\nsagemath_doc_html-none] [reference] ... done (500 todos, 2546 index, 1665 citations, 2139 modules)\n[sagemath_doc_html-none] [reference] WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/plot3d/environment.pickle\n[sagemath_doc_html-none] [reference] WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/repl/environment.pickle\n[sagemath_doc_html-none] [reference] preparing documents... skipping loading of indexes... done\n[sagemath_doc_html-none] [reference] /Users/dima/sage/src/doc/en/reference/index.rst:17: WARNING: unknown document: repl/index\n[sagemath_doc_html-none] [reference] /Users/dima/sage/src/doc/en/reference/index.rst:24: WARNING: unknown document: plot3d/index\n[sagemath_doc_html-none] [reference] The inventory files are in local/share/doc/sage/inventory/en/reference.\n[sagemath_doc_html-none] Error building the documentation.\n[sagemath_doc_html-none] Traceback (most recent call last):\n[sagemath_doc_html-none]   File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\", line 197, in _run_module_as_main\n[sagemath_doc_html-none]     return _run_code(code, main_globals, None,\n[sagemath_doc_html-none]   File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\", line 87, in _run_code\n[sagemath_doc_html-none]     exec(code, run_globals)\n[sagemath_doc_html-none]   File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/__main__.py\", line 2, in <module>\n[sagemath_doc_html-none]     main()\n[sagemath_doc_html-none]   File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 1751, in main\n[sagemath_doc_html-none]     builder()\n[sagemath_doc_html-none]   File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 141, in f\n[sagemath_doc_html-none]     runsphinx()\n[sagemath_doc_html-none]   File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/sphinxbuild.py\", line 326, in runsphinx\n[sagemath_doc_html-none]     sys.stderr.raise_errors()\n[sagemath_doc_html-none]   File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/sphinxbuild.py\", line 262, in raise_errors\n[sagemath_doc_html-none]     raise OSError(self._error)\n[sagemath_doc_html-none] OSError: WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/plot3d/environment.pickle \n[sagemath_doc_html-none] \n[sagemath_doc_html-none]     Note: incremental documentation builds sometimes cause spurious\n[sagemath_doc_html-none]     error messages. To be certain that these are real errors, run\n[sagemath_doc_html-none]     \"make doc-clean doc-uninstall\" first and try again.\n[sagemath_doc_html-none] make[6]: *** [doc-inventory--reference_top] Error 1\n[sagemath_doc_html-none] make[5]: *** [doc-inventory-reference] Error 2\nmake[4]: *** [sagemath_doc_html-SAGE_DOCS-no-deps] Error 2\n```\n\nsomething in these two modules wants to call `'/Users/dima/sage/local/bin/sage'` - \nwhich is absent, naturally, and probably this leads to absent `environment.pickle` in plot3d.\n\nI presume the message \"Notebook execution failed\" comes from jupyter-sphinx:\nhttps://github.com/jupyter/jupyter-sphinx/blob/master/jupyter_sphinx/execute.py",
    "created_at": "2022-03-22T15:46:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545426",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:75'></a>
I am still getting this docbuild error on macOS, even after `git clean -fdx`.

```
[sagemath_doc_html-none] [repl     ] executing interact
[sagemath_doc_html-none] [repl     ] /Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jsonschema/validators.py:188: DeprecationWarning: Passing a schema to Validator.iter_errors is deprecated and will be removed in a future release. Call validator.evolve(schema=new_schema).iter_errors(...) instead.
[sagemath_doc_html-none] [repl     ]   warnings.warn(
[sagemath_doc_html-none] [repl     ] Extension error:
[sagemath_doc_html-none] [repl     ] Notebook execution failed (exception: [Errno 2] No such file or directory: '/Users/dima/sage/local/bin/sage')
...
[sagemath_doc_html-none] [plot3d   ] executing plot3d
[sagemath_doc_html-none] [plot3d   ] /Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jsonschema/validators.py:188: DeprecationWarning: Passing a schema to Validator.iter_errors is deprecated and will be removed in a future release. Call validator.evolve(schema=new_schema).iter_errors(...) instead.
[sagemath_doc_html-none] [plot3d   ]   warnings.warn(
[sagemath_doc_html-none] [plot3d   ] Extension error:
[sagemath_doc_html-none] [plot3d   ] Notebook execution failed (exception: [Errno 2] No such file or directory: '/Users/dima/sage/local/bin/sage')
...
sagemath_doc_html-none] [reference] ... done (500 todos, 2546 index, 1665 citations, 2139 modules)
[sagemath_doc_html-none] [reference] WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/plot3d/environment.pickle
[sagemath_doc_html-none] [reference] WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/repl/environment.pickle
[sagemath_doc_html-none] [reference] preparing documents... skipping loading of indexes... done
[sagemath_doc_html-none] [reference] /Users/dima/sage/src/doc/en/reference/index.rst:17: WARNING: unknown document: repl/index
[sagemath_doc_html-none] [reference] /Users/dima/sage/src/doc/en/reference/index.rst:24: WARNING: unknown document: plot3d/index
[sagemath_doc_html-none] [reference] The inventory files are in local/share/doc/sage/inventory/en/reference.
[sagemath_doc_html-none] Error building the documentation.
[sagemath_doc_html-none] Traceback (most recent call last):
[sagemath_doc_html-none]   File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py", line 197, in _run_module_as_main
[sagemath_doc_html-none]     return _run_code(code, main_globals, None,
[sagemath_doc_html-none]   File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py", line 87, in _run_code
[sagemath_doc_html-none]     exec(code, run_globals)
[sagemath_doc_html-none]   File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/__main__.py", line 2, in <module>
[sagemath_doc_html-none]     main()
[sagemath_doc_html-none]   File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 1751, in main
[sagemath_doc_html-none]     builder()
[sagemath_doc_html-none]   File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 141, in f
[sagemath_doc_html-none]     runsphinx()
[sagemath_doc_html-none]   File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/sphinxbuild.py", line 326, in runsphinx
[sagemath_doc_html-none]     sys.stderr.raise_errors()
[sagemath_doc_html-none]   File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage_docbuild/sphinxbuild.py", line 262, in raise_errors
[sagemath_doc_html-none]     raise OSError(self._error)
[sagemath_doc_html-none] OSError: WARNING: Unable to fetch /Users/dima/sage/local/share/doc/sage/doctrees/en/reference/plot3d/environment.pickle 
[sagemath_doc_html-none] 
[sagemath_doc_html-none]     Note: incremental documentation builds sometimes cause spurious
[sagemath_doc_html-none]     error messages. To be certain that these are real errors, run
[sagemath_doc_html-none]     "make doc-clean doc-uninstall" first and try again.
[sagemath_doc_html-none] make[6]: *** [doc-inventory--reference_top] Error 1
[sagemath_doc_html-none] make[5]: *** [doc-inventory-reference] Error 2
make[4]: *** [sagemath_doc_html-SAGE_DOCS-no-deps] Error 2
```

something in these two modules wants to call `'/Users/dima/sage/local/bin/sage'` - 
which is absent, naturally, and probably this leads to absent `environment.pickle` in plot3d.

I presume the message "Notebook execution failed" comes from jupyter-sphinx:
https://github.com/jupyter/jupyter-sphinx/blob/master/jupyter_sphinx/execute.py



---

archive/issue_comments_545427.json:
```json
{
    "body": "**Changing reviewer** from \"Matthias Koeppe, ...\" to \"Matthias Koeppe, Dima Pasechnik\".",
    "created_at": "2022-03-22T20:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545427",
    "user": "https://github.com/dimpase"
}
```

**Changing reviewer** from "Matthias Koeppe, ..." to "Matthias Koeppe, Dima Pasechnik".



---

archive/issue_events_304760.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-03-22T20:30:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33507#event-304760"
}
```



---

archive/issue_events_304761.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-03-22T20:30:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33507#event-304761"
}
```



---

archive/issue_comments_545428.json:
```json
{
    "body": "<a id='comment:76'></a>\nafter \n\n```\nln -s /Users/dima/sage/sage /Users/dima/sage/local/bin/sage\n```\nthe docbuild completes, but it's certainly a problem to be fixed that needs this workaround.",
    "created_at": "2022-03-22T20:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545428",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:76'></a>
after 

```
ln -s /Users/dima/sage/sage /Users/dima/sage/local/bin/sage
```
the docbuild completes, but it's certainly a problem to be fixed that needs this workaround.



---

archive/issue_comments_545429.json:
```json
{
    "body": "<a id='comment:77'></a>\nReplying to [dimpase](#comment%3A75):\n> I am still getting this docbuild error on macOS, even after `git clean -fdx`.\n> \n> ```\n> [sagemath_doc_html-none] [repl     ] executing interact\n> [sagemath_doc_html-none] [repl     ] /Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jsonschema/validators.py:188: DeprecationWarning: Passing a schema to Validator.iter_errors is deprecated and will be removed in a future release. Call validator.evolve(schema=new_schema).iter_errors(...) instead.\n> [sagemath_doc_html-none] [repl     ]   warnings.warn(\n> [sagemath_doc_html-none] [repl     ] Extension error:\n> [sagemath_doc_html-none] [repl     ] Notebook execution failed (exception: [Errno 2] No such file or directory: '/Users/dima/sage/local/bin/sage')\n> ```\n> I presume the message \"Notebook execution failed\" comes from jupyter-sphinx:\n> https://github.com/jupyter/jupyter-sphinx/blob/master/jupyter_sphinx/execute.py\n\n\nI am on macOS too. Do you have no problem in running sagemath kernel in jupyter from your sage installation?",
    "created_at": "2022-03-23T01:12:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545429",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:77'></a>
Replying to [dimpase](#comment%3A75):
> I am still getting this docbuild error on macOS, even after `git clean -fdx`.
> 
> ```
> [sagemath_doc_html-none] [repl     ] executing interact
> [sagemath_doc_html-none] [repl     ] /Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jsonschema/validators.py:188: DeprecationWarning: Passing a schema to Validator.iter_errors is deprecated and will be removed in a future release. Call validator.evolve(schema=new_schema).iter_errors(...) instead.
> [sagemath_doc_html-none] [repl     ]   warnings.warn(
> [sagemath_doc_html-none] [repl     ] Extension error:
> [sagemath_doc_html-none] [repl     ] Notebook execution failed (exception: [Errno 2] No such file or directory: '/Users/dima/sage/local/bin/sage')
> ```
> I presume the message "Notebook execution failed" comes from jupyter-sphinx:
> https://github.com/jupyter/jupyter-sphinx/blob/master/jupyter_sphinx/execute.py


I am on macOS too. Do you have no problem in running sagemath kernel in jupyter from your sage installation?



---

archive/issue_comments_545430.json:
```json
{
    "body": "<a id='comment:78'></a>\nIf I remove the symlink as in [comment:76](#comment%3A76) I get a jupyter kernel error\n\n```\nTraceback (most recent call last):\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/web.py\", line 1704, in _execute\n    result = await result\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py\", line 328, in __wakeup\n    future.result()\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py\", line 769, in run\n    yielded = self.gen.throw(*exc_info)  # type: ignore\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/notebook/services/sessions/handlers.py\", line 74, in post\n    model = yield maybe_future(\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py\", line 762, in run\n    value = future.result()\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py\", line 769, in run\n    yielded = self.gen.throw(*exc_info)  # type: ignore\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/notebook/services/sessions/sessionmanager.py\", line 98, in create_session\n    kernel_id = yield self.start_kernel_for_session(session_id, path, name, type, kernel_name)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py\", line 762, in run\n    value = future.result()\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py\", line 769, in run\n    yielded = self.gen.throw(*exc_info)  # type: ignore\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/notebook/services/sessions/sessionmanager.py\", line 110, in start_kernel_for_session\n    kernel_id = yield maybe_future(\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py\", line 762, in run\n    value = future.result()\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/futures.py\", line 201, in result\n    raise self._exception\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py\", line 256, in __step\n    result = coro.send(None)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/notebook/services/kernels/kernelmanager.py\", line 176, in start_kernel\n    kernel_id = await maybe_future(self.pinned_superclass.start_kernel(self, **kwargs))\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py\", line 26, in wrapped\n    raise e\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py\", line 23, in wrapped\n    return loop.run_until_complete(future)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/nest_asyncio.py\", line 81, in run_until_complete\n    return f.result()\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/futures.py\", line 201, in result\n    raise self._exception\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py\", line 256, in __step\n    result = coro.send(None)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/multikernelmanager.py\", line 187, in _async_start_kernel\n    starter = ensure_async(km.start_kernel(**kwargs))\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py\", line 26, in wrapped\n    raise e\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py\", line 23, in wrapped\n    return loop.run_until_complete(future)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/nest_asyncio.py\", line 81, in run_until_complete\n    return f.result()\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/futures.py\", line 201, in result\n    raise self._exception\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py\", line 256, in __step\n    result = coro.send(None)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/manager.py\", line 362, in _async_start_kernel\n    raise e\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/manager.py\", line 351, in _async_start_kernel\n    await ensure_async(self._launch_kernel(kernel_cmd, **kw))\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py\", line 26, in wrapped\n    raise e\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py\", line 23, in wrapped\n    return loop.run_until_complete(future)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/nest_asyncio.py\", line 81, in run_until_complete\n    return f.result()\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/futures.py\", line 201, in result\n    raise self._exception\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py\", line 256, in __step\n    result = coro.send(None)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/manager.py\", line 269, in _async_launch_kernel\n    connection_info = await self.provisioner.launch_kernel(kernel_cmd, **kw)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/provisioning/local_provisioner.py\", line 179, in launch_kernel\n    self.process = launch_kernel(cmd, **scrubbed_kwargs)\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/launcher.py\", line 169, in launch_kernel\n    raise ex\n  File \"/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/launcher.py\", line 157, in launch_kernel\n    proc = Popen(cmd, **kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/subprocess.py\", line 951, in __init__\n    self._execute_child(args, executable, preexec_fn, close_fds,\n  File \"/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/subprocess.py\", line 1821, in _execute_child\n    raise child_exception_type(errno_num, err_msg, err_filename)\nFileNotFoundError: [Errno 2] No such file or directory: '/Users/dima/sage/local/bin/sage'\n```\n\nWith the link it works. It turns out I have outdated things in `~/Library/Jupyter`, in particular `sagemath/kernel.json` with the obsolete path to `sage` (version 9.4.beta3).\n\nSorry for noise, it's OK.",
    "created_at": "2022-03-23T09:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545430",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:78'></a>
If I remove the symlink as in [comment:76](#comment%3A76) I get a jupyter kernel error

```
Traceback (most recent call last):
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/web.py", line 1704, in _execute
    result = await result
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py", line 328, in __wakeup
    future.result()
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py", line 769, in run
    yielded = self.gen.throw(*exc_info)  # type: ignore
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/notebook/services/sessions/handlers.py", line 74, in post
    model = yield maybe_future(
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py", line 762, in run
    value = future.result()
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py", line 769, in run
    yielded = self.gen.throw(*exc_info)  # type: ignore
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/notebook/services/sessions/sessionmanager.py", line 98, in create_session
    kernel_id = yield self.start_kernel_for_session(session_id, path, name, type, kernel_name)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py", line 762, in run
    value = future.result()
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py", line 769, in run
    yielded = self.gen.throw(*exc_info)  # type: ignore
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/notebook/services/sessions/sessionmanager.py", line 110, in start_kernel_for_session
    kernel_id = yield maybe_future(
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/tornado/gen.py", line 762, in run
    value = future.result()
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py", line 256, in __step
    result = coro.send(None)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/notebook/services/kernels/kernelmanager.py", line 176, in start_kernel
    kernel_id = await maybe_future(self.pinned_superclass.start_kernel(self, **kwargs))
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py", line 26, in wrapped
    raise e
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py", line 23, in wrapped
    return loop.run_until_complete(future)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/nest_asyncio.py", line 81, in run_until_complete
    return f.result()
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py", line 256, in __step
    result = coro.send(None)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/multikernelmanager.py", line 187, in _async_start_kernel
    starter = ensure_async(km.start_kernel(**kwargs))
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py", line 26, in wrapped
    raise e
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py", line 23, in wrapped
    return loop.run_until_complete(future)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/nest_asyncio.py", line 81, in run_until_complete
    return f.result()
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py", line 256, in __step
    result = coro.send(None)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/manager.py", line 362, in _async_start_kernel
    raise e
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/manager.py", line 351, in _async_start_kernel
    await ensure_async(self._launch_kernel(kernel_cmd, **kw))
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py", line 26, in wrapped
    raise e
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/utils.py", line 23, in wrapped
    return loop.run_until_complete(future)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/nest_asyncio.py", line 81, in run_until_complete
    return f.result()
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/futures.py", line 201, in result
    raise self._exception
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py", line 256, in __step
    result = coro.send(None)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/manager.py", line 269, in _async_launch_kernel
    connection_info = await self.provisioner.launch_kernel(kernel_cmd, **kw)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/provisioning/local_provisioner.py", line 179, in launch_kernel
    self.process = launch_kernel(cmd, **scrubbed_kwargs)
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/launcher.py", line 169, in launch_kernel
    raise ex
  File "/Users/dima/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_client/launcher.py", line 157, in launch_kernel
    proc = Popen(cmd, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/subprocess.py", line 951, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
  File "/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/subprocess.py", line 1821, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
FileNotFoundError: [Errno 2] No such file or directory: '/Users/dima/sage/local/bin/sage'
```

With the link it works. It turns out I have outdated things in `~/Library/Jupyter`, in particular `sagemath/kernel.json` with the obsolete path to `sage` (version 9.4.beta3).

Sorry for noise, it's OK.



---

archive/issue_events_304762.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-03-23T09:56:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33507#event-304762"
}
```



---

archive/issue_events_304763.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-03-23T09:56:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33507#event-304763"
}
```



---

archive/issue_comments_545431.json:
```json
{
    "body": "<a id='comment:79'></a>\nProbably the docbuild should try to isolate from such user settings.",
    "created_at": "2022-03-23T18:36:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545431",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:79'></a>
Probably the docbuild should try to isolate from such user settings.



---

archive/issue_comments_545432.json:
```json
{
    "body": "<a id='comment:80'></a>\nReplying to [mkoeppe](#comment%3A79):\n> Probably the docbuild should try to isolate from such user settings.\n\n\nI don't understand the precise mechanism. But it seems that jupyter-sphinx just runs a new jupyter notebook with sagemath kernel. Then there is nothing to do with the docbuild.",
    "created_at": "2022-03-23T23:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545432",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:80'></a>
Replying to [mkoeppe](#comment%3A79):
> Probably the docbuild should try to isolate from such user settings.


I don't understand the precise mechanism. But it seems that jupyter-sphinx just runs a new jupyter notebook with sagemath kernel. Then there is nothing to do with the docbuild.



---

archive/issue_comments_545433.json:
```json
{
    "body": "<a id='comment:81'></a>\nReplying to [dimpase](#comment%3A78):\n\nThank you for review.",
    "created_at": "2022-03-23T23:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545433",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:81'></a>
Replying to [dimpase](#comment%3A78):

Thank you for review.



---

archive/issue_comments_545434.json:
```json
{
    "body": "<a id='comment:82'></a>\nReplying to [klee](#comment%3A80):\n> Replying to [mkoeppe](#comment%3A79):\n> > Probably the docbuild should try to isolate from such user settings.\n\n> \n> I don't understand the precise mechanism. But it seems that jupyter-sphinx just runs a new jupyter notebook with sagemath kernel. Then there is nothing to do with the docbuild.\n\n\nBut its happening during the docbuild according to the output that Dima shared",
    "created_at": "2022-03-24T00:16:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545434",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:82'></a>
Replying to [klee](#comment%3A80):
> Replying to [mkoeppe](#comment%3A79):
> > Probably the docbuild should try to isolate from such user settings.

> 
> I don't understand the precise mechanism. But it seems that jupyter-sphinx just runs a new jupyter notebook with sagemath kernel. Then there is nothing to do with the docbuild.


But its happening during the docbuild according to the output that Dima shared



---

archive/issue_comments_545435.json:
```json
{
    "body": "<a id='comment:83'></a>\nReplying to [mkoeppe](#comment%3A82):\n> But its happening during the docbuild according to the output that Dima shared\n\n\nThe source of the problem may be in our jupyter kernel configuration in `repl.ipython_kernel.kernel`.",
    "created_at": "2022-03-24T00:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545435",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:83'></a>
Replying to [mkoeppe](#comment%3A82):
> But its happening during the docbuild according to the output that Dima shared


The source of the problem may be in our jupyter kernel configuration in `repl.ipython_kernel.kernel`.



---

archive/issue_comments_545436.json:
```json
{
    "body": "<a id='comment:84'></a>\nReplying to [mkoeppe](#comment%3A82):\n> Replying to [klee](#comment%3A80):\n> > Replying to [mkoeppe](#comment%3A79):\n> > > Probably the docbuild should try to isolate from such user settings.\n\n> > \n> > I don't understand the precise mechanism. But it seems that jupyter-sphinx just runs a new jupyter notebook with sagemath kernel. Then there is nothing to do with the docbuild.\n\n> \n> But its happening during the docbuild according to the output that Dima shared\n\n\nI could reproduce this issue just by running `./sage -n`. So this is indeed a \"pure\" notebook problem.",
    "created_at": "2022-03-24T08:55:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545436",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:84'></a>
Replying to [mkoeppe](#comment%3A82):
> Replying to [klee](#comment%3A80):
> > Replying to [mkoeppe](#comment%3A79):
> > > Probably the docbuild should try to isolate from such user settings.

> > 
> > I don't understand the precise mechanism. But it seems that jupyter-sphinx just runs a new jupyter notebook with sagemath kernel. Then there is nothing to do with the docbuild.

> 
> But its happening during the docbuild according to the output that Dima shared


I could reproduce this issue just by running `./sage -n`. So this is indeed a "pure" notebook problem.



---

archive/issue_events_304764.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-04-02T10:52:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33507#event-304764"
}
```



---

archive/issue_events_304765.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-04-02T10:52:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33507#event-304765"
}
```



---

archive/issue_comments_545437.json:
```json
{
    "body": "**Changing branch** from \"[public/33507](https://github.com/sagemath/sagetrac-mirror/tree/public/33507)\" to \"[72c8378de1f5ab1de0d1062610a0d5d947415746](https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746)\".",
    "created_at": "2022-04-02T10:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545437",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/33507](https://github.com/sagemath/sagetrac-mirror/tree/public/33507)" to "[72c8378de1f5ab1de0d1062610a0d5d947415746](https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746)".



---

archive/issue_comments_545438.json:
```json
{
    "body": "**Changing commit** from \"[72c8378de1f5ab1de0d1062610a0d5d947415746](https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746)\" to \"\".",
    "created_at": "2022-04-05T19:18:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545438",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[72c8378de1f5ab1de0d1062610a0d5d947415746](https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746)" to "".



---

archive/issue_comments_545439.json:
```json
{
    "body": "<a id='comment:86'></a>\nThe first bug report on this may have arrived: https://groups.google.com/g/sage-release/c/-0luW4DPEPs/m/1bST2lbcCAAJ",
    "created_at": "2022-04-05T19:18:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545439",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:86'></a>
The first bug report on this may have arrived: https://groups.google.com/g/sage-release/c/-0luW4DPEPs/m/1bST2lbcCAAJ



---

archive/issue_comments_545440.json:
```json
{
    "body": "<a id='comment:87'></a>\nReplying to [mkoeppe](#comment%3A86):\n> The first bug report on this may have arrived: https://groups.google.com/g/sage-release/c/-0luW4DPEPs/m/1bST2lbcCAAJ\n\n\nYou mean \n\n```\n[sagemath_doc_html-none] [plot3d   ] Notebook execution failed (exception: [Errno 2] No such file or directory: '/home/furutaka/work/sage/sage-9.0-git-bld/local/bin/sage')\n```\nI suppose.\n\nThis looks identical to [comment:75](#comment%3A75) - a stale Jupyter kernel somewhere.",
    "created_at": "2022-04-05T20:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545440",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:87'></a>
Replying to [mkoeppe](#comment%3A86):
> The first bug report on this may have arrived: https://groups.google.com/g/sage-release/c/-0luW4DPEPs/m/1bST2lbcCAAJ


You mean 

```
[sagemath_doc_html-none] [plot3d   ] Notebook execution failed (exception: [Errno 2] No such file or directory: '/home/furutaka/work/sage/sage-9.0-git-bld/local/bin/sage')
```
I suppose.

This looks identical to [comment:75](#comment%3A75) - a stale Jupyter kernel somewhere.



---

archive/issue_comments_545441.json:
```json
{
    "body": "<a id='comment:88'></a>\nYes. I have opened #33650 for this.",
    "created_at": "2022-04-06T04:38:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33507",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33507#issuecomment-545441",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:88'></a>
Yes. I have opened #33650 for this.
