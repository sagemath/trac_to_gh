# Issue 33544: Use language_level=3 for Cython everywhere

archive/issues_033307.json:
```json
{
    "assignees": [],
    "body": "We\n\n* switch the language level of cython from 3str to 3.\n\nThis should not change anything, as we are now using python3. We also\n\n* change the language level from 2 to 3 in specific pyx files,\n\nin a way not to break anything.\n\n---\n\nhttps://stackoverflow.com/questions/57415446/what-are-differences-between-cythons-language-level-3-and-3str\n\nCC:  @tscrim @slel @kliem @kwankyu\n\nBranch: **[`762e0b7`](https://github.com/sagemath/sagetrac-mirror/commit/762e0b75bdb7cc939a9d7b8223872abb3e00398e)**\n\nReviewer: **Kwankyu Lee**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton, Jonathan Kliem**\n\nComponent: **python3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33544_\n\n",
    "closed_at": "2022-05-29T11:29:13Z",
    "created_at": "2022-03-21T19:17:56Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20python3",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Use language_level=3 for Cython everywhere",
    "type": "issue",
    "updated_at": "2022-06-26T07:27:41Z",
    "url": "https://github.com/sagemath/sage/issues/33544",
    "user": "https://github.com/fchapoton"
}
```
We

* switch the language level of cython from 3str to 3.

This should not change anything, as we are now using python3. We also

* change the language level from 2 to 3 in specific pyx files,

in a way not to break anything.

---

https://stackoverflow.com/questions/57415446/what-are-differences-between-cythons-language-level-3-and-3str

CC:  @tscrim @slel @kliem @kwankyu

Branch: **[`762e0b7`](https://github.com/sagemath/sagetrac-mirror/commit/762e0b75bdb7cc939a9d7b8223872abb3e00398e)**

Reviewer: **Kwankyu Lee**

Author: **Fr√©d√©ric Chapoton, Jonathan Kliem**

Component: **python3**

_Issue created by migration from https://trac.sagemath.org/ticket/33544_





---

archive/issue_events_457292.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-03-21T19:17:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457292"
}
```



---

archive/issue_events_457293.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-03-21T19:17:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "0000b0",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457293"
}
```



---

archive/issue_events_457294.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-03-21T19:17:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457294"
}
```



---

archive/issue_events_457295.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-03-21T19:17:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457295"
}
```



---

archive/issue_comments_541742.json:
```json
{
    "body": "Branch: **[u/chapoton/33544](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/33544)**",
    "created_at": "2022-03-21T19:18:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541742",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/33544](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/33544)**



---

archive/issue_comments_541743.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28749876e56471d13635fb3d7c3700fc453c64ee\"><code>2874987</code></a></td><td><code>use language_level=3 for cython</code></td></tr></table>\n",
    "created_at": "2022-03-21T19:18:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541743",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28749876e56471d13635fb3d7c3700fc453c64ee"><code>2874987</code></a></td><td><code>use language_level=3 for cython</code></td></tr></table>




---

archive/issue_comments_541744.json:
```json
{
    "body": "Commit: **[`2874987`](https://github.com/sagemath/sagetrac-mirror/commit/28749876e56471d13635fb3d7c3700fc453c64ee)**",
    "created_at": "2022-03-21T19:18:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541744",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`2874987`](https://github.com/sagemath/sagetrac-mirror/commit/28749876e56471d13635fb3d7c3700fc453c64ee)**



---

archive/issue_events_457296.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-03-21T19:18:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457296"
}
```



---

archive/issue_comments_541745.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nDescription please",
    "created_at": "2022-03-21T19:56:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541745",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

Description please



---

archive/issue_comments_541746.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,9 @@\n+* switch the language level of cython from 3str to 3\n \n+This should not change anything, as we are now using python3.\n+\n+* also change the language level form 2 to 3 in two specific pyx files\n+\n+Not clear if this is going to change something or not.\n+\n+https://stackoverflow.com/questions/57415446/what-are-differences-between-cythons-language-level-3-and-3str\n``````\n",
    "created_at": "2022-03-21T20:04:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541746",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,9 @@
+* switch the language level of cython from 3str to 3
 
+This should not change anything, as we are now using python3.
+
+* also change the language level form 2 to 3 in two specific pyx files
+
+Not clear if this is going to change something or not.
+
+https://stackoverflow.com/questions/57415446/what-are-differences-between-cythons-language-level-3-and-3str
``````




---

archive/issue_events_457297.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-03-22T07:24:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457297"
}
```



---

archive/issue_events_457298.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-03-22T07:24:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457298"
}
```



---

archive/issue_comments_541747.json:
```json
{
    "body": "Changed commit from **[`2874987`](https://github.com/sagemath/sagetrac-mirror/commit/28749876e56471d13635fb3d7c3700fc453c64ee)** to **[`b3409dc`](https://github.com/sagemath/sagetrac-mirror/commit/b3409dcdb9d40e9ad12b0323137e260951139f53)**",
    "created_at": "2022-03-22T10:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541747",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2874987`](https://github.com/sagemath/sagetrac-mirror/commit/28749876e56471d13635fb3d7c3700fc453c64ee)** to **[`b3409dc`](https://github.com/sagemath/sagetrac-mirror/commit/b3409dcdb9d40e9ad12b0323137e260951139f53)**



---

archive/issue_comments_541748.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3409dcdb9d40e9ad12b0323137e260951139f53\"><code>b3409dc</code></a></td><td><code>one fix in srange</code></td></tr></table>\n",
    "created_at": "2022-03-22T10:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541748",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3409dcdb9d40e9ad12b0323137e260951139f53"><code>b3409dc</code></a></td><td><code>one fix in srange</code></td></tr></table>




---

archive/issue_comments_541749.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI reviewed my local patches and in addition to `sage/arith/srange.pyx` I found `# cython: language_level=3` also in\n\n`sage/numerical/mip.pyx`\n\n`sage/rings/finite_rings/integer_mod.pyx`\n\n`sage/graphs/bliss.pyx`",
    "created_at": "2022-03-22T12:56:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541749",
    "user": "https://github.com/sheerluck"
}
```

<div id="comment:6" align="right">comment:6</div>

I reviewed my local patches and in addition to `sage/arith/srange.pyx` I found `# cython: language_level=3` also in

`sage/numerical/mip.pyx`

`sage/rings/finite_rings/integer_mod.pyx`

`sage/graphs/bliss.pyx`



---

archive/issue_comments_541750.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\ngreen bot, so please review",
    "created_at": "2022-03-22T13:02:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541750",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">comment:7</div>

green bot, so please review



---

archive/issue_events_457299.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-03-22T13:02:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457299"
}
```



---

archive/issue_events_457300.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-03-22T13:02:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457300"
}
```



---

archive/issue_comments_541751.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nby the way:\n\n```\ngit grep -c \"language_level\" src/\nsrc/sage/arith/srange.pyx:1\nsrc/sage/misc/cython.py:1\nsrc/sage/rings/finite_rings/integer_mod.pyx:1\nsrc/sage_setup/cython_options.py:1\n```",
    "created_at": "2022-03-22T13:27:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541751",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

by the way:

```
git grep -c "language_level" src/
src/sage/arith/srange.pyx:1
src/sage/misc/cython.py:1
src/sage/rings/finite_rings/integer_mod.pyx:1
src/sage_setup/cython_options.py:1
```



---

archive/issue_comments_541752.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@sheerluck](#comment%3A6):\n> I reviewed my local patches and in addition to `sage/arith/srange.pyx` I found `# cython: language_level=3` also in\n> \n> `sage/numerical/mip.pyx`\n> \n> `sage/rings/finite_rings/integer_mod.pyx`\n> \n> `sage/graphs/bliss.pyx`\n\nThanks for the information. Does it mean that some other changes should be done here ?",
    "created_at": "2022-03-22T17:30:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541752",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@sheerluck](#comment%3A6):
> I reviewed my local patches and in addition to `sage/arith/srange.pyx` I found `# cython: language_level=3` also in
> 
> `sage/numerical/mip.pyx`
> 
> `sage/rings/finite_rings/integer_mod.pyx`
> 
> `sage/graphs/bliss.pyx`

Thanks for the information. Does it mean that some other changes should be done here ?



---

archive/issue_comments_541753.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nand, by the way, should I remove the tags in specific pyx files, as they seem no longer to be needed ?",
    "created_at": "2022-03-23T08:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541753",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">comment:10</div>

and, by the way, should I remove the tags in specific pyx files, as they seem no longer to be needed ?



---

archive/issue_comments_541754.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nopinions ?",
    "created_at": "2022-03-27T08:25:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541754",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:11" align="right">comment:11</div>

opinions ?



---

archive/issue_comments_541755.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nSince they are no-ops, I think we should just remove them. Otherwise I don\u2019t really have any opinions on this beyond it is good to try and have less special cases for the language.",
    "created_at": "2022-03-27T10:41:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541755",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">comment:12</div>

Since they are no-ops, I think we should just remove them. Otherwise I don‚Äôt really have any opinions on this beyond it is good to try and have less special cases for the language.



---

archive/issue_comments_541756.json:
```json
{
    "body": "Changed commit from **[`b3409dc`](https://github.com/sagemath/sagetrac-mirror/commit/b3409dcdb9d40e9ad12b0323137e260951139f53)** to **[`dfb509f`](https://github.com/sagemath/sagetrac-mirror/commit/dfb509f45c372796e574915e5ba0117bcb3c122a)**",
    "created_at": "2022-03-27T12:06:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541756",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b3409dc`](https://github.com/sagemath/sagetrac-mirror/commit/b3409dcdb9d40e9ad12b0323137e260951139f53)** to **[`dfb509f`](https://github.com/sagemath/sagetrac-mirror/commit/dfb509f45c372796e574915e5ba0117bcb3c122a)**



---

archive/issue_comments_541757.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dfb509f45c372796e574915e5ba0117bcb3c122a\"><code>dfb509f</code></a></td><td><code>remove language level directive in srange</code></td></tr></table>\n",
    "created_at": "2022-03-27T12:06:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541757",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dfb509f45c372796e574915e5ba0117bcb3c122a"><code>dfb509f</code></a></td><td><code>remove language level directive in srange</code></td></tr></table>




---

archive/issue_comments_541758.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@fchapoton](#comment%3A10):\n> and, by the way, should I remove the tags in specific pyx files, as they seem no longer to be needed ?\n\nYes. All of them.",
    "created_at": "2022-03-31T08:02:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541758",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@fchapoton](#comment%3A10):
> and, by the way, should I remove the tags in specific pyx files, as they seem no longer to be needed ?

Yes. All of them.



---

archive/issue_events_457301.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-03-31T08:06:45Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "title_is": "Use language_level=3 for Cython everywhere",
    "title_was": "use language_level=3 for cython",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457301"
}
```



---

archive/issue_comments_541759.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,13 @@\n-* switch the language level of cython from 3str to 3\n+We\n \n-This should not change anything, as we are now using python3.\n+* switch the language level of cython from 3str to 3.\n \n-* also change the language level form 2 to 3 in two specific pyx files\n+This should not change anything, as we are now using python3. We also\n \n-Not clear if this is going to change something or not.\n+* change the language level from 2 to 3 in specific pyx files,\n+\n+in a way not to break anything.\n+\n+---\n \n https://stackoverflow.com/questions/57415446/what-are-differences-between-cythons-language-level-3-and-3str\n``````\n",
    "created_at": "2022-03-31T08:12:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541759",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,13 @@
-* switch the language level of cython from 3str to 3
+We
 
-This should not change anything, as we are now using python3.
+* switch the language level of cython from 3str to 3.
 
-* also change the language level form 2 to 3 in two specific pyx files
+This should not change anything, as we are now using python3. We also
 
-Not clear if this is going to change something or not.
+* change the language level from 2 to 3 in specific pyx files,
+
+in a way not to break anything.
+
+---
 
 https://stackoverflow.com/questions/57415446/what-are-differences-between-cythons-language-level-3-and-3str
``````




---

archive/issue_events_457302.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-03-31T08:12:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457302"
}
```



---

archive/issue_events_457303.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-03-31T08:12:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457303"
}
```



---

archive/issue_comments_541760.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI think we should be more ambitious.",
    "created_at": "2022-03-31T08:13:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541760",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:17" align="right">comment:17</div>

I think we should be more ambitious.



---

archive/issue_comments_541761.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n\ud83c\uddfa\ud83c\udde6\n\nwould you please explicitly tell us what you mean by \"more ambitious\" ?",
    "created_at": "2022-04-02T16:05:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541761",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:18" align="right">comment:18</div>

üá∫üá¶

would you please explicitly tell us what you mean by "more ambitious" ?



---

archive/issue_comments_541762.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@fchapoton](#comment%3A18):\n> would you please explicitly tell us what you mean by \"more ambitious\" ?\n\nI just meant removing `language_level=2` from `sage/rings/finite_rings/integer_mod.pyx`, which seems more challenging. If not, it's better.",
    "created_at": "2022-04-03T11:01:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541762",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@fchapoton](#comment%3A18):
> would you please explicitly tell us what you mean by "more ambitious" ?

I just meant removing `language_level=2` from `sage/rings/finite_rings/integer_mod.pyx`, which seems more challenging. If not, it's better.



---

archive/issue_events_457304.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457304"
}
```



---

archive/issue_events_457305.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457305"
}
```



---

archive/issue_comments_541763.json:
```json
{
    "body": "Changed commit from **[`dfb509f`](https://github.com/sagemath/sagetrac-mirror/commit/dfb509f45c372796e574915e5ba0117bcb3c122a)** to **[`a2c02e5`](https://github.com/sagemath/sagetrac-mirror/commit/a2c02e58a397c7376ab54dcd4e3c563d5afe0e22)**",
    "created_at": "2022-04-12T14:55:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541763",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dfb509f`](https://github.com/sagemath/sagetrac-mirror/commit/dfb509f45c372796e574915e5ba0117bcb3c122a)** to **[`a2c02e5`](https://github.com/sagemath/sagetrac-mirror/commit/a2c02e58a397c7376ab54dcd4e3c563d5afe0e22)**



---

archive/issue_comments_541764.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3413b3ee61f218b113235673905d5e8aa8e885e\"><code>d3413b3</code></a></td><td><code>Merge branch 'u/chapoton/33544' in 9.6.rc0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2c02e58a397c7376ab54dcd4e3c563d5afe0e22\"><code>a2c02e5</code></a></td><td><code>set language_level to 3</code></td></tr></table>\n",
    "created_at": "2022-04-12T14:55:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541764",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3413b3ee61f218b113235673905d5e8aa8e885e"><code>d3413b3</code></a></td><td><code>Merge branch 'u/chapoton/33544' in 9.6.rc0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2c02e58a397c7376ab54dcd4e3c563d5afe0e22"><code>a2c02e5</code></a></td><td><code>set language_level to 3</code></td></tr></table>




---

archive/issue_comments_541765.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\npatchbot reports a failing doctest in `src/sage/rings/finite_rings/integer_mod.pyx` that needs to be investigated",
    "created_at": "2022-04-12T18:25:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541765",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:22" align="right">comment:22</div>

patchbot reports a failing doctest in `src/sage/rings/finite_rings/integer_mod.pyx` that needs to be investigated



---

archive/issue_comments_541766.json:
```json
{
    "body": "Changed branch from **[u/chapoton/33544](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/33544)** to **[u/gh-kliem/33544](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/33544)**",
    "created_at": "2022-04-13T14:17:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541766",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[u/chapoton/33544](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/33544)** to **[u/gh-kliem/33544](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/33544)**



---

archive/issue_comments_541767.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nFixed a naming issue. This wasn't an issue with `language_level=2`:\n\n```\nsage: cython('''\n....: # cython: language_level=2\n....: def foo(a):\n....:     return [a for a in range(2**a)]\n....: ''')\nsage: foo(1)\n[0, 1]\nsage: cython('''\n....: # cython: language_level=3\n....: def foo(a):\n....:     return [a for a in range(2**a)]\n....: ''')\nsage: foo(1)\n---------------------------------------------------------------------------\nUnboundLocalError                         Traceback (most recent call last)\n<ipython-input-10-16a3fe22adcc> in <module>\n----> 1 foo(Integer(1))\n\n/srv/public/kliem/.sage/temp/cofio/13070/spyx/_srv_public_kliem__sage_temp_cofio_13070_tmp_rbmq7793_pyx/_srv_public_kliem__sage_temp_cofio_13070_tmp_rbmq7793_pyx_0.pyx in _srv_public_kliem__sage_temp_cofio_13070_tmp_rbmq7793_pyx_0.foo()\n      2 # cython: language_level=3\n      3 def foo(a):\n----> 4     return [a for a in range(2**a)]\n\nUnboundLocalError: local variable 'a' referenced before assignment\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f753ebe069ec087c7bcd1f9ad17ebcc55604f75\"><code>3f753eb</code></a></td><td><code>fixed a bug</code></td></tr></table>\n",
    "created_at": "2022-04-13T14:17:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541767",
    "user": "https://github.com/kliem"
}
```

<div id="comment:23" align="right">comment:23</div>

Fixed a naming issue. This wasn't an issue with `language_level=2`:

```
sage: cython('''
....: # cython: language_level=2
....: def foo(a):
....:     return [a for a in range(2**a)]
....: ''')
sage: foo(1)
[0, 1]
sage: cython('''
....: # cython: language_level=3
....: def foo(a):
....:     return [a for a in range(2**a)]
....: ''')
sage: foo(1)
---------------------------------------------------------------------------
UnboundLocalError                         Traceback (most recent call last)
<ipython-input-10-16a3fe22adcc> in <module>
----> 1 foo(Integer(1))

/srv/public/kliem/.sage/temp/cofio/13070/spyx/_srv_public_kliem__sage_temp_cofio_13070_tmp_rbmq7793_pyx/_srv_public_kliem__sage_temp_cofio_13070_tmp_rbmq7793_pyx_0.pyx in _srv_public_kliem__sage_temp_cofio_13070_tmp_rbmq7793_pyx_0.foo()
      2 # cython: language_level=3
      3 def foo(a):
----> 4     return [a for a in range(2**a)]

UnboundLocalError: local variable 'a' referenced before assignment
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f753ebe069ec087c7bcd1f9ad17ebcc55604f75"><code>3f753eb</code></a></td><td><code>fixed a bug</code></td></tr></table>




---

archive/issue_comments_541768.json:
```json
{
    "body": "Changed commit from **[`a2c02e5`](https://github.com/sagemath/sagetrac-mirror/commit/a2c02e58a397c7376ab54dcd4e3c563d5afe0e22)** to **[`3f753eb`](https://github.com/sagemath/sagetrac-mirror/commit/3f753ebe069ec087c7bcd1f9ad17ebcc55604f75)**",
    "created_at": "2022-04-13T14:17:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541768",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[`a2c02e5`](https://github.com/sagemath/sagetrac-mirror/commit/a2c02e58a397c7376ab54dcd4e3c563d5afe0e22)** to **[`3f753eb`](https://github.com/sagemath/sagetrac-mirror/commit/3f753ebe069ec087c7bcd1f9ad17ebcc55604f75)**



---

archive/issue_comments_541769.json:
```json
{
    "body": "Changed author from **Fr\u00e9d\u00e9ric Chapoton** to **Fr\u00e9d\u00e9ric Chapoton, Jonathan Kliem**",
    "created_at": "2022-04-13T14:17:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541769",
    "user": "https://github.com/kliem"
}
```

Changed author from **Fr√©d√©ric Chapoton** to **Fr√©d√©ric Chapoton, Jonathan Kliem**



---

archive/issue_events_457306.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2022-04-13T14:17:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457306"
}
```



---

archive/issue_events_457307.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2022-04-13T14:17:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457307"
}
```



---

archive/issue_comments_541770.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nthanks a lot for locating and fixing this subtle issue !\n\nThis should be good to go now. Agree to positive review ?",
    "created_at": "2022-04-13T18:06:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541770",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:25" align="right">comment:25</div>

thanks a lot for locating and fixing this subtle issue !

This should be good to go now. Agree to positive review ?



---

archive/issue_events_457308.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-14T01:53:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457308"
}
```



---

archive/issue_events_457309.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-14T01:53:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457309"
}
```



---

archive/issue_comments_541771.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nLGTM.",
    "created_at": "2022-04-14T01:53:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541771",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:26" align="right">comment:26</div>

LGTM.



---

archive/issue_comments_541772.json:
```json
{
    "body": "Reviewer: **Kwankyu Lee**",
    "created_at": "2022-04-14T01:53:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541772",
    "user": "https://github.com/kwankyu"
}
```

Reviewer: **Kwankyu Lee**



---

archive/issue_comments_541773.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI get lots of\n\n```\n[sagelib-9.6] Error compiling Cython file:\n[sagelib-9.6] ------------------------------------------------------------\n[sagelib-9.6] ...\n[sagelib-9.6]                          self.value, (<RealField_class>self._parent).rnd)\n[sagelib-9.6]         sig_off()\n[sagelib-9.6]         if s is NULL:\n[sagelib-9.6]             raise RuntimeError(\"unable to convert an mpfr number to a string\")\n[sagelib-9.6]         # t contains just digits (no sign, decimal point or exponent)\n[sagelib-9.6]         if s[0] == '-':\n[sagelib-9.6]                   ^\n[sagelib-9.6] ------------------------------------------------------------\n[sagelib-9.6] \n[sagelib-9.6] sage/rings/real_mpfr.pyx:2095:19: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n```",
    "created_at": "2022-05-18T22:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541773",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:27" align="right">comment:27</div>

I get lots of

```
[sagelib-9.6] Error compiling Cython file:
[sagelib-9.6] ------------------------------------------------------------
[sagelib-9.6] ...
[sagelib-9.6]                          self.value, (<RealField_class>self._parent).rnd)
[sagelib-9.6]         sig_off()
[sagelib-9.6]         if s is NULL:
[sagelib-9.6]             raise RuntimeError("unable to convert an mpfr number to a string")
[sagelib-9.6]         # t contains just digits (no sign, decimal point or exponent)
[sagelib-9.6]         if s[0] == '-':
[sagelib-9.6]                   ^
[sagelib-9.6] ------------------------------------------------------------
[sagelib-9.6] 
[sagelib-9.6] sage/rings/real_mpfr.pyx:2095:19: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
```



---

archive/issue_events_457310.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-18T22:35:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457310"
}
```



---

archive/issue_events_457311.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-18T22:35:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457311"
}
```



---

archive/issue_comments_541774.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n(ignore)",
    "created_at": "2022-05-18T22:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541774",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

(ignore)



---

archive/issue_comments_541775.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nmaybe one needs to use `char_to_str` here, from\n\n```\nfrom sage.cpython.string cimport char_to_str\n```\n?",
    "created_at": "2022-05-19T08:34:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541775",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:29" align="right">comment:29</div>

maybe one needs to use `char_to_str` here, from

```
from sage.cpython.string cimport char_to_str
```
?



---

archive/issue_comments_541776.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\ncan somebody reproduce the issue ? no problem for my patchbot, using python 3.8.10",
    "created_at": "2022-05-19T12:15:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541776",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:30" align="right">comment:30</div>

can somebody reproduce the issue ? no problem for my patchbot, using python 3.8.10



---

archive/issue_comments_541777.json:
```json
{
    "body": "Changed branch from **[u/gh-kliem/33544](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/33544)** to **[u/chapoton/33544](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/33544)**",
    "created_at": "2022-05-24T17:48:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541777",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/gh-kliem/33544](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/33544)** to **[u/chapoton/33544](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/33544)**



---

archive/issue_events_457312.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-05-24T17:48:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457312"
}
```



---

archive/issue_events_457313.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-05-24T17:48:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457313"
}
```



---

archive/issue_comments_541778.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nhere is a proposal. Because I cannot see the failure, I cannot say if this fixes it..\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bb27cd5f70bb1d2bd4efc6f5f71287576c6ddc2\"><code>5bb27cd</code></a></td><td><code>Merge branch 'u/gh-kliem/33544' in 9.7.beta0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4bc48934bdf3fd8a1e8fb1cb6cf24e7119ee58c\"><code>a4bc489</code></a></td><td><code>tentative fix for unicode in real_mpfr.pyx</code></td></tr></table>\n",
    "created_at": "2022-05-24T17:48:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541778",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:31" align="right">comment:31</div>

here is a proposal. Because I cannot see the failure, I cannot say if this fixes it..

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bb27cd5f70bb1d2bd4efc6f5f71287576c6ddc2"><code>5bb27cd</code></a></td><td><code>Merge branch 'u/gh-kliem/33544' in 9.7.beta0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4bc48934bdf3fd8a1e8fb1cb6cf24e7119ee58c"><code>a4bc489</code></a></td><td><code>tentative fix for unicode in real_mpfr.pyx</code></td></tr></table>




---

archive/issue_comments_541779.json:
```json
{
    "body": "Changed commit from **[`3f753eb`](https://github.com/sagemath/sagetrac-mirror/commit/3f753ebe069ec087c7bcd1f9ad17ebcc55604f75)** to **[`a4bc489`](https://github.com/sagemath/sagetrac-mirror/commit/a4bc48934bdf3fd8a1e8fb1cb6cf24e7119ee58c)**",
    "created_at": "2022-05-24T17:48:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541779",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`3f753eb`](https://github.com/sagemath/sagetrac-mirror/commit/3f753ebe069ec087c7bcd1f9ad17ebcc55604f75)** to **[`a4bc489`](https://github.com/sagemath/sagetrac-mirror/commit/a4bc48934bdf3fd8a1e8fb1cb6cf24e7119ee58c)**



---

archive/issue_comments_541780.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nWith 9.7.beta0 on Mac, I get\n\n```\n[sagelib-9.7.beta0] Enabling Cython debugging support\n[sagelib-9.7.beta0] [  1/531] Cythonizing sage/misc/parser.pyx\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]                 elif s[pos] == '!':\n[sagelib-9.7.beta0]                     self.pos += 2\n[sagelib-9.7.beta0]                     return NOT_EQ\n[sagelib-9.7.beta0]                 elif s[pos] == '=':\n[sagelib-9.7.beta0]                     self.pos += 2\n[sagelib-9.7.beta0]                     return '='\n[sagelib-9.7.beta0]                           ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:275:27: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n```\n\nThis is part of a method that returns `int`. Hence it seems a genuine error.",
    "created_at": "2022-05-25T03:31:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541780",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:32" align="right">comment:32</div>

With 9.7.beta0 on Mac, I get

```
[sagelib-9.7.beta0] Enabling Cython debugging support
[sagelib-9.7.beta0] [  1/531] Cythonizing sage/misc/parser.pyx
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]                 elif s[pos] == '!':
[sagelib-9.7.beta0]                     self.pos += 2
[sagelib-9.7.beta0]                     return NOT_EQ
[sagelib-9.7.beta0]                 elif s[pos] == '=':
[sagelib-9.7.beta0]                     self.pos += 2
[sagelib-9.7.beta0]                     return '='
[sagelib-9.7.beta0]                           ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:275:27: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
```

This is part of a method that returns `int`. Hence it seems a genuine error.



---

archive/issue_comments_541781.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6fa671361dfa97e0013bf116bf00e675c7a264a\"><code>d6fa671</code></a></td><td><code>fix in parser.pyx</code></td></tr></table>\n",
    "created_at": "2022-05-25T06:04:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541781",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6fa671361dfa97e0013bf116bf00e675c7a264a"><code>d6fa671</code></a></td><td><code>fix in parser.pyx</code></td></tr></table>




---

archive/issue_comments_541782.json:
```json
{
    "body": "Changed commit from **[`a4bc489`](https://github.com/sagemath/sagetrac-mirror/commit/a4bc48934bdf3fd8a1e8fb1cb6cf24e7119ee58c)** to **[`d6fa671`](https://github.com/sagemath/sagetrac-mirror/commit/d6fa671361dfa97e0013bf116bf00e675c7a264a)**",
    "created_at": "2022-05-25T06:04:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541782",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a4bc489`](https://github.com/sagemath/sagetrac-mirror/commit/a4bc48934bdf3fd8a1e8fb1cb6cf24e7119ee58c)** to **[`d6fa671`](https://github.com/sagemath/sagetrac-mirror/commit/d6fa671361dfa97e0013bf116bf00e675c7a264a)**



---

archive/issue_comments_541783.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nThanks for the feedback. Here is another tentative fix. Please test and report.",
    "created_at": "2022-05-25T06:08:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541783",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:34" align="right">comment:34</div>

Thanks for the feedback. Here is another tentative fix. Please test and report.



---

archive/issue_comments_541784.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nActually there are many more errors like that. How about on your platform? \n\n```python\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             [a 0]\n[sagelib-9.7.beta0]             [0 a]\n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         cdef int token\n[sagelib-9.7.beta0]         all = []\n[sagelib-9.7.beta0]         if tokens.next() == '(':\n[sagelib-9.7.beta0]                            ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:612:28: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             [0 a]\n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         cdef int token\n[sagelib-9.7.beta0]         all = []\n[sagelib-9.7.beta0]         if tokens.next() == '(':\n[sagelib-9.7.beta0]             token = ','\n[sagelib-9.7.beta0]                    ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:613:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         cdef int token\n[sagelib-9.7.beta0]         all = []\n[sagelib-9.7.beta0]         if tokens.next() == '(':\n[sagelib-9.7.beta0]             token = ','\n[sagelib-9.7.beta0]             while token == ',':\n[sagelib-9.7.beta0]                           ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:614:27: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             token = ','\n[sagelib-9.7.beta0]             while token == ',':\n[sagelib-9.7.beta0]                 all.append(self.p_list(tokens))\n[sagelib-9.7.beta0]                 token = tokens.next()\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0]             if token == ')':\n[sagelib-9.7.beta0]                        ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:618:24: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             [[3, 0]]\n[sagelib-9.7.beta0]             sage: p.p_sequence(Tokenizer(\"(1,2,3) , [1+a, 2+b, (3+c), (4+d,)]\"))\n[sagelib-9.7.beta0]             [(1, 2, 3), [a + 1, b + 2, c + 3, (d + 4,)]]\n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         all = []\n[sagelib-9.7.beta0]         cdef int token = ','\n[sagelib-9.7.beta0]                         ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:640:25: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             sage: p.p_sequence(Tokenizer(\"(1,2,3) , [1+a, 2+b, (3+c), (4+d,)]\"))\n[sagelib-9.7.beta0]             [(1, 2, 3), [a + 1, b + 2, c + 3, (d + 4,)]]\n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         all = []\n[sagelib-9.7.beta0]         cdef int token = ','\n[sagelib-9.7.beta0]         while token == ',':\n[sagelib-9.7.beta0]                       ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:641:23: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]                 if tokens.peek() == c',':\n[sagelib-9.7.beta0]                     obj = self.integer_constructor(tokens.last_token_string())\n[sagelib-9.7.beta0]                 else:\n[sagelib-9.7.beta0]                     tokens.backtrack()\n[sagelib-9.7.beta0]                     obj = self.p_eqn(tokens)\n[sagelib-9.7.beta0]             elif token == '[':\n[sagelib-9.7.beta0]                          ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:654:26: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]                 else:\n[sagelib-9.7.beta0]                     tokens.backtrack()\n[sagelib-9.7.beta0]                     obj = self.p_eqn(tokens)\n[sagelib-9.7.beta0]             elif token == '[':\n[sagelib-9.7.beta0]                 obj = self.p_list(tokens)\n[sagelib-9.7.beta0]             elif token == '(':\n[sagelib-9.7.beta0]                          ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:656:26: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]                 obj = self.p_list(tokens)\n[sagelib-9.7.beta0]             elif token == '(':\n[sagelib-9.7.beta0]                 obj = self.p_tuple(tokens)\n[sagelib-9.7.beta0]             elif token == EOS:\n[sagelib-9.7.beta0]                 return all\n[sagelib-9.7.beta0]             elif token == ']' or token == ')':\n[sagelib-9.7.beta0]                          ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:660:26: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]                 obj = self.p_list(tokens)\n[sagelib-9.7.beta0]             elif token == '(':\n[sagelib-9.7.beta0]                 obj = self.p_tuple(tokens)\n[sagelib-9.7.beta0]             elif token == EOS:\n[sagelib-9.7.beta0]                 return all\n[sagelib-9.7.beta0]             elif token == ']' or token == ')':\n[sagelib-9.7.beta0]                                          ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:660:42: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             elif token == '(':\n[sagelib-9.7.beta0]                 obj = self.p_tuple(tokens)\n[sagelib-9.7.beta0]             elif token == EOS:\n[sagelib-9.7.beta0]                 return all\n[sagelib-9.7.beta0]             elif token == ']' or token == ')':\n[sagelib-9.7.beta0]                 tokens.token = ','\n[sagelib-9.7.beta0]                               ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:661:31: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             [3, 1000.0]\n[sagelib-9.7.beta0]             sage: p.p_list(Tokenizer(\"[]\"))\n[sagelib-9.7.beta0]             []\n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         cdef int token = tokens.next()\n[sagelib-9.7.beta0]         if token != '[':\n[sagelib-9.7.beta0]                    ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:685:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         cdef int token = tokens.next()\n[sagelib-9.7.beta0]         if token != '[':\n[sagelib-9.7.beta0]             self.parse_error(tokens, \"Malformed list\")\n[sagelib-9.7.beta0]         all = self.p_sequence(tokens)\n[sagelib-9.7.beta0]         token = tokens.next()\n[sagelib-9.7.beta0]         if token != ']':\n[sagelib-9.7.beta0]                    ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:689:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             ((), 1, (1,), (1, 2), (1, 2, 3), 9)\n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         cdef int start = tokens.pos\n[sagelib-9.7.beta0]         cdef int token = tokens.next()\n[sagelib-9.7.beta0]         cdef bint real_tuple = True\n[sagelib-9.7.beta0]         if token != '(':\n[sagelib-9.7.beta0]                    ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:707:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         all = self.p_sequence(tokens)\n[sagelib-9.7.beta0]         if len(all) == 1:\n[sagelib-9.7.beta0]             if tokens.last() != c',':\n[sagelib-9.7.beta0]                 real_tuple = False\n[sagelib-9.7.beta0]         token = tokens.next()\n[sagelib-9.7.beta0]         if token != ')':\n[sagelib-9.7.beta0]                    ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:714:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             self.parse_error(tokens, \"Malformed tuple\")\n[sagelib-9.7.beta0]         if real_tuple:\n[sagelib-9.7.beta0]             return tuple(all)\n[sagelib-9.7.beta0]         else:\n[sagelib-9.7.beta0]             token = tokens.peek()\n[sagelib-9.7.beta0]             if token == ',' or token == EOS:\n[sagelib-9.7.beta0]                        ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:720:24: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             sage: p.p_eqn(Tokenizer(\"a != b\"))\n[sagelib-9.7.beta0]             a != b\n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         lhs = self.p_expr(tokens)\n[sagelib-9.7.beta0]         cdef int op = tokens.next()\n[sagelib-9.7.beta0]         if op == '=':\n[sagelib-9.7.beta0]                 ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:756:17: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         cdef int op = tokens.next()\n[sagelib-9.7.beta0]         if op == '=':\n[sagelib-9.7.beta0]             return lhs == self.p_expr(tokens)\n[sagelib-9.7.beta0]         elif op == NOT_EQ:\n[sagelib-9.7.beta0]             return lhs != self.p_expr(tokens)\n[sagelib-9.7.beta0]         elif op == '<':\n[sagelib-9.7.beta0]                   ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:760:19: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             return lhs != self.p_expr(tokens)\n[sagelib-9.7.beta0]         elif op == '<':\n[sagelib-9.7.beta0]             return lhs < self.p_expr(tokens)\n[sagelib-9.7.beta0]         elif op == LESS_EQ:\n[sagelib-9.7.beta0]             return lhs <= self.p_expr(tokens)\n[sagelib-9.7.beta0]         elif op == '>':\n[sagelib-9.7.beta0]                   ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:764:19: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         # Note: this is left-recursive, so we can't just recurse\n[sagelib-9.7.beta0]         cdef int op\n[sagelib-9.7.beta0]         operand1 = self.p_term(tokens)\n[sagelib-9.7.beta0]         op = tokens.next()\n[sagelib-9.7.beta0]         while op == '+' or op == '-':\n[sagelib-9.7.beta0]                    ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:796:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         # Note: this is left-recursive, so we can't just recurse\n[sagelib-9.7.beta0]         cdef int op\n[sagelib-9.7.beta0]         operand1 = self.p_term(tokens)\n[sagelib-9.7.beta0]         op = tokens.next()\n[sagelib-9.7.beta0]         while op == '+' or op == '-':\n[sagelib-9.7.beta0]                                 ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:796:33: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         cdef int op\n[sagelib-9.7.beta0]         operand1 = self.p_term(tokens)\n[sagelib-9.7.beta0]         op = tokens.next()\n[sagelib-9.7.beta0]         while op == '+' or op == '-':\n[sagelib-9.7.beta0]             operand2 = self.p_term(tokens)\n[sagelib-9.7.beta0]             if op == '+':\n[sagelib-9.7.beta0]                     ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:798:21: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         # Note: this is left-recursive, so we can't just recurse\n[sagelib-9.7.beta0]         cdef int op\n[sagelib-9.7.beta0]         operand1 = self.p_factor(tokens)\n[sagelib-9.7.beta0]         op = tokens.next()\n[sagelib-9.7.beta0]         if op == NAME and self.implicit_multiplication:\n[sagelib-9.7.beta0]             op = '*'\n[sagelib-9.7.beta0]                 ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:831:17: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         operand1 = self.p_factor(tokens)\n[sagelib-9.7.beta0]         op = tokens.next()\n[sagelib-9.7.beta0]         if op == NAME and self.implicit_multiplication:\n[sagelib-9.7.beta0]             op = '*'\n[sagelib-9.7.beta0]             tokens.backtrack()\n[sagelib-9.7.beta0]         while op == '*' or op == '/':\n[sagelib-9.7.beta0]                    ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:833:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         operand1 = self.p_factor(tokens)\n[sagelib-9.7.beta0]         op = tokens.next()\n[sagelib-9.7.beta0]         if op == NAME and self.implicit_multiplication:\n[sagelib-9.7.beta0]             op = '*'\n[sagelib-9.7.beta0]             tokens.backtrack()\n[sagelib-9.7.beta0]         while op == '*' or op == '/':\n[sagelib-9.7.beta0]                                 ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:833:33: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         if op == NAME and self.implicit_multiplication:\n[sagelib-9.7.beta0]             op = '*'\n[sagelib-9.7.beta0]             tokens.backtrack()\n[sagelib-9.7.beta0]         while op == '*' or op == '/':\n[sagelib-9.7.beta0]             operand2 = self.p_factor(tokens)\n[sagelib-9.7.beta0]             if op == '*':\n[sagelib-9.7.beta0]                     ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:835:21: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]                 operand1 = operand1 * operand2\n[sagelib-9.7.beta0]             else:\n[sagelib-9.7.beta0]                 operand1 = operand1 / operand2\n[sagelib-9.7.beta0]             op = tokens.next()\n[sagelib-9.7.beta0]             if op == NAME and self.implicit_multiplication:\n[sagelib-9.7.beta0]                 op = '*'\n[sagelib-9.7.beta0]                     ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:841:21: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             -t^2\n[sagelib-9.7.beta0]             sage: p.p_factor(Tokenizer(\"t^11 * x\"))\n[sagelib-9.7.beta0]             t^11\n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         cdef int token = tokens.next()\n[sagelib-9.7.beta0]         if token == '+':\n[sagelib-9.7.beta0]                    ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:865:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             t^11\n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         cdef int token = tokens.next()\n[sagelib-9.7.beta0]         if token == '+':\n[sagelib-9.7.beta0]             return self.p_factor(tokens)\n[sagelib-9.7.beta0]         elif token == '-':\n[sagelib-9.7.beta0]                      ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:867:22: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             factorial(x)^2\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         operand1 = self.p_atom(tokens)\n[sagelib-9.7.beta0]         cdef int token = tokens.next()\n[sagelib-9.7.beta0]         if token == '^':\n[sagelib-9.7.beta0]                    ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:901:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         operand1 = self.p_atom(tokens)\n[sagelib-9.7.beta0]         cdef int token = tokens.next()\n[sagelib-9.7.beta0]         if token == '^':\n[sagelib-9.7.beta0]             operand2 = self.p_factor(tokens)\n[sagelib-9.7.beta0]             return operand1 ** operand2\n[sagelib-9.7.beta0]         elif token == \"!\":\n[sagelib-9.7.beta0]                      ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:904:22: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             operand2 = self.p_factor(tokens)\n[sagelib-9.7.beta0]             return operand1 ** operand2\n[sagelib-9.7.beta0]         elif token == \"!\":\n[sagelib-9.7.beta0]             from sage.functions.all import factorial\n[sagelib-9.7.beta0]             operand1 = factorial(operand1)\n[sagelib-9.7.beta0]             if tokens.peek() == '^':\n[sagelib-9.7.beta0]                                ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:907:32: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         elif token == FLOAT:\n[sagelib-9.7.beta0]             return self.float_constructor(tokens.last_token_string())\n[sagelib-9.7.beta0]         elif token == NAME:\n[sagelib-9.7.beta0]             name = tokens.last_token_string()\n[sagelib-9.7.beta0]             token = tokens.next()\n[sagelib-9.7.beta0]             if token == '(':\n[sagelib-9.7.beta0]                        ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:952:24: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             token = tokens.next()\n[sagelib-9.7.beta0]             if token == '(':\n[sagelib-9.7.beta0]                 func = self.callable_constructor(name)\n[sagelib-9.7.beta0]                 args, kwds = self.p_args(tokens)\n[sagelib-9.7.beta0]                 token = tokens.next()\n[sagelib-9.7.beta0]                 if token != ')':\n[sagelib-9.7.beta0]                            ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:956:28: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]                     self.parse_error(tokens, \"Bad function call\")\n[sagelib-9.7.beta0]                 return func(*args, **kwds)\n[sagelib-9.7.beta0]             else:\n[sagelib-9.7.beta0]                 tokens.backtrack()\n[sagelib-9.7.beta0]                 return self.variable_constructor(name)\n[sagelib-9.7.beta0]         elif token == '(':\n[sagelib-9.7.beta0]                      ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:962:22: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]                 tokens.backtrack()\n[sagelib-9.7.beta0]                 return self.variable_constructor(name)\n[sagelib-9.7.beta0]         elif token == '(':\n[sagelib-9.7.beta0]             expr = self.p_expr(tokens)\n[sagelib-9.7.beta0]             token = tokens.next()\n[sagelib-9.7.beta0]             if token != ')':\n[sagelib-9.7.beta0]                        ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:965:24: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             sage: p.p_args(Tokenizer(\"1, 2, a = 1+5^2\"))\n[sagelib-9.7.beta0]             ([1, 2], {'a': 26})\n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         args = []\n[sagelib-9.7.beta0]         kwds = {}\n[sagelib-9.7.beta0]         if tokens.peek() == ')':\n[sagelib-9.7.beta0]                            ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:987:28: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         args = []\n[sagelib-9.7.beta0]         kwds = {}\n[sagelib-9.7.beta0]         if tokens.peek() == ')':\n[sagelib-9.7.beta0]             return args, kwds\n[sagelib-9.7.beta0]         cdef int token = ','\n[sagelib-9.7.beta0]                         ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:989:25: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         args = []\n[sagelib-9.7.beta0]         kwds = {}\n[sagelib-9.7.beta0]         if tokens.peek() == ')':\n[sagelib-9.7.beta0]             return args, kwds\n[sagelib-9.7.beta0]         cdef int token = ','\n[sagelib-9.7.beta0]         while token == ',':\n[sagelib-9.7.beta0]                       ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:990:23: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             sage: p.p_arg(Tokenizer(\"[x]\"))\n[sagelib-9.7.beta0]             [x]\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         cdef int token = tokens.next()\n[sagelib-9.7.beta0]         if token == NAME and tokens.peek() == '=':\n[sagelib-9.7.beta0]                                              ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:1032:46: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         cdef int token = tokens.next()\n[sagelib-9.7.beta0]         if token == NAME and tokens.peek() == '=':\n[sagelib-9.7.beta0]             name = tokens.last_token_string()\n[sagelib-9.7.beta0]             tokens.next()\n[sagelib-9.7.beta0]             return name, self.p_expr(tokens)\n[sagelib-9.7.beta0]         if token == \"[\" :\n[sagelib-9.7.beta0]                    ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/misc/parser.pyx:1036:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] Traceback (most recent call last):\n[sagelib-9.7.beta0]   File \"/Users/kwankyu/GitHub/sage-dev/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/Cython/Build/Dependencies.py\", line 1274, in cythonize_one_helper\n[sagelib-9.7.beta0]     return cythonize_one(*m)\n[sagelib-9.7.beta0]   File \"/Users/kwankyu/GitHub/sage-dev/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/Cython/Build/Dependencies.py\", line 1250, in cythonize_one\n[sagelib-9.7.beta0]     raise CompileError(None, pyx_file)\n[sagelib-9.7.beta0] Cython.Compiler.Errors.CompileError: sage/misc/parser.pyx\n[sagelib-9.7.beta0] [  3/531] Cythonizing sage/rings/real_mpfi.pyx\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         # the right of the last mantissa digit (that is, so the number\n[sagelib-9.7.beta0]         # is mantissa*base^exponent, if you interpret mantissa as an integer).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0]         cdef long digits\n[sagelib-9.7.beta0]         digits = strlen(lower_s)\n[sagelib-9.7.beta0]         if lower_s[0] == '-':\n[sagelib-9.7.beta0]                         ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/rings/real_mpfi.pyx:1946:25: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         if lower_s[0] == '-':\n[sagelib-9.7.beta0]             digits -= 1\n[sagelib-9.7.beta0]         lower_expo -= digits\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0]         digits = strlen(upper_s)\n[sagelib-9.7.beta0]         if upper_s[0] == '-':\n[sagelib-9.7.beta0]                         ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/rings/real_mpfi.pyx:1951:25: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]         tmp_cstr = <char *>PyMem_Malloc(mpz_sizeinbase(lower_mpz, base) + 2)\n[sagelib-9.7.beta0]         if tmp_cstr == NULL:\n[sagelib-9.7.beta0]             raise MemoryError(\"Unable to allocate memory for the mantissa of an interval\")\n[sagelib-9.7.beta0]         mpz_get_str(tmp_cstr, base, lower_mpz)\n[sagelib-9.7.beta0]         digits = strlen(tmp_cstr)\n[sagelib-9.7.beta0]         if tmp_cstr[0] == '-':\n[sagelib-9.7.beta0]                          ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/rings/real_mpfi.pyx:2120:26: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0]     while x[0] == c' ':\n[sagelib-9.7.beta0]         x += 1  # Strip spaces\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0]     # Disallow a sign here\n[sagelib-9.7.beta0]     if x[0] == '-' or x[0] == '+':\n[sagelib-9.7.beta0]               ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/rings/integer.pyx:7102:15: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0]     while x[0] == c' ':\n[sagelib-9.7.beta0]         x += 1  # Strip spaces\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0]     # Disallow a sign here\n[sagelib-9.7.beta0]     if x[0] == '-' or x[0] == '+':\n[sagelib-9.7.beta0]                              ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/rings/integer.pyx:7102:30: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] Traceback (most recent call last):\n[sagelib-9.7.beta0]   File \"/Users/kwankyu/GitHub/sage-dev/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/Cython/Build/Dependencies.py\", line 1274, in cythonize_one_helper\n[sagelib-9.7.beta0]     return cythonize_one(*m)\n[sagelib-9.7.beta0]   File \"/Users/kwankyu/GitHub/sage-dev/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/Cython/Build/Dependencies.py\", line 1250, in cythonize_one\n[sagelib-9.7.beta0]     raise CompileError(None, pyx_file)\n[sagelib-9.7.beta0] Cython.Compiler.Errors.CompileError: sage/rings/real_mpfi.pyx\n[sagelib-9.7.beta0] [  4/531] Cythonizing sage/symbolic/expression.pyx\n[sagelib-9.7.beta0] Traceback (most recent call last):\n[sagelib-9.7.beta0]   File \"/Users/kwankyu/GitHub/sage-dev/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/Cython/Build/Dependencies.py\", line 1274, in cythonize_one_helper\n[sagelib-9.7.beta0]     return cythonize_one(*m)\n[sagelib-9.7.beta0]   File \"/Users/kwankyu/GitHub/sage-dev/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/Cython/Build/Dependencies.py\", line 1250, in cythonize_one\n[sagelib-9.7.beta0]     raise CompileError(None, pyx_file)\n[sagelib-9.7.beta0] Cython.Compiler.Errors.CompileError: sage/rings/integer.pyx\n[sagelib-9.7.beta0] [  5/531] Cythonizing sage/arith/functions.pyx\n[sagelib-9.7.beta0] [  6/531] Cythonizing sage/arith/power.pyx\n[sagelib-9.7.beta0] [  7/531] Cythonizing sage/arith/rational_reconstruction.pyx\n[sagelib-9.7.beta0] [  8/531] Cythonizing sage/arith/srange.pyx\n[sagelib-9.7.beta0] [  9/531] Cythonizing sage/calculus/integration.pyx\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             2^5\n[sagelib-9.7.beta0]             sage: hold.__exit__()\n[sagelib-9.7.beta0]             sage: SR(2)^5\n[sagelib-9.7.beta0]             32\n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         g_set_state('hold', True)\n[sagelib-9.7.beta0]                    ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/symbolic/expression.pyx:14075:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] Error compiling Cython file:\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] ...\n[sagelib-9.7.beta0]             2^5\n[sagelib-9.7.beta0]             sage: hold.__exit__()\n[sagelib-9.7.beta0]             sage: SR(2)^5\n[sagelib-9.7.beta0]             32\n[sagelib-9.7.beta0]         \"\"\"\n[sagelib-9.7.beta0]         g_set_state('hold', False)\n[sagelib-9.7.beta0]                    ^\n[sagelib-9.7.beta0] ------------------------------------------------------------\n[sagelib-9.7.beta0] \n[sagelib-9.7.beta0] sage/symbolic/expression.pyx:14088:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).\n[sagelib-9.7.beta0] Traceback (most recent call last):\n[sagelib-9.7.beta0]   File \"/Users/kwankyu/GitHub/sage-dev/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/Cython/Build/Dependencies.py\", line 1274, in cythonize_one_helper\n[sagelib-9.7.beta0]     return cythonize_one(*m)\n[sagelib-9.7.beta0]   File \"/Users/kwankyu/GitHub/sage-dev/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/Cython/Build/Dependencies.py\", line 1250, in cythonize_one\n[sagelib-9.7.beta0]     raise CompileError(None, pyx_file)\n[sagelib-9.7.beta0] Cython.Compiler.Errors.CompileError: sage/symbolic/expression.pyx\n```",
    "created_at": "2022-05-25T08:13:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541784",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:35" align="right">comment:35</div>

Actually there are many more errors like that. How about on your platform? 

```python
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             [a 0]
[sagelib-9.7.beta0]             [0 a]
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         cdef int token
[sagelib-9.7.beta0]         all = []
[sagelib-9.7.beta0]         if tokens.next() == '(':
[sagelib-9.7.beta0]                            ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:612:28: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             [0 a]
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         cdef int token
[sagelib-9.7.beta0]         all = []
[sagelib-9.7.beta0]         if tokens.next() == '(':
[sagelib-9.7.beta0]             token = ','
[sagelib-9.7.beta0]                    ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:613:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         cdef int token
[sagelib-9.7.beta0]         all = []
[sagelib-9.7.beta0]         if tokens.next() == '(':
[sagelib-9.7.beta0]             token = ','
[sagelib-9.7.beta0]             while token == ',':
[sagelib-9.7.beta0]                           ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:614:27: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             token = ','
[sagelib-9.7.beta0]             while token == ',':
[sagelib-9.7.beta0]                 all.append(self.p_list(tokens))
[sagelib-9.7.beta0]                 token = tokens.next()
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0]             if token == ')':
[sagelib-9.7.beta0]                        ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:618:24: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             [[3, 0]]
[sagelib-9.7.beta0]             sage: p.p_sequence(Tokenizer("(1,2,3) , [1+a, 2+b, (3+c), (4+d,)]"))
[sagelib-9.7.beta0]             [(1, 2, 3), [a + 1, b + 2, c + 3, (d + 4,)]]
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         all = []
[sagelib-9.7.beta0]         cdef int token = ','
[sagelib-9.7.beta0]                         ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:640:25: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             sage: p.p_sequence(Tokenizer("(1,2,3) , [1+a, 2+b, (3+c), (4+d,)]"))
[sagelib-9.7.beta0]             [(1, 2, 3), [a + 1, b + 2, c + 3, (d + 4,)]]
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         all = []
[sagelib-9.7.beta0]         cdef int token = ','
[sagelib-9.7.beta0]         while token == ',':
[sagelib-9.7.beta0]                       ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:641:23: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]                 if tokens.peek() == c',':
[sagelib-9.7.beta0]                     obj = self.integer_constructor(tokens.last_token_string())
[sagelib-9.7.beta0]                 else:
[sagelib-9.7.beta0]                     tokens.backtrack()
[sagelib-9.7.beta0]                     obj = self.p_eqn(tokens)
[sagelib-9.7.beta0]             elif token == '[':
[sagelib-9.7.beta0]                          ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:654:26: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]                 else:
[sagelib-9.7.beta0]                     tokens.backtrack()
[sagelib-9.7.beta0]                     obj = self.p_eqn(tokens)
[sagelib-9.7.beta0]             elif token == '[':
[sagelib-9.7.beta0]                 obj = self.p_list(tokens)
[sagelib-9.7.beta0]             elif token == '(':
[sagelib-9.7.beta0]                          ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:656:26: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]                 obj = self.p_list(tokens)
[sagelib-9.7.beta0]             elif token == '(':
[sagelib-9.7.beta0]                 obj = self.p_tuple(tokens)
[sagelib-9.7.beta0]             elif token == EOS:
[sagelib-9.7.beta0]                 return all
[sagelib-9.7.beta0]             elif token == ']' or token == ')':
[sagelib-9.7.beta0]                          ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:660:26: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]                 obj = self.p_list(tokens)
[sagelib-9.7.beta0]             elif token == '(':
[sagelib-9.7.beta0]                 obj = self.p_tuple(tokens)
[sagelib-9.7.beta0]             elif token == EOS:
[sagelib-9.7.beta0]                 return all
[sagelib-9.7.beta0]             elif token == ']' or token == ')':
[sagelib-9.7.beta0]                                          ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:660:42: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             elif token == '(':
[sagelib-9.7.beta0]                 obj = self.p_tuple(tokens)
[sagelib-9.7.beta0]             elif token == EOS:
[sagelib-9.7.beta0]                 return all
[sagelib-9.7.beta0]             elif token == ']' or token == ')':
[sagelib-9.7.beta0]                 tokens.token = ','
[sagelib-9.7.beta0]                               ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:661:31: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             [3, 1000.0]
[sagelib-9.7.beta0]             sage: p.p_list(Tokenizer("[]"))
[sagelib-9.7.beta0]             []
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         cdef int token = tokens.next()
[sagelib-9.7.beta0]         if token != '[':
[sagelib-9.7.beta0]                    ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:685:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         cdef int token = tokens.next()
[sagelib-9.7.beta0]         if token != '[':
[sagelib-9.7.beta0]             self.parse_error(tokens, "Malformed list")
[sagelib-9.7.beta0]         all = self.p_sequence(tokens)
[sagelib-9.7.beta0]         token = tokens.next()
[sagelib-9.7.beta0]         if token != ']':
[sagelib-9.7.beta0]                    ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:689:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             ((), 1, (1,), (1, 2), (1, 2, 3), 9)
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         cdef int start = tokens.pos
[sagelib-9.7.beta0]         cdef int token = tokens.next()
[sagelib-9.7.beta0]         cdef bint real_tuple = True
[sagelib-9.7.beta0]         if token != '(':
[sagelib-9.7.beta0]                    ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:707:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         all = self.p_sequence(tokens)
[sagelib-9.7.beta0]         if len(all) == 1:
[sagelib-9.7.beta0]             if tokens.last() != c',':
[sagelib-9.7.beta0]                 real_tuple = False
[sagelib-9.7.beta0]         token = tokens.next()
[sagelib-9.7.beta0]         if token != ')':
[sagelib-9.7.beta0]                    ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:714:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             self.parse_error(tokens, "Malformed tuple")
[sagelib-9.7.beta0]         if real_tuple:
[sagelib-9.7.beta0]             return tuple(all)
[sagelib-9.7.beta0]         else:
[sagelib-9.7.beta0]             token = tokens.peek()
[sagelib-9.7.beta0]             if token == ',' or token == EOS:
[sagelib-9.7.beta0]                        ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:720:24: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             sage: p.p_eqn(Tokenizer("a != b"))
[sagelib-9.7.beta0]             a != b
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         lhs = self.p_expr(tokens)
[sagelib-9.7.beta0]         cdef int op = tokens.next()
[sagelib-9.7.beta0]         if op == '=':
[sagelib-9.7.beta0]                 ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:756:17: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         cdef int op = tokens.next()
[sagelib-9.7.beta0]         if op == '=':
[sagelib-9.7.beta0]             return lhs == self.p_expr(tokens)
[sagelib-9.7.beta0]         elif op == NOT_EQ:
[sagelib-9.7.beta0]             return lhs != self.p_expr(tokens)
[sagelib-9.7.beta0]         elif op == '<':
[sagelib-9.7.beta0]                   ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:760:19: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             return lhs != self.p_expr(tokens)
[sagelib-9.7.beta0]         elif op == '<':
[sagelib-9.7.beta0]             return lhs < self.p_expr(tokens)
[sagelib-9.7.beta0]         elif op == LESS_EQ:
[sagelib-9.7.beta0]             return lhs <= self.p_expr(tokens)
[sagelib-9.7.beta0]         elif op == '>':
[sagelib-9.7.beta0]                   ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:764:19: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         # Note: this is left-recursive, so we can't just recurse
[sagelib-9.7.beta0]         cdef int op
[sagelib-9.7.beta0]         operand1 = self.p_term(tokens)
[sagelib-9.7.beta0]         op = tokens.next()
[sagelib-9.7.beta0]         while op == '+' or op == '-':
[sagelib-9.7.beta0]                    ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:796:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         # Note: this is left-recursive, so we can't just recurse
[sagelib-9.7.beta0]         cdef int op
[sagelib-9.7.beta0]         operand1 = self.p_term(tokens)
[sagelib-9.7.beta0]         op = tokens.next()
[sagelib-9.7.beta0]         while op == '+' or op == '-':
[sagelib-9.7.beta0]                                 ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:796:33: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         cdef int op
[sagelib-9.7.beta0]         operand1 = self.p_term(tokens)
[sagelib-9.7.beta0]         op = tokens.next()
[sagelib-9.7.beta0]         while op == '+' or op == '-':
[sagelib-9.7.beta0]             operand2 = self.p_term(tokens)
[sagelib-9.7.beta0]             if op == '+':
[sagelib-9.7.beta0]                     ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:798:21: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         # Note: this is left-recursive, so we can't just recurse
[sagelib-9.7.beta0]         cdef int op
[sagelib-9.7.beta0]         operand1 = self.p_factor(tokens)
[sagelib-9.7.beta0]         op = tokens.next()
[sagelib-9.7.beta0]         if op == NAME and self.implicit_multiplication:
[sagelib-9.7.beta0]             op = '*'
[sagelib-9.7.beta0]                 ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:831:17: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         operand1 = self.p_factor(tokens)
[sagelib-9.7.beta0]         op = tokens.next()
[sagelib-9.7.beta0]         if op == NAME and self.implicit_multiplication:
[sagelib-9.7.beta0]             op = '*'
[sagelib-9.7.beta0]             tokens.backtrack()
[sagelib-9.7.beta0]         while op == '*' or op == '/':
[sagelib-9.7.beta0]                    ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:833:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         operand1 = self.p_factor(tokens)
[sagelib-9.7.beta0]         op = tokens.next()
[sagelib-9.7.beta0]         if op == NAME and self.implicit_multiplication:
[sagelib-9.7.beta0]             op = '*'
[sagelib-9.7.beta0]             tokens.backtrack()
[sagelib-9.7.beta0]         while op == '*' or op == '/':
[sagelib-9.7.beta0]                                 ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:833:33: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         if op == NAME and self.implicit_multiplication:
[sagelib-9.7.beta0]             op = '*'
[sagelib-9.7.beta0]             tokens.backtrack()
[sagelib-9.7.beta0]         while op == '*' or op == '/':
[sagelib-9.7.beta0]             operand2 = self.p_factor(tokens)
[sagelib-9.7.beta0]             if op == '*':
[sagelib-9.7.beta0]                     ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:835:21: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]                 operand1 = operand1 * operand2
[sagelib-9.7.beta0]             else:
[sagelib-9.7.beta0]                 operand1 = operand1 / operand2
[sagelib-9.7.beta0]             op = tokens.next()
[sagelib-9.7.beta0]             if op == NAME and self.implicit_multiplication:
[sagelib-9.7.beta0]                 op = '*'
[sagelib-9.7.beta0]                     ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:841:21: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             -t^2
[sagelib-9.7.beta0]             sage: p.p_factor(Tokenizer("t^11 * x"))
[sagelib-9.7.beta0]             t^11
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         cdef int token = tokens.next()
[sagelib-9.7.beta0]         if token == '+':
[sagelib-9.7.beta0]                    ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:865:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             t^11
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         cdef int token = tokens.next()
[sagelib-9.7.beta0]         if token == '+':
[sagelib-9.7.beta0]             return self.p_factor(tokens)
[sagelib-9.7.beta0]         elif token == '-':
[sagelib-9.7.beta0]                      ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:867:22: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             factorial(x)^2
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         operand1 = self.p_atom(tokens)
[sagelib-9.7.beta0]         cdef int token = tokens.next()
[sagelib-9.7.beta0]         if token == '^':
[sagelib-9.7.beta0]                    ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:901:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         operand1 = self.p_atom(tokens)
[sagelib-9.7.beta0]         cdef int token = tokens.next()
[sagelib-9.7.beta0]         if token == '^':
[sagelib-9.7.beta0]             operand2 = self.p_factor(tokens)
[sagelib-9.7.beta0]             return operand1 ** operand2
[sagelib-9.7.beta0]         elif token == "!":
[sagelib-9.7.beta0]                      ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:904:22: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             operand2 = self.p_factor(tokens)
[sagelib-9.7.beta0]             return operand1 ** operand2
[sagelib-9.7.beta0]         elif token == "!":
[sagelib-9.7.beta0]             from sage.functions.all import factorial
[sagelib-9.7.beta0]             operand1 = factorial(operand1)
[sagelib-9.7.beta0]             if tokens.peek() == '^':
[sagelib-9.7.beta0]                                ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:907:32: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         elif token == FLOAT:
[sagelib-9.7.beta0]             return self.float_constructor(tokens.last_token_string())
[sagelib-9.7.beta0]         elif token == NAME:
[sagelib-9.7.beta0]             name = tokens.last_token_string()
[sagelib-9.7.beta0]             token = tokens.next()
[sagelib-9.7.beta0]             if token == '(':
[sagelib-9.7.beta0]                        ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:952:24: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             token = tokens.next()
[sagelib-9.7.beta0]             if token == '(':
[sagelib-9.7.beta0]                 func = self.callable_constructor(name)
[sagelib-9.7.beta0]                 args, kwds = self.p_args(tokens)
[sagelib-9.7.beta0]                 token = tokens.next()
[sagelib-9.7.beta0]                 if token != ')':
[sagelib-9.7.beta0]                            ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:956:28: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]                     self.parse_error(tokens, "Bad function call")
[sagelib-9.7.beta0]                 return func(*args, **kwds)
[sagelib-9.7.beta0]             else:
[sagelib-9.7.beta0]                 tokens.backtrack()
[sagelib-9.7.beta0]                 return self.variable_constructor(name)
[sagelib-9.7.beta0]         elif token == '(':
[sagelib-9.7.beta0]                      ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:962:22: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]                 tokens.backtrack()
[sagelib-9.7.beta0]                 return self.variable_constructor(name)
[sagelib-9.7.beta0]         elif token == '(':
[sagelib-9.7.beta0]             expr = self.p_expr(tokens)
[sagelib-9.7.beta0]             token = tokens.next()
[sagelib-9.7.beta0]             if token != ')':
[sagelib-9.7.beta0]                        ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:965:24: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             sage: p.p_args(Tokenizer("1, 2, a = 1+5^2"))
[sagelib-9.7.beta0]             ([1, 2], {'a': 26})
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         args = []
[sagelib-9.7.beta0]         kwds = {}
[sagelib-9.7.beta0]         if tokens.peek() == ')':
[sagelib-9.7.beta0]                            ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:987:28: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         args = []
[sagelib-9.7.beta0]         kwds = {}
[sagelib-9.7.beta0]         if tokens.peek() == ')':
[sagelib-9.7.beta0]             return args, kwds
[sagelib-9.7.beta0]         cdef int token = ','
[sagelib-9.7.beta0]                         ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:989:25: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         args = []
[sagelib-9.7.beta0]         kwds = {}
[sagelib-9.7.beta0]         if tokens.peek() == ')':
[sagelib-9.7.beta0]             return args, kwds
[sagelib-9.7.beta0]         cdef int token = ','
[sagelib-9.7.beta0]         while token == ',':
[sagelib-9.7.beta0]                       ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:990:23: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             sage: p.p_arg(Tokenizer("[x]"))
[sagelib-9.7.beta0]             [x]
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         cdef int token = tokens.next()
[sagelib-9.7.beta0]         if token == NAME and tokens.peek() == '=':
[sagelib-9.7.beta0]                                              ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:1032:46: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         cdef int token = tokens.next()
[sagelib-9.7.beta0]         if token == NAME and tokens.peek() == '=':
[sagelib-9.7.beta0]             name = tokens.last_token_string()
[sagelib-9.7.beta0]             tokens.next()
[sagelib-9.7.beta0]             return name, self.p_expr(tokens)
[sagelib-9.7.beta0]         if token == "[" :
[sagelib-9.7.beta0]                    ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/misc/parser.pyx:1036:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] Traceback (most recent call last):
[sagelib-9.7.beta0]   File "/Users/kwankyu/GitHub/sage-dev/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/Cython/Build/Dependencies.py", line 1274, in cythonize_one_helper
[sagelib-9.7.beta0]     return cythonize_one(*m)
[sagelib-9.7.beta0]   File "/Users/kwankyu/GitHub/sage-dev/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/Cython/Build/Dependencies.py", line 1250, in cythonize_one
[sagelib-9.7.beta0]     raise CompileError(None, pyx_file)
[sagelib-9.7.beta0] Cython.Compiler.Errors.CompileError: sage/misc/parser.pyx
[sagelib-9.7.beta0] [  3/531] Cythonizing sage/rings/real_mpfi.pyx
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         # the right of the last mantissa digit (that is, so the number
[sagelib-9.7.beta0]         # is mantissa*base^exponent, if you interpret mantissa as an integer).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0]         cdef long digits
[sagelib-9.7.beta0]         digits = strlen(lower_s)
[sagelib-9.7.beta0]         if lower_s[0] == '-':
[sagelib-9.7.beta0]                         ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/rings/real_mpfi.pyx:1946:25: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         if lower_s[0] == '-':
[sagelib-9.7.beta0]             digits -= 1
[sagelib-9.7.beta0]         lower_expo -= digits
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0]         digits = strlen(upper_s)
[sagelib-9.7.beta0]         if upper_s[0] == '-':
[sagelib-9.7.beta0]                         ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/rings/real_mpfi.pyx:1951:25: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]         tmp_cstr = <char *>PyMem_Malloc(mpz_sizeinbase(lower_mpz, base) + 2)
[sagelib-9.7.beta0]         if tmp_cstr == NULL:
[sagelib-9.7.beta0]             raise MemoryError("Unable to allocate memory for the mantissa of an interval")
[sagelib-9.7.beta0]         mpz_get_str(tmp_cstr, base, lower_mpz)
[sagelib-9.7.beta0]         digits = strlen(tmp_cstr)
[sagelib-9.7.beta0]         if tmp_cstr[0] == '-':
[sagelib-9.7.beta0]                          ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/rings/real_mpfi.pyx:2120:26: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0]     while x[0] == c' ':
[sagelib-9.7.beta0]         x += 1  # Strip spaces
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0]     # Disallow a sign here
[sagelib-9.7.beta0]     if x[0] == '-' or x[0] == '+':
[sagelib-9.7.beta0]               ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/rings/integer.pyx:7102:15: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0]     while x[0] == c' ':
[sagelib-9.7.beta0]         x += 1  # Strip spaces
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0]     # Disallow a sign here
[sagelib-9.7.beta0]     if x[0] == '-' or x[0] == '+':
[sagelib-9.7.beta0]                              ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/rings/integer.pyx:7102:30: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] Traceback (most recent call last):
[sagelib-9.7.beta0]   File "/Users/kwankyu/GitHub/sage-dev/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/Cython/Build/Dependencies.py", line 1274, in cythonize_one_helper
[sagelib-9.7.beta0]     return cythonize_one(*m)
[sagelib-9.7.beta0]   File "/Users/kwankyu/GitHub/sage-dev/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/Cython/Build/Dependencies.py", line 1250, in cythonize_one
[sagelib-9.7.beta0]     raise CompileError(None, pyx_file)
[sagelib-9.7.beta0] Cython.Compiler.Errors.CompileError: sage/rings/real_mpfi.pyx
[sagelib-9.7.beta0] [  4/531] Cythonizing sage/symbolic/expression.pyx
[sagelib-9.7.beta0] Traceback (most recent call last):
[sagelib-9.7.beta0]   File "/Users/kwankyu/GitHub/sage-dev/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/Cython/Build/Dependencies.py", line 1274, in cythonize_one_helper
[sagelib-9.7.beta0]     return cythonize_one(*m)
[sagelib-9.7.beta0]   File "/Users/kwankyu/GitHub/sage-dev/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/Cython/Build/Dependencies.py", line 1250, in cythonize_one
[sagelib-9.7.beta0]     raise CompileError(None, pyx_file)
[sagelib-9.7.beta0] Cython.Compiler.Errors.CompileError: sage/rings/integer.pyx
[sagelib-9.7.beta0] [  5/531] Cythonizing sage/arith/functions.pyx
[sagelib-9.7.beta0] [  6/531] Cythonizing sage/arith/power.pyx
[sagelib-9.7.beta0] [  7/531] Cythonizing sage/arith/rational_reconstruction.pyx
[sagelib-9.7.beta0] [  8/531] Cythonizing sage/arith/srange.pyx
[sagelib-9.7.beta0] [  9/531] Cythonizing sage/calculus/integration.pyx
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             2^5
[sagelib-9.7.beta0]             sage: hold.__exit__()
[sagelib-9.7.beta0]             sage: SR(2)^5
[sagelib-9.7.beta0]             32
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         g_set_state('hold', True)
[sagelib-9.7.beta0]                    ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/symbolic/expression.pyx:14075:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] Error compiling Cython file:
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] ...
[sagelib-9.7.beta0]             2^5
[sagelib-9.7.beta0]             sage: hold.__exit__()
[sagelib-9.7.beta0]             sage: SR(2)^5
[sagelib-9.7.beta0]             32
[sagelib-9.7.beta0]         """
[sagelib-9.7.beta0]         g_set_state('hold', False)
[sagelib-9.7.beta0]                    ^
[sagelib-9.7.beta0] ------------------------------------------------------------
[sagelib-9.7.beta0] 
[sagelib-9.7.beta0] sage/symbolic/expression.pyx:14088:20: Unicode literals do not support coercion to C types other than Py_UNICODE/Py_UCS4 (for characters) or Py_UNICODE* (for strings).
[sagelib-9.7.beta0] Traceback (most recent call last):
[sagelib-9.7.beta0]   File "/Users/kwankyu/GitHub/sage-dev/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/Cython/Build/Dependencies.py", line 1274, in cythonize_one_helper
[sagelib-9.7.beta0]     return cythonize_one(*m)
[sagelib-9.7.beta0]   File "/Users/kwankyu/GitHub/sage-dev/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/Cython/Build/Dependencies.py", line 1250, in cythonize_one
[sagelib-9.7.beta0]     raise CompileError(None, pyx_file)
[sagelib-9.7.beta0] Cython.Compiler.Errors.CompileError: sage/symbolic/expression.pyx
```



---

archive/issue_comments_541785.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nAs I said before, I do not see any of these errors on my platform. So it would be much better if someone that does see these errors would take the lead here.",
    "created_at": "2022-05-25T14:12:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541785",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:36" align="right">comment:36</div>

As I said before, I do not see any of these errors on my platform. So it would be much better if someone that does see these errors would take the lead here.



---

archive/issue_comments_541786.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@fchapoton](#comment%3A36):\n> As I said before, I do not see any of these errors on my platform. So it would be much better if someone that does see these errors would take the lead here.\n\nFirst it should be confirmed that whether these errors depend on platforms. If you don't do clean build, you won't see these errors. Did you do clean build, that is, from scratch? Or do we have different Cython and Python? I have cython-0.29.28 and python-3.9.12.",
    "created_at": "2022-05-26T00:14:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541786",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@fchapoton](#comment%3A36):
> As I said before, I do not see any of these errors on my platform. So it would be much better if someone that does see these errors would take the lead here.

First it should be confirmed that whether these errors depend on platforms. If you don't do clean build, you won't see these errors. Did you do clean build, that is, from scratch? Or do we have different Cython and Python? I have cython-0.29.28 and python-3.9.12.



---

archive/issue_comments_541787.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReference: https://cython.readthedocs.io/en/latest/src/tutorial/strings.html",
    "created_at": "2022-05-26T00:18:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541787",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:38" align="right">comment:38</div>

Reference: https://cython.readthedocs.io/en/latest/src/tutorial/strings.html



---

archive/issue_comments_541788.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18f2746ad0bad21d300dc366a3cabc0505d58eae\"><code>18f2746</code></a></td><td><code>more fixes</code></td></tr></table>\n",
    "created_at": "2022-05-26T07:43:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541788",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18f2746ad0bad21d300dc366a3cabc0505d58eae"><code>18f2746</code></a></td><td><code>more fixes</code></td></tr></table>




---

archive/issue_comments_541789.json:
```json
{
    "body": "Changed commit from **[`d6fa671`](https://github.com/sagemath/sagetrac-mirror/commit/d6fa671361dfa97e0013bf116bf00e675c7a264a)** to **[`18f2746`](https://github.com/sagemath/sagetrac-mirror/commit/18f2746ad0bad21d300dc366a3cabc0505d58eae)**",
    "created_at": "2022-05-26T07:43:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541789",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d6fa671`](https://github.com/sagemath/sagetrac-mirror/commit/d6fa671361dfa97e0013bf116bf00e675c7a264a)** to **[`18f2746`](https://github.com/sagemath/sagetrac-mirror/commit/18f2746ad0bad21d300dc366a3cabc0505d58eae)**



---

archive/issue_comments_541790.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8f7801c150e4063b96596db9da7736f1cfaea50\"><code>f8f7801</code></a></td><td><code>more fixes in parser</code></td></tr></table>\n",
    "created_at": "2022-05-26T08:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541790",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8f7801c150e4063b96596db9da7736f1cfaea50"><code>f8f7801</code></a></td><td><code>more fixes in parser</code></td></tr></table>




---

archive/issue_comments_541791.json:
```json
{
    "body": "Changed commit from **[`18f2746`](https://github.com/sagemath/sagetrac-mirror/commit/18f2746ad0bad21d300dc366a3cabc0505d58eae)** to **[`f8f7801`](https://github.com/sagemath/sagetrac-mirror/commit/f8f7801c150e4063b96596db9da7736f1cfaea50)**",
    "created_at": "2022-05-26T08:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541791",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`18f2746`](https://github.com/sagemath/sagetrac-mirror/commit/18f2746ad0bad21d300dc366a3cabc0505d58eae)** to **[`f8f7801`](https://github.com/sagemath/sagetrac-mirror/commit/f8f7801c150e4063b96596db9da7736f1cfaea50)**



---

archive/issue_comments_541792.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db72519520573f68bb74c5317abe0c5fae15f1cd\"><code>db72519</code></a></td><td><code>more fixes</code></td></tr></table>\n",
    "created_at": "2022-05-26T08:01:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541792",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db72519520573f68bb74c5317abe0c5fae15f1cd"><code>db72519</code></a></td><td><code>more fixes</code></td></tr></table>




---

archive/issue_comments_541793.json:
```json
{
    "body": "Changed commit from **[`f8f7801`](https://github.com/sagemath/sagetrac-mirror/commit/f8f7801c150e4063b96596db9da7736f1cfaea50)** to **[`db72519`](https://github.com/sagemath/sagetrac-mirror/commit/db72519520573f68bb74c5317abe0c5fae15f1cd)**",
    "created_at": "2022-05-26T08:01:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541793",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f8f7801`](https://github.com/sagemath/sagetrac-mirror/commit/f8f7801c150e4063b96596db9da7736f1cfaea50)** to **[`db72519`](https://github.com/sagemath/sagetrac-mirror/commit/db72519520573f68bb74c5317abe0c5fae15f1cd)**



---

archive/issue_comments_541794.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b277f2cf8519df7aafb85f3c1e07e9015c593767\"><code>b277f2c</code></a></td><td><code>one more fix</code></td></tr></table>\n",
    "created_at": "2022-05-26T08:24:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541794",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b277f2cf8519df7aafb85f3c1e07e9015c593767"><code>b277f2c</code></a></td><td><code>one more fix</code></td></tr></table>




---

archive/issue_comments_541795.json:
```json
{
    "body": "Changed commit from **[`db72519`](https://github.com/sagemath/sagetrac-mirror/commit/db72519520573f68bb74c5317abe0c5fae15f1cd)** to **[`b277f2c`](https://github.com/sagemath/sagetrac-mirror/commit/b277f2cf8519df7aafb85f3c1e07e9015c593767)**",
    "created_at": "2022-05-26T08:24:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541795",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`db72519`](https://github.com/sagemath/sagetrac-mirror/commit/db72519520573f68bb74c5317abe0c5fae15f1cd)** to **[`b277f2c`](https://github.com/sagemath/sagetrac-mirror/commit/b277f2cf8519df7aafb85f3c1e07e9015c593767)**



---

archive/issue_comments_541796.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nThanks for the suggestion\n\nI managed to reproduce the failures by building from a fresh clone, and fixed them all.",
    "created_at": "2022-05-26T08:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541796",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:43" align="right">comment:43</div>

Thanks for the suggestion

I managed to reproduce the failures by building from a fresh clone, and fixed them all.



---

archive/issue_comments_541797.json:
```json
{
    "body": "Changed commit from **[`b277f2c`](https://github.com/sagemath/sagetrac-mirror/commit/b277f2cf8519df7aafb85f3c1e07e9015c593767)** to **[`a811c67`](https://github.com/sagemath/sagetrac-mirror/commit/a811c675125f67273a8cc00183de9ec5c660aaf5)**",
    "created_at": "2022-05-26T11:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541797",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b277f2c`](https://github.com/sagemath/sagetrac-mirror/commit/b277f2cf8519df7aafb85f3c1e07e9015c593767)** to **[`a811c67`](https://github.com/sagemath/sagetrac-mirror/commit/a811c675125f67273a8cc00183de9ec5c660aaf5)**



---

archive/issue_comments_541798.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a811c675125f67273a8cc00183de9ec5c660aaf5\"><code>a811c67</code></a></td><td><code>tiny detail</code></td></tr></table>\n",
    "created_at": "2022-05-26T11:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541798",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a811c675125f67273a8cc00183de9ec5c660aaf5"><code>a811c67</code></a></td><td><code>tiny detail</code></td></tr></table>




---

archive/issue_comments_541799.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nIt builds fine now, but I get these doctest failures:\n\n```\n(1) sage -t --warn-long 63.9 --random-seed=104722903086769796139384953865663677017 src/sage/misc/sagedoc.py  # 2 doctests failed\n(2) sage -t --warn-long 63.9 --random-seed=104722903086769796139384953865663677017 src/sage/stats/distributions/discrete_gaussian_integer.pyx  # 5 doctests failed\n(3) sage -t --warn-long 63.9 --random-seed=104722903086769796139384953865663677017 src/sage/game_theory/normal_form_game.py  # 2 doctests failed\n(4) sage -t --warn-long 63.9 --random-seed=104722903086769796139384953865663677017 src/sage/crypto/lwe.py  # 5 doctests failed\n(5) sage -t --warn-long 63.9 --random-seed=104722903086769796139384953865663677017 src/sage/game_theory/catalog_normal_form_games.py  # 15 doctests failed\n(6) sage -t --warn-long 63.9 --random-seed=104722903086769796139384953865663677017 src/sage/combinat/words/word_datatypes.pyx  # 1 doctest failed\n```\n\n(1), (2), (4), (6) seem related with this ticket.",
    "created_at": "2022-05-26T13:16:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541799",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:45" align="right">comment:45</div>

It builds fine now, but I get these doctest failures:

```
(1) sage -t --warn-long 63.9 --random-seed=104722903086769796139384953865663677017 src/sage/misc/sagedoc.py  # 2 doctests failed
(2) sage -t --warn-long 63.9 --random-seed=104722903086769796139384953865663677017 src/sage/stats/distributions/discrete_gaussian_integer.pyx  # 5 doctests failed
(3) sage -t --warn-long 63.9 --random-seed=104722903086769796139384953865663677017 src/sage/game_theory/normal_form_game.py  # 2 doctests failed
(4) sage -t --warn-long 63.9 --random-seed=104722903086769796139384953865663677017 src/sage/crypto/lwe.py  # 5 doctests failed
(5) sage -t --warn-long 63.9 --random-seed=104722903086769796139384953865663677017 src/sage/game_theory/catalog_normal_form_games.py  # 15 doctests failed
(6) sage -t --warn-long 63.9 --random-seed=104722903086769796139384953865663677017 src/sage/combinat/words/word_datatypes.pyx  # 1 doctest failed
```

(1), (2), (4), (6) seem related with this ticket.



---

archive/issue_comments_541800.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\n\n```\n(1) src/sage/misc/sagedoc.py  # 2 doctests failed\n(2) src/sage/stats/distributions/discrete_gaussian_integer.pyx  # 5 doctests failed\n(4) src/sage/crypto/lwe.py  # 5 doctests failed\n(6) src/sage/combinat/words/word_datatypes.pyx  # 1 doctest failed\n```\n\nIndeed, (3) and (5) pass for me. Let us forget about them.\n\nFor (2) and (4), maybe we could just change the doctests.\n\nFor (1), I suspect that we are going to meet large-scale problem with the doc.\n\nFor (6), I have no clue.",
    "created_at": "2022-05-26T14:03:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541800",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:46" align="right">comment:46</div>


```
(1) src/sage/misc/sagedoc.py  # 2 doctests failed
(2) src/sage/stats/distributions/discrete_gaussian_integer.pyx  # 5 doctests failed
(4) src/sage/crypto/lwe.py  # 5 doctests failed
(6) src/sage/combinat/words/word_datatypes.pyx  # 1 doctest failed
```

Indeed, (3) and (5) pass for me. Let us forget about them.

For (2) and (4), maybe we could just change the doctests.

For (1), I suspect that we are going to meet large-scale problem with the doc.

For (6), I have no clue.



---

archive/issue_comments_541801.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21447e79b98eebce708f62016c4806374da7063d\"><code>21447e7</code></a></td><td><code>fix the split of words</code></td></tr></table>\n",
    "created_at": "2022-05-26T14:53:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541801",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21447e79b98eebce708f62016c4806374da7063d"><code>21447e7</code></a></td><td><code>fix the split of words</code></td></tr></table>




---

archive/issue_comments_541802.json:
```json
{
    "body": "Changed commit from **[`a811c67`](https://github.com/sagemath/sagetrac-mirror/commit/a811c675125f67273a8cc00183de9ec5c660aaf5)** to **[`21447e7`](https://github.com/sagemath/sagetrac-mirror/commit/21447e79b98eebce708f62016c4806374da7063d)**",
    "created_at": "2022-05-26T14:53:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541802",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a811c67`](https://github.com/sagemath/sagetrac-mirror/commit/a811c675125f67273a8cc00183de9ec5c660aaf5)** to **[`21447e7`](https://github.com/sagemath/sagetrac-mirror/commit/21447e79b98eebce708f62016c4806374da7063d)**



---

archive/issue_comments_541803.json:
```json
{
    "body": "Changed commit from **[`21447e7`](https://github.com/sagemath/sagetrac-mirror/commit/21447e79b98eebce708f62016c4806374da7063d)** to **[`f797696`](https://github.com/sagemath/sagetrac-mirror/commit/f797696c7c829ed2518f1ca4ec696d13875c23a6)**",
    "created_at": "2022-05-26T15:27:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541803",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`21447e7`](https://github.com/sagemath/sagetrac-mirror/commit/21447e79b98eebce708f62016c4806374da7063d)** to **[`f797696`](https://github.com/sagemath/sagetrac-mirror/commit/f797696c7c829ed2518f1ca4ec696d13875c23a6)**



---

archive/issue_comments_541804.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f797696c7c829ed2518f1ca4ec696d13875c23a6\"><code>f797696</code></a></td><td><code>fixing doctests in crypto and stat</code></td></tr></table>\n",
    "created_at": "2022-05-26T15:27:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541804",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f797696c7c829ed2518f1ca4ec696d13875c23a6"><code>f797696</code></a></td><td><code>fixing doctests in crypto and stat</code></td></tr></table>




---

archive/issue_comments_541805.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nwe could also easily fix the remaining failing doctests in doc building, but I would prefer to understand why we get this shift by one space there.",
    "created_at": "2022-05-26T18:20:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541805",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:49" align="right">comment:49</div>

we could also easily fix the remaining failing doctests in doc building, but I would prefer to understand why we get this shift by one space there.



---

archive/issue_comments_541806.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nThe first shift is by\n\n```\nsage: identity_matrix(2).rook_vector.__doc__[20:60]\n\"elf, algorithm=u'ButeraPernici', complem\"\n```\nvs `\"elf, algorithm='ButeraPernici', compleme\"` (without ticket)\n\nI suspect that this insertion of `u` is a bug of Cython since Cython does not need to add `u` for (unicode) strings of Python3...",
    "created_at": "2022-05-27T03:50:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541806",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:50" align="right">comment:50</div>

The first shift is by

```
sage: identity_matrix(2).rook_vector.__doc__[20:60]
"elf, algorithm=u'ButeraPernici', complem"
```
vs `"elf, algorithm='ButeraPernici', compleme"` (without ticket)

I suspect that this insertion of `u` is a bug of Cython since Cython does not need to add `u` for (unicode) strings of Python3...



---

archive/issue_comments_541807.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nPerhaps we need to fix the doctests not to break even after the presumed bug of Cython would be fixed in future.",
    "created_at": "2022-05-27T03:55:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541807",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:51" align="right">comment:51</div>

Perhaps we need to fix the doctests not to break even after the presumed bug of Cython would be fixed in future.



---

archive/issue_comments_541808.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nwe can change the default to `algorithm=None` instead ?",
    "created_at": "2022-05-27T06:28:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541808",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:52" align="right">comment:52</div>

we can change the default to `algorithm=None` instead ?



---

archive/issue_comments_541809.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nGood idea. That would work.",
    "created_at": "2022-05-27T07:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541809",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:53" align="right">comment:53</div>

Good idea. That would work.



---

archive/issue_comments_541810.json:
```json
{
    "body": "Changed commit from **[`f797696`](https://github.com/sagemath/sagetrac-mirror/commit/f797696c7c829ed2518f1ca4ec696d13875c23a6)** to **[`4258c75`](https://github.com/sagemath/sagetrac-mirror/commit/4258c75e1ad74db534e2f5df67b0d905b6d1c5a3)**",
    "created_at": "2022-05-27T13:33:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541810",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f797696`](https://github.com/sagemath/sagetrac-mirror/commit/f797696c7c829ed2518f1ca4ec696d13875c23a6)** to **[`4258c75`](https://github.com/sagemath/sagetrac-mirror/commit/4258c75e1ad74db534e2f5df67b0d905b6d1c5a3)**



---

archive/issue_comments_541811.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d523bf6a1a5ba8a2dfe993e65e597c8d025cf2ff\"><code>d523bf6</code></a></td><td><code>Merge branch 'u/chapoton/33544' in 9.7.b1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4258c75e1ad74db534e2f5df67b0d905b6d1c5a3\"><code>4258c75</code></a></td><td><code>change default algo to None in matrix2</code></td></tr></table>\n",
    "created_at": "2022-05-27T13:33:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541811",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d523bf6a1a5ba8a2dfe993e65e597c8d025cf2ff"><code>d523bf6</code></a></td><td><code>Merge branch 'u/chapoton/33544' in 9.7.b1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4258c75e1ad74db534e2f5df67b0d905b6d1c5a3"><code>4258c75</code></a></td><td><code>change default algo to None in matrix2</code></td></tr></table>




---

archive/issue_comments_541812.json:
```json
{
    "body": "Changed commit from **[`4258c75`](https://github.com/sagemath/sagetrac-mirror/commit/4258c75e1ad74db534e2f5df67b0d905b6d1c5a3)** to **[`762e0b7`](https://github.com/sagemath/sagetrac-mirror/commit/762e0b75bdb7cc939a9d7b8223872abb3e00398e)**",
    "created_at": "2022-05-27T14:08:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541812",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4258c75`](https://github.com/sagemath/sagetrac-mirror/commit/4258c75e1ad74db534e2f5df67b0d905b6d1c5a3)** to **[`762e0b7`](https://github.com/sagemath/sagetrac-mirror/commit/762e0b75bdb7cc939a9d7b8223872abb3e00398e)**



---

archive/issue_comments_541813.json:
```json
{
    "body": "<div id=\"comment:55\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/762e0b75bdb7cc939a9d7b8223872abb3e00398e\"><code>762e0b7</code></a></td><td><code>use language_level=3 for cython</code></td></tr></table>\n",
    "created_at": "2022-05-27T14:08:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541813",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/762e0b75bdb7cc939a9d7b8223872abb3e00398e"><code>762e0b7</code></a></td><td><code>use language_level=3 for cython</code></td></tr></table>




---

archive/issue_comments_541814.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nI have fixed the doctests in sagedoc.py and squashed all the commits into one",
    "created_at": "2022-05-27T14:09:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541814",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:56" align="right">comment:56</div>

I have fixed the doctests in sagedoc.py and squashed all the commits into one



---

archive/issue_comments_541815.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nYour branch works perfect. Thank you.\n\nOne question. You used many code like `c'x'` to convert a character `x` to integer. Where is this convenient `c` prefix documented? I couldn't find in cython documentation...",
    "created_at": "2022-05-27T22:20:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541815",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:57" align="right">comment:57</div>

Your branch works perfect. Thank you.

One question. You used many code like `c'x'` to convert a character `x` to integer. Where is this convenient `c` prefix documented? I couldn't find in cython documentation...



---

archive/issue_comments_541816.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nno idea. it was already appearing in some places, so I just put it everywhere.",
    "created_at": "2022-05-28T05:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541816",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:58" align="right">comment:58</div>

no idea. it was already appearing in some places, so I just put it everywhere.



---

archive/issue_events_457314.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-05-28T07:21:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457314"
}
```



---

archive/issue_events_457315.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-05-28T07:21:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457315"
}
```



---

archive/issue_comments_541817.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@fchapoton](#comment%3A58):\n> no idea. it was already appearing in some places, so I just put it everywhere.\n\nInteresting. I could not find an official alternative to that. So let it be.",
    "created_at": "2022-05-28T07:21:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541817",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@fchapoton](#comment%3A58):
> no idea. it was already appearing in some places, so I just put it everywhere.

Interesting. I could not find an official alternative to that. So let it be.



---

archive/issue_comments_541818.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nThis ticket is a good-bye once more to Python 2!",
    "created_at": "2022-05-28T07:24:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541818",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:60" align="right">comment:60</div>

This ticket is a good-bye once more to Python 2!



---

archive/issue_events_457316.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-29T11:29:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457316"
}
```



---

archive/issue_events_457317.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a340bda6399cadbc16446e8e3be88d9664e548bb",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-05-29T11:29:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33544#event-457317"
}
```



---

archive/issue_comments_541819.json:
```json
{
    "body": "Changed branch from **[u/chapoton/33544](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/33544)** to **[`762e0b7`](https://github.com/sagemath/sagetrac-mirror/commit/762e0b75bdb7cc939a9d7b8223872abb3e00398e)**",
    "created_at": "2022-05-29T11:29:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541819",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/33544](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/33544)** to **[`762e0b7`](https://github.com/sagemath/sagetrac-mirror/commit/762e0b75bdb7cc939a9d7b8223872abb3e00398e)**



---

archive/issue_comments_541820.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nThe ticket description has\n\n> - change the language level from 2 to 3 in specific pyx files\n\nDoes this mean some files are left to do?",
    "created_at": "2022-06-24T17:37:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541820",
    "user": "https://github.com/slel"
}
```

<div id="comment:62" align="right">comment:62</div>

The ticket description has

> - change the language level from 2 to 3 in specific pyx files

Does this mean some files are left to do?



---

archive/issue_comments_541821.json:
```json
{
    "body": "Changed commit from **[`762e0b7`](https://github.com/sagemath/sagetrac-mirror/commit/762e0b75bdb7cc939a9d7b8223872abb3e00398e)** to none",
    "created_at": "2022-06-24T17:37:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541821",
    "user": "https://github.com/slel"
}
```

Changed commit from **[`762e0b7`](https://github.com/sagemath/sagetrac-mirror/commit/762e0b75bdb7cc939a9d7b8223872abb3e00398e)** to none



---

archive/issue_comments_541822.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nno, everything is done, as far as I can tell\n\n```\ngit grep \"lang.*level\" src/\nsrc/sage/misc/cython.py:    directives = dict(language_level=3, cdivision=True)\nsrc/sage/symbolic/ginac/optional.hpp:# define optional_COMPILER_CLANG_VERSION  optional_COMPILER_VERSION(__clang_major__, __clang_minor__, __clang_patchlevel__)\nsrc/sage_setup/cython_options.py:        language_level=\"3\",\n```",
    "created_at": "2022-06-26T07:27:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33544#issuecomment-541822",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:63" align="right">comment:63</div>

no, everything is done, as far as I can tell

```
git grep "lang.*level" src/
src/sage/misc/cython.py:    directives = dict(language_level=3, cdivision=True)
src/sage/symbolic/ginac/optional.hpp:# define optional_COMPILER_CLANG_VERSION  optional_COMPILER_VERSION(__clang_major__, __clang_minor__, __clang_patchlevel__)
src/sage_setup/cython_options.py:        language_level="3",
```
