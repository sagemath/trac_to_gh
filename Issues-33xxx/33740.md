# Issue 33740: Add conda dev environment

archive/issues_033503.json:
```json
{
    "assignees": [],
    "body": "We add a conda enviroment that is meant for development, i.e. includes tools that one probably needs while working on sage development such as linters, ssh (for contributing to trac) etc.\n\nMoreover, we extract the conda-related things from `docs/bootstrap` to a new `bootstrap-conda` script in order to simplify the conda workflow (see updated documentation).\n\nGithub workflow run: https://github.com/sagemath/sagetrac-mirror/actions/runs/2268985510\n\nCC:  @isuruf @dimpase @saraedum @mkoeppe @slel\n\nBranch: **[87f360c](https://github.com/sagemath/sagetrac-mirror/commit/87f360ca7a4703b6c45ad3427363ccf4ae531b2c)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **Tobias Diez**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33740_\n\n",
    "closed_at": "2022-05-22T16:32:21Z",
    "created_at": "2022-04-21T12:06:25Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add conda dev environment",
    "type": "issue",
    "updated_at": "2022-06-28T17:41:17Z",
    "url": "https://github.com/sagemath/sage/issues/33740",
    "user": "https://github.com/tobiasdiez"
}
```
We add a conda enviroment that is meant for development, i.e. includes tools that one probably needs while working on sage development such as linters, ssh (for contributing to trac) etc.

Moreover, we extract the conda-related things from `docs/bootstrap` to a new `bootstrap-conda` script in order to simplify the conda workflow (see updated documentation).

Github workflow run: https://github.com/sagemath/sagetrac-mirror/actions/runs/2268985510

CC:  @isuruf @dimpase @saraedum @mkoeppe @slel

Branch: **[87f360c](https://github.com/sagemath/sagetrac-mirror/commit/87f360ca7a4703b6c45ad3427363ccf4ae531b2c)**

Reviewer: **Matthias Koeppe**

Author: **Tobias Diez**

_Issue created by migration from https://trac.sagemath.org/ticket/33740_





---

archive/issue_events_444709.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-21T12:06:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444709"
}
```



---

archive/issue_events_444710.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-21T12:06:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444710"
}
```



---

archive/issue_events_444711.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-21T12:06:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444711"
}
```



---

archive/issue_events_444712.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-21T12:06:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444712"
}
```



---

archive/issue_events_444713.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-21T12:08:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444713"
}
```



---

archive/issue_comments_548540.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nThis looks quite odd to me. \nWhy can't the yml file in the branch be generated from what's already known about Conda packages?",
    "created_at": "2022-04-22T00:11:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548540",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:2" align="right">Comment 2</div>

This looks quite odd to me. 
Why can't the yml file in the branch be generated from what's already known about Conda packages?



---

archive/issue_comments_548541.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nI agree, not a good idea to treat this file different from all other of our files that are generated at bootstrap time.\n\nAlso `jupyter_sphinx` should really be added by adding a `distros/` file, not ad hoc like this.",
    "created_at": "2022-04-22T00:23:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548541",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">Comment 3</div>

I agree, not a good idea to treat this file different from all other of our files that are generated at bootstrap time.

Also `jupyter_sphinx` should really be added by adding a `distros/` file, not ad hoc like this.



---

archive/issue_comments_548542.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nReplying to [@dimpase](#comment%3A2):\n> This looks quite odd to me. \n> Why can't the yml file in the branch be generated from what's already known about Conda packages?\n> \n\nThe issue is not so much to generate the file but how it is used. Running bootstrap requires a few dependencies which however are only specified in the environment file. So its a classical chicken-egg problem. \n\nCurrently this is resolved by requiring the developers to first create a conda env with the necessary tools for `bootstrap`, and then later update the env with all dependencies from the env file. With my proposal the overhead occurs only when dependencies are changed (which then requires to commit the changed env file). Overall this should be less work and more convenient.\n\n> I agree, not a good idea to treat this file different from all other of our files that are generated at bootstrap time. \n\nThe dev environment is special in this respect, since its the only file that you would possibly like to use before the bootstrap.",
    "created_at": "2022-04-22T09:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548542",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:4" align="right">Comment 4</div>

Replying to [@dimpase](#comment%3A2):
> This looks quite odd to me. 
> Why can't the yml file in the branch be generated from what's already known about Conda packages?
> 

The issue is not so much to generate the file but how it is used. Running bootstrap requires a few dependencies which however are only specified in the environment file. So its a classical chicken-egg problem. 

Currently this is resolved by requiring the developers to first create a conda env with the necessary tools for `bootstrap`, and then later update the env with all dependencies from the env file. With my proposal the overhead occurs only when dependencies are changed (which then requires to commit the changed env file). Overall this should be less work and more convenient.

> I agree, not a good idea to treat this file different from all other of our files that are generated at bootstrap time. 

The dev environment is special in this respect, since its the only file that you would possibly like to use before the bootstrap.



---

archive/issue_comments_548543.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa144e6c45fa9a76ebfbe69b011d4da0b8a76b7c\">aa144e6</a></td><td><code>Add distros/conda for jupyter_sphinx</code></td></tr></table>\n",
    "created_at": "2022-04-22T10:12:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548543",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa144e6c45fa9a76ebfbe69b011d4da0b8a76b7c">aa144e6</a></td><td><code>Add distros/conda for jupyter_sphinx</code></td></tr></table>




---

archive/issue_comments_548544.json:
```json
{
    "body": "Changed commit from **[413b081](https://github.com/sagemath/sagetrac-mirror/commit/413b081b16ace2392d362ed54d12f166ad30cf6a)** to **[aa144e6](https://github.com/sagemath/sagetrac-mirror/commit/aa144e6c45fa9a76ebfbe69b011d4da0b8a76b7c)**",
    "created_at": "2022-04-22T10:12:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548544",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[413b081](https://github.com/sagemath/sagetrac-mirror/commit/413b081b16ace2392d362ed54d12f166ad30cf6a)** to **[aa144e6](https://github.com/sagemath/sagetrac-mirror/commit/aa144e6c45fa9a76ebfbe69b011d4da0b8a76b7c)**



---

archive/issue_comments_548545.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nReplying to [@mkoeppe](#comment%3A3):\n> Also `jupyter_sphinx` should really be added by adding a `distros/` file, not ad hoc like this.\n\nDone.",
    "created_at": "2022-04-22T10:12:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548545",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:6" align="right">Comment 6</div>

Replying to [@mkoeppe](#comment%3A3):
> Also `jupyter_sphinx` should really be added by adding a `distros/` file, not ad hoc like this.

Done.



---

archive/issue_comments_548546.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nok, but please make the initial egg (say, `./bootstrap-conda-dev`) minimal - apart from m4 and other autotools, not much else is needed for `./bootstrap`.",
    "created_at": "2022-04-22T11:10:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548546",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">Comment 7</div>

ok, but please make the initial egg (say, `./bootstrap-conda-dev`) minimal - apart from m4 and other autotools, not much else is needed for `./bootstrap`.



---

archive/issue_comments_548547.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nMhh, having a conda environment just for the bootstrap would also work. But then one still has to run `conda create sage-dev -f bootstrap-conda-dev.yml`, `bootstrap` and `conda sage-dev update -f environment.yml`.\n\nHaving one conda environment config containing all necessary tools for bootstrap, compiling and running sage as well as a few additional dev tools is the most convenient, don't you think so?",
    "created_at": "2022-04-22T19:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548547",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:8" align="right">Comment 8</div>

Mhh, having a conda environment just for the bootstrap would also work. But then one still has to run `conda create sage-dev -f bootstrap-conda-dev.yml`, `bootstrap` and `conda sage-dev update -f environment.yml`.

Having one conda environment config containing all necessary tools for bootstrap, compiling and running sage as well as a few additional dev tools is the most convenient, don't you think so?



---

archive/issue_comments_548548.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nReplying to [@dimpase](#comment%3A7):\n> ok, but please make the initial egg (say, `./bootstrap-conda-dev`) minimal - apart from m4 and other autotools, not much else is needed for `./bootstrap`.\n\n+1 on just splitting the generation of the yml files from `src/doc/bootstrap` (it doesn't really belong there anyway) into a new script. It won't need any of the dependencies that the full `bootstrap` has.",
    "created_at": "2022-04-22T19:45:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548548",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">Comment 9</div>

Replying to [@dimpase](#comment%3A7):
> ok, but please make the initial egg (say, `./bootstrap-conda-dev`) minimal - apart from m4 and other autotools, not much else is needed for `./bootstrap`.

+1 on just splitting the generation of the yml files from `src/doc/bootstrap` (it doesn't really belong there anyway) into a new script. It won't need any of the dependencies that the full `bootstrap` has.



---

archive/issue_comments_548549.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nperhaps this should rather become a conda-forge package?",
    "created_at": "2022-04-23T09:59:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548549",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">Comment 10</div>

perhaps this should rather become a conda-forge package?



---

archive/issue_comments_548550.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/281155921993173a75e18c7c23af782acc6a902e\">2811559</a></td><td><code>Introduce new bootstrap-conda command</code></td></tr></table>\n",
    "created_at": "2022-04-27T17:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548550",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11" align="right">Comment 11</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/281155921993173a75e18c7c23af782acc6a902e">2811559</a></td><td><code>Introduce new bootstrap-conda command</code></td></tr></table>




---

archive/issue_comments_548551.json:
```json
{
    "body": "Changed commit from **[aa144e6](https://github.com/sagemath/sagetrac-mirror/commit/aa144e6c45fa9a76ebfbe69b011d4da0b8a76b7c)** to **[2811559](https://github.com/sagemath/sagetrac-mirror/commit/281155921993173a75e18c7c23af782acc6a902e)**",
    "created_at": "2022-04-27T17:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548551",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[aa144e6](https://github.com/sagemath/sagetrac-mirror/commit/aa144e6c45fa9a76ebfbe69b011d4da0b8a76b7c)** to **[2811559](https://github.com/sagemath/sagetrac-mirror/commit/281155921993173a75e18c7c23af782acc6a902e)**



---

archive/issue_comments_548552.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@mkoeppe](#comment%3A9):\n> Replying to [@dimpase](#comment%3A7):\n> > ok, but please make the initial egg (say, `./bootstrap-conda-dev`) minimal - apart from m4 and other autotools, not much else is needed for `./bootstrap`.\n\n> \n> +1 on just splitting the generation of the yml files from `src/doc/bootstrap` (it doesn't really belong there anyway) into a new script. It won't need any of the dependencies that the full `bootstrap` has.\n\nLike this?",
    "created_at": "2022-04-27T17:18:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548552",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@mkoeppe](#comment%3A9):
> Replying to [@dimpase](#comment%3A7):
> > ok, but please make the initial egg (say, `./bootstrap-conda-dev`) minimal - apart from m4 and other autotools, not much else is needed for `./bootstrap`.

> 
> +1 on just splitting the generation of the yml files from `src/doc/bootstrap` (it doesn't really belong there anyway) into a new script. It won't need any of the dependencies that the full `bootstrap` has.

Like this?



---

archive/issue_comments_548553.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nthat's much nicer, but where is the top-level invocation of `bootstrap-conda`?\nDo you mean it's an alternative to `./bootstrap` ?",
    "created_at": "2022-04-27T17:36:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548553",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">Comment 13</div>

that's much nicer, but where is the top-level invocation of `bootstrap-conda`?
Do you mean it's an alternative to `./bootstrap` ?



---

archive/issue_comments_548554.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nI wasn't sure about this one. The procedure now looks as follows:\n- `bootstrap-conda`\n- `conda create`\n- `bootstrap`\n- `configure`\n- ...\n\nSo there is no point in invoking `bootstrap-conda` during `bootstrap`.",
    "created_at": "2022-04-27T19:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548554",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:14" align="right">Comment 14</div>

I wasn't sure about this one. The procedure now looks as follows:
- `bootstrap-conda`
- `conda create`
- `bootstrap`
- `configure`
- ...

So there is no point in invoking `bootstrap-conda` during `bootstrap`.



---

archive/issue_comments_548555.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nStill need to invoke this so that the generated files end up in the sdist.",
    "created_at": "2022-04-27T19:30:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548555",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">Comment 15</div>

Still need to invoke this so that the generated files end up in the sdist.



---

archive/issue_comments_548556.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\n(See the shell function `save` in `bootstrap`)",
    "created_at": "2022-04-27T19:31:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548556",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">Comment 16</div>

(See the shell function `save` in `bootstrap`)



---

archive/issue_comments_548557.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nReplying to [@tobiasdiez](#comment%3A14):\n> I wasn't sure about this one. The procedure now looks as follows:\n> - `bootstrap-conda`\n> - `conda create`\n> - `bootstrap`\n> - `configure`\n> - ...\n> \n> So there is no point in invoking `bootstrap-conda` during `bootstrap`.\n\nI thought that `./bootstrap` recognises whether we're on conda, or not.\nIf so, it can invoke `bootstrap-conda`+`conda create`.\n\nOtherwise, I'd like to see `./bootstrap` getting an optional argument, `conda`,\nto do the calling of `bootstrap-conda`+`conda create` and then proceeding.",
    "created_at": "2022-04-28T09:32:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548557",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">Comment 17</div>

Replying to [@tobiasdiez](#comment%3A14):
> I wasn't sure about this one. The procedure now looks as follows:
> - `bootstrap-conda`
> - `conda create`
> - `bootstrap`
> - `configure`
> - ...
> 
> So there is no point in invoking `bootstrap-conda` during `bootstrap`.

I thought that `./bootstrap` recognises whether we're on conda, or not.
If so, it can invoke `bootstrap-conda`+`conda create`.

Otherwise, I'd like to see `./bootstrap` getting an optional argument, `conda`,
to do the calling of `bootstrap-conda`+`conda create` and then proceeding.



---

archive/issue_comments_548558.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@dimpase](#comment%3A17):\n> I thought that `./bootstrap` recognises whether we're on conda, or not.\n\nNot a good idea. The output of `bootstrap` must not depend on the system configuration. It is packed into the sdist.",
    "created_at": "2022-04-28T17:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548558",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@dimpase](#comment%3A17):
> I thought that `./bootstrap` recognises whether we're on conda, or not.

Not a good idea. The output of `bootstrap` must not depend on the system configuration. It is packed into the sdist.



---

archive/issue_comments_548559.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nshouldn't `./bootstrap-conda` run on `#!/bin/sh`, just like `./bootstrap` ?",
    "created_at": "2022-04-30T17:46:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548559",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:19" align="right">Comment 19</div>

shouldn't `./bootstrap-conda` run on `#!/bin/sh`, just like `./bootstrap` ?



---

archive/issue_events_444714.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-01T01:36:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444714"
}
```



---

archive/issue_events_444715.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-01T01:36:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444715"
}
```



---

archive/issue_comments_548560.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nReplying to [@dimpase](#comment%3A19):\n> shouldn't `./bootstrap-conda` run on `#!/bin/sh`, just like `./bootstrap` ?\n\nWith `sh` the script is not working, so I took `bash` as in `doc/bootstrap`. If that needs to be changed, I need help as its beyond my basic shell script knowledge.",
    "created_at": "2022-05-01T10:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548560",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:21" align="right">Comment 21</div>

Replying to [@dimpase](#comment%3A19):
> shouldn't `./bootstrap-conda` run on `#!/bin/sh`, just like `./bootstrap` ?

With `sh` the script is not working, so I took `bash` as in `doc/bootstrap`. If that needs to be changed, I need help as its beyond my basic shell script knowledge.



---

archive/issue_comments_548561.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nReplying to [@dimpase](#comment%3A17):\n> Otherwise, I'd like to see `./bootstrap` getting an optional argument, `conda`,\n> to do the calling of `bootstrap-conda`+`conda create` and then proceeding.\n> \n\nI like the idea to further simplify the workflow, but lets keep this ticket small and do further streamlining efforts in #33765.",
    "created_at": "2022-05-01T10:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548561",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:22" align="right">Comment 22</div>

Replying to [@dimpase](#comment%3A17):
> Otherwise, I'd like to see `./bootstrap` getting an optional argument, `conda`,
> to do the calling of `bootstrap-conda`+`conda create` and then proceeding.
> 

I like the idea to further simplify the workflow, but lets keep this ticket small and do further streamlining efforts in #33765.



---

archive/issue_comments_548562.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nReplying to [@mkoeppe](#comment%3A15):\n> Still need to invoke this so that the generated files end up in the sdist.\n\nOkay, added.",
    "created_at": "2022-05-01T10:26:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548562",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:23" align="right">Comment 23</div>

Replying to [@mkoeppe](#comment%3A15):
> Still need to invoke this so that the generated files end up in the sdist.

Okay, added.



---

archive/issue_comments_548563.json:
```json
{
    "body": "Changed commit from **[2811559](https://github.com/sagemath/sagetrac-mirror/commit/281155921993173a75e18c7c23af782acc6a902e)** to **[d091d27](https://github.com/sagemath/sagetrac-mirror/commit/d091d2772f6f6b9db2b9ae29dc5a1570d323d734)**",
    "created_at": "2022-05-01T11:17:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548563",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2811559](https://github.com/sagemath/sagetrac-mirror/commit/281155921993173a75e18c7c23af782acc6a902e)** to **[d091d27](https://github.com/sagemath/sagetrac-mirror/commit/d091d2772f6f6b9db2b9ae29dc5a1570d323d734)**



---

archive/issue_comments_548564.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a8c1c3e160f15b27fcd51efc97c491009ab7aac\">2a8c1c3</a></td><td><code>Invoke bootstrap-conda during bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f51ef0980537fcf2158c453ada6f8d5648ea38d\">7f51ef0</a></td><td><code>Also delete dev env config file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d091d2772f6f6b9db2b9ae29dc5a1570d323d734\">d091d27</a></td><td><code>Update documentation</code></td></tr></table>\n",
    "created_at": "2022-05-01T11:17:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548564",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24" align="right">Comment 24</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a8c1c3e160f15b27fcd51efc97c491009ab7aac">2a8c1c3</a></td><td><code>Invoke bootstrap-conda during bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f51ef0980537fcf2158c453ada6f8d5648ea38d">7f51ef0</a></td><td><code>Also delete dev env config file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d091d2772f6f6b9db2b9ae29dc5a1570d323d734">d091d27</a></td><td><code>Update documentation</code></td></tr></table>




---

archive/issue_comments_548565.json:
```json
{
    "body": "Changed commit from **[d091d27](https://github.com/sagemath/sagetrac-mirror/commit/d091d2772f6f6b9db2b9ae29dc5a1570d323d734)** to **[42fc241](https://github.com/sagemath/sagetrac-mirror/commit/42fc24167c2286a32777920854684b9c5c27771b)**",
    "created_at": "2022-05-01T11:18:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548565",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d091d27](https://github.com/sagemath/sagetrac-mirror/commit/d091d2772f6f6b9db2b9ae29dc5a1570d323d734)** to **[42fc241](https://github.com/sagemath/sagetrac-mirror/commit/42fc24167c2286a32777920854684b9c5c27771b)**



---

archive/issue_comments_548566.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42fc24167c2286a32777920854684b9c5c27771b\">42fc241</a></td><td><code>Merge branch 'develop' into public/build/conda-dev-env</code></td></tr></table>\n",
    "created_at": "2022-05-01T11:18:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548566",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25" align="right">Comment 25</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42fc24167c2286a32777920854684b9c5c27771b">42fc241</a></td><td><code>Merge branch 'develop' into public/build/conda-dev-env</code></td></tr></table>




---

archive/issue_comments_548567.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,9 @@\n We add a conda enviroment that is meant for development, i.e. includes tools that one probably needs while working on sage development such as linters, ssh (for contributing to trac) etc.\n \n-Moreover, we commit the auto-generated file in order to simplify the conda workflow as follows:\n+Moreover, we extract the conda-related things from `docs/bootstrap` to a new `bootstrap-conda` script in order to simplify the conda workflow as follows:\n - install mamba/conda\n - git checkout\n+- bootstrap-conda\n - mamba create -n sage-dev -f src/environment-dev.yml\n - conda activate sage-dev\n -  ./bootstrap\n``````\n",
    "created_at": "2022-05-01T11:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548567",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,9 @@
 We add a conda enviroment that is meant for development, i.e. includes tools that one probably needs while working on sage development such as linters, ssh (for contributing to trac) etc.
 
-Moreover, we commit the auto-generated file in order to simplify the conda workflow as follows:
+Moreover, we extract the conda-related things from `docs/bootstrap` to a new `bootstrap-conda` script in order to simplify the conda workflow as follows:
 - install mamba/conda
 - git checkout
+- bootstrap-conda
 - mamba create -n sage-dev -f src/environment-dev.yml
 - conda activate sage-dev
 -  ./bootstrap
``````




---

archive/issue_events_444716.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-05-01T11:20:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444716"
}
```



---

archive/issue_events_444717.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-05-01T11:20:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444717"
}
```



---

archive/issue_comments_548568.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nReplying to [@tobiasdiez](#comment%3A21):\n> Replying to [@dimpase](#comment%3A19):\n> > shouldn't `./bootstrap-conda` run on `#!/bin/sh`, just like `./bootstrap` ?\n\n> \n> With `sh` the script is not working, so I took `bash` as in `doc/bootstrap`. If that needs to be changed, I need help as its beyond my basic shell script knowledge.\n\ndid you try http://manpages.ubuntu.com/manpages/bionic/man1/checkbashisms.1.html ?",
    "created_at": "2022-05-01T14:12:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548568",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:28" align="right">Comment 28</div>

Replying to [@tobiasdiez](#comment%3A21):
> Replying to [@dimpase](#comment%3A19):
> > shouldn't `./bootstrap-conda` run on `#!/bin/sh`, just like `./bootstrap` ?

> 
> With `sh` the script is not working, so I took `bash` as in `doc/bootstrap`. If that needs to be changed, I need help as its beyond my basic shell script knowledge.

did you try http://manpages.ubuntu.com/manpages/bionic/man1/checkbashisms.1.html ?



---

archive/issue_comments_548569.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nIn this change:\n\n``` \n-      $ conda create -n sage-build\n+      $ conda env create --file environment.yml\n       $ conda activate sage-build\n```\nI would suggest to keep the `-n` so that it's easy to see what needs to be changed if the user wants to use a different name",
    "created_at": "2022-05-01T16:23:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548569",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">Comment 29</div>

In this change:

``` 
-      $ conda create -n sage-build
+      $ conda env create --file environment.yml
       $ conda activate sage-build
```
I would suggest to keep the `-n` so that it's easy to see what needs to be changed if the user wants to use a different name



---

archive/issue_comments_548570.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nThe instructions in \"Using conda to provide all dependencies for the Sage library (experimental)\" are missing `./bootstrap`",
    "created_at": "2022-05-01T16:33:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548570",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">Comment 30</div>

The instructions in "Using conda to provide all dependencies for the Sage library (experimental)" are missing `./bootstrap`



---

archive/issue_comments_548571.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nAlso `ci-conda.yml` should be updated so it tests the updated instructions",
    "created_at": "2022-05-01T17:21:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548571",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">Comment 31</div>

Also `ci-conda.yml` should be updated so it tests the updated instructions



---

archive/issue_comments_548572.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nReplying to [@dimpase](#comment%3A28):\n> Replying to [@tobiasdiez](#comment%3A21):\n> > Replying to [@dimpase](#comment%3A19):\n> > > shouldn't `./bootstrap-conda` run on `#!/bin/sh`, just like `./bootstrap` ?\n\n> > \n> > With `sh` the script is not working, so I took `bash` as in `doc/bootstrap`. If that needs to be changed, I need help as its beyond my basic shell script knowledge.\n\n> \n> did you try http://manpages.ubuntu.com/manpages/bionic/man1/checkbashisms.1.html ?\n\nIt finds things of the form\n\n```\npossible bashism in ./bootstrap-conda line 25 (should be VAR=\"${VAR}foo\"):\n                    SYSTEM_PACKAGES+=\" $PKG_SYSTEM_PACKAGES\"\n```\nI would say the `+=` construction is more readable.",
    "created_at": "2022-05-02T15:02:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548572",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:32" align="right">Comment 32</div>

Replying to [@dimpase](#comment%3A28):
> Replying to [@tobiasdiez](#comment%3A21):
> > Replying to [@dimpase](#comment%3A19):
> > > shouldn't `./bootstrap-conda` run on `#!/bin/sh`, just like `./bootstrap` ?

> > 
> > With `sh` the script is not working, so I took `bash` as in `doc/bootstrap`. If that needs to be changed, I need help as its beyond my basic shell script knowledge.

> 
> did you try http://manpages.ubuntu.com/manpages/bionic/man1/checkbashisms.1.html ?

It finds things of the form

```
possible bashism in ./bootstrap-conda line 25 (should be VAR="${VAR}foo"):
                    SYSTEM_PACKAGES+=" $PKG_SYSTEM_PACKAGES"
```
I would say the `+=` construction is more readable.



---

archive/issue_comments_548573.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0716595df2c4fbcf312dc9aab4039656e3b87efe\">0716595</a></td><td><code>Add missing bootstrap and combine pip install command</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10338a76ce5812db62f4ac72a17e6c6330f1fb8c\">10338a7</a></td><td><code>Change ci as well</code></td></tr></table>\n",
    "created_at": "2022-05-02T15:09:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548573",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33" align="right">Comment 33</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0716595df2c4fbcf312dc9aab4039656e3b87efe">0716595</a></td><td><code>Add missing bootstrap and combine pip install command</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10338a76ce5812db62f4ac72a17e6c6330f1fb8c">10338a7</a></td><td><code>Change ci as well</code></td></tr></table>




---

archive/issue_comments_548574.json:
```json
{
    "body": "Changed commit from **[42fc241](https://github.com/sagemath/sagetrac-mirror/commit/42fc24167c2286a32777920854684b9c5c27771b)** to **[10338a7](https://github.com/sagemath/sagetrac-mirror/commit/10338a76ce5812db62f4ac72a17e6c6330f1fb8c)**",
    "created_at": "2022-05-02T15:09:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548574",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[42fc241](https://github.com/sagemath/sagetrac-mirror/commit/42fc24167c2286a32777920854684b9c5c27771b)** to **[10338a7](https://github.com/sagemath/sagetrac-mirror/commit/10338a76ce5812db62f4ac72a17e6c6330f1fb8c)**



---

archive/issue_comments_548575.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nReplying to [@mkoeppe](#comment%3A31):\n> Also `ci-conda.yml` should be updated so it tests the updated instructions\n\nGood point, done.\nhttps://github.com/sagemath/sagetrac-mirror/actions/runs/2258733820",
    "created_at": "2022-05-02T15:11:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548575",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:34" align="right">Comment 34</div>

Replying to [@mkoeppe](#comment%3A31):
> Also `ci-conda.yml` should be updated so it tests the updated instructions

Good point, done.
https://github.com/sagemath/sagetrac-mirror/actions/runs/2258733820



---

archive/issue_comments_548576.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nReplying to [@mkoeppe](#comment%3A30):\n> The instructions in \"Using conda to provide all dependencies for the Sage library (experimental)\" are missing `./bootstrap` \n\nDone.",
    "created_at": "2022-05-02T15:11:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548576",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:35" align="right">Comment 35</div>

Replying to [@mkoeppe](#comment%3A30):
> The instructions in "Using conda to provide all dependencies for the Sage library (experimental)" are missing `./bootstrap` 

Done.



---

archive/issue_comments_548577.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nReplying to [@tobiasdiez](#comment%3A32):\n> Replying to [@dimpase](#comment%3A28):\n> > Replying to [@tobiasdiez](#comment%3A21):\n> > > Replying to [@dimpase](#comment%3A19):\n> > > > shouldn't `./bootstrap-conda` run on `#!/bin/sh`, just like `./bootstrap` ?\n\n> > > \n> > > With `sh` the script is not working, so I took `bash` as in `doc/bootstrap`. If that needs to be changed, I need help as its beyond my basic shell script knowledge.\n\n> > \n> > did you try http://manpages.ubuntu.com/manpages/bionic/man1/checkbashisms.1.html ?\n\n> \n> It finds things of the form\n> \n> ```\n> possible bashism in ./bootstrap-conda line 25 (should be VAR=\"${VAR}foo\"):\n>                     SYSTEM_PACKAGES+=\" $PKG_SYSTEM_PACKAGES\"\n> ```\n> I would say the `+=` construction is more readable.\n\nbut why do you think that `/bin/bash` is available everwhere? E.g. on macOS it is probably not the case.\n\n\n>",
    "created_at": "2022-05-02T17:09:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548577",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:36" align="right">Comment 36</div>

Replying to [@tobiasdiez](#comment%3A32):
> Replying to [@dimpase](#comment%3A28):
> > Replying to [@tobiasdiez](#comment%3A21):
> > > Replying to [@dimpase](#comment%3A19):
> > > > shouldn't `./bootstrap-conda` run on `#!/bin/sh`, just like `./bootstrap` ?

> > > 
> > > With `sh` the script is not working, so I took `bash` as in `doc/bootstrap`. If that needs to be changed, I need help as its beyond my basic shell script knowledge.

> > 
> > did you try http://manpages.ubuntu.com/manpages/bionic/man1/checkbashisms.1.html ?

> 
> It finds things of the form
> 
> ```
> possible bashism in ./bootstrap-conda line 25 (should be VAR="${VAR}foo"):
>                     SYSTEM_PACKAGES+=" $PKG_SYSTEM_PACKAGES"
> ```
> I would say the `+=` construction is more readable.

but why do you think that `/bin/bash` is available everwhere? E.g. on macOS it is probably not the case.


>



---

archive/issue_comments_548578.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nI took the bash thing from the original bootstrap script https://github.com/sagemath/sagetrac-mirror/blob/develop/src/doc/bootstrap. But to be honest, I didn't have an idea what I was doing and just mixed different things from the bootstrap scripts until it was working. So I'm totally fine to change it to a more suitable version.",
    "created_at": "2022-05-02T18:45:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548578",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:37" align="right">Comment 37</div>

I took the bash thing from the original bootstrap script https://github.com/sagemath/sagetrac-mirror/blob/develop/src/doc/bootstrap. But to be honest, I didn't have an idea what I was doing and just mixed different things from the bootstrap scripts until it was working. So I'm totally fine to change it to a more suitable version.



---

archive/issue_comments_548579.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\n`git grep '#!.*bash' ` will show the variant that is in general use",
    "created_at": "2022-05-02T18:47:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548579",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">Comment 38</div>

`git grep '#!.*bash' ` will show the variant that is in general use



---

archive/issue_comments_548580.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nReplying to [@tobiasdiez](#comment%3A34):\n> Replying to [@mkoeppe](#comment%3A31):\n> > Also `ci-conda.yml` should be updated so it tests the updated instructions\n\n> \n> Good point, done.\n> https://github.com/sagemath/sagetrac-mirror/actions/runs/2258733820\n\nIt fails. I don't think the two pip command lines can be combined. \n\nBecause of `--no-build-isolation`, the Sage library (`src`) cannot advertise its build dependency, so `pip` cannot possibly know in which order it has to install stuff.",
    "created_at": "2022-05-02T19:23:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548580",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">Comment 39</div>

Replying to [@tobiasdiez](#comment%3A34):
> Replying to [@mkoeppe](#comment%3A31):
> > Also `ci-conda.yml` should be updated so it tests the updated instructions

> 
> Good point, done.
> https://github.com/sagemath/sagetrac-mirror/actions/runs/2258733820

It fails. I don't think the two pip command lines can be combined. 

Because of `--no-build-isolation`, the Sage library (`src`) cannot advertise its build dependency, so `pip` cannot possibly know in which order it has to install stuff.



---

archive/issue_events_444718.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:14:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444718"
}
```



---

archive/issue_events_444719.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:14:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444719"
}
```



---

archive/issue_comments_548581.json:
```json
{
    "body": "Author: **Tobias Diez**",
    "created_at": "2022-05-03T15:14:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548581",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Tobias Diez**



---

archive/issue_events_444720.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444720"
}
```



---

archive/issue_events_444721.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444721"
}
```



---

archive/issue_comments_548582.json:
```json
{
    "body": "Changed commit from **[10338a7](https://github.com/sagemath/sagetrac-mirror/commit/10338a76ce5812db62f4ac72a17e6c6330f1fb8c)** to **[0cf7334](https://github.com/sagemath/sagetrac-mirror/commit/0cf7334736fa9ec9fb2af8099722767fea2bdc0d)**",
    "created_at": "2022-05-03T22:08:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548582",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[10338a7](https://github.com/sagemath/sagetrac-mirror/commit/10338a76ce5812db62f4ac72a17e6c6330f1fb8c)** to **[0cf7334](https://github.com/sagemath/sagetrac-mirror/commit/0cf7334736fa9ec9fb2af8099722767fea2bdc0d)**



---

archive/issue_comments_548583.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0cf7334736fa9ec9fb2af8099722767fea2bdc0d\">0cf7334</a></td><td><code>Add sage-setup as install-requires dep</code></td></tr></table>\n",
    "created_at": "2022-05-03T22:08:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548583",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42" align="right">Comment 42</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0cf7334736fa9ec9fb2af8099722767fea2bdc0d">0cf7334</a></td><td><code>Add sage-setup as install-requires dep</code></td></tr></table>




---

archive/issue_comments_548584.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nAbsolutely no, this is not an install-requires.",
    "created_at": "2022-05-03T22:15:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548584",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">Comment 43</div>

Absolutely no, this is not an install-requires.



---

archive/issue_comments_548585.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d2b14978335da5bfd8148266183a8abd5f32cce\">6d2b149</a></td><td><code>Use relative paths to not install src package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1dba3ba01d15153940f310a9e1c427f00d4460d6\">1dba3ba</a></td><td><code>Maybe thats the correct shebang?</code></td></tr></table>\n",
    "created_at": "2022-05-03T23:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548585",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44" align="right">Comment 44</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d2b14978335da5bfd8148266183a8abd5f32cce">6d2b149</a></td><td><code>Use relative paths to not install src package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1dba3ba01d15153940f310a9e1c427f00d4460d6">1dba3ba</a></td><td><code>Maybe thats the correct shebang?</code></td></tr></table>




---

archive/issue_comments_548586.json:
```json
{
    "body": "Changed commit from **[0cf7334](https://github.com/sagemath/sagetrac-mirror/commit/0cf7334736fa9ec9fb2af8099722767fea2bdc0d)** to **[1dba3ba](https://github.com/sagemath/sagetrac-mirror/commit/1dba3ba01d15153940f310a9e1c427f00d4460d6)**",
    "created_at": "2022-05-03T23:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548586",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0cf7334](https://github.com/sagemath/sagetrac-mirror/commit/0cf7334736fa9ec9fb2af8099722767fea2bdc0d)** to **[1dba3ba](https://github.com/sagemath/sagetrac-mirror/commit/1dba3ba01d15153940f310a9e1c427f00d4460d6)**



---

archive/issue_comments_548587.json:
```json
{
    "body": "Changed commit from **[1dba3ba](https://github.com/sagemath/sagetrac-mirror/commit/1dba3ba01d15153940f310a9e1c427f00d4460d6)** to **[c1b2fbf](https://github.com/sagemath/sagetrac-mirror/commit/c1b2fbf6b82fb388cbb143453b2eeaa428b604ff)**",
    "created_at": "2022-05-03T23:31:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548587",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1dba3ba](https://github.com/sagemath/sagetrac-mirror/commit/1dba3ba01d15153940f310a9e1c427f00d4460d6)** to **[c1b2fbf](https://github.com/sagemath/sagetrac-mirror/commit/c1b2fbf6b82fb388cbb143453b2eeaa428b604ff)**



---

archive/issue_comments_548588.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1b2fbf6b82fb388cbb143453b2eeaa428b604ff\">c1b2fbf</a></td><td><code>Revert install_requires change</code></td></tr></table>\n",
    "created_at": "2022-05-03T23:31:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548588",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45" align="right">Comment 45</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1b2fbf6b82fb388cbb143453b2eeaa428b604ff">c1b2fbf</a></td><td><code>Revert install_requires change</code></td></tr></table>




---

archive/issue_comments_548589.json:
```json
{
    "body": "Changed commit from **[c1b2fbf](https://github.com/sagemath/sagetrac-mirror/commit/c1b2fbf6b82fb388cbb143453b2eeaa428b604ff)** to **[ad56ba3](https://github.com/sagemath/sagetrac-mirror/commit/ad56ba3dab303edea7cdd2d449c69feaaf624beb)**",
    "created_at": "2022-05-04T09:40:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548589",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c1b2fbf](https://github.com/sagemath/sagetrac-mirror/commit/c1b2fbf6b82fb388cbb143453b2eeaa428b604ff)** to **[ad56ba3](https://github.com/sagemath/sagetrac-mirror/commit/ad56ba3dab303edea7cdd2d449c69feaaf624beb)**



---

archive/issue_comments_548590.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad56ba3dab303edea7cdd2d449c69feaaf624beb\">ad56ba3</a></td><td><code>Go back to two pip installs for now</code></td></tr></table>\n",
    "created_at": "2022-05-04T09:40:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548590",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46" align="right">Comment 46</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad56ba3dab303edea7cdd2d449c69feaaf624beb">ad56ba3</a></td><td><code>Go back to two pip installs for now</code></td></tr></table>




---

archive/issue_events_444722.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-05-04T09:44:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444722"
}
```



---

archive/issue_events_444723.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-05-04T09:44:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444723"
}
```



---

archive/issue_comments_548591.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nReplying to [@mkoeppe](#comment%3A39):\n> Replying to [@tobiasdiez](#comment%3A34):\n> > Replying to [@mkoeppe](#comment%3A31):\n> > > Also `ci-conda.yml` should be updated so it tests the updated instructions\n\n> > \n> > Good point, done.\n> > https://github.com/sagemath/sagetrac-mirror/actions/runs/2258733820\n\n> \n> It fails. I don't think the two pip command lines can be combined. \n> \n> Because of `--no-build-isolation`, the Sage library (`src`) cannot advertise its build dependency, so `pip` cannot possibly know in which order it has to install stuff.\n\nBuild isolation shouldn't be an issue since this only decides if pip tries to create a temporary venv or reuses the existing one for the build env, but not what build dependencies to be installed. Could it be that there is some misconfig of the build dependencies?\n\nAnyway, I've reverted this part and would leave it to a new ticket.",
    "created_at": "2022-05-04T09:44:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548591",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:47" align="right">Comment 47</div>

Replying to [@mkoeppe](#comment%3A39):
> Replying to [@tobiasdiez](#comment%3A34):
> > Replying to [@mkoeppe](#comment%3A31):
> > > Also `ci-conda.yml` should be updated so it tests the updated instructions

> > 
> > Good point, done.
> > https://github.com/sagemath/sagetrac-mirror/actions/runs/2258733820

> 
> It fails. I don't think the two pip command lines can be combined. 
> 
> Because of `--no-build-isolation`, the Sage library (`src`) cannot advertise its build dependency, so `pip` cannot possibly know in which order it has to install stuff.

Build isolation shouldn't be an issue since this only decides if pip tries to create a temporary venv or reuses the existing one for the build env, but not what build dependencies to be installed. Could it be that there is some misconfig of the build dependencies?

Anyway, I've reverted this part and would leave it to a new ticket.



---

archive/issue_comments_548592.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,3 +9,5 @@\n -  ./bootstrap\n - ./configure -withsomething\n - pip install --no-build-isolation -v -v --editable pkgs/sage-conf pkgs/sage-setup src\n+\n+Github workflow run: https://github.com/sagemath/sagetrac-mirror/actions/runs/2268985510\n``````\n",
    "created_at": "2022-05-04T09:46:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548592",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,3 +9,5 @@
 -  ./bootstrap
 - ./configure -withsomething
 - pip install --no-build-isolation -v -v --editable pkgs/sage-conf pkgs/sage-setup src
+
+Github workflow run: https://github.com/sagemath/sagetrac-mirror/actions/runs/2268985510
``````




---

archive/issue_comments_548593.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nReplying to [@tobiasdiez](#comment%3A47):\n> Build isolation shouldn't be an issue \n\nhttps://pip.pypa.io/en/stable/cli/pip_install/#cmdoption-no-build-isolation\n\"Disable isolation when building a modern source distribution. Build dependencies specified by PEP 518 must be already installed if this option is used.\"",
    "created_at": "2022-05-04T15:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548593",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:49" align="right">Comment 49</div>

Replying to [@tobiasdiez](#comment%3A47):
> Build isolation shouldn't be an issue 

https://pip.pypa.io/en/stable/cli/pip_install/#cmdoption-no-build-isolation
"Disable isolation when building a modern source distribution. Build dependencies specified by PEP 518 must be already installed if this option is used."



---

archive/issue_comments_548594.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\ncomment:29",
    "created_at": "2022-05-04T18:22:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548594",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:50" align="right">Comment 50</div>

comment:29



---

archive/issue_comments_548595.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nAlso, in the edits of the documentation, the information on how to select a Python version have been lost",
    "created_at": "2022-05-04T18:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548595",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:51" align="right">Comment 51</div>

Also, in the edits of the documentation, the information on how to select a Python version have been lost



---

archive/issue_events_444724.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-04T18:26:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444724"
}
```



---

archive/issue_events_444725.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-04T18:26:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444725"
}
```



---

archive/issue_comments_548596.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nReplying to [@mkoeppe](#comment%3A49):\n> Replying to [@tobiasdiez](#comment%3A47):\n> > Build isolation shouldn't be an issue \n\n> \n> https://pip.pypa.io/en/stable/cli/pip_install/#cmdoption-no-build-isolation\n> \"Disable isolation when building a modern source distribution. Build dependencies specified by PEP 518 must be already installed if this option is used.\"\n\nAhh good to know, then I've remembered it wrong. Thanks for the clarification.",
    "created_at": "2022-05-08T08:24:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548596",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:53" align="right">Comment 53</div>

Replying to [@mkoeppe](#comment%3A49):
> Replying to [@tobiasdiez](#comment%3A47):
> > Build isolation shouldn't be an issue 

> 
> https://pip.pypa.io/en/stable/cli/pip_install/#cmdoption-no-build-isolation
> "Disable isolation when building a modern source distribution. Build dependencies specified by PEP 518 must be already installed if this option is used."

Ahh good to know, then I've remembered it wrong. Thanks for the clarification.



---

archive/issue_comments_548597.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nReplying to [@mkoeppe](#comment%3A29):\n> In this change:\n> \n> ``` \n> -      $ conda create -n sage-build\n> +      $ conda env create --file environment.yml\n>        $ conda activate sage-build\n> ```\n> I would suggest to keep the `-n` so that it's easy to see what needs to be changed if the user wants to use a different name\n\nNormally the user doesn't need to change the name, and if he does its easy to find on the conda docs how to do this. Thus I don't really see a point in adding an arg that is the same as the default value.",
    "created_at": "2022-05-08T08:25:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548597",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:54" align="right">Comment 54</div>

Replying to [@mkoeppe](#comment%3A29):
> In this change:
> 
> ``` 
> -      $ conda create -n sage-build
> +      $ conda env create --file environment.yml
>        $ conda activate sage-build
> ```
> I would suggest to keep the `-n` so that it's easy to see what needs to be changed if the user wants to use a different name

Normally the user doesn't need to change the name, and if he does its easy to find on the conda docs how to do this. Thus I don't really see a point in adding an arg that is the same as the default value.



---

archive/issue_comments_548598.json:
```json
{
    "body": "Changed commit from **[ad56ba3](https://github.com/sagemath/sagetrac-mirror/commit/ad56ba3dab303edea7cdd2d449c69feaaf624beb)** to **[b42f5f5](https://github.com/sagemath/sagetrac-mirror/commit/b42f5f51e716d6d01cb491699220ba42c674cd5c)**",
    "created_at": "2022-05-08T08:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548598",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ad56ba3](https://github.com/sagemath/sagetrac-mirror/commit/ad56ba3dab303edea7cdd2d449c69feaaf624beb)** to **[b42f5f5](https://github.com/sagemath/sagetrac-mirror/commit/b42f5f51e716d6d01cb491699220ba42c674cd5c)**



---

archive/issue_comments_548599.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b42f5f51e716d6d01cb491699220ba42c674cd5c\">b42f5f5</a></td><td><code>Readd how to use specific python version</code></td></tr></table>\n",
    "created_at": "2022-05-08T08:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548599",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55" align="right">Comment 55</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b42f5f51e716d6d01cb491699220ba42c674cd5c">b42f5f5</a></td><td><code>Readd how to use specific python version</code></td></tr></table>




---

archive/issue_comments_548600.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nReplying to [@mkoeppe](#comment%3A51):\n> Also, in the edits of the documentation, the information on how to select a Python version have been lost\n\nAdded again.",
    "created_at": "2022-05-08T08:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548600",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:56" align="right">Comment 56</div>

Replying to [@mkoeppe](#comment%3A51):
> Also, in the edits of the documentation, the information on how to select a Python version have been lost

Added again.



---

archive/issue_events_444726.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-05-08T08:39:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444726"
}
```



---

archive/issue_events_444727.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-05-08T08:39:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444727"
}
```



---

archive/issue_comments_548601.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nReplying to [@tobiasdiez](#comment%3A54):\n> Replying to [@mkoeppe](#comment%3A29):\n> > In this change:\n> > \n> > ``` \n> > -      $ conda create -n sage-build\n> > +      $ conda env create --file environment.yml\n> >        $ conda activate sage-build\n> > ```\n> > I would suggest to keep the `-n` so that it's easy to see what needs to be changed if the user wants to use a different name\n\n> \n> Normally the user doesn't need to change the name\n\nIt's as normal as having a second installation in a separate directory",
    "created_at": "2022-05-08T12:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548601",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:57" align="right">Comment 57</div>

Replying to [@tobiasdiez](#comment%3A54):
> Replying to [@mkoeppe](#comment%3A29):
> > In this change:
> > 
> > ``` 
> > -      $ conda create -n sage-build
> > +      $ conda env create --file environment.yml
> >        $ conda activate sage-build
> > ```
> > I would suggest to keep the `-n` so that it's easy to see what needs to be changed if the user wants to use a different name

> 
> Normally the user doesn't need to change the name

It's as normal as having a second installation in a separate directory



---

archive/issue_comments_548602.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nReplying to [@mkoeppe](#comment%3A57):\n> Replying to [@tobiasdiez](#comment%3A54):\n> > Replying to [@mkoeppe](#comment%3A29):\n> > > In this change:\n> > > \n> > > ``` \n> > > -      $ conda create -n sage-build\n> > > +      $ conda env create --file environment.yml\n> > >        $ conda activate sage-build\n> > > ```\n> > > I would suggest to keep the `-n` so that it's easy to see what needs to be changed if the user wants to use a different name\n\n> > \n> > Normally the user doesn't need to change the name\n\n> \n> It's as normal as having a second installation in a separate directory\n\nIf you want to install two sages in parallel, you should also be able to find the `--name` arg of conda. But if you insist I can readd the name.",
    "created_at": "2022-05-08T21:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548602",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:58" align="right">Comment 58</div>

Replying to [@mkoeppe](#comment%3A57):
> Replying to [@tobiasdiez](#comment%3A54):
> > Replying to [@mkoeppe](#comment%3A29):
> > > In this change:
> > > 
> > > ``` 
> > > -      $ conda create -n sage-build
> > > +      $ conda env create --file environment.yml
> > >        $ conda activate sage-build
> > > ```
> > > I would suggest to keep the `-n` so that it's easy to see what needs to be changed if the user wants to use a different name

> > 
> > Normally the user doesn't need to change the name

> 
> It's as normal as having a second installation in a separate directory

If you want to install two sages in parallel, you should also be able to find the `--name` arg of conda. But if you insist I can readd the name.



---

archive/issue_comments_548603.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\nYes please. I added it on purpose in the original version.",
    "created_at": "2022-05-08T21:38:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548603",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:59" align="right">Comment 59</div>

Yes please. I added it on purpose in the original version.



---

archive/issue_comments_548604.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87f360ca7a4703b6c45ad3427363ccf4ae531b2c\">87f360c</a></td><td><code>Readd name arg</code></td></tr></table>\n",
    "created_at": "2022-05-09T11:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548604",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:60" align="right">Comment 60</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87f360ca7a4703b6c45ad3427363ccf4ae531b2c">87f360c</a></td><td><code>Readd name arg</code></td></tr></table>




---

archive/issue_comments_548605.json:
```json
{
    "body": "Changed commit from **[b42f5f5](https://github.com/sagemath/sagetrac-mirror/commit/b42f5f51e716d6d01cb491699220ba42c674cd5c)** to **[87f360c](https://github.com/sagemath/sagetrac-mirror/commit/87f360ca7a4703b6c45ad3427363ccf4ae531b2c)**",
    "created_at": "2022-05-09T11:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548605",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b42f5f5](https://github.com/sagemath/sagetrac-mirror/commit/b42f5f51e716d6d01cb491699220ba42c674cd5c)** to **[87f360c](https://github.com/sagemath/sagetrac-mirror/commit/87f360ca7a4703b6c45ad3427363ccf4ae531b2c)**



---

archive/issue_comments_548606.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">Comment 61</div>\n\nReplying to [@mkoeppe](#comment%3A59):\n> Yes please. I added it on purpose in the original version.\n\nokay done",
    "created_at": "2022-05-09T11:48:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548606",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:61" align="right">Comment 61</div>

Replying to [@mkoeppe](#comment%3A59):
> Yes please. I added it on purpose in the original version.

okay done



---

archive/issue_comments_548607.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">Comment 62</div>\n\nBroken: https://github.com/sagemath/sagetrac-mirror/runs/6356314150",
    "created_at": "2022-05-09T18:31:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548607",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:62" align="right">Comment 62</div>

Broken: https://github.com/sagemath/sagetrac-mirror/runs/6356314150



---

archive/issue_comments_548608.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">Comment 63</div>\n\nconda's `pari` is not being accepted.",
    "created_at": "2022-05-09T18:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548608",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:63" align="right">Comment 63</div>

conda's `pari` is not being accepted.



---

archive/issue_comments_548609.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">Comment 64</div>\n\nThis is not specific to this branch and also occurs for develop https://github.com/sagemath/sage/runs/6236167749?check_suite_focus=true\nI've opened #33828 for this.",
    "created_at": "2022-05-09T21:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548609",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:64" align="right">Comment 64</div>

This is not specific to this branch and also occurs for develop https://github.com/sagemath/sage/runs/6236167749?check_suite_focus=true
I've opened #33828 for this.



---

archive/issue_comments_548610.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2022-05-09T21:50:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548610",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_comments_548611.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">Comment 65</div>\n\nThanks for checking, I agree. Then it's good to go",
    "created_at": "2022-05-09T21:50:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548611",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:65" align="right">Comment 65</div>

Thanks for checking, I agree. Then it's good to go



---

archive/issue_events_444728.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-09T21:50:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444728"
}
```



---

archive/issue_events_444729.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-09T21:50:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444729"
}
```



---

archive/issue_comments_548612.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">Comment 66</div>\n\nThanks!",
    "created_at": "2022-05-09T22:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548612",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:66" align="right">Comment 66</div>

Thanks!



---

archive/issue_comments_548613.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,13 +1,5 @@\n We add a conda enviroment that is meant for development, i.e. includes tools that one probably needs while working on sage development such as linters, ssh (for contributing to trac) etc.\n \n-Moreover, we extract the conda-related things from `docs/bootstrap` to a new `bootstrap-conda` script in order to simplify the conda workflow as follows:\n-- install mamba/conda\n-- git checkout\n-- bootstrap-conda\n-- mamba create -n sage-dev -f src/environment-dev.yml\n-- conda activate sage-dev\n--  ./bootstrap\n-- ./configure -withsomething\n-- pip install --no-build-isolation -v -v --editable pkgs/sage-conf pkgs/sage-setup src\n+Moreover, we extract the conda-related things from `docs/bootstrap` to a new `bootstrap-conda` script in order to simplify the conda workflow (see updated documentation).\n \n Github workflow run: https://github.com/sagemath/sagetrac-mirror/actions/runs/2268985510\n``````\n",
    "created_at": "2022-05-11T21:45:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548613",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,13 +1,5 @@
 We add a conda enviroment that is meant for development, i.e. includes tools that one probably needs while working on sage development such as linters, ssh (for contributing to trac) etc.
 
-Moreover, we extract the conda-related things from `docs/bootstrap` to a new `bootstrap-conda` script in order to simplify the conda workflow as follows:
-- install mamba/conda
-- git checkout
-- bootstrap-conda
-- mamba create -n sage-dev -f src/environment-dev.yml
-- conda activate sage-dev
--  ./bootstrap
-- ./configure -withsomething
-- pip install --no-build-isolation -v -v --editable pkgs/sage-conf pkgs/sage-setup src
+Moreover, we extract the conda-related things from `docs/bootstrap` to a new `bootstrap-conda` script in order to simplify the conda workflow (see updated documentation).
 
 Github workflow run: https://github.com/sagemath/sagetrac-mirror/actions/runs/2268985510
``````




---

archive/issue_events_444730.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-22T16:32:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444730"
}
```



---

archive/issue_events_444731.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "773ec37becd9600b712380385067248fad9421ed",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-05-22T16:32:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33740#event-444731"
}
```



---

archive/issue_comments_548614.json:
```json
{
    "body": "Changed branch from **[public/build/conda-dev-env](https://github.com/sagemath/sagetrac-mirror/tree/public/build/conda-dev-env)** to **[87f360c](https://github.com/sagemath/sagetrac-mirror/commit/87f360ca7a4703b6c45ad3427363ccf4ae531b2c)**",
    "created_at": "2022-05-22T16:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548614",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/build/conda-dev-env](https://github.com/sagemath/sagetrac-mirror/tree/public/build/conda-dev-env)** to **[87f360c](https://github.com/sagemath/sagetrac-mirror/commit/87f360ca7a4703b6c45ad3427363ccf4ae531b2c)**



---

archive/issue_comments_548615.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">Comment 69</div>\n\nThe changes in this ticket made `./bootstrap -q` less quiet.\n\nBefore:\n\n```\n$ ./bootstrap -q\n```\n\nAfter:\n\n```\n$ ./bootstrap -q\n./bootstrap-conda:46: generate conda enviroment files\n```\n\nFollow-up at #34097.",
    "created_at": "2022-06-28T17:41:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548615",
    "user": "https://github.com/slel"
}
```

<div id="comment:69" align="right">Comment 69</div>

The changes in this ticket made `./bootstrap -q` less quiet.

Before:

```
$ ./bootstrap -q
```

After:

```
$ ./bootstrap -q
./bootstrap-conda:46: generate conda enviroment files
```

Follow-up at #34097.



---

archive/issue_comments_548616.json:
```json
{
    "body": "Changed commit from **[87f360c](https://github.com/sagemath/sagetrac-mirror/commit/87f360ca7a4703b6c45ad3427363ccf4ae531b2c)** to none",
    "created_at": "2022-06-28T17:41:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33740#issuecomment-548616",
    "user": "https://github.com/slel"
}
```

Changed commit from **[87f360c](https://github.com/sagemath/sagetrac-mirror/commit/87f360ca7a4703b6c45ad3427363ccf4ae531b2c)** to none
