# Issue 33078: Update package info for system python3 on Cygwin

archive/issues_032841.json:
```json
{
    "body": "Sage 9.5.beta9 fails to use system Python 3.9 on Cygwin,\nunless configured with\n\n```\n./configure --with-python=/usr/bin/python3\n```\n\nUpstream report:\nhttps://cygwin.com/pipermail/cygwin/2021-December/250302.html\n\nCC:  @mkoeppe @slel @darijgr\n\nKeywords: cygwin, python3\n\nBranch/Commit: 65418dec55872e7daa196cd13d2568ed66552b45\n\nUpstream: Fixed upstream, in a later stable release.\n\nReviewer: Darij Grinberg\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33078\n\n",
    "closed_at": "2022-04-21T21:07:30Z",
    "created_at": "2021-12-25T04:51:05Z",
    "labels": [
        "component: porting: cygwin",
        "blocker"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Update package info for system python3 on Cygwin",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33078",
    "user": "https://github.com/slel"
}
```
Sage 9.5.beta9 fails to use system Python 3.9 on Cygwin,
unless configured with

```
./configure --with-python=/usr/bin/python3
```

Upstream report:
https://cygwin.com/pipermail/cygwin/2021-December/250302.html

CC:  @mkoeppe @slel @darijgr

Keywords: cygwin, python3

Branch/Commit: 65418dec55872e7daa196cd13d2568ed66552b45

Upstream: Fixed upstream, in a later stable release.

Reviewer: Darij Grinberg

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33078





---

archive/issue_comments_659433.json:
```json
{
    "body": "<a id='comment:1'></a>logs please",
    "created_at": "2021-12-25T17:52:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659433",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>logs please



---

archive/issue_comments_659434.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/use_system_python_3_on_cygwin\"",
    "created_at": "2021-12-27T07:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659434",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/use_system_python_3_on_cygwin"



---

archive/issue_comments_659435.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-12-27T07:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659435",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_659436.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-12-27T07:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659436",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_659437.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2021-12-27T07:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659437",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_659438.json:
```json
{
    "body": "Changing commit from \"\" to \"9cba975913c9ca3a4c7f7ff69a8a39dba80c04cd\"",
    "created_at": "2021-12-27T07:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659438",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "9cba975913c9ca3a4c7f7ff69a8a39dba80c04cd"



---

archive/issue_comments_659439.json:
```json
{
    "body": "<a id='comment:4'></a>Fails here. Something may be wrong with my Cygwin.\n\nBefore getting Python 3.9 there, Sage would build\nusing system Python 3.8.12.\n\nIt now deems system Python 3.9 unusable, and builds\na lacking Python, see #33079.\n\nLogs for failed build of Sage 9.5.beta9 + #33078:\n\n- https://aij.ovh/sage/logs/slel-2021-12-27-cyg-sage-9-5-b9-33078.zip",
    "created_at": "2021-12-28T01:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659439",
    "user": "https://github.com/slel"
}
```

<a id='comment:4'></a>Fails here. Something may be wrong with my Cygwin.

Before getting Python 3.9 there, Sage would build
using system Python 3.8.12.

It now deems system Python 3.9 unusable, and builds
a lacking Python, see #33079.

Logs for failed build of Sage 9.5.beta9 + #33078:

- https://aij.ovh/sage/logs/slel-2021-12-27-cyg-sage-9-5-b9-33078.zip



---

archive/issue_comments_659440.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,6 @@\n unless configured with\n \n ```\n-./configure --with-python3=/usr/bin/python3\n+./configure --with-python=/usr/bin/python3\n ```\n \n``````\n",
    "created_at": "2021-12-28T01:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659440",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,6 @@
 unless configured with
 
 ```
-./configure --with-python3=/usr/bin/python3
+./configure --with-python=/usr/bin/python3
 ```
 
``````




---

archive/issue_comments_659441.json:
```json
{
    "body": "<a id='comment:5'></a>from config.log: \n\n```\ng++ -shared -Wl,--enable-auto-image-base conftest.dir/temp.cygwin-3.3.3-x86_64-3.9/conftest.o -L/home/s/sage-9-5-b9-33078/conftest_venv/lib/python3.9/config -L/usr/lib -lpython3.9 -o conftest.dir/lib.cygwin-3.3.3-x86_64-3.9/config_check_distutils_cxx.cpython-39-x86_64-cygwin.dll\n\tCFLAGS = \"-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -ggdb -O2 -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector-strong --param=ssp-buffer-size=4 -DOPENSSL_NO_SSL3=1 -I/usr/include/uuid/ -fdebug-prefix-map=/pub/devel/python/python39/python39-3.9.9-1.x86_64/build=/usr/src/debug/python39-3.9.9-1 -fdebug-prefix-map=/pub/devel/python/python39/python39-3.9.9-1.x86_64/src/Python-3.9.9=/usr/src/debug/python39-3.9.9-1 -ggdb -O2 -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector-strong --param=ssp-buffer-size=4 -DOPENSSL_NO_SSL3=1 -I/usr/include/uuid/ -fdebug-prefix-map=/pub/devel/python/python39/python39-3.9.9-1.x86_64/build=/usr/src/debug/python39-3.9.9-1 -fdebug-prefix-map=/pub/devel/python/python39/python39-3.9.9-1.x86_64/src/Python-3.9.9=/usr/src/debug/python39-3.9.9-1\"\nconfigure:35820: result: no, this is a misconfigured Python whose sysconfig compiler/linker flags contain -I or -L options, which may cause wrong versions of libraries to leak into the build of Python packages - see https://trac.sagemath.org/ticket/31132; to use it anyway, use ./configure --with-python=/usr/bin/python3\n```\n\nIt's the `-I/usr/include/uuid/` above that our configure script does not like.\n\n`./configure --with-python=/usr/bin/python3` as you wrote in the ticket description is a good workaround.",
    "created_at": "2021-12-28T01:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659441",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>from config.log: 

```
g++ -shared -Wl,--enable-auto-image-base conftest.dir/temp.cygwin-3.3.3-x86_64-3.9/conftest.o -L/home/s/sage-9-5-b9-33078/conftest_venv/lib/python3.9/config -L/usr/lib -lpython3.9 -o conftest.dir/lib.cygwin-3.3.3-x86_64-3.9/config_check_distutils_cxx.cpython-39-x86_64-cygwin.dll
	CFLAGS = "-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -ggdb -O2 -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector-strong --param=ssp-buffer-size=4 -DOPENSSL_NO_SSL3=1 -I/usr/include/uuid/ -fdebug-prefix-map=/pub/devel/python/python39/python39-3.9.9-1.x86_64/build=/usr/src/debug/python39-3.9.9-1 -fdebug-prefix-map=/pub/devel/python/python39/python39-3.9.9-1.x86_64/src/Python-3.9.9=/usr/src/debug/python39-3.9.9-1 -ggdb -O2 -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector-strong --param=ssp-buffer-size=4 -DOPENSSL_NO_SSL3=1 -I/usr/include/uuid/ -fdebug-prefix-map=/pub/devel/python/python39/python39-3.9.9-1.x86_64/build=/usr/src/debug/python39-3.9.9-1 -fdebug-prefix-map=/pub/devel/python/python39/python39-3.9.9-1.x86_64/src/Python-3.9.9=/usr/src/debug/python39-3.9.9-1"
configure:35820: result: no, this is a misconfigured Python whose sysconfig compiler/linker flags contain -I or -L options, which may cause wrong versions of libraries to leak into the build of Python packages - see https://trac.sagemath.org/ticket/31132; to use it anyway, use ./configure --with-python=/usr/bin/python3
```

It's the `-I/usr/include/uuid/` above that our configure script does not like.

`./configure --with-python=/usr/bin/python3` as you wrote in the ticket description is a good workaround.



---

archive/issue_comments_659442.json:
```json
{
    "body": "<a id='comment:6'></a>It might be worth reporting this to Cygwin as a bug",
    "created_at": "2021-12-28T01:07:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659442",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>It might be worth reporting this to Cygwin as a bug



---

archive/issue_comments_659443.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Not yet reported upstream; Will do shortly.\"",
    "created_at": "2021-12-28T01:22:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659443",
    "user": "https://github.com/mkoeppe"
}
```

Changing upstream from "N/A" to "Not yet reported upstream; Will do shortly."



---

archive/issue_comments_659444.json:
```json
{
    "body": "<a id='comment:8'></a>This is similar to the recent bug in Homebrew's packaging of python - #31132.",
    "created_at": "2021-12-28T01:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659444",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>This is similar to the recent bug in Homebrew's packaging of python - #31132.



---

archive/issue_comments_659445.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,5 @@\n ./configure --with-python=/usr/bin/python3\n ```\n \n+Upstream report:\n+https://cygwin.com/pipermail/cygwin/2021-December/250302.html\n``````\n",
    "created_at": "2021-12-28T01:29:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659445",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,5 @@
 ./configure --with-python=/usr/bin/python3
 ```
 
+Upstream report:
+https://cygwin.com/pipermail/cygwin/2021-December/250302.html
``````




---

archive/issue_comments_659446.json:
```json
{
    "body": "Changing upstream from \"Not yet reported upstream; Will do shortly.\" to \"Reported upstream. No feedback yet.\"",
    "created_at": "2021-12-28T01:29:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659446",
    "user": "https://github.com/mkoeppe"
}
```

Changing upstream from "Not yet reported upstream; Will do shortly." to "Reported upstream. No feedback yet."



---

archive/issue_comments_659447.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-12-28T01:33:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659447",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_659448.json:
```json
{
    "body": "<a id='comment:11'></a>New cygwin package version - https://cygwin.com/pipermail/cygwin/2021-December/250304.html",
    "created_at": "2021-12-28T16:57:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659448",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>New cygwin package version - https://cygwin.com/pipermail/cygwin/2021-December/250304.html



---

archive/issue_comments_659449.json:
```json
{
    "body": "<a id='comment:13'></a>Could someone who can run a local cygwin please test this branch with this cygwin package?",
    "created_at": "2021-12-28T19:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659449",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>Could someone who can run a local cygwin please test this branch with this cygwin package?



---

archive/issue_comments_659450.json:
```json
{
    "body": "<a id='comment:14'></a>What exactly should I test?",
    "created_at": "2021-12-28T19:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659450",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:14'></a>What exactly should I test?



---

archive/issue_comments_659451.json:
```json
{
    "body": "<a id='comment:15'></a>Install `python39-3.9.9-3` and `python39-devel-3.9.9-3` (these are test packages), \nthen on this branch here run `./bootstrap && ./configure --with-system-python3=force && make build`",
    "created_at": "2021-12-28T20:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659451",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>Install `python39-3.9.9-3` and `python39-devel-3.9.9-3` (these are test packages), 
then on this branch here run `./bootstrap && ./configure --with-system-python3=force && make build`



---

archive/issue_comments_659452.json:
```json
{
    "body": "<a id='comment:16'></a>Hmm. Will this trigger recompilation of all other packages, or are these standalone?",
    "created_at": "2021-12-28T20:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659452",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:16'></a>Hmm. Will this trigger recompilation of all other packages, or are these standalone?



---

archive/issue_comments_659453.json:
```json
{
    "body": "<a id='comment:17'></a>Make that `./bootstrap && ./configure --with-system-python3=force --with-sage-venv && make build`. If you are already on 9.5.beta9, then this will only rebuild Python packages in a new virtual environment.",
    "created_at": "2021-12-28T22:50:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659453",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>Make that `./bootstrap && ./configure --with-system-python3=force --with-sage-venv && make build`. If you are already on 9.5.beta9, then this will only rebuild Python packages in a new virtual environment.



---

archive/issue_comments_659454.json:
```json
{
    "body": "<a id='comment:18'></a>Sorry but I need more details.  I have a freshly installed 9.5.beta9 with the regular python (and a couple patches for packages that would otherwise not have compiled).  What should I type and in what order? And what should I do after that to get back to my previous install?",
    "created_at": "2021-12-29T11:19:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659454",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:18'></a>Sorry but I need more details.  I have a freshly installed 9.5.beta9 with the regular python (and a couple patches for packages that would otherwise not have compiled).  What should I type and in what order? And what should I do after that to get back to my previous install?



---

archive/issue_comments_659455.json:
```json
{
    "body": "<a id='comment:19'></a>0. In the cygwin terminal, type `./sage -python --version`. This will probably output 3.8.x. Then type `ls -l venv && ./config.status --config` and save the output for later reference.\n\n1. Use the cygwin setup program. Search for `python39`, check \"test\" in the top right, and select `python39-3.9.9-3` and `python39-devel-3.9.9-3` for installation.\n\n2. In the cygwin terminal, type `python3 --version`; this should output 3.9.9\n\n3. In the cygwin terminal, type `./configure --with-system-python3=force` and then verify that the output of `ls -l venv` includes `python3.9`.\n\n4. Type `make build`\n\n\nTo go back to the previous install, do `./configure --with-python=python3.8 --with-system-python3=force` (adding options that were shown in step 0 by `./config.status --config`)",
    "created_at": "2021-12-29T22:41:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659455",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>0. In the cygwin terminal, type `./sage -python --version`. This will probably output 3.8.x. Then type `ls -l venv && ./config.status --config` and save the output for later reference.

1. Use the cygwin setup program. Search for `python39`, check "test" in the top right, and select `python39-3.9.9-3` and `python39-devel-3.9.9-3` for installation.

2. In the cygwin terminal, type `python3 --version`; this should output 3.9.9

3. In the cygwin terminal, type `./configure --with-system-python3=force` and then verify that the output of `ls -l venv` includes `python3.9`.

4. Type `make build`


To go back to the previous install, do `./configure --with-python=python3.8 --with-system-python3=force` (adding options that were shown in step 0 by `./config.status --config`)



---

archive/issue_comments_659456.json:
```json
{
    "body": "<a id='comment:20'></a>Thanks!\n\nHmm. There is no `python39-devel-3.9.9-3` on the cygwin package list. Is that a problem?\n\n```\nskraeling@moria ~/sage\n$ ./sage -python --version\nPython 3.8.10\n\nskraeling@moria ~/sage\n$ ls -l venv && ./config.status --config\nlrwxrwxrwx 1 skraeling None 33 Dec 28 18:03 venv -> local/var/lib/sage/venv-python3.8\n```",
    "created_at": "2021-12-29T22:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659456",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:20'></a>Thanks!

Hmm. There is no `python39-devel-3.9.9-3` on the cygwin package list. Is that a problem?

```
skraeling@moria ~/sage
$ ./sage -python --version
Python 3.8.10

skraeling@moria ~/sage
$ ls -l venv && ./config.status --config
lrwxrwxrwx 1 skraeling None 33 Dec 28 18:03 venv -> local/var/lib/sage/venv-python3.8
```



---

archive/issue_comments_659457.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:20 gh-darijgr]:\n>  There is no `python39-devel-3.9.9-3` on the cygwin package list.\n\n\nThere is but you need to enable \"test packages\" in the installer",
    "created_at": "2021-12-29T23:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659457",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>Replying to [comment:20 gh-darijgr]:
>  There is no `python39-devel-3.9.9-3` on the cygwin package list.


There is but you need to enable "test packages" in the installer



---

archive/issue_comments_659458.json:
```json
{
    "body": "<a id='comment:22'></a>Here's what it shows:\nhttps://ibb.co/TKPSvFj\nShould I pick a better mirror?",
    "created_at": "2021-12-30T02:20:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659458",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:22'></a>Here's what it shows:
https://ibb.co/TKPSvFj
Should I pick a better mirror?



---

archive/issue_comments_659459.json:
```json
{
    "body": "<a id='comment:23'></a>Also, the Python site https://www.python.org/downloads/release/python-393/ says:\n\n> NOTE: The release you're looking at has been recalled due to unintentional breakage of ABI compatibility with C extensions built in Python 3.9.0 - 3.9.2. Details in bpo-43710. Please use Python 3.9.4 or newer instead.\n\n\nWait for 3.9.4 to appear in Cygwin?",
    "created_at": "2021-12-30T02:24:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659459",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:23'></a>Also, the Python site https://www.python.org/downloads/release/python-393/ says:

> NOTE: The release you're looking at has been recalled due to unintentional breakage of ABI compatibility with C extensions built in Python 3.9.0 - 3.9.2. Details in bpo-43710. Please use Python 3.9.4 or newer instead.


Wait for 3.9.4 to appear in Cygwin?



---

archive/issue_comments_659460.json:
```json
{
    "body": "<a id='comment:24'></a>To right corner - check checkbox Test",
    "created_at": "2021-12-30T02:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659460",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>To right corner - check checkbox Test



---

archive/issue_comments_659461.json:
```json
{
    "body": "<a id='comment:25'></a>We don't want 3.9.3, we want 3.9.9-3.\n\nIn your screenshot, the popup has\n\"Skip\", \"3.9.9-1\", \"3.9.9-3 (Test)\".\n\nPick \"3.9.9-3 (Test)\".\n\nSame for python39-devel.",
    "created_at": "2021-12-30T03:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659461",
    "user": "https://github.com/slel"
}
```

<a id='comment:25'></a>We don't want 3.9.3, we want 3.9.9-3.

In your screenshot, the popup has
"Skip", "3.9.9-1", "3.9.9-3 (Test)".

Pick "3.9.9-3 (Test)".

Same for python39-devel.



---

archive/issue_comments_659462.json:
```json
{
    "body": "<a id='comment:26'></a>To clarify, Cygwin packages always add a \"-1\" etc \n\"packaging version\" to upstream version numbers.\n\nFor the Python 3.9.9 release, python39-3.9.9-1\nwas the first take at packaging it for Cygwin.\n\nThe new (test version) of a Cygwin package for\nthe same Python 3.9.9 (with some cygwin-specific\npackaging fixes) is now python39-3.9.9-3,\nonly available in Cygwin's \"Test\" packages\nuntil it has been tested enough.",
    "created_at": "2021-12-30T06:51:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659462",
    "user": "https://github.com/slel"
}
```

<a id='comment:26'></a>To clarify, Cygwin packages always add a "-1" etc 
"packaging version" to upstream version numbers.

For the Python 3.9.9 release, python39-3.9.9-1
was the first take at packaging it for Cygwin.

The new (test version) of a Cygwin package for
the same Python 3.9.9 (with some cygwin-specific
packaging fixes) is now python39-3.9.9-3,
only available in Cygwin's "Test" packages
until it has been tested enough.



---

archive/issue_comments_659463.json:
```json
{
    "body": "<a id='comment:27'></a>Ouch -- I need to get a better pair of glasses (or just stop multitasking).\n\nI got python39-3.9.9-3 installed, but I don't see anything similar for python-devel on the cygwin package list. Where should I look for it?",
    "created_at": "2021-12-30T17:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659463",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:27'></a>Ouch -- I need to get a better pair of glasses (or just stop multitasking).

I got python39-3.9.9-3 installed, but I don't see anything similar for python-devel on the cygwin package list. Where should I look for it?



---

archive/issue_comments_659464.json:
```json
{
    "body": "<a id='comment:28'></a>python39-devel?",
    "created_at": "2021-12-30T17:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659464",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>python39-devel?



---

archive/issue_comments_659465.json:
```json
{
    "body": "<a id='comment:29'></a>The only option (even with Test checked) is 3.9.9-1. Could that be enough?",
    "created_at": "2021-12-30T17:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659465",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:29'></a>The only option (even with Test checked) is 3.9.9-1. Could that be enough?



---

archive/issue_comments_659466.json:
```json
{
    "body": "<a id='comment:30'></a>Should be fine.",
    "created_at": "2021-12-30T17:32:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659466",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>Should be fine.



---

archive/issue_comments_659467.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-30T18:58:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659467",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_659468.json:
```json
{
    "body": "Changing commit from \"9cba975913c9ca3a4c7f7ff69a8a39dba80c04cd\" to \"65418dec55872e7daa196cd13d2568ed66552b45\"",
    "created_at": "2021-12-30T18:58:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659468",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9cba975913c9ca3a4c7f7ff69a8a39dba80c04cd" to "65418dec55872e7daa196cd13d2568ed66552b45"



---

archive/issue_comments_659469.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,5 +5,7 @@\n ./configure --with-python=/usr/bin/python3\n ```\n \n+Cygwin packages: https://cygwin.com/cgi-bin2/package-grep.cgi?grep=python39&arch=x86_64\n+\n Upstream report:\n https://cygwin.com/pipermail/cygwin/2021-December/250302.html\n``````\n",
    "created_at": "2021-12-30T18:59:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659469",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,5 +5,7 @@
 ./configure --with-python=/usr/bin/python3
 ```
 
+Cygwin packages: https://cygwin.com/cgi-bin2/package-grep.cgi?grep=python39&arch=x86_64
+
 Upstream report:
 https://cygwin.com/pipermail/cygwin/2021-December/250302.html
``````




---

archive/issue_comments_659470.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,5 @@\n ./configure --with-python=/usr/bin/python3\n ```\n \n-Cygwin packages: https://cygwin.com/cgi-bin2/package-grep.cgi?grep=python39&arch=x86_64\n-\n Upstream report:\n https://cygwin.com/pipermail/cygwin/2021-December/250302.html\n``````\n",
    "created_at": "2021-12-30T19:03:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659470",
    "user": "https://github.com/darijgr"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,5 @@
 ./configure --with-python=/usr/bin/python3
 ```
 
-Cygwin packages: https://cygwin.com/cgi-bin2/package-grep.cgi?grep=python39&arch=x86_64
-
 Upstream report:
 https://cygwin.com/pipermail/cygwin/2021-December/250302.html
``````




---

archive/issue_comments_659471.json:
```json
{
    "body": "<a id='comment:33'></a>OK! I'm at the `make build` stage now. Hoping it doesn't again take 2 days...\n\n---\nNew commits:",
    "created_at": "2021-12-30T19:03:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659471",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:33'></a>OK! I'm at the `make build` stage now. Hoping it doesn't again take 2 days...

---
New commits:



---

archive/issue_comments_659472.json:
```json
{
    "body": "<a id='comment:34'></a>Confirming: mkoeppe's recipe (comment:19) works:\n\n```\nsage: python_help()\n\nWelcome to Python 3.9's help utility!\n[...]\n```\n\nI haven't tested the branch, though.\n\nI assume I don't need to go back to the old version, seeing that it has worked?",
    "created_at": "2021-12-31T17:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659472",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:34'></a>Confirming: mkoeppe's recipe (comment:19) works:

```
sage: python_help()

Welcome to Python 3.9's help utility!
[...]
```

I haven't tested the branch, though.

I assume I don't need to go back to the old version, seeing that it has worked?



---

archive/issue_comments_659473.json:
```json
{
    "body": "<a id='comment:35'></a>Thanks for testing! I'll report to the cygwin maintainers that this version seems to be working well (and solves our problem).",
    "created_at": "2021-12-31T18:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659473",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>Thanks for testing! I'll report to the cygwin maintainers that this version seems to be working well (and solves our problem).



---

archive/issue_comments_659474.json:
```json
{
    "body": "<a id='comment:36'></a>Replying to [comment:34 gh-darijgr]:\n> I assume I don't need to go back to the old version, seeing that it has worked?\n\n\nI agree",
    "created_at": "2021-12-31T18:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659474",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>Replying to [comment:34 gh-darijgr]:
> I assume I don't need to go back to the old version, seeing that it has worked?


I agree



---

archive/issue_comments_659475.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-12-31T18:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659475",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_659476.json:
```json
{
    "body": "Changing upstream from \"Reported upstream. No feedback yet.\" to \"Fixed upstream, but not in a stable release.\"",
    "created_at": "2021-12-31T18:53:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659476",
    "user": "https://github.com/mkoeppe"
}
```

Changing upstream from "Reported upstream. No feedback yet." to "Fixed upstream, but not in a stable release."



---

archive/issue_comments_659477.json:
```json
{
    "body": "<a id='comment:38'></a>Let's wait for the fixed package to arrive in the main Cygwin repository - I assume there will be an announcement in https://cygwin.com/pipermail/cygwin/2022-January/thread.html",
    "created_at": "2022-01-02T19:26:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659477",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>Let's wait for the fixed package to arrive in the main Cygwin repository - I assume there will be an announcement in https://cygwin.com/pipermail/cygwin/2022-January/thread.html



---

archive/issue_events_087405.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-12T17:35:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33078#event-87405"
}
```



---

archive/issue_comments_659478.json:
```json
{
    "body": "<a id='comment:40'></a>There is now `python39-3.9.10-1`, needs testing",
    "created_at": "2022-01-25T00:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659478",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:40'></a>There is now `python39-3.9.10-1`, needs testing



---

archive/issue_comments_659479.json:
```json
{
    "body": "<a id='comment:41'></a>Let's move this forward please",
    "created_at": "2022-03-21T19:54:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659479",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>Let's move this forward please



---

archive/issue_comments_659480.json:
```json
{
    "body": "<a id='comment:42'></a>Back to my office, so I'll start the install now. Expect an answer in 2 days or so (cygwin installs are slow even if lots of packages are preinstalled).",
    "created_at": "2022-03-22T17:12:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659480",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:42'></a>Back to my office, so I'll start the install now. Expect an answer in 2 days or so (cygwin installs are slow even if lots of packages are preinstalled).



---

archive/issue_comments_659481.json:
```json
{
    "body": "<a id='comment:43'></a>\n```\n\nreal    2869m24.160s\nuser    651m22.088s\nsys     542m26.524s\n***************************************************************\nError building Sage.\n\nThe following package(s) may have failed to build (not necessarily\nduring this run of 'make all-build'):\n\n* package:         scipy-1.7.3\n  last build time: 2390901 Mar 24\n  log file:        /home/dg899/sage/logs/pkgs/scipy-1.7.3.log\n```\n\nHere is the end of this log file:\n\n```\n  gcc -shared -Wl,--enable-auto-image-base -shared -L/home/dg899/sage/local/lib -Wl,-rpath,/home/dg899/sage/local/lib -L/home/dg899/sage/local/lib -Wl,-rpath,/home/dg899/sage/local/lib -D_GNU_SOURCE build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_misc.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/geom2_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/geom_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/global_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/io_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/libqhull_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/mem_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/merge_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/poly2_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/poly_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/qset_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/random_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/rboxlib_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/stat_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/user_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/usermem_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/userprintf_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/userprintf_rbox_r.o -L/home/dg899/sage/local/lib -L/home/dg899/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/config -L/usr/lib -Lbuild/temp.cygwin-3.3.4-x86_64-3.9 -lopenblas.dll -lopenblas.dll -lpython3.9 -o build/lib.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull.cpython-39-x86_64-cygwin.dll\n  /usr/lib/gcc/x86_64-pc-cygwin/11/../../../../x86_64-pc-cygwin/bin/ld: final link failed: Device or resource busy\n  collect2: error: ld returned 1 exit status\n  error: Command \"gcc -shared -Wl,--enable-auto-image-base -shared -L/home/dg899/sage/local/lib -Wl,-rpath,/home/dg899/sage/local/lib -L/home/dg899/sage/local/lib -Wl,-rpath,/home/dg899/sage/local/lib -D_GNU_SOURCE build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_misc.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/geom2_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/geom_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/global_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/io_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/libqhull_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/mem_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/merge_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/poly2_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/poly_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/qset_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/random_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/rboxlib_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/stat_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/user_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/usermem_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/userprintf_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/userprintf_rbox_r.o -L/home/dg899/sage/local/lib -L/home/dg899/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/config -L/usr/lib -Lbuild/temp.cygwin-3.3.4-x86_64-3.9 -lopenblas.dll -lopenblas.dll -lpython3.9 -o build/lib.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull.cpython-39-x86_64-cygwin.dll\" failed with exit status 1\n\n  ########### EXT COMPILER OPTIMIZATION ###########\n  Platform      :\n    Architecture: x64\n    Compiler    : gcc\n\n  CPU baseline  :\n    Requested   : 'min'\n    Enabled     : SSE SSE2 SSE3\n    Flags       : -msse -msse2 -msse3\n    Extra checks: none\n\n  CPU dispatch  :\n    Requested   : 'max -xop -fma4'\n    Enabled     : SSSE3 SSE41 POPCNT SSE42 AVX F16C FMA3 AVX2 AVX512F AVX512CD AVX512_KNL AVX512_KNM AVX512_SKX AVX512_CLX AVX512_CNL AVX512_ICL\n    Generated   : none\n  CCompilerOpt.cache_flush[809] : write cache to path -> /home/dg899/sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/scipy-1.7.3/src/build/temp.cygwin-3.3.4-x86_64-3.9/ccompiler_opt_cache_ext.py\n\n  ########### CLIB COMPILER OPTIMIZATION ###########\n  Platform      :\n    Architecture: x64\n    Compiler    : gcc\n\n  CPU baseline  :\n    Requested   : 'min'\n    Enabled     : SSE SSE2 SSE3\n    Flags       : -msse -msse2 -msse3\n    Extra checks: none\n\n  CPU dispatch  :\n    Requested   : 'max -xop -fma4'\n    Enabled     : SSSE3 SSE41 POPCNT SSE42 AVX F16C FMA3 AVX2 AVX512F AVX512CD AVX512_KNL AVX512_KNM AVX512_SKX AVX512_CLX AVX512_CNL AVX512_ICL\n    Generated   : none\n  CCompilerOpt.cache_flush[809] : write cache to path -> /home/dg899/sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/scipy-1.7.3/src/build/temp.cygwin-3.3.4-x86_64-3.9/ccompiler_opt_cache_clib.py\n  error: subprocess-exited-with-error\n\n  \u00d7 Building wheel for scipy (pyproject.toml) did not run successfully.\n  \u2502 exit code: 1\n  \u2570\u2500> See above for output.\n\n  note: This error originates from a subprocess, and is likely not a problem with pip.\n  full command: /home/dg899/sage/local/var/lib/sage/venv-python3.9/bin/python3 /home/dg899/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py build_wheel /tmp/tmpb06dquwe\n  cwd: /home/dg899/sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/scipy-1.7.3/src\n  Building wheel for scipy (pyproject.toml): finished with status 'error'\n  ERROR: Failed building wheel for scipy\nFailed to build scipy\nERROR: Failed to build one or more wheels\n```\n\nThis looks like a parallel-compile-related heisenbug, so I'll now try \"make build\" again.",
    "created_at": "2022-03-24T18:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659481",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:43'></a>
```

real    2869m24.160s
user    651m22.088s
sys     542m26.524s
***************************************************************
Error building Sage.

The following package(s) may have failed to build (not necessarily
during this run of 'make all-build'):

* package:         scipy-1.7.3
  last build time: 2390901 Mar 24
  log file:        /home/dg899/sage/logs/pkgs/scipy-1.7.3.log
```

Here is the end of this log file:

```
  gcc -shared -Wl,--enable-auto-image-base -shared -L/home/dg899/sage/local/lib -Wl,-rpath,/home/dg899/sage/local/lib -L/home/dg899/sage/local/lib -Wl,-rpath,/home/dg899/sage/local/lib -D_GNU_SOURCE build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_misc.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/geom2_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/geom_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/global_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/io_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/libqhull_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/mem_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/merge_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/poly2_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/poly_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/qset_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/random_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/rboxlib_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/stat_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/user_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/usermem_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/userprintf_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/userprintf_rbox_r.o -L/home/dg899/sage/local/lib -L/home/dg899/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/config -L/usr/lib -Lbuild/temp.cygwin-3.3.4-x86_64-3.9 -lopenblas.dll -lopenblas.dll -lpython3.9 -o build/lib.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull.cpython-39-x86_64-cygwin.dll
  /usr/lib/gcc/x86_64-pc-cygwin/11/../../../../x86_64-pc-cygwin/bin/ld: final link failed: Device or resource busy
  collect2: error: ld returned 1 exit status
  error: Command "gcc -shared -Wl,--enable-auto-image-base -shared -L/home/dg899/sage/local/lib -Wl,-rpath,/home/dg899/sage/local/lib -L/home/dg899/sage/local/lib -Wl,-rpath,/home/dg899/sage/local/lib -D_GNU_SOURCE build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_misc.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/geom2_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/geom_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/global_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/io_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/libqhull_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/mem_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/merge_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/poly2_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/poly_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/qset_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/random_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/rboxlib_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/stat_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/user_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/usermem_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/userprintf_r.o build/temp.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull_src/src/userprintf_rbox_r.o -L/home/dg899/sage/local/lib -L/home/dg899/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/config -L/usr/lib -Lbuild/temp.cygwin-3.3.4-x86_64-3.9 -lopenblas.dll -lopenblas.dll -lpython3.9 -o build/lib.cygwin-3.3.4-x86_64-3.9/scipy/spatial/qhull.cpython-39-x86_64-cygwin.dll" failed with exit status 1

  ########### EXT COMPILER OPTIMIZATION ###########
  Platform      :
    Architecture: x64
    Compiler    : gcc

  CPU baseline  :
    Requested   : 'min'
    Enabled     : SSE SSE2 SSE3
    Flags       : -msse -msse2 -msse3
    Extra checks: none

  CPU dispatch  :
    Requested   : 'max -xop -fma4'
    Enabled     : SSSE3 SSE41 POPCNT SSE42 AVX F16C FMA3 AVX2 AVX512F AVX512CD AVX512_KNL AVX512_KNM AVX512_SKX AVX512_CLX AVX512_CNL AVX512_ICL
    Generated   : none
  CCompilerOpt.cache_flush[809] : write cache to path -> /home/dg899/sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/scipy-1.7.3/src/build/temp.cygwin-3.3.4-x86_64-3.9/ccompiler_opt_cache_ext.py

  ########### CLIB COMPILER OPTIMIZATION ###########
  Platform      :
    Architecture: x64
    Compiler    : gcc

  CPU baseline  :
    Requested   : 'min'
    Enabled     : SSE SSE2 SSE3
    Flags       : -msse -msse2 -msse3
    Extra checks: none

  CPU dispatch  :
    Requested   : 'max -xop -fma4'
    Enabled     : SSSE3 SSE41 POPCNT SSE42 AVX F16C FMA3 AVX2 AVX512F AVX512CD AVX512_KNL AVX512_KNM AVX512_SKX AVX512_CLX AVX512_CNL AVX512_ICL
    Generated   : none
  CCompilerOpt.cache_flush[809] : write cache to path -> /home/dg899/sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/scipy-1.7.3/src/build/temp.cygwin-3.3.4-x86_64-3.9/ccompiler_opt_cache_clib.py
  error: subprocess-exited-with-error

  × Building wheel for scipy (pyproject.toml) did not run successfully.
  │ exit code: 1
  ╰─> See above for output.

  note: This error originates from a subprocess, and is likely not a problem with pip.
  full command: /home/dg899/sage/local/var/lib/sage/venv-python3.9/bin/python3 /home/dg899/sage/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/pip/_vendor/pep517/in_process/_in_process.py build_wheel /tmp/tmpb06dquwe
  cwd: /home/dg899/sage/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/scipy-1.7.3/src
  Building wheel for scipy (pyproject.toml): finished with status 'error'
  ERROR: Failed building wheel for scipy
Failed to build scipy
ERROR: Failed to build one or more wheels
```

This looks like a parallel-compile-related heisenbug, so I'll now try "make build" again.



---

archive/issue_comments_659482.json:
```json
{
    "body": "<a id='comment:44'></a>As I hoped, it has now compiled without further problems and is working:\n\n```\ndg899@MATH-6264WD ~/sage\n$ ./sage\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 9.6.beta5, Release Date: 2022-03-12               \u2502\n\u2502 Using Python 3.9.10. Type \"help()\" for help.                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n```",
    "created_at": "2022-03-25T18:35:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659482",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:44'></a>As I hoped, it has now compiled without further problems and is working:

```
dg899@MATH-6264WD ~/sage
$ ./sage
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 9.6.beta5, Release Date: 2022-03-12               │
│ Using Python 3.9.10. Type "help()" for help.                       │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```



---

archive/issue_comments_659483.json:
```json
{
    "body": "<a id='comment:45'></a>Thanks for testing!",
    "created_at": "2022-03-25T18:50:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659483",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>Thanks for testing!



---

archive/issue_comments_659484.json:
```json
{
    "body": "Changing upstream from \"Fixed upstream, but not in a stable release.\" to \"Fixed upstream, in a later stable release.\"",
    "created_at": "2022-03-25T18:50:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659484",
    "user": "https://github.com/mkoeppe"
}
```

Changing upstream from "Fixed upstream, but not in a stable release." to "Fixed upstream, in a later stable release."



---

archive/issue_comments_659485.json:
```json
{
    "body": "<a id='comment:46'></a>I interpret this as a positive review",
    "created_at": "2022-04-11T16:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659485",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>I interpret this as a positive review



---

archive/issue_comments_659486.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2022-04-11T16:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659486",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_659487.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-04-11T16:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659487",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_659488.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Darij Grinberg\"",
    "created_at": "2022-04-11T16:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659488",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "Darij Grinberg"



---

archive/issue_comments_659489.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2022-04-19T21:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659489",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from critical to blocker.



---

archive/issue_events_087406.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-04-21T21:07:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33078#event-87406"
}
```



---

archive/issue_comments_659490.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-04-21T21:07:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659490",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_659491.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/use_system_python_3_on_cygwin\" to \"65418dec55872e7daa196cd13d2568ed66552b45\"",
    "created_at": "2022-04-21T21:07:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33078#issuecomment-659491",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/use_system_python_3_on_cygwin" to "65418dec55872e7daa196cd13d2568ed66552b45"
