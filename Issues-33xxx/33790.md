# Issue 33790: sage.libs.ecl, sage.interfaces.maxima*: Do not use ECL_TMP

archive/issues_033553.json:
```json
{
    "body": "CC:  @orlitzky @spaghettisalat @nbruin\n\n(split out from #33213)\n\nWe have historically massaged TMPDIR and TMP when interfacing with ECL to ensure that SAGE_TMP was used consistently for temporary\nfiles. Simply removing this code seems to do the trick, since ECL\nwants to use the system location by default.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/33790\n\n",
    "closed_at": "2022-06-19T15:24:33Z",
    "created_at": "2022-05-03T14:33:33Z",
    "labels": [
        "component: interfaces"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "sage.libs.ecl, sage.interfaces.maxima*: Do not use ECL_TMP",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33790",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @orlitzky @spaghettisalat @nbruin

(split out from #33213)

We have historically massaged TMPDIR and TMP when interfacing with ECL to ensure that SAGE_TMP was used consistently for temporary
files. Simply removing this code seems to do the trick, since ECL
wants to use the system location by default.


Issue created by migration from https://trac.sagemath.org/ticket/33790





---

archive/issue_comments_477018.json:
```json
{
    "body": "The fallback within ECL is a little naive, to `/tmp` if `TMPDIR` is unset. But I think that should work on all of our supported platforms, and the GH actions didn't turn up any problems.\n\nIf not we could pass in `tempfile.gettempdir()` from python instead.",
    "created_at": "2022-05-03T15:09:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33790#issuecomment-477018",
    "user": "https://github.com/orlitzky"
}
```

The fallback within ECL is a little naive, to `/tmp` if `TMPDIR` is unset. But I think that should work on all of our supported platforms, and the GH actions didn't turn up any problems.

If not we could pass in `tempfile.gettempdir()` from python instead.



---

archive/issue_events_088767.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33790",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33790#event-88767"
}
```



---

archive/issue_comments_477019.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-05-09T23:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33790#issuecomment-477019",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_477020.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-05-09T23:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33790#issuecomment-477020",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_477021.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-06-13T10:57:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33790#issuecomment-477021",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_477022.json:
```json
{
    "body": "rebased over  \t#33829 (and Sage 9.7.beta2)\n\n---\nNew commits:",
    "created_at": "2022-06-13T10:57:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33790#issuecomment-477022",
    "user": "https://github.com/dimpase"
}
```

rebased over  	#33829 (and Sage 9.7.beta2)

---
New commits:



---

archive/issue_comments_477023.json:
```json
{
    "body": "I think you got the dependencies the wrong way around",
    "created_at": "2022-06-13T17:09:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33790#issuecomment-477023",
    "user": "https://github.com/mkoeppe"
}
```

I think you got the dependencies the wrong way around



---

archive/issue_comments_477024.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-06-13T17:09:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33790#issuecomment-477024",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_477025.json:
```json
{
    "body": "should be like this, sorry.",
    "created_at": "2022-06-13T17:38:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33790#issuecomment-477025",
    "user": "https://github.com/dimpase"
}
```

should be like this, sorry.



---

archive/issue_comments_477026.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-06-13T17:38:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33790#issuecomment-477026",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_477027.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-06-13T18:05:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33790#issuecomment-477027",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_088768.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-06-19T15:24:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33790",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33790#event-88768"
}
```



---

archive/issue_comments_477028.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-06-19T15:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33790",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33790#issuecomment-477028",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
