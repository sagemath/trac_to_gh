# Issue 33901: sage-bootstrap-python doesn't work when pyenv shadows all usable pythons in PATH

archive/issues_033664.json:
```json
{
    "body": "The script sage-bootstrap-python attempts to call a command like\n\"/path/to/python\" -c \"...\"\nPyenv python treats \"python\" differently from just python, giving the output:\n/home/.../.pyenv/shims/python: line 1: 2: command not found\n\nWith pyenv installed and configured normally, the script will never check a non-pyenv version of python, and thus will fail to find a suitable python. My fix was to attempt to remove pyenv from the PATH before testing for python.\n\nI've only confirmed this behavior on arch linux\n\n**Assignee:** @k3w1k0d3r\n\n**Keywords:** bootstrap, build, python, pyenv\n\n**Branch/Commit:** [dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c](https://github.com/sagemath/sagetrac-mirror/commit/dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c)\n\n**Reviewer:** Matthias Koeppe\n\n**Author:** Julien Grijalva\n\nIssue created by migration from https://trac.sagemath.org/ticket/33901\n\n",
    "closed_at": "2022-05-29T11:29:06Z",
    "created_at": "2022-05-25T06:27:00Z",
    "labels": [
        "component: build: configure",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "sage-bootstrap-python doesn't work when pyenv shadows all usable pythons in PATH",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33901",
    "user": "https://github.com/k3w1k0d3r"
}
```
The script sage-bootstrap-python attempts to call a command like
"/path/to/python" -c "..."
Pyenv python treats "python" differently from just python, giving the output:
/home/.../.pyenv/shims/python: line 1: 2: command not found

With pyenv installed and configured normally, the script will never check a non-pyenv version of python, and thus will fail to find a suitable python. My fix was to attempt to remove pyenv from the PATH before testing for python.

I've only confirmed this behavior on arch linux

**Assignee:** @k3w1k0d3r

**Keywords:** bootstrap, build, python, pyenv

**Branch/Commit:** [dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c](https://github.com/sagemath/sagetrac-mirror/commit/dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c)

**Reviewer:** Matthias Koeppe

**Author:** Julien Grijalva

Issue created by migration from https://trac.sagemath.org/ticket/33901





---

archive/issue_comments_552459.json:
```json
{
    "body": "**Branch:** [u/gh-k3w1k0d3r/pyfix](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-k3w1k0d3r/pyfix)",
    "created_at": "2022-05-25T06:28:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552459",
    "user": "https://github.com/k3w1k0d3r"
}
```

**Branch:** [u/gh-k3w1k0d3r/pyfix](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-k3w1k0d3r/pyfix)



---

archive/issue_comments_552460.json:
```json
{
    "body": "**Commit:** [ab156dd97eb921688d7f13082718086e1e409828](https://github.com/sagemath/sagetrac-mirror/commit/ab156dd97eb921688d7f13082718086e1e409828)",
    "created_at": "2022-05-25T06:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552460",
    "user": "https://github.com/k3w1k0d3r"
}
```

**Commit:** [ab156dd97eb921688d7f13082718086e1e409828](https://github.com/sagemath/sagetrac-mirror/commit/ab156dd97eb921688d7f13082718086e1e409828)



---

archive/issue_comments_552461.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab156dd97eb921688d7f13082718086e1e409828\">ab156dd</a></td><td><code>Small fix to sage-bootstrap-python</code></td></tr></table>\n",
    "created_at": "2022-05-25T06:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552461",
    "user": "https://github.com/k3w1k0d3r"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab156dd97eb921688d7f13082718086e1e409828">ab156dd</a></td><td><code>Small fix to sage-bootstrap-python</code></td></tr></table>




---

archive/issue_comments_552462.json:
```json
{
    "body": "**Assignee:** @k3w1k0d3r",
    "created_at": "2022-05-25T06:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552462",
    "user": "https://github.com/k3w1k0d3r"
}
```

**Assignee:** @k3w1k0d3r



---

archive/issue_events_307677.json:
```json
{
    "actor": "https://github.com/k3w1k0d3r",
    "created_at": "2022-05-25T06:28:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33901#event-307677"
}
```



---

archive/issue_events_307678.json:
```json
{
    "actor": "https://github.com/k3w1k0d3r",
    "created_at": "2022-05-25T16:40:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33901#event-307678"
}
```



---

archive/issue_events_307679.json:
```json
{
    "actor": "https://github.com/k3w1k0d3r",
    "created_at": "2022-05-25T16:40:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33901#event-307679"
}
```



---

archive/issue_comments_552463.json:
```json
{
    "body": "<a id='comment:5'></a>\nCould you please open a bug report with pyenv? It's pretty wild that they install a broken python command in PATH",
    "created_at": "2022-05-25T16:56:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552463",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Could you please open a bug report with pyenv? It's pretty wild that they install a broken python command in PATH



---

archive/issue_comments_552464.json:
```json
{
    "body": "<a id='comment:6'></a>\nyeah sure\n\ndo you think I should give up on this ticket or should I still work on it to make the build not fail?",
    "created_at": "2022-05-25T17:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552464",
    "user": "https://github.com/k3w1k0d3r"
}
```

<a id='comment:6'></a>
yeah sure

do you think I should give up on this ticket or should I still work on it to make the build not fail?



---

archive/issue_comments_552465.json:
```json
{
    "body": "<a id='comment:7'></a>\nwell I'll fix it because it's not too bad, I just used bash-only syntax and for some reason when I tested it locally it still worked",
    "created_at": "2022-05-25T17:35:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552465",
    "user": "https://github.com/k3w1k0d3r"
}
```

<a id='comment:7'></a>
well I'll fix it because it's not too bad, I just used bash-only syntax and for some reason when I tested it locally it still worked



---

archive/issue_comments_552466.json:
```json
{
    "body": "<a id='comment:8'></a>\nYes, we can merge a workaround in Sage. But the bug is in pyenv",
    "created_at": "2022-05-25T17:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552466",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Yes, we can merge a workaround in Sage. But the bug is in pyenv



---

archive/issue_comments_552467.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4421ac2f879bec4c6508cb85fe616fd92004410a\">4421ac2</a></td><td><code>removed bash-only syntax</code></td></tr></table>\n",
    "created_at": "2022-05-25T17:43:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552467",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4421ac2f879bec4c6508cb85fe616fd92004410a">4421ac2</a></td><td><code>removed bash-only syntax</code></td></tr></table>




---

archive/issue_comments_552468.json:
```json
{
    "body": "**Changing commit** from \"[ab156dd97eb921688d7f13082718086e1e409828](https://github.com/sagemath/sagetrac-mirror/commit/ab156dd97eb921688d7f13082718086e1e409828)\" to \"[4421ac2f879bec4c6508cb85fe616fd92004410a](https://github.com/sagemath/sagetrac-mirror/commit/4421ac2f879bec4c6508cb85fe616fd92004410a)\".",
    "created_at": "2022-05-25T17:43:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552468",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ab156dd97eb921688d7f13082718086e1e409828](https://github.com/sagemath/sagetrac-mirror/commit/ab156dd97eb921688d7f13082718086e1e409828)" to "[4421ac2f879bec4c6508cb85fe616fd92004410a](https://github.com/sagemath/sagetrac-mirror/commit/4421ac2f879bec4c6508cb85fe616fd92004410a)".



---

archive/issue_comments_552469.json:
```json
{
    "body": "<a id='comment:10'></a>\ngreat thank you",
    "created_at": "2022-05-25T17:43:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552469",
    "user": "https://github.com/k3w1k0d3r"
}
```

<a id='comment:10'></a>
great thank you



---

archive/issue_comments_552470.json:
```json
{
    "body": "**Changing commit** from \"[4421ac2f879bec4c6508cb85fe616fd92004410a](https://github.com/sagemath/sagetrac-mirror/commit/4421ac2f879bec4c6508cb85fe616fd92004410a)\" to \"[50d92726ed8087fe252c1ef20e81f76e77dea4b2](https://github.com/sagemath/sagetrac-mirror/commit/50d92726ed8087fe252c1ef20e81f76e77dea4b2)\".",
    "created_at": "2022-05-25T17:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552470",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4421ac2f879bec4c6508cb85fe616fd92004410a](https://github.com/sagemath/sagetrac-mirror/commit/4421ac2f879bec4c6508cb85fe616fd92004410a)" to "[50d92726ed8087fe252c1ef20e81f76e77dea4b2](https://github.com/sagemath/sagetrac-mirror/commit/50d92726ed8087fe252c1ef20e81f76e77dea4b2)".



---

archive/issue_comments_552471.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/50d92726ed8087fe252c1ef20e81f76e77dea4b2\">50d9272</a></td><td><code>+= gave strange not found errors</code></td></tr></table>\n",
    "created_at": "2022-05-25T17:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552471",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/50d92726ed8087fe252c1ef20e81f76e77dea4b2">50d9272</a></td><td><code>+= gave strange not found errors</code></td></tr></table>




---

archive/issue_events_307680.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-25T18:07:27Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "rename": {
        "from": "sage-bootstrap-python doesn't work with pyenv installed",
        "to": "sage-bootstrap-python doesn't work when pyenv shadows all usable pythons in PATH"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33901#event-307680"
}
```



---

archive/issue_comments_552472.json:
```json
{
    "body": "<a id='comment:13'></a>\n\n```\n+paths=$(echo $SAGE_ORIG_PATH | tr \":\" \"\\n\")\n+NEW_PATH=\"\"\n+for path in $paths\n```\nLoops like this are better done with IFS",
    "created_at": "2022-05-25T18:09:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552472",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>

```
+paths=$(echo $SAGE_ORIG_PATH | tr ":" "\n")
+NEW_PATH=""
+for path in $paths
```
Loops like this are better done with IFS



---

archive/issue_comments_552473.json:
```json
{
    "body": "**Changing commit** from \"[50d92726ed8087fe252c1ef20e81f76e77dea4b2](https://github.com/sagemath/sagetrac-mirror/commit/50d92726ed8087fe252c1ef20e81f76e77dea4b2)\" to \"[cd208701e75de1ff3fc10b069e16f538b16d0488](https://github.com/sagemath/sagetrac-mirror/commit/cd208701e75de1ff3fc10b069e16f538b16d0488)\".",
    "created_at": "2022-05-25T18:09:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552473",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[50d92726ed8087fe252c1ef20e81f76e77dea4b2](https://github.com/sagemath/sagetrac-mirror/commit/50d92726ed8087fe252c1ef20e81f76e77dea4b2)" to "[cd208701e75de1ff3fc10b069e16f538b16d0488](https://github.com/sagemath/sagetrac-mirror/commit/cd208701e75de1ff3fc10b069e16f538b16d0488)".



---

archive/issue_comments_552474.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd208701e75de1ff3fc10b069e16f538b16d0488\">cd20870</a></td><td><code>now works in dash shell</code></td></tr></table>\n",
    "created_at": "2022-05-25T18:09:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552474",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd208701e75de1ff3fc10b069e16f538b16d0488">cd20870</a></td><td><code>now works in dash shell</code></td></tr></table>




---

archive/issue_comments_552475.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [mkoeppe](#comment%3A13):\n> \n> ```\n> +paths=$(echo $SAGE_ORIG_PATH | tr \":\" \"\\n\")\n> +NEW_PATH=\"\"\n> +for path in $paths\n> ```\n> Loops like this are better done with IFS\n\nalright I'll change it thanks",
    "created_at": "2022-05-25T18:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552475",
    "user": "https://github.com/k3w1k0d3r"
}
```

<a id='comment:15'></a>
Replying to [mkoeppe](#comment%3A13):
> 
> ```
> +paths=$(echo $SAGE_ORIG_PATH | tr ":" "\n")
> +NEW_PATH=""
> +for path in $paths
> ```
> Loops like this are better done with IFS

alright I'll change it thanks



---

archive/issue_comments_552476.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15cd6fec54a83db8b59373c66873d8bcd4c3ae51\">15cd6fe</a></td><td><code>loop is pure sh with IFS instead of using tr</code></td></tr></table>\n",
    "created_at": "2022-05-25T18:28:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552476",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15cd6fec54a83db8b59373c66873d8bcd4c3ae51">15cd6fe</a></td><td><code>loop is pure sh with IFS instead of using tr</code></td></tr></table>




---

archive/issue_comments_552477.json:
```json
{
    "body": "**Changing commit** from \"[cd208701e75de1ff3fc10b069e16f538b16d0488](https://github.com/sagemath/sagetrac-mirror/commit/cd208701e75de1ff3fc10b069e16f538b16d0488)\" to \"[15cd6fec54a83db8b59373c66873d8bcd4c3ae51](https://github.com/sagemath/sagetrac-mirror/commit/15cd6fec54a83db8b59373c66873d8bcd4c3ae51)\".",
    "created_at": "2022-05-25T18:28:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552477",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cd208701e75de1ff3fc10b069e16f538b16d0488](https://github.com/sagemath/sagetrac-mirror/commit/cd208701e75de1ff3fc10b069e16f538b16d0488)" to "[15cd6fec54a83db8b59373c66873d8bcd4c3ae51](https://github.com/sagemath/sagetrac-mirror/commit/15cd6fec54a83db8b59373c66873d8bcd4c3ae51)".



---

archive/issue_comments_552478.json:
```json
{
    "body": "<a id='comment:17'></a>\nI realized my system sh was a symlink to bash instead of dash, which is why my local tests worked. I've now properly tested with dash, so hopefully now everything works.",
    "created_at": "2022-05-25T18:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552478",
    "user": "https://github.com/k3w1k0d3r"
}
```

<a id='comment:17'></a>
I realized my system sh was a symlink to bash instead of dash, which is why my local tests worked. I've now properly tested with dash, so hopefully now everything works.



---

archive/issue_comments_552479.json:
```json
{
    "body": "<a id='comment:18'></a>\nhttps://github.com/pyenv/pyenv/issues/2378",
    "created_at": "2022-05-25T19:08:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552479",
    "user": "https://github.com/k3w1k0d3r"
}
```

<a id='comment:18'></a>
https://github.com/pyenv/pyenv/issues/2378



---

archive/issue_comments_552480.json:
```json
{
    "body": "<a id='comment:19'></a>\nit seems that the issue with pyenv is most likely a misconfiguration on my end of some sort",
    "created_at": "2022-05-25T19:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552480",
    "user": "https://github.com/k3w1k0d3r"
}
```

<a id='comment:19'></a>
it seems that the issue with pyenv is most likely a misconfiguration on my end of some sort



---

archive/issue_comments_552481.json:
```json
{
    "body": "<a id='comment:20'></a>\nyeah the quotes issue is fixed on my system, but the old script still doesn't work for me. I assume it's because of #29285",
    "created_at": "2022-05-25T21:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552481",
    "user": "https://github.com/k3w1k0d3r"
}
```

<a id='comment:20'></a>
yeah the quotes issue is fixed on my system, but the old script still doesn't work for me. I assume it's because of #29285



---

archive/issue_events_307681.json:
```json
{
    "actor": "https://github.com/k3w1k0d3r",
    "created_at": "2022-05-25T21:40:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33901#event-307681"
}
```



---

archive/issue_events_307682.json:
```json
{
    "actor": "https://github.com/k3w1k0d3r",
    "created_at": "2022-05-25T21:40:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33901#event-307682"
}
```



---

archive/issue_comments_552482.json:
```json
{
    "body": "<a id='comment:22'></a>\n\n```\n+        *      ) NEW_PATH=\"$NEW_PATH$path:\";;\n```\nshouldn't the colon be in a different place?",
    "created_at": "2022-05-25T23:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552482",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>

```
+        *      ) NEW_PATH="$NEW_PATH$path:";;
```
shouldn't the colon be in a different place?



---

archive/issue_comments_552483.json:
```json
{
    "body": "<a id='comment:23'></a>\nI think \":$NEW_PATH$path\" also works if that's what you mean.",
    "created_at": "2022-05-25T23:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552483",
    "user": "https://github.com/k3w1k0d3r"
}
```

<a id='comment:23'></a>
I think ":$NEW_PATH$path" also works if that's what you mean.



---

archive/issue_comments_552484.json:
```json
{
    "body": "<a id='comment:24'></a>\nI think the constructed path should neither begin nor end with `:` because that would mean that the current directory is included.",
    "created_at": "2022-05-25T23:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552484",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
I think the constructed path should neither begin nor end with `:` because that would mean that the current directory is included.



---

archive/issue_comments_552485.json:
```json
{
    "body": "<a id='comment:25'></a>\nokay I'll get rid of the extra `:`",
    "created_at": "2022-05-25T23:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552485",
    "user": "https://github.com/k3w1k0d3r"
}
```

<a id='comment:25'></a>
okay I'll get rid of the extra `:`



---

archive/issue_comments_552486.json:
```json
{
    "body": "<a id='comment:26'></a>\nAlso could you make the pattern `*pyenv*` a bit more specific?",
    "created_at": "2022-05-25T23:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552486",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
Also could you make the pattern `*pyenv*` a bit more specific?



---

archive/issue_comments_552487.json:
```json
{
    "body": "<a id='comment:27'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60a30a6c9db46b8836a5a2c1c2980a3d90e8922e\">60a30a6</a></td><td><code>changes to $PATH construction</code></td></tr></table>\n",
    "created_at": "2022-05-25T23:44:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552487",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60a30a6c9db46b8836a5a2c1c2980a3d90e8922e">60a30a6</a></td><td><code>changes to $PATH construction</code></td></tr></table>




---

archive/issue_comments_552488.json:
```json
{
    "body": "**Changing commit** from \"[15cd6fec54a83db8b59373c66873d8bcd4c3ae51](https://github.com/sagemath/sagetrac-mirror/commit/15cd6fec54a83db8b59373c66873d8bcd4c3ae51)\" to \"[60a30a6c9db46b8836a5a2c1c2980a3d90e8922e](https://github.com/sagemath/sagetrac-mirror/commit/60a30a6c9db46b8836a5a2c1c2980a3d90e8922e)\".",
    "created_at": "2022-05-25T23:44:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552488",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[15cd6fec54a83db8b59373c66873d8bcd4c3ae51](https://github.com/sagemath/sagetrac-mirror/commit/15cd6fec54a83db8b59373c66873d8bcd4c3ae51)" to "[60a30a6c9db46b8836a5a2c1c2980a3d90e8922e](https://github.com/sagemath/sagetrac-mirror/commit/60a30a6c9db46b8836a5a2c1c2980a3d90e8922e)".



---

archive/issue_comments_552489.json:
```json
{
    "body": "<a id='comment:28'></a>\n\n```\n+        '/home/'*'/.pyenv/shims'*);;\n```\nWell that's now a bit too specific. For example, on macOS, user home directories live in `/Users`. By the way, words don't need to be quoted in these patterns",
    "created_at": "2022-05-26T00:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552489",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>

```
+        '/home/'*'/.pyenv/shims'*);;
```
Well that's now a bit too specific. For example, on macOS, user home directories live in `/Users`. By the way, words don't need to be quoted in these patterns



---

archive/issue_comments_552490.json:
```json
{
    "body": "**Changing commit** from \"[60a30a6c9db46b8836a5a2c1c2980a3d90e8922e](https://github.com/sagemath/sagetrac-mirror/commit/60a30a6c9db46b8836a5a2c1c2980a3d90e8922e)\" to \"[ec49dd290ac63bfeea13a81d8a09ed102f269331](https://github.com/sagemath/sagetrac-mirror/commit/ec49dd290ac63bfeea13a81d8a09ed102f269331)\".",
    "created_at": "2022-05-26T00:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552490",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[60a30a6c9db46b8836a5a2c1c2980a3d90e8922e](https://github.com/sagemath/sagetrac-mirror/commit/60a30a6c9db46b8836a5a2c1c2980a3d90e8922e)" to "[ec49dd290ac63bfeea13a81d8a09ed102f269331](https://github.com/sagemath/sagetrac-mirror/commit/ec49dd290ac63bfeea13a81d8a09ed102f269331)".



---

archive/issue_comments_552491.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec49dd290ac63bfeea13a81d8a09ed102f269331\">ec49dd2</a></td><td><code>less specific pyenv pattern</code></td></tr></table>\n",
    "created_at": "2022-05-26T00:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552491",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec49dd290ac63bfeea13a81d8a09ed102f269331">ec49dd2</a></td><td><code>less specific pyenv pattern</code></td></tr></table>




---

archive/issue_comments_552492.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [mkoeppe](#comment%3A28):\n> \n> ```\n> +        '/home/'*'/.pyenv/shims'*);;\n> ```\n> Well that's now a bit too specific. For example, on macOS, user home directories live in `/Users`. By the way, words don't need to be quoted in these patterns\n\nyeah I didn't think that through very well",
    "created_at": "2022-05-26T00:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552492",
    "user": "https://github.com/k3w1k0d3r"
}
```

<a id='comment:30'></a>
Replying to [mkoeppe](#comment%3A28):
> 
> ```
> +        '/home/'*'/.pyenv/shims'*);;
> ```
> Well that's now a bit too specific. For example, on macOS, user home directories live in `/Users`. By the way, words don't need to be quoted in these patterns

yeah I didn't think that through very well



---

archive/issue_comments_552493.json:
```json
{
    "body": "<a id='comment:31'></a>\n\n```\n+IFS=' '\n```\nIt doesn't matter very much here, but note that this is not the default value of `IFS`.\nIt would be more idiomatic to either save the old IFS in a variable and then restore it, or to `unset IFS` to restore the default behavior of the shell.",
    "created_at": "2022-05-26T16:04:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552493",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>

```
+IFS=' '
```
It doesn't matter very much here, but note that this is not the default value of `IFS`.
It would be more idiomatic to either save the old IFS in a variable and then restore it, or to `unset IFS` to restore the default behavior of the shell.



---

archive/issue_comments_552494.json:
```json
{
    "body": "**Changing commit** from \"[ec49dd290ac63bfeea13a81d8a09ed102f269331](https://github.com/sagemath/sagetrac-mirror/commit/ec49dd290ac63bfeea13a81d8a09ed102f269331)\" to \"[dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c](https://github.com/sagemath/sagetrac-mirror/commit/dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c)\".",
    "created_at": "2022-05-26T18:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552494",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ec49dd290ac63bfeea13a81d8a09ed102f269331](https://github.com/sagemath/sagetrac-mirror/commit/ec49dd290ac63bfeea13a81d8a09ed102f269331)" to "[dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c](https://github.com/sagemath/sagetrac-mirror/commit/dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c)".



---

archive/issue_comments_552495.json:
```json
{
    "body": "<a id='comment:32'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c\">dedc9c2</a></td><td><code>restore default IFS behavior</code></td></tr></table>\n",
    "created_at": "2022-05-26T18:46:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552495",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c">dedc9c2</a></td><td><code>restore default IFS behavior</code></td></tr></table>




---

archive/issue_comments_552496.json:
```json
{
    "body": "<a id='comment:33'></a>\nit seems odd that this failed a startup time test right? it doesn't seem like this script ever gets executed after it's already been configured",
    "created_at": "2022-05-26T18:49:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552496",
    "user": "https://github.com/k3w1k0d3r"
}
```

<a id='comment:33'></a>
it seems odd that this failed a startup time test right? it doesn't seem like this script ever gets executed after it's already been configured



---

archive/issue_comments_552497.json:
```json
{
    "body": "<a id='comment:34'></a>\nThe startup time test is safe to ignore. It is much too optimistic regarding the precision of its measurements.",
    "created_at": "2022-05-26T18:51:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552497",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>
The startup time test is safe to ignore. It is much too optimistic regarding the precision of its measurements.



---

archive/issue_events_307683.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-26T18:53:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33901#event-307683"
}
```



---

archive/issue_events_307684.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-26T18:53:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33901#event-307684"
}
```



---

archive/issue_comments_552498.json:
```json
{
    "body": "<a id='comment:35'></a>\nThanks for this contribution.",
    "created_at": "2022-05-26T18:53:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552498",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>
Thanks for this contribution.



---

archive/issue_comments_552499.json:
```json
{
    "body": "**Reviewer:** Matthias Koeppe",
    "created_at": "2022-05-26T18:53:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552499",
    "user": "https://github.com/mkoeppe"
}
```

**Reviewer:** Matthias Koeppe



---

archive/issue_events_307685.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-26T18:54:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "label": "trivial",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33901#event-307685"
}
```



---

archive/issue_comments_552500.json:
```json
{
    "body": "**Changing branch** from \"[u/gh-k3w1k0d3r/pyfix](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-k3w1k0d3r/pyfix)\" to \"[dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c](https://github.com/sagemath/sagetrac-mirror/commit/dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c)\".",
    "created_at": "2022-05-29T11:29:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33901#issuecomment-552500",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/gh-k3w1k0d3r/pyfix](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-k3w1k0d3r/pyfix)" to "[dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c](https://github.com/sagemath/sagetrac-mirror/commit/dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c)".



---

archive/issue_events_307686.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-29T11:29:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33901#event-307686"
}
```



---

archive/issue_events_307687.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-29T11:29:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33901",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33901#event-307687"
}
```
