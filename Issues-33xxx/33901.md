# Issue 33901: sage-bootstrap-python doesn't work when pyenv shadows all usable pythons in PATH

archive/issues_033664.json:
```json
{
    "assignees": [
        "https://github.com/k3w1k0d3r"
    ],
    "body": "The script sage-bootstrap-python attempts to call a command like\n\"/path/to/python\" -c \"...\"\nPyenv python treats \"python\" differently from just python, giving the output:\n/home/.../.pyenv/shims/python: line 1: 2: command not found\n\nWith pyenv installed and configured normally, the script will never check a non-pyenv version of python, and thus will fail to find a suitable python. My fix was to attempt to remove pyenv from the PATH before testing for python.\n\nI've only confirmed this behavior on arch linux\n\nKeywords: **bootstrap, python, pyenv**\n\nBranch/Commit: **[`dedc9c2`](https://github.com/sagemath/sagetrac-mirror/commit/dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **Julien Grijalva**\n\nComponent: **build: configure**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33901_\n\n",
    "closed_at": "2022-05-29T11:29:06Z",
    "created_at": "2022-05-25T06:27:00Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20build"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sage-bootstrap-python doesn't work when pyenv shadows all usable pythons in PATH",
    "type": "issue",
    "updated_at": "2022-05-29T11:29:06Z",
    "url": "https://github.com/sagemath/sage/issues/33901",
    "user": "https://github.com/k3w1k0d3r"
}
```
The script sage-bootstrap-python attempts to call a command like
"/path/to/python" -c "..."
Pyenv python treats "python" differently from just python, giving the output:
/home/.../.pyenv/shims/python: line 1: 2: command not found

With pyenv installed and configured normally, the script will never check a non-pyenv version of python, and thus will fail to find a suitable python. My fix was to attempt to remove pyenv from the PATH before testing for python.

I've only confirmed this behavior on arch linux

Keywords: **bootstrap, python, pyenv**

Branch/Commit: **[`dedc9c2`](https://github.com/sagemath/sagetrac-mirror/commit/dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c)**

Reviewer: **Matthias Koeppe**

Author: **Julien Grijalva**

Component: **build: configure**

_Issue created by migration from https://trac.sagemath.org/ticket/33901_





---

archive/issue_events_461442.json:
```json
{
    "actor": "https://github.com/k3w1k0d3r",
    "created_at": "2022-05-25T06:27:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461442"
}
```



---

archive/issue_events_461443.json:
```json
{
    "actor": "https://github.com/k3w1k0d3r",
    "created_at": "2022-05-25T06:27:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
    "label_color": "0000b0",
    "label_name": "c: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461443"
}
```



---

archive/issue_events_461444.json:
```json
{
    "actor": "https://github.com/k3w1k0d3r",
    "created_at": "2022-05-25T06:27:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20trivial%20/%205",
    "label_color": "fff9e5",
    "label_name": "p: trivial / 5",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461444"
}
```



---

archive/issue_events_461445.json:
```json
{
    "actor": "https://github.com/k3w1k0d3r",
    "created_at": "2022-05-25T06:27:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461445"
}
```



---

archive/issue_events_461446.json:
```json
{
    "actor": "https://github.com/k3w1k0d3r",
    "created_at": "2022-05-25T06:27:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461446"
}
```



---

archive/issue_comments_548226.json:
```json
{
    "body": "Branch: **[u/gh-k3w1k0d3r/pyfix](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-k3w1k0d3r/pyfix)**",
    "created_at": "2022-05-25T06:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548226",
    "user": "https://github.com/k3w1k0d3r"
}
```

Branch: **[u/gh-k3w1k0d3r/pyfix](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-k3w1k0d3r/pyfix)**



---

archive/issue_comments_548227.json:
```json
{
    "body": "Commit: **[`ab156dd`](https://github.com/sagemath/sagetrac-mirror/commit/ab156dd97eb921688d7f13082718086e1e409828)**",
    "created_at": "2022-05-25T06:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548227",
    "user": "https://github.com/k3w1k0d3r"
}
```

Commit: **[`ab156dd`](https://github.com/sagemath/sagetrac-mirror/commit/ab156dd97eb921688d7f13082718086e1e409828)**



---

archive/issue_comments_548228.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab156dd97eb921688d7f13082718086e1e409828\"><code>ab156dd</code></a></td><td><code>Small fix to sage-bootstrap-python</code></td></tr></table>\n",
    "created_at": "2022-05-25T06:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548228",
    "user": "https://github.com/k3w1k0d3r"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab156dd97eb921688d7f13082718086e1e409828"><code>ab156dd</code></a></td><td><code>Small fix to sage-bootstrap-python</code></td></tr></table>




---

archive/issue_events_461447.json:
```json
{
    "actor": "https://github.com/k3w1k0d3r",
    "created_at": "2022-05-25T06:28:52Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "subject": "https://github.com/k3w1k0d3r",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461447"
}
```



---

archive/issue_events_461448.json:
```json
{
    "actor": "https://github.com/k3w1k0d3r",
    "created_at": "2022-05-25T06:28:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461448"
}
```



---

archive/issue_events_461449.json:
```json
{
    "actor": "https://github.com/k3w1k0d3r",
    "created_at": "2022-05-25T16:40:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461449"
}
```



---

archive/issue_events_461450.json:
```json
{
    "actor": "https://github.com/k3w1k0d3r",
    "created_at": "2022-05-25T16:40:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461450"
}
```



---

archive/issue_comments_548229.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nCould you please open a bug report with pyenv? It's pretty wild that they install a broken python command in PATH",
    "created_at": "2022-05-25T16:56:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548229",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

Could you please open a bug report with pyenv? It's pretty wild that they install a broken python command in PATH



---

archive/issue_comments_548230.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nyeah sure\n\ndo you think I should give up on this ticket or should I still work on it to make the build not fail?",
    "created_at": "2022-05-25T17:32:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548230",
    "user": "https://github.com/k3w1k0d3r"
}
```

<div id="comment:6" align="right">comment:6</div>

yeah sure

do you think I should give up on this ticket or should I still work on it to make the build not fail?



---

archive/issue_comments_548231.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nwell I'll fix it because it's not too bad, I just used bash-only syntax and for some reason when I tested it locally it still worked",
    "created_at": "2022-05-25T17:35:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548231",
    "user": "https://github.com/k3w1k0d3r"
}
```

<div id="comment:7" align="right">comment:7</div>

well I'll fix it because it's not too bad, I just used bash-only syntax and for some reason when I tested it locally it still worked



---

archive/issue_comments_548232.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nYes, we can merge a workaround in Sage. But the bug is in pyenv",
    "created_at": "2022-05-25T17:36:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548232",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Yes, we can merge a workaround in Sage. But the bug is in pyenv



---

archive/issue_comments_548233.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4421ac2f879bec4c6508cb85fe616fd92004410a\"><code>4421ac2</code></a></td><td><code>removed bash-only syntax</code></td></tr></table>\n",
    "created_at": "2022-05-25T17:43:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548233",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4421ac2f879bec4c6508cb85fe616fd92004410a"><code>4421ac2</code></a></td><td><code>removed bash-only syntax</code></td></tr></table>




---

archive/issue_comments_548234.json:
```json
{
    "body": "Changed commit from **[`ab156dd`](https://github.com/sagemath/sagetrac-mirror/commit/ab156dd97eb921688d7f13082718086e1e409828)** to **[`4421ac2`](https://github.com/sagemath/sagetrac-mirror/commit/4421ac2f879bec4c6508cb85fe616fd92004410a)**",
    "created_at": "2022-05-25T17:43:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548234",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ab156dd`](https://github.com/sagemath/sagetrac-mirror/commit/ab156dd97eb921688d7f13082718086e1e409828)** to **[`4421ac2`](https://github.com/sagemath/sagetrac-mirror/commit/4421ac2f879bec4c6508cb85fe616fd92004410a)**



---

archive/issue_comments_548235.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\ngreat thank you",
    "created_at": "2022-05-25T17:43:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548235",
    "user": "https://github.com/k3w1k0d3r"
}
```

<div id="comment:10" align="right">comment:10</div>

great thank you



---

archive/issue_comments_548236.json:
```json
{
    "body": "Changed commit from **[`4421ac2`](https://github.com/sagemath/sagetrac-mirror/commit/4421ac2f879bec4c6508cb85fe616fd92004410a)** to **[`50d9272`](https://github.com/sagemath/sagetrac-mirror/commit/50d92726ed8087fe252c1ef20e81f76e77dea4b2)**",
    "created_at": "2022-05-25T17:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548236",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4421ac2`](https://github.com/sagemath/sagetrac-mirror/commit/4421ac2f879bec4c6508cb85fe616fd92004410a)** to **[`50d9272`](https://github.com/sagemath/sagetrac-mirror/commit/50d92726ed8087fe252c1ef20e81f76e77dea4b2)**



---

archive/issue_comments_548237.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/50d92726ed8087fe252c1ef20e81f76e77dea4b2\"><code>50d9272</code></a></td><td><code>+= gave strange not found errors</code></td></tr></table>\n",
    "created_at": "2022-05-25T17:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548237",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/50d92726ed8087fe252c1ef20e81f76e77dea4b2"><code>50d9272</code></a></td><td><code>+= gave strange not found errors</code></td></tr></table>




---

archive/issue_events_461451.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-25T18:07:27Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "title_is": "sage-bootstrap-python doesn't work when pyenv shadows all usable pythons in PATH",
    "title_was": "sage-bootstrap-python doesn't work with pyenv installed",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461451"
}
```



---

archive/issue_comments_548238.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n\n```\n+paths=$(echo $SAGE_ORIG_PATH | tr \":\" \"\\n\")\n+NEW_PATH=\"\"\n+for path in $paths\n```\nLoops like this are better done with IFS",
    "created_at": "2022-05-25T18:09:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548238",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>


```
+paths=$(echo $SAGE_ORIG_PATH | tr ":" "\n")
+NEW_PATH=""
+for path in $paths
```
Loops like this are better done with IFS



---

archive/issue_comments_548239.json:
```json
{
    "body": "Changed commit from **[`50d9272`](https://github.com/sagemath/sagetrac-mirror/commit/50d92726ed8087fe252c1ef20e81f76e77dea4b2)** to **[`cd20870`](https://github.com/sagemath/sagetrac-mirror/commit/cd208701e75de1ff3fc10b069e16f538b16d0488)**",
    "created_at": "2022-05-25T18:09:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548239",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`50d9272`](https://github.com/sagemath/sagetrac-mirror/commit/50d92726ed8087fe252c1ef20e81f76e77dea4b2)** to **[`cd20870`](https://github.com/sagemath/sagetrac-mirror/commit/cd208701e75de1ff3fc10b069e16f538b16d0488)**



---

archive/issue_comments_548240.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd208701e75de1ff3fc10b069e16f538b16d0488\"><code>cd20870</code></a></td><td><code>now works in dash shell</code></td></tr></table>\n",
    "created_at": "2022-05-25T18:09:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548240",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd208701e75de1ff3fc10b069e16f538b16d0488"><code>cd20870</code></a></td><td><code>now works in dash shell</code></td></tr></table>




---

archive/issue_comments_548241.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@mkoeppe](#comment:13):\n> \n> ```\n> +paths=$(echo $SAGE_ORIG_PATH | tr \":\" \"\\n\")\n> +NEW_PATH=\"\"\n> +for path in $paths\n> ```\n> Loops like this are better done with IFS\n\nalright I'll change it thanks",
    "created_at": "2022-05-25T18:16:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548241",
    "user": "https://github.com/k3w1k0d3r"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@mkoeppe](#comment:13):
> 
> ```
> +paths=$(echo $SAGE_ORIG_PATH | tr ":" "\n")
> +NEW_PATH=""
> +for path in $paths
> ```
> Loops like this are better done with IFS

alright I'll change it thanks



---

archive/issue_comments_548242.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15cd6fec54a83db8b59373c66873d8bcd4c3ae51\"><code>15cd6fe</code></a></td><td><code>loop is pure sh with IFS instead of using tr</code></td></tr></table>\n",
    "created_at": "2022-05-25T18:28:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548242",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15cd6fec54a83db8b59373c66873d8bcd4c3ae51"><code>15cd6fe</code></a></td><td><code>loop is pure sh with IFS instead of using tr</code></td></tr></table>




---

archive/issue_comments_548243.json:
```json
{
    "body": "Changed commit from **[`cd20870`](https://github.com/sagemath/sagetrac-mirror/commit/cd208701e75de1ff3fc10b069e16f538b16d0488)** to **[`15cd6fe`](https://github.com/sagemath/sagetrac-mirror/commit/15cd6fec54a83db8b59373c66873d8bcd4c3ae51)**",
    "created_at": "2022-05-25T18:28:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548243",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cd20870`](https://github.com/sagemath/sagetrac-mirror/commit/cd208701e75de1ff3fc10b069e16f538b16d0488)** to **[`15cd6fe`](https://github.com/sagemath/sagetrac-mirror/commit/15cd6fec54a83db8b59373c66873d8bcd4c3ae51)**



---

archive/issue_comments_548244.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI realized my system sh was a symlink to bash instead of dash, which is why my local tests worked. I've now properly tested with dash, so hopefully now everything works.",
    "created_at": "2022-05-25T18:30:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548244",
    "user": "https://github.com/k3w1k0d3r"
}
```

<div id="comment:17" align="right">comment:17</div>

I realized my system sh was a symlink to bash instead of dash, which is why my local tests worked. I've now properly tested with dash, so hopefully now everything works.



---

archive/issue_comments_548245.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nhttps://github.com/pyenv/pyenv/issues/2378",
    "created_at": "2022-05-25T19:08:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548245",
    "user": "https://github.com/k3w1k0d3r"
}
```

<div id="comment:18" align="right">comment:18</div>

https://github.com/pyenv/pyenv/issues/2378



---

archive/issue_comments_548246.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nit seems that the issue with pyenv is most likely a misconfiguration on my end of some sort",
    "created_at": "2022-05-25T19:53:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548246",
    "user": "https://github.com/k3w1k0d3r"
}
```

<div id="comment:19" align="right">comment:19</div>

it seems that the issue with pyenv is most likely a misconfiguration on my end of some sort



---

archive/issue_comments_548247.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nyeah the quotes issue is fixed on my system, but the old script still doesn't work for me. I assume it's because of #29285",
    "created_at": "2022-05-25T21:07:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548247",
    "user": "https://github.com/k3w1k0d3r"
}
```

<div id="comment:20" align="right">comment:20</div>

yeah the quotes issue is fixed on my system, but the old script still doesn't work for me. I assume it's because of #29285



---

archive/issue_events_461452.json:
```json
{
    "actor": "https://github.com/k3w1k0d3r",
    "created_at": "2022-05-25T21:40:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461452"
}
```



---

archive/issue_events_461453.json:
```json
{
    "actor": "https://github.com/k3w1k0d3r",
    "created_at": "2022-05-25T21:40:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461453"
}
```



---

archive/issue_comments_548248.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n\n```\n+        *      ) NEW_PATH=\"$NEW_PATH$path:\";;\n```\nshouldn't the colon be in a different place?",
    "created_at": "2022-05-25T23:19:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548248",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>


```
+        *      ) NEW_PATH="$NEW_PATH$path:";;
```
shouldn't the colon be in a different place?



---

archive/issue_comments_548249.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI think \":$NEW_PATH$path\" also works if that's what you mean.",
    "created_at": "2022-05-25T23:23:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548249",
    "user": "https://github.com/k3w1k0d3r"
}
```

<div id="comment:23" align="right">comment:23</div>

I think ":$NEW_PATH$path" also works if that's what you mean.



---

archive/issue_comments_548250.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI think the constructed path should neither begin nor end with `:` because that would mean that the current directory is included.",
    "created_at": "2022-05-25T23:26:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548250",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

I think the constructed path should neither begin nor end with `:` because that would mean that the current directory is included.



---

archive/issue_comments_548251.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nokay I'll get rid of the extra `:`",
    "created_at": "2022-05-25T23:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548251",
    "user": "https://github.com/k3w1k0d3r"
}
```

<div id="comment:25" align="right">comment:25</div>

okay I'll get rid of the extra `:`



---

archive/issue_comments_548252.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAlso could you make the pattern `*pyenv*` a bit more specific?",
    "created_at": "2022-05-25T23:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548252",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

Also could you make the pattern `*pyenv*` a bit more specific?



---

archive/issue_comments_548253.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60a30a6c9db46b8836a5a2c1c2980a3d90e8922e\"><code>60a30a6</code></a></td><td><code>changes to $PATH construction</code></td></tr></table>\n",
    "created_at": "2022-05-25T23:44:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548253",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60a30a6c9db46b8836a5a2c1c2980a3d90e8922e"><code>60a30a6</code></a></td><td><code>changes to $PATH construction</code></td></tr></table>




---

archive/issue_comments_548254.json:
```json
{
    "body": "Changed commit from **[`15cd6fe`](https://github.com/sagemath/sagetrac-mirror/commit/15cd6fec54a83db8b59373c66873d8bcd4c3ae51)** to **[`60a30a6`](https://github.com/sagemath/sagetrac-mirror/commit/60a30a6c9db46b8836a5a2c1c2980a3d90e8922e)**",
    "created_at": "2022-05-25T23:44:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548254",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`15cd6fe`](https://github.com/sagemath/sagetrac-mirror/commit/15cd6fec54a83db8b59373c66873d8bcd4c3ae51)** to **[`60a30a6`](https://github.com/sagemath/sagetrac-mirror/commit/60a30a6c9db46b8836a5a2c1c2980a3d90e8922e)**



---

archive/issue_comments_548255.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n\n```\n+        '/home/'*'/.pyenv/shims'*);;\n```\nWell that's now a bit too specific. For example, on macOS, user home directories live in `/Users`. By the way, words don't need to be quoted in these patterns",
    "created_at": "2022-05-26T00:49:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548255",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>


```
+        '/home/'*'/.pyenv/shims'*);;
```
Well that's now a bit too specific. For example, on macOS, user home directories live in `/Users`. By the way, words don't need to be quoted in these patterns



---

archive/issue_comments_548256.json:
```json
{
    "body": "Changed commit from **[`60a30a6`](https://github.com/sagemath/sagetrac-mirror/commit/60a30a6c9db46b8836a5a2c1c2980a3d90e8922e)** to **[`ec49dd2`](https://github.com/sagemath/sagetrac-mirror/commit/ec49dd290ac63bfeea13a81d8a09ed102f269331)**",
    "created_at": "2022-05-26T00:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548256",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`60a30a6`](https://github.com/sagemath/sagetrac-mirror/commit/60a30a6c9db46b8836a5a2c1c2980a3d90e8922e)** to **[`ec49dd2`](https://github.com/sagemath/sagetrac-mirror/commit/ec49dd290ac63bfeea13a81d8a09ed102f269331)**



---

archive/issue_comments_548257.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec49dd290ac63bfeea13a81d8a09ed102f269331\"><code>ec49dd2</code></a></td><td><code>less specific pyenv pattern</code></td></tr></table>\n",
    "created_at": "2022-05-26T00:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548257",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec49dd290ac63bfeea13a81d8a09ed102f269331"><code>ec49dd2</code></a></td><td><code>less specific pyenv pattern</code></td></tr></table>




---

archive/issue_comments_548258.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@mkoeppe](#comment:28):\n> \n> ```\n> +        '/home/'*'/.pyenv/shims'*);;\n> ```\n> Well that's now a bit too specific. For example, on macOS, user home directories live in `/Users`. By the way, words don't need to be quoted in these patterns\n\nyeah I didn't think that through very well",
    "created_at": "2022-05-26T00:53:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548258",
    "user": "https://github.com/k3w1k0d3r"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@mkoeppe](#comment:28):
> 
> ```
> +        '/home/'*'/.pyenv/shims'*);;
> ```
> Well that's now a bit too specific. For example, on macOS, user home directories live in `/Users`. By the way, words don't need to be quoted in these patterns

yeah I didn't think that through very well



---

archive/issue_comments_548259.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\n\n```\n+IFS=' '\n```\nIt doesn't matter very much here, but note that this is not the default value of `IFS`.\nIt would be more idiomatic to either save the old IFS in a variable and then restore it, or to `unset IFS` to restore the default behavior of the shell.",
    "created_at": "2022-05-26T16:04:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548259",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>


```
+IFS=' '
```
It doesn't matter very much here, but note that this is not the default value of `IFS`.
It would be more idiomatic to either save the old IFS in a variable and then restore it, or to `unset IFS` to restore the default behavior of the shell.



---

archive/issue_comments_548260.json:
```json
{
    "body": "Changed commit from **[`ec49dd2`](https://github.com/sagemath/sagetrac-mirror/commit/ec49dd290ac63bfeea13a81d8a09ed102f269331)** to **[`dedc9c2`](https://github.com/sagemath/sagetrac-mirror/commit/dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c)**",
    "created_at": "2022-05-26T18:46:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548260",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ec49dd2`](https://github.com/sagemath/sagetrac-mirror/commit/ec49dd290ac63bfeea13a81d8a09ed102f269331)** to **[`dedc9c2`](https://github.com/sagemath/sagetrac-mirror/commit/dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c)**



---

archive/issue_comments_548261.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c\"><code>dedc9c2</code></a></td><td><code>restore default IFS behavior</code></td></tr></table>\n",
    "created_at": "2022-05-26T18:46:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548261",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c"><code>dedc9c2</code></a></td><td><code>restore default IFS behavior</code></td></tr></table>




---

archive/issue_comments_548262.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nit seems odd that this failed a startup time test right? it doesn't seem like this script ever gets executed after it's already been configured",
    "created_at": "2022-05-26T18:49:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548262",
    "user": "https://github.com/k3w1k0d3r"
}
```

<div id="comment:33" align="right">comment:33</div>

it seems odd that this failed a startup time test right? it doesn't seem like this script ever gets executed after it's already been configured



---

archive/issue_comments_548263.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nThe startup time test is safe to ignore. It is much too optimistic regarding the precision of its measurements.",
    "created_at": "2022-05-26T18:51:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548263",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

The startup time test is safe to ignore. It is much too optimistic regarding the precision of its measurements.



---

archive/issue_events_461454.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-26T18:53:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461454"
}
```



---

archive/issue_events_461455.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-26T18:53:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461455"
}
```



---

archive/issue_comments_548264.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThanks for this contribution.",
    "created_at": "2022-05-26T18:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548264",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

Thanks for this contribution.



---

archive/issue_comments_548265.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2022-05-26T18:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548265",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_events_461456.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-26T18:54:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20trivial%20/%205",
    "label_color": "fff9e5",
    "label_name": "p: trivial / 5",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461456"
}
```



---

archive/issue_events_461457.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-26T18:54:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461457"
}
```



---

archive/issue_comments_548266.json:
```json
{
    "body": "Changed branch from **[u/gh-k3w1k0d3r/pyfix](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-k3w1k0d3r/pyfix)** to **[`dedc9c2`](https://github.com/sagemath/sagetrac-mirror/commit/dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c)**",
    "created_at": "2022-05-29T11:29:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33901#issuecomment-548266",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-k3w1k0d3r/pyfix](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-k3w1k0d3r/pyfix)** to **[`dedc9c2`](https://github.com/sagemath/sagetrac-mirror/commit/dedc9c20d79d408b5e02ac4b89de5a38a5e6c48c)**



---

archive/issue_events_461458.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-29T11:29:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461458"
}
```



---

archive/issue_events_461459.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "603a833979f2bf4f144d2e01c6b8f009160940ef",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-05-29T11:29:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33901",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33901#event-461459"
}
```
