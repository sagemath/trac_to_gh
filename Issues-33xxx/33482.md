# Issue 33482: Improve variable declaration and naming of localization of integral domains

archive/issues_033245.json:
```json
{
    "body": "The user should be able to change the display of the variables in the localisation.\n\nSomething like:\n\n```sage\nsage: P.<X, Y> = QQ[]\nsage: L.<x, y> = P.localization(X - Y)\n```\n\nwhere the generators would display as `X, Y `in `P` and as `x, y` in `L`. \n\nFurthermore some minor style fixes mentioned in [comment 16](https://trac.sagemath.org/ticket/33463#comment:16) of #33463 should be realized.\n\nCC:  @slel @videlec\n\nKeywords: localization variable names\n\nBranch/Commit: [8170254442fefd522b133755e21bcda4b8d0f117](https://github.com/sagemath/sagetrac-mirror/commit/8170254442fefd522b133755e21bcda4b8d0f117)\n\nReviewer: Travis Scrimshaw\n\nAuthor: Sebastian Oehms\n\nDependencies: #33463\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33482\n\n",
    "closed_at": "2022-03-27T15:44:03Z",
    "created_at": "2022-03-08T19:08:46Z",
    "labels": [
        "component: commutative algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Improve variable declaration and naming of localization of integral domains",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33482",
    "user": "https://github.com/soehms"
}
```
The user should be able to change the display of the variables in the localisation.

Something like:

```sage
sage: P.<X, Y> = QQ[]
sage: L.<x, y> = P.localization(X - Y)
```

where the generators would display as `X, Y `in `P` and as `x, y` in `L`. 

Furthermore some minor style fixes mentioned in [comment 16](https://trac.sagemath.org/ticket/33463#comment:16) of #33463 should be realized.

CC:  @slel @videlec

Keywords: localization variable names

Branch/Commit: [8170254442fefd522b133755e21bcda4b8d0f117](https://github.com/sagemath/sagetrac-mirror/commit/8170254442fefd522b133755e21bcda4b8d0f117)

Reviewer: Travis Scrimshaw

Author: Sebastian Oehms

Dependencies: #33463

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33482





---

archive/issue_comments_667343.json:
```json
{
    "body": "Branch: [u/soehms/var_names_localization_33482](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/var_names_localization_33482)",
    "created_at": "2022-03-10T17:45:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667343",
    "user": "https://github.com/soehms"
}
```

Branch: [u/soehms/var_names_localization_33482](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/var_names_localization_33482)



---

archive/issue_comments_667344.json:
```json
{
    "body": "Author: Sebatsian Oehms",
    "created_at": "2022-03-10T17:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667344",
    "user": "https://github.com/soehms"
}
```

Author: Sebatsian Oehms



---

archive/issue_comments_667345.json:
```json
{
    "body": "<a id='comment:2'></a>\nThe issue described here is open concerning the fraction field, too:\n  \n```sage\nsage: P.<X, Y> = QQ[]\nsage: F.<x,y> = P.fraction_field()\nsage: x\nX\n```\n\n\nI think we should have a similar behavior there as well. What do you think? Should I open another ticket for this? Shall I open another ticket for that?\n\n---\nNew commits:\n|                                                                                                                                          |                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[ff2e83e](https://github.com/sagemath/sagetrac-mirror/commit/ff2e83e57fd33a6d11de74f41141f584d37e08ef)|`33463: initial version`|\n|[5df7f55](https://github.com/sagemath/sagetrac-mirror/commit/5df7f557218f93f06506453162ca0463b8c0609f)|`33464: add kw proof to factor and style fixes`|\n|[ceeeebc](https://github.com/sagemath/sagetrac-mirror/commit/ceeeebc796ba03e2f1617bde932449584d399cf2)|`33463: add missing description of meth factor`|\n|[d48dc28](https://github.com/sagemath/sagetrac-mirror/commit/d48dc281ef58374105106c381c56033966f7f747)|`33463: once again`|\n|[fc1865a](https://github.com/sagemath/sagetrac-mirror/commit/fc1865ab76a21ce76a621ee0b6a678a815138a02)|`33463: another one`|\n|[8170254](https://github.com/sagemath/sagetrac-mirror/commit/8170254442fefd522b133755e21bcda4b8d0f117)|`33482: initial version`|",
    "created_at": "2022-03-10T17:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667345",
    "user": "https://github.com/soehms"
}
```

<a id='comment:2'></a>
The issue described here is open concerning the fraction field, too:
  
```sage
sage: P.<X, Y> = QQ[]
sage: F.<x,y> = P.fraction_field()
sage: x
X
```


I think we should have a similar behavior there as well. What do you think? Should I open another ticket for this? Shall I open another ticket for that?

---
New commits:
|                                                                                                                                          |                        |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[ff2e83e](https://github.com/sagemath/sagetrac-mirror/commit/ff2e83e57fd33a6d11de74f41141f584d37e08ef)|`33463: initial version`|
|[5df7f55](https://github.com/sagemath/sagetrac-mirror/commit/5df7f557218f93f06506453162ca0463b8c0609f)|`33464: add kw proof to factor and style fixes`|
|[ceeeebc](https://github.com/sagemath/sagetrac-mirror/commit/ceeeebc796ba03e2f1617bde932449584d399cf2)|`33463: add missing description of meth factor`|
|[d48dc28](https://github.com/sagemath/sagetrac-mirror/commit/d48dc281ef58374105106c381c56033966f7f747)|`33463: once again`|
|[fc1865a](https://github.com/sagemath/sagetrac-mirror/commit/fc1865ab76a21ce76a621ee0b6a678a815138a02)|`33463: another one`|
|[8170254](https://github.com/sagemath/sagetrac-mirror/commit/8170254442fefd522b133755e21bcda4b8d0f117)|`33482: initial version`|



---

archive/issue_comments_667346.json:
```json
{
    "body": "Changing keywords from \"inline declaration localization variables\" to \"localization variable names\".",
    "created_at": "2022-03-10T17:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667346",
    "user": "https://github.com/soehms"
}
```

Changing keywords from "inline declaration localization variables" to "localization variable names".



---

archive/issue_comments_667347.json:
```json
{
    "body": "Commit: [8170254442fefd522b133755e21bcda4b8d0f117](https://github.com/sagemath/sagetrac-mirror/commit/8170254442fefd522b133755e21bcda4b8d0f117)",
    "created_at": "2022-03-10T17:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667347",
    "user": "https://github.com/soehms"
}
```

Commit: [8170254442fefd522b133755e21bcda4b8d0f117](https://github.com/sagemath/sagetrac-mirror/commit/8170254442fefd522b133755e21bcda4b8d0f117)



---

archive/issue_comments_667348.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-03-10T17:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667348",
    "user": "https://github.com/soehms"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_667349.json:
```json
{
    "body": "<a id='comment:3'></a>\nThe branch is implemented on top of #33463 just to avoid merge conflict.",
    "created_at": "2022-03-10T17:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667349",
    "user": "https://github.com/soehms"
}
```

<a id='comment:3'></a>
The branch is implemented on top of #33463 just to avoid merge conflict.



---

archive/issue_comments_667350.json:
```json
{
    "body": "Dependencies: #33463",
    "created_at": "2022-03-10T17:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667350",
    "user": "https://github.com/soehms"
}
```

Dependencies: #33463



---

archive/issue_comments_667351.json:
```json
{
    "body": "Changing author from \"Sebatsian Oehms\" to \"Sebastian Oehms\"",
    "created_at": "2022-03-10T18:32:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667351",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "Sebatsian Oehms" to "Sebastian Oehms"



---

archive/issue_comments_667352.json:
```json
{
    "body": "<a id='comment:5'></a>\nI am not convinced we should change it for the fraction field since it is just writing the original integral domain as fractions essentially in a formal sense. A key distinction between here is there is a unique fraction field but there are many (typically infinite) localizations. It would likely allowing writing elements in `QQ` different than elements in `ZZ`.\n\nGreen bot => positive review.",
    "created_at": "2022-03-15T01:13:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667352",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
I am not convinced we should change it for the fraction field since it is just writing the original integral domain as fractions essentially in a formal sense. A key distinction between here is there is a unique fraction field but there are many (typically infinite) localizations. It would likely allowing writing elements in `QQ` different than elements in `ZZ`.

Green bot => positive review.



---

archive/issue_comments_667353.json:
```json
{
    "body": "Reviewer: Travis Scrimshaw",
    "created_at": "2022-03-15T01:13:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667353",
    "user": "https://github.com/tscrim"
}
```

Reviewer: Travis Scrimshaw



---

archive/issue_comments_667354.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [tscrim](#comment%3A5):\n> I am not convinced we should change it for the fraction field since it is just writing the original integral domain as fractions essentially in a formal sense. A key distinction between here is there is a unique fraction field but there are many (typically infinite) localizations. It would likely allowing writing elements in `QQ` different than elements in `ZZ`.\n\n\nI agree as it's not an entirely new option. It is an already existing option to declare separate variables. But currently these are displayed as the original ones. So we would change the existing behavior of a core functionality.\n\n\n> Green bot => positive review.\n\n\nThanks, but I fear this bot wan't do the job:\n\n```\n2022-03-15 12:28:23\nTraceback (most recent call last):\n  File \"/home/debian/.local/lib/python3.9/site-packages/sage_patchbot/patchbot.py\", line 1051, in test_a_ticket\n    pull_from_trac(self.sage_root, ticket['id'], force=True,\n  File \"/home/debian/.local/lib/python3.9/site-packages/sage_patchbot/trac.py\", line 307, in pull_from_trac\n    ensure_free_space(sage_root)\n  File \"/home/debian/.local/lib/python3.9/site-packages/sage_patchbot/util.py\", line 275, in ensure_free_space\n    raise ConfigException(msg.format(N, free, path))\nsage_patchbot.util.ConfigException: Refusing to build with less than 4.00G free (3724734464 bytes available on /home/debian/sage)\n2022-03-15 12:28:29\n5 seconds\n```\n\nVincent, can you have a look at that?",
    "created_at": "2022-03-15T17:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667354",
    "user": "https://github.com/soehms"
}
```

<a id='comment:6'></a>
Replying to [tscrim](#comment%3A5):
> I am not convinced we should change it for the fraction field since it is just writing the original integral domain as fractions essentially in a formal sense. A key distinction between here is there is a unique fraction field but there are many (typically infinite) localizations. It would likely allowing writing elements in `QQ` different than elements in `ZZ`.


I agree as it's not an entirely new option. It is an already existing option to declare separate variables. But currently these are displayed as the original ones. So we would change the existing behavior of a core functionality.


> Green bot => positive review.


Thanks, but I fear this bot wan't do the job:

```
2022-03-15 12:28:23
Traceback (most recent call last):
  File "/home/debian/.local/lib/python3.9/site-packages/sage_patchbot/patchbot.py", line 1051, in test_a_ticket
    pull_from_trac(self.sage_root, ticket['id'], force=True,
  File "/home/debian/.local/lib/python3.9/site-packages/sage_patchbot/trac.py", line 307, in pull_from_trac
    ensure_free_space(sage_root)
  File "/home/debian/.local/lib/python3.9/site-packages/sage_patchbot/util.py", line 275, in ensure_free_space
    raise ConfigException(msg.format(N, free, path))
sage_patchbot.util.ConfigException: Refusing to build with less than 4.00G free (3724734464 bytes available on /home/debian/sage)
2022-03-15 12:28:29
5 seconds
```

Vincent, can you have a look at that?



---

archive/issue_comments_667355.json:
```json
{
    "body": "<a id='comment:7'></a>\nThe `/tmp/` repository was full. Not sure it is a bug. I will set up a cleaner.",
    "created_at": "2022-03-15T22:49:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667355",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>
The `/tmp/` repository was full. Not sure it is a bug. I will set up a cleaner.



---

archive/issue_comments_667356.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-03-16T00:03:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667356",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_667357.json:
```json
{
    "body": "<a id='comment:9'></a>\nI did set a positive review, but it seems that message has been lost from trac.",
    "created_at": "2022-03-16T00:04:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667357",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
I did set a positive review, but it seems that message has been lost from trac.



---

archive/issue_comments_667358.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [tscrim](#comment%3A9):\n> I did set a positive review, but it seems that message has been lost from trac.\n\n\nNo, its there! Many thanks!",
    "created_at": "2022-03-16T07:23:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667358",
    "user": "https://github.com/soehms"
}
```

<a id='comment:10'></a>
Replying to [tscrim](#comment%3A9):
> I did set a positive review, but it seems that message has been lost from trac.


No, its there! Many thanks!



---

archive/issue_comments_667359.json:
```json
{
    "body": "<a id='comment:11'></a>\nWeird; I cannot see[comment:8](#comment%3A8). I have tried a hard refresh to clear out any cache info too, but I see it in the page source code.",
    "created_at": "2022-03-16T07:26:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667359",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
Weird; I cannot see[comment:8](#comment%3A8). I have tried a hard refresh to clear out any cache info too, but I see it in the page source code.



---

archive/issue_comments_667360.json:
```json
{
    "body": "Changing branch from \"[u/soehms/var_names_localization_33482](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/var_names_localization_33482)\" to \"[8170254442fefd522b133755e21bcda4b8d0f117](https://github.com/sagemath/sagetrac-mirror/commit/8170254442fefd522b133755e21bcda4b8d0f117)\"",
    "created_at": "2022-03-27T15:44:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667360",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[u/soehms/var_names_localization_33482](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/var_names_localization_33482)" to "[8170254442fefd522b133755e21bcda4b8d0f117](https://github.com/sagemath/sagetrac-mirror/commit/8170254442fefd522b133755e21bcda4b8d0f117)"



---

archive/issue_events_099240.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-27T15:44:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33482#event-99240"
}
```



---

archive/issue_comments_667361.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-03-27T15:44:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33482#issuecomment-667361",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
