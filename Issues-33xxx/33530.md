# Issue 33530: Upgrade ipython to 8.x

archive/issues_033293.json:
```json
{
    "body": "https://ipython.readthedocs.io/en/stable/whatsnew/version8.html\n\n... and a number of related package updates.\n\n\nSee also: #33772 - update ipykernel\n\n\nCC:  @antonio-rojas @collares @tornaria @kiwifb @egourgoulhon @culler @NathanDunfield @dimpase\n\nBranch/Commit: 1787e98ccb12045d7f6e565b526bee5ba7042bf5\n\nReviewer: Fran\u00e7ois Bissey, John Palmieri\n\nAuthor: Matthias Koeppe\n\nDependencies: #33866, #33428\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33530\n\n",
    "closed_at": "2022-07-28T19:10:25Z",
    "created_at": "2022-03-19T01:22:53Z",
    "labels": [
        "component: packages: standard",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Upgrade ipython to 8.x",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33530",
    "user": "https://github.com/mkoeppe"
}
```
https://ipython.readthedocs.io/en/stable/whatsnew/version8.html

... and a number of related package updates.


See also: #33772 - update ipykernel


CC:  @antonio-rojas @collares @tornaria @kiwifb @egourgoulhon @culler @NathanDunfield @dimpase

Branch/Commit: 1787e98ccb12045d7f6e565b526bee5ba7042bf5

Reviewer: Fran√ßois Bissey, John Palmieri

Author: Matthias Koeppe

Dependencies: #33866, #33428

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33530





---

archive/issue_comments_506186.json:
```json
{
    "body": "<a id='comment:5'></a>\n```\n[entrypoints-0.4] ERROR: Directory '.' is not installable. Neither 'setup.py' nor 'pyproject.toml' found.\n[beautifulsoup4-4.11.1]   /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/beautifulsoup4-4.11.1/src/bs4/element.py:15: UserWarning: The soupsieve package is not installed. CSS selectors cannot be used.\n[beautifulsoup4-4.11.1] ERROR: Could not find a version that satisfies the requirement soupsieve>1.2 (from beautifulsoup4) (from versions: none)\n[attrs-21.4.0] WARNING: Ignoring invalid distribution -leach (/Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages)\n[argon2_cffi-21.3.0] ERROR: Could not find a version that satisfies the requirement argon2-cffi-bindings (from argon2-cffi) (from versions: none)\n[argon2_cffi-21.3.0] Warning: The installation needed to use \"--no-deps --ignore-installed --ignore-requires-python\" to succeed. This means that a dependencies file in build/pkgs/ needs to be updated. Please report this to sage-devel@googlegroups.com, including the build log of this package.\n[idna-3.3] requests 2.26.0 requires charset-normalizer~=2.0.0; python_version >= \"3\", which is not installed.\n[appnope-0.1.3] ipython 7.29.0 requires decorator, which is not installed.\n[appnope-0.1.3] ipython 7.29.0 requires prompt-toolkit!=3.0.0,!=3.0.1,<3.1.0,>=2.0.0, which is not installed.\n[appnope-0.1.3] ipython 7.29.0 requires pygments, which is not installed.\n[bleach-5.0.0] nbconvert 6.4.4 requires beautifulsoup4, which is not installed.\n[bleach-5.0.0] nbconvert 6.4.4 requires entrypoints>=0.2.2, which is not installed.\n[bleach-5.0.0] nbconvert 6.4.4 requires pygments>=2.4.1, which is not installed.\n```\n\n---\nLast 10 new commits:",
    "created_at": "2022-04-21T01:51:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506186",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
```
[entrypoints-0.4] ERROR: Directory '.' is not installable. Neither 'setup.py' nor 'pyproject.toml' found.
[beautifulsoup4-4.11.1]   /Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.9/var/tmp/sage/build/beautifulsoup4-4.11.1/src/bs4/element.py:15: UserWarning: The soupsieve package is not installed. CSS selectors cannot be used.
[beautifulsoup4-4.11.1] ERROR: Could not find a version that satisfies the requirement soupsieve>1.2 (from beautifulsoup4) (from versions: none)
[attrs-21.4.0] WARNING: Ignoring invalid distribution -leach (/Users/mkoeppe/s/sage/sage-rebasing/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages)
[argon2_cffi-21.3.0] ERROR: Could not find a version that satisfies the requirement argon2-cffi-bindings (from argon2-cffi) (from versions: none)
[argon2_cffi-21.3.0] Warning: The installation needed to use "--no-deps --ignore-installed --ignore-requires-python" to succeed. This means that a dependencies file in build/pkgs/ needs to be updated. Please report this to sage-devel@googlegroups.com, including the build log of this package.
[idna-3.3] requests 2.26.0 requires charset-normalizer~=2.0.0; python_version >= "3", which is not installed.
[appnope-0.1.3] ipython 7.29.0 requires decorator, which is not installed.
[appnope-0.1.3] ipython 7.29.0 requires prompt-toolkit!=3.0.0,!=3.0.1,<3.1.0,>=2.0.0, which is not installed.
[appnope-0.1.3] ipython 7.29.0 requires pygments, which is not installed.
[bleach-5.0.0] nbconvert 6.4.4 requires beautifulsoup4, which is not installed.
[bleach-5.0.0] nbconvert 6.4.4 requires entrypoints>=0.2.2, which is not installed.
[bleach-5.0.0] nbconvert 6.4.4 requires pygments>=2.4.1, which is not installed.
```

---
Last 10 new commits:



---

archive/issue_comments_506187.json:
```json
{
    "body": "<a id='comment:6'></a>After adding dependency `soupsieve`:\n\n```\n[soupsieve-2.3.2.post1] ModuleNotFoundError: No module named 'hatchling'\n```\nAlso\n\n```\n[testpath-0.6.0] ERROR: Directory '.' is not installable. Neither 'setup.py' nor 'pyproject.toml' found.\n[jupyterlab_pygments-0.2.2] ModuleNotFoundError: No module named 'jupyter_packaging'\n[tzlocal-4.2] ERROR: Could not find a version that satisfies the requirement pytz-deprecation-shim (from tzlocal) (from versions: none)\n```",
    "created_at": "2022-04-21T02:13:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506187",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>After adding dependency `soupsieve`:

```
[soupsieve-2.3.2.post1] ModuleNotFoundError: No module named 'hatchling'
```
Also

```
[testpath-0.6.0] ERROR: Directory '.' is not installable. Neither 'setup.py' nor 'pyproject.toml' found.
[jupyterlab_pygments-0.2.2] ModuleNotFoundError: No module named 'jupyter_packaging'
[tzlocal-4.2] ERROR: Could not find a version that satisfies the requirement pytz-deprecation-shim (from tzlocal) (from versions: none)
```



---

archive/issue_comments_506188.json:
```json
{
    "body": "<a id='comment:7'></a>Backing out the update of `beautifulsoup4`, `argon2_cffi`, `jupyterlab_widgets`",
    "created_at": "2022-04-21T02:16:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506188",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>Backing out the update of `beautifulsoup4`, `argon2_cffi`, `jupyterlab_widgets`



---

archive/issue_comments_506189.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-04-21T02:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506189",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_506190.json:
```json
{
    "body": "<a id='comment:9'></a>\n```\n[nbformat-5.3.0] ERROR: Could not find a version that satisfies the requirement fastjsonschema (from nbformat) (from versions: none)\n[tzlocal-4.2] ERROR: Could not find a version that satisfies the requirement pytz-deprecation-shim (from tzlocal) (from versions: none)\n```",
    "created_at": "2022-04-21T02:39:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506190",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
```
[nbformat-5.3.0] ERROR: Could not find a version that satisfies the requirement fastjsonschema (from nbformat) (from versions: none)
[tzlocal-4.2] ERROR: Could not find a version that satisfies the requirement pytz-deprecation-shim (from tzlocal) (from versions: none)
```



---

archive/issue_comments_506191.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-04-21T02:41:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506191",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_506192.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-21T02:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506192",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506193.json:
```json
{
    "body": "<a id='comment:12'></a>\n```\n[nbconvert-6.5.0] ERROR: Could not find a version that satisfies the requirement MarkupSafe>=2.0 (from nbconvert) (from versions: 1.1.1)\n[nbconvert-6.5.0] ERROR: No matching distribution found for MarkupSafe>=2.0\n```\n\n---\nNew commits:",
    "created_at": "2022-04-21T02:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506193",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
```
[nbconvert-6.5.0] ERROR: Could not find a version that satisfies the requirement MarkupSafe>=2.0 (from nbconvert) (from versions: 1.1.1)
[nbconvert-6.5.0] ERROR: No matching distribution found for MarkupSafe>=2.0
```

---
New commits:



---

archive/issue_comments_506194.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-21T03:01:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506194",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506195.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-04-21T03:19:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506195",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_506196.json:
```json
{
    "body": "<a id='comment:15'></a>\n```\n[ipykernel-6.13.0] Applying patches from ../patches...\n[ipykernel-6.13.0] Applying ../patches/debugpy-make-optional.patch\n[ipykernel-6.13.0] patching file pyproject.toml\n[ipykernel-6.13.0] patching file setup.py\n[ipykernel-6.13.0] Hunk #1 FAILED at 63.\n[ipykernel-6.13.0] 1 out of 1 hunk FAILED -- saving rejects to file setup.py.rej\n[ipykernel-6.13.0] Error applying '../patches/debugpy-make-optional.patch'\n```\nThe patch from #33020 needs updating",
    "created_at": "2022-04-21T03:23:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506196",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
```
[ipykernel-6.13.0] Applying patches from ../patches...
[ipykernel-6.13.0] Applying ../patches/debugpy-make-optional.patch
[ipykernel-6.13.0] patching file pyproject.toml
[ipykernel-6.13.0] patching file setup.py
[ipykernel-6.13.0] Hunk #1 FAILED at 63.
[ipykernel-6.13.0] 1 out of 1 hunk FAILED -- saving rejects to file setup.py.rej
[ipykernel-6.13.0] Error applying '../patches/debugpy-make-optional.patch'
```
The patch from #33020 needs updating



---

archive/issue_comments_506197.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-04-21T03:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506197",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_506198.json:
```json
{
    "body": "<a id='comment:17'></a>Backed out the ipykernel update for now.",
    "created_at": "2022-04-21T03:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506198",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>Backed out the ipykernel update for now.



---

archive/issue_comments_506199.json:
```json
{
    "body": "<a id='comment:18'></a>\n```\n[notebook-6.4.11] ERROR: Could not find a version that satisfies the requirement tinycss2 (from nbconvert) (from versions: none)\n```",
    "created_at": "2022-04-21T04:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506199",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>
```
[notebook-6.4.11] ERROR: Could not find a version that satisfies the requirement tinycss2 (from nbconvert) (from versions: none)
```



---

archive/issue_comments_506200.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-04-21T04:04:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506200",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_506201.json:
```json
{
    "body": "<a id='comment:20'></a>Backed out the nbconvert update",
    "created_at": "2022-04-21T04:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506201",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>Backed out the nbconvert update



---

archive/issue_comments_506202.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-21T04:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506202",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506203.json:
```json
{
    "body": "<a id='comment:22'></a>\n```\n[nbconvert-6.5.0] ERROR: Could not find a version that satisfies the requirement jinja2>=3.0 (from nbconvert) (from versions: 2.11.2)\n```",
    "created_at": "2022-04-21T04:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506203",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>
```
[nbconvert-6.5.0] ERROR: Could not find a version that satisfies the requirement jinja2>=3.0 (from nbconvert) (from versions: 2.11.2)
```



---

archive/issue_comments_506204.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-21T05:21:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506204",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506205.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,9 @@\n ipython 8.0 dropped support for Python 3.7 - https://ipython.readthedocs.io/en/stable/whatsnew/version8.html\n+\n+\n+\n+See also: #33772 - update ipykernel\n+\n \n Dependencies: #32937, #33170\n \n```\n",
    "created_at": "2022-04-29T18:27:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506205",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,9 @@
 ipython 8.0 dropped support for Python 3.7 - https://ipython.readthedocs.io/en/stable/whatsnew/version8.html
+
+
+
+See also: #33772 - update ipykernel
+
 
 Dependencies: #32937, #33170
 
```




---

archive/issue_comments_506206.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-29T18:28:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506206",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506207.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-04-30T02:57:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506207",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_506208.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-27T02:09:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506208",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506209.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-05-27T02:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506209",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_506210.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-27T03:11:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506210",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506211.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-26T18:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506211",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506212.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,8 @@\n+https://ipython.readthedocs.io/en/stable/whatsnew/version8.html\n+\n+\n+\n+See also: #33772 - update ipykernel\n \n \n Dependencies: #32937, #33170\n```\n",
    "created_at": "2022-06-26T18:44:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506212",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,8 @@
+https://ipython.readthedocs.io/en/stable/whatsnew/version8.html
+
+
+
+See also: #33772 - update ipykernel
 
 
 Dependencies: #32937, #33170
```




---

archive/issue_comments_506213.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-26T18:51:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506213",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506214.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-06-26T20:01:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506214",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_506215.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-06-26T22:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506215",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_506216.json:
```json
{
    "body": "<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-06-27T17:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506216",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_506217.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-27T17:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506217",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506218.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,9 @@\n+https://ipython.readthedocs.io/en/stable/whatsnew/version8.html\n+\n+... and a number of related package updates.\n+\n+\n+See also: #33772 - update ipykernel\n \n \n Dependencies: #32937, #33170\n```\n",
    "created_at": "2022-06-27T17:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506218",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,9 @@
+https://ipython.readthedocs.io/en/stable/whatsnew/version8.html
+
+... and a number of related package updates.
+
+
+See also: #33772 - update ipykernel
 
 
 Dependencies: #32937, #33170
```




---

archive/issue_comments_506219.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-06-27T17:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506219",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_506220.json:
```json
{
    "body": "<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-27T18:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506220",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506221.json:
```json
{
    "body": "<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-06-27T18:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506221",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_506222.json:
```json
{
    "body": "<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-27T20:01:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506222",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506223.json:
```json
{
    "body": "<a id='comment:44'></a>Some more changes so that also `make jupyterlab_widgets` does not have to upgrade packages",
    "created_at": "2022-06-27T20:02:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506223",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:44'></a>Some more changes so that also `make jupyterlab_widgets` does not have to upgrade packages



---

archive/issue_comments_506224.json:
```json
{
    "body": "<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-27T20:41:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506224",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506225.json:
```json
{
    "body": "<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-27T23:00:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506225",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506226.json:
```json
{
    "body": "<a id='comment:47'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-28T00:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506226",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506227.json:
```json
{
    "body": "<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-28T06:47:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506227",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506228.json:
```json
{
    "body": "<a id='comment:50'></a>This is a heads-up that this change will break the macOS Sage binary package.\nThat package includes prompt-toolkit 2 because prompt-toolkit 3, which started using the asyncio module for its event loops, does not work correctly with Tk.  IPython 8 currently generates exceptions when used with prompt-toolkit 2.  It appears that the IPython developers do not intend to fix this.",
    "created_at": "2022-06-29T22:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506228",
    "user": "https://github.com/culler"
}
```

<a id='comment:50'></a>This is a heads-up that this change will break the macOS Sage binary package.
That package includes prompt-toolkit 2 because prompt-toolkit 3, which started using the asyncio module for its event loops, does not work correctly with Tk.  IPython 8 currently generates exceptions when used with prompt-toolkit 2.  It appears that the IPython developers do not intend to fix this.



---

archive/issue_comments_506229.json:
```json
{
    "body": "<a id='comment:51'></a>The release that we are updating to, ipython 8.4.0, still allows prompt_toolkit 2.0 according to https://github.com/ipython/ipython/blob/8.4.0/setup.cfg#L40\n\n(edit: https://github.com/ipython/ipython/pull/13677 restricts it to propt_toolkit 3)",
    "created_at": "2022-06-29T22:48:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506229",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:51'></a>The release that we are updating to, ipython 8.4.0, still allows prompt_toolkit 2.0 according to https://github.com/ipython/ipython/blob/8.4.0/setup.cfg#L40

(edit: https://github.com/ipython/ipython/pull/13677 restricts it to propt_toolkit 3)



---

archive/issue_comments_506230.json:
```json
{
    "body": "<a id='comment:52'></a>Oh, I see / remember https://github.com/ipython/ipython/issues/13645 now.",
    "created_at": "2022-06-29T22:51:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506230",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:52'></a>Oh, I see / remember https://github.com/ipython/ipython/issues/13645 now.



---

archive/issue_comments_506231.json:
```json
{
    "body": "<a id='comment:53'></a>Is there any ipython 8.x version that works correctly with prompt-toolkit 2?",
    "created_at": "2022-06-29T22:56:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506231",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:53'></a>Is there any ipython 8.x version that works correctly with prompt-toolkit 2?



---

archive/issue_comments_506232.json:
```json
{
    "body": "<a id='comment:54'></a>I guess we can carry a patch for ipython that fixes up the issue with the `_loaded` attribute or something like this.\nhttps://github.com/ipython/ipython/issues/13645#issuecomment-1107883939",
    "created_at": "2022-06-29T23:13:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506232",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:54'></a>I guess we can carry a patch for ipython that fixes up the issue with the `_loaded` attribute or something like this.
https://github.com/ipython/ipython/issues/13645#issuecomment-1107883939



---

archive/issue_comments_506233.json:
```json
{
    "body": "<a id='comment:55'></a>I'm seeing warnings in docbuilding:\n\n```\nCould not import extension jupyter_sphinx (exception: No module named 'fastjsonschema')\n```\nI don't know if this is related, but the installation of `notebook` hung: the log file ends with\n\n```\nhttps://mirror.aarnet.edu.au/pub/sage/spkg/upstream/notebook/notebook-6.4.12.tar.gz\n[\n```\n(Shouldn't it time-out and then proceed to the next mirror?) Anyway, would `notebook` or a package that depends on it install `fastjsonschema`? If so, `sagemath_doc_html` should depend on that.",
    "created_at": "2022-06-29T23:26:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506233",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:55'></a>I'm seeing warnings in docbuilding:

```
Could not import extension jupyter_sphinx (exception: No module named 'fastjsonschema')
```
I don't know if this is related, but the installation of `notebook` hung: the log file ends with

```
https://mirror.aarnet.edu.au/pub/sage/spkg/upstream/notebook/notebook-6.4.12.tar.gz
[
```
(Shouldn't it time-out and then proceed to the next mirror?) Anyway, would `notebook` or a package that depends on it install `fastjsonschema`? If so, `sagemath_doc_html` should depend on that.



---

archive/issue_comments_506234.json:
```json
{
    "body": "<a id='comment:56'></a>Replying to [comment:55 jhpalmieri]:\n> the installation of `notebook` hung: the log file ends with\n> \n> ```\n> https://mirror.aarnet.edu.au/pub/sage/spkg/upstream/notebook/notebook-6.4.12.tar.gz\n> [\n> ```\n> (Shouldn't it time-out and then proceed to the next mirror?)\n\n\nIt should; but I think I occasionally also see such hangups in the GH Actions runs.",
    "created_at": "2022-06-29T23:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506234",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:56'></a>Replying to [comment:55 jhpalmieri]:
> the installation of `notebook` hung: the log file ends with
> 
> ```
> https://mirror.aarnet.edu.au/pub/sage/spkg/upstream/notebook/notebook-6.4.12.tar.gz
> [
> ```
> (Shouldn't it time-out and then proceed to the next mirror?)


It should; but I think I occasionally also see such hangups in the GH Actions runs.



---

archive/issue_comments_506235.json:
```json
{
    "body": "<a id='comment:57'></a>Replying to [comment:55 jhpalmieri]:\n> I'm seeing warnings in docbuilding:\n> \n> ```\n> Could not import extension jupyter_sphinx (exception: No module named 'fastjsonschema')\n> ```\n\n\nI think this is a new nbformat dep that I forgot about (or dropped by mistake again)",
    "created_at": "2022-06-29T23:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506235",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:57'></a>Replying to [comment:55 jhpalmieri]:
> I'm seeing warnings in docbuilding:
> 
> ```
> Could not import extension jupyter_sphinx (exception: No module named 'fastjsonschema')
> ```


I think this is a new nbformat dep that I forgot about (or dropped by mistake again)



---

archive/issue_comments_506236.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-06-29T23:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506236",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_506237.json:
```json
{
    "body": "<a id='comment:59'></a>I also see this in the `sagelib` log file:\n\n```\nINFO: Disabling color, you really want to install colorlog.\n```\nand also\n\n```\nINFO: Pythran support for package 'scipy' will be reduced: this module is not available at runtime.\n```\nThe second one can probably be fixed if `scipy` is made into a dependency of `sagelib`. Do we really want to install colorlog?",
    "created_at": "2022-06-29T23:46:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506237",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:59'></a>I also see this in the `sagelib` log file:

```
INFO: Disabling color, you really want to install colorlog.
```
and also

```
INFO: Pythran support for package 'scipy' will be reduced: this module is not available at runtime.
```
The second one can probably be fixed if `scipy` is made into a dependency of `sagelib`. Do we really want to install colorlog?



---

archive/issue_comments_506238.json:
```json
{
    "body": "<a id='comment:60'></a>These two are not new from this ticket. I don't have an immediate interest in `colorlog`. I think (but haven't investigated the details) that the pythran support does not matter to us during the compilation of sagelib.",
    "created_at": "2022-06-29T23:48:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506238",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:60'></a>These two are not new from this ticket. I don't have an immediate interest in `colorlog`. I think (but haven't investigated the details) that the pythran support does not matter to us during the compilation of sagelib.



---

archive/issue_comments_506239.json:
```json
{
    "body": "<a id='comment:61'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-29T23:49:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506239",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:61'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506240.json:
```json
{
    "body": "<a id='comment:62'></a>I think this fixes comment:57 but my docbuild hasn't yet run through",
    "created_at": "2022-06-29T23:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506240",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:62'></a>I think this fixes comment:57 but my docbuild hasn't yet run through



---

archive/issue_comments_506241.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-06-30T00:06:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506241",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_506242.json:
```json
{
    "body": "<a id='comment:64'></a>I see doctest failures:\n\n```\nsage -t --random-seed=40701510628761718232931312764279214628 src/sage/misc/package.py\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 146, in sage.misc.package.pip_installed_packages\nFailed example:\n    'scipy' in d  # optional - sage_spkg\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 148, in sage.misc.package.pip_installed_packages\nFailed example:\n    d['scipy']  # optional - sage_spkg\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.7.beta3/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 695, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.7.beta3/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1093, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.pip_installed_packages[3]>\", line 1, in <module>\n        d['scipy']  # optional - sage_spkg\n    KeyError: 'scipy'\n```",
    "created_at": "2022-06-30T01:58:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506242",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:64'></a>I see doctest failures:

```
sage -t --random-seed=40701510628761718232931312764279214628 src/sage/misc/package.py
**********************************************************************
File "src/sage/misc/package.py", line 146, in sage.misc.package.pip_installed_packages
Failed example:
    'scipy' in d  # optional - sage_spkg
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/misc/package.py", line 148, in sage.misc.package.pip_installed_packages
Failed example:
    d['scipy']  # optional - sage_spkg
Exception raised:
    Traceback (most recent call last):
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.7.beta3/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.7.beta3/local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.misc.package.pip_installed_packages[3]>", line 1, in <module>
        d['scipy']  # optional - sage_spkg
    KeyError: 'scipy'
```



---

archive/issue_comments_506243.json:
```json
{
    "body": "<a id='comment:65'></a>And what about the MacOS binary issue (comment:50)?",
    "created_at": "2022-06-30T02:01:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506243",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:65'></a>And what about the MacOS binary issue (comment:50)?



---

archive/issue_comments_506244.json:
```json
{
    "body": "<a id='comment:66'></a>I only get 2 failures, the same as John.",
    "created_at": "2022-06-30T03:02:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506244",
    "user": "https://github.com/GMS103"
}
```

<a id='comment:66'></a>I only get 2 failures, the same as John.



---

archive/issue_comments_506245.json:
```json
{
    "body": "<a id='comment:67'></a>I see, the key in the dictionary `pip_installed_packages()` is now `SciPy` rather than `scipy`. A change like this might work:\n\n```diff\ndiff --git a/src/sage/misc/package.py b/src/sage/misc/package.py\nindex 783626d824..319aac4406 100644\n--- a/src/sage/misc/package.py\n+++ b/src/sage/misc/package.py\n@@ -142,7 +142,7 @@ def pip_installed_packages(normalization=None):\n     EXAMPLES::\n \n         sage: from sage.misc.package import pip_installed_packages\n-        sage: d = pip_installed_packages()  # optional - sage_spkg\n+        sage: d = pip_installed_packages('spkg')  # optional - sage_spkg\n         sage: 'scipy' in d  # optional - sage_spkg\n         True\n         sage: d['scipy']  # optional - sage_spkg\n```",
    "created_at": "2022-06-30T03:31:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506245",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:67'></a>I see, the key in the dictionary `pip_installed_packages()` is now `SciPy` rather than `scipy`. A change like this might work:

```diff
diff --git a/src/sage/misc/package.py b/src/sage/misc/package.py
index 783626d824..319aac4406 100644
--- a/src/sage/misc/package.py
+++ b/src/sage/misc/package.py
@@ -142,7 +142,7 @@ def pip_installed_packages(normalization=None):
     EXAMPLES::
 
         sage: from sage.misc.package import pip_installed_packages
-        sage: d = pip_installed_packages()  # optional - sage_spkg
+        sage: d = pip_installed_packages('spkg')  # optional - sage_spkg
         sage: 'scipy' in d  # optional - sage_spkg
         True
         sage: d['scipy']  # optional - sage_spkg
```



---

archive/issue_comments_506246.json:
```json
{
    "body": "<a id='comment:68'></a>No, sorry, this change:\n\n```diff\ndiff --git a/src/sage/misc/package.py b/src/sage/misc/package.py\nindex 783626d824..359d1121e4 100644\n--- a/src/sage/misc/package.py\n+++ b/src/sage/misc/package.py\n@@ -143,15 +143,15 @@ def pip_installed_packages(normalization=None):\n \n         sage: from sage.misc.package import pip_installed_packages\n         sage: d = pip_installed_packages()  # optional - sage_spkg\n-        sage: 'scipy' in d  # optional - sage_spkg\n-        True\n-        sage: d['scipy']  # optional - sage_spkg\n-        '...'\n         sage: d['beautifulsoup4']   # optional - sage_spkg beautifulsoup4\n         '...'\n         sage: d['prompt-toolkit']   # optional - sage_spkg\n         '...'\n         sage: d = pip_installed_packages(normalization='spkg')  # optional - sage_spkg\n+        sage: 'scipy' in d  # optional - sage_spkg\n+        True\n+        sage: d['scipy']  # optional - sage_spkg\n+        '...'\n         sage: d['prompt_toolkit']   # optional - sage_spkg\n         '...'\n \n```",
    "created_at": "2022-06-30T03:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506246",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:68'></a>No, sorry, this change:

```diff
diff --git a/src/sage/misc/package.py b/src/sage/misc/package.py
index 783626d824..359d1121e4 100644
--- a/src/sage/misc/package.py
+++ b/src/sage/misc/package.py
@@ -143,15 +143,15 @@ def pip_installed_packages(normalization=None):
 
         sage: from sage.misc.package import pip_installed_packages
         sage: d = pip_installed_packages()  # optional - sage_spkg
-        sage: 'scipy' in d  # optional - sage_spkg
-        True
-        sage: d['scipy']  # optional - sage_spkg
-        '...'
         sage: d['beautifulsoup4']   # optional - sage_spkg beautifulsoup4
         '...'
         sage: d['prompt-toolkit']   # optional - sage_spkg
         '...'
         sage: d = pip_installed_packages(normalization='spkg')  # optional - sage_spkg
+        sage: 'scipy' in d  # optional - sage_spkg
+        True
+        sage: d['scipy']  # optional - sage_spkg
+        '...'
         sage: d['prompt_toolkit']   # optional - sage_spkg
         '...'
 
```



---

archive/issue_comments_506247.json:
```json
{
    "body": "<a id='comment:69'></a>Or we could change to `d['SciPy']` \u2014\u00a0I don't know which is a better approach. I don't know where the change is coming from. The `pip` upgrade?",
    "created_at": "2022-06-30T04:31:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506247",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:69'></a>Or we could change to `d['SciPy']` ‚Äî¬†I don't know which is a better approach. I don't know where the change is coming from. The `pip` upgrade?



---

archive/issue_comments_506248.json:
```json
{
    "body": "<a id='comment:70'></a>Yes, I think these are due to #33866; reported there.",
    "created_at": "2022-06-30T04:39:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506248",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:70'></a>Yes, I think these are due to #33866; reported there.



---

archive/issue_comments_506249.json:
```json
{
    "body": "<a id='comment:71'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-30T18:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506249",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:71'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506250.json:
```json
{
    "body": "<a id='comment:72'></a>Replying to [comment:50 culler]:\n> This is a heads-up that this change will break the macOS Sage binary package.\n> That package includes prompt-toolkit 2 because prompt-toolkit 3, which started using the asyncio module for its event loops, does not work correctly with Tk.  IPython 8 currently generates exceptions when used with prompt-toolkit 2.  It appears that the IPython developers do not intend to fix this.\n\n\nI just checked that `./sage -pip install 'ipython<8' 'prompt-toolkit<3'` succeeds without having to downgrade any other packages. So adding these constraints (I think you already use `prompt-toolkit<3`) to the **snappy** package would be an easy workaround for you.",
    "created_at": "2022-06-30T18:43:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506250",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:72'></a>Replying to [comment:50 culler]:
> This is a heads-up that this change will break the macOS Sage binary package.
> That package includes prompt-toolkit 2 because prompt-toolkit 3, which started using the asyncio module for its event loops, does not work correctly with Tk.  IPython 8 currently generates exceptions when used with prompt-toolkit 2.  It appears that the IPython developers do not intend to fix this.


I just checked that `./sage -pip install 'ipython<8' 'prompt-toolkit<3'` succeeds without having to downgrade any other packages. So adding these constraints (I think you already use `prompt-toolkit<3`) to the **snappy** package would be an easy workaround for you.



---

archive/issue_comments_506251.json:
```json
{
    "body": "<a id='comment:73'></a>Tests now pass and it looks good in brief testing, both command-line and notebook. Others should test it, too.",
    "created_at": "2022-06-30T19:44:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506251",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:73'></a>Tests now pass and it looks good in brief testing, both command-line and notebook. Others should test it, too.



---

archive/issue_comments_506252.json:
```json
{
    "body": "<a id='comment:74'></a>Thanks for testing!",
    "created_at": "2022-06-30T21:01:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506252",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:74'></a>Thanks for testing!



---

archive/issue_comments_506253.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-07-02T13:29:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506253",
    "user": "https://github.com/antonio-rojas"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_506254.json:
```json
{
    "body": "<a id='comment:75'></a>The `jupyter_jsmol` update breaks jsmol in the notebook, because the extension changed its name from `jupyter_jsmol` to `jupyter-jsmol`. The path needs to be updated accordingly in `sage/repl/display/jsmol_iframe.py`",
    "created_at": "2022-07-02T13:29:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506254",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:75'></a>The `jupyter_jsmol` update breaks jsmol in the notebook, because the extension changed its name from `jupyter_jsmol` to `jupyter-jsmol`. The path needs to be updated accordingly in `sage/repl/display/jsmol_iframe.py`



---

archive/issue_comments_506255.json:
```json
{
    "body": "<a id='comment:76'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-02T17:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506255",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:76'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506256.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-07-02T17:27:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506256",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_506257.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2022-07-11T22:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506257",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_506258.json:
```json
{
    "body": "<a id='comment:80'></a>Let's get this in please before all updates are outdated",
    "created_at": "2022-07-14T16:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506258",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:80'></a>Let's get this in please before all updates are outdated



---

archive/issue_comments_506259.json:
```json
{
    "body": "<a id='comment:81'></a>It'll be fine. sage-on-gentoo default to ipython 8 already without a problem. There's only that pesky jupyter_jsmol that I need to be careful of.",
    "created_at": "2022-07-14T19:19:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506259",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:81'></a>It'll be fine. sage-on-gentoo default to ipython 8 already without a problem. There's only that pesky jupyter_jsmol that I need to be careful of.



---

archive/issue_comments_506260.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-07-14T19:19:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506260",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_506261.json:
```json
{
    "body": "<a id='comment:82'></a>I am not sure this is relevant for this ticket, but for me `make pyparsing` fails persistently (unable to download package `pyparsing-3.0.9.tar.gz` from mirrors).\n\nLog attached.",
    "created_at": "2022-07-14T20:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506261",
    "user": "https://github.com/GMS103"
}
```

<a id='comment:82'></a>I am not sure this is relevant for this ticket, but for me `make pyparsing` fails persistently (unable to download package `pyparsing-3.0.9.tar.gz` from mirrors).

Log attached.



---

archive/issue_comments_506262.json:
```json
{
    "body": "Attachment [pyparsing-3.0.9.log](tarball://root/attachments/some-uuid/ticket33530/pyparsing-3.0.9.log) by @GMS103 created at 2022-07-14 20:13:48",
    "created_at": "2022-07-14T20:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506262",
    "user": "https://github.com/GMS103"
}
```

Attachment [pyparsing-3.0.9.log](tarball://root/attachments/some-uuid/ticket33530/pyparsing-3.0.9.log) by @GMS103 created at 2022-07-14 20:13:48



---

archive/issue_comments_506263.json:
```json
{
    "body": "<a id='comment:83'></a>You'll need `configure --enable-download-from-upstream-url`",
    "created_at": "2022-07-14T20:21:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506263",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:83'></a>You'll need `configure --enable-download-from-upstream-url`



---

archive/issue_comments_506264.json:
```json
{
    "body": "<a id='comment:84'></a>Replying to [comment:83 mkoeppe]:\n> You'll need `configure --enable-download-from-upstream-url`\n\n\nI did do it.\n\nNow it is working (after the 29th mirror):\n\n```\nhttps://github.com/pyparsing/pyparsing/releases/download/pyparsing_3.0.9/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirror.lyrahosting.com/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://www-ftp.lip6.fr/pub/math/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirror.koddos.net/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirrors.up.pt/pub/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirror.dogado.de/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://ftp.rediris.es/mirror/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirrors.mit.edu/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirrors.aliyun.com/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirror.yandex.ru/mirrors/sage.math.washington.edu/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://www.mirrorservice.org/sites/www.sagemath.org/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirrors.xmission.com/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttp://files.sagemath.org/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirror.marwan.ma/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirror-hk.koddos.net/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirror.csclub.uwaterloo.ca/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://ftp.sun.ac.za/ftp/pub/mirrors/www.sagemath.org/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirror.ufs.ac.za/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttp://linorg.usp.br/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://ftp.yz.yamagata-u.ac.jp/pub/math/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://ftp.riken.jp/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirror.rcg.sfu.ca/mirror/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirror.aarnet.edu.au/pub/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://sagemath.c3sl.ufpr.br/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://sage.mirror.garr.it/mirrors/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirrors.nju.edu.cn/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirrors.tuna.tsinghua.edu.cn/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://mirrors.ustc.edu.cn/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttp://sagepad.org/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz\nhttps://files.pythonhosted.org/packages/source/p/pyparsing/pyparsing-3.0.9.tar.gz\n```\n(before it got stuck at `https://mirror.marwan.ma/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz`).",
    "created_at": "2022-07-14T21:35:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506264",
    "user": "https://github.com/GMS103"
}
```

<a id='comment:84'></a>Replying to [comment:83 mkoeppe]:
> You'll need `configure --enable-download-from-upstream-url`


I did do it.

Now it is working (after the 29th mirror):

```
https://github.com/pyparsing/pyparsing/releases/download/pyparsing_3.0.9/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirror.lyrahosting.com/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://www-ftp.lip6.fr/pub/math/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirror.koddos.net/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirrors.up.pt/pub/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirror.dogado.de/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://ftp.rediris.es/mirror/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirrors.mit.edu/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirrors.aliyun.com/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirror.yandex.ru/mirrors/sage.math.washington.edu/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://www.mirrorservice.org/sites/www.sagemath.org/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirrors.xmission.com/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
http://files.sagemath.org/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirror.marwan.ma/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirror-hk.koddos.net/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirror.csclub.uwaterloo.ca/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://ftp.sun.ac.za/ftp/pub/mirrors/www.sagemath.org/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirror.ufs.ac.za/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
http://linorg.usp.br/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://ftp.yz.yamagata-u.ac.jp/pub/math/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://ftp.riken.jp/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirror.rcg.sfu.ca/mirror/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirror.aarnet.edu.au/pub/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://sagemath.c3sl.ufpr.br/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://sage.mirror.garr.it/mirrors/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirrors.nju.edu.cn/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirrors.tuna.tsinghua.edu.cn/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://mirrors.ustc.edu.cn/sagemath/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
http://sagepad.org/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz
https://files.pythonhosted.org/packages/source/p/pyparsing/pyparsing-3.0.9.tar.gz
```
(before it got stuck at `https://mirror.marwan.ma/sage/spkg/upstream/pyparsing/pyparsing-3.0.9.tar.gz`).



---

archive/issue_comments_506265.json:
```json
{
    "body": "<a id='comment:85'></a>That's how it's going to work when it is a new version of a Sage package: the mirrors currently only have an earlier version, so it tries and fails all of those before going to the upstream URL.",
    "created_at": "2022-07-14T21:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506265",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:85'></a>That's how it's going to work when it is a new version of a Sage package: the mirrors currently only have an earlier version, so it tries and fails all of those before going to the upstream URL.



---

archive/issue_comments_506266.json:
```json
{
    "body": "<a id='comment:86'></a>I spot-checked again, a little more than last time. 3d plotting works well with various viewers, math in the notebook works. I don't see any issues.",
    "created_at": "2022-07-14T21:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506266",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:86'></a>I spot-checked again, a little more than last time. 3d plotting works well with various viewers, math in the notebook works. I don't see any issues.



---

archive/issue_comments_506267.json:
```json
{
    "body": "<a id='comment:87'></a>If searching the mirrors takes too long, you can edit `upstream/mirror_list` to make it shorter",
    "created_at": "2022-07-14T21:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506267",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:87'></a>If searching the mirrors takes too long, you can edit `upstream/mirror_list` to make it shorter



---

archive/issue_comments_506268.json:
```json
{
    "body": "<a id='comment:88'></a>Thanks for the review!",
    "created_at": "2022-07-14T21:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506268",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:88'></a>Thanks for the review!



---

archive/issue_comments_506269.json:
```json
{
    "body": "<a id='comment:89'></a>Interrupt issues with this version of `prompt_toolkit`: see #33428.",
    "created_at": "2022-07-16T20:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506269",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:89'></a>Interrupt issues with this version of `prompt_toolkit`: see #33428.



---

archive/issue_comments_506270.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-07-16T20:40:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506270",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_506271.json:
```json
{
    "body": "<a id='comment:91'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-16T20:43:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506271",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:91'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506272.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-07-16T20:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506272",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_506273.json:
```json
{
    "body": "<a id='comment:93'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-16T20:53:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506273",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:93'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_506274.json:
```json
{
    "body": "<a id='comment:94'></a>Looks good, thanks.",
    "created_at": "2022-07-16T21:15:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506274",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:94'></a>Looks good, thanks.



---

archive/issue_comments_506275.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-07-16T21:15:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506275",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_506276.json:
```json
{
    "body": "<a id='comment:95'></a>Thanks!",
    "created_at": "2022-07-16T21:23:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506276",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:95'></a>Thanks!



---

archive/issue_comments_506277.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-07-28T19:10:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33530#issuecomment-506277",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_088279.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-28T19:10:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33530",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33530#event-88279"
}
```
