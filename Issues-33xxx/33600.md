# Issue 33600: Configure mathjax in sphinx config and upgrade to Mathjax v3

archive/issues_033363.json:
```json
{
    "assignees": [],
    "body": "Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme, see #33601.\n\nWe also upgrade Mathjax to v3. The configs were migrated using \n https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html\nwith the following manual changes:\n- Remove processEscapes since this now defaults to true in v3 anyway.\n- Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.\n- Remove noerrors extension, which hides error messages. Normally, there shouldn't be any errors and, if there are, its probably good to have them displayed very prominently so that reviewers can discover these issues. But I don't feel very strongly about this change. Reference: https://docs.mathjax.org/en/latest/input/tex/extensions/noerrors.html\n\nRefs #25833\n\nDepends on #25833\n\n**CC:**  @kwankyu @strogdon @haraldschilly @mkoeppe\n\n**Branch:** [public/docs/mathjax_ext](https://github.com/sagemath/sagetrac-mirror/tree/public/docs/mathjax_ext)\n\n**Commit:** [89ec41751c94cd12136596e15375b2a1a183258d](https://github.com/sagemath/sagetrac-mirror/commit/89ec41751c94cd12136596e15375b2a1a183258d)\n\n**Reviewer:** Kwankyu Lee\n\nIssue created by migration from https://trac.sagemath.org/ticket/33600\n\n",
    "closed_at": "2022-05-11T02:14:43Z",
    "created_at": "2022-03-30T12:43:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20documentation",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Configure mathjax in sphinx config and upgrade to Mathjax v3",
    "type": "issue",
    "updated_at": "2022-05-11T02:14:43Z",
    "url": "https://github.com/sagemath/sage/issues/33600",
    "user": "https://github.com/tobiasdiez"
}
```
Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme, see #33601.

We also upgrade Mathjax to v3. The configs were migrated using 
 https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html
with the following manual changes:
- Remove processEscapes since this now defaults to true in v3 anyway.
- Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.
- Remove noerrors extension, which hides error messages. Normally, there shouldn't be any errors and, if there are, its probably good to have them displayed very prominently so that reviewers can discover these issues. But I don't feel very strongly about this change. Reference: https://docs.mathjax.org/en/latest/input/tex/extensions/noerrors.html

Refs #25833

Depends on #25833

**CC:**  @kwankyu @strogdon @haraldschilly @mkoeppe

**Branch:** [public/docs/mathjax_ext](https://github.com/sagemath/sagetrac-mirror/tree/public/docs/mathjax_ext)

**Commit:** [89ec41751c94cd12136596e15375b2a1a183258d](https://github.com/sagemath/sagetrac-mirror/commit/89ec41751c94cd12136596e15375b2a1a183258d)

**Reviewer:** Kwankyu Lee

Issue created by migration from https://trac.sagemath.org/ticket/33600





---

archive/issue_events_406557.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-30T12:43:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20documentation",
    "label_color": "08517b",
    "label_name": "component: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406557"
}
```



---

archive/issue_events_406558.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-30T12:43:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406558"
}
```



---

archive/issue_events_406559.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-30T12:43:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "008080",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406559"
}
```



---

archive/issue_comments_545447.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme.\n+Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme, see #33601.\n \n \n``````\n",
    "created_at": "2022-03-30T12:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545447",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme.
+Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme, see #33601.
 
 
``````




---

archive/issue_comments_545448.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme, see #33601.\n \n+We also upgrade Mathjax to v3. The configs were migrated using \n \n+with the following manual changes:\n+- Remove processEscapes since this now defaults to true in v3 anyway.\n+- Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.\n+- Remove noerrors extension, which hides error messages. Normally, there shouldn't be any errors and, if there are, its probably good to have them displayed very prominently so that reviewers can discover these issues. But I don't feel very strongly about this change. Reference: https://docs.mathjax.org/en/latest/input/tex/extensions/noerrors.html\n+\n+Refs #25833\n``````\n",
    "created_at": "2022-03-30T13:46:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545448",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,10 @@
 Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme, see #33601.
 
+We also upgrade Mathjax to v3. The configs were migrated using 
 
+with the following manual changes:
+- Remove processEscapes since this now defaults to true in v3 anyway.
+- Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.
+- Remove noerrors extension, which hides error messages. Normally, there shouldn't be any errors and, if there are, its probably good to have them displayed very prominently so that reviewers can discover these issues. But I don't feel very strongly about this change. Reference: https://docs.mathjax.org/en/latest/input/tex/extensions/noerrors.html
+
+Refs #25833
``````




---

archive/issue_events_406560.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-30T13:46:25Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "rename": {
        "from": "Configure mathjax in sphinx config  public/docs/mathjax_ext",
        "to": "Configure mathjax in sphinx config and upgrade to Mathjax v3"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406560"
}
```



---

archive/issue_events_406561.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-30T13:46:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406561"
}
```



---

archive/issue_comments_545449.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis seems to do the job for me. With the disclaimer that I could only test the tutorial and dev guide, since \"reference\" fails with a lot of errors on gitpod. Among them\n\n```\n[tensor_fr] Extension error (matplotlib.sphinxext.plot_directive):\n[tensor_fr] Handler <function _copy_css_file at 0x7f47e225b4c0> for event 'build-finished' threw an exception (exception: [Errno 17] File exists: '/home/gitpod/sage-local/share/doc/sage/html/en/reference/tensor_free_modules/_static')\n```",
    "created_at": "2022-03-30T13:46:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545449",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:2'></a>
This seems to do the job for me. With the disclaimer that I could only test the tutorial and dev guide, since "reference" fails with a lot of errors on gitpod. Among them

```
[tensor_fr] Extension error (matplotlib.sphinxext.plot_directive):
[tensor_fr] Handler <function _copy_css_file at 0x7f47e225b4c0> for event 'build-finished' threw an exception (exception: [Errno 17] File exists: '/home/gitpod/sage-local/share/doc/sage/html/en/reference/tensor_free_modules/_static')
```



---

archive/issue_comments_545450.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9bc443204bed20fac922cc758ca51259e2cbfa45\">9bc4432</a></td><td><code>Migrate rest of config</code></td></tr></table>\n",
    "created_at": "2022-03-30T13:46:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545450",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9bc443204bed20fac922cc758ca51259e2cbfa45">9bc4432</a></td><td><code>Migrate rest of config</code></td></tr></table>




---

archive/issue_comments_545451.json:
```json
{
    "body": "**Changing commit** from \"[b90316d145d7eff02092e01bafbf091b269ed8ef](https://github.com/sagemath/sagetrac-mirror/commit/b90316d145d7eff02092e01bafbf091b269ed8ef)\" to \"[9bc443204bed20fac922cc758ca51259e2cbfa45](https://github.com/sagemath/sagetrac-mirror/commit/9bc443204bed20fac922cc758ca51259e2cbfa45)\".",
    "created_at": "2022-03-30T13:46:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545451",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[b90316d145d7eff02092e01bafbf091b269ed8ef](https://github.com/sagemath/sagetrac-mirror/commit/b90316d145d7eff02092e01bafbf091b269ed8ef)" to "[9bc443204bed20fac922cc758ca51259e2cbfa45](https://github.com/sagemath/sagetrac-mirror/commit/9bc443204bed20fac922cc758ca51259e2cbfa45)".



---

archive/issue_comments_545452.json:
```json
{
    "body": "<a id='comment:4'></a>\nSee #30296 and references within for previous efforts / discussion regarding mathjax 3",
    "created_at": "2022-03-30T16:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545452",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
See #30296 and references within for previous efforts / discussion regarding mathjax 3



---

archive/issue_comments_545453.json:
```json
{
    "body": "<a id='comment:5'></a>\nThanks for the pointer. It seems the issues discussed in that ticket revolve around packaging problems. I circumvent these here by using the CDN.",
    "created_at": "2022-03-30T18:41:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545453",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:5'></a>
Thanks for the pointer. It seems the issues discussed in that ticket revolve around packaging problems. I circumvent these here by using the CDN.



---

archive/issue_comments_545454.json:
```json
{
    "body": "<a id='comment:6'></a>\nI would expect that people want to keep an offline version without using the CDN.",
    "created_at": "2022-03-30T23:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545454",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
I would expect that people want to keep an offline version without using the CDN.



---

archive/issue_comments_545455.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [@tobiasdiez](#comment%3A5):\n> It seems the issues discussed in that ticket revolve around packaging problems.\n\nOne of the \"references within\" is #25833 for the upgrade to 3.x. \nIt would be important to know whether [#25833 comment:9](https://github.com/sagemath/sage/issues/25833#comment:9) is still current, and whether it is relevant for our use of Sphinx.",
    "created_at": "2022-03-31T01:33:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545455",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Replying to [@tobiasdiez](#comment%3A5):
> It seems the issues discussed in that ticket revolve around packaging problems.

One of the "references within" is #25833 for the upgrade to 3.x. 
It would be important to know whether [#25833 comment:9](https://github.com/sagemath/sage/issues/25833#comment:9) is still current, and whether it is relevant for our use of Sphinx.



---

archive/issue_events_406562.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-31T01:33:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406562"
}
```



---

archive/issue_events_406563.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-31T01:33:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406563"
}
```



---

archive/issue_comments_545456.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [@mkoeppe](#comment%3A7):\n> One of the \"references within\" is #25833 for the upgrade to 3.x. \n> It would be important to know whether [#25833 comment:9](https://github.com/sagemath/sage/issues/25833#comment:9) is still current, and whether it is relevant for our use of Sphinx.\n\nThat feature (not compatible with latex) of mathjax2 would be relevant only in online use of mathjax, such as in jupyter notebook. \n\nAs far as I know, that \"automatic line breaking\" is not used in our documentation. If there is any, then that is something to be fixed.\n\nFor us, there is no reason not to upgrade to mathjax3.",
    "created_at": "2022-03-31T05:03:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545456",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:8'></a>
Replying to [@mkoeppe](#comment%3A7):
> One of the "references within" is #25833 for the upgrade to 3.x. 
> It would be important to know whether [#25833 comment:9](https://github.com/sagemath/sage/issues/25833#comment:9) is still current, and whether it is relevant for our use of Sphinx.

That feature (not compatible with latex) of mathjax2 would be relevant only in online use of mathjax, such as in jupyter notebook. 

As far as I know, that "automatic line breaking" is not used in our documentation. If there is any, then that is something to be fixed.

For us, there is no reason not to upgrade to mathjax3.



---

archive/issue_comments_545457.json:
```json
{
    "body": "<a id='comment:9'></a>\nSage cell has moved to mathjax3 (relatively) long time ago. It may be worth while to check the mathjax3 configuration used in sage cell:\n\nhttps://github.com/sagemath/sagecell/blob/master/js/cell.js",
    "created_at": "2022-03-31T05:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545457",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:9'></a>
Sage cell has moved to mathjax3 (relatively) long time ago. It may be worth while to check the mathjax3 configuration used in sage cell:

https://github.com/sagemath/sagecell/blob/master/js/cell.js



---

archive/issue_comments_545458.json:
```json
{
    "body": "<a id='comment:10'></a>\nYou converted single quotes to double quotes. Single quotes are conventionally used for strings containing code (not plain English). You should not change them without compelling reasons.",
    "created_at": "2022-03-31T05:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545458",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:10'></a>
You converted single quotes to double quotes. Single quotes are conventionally used for strings containing code (not plain English). You should not change them without compelling reasons.



---

archive/issue_events_406564.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-31T08:34:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406564"
}
```



---

archive/issue_events_406565.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-31T08:34:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406565"
}
```



---

archive/issue_comments_545459.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [@kwankyu](#comment%3A8):\n> Replying to [@mkoeppe](#comment%3A7):\n> > One of the \"references within\" is #25833 for the upgrade to 3.x. \n> > It would be important to know whether [#25833 comment:9](https://github.com/sagemath/sage/issues/25833#comment:9) is still current, and whether it is relevant for our use of Sphinx.\n\n> \n> That feature (not compatible with latex) of mathjax2 would be relevant only in online use of mathjax, such as in jupyter notebook. \n> \n> As far as I know, that \"automatic line breaking\" is not used in our documentation. If there is any, then that is something to be fixed.\n> \n> For us, there is no reason not to upgrade to mathjax3.\n\nThanks for the clarification!",
    "created_at": "2022-03-31T08:34:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545459",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:11'></a>
Replying to [@kwankyu](#comment%3A8):
> Replying to [@mkoeppe](#comment%3A7):
> > One of the "references within" is #25833 for the upgrade to 3.x. 
> > It would be important to know whether [#25833 comment:9](https://github.com/sagemath/sage/issues/25833#comment:9) is still current, and whether it is relevant for our use of Sphinx.

> 
> That feature (not compatible with latex) of mathjax2 would be relevant only in online use of mathjax, such as in jupyter notebook. 
> 
> As far as I know, that "automatic line breaking" is not used in our documentation. If there is any, then that is something to be fixed.
> 
> For us, there is no reason not to upgrade to mathjax3.

Thanks for the clarification!



---

archive/issue_comments_545460.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [@kwankyu](#comment%3A10):\n> You converted single quotes to double quotes. Single quotes are conventionally used for strings containing code (not plain English). You should not change them without compelling reasons. \n\nI wasn't aware that such a styleguide rule exists. The existing code in both files doesn't seem to follow it either - it's just a random mix of single and double quotes. I tried to make at least the lines homogeneous that I've touched.",
    "created_at": "2022-03-31T08:37:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545460",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:12'></a>
Replying to [@kwankyu](#comment%3A10):
> You converted single quotes to double quotes. Single quotes are conventionally used for strings containing code (not plain English). You should not change them without compelling reasons. 

I wasn't aware that such a styleguide rule exists. The existing code in both files doesn't seem to follow it either - it's just a random mix of single and double quotes. I tried to make at least the lines homogeneous that I've touched.



---

archive/issue_comments_545461.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [@tobiasdiez](#comment%3A12):\n> Replying to [@kwankyu](#comment%3A10):\n> > You converted single quotes to double quotes. Single quotes are conventionally used for strings containing code (not plain English). You should not change them without compelling reasons. \n\n> \n> I wasn't aware that such a style guide rule exists. \n\nI must say it's not a rule. But single quotes are commonly used for code strings.\n\n> The existing code in both files doesn't seem to follow it either - it's just a random mix of single and double quotes. I tried to make at least the lines homogeneous that I've touched.\n\nLeaving single-quoted strings as they are will contribute overall homogeneity of the sage code base.",
    "created_at": "2022-03-31T10:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545461",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:13'></a>
Replying to [@tobiasdiez](#comment%3A12):
> Replying to [@kwankyu](#comment%3A10):
> > You converted single quotes to double quotes. Single quotes are conventionally used for strings containing code (not plain English). You should not change them without compelling reasons. 

> 
> I wasn't aware that such a style guide rule exists. 

I must say it's not a rule. But single quotes are commonly used for code strings.

> The existing code in both files doesn't seem to follow it either - it's just a random mix of single and double quotes. I tried to make at least the lines homogeneous that I've touched.

Leaving single-quoted strings as they are will contribute overall homogeneity of the sage code base.



---

archive/issue_comments_545462.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4e1118f3099113768dfee029146e63614a46391\">e4e1118</a></td><td><code>Convert double quotes to single quotes</code></td></tr></table>\n",
    "created_at": "2022-03-31T11:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545462",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4e1118f3099113768dfee029146e63614a46391">e4e1118</a></td><td><code>Convert double quotes to single quotes</code></td></tr></table>




---

archive/issue_comments_545463.json:
```json
{
    "body": "**Changing commit** from \"[9bc443204bed20fac922cc758ca51259e2cbfa45](https://github.com/sagemath/sagetrac-mirror/commit/9bc443204bed20fac922cc758ca51259e2cbfa45)\" to \"[e4e1118f3099113768dfee029146e63614a46391](https://github.com/sagemath/sagetrac-mirror/commit/e4e1118f3099113768dfee029146e63614a46391)\".",
    "created_at": "2022-03-31T11:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545463",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[9bc443204bed20fac922cc758ca51259e2cbfa45](https://github.com/sagemath/sagetrac-mirror/commit/9bc443204bed20fac922cc758ca51259e2cbfa45)" to "[e4e1118f3099113768dfee029146e63614a46391](https://github.com/sagemath/sagetrac-mirror/commit/e4e1118f3099113768dfee029146e63614a46391)".



---

archive/issue_comments_545464.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [@kwankyu](#comment%3A13):\n> Leaving single-quoted strings as they are will contribute overall homogeneity of the sage code base. \n\nSadly there is not much of a homogeneity. For example, latex-macros.py contains\n\n```python\n    args = \"(\"\n    for x in sample_args:\n        count += 1\n        args += str(x) + ','\n    args += ')'\n```\n\nAnyway, I've reverted these changes.",
    "created_at": "2022-03-31T11:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545464",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:15'></a>
Replying to [@kwankyu](#comment%3A13):
> Leaving single-quoted strings as they are will contribute overall homogeneity of the sage code base. 

Sadly there is not much of a homogeneity. For example, latex-macros.py contains

```python
    args = "("
    for x in sample_args:
        count += 1
        args += str(x) + ','
    args += ')'
```

Anyway, I've reverted these changes.



---

archive/issue_comments_545465.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [@tobiasdiez](#comment%3A15):\n> Sadly there is not much of a homogeneity. For example, latex-macros.py contains\n> \n> ```python\n>     args = \"(\"\n>     for x in sample_args:\n>         count += 1\n>         args += str(x) + ','\n>     args += ')'\n> ```\n\nWell.. that is embarrassing.\n\n> Anyway, I've reverted these changes.\n\nThank you.",
    "created_at": "2022-03-31T12:58:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545465",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:16'></a>
Replying to [@tobiasdiez](#comment%3A15):
> Sadly there is not much of a homogeneity. For example, latex-macros.py contains
> 
> ```python
>     args = "("
>     for x in sample_args:
>         count += 1
>         args += str(x) + ','
>     args += ')'
> ```

Well.. that is embarrassing.

> Anyway, I've reverted these changes.

Thank you.



---

archive/issue_events_406566.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-05T00:44:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406566"
}
```



---

archive/issue_events_406567.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-05T00:44:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406567"
}
```



---

archive/issue_comments_545466.json:
```json
{
    "body": "**Changing commit** from \"[e4e1118f3099113768dfee029146e63614a46391](https://github.com/sagemath/sagetrac-mirror/commit/e4e1118f3099113768dfee029146e63614a46391)\" to \"[e852a599b0ecdd39bb3adcdb4682a2d2902a398d](https://github.com/sagemath/sagetrac-mirror/commit/e852a599b0ecdd39bb3adcdb4682a2d2902a398d)\".",
    "created_at": "2022-04-05T14:54:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545466",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[e4e1118f3099113768dfee029146e63614a46391](https://github.com/sagemath/sagetrac-mirror/commit/e4e1118f3099113768dfee029146e63614a46391)" to "[e852a599b0ecdd39bb3adcdb4682a2d2902a398d](https://github.com/sagemath/sagetrac-mirror/commit/e852a599b0ecdd39bb3adcdb4682a2d2902a398d)".



---

archive/issue_comments_545467.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e852a599b0ecdd39bb3adcdb4682a2d2902a398d\">e852a59</a></td><td><code>Merge remote-tracking branch 'origin/develop' into public/docs/mathjax_ext</code></td></tr></table>\n",
    "created_at": "2022-04-05T14:54:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545467",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e852a599b0ecdd39bb3adcdb4682a2d2902a398d">e852a59</a></td><td><code>Merge remote-tracking branch 'origin/develop' into public/docs/mathjax_ext</code></td></tr></table>




---

archive/issue_events_406568.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-05T14:55:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406568"
}
```



---

archive/issue_events_406569.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-05T14:55:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406569"
}
```



---

archive/issue_comments_545468.json:
```json
{
    "body": "<a id='comment:20'></a>\ncomment:6?",
    "created_at": "2022-04-05T18:29:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545468",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>
comment:6?



---

archive/issue_comments_545469.json:
```json
{
    "body": "**Changing commit** from \"[e852a599b0ecdd39bb3adcdb4682a2d2902a398d](https://github.com/sagemath/sagetrac-mirror/commit/e852a599b0ecdd39bb3adcdb4682a2d2902a398d)\" to \"[097c034ada7ce77afedb20da5705e50f5d3a0737](https://github.com/sagemath/sagetrac-mirror/commit/097c034ada7ce77afedb20da5705e50f5d3a0737)\".",
    "created_at": "2022-04-06T01:25:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545469",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[e852a599b0ecdd39bb3adcdb4682a2d2902a398d](https://github.com/sagemath/sagetrac-mirror/commit/e852a599b0ecdd39bb3adcdb4682a2d2902a398d)" to "[097c034ada7ce77afedb20da5705e50f5d3a0737](https://github.com/sagemath/sagetrac-mirror/commit/097c034ada7ce77afedb20da5705e50f5d3a0737)".



---

archive/issue_comments_545470.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/097c034ada7ce77afedb20da5705e50f5d3a0737\">097c034</a></td><td><code>Minor edits</code></td></tr></table>\n",
    "created_at": "2022-04-06T01:25:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545470",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/097c034ada7ce77afedb20da5705e50f5d3a0737">097c034</a></td><td><code>Minor edits</code></td></tr></table>




---

archive/issue_comments_545471.json:
```json
{
    "body": "**Attachment:** [Screen Shot.png.gz](https://github.com/sagemath/sage/files/ticket33600/d8d5b9938b8b22d5b2c0c643c85b7549.gz)\n\n**Attachment:** [screen-shot.png.gz](https://github.com/sagemath/sage/files/ticket33600/screen-shot.png.gz)",
    "created_at": "2022-04-06T01:34:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545471",
    "user": "https://github.com/kwankyu"
}
```

**Attachment:** [Screen Shot.png.gz](https://github.com/sagemath/sage/files/ticket33600/d8d5b9938b8b22d5b2c0c643c85b7549.gz)

**Attachment:** [screen-shot.png.gz](https://github.com/sagemath/sage/files/ticket33600/screen-shot.png.gz)



---

archive/issue_comments_545472.json:
```json
{
    "body": "<a id='comment:22'></a>\nMy commit contains minor edits. I removed the comment to 'sphinx.ext.mathjax', which seems unnecessary only cluttering code.\n\nOtherwise all looks good to me. But as Matthias points out, this ticket needs to ship MathJax3 for offline users.\n\nI noticed a glitch in `local/share/doc/sage/html/en/index.html`:\n\n![](screen-shot.png)\n\nbut this seems a bug of MathJax3, hopefully temporary.",
    "created_at": "2022-04-06T01:37:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545472",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:22'></a>
My commit contains minor edits. I removed the comment to 'sphinx.ext.mathjax', which seems unnecessary only cluttering code.

Otherwise all looks good to me. But as Matthias points out, this ticket needs to ship MathJax3 for offline users.

I noticed a glitch in `local/share/doc/sage/html/en/index.html`:

![](screen-shot.png)

but this seems a bug of MathJax3, hopefully temporary.



---

archive/issue_comments_545473.json:
```json
{
    "body": "<a id='comment:23'></a>\nA question: \n\nmathjax2 config `theme_mathjax_macros` is missing in the new mathjax3 config. Is this never used in sage documentation?",
    "created_at": "2022-04-06T01:41:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545473",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:23'></a>
A question: 

mathjax2 config `theme_mathjax_macros` is missing in the new mathjax3 config. Is this never used in sage documentation?



---

archive/issue_comments_545474.json:
```json
{
    "body": "<a id='comment:24'></a>\nAre these \n\n- Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.\n- Remove noerrors extension, which hides error messages. ...\n\ntrue? I don't see them in the code before the patch.",
    "created_at": "2022-04-06T01:52:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545474",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:24'></a>
Are these 

- Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.
- Remove noerrors extension, which hides error messages. ...

true? I don't see them in the code before the patch.



---

archive/issue_comments_545475.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [@mkoeppe](#comment%3A6):\n> I would expect that people want to keep an offline version without using the CDN.\n\nIsn't the pdf enough for offline documentation? And if you really need the html docs offline, you can also save them from the browser.\n\nWe can of course download the js file from the cdn and ship it, but that would make the experience for other people less nice since you don't get all the advantages that a central cdn gives you.",
    "created_at": "2022-04-06T19:57:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545475",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:25'></a>
Replying to [@mkoeppe](#comment%3A6):
> I would expect that people want to keep an offline version without using the CDN.

Isn't the pdf enough for offline documentation? And if you really need the html docs offline, you can also save them from the browser.

We can of course download the js file from the cdn and ship it, but that would make the experience for other people less nice since you don't get all the advantages that a central cdn gives you.



---

archive/issue_comments_545476.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [@kwankyu](#comment%3A22):\n> My commit contains minor edits. I removed the comment to 'sphinx.ext.mathjax', which seems unnecessary only cluttering code.\n\nDid you forget to push it? Or at least I cannot see your commit.",
    "created_at": "2022-04-06T19:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545476",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:26'></a>
Replying to [@kwankyu](#comment%3A22):
> My commit contains minor edits. I removed the comment to 'sphinx.ext.mathjax', which seems unnecessary only cluttering code.

Did you forget to push it? Or at least I cannot see your commit.



---

archive/issue_comments_545477.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [@kwankyu](#comment%3A23):\n> A question: \n> \n> mathjax2 config `theme_mathjax_macros` is missing in the new mathjax3 config. Is this never used in sage documentation?\n\nThis was only used to inject the mathjax macros into the `mathjax_sage.js_t` file. Now the macros are directly defined via the new `mathjax3_config` in `docs/conf.py`.\n`",
    "created_at": "2022-04-06T20:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545477",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:27'></a>
Replying to [@kwankyu](#comment%3A23):
> A question: 
> 
> mathjax2 config `theme_mathjax_macros` is missing in the new mathjax3 config. Is this never used in sage documentation?

This was only used to inject the mathjax macros into the `mathjax_sage.js_t` file. Now the macros are directly defined via the new `mathjax3_config` in `docs/conf.py`.
`



---

archive/issue_comments_545478.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [@kwankyu](#comment%3A24):\n> Are these \n> \n> - Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.\n> - Remove noerrors extension, which hides error messages. ...\n> \n> true? I don't see them in the code before the patch.\n\nI've used the config migration tool https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html, which then output these config options. They might be implicitly defined in the old `config=TeX-AMS_HTML-full`, or it just might be bug in the migration tool.",
    "created_at": "2022-04-06T20:04:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545478",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:28'></a>
Replying to [@kwankyu](#comment%3A24):
> Are these 
> 
> - Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.
> - Remove noerrors extension, which hides error messages. ...
> 
> true? I don't see them in the code before the patch.

I've used the config migration tool https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html, which then output these config options. They might be implicitly defined in the old `config=TeX-AMS_HTML-full`, or it just might be bug in the migration tool.



---

archive/issue_comments_545479.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme, see #33601.\n \n We also upgrade Mathjax to v3. The configs were migrated using \n-\n+ https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html\n with the following manual changes:\n - Remove processEscapes since this now defaults to true in v3 anyway.\n - Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.\n``````\n",
    "created_at": "2022-04-06T20:05:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545479",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme, see #33601.
 
 We also upgrade Mathjax to v3. The configs were migrated using 
-
+ https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html
 with the following manual changes:
 - Remove processEscapes since this now defaults to true in v3 anyway.
 - Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.
``````




---

archive/issue_comments_545480.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [@tobiasdiez](#comment%3A28):\n> Replying to [@kwankyu](#comment%3A24):\n> > Are these \n> > \n> > - Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.\n> > - Remove noerrors extension, which hides error messages. ...\n> > \n> > true? I don't see them in the code before the patch.\n\n> \n> I've used the config migration tool https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html, which then output these config options. They might be implicitly defined in the old `config=TeX-AMS_HTML-full`, or it just might be bug in the migration tool.\n\nIf the messages are merely suggesting you to make those changes and you didn't do the manual changes, then the messages copied to the ticket description are just confusing.",
    "created_at": "2022-04-06T21:33:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545480",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:30'></a>
Replying to [@tobiasdiez](#comment%3A28):
> Replying to [@kwankyu](#comment%3A24):
> > Are these 
> > 
> > - Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.
> > - Remove noerrors extension, which hides error messages. ...
> > 
> > true? I don't see them in the code before the patch.

> 
> I've used the config migration tool https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html, which then output these config options. They might be implicitly defined in the old `config=TeX-AMS_HTML-full`, or it just might be bug in the migration tool.

If the messages are merely suggesting you to make those changes and you didn't do the manual changes, then the messages copied to the ticket description are just confusing.



---

archive/issue_comments_545481.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [@tobiasdiez](#comment%3A27):\n> Replying to [@kwankyu](#comment%3A23):\n> > A question: \n> > \n> > mathjax2 config `theme_mathjax_macros` is missing in the new mathjax3 config. Is this never used in sage documentation?\n\n> \n> This was only used to inject the mathjax macros into the `mathjax_sage.js_t` file. Now the macros are directly defined via the new `mathjax3_config` in `docs/conf.py`.\n\nIf it was really used, then it is defined somewhere, and now it must be deleted in you branch. But I don't see them...",
    "created_at": "2022-04-06T21:43:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545481",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:31'></a>
Replying to [@tobiasdiez](#comment%3A27):
> Replying to [@kwankyu](#comment%3A23):
> > A question: 
> > 
> > mathjax2 config `theme_mathjax_macros` is missing in the new mathjax3 config. Is this never used in sage documentation?

> 
> This was only used to inject the mathjax macros into the `mathjax_sage.js_t` file. Now the macros are directly defined via the new `mathjax3_config` in `docs/conf.py`.

If it was really used, then it is defined somewhere, and now it must be deleted in you branch. But I don't see them...



---

archive/issue_comments_545482.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [@tobiasdiez](#comment%3A26):\n> Replying to [@kwankyu](#comment%3A22):\n> > My commit contains minor edits. I removed the comment to 'sphinx.ext.mathjax', which seems unnecessary only cluttering code.\n\n> \n> Did you forget to push it? Or at least I cannot see your commit.\n\nIt is in [comment:21](#comment%3A21).",
    "created_at": "2022-04-06T21:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545482",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:32'></a>
Replying to [@tobiasdiez](#comment%3A26):
> Replying to [@kwankyu](#comment%3A22):
> > My commit contains minor edits. I removed the comment to 'sphinx.ext.mathjax', which seems unnecessary only cluttering code.

> 
> Did you forget to push it? Or at least I cannot see your commit.

It is in [comment:21](#comment%3A21).



---

archive/issue_comments_545483.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [@tobiasdiez](#comment%3A25):\n> We can of course download the js file from the cdn and ship it, but that would make the experience for other people less nice since you don't get all the advantages that a central cdn gives you.\n\nIt seems we need `./configure --offline-doc` or something.",
    "created_at": "2022-04-06T21:56:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545483",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:33'></a>
Replying to [@tobiasdiez](#comment%3A25):
> We can of course download the js file from the cdn and ship it, but that would make the experience for other people less nice since you don't get all the advantages that a central cdn gives you.

It seems we need `./configure --offline-doc` or something.



---

archive/issue_comments_545484.json:
```json
{
    "body": "<a id='comment:34'></a>\nSee #25833.",
    "created_at": "2022-04-07T05:03:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545484",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:34'></a>
See #25833.



---

archive/issue_comments_545485.json:
```json
{
    "body": "**Dependencies:** #25833",
    "created_at": "2022-04-07T05:10:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545485",
    "user": "https://github.com/kwankyu"
}
```

**Dependencies:** #25833



---

archive/issue_comments_545486.json:
```json
{
    "body": "<a id='comment:36'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d647ea6665a878e0edf2d4a732fba53d13773304\">d647ea6</a></td><td><code>Add sage package mathjax3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c2984dab2fe058b448ff6eb8178a235c1c28eca\">7c2984d</a></td><td><code>Remove garbage files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/321c8b5ae2ba3265e803c77c9b66d43f8dace092\">321c8b5</a></td><td><code>Put into mathjax subdirectory</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cc5eb75f791eabf5a594e9fc548d324fb23d7ac\">7cc5eb7</a></td><td><code>Build doc with mathjax3 (default: offline)</code></td></tr></table>\n",
    "created_at": "2022-04-07T07:55:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545486",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:36'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d647ea6665a878e0edf2d4a732fba53d13773304">d647ea6</a></td><td><code>Add sage package mathjax3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c2984dab2fe058b448ff6eb8178a235c1c28eca">7c2984d</a></td><td><code>Remove garbage files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/321c8b5ae2ba3265e803c77c9b66d43f8dace092">321c8b5</a></td><td><code>Put into mathjax subdirectory</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cc5eb75f791eabf5a594e9fc548d324fb23d7ac">7cc5eb7</a></td><td><code>Build doc with mathjax3 (default: offline)</code></td></tr></table>




---

archive/issue_comments_545487.json:
```json
{
    "body": "**Changing commit** from \"[097c034ada7ce77afedb20da5705e50f5d3a0737](https://github.com/sagemath/sagetrac-mirror/commit/097c034ada7ce77afedb20da5705e50f5d3a0737)\" to \"[7cc5eb75f791eabf5a594e9fc548d324fb23d7ac](https://github.com/sagemath/sagetrac-mirror/commit/7cc5eb75f791eabf5a594e9fc548d324fb23d7ac)\".",
    "created_at": "2022-04-07T07:55:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545487",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[097c034ada7ce77afedb20da5705e50f5d3a0737](https://github.com/sagemath/sagetrac-mirror/commit/097c034ada7ce77afedb20da5705e50f5d3a0737)" to "[7cc5eb75f791eabf5a594e9fc548d324fb23d7ac](https://github.com/sagemath/sagetrac-mirror/commit/7cc5eb75f791eabf5a594e9fc548d324fb23d7ac)".



---

archive/issue_comments_545488.json:
```json
{
    "body": "<a id='comment:37'></a>\nNow the branch at #25833 is merged.\n\nPresently the default is offline mathjax3, to experiment. When everything is okay, we should decide what should be the default.",
    "created_at": "2022-04-07T07:58:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545488",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:37'></a>
Now the branch at #25833 is merged.

Presently the default is offline mathjax3, to experiment. When everything is okay, we should decide what should be the default.



---

archive/issue_comments_545489.json:
```json
{
    "body": "**Changing author** from \"Tobias Diez\" to \"Tobias Diez, Kwankyu Lee\".",
    "created_at": "2022-04-07T07:59:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545489",
    "user": "https://github.com/kwankyu"
}
```

**Changing author** from "Tobias Diez" to "Tobias Diez, Kwankyu Lee".



---

archive/issue_comments_545490.json:
```json
{
    "body": "<a id='comment:39'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c92b6c0bc236152687c2b9b03a20941901bb4057\">c92b6c0</a></td><td><code>Remove commented-out lines</code></td></tr></table>\n",
    "created_at": "2022-04-07T08:08:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545490",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:39'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c92b6c0bc236152687c2b9b03a20941901bb4057">c92b6c0</a></td><td><code>Remove commented-out lines</code></td></tr></table>




---

archive/issue_comments_545491.json:
```json
{
    "body": "**Changing commit** from \"[7cc5eb75f791eabf5a594e9fc548d324fb23d7ac](https://github.com/sagemath/sagetrac-mirror/commit/7cc5eb75f791eabf5a594e9fc548d324fb23d7ac)\" to \"[c92b6c0bc236152687c2b9b03a20941901bb4057](https://github.com/sagemath/sagetrac-mirror/commit/c92b6c0bc236152687c2b9b03a20941901bb4057)\".",
    "created_at": "2022-04-07T08:08:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545491",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[7cc5eb75f791eabf5a594e9fc548d324fb23d7ac](https://github.com/sagemath/sagetrac-mirror/commit/7cc5eb75f791eabf5a594e9fc548d324fb23d7ac)" to "[c92b6c0bc236152687c2b9b03a20941901bb4057](https://github.com/sagemath/sagetrac-mirror/commit/c92b6c0bc236152687c2b9b03a20941901bb4057)".



---

archive/issue_comments_545492.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [@kwankyu](#comment%3A37):\n> Now the branch at #25833 is merged.\n> \n> Presently the default is offline mathjax3, to experiment. When everything is okay, we should decide what should be the default.\n\nThanks for your work on this!",
    "created_at": "2022-04-07T16:01:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545492",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:40'></a>
Replying to [@kwankyu](#comment%3A37):
> Now the branch at #25833 is merged.
> 
> Presently the default is offline mathjax3, to experiment. When everything is okay, we should decide what should be the default.

Thanks for your work on this!



---

archive/issue_comments_545493.json:
```json
{
    "body": "**Changing commit** from \"[c92b6c0bc236152687c2b9b03a20941901bb4057](https://github.com/sagemath/sagetrac-mirror/commit/c92b6c0bc236152687c2b9b03a20941901bb4057)\" to \"[5412dcb00418d1c1eacf161393837f56237e369d](https://github.com/sagemath/sagetrac-mirror/commit/5412dcb00418d1c1eacf161393837f56237e369d)\".",
    "created_at": "2022-04-08T01:19:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545493",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[c92b6c0bc236152687c2b9b03a20941901bb4057](https://github.com/sagemath/sagetrac-mirror/commit/c92b6c0bc236152687c2b9b03a20941901bb4057)" to "[5412dcb00418d1c1eacf161393837f56237e369d](https://github.com/sagemath/sagetrac-mirror/commit/5412dcb00418d1c1eacf161393837f56237e369d)".



---

archive/issue_comments_545494.json:
```json
{
    "body": "<a id='comment:41'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46d0d69257a0aec45e1a0b139390f56dba72ff2f\">46d0d69</a></td><td><code>Add sage package mathjax3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6da197eaba5d868ee70a71819b7ce4572a679d6d\">6da197e</a></td><td><code>Remove garbage files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd60742011ccf822629c8dda8a35315da839459d\">bd60742</a></td><td><code>Put into mathjax subdirectory</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b47d224f3c41232f73f64467288ca191ec75244\">5b47d22</a></td><td><code>Fix checksums</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1cdce2cd387c22e9709f64756cf98910be5d8c3\">f1cdce2</a></td><td><code>Merge branch 'spkg-mathjax3-trac25833'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5412dcb00418d1c1eacf161393837f56237e369d\">5412dcb</a></td><td><code>Rename config variable to --use-cdns</code></td></tr></table>\n",
    "created_at": "2022-04-08T01:19:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545494",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:41'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46d0d69257a0aec45e1a0b139390f56dba72ff2f">46d0d69</a></td><td><code>Add sage package mathjax3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6da197eaba5d868ee70a71819b7ce4572a679d6d">6da197e</a></td><td><code>Remove garbage files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd60742011ccf822629c8dda8a35315da839459d">bd60742</a></td><td><code>Put into mathjax subdirectory</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b47d224f3c41232f73f64467288ca191ec75244">5b47d22</a></td><td><code>Fix checksums</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1cdce2cd387c22e9709f64756cf98910be5d8c3">f1cdce2</a></td><td><code>Merge branch 'spkg-mathjax3-trac25833'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5412dcb00418d1c1eacf161393837f56237e369d">5412dcb</a></td><td><code>Rename config variable to --use-cdns</code></td></tr></table>




---

archive/issue_comments_545495.json:
```json
{
    "body": "<a id='comment:42'></a>\nI think that offline sage documentation should be the default as it has been. So I renamed the config variable to `--use-cdns`. If we change the default to \"online\" in the future, then we can just turn on `--use-cdns`.",
    "created_at": "2022-04-08T01:24:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545495",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:42'></a>
I think that offline sage documentation should be the default as it has been. So I renamed the config variable to `--use-cdns`. If we change the default to "online" in the future, then we can just turn on `--use-cdns`.



---

archive/issue_comments_545496.json:
```json
{
    "body": "<a id='comment:43'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a186d24b571358b52340e6b908b4f0f23d7544d\">2a186d2</a></td><td><code>Fix a typo</code></td></tr></table>\n",
    "created_at": "2022-04-08T01:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545496",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:43'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a186d24b571358b52340e6b908b4f0f23d7544d">2a186d2</a></td><td><code>Fix a typo</code></td></tr></table>




---

archive/issue_comments_545497.json:
```json
{
    "body": "**Changing commit** from \"[5412dcb00418d1c1eacf161393837f56237e369d](https://github.com/sagemath/sagetrac-mirror/commit/5412dcb00418d1c1eacf161393837f56237e369d)\" to \"[2a186d24b571358b52340e6b908b4f0f23d7544d](https://github.com/sagemath/sagetrac-mirror/commit/2a186d24b571358b52340e6b908b4f0f23d7544d)\".",
    "created_at": "2022-04-08T01:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545497",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[5412dcb00418d1c1eacf161393837f56237e369d](https://github.com/sagemath/sagetrac-mirror/commit/5412dcb00418d1c1eacf161393837f56237e369d)" to "[2a186d24b571358b52340e6b908b4f0f23d7544d](https://github.com/sagemath/sagetrac-mirror/commit/2a186d24b571358b52340e6b908b4f0f23d7544d)".



---

archive/issue_comments_545498.json:
```json
{
    "body": "<a id='comment:44'></a>\nTo build doc with mathjax cdn, we only need\n\n```diff\ndiff --git a/src/doc/Makefile b/src/doc/Makefile\nindex 90bea5dfac..82134ea3b4 100644\n--- a/src/doc/Makefile\n+++ b/src/doc/Makefile\n@@ -21,7 +21,7 @@ doc-inventory--%:\n \n # Matches doc-html--developer, doc-html--reference-manifolds etc.\n doc-html--%:\n-       cd $(SAGE_ROOT) && ./sage --docbuild --no-pdf-links $(subst -,/,$(subst doc-html--,,$@)) html $(SAGE_DOCBUILD_OPTS)\n+       cd $(SAGE_ROOT) && ./sage --docbuild --use-cdns --no-pdf-links $(subst -,/,$(subst doc-html--,,$@)) html $(SAGE_DOCBUILD_OPTS)\n \n # reference manual, inventory\n ifndef SAGE_ROOT\n```\n\nSo `./configure --online-doc` would do the above.",
    "created_at": "2022-04-08T02:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545498",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:44'></a>
To build doc with mathjax cdn, we only need

```diff
diff --git a/src/doc/Makefile b/src/doc/Makefile
index 90bea5dfac..82134ea3b4 100644
--- a/src/doc/Makefile
+++ b/src/doc/Makefile
@@ -21,7 +21,7 @@ doc-inventory--%:
 
 # Matches doc-html--developer, doc-html--reference-manifolds etc.
 doc-html--%:
-       cd $(SAGE_ROOT) && ./sage --docbuild --no-pdf-links $(subst -,/,$(subst doc-html--,,$@)) html $(SAGE_DOCBUILD_OPTS)
+       cd $(SAGE_ROOT) && ./sage --docbuild --use-cdns --no-pdf-links $(subst -,/,$(subst doc-html--,,$@)) html $(SAGE_DOCBUILD_OPTS)
 
 # reference manual, inventory
 ifndef SAGE_ROOT
```

So `./configure --online-doc` would do the above.



---

archive/issue_comments_545499.json:
```json
{
    "body": "<a id='comment:45'></a>\nAny reason `os.path.join(SAGE_SHARE, 'mathjax3')` is hardcoded in `docs/conf.py` instead of using the `MATHJAX_DIR` defined in `env.py`?",
    "created_at": "2022-04-08T06:06:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545499",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:45'></a>
Any reason `os.path.join(SAGE_SHARE, 'mathjax3')` is hardcoded in `docs/conf.py` instead of using the `MATHJAX_DIR` defined in `env.py`?



---

archive/issue_comments_545500.json:
```json
{
    "body": "**Changing commit** from \"[2a186d24b571358b52340e6b908b4f0f23d7544d](https://github.com/sagemath/sagetrac-mirror/commit/2a186d24b571358b52340e6b908b4f0f23d7544d)\" to \"[c42ec232510584689911696655f18b4395acdd81](https://github.com/sagemath/sagetrac-mirror/commit/c42ec232510584689911696655f18b4395acdd81)\".",
    "created_at": "2022-04-08T06:12:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545500",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[2a186d24b571358b52340e6b908b4f0f23d7544d](https://github.com/sagemath/sagetrac-mirror/commit/2a186d24b571358b52340e6b908b4f0f23d7544d)" to "[c42ec232510584689911696655f18b4395acdd81](https://github.com/sagemath/sagetrac-mirror/commit/c42ec232510584689911696655f18b4395acdd81)".



---

archive/issue_comments_545501.json:
```json
{
    "body": "<a id='comment:46'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c42ec232510584689911696655f18b4395acdd81\">c42ec23</a></td><td><code>Use MATHJAX_DIR</code></td></tr></table>\n",
    "created_at": "2022-04-08T06:12:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545501",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:46'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c42ec232510584689911696655f18b4395acdd81">c42ec23</a></td><td><code>Use MATHJAX_DIR</code></td></tr></table>




---

archive/issue_comments_545502.json:
```json
{
    "body": "<a id='comment:47'></a>\nReplying to [@antonio-rojas](#comment%3A45):\n> Any reason `os.path.join(SAGE_SHARE, 'mathjax3')` is hardcoded in `docs/conf.py` instead of using the `MATHJAX_DIR` defined in `env.py`?\n\nNo. You are right. Thanks.",
    "created_at": "2022-04-08T06:12:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545502",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:47'></a>
Replying to [@antonio-rojas](#comment%3A45):
> Any reason `os.path.join(SAGE_SHARE, 'mathjax3')` is hardcoded in `docs/conf.py` instead of using the `MATHJAX_DIR` defined in `env.py`?

No. You are right. Thanks.



---

archive/issue_comments_545503.json:
```json
{
    "body": "**Changing commit** from \"[c42ec232510584689911696655f18b4395acdd81](https://github.com/sagemath/sagetrac-mirror/commit/c42ec232510584689911696655f18b4395acdd81)\" to \"[89ec41751c94cd12136596e15375b2a1a183258d](https://github.com/sagemath/sagetrac-mirror/commit/89ec41751c94cd12136596e15375b2a1a183258d)\".",
    "created_at": "2022-04-08T12:51:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545503",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[c42ec232510584689911696655f18b4395acdd81](https://github.com/sagemath/sagetrac-mirror/commit/c42ec232510584689911696655f18b4395acdd81)" to "[89ec41751c94cd12136596e15375b2a1a183258d](https://github.com/sagemath/sagetrac-mirror/commit/89ec41751c94cd12136596e15375b2a1a183258d)".



---

archive/issue_comments_545504.json:
```json
{
    "body": "<a id='comment:48'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8df9661a421c7a735c667c7e5457638b3847c557\">8df9661</a></td><td><code>Upgrade mathjax package to mathjax3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43b802dd437be4309d5fb3e9d3aa025d61c3df8c\">43b802d</a></td><td><code>Merge branch 'spkg-mathjax3-trac25833'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89ec41751c94cd12136596e15375b2a1a183258d\">89ec417</a></td><td><code>Fix MATHJAX_DIR env variable</code></td></tr></table>\n",
    "created_at": "2022-04-08T12:51:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545504",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:48'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8df9661a421c7a735c667c7e5457638b3847c557">8df9661</a></td><td><code>Upgrade mathjax package to mathjax3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43b802dd437be4309d5fb3e9d3aa025d61c3df8c">43b802d</a></td><td><code>Merge branch 'spkg-mathjax3-trac25833'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89ec41751c94cd12136596e15375b2a1a183258d">89ec417</a></td><td><code>Fix MATHJAX_DIR env variable</code></td></tr></table>




---

archive/issue_comments_545505.json:
```json
{
    "body": "<a id='comment:49'></a>\nShould we merge this ticket with #25833, since you replace the mathjax 2 package there, so one probably should upgrade the config in one go as well. What do you think?",
    "created_at": "2022-04-08T18:31:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545505",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:49'></a>
Should we merge this ticket with #25833, since you replace the mathjax 2 package there, so one probably should upgrade the config in one go as well. What do you think?



---

archive/issue_comments_545506.json:
```json
{
    "body": "<a id='comment:50'></a>\nReplying to [@kwankyu](#comment%3A42):\n> I think that offline sage documentation should be the default as it has been. So I renamed the config variable to `--use-cdns`. If we change the default to \"online\" in the future, then we can just turn on `--use-cdns`.\n\nI'm not sure what should be the default for developers (but I guess everyone has internet if they contribute to trac...so I guess cdn would make sense), but the server should use the cdn to increase the speed or not? Comparing the loading times from the cdn vs sage's server, the cdn is a factor 10 quicker (13 ms vs 140ms).",
    "created_at": "2022-04-08T19:29:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545506",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:50'></a>
Replying to [@kwankyu](#comment%3A42):
> I think that offline sage documentation should be the default as it has been. So I renamed the config variable to `--use-cdns`. If we change the default to "online" in the future, then we can just turn on `--use-cdns`.

I'm not sure what should be the default for developers (but I guess everyone has internet if they contribute to trac...so I guess cdn would make sense), but the server should use the cdn to increase the speed or not? Comparing the loading times from the cdn vs sage's server, the cdn is a factor 10 quicker (13 ms vs 140ms).



---

archive/issue_comments_545507.json:
```json
{
    "body": "<a id='comment:51'></a>\nReplying to [@tobiasdiez](#comment%3A49):\n> Should we merge this ticket with #25833, since you replace the mathjax 2 package there, so one probably should upgrade the config in one go as well. What do you think?\n\nI agree. Let's do it. I will upload the branch of this ticket to #25833.",
    "created_at": "2022-04-08T23:42:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545507",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:51'></a>
Replying to [@tobiasdiez](#comment%3A49):
> Should we merge this ticket with #25833, since you replace the mathjax 2 package there, so one probably should upgrade the config in one go as well. What do you think?

I agree. Let's do it. I will upload the branch of this ticket to #25833.



---

archive/issue_comments_545508.json:
```json
{
    "body": "<a id='comment:52'></a>\nReplying to [@tobiasdiez](#comment%3A50):\n> Replying to [@kwankyu](#comment%3A42):\n> > I think that offline sage documentation should be the default as it has been. So I renamed the config variable to `--use-cdns`. If we change the default to \"online\" in the future, then we can just turn on `--use-cdns`.\n\n> \n> I'm not sure what should be the default for developers (but I guess everyone has internet if they contribute to trac...so I guess cdn would make sense), but the server should use the cdn to increase the speed or not? Comparing the loading times from the cdn vs sage's server, the cdn is a factor 10 quicker (13 ms vs 140ms).\n\nThe default is aimed at sage users with lowest resources.\n\nI think we need to provide `./configure --online-doc` option so that everyone can choose what he/she wants. Developers would of course have internet resource usually, but sometimes not (on airplane :). Personally I would prefer offline-doc.",
    "created_at": "2022-04-08T23:49:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545508",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:52'></a>
Replying to [@tobiasdiez](#comment%3A50):
> Replying to [@kwankyu](#comment%3A42):
> > I think that offline sage documentation should be the default as it has been. So I renamed the config variable to `--use-cdns`. If we change the default to "online" in the future, then we can just turn on `--use-cdns`.

> 
> I'm not sure what should be the default for developers (but I guess everyone has internet if they contribute to trac...so I guess cdn would make sense), but the server should use the cdn to increase the speed or not? Comparing the loading times from the cdn vs sage's server, the cdn is a factor 10 quicker (13 ms vs 140ms).

The default is aimed at sage users with lowest resources.

I think we need to provide `./configure --online-doc` option so that everyone can choose what he/she wants. Developers would of course have internet resource usually, but sometimes not (on airplane :). Personally I would prefer offline-doc.



---

archive/issue_events_406570.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-08T23:53:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406570"
}
```



---

archive/issue_events_406571.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-08T23:53:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406571"
}
```



---

archive/issue_comments_545509.json:
```json
{
    "body": "<a id='comment:54'></a>\nReplying to [@kwankyu](#comment%3A52):\n> I think we need to provide `./configure --online-doc` option so that everyone can choose what he/she wants. \n\nNo. We already have `SAGE_DOCBUILD_OPTS` environment variable. So we can\n\n```\nexport SAGE_DOCBUILD_OPTS=\"--use-cdns\"\n```\nbefore `make`.",
    "created_at": "2022-04-09T11:41:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545509",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:54'></a>
Replying to [@kwankyu](#comment%3A52):
> I think we need to provide `./configure --online-doc` option so that everyone can choose what he/she wants. 

No. We already have `SAGE_DOCBUILD_OPTS` environment variable. So we can

```
export SAGE_DOCBUILD_OPTS="--use-cdns"
```
before `make`.



---

archive/issue_events_406572.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-09T19:39:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406572"
}
```



---

archive/issue_events_406573.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-09T19:39:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406573"
}
```



---

archive/issue_events_406574.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-09T19:39:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406574"
}
```



---

archive/issue_comments_545510.json:
```json
{
    "body": "**Changing author** from \"Tobias Diez, Kwankyu Lee\" to \"\".",
    "created_at": "2022-04-09T23:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545510",
    "user": "https://github.com/kwankyu"
}
```

**Changing author** from "Tobias Diez, Kwankyu Lee" to "".



---

archive/issue_comments_545511.json:
```json
{
    "body": "**Reviewer:** Kwankyu Lee",
    "created_at": "2022-04-09T23:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545511",
    "user": "https://github.com/kwankyu"
}
```

**Reviewer:** Kwankyu Lee



---

archive/issue_comments_545512.json:
```json
{
    "body": "<a id='comment:56'></a>\nReplying to [@tobiasdiez](#comment%3A55):\n\nhttps://doc.sagemath.org/html/en/developer/trac.html#reviewing-and-closing-tickets\n\nOkay. Let's close this.",
    "created_at": "2022-04-09T23:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545512",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:56'></a>
Replying to [@tobiasdiez](#comment%3A55):

https://doc.sagemath.org/html/en/developer/trac.html#reviewing-and-closing-tickets

Okay. Let's close this.



---

archive/issue_events_406575.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-11T02:14:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406575"
}
```



---

archive/issue_events_406576.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-11T02:14:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-406576"
}
```
