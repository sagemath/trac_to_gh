# Issue 33600: Configure mathjax in sphinx config and upgrade to Mathjax v3

archive/issues_033363.json:
```json
{
    "assignees": [],
    "body": "Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme, see #33601.\n\nWe also upgrade Mathjax to v3. The configs were migrated using \n https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html\nwith the following manual changes:\n- Remove processEscapes since this now defaults to true in v3 anyway.\n- Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.\n- Remove noerrors extension, which hides error messages. Normally, there shouldn't be any errors and, if there are, its probably good to have them displayed very prominently so that reviewers can discover these issues. But I don't feel very strongly about this change. Reference: https://docs.mathjax.org/en/latest/input/tex/extensions/noerrors.html\n\nRefs #25833\n\nDepends on #25833\n\nCC:  @kwankyu @strogdon @haraldschilly @mkoeppe\n\nBranch/Commit: **[public/docs/mathjax_ext](https://github.com/sagemath/sagetrac-mirror/tree/public/docs/mathjax_ext) @ [89ec417](https://github.com/sagemath/sagetrac-mirror/commit/89ec41751c94cd12136596e15375b2a1a183258d)**\n\nReviewer: **Kwankyu Lee**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33600_\n\n",
    "closed_at": "2022-05-11T02:14:43Z",
    "created_at": "2022-03-30T12:43:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20documentation",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Configure mathjax in sphinx config and upgrade to Mathjax v3",
    "type": "issue",
    "updated_at": "2022-05-11T02:14:43Z",
    "url": "https://github.com/sagemath/sage/issues/33600",
    "user": "https://github.com/tobiasdiez"
}
```
Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme, see #33601.

We also upgrade Mathjax to v3. The configs were migrated using 
 https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html
with the following manual changes:
- Remove processEscapes since this now defaults to true in v3 anyway.
- Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.
- Remove noerrors extension, which hides error messages. Normally, there shouldn't be any errors and, if there are, its probably good to have them displayed very prominently so that reviewers can discover these issues. But I don't feel very strongly about this change. Reference: https://docs.mathjax.org/en/latest/input/tex/extensions/noerrors.html

Refs #25833

Depends on #25833

CC:  @kwankyu @strogdon @haraldschilly @mkoeppe

Branch/Commit: **[public/docs/mathjax_ext](https://github.com/sagemath/sagetrac-mirror/tree/public/docs/mathjax_ext) @ [89ec417](https://github.com/sagemath/sagetrac-mirror/commit/89ec41751c94cd12136596e15375b2a1a183258d)**

Reviewer: **Kwankyu Lee**

_Issue created by migration from https://trac.sagemath.org/ticket/33600_





---

archive/issue_events_443055.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-30T12:43:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443055"
}
```



---

archive/issue_events_443056.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-30T12:43:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "component: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443056"
}
```



---

archive/issue_events_443057.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-30T12:43:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443057"
}
```



---

archive/issue_events_443058.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-30T12:43:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443058"
}
```



---

archive/issue_comments_545922.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme.\n+Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme, see #33601.\n \n \n``````\n",
    "created_at": "2022-03-30T12:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545922",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme.
+Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme, see #33601.
 
 
``````




---

archive/issue_comments_545923.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme, see #33601.\n \n+We also upgrade Mathjax to v3. The configs were migrated using \n \n+with the following manual changes:\n+- Remove processEscapes since this now defaults to true in v3 anyway.\n+- Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.\n+- Remove noerrors extension, which hides error messages. Normally, there shouldn't be any errors and, if there are, its probably good to have them displayed very prominently so that reviewers can discover these issues. But I don't feel very strongly about this change. Reference: https://docs.mathjax.org/en/latest/input/tex/extensions/noerrors.html\n+\n+Refs #25833\n``````\n",
    "created_at": "2022-03-30T13:46:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545923",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,10 @@
 Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme, see #33601.
 
+We also upgrade Mathjax to v3. The configs were migrated using 
 
+with the following manual changes:
+- Remove processEscapes since this now defaults to true in v3 anyway.
+- Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.
+- Remove noerrors extension, which hides error messages. Normally, there shouldn't be any errors and, if there are, its probably good to have them displayed very prominently so that reviewers can discover these issues. But I don't feel very strongly about this change. Reference: https://docs.mathjax.org/en/latest/input/tex/extensions/noerrors.html
+
+Refs #25833
``````




---

archive/issue_events_443059.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-30T13:46:25Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "title_is": "Configure mathjax in sphinx config and upgrade to Mathjax v3",
    "title_was": "Configure mathjax in sphinx config  public/docs/mathjax_ext",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443059"
}
```



---

archive/issue_events_443060.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-30T13:46:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443060"
}
```



---

archive/issue_comments_545924.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nThis seems to do the job for me. With the disclaimer that I could only test the tutorial and dev guide, since \"reference\" fails with a lot of errors on gitpod. Among them\n\n```\n[tensor_fr] Extension error (matplotlib.sphinxext.plot_directive):\n[tensor_fr] Handler <function _copy_css_file at 0x7f47e225b4c0> for event 'build-finished' threw an exception (exception: [Errno 17] File exists: '/home/gitpod/sage-local/share/doc/sage/html/en/reference/tensor_free_modules/_static')\n```",
    "created_at": "2022-03-30T13:46:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545924",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:2" align="right">Comment 2</div>

This seems to do the job for me. With the disclaimer that I could only test the tutorial and dev guide, since "reference" fails with a lot of errors on gitpod. Among them

```
[tensor_fr] Extension error (matplotlib.sphinxext.plot_directive):
[tensor_fr] Handler <function _copy_css_file at 0x7f47e225b4c0> for event 'build-finished' threw an exception (exception: [Errno 17] File exists: '/home/gitpod/sage-local/share/doc/sage/html/en/reference/tensor_free_modules/_static')
```



---

archive/issue_comments_545925.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9bc443204bed20fac922cc758ca51259e2cbfa45\">9bc4432</a></td><td><code>Migrate rest of config</code></td></tr></table>\n",
    "created_at": "2022-03-30T13:46:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545925",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9bc443204bed20fac922cc758ca51259e2cbfa45">9bc4432</a></td><td><code>Migrate rest of config</code></td></tr></table>




---

archive/issue_comments_545926.json:
```json
{
    "body": "Changed commit from **[b90316d](https://github.com/sagemath/sagetrac-mirror/commit/b90316d145d7eff02092e01bafbf091b269ed8ef)** to **[9bc4432](https://github.com/sagemath/sagetrac-mirror/commit/9bc443204bed20fac922cc758ca51259e2cbfa45)**",
    "created_at": "2022-03-30T13:46:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545926",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b90316d](https://github.com/sagemath/sagetrac-mirror/commit/b90316d145d7eff02092e01bafbf091b269ed8ef)** to **[9bc4432](https://github.com/sagemath/sagetrac-mirror/commit/9bc443204bed20fac922cc758ca51259e2cbfa45)**



---

archive/issue_comments_545927.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nSee #30296 and references within for previous efforts / discussion regarding mathjax 3",
    "created_at": "2022-03-30T16:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545927",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">Comment 4</div>

See #30296 and references within for previous efforts / discussion regarding mathjax 3



---

archive/issue_comments_545928.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nThanks for the pointer. It seems the issues discussed in that ticket revolve around packaging problems. I circumvent these here by using the CDN.",
    "created_at": "2022-03-30T18:41:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545928",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:5" align="right">Comment 5</div>

Thanks for the pointer. It seems the issues discussed in that ticket revolve around packaging problems. I circumvent these here by using the CDN.



---

archive/issue_comments_545929.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nI would expect that people want to keep an offline version without using the CDN.",
    "created_at": "2022-03-30T23:31:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545929",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">Comment 6</div>

I would expect that people want to keep an offline version without using the CDN.



---

archive/issue_comments_545930.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nReplying to [@tobiasdiez](#comment%3A5):\n> It seems the issues discussed in that ticket revolve around packaging problems.\n\nOne of the \"references within\" is #25833 for the upgrade to 3.x. \nIt would be important to know whether [#25833 comment:9](https://github.com/sagemath/sage/issues/25833#comment:9) is still current, and whether it is relevant for our use of Sphinx.",
    "created_at": "2022-03-31T01:33:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545930",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">Comment 7</div>

Replying to [@tobiasdiez](#comment%3A5):
> It seems the issues discussed in that ticket revolve around packaging problems.

One of the "references within" is #25833 for the upgrade to 3.x. 
It would be important to know whether [#25833 comment:9](https://github.com/sagemath/sage/issues/25833#comment:9) is still current, and whether it is relevant for our use of Sphinx.



---

archive/issue_events_443061.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-31T01:33:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443061"
}
```



---

archive/issue_events_443062.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-31T01:33:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443062"
}
```



---

archive/issue_comments_545931.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@mkoeppe](#comment%3A7):\n> One of the \"references within\" is #25833 for the upgrade to 3.x. \n> It would be important to know whether [#25833 comment:9](https://github.com/sagemath/sage/issues/25833#comment:9) is still current, and whether it is relevant for our use of Sphinx.\n\nThat feature (not compatible with latex) of mathjax2 would be relevant only in online use of mathjax, such as in jupyter notebook. \n\nAs far as I know, that \"automatic line breaking\" is not used in our documentation. If there is any, then that is something to be fixed.\n\nFor us, there is no reason not to upgrade to mathjax3.",
    "created_at": "2022-03-31T05:03:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545931",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@mkoeppe](#comment%3A7):
> One of the "references within" is #25833 for the upgrade to 3.x. 
> It would be important to know whether [#25833 comment:9](https://github.com/sagemath/sage/issues/25833#comment:9) is still current, and whether it is relevant for our use of Sphinx.

That feature (not compatible with latex) of mathjax2 would be relevant only in online use of mathjax, such as in jupyter notebook. 

As far as I know, that "automatic line breaking" is not used in our documentation. If there is any, then that is something to be fixed.

For us, there is no reason not to upgrade to mathjax3.



---

archive/issue_comments_545932.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nSage cell has moved to mathjax3 (relatively) long time ago. It may be worth while to check the mathjax3 configuration used in sage cell:\n\nhttps://github.com/sagemath/sagecell/blob/master/js/cell.js",
    "created_at": "2022-03-31T05:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545932",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:9" align="right">Comment 9</div>

Sage cell has moved to mathjax3 (relatively) long time ago. It may be worth while to check the mathjax3 configuration used in sage cell:

https://github.com/sagemath/sagecell/blob/master/js/cell.js



---

archive/issue_comments_545933.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nYou converted single quotes to double quotes. Single quotes are conventionally used for strings containing code (not plain English). You should not change them without compelling reasons.",
    "created_at": "2022-03-31T05:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545933",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:10" align="right">Comment 10</div>

You converted single quotes to double quotes. Single quotes are conventionally used for strings containing code (not plain English). You should not change them without compelling reasons.



---

archive/issue_events_443063.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-31T08:34:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443063"
}
```



---

archive/issue_events_443064.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-31T08:34:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443064"
}
```



---

archive/issue_comments_545934.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nReplying to [@kwankyu](#comment%3A8):\n> Replying to [@mkoeppe](#comment%3A7):\n> > One of the \"references within\" is #25833 for the upgrade to 3.x. \n> > It would be important to know whether [#25833 comment:9](https://github.com/sagemath/sage/issues/25833#comment:9) is still current, and whether it is relevant for our use of Sphinx.\n\n> \n> That feature (not compatible with latex) of mathjax2 would be relevant only in online use of mathjax, such as in jupyter notebook. \n> \n> As far as I know, that \"automatic line breaking\" is not used in our documentation. If there is any, then that is something to be fixed.\n> \n> For us, there is no reason not to upgrade to mathjax3.\n\nThanks for the clarification!",
    "created_at": "2022-03-31T08:34:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545934",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:11" align="right">Comment 11</div>

Replying to [@kwankyu](#comment%3A8):
> Replying to [@mkoeppe](#comment%3A7):
> > One of the "references within" is #25833 for the upgrade to 3.x. 
> > It would be important to know whether [#25833 comment:9](https://github.com/sagemath/sage/issues/25833#comment:9) is still current, and whether it is relevant for our use of Sphinx.

> 
> That feature (not compatible with latex) of mathjax2 would be relevant only in online use of mathjax, such as in jupyter notebook. 
> 
> As far as I know, that "automatic line breaking" is not used in our documentation. If there is any, then that is something to be fixed.
> 
> For us, there is no reason not to upgrade to mathjax3.

Thanks for the clarification!



---

archive/issue_comments_545935.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@kwankyu](#comment%3A10):\n> You converted single quotes to double quotes. Single quotes are conventionally used for strings containing code (not plain English). You should not change them without compelling reasons. \n\nI wasn't aware that such a styleguide rule exists. The existing code in both files doesn't seem to follow it either - it's just a random mix of single and double quotes. I tried to make at least the lines homogeneous that I've touched.",
    "created_at": "2022-03-31T08:37:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545935",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@kwankyu](#comment%3A10):
> You converted single quotes to double quotes. Single quotes are conventionally used for strings containing code (not plain English). You should not change them without compelling reasons. 

I wasn't aware that such a styleguide rule exists. The existing code in both files doesn't seem to follow it either - it's just a random mix of single and double quotes. I tried to make at least the lines homogeneous that I've touched.



---

archive/issue_comments_545936.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@tobiasdiez](#comment%3A12):\n> Replying to [@kwankyu](#comment%3A10):\n> > You converted single quotes to double quotes. Single quotes are conventionally used for strings containing code (not plain English). You should not change them without compelling reasons. \n\n> \n> I wasn't aware that such a style guide rule exists. \n\nI must say it's not a rule. But single quotes are commonly used for code strings.\n\n> The existing code in both files doesn't seem to follow it either - it's just a random mix of single and double quotes. I tried to make at least the lines homogeneous that I've touched.\n\nLeaving single-quoted strings as they are will contribute overall homogeneity of the sage code base.",
    "created_at": "2022-03-31T10:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545936",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@tobiasdiez](#comment%3A12):
> Replying to [@kwankyu](#comment%3A10):
> > You converted single quotes to double quotes. Single quotes are conventionally used for strings containing code (not plain English). You should not change them without compelling reasons. 

> 
> I wasn't aware that such a style guide rule exists. 

I must say it's not a rule. But single quotes are commonly used for code strings.

> The existing code in both files doesn't seem to follow it either - it's just a random mix of single and double quotes. I tried to make at least the lines homogeneous that I've touched.

Leaving single-quoted strings as they are will contribute overall homogeneity of the sage code base.



---

archive/issue_comments_545937.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4e1118f3099113768dfee029146e63614a46391\">e4e1118</a></td><td><code>Convert double quotes to single quotes</code></td></tr></table>\n",
    "created_at": "2022-03-31T11:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545937",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14" align="right">Comment 14</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4e1118f3099113768dfee029146e63614a46391">e4e1118</a></td><td><code>Convert double quotes to single quotes</code></td></tr></table>




---

archive/issue_comments_545938.json:
```json
{
    "body": "Changed commit from **[9bc4432](https://github.com/sagemath/sagetrac-mirror/commit/9bc443204bed20fac922cc758ca51259e2cbfa45)** to **[e4e1118](https://github.com/sagemath/sagetrac-mirror/commit/e4e1118f3099113768dfee029146e63614a46391)**",
    "created_at": "2022-03-31T11:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545938",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9bc4432](https://github.com/sagemath/sagetrac-mirror/commit/9bc443204bed20fac922cc758ca51259e2cbfa45)** to **[e4e1118](https://github.com/sagemath/sagetrac-mirror/commit/e4e1118f3099113768dfee029146e63614a46391)**



---

archive/issue_comments_545939.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nReplying to [@kwankyu](#comment%3A13):\n> Leaving single-quoted strings as they are will contribute overall homogeneity of the sage code base. \n\nSadly there is not much of a homogeneity. For example, latex-macros.py contains\n\n```python\n    args = \"(\"\n    for x in sample_args:\n        count += 1\n        args += str(x) + ','\n    args += ')'\n```\n\nAnyway, I've reverted these changes.",
    "created_at": "2022-03-31T11:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545939",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:15" align="right">Comment 15</div>

Replying to [@kwankyu](#comment%3A13):
> Leaving single-quoted strings as they are will contribute overall homogeneity of the sage code base. 

Sadly there is not much of a homogeneity. For example, latex-macros.py contains

```python
    args = "("
    for x in sample_args:
        count += 1
        args += str(x) + ','
    args += ')'
```

Anyway, I've reverted these changes.



---

archive/issue_comments_545940.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nReplying to [@tobiasdiez](#comment%3A15):\n> Sadly there is not much of a homogeneity. For example, latex-macros.py contains\n> \n> ```python\n>     args = \"(\"\n>     for x in sample_args:\n>         count += 1\n>         args += str(x) + ','\n>     args += ')'\n> ```\n\nWell.. that is embarrassing.\n\n> Anyway, I've reverted these changes.\n\nThank you.",
    "created_at": "2022-03-31T12:58:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545940",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:16" align="right">Comment 16</div>

Replying to [@tobiasdiez](#comment%3A15):
> Sadly there is not much of a homogeneity. For example, latex-macros.py contains
> 
> ```python
>     args = "("
>     for x in sample_args:
>         count += 1
>         args += str(x) + ','
>     args += ')'
> ```

Well.. that is embarrassing.

> Anyway, I've reverted these changes.

Thank you.



---

archive/issue_events_443065.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-05T00:44:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443065"
}
```



---

archive/issue_events_443066.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-05T00:44:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443066"
}
```



---

archive/issue_comments_545941.json:
```json
{
    "body": "Changed commit from **[e4e1118](https://github.com/sagemath/sagetrac-mirror/commit/e4e1118f3099113768dfee029146e63614a46391)** to **[e852a59](https://github.com/sagemath/sagetrac-mirror/commit/e852a599b0ecdd39bb3adcdb4682a2d2902a398d)**",
    "created_at": "2022-04-05T14:54:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545941",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e4e1118](https://github.com/sagemath/sagetrac-mirror/commit/e4e1118f3099113768dfee029146e63614a46391)** to **[e852a59](https://github.com/sagemath/sagetrac-mirror/commit/e852a599b0ecdd39bb3adcdb4682a2d2902a398d)**



---

archive/issue_comments_545942.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e852a599b0ecdd39bb3adcdb4682a2d2902a398d\">e852a59</a></td><td><code>Merge remote-tracking branch 'origin/develop' into public/docs/mathjax_ext</code></td></tr></table>\n",
    "created_at": "2022-04-05T14:54:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545942",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18" align="right">Comment 18</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e852a599b0ecdd39bb3adcdb4682a2d2902a398d">e852a59</a></td><td><code>Merge remote-tracking branch 'origin/develop' into public/docs/mathjax_ext</code></td></tr></table>




---

archive/issue_events_443067.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-05T14:55:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443067"
}
```



---

archive/issue_events_443068.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-05T14:55:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443068"
}
```



---

archive/issue_comments_545943.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\ncomment:6?",
    "created_at": "2022-04-05T18:29:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545943",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">Comment 20</div>

comment:6?



---

archive/issue_comments_545944.json:
```json
{
    "body": "Changed commit from **[e852a59](https://github.com/sagemath/sagetrac-mirror/commit/e852a599b0ecdd39bb3adcdb4682a2d2902a398d)** to **[097c034](https://github.com/sagemath/sagetrac-mirror/commit/097c034ada7ce77afedb20da5705e50f5d3a0737)**",
    "created_at": "2022-04-06T01:25:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545944",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e852a59](https://github.com/sagemath/sagetrac-mirror/commit/e852a599b0ecdd39bb3adcdb4682a2d2902a398d)** to **[097c034](https://github.com/sagemath/sagetrac-mirror/commit/097c034ada7ce77afedb20da5705e50f5d3a0737)**



---

archive/issue_comments_545945.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/097c034ada7ce77afedb20da5705e50f5d3a0737\">097c034</a></td><td><code>Minor edits</code></td></tr></table>\n",
    "created_at": "2022-04-06T01:25:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545945",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21" align="right">Comment 21</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/097c034ada7ce77afedb20da5705e50f5d3a0737">097c034</a></td><td><code>Minor edits</code></td></tr></table>




---

archive/issue_comments_545946.json:
```json
{
    "body": "Attachment: **[Screen Shot.png](https://github.com/sagemath/sage/files/ticket33600/fb5cd47d327f574a91b85e904d61e0ab.png)**\n\nAttachment: **[screen-shot.png](https://github.com/sagemath/sage/files/ticket33600/screen-shot.png)**",
    "created_at": "2022-04-06T01:34:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545946",
    "user": "https://github.com/kwankyu"
}
```

Attachment: **[Screen Shot.png](https://github.com/sagemath/sage/files/ticket33600/fb5cd47d327f574a91b85e904d61e0ab.png)**

Attachment: **[screen-shot.png](https://github.com/sagemath/sage/files/ticket33600/screen-shot.png)**



---

archive/issue_comments_545947.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nMy commit contains minor edits. I removed the comment to 'sphinx.ext.mathjax', which seems unnecessary only cluttering code.\n\nOtherwise all looks good to me. But as Matthias points out, this ticket needs to ship MathJax3 for offline users.\n\nI noticed a glitch in `local/share/doc/sage/html/en/index.html`:\n\n![](https://github.com/sagemath/sage/files/ticket33600/screen-shot.png)\n\nbut this seems a bug of MathJax3, hopefully temporary.",
    "created_at": "2022-04-06T01:37:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545947",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:22" align="right">Comment 22</div>

My commit contains minor edits. I removed the comment to 'sphinx.ext.mathjax', which seems unnecessary only cluttering code.

Otherwise all looks good to me. But as Matthias points out, this ticket needs to ship MathJax3 for offline users.

I noticed a glitch in `local/share/doc/sage/html/en/index.html`:

![](https://github.com/sagemath/sage/files/ticket33600/screen-shot.png)

but this seems a bug of MathJax3, hopefully temporary.



---

archive/issue_comments_545948.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nA question: \n\nmathjax2 config `theme_mathjax_macros` is missing in the new mathjax3 config. Is this never used in sage documentation?",
    "created_at": "2022-04-06T01:41:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545948",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:23" align="right">Comment 23</div>

A question: 

mathjax2 config `theme_mathjax_macros` is missing in the new mathjax3 config. Is this never used in sage documentation?



---

archive/issue_comments_545949.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nAre these \n\n- Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.\n- Remove noerrors extension, which hides error messages. ...\n\ntrue? I don't see them in the code before the patch.",
    "created_at": "2022-04-06T01:52:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545949",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:24" align="right">Comment 24</div>

Are these 

- Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.
- Remove noerrors extension, which hides error messages. ...

true? I don't see them in the code before the patch.



---

archive/issue_comments_545950.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nReplying to [@mkoeppe](#comment%3A6):\n> I would expect that people want to keep an offline version without using the CDN.\n\nIsn't the pdf enough for offline documentation? And if you really need the html docs offline, you can also save them from the browser.\n\nWe can of course download the js file from the cdn and ship it, but that would make the experience for other people less nice since you don't get all the advantages that a central cdn gives you.",
    "created_at": "2022-04-06T19:57:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545950",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:25" align="right">Comment 25</div>

Replying to [@mkoeppe](#comment%3A6):
> I would expect that people want to keep an offline version without using the CDN.

Isn't the pdf enough for offline documentation? And if you really need the html docs offline, you can also save them from the browser.

We can of course download the js file from the cdn and ship it, but that would make the experience for other people less nice since you don't get all the advantages that a central cdn gives you.



---

archive/issue_comments_545951.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nReplying to [@kwankyu](#comment%3A22):\n> My commit contains minor edits. I removed the comment to 'sphinx.ext.mathjax', which seems unnecessary only cluttering code.\n\nDid you forget to push it? Or at least I cannot see your commit.",
    "created_at": "2022-04-06T19:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545951",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:26" align="right">Comment 26</div>

Replying to [@kwankyu](#comment%3A22):
> My commit contains minor edits. I removed the comment to 'sphinx.ext.mathjax', which seems unnecessary only cluttering code.

Did you forget to push it? Or at least I cannot see your commit.



---

archive/issue_comments_545952.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nReplying to [@kwankyu](#comment%3A23):\n> A question: \n> \n> mathjax2 config `theme_mathjax_macros` is missing in the new mathjax3 config. Is this never used in sage documentation?\n\nThis was only used to inject the mathjax macros into the `mathjax_sage.js_t` file. Now the macros are directly defined via the new `mathjax3_config` in `docs/conf.py`.\n`",
    "created_at": "2022-04-06T20:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545952",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:27" align="right">Comment 27</div>

Replying to [@kwankyu](#comment%3A23):
> A question: 
> 
> mathjax2 config `theme_mathjax_macros` is missing in the new mathjax3 config. Is this never used in sage documentation?

This was only used to inject the mathjax macros into the `mathjax_sage.js_t` file. Now the macros are directly defined via the new `mathjax3_config` in `docs/conf.py`.
`



---

archive/issue_comments_545953.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nReplying to [@kwankyu](#comment%3A24):\n> Are these \n> \n> - Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.\n> - Remove noerrors extension, which hides error messages. ...\n> \n> true? I don't see them in the code before the patch.\n\nI've used the config migration tool https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html, which then output these config options. They might be implicitly defined in the old `config=TeX-AMS_HTML-full`, or it just might be bug in the migration tool.",
    "created_at": "2022-04-06T20:04:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545953",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:28" align="right">Comment 28</div>

Replying to [@kwankyu](#comment%3A24):
> Are these 
> 
> - Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.
> - Remove noerrors extension, which hides error messages. ...
> 
> true? I don't see them in the code before the patch.

I've used the config migration tool https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html, which then output these config options. They might be implicitly defined in the old `config=TeX-AMS_HTML-full`, or it just might be bug in the migration tool.



---

archive/issue_comments_545954.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme, see #33601.\n \n We also upgrade Mathjax to v3. The configs were migrated using \n-\n+ https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html\n with the following manual changes:\n - Remove processEscapes since this now defaults to true in v3 anyway.\n - Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.\n``````\n",
    "created_at": "2022-04-06T20:05:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545954",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 Configure mathjax in sphinx config, and not in a javascript file. In this way, we can get ride of the custom theme option `mathjax_macros`, which is not understood by other themes. This is preparation to support the furo theme, see #33601.
 
 We also upgrade Mathjax to v3. The configs were migrated using 
-
+ https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html
 with the following manual changes:
 - Remove processEscapes since this now defaults to true in v3 anyway.
 - Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.
``````




---

archive/issue_comments_545955.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nReplying to [@tobiasdiez](#comment%3A28):\n> Replying to [@kwankyu](#comment%3A24):\n> > Are these \n> > \n> > - Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.\n> > - Remove noerrors extension, which hides error messages. ...\n> > \n> > true? I don't see them in the code before the patch.\n\n> \n> I've used the config migration tool https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html, which then output these config options. They might be implicitly defined in the old `config=TeX-AMS_HTML-full`, or it just might be bug in the migration tool.\n\nIf the messages are merely suggesting you to make those changes and you didn't do the manual changes, then the messages copied to the ticket description are just confusing.",
    "created_at": "2022-04-06T21:33:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545955",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:30" align="right">Comment 30</div>

Replying to [@tobiasdiez](#comment%3A28):
> Replying to [@kwankyu](#comment%3A24):
> > Are these 
> > 
> > - Remove ignoreHtmlClass/processHtmlClass since they are set to the default values.
> > - Remove noerrors extension, which hides error messages. ...
> > 
> > true? I don't see them in the code before the patch.

> 
> I've used the config migration tool https://mathjax.github.io/MathJax-demos-web/convert-configuration/convert-configuration.html, which then output these config options. They might be implicitly defined in the old `config=TeX-AMS_HTML-full`, or it just might be bug in the migration tool.

If the messages are merely suggesting you to make those changes and you didn't do the manual changes, then the messages copied to the ticket description are just confusing.



---

archive/issue_comments_545956.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nReplying to [@tobiasdiez](#comment%3A27):\n> Replying to [@kwankyu](#comment%3A23):\n> > A question: \n> > \n> > mathjax2 config `theme_mathjax_macros` is missing in the new mathjax3 config. Is this never used in sage documentation?\n\n> \n> This was only used to inject the mathjax macros into the `mathjax_sage.js_t` file. Now the macros are directly defined via the new `mathjax3_config` in `docs/conf.py`.\n\nIf it was really used, then it is defined somewhere, and now it must be deleted in you branch. But I don't see them...",
    "created_at": "2022-04-06T21:43:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545956",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:31" align="right">Comment 31</div>

Replying to [@tobiasdiez](#comment%3A27):
> Replying to [@kwankyu](#comment%3A23):
> > A question: 
> > 
> > mathjax2 config `theme_mathjax_macros` is missing in the new mathjax3 config. Is this never used in sage documentation?

> 
> This was only used to inject the mathjax macros into the `mathjax_sage.js_t` file. Now the macros are directly defined via the new `mathjax3_config` in `docs/conf.py`.

If it was really used, then it is defined somewhere, and now it must be deleted in you branch. But I don't see them...



---

archive/issue_comments_545957.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nReplying to [@tobiasdiez](#comment%3A26):\n> Replying to [@kwankyu](#comment%3A22):\n> > My commit contains minor edits. I removed the comment to 'sphinx.ext.mathjax', which seems unnecessary only cluttering code.\n\n> \n> Did you forget to push it? Or at least I cannot see your commit.\n\nIt is in [comment:21](#comment%3A21).",
    "created_at": "2022-04-06T21:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545957",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:32" align="right">Comment 32</div>

Replying to [@tobiasdiez](#comment%3A26):
> Replying to [@kwankyu](#comment%3A22):
> > My commit contains minor edits. I removed the comment to 'sphinx.ext.mathjax', which seems unnecessary only cluttering code.

> 
> Did you forget to push it? Or at least I cannot see your commit.

It is in [comment:21](#comment%3A21).



---

archive/issue_comments_545958.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nReplying to [@tobiasdiez](#comment%3A25):\n> We can of course download the js file from the cdn and ship it, but that would make the experience for other people less nice since you don't get all the advantages that a central cdn gives you.\n\nIt seems we need `./configure --offline-doc` or something.",
    "created_at": "2022-04-06T21:56:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545958",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:33" align="right">Comment 33</div>

Replying to [@tobiasdiez](#comment%3A25):
> We can of course download the js file from the cdn and ship it, but that would make the experience for other people less nice since you don't get all the advantages that a central cdn gives you.

It seems we need `./configure --offline-doc` or something.



---

archive/issue_comments_545959.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nSee #25833.",
    "created_at": "2022-04-07T05:03:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545959",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:34" align="right">Comment 34</div>

See #25833.



---

archive/issue_comments_545960.json:
```json
{
    "body": "Dependencies: **#25833**",
    "created_at": "2022-04-07T05:10:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545960",
    "user": "https://github.com/kwankyu"
}
```

Dependencies: **#25833**



---

archive/issue_comments_545961.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d647ea6665a878e0edf2d4a732fba53d13773304\">d647ea6</a></td><td><code>Add sage package mathjax3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c2984dab2fe058b448ff6eb8178a235c1c28eca\">7c2984d</a></td><td><code>Remove garbage files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/321c8b5ae2ba3265e803c77c9b66d43f8dace092\">321c8b5</a></td><td><code>Put into mathjax subdirectory</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cc5eb75f791eabf5a594e9fc548d324fb23d7ac\">7cc5eb7</a></td><td><code>Build doc with mathjax3 (default: offline)</code></td></tr></table>\n",
    "created_at": "2022-04-07T07:55:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545961",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36" align="right">Comment 36</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d647ea6665a878e0edf2d4a732fba53d13773304">d647ea6</a></td><td><code>Add sage package mathjax3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c2984dab2fe058b448ff6eb8178a235c1c28eca">7c2984d</a></td><td><code>Remove garbage files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/321c8b5ae2ba3265e803c77c9b66d43f8dace092">321c8b5</a></td><td><code>Put into mathjax subdirectory</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cc5eb75f791eabf5a594e9fc548d324fb23d7ac">7cc5eb7</a></td><td><code>Build doc with mathjax3 (default: offline)</code></td></tr></table>




---

archive/issue_comments_545962.json:
```json
{
    "body": "Changed commit from **[097c034](https://github.com/sagemath/sagetrac-mirror/commit/097c034ada7ce77afedb20da5705e50f5d3a0737)** to **[7cc5eb7](https://github.com/sagemath/sagetrac-mirror/commit/7cc5eb75f791eabf5a594e9fc548d324fb23d7ac)**",
    "created_at": "2022-04-07T07:55:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545962",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[097c034](https://github.com/sagemath/sagetrac-mirror/commit/097c034ada7ce77afedb20da5705e50f5d3a0737)** to **[7cc5eb7](https://github.com/sagemath/sagetrac-mirror/commit/7cc5eb75f791eabf5a594e9fc548d324fb23d7ac)**



---

archive/issue_comments_545963.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nNow the branch at #25833 is merged.\n\nPresently the default is offline mathjax3, to experiment. When everything is okay, we should decide what should be the default.",
    "created_at": "2022-04-07T07:58:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545963",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:37" align="right">Comment 37</div>

Now the branch at #25833 is merged.

Presently the default is offline mathjax3, to experiment. When everything is okay, we should decide what should be the default.



---

archive/issue_comments_545964.json:
```json
{
    "body": "Changed author from **Tobias Diez** to **Tobias Diez, Kwankyu Lee**",
    "created_at": "2022-04-07T07:59:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545964",
    "user": "https://github.com/kwankyu"
}
```

Changed author from **Tobias Diez** to **Tobias Diez, Kwankyu Lee**



---

archive/issue_comments_545965.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c92b6c0bc236152687c2b9b03a20941901bb4057\">c92b6c0</a></td><td><code>Remove commented-out lines</code></td></tr></table>\n",
    "created_at": "2022-04-07T08:08:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545965",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39" align="right">Comment 39</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c92b6c0bc236152687c2b9b03a20941901bb4057">c92b6c0</a></td><td><code>Remove commented-out lines</code></td></tr></table>




---

archive/issue_comments_545966.json:
```json
{
    "body": "Changed commit from **[7cc5eb7](https://github.com/sagemath/sagetrac-mirror/commit/7cc5eb75f791eabf5a594e9fc548d324fb23d7ac)** to **[c92b6c0](https://github.com/sagemath/sagetrac-mirror/commit/c92b6c0bc236152687c2b9b03a20941901bb4057)**",
    "created_at": "2022-04-07T08:08:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545966",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7cc5eb7](https://github.com/sagemath/sagetrac-mirror/commit/7cc5eb75f791eabf5a594e9fc548d324fb23d7ac)** to **[c92b6c0](https://github.com/sagemath/sagetrac-mirror/commit/c92b6c0bc236152687c2b9b03a20941901bb4057)**



---

archive/issue_comments_545967.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nReplying to [@kwankyu](#comment%3A37):\n> Now the branch at #25833 is merged.\n> \n> Presently the default is offline mathjax3, to experiment. When everything is okay, we should decide what should be the default.\n\nThanks for your work on this!",
    "created_at": "2022-04-07T16:01:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545967",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:40" align="right">Comment 40</div>

Replying to [@kwankyu](#comment%3A37):
> Now the branch at #25833 is merged.
> 
> Presently the default is offline mathjax3, to experiment. When everything is okay, we should decide what should be the default.

Thanks for your work on this!



---

archive/issue_comments_545968.json:
```json
{
    "body": "Changed commit from **[c92b6c0](https://github.com/sagemath/sagetrac-mirror/commit/c92b6c0bc236152687c2b9b03a20941901bb4057)** to **[5412dcb](https://github.com/sagemath/sagetrac-mirror/commit/5412dcb00418d1c1eacf161393837f56237e369d)**",
    "created_at": "2022-04-08T01:19:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545968",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c92b6c0](https://github.com/sagemath/sagetrac-mirror/commit/c92b6c0bc236152687c2b9b03a20941901bb4057)** to **[5412dcb](https://github.com/sagemath/sagetrac-mirror/commit/5412dcb00418d1c1eacf161393837f56237e369d)**



---

archive/issue_comments_545969.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46d0d69257a0aec45e1a0b139390f56dba72ff2f\">46d0d69</a></td><td><code>Add sage package mathjax3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6da197eaba5d868ee70a71819b7ce4572a679d6d\">6da197e</a></td><td><code>Remove garbage files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd60742011ccf822629c8dda8a35315da839459d\">bd60742</a></td><td><code>Put into mathjax subdirectory</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b47d224f3c41232f73f64467288ca191ec75244\">5b47d22</a></td><td><code>Fix checksums</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1cdce2cd387c22e9709f64756cf98910be5d8c3\">f1cdce2</a></td><td><code>Merge branch 'spkg-mathjax3-trac25833'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5412dcb00418d1c1eacf161393837f56237e369d\">5412dcb</a></td><td><code>Rename config variable to --use-cdns</code></td></tr></table>\n",
    "created_at": "2022-04-08T01:19:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545969",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41" align="right">Comment 41</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46d0d69257a0aec45e1a0b139390f56dba72ff2f">46d0d69</a></td><td><code>Add sage package mathjax3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6da197eaba5d868ee70a71819b7ce4572a679d6d">6da197e</a></td><td><code>Remove garbage files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd60742011ccf822629c8dda8a35315da839459d">bd60742</a></td><td><code>Put into mathjax subdirectory</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b47d224f3c41232f73f64467288ca191ec75244">5b47d22</a></td><td><code>Fix checksums</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1cdce2cd387c22e9709f64756cf98910be5d8c3">f1cdce2</a></td><td><code>Merge branch 'spkg-mathjax3-trac25833'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5412dcb00418d1c1eacf161393837f56237e369d">5412dcb</a></td><td><code>Rename config variable to --use-cdns</code></td></tr></table>




---

archive/issue_comments_545970.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nI think that offline sage documentation should be the default as it has been. So I renamed the config variable to `--use-cdns`. If we change the default to \"online\" in the future, then we can just turn on `--use-cdns`.",
    "created_at": "2022-04-08T01:24:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545970",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:42" align="right">Comment 42</div>

I think that offline sage documentation should be the default as it has been. So I renamed the config variable to `--use-cdns`. If we change the default to "online" in the future, then we can just turn on `--use-cdns`.



---

archive/issue_comments_545971.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a186d24b571358b52340e6b908b4f0f23d7544d\">2a186d2</a></td><td><code>Fix a typo</code></td></tr></table>\n",
    "created_at": "2022-04-08T01:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545971",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43" align="right">Comment 43</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a186d24b571358b52340e6b908b4f0f23d7544d">2a186d2</a></td><td><code>Fix a typo</code></td></tr></table>




---

archive/issue_comments_545972.json:
```json
{
    "body": "Changed commit from **[5412dcb](https://github.com/sagemath/sagetrac-mirror/commit/5412dcb00418d1c1eacf161393837f56237e369d)** to **[2a186d2](https://github.com/sagemath/sagetrac-mirror/commit/2a186d24b571358b52340e6b908b4f0f23d7544d)**",
    "created_at": "2022-04-08T01:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545972",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5412dcb](https://github.com/sagemath/sagetrac-mirror/commit/5412dcb00418d1c1eacf161393837f56237e369d)** to **[2a186d2](https://github.com/sagemath/sagetrac-mirror/commit/2a186d24b571358b52340e6b908b4f0f23d7544d)**



---

archive/issue_comments_545973.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nTo build doc with mathjax cdn, we only need\n\n```diff\ndiff --git a/src/doc/Makefile b/src/doc/Makefile\nindex 90bea5dfac..82134ea3b4 100644\n--- a/src/doc/Makefile\n+++ b/src/doc/Makefile\n@@ -21,7 +21,7 @@ doc-inventory--%:\n \n # Matches doc-html--developer, doc-html--reference-manifolds etc.\n doc-html--%:\n-       cd $(SAGE_ROOT) && ./sage --docbuild --no-pdf-links $(subst -,/,$(subst doc-html--,,$@)) html $(SAGE_DOCBUILD_OPTS)\n+       cd $(SAGE_ROOT) && ./sage --docbuild --use-cdns --no-pdf-links $(subst -,/,$(subst doc-html--,,$@)) html $(SAGE_DOCBUILD_OPTS)\n \n # reference manual, inventory\n ifndef SAGE_ROOT\n```\n\nSo `./configure --online-doc` would do the above.",
    "created_at": "2022-04-08T02:43:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545973",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:44" align="right">Comment 44</div>

To build doc with mathjax cdn, we only need

```diff
diff --git a/src/doc/Makefile b/src/doc/Makefile
index 90bea5dfac..82134ea3b4 100644
--- a/src/doc/Makefile
+++ b/src/doc/Makefile
@@ -21,7 +21,7 @@ doc-inventory--%:
 
 # Matches doc-html--developer, doc-html--reference-manifolds etc.
 doc-html--%:
-       cd $(SAGE_ROOT) && ./sage --docbuild --no-pdf-links $(subst -,/,$(subst doc-html--,,$@)) html $(SAGE_DOCBUILD_OPTS)
+       cd $(SAGE_ROOT) && ./sage --docbuild --use-cdns --no-pdf-links $(subst -,/,$(subst doc-html--,,$@)) html $(SAGE_DOCBUILD_OPTS)
 
 # reference manual, inventory
 ifndef SAGE_ROOT
```

So `./configure --online-doc` would do the above.



---

archive/issue_comments_545974.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nAny reason `os.path.join(SAGE_SHARE, 'mathjax3')` is hardcoded in `docs/conf.py` instead of using the `MATHJAX_DIR` defined in `env.py`?",
    "created_at": "2022-04-08T06:06:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545974",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:45" align="right">Comment 45</div>

Any reason `os.path.join(SAGE_SHARE, 'mathjax3')` is hardcoded in `docs/conf.py` instead of using the `MATHJAX_DIR` defined in `env.py`?



---

archive/issue_comments_545975.json:
```json
{
    "body": "Changed commit from **[2a186d2](https://github.com/sagemath/sagetrac-mirror/commit/2a186d24b571358b52340e6b908b4f0f23d7544d)** to **[c42ec23](https://github.com/sagemath/sagetrac-mirror/commit/c42ec232510584689911696655f18b4395acdd81)**",
    "created_at": "2022-04-08T06:12:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545975",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2a186d2](https://github.com/sagemath/sagetrac-mirror/commit/2a186d24b571358b52340e6b908b4f0f23d7544d)** to **[c42ec23](https://github.com/sagemath/sagetrac-mirror/commit/c42ec232510584689911696655f18b4395acdd81)**



---

archive/issue_comments_545976.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c42ec232510584689911696655f18b4395acdd81\">c42ec23</a></td><td><code>Use MATHJAX_DIR</code></td></tr></table>\n",
    "created_at": "2022-04-08T06:12:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545976",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46" align="right">Comment 46</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c42ec232510584689911696655f18b4395acdd81">c42ec23</a></td><td><code>Use MATHJAX_DIR</code></td></tr></table>




---

archive/issue_comments_545977.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nReplying to [@antonio-rojas](#comment%3A45):\n> Any reason `os.path.join(SAGE_SHARE, 'mathjax3')` is hardcoded in `docs/conf.py` instead of using the `MATHJAX_DIR` defined in `env.py`?\n\nNo. You are right. Thanks.",
    "created_at": "2022-04-08T06:12:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545977",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:47" align="right">Comment 47</div>

Replying to [@antonio-rojas](#comment%3A45):
> Any reason `os.path.join(SAGE_SHARE, 'mathjax3')` is hardcoded in `docs/conf.py` instead of using the `MATHJAX_DIR` defined in `env.py`?

No. You are right. Thanks.



---

archive/issue_comments_545978.json:
```json
{
    "body": "Changed commit from **[c42ec23](https://github.com/sagemath/sagetrac-mirror/commit/c42ec232510584689911696655f18b4395acdd81)** to **[89ec417](https://github.com/sagemath/sagetrac-mirror/commit/89ec41751c94cd12136596e15375b2a1a183258d)**",
    "created_at": "2022-04-08T12:51:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545978",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c42ec23](https://github.com/sagemath/sagetrac-mirror/commit/c42ec232510584689911696655f18b4395acdd81)** to **[89ec417](https://github.com/sagemath/sagetrac-mirror/commit/89ec41751c94cd12136596e15375b2a1a183258d)**



---

archive/issue_comments_545979.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8df9661a421c7a735c667c7e5457638b3847c557\">8df9661</a></td><td><code>Upgrade mathjax package to mathjax3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43b802dd437be4309d5fb3e9d3aa025d61c3df8c\">43b802d</a></td><td><code>Merge branch 'spkg-mathjax3-trac25833'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89ec41751c94cd12136596e15375b2a1a183258d\">89ec417</a></td><td><code>Fix MATHJAX_DIR env variable</code></td></tr></table>\n",
    "created_at": "2022-04-08T12:51:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545979",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48" align="right">Comment 48</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8df9661a421c7a735c667c7e5457638b3847c557">8df9661</a></td><td><code>Upgrade mathjax package to mathjax3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43b802dd437be4309d5fb3e9d3aa025d61c3df8c">43b802d</a></td><td><code>Merge branch 'spkg-mathjax3-trac25833'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89ec41751c94cd12136596e15375b2a1a183258d">89ec417</a></td><td><code>Fix MATHJAX_DIR env variable</code></td></tr></table>




---

archive/issue_comments_545980.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nShould we merge this ticket with #25833, since you replace the mathjax 2 package there, so one probably should upgrade the config in one go as well. What do you think?",
    "created_at": "2022-04-08T18:31:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545980",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:49" align="right">Comment 49</div>

Should we merge this ticket with #25833, since you replace the mathjax 2 package there, so one probably should upgrade the config in one go as well. What do you think?



---

archive/issue_comments_545981.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nReplying to [@kwankyu](#comment%3A42):\n> I think that offline sage documentation should be the default as it has been. So I renamed the config variable to `--use-cdns`. If we change the default to \"online\" in the future, then we can just turn on `--use-cdns`.\n\nI'm not sure what should be the default for developers (but I guess everyone has internet if they contribute to trac...so I guess cdn would make sense), but the server should use the cdn to increase the speed or not? Comparing the loading times from the cdn vs sage's server, the cdn is a factor 10 quicker (13 ms vs 140ms).",
    "created_at": "2022-04-08T19:29:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545981",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:50" align="right">Comment 50</div>

Replying to [@kwankyu](#comment%3A42):
> I think that offline sage documentation should be the default as it has been. So I renamed the config variable to `--use-cdns`. If we change the default to "online" in the future, then we can just turn on `--use-cdns`.

I'm not sure what should be the default for developers (but I guess everyone has internet if they contribute to trac...so I guess cdn would make sense), but the server should use the cdn to increase the speed or not? Comparing the loading times from the cdn vs sage's server, the cdn is a factor 10 quicker (13 ms vs 140ms).



---

archive/issue_comments_545982.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nReplying to [@tobiasdiez](#comment%3A49):\n> Should we merge this ticket with #25833, since you replace the mathjax 2 package there, so one probably should upgrade the config in one go as well. What do you think?\n\nI agree. Let's do it. I will upload the branch of this ticket to #25833.",
    "created_at": "2022-04-08T23:42:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545982",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:51" align="right">Comment 51</div>

Replying to [@tobiasdiez](#comment%3A49):
> Should we merge this ticket with #25833, since you replace the mathjax 2 package there, so one probably should upgrade the config in one go as well. What do you think?

I agree. Let's do it. I will upload the branch of this ticket to #25833.



---

archive/issue_comments_545983.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nReplying to [@tobiasdiez](#comment%3A50):\n> Replying to [@kwankyu](#comment%3A42):\n> > I think that offline sage documentation should be the default as it has been. So I renamed the config variable to `--use-cdns`. If we change the default to \"online\" in the future, then we can just turn on `--use-cdns`.\n\n> \n> I'm not sure what should be the default for developers (but I guess everyone has internet if they contribute to trac...so I guess cdn would make sense), but the server should use the cdn to increase the speed or not? Comparing the loading times from the cdn vs sage's server, the cdn is a factor 10 quicker (13 ms vs 140ms).\n\nThe default is aimed at sage users with lowest resources.\n\nI think we need to provide `./configure --online-doc` option so that everyone can choose what he/she wants. Developers would of course have internet resource usually, but sometimes not (on airplane :). Personally I would prefer offline-doc.",
    "created_at": "2022-04-08T23:49:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545983",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:52" align="right">Comment 52</div>

Replying to [@tobiasdiez](#comment%3A50):
> Replying to [@kwankyu](#comment%3A42):
> > I think that offline sage documentation should be the default as it has been. So I renamed the config variable to `--use-cdns`. If we change the default to "online" in the future, then we can just turn on `--use-cdns`.

> 
> I'm not sure what should be the default for developers (but I guess everyone has internet if they contribute to trac...so I guess cdn would make sense), but the server should use the cdn to increase the speed or not? Comparing the loading times from the cdn vs sage's server, the cdn is a factor 10 quicker (13 ms vs 140ms).

The default is aimed at sage users with lowest resources.

I think we need to provide `./configure --online-doc` option so that everyone can choose what he/she wants. Developers would of course have internet resource usually, but sometimes not (on airplane :). Personally I would prefer offline-doc.



---

archive/issue_events_443069.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-08T23:53:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443069"
}
```



---

archive/issue_events_443070.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-04-08T23:53:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443070"
}
```



---

archive/issue_comments_545984.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nReplying to [@kwankyu](#comment%3A52):\n> I think we need to provide `./configure --online-doc` option so that everyone can choose what he/she wants. \n\nNo. We already have `SAGE_DOCBUILD_OPTS` environment variable. So we can\n\n```\nexport SAGE_DOCBUILD_OPTS=\"--use-cdns\"\n```\nbefore `make`.",
    "created_at": "2022-04-09T11:41:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545984",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:54" align="right">Comment 54</div>

Replying to [@kwankyu](#comment%3A52):
> I think we need to provide `./configure --online-doc` option so that everyone can choose what he/she wants. 

No. We already have `SAGE_DOCBUILD_OPTS` environment variable. So we can

```
export SAGE_DOCBUILD_OPTS="--use-cdns"
```
before `make`.



---

archive/issue_events_443071.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-09T19:39:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443071"
}
```



---

archive/issue_events_443072.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-09T19:39:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443072"
}
```



---

archive/issue_events_443073.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-09T19:39:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443073"
}
```



---

archive/issue_events_443074.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-09T19:39:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443074"
}
```



---

archive/issue_events_443075.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-09T19:39:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443075"
}
```



---

archive/issue_comments_545985.json:
```json
{
    "body": "Changed author from **Tobias Diez, Kwankyu Lee** to none",
    "created_at": "2022-04-09T23:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545985",
    "user": "https://github.com/kwankyu"
}
```

Changed author from **Tobias Diez, Kwankyu Lee** to none



---

archive/issue_comments_545986.json:
```json
{
    "body": "Reviewer: **Kwankyu Lee**",
    "created_at": "2022-04-09T23:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545986",
    "user": "https://github.com/kwankyu"
}
```

Reviewer: **Kwankyu Lee**



---

archive/issue_comments_545987.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nReplying to [@tobiasdiez](#comment%3A55):\n\nhttps://doc.sagemath.org/html/en/developer/trac.html#reviewing-and-closing-tickets\n\nOkay. Let's close this.",
    "created_at": "2022-04-09T23:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33600#issuecomment-545987",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:56" align="right">Comment 56</div>

Replying to [@tobiasdiez](#comment%3A55):

https://doc.sagemath.org/html/en/developer/trac.html#reviewing-and-closing-tickets

Okay. Let's close this.



---

archive/issue_events_443076.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-11T02:14:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443076"
}
```



---

archive/issue_events_443077.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-11T02:14:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33600",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33600#event-443077"
}
```
