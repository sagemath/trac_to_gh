# Issue 33852: bootstrap, src/doc/Makefile: Remove use of the SAGE_ROOT/sage script

archive/issues_033615.json:
```json
{
    "assignees": [],
    "body": "We change the `bootstrap` scripts so that they invoke `build/bin/sage-package` directly instead of going through the `SAGE_ROOT/sage` script.\n\nThis is faster and also more robust because it separates build phases better by eliminating the (unnecessary) use of `configure`-generated files such as `src/bin/sage-src-env-config`.\n\nWe also move the generation of `src/doc/en/reference/repl/options.txt` (by calling `sage -advanced`) from bootstrap time to `src/doc/Makefile`. The information displayed there depends on what packages are installed, so running it at bootstrap time was not correct.\n\n\nDepends on #33740\n\nCC:  @jhpalmieri @tobiasdiez @orlitzky @dimpase @kiwifb\n\nBranch/Commit: **[`67c8238`](https://github.com/sagemath/sagetrac-mirror/commit/67c8238c067ffb62f17a7e338dab57bc7d24ce70)**\n\nReviewer: **John Palmieri, Fran\u00e7ois Bissey**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **scripts**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33852_\n\n",
    "closed_at": "2022-06-06T21:24:19Z",
    "created_at": "2022-05-14T21:05:12Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20scripts",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "bootstrap, src/doc/Makefile: Remove use of the SAGE_ROOT/sage script",
    "type": "issue",
    "updated_at": "2022-06-06T21:24:19Z",
    "url": "https://github.com/sagemath/sage/issues/33852",
    "user": "https://github.com/mkoeppe"
}
```
We change the `bootstrap` scripts so that they invoke `build/bin/sage-package` directly instead of going through the `SAGE_ROOT/sage` script.

This is faster and also more robust because it separates build phases better by eliminating the (unnecessary) use of `configure`-generated files such as `src/bin/sage-src-env-config`.

We also move the generation of `src/doc/en/reference/repl/options.txt` (by calling `sage -advanced`) from bootstrap time to `src/doc/Makefile`. The information displayed there depends on what packages are installed, so running it at bootstrap time was not correct.


Depends on #33740

CC:  @jhpalmieri @tobiasdiez @orlitzky @dimpase @kiwifb

Branch/Commit: **[`67c8238`](https://github.com/sagemath/sagetrac-mirror/commit/67c8238c067ffb62f17a7e338dab57bc7d24ce70)**

Reviewer: **John Palmieri, François Bissey**

Author: **Matthias Koeppe**

Component: **scripts**

_Issue created by migration from https://trac.sagemath.org/ticket/33852_





---

archive/issue_events_464289.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-14T21:05:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33852#event-464289"
}
```



---

archive/issue_events_464290.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-14T21:05:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20scripts",
    "label_color": "000080",
    "label_name": "c: scripts",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33852#event-464290"
}
```



---

archive/issue_events_464291.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-14T21:05:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33852#event-464291"
}
```



---

archive/issue_events_464292.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-14T21:05:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33852#event-464292"
}
```



---

archive/issue_comments_547632.json:
```json
{
    "body": "Branch: **[u/mkoeppe/bootstrap__remove_use_of_the_sage_root_sage_script](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/bootstrap__remove_use_of_the_sage_root_sage_script)**",
    "created_at": "2022-05-14T21:08:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547632",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/bootstrap__remove_use_of_the_sage_root_sage_script](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/bootstrap__remove_use_of_the_sage_root_sage_script)**



---

archive/issue_events_464293.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-14T21:13:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "title_is": "bootstrap, src/doc/Makefile: Remove use of the SAGE_ROOT/sage script",
    "title_was": "bootstrap: Remove use of the SAGE_ROOT/sage script",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33852#event-464293"
}
```



---

archive/issue_comments_547633.json:
```json
{
    "body": "Commit: **[`ccbc21a`](https://github.com/sagemath/sagetrac-mirror/commit/ccbc21ad139c604078e2066bd9d34d514072eade)**",
    "created_at": "2022-05-14T21:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547633",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`ccbc21a`](https://github.com/sagemath/sagetrac-mirror/commit/ccbc21ad139c604078e2066bd9d34d514072eade)**



---

archive/issue_comments_547634.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10338a76ce5812db62f4ac72a17e6c6330f1fb8c\"><code>10338a7</code></a></td><td><code>Change ci as well</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0cf7334736fa9ec9fb2af8099722767fea2bdc0d\"><code>0cf7334</code></a></td><td><code>Add sage-setup as install-requires dep</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d2b14978335da5bfd8148266183a8abd5f32cce\"><code>6d2b149</code></a></td><td><code>Use relative paths to not install src package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1dba3ba01d15153940f310a9e1c427f00d4460d6\"><code>1dba3ba</code></a></td><td><code>Maybe thats the correct shebang?</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1b2fbf6b82fb388cbb143453b2eeaa428b604ff\"><code>c1b2fbf</code></a></td><td><code>Revert install_requires change</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad56ba3dab303edea7cdd2d449c69feaaf624beb\"><code>ad56ba3</code></a></td><td><code>Go back to two pip installs for now</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b42f5f51e716d6d01cb491699220ba42c674cd5c\"><code>b42f5f5</code></a></td><td><code>Readd how to use specific python version</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87f360ca7a4703b6c45ad3427363ccf4ae531b2c\"><code>87f360c</code></a></td><td><code>Readd name arg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/765dff791ee25f1e985e22582a2fafe6f354abba\"><code>765dff7</code></a></td><td><code>Merge #33740</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ccbc21ad139c604078e2066bd9d34d514072eade\"><code>ccbc21a</code></a></td><td><code>bootstrap, bootstrap-conda, src/doc/bootstrap: Use build/bin/sage-package directly</code></td></tr></table>\n",
    "created_at": "2022-05-14T21:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547634",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10338a76ce5812db62f4ac72a17e6c6330f1fb8c"><code>10338a7</code></a></td><td><code>Change ci as well</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0cf7334736fa9ec9fb2af8099722767fea2bdc0d"><code>0cf7334</code></a></td><td><code>Add sage-setup as install-requires dep</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d2b14978335da5bfd8148266183a8abd5f32cce"><code>6d2b149</code></a></td><td><code>Use relative paths to not install src package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1dba3ba01d15153940f310a9e1c427f00d4460d6"><code>1dba3ba</code></a></td><td><code>Maybe thats the correct shebang?</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1b2fbf6b82fb388cbb143453b2eeaa428b604ff"><code>c1b2fbf</code></a></td><td><code>Revert install_requires change</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad56ba3dab303edea7cdd2d449c69feaaf624beb"><code>ad56ba3</code></a></td><td><code>Go back to two pip installs for now</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b42f5f51e716d6d01cb491699220ba42c674cd5c"><code>b42f5f5</code></a></td><td><code>Readd how to use specific python version</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87f360ca7a4703b6c45ad3427363ccf4ae531b2c"><code>87f360c</code></a></td><td><code>Readd name arg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/765dff791ee25f1e985e22582a2fafe6f354abba"><code>765dff7</code></a></td><td><code>Merge #33740</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ccbc21ad139c604078e2066bd9d34d514072eade"><code>ccbc21a</code></a></td><td><code>bootstrap, bootstrap-conda, src/doc/bootstrap: Use build/bin/sage-package directly</code></td></tr></table>




---

archive/issue_comments_547635.json:
```json
{
    "body": "Changed commit from **[`ccbc21a`](https://github.com/sagemath/sagetrac-mirror/commit/ccbc21ad139c604078e2066bd9d34d514072eade)** to **[`4560895`](https://github.com/sagemath/sagetrac-mirror/commit/45608952c47f3a9bd406299958a130e8612a26d6)**",
    "created_at": "2022-05-14T21:23:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547635",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ccbc21a`](https://github.com/sagemath/sagetrac-mirror/commit/ccbc21ad139c604078e2066bd9d34d514072eade)** to **[`4560895`](https://github.com/sagemath/sagetrac-mirror/commit/45608952c47f3a9bd406299958a130e8612a26d6)**



---

archive/issue_comments_547636.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/45608952c47f3a9bd406299958a130e8612a26d6\"><code>4560895</code></a></td><td><code>src/doc/Makefile: Remove explicit use of SAGE_ROOT and the top-level sage script</code></td></tr></table>\n",
    "created_at": "2022-05-14T21:23:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547636",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/45608952c47f3a9bd406299958a130e8612a26d6"><code>4560895</code></a></td><td><code>src/doc/Makefile: Remove explicit use of SAGE_ROOT and the top-level sage script</code></td></tr></table>




---

archive/issue_comments_547637.json:
```json
{
    "body": "Changed commit from **[`4560895`](https://github.com/sagemath/sagetrac-mirror/commit/45608952c47f3a9bd406299958a130e8612a26d6)** to **[`7759f3c`](https://github.com/sagemath/sagetrac-mirror/commit/7759f3c23b07b56897a691baf57e6f00b98d78b6)**",
    "created_at": "2022-05-14T21:37:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547637",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4560895`](https://github.com/sagemath/sagetrac-mirror/commit/45608952c47f3a9bd406299958a130e8612a26d6)** to **[`7759f3c`](https://github.com/sagemath/sagetrac-mirror/commit/7759f3c23b07b56897a691baf57e6f00b98d78b6)**



---

archive/issue_comments_547638.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7759f3c23b07b56897a691baf57e6f00b98d78b6\"><code>7759f3c</code></a></td><td><code>Generate en/reference/repl/options.txt at build time, not bootstrap time</code></td></tr></table>\n",
    "created_at": "2022-05-14T21:37:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547638",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7759f3c23b07b56897a691baf57e6f00b98d78b6"><code>7759f3c</code></a></td><td><code>Generate en/reference/repl/options.txt at build time, not bootstrap time</code></td></tr></table>




---

archive/issue_comments_547639.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,5 @@\n \n This is faster and also more robust because it separates build phases better by eliminating the (unnecessary) use of `configure`-generated files such as `src/bin/sage-src-env-config`.\n \n+We also move the generation of `src/doc/en/reference/repl/options.txt` (by calling `sage -advanced`) from bootstrap time to `src/doc/Makefile`. The information displayed there depends on what packages are installed, so running it at bootstrap time was not correct.\n+\n``````\n",
    "created_at": "2022-05-14T21:39:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547639",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,5 @@
 
 This is faster and also more robust because it separates build phases better by eliminating the (unnecessary) use of `configure`-generated files such as `src/bin/sage-src-env-config`.
 
+We also move the generation of `src/doc/en/reference/repl/options.txt` (by calling `sage -advanced`) from bootstrap time to `src/doc/Makefile`. The information displayed there depends on what packages are installed, so running it at bootstrap time was not correct.
+
``````




---

archive/issue_events_464294.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-14T21:39:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33852#event-464294"
}
```



---

archive/issue_comments_547640.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67c8238c067ffb62f17a7e338dab57bc7d24ce70\"><code>67c8238</code></a></td><td><code>src/bin/sage: Print error to error output</code></td></tr></table>\n",
    "created_at": "2022-05-15T00:46:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547640",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67c8238c067ffb62f17a7e338dab57bc7d24ce70"><code>67c8238</code></a></td><td><code>src/bin/sage: Print error to error output</code></td></tr></table>




---

archive/issue_comments_547641.json:
```json
{
    "body": "Changed commit from **[`7759f3c`](https://github.com/sagemath/sagetrac-mirror/commit/7759f3c23b07b56897a691baf57e6f00b98d78b6)** to **[`67c8238`](https://github.com/sagemath/sagetrac-mirror/commit/67c8238c067ffb62f17a7e338dab57bc7d24ce70)**",
    "created_at": "2022-05-15T00:46:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547641",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7759f3c`](https://github.com/sagemath/sagetrac-mirror/commit/7759f3c23b07b56897a691baf57e6f00b98d78b6)** to **[`67c8238`](https://github.com/sagemath/sagetrac-mirror/commit/67c8238c067ffb62f17a7e338dab57bc7d24ce70)**



---

archive/issue_comments_547642.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><code>[c671cbb](https://github.com/sagemath/sagetrac-mirror/commit/c671cbbff537e87d4beb23e9a5dc48cb8ed10ca6)</code></td><td><code>`m4/sage_spkg_collect.m4: Read files dependencies_{optional,order_only,check`}</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f3a296b4ea236f075c6c014eceb8941ea93c3aa\"><code>9f3a296</code></a></td><td><code>build/pkgs: Split dependencies_optional and dependencies_check out from dependencies</code></td></tr></table>\n",
    "created_at": "2022-05-15T02:39:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547642",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><code>[c671cbb](https://github.com/sagemath/sagetrac-mirror/commit/c671cbbff537e87d4beb23e9a5dc48cb8ed10ca6)</code></td><td><code>`m4/sage_spkg_collect.m4: Read files dependencies_{optional,order_only,check`}</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f3a296b4ea236f075c6c014eceb8941ea93c3aa"><code>9f3a296</code></a></td><td><code>build/pkgs: Split dependencies_optional and dependencies_check out from dependencies</code></td></tr></table>




---

archive/issue_comments_547643.json:
```json
{
    "body": "Changed commit from **[`67c8238`](https://github.com/sagemath/sagetrac-mirror/commit/67c8238c067ffb62f17a7e338dab57bc7d24ce70)** to **[`9f3a296`](https://github.com/sagemath/sagetrac-mirror/commit/9f3a296b4ea236f075c6c014eceb8941ea93c3aa)**",
    "created_at": "2022-05-15T02:39:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547643",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`67c8238`](https://github.com/sagemath/sagetrac-mirror/commit/67c8238c067ffb62f17a7e338dab57bc7d24ce70)** to **[`9f3a296`](https://github.com/sagemath/sagetrac-mirror/commit/9f3a296b4ea236f075c6c014eceb8941ea93c3aa)**



---

archive/issue_comments_547644.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46144d1ea4a5bd3d58c7cc150ff7c2c7c93335d9\"><code>46144d1</code></a></td><td><code>build/bin/sage-spkg-info: Restore message '(none known)' for packages without system package info</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3faf0ab51ea5e686b2d01a346a9733b95ea80b8e\"><code>3faf0ab</code></a></td><td><code>build/bin/sage-spkg-info: Format dependencies</code></td></tr></table>\n",
    "created_at": "2022-05-15T03:06:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547644",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46144d1ea4a5bd3d58c7cc150ff7c2c7c93335d9"><code>46144d1</code></a></td><td><code>build/bin/sage-spkg-info: Restore message '(none known)' for packages without system package info</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3faf0ab51ea5e686b2d01a346a9733b95ea80b8e"><code>3faf0ab</code></a></td><td><code>build/bin/sage-spkg-info: Format dependencies</code></td></tr></table>




---

archive/issue_comments_547645.json:
```json
{
    "body": "Changed commit from **[`9f3a296`](https://github.com/sagemath/sagetrac-mirror/commit/9f3a296b4ea236f075c6c014eceb8941ea93c3aa)** to **[`3faf0ab`](https://github.com/sagemath/sagetrac-mirror/commit/3faf0ab51ea5e686b2d01a346a9733b95ea80b8e)**",
    "created_at": "2022-05-15T03:06:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547645",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9f3a296`](https://github.com/sagemath/sagetrac-mirror/commit/9f3a296b4ea236f075c6c014eceb8941ea93c3aa)** to **[`3faf0ab`](https://github.com/sagemath/sagetrac-mirror/commit/3faf0ab51ea5e686b2d01a346a9733b95ea80b8e)**



---

archive/issue_comments_547646.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/facb1fccd26c1749314e4106915b42be994e82c0\"><code>facb1fc</code></a></td><td><code>build/bin/sage-spkg-info: Format dependencies</code></td></tr></table>\n",
    "created_at": "2022-05-15T03:23:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547646",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/facb1fccd26c1749314e4106915b42be994e82c0"><code>facb1fc</code></a></td><td><code>build/bin/sage-spkg-info: Format dependencies</code></td></tr></table>




---

archive/issue_comments_547647.json:
```json
{
    "body": "Changed commit from **[`3faf0ab`](https://github.com/sagemath/sagetrac-mirror/commit/3faf0ab51ea5e686b2d01a346a9733b95ea80b8e)** to **[`facb1fc`](https://github.com/sagemath/sagetrac-mirror/commit/facb1fccd26c1749314e4106915b42be994e82c0)**",
    "created_at": "2022-05-15T03:23:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547647",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3faf0ab`](https://github.com/sagemath/sagetrac-mirror/commit/3faf0ab51ea5e686b2d01a346a9733b95ea80b8e)** to **[`facb1fc`](https://github.com/sagemath/sagetrac-mirror/commit/facb1fccd26c1749314e4106915b42be994e82c0)**



---

archive/issue_comments_547648.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ab0814b63b4cf0aeb6641606f4e76631b5463c3\"><code>8ab0814</code></a></td><td><code>build/pkgs/memory_allocator/SPKG.rst: Fix markup</code></td></tr></table>\n",
    "created_at": "2022-05-15T03:26:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547648",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ab0814b63b4cf0aeb6641606f4e76631b5463c3"><code>8ab0814</code></a></td><td><code>build/pkgs/memory_allocator/SPKG.rst: Fix markup</code></td></tr></table>




---

archive/issue_comments_547649.json:
```json
{
    "body": "Changed commit from **[`facb1fc`](https://github.com/sagemath/sagetrac-mirror/commit/facb1fccd26c1749314e4106915b42be994e82c0)** to **[`8ab0814`](https://github.com/sagemath/sagetrac-mirror/commit/8ab0814b63b4cf0aeb6641606f4e76631b5463c3)**",
    "created_at": "2022-05-15T03:26:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547649",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`facb1fc`](https://github.com/sagemath/sagetrac-mirror/commit/facb1fccd26c1749314e4106915b42be994e82c0)** to **[`8ab0814`](https://github.com/sagemath/sagetrac-mirror/commit/8ab0814b63b4cf0aeb6641606f4e76631b5463c3)**



---

archive/issue_comments_547650.json:
```json
{
    "body": "Changed commit from **[`8ab0814`](https://github.com/sagemath/sagetrac-mirror/commit/8ab0814b63b4cf0aeb6641606f4e76631b5463c3)** to **[`2d12c0b`](https://github.com/sagemath/sagetrac-mirror/commit/2d12c0b68e14a6fde9fd2929628b7314dd47badc)**",
    "created_at": "2022-05-15T03:32:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547650",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8ab0814`](https://github.com/sagemath/sagetrac-mirror/commit/8ab0814b63b4cf0aeb6641606f4e76631b5463c3)** to **[`2d12c0b`](https://github.com/sagemath/sagetrac-mirror/commit/2d12c0b68e14a6fde9fd2929628b7314dd47badc)**



---

archive/issue_comments_547651.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d12c0b68e14a6fde9fd2929628b7314dd47badc\"><code>2d12c0b</code></a></td><td><code>build/pkgs/memory_allocator/SPKG.rst: Fix markup</code></td></tr></table>\n",
    "created_at": "2022-05-15T03:32:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547651",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d12c0b68e14a6fde9fd2929628b7314dd47badc"><code>2d12c0b</code></a></td><td><code>build/pkgs/memory_allocator/SPKG.rst: Fix markup</code></td></tr></table>




---

archive/issue_comments_547652.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e5162aa5a1624de66b543d7665b4054318b3f8f\"><code>0e5162a</code></a></td><td><code>build/pkgs/mathics/SPKG.rst: Fix title</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51eb3059889f68e9f614da7f231e31ef6bca44f3\"><code>51eb305</code></a></td><td><code>build/bin/sage-spkg-info: Fix rst label</code></td></tr></table>\n",
    "created_at": "2022-05-15T04:11:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547652",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e5162aa5a1624de66b543d7665b4054318b3f8f"><code>0e5162a</code></a></td><td><code>build/pkgs/mathics/SPKG.rst: Fix title</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51eb3059889f68e9f614da7f231e31ef6bca44f3"><code>51eb305</code></a></td><td><code>build/bin/sage-spkg-info: Fix rst label</code></td></tr></table>




---

archive/issue_comments_547653.json:
```json
{
    "body": "Changed commit from **[`2d12c0b`](https://github.com/sagemath/sagetrac-mirror/commit/2d12c0b68e14a6fde9fd2929628b7314dd47badc)** to **[`51eb305`](https://github.com/sagemath/sagetrac-mirror/commit/51eb3059889f68e9f614da7f231e31ef6bca44f3)**",
    "created_at": "2022-05-15T04:11:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547653",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2d12c0b`](https://github.com/sagemath/sagetrac-mirror/commit/2d12c0b68e14a6fde9fd2929628b7314dd47badc)** to **[`51eb305`](https://github.com/sagemath/sagetrac-mirror/commit/51eb3059889f68e9f614da7f231e31ef6bca44f3)**



---

archive/issue_comments_547654.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-05-15T04:15:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547654",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_547655.json:
```json
{
    "body": "Changed commit from **[`51eb305`](https://github.com/sagemath/sagetrac-mirror/commit/51eb3059889f68e9f614da7f231e31ef6bca44f3)** to **[`67c8238`](https://github.com/sagemath/sagetrac-mirror/commit/67c8238c067ffb62f17a7e338dab57bc7d24ce70)**",
    "created_at": "2022-05-15T04:15:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547655",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`51eb305`](https://github.com/sagemath/sagetrac-mirror/commit/51eb3059889f68e9f614da7f231e31ef6bca44f3)** to **[`67c8238`](https://github.com/sagemath/sagetrac-mirror/commit/67c8238c067ffb62f17a7e338dab57bc7d24ce70)**



---

archive/issue_comments_547656.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI found it a bit hard to figure out what came from #33740 and what is this ticket :(\n\nOnce I get past that issue, I agree with the changes. It is much cleaner and simpler. May not go far enough from a sage-on-gentoo point of view (I will still patch but we had that discussion `sage --docbuild` vs `python -m sage_docbuild` somewhere else and that step is not ready yet). Just one remark, all the targets are phony in `src/doc/Makefile` by necessity but we could have had `en/reference/repl/options.txt` as a real target instead of a phony one, not that it matter much in that sea of stuff that rebuild every time you call make.",
    "created_at": "2022-05-26T20:11:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547656",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:17" align="right">comment:17</div>

I found it a bit hard to figure out what came from #33740 and what is this ticket :(

Once I get past that issue, I agree with the changes. It is much cleaner and simpler. May not go far enough from a sage-on-gentoo point of view (I will still patch but we had that discussion `sage --docbuild` vs `python -m sage_docbuild` somewhere else and that step is not ready yet). Just one remark, all the targets are phony in `src/doc/Makefile` by necessity but we could have had `en/reference/repl/options.txt` as a real target instead of a phony one, not that it matter much in that sea of stuff that rebuild every time you call make.



---

archive/issue_comments_547657.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@kiwifb](#comment:17):\n> we could have had `en/reference/repl/options.txt` as a real target instead of a phony one\n\nYes but what would be its dependencies?",
    "created_at": "2022-05-26T20:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547657",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@kiwifb](#comment:17):
> we could have had `en/reference/repl/options.txt` as a real target instead of a phony one

Yes but what would be its dependencies?



---

archive/issue_comments_547658.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@mkoeppe](#comment:18):\n> Replying to [@kiwifb](#comment:17):\n> > we could have had `en/reference/repl/options.txt` as a real target instead of a phony one\n\n> \n> Yes but what would be its dependencies?\n\nI am not sure I follow. It doesn't need to have dependencies or have I forgotten something fundamental about makefiles.",
    "created_at": "2022-05-26T20:22:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547658",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@mkoeppe](#comment:18):
> Replying to [@kiwifb](#comment:17):
> > we could have had `en/reference/repl/options.txt` as a real target instead of a phony one

> 
> Yes but what would be its dependencies?

I am not sure I follow. It doesn't need to have dependencies or have I forgotten something fundamental about makefiles.



---

archive/issue_comments_547659.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nIn that case it would never be updated, which can't be right",
    "created_at": "2022-05-26T20:28:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547659",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

In that case it would never be updated, which can't be right



---

archive/issue_comments_547660.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@mkoeppe](#comment:20):\n> In that case it would never be updated, which can't be right\n\nThank you for reminding me of some essentials :) I'd like to brush it off as it being too early in the morning to make a proper comment but I think that's just part of a pattern where I am too deep on the packager side, and thinking of workflow in which ultimately, makefile such as this one are \"single use\", and when something doesn't work you just restart from the top because you need the flow to be right. I am not spending enough time on the pure dev side, that's what",
    "created_at": "2022-05-26T20:58:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547660",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@mkoeppe](#comment:20):
> In that case it would never be updated, which can't be right

Thank you for reminding me of some essentials :) I'd like to brush it off as it being too early in the morning to make a proper comment but I think that's just part of a pattern where I am too deep on the packager side, and thinking of workflow in which ultimately, makefile such as this one are "single use", and when something doesn't work you just restart from the top because you need the flow to be right. I am not spending enough time on the pure dev side, that's what



---

archive/issue_comments_547661.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI think this looks okay, too. Fran\u00e7ois, do you agree with a positive review?",
    "created_at": "2022-05-27T18:42:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547661",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:22" align="right">comment:22</div>

I think this looks okay, too. François, do you agree with a positive review?



---

archive/issue_comments_547662.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nYes, let's get it in the next beta.",
    "created_at": "2022-05-27T20:13:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547662",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:23" align="right">comment:23</div>

Yes, let's get it in the next beta.



---

archive/issue_events_464295.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-05-28T15:07:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33852#event-464295"
}
```



---

archive/issue_events_464296.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-05-28T15:07:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33852#event-464296"
}
```



---

archive/issue_comments_547663.json:
```json
{
    "body": "Reviewer: **John Palmieri, Fran\u00e7ois Bissey**",
    "created_at": "2022-05-28T15:07:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547663",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri, François Bissey**



---

archive/issue_comments_547664.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThanks!",
    "created_at": "2022-05-28T17:24:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547664",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Thanks!



---

archive/issue_comments_547665.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/bootstrap__remove_use_of_the_sage_root_sage_script](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/bootstrap__remove_use_of_the_sage_root_sage_script)** to **[`67c8238`](https://github.com/sagemath/sagetrac-mirror/commit/67c8238c067ffb62f17a7e338dab57bc7d24ce70)**",
    "created_at": "2022-06-06T21:24:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33852#issuecomment-547665",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/bootstrap__remove_use_of_the_sage_root_sage_script](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/bootstrap__remove_use_of_the_sage_root_sage_script)** to **[`67c8238`](https://github.com/sagemath/sagetrac-mirror/commit/67c8238c067ffb62f17a7e338dab57bc7d24ce70)**



---

archive/issue_events_464297.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-06-06T21:24:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33852#event-464297"
}
```



---

archive/issue_events_464298.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "2537707a5f8c1ea7a224bd4cdd23a3cde6a88c89",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-06-06T21:24:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33852",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33852#event-464298"
}
```
