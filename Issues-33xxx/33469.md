# Issue 33469: %matplotlib widget does not work in the scope of %display latex

archive/issues_033232.json:
```json
{
    "assignees": [],
    "body": "The magic `%matplotlib widget`, which provides interactive Matplotlib display via the package [ipympl](https://github.com/matplotlib/ipympl) introduced in #32069, is inoperative in the scope of `%display latex`: \nin a Jupyter notebook the cell\n\n```\n%display latex\n%matplotlib widget\nimport matplotlib.pyplot as plt\nplt.plot([1, 2, 3, 4])\nplt.ylabel('some numbers')\nplt.show()\n```\nresults in the raw output\n\n```\n\ud835\ude72\ud835\ude8a\ud835\ude97\ud835\ude9f\ud835\ude8a\ud835\ude9c(\ud835\ude9d\ud835\ude98\ud835\ude98\ud835\ude95\ud835\ude8b\ud835\ude8a\ud835\ude9b=\ud835\ude83\ud835\ude98\ud835\ude98\ud835\ude95\ud835\ude8b\ud835\ude8a\ud835\ude9b(\ud835\ude9d\ud835\ude98\ud835\ude98\ud835\ude95\ud835\ude92\ud835\ude9d\ud835\ude8e\ud835\ude96\ud835\ude9c=[('\ud835\ude77\ud835\ude98\ud835\ude96\ud835\ude8e', '\ud835\ude81\ud835\ude8e\ud835\ude9c\ud835\ude8e\ud835\ude9d \ud835\ude98\ud835\ude9b\ud835\ude92\ud835\ude90\ud835\ude92\ud835\ude97\ud835\ude8a\ud835\ude95 \ud835\ude9f\ud835\ude92\ud835\ude8e\ud835\udea0', '\ud835\ude91\ud835\ude98\ud835\ude96\ud835\ude8e', '\ud835\ude91\ud835\ude98\ud835\ude96\ud835\ude8e'), ('\ud835\ude71\ud835\ude8a\ud835\ude8c\ud835\ude94', '\ud835\ude71\ud835\ude8a\ud835\ude8c\ud835\ude94 \ud835\ude9d\ud835\ude98 \ud835\ude99\ud835\ude9b\ud835\ude8e\ud835\ude9f\ud835\ude92\ud835\ude98\ud835\ude9e\ud835\ude9c \ud835\ude9f\ud835\ude92\ud835\ude8e\ud835\udea0', '\ud835\ude8a\ud835\ude9b\ud835\ude9b\ud835\ude98\ud835\udea0\u23af\ud835\ude95\ud835\ude8e\ud835\ude8f\ud835\ude9d', '\ud835\ude8b\ud835\ude8a\ud835\ude8c\ud835\ude94'), ('\ud835\ude75\ud835\ude98\ud835\ude9b\ud835\udea0\ud835\ude8a\ud835\ude9b\ud835\ude8d', '\ud835\ude75\ud835\ude98\ud835\ude9b\ud835\udea0\ud835\ude8a\ud835\ude9b\ud835\ude8d \ud835\ude9d\ud835\ude98 \ud835\ude97\ud835\ude8e\ud835\udea1\ud835\ude9d \ud835\ude9f\ud835\ude92\ud835\ude8e\ud835\udea0', '\ud835\ude8a\ud835\ude9b\ud835\ude9b\ud835\ude98\ud835\udea0\u23af\ud835\ude9b\ud835\ude92\ud835\ude90\ud835\ude91\ud835\ude9d', '\ud835\ude8f\ud835\ude98\ud835\ude9b\ud835\udea0\ud835\ude8a\ud835\ude9b\ud835\ude8d'), ('\ud835\ude7f\ud835\ude8a\ud835\ude97', '\ud835\ude7b\ud835\ude8e\ud835\ude8f\ud835\ude9d \ud835\ude8b\ud835\ude9e\ud835\ude9d\ud835\ude9d\ud835\ude98\ud835\ude97 \ud835\ude99\ud835\ude8a\ud835\ude97\ud835\ude9c, \ud835\ude81\ud835\ude92\ud835\ude90\ud835\ude91\ud835\ude9d \ud835\ude8b\ud835\ude9e\ud835\ude9d\ud835\ude9d\ud835\ude98\ud835\ude97 \ud835\udea3\ud835\ude98\ud835\ude98\ud835\ude96\ud835\ude9c\\\ud835\ude97\ud835\udea1/\ud835\udea2 \ud835\ude8f\ud835\ude92\ud835\udea1\ud835\ude8e\ud835\ude9c \ud835\ude8a\ud835\udea1\ud835\ude92\ud835\ude9c, \ud835\ude72\ud835\ude83\ud835\ude81\ud835\ude7b \ud835\ude8f\ud835\ude92\ud835\udea1\ud835\ude8e\ud835\ude9c \ud835\ude8a\ud835\ude9c\ud835\ude99\ud835\ude8e\ud835\ude8c\ud835\ude9d', '\ud835\ude8a\ud835\ude9b\ud835\ude9b\ud835\ude98\ud835\udea0\ud835\ude9c', '\ud835\ude99\ud835\ude8a\ud835\ude97'), ('\ud835\ude89\ud835\ude98\ud835\ude98\ud835\ude96', '\ud835\ude89\ud835\ude98\ud835\ude98\ud835\ude96 \ud835\ude9d\ud835\ude98 \ud835\ude9b\ud835\ude8e\ud835\ude8c\ud835\ude9d\ud835\ude8a\ud835\ude97\ud835\ude90\ud835\ude95\ud835\ude8e\\\ud835\ude97\ud835\udea1/\ud835\udea2 \ud835\ude8f\ud835\ude92\ud835\udea1\ud835\ude8e\ud835\ude9c \ud835\ude8a\ud835\udea1\ud835\ude92\ud835\ude9c', '\ud835\ude9c\ud835\ude9a\ud835\ude9e\ud835\ude8a\ud835\ude9b\ud835\ude8e\u23af\ud835\ude98', '\ud835\udea3\ud835\ude98\ud835\ude98\ud835\ude96'), ('\ud835\ude73\ud835\ude98\ud835\udea0\ud835\ude97\ud835\ude95\ud835\ude98\ud835\ude8a\ud835\ude8d', '\ud835\ude73\ud835\ude98\ud835\udea0\ud835\ude97\ud835\ude95\ud835\ude98\ud835\ude8a\ud835\ude8d \ud835\ude99\ud835\ude95\ud835\ude98\ud835\ude9d', '\ud835\ude8f\ud835\ude95\ud835\ude98\ud835\ude99\ud835\ude99\ud835\udea2\u23af\ud835\ude98', '\ud835\ude9c\ud835\ude8a\ud835\ude9f\ud835\ude8e\u23af\ud835\ude8f\ud835\ude92\ud835\ude90\ud835\ude9e\ud835\ude9b\ud835\ude8e')]))\n```\ninstead of the interactive Matplotlib window. Replacing `%display latex` by `%display plain` makes the cell work fine.\nSee also the test notebook below.  \n\nThis is problematic for Jupyterlab, where the magic `%matplotlib notebook` is not supported and must be replaced by `%matplotlib widget`. \n\n---\n\nNotebook for testing display in Jupyter:\n\n \n [test_display.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display.ipynb).\n\nNote that it lies in a git repository, so feel free to amend it by sending a pull request to [SageMathTest](https://github.com/egourgoulhon/SageMathTest). \n\n\nDepends on #32069\n\nCC:  @kwankyu\n\nKeywords: **jupyterlab, matplotlib widget**\n\nBranch/Commit: **[`d8dd0db`](https://github.com/sagemath/sagetrac-mirror/commit/d8dd0db6a76a769519b2d7b934e63105cd9e3142)**\n\nReviewer: **Eric Gourgoulhon, Kwankyu Lee**\n\nAuthor: **Nicolas M. Thi\u00e9ry**\n\nComponent: **notebook**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33469_\n\n",
    "closed_at": "2022-03-30T22:33:05Z",
    "created_at": "2022-03-06T10:31:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "%matplotlib widget does not work in the scope of %display latex",
    "type": "issue",
    "updated_at": "2022-03-30T22:33:05Z",
    "url": "https://github.com/sagemath/sage/issues/33469",
    "user": "https://github.com/egourgoulhon"
}
```
The magic `%matplotlib widget`, which provides interactive Matplotlib display via the package [ipympl](https://github.com/matplotlib/ipympl) introduced in #32069, is inoperative in the scope of `%display latex`: 
in a Jupyter notebook the cell

```
%display latex
%matplotlib widget
import matplotlib.pyplot as plt
plt.plot([1, 2, 3, 4])
plt.ylabel('some numbers')
plt.show()
```
results in the raw output

```
𝙲𝚊𝚗𝚟𝚊𝚜(𝚝𝚘𝚘𝚕𝚋𝚊𝚛=𝚃𝚘𝚘𝚕𝚋𝚊𝚛(𝚝𝚘𝚘𝚕𝚒𝚝𝚎𝚖𝚜=[('𝙷𝚘𝚖𝚎', '𝚁𝚎𝚜𝚎𝚝 𝚘𝚛𝚒𝚐𝚒𝚗𝚊𝚕 𝚟𝚒𝚎𝚠', '𝚑𝚘𝚖𝚎', '𝚑𝚘𝚖𝚎'), ('𝙱𝚊𝚌𝚔', '𝙱𝚊𝚌𝚔 𝚝𝚘 𝚙𝚛𝚎𝚟𝚒𝚘𝚞𝚜 𝚟𝚒𝚎𝚠', '𝚊𝚛𝚛𝚘𝚠⎯𝚕𝚎𝚏𝚝', '𝚋𝚊𝚌𝚔'), ('𝙵𝚘𝚛𝚠𝚊𝚛𝚍', '𝙵𝚘𝚛𝚠𝚊𝚛𝚍 𝚝𝚘 𝚗𝚎𝚡𝚝 𝚟𝚒𝚎𝚠', '𝚊𝚛𝚛𝚘𝚠⎯𝚛𝚒𝚐𝚑𝚝', '𝚏𝚘𝚛𝚠𝚊𝚛𝚍'), ('𝙿𝚊𝚗', '𝙻𝚎𝚏𝚝 𝚋𝚞𝚝𝚝𝚘𝚗 𝚙𝚊𝚗𝚜, 𝚁𝚒𝚐𝚑𝚝 𝚋𝚞𝚝𝚝𝚘𝚗 𝚣𝚘𝚘𝚖𝚜\𝚗𝚡/𝚢 𝚏𝚒𝚡𝚎𝚜 𝚊𝚡𝚒𝚜, 𝙲𝚃𝚁𝙻 𝚏𝚒𝚡𝚎𝚜 𝚊𝚜𝚙𝚎𝚌𝚝', '𝚊𝚛𝚛𝚘𝚠𝚜', '𝚙𝚊𝚗'), ('𝚉𝚘𝚘𝚖', '𝚉𝚘𝚘𝚖 𝚝𝚘 𝚛𝚎𝚌𝚝𝚊𝚗𝚐𝚕𝚎\𝚗𝚡/𝚢 𝚏𝚒𝚡𝚎𝚜 𝚊𝚡𝚒𝚜', '𝚜𝚚𝚞𝚊𝚛𝚎⎯𝚘', '𝚣𝚘𝚘𝚖'), ('𝙳𝚘𝚠𝚗𝚕𝚘𝚊𝚍', '𝙳𝚘𝚠𝚗𝚕𝚘𝚊𝚍 𝚙𝚕𝚘𝚝', '𝚏𝚕𝚘𝚙𝚙𝚢⎯𝚘', '𝚜𝚊𝚟𝚎⎯𝚏𝚒𝚐𝚞𝚛𝚎')]))
```
instead of the interactive Matplotlib window. Replacing `%display latex` by `%display plain` makes the cell work fine.
See also the test notebook below.  

This is problematic for Jupyterlab, where the magic `%matplotlib notebook` is not supported and must be replaced by `%matplotlib widget`. 

---

Notebook for testing display in Jupyter:

 
 [test_display.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display.ipynb).

Note that it lies in a git repository, so feel free to amend it by sending a pull request to [SageMathTest](https://github.com/egourgoulhon/SageMathTest). 


Depends on #32069

CC:  @kwankyu

Keywords: **jupyterlab, matplotlib widget**

Branch/Commit: **[`d8dd0db`](https://github.com/sagemath/sagetrac-mirror/commit/d8dd0db6a76a769519b2d7b934e63105cd9e3142)**

Reviewer: **Eric Gourgoulhon, Kwankyu Lee**

Author: **Nicolas M. Thiéry**

Component: **notebook**

_Issue created by migration from https://trac.sagemath.org/ticket/33469_





---

archive/issue_events_456484.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-06T10:31:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33469#event-456484"
}
```



---

archive/issue_events_456485.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-06T10:31:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
    "label_color": "0000b0",
    "label_name": "c: user interface",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33469#event-456485"
}
```



---

archive/issue_events_456486.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-06T10:31:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33469#event-456486"
}
```



---

archive/issue_events_456487.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-06T10:31:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33469#event-456487"
}
```



---

archive/issue_comments_540625.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,7 +14,7 @@\n ```\n \ud835\ude72\ud835\ude8a\ud835\ude97\ud835\ude9f\ud835\ude8a\ud835\ude9c(\ud835\ude9d\ud835\ude98\ud835\ude98\ud835\ude95\ud835\ude8b\ud835\ude8a\ud835\ude9b=\ud835\ude83\ud835\ude98\ud835\ude98\ud835\ude95\ud835\ude8b\ud835\ude8a\ud835\ude9b(\ud835\ude9d\ud835\ude98\ud835\ude98\ud835\ude95\ud835\ude92\ud835\ude9d\ud835\ude8e\ud835\ude96\ud835\ude9c=[('\ud835\ude77\ud835\ude98\ud835\ude96\ud835\ude8e', '\ud835\ude81\ud835\ude8e\ud835\ude9c\ud835\ude8e\ud835\ude9d \ud835\ude98\ud835\ude9b\ud835\ude92\ud835\ude90\ud835\ude92\ud835\ude97\ud835\ude8a\ud835\ude95 \ud835\ude9f\ud835\ude92\ud835\ude8e\ud835\udea0', '\ud835\ude91\ud835\ude98\ud835\ude96\ud835\ude8e', '\ud835\ude91\ud835\ude98\ud835\ude96\ud835\ude8e'), ('\ud835\ude71\ud835\ude8a\ud835\ude8c\ud835\ude94', '\ud835\ude71\ud835\ude8a\ud835\ude8c\ud835\ude94 \ud835\ude9d\ud835\ude98 \ud835\ude99\ud835\ude9b\ud835\ude8e\ud835\ude9f\ud835\ude92\ud835\ude98\ud835\ude9e\ud835\ude9c \ud835\ude9f\ud835\ude92\ud835\ude8e\ud835\udea0', '\ud835\ude8a\ud835\ude9b\ud835\ude9b\ud835\ude98\ud835\udea0\u23af\ud835\ude95\ud835\ude8e\ud835\ude8f\ud835\ude9d', '\ud835\ude8b\ud835\ude8a\ud835\ude8c\ud835\ude94'), ('\ud835\ude75\ud835\ude98\ud835\ude9b\ud835\udea0\ud835\ude8a\ud835\ude9b\ud835\ude8d', '\ud835\ude75\ud835\ude98\ud835\ude9b\ud835\udea0\ud835\ude8a\ud835\ude9b\ud835\ude8d \ud835\ude9d\ud835\ude98 \ud835\ude97\ud835\ude8e\ud835\udea1\ud835\ude9d \ud835\ude9f\ud835\ude92\ud835\ude8e\ud835\udea0', '\ud835\ude8a\ud835\ude9b\ud835\ude9b\ud835\ude98\ud835\udea0\u23af\ud835\ude9b\ud835\ude92\ud835\ude90\ud835\ude91\ud835\ude9d', '\ud835\ude8f\ud835\ude98\ud835\ude9b\ud835\udea0\ud835\ude8a\ud835\ude9b\ud835\ude8d'), ('\ud835\ude7f\ud835\ude8a\ud835\ude97', '\ud835\ude7b\ud835\ude8e\ud835\ude8f\ud835\ude9d \ud835\ude8b\ud835\ude9e\ud835\ude9d\ud835\ude9d\ud835\ude98\ud835\ude97 \ud835\ude99\ud835\ude8a\ud835\ude97\ud835\ude9c, \ud835\ude81\ud835\ude92\ud835\ude90\ud835\ude91\ud835\ude9d \ud835\ude8b\ud835\ude9e\ud835\ude9d\ud835\ude9d\ud835\ude98\ud835\ude97 \ud835\udea3\ud835\ude98\ud835\ude98\ud835\ude96\ud835\ude9c\\\ud835\ude97\ud835\udea1/\ud835\udea2 \ud835\ude8f\ud835\ude92\ud835\udea1\ud835\ude8e\ud835\ude9c \ud835\ude8a\ud835\udea1\ud835\ude92\ud835\ude9c, \ud835\ude72\ud835\ude83\ud835\ude81\ud835\ude7b \ud835\ude8f\ud835\ude92\ud835\udea1\ud835\ude8e\ud835\ude9c \ud835\ude8a\ud835\ude9c\ud835\ude99\ud835\ude8e\ud835\ude8c\ud835\ude9d', '\ud835\ude8a\ud835\ude9b\ud835\ude9b\ud835\ude98\ud835\udea0\ud835\ude9c', '\ud835\ude99\ud835\ude8a\ud835\ude97'), ('\ud835\ude89\ud835\ude98\ud835\ude98\ud835\ude96', '\ud835\ude89\ud835\ude98\ud835\ude98\ud835\ude96 \ud835\ude9d\ud835\ude98 \ud835\ude9b\ud835\ude8e\ud835\ude8c\ud835\ude9d\ud835\ude8a\ud835\ude97\ud835\ude90\ud835\ude95\ud835\ude8e\\\ud835\ude97\ud835\udea1/\ud835\udea2 \ud835\ude8f\ud835\ude92\ud835\udea1\ud835\ude8e\ud835\ude9c \ud835\ude8a\ud835\udea1\ud835\ude92\ud835\ude9c', '\ud835\ude9c\ud835\ude9a\ud835\ude9e\ud835\ude8a\ud835\ude9b\ud835\ude8e\u23af\ud835\ude98', '\ud835\udea3\ud835\ude98\ud835\ude98\ud835\ude96'), ('\ud835\ude73\ud835\ude98\ud835\udea0\ud835\ude97\ud835\ude95\ud835\ude98\ud835\ude8a\ud835\ude8d', '\ud835\ude73\ud835\ude98\ud835\udea0\ud835\ude97\ud835\ude95\ud835\ude98\ud835\ude8a\ud835\ude8d \ud835\ude99\ud835\ude95\ud835\ude98\ud835\ude9d', '\ud835\ude8f\ud835\ude95\ud835\ude98\ud835\ude99\ud835\ude99\ud835\udea2\u23af\ud835\ude98', '\ud835\ude9c\ud835\ude8a\ud835\ude9f\ud835\ude8e\u23af\ud835\ude8f\ud835\ude92\ud835\ude90\ud835\ude9e\ud835\ude9b\ud835\ude8e')]))\n ```\n-instead of the interactive Matplotlib window\n+instead of the interactive Matplotlib window. Replacing `%display latex` by `%display plain` makes the cell work fine.\n See also this [test notebook](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display_latex.ipynb?flush). \n \n This is problematic for Jupyterlab, where the magic `%matplotlib notebook` is not supported and must be replaced by `%matplotlib widget`. \n``````\n",
    "created_at": "2022-03-06T10:38:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540625",
    "user": "https://github.com/egourgoulhon"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,7 +14,7 @@
 ```
 𝙲𝚊𝚗𝚟𝚊𝚜(𝚝𝚘𝚘𝚕𝚋𝚊𝚛=𝚃𝚘𝚘𝚕𝚋𝚊𝚛(𝚝𝚘𝚘𝚕𝚒𝚝𝚎𝚖𝚜=[('𝙷𝚘𝚖𝚎', '𝚁𝚎𝚜𝚎𝚝 𝚘𝚛𝚒𝚐𝚒𝚗𝚊𝚕 𝚟𝚒𝚎𝚠', '𝚑𝚘𝚖𝚎', '𝚑𝚘𝚖𝚎'), ('𝙱𝚊𝚌𝚔', '𝙱𝚊𝚌𝚔 𝚝𝚘 𝚙𝚛𝚎𝚟𝚒𝚘𝚞𝚜 𝚟𝚒𝚎𝚠', '𝚊𝚛𝚛𝚘𝚠⎯𝚕𝚎𝚏𝚝', '𝚋𝚊𝚌𝚔'), ('𝙵𝚘𝚛𝚠𝚊𝚛𝚍', '𝙵𝚘𝚛𝚠𝚊𝚛𝚍 𝚝𝚘 𝚗𝚎𝚡𝚝 𝚟𝚒𝚎𝚠', '𝚊𝚛𝚛𝚘𝚠⎯𝚛𝚒𝚐𝚑𝚝', '𝚏𝚘𝚛𝚠𝚊𝚛𝚍'), ('𝙿𝚊𝚗', '𝙻𝚎𝚏𝚝 𝚋𝚞𝚝𝚝𝚘𝚗 𝚙𝚊𝚗𝚜, 𝚁𝚒𝚐𝚑𝚝 𝚋𝚞𝚝𝚝𝚘𝚗 𝚣𝚘𝚘𝚖𝚜\𝚗𝚡/𝚢 𝚏𝚒𝚡𝚎𝚜 𝚊𝚡𝚒𝚜, 𝙲𝚃𝚁𝙻 𝚏𝚒𝚡𝚎𝚜 𝚊𝚜𝚙𝚎𝚌𝚝', '𝚊𝚛𝚛𝚘𝚠𝚜', '𝚙𝚊𝚗'), ('𝚉𝚘𝚘𝚖', '𝚉𝚘𝚘𝚖 𝚝𝚘 𝚛𝚎𝚌𝚝𝚊𝚗𝚐𝚕𝚎\𝚗𝚡/𝚢 𝚏𝚒𝚡𝚎𝚜 𝚊𝚡𝚒𝚜', '𝚜𝚚𝚞𝚊𝚛𝚎⎯𝚘', '𝚣𝚘𝚘𝚖'), ('𝙳𝚘𝚠𝚗𝚕𝚘𝚊𝚍', '𝙳𝚘𝚠𝚗𝚕𝚘𝚊𝚍 𝚙𝚕𝚘𝚝', '𝚏𝚕𝚘𝚙𝚙𝚢⎯𝚘', '𝚜𝚊𝚟𝚎⎯𝚏𝚒𝚐𝚞𝚛𝚎')]))
 ```
-instead of the interactive Matplotlib window
+instead of the interactive Matplotlib window. Replacing `%display latex` by `%display plain` makes the cell work fine.
 See also this [test notebook](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display_latex.ipynb?flush). 
 
 This is problematic for Jupyterlab, where the magic `%matplotlib notebook` is not supported and must be replaced by `%matplotlib widget`. 
``````




---

archive/issue_comments_540626.json:
```json
{
    "body": "Changed keywords from none to **jupyterlab, matplotlib widget**",
    "created_at": "2022-03-06T10:49:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540626",
    "user": "https://github.com/egourgoulhon"
}
```

Changed keywords from none to **jupyterlab, matplotlib widget**



---

archive/issue_comments_540627.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI hit presumably the same problem this morning in class with\nstudents that wanted to build widgets in Sage.\n\n# How to reproduce\n\n```\n%display latex\nimport ipywidgets\nipywidgets.IntSlider()\n```\noutputs a string representation instead of the slider:\n\n```\n\ud835\ude78\ud835\ude97\ud835\ude9d\ud835\ude82\ud835\ude95\ud835\ude92\ud835\ude8d\ud835\ude8e\ud835\ude9b(\ud835\ude9f\ud835\ude8a\ud835\ude95\ud835\ude9e\ud835\ude8e=\ud835\udff6)\n```\n\n# Proposed fix\n\nSage's formatter has a list of \"Python native types\"\nthat should be left alone during display. This list contains\n`interactive`, the type of objects produced by `@interact`. This\ncould be generalized to any jupyter widget (type `ipywigets.Widget`),\nwhich should include the widgets produced by ipyml.\n\n# Temporary workaround\n\nApply the proposed fix by monkey patching:\n\n```\nsage.repl.display.formatter.IPYTHON_NATIVE_TYPES += (ipywidgets.Widget,)\n```",
    "created_at": "2022-03-09T11:14:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540627",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:3" align="right">comment:3</div>

I hit presumably the same problem this morning in class with
students that wanted to build widgets in Sage.

# How to reproduce

```
%display latex
import ipywidgets
ipywidgets.IntSlider()
```
outputs a string representation instead of the slider:

```
𝙸𝚗𝚝𝚂𝚕𝚒𝚍𝚎𝚛(𝚟𝚊𝚕𝚞𝚎=𝟶)
```

# Proposed fix

Sage's formatter has a list of "Python native types"
that should be left alone during display. This list contains
`interactive`, the type of objects produced by `@interact`. This
could be generalized to any jupyter widget (type `ipywigets.Widget`),
which should include the widgets produced by ipyml.

# Temporary workaround

Apply the proposed fix by monkey patching:

```
sage.repl.display.formatter.IPYTHON_NATIVE_TYPES += (ipywidgets.Widget,)
```



---

archive/issue_comments_540628.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nEric: does the workaround work for ipyml?\n\nCheers,",
    "created_at": "2022-03-09T11:18:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540628",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:4" align="right">comment:4</div>

Eric: does the workaround work for ipyml?

Cheers,



---

archive/issue_comments_540629.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@nthiery](#comment:4):\n> Eric: does the workaround work for ipyml?\n\n>\n\nYes, absolutely:\n\n```\nimport ipympl\nsage.repl.display.formatter.IPYTHON_NATIVE_TYPES += (ipympl.backend_nbagg.Canvas,)\n```\nfixes the issue. Thank you Nicolas!",
    "created_at": "2022-03-09T17:45:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540629",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@nthiery](#comment:4):
> Eric: does the workaround work for ipyml?

>

Yes, absolutely:

```
import ipympl
sage.repl.display.formatter.IPYTHON_NATIVE_TYPES += (ipympl.backend_nbagg.Canvas,)
```
fixes the issue. Thank you Nicolas!



---

archive/issue_comments_540630.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@egourgoulhon](#comment:5):\n> Replying to [@nthiery](#comment:4):\n> > Eric: does the workaround work for ipyml?\n\n> >\n\n> Yes, absolutely:\n> \n> ```\n> import ipympl\n> sage.repl.display.formatter.IPYTHON_NATIVE_TYPES += (ipympl.backend_nbagg.Canvas,)\n> ```\n> fixes the issue. Thank you Nicolas!\n\nActually, this specific addition is not even necessary: as you pointed out\n\n```\nimport ipywidgets\nsage.repl.display.formatter.IPYTHON_NATIVE_TYPES += (ipywidgets.Widget,)\n```\nis more generic and suffices to fix the issue with `ipympl`.",
    "created_at": "2022-03-09T17:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540630",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@egourgoulhon](#comment:5):
> Replying to [@nthiery](#comment:4):
> > Eric: does the workaround work for ipyml?

> >

> Yes, absolutely:
> 
> ```
> import ipympl
> sage.repl.display.formatter.IPYTHON_NATIVE_TYPES += (ipympl.backend_nbagg.Canvas,)
> ```
> fixes the issue. Thank you Nicolas!

Actually, this specific addition is not even necessary: as you pointed out

```
import ipywidgets
sage.repl.display.formatter.IPYTHON_NATIVE_TYPES += (ipywidgets.Widget,)
```
is more generic and suffices to fix the issue with `ipympl`.



---

archive/issue_comments_540631.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nGreat. So the next step is to implement the fix directly in Sage.\n\nI might not be able to do it in the next days, so anyone feel free\nto take the lead :-)",
    "created_at": "2022-03-09T17:59:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540631",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:7" align="right">comment:7</div>

Great. So the next step is to implement the fix directly in Sage.

I might not be able to do it in the next days, so anyone feel free
to take the lead :-)



---

archive/issue_comments_540632.json:
```json
{
    "body": "Branch: **[u/nthiery/_matplotlib_widget_does_not_work_in_the_scope_of__display_latex](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/_matplotlib_widget_does_not_work_in_the_scope_of__display_latex)**",
    "created_at": "2022-03-09T18:28:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540632",
    "user": "https://github.com/nthiery"
}
```

Branch: **[u/nthiery/_matplotlib_widget_does_not_work_in_the_scope_of__display_latex](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/_matplotlib_widget_does_not_work_in_the_scope_of__display_latex)**



---

archive/issue_comments_540633.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nMiracle: upgrading my sage was quick, and git trac still functional on my laptop.\nFirst submission in a loooong time ...\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d93b25b7f56a03721f32144cccf8852ef7828ab\"><code>7d93b25</code></a></td><td><code>33469: fix %display latex for all Jupyter widgets</code></td></tr></table>\n",
    "created_at": "2022-03-09T18:31:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540633",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:9" align="right">comment:9</div>

Miracle: upgrading my sage was quick, and git trac still functional on my laptop.
First submission in a loooong time ...

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d93b25b7f56a03721f32144cccf8852ef7828ab"><code>7d93b25</code></a></td><td><code>33469: fix %display latex for all Jupyter widgets</code></td></tr></table>




---

archive/issue_comments_540634.json:
```json
{
    "body": "Commit: **[`7d93b25`](https://github.com/sagemath/sagetrac-mirror/commit/7d93b25b7f56a03721f32144cccf8852ef7828ab)**",
    "created_at": "2022-03-09T18:31:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540634",
    "user": "https://github.com/nthiery"
}
```

Commit: **[`7d93b25`](https://github.com/sagemath/sagetrac-mirror/commit/7d93b25b7f56a03721f32144cccf8852ef7828ab)**



---

archive/issue_comments_540635.json:
```json
{
    "body": "Changed commit from **[`7d93b25`](https://github.com/sagemath/sagetrac-mirror/commit/7d93b25b7f56a03721f32144cccf8852ef7828ab)** to **[`d8dd0db`](https://github.com/sagemath/sagetrac-mirror/commit/d8dd0db6a76a769519b2d7b934e63105cd9e3142)**",
    "created_at": "2022-03-09T19:07:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540635",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7d93b25`](https://github.com/sagemath/sagetrac-mirror/commit/7d93b25b7f56a03721f32144cccf8852ef7828ab)** to **[`d8dd0db`](https://github.com/sagemath/sagetrac-mirror/commit/d8dd0db6a76a769519b2d7b934e63105cd9e3142)**



---

archive/issue_comments_540636.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8dd0db6a76a769519b2d7b934e63105cd9e3142\"><code>d8dd0db</code></a></td><td><code>33469: attempt at adding a test</code></td></tr></table>\n",
    "created_at": "2022-03-09T19:07:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540636",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8dd0db6a76a769519b2d7b934e63105cd9e3142"><code>d8dd0db</code></a></td><td><code>33469: attempt at adding a test</code></td></tr></table>




---

archive/issue_comments_540637.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWell, needs review I guess.\n\nI tried adding a test, but actually the test pass even before the patch.\nIdeas anyone for a better test?",
    "created_at": "2022-03-09T19:08:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540637",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:11" align="right">comment:11</div>

Well, needs review I guess.

I tried adding a test, but actually the test pass even before the patch.
Ideas anyone for a better test?



---

archive/issue_events_456488.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2022-03-09T19:08:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33469#event-456488"
}
```



---

archive/issue_comments_540638.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@nthiery](#comment:11):\n> I tried adding a test, but actually the test pass even before the patch.\n> Ideas anyone for a better test?\n\nI have no idea, either. But if the test does not test the patch, then I think it is of no use.\n\nOn the other hand, any change in the output system may cause unexpected side effects which are detected only by human eyes. It seems that the best we can do is to check a good many examples with the patch. There is another ticket #11362 that needs the same scrutiny.",
    "created_at": "2022-03-10T05:49:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540638",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@nthiery](#comment:11):
> I tried adding a test, but actually the test pass even before the patch.
> Ideas anyone for a better test?

I have no idea, either. But if the test does not test the patch, then I think it is of no use.

On the other hand, any change in the output system may cause unexpected side effects which are detected only by human eyes. It seems that the best we can do is to check a good many examples with the patch. There is another ticket #11362 that needs the same scrutiny.



---

archive/issue_comments_540639.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@kwankyu](#comment:12):\n> Replying to [@nthiery](#comment:11):\n> It seems that the best we can do is to check a good many examples with the patch. \n\n`@`Eric. I suggest making a \"standard proof sheet\" from the notebooks here\n\n[#32208 comment:13](https://github.com/sagemath/sage/issues/32208#comment:13)",
    "created_at": "2022-03-10T06:13:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540639",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@kwankyu](#comment:12):
> Replying to [@nthiery](#comment:11):
> It seems that the best we can do is to check a good many examples with the patch. 

`@`Eric. I suggest making a "standard proof sheet" from the notebooks here

[#32208 comment:13](https://github.com/sagemath/sage/issues/32208#comment:13)



---

archive/issue_comments_540640.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n> But if the test does not test the patch, then I think it is of no use.\n\nAgreed. I only included it to be precise about what I tried, in the\nhope someone would find something better. This commit should indeed\nbe reverted / popped before merging.",
    "created_at": "2022-03-10T07:23:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540640",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:14" align="right">comment:14</div>

> But if the test does not test the patch, then I think it is of no use.

Agreed. I only included it to be precise about what I tried, in the
hope someone would find something better. This commit should indeed
be reverted / popped before merging.



---

archive/issue_comments_540641.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@kwankyu](#comment:13):\n> \n> `@`Eric. I suggest making a \"standard proof sheet\" from the notebooks here\n> \n> [#32208 comment:13](https://github.com/sagemath/sage/issues/32208#comment:13)\n\nI've already updated [test_display_latex.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display_latex.ipynb), but I'll prepare a better one soon, including threejs animations and so on...",
    "created_at": "2022-03-10T09:34:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540641",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@kwankyu](#comment:13):
> 
> `@`Eric. I suggest making a "standard proof sheet" from the notebooks here
> 
> [#32208 comment:13](https://github.com/sagemath/sage/issues/32208#comment:13)

I've already updated [test_display_latex.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display_latex.ipynb), but I'll prepare a better one soon, including threejs animations and so on...



---

archive/issue_comments_540642.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@nthiery](#comment:14):\n> > But if the test does not test the patch, then I think it is of no use.\n\n> \n> Agreed. I only included it to be precise about what I tried, in the\n> hope someone would find something better. This commit should indeed\n> be reverted / popped before merging.\n\nI don't see any simple doctest either, so yes, maybe the best is to revert this.",
    "created_at": "2022-03-10T09:36:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540642",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@nthiery](#comment:14):
> > But if the test does not test the patch, then I think it is of no use.

> 
> Agreed. I only included it to be precise about what I tried, in the
> hope someone would find something better. This commit should indeed
> be reverted / popped before merging.

I don't see any simple doctest either, so yes, maybe the best is to revert this.



---

archive/issue_comments_540643.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@egourgoulhon](#comment:15):\n> Replying to [@kwankyu](#comment:13):\n> > \n> > `@`Eric. I suggest making a \"standard proof sheet\" from the notebooks here\n> > \n> > [#32208 comment:13](https://github.com/sagemath/sage/issues/32208#comment:13)\n\n> \n> I've already updated [test_display_latex.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display_latex.ipynb), but I'll prepare a better one soon, including threejs animations and so on...\n\nHere it is : [test_display.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display.ipynb).\nNote that it lies in a git repository, so feel free to amend it by sending a pull request to [SageMathTest](https://github.com/egourgoulhon/SageMathTest). \n\nIt would be nice to have this ticket merged in Sage 9.6. IMHO, it is ready to go. Simply maybe the test mentioned in [comment:11](#comment:11) could be removed, given that the actual test is the \"human-eyes\" one, e.g. via the above notebook.",
    "created_at": "2022-03-23T10:23:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540643",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@egourgoulhon](#comment:15):
> Replying to [@kwankyu](#comment:13):
> > 
> > `@`Eric. I suggest making a "standard proof sheet" from the notebooks here
> > 
> > [#32208 comment:13](https://github.com/sagemath/sage/issues/32208#comment:13)

> 
> I've already updated [test_display_latex.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display_latex.ipynb), but I'll prepare a better one soon, including threejs animations and so on...

Here it is : [test_display.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display.ipynb).
Note that it lies in a git repository, so feel free to amend it by sending a pull request to [SageMathTest](https://github.com/egourgoulhon/SageMathTest). 

It would be nice to have this ticket merged in Sage 9.6. IMHO, it is ready to go. Simply maybe the test mentioned in [comment:11](#comment:11) could be removed, given that the actual test is the "human-eyes" one, e.g. via the above notebook.



---

archive/issue_comments_540644.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,7 +15,16 @@\n \ud835\ude72\ud835\ude8a\ud835\ude97\ud835\ude9f\ud835\ude8a\ud835\ude9c(\ud835\ude9d\ud835\ude98\ud835\ude98\ud835\ude95\ud835\ude8b\ud835\ude8a\ud835\ude9b=\ud835\ude83\ud835\ude98\ud835\ude98\ud835\ude95\ud835\ude8b\ud835\ude8a\ud835\ude9b(\ud835\ude9d\ud835\ude98\ud835\ude98\ud835\ude95\ud835\ude92\ud835\ude9d\ud835\ude8e\ud835\ude96\ud835\ude9c=[('\ud835\ude77\ud835\ude98\ud835\ude96\ud835\ude8e', '\ud835\ude81\ud835\ude8e\ud835\ude9c\ud835\ude8e\ud835\ude9d \ud835\ude98\ud835\ude9b\ud835\ude92\ud835\ude90\ud835\ude92\ud835\ude97\ud835\ude8a\ud835\ude95 \ud835\ude9f\ud835\ude92\ud835\ude8e\ud835\udea0', '\ud835\ude91\ud835\ude98\ud835\ude96\ud835\ude8e', '\ud835\ude91\ud835\ude98\ud835\ude96\ud835\ude8e'), ('\ud835\ude71\ud835\ude8a\ud835\ude8c\ud835\ude94', '\ud835\ude71\ud835\ude8a\ud835\ude8c\ud835\ude94 \ud835\ude9d\ud835\ude98 \ud835\ude99\ud835\ude9b\ud835\ude8e\ud835\ude9f\ud835\ude92\ud835\ude98\ud835\ude9e\ud835\ude9c \ud835\ude9f\ud835\ude92\ud835\ude8e\ud835\udea0', '\ud835\ude8a\ud835\ude9b\ud835\ude9b\ud835\ude98\ud835\udea0\u23af\ud835\ude95\ud835\ude8e\ud835\ude8f\ud835\ude9d', '\ud835\ude8b\ud835\ude8a\ud835\ude8c\ud835\ude94'), ('\ud835\ude75\ud835\ude98\ud835\ude9b\ud835\udea0\ud835\ude8a\ud835\ude9b\ud835\ude8d', '\ud835\ude75\ud835\ude98\ud835\ude9b\ud835\udea0\ud835\ude8a\ud835\ude9b\ud835\ude8d \ud835\ude9d\ud835\ude98 \ud835\ude97\ud835\ude8e\ud835\udea1\ud835\ude9d \ud835\ude9f\ud835\ude92\ud835\ude8e\ud835\udea0', '\ud835\ude8a\ud835\ude9b\ud835\ude9b\ud835\ude98\ud835\udea0\u23af\ud835\ude9b\ud835\ude92\ud835\ude90\ud835\ude91\ud835\ude9d', '\ud835\ude8f\ud835\ude98\ud835\ude9b\ud835\udea0\ud835\ude8a\ud835\ude9b\ud835\ude8d'), ('\ud835\ude7f\ud835\ude8a\ud835\ude97', '\ud835\ude7b\ud835\ude8e\ud835\ude8f\ud835\ude9d \ud835\ude8b\ud835\ude9e\ud835\ude9d\ud835\ude9d\ud835\ude98\ud835\ude97 \ud835\ude99\ud835\ude8a\ud835\ude97\ud835\ude9c, \ud835\ude81\ud835\ude92\ud835\ude90\ud835\ude91\ud835\ude9d \ud835\ude8b\ud835\ude9e\ud835\ude9d\ud835\ude9d\ud835\ude98\ud835\ude97 \ud835\udea3\ud835\ude98\ud835\ude98\ud835\ude96\ud835\ude9c\\\ud835\ude97\ud835\udea1/\ud835\udea2 \ud835\ude8f\ud835\ude92\ud835\udea1\ud835\ude8e\ud835\ude9c \ud835\ude8a\ud835\udea1\ud835\ude92\ud835\ude9c, \ud835\ude72\ud835\ude83\ud835\ude81\ud835\ude7b \ud835\ude8f\ud835\ude92\ud835\udea1\ud835\ude8e\ud835\ude9c \ud835\ude8a\ud835\ude9c\ud835\ude99\ud835\ude8e\ud835\ude8c\ud835\ude9d', '\ud835\ude8a\ud835\ude9b\ud835\ude9b\ud835\ude98\ud835\udea0\ud835\ude9c', '\ud835\ude99\ud835\ude8a\ud835\ude97'), ('\ud835\ude89\ud835\ude98\ud835\ude98\ud835\ude96', '\ud835\ude89\ud835\ude98\ud835\ude98\ud835\ude96 \ud835\ude9d\ud835\ude98 \ud835\ude9b\ud835\ude8e\ud835\ude8c\ud835\ude9d\ud835\ude8a\ud835\ude97\ud835\ude90\ud835\ude95\ud835\ude8e\\\ud835\ude97\ud835\udea1/\ud835\udea2 \ud835\ude8f\ud835\ude92\ud835\udea1\ud835\ude8e\ud835\ude9c \ud835\ude8a\ud835\udea1\ud835\ude92\ud835\ude9c', '\ud835\ude9c\ud835\ude9a\ud835\ude9e\ud835\ude8a\ud835\ude9b\ud835\ude8e\u23af\ud835\ude98', '\ud835\udea3\ud835\ude98\ud835\ude98\ud835\ude96'), ('\ud835\ude73\ud835\ude98\ud835\udea0\ud835\ude97\ud835\ude95\ud835\ude98\ud835\ude8a\ud835\ude8d', '\ud835\ude73\ud835\ude98\ud835\udea0\ud835\ude97\ud835\ude95\ud835\ude98\ud835\ude8a\ud835\ude8d \ud835\ude99\ud835\ude95\ud835\ude98\ud835\ude9d', '\ud835\ude8f\ud835\ude95\ud835\ude98\ud835\ude99\ud835\ude99\ud835\udea2\u23af\ud835\ude98', '\ud835\ude9c\ud835\ude8a\ud835\ude9f\ud835\ude8e\u23af\ud835\ude8f\ud835\ude92\ud835\ude90\ud835\ude9e\ud835\ude9b\ud835\ude8e')]))\n ```\n instead of the interactive Matplotlib window. Replacing `%display latex` by `%display plain` makes the cell work fine.\n-See also this [test notebook](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display_latex.ipynb?flush). \n+See also the test notebook below.  \n \n This is problematic for Jupyterlab, where the magic `%matplotlib notebook` is not supported and must be replaced by `%matplotlib widget`. \n \n+---\n+\n+Notebook for testing display in Jupyter:\n+\n+ \n+ [test_display.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display.ipynb).\n+\n+Note that it lies in a git repository, so feel free to amend it by sending a pull request to [SageMathTest](https://github.com/egourgoulhon/SageMathTest). \n+\n``````\n",
    "created_at": "2022-03-23T12:15:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540644",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,7 +15,16 @@
 𝙲𝚊𝚗𝚟𝚊𝚜(𝚝𝚘𝚘𝚕𝚋𝚊𝚛=𝚃𝚘𝚘𝚕𝚋𝚊𝚛(𝚝𝚘𝚘𝚕𝚒𝚝𝚎𝚖𝚜=[('𝙷𝚘𝚖𝚎', '𝚁𝚎𝚜𝚎𝚝 𝚘𝚛𝚒𝚐𝚒𝚗𝚊𝚕 𝚟𝚒𝚎𝚠', '𝚑𝚘𝚖𝚎', '𝚑𝚘𝚖𝚎'), ('𝙱𝚊𝚌𝚔', '𝙱𝚊𝚌𝚔 𝚝𝚘 𝚙𝚛𝚎𝚟𝚒𝚘𝚞𝚜 𝚟𝚒𝚎𝚠', '𝚊𝚛𝚛𝚘𝚠⎯𝚕𝚎𝚏𝚝', '𝚋𝚊𝚌𝚔'), ('𝙵𝚘𝚛𝚠𝚊𝚛𝚍', '𝙵𝚘𝚛𝚠𝚊𝚛𝚍 𝚝𝚘 𝚗𝚎𝚡𝚝 𝚟𝚒𝚎𝚠', '𝚊𝚛𝚛𝚘𝚠⎯𝚛𝚒𝚐𝚑𝚝', '𝚏𝚘𝚛𝚠𝚊𝚛𝚍'), ('𝙿𝚊𝚗', '𝙻𝚎𝚏𝚝 𝚋𝚞𝚝𝚝𝚘𝚗 𝚙𝚊𝚗𝚜, 𝚁𝚒𝚐𝚑𝚝 𝚋𝚞𝚝𝚝𝚘𝚗 𝚣𝚘𝚘𝚖𝚜\𝚗𝚡/𝚢 𝚏𝚒𝚡𝚎𝚜 𝚊𝚡𝚒𝚜, 𝙲𝚃𝚁𝙻 𝚏𝚒𝚡𝚎𝚜 𝚊𝚜𝚙𝚎𝚌𝚝', '𝚊𝚛𝚛𝚘𝚠𝚜', '𝚙𝚊𝚗'), ('𝚉𝚘𝚘𝚖', '𝚉𝚘𝚘𝚖 𝚝𝚘 𝚛𝚎𝚌𝚝𝚊𝚗𝚐𝚕𝚎\𝚗𝚡/𝚢 𝚏𝚒𝚡𝚎𝚜 𝚊𝚡𝚒𝚜', '𝚜𝚚𝚞𝚊𝚛𝚎⎯𝚘', '𝚣𝚘𝚘𝚖'), ('𝙳𝚘𝚠𝚗𝚕𝚘𝚊𝚍', '𝙳𝚘𝚠𝚗𝚕𝚘𝚊𝚍 𝚙𝚕𝚘𝚝', '𝚏𝚕𝚘𝚙𝚙𝚢⎯𝚘', '𝚜𝚊𝚟𝚎⎯𝚏𝚒𝚐𝚞𝚛𝚎')]))
 ```
 instead of the interactive Matplotlib window. Replacing `%display latex` by `%display plain` makes the cell work fine.
-See also this [test notebook](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display_latex.ipynb?flush). 
+See also the test notebook below.  
 
 This is problematic for Jupyterlab, where the magic `%matplotlib notebook` is not supported and must be replaced by `%matplotlib widget`. 
 
+---
+
+Notebook for testing display in Jupyter:
+
+ 
+ [test_display.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display.ipynb).
+
+Note that it lies in a git repository, so feel free to amend it by sending a pull request to [SageMathTest](https://github.com/egourgoulhon/SageMathTest). 
+
``````




---

archive/issue_comments_540645.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@egourgoulhon](#comment:17):\n\n> It would be nice to have this ticket merged in Sage 9.6. IMHO, it is ready to go. Simply maybe the test mentioned in [comment:11](#comment:11) could be removed, given that the actual test is the \"human-eyes\" one, e.g. via the above notebook.\n\n+1 for positive review.",
    "created_at": "2022-03-23T12:15:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540645",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@egourgoulhon](#comment:17):

> It would be nice to have this ticket merged in Sage 9.6. IMHO, it is ready to go. Simply maybe the test mentioned in [comment:11](#comment:11) could be removed, given that the actual test is the "human-eyes" one, e.g. via the above notebook.

+1 for positive review.



---

archive/issue_comments_540646.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@egourgoulhon](#comment:17):\n> Here it is : [test_display.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display.ipynb)...\n\nThank you!",
    "created_at": "2022-03-23T12:16:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540646",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@egourgoulhon](#comment:17):
> Here it is : [test_display.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display.ipynb)...

Thank you!



---

archive/issue_comments_540647.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nOK, let's move on. Thank you Nicolas for the fix!",
    "created_at": "2022-03-25T09:46:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540647",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:20" align="right">comment:20</div>

OK, let's move on. Thank you Nicolas for the fix!



---

archive/issue_comments_540648.json:
```json
{
    "body": "Reviewer: **Eric Gourgoulhon, Kwankyu Lee**",
    "created_at": "2022-03-25T09:46:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540648",
    "user": "https://github.com/egourgoulhon"
}
```

Reviewer: **Eric Gourgoulhon, Kwankyu Lee**



---

archive/issue_events_456489.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-25T09:46:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33469#event-456489"
}
```



---

archive/issue_events_456490.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2022-03-25T09:46:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33469#event-456490"
}
```



---

archive/issue_comments_540649.json:
```json
{
    "body": "Author: **Nicolas M. Thi\u00e9ry**",
    "created_at": "2022-03-25T09:46:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540649",
    "user": "https://github.com/egourgoulhon"
}
```

Author: **Nicolas M. Thiéry**



---

archive/issue_comments_540650.json:
```json
{
    "body": "Changed branch from **[u/nthiery/_matplotlib_widget_does_not_work_in_the_scope_of__display_latex](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/_matplotlib_widget_does_not_work_in_the_scope_of__display_latex)** to **[`d8dd0db`](https://github.com/sagemath/sagetrac-mirror/commit/d8dd0db6a76a769519b2d7b934e63105cd9e3142)**",
    "created_at": "2022-03-30T22:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33469#issuecomment-540650",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/nthiery/_matplotlib_widget_does_not_work_in_the_scope_of__display_latex](https://github.com/sagemath/sagetrac-mirror/tree/u/nthiery/_matplotlib_widget_does_not_work_in_the_scope_of__display_latex)** to **[`d8dd0db`](https://github.com/sagemath/sagetrac-mirror/commit/d8dd0db6a76a769519b2d7b934e63105cd9e3142)**



---

archive/issue_events_456491.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-30T22:33:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33469#event-456491"
}
```



---

archive/issue_events_456492.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e3fce642a0c2d81f9196ea76444cb58b4afd6b81",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-03-30T22:33:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33469",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33469#event-456492"
}
```
