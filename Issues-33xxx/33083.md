# Issue 33083: alpine linux: Add system package information / tox.ini, fix flint, giac, cvxopt

archive/issues_032846.json:
```json
{
    "body": "To test: `tox -e docker-alpine-standard`\n\n\n**CC:**  @dimpase @slel @frederichan-IMJPRG parisse @dkwo @tornaria @orlitzky\n\n**Branch:** [u/mkoeppe/system_package_information___tox_ini___gh_actions_for_alpine_linux](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/system_package_information___tox_ini___gh_actions_for_alpine_linux)\n\n**Commit:** [f453452abbc5f61a5eb0c0a98f52d22b7ae1206a](https://github.com/sagemath/sagetrac-mirror/commit/f453452abbc5f61a5eb0c0a98f52d22b7ae1206a)\n\n**Upstream:** Reported upstream. No feedback yet.\n\n**Reviewer:** Dima Pasechnik\n\n**Author:** Matthias Koeppe, Dima Pasechnik\n\n**Status:** needs_work\n\n**Dependencies:** #33070, #33138\n\nIssue created by migration from https://trac.sagemath.org/ticket/33083\n\n",
    "created_at": "2021-12-26T20:17:20Z",
    "labels": [
        "component: porting",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "alpine linux: Add system package information / tox.ini, fix flint, giac, cvxopt",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33083",
    "user": "https://github.com/mkoeppe"
}
```
To test: `tox -e docker-alpine-standard`


**CC:**  @dimpase @slel @frederichan-IMJPRG parisse @dkwo @tornaria @orlitzky

**Branch:** [u/mkoeppe/system_package_information___tox_ini___gh_actions_for_alpine_linux](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/system_package_information___tox_ini___gh_actions_for_alpine_linux)

**Commit:** [f453452abbc5f61a5eb0c0a98f52d22b7ae1206a](https://github.com/sagemath/sagetrac-mirror/commit/f453452abbc5f61a5eb0c0a98f52d22b7ae1206a)

**Upstream:** Reported upstream. No feedback yet.

**Reviewer:** Dima Pasechnik

**Author:** Matthias Koeppe, Dima Pasechnik

**Status:** needs_work

**Dependencies:** #33070, #33138

Issue created by migration from https://trac.sagemath.org/ticket/33083





---

archive/issue_comments_629653.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/system_package_information___tox_ini___gh_actions_for_alpine_linux](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/system_package_information___tox_ini___gh_actions_for_alpine_linux)",
    "created_at": "2021-12-26T23:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629653",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/system_package_information___tox_ini___gh_actions_for_alpine_linux](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/system_package_information___tox_ini___gh_actions_for_alpine_linux)



---

archive/issue_comments_629654.json:
```json
{
    "body": "**Commit:** [1a49d249971a8630bd1b1f86cb65f66d7fa54f24](https://github.com/sagemath/sagetrac-mirror/commit/1a49d249971a8630bd1b1f86cb65f66d7fa54f24)",
    "created_at": "2021-12-26T23:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629654",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [1a49d249971a8630bd1b1f86cb65f66d7fa54f24](https://github.com/sagemath/sagetrac-mirror/commit/1a49d249971a8630bd1b1f86cb65f66d7fa54f24)



---

archive/issue_comments_629655.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2021-12-26T23:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629655",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_629656.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a49d249971a8630bd1b1f86cb65f66d7fa54f24\">1a49d24</a></td><td><code>tox.ini, build/bin/write-dockerfile.sh, build/bin/sage-print-system-package-command: Add alpine</code></td></tr></table>\n",
    "created_at": "2021-12-26T23:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629656",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a49d249971a8630bd1b1f86cb65f66d7fa54f24">1a49d24</a></td><td><code>tox.ini, build/bin/write-dockerfile.sh, build/bin/sage-print-system-package-command: Add alpine</code></td></tr></table>




---

archive/issue_comments_629657.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n+To test: `tox -e docker-alpine-standard`\n \n``````\n",
    "created_at": "2021-12-26T23:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629657",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,2 @@
+To test: `tox -e docker-alpine-standard`
 
``````




---

archive/issue_comments_629658.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1a9266a8f3a7bc658159416511d94b09a2919f6\">d1a9266</a></td><td><code>Add more alpine.txt</code></td></tr></table>\n",
    "created_at": "2021-12-26T23:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629658",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1a9266a8f3a7bc658159416511d94b09a2919f6">d1a9266</a></td><td><code>Add more alpine.txt</code></td></tr></table>




---

archive/issue_comments_629659.json:
```json
{
    "body": "**Changing commit** from \"[1a49d249971a8630bd1b1f86cb65f66d7fa54f24](https://github.com/sagemath/sagetrac-mirror/commit/1a49d249971a8630bd1b1f86cb65f66d7fa54f24)\" to \"[d1a9266a8f3a7bc658159416511d94b09a2919f6](https://github.com/sagemath/sagetrac-mirror/commit/d1a9266a8f3a7bc658159416511d94b09a2919f6)\".",
    "created_at": "2021-12-26T23:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629659",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1a49d249971a8630bd1b1f86cb65f66d7fa54f24](https://github.com/sagemath/sagetrac-mirror/commit/1a49d249971a8630bd1b1f86cb65f66d7fa54f24)" to "[d1a9266a8f3a7bc658159416511d94b09a2919f6](https://github.com/sagemath/sagetrac-mirror/commit/d1a9266a8f3a7bc658159416511d94b09a2919f6)".



---

archive/issue_comments_629660.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2021-12-27T00:01:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629660",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_629661.json:
```json
{
    "body": "<a id='comment:5'></a>\n\n```\n  [r-3.6.3]   ********************************************************************************\n  [r-3.6.3]   /sage/build/bin/sage-dist-helpers: line 143: fmt: command not found\n  [r-3.6.3]   ********************************************************************************\n```",
    "created_at": "2021-12-27T00:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629661",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>

```
  [r-3.6.3]   ********************************************************************************
  [r-3.6.3]   /sage/build/bin/sage-dist-helpers: line 143: fmt: command not found
  [r-3.6.3]   ********************************************************************************
```



---

archive/issue_comments_629662.json:
```json
{
    "body": "**Changing commit** from \"[d1a9266a8f3a7bc658159416511d94b09a2919f6](https://github.com/sagemath/sagetrac-mirror/commit/d1a9266a8f3a7bc658159416511d94b09a2919f6)\" to \"[522c45259118d07d5b2423697650659f23073e37](https://github.com/sagemath/sagetrac-mirror/commit/522c45259118d07d5b2423697650659f23073e37)\".",
    "created_at": "2021-12-27T00:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629662",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d1a9266a8f3a7bc658159416511d94b09a2919f6](https://github.com/sagemath/sagetrac-mirror/commit/d1a9266a8f3a7bc658159416511d94b09a2919f6)" to "[522c45259118d07d5b2423697650659f23073e37](https://github.com/sagemath/sagetrac-mirror/commit/522c45259118d07d5b2423697650659f23073e37)".



---

archive/issue_comments_629663.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/522c45259118d07d5b2423697650659f23073e37\">522c452</a></td><td><code>build/pkgs/_prereq/distros/alpine.txt: Add coreutils</code></td></tr></table>\n",
    "created_at": "2021-12-27T00:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629663",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/522c45259118d07d5b2423697650659f23073e37">522c452</a></td><td><code>build/pkgs/_prereq/distros/alpine.txt: Add coreutils</code></td></tr></table>




---

archive/issue_comments_629664.json:
```json
{
    "body": "**Changing commit** from \"[522c45259118d07d5b2423697650659f23073e37](https://github.com/sagemath/sagetrac-mirror/commit/522c45259118d07d5b2423697650659f23073e37)\" to \"[f3e59a604559cb2baf82e47501f84009a4e4d5a3](https://github.com/sagemath/sagetrac-mirror/commit/f3e59a604559cb2baf82e47501f84009a4e4d5a3)\".",
    "created_at": "2021-12-27T00:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629664",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[522c45259118d07d5b2423697650659f23073e37](https://github.com/sagemath/sagetrac-mirror/commit/522c45259118d07d5b2423697650659f23073e37)" to "[f3e59a604559cb2baf82e47501f84009a4e4d5a3](https://github.com/sagemath/sagetrac-mirror/commit/f3e59a604559cb2baf82e47501f84009a4e4d5a3)".



---

archive/issue_comments_629665.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3e59a604559cb2baf82e47501f84009a4e4d5a3\">f3e59a6</a></td><td><code>build/pkgs/{graphviz,qhull,r}/distros/alpine.txt: Add non-dev packages</code></td></tr></table>\n",
    "created_at": "2021-12-27T00:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629665",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3e59a604559cb2baf82e47501f84009a4e4d5a3">f3e59a6</a></td><td><code>build/pkgs/{graphviz,qhull,r}/distros/alpine.txt: Add non-dev packages</code></td></tr></table>




---

archive/issue_comments_629666.json:
```json
{
    "body": "<a id='comment:8'></a>\nflint\n\n```\nIn file included from /sage/local/var/tmp/sage/build/flint-2.7.1/src/thread_support.h:16,\n                 from /sage/local/var/tmp/sage/build/flint-2.7.1/src/nmod_mat.h:35,\n                 from /sage/local/var/tmp/sage/build/flint-2.7.1/src/nmod_poly.h:34,\n                 from /sage/local/var/tmp/sage/build/flint-2.7.1/src/fmpz_poly.h:35,\n                 from /sage/local/var/tmp/sage/build/flint-2.7.1/src/aprcl.h:18,\n                 from config_gauss.c:12:\n/sage/local/var/tmp/sage/build/flint-2.7.1/src/thread_pool.h:55:5: error: unknown type name 'cpu_set_t'\n   55 |     cpu_set_t original_affinity;\n      |     ^~~~~~~~~\n```\n\ngiac:\n\n```\nIn file included from History.cc:8:\nfirst.h: In function 'float fgamma(float)':\nfirst.h:546:39: error: 'gammaf' was not declared in this scope; did you mean 'tgammaf'?\n  546 | inline float fgamma(float f1){ return gammaf(f1); } // or tgammaf(f1) on some versions of emscripten\n      |                                       ^~~~~~\n      |                                       tgammaf\nmake[5]: *** [Makefile:976: History.lo] Error 1\n```",
    "created_at": "2021-12-27T01:54:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629666",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
flint

```
In file included from /sage/local/var/tmp/sage/build/flint-2.7.1/src/thread_support.h:16,
                 from /sage/local/var/tmp/sage/build/flint-2.7.1/src/nmod_mat.h:35,
                 from /sage/local/var/tmp/sage/build/flint-2.7.1/src/nmod_poly.h:34,
                 from /sage/local/var/tmp/sage/build/flint-2.7.1/src/fmpz_poly.h:35,
                 from /sage/local/var/tmp/sage/build/flint-2.7.1/src/aprcl.h:18,
                 from config_gauss.c:12:
/sage/local/var/tmp/sage/build/flint-2.7.1/src/thread_pool.h:55:5: error: unknown type name 'cpu_set_t'
   55 |     cpu_set_t original_affinity;
      |     ^~~~~~~~~
```

giac:

```
In file included from History.cc:8:
first.h: In function 'float fgamma(float)':
first.h:546:39: error: 'gammaf' was not declared in this scope; did you mean 'tgammaf'?
  546 | inline float fgamma(float f1){ return gammaf(f1); } // or tgammaf(f1) on some versions of emscripten
      |                                       ^~~~~~
      |                                       tgammaf
make[5]: *** [Makefile:976: History.lo] Error 1
```



---

archive/issue_comments_629667.json:
```json
{
    "body": "<a id='comment:9'></a>\nthere is also `mpfr-dev` for `mpfr`.",
    "created_at": "2021-12-27T09:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629667",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>
there is also `mpfr-dev` for `mpfr`.



---

archive/issue_comments_629668.json:
```json
{
    "body": "<a id='comment:10'></a>\nsee https://github.com/wbhart/flint2/issues/1054 for Flint error\n\nProbably as a workaround on can put -D_GNU_SOURCE into CFLAGS.",
    "created_at": "2021-12-27T09:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629668",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>
see https://github.com/wbhart/flint2/issues/1054 for Flint error

Probably as a workaround on can put -D_GNU_SOURCE into CFLAGS.



---

archive/issue_comments_629669.json:
```json
{
    "body": "**Changing upstream** from \"N/A\" to \"Reported upstream. No feedback yet.\".",
    "created_at": "2021-12-27T09:31:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629669",
    "user": "https://github.com/dimpase"
}
```

**Changing upstream** from "N/A" to "Reported upstream. No feedback yet.".



---

archive/issue_comments_629670.json:
```json
{
    "body": "<a id='comment:12'></a>\nThat's indeed what we do on Void linux, see https://github.com/void-linux/void-packages/blob/master/srcpkgs/flintlib/template",
    "created_at": "2021-12-27T11:14:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629670",
    "user": "https://github.com/dkwo"
}
```

<a id='comment:12'></a>
That's indeed what we do on Void linux, see https://github.com/void-linux/void-packages/blob/master/srcpkgs/flintlib/template



---

archive/issue_comments_629671.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/095569b6dc2bc0336e8927e7f73475823604af6c\">095569b</a></td><td><code>build/pkgs/mpfr/distros/alpine.txt: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7b89f1a8cb9f9307f9aaebe04db0a68a3241587\">d7b89f1</a></td><td><code>build/pkgs/flint/spkg-install.in: Use -D_GNU_SOURCE</code></td></tr></table>\n",
    "created_at": "2021-12-27T19:44:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629671",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/095569b6dc2bc0336e8927e7f73475823604af6c">095569b</a></td><td><code>build/pkgs/mpfr/distros/alpine.txt: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7b89f1a8cb9f9307f9aaebe04db0a68a3241587">d7b89f1</a></td><td><code>build/pkgs/flint/spkg-install.in: Use -D_GNU_SOURCE</code></td></tr></table>




---

archive/issue_comments_629672.json:
```json
{
    "body": "**Changing commit** from \"[f3e59a604559cb2baf82e47501f84009a4e4d5a3](https://github.com/sagemath/sagetrac-mirror/commit/f3e59a604559cb2baf82e47501f84009a4e4d5a3)\" to \"[d7b89f1a8cb9f9307f9aaebe04db0a68a3241587](https://github.com/sagemath/sagetrac-mirror/commit/d7b89f1a8cb9f9307f9aaebe04db0a68a3241587)\".",
    "created_at": "2021-12-27T19:44:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629672",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f3e59a604559cb2baf82e47501f84009a4e4d5a3](https://github.com/sagemath/sagetrac-mirror/commit/f3e59a604559cb2baf82e47501f84009a4e4d5a3)" to "[d7b89f1a8cb9f9307f9aaebe04db0a68a3241587](https://github.com/sagemath/sagetrac-mirror/commit/d7b89f1a8cb9f9307f9aaebe04db0a68a3241587)".



---

archive/issue_comments_629673.json:
```json
{
    "body": "<a id='comment:14'></a>\nThe `giac` build error was previously mentioned in \n- https://www.mail-archive.com/sage-devel@googlegroups.com/msg100176.html\n- https://groups.google.com/g/sage-devel/c/kiEh8JgbWeQ/m/Oqe77sQTCAAJ",
    "created_at": "2021-12-27T19:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629673",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
The `giac` build error was previously mentioned in 
- https://www.mail-archive.com/sage-devel@googlegroups.com/msg100176.html
- https://groups.google.com/g/sage-devel/c/kiEh8JgbWeQ/m/Oqe77sQTCAAJ



---

archive/issue_comments_629674.json:
```json
{
    "body": "<a id='comment:15'></a>\nFrom https://www.gnu.org/software/libc/manual/html_node/Special-Functions.html:\n\nFunction: double gamma (double x)\nFunction: float gammaf (float x)\nFunction: long double gammal (long double x)\nPreliminary: | MT-Unsafe race:signgam | AS-Unsafe | AC-Safe | See POSIX Safety Concepts.\n\nThese functions exist for compatibility reasons. They are equivalent to lgamma etc. It is better to use lgamma since for one the name reflects better the actual computation, and moreover lgamma is standardized in ISO C99 while gamma is not.",
    "created_at": "2021-12-27T19:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629674",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
From https://www.gnu.org/software/libc/manual/html_node/Special-Functions.html:

Function: double gamma (double x)
Function: float gammaf (float x)
Function: long double gammal (long double x)
Preliminary: | MT-Unsafe race:signgam | AS-Unsafe | AC-Safe | See POSIX Safety Concepts.

These functions exist for compatibility reasons. They are equivalent to lgamma etc. It is better to use lgamma since for one the name reflects better the actual computation, and moreover lgamma is standardized in ISO C99 while gamma is not.



---

archive/issue_events_098678.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "rename": {
        "from": "System package information / tox.ini / GH Actions for alpine linux",
        "to": "alpine linux: Add system package information / tox.ini, fix flint and giac"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33083#event-98678"
}
```



---

archive/issue_comments_629675.json:
```json
{
    "body": "<a id='comment:16'></a>\nHas this patch been submitted to upstream `giac`?\n- https://github.com/void-linux/void-packages/blob/master/srcpkgs/giac/patches/fgamma.patch",
    "created_at": "2021-12-27T19:55:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629675",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
Has this patch been submitted to upstream `giac`?
- https://github.com/void-linux/void-packages/blob/master/srcpkgs/giac/patches/fgamma.patch



---

archive/issue_comments_629676.json:
```json
{
    "body": "<a id='comment:17'></a>\nThere seems to be some confusion between gamma and log of gamma here.",
    "created_at": "2021-12-27T20:06:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629676",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
There seems to be some confusion between gamma and log of gamma here.



---

archive/issue_comments_629677.json:
```json
{
    "body": "<a id='comment:18'></a>\nDoes this test pass on Alpine?\n\n```\nsage -t /usr/lib/sage-9.5.beta9/src/sage/matrix/matrix_mod2_dense.pyx # 1 doctest failed\n```\n\nIt's the last one failing on Void with musl 1.2.2,\nwhere it gives \n\n```\ncysignals.signals.SignalError: matrix allocation failed\n```\n\ninstead of\n\n```\nRuntimeError: matrix allocation failed\n```\n\nso I wonder if the result is the same on Alpine,\nand whether possibly the test result should be updated.",
    "created_at": "2021-12-28T18:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629677",
    "user": "https://github.com/dkwo"
}
```

<a id='comment:18'></a>
Does this test pass on Alpine?

```
sage -t /usr/lib/sage-9.5.beta9/src/sage/matrix/matrix_mod2_dense.pyx # 1 doctest failed
```

It's the last one failing on Void with musl 1.2.2,
where it gives 

```
cysignals.signals.SignalError: matrix allocation failed
```

instead of

```
RuntimeError: matrix allocation failed
```

so I wonder if the result is the same on Alpine,
and whether possibly the test result should be updated.



---

archive/issue_comments_629678.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [gh-dkwo](#comment%3A18):\n> Does this test pass on Alpine?\n\n\nIt looks to me like a bug in `posix_memalign()` in musl 1.2.2, see https://github.com/void-linux/void-packages/pull/34030#issuecomment-1002300676 and the comment before that one.\n\nThe cysignals code looks ok to me (specifically `sig_raise_exception` in `signals.pyx`) except that when raising `SignalError` with a custom message there is no way to distinguish `SIGILL`, `SIGSEGV` and `SIGBUS`. Maybe useful to append or prepend `\"(SIGILL)\"`, etc. to the message to aid debugging.",
    "created_at": "2021-12-28T22:33:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629678",
    "user": "https://github.com/tornaria"
}
```

<a id='comment:20'></a>
Replying to [gh-dkwo](#comment%3A18):
> Does this test pass on Alpine?


It looks to me like a bug in `posix_memalign()` in musl 1.2.2, see https://github.com/void-linux/void-packages/pull/34030#issuecomment-1002300676 and the comment before that one.

The cysignals code looks ok to me (specifically `sig_raise_exception` in `signals.pyx`) except that when raising `SignalError` with a custom message there is no way to distinguish `SIGILL`, `SIGSEGV` and `SIGBUS`. Maybe useful to append or prepend `"(SIGILL)"`, etc. to the message to aid debugging.



---

archive/issue_comments_629679.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [mkoeppe](#comment%3A17):\n> There seems to be some confusion between gamma and log of gamma here.\n\n\nThe intention of `fgamma()` seems to be to compute gamma (not log gamma). If I'm not mistaken the patch would be necessary for glibc as much as for musl, but I don't know if there's a way to trigger giac to call `fgamma()` at all.\n\nYou may find https://github.com/void-linux/void-packages/blob/master/srcpkgs/giac/patches/malloc.patch useful.",
    "created_at": "2021-12-29T02:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629679",
    "user": "https://github.com/tornaria"
}
```

<a id='comment:21'></a>
Replying to [mkoeppe](#comment%3A17):
> There seems to be some confusion between gamma and log of gamma here.


The intention of `fgamma()` seems to be to compute gamma (not log gamma). If I'm not mistaken the patch would be necessary for glibc as much as for musl, but I don't know if there's a way to trigger giac to call `fgamma()` at all.

You may find https://github.com/void-linux/void-packages/blob/master/srcpkgs/giac/patches/malloc.patch useful.



---

archive/issue_comments_629680.json:
```json
{
    "body": "<a id='comment:22'></a>\n`@`parisse, could you take a look at the issue with `gamma` (comment:16, [comment:21](#comment%3A21))?",
    "created_at": "2021-12-29T19:35:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629680",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>
`@`parisse, could you take a look at the issue with `gamma` (comment:16, [comment:21](#comment%3A21))?



---

archive/issue_comments_629681.json:
```json
{
    "body": "<a id='comment:23'></a>\nsome apline system packages listed, e.g. primesieve, is only available in their testing repo. I.e. one needs to make sure that\n`/etc/apk/repositories`\ncontains\n\n```\nhttp://dl-cdn.alpinelinux.org/alpine/edge/testing\n```",
    "created_at": "2022-01-01T10:38:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629681",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'></a>
some apline system packages listed, e.g. primesieve, is only available in their testing repo. I.e. one needs to make sure that
`/etc/apk/repositories`
contains

```
http://dl-cdn.alpinelinux.org/alpine/edge/testing
```



---

archive/issue_comments_629682.json:
```json
{
    "body": "<a id='comment:24'></a>\nfor Flint, `d7b89f1`\n\n```\n+# Trac #33083: Needed for cpu_set_t on musl libc\n+CPPFLAGS=\"$CPPFLAGS -D_GNU_SOURCE\"\n+export CPPFLAGS\n```\ndoes not work. One really needs to use CFLAGS instead. Also, the same is needed for arb,\nas it includes flint's headers, and without it it's the same error.",
    "created_at": "2022-01-01T14:36:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629682",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'></a>
for Flint, `d7b89f1`

```
+# Trac #33083: Needed for cpu_set_t on musl libc
+CPPFLAGS="$CPPFLAGS -D_GNU_SOURCE"
+export CPPFLAGS
```
does not work. One really needs to use CFLAGS instead. Also, the same is needed for arb,
as it includes flint's headers, and without it it's the same error.



---

archive/issue_comments_629683.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [tornaria](#comment%3A21):\n> Replying to [mkoeppe](#comment%3A17):\n> > There seems to be some confusion between gamma and log of gamma here.\n\n> \n> The intention of `fgamma()` seems to be to compute gamma (not log gamma). If I'm not mistaken the patch would be necessary for glibc as much as for musl, but I don't know if there's a way to trigger giac to call `fgamma()` at all.\n> \n> You may find https://github.com/void-linux/void-packages/blob/master/srcpkgs/giac/patches/malloc.patch useful.\n\n\nFrom reading giac source, it's obvious that `tgammaf` was meant there. It's just some weirdness of musl or alpine which makes it not to use `tgammaf`, but `gammaf`, where e.g. on Apple it would have been `tgammaf`.\n\nBuilding with `CPPFLAGS=\"$CPPFLAGS -DNO_BSD\" make giac` succeeds. `NO_BSD` is some strange variable that does not seem to be used anywhere else in giac, so that's tentative.",
    "created_at": "2022-01-01T15:52:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629683",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'></a>
Replying to [tornaria](#comment%3A21):
> Replying to [mkoeppe](#comment%3A17):
> > There seems to be some confusion between gamma and log of gamma here.

> 
> The intention of `fgamma()` seems to be to compute gamma (not log gamma). If I'm not mistaken the patch would be necessary for glibc as much as for musl, but I don't know if there's a way to trigger giac to call `fgamma()` at all.
> 
> You may find https://github.com/void-linux/void-packages/blob/master/srcpkgs/giac/patches/malloc.patch useful.


From reading giac source, it's obvious that `tgammaf` was meant there. It's just some weirdness of musl or alpine which makes it not to use `tgammaf`, but `gammaf`, where e.g. on Apple it would have been `tgammaf`.

Building with `CPPFLAGS="$CPPFLAGS -DNO_BSD" make giac` succeeds. `NO_BSD` is some strange variable that does not seem to be used anywhere else in giac, so that's tentative.



---

archive/issue_comments_629684.json:
```json
{
    "body": "<a id='comment:26'></a>\nThe next problem is with numpy, see #33070 and the attachment there. Apparently numpy currently is a problem on alpine/edge. I'll look up numpy's issues on this.",
    "created_at": "2022-01-02T09:00:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629684",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'></a>
The next problem is with numpy, see #33070 and the attachment there. Apparently numpy currently is a problem on alpine/edge. I'll look up numpy's issues on this.



---

archive/issue_comments_629685.json:
```json
{
    "body": "<a id='comment:27'></a>\none more package to add - mpc:\n\n```diff\n--- /dev/null\n+++ b/build/pkgs/mpc/distros/apline.txt\n@@ -0,0 +1,2 @@\n+mpc1\n+mpc1-dev\n```",
    "created_at": "2022-01-02T22:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629685",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:27'></a>
one more package to add - mpc:

```diff
--- /dev/null
+++ b/build/pkgs/mpc/distros/apline.txt
@@ -0,0 +1,2 @@
+mpc1
+mpc1-dev
```



---

archive/issue_comments_629686.json:
```json
{
    "body": "<a id='comment:28'></a>\nFeel free to push to branch after fixing the typoe `apline` -> `alpine`",
    "created_at": "2022-01-02T22:18:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629686",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>
Feel free to push to branch after fixing the typoe `apline` -> `alpine`



---

archive/issue_comments_629687.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/system_package_information___tox_ini___gh_actions_for_alpine_linux](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/system_package_information___tox_ini___gh_actions_for_alpine_linux)\" to \"[u/dimpase/system_package_information___tox_ini___gh_actions_for_alpine_linux](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/system_package_information___tox_ini___gh_actions_for_alpine_linux)\".",
    "created_at": "2022-01-02T23:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629687",
    "user": "https://github.com/dimpase"
}
```

**Changing branch** from "[u/mkoeppe/system_package_information___tox_ini___gh_actions_for_alpine_linux](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/system_package_information___tox_ini___gh_actions_for_alpine_linux)" to "[u/dimpase/system_package_information___tox_ini___gh_actions_for_alpine_linux](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/system_package_information___tox_ini___gh_actions_for_alpine_linux)".



---

archive/issue_comments_629688.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e65ae6ca71fbe284affeb4ed88e63acc97a3fe0a\">e65ae6c</a></td><td><code>build/pkgs/python3/spkg-configure.m4: Accept system python 3.10.x</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59173d01b4ed85077a847d2643c80bb3499c926a\">59173d0</a></td><td><code>pkgs/sage-setup/setup.cfg: Allow Python 3.10</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c902b7bc44c1b2116416962ec1194b8e59f11f06\">c902b7b</a></td><td><code>src/setup.cfg.m4: Allow Python 3.10</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb305525af1f872d00bb63387f7c68b88fb70a38\">cb30552</a></td><td><code>build/pkgs/python3/spkg-configure.m4: Warn on system python 3.10.x</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2be1f34079546f629af98b9a0af28a1c8b71d252\">2be1f34</a></td><td><code>Merge #33013</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02aa94c2af2b4c50f85d8b4395807430383fb119\">02aa94c</a></td><td><code>Merge #32930</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/249357dd30c54162e4b9204d6113c70b310a5087\">249357d</a></td><td><code>sage.cpython.atexit: fix for python 3.10 (#30766)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df9f1d4ced4264f65ab704f725f6f5879b012796\">df9f1d4</a></td><td><code>Pass float(0.5) to time.sleep</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bff9ef5adb51576380737e267ee7daf119b5f560\">bff9ef5</a></td><td><code>Merge branch 'u/tornaria/support_python_3_10' of github.com:sagemath/sagetrac-mirror into develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2fe32b58e5d6abdfc8629da49de8f520e3edf952\">2fe32b5</a></td><td><code>mpc</code></td></tr></table>\n",
    "created_at": "2022-01-02T23:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629688",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'></a>
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e65ae6ca71fbe284affeb4ed88e63acc97a3fe0a">e65ae6c</a></td><td><code>build/pkgs/python3/spkg-configure.m4: Accept system python 3.10.x</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59173d01b4ed85077a847d2643c80bb3499c926a">59173d0</a></td><td><code>pkgs/sage-setup/setup.cfg: Allow Python 3.10</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c902b7bc44c1b2116416962ec1194b8e59f11f06">c902b7b</a></td><td><code>src/setup.cfg.m4: Allow Python 3.10</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb305525af1f872d00bb63387f7c68b88fb70a38">cb30552</a></td><td><code>build/pkgs/python3/spkg-configure.m4: Warn on system python 3.10.x</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2be1f34079546f629af98b9a0af28a1c8b71d252">2be1f34</a></td><td><code>Merge #33013</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02aa94c2af2b4c50f85d8b4395807430383fb119">02aa94c</a></td><td><code>Merge #32930</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/249357dd30c54162e4b9204d6113c70b310a5087">249357d</a></td><td><code>sage.cpython.atexit: fix for python 3.10 (#30766)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df9f1d4ced4264f65ab704f725f6f5879b012796">df9f1d4</a></td><td><code>Pass float(0.5) to time.sleep</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bff9ef5adb51576380737e267ee7daf119b5f560">bff9ef5</a></td><td><code>Merge branch 'u/tornaria/support_python_3_10' of github.com:sagemath/sagetrac-mirror into develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2fe32b58e5d6abdfc8629da49de8f520e3edf952">2fe32b5</a></td><td><code>mpc</code></td></tr></table>




---

archive/issue_comments_629689.json:
```json
{
    "body": "**Changing commit** from \"[d7b89f1a8cb9f9307f9aaebe04db0a68a3241587](https://github.com/sagemath/sagetrac-mirror/commit/d7b89f1a8cb9f9307f9aaebe04db0a68a3241587)\" to \"[2fe32b58e5d6abdfc8629da49de8f520e3edf952](https://github.com/sagemath/sagetrac-mirror/commit/2fe32b58e5d6abdfc8629da49de8f520e3edf952)\".",
    "created_at": "2022-01-02T23:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629689",
    "user": "https://github.com/dimpase"
}
```

**Changing commit** from "[d7b89f1a8cb9f9307f9aaebe04db0a68a3241587](https://github.com/sagemath/sagetrac-mirror/commit/d7b89f1a8cb9f9307f9aaebe04db0a68a3241587)" to "[2fe32b58e5d6abdfc8629da49de8f520e3edf952](https://github.com/sagemath/sagetrac-mirror/commit/2fe32b58e5d6abdfc8629da49de8f520e3edf952)".



---

archive/issue_comments_629690.json:
```json
{
    "body": "<a id='comment:30'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8706ef573c31508f77d46a7a9aeffc4d55f97220\">8706ef5</a></td><td><code>correct flags of flint and arb for musl libc</code></td></tr></table>\n",
    "created_at": "2022-01-02T23:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629690",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8706ef573c31508f77d46a7a9aeffc4d55f97220">8706ef5</a></td><td><code>correct flags of flint and arb for musl libc</code></td></tr></table>




---

archive/issue_comments_629691.json:
```json
{
    "body": "**Changing commit** from \"[2fe32b58e5d6abdfc8629da49de8f520e3edf952](https://github.com/sagemath/sagetrac-mirror/commit/2fe32b58e5d6abdfc8629da49de8f520e3edf952)\" to \"[8706ef573c31508f77d46a7a9aeffc4d55f97220](https://github.com/sagemath/sagetrac-mirror/commit/8706ef573c31508f77d46a7a9aeffc4d55f97220)\".",
    "created_at": "2022-01-02T23:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629691",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2fe32b58e5d6abdfc8629da49de8f520e3edf952](https://github.com/sagemath/sagetrac-mirror/commit/2fe32b58e5d6abdfc8629da49de8f520e3edf952)" to "[8706ef573c31508f77d46a7a9aeffc4d55f97220](https://github.com/sagemath/sagetrac-mirror/commit/8706ef573c31508f77d46a7a9aeffc4d55f97220)".



---

archive/issue_comments_629692.json:
```json
{
    "body": "**Dependencies:** list merged tickets here",
    "created_at": "2022-01-04T07:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629692",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** list merged tickets here



---

archive/issue_comments_629693.json:
```json
{
    "body": "**Changing author** from \"Matthias Koeppe\" to \"Matthias Koeppe, Dima Pasechnik\".",
    "created_at": "2022-01-04T07:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629693",
    "user": "https://github.com/mkoeppe"
}
```

**Changing author** from "Matthias Koeppe" to "Matthias Koeppe, Dima Pasechnik".



---

archive/issue_comments_629694.json:
```json
{
    "body": "**Changing branch** from \"[u/dimpase/system_package_information___tox_ini___gh_actions_for_alpine_linux](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/system_package_information___tox_ini___gh_actions_for_alpine_linux)\" to \"[u/mkoeppe/system_package_information___tox_ini___gh_actions_for_alpine_linux](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/system_package_information___tox_ini___gh_actions_for_alpine_linux)\".",
    "created_at": "2022-01-09T18:54:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629694",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/dimpase/system_package_information___tox_ini___gh_actions_for_alpine_linux](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/system_package_information___tox_ini___gh_actions_for_alpine_linux)" to "[u/mkoeppe/system_package_information___tox_ini___gh_actions_for_alpine_linux](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/system_package_information___tox_ini___gh_actions_for_alpine_linux)".



---

archive/issue_comments_629695.json:
```json
{
    "body": "<a id='comment:33'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b36985f66a2954b5ef8aef137533f3d86420f9e\">5b36985</a></td><td><code>Merge tag '9.5.rc0' into t/33083/system_package_information___tox_ini___gh_actions_for_alpine_linux</code></td></tr></table>\n",
    "created_at": "2022-01-09T18:54:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629695",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b36985f66a2954b5ef8aef137533f3d86420f9e">5b36985</a></td><td><code>Merge tag '9.5.rc0' into t/33083/system_package_information___tox_ini___gh_actions_for_alpine_linux</code></td></tr></table>




---

archive/issue_comments_629696.json:
```json
{
    "body": "**Changing dependencies** from \"list merged tickets here\" to \"#33070\".",
    "created_at": "2022-01-09T18:54:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629696",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "list merged tickets here" to "#33070".



---

archive/issue_comments_629697.json:
```json
{
    "body": "**Changing commit** from \"[8706ef573c31508f77d46a7a9aeffc4d55f97220](https://github.com/sagemath/sagetrac-mirror/commit/8706ef573c31508f77d46a7a9aeffc4d55f97220)\" to \"[5b36985f66a2954b5ef8aef137533f3d86420f9e](https://github.com/sagemath/sagetrac-mirror/commit/5b36985f66a2954b5ef8aef137533f3d86420f9e)\".",
    "created_at": "2022-01-09T18:54:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629697",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[8706ef573c31508f77d46a7a9aeffc4d55f97220](https://github.com/sagemath/sagetrac-mirror/commit/8706ef573c31508f77d46a7a9aeffc4d55f97220)" to "[5b36985f66a2954b5ef8aef137533f3d86420f9e](https://github.com/sagemath/sagetrac-mirror/commit/5b36985f66a2954b5ef8aef137533f3d86420f9e)".



---

archive/issue_comments_629698.json:
```json
{
    "body": "<a id='comment:34'></a>\nThe problem with `giac` is still unresolved",
    "created_at": "2022-01-09T20:23:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629698",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>
The problem with `giac` is still unresolved



---

archive/issue_comments_629699.json:
```json
{
    "body": "<a id='comment:35'></a>\nmaybe add the workaround from [comment:25](#comment%3A25) ?",
    "created_at": "2022-01-09T20:47:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629699",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:35'></a>
maybe add the workaround from [comment:25](#comment%3A25) ?



---

archive/issue_comments_629700.json:
```json
{
    "body": "**Changing commit** from \"[5b36985f66a2954b5ef8aef137533f3d86420f9e](https://github.com/sagemath/sagetrac-mirror/commit/5b36985f66a2954b5ef8aef137533f3d86420f9e)\" to \"[8ad9c0580407f951c0765496abb0788d9266a8c0](https://github.com/sagemath/sagetrac-mirror/commit/8ad9c0580407f951c0765496abb0788d9266a8c0)\".",
    "created_at": "2022-01-09T21:17:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629700",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5b36985f66a2954b5ef8aef137533f3d86420f9e](https://github.com/sagemath/sagetrac-mirror/commit/5b36985f66a2954b5ef8aef137533f3d86420f9e)" to "[8ad9c0580407f951c0765496abb0788d9266a8c0](https://github.com/sagemath/sagetrac-mirror/commit/8ad9c0580407f951c0765496abb0788d9266a8c0)".



---

archive/issue_comments_629701.json:
```json
{
    "body": "<a id='comment:36'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ad9c0580407f951c0765496abb0788d9266a8c0\">8ad9c05</a></td><td><code>build/pkgs/giac/spkg-install.in: Add workaround for musl libc</code></td></tr></table>\n",
    "created_at": "2022-01-09T21:17:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629701",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ad9c0580407f951c0765496abb0788d9266a8c0">8ad9c05</a></td><td><code>build/pkgs/giac/spkg-install.in: Add workaround for musl libc</code></td></tr></table>




---

archive/issue_comments_629702.json:
```json
{
    "body": "<a id='comment:37'></a>\nhow about the numpy problem?\n\nI looked a bit into this - while alpine does provide a numpy package, I had trouble finding their patches/source package.",
    "created_at": "2022-01-09T21:51:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629702",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'></a>
how about the numpy problem?

I looked a bit into this - while alpine does provide a numpy package, I had trouble finding their patches/source package.



---

archive/issue_comments_629703.json:
```json
{
    "body": "**Changing dependencies** from \"#33070\" to \"#33070, #33138\".",
    "created_at": "2022-01-10T02:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629703",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#33070" to "#33070, #33138".



---

archive/issue_comments_629704.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [dimpase](#comment%3A37):\n> how about the numpy problem?\n\n\nFixed by #33138.",
    "created_at": "2022-01-10T02:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629704",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>
Replying to [dimpase](#comment%3A37):
> how about the numpy problem?


Fixed by #33138.



---

archive/issue_comments_629705.json:
```json
{
    "body": "<a id='comment:39'></a>\nNext issue:\n\n```\n  [cvxopt-1.2.7]     src/C/umfpack.c:23:10: fatal error: umfpack.h: No such file or directory\n  [cvxopt-1.2.7]        23 | #include \"umfpack.h\"\n  [cvxopt-1.2.7]           |          ^~~~~~~~~~~\n  [cvxopt-1.2.7]     compilation terminated.\n```",
    "created_at": "2022-01-10T02:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629705",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>
Next issue:

```
  [cvxopt-1.2.7]     src/C/umfpack.c:23:10: fatal error: umfpack.h: No such file or directory
  [cvxopt-1.2.7]        23 | #include "umfpack.h"
  [cvxopt-1.2.7]           |          ^~~~~~~~~~~
  [cvxopt-1.2.7]     compilation terminated.
```



---

archive/issue_comments_629706.json:
```json
{
    "body": "<a id='comment:40'></a>\nThis problem is again - our `build/pkgs/suitesparse/spkg-configure.m4` finds suitesparse but forgets to tell anyone where it was found.",
    "created_at": "2022-01-10T03:53:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629706",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:40'></a>
This problem is again - our `build/pkgs/suitesparse/spkg-configure.m4` finds suitesparse but forgets to tell anyone where it was found.



---

archive/issue_events_098679.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "rename": {
        "from": "alpine linux: Add system package information / tox.ini, fix flint and giac",
        "to": "alpine linux: Add system package information / tox.ini, fix flint, giac, cvxopt"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33083#event-98679"
}
```



---

archive/issue_comments_629707.json:
```json
{
    "body": "<a id='comment:42'></a>\nSimilar to #30052.",
    "created_at": "2022-01-10T04:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629707",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:42'></a>
Similar to #30052.



---

archive/issue_comments_629708.json:
```json
{
    "body": "**Changing commit** from \"[8ad9c0580407f951c0765496abb0788d9266a8c0](https://github.com/sagemath/sagetrac-mirror/commit/8ad9c0580407f951c0765496abb0788d9266a8c0)\" to \"[1fe1e859086183d0fe6e86cda3b1227ff3a96501](https://github.com/sagemath/sagetrac-mirror/commit/1fe1e859086183d0fe6e86cda3b1227ff3a96501)\".",
    "created_at": "2022-01-10T05:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629708",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8ad9c0580407f951c0765496abb0788d9266a8c0](https://github.com/sagemath/sagetrac-mirror/commit/8ad9c0580407f951c0765496abb0788d9266a8c0)" to "[1fe1e859086183d0fe6e86cda3b1227ff3a96501](https://github.com/sagemath/sagetrac-mirror/commit/1fe1e859086183d0fe6e86cda3b1227ff3a96501)".



---

archive/issue_comments_629709.json:
```json
{
    "body": "<a id='comment:43'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/455e1fa3187386367b43d0e3869e5d39f5b8101d\">455e1fa</a></td><td><code>build/pkgs/numpy/spkg-install.in: Use pip wheel --no-use-pep517</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fe1e859086183d0fe6e86cda3b1227ff3a96501\">1fe1e85</a></td><td><code>Merge #33138</code></td></tr></table>\n",
    "created_at": "2022-01-10T05:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629709",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/455e1fa3187386367b43d0e3869e5d39f5b8101d">455e1fa</a></td><td><code>build/pkgs/numpy/spkg-install.in: Use pip wheel --no-use-pep517</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fe1e859086183d0fe6e86cda3b1227ff3a96501">1fe1e85</a></td><td><code>Merge #33138</code></td></tr></table>




---

archive/issue_comments_629710.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [mkoeppe](#comment%3A40):\n> This problem is again - our `build/pkgs/suitesparse/spkg-configure.m4` finds suitesparse but forgets to tell anyone where it was found.\n\n\nSuitesparse found in the system library/header path but cvxopt tries to guess it anyway?\n\nThis has been reported a few times,\n- https://github.com/cvxopt/cvxopt/issues/156\n- https://github.com/cvxopt/cvxopt/issues/174\n\nFor now we'll probably be adding another special case to\n\nhttps://github.com/cvxopt/cvxopt/blob/master/setup.py#L55",
    "created_at": "2022-01-10T12:09:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629710",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:44'></a>
Replying to [mkoeppe](#comment%3A40):
> This problem is again - our `build/pkgs/suitesparse/spkg-configure.m4` finds suitesparse but forgets to tell anyone where it was found.


Suitesparse found in the system library/header path but cvxopt tries to guess it anyway?

This has been reported a few times,
- https://github.com/cvxopt/cvxopt/issues/156
- https://github.com/cvxopt/cvxopt/issues/174

For now we'll probably be adding another special case to

https://github.com/cvxopt/cvxopt/blob/master/setup.py#L55



---

archive/issue_comments_629711.json:
```json
{
    "body": "<a id='comment:45'></a>\nReplying to [git](#comment%3A43):\n> Branch pushed to git repo; I updated commit sha1. **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/455e1fa3187386367b43d0e3869e5d39f5b8101d\">455e1fa</a></td><td><code>build/pkgs/numpy/spkg-install.in: Use pip wheel --no-use-pep517</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fe1e859086183d0fe6e86cda3b1227ff3a96501\">1fe1e85</a></td><td><code>Merge #33138</code></td></tr></table>\n\n\nThis gives a different error:\n\n```\n  Running setup.py clean for numpy\n  Running command /home/dima/sagetrac-mirror/local/var/lib/sage/venv-python3.10/bin/python3 -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/hom\ne/dima/sagetrac-mirror/local/var/lib/sage/venv-python3.10/var/tmp/sage/build/numpy-1.21.4/src/setup.py'\"'\"'; __file__='\"'\"'/home/dima/sagetrac-mirror/local/var/lib/\nsage/venv-python3.10/var/tmp/sage/build/numpy-1.21.4/src/setup.py'\"'\"';f = getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__) if os.path.exists(__file__) else io.Str\ningIO('\"'\"'from setuptools import setup; setup()'\"'\"');code = f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))\n' clean --all\n  /home/dima/sagetrac-mirror/local/var/lib/sage/venv-python3.10/var/tmp/sage/build/numpy-1.21.4/src/setup.py:63: RuntimeWarning: NumPy 1.21.4 may not yet support Py\nthon 3.10.\n    warnings.warn(\n  Running from numpy source directory.\n\n  `setup.py clean` is not supported, use one of the following instead:\n\n    - `git clean -xdf` (cleans all files)\n    - `git clean -Xdf` (cleans all versioned files, doesn't touch\n                        files that aren't checked into the git repo)\n\n  Add `--force` to your command to use it anyway if you must (unsupported).\n\n  ERROR: Failed cleaning build dir for numpy\nFailed to build numpy\nERROR: Failed to build one or more wheels\n********************************************************************************\nError building a wheel for numpy-1.21.4\n```",
    "created_at": "2022-01-10T12:37:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629711",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:45'></a>
Replying to [git](#comment%3A43):
> Branch pushed to git repo; I updated commit sha1. **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/455e1fa3187386367b43d0e3869e5d39f5b8101d">455e1fa</a></td><td><code>build/pkgs/numpy/spkg-install.in: Use pip wheel --no-use-pep517</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fe1e859086183d0fe6e86cda3b1227ff3a96501">1fe1e85</a></td><td><code>Merge #33138</code></td></tr></table>


This gives a different error:

```
  Running setup.py clean for numpy
  Running command /home/dima/sagetrac-mirror/local/var/lib/sage/venv-python3.10/bin/python3 -u -c 'import io, os, sys, setuptools, tokenize; sys.argv[0] = '"'"'/hom
e/dima/sagetrac-mirror/local/var/lib/sage/venv-python3.10/var/tmp/sage/build/numpy-1.21.4/src/setup.py'"'"'; __file__='"'"'/home/dima/sagetrac-mirror/local/var/lib/
sage/venv-python3.10/var/tmp/sage/build/numpy-1.21.4/src/setup.py'"'"';f = getattr(tokenize, '"'"'open'"'"', open)(__file__) if os.path.exists(__file__) else io.Str
ingIO('"'"'from setuptools import setup; setup()'"'"');code = f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))
' clean --all
  /home/dima/sagetrac-mirror/local/var/lib/sage/venv-python3.10/var/tmp/sage/build/numpy-1.21.4/src/setup.py:63: RuntimeWarning: NumPy 1.21.4 may not yet support Py
thon 3.10.
    warnings.warn(
  Running from numpy source directory.

  `setup.py clean` is not supported, use one of the following instead:

    - `git clean -xdf` (cleans all files)
    - `git clean -Xdf` (cleans all versioned files, doesn't touch
                        files that aren't checked into the git repo)

  Add `--force` to your command to use it anyway if you must (unsupported).

  ERROR: Failed cleaning build dir for numpy
Failed to build numpy
ERROR: Failed to build one or more wheels
********************************************************************************
Error building a wheel for numpy-1.21.4
```



---

archive/issue_comments_629712.json:
```json
{
    "body": "<a id='comment:46'></a>\nNor it fixed the already reported numpy error, the `clean` thing is just an extra after\n\n```\n[numpy-1.21.4]   creating build/temp.linux-x86_64-3.10/build/src.linux-x86_64-3.10/numpy/core/src/npymath\n[numpy-1.21.4]   compile options: '-Ibuild/src.linux-x86_64-3.10/numpy/core/src/npymath -Inumpy/core/include -Ibuild/src.linux-x86_64-3.10/numpy/core/include/numpy -Ibuild/src.linux-x86_64-3.10/numpy/distutils/include -Inumpy/core/src/common -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -Inumpy/core/src/_simd -I/home/dima/sagetrac-mirror/local/var/lib/sage/venv-python3.10/include -I/usr/include/python3.10 -Ibuild/src.linux-x86_64-3.10/numpy/core/src/common -Ibuild/src.linux-x86_64-3.10/numpy/core/src/npymath -c'\n[numpy-1.21.4]   extra options: '-msse -msse2 -msse3'\n[numpy-1.21.4]   error: [Errno 2] No such file or directory\n[numpy-1.21.4] \n[numpy-1.21.4]   ########### CLIB COMPILER OPTIMIZATION ###########\n[numpy-1.21.4]   Platform      :\n[numpy-1.21.4]     Architecture: x64\n[numpy-1.21.4]     Compiler    : gcc\n[numpy-1.21.4] \n[numpy-1.21.4]   CPU baseline  :\n[numpy-1.21.4]     Requested   : 'min'\n[numpy-1.21.4]     Enabled     : SSE SSE2 SSE3\n[numpy-1.21.4]     Flags       : -msse -msse2 -msse3\n[numpy-1.21.4]     Extra checks: none\n```\n\napline sources for numpy are in https://git.alpinelinux.org/aports/tree/community/py3-numpy - going to try their patch. Note that they just call `python3 setup.py` directly, no pip.",
    "created_at": "2022-01-10T13:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629712",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:46'></a>
Nor it fixed the already reported numpy error, the `clean` thing is just an extra after

```
[numpy-1.21.4]   creating build/temp.linux-x86_64-3.10/build/src.linux-x86_64-3.10/numpy/core/src/npymath
[numpy-1.21.4]   compile options: '-Ibuild/src.linux-x86_64-3.10/numpy/core/src/npymath -Inumpy/core/include -Ibuild/src.linux-x86_64-3.10/numpy/core/include/numpy -Ibuild/src.linux-x86_64-3.10/numpy/distutils/include -Inumpy/core/src/common -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/src/npysort -Inumpy/core/src/_simd -I/home/dima/sagetrac-mirror/local/var/lib/sage/venv-python3.10/include -I/usr/include/python3.10 -Ibuild/src.linux-x86_64-3.10/numpy/core/src/common -Ibuild/src.linux-x86_64-3.10/numpy/core/src/npymath -c'
[numpy-1.21.4]   extra options: '-msse -msse2 -msse3'
[numpy-1.21.4]   error: [Errno 2] No such file or directory
[numpy-1.21.4] 
[numpy-1.21.4]   ########### CLIB COMPILER OPTIMIZATION ###########
[numpy-1.21.4]   Platform      :
[numpy-1.21.4]     Architecture: x64
[numpy-1.21.4]     Compiler    : gcc
[numpy-1.21.4] 
[numpy-1.21.4]   CPU baseline  :
[numpy-1.21.4]     Requested   : 'min'
[numpy-1.21.4]     Enabled     : SSE SSE2 SSE3
[numpy-1.21.4]     Flags       : -msse -msse2 -msse3
[numpy-1.21.4]     Extra checks: none
```

apline sources for numpy are in https://git.alpinelinux.org/aports/tree/community/py3-numpy - going to try their patch. Note that they just call `python3 setup.py` directly, no pip.



---

archive/issue_comments_629713.json:
```json
{
    "body": "<a id='comment:47'></a>\nApline patches don't help. They don't build wheels, as far as I can see, either.",
    "created_at": "2022-01-10T14:15:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629713",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:47'></a>
Apline patches don't help. They don't build wheels, as far as I can see, either.



---

archive/issue_comments_629714.json:
```json
{
    "body": "<a id='comment:48'></a>\ngiven that numpy don't distribute wheels for musl libc, it might be something they just can't do at the moment...",
    "created_at": "2022-01-10T15:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629714",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:48'></a>
given that numpy don't distribute wheels for musl libc, it might be something they just can't do at the moment...



---

archive/issue_comments_629715.json:
```json
{
    "body": "<a id='comment:49'></a>\nsee https://github.com/numpy/numpy/issues/20780",
    "created_at": "2022-01-10T16:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629715",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:49'></a>
see https://github.com/numpy/numpy/issues/20780



---

archive/issue_comments_629716.json:
```json
{
    "body": "<a id='comment:50'></a>\nReplying to [dimpase](#comment%3A45):\n> Replying to [git](#comment%3A43):\n> > Branch pushed to git repo; I updated commit sha1. **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/455e1fa3187386367b43d0e3869e5d39f5b8101d\">455e1fa</a></td><td><code>build/pkgs/numpy/spkg-install.in: Use pip wheel --no-use-pep517</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fe1e859086183d0fe6e86cda3b1227ff3a96501\">1fe1e85</a></td><td><code>Merge #33138</code></td></tr></table>\n\n> \n> This gives a different error\n\n\nWorks fine here. How are you testing this?",
    "created_at": "2022-01-10T17:52:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629716",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:50'></a>
Replying to [dimpase](#comment%3A45):
> Replying to [git](#comment%3A43):
> > Branch pushed to git repo; I updated commit sha1. **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/455e1fa3187386367b43d0e3869e5d39f5b8101d">455e1fa</a></td><td><code>build/pkgs/numpy/spkg-install.in: Use pip wheel --no-use-pep517</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fe1e859086183d0fe6e86cda3b1227ff3a96501">1fe1e85</a></td><td><code>Merge #33138</code></td></tr></table>

> 
> This gives a different error


Works fine here. How are you testing this?



---

archive/issue_comments_629717.json:
```json
{
    "body": "<a id='comment:51'></a>\nReplying to [mkoeppe](#comment%3A50):\n> Replying to [dimpase](#comment%3A45):\n> > Replying to [git](#comment%3A43):\n> > > Branch pushed to git repo; I updated commit sha1. **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/455e1fa3187386367b43d0e3869e5d39f5b8101d\">455e1fa</a></td><td><code>build/pkgs/numpy/spkg-install.in: Use pip wheel --no-use-pep517</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fe1e859086183d0fe6e86cda3b1227ff3a96501\">1fe1e85</a></td><td><code>Merge #33138</code></td></tr></table>\n\n> > \n> > This gives a different error\n\n> \n> Works fine here. How are you testing this?\n\n\nrunning Apline in an lxc container.\nUsing their Python 3.10, their openblas - I guess that's the only pieces of the config puzzle that matter. \n\nThat's the same error as I get while trying to build numpy wheel without Sage using pip,\njust by running `pip wheel -e .` in the unzipped numpy distro. (same error on their master from the repo, too),",
    "created_at": "2022-01-11T11:05:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629717",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:51'></a>
Replying to [mkoeppe](#comment%3A50):
> Replying to [dimpase](#comment%3A45):
> > Replying to [git](#comment%3A43):
> > > Branch pushed to git repo; I updated commit sha1. **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/455e1fa3187386367b43d0e3869e5d39f5b8101d">455e1fa</a></td><td><code>build/pkgs/numpy/spkg-install.in: Use pip wheel --no-use-pep517</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fe1e859086183d0fe6e86cda3b1227ff3a96501">1fe1e85</a></td><td><code>Merge #33138</code></td></tr></table>

> > 
> > This gives a different error

> 
> Works fine here. How are you testing this?


running Apline in an lxc container.
Using their Python 3.10, their openblas - I guess that's the only pieces of the config puzzle that matter. 

That's the same error as I get while trying to build numpy wheel without Sage using pip,
just by running `pip wheel -e .` in the unzipped numpy distro. (same error on their master from the repo, too),



---

archive/issue_comments_629718.json:
```json
{
    "body": "<a id='comment:52'></a>\nYour installation is broken somehow",
    "created_at": "2022-01-11T16:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629718",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:52'></a>
Your installation is broken somehow



---

archive/issue_comments_629719.json:
```json
{
    "body": "<a id='comment:53'></a>\nMaybe, but \"No such file or directory\" error ought to be traceable...",
    "created_at": "2022-01-11T20:15:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629719",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:53'></a>
Maybe, but "No such file or directory" error ought to be traceable...



---

archive/issue_comments_629720.json:
```json
{
    "body": "<a id='comment:54'></a>\nOK, let's get this in. (the lxc container setup might be to blame for the numpy issue I keep seeing)",
    "created_at": "2022-01-12T14:46:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629720",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:54'></a>
OK, let's get this in. (the lxc container setup might be to blame for the numpy issue I keep seeing)



---

archive/issue_comments_629721.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2022-01-12T14:46:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629721",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_comments_629722.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2022-01-12T14:46:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629722",
    "user": "https://github.com/dimpase"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_629723.json:
```json
{
    "body": "<a id='comment:55'></a>\nLooks like the added flags break the build of `arb` on Debian variants - https://github.com/mkoeppe/sage/runs/4785815685?check_suite_focus=true",
    "created_at": "2022-01-12T16:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629723",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'></a>
Looks like the added flags break the build of `arb` on Debian variants - https://github.com/mkoeppe/sage/runs/4785815685?check_suite_focus=true



---

archive/issue_comments_629724.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2022-01-12T16:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629724",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_events_098680.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-12T17:03:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33083#event-98680"
}
```



---

archive/issue_comments_629725.json:
```json
{
    "body": "<a id='comment:57'></a>\nReplying to [mjo](#comment%3A44):\n> Replying to [mkoeppe](#comment%3A40):\n> > This problem is again - our `build/pkgs/suitesparse/spkg-configure.m4` finds suitesparse but forgets to tell anyone where it was found.\n\n> \n> Suitesparse found in the system library/header path but cvxopt tries to guess it anyway?\n> \n> This has been reported a few times,\n> - https://github.com/cvxopt/cvxopt/issues/156\n> - https://github.com/cvxopt/cvxopt/issues/174\n> \n> For now we'll probably be adding another special case to\n> \n> https://github.com/cvxopt/cvxopt/blob/master/setup.py#L55\n\n\nSee also #31905",
    "created_at": "2022-01-17T08:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629725",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:57'></a>
Replying to [mjo](#comment%3A44):
> Replying to [mkoeppe](#comment%3A40):
> > This problem is again - our `build/pkgs/suitesparse/spkg-configure.m4` finds suitesparse but forgets to tell anyone where it was found.

> 
> Suitesparse found in the system library/header path but cvxopt tries to guess it anyway?
> 
> This has been reported a few times,
> - https://github.com/cvxopt/cvxopt/issues/156
> - https://github.com/cvxopt/cvxopt/issues/174
> 
> For now we'll probably be adding another special case to
> 
> https://github.com/cvxopt/cvxopt/blob/master/setup.py#L55


See also #31905



---

archive/issue_events_098681.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:19:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33083#event-98681"
}
```



---

archive/issue_events_098682.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:19:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33083#event-98682"
}
```



---

archive/issue_comments_629726.json:
```json
{
    "body": "<a id='comment:59'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2575abfb95d8a68cd8a145028d0b5c79b53a3ca6\">2575abf</a></td><td><code>tox.ini, build/bin/write-dockerfile.sh, build/bin/sage-print-system-package-command: Add alpine</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc4ea60e10d7494848c62b8310b837715b9c2df5\">fc4ea60</a></td><td><code>Add more alpine.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8766a06afcc0a76fad016536518027cbefc03b02\">8766a06</a></td><td><code>build/pkgs/_prereq/distros/alpine.txt: Add coreutils</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ebfc9ed3c2b88cf557fda78ea4dec441913018d\">0ebfc9e</a></td><td><code>build/pkgs/{graphviz,qhull,r}/distros/alpine.txt: Add non-dev packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3abd3bb0f4028a5e88c509af7bc919dea51e5f0\">b3abd3b</a></td><td><code>build/pkgs/mpfr/distros/alpine.txt: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30988eadd01f044ca7840c63aa06e8ded08706ba\">30988ea</a></td><td><code>build/pkgs/flint/spkg-install.in: Use -D_GNU_SOURCE</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/829a7d0f502c3c43f4fbbc7814747467de1e0a9d\">829a7d0</a></td><td><code>mpc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3ef3d465b2156875320026e472be65581ae7964\">d3ef3d4</a></td><td><code>correct flags of flint and arb for musl libc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd34cd53eaacf213aaf874411b7f696554096f33\">bd34cd5</a></td><td><code>build/pkgs/giac/spkg-install.in: Add workaround for musl libc</code></td></tr></table>\n",
    "created_at": "2022-06-18T22:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629726",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2575abfb95d8a68cd8a145028d0b5c79b53a3ca6">2575abf</a></td><td><code>tox.ini, build/bin/write-dockerfile.sh, build/bin/sage-print-system-package-command: Add alpine</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc4ea60e10d7494848c62b8310b837715b9c2df5">fc4ea60</a></td><td><code>Add more alpine.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8766a06afcc0a76fad016536518027cbefc03b02">8766a06</a></td><td><code>build/pkgs/_prereq/distros/alpine.txt: Add coreutils</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ebfc9ed3c2b88cf557fda78ea4dec441913018d">0ebfc9e</a></td><td><code>build/pkgs/{graphviz,qhull,r}/distros/alpine.txt: Add non-dev packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3abd3bb0f4028a5e88c509af7bc919dea51e5f0">b3abd3b</a></td><td><code>build/pkgs/mpfr/distros/alpine.txt: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30988eadd01f044ca7840c63aa06e8ded08706ba">30988ea</a></td><td><code>build/pkgs/flint/spkg-install.in: Use -D_GNU_SOURCE</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/829a7d0f502c3c43f4fbbc7814747467de1e0a9d">829a7d0</a></td><td><code>mpc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3ef3d465b2156875320026e472be65581ae7964">d3ef3d4</a></td><td><code>correct flags of flint and arb for musl libc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd34cd53eaacf213aaf874411b7f696554096f33">bd34cd5</a></td><td><code>build/pkgs/giac/spkg-install.in: Add workaround for musl libc</code></td></tr></table>




---

archive/issue_comments_629727.json:
```json
{
    "body": "**Changing commit** from \"[1fe1e859086183d0fe6e86cda3b1227ff3a96501](https://github.com/sagemath/sagetrac-mirror/commit/1fe1e859086183d0fe6e86cda3b1227ff3a96501)\" to \"[bd34cd53eaacf213aaf874411b7f696554096f33](https://github.com/sagemath/sagetrac-mirror/commit/bd34cd53eaacf213aaf874411b7f696554096f33)\".",
    "created_at": "2022-06-18T22:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629727",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1fe1e859086183d0fe6e86cda3b1227ff3a96501](https://github.com/sagemath/sagetrac-mirror/commit/1fe1e859086183d0fe6e86cda3b1227ff3a96501)" to "[bd34cd53eaacf213aaf874411b7f696554096f33](https://github.com/sagemath/sagetrac-mirror/commit/bd34cd53eaacf213aaf874411b7f696554096f33)".



---

archive/issue_comments_629728.json:
```json
{
    "body": "**Changing commit** from \"[bd34cd53eaacf213aaf874411b7f696554096f33](https://github.com/sagemath/sagetrac-mirror/commit/bd34cd53eaacf213aaf874411b7f696554096f33)\" to \"[f453452abbc5f61a5eb0c0a98f52d22b7ae1206a](https://github.com/sagemath/sagetrac-mirror/commit/f453452abbc5f61a5eb0c0a98f52d22b7ae1206a)\".",
    "created_at": "2022-07-07T23:30:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629728",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bd34cd53eaacf213aaf874411b7f696554096f33](https://github.com/sagemath/sagetrac-mirror/commit/bd34cd53eaacf213aaf874411b7f696554096f33)" to "[f453452abbc5f61a5eb0c0a98f52d22b7ae1206a](https://github.com/sagemath/sagetrac-mirror/commit/f453452abbc5f61a5eb0c0a98f52d22b7ae1206a)".



---

archive/issue_comments_629729.json:
```json
{
    "body": "<a id='comment:60'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f453452abbc5f61a5eb0c0a98f52d22b7ae1206a\">f453452</a></td><td><code>Merge tag '9.7.beta4' into t/33083/system_package_information___tox_ini___gh_actions_for_alpine_linux</code></td></tr></table>\n",
    "created_at": "2022-07-07T23:30:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33083#issuecomment-629729",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f453452abbc5f61a5eb0c0a98f52d22b7ae1206a">f453452</a></td><td><code>Merge tag '9.7.beta4' into t/33083/system_package_information___tox_ini___gh_actions_for_alpine_linux</code></td></tr></table>




---

archive/issue_events_098683.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33083#event-98683"
}
```



---

archive/issue_events_098684.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33083",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33083#event-98684"
}
```
