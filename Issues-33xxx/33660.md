# Issue 33660: Modularization of sagelib: Break out separate package sagemath-combinat

archive/issues_033423.json:
```json
{
    "body": "This distribution package **sagemath-combinat** would [depend on sagemath-categories](https://62488f7aa5c73d4ec648d8d3--sagemath-tobias.netlify.app/developer/packaging_sage_library.html#hierarchy-of-distribution-packages) and would be a dependency of **sagemath-standard-no-symbolics**. \n\n- Relation to **sagemath-graphs** (for posets, ...) to be determined\n- Relation to **sagemath-singular** (for polynomials) to be determined\n- Which modules in `sage.combinat` need GAP? It comes in via `sage.groups.perm_gps`\n\nOther imports that are not covered by **sagemath-categories**:\n\n- `src/sage/combinat/binary_recurrence_sequences.py` uses number fields, finite fields, and `sage.functions.log`\n- `src/sage/combinat/cluster_algebra_quiver/` uses finite fields, `sage.geometry.fan`\n- `src/sage/combinat/colored_permutations.py` uses number fields\n- `src/sage/combinat/crystals/kirillov_reshetikhin.py`, `mv_polytopes.py` use `sage.geometry.polyhedron`\n- `src/sage/combinat/designs` uses `sage.schemes`, finite fields, GAP, `sage.groups.additive_abelian`, `sage.numerical.mip`, `sage.graphs`\n- `src/sage/combinat/finite_state_machine.py` uses `sage.symbolic`\n- `src/sage/combinat/k_regular_sequence.py` uses `sage.symbolic.operators`, `sage.functions`\n- `src/sage/combinat/k_tableau.py` uses `sage.functions.generalized`\n- `src/sage/combinat/lr_tableau.py` uses lrcalc\n- `src/sage/combinat/matrices/dancing_links.pyx` uses `sage.sat`, `sage.numerical.mip`\n- `src/sage/combinat/matrices/hadamard_matrix.py` uses finite fields, `sage.graphs.strongly_regular_db`\n- `src/sage/combinat/matrices/latin.py` uses GAP, finite fields\n- `src/sage/combinat/partition.py` uses FLINT, GAP\n- `src/sage/combinat/partition_algebra.py` uses `sage.functions`\n- `src/sage/combinat/partition_tuple.py` uses PARI\n- `src/sage/combinat/path_tableaux/frieze.py` uses `sage.functions.trig`, `sage.geometry.hyperbolic_space`\n- `src/sage/combinat/plane_partition.py` uses `sage.functions.trig` (but only for plotting)\n- `src/sage/combinat/posets/hasse_cython.pyx` has a compile-time dependency on FLINT (found with `git grep cimport src/sage/combinat`) for `Matrix_integer_dense`. Can this dependency be replaced by `Matrix_numpy_integer_dense`?\n- `src/sage/combinat/posets/posets.py` uses everything\n- `src/sage/combinat/ribbon_tableau.py` uses `sage.symbolic.ring`\n- `src/sage/combinat/root_system/associahedron.py` uses `sage.geometry.polyhedron`\n- TBD: letters r-z\n\nCompile-time dependencies:\n- `symmetrica` - Cython bindings in `sage.libs.symmetrica` make run-time imports (`late_import`) from `sage.combinat`, `sage.rings.polynomial` -- and `sage.functions` for `sqrt`\n\nRelated questions and tasks:\n- Deployment of GAP - possibly via #31404 (Replace most of sage.libs.gap with gappy) + cibuildwheel of gappy\n- Fast univariate and multivariate polynomials (over which rings??) without dependency on Singular - possibly via cibuildwheel of [python-flint](https://github.com/fredrik-johansson/python-flint), [flint-py](https://pypi.org/project/flint-py/), or [symengine](https://pypi.org/project/symengine/). Possible synergies with the SymPy project\n- [lrcalc](https://pypi.org/project/lrcalc/#files) needs cibuildwheel workflow\n- use of `sage_eval` in constructors\n\nPart of Meta-ticket #29705: Modularize sagelib into separate distributions (pip-installable packages) sagemath-...\n\n\nCC:  @anneschilling\n\nIssue created by migration from https://trac.sagemath.org/ticket/33660\n\n",
    "created_at": "2022-04-08T17:59:47Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Modularization of sagelib: Break out separate package sagemath-combinat",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33660",
    "user": "https://github.com/mkoeppe"
}
```
This distribution package **sagemath-combinat** would [depend on sagemath-categories](https://62488f7aa5c73d4ec648d8d3--sagemath-tobias.netlify.app/developer/packaging_sage_library.html#hierarchy-of-distribution-packages) and would be a dependency of **sagemath-standard-no-symbolics**. 

- Relation to **sagemath-graphs** (for posets, ...) to be determined
- Relation to **sagemath-singular** (for polynomials) to be determined
- Which modules in `sage.combinat` need GAP? It comes in via `sage.groups.perm_gps`

Other imports that are not covered by **sagemath-categories**:

- `src/sage/combinat/binary_recurrence_sequences.py` uses number fields, finite fields, and `sage.functions.log`
- `src/sage/combinat/cluster_algebra_quiver/` uses finite fields, `sage.geometry.fan`
- `src/sage/combinat/colored_permutations.py` uses number fields
- `src/sage/combinat/crystals/kirillov_reshetikhin.py`, `mv_polytopes.py` use `sage.geometry.polyhedron`
- `src/sage/combinat/designs` uses `sage.schemes`, finite fields, GAP, `sage.groups.additive_abelian`, `sage.numerical.mip`, `sage.graphs`
- `src/sage/combinat/finite_state_machine.py` uses `sage.symbolic`
- `src/sage/combinat/k_regular_sequence.py` uses `sage.symbolic.operators`, `sage.functions`
- `src/sage/combinat/k_tableau.py` uses `sage.functions.generalized`
- `src/sage/combinat/lr_tableau.py` uses lrcalc
- `src/sage/combinat/matrices/dancing_links.pyx` uses `sage.sat`, `sage.numerical.mip`
- `src/sage/combinat/matrices/hadamard_matrix.py` uses finite fields, `sage.graphs.strongly_regular_db`
- `src/sage/combinat/matrices/latin.py` uses GAP, finite fields
- `src/sage/combinat/partition.py` uses FLINT, GAP
- `src/sage/combinat/partition_algebra.py` uses `sage.functions`
- `src/sage/combinat/partition_tuple.py` uses PARI
- `src/sage/combinat/path_tableaux/frieze.py` uses `sage.functions.trig`, `sage.geometry.hyperbolic_space`
- `src/sage/combinat/plane_partition.py` uses `sage.functions.trig` (but only for plotting)
- `src/sage/combinat/posets/hasse_cython.pyx` has a compile-time dependency on FLINT (found with `git grep cimport src/sage/combinat`) for `Matrix_integer_dense`. Can this dependency be replaced by `Matrix_numpy_integer_dense`?
- `src/sage/combinat/posets/posets.py` uses everything
- `src/sage/combinat/ribbon_tableau.py` uses `sage.symbolic.ring`
- `src/sage/combinat/root_system/associahedron.py` uses `sage.geometry.polyhedron`
- TBD: letters r-z

Compile-time dependencies:
- `symmetrica` - Cython bindings in `sage.libs.symmetrica` make run-time imports (`late_import`) from `sage.combinat`, `sage.rings.polynomial` -- and `sage.functions` for `sqrt`

Related questions and tasks:
- Deployment of GAP - possibly via #31404 (Replace most of sage.libs.gap with gappy) + cibuildwheel of gappy
- Fast univariate and multivariate polynomials (over which rings??) without dependency on Singular - possibly via cibuildwheel of [python-flint](https://github.com/fredrik-johansson/python-flint), [flint-py](https://pypi.org/project/flint-py/), or [symengine](https://pypi.org/project/symengine/). Possible synergies with the SymPy project
- [lrcalc](https://pypi.org/project/lrcalc/#files) needs cibuildwheel workflow
- use of `sage_eval` in constructors

Part of Meta-ticket #29705: Modularize sagelib into separate distributions (pip-installable packages) sagemath-...


CC:  @anneschilling

Issue created by migration from https://trac.sagemath.org/ticket/33660





---

archive/issue_events_088504.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-08T19:26:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33660",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33660#event-88504"
}
```
