# Issue 33375: create dot_sage function returning a pathlib.Path object

archive/issues_033138.json:
```json
{
    "body": "To be used when possible instead of DOT_SAGE.\n\nThis simplifies the code, no more \"os.path.join\" everywhere.\n\n\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/33375\n\n",
    "closed_at": "2022-05-03T17:47:54Z",
    "created_at": "2022-02-18T19:11:09Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "create dot_sage function returning a pathlib.Path object",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33375",
    "user": "https://github.com/fchapoton"
}
```
To be used when possible instead of DOT_SAGE.

This simplifies the code, no more "os.path.join" everywhere.



Author: Frédéric Chapoton

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/33375





---

archive/issue_comments_665441.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-02-18T19:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665441",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_665442.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[c789deb](https://github.com/sagemath/sagetrac-mirror/commit/c789deb87f5e14f0b52093b9f8b30695a60fc8c5)|`let DOT_SAGE be a pathlib.Path object`|",
    "created_at": "2022-02-18T19:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665442",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[c789deb](https://github.com/sagemath/sagetrac-mirror/commit/c789deb87f5e14f0b52093b9f8b30695a60fc8c5)|`let DOT_SAGE be a pathlib.Path object`|



---

archive/issue_comments_665443.json:
```json
{
    "body": "Changing commit from \"\" to \"c789deb87f5e14f0b52093b9f8b30695a60fc8c5\"",
    "created_at": "2022-02-18T19:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665443",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "c789deb87f5e14f0b52093b9f8b30695a60fc8c5"



---

archive/issue_comments_665444.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/33375\"",
    "created_at": "2022-02-18T19:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665444",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/33375"



---

archive/issue_comments_665445.json:
```json
{
    "body": "<a id='comment:2'></a>\n-1; capitalized variables in `sage.env` are strings, not typed",
    "created_at": "2022-02-18T19:17:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665445",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
-1; capitalized variables in `sage.env` are strings, not typed



---

archive/issue_comments_665446.json:
```json
{
    "body": "<a id='comment:3'></a>\nBy the word of god almighty ?",
    "created_at": "2022-02-18T19:26:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665446",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
By the word of god almighty ?



---

archive/issue_comments_665447.json:
```json
{
    "body": "<a id='comment:4'></a>\nFor uniformity?",
    "created_at": "2022-02-18T19:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665447",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
For uniformity?



---

archive/issue_comments_665448.json:
```json
{
    "body": "<a id='comment:5'></a>\nPrevious discussion in the same direction in #30855",
    "created_at": "2022-02-18T19:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665448",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Previous discussion in the same direction in #30855



---

archive/issue_comments_665449.json:
```json
{
    "body": "Changing commit from \"c789deb87f5e14f0b52093b9f8b30695a60fc8c5\" to \"86f1620a743d897e240b95e084faf73f47ce1bdf\"",
    "created_at": "2022-02-18T19:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665449",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c789deb87f5e14f0b52093b9f8b30695a60fc8c5" to "86f1620a743d897e240b95e084faf73f47ce1bdf"



---

archive/issue_comments_665450.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------|\n|[86f1620](https://github.com/sagemath/sagetrac-mirror/commit/86f1620a743d897e240b95e084faf73f47ce1bdf)|`fix details`|",
    "created_at": "2022-02-18T19:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665450",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------|
|[86f1620](https://github.com/sagemath/sagetrac-mirror/commit/86f1620a743d897e240b95e084faf73f47ce1bdf)|`fix details`|



---

archive/issue_comments_665451.json:
```json
{
    "body": "<a id='comment:7'></a>\nSpecifically on `DOT_SAGE`, I think that providing a function `dot_sage` would be better. We should no longer operate in a model in which library code can assume that \"startup code\" has been run and created this directory.",
    "created_at": "2022-02-18T19:41:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665451",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Specifically on `DOT_SAGE`, I think that providing a function `dot_sage` would be better. We should no longer operate in a model in which library code can assume that "startup code" has been run and created this directory.



---

archive/issue_comments_665452.json:
```json
{
    "body": "<a id='comment:8'></a>\nCurrently this directory is created at import-time in `src/sage/misc/misc.py` and also in `src/bin/sage`. This really needs to be cleaned up so that the Sage library becomes a more well-behaved Python library.",
    "created_at": "2022-02-18T19:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665452",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Currently this directory is created at import-time in `src/sage/misc/misc.py` and also in `src/bin/sage`. This really needs to be cleaned up so that the Sage library becomes a more well-behaved Python library.



---

archive/issue_comments_665453.json:
```json
{
    "body": "<a id='comment:9'></a>\nThe function `dot_sage` could have the return type that you like and would create the directory if it does not exist yet.",
    "created_at": "2022-02-18T19:49:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665453",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
The function `dot_sage` could have the return type that you like and would create the directory if it does not exist yet.



---

archive/issue_comments_665454.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-02-18T23:22:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665454",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_665455.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[692f547](https://github.com/sagemath/sagetrac-mirror/commit/692f547c6d1a4c44a8ce7402199fee2a1cff8273)|`fixing some issues in expect interfaces`|",
    "created_at": "2022-02-19T10:07:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665455",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[692f547](https://github.com/sagemath/sagetrac-mirror/commit/692f547c6d1a4c44a8ce7402199fee2a1cff8273)|`fixing some issues in expect interfaces`|



---

archive/issue_comments_665456.json:
```json
{
    "body": "Changing commit from \"86f1620a743d897e240b95e084faf73f47ce1bdf\" to \"692f547c6d1a4c44a8ce7402199fee2a1cff8273\"",
    "created_at": "2022-02-19T10:07:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665456",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "86f1620a743d897e240b95e084faf73f47ce1bdf" to "692f547c6d1a4c44a8ce7402199fee2a1cff8273"



---

archive/issue_comments_665457.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------|\n|[6f154a6](https://github.com/sagemath/sagetrac-mirror/commit/6f154a66c13938627b531503df53ac752d45f676)|`details fixed`|",
    "created_at": "2022-02-19T12:28:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665457",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |               |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------|
|[6f154a6](https://github.com/sagemath/sagetrac-mirror/commit/6f154a66c13938627b531503df53ac752d45f676)|`details fixed`|



---

archive/issue_comments_665458.json:
```json
{
    "body": "Changing commit from \"692f547c6d1a4c44a8ce7402199fee2a1cff8273\" to \"6f154a66c13938627b531503df53ac752d45f676\"",
    "created_at": "2022-02-19T12:28:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665458",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "692f547c6d1a4c44a8ce7402199fee2a1cff8273" to "6f154a66c13938627b531503df53ac752d45f676"



---

archive/issue_comments_665459.json:
```json
{
    "body": "Changing commit from \"6f154a66c13938627b531503df53ac752d45f676\" to \"4a06ec7c9ef932177f326c2936d3dccbeb92f56c\"",
    "created_at": "2022-02-19T16:16:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665459",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6f154a66c13938627b531503df53ac752d45f676" to "4a06ec7c9ef932177f326c2936d3dccbeb92f56c"



---

archive/issue_comments_665460.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------|\n|[4a06ec7](https://github.com/sagemath/sagetrac-mirror/commit/4a06ec7c9ef932177f326c2936d3dccbeb92f56c)|`some fixes again`|",
    "created_at": "2022-02-19T16:16:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665460",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------|
|[4a06ec7](https://github.com/sagemath/sagetrac-mirror/commit/4a06ec7c9ef932177f326c2936d3dccbeb92f56c)|`some fixes again`|



---

archive/issue_comments_665461.json:
```json
{
    "body": "<a id='comment:14'></a>\nhuge +1, the changes show how advantageous and more readable it is to have path variables really as `Paths` instead of strings.",
    "created_at": "2022-02-19T19:08:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665461",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:14'></a>
huge +1, the changes show how advantageous and more readable it is to have path variables really as `Paths` instead of strings.



---

archive/issue_comments_665462.json:
```json
{
    "body": "Changing commit from \"4a06ec7c9ef932177f326c2936d3dccbeb92f56c\" to \"9a91d0c6870efe1b254e683a553191daff101916\"",
    "created_at": "2022-02-20T07:43:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665462",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4a06ec7c9ef932177f326c2936d3dccbeb92f56c" to "9a91d0c6870efe1b254e683a553191daff101916"



---

archive/issue_comments_665463.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------|\n|[9a91d0c](https://github.com/sagemath/sagetrac-mirror/commit/9a91d0c6870efe1b254e683a553191daff101916)|`more fixes`|",
    "created_at": "2022-02-20T07:43:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665463",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |            |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------|
|[9a91d0c](https://github.com/sagemath/sagetrac-mirror/commit/9a91d0c6870efe1b254e683a553191daff101916)|`more fixes`|



---

archive/issue_comments_665464.json:
```json
{
    "body": "Changing commit from \"9a91d0c6870efe1b254e683a553191daff101916\" to \"012cc266588228e9d329870fc422dd78791a2a6c\"",
    "created_at": "2022-02-20T13:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665464",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9a91d0c6870efe1b254e683a553191daff101916" to "012cc266588228e9d329870fc422dd78791a2a6c"



---

archive/issue_comments_665465.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|\n|[012cc26](https://github.com/sagemath/sagetrac-mirror/commit/012cc266588228e9d329870fc422dd78791a2a6c)|`proposal for dot_sage function`|",
    "created_at": "2022-02-20T13:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665465",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
|[012cc26](https://github.com/sagemath/sagetrac-mirror/commit/012cc266588228e9d329870fc422dd78791a2a6c)|`proposal for dot_sage function`|



---

archive/issue_comments_665466.json:
```json
{
    "body": "<a id='comment:17'></a>\nhmm, qepcad is using \"sys.stdout\" as a logfile, which does not look quite right. I removed that possibility.\n\nAbout the proposed function \"dot_sage\", where should it go ? I made a first sketch in misc/misc.py",
    "created_at": "2022-02-20T13:30:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665466",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:17'></a>
hmm, qepcad is using "sys.stdout" as a logfile, which does not look quite right. I removed that possibility.

About the proposed function "dot_sage", where should it go ? I made a first sketch in misc/misc.py



---

archive/issue_comments_665467.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[19ea7eb](https://github.com/sagemath/sagetrac-mirror/commit/19ea7ebe57fbe198a2e0ea36acbd1fa9c99c10af)|`parentheses for safety`|",
    "created_at": "2022-02-20T13:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665467",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[19ea7eb](https://github.com/sagemath/sagetrac-mirror/commit/19ea7ebe57fbe198a2e0ea36acbd1fa9c99c10af)|`parentheses for safety`|



---

archive/issue_comments_665468.json:
```json
{
    "body": "Changing commit from \"012cc266588228e9d329870fc422dd78791a2a6c\" to \"19ea7ebe57fbe198a2e0ea36acbd1fa9c99c10af\"",
    "created_at": "2022-02-20T13:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665468",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "012cc266588228e9d329870fc422dd78791a2a6c" to "19ea7ebe57fbe198a2e0ea36acbd1fa9c99c10af"



---

archive/issue_comments_665469.json:
```json
{
    "body": "Changing commit from \"19ea7ebe57fbe198a2e0ea36acbd1fa9c99c10af\" to \"4359c88aac76fa036d5f6c9b6bd0556dd08fceed\"",
    "created_at": "2022-02-20T14:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665469",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "19ea7ebe57fbe198a2e0ea36acbd1fa9c99c10af" to "4359c88aac76fa036d5f6c9b6bd0556dd08fceed"



---

archive/issue_comments_665470.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------|\n|[4359c88](https://github.com/sagemath/sagetrac-mirror/commit/4359c88aac76fa036d5f6c9b6bd0556dd08fceed)|`pyflakes fix`|",
    "created_at": "2022-02-20T14:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665470",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |              |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------|
|[4359c88](https://github.com/sagemath/sagetrac-mirror/commit/4359c88aac76fa036d5f6c9b6bd0556dd08fceed)|`pyflakes fix`|



---

archive/issue_comments_665471.json:
```json
{
    "body": "<a id='comment:20'></a>\nNote `sage_makedirs` is going away in #32987",
    "created_at": "2022-02-20T18:38:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665471",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>
Note `sage_makedirs` is going away in #32987



---

archive/issue_comments_665472.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [chapoton](#comment%3A17):\n> About the proposed function \"dot_sage\", where should it go ? I made a first sketch in misc/misc.py\n\n\nBest not to put more into `sage.misc.misc` - I'm in the process of removing environment bits from it (see for example #32986). I would suggest to just put it in a separate module `sage.misc.dot_sage`. For modularization context: #29941 puts things like this in a distribution **sagemath-environment** - which does not have any dependencies",
    "created_at": "2022-02-20T18:44:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665472",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
Replying to [chapoton](#comment%3A17):
> About the proposed function "dot_sage", where should it go ? I made a first sketch in misc/misc.py


Best not to put more into `sage.misc.misc` - I'm in the process of removing environment bits from it (see for example #32986). I would suggest to just put it in a separate module `sage.misc.dot_sage`. For modularization context: #29941 puts things like this in a distribution **sagemath-environment** - which does not have any dependencies



---

archive/issue_comments_665473.json:
```json
{
    "body": "<a id='comment:22'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[50c7bf1](https://github.com/sagemath/sagetrac-mirror/commit/50c7bf11f745172283231d29384690d9fa7f2b27)|`Merge branch 'u/chapoton/33375' in 9.6.b2`|\n|[7bbb9f5](https://github.com/sagemath/sagetrac-mirror/commit/7bbb9f5dc2a48c72133c2cf172daa6bed6811910)|`new file dot_sage.py`|",
    "created_at": "2022-02-21T09:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665473",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[50c7bf1](https://github.com/sagemath/sagetrac-mirror/commit/50c7bf11f745172283231d29384690d9fa7f2b27)|`Merge branch 'u/chapoton/33375' in 9.6.b2`|
|[7bbb9f5](https://github.com/sagemath/sagetrac-mirror/commit/7bbb9f5dc2a48c72133c2cf172daa6bed6811910)|`new file dot_sage.py`|



---

archive/issue_comments_665474.json:
```json
{
    "body": "Changing commit from \"4359c88aac76fa036d5f6c9b6bd0556dd08fceed\" to \"7bbb9f5dc2a48c72133c2cf172daa6bed6811910\"",
    "created_at": "2022-02-21T09:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665474",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4359c88aac76fa036d5f6c9b6bd0556dd08fceed" to "7bbb9f5dc2a48c72133c2cf172daa6bed6811910"



---

archive/issue_comments_665475.json:
```json
{
    "body": "<a id='comment:23'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n|[50a83dd](https://github.com/sagemath/sagetrac-mirror/commit/50a83dd0e94d1ddc2e42ce2566dd539766a54dba)|`now working dot_sage`|",
    "created_at": "2022-02-21T09:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665475",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
|[50a83dd](https://github.com/sagemath/sagetrac-mirror/commit/50a83dd0e94d1ddc2e42ce2566dd539766a54dba)|`now working dot_sage`|



---

archive/issue_comments_665476.json:
```json
{
    "body": "Changing commit from \"7bbb9f5dc2a48c72133c2cf172daa6bed6811910\" to \"50a83dd0e94d1ddc2e42ce2566dd539766a54dba\"",
    "created_at": "2022-02-21T09:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665476",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7bbb9f5dc2a48c72133c2cf172daa6bed6811910" to "50a83dd0e94d1ddc2e42ce2566dd539766a54dba"



---

archive/issue_comments_665477.json:
```json
{
    "body": "<a id='comment:24'></a>\nmaybe the `dot_sage()` path should be cached in some way ? how ?",
    "created_at": "2022-02-21T09:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665477",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>
maybe the `dot_sage()` path should be cached in some way ? how ?



---

archive/issue_comments_665478.json:
```json
{
    "body": "<a id='comment:25'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[cde9954](https://github.com/sagemath/sagetrac-mirror/commit/cde99548eaa6441b77889c7052de0817a268f37c)|`use dot_sage in interfaces`|",
    "created_at": "2022-02-21T11:05:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665478",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[cde9954](https://github.com/sagemath/sagetrac-mirror/commit/cde99548eaa6441b77889c7052de0817a268f37c)|`use dot_sage in interfaces`|



---

archive/issue_comments_665479.json:
```json
{
    "body": "Changing commit from \"50a83dd0e94d1ddc2e42ce2566dd539766a54dba\" to \"cde99548eaa6441b77889c7052de0817a268f37c\"",
    "created_at": "2022-02-21T11:05:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665479",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "50a83dd0e94d1ddc2e42ce2566dd539766a54dba" to "cde99548eaa6441b77889c7052de0817a268f37c"



---

archive/issue_comments_665480.json:
```json
{
    "body": "<a id='comment:26'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[c004db1](https://github.com/sagemath/sagetrac-mirror/commit/c004db10150a03e1ca842f250a1cc46ce32bb27d)|`more usage of dot_sage`|",
    "created_at": "2022-02-21T12:05:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665480",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[c004db1](https://github.com/sagemath/sagetrac-mirror/commit/c004db10150a03e1ca842f250a1cc46ce32bb27d)|`more usage of dot_sage`|



---

archive/issue_comments_665481.json:
```json
{
    "body": "Changing commit from \"cde99548eaa6441b77889c7052de0817a268f37c\" to \"c004db10150a03e1ca842f250a1cc46ce32bb27d\"",
    "created_at": "2022-02-21T12:05:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665481",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cde99548eaa6441b77889c7052de0817a268f37c" to "c004db10150a03e1ca842f250a1cc46ce32bb27d"



---

archive/issue_comments_665482.json:
```json
{
    "body": "Changing commit from \"c004db10150a03e1ca842f250a1cc46ce32bb27d\" to \"2ce961751f54de12ee62598017e99444ffec7b1d\"",
    "created_at": "2022-02-21T13:33:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665482",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c004db10150a03e1ca842f250a1cc46ce32bb27d" to "2ce961751f54de12ee62598017e99444ffec7b1d"



---

archive/issue_comments_665483.json:
```json
{
    "body": "<a id='comment:27'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[2ce9617](https://github.com/sagemath/sagetrac-mirror/commit/2ce961751f54de12ee62598017e99444ffec7b1d)|`trying to use dot_sage`|",
    "created_at": "2022-02-21T13:33:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665483",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[2ce9617](https://github.com/sagemath/sagetrac-mirror/commit/2ce961751f54de12ee62598017e99444ffec7b1d)|`trying to use dot_sage`|



---

archive/issue_comments_665484.json:
```json
{
    "body": "<a id='comment:28'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[7da31fc](https://github.com/sagemath/sagetrac-mirror/commit/7da31fc6589483dd847eb865fa5d2355108eb6cd)|`some caching for dot_sage`|",
    "created_at": "2022-02-21T13:42:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665484",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[7da31fc](https://github.com/sagemath/sagetrac-mirror/commit/7da31fc6589483dd847eb865fa5d2355108eb6cd)|`some caching for dot_sage`|



---

archive/issue_comments_665485.json:
```json
{
    "body": "Changing commit from \"2ce961751f54de12ee62598017e99444ffec7b1d\" to \"7da31fc6589483dd847eb865fa5d2355108eb6cd\"",
    "created_at": "2022-02-21T13:42:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665485",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2ce961751f54de12ee62598017e99444ffec7b1d" to "7da31fc6589483dd847eb865fa5d2355108eb6cd"



---

archive/issue_comments_665486.json:
```json
{
    "body": "Changing commit from \"7da31fc6589483dd847eb865fa5d2355108eb6cd\" to \"b80de596bdfa717ed08825d2cfdd64c2985a920b\"",
    "created_at": "2022-02-21T14:00:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665486",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7da31fc6589483dd847eb865fa5d2355108eb6cd" to "b80de596bdfa717ed08825d2cfdd64c2985a920b"



---

archive/issue_comments_665487.json:
```json
{
    "body": "<a id='comment:29'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[b80de59](https://github.com/sagemath/sagetrac-mirror/commit/b80de596bdfa717ed08825d2cfdd64c2985a920b)|`dot_sage : adding message when space in name`|",
    "created_at": "2022-02-21T14:00:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665487",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[b80de59](https://github.com/sagemath/sagetrac-mirror/commit/b80de596bdfa717ed08825d2cfdd64c2985a920b)|`dot_sage : adding message when space in name`|



---

archive/issue_comments_665488.json:
```json
{
    "body": "<a id='comment:30'></a>\nLooking good but I'd say `DOT_SAGE` shouldn't just be removed from sage.env; user code may depend on it",
    "created_at": "2022-02-21T19:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665488",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
Looking good but I'd say `DOT_SAGE` shouldn't just be removed from sage.env; user code may depend on it



---

archive/issue_comments_665489.json:
```json
{
    "body": "<a id='comment:31'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------|\n|[962cf00](https://github.com/sagemath/sagetrac-mirror/commit/962cf00d768981c7466c083bf65842b73a839f12)|`some fixes`|",
    "created_at": "2022-02-22T07:59:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665489",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |            |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------|
|[962cf00](https://github.com/sagemath/sagetrac-mirror/commit/962cf00d768981c7466c083bf65842b73a839f12)|`some fixes`|



---

archive/issue_comments_665490.json:
```json
{
    "body": "Changing commit from \"b80de596bdfa717ed08825d2cfdd64c2985a920b\" to \"962cf00d768981c7466c083bf65842b73a839f12\"",
    "created_at": "2022-02-22T07:59:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665490",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b80de596bdfa717ed08825d2cfdd64c2985a920b" to "962cf00d768981c7466c083bf65842b73a839f12"



---

archive/issue_comments_665491.json:
```json
{
    "body": "<a id='comment:32'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------|\n|[9327aa9](https://github.com/sagemath/sagetrac-mirror/commit/9327aa91adc7b07eab6c55272a0084c5eebb0096)|`fix doctest`|",
    "created_at": "2022-02-22T13:40:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665491",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------|
|[9327aa9](https://github.com/sagemath/sagetrac-mirror/commit/9327aa91adc7b07eab6c55272a0084c5eebb0096)|`fix doctest`|



---

archive/issue_comments_665492.json:
```json
{
    "body": "Changing commit from \"962cf00d768981c7466c083bf65842b73a839f12\" to \"9327aa91adc7b07eab6c55272a0084c5eebb0096\"",
    "created_at": "2022-02-22T13:40:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665492",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "962cf00d768981c7466c083bf65842b73a839f12" to "9327aa91adc7b07eab6c55272a0084c5eebb0096"



---

archive/issue_comments_665493.json:
```json
{
    "body": "<a id='comment:33'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n|[8ab7e60](https://github.com/sagemath/sagetrac-mirror/commit/8ab7e605e084cb54efad35298c0f3006675033dd)|`fix pyflakes warning`|",
    "created_at": "2022-02-23T13:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665493",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
|[8ab7e60](https://github.com/sagemath/sagetrac-mirror/commit/8ab7e605e084cb54efad35298c0f3006675033dd)|`fix pyflakes warning`|



---

archive/issue_comments_665494.json:
```json
{
    "body": "Changing commit from \"9327aa91adc7b07eab6c55272a0084c5eebb0096\" to \"8ab7e605e084cb54efad35298c0f3006675033dd\"",
    "created_at": "2022-02-23T13:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665494",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9327aa91adc7b07eab6c55272a0084c5eebb0096" to "8ab7e605e084cb54efad35298c0f3006675033dd"



---

archive/issue_events_099051.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "rename": {
        "from": "make DOT_SAGE a pathlib.Path object",
        "to": "create dot_sage function returning a pathlib.Path object"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33375#event-99051"
}
```



---

archive/issue_comments_665495.json:
```json
{
    "body": "<a id='comment:34'></a>\nDoctests do pass, so back to needs review",
    "created_at": "2022-02-23T13:39:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665495",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:34'></a>
Doctests do pass, so back to needs review



---

archive/issue_comments_665496.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-02-23T13:39:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665496",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_665497.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n+To be used when possible instead of DOT_SAGE.\n+\n This simplifies the code, no more \"os.path.join\" everywhere.\n+\n+\n``````\n",
    "created_at": "2022-02-23T13:39:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665497",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,5 @@
+To be used when possible instead of DOT_SAGE.
+
 This simplifies the code, no more "os.path.join" everywhere.
+
+
``````




---

archive/issue_comments_665498.json:
```json
{
    "body": "<a id='comment:35'></a>\nStill[comment:2](#comment%3A2), and moreover I think `sage.misc.dot_sage` should use `sage.env`, not the other way around. Note that `var` defined in `sage.env` not only gets values from environment variables but also from `sage_conf`.\n\nI think we can change the location of `DOT_SAGE` on Cygwin to be unconditionally `/home/.sage` to disentangle it from the \"space in directory name\" warning.",
    "created_at": "2022-02-23T17:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665498",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>
Still[comment:2](#comment%3A2), and moreover I think `sage.misc.dot_sage` should use `sage.env`, not the other way around. Note that `var` defined in `sage.env` not only gets values from environment variables but also from `sage_conf`.

I think we can change the location of `DOT_SAGE` on Cygwin to be unconditionally `/home/.sage` to disentangle it from the "space in directory name" warning.



---

archive/issue_comments_665499.json:
```json
{
    "body": "<a id='comment:36'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[64e210a](https://github.com/sagemath/sagetrac-mirror/commit/64e210a5366508c7e40736172601b66f5e7efae2)|`changes in dot_sage`|",
    "created_at": "2022-02-23T18:52:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665499",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[64e210a](https://github.com/sagemath/sagetrac-mirror/commit/64e210a5366508c7e40736172601b66f5e7efae2)|`changes in dot_sage`|



---

archive/issue_comments_665500.json:
```json
{
    "body": "Changing commit from \"8ab7e605e084cb54efad35298c0f3006675033dd\" to \"64e210a5366508c7e40736172601b66f5e7efae2\"",
    "created_at": "2022-02-23T18:52:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665500",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8ab7e605e084cb54efad35298c0f3006675033dd" to "64e210a5366508c7e40736172601b66f5e7efae2"



---

archive/issue_comments_665501.json:
```json
{
    "body": "<a id='comment:37'></a>\nIf \"dot_sage\" uses \"DOT_SAGE\" from \"sage.env\", then once again we are doing twice the job of deciding which folder to use as \".sage\". The logic is rather unclear to me.",
    "created_at": "2022-02-23T18:54:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665501",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:37'></a>
If "dot_sage" uses "DOT_SAGE" from "sage.env", then once again we are doing twice the job of deciding which folder to use as ".sage". The logic is rather unclear to me.



---

archive/issue_comments_665502.json:
```json
{
    "body": "<a id='comment:38'></a>\nShouldn't \"DOT_SAGE\" in `env` be deprecated, or at least have a comment explaining that `dot_sage` should be used whenever possible?\n\nI'm also not sure if the misc package is the right place, since similar refactorings could (and should) be done for all path-variables in `env` so one would end-up with quite a few helper modules in `misc`.",
    "created_at": "2022-02-23T22:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665502",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:38'></a>
Shouldn't "DOT_SAGE" in `env` be deprecated, or at least have a comment explaining that `dot_sage` should be used whenever possible?

I'm also not sure if the misc package is the right place, since similar refactorings could (and should) be done for all path-variables in `env` so one would end-up with quite a few helper modules in `misc`.



---

archive/issue_comments_665503.json:
```json
{
    "body": "<a id='comment:39'></a>\nReplying to [gh-tobiasdiez](#comment%3A38):\n> similar refactorings could (and should) be done for all path-variables in `env`\n\n\nNot really. Most of these paths are low-level information for which we already have a high-level interface in `sage.features`. For example `CONWAY_POLYNOMIALS_DATA_DIR` is exposed via `src/sage/features/databases.py`.",
    "created_at": "2022-02-23T22:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665503",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>
Replying to [gh-tobiasdiez](#comment%3A38):
> similar refactorings could (and should) be done for all path-variables in `env`


Not really. Most of these paths are low-level information for which we already have a high-level interface in `sage.features`. For example `CONWAY_POLYNOMIALS_DATA_DIR` is exposed via `src/sage/features/databases.py`.



---

archive/issue_comments_665504.json:
```json
{
    "body": "Changing commit from \"64e210a5366508c7e40736172601b66f5e7efae2\" to \"0d87d713135e7a42b6a764504f8195dc4ae9d831\"",
    "created_at": "2022-02-28T15:11:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665504",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "64e210a5366508c7e40736172601b66f5e7efae2" to "0d87d713135e7a42b6a764504f8195dc4ae9d831"



---

archive/issue_comments_665505.json:
```json
{
    "body": "<a id='comment:40'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[0d87d71](https://github.com/sagemath/sagetrac-mirror/commit/0d87d713135e7a42b6a764504f8195dc4ae9d831)|`Merge branch 'u/chapoton/33375' in 9.6.beta3`|",
    "created_at": "2022-02-28T15:11:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665505",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[0d87d71](https://github.com/sagemath/sagetrac-mirror/commit/0d87d713135e7a42b6a764504f8195dc4ae9d831)|`Merge branch 'u/chapoton/33375' in 9.6.beta3`|



---

archive/issue_comments_665506.json:
```json
{
    "body": "<a id='comment:41'></a>\nplease help me with[comment:37](#comment%3A37)",
    "created_at": "2022-03-04T09:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665506",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:41'></a>
please help me with[comment:37](#comment%3A37)



---

archive/issue_comments_665507.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-03-27T18:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665507",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_665508.json:
```json
{
    "body": "<a id='comment:43'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[b4db208](https://github.com/sagemath/sagetrac-mirror/commit/b4db2080b5091b01daafb6289486ef5359c59f4f)|`Merge branch 'u/chapoton/33375' in 9.6.b6`|",
    "created_at": "2022-04-02T16:18:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665508",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[b4db208](https://github.com/sagemath/sagetrac-mirror/commit/b4db2080b5091b01daafb6289486ef5359c59f4f)|`Merge branch 'u/chapoton/33375' in 9.6.b6`|



---

archive/issue_comments_665509.json:
```json
{
    "body": "Changing commit from \"0d87d713135e7a42b6a764504f8195dc4ae9d831\" to \"b4db2080b5091b01daafb6289486ef5359c59f4f\"",
    "created_at": "2022-04-02T16:18:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665509",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0d87d713135e7a42b6a764504f8195dc4ae9d831" to "b4db2080b5091b01daafb6289486ef5359c59f4f"



---

archive/issue_events_099052.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33375#event-99052"
}
```



---

archive/issue_comments_665510.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2022-05-03T17:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665510",
    "user": "https://github.com/fchapoton"
}
```

Resolution: invalid



---

archive/issue_comments_665511.json:
```json
{
    "body": "Changing commit from \"b4db2080b5091b01daafb6289486ef5359c59f4f\" to \"\"",
    "created_at": "2022-05-03T17:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665511",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "b4db2080b5091b01daafb6289486ef5359c59f4f" to ""



---

archive/issue_comments_665512.json:
```json
{
    "body": "Changing branch from \"u/chapoton/33375\" to \"\"",
    "created_at": "2022-05-03T17:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665512",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "u/chapoton/33375" to ""



---

archive/issue_events_099053.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-05-03T17:47:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33375#event-99053"
}
```



---

archive/issue_events_099054.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-05-03T17:47:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33375#event-99054"
}
```



---

archive/issue_events_099055.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-05-03T17:47:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33375#event-99055"
}
```



---

archive/issue_comments_665513.json:
```json
{
    "body": "<a id='comment:45'></a>\ndropping this one into firebin",
    "created_at": "2022-05-03T17:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33375",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33375#issuecomment-665513",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:45'></a>
dropping this one into firebin
