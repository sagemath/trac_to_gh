# Issue 33834: Fix map_reduce doctest

archive/issues_033597.json:
```json
{
    "body": "One doctest continuously fails in the build workflow. I couldn't reproduce the error locally, but hopefully it goes away by slightly increasing the timeout from 1sec to 1.5sec.\n\nWe also extend the doctest to provide a bit more debug information, and to actually test parallel processing by using two roots and thus two threads.\n\nLocal debug output:\n\n```\nFile \"sage/parallel/map_reduce.py\", line 1148, in sage.parallel.map_reduce.RESetMapReduce.start_workers\nFailed example:\n    S.start_workers(); sleep(float(0.1))\nExpected:\n    Starting: 1\n    Starting: 2\nGot:\n    [DocTestWorker-1-MainThread] (22:13:22.691) Starting work with 2 processes\n    [DocTestWorker-1-MainThread] (22:13:22.691) Distributing tasks\n    [DocTestWorker-1-MainThread] (22:13:22.691) Starting processes\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:22.735) Started\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:22.736) Launching thief\n    [RESetMapReduceWorker-1:27-Thief] (22:13:22.736) Thief started\n    [RESetMapReduceWorker-1:28-MainThread] (22:13:22.743) Started\n    [RESetMapReduceWorker-1:28-MainThread] (22:13:22.744) Launching thief\n    [RESetMapReduceWorker-1:28-Thief] (22:13:22.744) Thief started\n**********************************************************************\nFile \"sage/parallel/map_reduce.py\", line 1153, in sage.parallel.map_reduce.RESetMapReduce.start_workers\nFailed example:\n    sleep(float(1.5))\nExpected:\n    Finished: 1\n    Finished: 2\nGot:\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.237) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.237) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.238) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.238) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.238) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.238) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.238) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.238) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.240) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.240) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.240) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.240) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.240) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.240) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.240) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.240) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_done called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Failed Steal RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_done called\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) Trying to steal from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.245) waiting for steal answer from RESetMapReduceWorker-1:28\n    [RESetMapReduceWorker-1:28-MainThread] (22:13:23.245) _signal_task_done called\n    [RESetMapReduceWorker-1:28-MainThread] (22:13:23.245) raising AbortError\n    [RESetMapReduceWorker-1:28-MainThread] (22:13:23.245) ***************** FINISHED ******************\n    [RESetMapReduceWorker-1:28-MainThread] (22:13:23.245) Sending poison pills\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.245) Got a Steal request from RESetMapReduceWorker-1:27\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.245) _signal_task_start called\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.245) Thief aborted\n    [RESetMapReduceWorker-1:28-Thief] (22:13:23.245) Thief Exiting\n    [RESetMapReduceWorker-1:28-MainThread] (22:13:23.246) Worker Done !\n    [RESetMapReduceWorker-1:27-Thief] (22:13:23.246) Thief received poison pill\n    [RESetMapReduceWorker-1:27-Thief] (22:13:23.246) Thief Exiting\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.246) Worker Done !\n    [RESetMapReduceWorker-1:28-MainThread] (22:13:23.246) Exiting\n    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.246) Exiting\n    Starting: 2\n    Finished: 2\n    Starting: 1\n    Finished: 1\n**********************************************************************\nFile \"sage/parallel/map_reduce.py\", line 1161, in sage.parallel.map_reduce.RESetMapReduce.start_workers\nFailed example:\n    S.finish()\nExpected nothing\nGot:\n    [DocTestWorker-1-MainThread] (22:13:24.310) Joining worker processes...\n    [DocTestWorker-1-MainThread] (22:13:24.310) Joining RESetMapReduceWorker-1:27\n    [DocTestWorker-1-MainThread] (22:13:24.311) Joining RESetMapReduceWorker-1:28\n    [DocTestWorker-1-MainThread] (22:13:24.311) Joining done\n```\n\nCC:  @dimpase @mkoeppe @fchapoton\n\nReviewer: Tobias Diez, Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Tobias Diez, Fr\u00e9d\u00e9ric Chapoton\n\nBranch: 7fe3812bf840a6e4d8a08ce6af2ae761dc071265\n\nCommit: 7fe3812bf840a6e4d8a08ce6af2ae761dc071265\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33834\n\n",
    "closed_at": "2022-05-17T21:00:41Z",
    "created_at": "2022-05-10T19:16:15Z",
    "labels": [
        "component: misc",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Fix map_reduce doctest",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33834",
    "user": "https://github.com/tobiasdiez"
}
```
One doctest continuously fails in the build workflow. I couldn't reproduce the error locally, but hopefully it goes away by slightly increasing the timeout from 1sec to 1.5sec.

We also extend the doctest to provide a bit more debug information, and to actually test parallel processing by using two roots and thus two threads.

Local debug output:

```
File "sage/parallel/map_reduce.py", line 1148, in sage.parallel.map_reduce.RESetMapReduce.start_workers
Failed example:
    S.start_workers(); sleep(float(0.1))
Expected:
    Starting: 1
    Starting: 2
Got:
    [DocTestWorker-1-MainThread] (22:13:22.691) Starting work with 2 processes
    [DocTestWorker-1-MainThread] (22:13:22.691) Distributing tasks
    [DocTestWorker-1-MainThread] (22:13:22.691) Starting processes
    [RESetMapReduceWorker-1:27-MainThread] (22:13:22.735) Started
    [RESetMapReduceWorker-1:27-MainThread] (22:13:22.736) Launching thief
    [RESetMapReduceWorker-1:27-Thief] (22:13:22.736) Thief started
    [RESetMapReduceWorker-1:28-MainThread] (22:13:22.743) Started
    [RESetMapReduceWorker-1:28-MainThread] (22:13:22.744) Launching thief
    [RESetMapReduceWorker-1:28-Thief] (22:13:22.744) Thief started
**********************************************************************
File "sage/parallel/map_reduce.py", line 1153, in sage.parallel.map_reduce.RESetMapReduce.start_workers
Failed example:
    sleep(float(1.5))
Expected:
    Finished: 1
    Finished: 2
Got:
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.237) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.237) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.238) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.238) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.238) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.238) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.238) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.238) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.239) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.239) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.240) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.240) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.240) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.240) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.240) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.240) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.240) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.240) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.240) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_done called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.241) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.241) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.242) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.242) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.243) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.243) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) Failed Steal RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.244) _signal_task_done called
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.244) Trying to steal from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.245) waiting for steal answer from RESetMapReduceWorker-1:28
    [RESetMapReduceWorker-1:28-MainThread] (22:13:23.245) _signal_task_done called
    [RESetMapReduceWorker-1:28-MainThread] (22:13:23.245) raising AbortError
    [RESetMapReduceWorker-1:28-MainThread] (22:13:23.245) ***************** FINISHED ******************
    [RESetMapReduceWorker-1:28-MainThread] (22:13:23.245) Sending poison pills
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.245) Got a Steal request from RESetMapReduceWorker-1:27
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.245) _signal_task_start called
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.245) Thief aborted
    [RESetMapReduceWorker-1:28-Thief] (22:13:23.245) Thief Exiting
    [RESetMapReduceWorker-1:28-MainThread] (22:13:23.246) Worker Done !
    [RESetMapReduceWorker-1:27-Thief] (22:13:23.246) Thief received poison pill
    [RESetMapReduceWorker-1:27-Thief] (22:13:23.246) Thief Exiting
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.246) Worker Done !
    [RESetMapReduceWorker-1:28-MainThread] (22:13:23.246) Exiting
    [RESetMapReduceWorker-1:27-MainThread] (22:13:23.246) Exiting
    Starting: 2
    Finished: 2
    Starting: 1
    Finished: 1
**********************************************************************
File "sage/parallel/map_reduce.py", line 1161, in sage.parallel.map_reduce.RESetMapReduce.start_workers
Failed example:
    S.finish()
Expected nothing
Got:
    [DocTestWorker-1-MainThread] (22:13:24.310) Joining worker processes...
    [DocTestWorker-1-MainThread] (22:13:24.310) Joining RESetMapReduceWorker-1:27
    [DocTestWorker-1-MainThread] (22:13:24.311) Joining RESetMapReduceWorker-1:28
    [DocTestWorker-1-MainThread] (22:13:24.311) Joining done
```

CC:  @dimpase @mkoeppe @fchapoton

Reviewer: Tobias Diez, Frédéric Chapoton

Author: Tobias Diez, Frédéric Chapoton

Branch: 7fe3812bf840a6e4d8a08ce6af2ae761dc071265

Commit: 7fe3812bf840a6e4d8a08ce6af2ae761dc071265

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33834





---

archive/issue_comments_477643.json:
```json
{
    "body": "<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-10T22:12:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477643",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_477644.json:
```json
{
    "body": "<a id='comment:4'></a>dup of #33846",
    "created_at": "2022-05-12T22:42:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477644",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>dup of #33846



---

archive/issue_comments_477645.json:
```json
{
    "body": "<a id='comment:5'></a>note that sleep should take an integer or a float as input, not any sage type\n\nmaybe one can redo my changes from #33846 here ?",
    "created_at": "2022-05-13T06:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477645",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>note that sleep should take an integer or a float as input, not any sage type

maybe one can redo my changes from #33846 here ?



---

archive/issue_comments_477646.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-13T07:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477646",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_477647.json:
```json
{
    "body": "<a id='comment:7'></a>ok, I have incorporated my changes here. I will now close the other ticket.",
    "created_at": "2022-05-13T07:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477647",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>ok, I have incorporated my changes here. I will now close the other ticket.



---

archive/issue_comments_477648.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-05-13T07:36:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477648",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_477649.json:
```json
{
    "body": "<a id='comment:9'></a>note that the build and test badge is still red, for another reasons related to not-working coverage..",
    "created_at": "2022-05-13T07:39:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477649",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>note that the build and test badge is still red, for another reasons related to not-working coverage..



---

archive/issue_comments_477650.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-13T07:40:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477650",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_477651.json:
```json
{
    "body": "<a id='comment:11'></a>hmm, doctests do not pass...",
    "created_at": "2022-05-13T10:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477651",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'></a>hmm, doctests do not pass...



---

archive/issue_comments_477652.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-13T20:39:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477652",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_477653.json:
```json
{
    "body": "<a id='comment:13'></a>still failing",
    "created_at": "2022-05-14T08:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477653",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:13'></a>still failing



---

archive/issue_comments_477654.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-14T09:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477654",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_477655.json:
```json
{
    "body": "<a id='comment:15'></a>oh, boy, a green middle badge at last ! Positive review from me.\n\nPlease set to positive of you agree.",
    "created_at": "2022-05-14T16:52:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477655",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:15'></a>oh, boy, a green middle badge at last ! Positive review from me.

Please set to positive of you agree.



---

archive/issue_comments_477656.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-14T20:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477656",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_477657.json:
```json
{
    "body": "<a id='comment:16'></a>Yeah, finally! Thank you for your work in this direction.\n\nI've set it now to positive review and set the priority to \"blocker\" so that it hopefully still makes it into 9.6 (since there are only changes to the doctests it shouldn't introduce any serious bugs). Please set it back if you don't agree.",
    "created_at": "2022-05-14T20:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477657",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:16'></a>Yeah, finally! Thank you for your work in this direction.

I've set it now to positive review and set the priority to "blocker" so that it hopefully still makes it into 9.6 (since there are only changes to the doctests it shouldn't introduce any serious bugs). Please set it back if you don't agree.



---

archive/issue_comments_477658.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2022-05-14T20:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477658",
    "user": "https://github.com/tobiasdiez"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_477659.json:
```json
{
    "body": "Changing priority from blocker to critical.",
    "created_at": "2022-05-14T21:50:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477659",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from blocker to critical.



---

archive/issue_comments_477660.json:
```json
{
    "body": "<a id='comment:17'></a>I don't think that's worth delaying the release for",
    "created_at": "2022-05-14T21:50:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477660",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>I don't think that's worth delaying the release for



---

archive/issue_events_088822.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-15T22:37:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33834#event-88822"
}
```



---

archive/issue_events_088823.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-17T21:00:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33834#event-88823"
}
```



---

archive/issue_comments_477661.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-05-17T21:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33834",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33834#issuecomment-477661",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
