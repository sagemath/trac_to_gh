# Issue 33320: Rework on live sage documentation

archive/issues_033083.json:
```json
{
    "body": "As Thebe was not working in our sage documentation, we removed it from sage (see #33309, #33529) and introduced a new tool jupyter-sphinx in #33507.\n\nAs we move to the new tool, the ticket\n\n- #24593 \"Provide live documentation support in Jupyter using Thebe\"\n\nwas closed.\n\nBased on the efforts of #24593, the goal of this ticket is to deliver the live documentation using jupyter-sphinx so that every code blocks on every documentation page can be activated.\n\nThis ticket patches `jupyter-sphinx` with \n- https://github.com/kwankyu/jupyter-sphinx/compare/upstream...v0.3.2-sage-trac-33320?expand=1\n\n## Preparation before build\nSuppress warnings by\n\n```\nsage -i debugpy \nsage -pip install soupsieve \n```\n\nInstall jupyterlab (for live doc with a local server) \n\n```\nsage -i jupyterlab_widgets\n```\n\n## Build\n\n- Default static doc: \n\n```\nmake\n```\n\n- Live doc with binder server:\n\n```\nexport SAGE_LIVE_DOC=yes\nmake\n```\n\n- Live doc with local server:\n\n  ```\n  export SAGE_LIVE_DOC=yes\n  export SAGE_JUPYTER_SERVER=http://localhost:8889\n  export SAGE_JUPYTER_SERVER_TOKEN=secret  # default \n  make\n  ```\n  Run\n\n  ```\n  sage --notebook=jupyterlab \\\n    --ServerApp.token='secret' \\\n    --ServerApp.allow_origin='null' \\\n    --ServerApp.disable_check_xsrf=true \\\n    --ServerApp.port=8889 \\\n    --ServerApp.open_browser=false \n  ```\n  before browsing the documentation.\n\nIf things do not work as expected, removing the existing documentation by\n\n```\nmake doc-clean doc-uninstall\n```\nmay be necessary before `make`. If this is burdensome, try first\n\n```\nsage --docbuild reference_top html\n```\nwhich updates static files (javascripts) directory.\n\n## Selective Build\n\nBuild static doc\n\n```\nmake\n```\nand then build live doc selectively either by\n\n```\nsage --docbuild --live-doc prep html\n```\nor by\n\n```\nexport SAGE_JUPYTER_SERVER=http://localhost:8889\nexport SAGE_JUPYTER_SERVER_TOKEN=secret  # default \nsage --docbuild --live-doc prep html\n```\n\n## Direct use of `.. JUPYTER-EXECUTE::` is deprecated\n\nAs #33507 added jupyter-sphinx extension to Sphinx conf, it provided `.. JUPYTER-EXECUTE::` directive to documentation authors to add executable code blocks. As the present ticket allows to build the live documentation in which all code blocks are executable, direct use of the directive by documentation authors is deprecated. Along with this change, an issue of heavy javascript injections, which slows down documentation pages loading time, is fixed in this ticket.\n\n\n\n\n\n\n\n**CC:**  @jhpalmieri\n\n**Branch:** [public/33320](https://github.com/sagemath/sagetrac-mirror/tree/public/33320)\n\n**Commit:** [f5dff4392a2551e9ae7634ecadccd53ec2158ac7](https://github.com/sagemath/sagetrac-mirror/commit/f5dff4392a2551e9ae7634ecadccd53ec2158ac7)\n\n**Author:** Kwankyu Lee\n\n**Status:** needs_work\n\n**Dependencies:** #33763\n\nIssue created by migration from https://trac.sagemath.org/ticket/33320\n\n",
    "created_at": "2022-02-10T12:20:51Z",
    "labels": [
        "component: documentation",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Rework on live sage documentation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33320",
    "user": "https://github.com/kwankyu"
}
```
As Thebe was not working in our sage documentation, we removed it from sage (see #33309, #33529) and introduced a new tool jupyter-sphinx in #33507.

As we move to the new tool, the ticket

- #24593 "Provide live documentation support in Jupyter using Thebe"

was closed.

Based on the efforts of #24593, the goal of this ticket is to deliver the live documentation using jupyter-sphinx so that every code blocks on every documentation page can be activated.

This ticket patches `jupyter-sphinx` with 
- https://github.com/kwankyu/jupyter-sphinx/compare/upstream...v0.3.2-sage-trac-33320?expand=1

## Preparation before build
Suppress warnings by

```
sage -i debugpy 
sage -pip install soupsieve 
```

Install jupyterlab (for live doc with a local server) 

```
sage -i jupyterlab_widgets
```

## Build

- Default static doc: 

```
make
```

- Live doc with binder server:

```
export SAGE_LIVE_DOC=yes
make
```

- Live doc with local server:

  ```
  export SAGE_LIVE_DOC=yes
  export SAGE_JUPYTER_SERVER=http://localhost:8889
  export SAGE_JUPYTER_SERVER_TOKEN=secret  # default 
  make
  ```
  Run

  ```
  sage --notebook=jupyterlab \
    --ServerApp.token='secret' \
    --ServerApp.allow_origin='null' \
    --ServerApp.disable_check_xsrf=true \
    --ServerApp.port=8889 \
    --ServerApp.open_browser=false 
  ```
  before browsing the documentation.

If things do not work as expected, removing the existing documentation by

```
make doc-clean doc-uninstall
```
may be necessary before `make`. If this is burdensome, try first

```
sage --docbuild reference_top html
```
which updates static files (javascripts) directory.

## Selective Build

Build static doc

```
make
```
and then build live doc selectively either by

```
sage --docbuild --live-doc prep html
```
or by

```
export SAGE_JUPYTER_SERVER=http://localhost:8889
export SAGE_JUPYTER_SERVER_TOKEN=secret  # default 
sage --docbuild --live-doc prep html
```

## Direct use of `.. JUPYTER-EXECUTE::` is deprecated

As #33507 added jupyter-sphinx extension to Sphinx conf, it provided `.. JUPYTER-EXECUTE::` directive to documentation authors to add executable code blocks. As the present ticket allows to build the live documentation in which all code blocks are executable, direct use of the directive by documentation authors is deprecated. Along with this change, an issue of heavy javascript injections, which slows down documentation pages loading time, is fixed in this ticket.







**CC:**  @jhpalmieri

**Branch:** [public/33320](https://github.com/sagemath/sagetrac-mirror/tree/public/33320)

**Commit:** [f5dff4392a2551e9ae7634ecadccd53ec2158ac7](https://github.com/sagemath/sagetrac-mirror/commit/f5dff4392a2551e9ae7634ecadccd53ec2158ac7)

**Author:** Kwankyu Lee

**Status:** needs_work

**Dependencies:** #33763

Issue created by migration from https://trac.sagemath.org/ticket/33320





---

archive/issue_comments_635152.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,6 +2,20 @@\n \n This ticket is to revive Thebe as a long term goal.\n \n+Latest documentation of Thebe:\n+\n+- https://thebe.readthedocs.io/en/latest/\n+\n+Code at [GitHub](GitHub):\n+\n+- https://github.com/executablebooks/thebe\n+\n+Demo page (working!):\n+\n+- https://sage-package.readthedocs.io/en/latest/sage_package/sphinx-demo.html\n+\n Related tickets:\n \n-- #24593\n+- #24593 \"Provide live documentation support in Jupyter using Thebe\"\n+\n+\n``````\n",
    "created_at": "2022-02-10T12:24:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635152",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,6 +2,20 @@
 
 This ticket is to revive Thebe as a long term goal.
 
+Latest documentation of Thebe:
+
+- https://thebe.readthedocs.io/en/latest/
+
+Code at [GitHub](GitHub):
+
+- https://github.com/executablebooks/thebe
+
+Demo page (working!):
+
+- https://sage-package.readthedocs.io/en/latest/sage_package/sphinx-demo.html
+
 Related tickets:
 
-- #24593
+- #24593 "Provide live documentation support in Jupyter using Thebe"
+
+
``````




---

archive/issue_comments_635153.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-As Thebe is not working in our Sage documentation, we turned it off.\n+As Thebe is not working in our Sage documentation, we turned it off. See #33309.\n \n This ticket is to revive Thebe as a long term goal.\n \n``````\n",
    "created_at": "2022-02-10T12:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635153",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-As Thebe is not working in our Sage documentation, we turned it off.
+As Thebe is not working in our Sage documentation, we turned it off. See #33309.
 
 This ticket is to revive Thebe as a long term goal.
 
``````




---

archive/issue_comments_635154.json:
```json
{
    "body": "**Dependencies:** #33507",
    "created_at": "2022-03-22T02:02:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635154",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #33507



---

archive/issue_events_098626.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-03-22T08:21:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33320#event-98626"
}
```



---

archive/issue_comments_635155.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2022-03-22T08:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635155",
    "user": "https://github.com/kwankyu"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_635156.json:
```json
{
    "body": "<a id='comment:4'></a>\nAchieved by #33507.",
    "created_at": "2022-03-22T08:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635156",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:4'></a>
Achieved by #33507.



---

archive/issue_comments_635157.json:
```json
{
    "body": "<a id='comment:5'></a>\nIsn't the goal that every cell on every documentation page can be activated?",
    "created_at": "2022-03-22T16:37:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635157",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Isn't the goal that every cell on every documentation page can be activated?



---

archive/issue_comments_635158.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,12 @@\n-As Thebe is not working in our Sage documentation, we turned it off. See #33309.\n+As Thebe was not working in our sage documentation, we removed it from sage (see #33309, #33529) and introduced a new tool jupyter-sphinx in #33507.\n \n-This ticket is to revive Thebe as a long term goal.\n+As we move to the new tool, the ticket\n+\n+- #24593 \"Provide live documentation support in Jupyter using Thebe\"\n+\n+was closed.\n+\n+Based on the efforts of #24593, the goal of this ticket is to deliver the live documentation using jupyter-sphinx so that every cell on every documentation page can be activated.\n \n Latest documentation of Thebe:\n \n@@ -14,8 +20,6 @@\n \n - https://sage-package.readthedocs.io/en/latest/sage_package/sphinx-demo.html\n \n-Related tickets:\n-\n-- #24593 \"Provide live documentation support in Jupyter using Thebe\"\n \n \n+\n``````\n",
    "created_at": "2022-03-23T00:20:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635158",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,12 @@
-As Thebe is not working in our Sage documentation, we turned it off. See #33309.
+As Thebe was not working in our sage documentation, we removed it from sage (see #33309, #33529) and introduced a new tool jupyter-sphinx in #33507.
 
-This ticket is to revive Thebe as a long term goal.
+As we move to the new tool, the ticket
+
+- #24593 "Provide live documentation support in Jupyter using Thebe"
+
+was closed.
+
+Based on the efforts of #24593, the goal of this ticket is to deliver the live documentation using jupyter-sphinx so that every cell on every documentation page can be activated.
 
 Latest documentation of Thebe:
 
@@ -14,8 +20,6 @@
 
 - https://sage-package.readthedocs.io/en/latest/sage_package/sphinx-demo.html
 
-Related tickets:
-
-- #24593 "Provide live documentation support in Jupyter using Thebe"
 
 
+
``````




---

archive/issue_comments_635159.json:
```json
{
    "body": "**Changing status** from needs_review to needs_info.",
    "created_at": "2022-03-23T00:20:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635159",
    "user": "https://github.com/kwankyu"
}
```

**Changing status** from needs_review to needs_info.



---

archive/issue_events_098627.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "rename": {
        "from": "Rework on Thebe for live sage documentation",
        "to": "Rework on live sage documentation"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33320#event-98627"
}
```



---

archive/issue_events_098628.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-03-23T00:20:34Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33320#event-98628"
}
```



---

archive/issue_events_098629.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-03-23T00:20:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "milestone": "sage-wishlist",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33320#event-98629"
}
```



---

archive/issue_comments_635160.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [mkoeppe](#comment%3A5):\n> Isn't the goal that every cell on every documentation page can be activated?\n\n\nOkay. I felt I was missing something.",
    "created_at": "2022-03-23T00:21:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635160",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:7'></a>
Replying to [mkoeppe](#comment%3A5):
> Isn't the goal that every cell on every documentation page can be activated?


Okay. I felt I was missing something.



---

archive/issue_comments_635161.json:
```json
{
    "body": "**Author:** Kwankyu Lee",
    "created_at": "2022-03-24T12:37:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635161",
    "user": "https://github.com/kwankyu"
}
```

**Author:** Kwankyu Lee



---

archive/issue_comments_635162.json:
```json
{
    "body": "**Branch:** [u/klee/33320](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/33320)",
    "created_at": "2022-03-24T12:37:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635162",
    "user": "https://github.com/kwankyu"
}
```

**Branch:** [u/klee/33320](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/33320)



---

archive/issue_comments_635163.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/018da51aa2b0fcf1efd7a4d11a75a3f6d366a484\">018da51</a></td><td><code>Position thebe button at right bottom</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c619fa2d80c0e7eac4ac217818ced68fe05686fb\">c619fa2</a></td><td><code>Add Thebe kernel specs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72ae5707c37015f73e6f0b9067b0a237fe37100a\">72ae570</a></td><td><code>Fix missing inventory file error</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e499c2fe1523c721bf7eb383f926815187e51255\">e499c2f</a></td><td><code>Use sphinx_plot for pdf documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/777e25efd39e13235ca56500e4d6f35276418234\">777e25e</a></td><td><code>Live images only when requested</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/567730c81c468869dcd9c17f1f6434b4e1ef00b6\">567730c</a></td><td><code>Prevent duplicate code display</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e881abca1f2e7b806608b6b6f2bbffec5f338b55\">e881abc</a></td><td><code>build/pkgs/thebe: Remove</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9621c97820a393c0835c9fadcfbc4f2f60fc17f7\">9621c97</a></td><td><code>build/pkgs/sagemath_doc_html/dependencies: Remove thebe</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746\">72c8378</a></td><td><code>Merge #33529</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a4750584bdedb24d7abdd1e4c582a0f6d4a83d1\">1a47505</a></td><td><code>Make examples alive</code></td></tr></table>\n",
    "created_at": "2022-03-24T12:38:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635163",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/018da51aa2b0fcf1efd7a4d11a75a3f6d366a484">018da51</a></td><td><code>Position thebe button at right bottom</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c619fa2d80c0e7eac4ac217818ced68fe05686fb">c619fa2</a></td><td><code>Add Thebe kernel specs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72ae5707c37015f73e6f0b9067b0a237fe37100a">72ae570</a></td><td><code>Fix missing inventory file error</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e499c2fe1523c721bf7eb383f926815187e51255">e499c2f</a></td><td><code>Use sphinx_plot for pdf documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/777e25efd39e13235ca56500e4d6f35276418234">777e25e</a></td><td><code>Live images only when requested</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/567730c81c468869dcd9c17f1f6434b4e1ef00b6">567730c</a></td><td><code>Prevent duplicate code display</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e881abca1f2e7b806608b6b6f2bbffec5f338b55">e881abc</a></td><td><code>build/pkgs/thebe: Remove</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9621c97820a393c0835c9fadcfbc4f2f60fc17f7">9621c97</a></td><td><code>build/pkgs/sagemath_doc_html/dependencies: Remove thebe</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746">72c8378</a></td><td><code>Merge #33529</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a4750584bdedb24d7abdd1e4c582a0f6d4a83d1">1a47505</a></td><td><code>Make examples alive</code></td></tr></table>




---

archive/issue_comments_635164.json:
```json
{
    "body": "**Commit:** [1a4750584bdedb24d7abdd1e4c582a0f6d4a83d1](https://github.com/sagemath/sagetrac-mirror/commit/1a4750584bdedb24d7abdd1e4c582a0f6d4a83d1)",
    "created_at": "2022-03-24T12:38:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635164",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [1a4750584bdedb24d7abdd1e4c582a0f6d4a83d1](https://github.com/sagemath/sagetrac-mirror/commit/1a4750584bdedb24d7abdd1e4c582a0f6d4a83d1)



---

archive/issue_events_098630.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-03-24T12:40:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "milestone": "sage-wishlist",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33320#event-98630"
}
```



---

archive/issue_events_098631.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-03-24T12:40:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33320#event-98631"
}
```



---

archive/issue_comments_635165.json:
```json
{
    "body": "**Changing branch** from \"[u/klee/33320](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/33320)\" to \"[public/33320](https://github.com/sagemath/sagetrac-mirror/tree/public/33320)\".",
    "created_at": "2022-03-25T02:38:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635165",
    "user": "https://github.com/kwankyu"
}
```

**Changing branch** from "[u/klee/33320](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/33320)" to "[public/33320](https://github.com/sagemath/sagetrac-mirror/tree/public/33320)".



---

archive/issue_comments_635166.json:
```json
{
    "body": "**Changing commit** from \"[1a4750584bdedb24d7abdd1e4c582a0f6d4a83d1](https://github.com/sagemath/sagetrac-mirror/commit/1a4750584bdedb24d7abdd1e4c582a0f6d4a83d1)\" to \"\".",
    "created_at": "2022-03-25T02:38:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635166",
    "user": "https://github.com/kwankyu"
}
```

**Changing commit** from "[1a4750584bdedb24d7abdd1e4c582a0f6d4a83d1](https://github.com/sagemath/sagetrac-mirror/commit/1a4750584bdedb24d7abdd1e4c582a0f6d4a83d1)" to "".



---

archive/issue_comments_635167.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c619fa2d80c0e7eac4ac217818ced68fe05686fb\">c619fa2</a></td><td><code>Add Thebe kernel specs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72ae5707c37015f73e6f0b9067b0a237fe37100a\">72ae570</a></td><td><code>Fix missing inventory file error</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e499c2fe1523c721bf7eb383f926815187e51255\">e499c2f</a></td><td><code>Use sphinx_plot for pdf documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/777e25efd39e13235ca56500e4d6f35276418234\">777e25e</a></td><td><code>Live images only when requested</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/567730c81c468869dcd9c17f1f6434b4e1ef00b6\">567730c</a></td><td><code>Prevent duplicate code display</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e881abca1f2e7b806608b6b6f2bbffec5f338b55\">e881abc</a></td><td><code>build/pkgs/thebe: Remove</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9621c97820a393c0835c9fadcfbc4f2f60fc17f7\">9621c97</a></td><td><code>build/pkgs/sagemath_doc_html/dependencies: Remove thebe</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746\">72c8378</a></td><td><code>Merge #33529</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a4750584bdedb24d7abdd1e4c582a0f6d4a83d1\">1a47505</a></td><td><code>Make examples alive</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eac2d11d73c243fbeca4aaa28ab22ab38e0ecb18\">eac2d11</a></td><td><code>Allow local server</code></td></tr></table>\n",
    "created_at": "2022-03-25T02:38:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635167",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c619fa2d80c0e7eac4ac217818ced68fe05686fb">c619fa2</a></td><td><code>Add Thebe kernel specs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72ae5707c37015f73e6f0b9067b0a237fe37100a">72ae570</a></td><td><code>Fix missing inventory file error</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e499c2fe1523c721bf7eb383f926815187e51255">e499c2f</a></td><td><code>Use sphinx_plot for pdf documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/777e25efd39e13235ca56500e4d6f35276418234">777e25e</a></td><td><code>Live images only when requested</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/567730c81c468869dcd9c17f1f6434b4e1ef00b6">567730c</a></td><td><code>Prevent duplicate code display</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e881abca1f2e7b806608b6b6f2bbffec5f338b55">e881abc</a></td><td><code>build/pkgs/thebe: Remove</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9621c97820a393c0835c9fadcfbc4f2f60fc17f7">9621c97</a></td><td><code>build/pkgs/sagemath_doc_html/dependencies: Remove thebe</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72c8378de1f5ab1de0d1062610a0d5d947415746">72c8378</a></td><td><code>Merge #33529</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a4750584bdedb24d7abdd1e4c582a0f6d4a83d1">1a47505</a></td><td><code>Make examples alive</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eac2d11d73c243fbeca4aaa28ab22ab38e0ecb18">eac2d11</a></td><td><code>Allow local server</code></td></tr></table>




---

archive/issue_comments_635168.json:
```json
{
    "body": "**Commit:** [eac2d11d73c243fbeca4aaa28ab22ab38e0ecb18](https://github.com/sagemath/sagetrac-mirror/commit/eac2d11d73c243fbeca4aaa28ab22ab38e0ecb18)",
    "created_at": "2022-03-25T02:38:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635168",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [eac2d11d73c243fbeca4aaa28ab22ab38e0ecb18](https://github.com/sagemath/sagetrac-mirror/commit/eac2d11d73c243fbeca4aaa28ab22ab38e0ecb18)



---

archive/issue_comments_635169.json:
```json
{
    "body": "<a id='comment:13'></a>\nTo use a local jupyter server for live doc: in `src/sage/docs/conf.py`,\n\n```\n# comment out if local jupyter server is running\njupyter_sphinx_thebelab_config.update({\n    'binderOptions': {\n        'repo': \"sagemath/sage-binder-env\",\n    },\n})\n```\nand rebuild the doc.\n\n\n\nTo view the live doc, run\n\n```\nsage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true\n```\nand open the doc.",
    "created_at": "2022-03-25T02:46:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635169",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:13'></a>
To use a local jupyter server for live doc: in `src/sage/docs/conf.py`,

```
# comment out if local jupyter server is running
jupyter_sphinx_thebelab_config.update({
    'binderOptions': {
        'repo': "sagemath/sage-binder-env",
    },
})
```
and rebuild the doc.



To view the live doc, run

```
sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true
```
and open the doc.



---

archive/issue_comments_635170.json:
```json
{
    "body": "**Changing commit** from \"[eac2d11d73c243fbeca4aaa28ab22ab38e0ecb18](https://github.com/sagemath/sagetrac-mirror/commit/eac2d11d73c243fbeca4aaa28ab22ab38e0ecb18)\" to \"[abe64dfbedf6090a83b5dbf8e96a302486edce30](https://github.com/sagemath/sagetrac-mirror/commit/abe64dfbedf6090a83b5dbf8e96a302486edce30)\".",
    "created_at": "2022-03-25T05:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635170",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[eac2d11d73c243fbeca4aaa28ab22ab38e0ecb18](https://github.com/sagemath/sagetrac-mirror/commit/eac2d11d73c243fbeca4aaa28ab22ab38e0ecb18)" to "[abe64dfbedf6090a83b5dbf8e96a302486edce30](https://github.com/sagemath/sagetrac-mirror/commit/abe64dfbedf6090a83b5dbf8e96a302486edce30)".



---

archive/issue_comments_635171.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/abe64dfbedf6090a83b5dbf8e96a302486edce30\">abe64df</a></td><td><code>Introduce JUPYTER_SERVER environment variable</code></td></tr></table>\n",
    "created_at": "2022-03-25T05:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635171",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/abe64dfbedf6090a83b5dbf8e96a302486edce30">abe64df</a></td><td><code>Introduce JUPYTER_SERVER environment variable</code></td></tr></table>




---

archive/issue_comments_635172.json:
```json
{
    "body": "<a id='comment:15'></a>\nNow the procedure to use a local server is \n\n```\nexport JUPYTER_SERVER='http://localhost:8888'\nexport JUPYTER_SERVER_TOKEN='secret'\n```\nand rebuild the doc. No need to touch `conf.py`.",
    "created_at": "2022-03-25T05:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635172",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:15'></a>
Now the procedure to use a local server is 

```
export JUPYTER_SERVER='http://localhost:8888'
export JUPYTER_SERVER_TOKEN='secret'
```
and rebuild the doc. No need to touch `conf.py`.



---

archive/issue_comments_635173.json:
```json
{
    "body": "**Changing status** from needs_info to needs_work.",
    "created_at": "2022-03-26T13:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635173",
    "user": "https://github.com/kwankyu"
}
```

**Changing status** from needs_info to needs_work.



---

archive/issue_comments_635174.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,6 +8,32 @@\n \n Based on the efforts of #24593, the goal of this ticket is to deliver the live documentation using jupyter-sphinx so that every cell on every documentation page can be activated.\n \n+---\n+\n+Preparation (more than necessary):\n+\n+```\n+sage -i jupyterlab_widgets\n+sage -i debugpy  \n+sage -pip install --upgrade nbconvert\n+```\n+\n+Fix a bug and suppress a warning:\n+\n+```python\n+import warnings                                                                                 \n+with warnings.catch_warnings():                                                                 \n+    warnings.simplefilter(\"ignore\")                                                             \n+    notebook = execute_cells(                                                                   \n+        kernel_name,                                                                            \n+        [nbformat.v4.new_code_cell(node.astext() if node[\"execute\"] else \"\") for node in nodes],\n+        self.config.jupyter_execute_kwargs,                                                     \n+    )                                                                                           \n+```\n+around line 152 in `local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_sphinx/execute.py`.\n+\n+\n+---\n Latest documentation of Thebe:\n \n - https://thebe.readthedocs.io/en/latest/\n@@ -16,9 +42,6 @@\n \n - https://github.com/executablebooks/thebe\n \n-Demo page (working!):\n-\n-- https://sage-package.readthedocs.io/en/latest/sage_package/sphinx-demo.html\n \n \n \n``````\n",
    "created_at": "2022-03-26T13:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635174",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,6 +8,32 @@
 
 Based on the efforts of #24593, the goal of this ticket is to deliver the live documentation using jupyter-sphinx so that every cell on every documentation page can be activated.
 
+---
+
+Preparation (more than necessary):
+
+```
+sage -i jupyterlab_widgets
+sage -i debugpy  
+sage -pip install --upgrade nbconvert
+```
+
+Fix a bug and suppress a warning:
+
+```python
+import warnings                                                                                 
+with warnings.catch_warnings():                                                                 
+    warnings.simplefilter("ignore")                                                             
+    notebook = execute_cells(                                                                   
+        kernel_name,                                                                            
+        [nbformat.v4.new_code_cell(node.astext() if node["execute"] else "") for node in nodes],
+        self.config.jupyter_execute_kwargs,                                                     
+    )                                                                                           
+```
+around line 152 in `local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_sphinx/execute.py`.
+
+
+---
 Latest documentation of Thebe:
 
 - https://thebe.readthedocs.io/en/latest/
@@ -16,9 +42,6 @@
 
 - https://github.com/executablebooks/thebe
 
-Demo page (working!):
-
-- https://sage-package.readthedocs.io/en/latest/sage_package/sphinx-demo.html
 
 
 
``````




---

archive/issue_comments_635175.json:
```json
{
    "body": "**Changing commit** from \"[abe64dfbedf6090a83b5dbf8e96a302486edce30](https://github.com/sagemath/sagetrac-mirror/commit/abe64dfbedf6090a83b5dbf8e96a302486edce30)\" to \"[dcc67046833aafe07655b3de116e2e8da778b9a9](https://github.com/sagemath/sagetrac-mirror/commit/dcc67046833aafe07655b3de116e2e8da778b9a9)\".",
    "created_at": "2022-03-26T13:38:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635175",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[abe64dfbedf6090a83b5dbf8e96a302486edce30](https://github.com/sagemath/sagetrac-mirror/commit/abe64dfbedf6090a83b5dbf8e96a302486edce30)" to "[dcc67046833aafe07655b3de116e2e8da778b9a9](https://github.com/sagemath/sagetrac-mirror/commit/dcc67046833aafe07655b3de116e2e8da778b9a9)".



---

archive/issue_comments_635176.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca72fcdb4b8d7d9ddc1a803fae49fa2e8d48326c\">ca72fcd</a></td><td><code>Make all docs built</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dcc67046833aafe07655b3de116e2e8da778b9a9\">dcc6704</a></td><td><code>Add a section documentation</code></td></tr></table>\n",
    "created_at": "2022-03-26T13:38:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635176",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca72fcdb4b8d7d9ddc1a803fae49fa2e8d48326c">ca72fcd</a></td><td><code>Make all docs built</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dcc67046833aafe07655b3de116e2e8da778b9a9">dcc6704</a></td><td><code>Add a section documentation</code></td></tr></table>




---

archive/issue_comments_635177.json:
```json
{
    "body": "**Changing commit** from \"[dcc67046833aafe07655b3de116e2e8da778b9a9](https://github.com/sagemath/sagetrac-mirror/commit/dcc67046833aafe07655b3de116e2e8da778b9a9)\" to \"[8ca9ef96e7950252436f8e44a658b3e84d7362ed](https://github.com/sagemath/sagetrac-mirror/commit/8ca9ef96e7950252436f8e44a658b3e84d7362ed)\".",
    "created_at": "2022-03-26T22:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635177",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[dcc67046833aafe07655b3de116e2e8da778b9a9](https://github.com/sagemath/sagetrac-mirror/commit/dcc67046833aafe07655b3de116e2e8da778b9a9)" to "[8ca9ef96e7950252436f8e44a658b3e84d7362ed](https://github.com/sagemath/sagetrac-mirror/commit/8ca9ef96e7950252436f8e44a658b3e84d7362ed)".



---

archive/issue_comments_635178.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ca9ef96e7950252436f8e44a658b3e84d7362ed\">8ca9ef9</a></td><td><code>Remove a section documentation</code></td></tr></table>\n",
    "created_at": "2022-03-26T22:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635178",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ca9ef96e7950252436f8e44a658b3e84d7362ed">8ca9ef9</a></td><td><code>Remove a section documentation</code></td></tr></table>




---

archive/issue_comments_635179.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,14 +10,17 @@\n \n ---\n \n-Preparation (more than necessary):\n+Install j:\n \n ```\n sage -i jupyterlab_widgets\n+```\n+Suppress warnings:\n+\n+```\n sage -i debugpy  \n sage -pip install --upgrade nbconvert\n ```\n-\n Fix a bug and suppress a warning:\n \n ```python\n@@ -31,6 +34,33 @@\n     )                                                                                           \n ```\n around line 152 in `local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_sphinx/execute.py`.\n+\n+---\n+\n+Default static doc \n+\n+```\n+make doc-clean; make doc-uninstall; make\n+```\n+Live doc with binder server\n+\n+```\n+export LIVE_DOC=yes\n+make doc-clean; make doc-uninstall; make\n+```\n+Live doc with local server\n+\n+```\n+export LIVE_DOC=yes\n+export JUPYTER_SERVER='http://localhost:8888'\n+export JUPYTER_SERVER_TOKEN='secret'\n+make doc-clean; make doc-uninstall; make\n+```\n+View the documentation with running\n+\n+```\n+sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true\n+```\n \n \n ---\n``````\n",
    "created_at": "2022-03-27T08:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635179",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,14 +10,17 @@
 
 ---
 
-Preparation (more than necessary):
+Install j:
 
 ```
 sage -i jupyterlab_widgets
+```
+Suppress warnings:
+
+```
 sage -i debugpy  
 sage -pip install --upgrade nbconvert
 ```
-
 Fix a bug and suppress a warning:
 
 ```python
@@ -31,6 +34,33 @@
     )                                                                                           
 ```
 around line 152 in `local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_sphinx/execute.py`.
+
+---
+
+Default static doc 
+
+```
+make doc-clean; make doc-uninstall; make
+```
+Live doc with binder server
+
+```
+export LIVE_DOC=yes
+make doc-clean; make doc-uninstall; make
+```
+Live doc with local server
+
+```
+export LIVE_DOC=yes
+export JUPYTER_SERVER='http://localhost:8888'
+export JUPYTER_SERVER_TOKEN='secret'
+make doc-clean; make doc-uninstall; make
+```
+View the documentation with running
+
+```
+sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true
+```
 
 
 ---
``````




---

archive/issue_comments_635180.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68f7f386b7082258388dc9fafc32f54674bfa79a\">68f7f38</a></td><td><code>Adjust make live button</code></td></tr></table>\n",
    "created_at": "2022-03-27T08:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635180",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68f7f386b7082258388dc9fafc32f54674bfa79a">68f7f38</a></td><td><code>Adjust make live button</code></td></tr></table>




---

archive/issue_comments_635181.json:
```json
{
    "body": "**Changing commit** from \"[8ca9ef96e7950252436f8e44a658b3e84d7362ed](https://github.com/sagemath/sagetrac-mirror/commit/8ca9ef96e7950252436f8e44a658b3e84d7362ed)\" to \"[68f7f386b7082258388dc9fafc32f54674bfa79a](https://github.com/sagemath/sagetrac-mirror/commit/68f7f386b7082258388dc9fafc32f54674bfa79a)\".",
    "created_at": "2022-03-27T08:41:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635181",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8ca9ef96e7950252436f8e44a658b3e84d7362ed](https://github.com/sagemath/sagetrac-mirror/commit/8ca9ef96e7950252436f8e44a658b3e84d7362ed)" to "[68f7f386b7082258388dc9fafc32f54674bfa79a](https://github.com/sagemath/sagetrac-mirror/commit/68f7f386b7082258388dc9fafc32f54674bfa79a)".



---

archive/issue_comments_635182.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,11 +10,6 @@\n \n ---\n \n-Install j:\n-\n-```\n-sage -i jupyterlab_widgets\n-```\n Suppress warnings:\n \n ```\n@@ -63,16 +58,6 @@\n ```\n \n \n----\n-Latest documentation of Thebe:\n-\n-- https://thebe.readthedocs.io/en/latest/\n-\n-Code at [GitHub](GitHub):\n-\n-- https://github.com/executablebooks/thebe\n \n \n \n-\n-\n``````\n",
    "created_at": "2022-03-27T08:48:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635182",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,11 +10,6 @@
 
 ---
 
-Install j:
-
-```
-sage -i jupyterlab_widgets
-```
 Suppress warnings:
 
 ```
@@ -63,16 +58,6 @@
 ```
 
 
----
-Latest documentation of Thebe:
-
-- https://thebe.readthedocs.io/en/latest/
-
-Code at [GitHub](GitHub):
-
-- https://github.com/executablebooks/thebe
 
 
 
-
-
``````




---

archive/issue_comments_635183.json:
```json
{
    "body": "**Changing commit** from \"[68f7f386b7082258388dc9fafc32f54674bfa79a](https://github.com/sagemath/sagetrac-mirror/commit/68f7f386b7082258388dc9fafc32f54674bfa79a)\" to \"[bc26ffcb9a5d5f16fa1baeaf2b434e0df34a9ed1](https://github.com/sagemath/sagetrac-mirror/commit/bc26ffcb9a5d5f16fa1baeaf2b434e0df34a9ed1)\".",
    "created_at": "2022-03-27T10:09:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635183",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[68f7f386b7082258388dc9fafc32f54674bfa79a](https://github.com/sagemath/sagetrac-mirror/commit/68f7f386b7082258388dc9fafc32f54674bfa79a)" to "[bc26ffcb9a5d5f16fa1baeaf2b434e0df34a9ed1](https://github.com/sagemath/sagetrac-mirror/commit/bc26ffcb9a5d5f16fa1baeaf2b434e0df34a9ed1)".



---

archive/issue_comments_635184.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc26ffcb9a5d5f16fa1baeaf2b434e0df34a9ed1\">bc26ffc</a></td><td><code>Restore mathjax_sage.js</code></td></tr></table>\n",
    "created_at": "2022-03-27T10:09:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635184",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc26ffcb9a5d5f16fa1baeaf2b434e0df34a9ed1">bc26ffc</a></td><td><code>Restore mathjax_sage.js</code></td></tr></table>




---

archive/issue_comments_635185.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,9 +14,17 @@\n \n ```\n sage -i debugpy  \n-sage -pip install --upgrade nbconvert\n ```\n-Fix a bug and suppress a warning:\n+Fix a bug and suppress a warning, by replacing\n+\n+```python\n+notebook = execute_cells(                                          \n+    kernel_name,                                                   \n+    [nbformat.v4.new_code_cell(node.astext()) for node in nodes],  \n+    self.config.jupyter_execute_kwargs,                            \n+)                                                                  \n+```\n+with\n \n ```python\n import warnings                                                                                 \n``````\n",
    "created_at": "2022-03-27T11:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635185",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -14,9 +14,17 @@
 
 ```
 sage -i debugpy  
-sage -pip install --upgrade nbconvert
 ```
-Fix a bug and suppress a warning:
+Fix a bug and suppress a warning, by replacing
+
+```python
+notebook = execute_cells(                                          
+    kernel_name,                                                   
+    [nbformat.v4.new_code_cell(node.astext()) for node in nodes],  
+    self.config.jupyter_execute_kwargs,                            
+)                                                                  
+```
+with
 
 ```python
 import warnings                                                                                 
``````




---

archive/issue_comments_635186.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,9 +8,8 @@\n \n Based on the efforts of #24593, the goal of this ticket is to deliver the live documentation using jupyter-sphinx so that every cell on every documentation page can be activated.\n \n----\n-\n-Suppress warnings:\n+## Preparation before build\n+Suppress a warning by\n \n ```\n sage -i debugpy  \n@@ -38,7 +37,7 @@\n ```\n around line 152 in `local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_sphinx/execute.py`.\n \n----\n+## Build\n \n Default static doc \n \n``````\n",
    "created_at": "2022-03-27T11:24:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635186",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,9 +8,8 @@
 
 Based on the efforts of #24593, the goal of this ticket is to deliver the live documentation using jupyter-sphinx so that every cell on every documentation page can be activated.
 
----
-
-Suppress warnings:
+## Preparation before build
+Suppress a warning by
 
 ```
 sage -i debugpy  
@@ -38,7 +37,7 @@
 ```
 around line 152 in `local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_sphinx/execute.py`.
 
----
+## Build
 
 Default static doc 
 
``````




---

archive/issue_comments_635187.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -37,6 +37,16 @@\n ```\n around line 152 in `local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_sphinx/execute.py`.\n \n+Install jupyterlab \n+\n+```\n+sage -i jupyterlab_widgets\n+```\n+Currently this introduces an error while building. Fix this by\n+\n+```\n+sage -pip install --upgrade nbconvert\n+```\n ## Build\n \n Default static doc \n``````\n",
    "created_at": "2022-03-27T11:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635187",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -37,6 +37,16 @@
 ```
 around line 152 in `local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_sphinx/execute.py`.
 
+Install jupyterlab 
+
+```
+sage -i jupyterlab_widgets
+```
+Currently this introduces an error while building. Fix this by
+
+```
+sage -pip install --upgrade nbconvert
+```
 ## Build
 
 Default static doc 
``````




---

archive/issue_comments_635188.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -35,7 +35,9 @@\n         self.config.jupyter_execute_kwargs,                                                     \n     )                                                                                           \n ```\n-around line 152 in `local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_sphinx/execute.py`.\n+around line 152 in `local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_sphinx/execute.py`. This is filed: \n+\n+https://github.com/jupyter/jupyter-sphinx/issues/198\n \n Install jupyterlab \n \n``````\n",
    "created_at": "2022-03-27T12:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635188",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -35,7 +35,9 @@
         self.config.jupyter_execute_kwargs,                                                     
     )                                                                                           
 ```
-around line 152 in `local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_sphinx/execute.py`.
+around line 152 in `local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_sphinx/execute.py`. This is filed: 
+
+https://github.com/jupyter/jupyter-sphinx/issues/198
 
 Install jupyterlab 
 
``````




---

archive/issue_comments_635189.json:
```json
{
    "body": "<a id='comment:26'></a>\nThis is now ready to play with.",
    "created_at": "2022-03-27T12:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635189",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:26'></a>
This is now ready to play with.



---

archive/issue_comments_635190.json:
```json
{
    "body": "**Changing dependencies** from \"#33507\" to \"#33507, #33533\".",
    "created_at": "2022-03-27T20:00:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635190",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#33507" to "#33507, #33533".



---

archive/issue_comments_635191.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66eef162556926b6c14838585d1137caf060751f\">66eef16</a></td><td><code>Merge tag '9.6.beta6' into t/33320/public/33320</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/633721d7cf54c482749e79881d7b698d8aa45b16\">633721d</a></td><td><code>build/pkgs/nbconvert: Update to 6.4.4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11c83503ca17f602eec520ceee4f5cf5a6cd1f6d\">11c8350</a></td><td><code>build/pkgs/beautifulsoup4: Convert to a standard normal package, dependency of upgraded nbconvert</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/652d823f33a604bfe62a4325ac61c971cd720bf9\">652d823</a></td><td><code>build/pkgs/pyppeteer: New pip package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c8fd6114e67e286238689dbf2c1982325339f6a\">2c8fd61</a></td><td><code>configure.ac (--disable-notebook): Also disable beautifulsoup4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1931ba88edaba0d0d49ecc51d04a0a2e2c96d510\">1931ba8</a></td><td><code>Merge #33533</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73085ef99d4af1226f43fa59ebd0868366576a49\">73085ef</a></td><td><code>build/pkgs/jupyter_sphinx: Add patch</code></td></tr></table>\n",
    "created_at": "2022-03-27T20:39:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635191",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66eef162556926b6c14838585d1137caf060751f">66eef16</a></td><td><code>Merge tag '9.6.beta6' into t/33320/public/33320</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/633721d7cf54c482749e79881d7b698d8aa45b16">633721d</a></td><td><code>build/pkgs/nbconvert: Update to 6.4.4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11c83503ca17f602eec520ceee4f5cf5a6cd1f6d">11c8350</a></td><td><code>build/pkgs/beautifulsoup4: Convert to a standard normal package, dependency of upgraded nbconvert</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/652d823f33a604bfe62a4325ac61c971cd720bf9">652d823</a></td><td><code>build/pkgs/pyppeteer: New pip package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c8fd6114e67e286238689dbf2c1982325339f6a">2c8fd61</a></td><td><code>configure.ac (--disable-notebook): Also disable beautifulsoup4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1931ba88edaba0d0d49ecc51d04a0a2e2c96d510">1931ba8</a></td><td><code>Merge #33533</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73085ef99d4af1226f43fa59ebd0868366576a49">73085ef</a></td><td><code>build/pkgs/jupyter_sphinx: Add patch</code></td></tr></table>




---

archive/issue_comments_635192.json:
```json
{
    "body": "**Changing commit** from \"[bc26ffcb9a5d5f16fa1baeaf2b434e0df34a9ed1](https://github.com/sagemath/sagetrac-mirror/commit/bc26ffcb9a5d5f16fa1baeaf2b434e0df34a9ed1)\" to \"[73085ef99d4af1226f43fa59ebd0868366576a49](https://github.com/sagemath/sagetrac-mirror/commit/73085ef99d4af1226f43fa59ebd0868366576a49)\".",
    "created_at": "2022-03-27T20:39:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635192",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bc26ffcb9a5d5f16fa1baeaf2b434e0df34a9ed1](https://github.com/sagemath/sagetrac-mirror/commit/bc26ffcb9a5d5f16fa1baeaf2b434e0df34a9ed1)" to "[73085ef99d4af1226f43fa59ebd0868366576a49](https://github.com/sagemath/sagetrac-mirror/commit/73085ef99d4af1226f43fa59ebd0868366576a49)".



---

archive/issue_comments_635193.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,47 +8,26 @@\n \n Based on the efforts of #24593, the goal of this ticket is to deliver the live documentation using jupyter-sphinx so that every cell on every documentation page can be activated.\n \n+This ticket depends on #33533 for an upgrade of `nbconvert`; otherwise an error appears while building.\n+\n+This ticket patches `jupyter-sphinx` with \n+- https://github.com/mkoeppe/jupyter-sphinx/commit/5067473640eca1b4d43fbacb643d9af47cc767d1\n+to fix a bug and suppress a warning. The bugfix is also in the master branch\n+- https://github.com/jupyter/jupyter-sphinx/issues/198\n+\n ## Preparation before build\n Suppress a warning by\n \n ```\n sage -i debugpy  \n ```\n-Fix a bug and suppress a warning, by replacing\n-\n-```python\n-notebook = execute_cells(                                          \n-    kernel_name,                                                   \n-    [nbformat.v4.new_code_cell(node.astext()) for node in nodes],  \n-    self.config.jupyter_execute_kwargs,                            \n-)                                                                  \n-```\n-with\n-\n-```python\n-import warnings                                                                                 \n-with warnings.catch_warnings():                                                                 \n-    warnings.simplefilter(\"ignore\")                                                             \n-    notebook = execute_cells(                                                                   \n-        kernel_name,                                                                            \n-        [nbformat.v4.new_code_cell(node.astext() if node[\"execute\"] else \"\") for node in nodes],\n-        self.config.jupyter_execute_kwargs,                                                     \n-    )                                                                                           \n-```\n-around line 152 in `local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_sphinx/execute.py`. This is filed: \n-\n-https://github.com/jupyter/jupyter-sphinx/issues/198\n \n Install jupyterlab \n \n ```\n sage -i jupyterlab_widgets\n ```\n-Currently this introduces an error while building. Fix this by\n \n-```\n-sage -pip install --upgrade nbconvert\n-```\n ## Build\n \n Default static doc \n``````\n",
    "created_at": "2022-03-27T20:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635193",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,47 +8,26 @@
 
 Based on the efforts of #24593, the goal of this ticket is to deliver the live documentation using jupyter-sphinx so that every cell on every documentation page can be activated.
 
+This ticket depends on #33533 for an upgrade of `nbconvert`; otherwise an error appears while building.
+
+This ticket patches `jupyter-sphinx` with 
+- https://github.com/mkoeppe/jupyter-sphinx/commit/5067473640eca1b4d43fbacb643d9af47cc767d1
+to fix a bug and suppress a warning. The bugfix is also in the master branch
+- https://github.com/jupyter/jupyter-sphinx/issues/198
+
 ## Preparation before build
 Suppress a warning by
 
 ```
 sage -i debugpy  
 ```
-Fix a bug and suppress a warning, by replacing
-
-```python
-notebook = execute_cells(                                          
-    kernel_name,                                                   
-    [nbformat.v4.new_code_cell(node.astext()) for node in nodes],  
-    self.config.jupyter_execute_kwargs,                            
-)                                                                  
-```
-with
-
-```python
-import warnings                                                                                 
-with warnings.catch_warnings():                                                                 
-    warnings.simplefilter("ignore")                                                             
-    notebook = execute_cells(                                                                   
-        kernel_name,                                                                            
-        [nbformat.v4.new_code_cell(node.astext() if node["execute"] else "") for node in nodes],
-        self.config.jupyter_execute_kwargs,                                                     
-    )                                                                                           
-```
-around line 152 in `local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/jupyter_sphinx/execute.py`. This is filed: 
-
-https://github.com/jupyter/jupyter-sphinx/issues/198
 
 Install jupyterlab 
 
 ```
 sage -i jupyterlab_widgets
 ```
-Currently this introduces an error while building. Fix this by
 
-```
-sage -pip install --upgrade nbconvert
-```
 ## Build
 
 Default static doc 
``````




---

archive/issue_comments_635194.json:
```json
{
    "body": "<a id='comment:30'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb6162cf59e1ef4983d786992334789e6849de75\">bb6162c</a></td><td><code>Introduce LIVE_DOC environment variable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/905ef601386df8e3a63e60c7e9a5266ddd438842\">905ef60</a></td><td><code>Merge branch 'public/33320'</code></td></tr></table>\n",
    "created_at": "2022-03-28T01:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635194",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb6162cf59e1ef4983d786992334789e6849de75">bb6162c</a></td><td><code>Introduce LIVE_DOC environment variable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/905ef601386df8e3a63e60c7e9a5266ddd438842">905ef60</a></td><td><code>Merge branch 'public/33320'</code></td></tr></table>




---

archive/issue_comments_635195.json:
```json
{
    "body": "**Changing commit** from \"[73085ef99d4af1226f43fa59ebd0868366576a49](https://github.com/sagemath/sagetrac-mirror/commit/73085ef99d4af1226f43fa59ebd0868366576a49)\" to \"[905ef601386df8e3a63e60c7e9a5266ddd438842](https://github.com/sagemath/sagetrac-mirror/commit/905ef601386df8e3a63e60c7e9a5266ddd438842)\".",
    "created_at": "2022-03-28T01:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635195",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[73085ef99d4af1226f43fa59ebd0868366576a49](https://github.com/sagemath/sagetrac-mirror/commit/73085ef99d4af1226f43fa59ebd0868366576a49)" to "[905ef601386df8e3a63e60c7e9a5266ddd438842](https://github.com/sagemath/sagetrac-mirror/commit/905ef601386df8e3a63e60c7e9a5266ddd438842)".



---

archive/issue_comments_635196.json:
```json
{
    "body": "<a id='comment:31'></a>\nJust uploaded a late commit. Building live doc takes triple times more time. So `LIVE_DOC=no` is the default.",
    "created_at": "2022-03-28T01:47:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635196",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:31'></a>
Just uploaded a late commit. Building live doc takes triple times more time. So `LIVE_DOC=no` is the default.



---

archive/issue_comments_635197.json:
```json
{
    "body": "<a id='comment:32'></a>\nMatthias, the lines 150-154 of `execute.py` should be removed.",
    "created_at": "2022-03-28T05:54:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635197",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:32'></a>
Matthias, the lines 150-154 of `execute.py` should be removed.



---

archive/issue_comments_635198.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n \n was closed.\n \n-Based on the efforts of #24593, the goal of this ticket is to deliver the live documentation using jupyter-sphinx so that every cell on every documentation page can be activated.\n+Based on the efforts of #24593, the goal of this ticket is to deliver the live documentation using jupyter-sphinx so that every code blocks on every documentation page can be activated.\n \n This ticket depends on #33533 for an upgrade of `nbconvert`; otherwise an error appears while building.\n \n``````\n",
    "created_at": "2022-03-28T08:49:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635198",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 
 was closed.
 
-Based on the efforts of #24593, the goal of this ticket is to deliver the live documentation using jupyter-sphinx so that every cell on every documentation page can be activated.
+Based on the efforts of #24593, the goal of this ticket is to deliver the live documentation using jupyter-sphinx so that every code blocks on every documentation page can be activated.
 
 This ticket depends on #33533 for an upgrade of `nbconvert`; otherwise an error appears while building.
 
``````




---

archive/issue_comments_635199.json:
```json
{
    "body": "<a id='comment:34'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a19b11731fa7e56ad56a1614c056df0a277f951b\">a19b117</a></td><td><code>Fix the patch on jupyter-sphinx</code></td></tr></table>\n",
    "created_at": "2022-03-28T13:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635199",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a19b11731fa7e56ad56a1614c056df0a277f951b">a19b117</a></td><td><code>Fix the patch on jupyter-sphinx</code></td></tr></table>




---

archive/issue_comments_635200.json:
```json
{
    "body": "**Changing commit** from \"[905ef601386df8e3a63e60c7e9a5266ddd438842](https://github.com/sagemath/sagetrac-mirror/commit/905ef601386df8e3a63e60c7e9a5266ddd438842)\" to \"[a19b11731fa7e56ad56a1614c056df0a277f951b](https://github.com/sagemath/sagetrac-mirror/commit/a19b11731fa7e56ad56a1614c056df0a277f951b)\".",
    "created_at": "2022-03-28T13:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635200",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[905ef601386df8e3a63e60c7e9a5266ddd438842](https://github.com/sagemath/sagetrac-mirror/commit/905ef601386df8e3a63e60c7e9a5266ddd438842)" to "[a19b11731fa7e56ad56a1614c056df0a277f951b](https://github.com/sagemath/sagetrac-mirror/commit/a19b11731fa7e56ad56a1614c056df0a277f951b)".



---

archive/issue_comments_635201.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [klee](#comment%3A32):\n> Matthias, the lines 150-154 of `execute.py` should be removed.\n\n\nI fixed the patch.",
    "created_at": "2022-03-28T13:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635201",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:35'></a>
Replying to [klee](#comment%3A32):
> Matthias, the lines 150-154 of `execute.py` should be removed.


I fixed the patch.



---

archive/issue_comments_635202.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -22,7 +22,7 @@\n sage -i debugpy  \n ```\n \n-Install jupyterlab \n+Install jupyterlab (for live doc with a local server) \n \n ```\n sage -i jupyterlab_widgets\n``````\n",
    "created_at": "2022-03-29T00:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635202",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -22,7 +22,7 @@
 sage -i debugpy  
 ```
 
-Install jupyterlab 
+Install jupyterlab (for live doc with a local server) 
 
 ```
 sage -i jupyterlab_widgets
``````




---

archive/issue_comments_635203.json:
```json
{
    "body": "**Changing commit** from \"[a19b11731fa7e56ad56a1614c056df0a277f951b](https://github.com/sagemath/sagetrac-mirror/commit/a19b11731fa7e56ad56a1614c056df0a277f951b)\" to \"[18332d53ebc4bf0c7721bff79adbb43a98d796ad](https://github.com/sagemath/sagetrac-mirror/commit/18332d53ebc4bf0c7721bff79adbb43a98d796ad)\".",
    "created_at": "2022-03-29T05:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635203",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a19b11731fa7e56ad56a1614c056df0a277f951b](https://github.com/sagemath/sagetrac-mirror/commit/a19b11731fa7e56ad56a1614c056df0a277f951b)" to "[18332d53ebc4bf0c7721bff79adbb43a98d796ad](https://github.com/sagemath/sagetrac-mirror/commit/18332d53ebc4bf0c7721bff79adbb43a98d796ad)".



---

archive/issue_comments_635204.json:
```json
{
    "body": "<a id='comment:37'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18332d53ebc4bf0c7721bff79adbb43a98d796ad\">18332d5</a></td><td><code>Restore unnecessary changes</code></td></tr></table>\n",
    "created_at": "2022-03-29T05:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635204",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18332d53ebc4bf0c7721bff79adbb43a98d796ad">18332d5</a></td><td><code>Restore unnecessary changes</code></td></tr></table>




---

archive/issue_comments_635205.json:
```json
{
    "body": "**Changing commit** from \"[18332d53ebc4bf0c7721bff79adbb43a98d796ad](https://github.com/sagemath/sagetrac-mirror/commit/18332d53ebc4bf0c7721bff79adbb43a98d796ad)\" to \"[b093dbeece97d63f8436bde4e725b0c4f0a3a042](https://github.com/sagemath/sagetrac-mirror/commit/b093dbeece97d63f8436bde4e725b0c4f0a3a042)\".",
    "created_at": "2022-03-29T06:06:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635205",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[18332d53ebc4bf0c7721bff79adbb43a98d796ad](https://github.com/sagemath/sagetrac-mirror/commit/18332d53ebc4bf0c7721bff79adbb43a98d796ad)" to "[b093dbeece97d63f8436bde4e725b0c4f0a3a042](https://github.com/sagemath/sagetrac-mirror/commit/b093dbeece97d63f8436bde4e725b0c4f0a3a042)".



---

archive/issue_comments_635206.json:
```json
{
    "body": "<a id='comment:38'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b093dbeece97d63f8436bde4e725b0c4f0a3a042\">b093dbe</a></td><td><code>More simple edits</code></td></tr></table>\n",
    "created_at": "2022-03-29T06:06:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635206",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b093dbeece97d63f8436bde4e725b0c4f0a3a042">b093dbe</a></td><td><code>More simple edits</code></td></tr></table>




---

archive/issue_comments_635207.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -52,7 +52,7 @@\n View the documentation with running\n \n ```\n-sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true\n+sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true NotebookApp.open_browser=false\n ```\n \n \n``````\n",
    "created_at": "2022-03-29T06:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635207",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -52,7 +52,7 @@
 View the documentation with running
 
 ```
-sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true
+sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true NotebookApp.open_browser=false
 ```
 
 
``````




---

archive/issue_comments_635208.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -52,7 +52,7 @@\n View the documentation with running\n \n ```\n-sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true NotebookApp.open_browser=false\n+sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true --ServerApp.open_browser=false\n ```\n \n \n``````\n",
    "created_at": "2022-03-29T06:09:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635208",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -52,7 +52,7 @@
 View the documentation with running
 
 ```
-sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true NotebookApp.open_browser=false
+sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true --ServerApp.open_browser=false
 ```
 
 
``````




---

archive/issue_comments_635209.json:
```json
{
    "body": "**Changing commit** from \"[b093dbeece97d63f8436bde4e725b0c4f0a3a042](https://github.com/sagemath/sagetrac-mirror/commit/b093dbeece97d63f8436bde4e725b0c4f0a3a042)\" to \"[f0cf117bd06e9d3269ac1aaa5acd73973901d1d8](https://github.com/sagemath/sagetrac-mirror/commit/f0cf117bd06e9d3269ac1aaa5acd73973901d1d8)\".",
    "created_at": "2022-03-30T02:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635209",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b093dbeece97d63f8436bde4e725b0c4f0a3a042](https://github.com/sagemath/sagetrac-mirror/commit/b093dbeece97d63f8436bde4e725b0c4f0a3a042)" to "[f0cf117bd06e9d3269ac1aaa5acd73973901d1d8](https://github.com/sagemath/sagetrac-mirror/commit/f0cf117bd06e9d3269ac1aaa5acd73973901d1d8)".



---

archive/issue_comments_635210.json:
```json
{
    "body": "<a id='comment:41'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0cf117bd06e9d3269ac1aaa5acd73973901d1d8\">f0cf117</a></td><td><code>Squeeze log executing</code></td></tr></table>\n",
    "created_at": "2022-03-30T02:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635210",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0cf117bd06e9d3269ac1aaa5acd73973901d1d8">f0cf117</a></td><td><code>Squeeze log executing</code></td></tr></table>




---

archive/issue_comments_635211.json:
```json
{
    "body": "<a id='comment:42'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74aaadbe8679a97139caf31ca1357f846af7c4a3\">74aaadb</a></td><td><code>Squeeze log executing</code></td></tr></table>\n",
    "created_at": "2022-03-30T02:14:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635211",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74aaadbe8679a97139caf31ca1357f846af7c4a3">74aaadb</a></td><td><code>Squeeze log executing</code></td></tr></table>




---

archive/issue_comments_635212.json:
```json
{
    "body": "**Changing commit** from \"[f0cf117bd06e9d3269ac1aaa5acd73973901d1d8](https://github.com/sagemath/sagetrac-mirror/commit/f0cf117bd06e9d3269ac1aaa5acd73973901d1d8)\" to \"[74aaadbe8679a97139caf31ca1357f846af7c4a3](https://github.com/sagemath/sagetrac-mirror/commit/74aaadbe8679a97139caf31ca1357f846af7c4a3)\".",
    "created_at": "2022-03-30T02:14:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635212",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f0cf117bd06e9d3269ac1aaa5acd73973901d1d8](https://github.com/sagemath/sagetrac-mirror/commit/f0cf117bd06e9d3269ac1aaa5acd73973901d1d8)" to "[74aaadbe8679a97139caf31ca1357f846af7c4a3](https://github.com/sagemath/sagetrac-mirror/commit/74aaadbe8679a97139caf31ca1357f846af7c4a3)".



---

archive/issue_comments_635213.json:
```json
{
    "body": "<a id='comment:43'></a>\nI thought about reducing live doc building time. But it seems that this should be done on jupyter-sphinx side, or rather by forking it to make our own tailored for sage. In short, this belongs to a wishlist.\n\nAs the live doc is optional, it is safe to merge this branch now.",
    "created_at": "2022-03-30T02:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635213",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:43'></a>
I thought about reducing live doc building time. But it seems that this should be done on jupyter-sphinx side, or rather by forking it to make our own tailored for sage. In short, this belongs to a wishlist.

As the live doc is optional, it is safe to merge this branch now.



---

archive/issue_comments_635214.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2022-03-30T02:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635214",
    "user": "https://github.com/kwankyu"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_635215.json:
```json
{
    "body": "<a id='comment:44'></a>\nI think the new environment variables should use a prefix `SAGE_` and it would be good if they could be set by `src/sage_docbuild/__init__.py` like it sets environment variables `SAGE_SKIP_PLOT_DIRECTIVE` etc.  I don't think they should go through `sage.env`.",
    "created_at": "2022-03-30T02:40:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635215",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:44'></a>
I think the new environment variables should use a prefix `SAGE_` and it would be good if they could be set by `src/sage_docbuild/__init__.py` like it sets environment variables `SAGE_SKIP_PLOT_DIRECTIVE` etc.  I don't think they should go through `sage.env`.



---

archive/issue_comments_635216.json:
```json
{
    "body": "<a id='comment:46'></a>\nSome questions:\n\n- Should the live docs be built in a different location (for example \"html_live\") so that it can coexist with the static documentation? Then it would play a role more like the PDF documentation.\n\n- Should building the live docs be an option for `./configure`, and/or a `make` target, like the PDF docs? (Separately, I wonder if options like `SAGE_SKIP_PLOT_DIRECTIVE` should also be controlled by `./configure` arguments.)",
    "created_at": "2022-03-30T03:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635216",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:46'></a>
Some questions:

- Should the live docs be built in a different location (for example "html_live") so that it can coexist with the static documentation? Then it would play a role more like the PDF documentation.

- Should building the live docs be an option for `./configure`, and/or a `make` target, like the PDF docs? (Separately, I wonder if options like `SAGE_SKIP_PLOT_DIRECTIVE` should also be controlled by `./configure` arguments.)



---

archive/issue_comments_635217.json:
```json
{
    "body": "<a id='comment:47'></a>\nReplying to [jhpalmieri](#comment%3A46):\n> Some questions:\n> \n> - Should the live docs be built in a different location (for example \"html_live\") so that it can coexist with the static documentation? Then it would play a role more like the PDF documentation.\n\n\nLive html docs are exactly like the normal html docs with additional \"make live\" capability. You may see the live docs as an upgrade version. So it makes not much sense to have both.",
    "created_at": "2022-03-30T09:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635217",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:47'></a>
Replying to [jhpalmieri](#comment%3A46):
> Some questions:
> 
> - Should the live docs be built in a different location (for example "html_live") so that it can coexist with the static documentation? Then it would play a role more like the PDF documentation.


Live html docs are exactly like the normal html docs with additional "make live" capability. You may see the live docs as an upgrade version. So it makes not much sense to have both.



---

archive/issue_comments_635218.json:
```json
{
    "body": "<a id='comment:48'></a>\nReplying to [jhpalmieri](#comment%3A46):\n> - Should building the live docs be an option for `./configure`, and/or a `make` target, like the PDF docs? \n\n\nI think it's possible to choose live or static by `./configure`, but Matthias will know it better.",
    "created_at": "2022-03-30T09:07:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635218",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:48'></a>
Replying to [jhpalmieri](#comment%3A46):
> - Should building the live docs be an option for `./configure`, and/or a `make` target, like the PDF docs? 


I think it's possible to choose live or static by `./configure`, but Matthias will know it better.



---

archive/issue_comments_635219.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2022-03-30T09:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635219",
    "user": "https://github.com/kwankyu"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_635220.json:
```json
{
    "body": "<a id='comment:49'></a>\nReplying to [mkoeppe](#comment%3A44):\n> I think the new environment variables should use a prefix `SAGE_` and it would be good if they could be set by `src/sage_docbuild/__init__.py` like it sets environment variables `SAGE_SKIP_PLOT_DIRECTIVE` etc.  I don't think they should go through `sage.env`.\n\n\nOkay. I am working on it.",
    "created_at": "2022-03-30T09:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635220",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:49'></a>
Replying to [mkoeppe](#comment%3A44):
> I think the new environment variables should use a prefix `SAGE_` and it would be good if they could be set by `src/sage_docbuild/__init__.py` like it sets environment variables `SAGE_SKIP_PLOT_DIRECTIVE` etc.  I don't think they should go through `sage.env`.


Okay. I am working on it.



---

archive/issue_comments_635221.json:
```json
{
    "body": "<a id='comment:50'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3279d7da5eb4421109647a7482ac4245162cb3d8\">3279d7d</a></td><td><code>Remove new variables from sage.env</code></td></tr></table>\n",
    "created_at": "2022-03-30T09:28:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635221",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3279d7da5eb4421109647a7482ac4245162cb3d8">3279d7d</a></td><td><code>Remove new variables from sage.env</code></td></tr></table>




---

archive/issue_comments_635222.json:
```json
{
    "body": "**Changing commit** from \"[74aaadbe8679a97139caf31ca1357f846af7c4a3](https://github.com/sagemath/sagetrac-mirror/commit/74aaadbe8679a97139caf31ca1357f846af7c4a3)\" to \"[3279d7da5eb4421109647a7482ac4245162cb3d8](https://github.com/sagemath/sagetrac-mirror/commit/3279d7da5eb4421109647a7482ac4245162cb3d8)\".",
    "created_at": "2022-03-30T09:28:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635222",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[74aaadbe8679a97139caf31ca1357f846af7c4a3](https://github.com/sagemath/sagetrac-mirror/commit/74aaadbe8679a97139caf31ca1357f846af7c4a3)" to "[3279d7da5eb4421109647a7482ac4245162cb3d8](https://github.com/sagemath/sagetrac-mirror/commit/3279d7da5eb4421109647a7482ac4245162cb3d8)".



---

archive/issue_comments_635223.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -38,15 +38,15 @@\n Live doc with binder server\n \n ```\n-export LIVE_DOC=yes\n+export SAGE_LIVE_DOC=yes\n make doc-clean; make doc-uninstall; make\n ```\n Live doc with local server\n \n ```\n-export LIVE_DOC=yes\n-export JUPYTER_SERVER='http://localhost:8888'\n-export JUPYTER_SERVER_TOKEN='secret'\n+export SAGE_LIVE_DOC=yes\n+export SAGE_JUPYTER_SERVER='http://localhost:8888'\n+export SAGE_JUPYTER_SERVER_TOKEN='secret'\n make doc-clean; make doc-uninstall; make\n ```\n View the documentation with running\n``````\n",
    "created_at": "2022-03-30T09:29:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635223",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -38,15 +38,15 @@
 Live doc with binder server
 
 ```
-export LIVE_DOC=yes
+export SAGE_LIVE_DOC=yes
 make doc-clean; make doc-uninstall; make
 ```
 Live doc with local server
 
 ```
-export LIVE_DOC=yes
-export JUPYTER_SERVER='http://localhost:8888'
-export JUPYTER_SERVER_TOKEN='secret'
+export SAGE_LIVE_DOC=yes
+export SAGE_JUPYTER_SERVER='http://localhost:8888'
+export SAGE_JUPYTER_SERVER_TOKEN='secret'
 make doc-clean; make doc-uninstall; make
 ```
 View the documentation with running
``````




---

archive/issue_comments_635224.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -45,8 +45,8 @@\n \n ```\n export SAGE_LIVE_DOC=yes\n-export SAGE_JUPYTER_SERVER='http://localhost:8888'\n-export SAGE_JUPYTER_SERVER_TOKEN='secret'\n+export SAGE_JUPYTER_SERVER=http://localhost:8888\n+export SAGE_JUPYTER_SERVER_TOKEN=secret\n make doc-clean; make doc-uninstall; make\n ```\n View the documentation with running\n``````\n",
    "created_at": "2022-03-30T09:30:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635224",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -45,8 +45,8 @@
 
 ```
 export SAGE_LIVE_DOC=yes
-export SAGE_JUPYTER_SERVER='http://localhost:8888'
-export SAGE_JUPYTER_SERVER_TOKEN='secret'
+export SAGE_JUPYTER_SERVER=http://localhost:8888
+export SAGE_JUPYTER_SERVER_TOKEN=secret
 make doc-clean; make doc-uninstall; make
 ```
 View the documentation with running
``````




---

archive/issue_comments_635225.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -55,7 +55,23 @@\n sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true --ServerApp.open_browser=false\n ```\n \n+## Selective Build\n+\n+Build static doc fast\n+\n+```\n+make doc-clean; make doc-uninstall; make\n+```\n+and then build live doc selectively, \n+\n+```\n+sage --docbuild --live-doc reference/plot3d html\n+```\n \n \n \n \n+\n+\n+\n+\n``````\n",
    "created_at": "2022-03-30T14:43:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635225",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -55,7 +55,23 @@
 sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true --ServerApp.open_browser=false
 ```
 
+## Selective Build
+
+Build static doc fast
+
+```
+make doc-clean; make doc-uninstall; make
+```
+and then build live doc selectively, 
+
+```
+sage --docbuild --live-doc reference/plot3d html
+```
 
 
 
 
+
+
+
+
``````




---

archive/issue_comments_635226.json:
```json
{
    "body": "<a id='comment:54'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8e1c6d7cdaebab3e4b79020d78fc686f22be4f1\">a8e1c6d</a></td><td><code>Argument --live-doc works correctly</code></td></tr></table>\n",
    "created_at": "2022-03-30T14:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635226",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8e1c6d7cdaebab3e4b79020d78fc686f22be4f1">a8e1c6d</a></td><td><code>Argument --live-doc works correctly</code></td></tr></table>




---

archive/issue_comments_635227.json:
```json
{
    "body": "**Changing commit** from \"[3279d7da5eb4421109647a7482ac4245162cb3d8](https://github.com/sagemath/sagetrac-mirror/commit/3279d7da5eb4421109647a7482ac4245162cb3d8)\" to \"[a8e1c6d7cdaebab3e4b79020d78fc686f22be4f1](https://github.com/sagemath/sagetrac-mirror/commit/a8e1c6d7cdaebab3e4b79020d78fc686f22be4f1)\".",
    "created_at": "2022-03-30T14:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635227",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3279d7da5eb4421109647a7482ac4245162cb3d8](https://github.com/sagemath/sagetrac-mirror/commit/3279d7da5eb4421109647a7482ac4245162cb3d8)" to "[a8e1c6d7cdaebab3e4b79020d78fc686f22be4f1](https://github.com/sagemath/sagetrac-mirror/commit/a8e1c6d7cdaebab3e4b79020d78fc686f22be4f1)".



---

archive/issue_comments_635228.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2022-03-30T14:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635228",
    "user": "https://github.com/kwankyu"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_635229.json:
```json
{
    "body": "<a id='comment:56'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4036a28a3617f0b7c096fa0eb71d164a95ffdf77\">4036a28</a></td><td><code>Fix a doctest failure</code></td></tr></table>\n",
    "created_at": "2022-04-01T05:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635229",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4036a28a3617f0b7c096fa0eb71d164a95ffdf77">4036a28</a></td><td><code>Fix a doctest failure</code></td></tr></table>




---

archive/issue_comments_635230.json:
```json
{
    "body": "**Changing commit** from \"[a8e1c6d7cdaebab3e4b79020d78fc686f22be4f1](https://github.com/sagemath/sagetrac-mirror/commit/a8e1c6d7cdaebab3e4b79020d78fc686f22be4f1)\" to \"[4036a28a3617f0b7c096fa0eb71d164a95ffdf77](https://github.com/sagemath/sagetrac-mirror/commit/4036a28a3617f0b7c096fa0eb71d164a95ffdf77)\".",
    "created_at": "2022-04-01T05:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635230",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a8e1c6d7cdaebab3e4b79020d78fc686f22be4f1](https://github.com/sagemath/sagetrac-mirror/commit/a8e1c6d7cdaebab3e4b79020d78fc686f22be4f1)" to "[4036a28a3617f0b7c096fa0eb71d164a95ffdf77](https://github.com/sagemath/sagetrac-mirror/commit/4036a28a3617f0b7c096fa0eb71d164a95ffdf77)".



---

archive/issue_comments_635231.json:
```json
{
    "body": "**Changing commit** from \"[4036a28a3617f0b7c096fa0eb71d164a95ffdf77](https://github.com/sagemath/sagetrac-mirror/commit/4036a28a3617f0b7c096fa0eb71d164a95ffdf77)\" to \"[548536e4c96d2f2eb1376dfe59a38e84588a503a](https://github.com/sagemath/sagetrac-mirror/commit/548536e4c96d2f2eb1376dfe59a38e84588a503a)\".",
    "created_at": "2022-04-03T12:53:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635231",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4036a28a3617f0b7c096fa0eb71d164a95ffdf77](https://github.com/sagemath/sagetrac-mirror/commit/4036a28a3617f0b7c096fa0eb71d164a95ffdf77)" to "[548536e4c96d2f2eb1376dfe59a38e84588a503a](https://github.com/sagemath/sagetrac-mirror/commit/548536e4c96d2f2eb1376dfe59a38e84588a503a)".



---

archive/issue_comments_635232.json:
```json
{
    "body": "<a id='comment:57'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/548536e4c96d2f2eb1376dfe59a38e84588a503a\">548536e</a></td><td><code>Patch jupyter-sphinx to use the latest thebe</code></td></tr></table>\n",
    "created_at": "2022-04-03T12:53:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635232",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/548536e4c96d2f2eb1376dfe59a38e84588a503a">548536e</a></td><td><code>Patch jupyter-sphinx to use the latest thebe</code></td></tr></table>




---

archive/issue_comments_635233.json:
```json
{
    "body": "**Changing commit** from \"[548536e4c96d2f2eb1376dfe59a38e84588a503a](https://github.com/sagemath/sagetrac-mirror/commit/548536e4c96d2f2eb1376dfe59a38e84588a503a)\" to \"[c3c6c4eb9cea2595671a006b554fe64a1f038691](https://github.com/sagemath/sagetrac-mirror/commit/c3c6c4eb9cea2595671a006b554fe64a1f038691)\".",
    "created_at": "2022-04-03T13:13:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635233",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[548536e4c96d2f2eb1376dfe59a38e84588a503a](https://github.com/sagemath/sagetrac-mirror/commit/548536e4c96d2f2eb1376dfe59a38e84588a503a)" to "[c3c6c4eb9cea2595671a006b554fe64a1f038691](https://github.com/sagemath/sagetrac-mirror/commit/c3c6c4eb9cea2595671a006b554fe64a1f038691)".



---

archive/issue_comments_635234.json:
```json
{
    "body": "<a id='comment:58'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3c6c4eb9cea2595671a006b554fe64a1f038691\">c3c6c4e</a></td><td><code>Patch jupyter-sphinx to use the latest thebe</code></td></tr></table>\n",
    "created_at": "2022-04-03T13:13:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635234",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3c6c4eb9cea2595671a006b554fe64a1f038691">c3c6c4e</a></td><td><code>Patch jupyter-sphinx to use the latest thebe</code></td></tr></table>




---

archive/issue_comments_635235.json:
```json
{
    "body": "<a id='comment:59'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2fbdad7c3fd7b447a0be4d6b93b69e4359a3eaac\">2fbdad7</a></td><td><code>Patch jupyter-sphinx to use the latest thebe</code></td></tr></table>\n",
    "created_at": "2022-04-03T13:16:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635235",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2fbdad7c3fd7b447a0be4d6b93b69e4359a3eaac">2fbdad7</a></td><td><code>Patch jupyter-sphinx to use the latest thebe</code></td></tr></table>




---

archive/issue_comments_635236.json:
```json
{
    "body": "**Changing commit** from \"[c3c6c4eb9cea2595671a006b554fe64a1f038691](https://github.com/sagemath/sagetrac-mirror/commit/c3c6c4eb9cea2595671a006b554fe64a1f038691)\" to \"[2fbdad7c3fd7b447a0be4d6b93b69e4359a3eaac](https://github.com/sagemath/sagetrac-mirror/commit/2fbdad7c3fd7b447a0be4d6b93b69e4359a3eaac)\".",
    "created_at": "2022-04-03T13:16:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635236",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c3c6c4eb9cea2595671a006b554fe64a1f038691](https://github.com/sagemath/sagetrac-mirror/commit/c3c6c4eb9cea2595671a006b554fe64a1f038691)" to "[2fbdad7c3fd7b447a0be4d6b93b69e4359a3eaac](https://github.com/sagemath/sagetrac-mirror/commit/2fbdad7c3fd7b447a0be4d6b93b69e4359a3eaac)".



---

archive/issue_comments_635237.json:
```json
{
    "body": "<a id='comment:60'></a>\nSo if I understand correctly, both (1) during the documentation build and (2) when viewing the documentation, either (a) binder is used or (b) a local Jupyter is used.\n\nIs it possible to do 1(b) and 2(a)?",
    "created_at": "2022-04-03T16:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635237",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:60'></a>
So if I understand correctly, both (1) during the documentation build and (2) when viewing the documentation, either (a) binder is used or (b) a local Jupyter is used.

Is it possible to do 1(b) and 2(a)?



---

archive/issue_comments_635238.json:
```json
{
    "body": "<a id='comment:61'></a>\nReplying to [mkoeppe](#comment%3A60):\n> So if I understand correctly, both (1) during the documentation build and (2) when viewing the documentation, either (a) binder is used or (b) a local Jupyter is used.\n> \n> Is it possible to do 1(b) and 2(a)?\n\n\nWhen you do 1(b), thebe configuration is baked into the htmls, so you cannot do 2(a).\n\nIf you want to do 1(a) for the whole documentation, and do 2(b) for a specific documentation, for instance 'prep', then \n\n```\nexport SAGE_JUPYTER_SERVER=http://localhost:8888\nexport SAGE_JUPYTER_SERVER_TOKEN=secret\nsage --docbuild --live-doc prep html\n```\nshould work, but does not. I don't understand why. Instead you should do\n\n```\nsage --docbuild prep html\nexport SAGE_JUPYTER_SERVER=http://localhost:8888\nexport SAGE_JUPYTER_SERVER_TOKEN=secret\nsage --docbuild --live-doc prep html\n```\nThis is because sphinx recognizes the changes of the config variable `jupyter_execute_default_kernel` but not of `jupyter_sphinx_thebelab_config`. Any idea why?",
    "created_at": "2022-04-04T01:35:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635238",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:61'></a>
Replying to [mkoeppe](#comment%3A60):
> So if I understand correctly, both (1) during the documentation build and (2) when viewing the documentation, either (a) binder is used or (b) a local Jupyter is used.
> 
> Is it possible to do 1(b) and 2(a)?


When you do 1(b), thebe configuration is baked into the htmls, so you cannot do 2(a).

If you want to do 1(a) for the whole documentation, and do 2(b) for a specific documentation, for instance 'prep', then 

```
export SAGE_JUPYTER_SERVER=http://localhost:8888
export SAGE_JUPYTER_SERVER_TOKEN=secret
sage --docbuild --live-doc prep html
```
should work, but does not. I don't understand why. Instead you should do

```
sage --docbuild prep html
export SAGE_JUPYTER_SERVER=http://localhost:8888
export SAGE_JUPYTER_SERVER_TOKEN=secret
sage --docbuild --live-doc prep html
```
This is because sphinx recognizes the changes of the config variable `jupyter_execute_default_kernel` but not of `jupyter_sphinx_thebelab_config`. Any idea why?



---

archive/issue_comments_635239.json:
```json
{
    "body": "<a id='comment:62'></a>\nReplying to [klee](#comment%3A61):\n> This is because sphinx recognizes the changes of the config variable `jupyter_execute_default_kernel` but not of `jupyter_sphinx_thebelab_config`. Any idea why?\n\n\nIt is because jupyter-sphinx enrolls `jupyter_execute_default_kernel` as a config value of type `env` and `jupyter_sphinx_thebelab_config` as a config value of type `html`.",
    "created_at": "2022-04-04T05:52:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635239",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:62'></a>
Replying to [klee](#comment%3A61):
> This is because sphinx recognizes the changes of the config variable `jupyter_execute_default_kernel` but not of `jupyter_sphinx_thebelab_config`. Any idea why?


It is because jupyter-sphinx enrolls `jupyter_execute_default_kernel` as a config value of type `env` and `jupyter_sphinx_thebelab_config` as a config value of type `html`.



---

archive/issue_comments_635240.json:
```json
{
    "body": "<a id='comment:63'></a>\nI just tried the full docbuild from scratch with the local Jupyter. The build first failed with\n\n```\n[sagemath_doc_html-none] [reference] preparing documents... skipping loading of indexes... done\n[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:34: WARNING: unknown document: categories/index\n[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:41: WARNING: unknown document: polynomial_rings/index\n[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:43: WARNING: unknown document: finite_rings/index\n[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:58: WARNING: unknown document: calculus/index\n[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:84: WARNING: unknown document: combinat/index\n[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:85: WARNING: unknown document: graphs/index\n[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:89: WARNING: unknown document: coding/index\n[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:90: WARNING: unknown document: cryptography/index\n[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:99: WARNING: unknown document: discrete_geometry/index\n[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:102: WARNING: unknown document: manifolds/index\n[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:133: WARNING: unknown document: curves/index\n[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:134: WARNING: unknown document: arithmetic_curves/index\n[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:139: WARNING: unknown document: databases/index\n[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:149: WARNING: unknown document: misc/index\n[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:150: WARNING: unknown document: doctest/index\n[sagemath_doc_html-none] [reference] The inventory files are in local/share/doc/sage/inventory/en/reference.\n[sagemath_doc_html-none] Error building the documentation.\n```\nbut re-running it, it succeeded. \n\nThen, running the command from the ticket description, I got:\n\n```\n$ sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true --ServerApp.open_browser=false\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 9.6.beta7, Release Date: 2022-04-02               \u2502\n\u2502 Using Python 3.10.2. Type \"help()\" for help.                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nPlease wait while the Jupyterlab server starts...\n[I 2022-04-04 00:50:38.225 ServerApp] jupyterlab | extension was successfully linked.\n[W 2022-04-04 00:50:38.230 NotebookApp] 'disable_check_xsrf' has moved from NotebookApp to ServerApp. This config will be passed to ServerApp. Be sure to update your config before our next release.\n[I 2022-04-04 00:50:38.239 ServerApp] nbclassic | extension was successfully linked.\n[I 2022-04-04 00:50:38.489 ServerApp] notebook_shim | extension was successfully linked.\n[I 2022-04-04 00:50:38.588 ServerApp] notebook_shim | extension was successfully loaded.\n[I 2022-04-04 00:50:38.590 LabApp] JupyterLab extension loaded from /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/jupyterlab\n[I 2022-04-04 00:50:38.590 LabApp] JupyterLab application directory is /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.10/share/jupyter/lab\n[I 2022-04-04 00:50:38.594 ServerApp] jupyterlab | extension was successfully loaded.\n[I 2022-04-04 00:50:38.601 ServerApp] nbclassic | extension was successfully loaded.\n[I 2022-04-04 00:50:38.602 ServerApp] The port 8888 is already in use, trying another port.\n[I 2022-04-04 00:50:38.603 ServerApp] Serving notebooks from local directory: /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11\n[I 2022-04-04 00:50:38.603 ServerApp] Jupyter Server 1.15.6 is running at:\n[I 2022-04-04 00:50:38.603 ServerApp] http://localhost:8889/lab?token=...\n[I 2022-04-04 00:50:38.603 ServerApp]  or http://127.0.0.1:8889/lab?token=...\n[I 2022-04-04 00:50:38.603 ServerApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n```\nProbably, if possible, the instructions should be refined so that the server app does not fall back to another port but rather gives a hard error.",
    "created_at": "2022-04-04T08:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635240",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:63'></a>
I just tried the full docbuild from scratch with the local Jupyter. The build first failed with

```
[sagemath_doc_html-none] [reference] preparing documents... skipping loading of indexes... done
[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:34: WARNING: unknown document: categories/index
[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:41: WARNING: unknown document: polynomial_rings/index
[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:43: WARNING: unknown document: finite_rings/index
[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:58: WARNING: unknown document: calculus/index
[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:84: WARNING: unknown document: combinat/index
[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:85: WARNING: unknown document: graphs/index
[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:89: WARNING: unknown document: coding/index
[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:90: WARNING: unknown document: cryptography/index
[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:99: WARNING: unknown document: discrete_geometry/index
[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:102: WARNING: unknown document: manifolds/index
[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:133: WARNING: unknown document: curves/index
[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:134: WARNING: unknown document: arithmetic_curves/index
[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:139: WARNING: unknown document: databases/index
[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:149: WARNING: unknown document: misc/index
[sagemath_doc_html-none] [reference] /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/doc/en/reference/index.rst:150: WARNING: unknown document: doctest/index
[sagemath_doc_html-none] [reference] The inventory files are in local/share/doc/sage/inventory/en/reference.
[sagemath_doc_html-none] Error building the documentation.
```
but re-running it, it succeeded. 

Then, running the command from the ticket description, I got:

```
$ sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true --ServerApp.open_browser=false

 SageMath version 9.6.beta7, Release Date: 2022-04-02               
 Using Python 3.10.2. Type "help()" for help.                       


 Warning: this is a prerelease version, and it may be unstable.     

Please wait while the Jupyterlab server starts...
[I 2022-04-04 00:50:38.225 ServerApp] jupyterlab | extension was successfully linked.
[W 2022-04-04 00:50:38.230 NotebookApp] 'disable_check_xsrf' has moved from NotebookApp to ServerApp. This config will be passed to ServerApp. Be sure to update your config before our next release.
[I 2022-04-04 00:50:38.239 ServerApp] nbclassic | extension was successfully linked.
[I 2022-04-04 00:50:38.489 ServerApp] notebook_shim | extension was successfully linked.
[I 2022-04-04 00:50:38.588 ServerApp] notebook_shim | extension was successfully loaded.
[I 2022-04-04 00:50:38.590 LabApp] JupyterLab extension loaded from /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.10/lib/python3.10/site-packages/jupyterlab
[I 2022-04-04 00:50:38.590 LabApp] JupyterLab application directory is /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/var/lib/sage/venv-python3.10/share/jupyter/lab
[I 2022-04-04 00:50:38.594 ServerApp] jupyterlab | extension was successfully loaded.
[I 2022-04-04 00:50:38.601 ServerApp] nbclassic | extension was successfully loaded.
[I 2022-04-04 00:50:38.602 ServerApp] The port 8888 is already in use, trying another port.
[I 2022-04-04 00:50:38.603 ServerApp] Serving notebooks from local directory: /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11
[I 2022-04-04 00:50:38.603 ServerApp] Jupyter Server 1.15.6 is running at:
[I 2022-04-04 00:50:38.603 ServerApp] http://localhost:8889/lab?token=...
[I 2022-04-04 00:50:38.603 ServerApp]  or http://127.0.0.1:8889/lab?token=...
[I 2022-04-04 00:50:38.603 ServerApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).
```
Probably, if possible, the instructions should be refined so that the server app does not fall back to another port but rather gives a hard error.



---

archive/issue_comments_635241.json:
```json
{
    "body": "<a id='comment:64'></a>\nOverall, this looks quite promising, but I think there are still a few things that need to be improved to make it ready for the public. One thing is that the interaction is very limited - one cannot edit the inputs, so all one can do is reproduce the result that the doctest is already showing. (Also, in doctest blocks with more than one command, it only shows the last result or the first error.)",
    "created_at": "2022-04-04T08:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635241",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:64'></a>
Overall, this looks quite promising, but I think there are still a few things that need to be improved to make it ready for the public. One thing is that the interaction is very limited - one cannot edit the inputs, so all one can do is reproduce the result that the doctest is already showing. (Also, in doctest blocks with more than one command, it only shows the last result or the first error.)



---

archive/issue_comments_635242.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -52,7 +52,7 @@\n View the documentation with running\n \n ```\n-sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true --ServerApp.open_browser=false\n+sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true --ServerApp.port=8888 --ServerApp.open_browser=false \n ```\n \n ## Selective Build\n``````\n",
    "created_at": "2022-04-04T08:18:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635242",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -52,7 +52,7 @@
 View the documentation with running
 
 ```
-sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true --ServerApp.open_browser=false
+sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true --ServerApp.port=8888 --ServerApp.open_browser=false 
 ```
 
 ## Selective Build
``````




---

archive/issue_comments_635243.json:
```json
{
    "body": "<a id='comment:66'></a>\nReplying to [mkoeppe](#comment%3A63):\n> I just tried the full docbuild from scratch with the local Jupyter. The build first failed with ... but re-running it, it succeeded. \n\n\nYou mean `make doc-clean; make doc-uninstall; make`? \n\nThe first failure seems not related with this ticket...\n\n> Probably, if possible, the instructions should be refined so that the server app does not fall back to another port but rather gives a hard error.\n\n\nDone.",
    "created_at": "2022-04-04T08:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635243",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:66'></a>
Replying to [mkoeppe](#comment%3A63):
> I just tried the full docbuild from scratch with the local Jupyter. The build first failed with ... but re-running it, it succeeded. 


You mean `make doc-clean; make doc-uninstall; make`? 

The first failure seems not related with this ticket...

> Probably, if possible, the instructions should be refined so that the server app does not fall back to another port but rather gives a hard error.


Done.



---

archive/issue_comments_635244.json:
```json
{
    "body": "<a id='comment:67'></a>\nReplying to [mkoeppe](#comment%3A64):\n> Overall, this looks quite promising, but I think there are still a few things that need to be improved to make it ready for the public. One thing is that the interaction is very limited - one cannot edit the inputs, so all one can do is reproduce the result that the doctest is already showing.\n\n\nI think this is the primary purpose of the documentation -- running the examples as they are. If they want to do variations, they should go to jupyter and copy-paste.\n\nOf course, it is easy to allow user modifications. A couple of configuration changes. But first we have to decide what behavior we want.\n\n> (Also, in doctest blocks with more than one command, it only shows the last result or the first error.)\n\n\nThis is to be done by editing the documentation. We cannot make jupyter-sphinx an AI.",
    "created_at": "2022-04-04T08:29:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635244",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:67'></a>
Replying to [mkoeppe](#comment%3A64):
> Overall, this looks quite promising, but I think there are still a few things that need to be improved to make it ready for the public. One thing is that the interaction is very limited - one cannot edit the inputs, so all one can do is reproduce the result that the doctest is already showing.


I think this is the primary purpose of the documentation -- running the examples as they are. If they want to do variations, they should go to jupyter and copy-paste.

Of course, it is easy to allow user modifications. A couple of configuration changes. But first we have to decide what behavior we want.

> (Also, in doctest blocks with more than one command, it only shows the last result or the first error.)


This is to be done by editing the documentation. We cannot make jupyter-sphinx an AI.



---

archive/issue_comments_635245.json:
```json
{
    "body": "<a id='comment:68'></a>\nReplying to [klee](#comment%3A67):\n> > (Also, in doctest blocks with more than one command, it only shows the last result or the first error.)\n\n> \n> This is to be done by editing the documentation. We cannot make jupyter-sphinx an AI.\n\n\nWe can get output from each input line. Then we will have \"Run\" button for each line. Do we want that?",
    "created_at": "2022-04-04T08:32:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635245",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:68'></a>
Replying to [klee](#comment%3A67):
> > (Also, in doctest blocks with more than one command, it only shows the last result or the first error.)

> 
> This is to be done by editing the documentation. We cannot make jupyter-sphinx an AI.


We can get output from each input line. Then we will have "Run" button for each line. Do we want that?



---

archive/issue_comments_635246.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -30,41 +30,63 @@\n \n ## Build\n \n-Default static doc \n+For all below, removing the prebuilt documentation by\n \n ```\n-make doc-clean; make doc-uninstall; make\n+make doc-clean; make doc-uninstall\n ```\n-Live doc with binder server\n+may be necessary before `make`.\n+\n+- Default static doc: \n+\n+```\n+make\n+```\n+\n+- Live doc with binder server:\n \n ```\n export SAGE_LIVE_DOC=yes\n-make doc-clean; make doc-uninstall; make\n+make\n ```\n-Live doc with local server\n \n-```\n-export SAGE_LIVE_DOC=yes\n-export SAGE_JUPYTER_SERVER=http://localhost:8888\n-export SAGE_JUPYTER_SERVER_TOKEN=secret\n-make doc-clean; make doc-uninstall; make\n-```\n-View the documentation with running\n+- Live doc with local server:\n \n-```\n-sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true --ServerApp.port=8888 --ServerApp.open_browser=false \n-```\n+  ```\n+  export SAGE_LIVE_DOC=yes\n+  export SAGE_JUPYTER_SERVER=http://localhost:8888\n+  export SAGE_JUPYTER_SERVER_TOKEN=secret\n+  make\n+  ```\n+  Run\n+\n+  ```\n+  sage --notebook=jupyterlab \\\n+    --ServerApp.token='secret' \\\n+    --ServerApp.allow_origin='null' \\\n+    --ServerApp.disable_check_xsrf=true \\\n+    --ServerApp.port=8888 \\\n+    --ServerApp.open_browser=false \n+  ```\n+  before browsing the documentation.\n \n ## Selective Build\n \n Build static doc fast\n \n ```\n-make doc-clean; make doc-uninstall; make\n+make\n ```\n-and then build live doc selectively, \n+and then build live doc selectively either by\n \n ```\n+sage --docbuild --live-doc reference/plot3d html\n+```\n+or by\n+\n+```\n+export SAGE_JUPYTER_SERVER=http://localhost:8888\n+export SAGE_JUPYTER_SERVER_TOKEN=secret\n sage --docbuild --live-doc reference/plot3d html\n ```\n \n``````\n",
    "created_at": "2022-04-04T14:11:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635246",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -30,41 +30,63 @@
 
 ## Build
 
-Default static doc 
+For all below, removing the prebuilt documentation by
 
 ```
-make doc-clean; make doc-uninstall; make
+make doc-clean; make doc-uninstall
 ```
-Live doc with binder server
+may be necessary before `make`.
+
+- Default static doc: 
+
+```
+make
+```
+
+- Live doc with binder server:
 
 ```
 export SAGE_LIVE_DOC=yes
-make doc-clean; make doc-uninstall; make
+make
 ```
-Live doc with local server
 
-```
-export SAGE_LIVE_DOC=yes
-export SAGE_JUPYTER_SERVER=http://localhost:8888
-export SAGE_JUPYTER_SERVER_TOKEN=secret
-make doc-clean; make doc-uninstall; make
-```
-View the documentation with running
+- Live doc with local server:
 
-```
-sage --notebook=jupyterlab --ServerApp.token='secret' --ServerApp.allow_origin='null' --ServerApp.disable_check_xsrf=true --ServerApp.port=8888 --ServerApp.open_browser=false 
-```
+  ```
+  export SAGE_LIVE_DOC=yes
+  export SAGE_JUPYTER_SERVER=http://localhost:8888
+  export SAGE_JUPYTER_SERVER_TOKEN=secret
+  make
+  ```
+  Run
+
+  ```
+  sage --notebook=jupyterlab \
+    --ServerApp.token='secret' \
+    --ServerApp.allow_origin='null' \
+    --ServerApp.disable_check_xsrf=true \
+    --ServerApp.port=8888 \
+    --ServerApp.open_browser=false 
+  ```
+  before browsing the documentation.
 
 ## Selective Build
 
 Build static doc fast
 
 ```
-make doc-clean; make doc-uninstall; make
+make
 ```
-and then build live doc selectively, 
+and then build live doc selectively either by
 
 ```
+sage --docbuild --live-doc reference/plot3d html
+```
+or by
+
+```
+export SAGE_JUPYTER_SERVER=http://localhost:8888
+export SAGE_JUPYTER_SERVER_TOKEN=secret
 sage --docbuild --live-doc reference/plot3d html
 ```
 
``````




---

archive/issue_comments_635247.json:
```json
{
    "body": "<a id='comment:70'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/546e09210667f6503be2842cf783545651a9b3f5\">546e092</a></td><td><code>Merge branch 'develop' into live-doc-trac33320</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dfd10d31f7e98f6a5ae2f4a73550317b9557d7b3\">dfd10d3</a></td><td><code>Faster live doc building</code></td></tr></table>\n",
    "created_at": "2022-04-05T09:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635247",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:70'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/546e09210667f6503be2842cf783545651a9b3f5">546e092</a></td><td><code>Merge branch 'develop' into live-doc-trac33320</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dfd10d31f7e98f6a5ae2f4a73550317b9557d7b3">dfd10d3</a></td><td><code>Faster live doc building</code></td></tr></table>




---

archive/issue_comments_635248.json:
```json
{
    "body": "**Changing commit** from \"[2fbdad7c3fd7b447a0be4d6b93b69e4359a3eaac](https://github.com/sagemath/sagetrac-mirror/commit/2fbdad7c3fd7b447a0be4d6b93b69e4359a3eaac)\" to \"[dfd10d31f7e98f6a5ae2f4a73550317b9557d7b3](https://github.com/sagemath/sagetrac-mirror/commit/dfd10d31f7e98f6a5ae2f4a73550317b9557d7b3)\".",
    "created_at": "2022-04-05T09:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635248",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2fbdad7c3fd7b447a0be4d6b93b69e4359a3eaac](https://github.com/sagemath/sagetrac-mirror/commit/2fbdad7c3fd7b447a0be4d6b93b69e4359a3eaac)" to "[dfd10d31f7e98f6a5ae2f4a73550317b9557d7b3](https://github.com/sagemath/sagetrac-mirror/commit/dfd10d31f7e98f6a5ae2f4a73550317b9557d7b3)".



---

archive/issue_comments_635249.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -11,15 +11,14 @@\n This ticket depends on #33533 for an upgrade of `nbconvert`; otherwise an error appears while building.\n \n This ticket patches `jupyter-sphinx` with \n-- https://github.com/mkoeppe/jupyter-sphinx/commit/5067473640eca1b4d43fbacb643d9af47cc767d1\n-to fix a bug and suppress a warning. The bugfix is also in the master branch\n-- https://github.com/jupyter/jupyter-sphinx/issues/198\n+- https://github.com/kwankyu/jupyter-sphinx/compare/upstream...v0.3.2-sage-trac-33320?expand=1\n \n ## Preparation before build\n-Suppress a warning by\n+Suppress warnings by\n \n ```\n-sage -i debugpy  \n+sage -i debugpy \n+sage -pip install soupsieve \n ```\n \n Install jupyterlab (for live doc with a local server) \n@@ -29,13 +28,6 @@\n ```\n \n ## Build\n-\n-For all below, removing the prebuilt documentation by\n-\n-```\n-make doc-clean; make doc-uninstall\n-```\n-may be necessary before `make`.\n \n - Default static doc: \n \n@@ -70,9 +62,15 @@\n   ```\n   before browsing the documentation.\n \n+For all above, removing the prebuilt documentation by\n+\n+```\n+make doc-clean; make doc-uninstall\n+```\n+may be necessary before `make`.\n ## Selective Build\n \n-Build static doc fast\n+Build static doc\n \n ```\n make\n``````\n",
    "created_at": "2022-04-05T09:33:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635249",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -11,15 +11,14 @@
 This ticket depends on #33533 for an upgrade of `nbconvert`; otherwise an error appears while building.
 
 This ticket patches `jupyter-sphinx` with 
-- https://github.com/mkoeppe/jupyter-sphinx/commit/5067473640eca1b4d43fbacb643d9af47cc767d1
-to fix a bug and suppress a warning. The bugfix is also in the master branch
-- https://github.com/jupyter/jupyter-sphinx/issues/198
+- https://github.com/kwankyu/jupyter-sphinx/compare/upstream...v0.3.2-sage-trac-33320?expand=1
 
 ## Preparation before build
-Suppress a warning by
+Suppress warnings by
 
 ```
-sage -i debugpy  
+sage -i debugpy 
+sage -pip install soupsieve 
 ```
 
 Install jupyterlab (for live doc with a local server) 
@@ -29,13 +28,6 @@
 ```
 
 ## Build
-
-For all below, removing the prebuilt documentation by
-
-```
-make doc-clean; make doc-uninstall
-```
-may be necessary before `make`.
 
 - Default static doc: 
 
@@ -70,9 +62,15 @@
   ```
   before browsing the documentation.
 
+For all above, removing the prebuilt documentation by
+
+```
+make doc-clean; make doc-uninstall
+```
+may be necessary before `make`.
 ## Selective Build
 
-Build static doc fast
+Build static doc
 
 ```
 make
``````




---

archive/issue_comments_635250.json:
```json
{
    "body": "<a id='comment:72'></a>\nWith the latest commit, live doc building is almost as fast as building the static doc.",
    "created_at": "2022-04-05T09:35:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635250",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:72'></a>
With the latest commit, live doc building is almost as fast as building the static doc.



---

archive/issue_comments_635251.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -78,14 +78,14 @@\n and then build live doc selectively either by\n \n ```\n-sage --docbuild --live-doc reference/plot3d html\n+sage --docbuild --live-doc prep html\n ```\n or by\n \n ```\n export SAGE_JUPYTER_SERVER=http://localhost:8888\n export SAGE_JUPYTER_SERVER_TOKEN=secret\n-sage --docbuild --live-doc reference/plot3d html\n+sage --docbuild --live-doc prep html\n ```\n \n \n``````\n",
    "created_at": "2022-04-05T09:37:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635251",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -78,14 +78,14 @@
 and then build live doc selectively either by
 
 ```
-sage --docbuild --live-doc reference/plot3d html
+sage --docbuild --live-doc prep html
 ```
 or by
 
 ```
 export SAGE_JUPYTER_SERVER=http://localhost:8888
 export SAGE_JUPYTER_SERVER_TOKEN=secret
-sage --docbuild --live-doc reference/plot3d html
+sage --docbuild --live-doc prep html
 ```
 
 
``````




---

archive/issue_comments_635252.json:
```json
{
    "body": "<a id='comment:74'></a>\nSelective build works now well. You can quickly switch between binder server and local server.",
    "created_at": "2022-04-05T09:38:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635252",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:74'></a>
Selective build works now well. You can quickly switch between binder server and local server.



---

archive/issue_comments_635253.json:
```json
{
    "body": "<a id='comment:75'></a>\nAs live doc building is as fast as building static doc, it makes sense to switch to the live doc (with binder server) as default. Binder servers seem slow though (at least to me).",
    "created_at": "2022-04-05T09:41:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635253",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:75'></a>
As live doc building is as fast as building static doc, it makes sense to switch to the live doc (with binder server) as default. Binder servers seem slow though (at least to me).



---

archive/issue_comments_635254.json:
```json
{
    "body": "<a id='comment:76'></a>\nI think the branch is good enough (frankly, very nice!) to make it into sage 9.6, as this ticket supersedes #33507: `sagemath_doc_html: Use jupyter-sphinx for 3D graphics`.",
    "created_at": "2022-04-05T09:47:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635254",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:76'></a>
I think the branch is good enough (frankly, very nice!) to make it into sage 9.6, as this ticket supersedes #33507: `sagemath_doc_html: Use jupyter-sphinx for 3D graphics`.



---

archive/issue_comments_635255.json:
```json
{
    "body": "**Changing dependencies** from \"#33507, #33533\" to \"\".",
    "created_at": "2022-04-05T14:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635255",
    "user": "https://github.com/kwankyu"
}
```

**Changing dependencies** from "#33507, #33533" to "".



---

archive/issue_comments_635256.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,8 +7,6 @@\n was closed.\n \n Based on the efforts of #24593, the goal of this ticket is to deliver the live documentation using jupyter-sphinx so that every code blocks on every documentation page can be activated.\n-\n-This ticket depends on #33533 for an upgrade of `nbconvert`; otherwise an error appears while building.\n \n This ticket patches `jupyter-sphinx` with \n - https://github.com/kwankyu/jupyter-sphinx/compare/upstream...v0.3.2-sage-trac-33320?expand=1\n``````\n",
    "created_at": "2022-04-05T14:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635256",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,8 +7,6 @@
 was closed.
 
 Based on the efforts of #24593, the goal of this ticket is to deliver the live documentation using jupyter-sphinx so that every code blocks on every documentation page can be activated.
-
-This ticket depends on #33533 for an upgrade of `nbconvert`; otherwise an error appears while building.
 
 This ticket patches `jupyter-sphinx` with 
 - https://github.com/kwankyu/jupyter-sphinx/compare/upstream...v0.3.2-sage-trac-33320?expand=1
``````




---

archive/issue_comments_635257.json:
```json
{
    "body": "<a id='comment:78'></a>\nI just found this project:\n\nhttps://sphinx-thebe.readthedocs.io/en/latest/index.html\n\nIt may be more suitable for us.",
    "created_at": "2022-04-11T08:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635257",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:78'></a>
I just found this project:

https://sphinx-thebe.readthedocs.io/en/latest/index.html

It may be more suitable for us.



---

archive/issue_comments_635258.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2022-04-11T08:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635258",
    "user": "https://github.com/kwankyu"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_events_098632.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33320#event-98632"
}
```



---

archive/issue_events_098633.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33320#event-98633"
}
```



---

archive/issue_comments_635259.json:
```json
{
    "body": "<a id='comment:80'></a>\nReplying to [klee](#comment%3A78):\n> https://sphinx-thebe.readthedocs.io/en/latest/index.html\n> \n> It may be more suitable for us.\n\n\nsphinx-thebe translates nodes\n\n```\n.. container::\n   :class: thebe\n   \n   1 + 1\n```\nto html elements that can be activated by thebe.\n\njupyter-sphinx executes nodes\n\n```\n.. jupyter_execute::\n\n   1 + 1\n```\nby jupyter and insert the output to the built htmls and can also insert html elements that can be activated by thebe.\n\nPresently we are using jupyter-sphinx but suppressing jupyter execution part (somewhat clumsily), which we don't need currently.\n\nThere is also a discussion (https://github.com/jupyter/jupyter-sphinx/issues/137) about using sphinx-thebe for jupyter-sphinx's thebe part. It is unclear how much this progressed.\n\nSo I think that from where we stand, there is no clear benefit of switching to sphinx-thebe.",
    "created_at": "2022-04-12T06:43:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635259",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:80'></a>
Replying to [klee](#comment%3A78):
> https://sphinx-thebe.readthedocs.io/en/latest/index.html
> 
> It may be more suitable for us.


sphinx-thebe translates nodes

```
.. container::
   :class: thebe
   
   1 + 1
```
to html elements that can be activated by thebe.

jupyter-sphinx executes nodes

```
.. jupyter_execute::

   1 + 1
```
by jupyter and insert the output to the built htmls and can also insert html elements that can be activated by thebe.

Presently we are using jupyter-sphinx but suppressing jupyter execution part (somewhat clumsily), which we don't need currently.

There is also a discussion (https://github.com/jupyter/jupyter-sphinx/issues/137) about using sphinx-thebe for jupyter-sphinx's thebe part. It is unclear how much this progressed.

So I think that from where we stand, there is no clear benefit of switching to sphinx-thebe.



---

archive/issue_comments_635260.json:
```json
{
    "body": "**Changing commit** from \"[dfd10d31f7e98f6a5ae2f4a73550317b9557d7b3](https://github.com/sagemath/sagetrac-mirror/commit/dfd10d31f7e98f6a5ae2f4a73550317b9557d7b3)\" to \"[e917f892a6e94c4f51fa3763e7c631bcc877d4a7](https://github.com/sagemath/sagetrac-mirror/commit/e917f892a6e94c4f51fa3763e7c631bcc877d4a7)\".",
    "created_at": "2022-04-12T06:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635260",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[dfd10d31f7e98f6a5ae2f4a73550317b9557d7b3](https://github.com/sagemath/sagetrac-mirror/commit/dfd10d31f7e98f6a5ae2f4a73550317b9557d7b3)" to "[e917f892a6e94c4f51fa3763e7c631bcc877d4a7](https://github.com/sagemath/sagetrac-mirror/commit/e917f892a6e94c4f51fa3763e7c631bcc877d4a7)".



---

archive/issue_comments_635261.json:
```json
{
    "body": "<a id='comment:81'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f217705d7d076523e9b1b2a841a85bb4c64fed92\">f217705</a></td><td><code>Merge branch develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e917f892a6e94c4f51fa3763e7c631bcc877d4a7\">e917f89</a></td><td><code>Patch jupyter-sphinx to prevent unncessary js injections</code></td></tr></table>\n",
    "created_at": "2022-04-12T06:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635261",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:81'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f217705d7d076523e9b1b2a841a85bb4c64fed92">f217705</a></td><td><code>Merge branch develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e917f892a6e94c4f51fa3763e7c631bcc877d4a7">e917f89</a></td><td><code>Patch jupyter-sphinx to prevent unncessary js injections</code></td></tr></table>




---

archive/issue_comments_635262.json:
```json
{
    "body": "<a id='comment:82'></a>\n#33507 introduced a performance regression in sage html documentation by inserting \n\n```\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js\"></script>\n<script src=\"https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js\"></script>\n```  \nwhich loads rather big javascripts to every page and incurs a slow page loading. You may notice this if compared with the previous sage documentation.\n\nThe last commit contains a patch to fix this.",
    "created_at": "2022-04-12T07:06:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635262",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:82'></a>
#33507 introduced a performance regression in sage html documentation by inserting 

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
```  
which loads rather big javascripts to every page and incurs a slow page loading. You may notice this if compared with the previous sage documentation.

The last commit contains a patch to fix this.



---

archive/issue_comments_635263.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2022-04-12T07:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635263",
    "user": "https://github.com/kwankyu"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_635264.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -63,7 +63,7 @@\n For all above, removing the prebuilt documentation by\n \n ```\n-make doc-clean; make doc-uninstall\n+make doc-clean doc-uninstall\n ```\n may be necessary before `make`.\n ## Selective Build\n``````\n",
    "created_at": "2022-04-12T07:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635264",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -63,7 +63,7 @@
 For all above, removing the prebuilt documentation by
 
 ```
-make doc-clean; make doc-uninstall
+make doc-clean doc-uninstall
 ```
 may be necessary before `make`.
 ## Selective Build
``````




---

archive/issue_comments_635265.json:
```json
{
    "body": "<a id='comment:84'></a>\nIs there a way to fix this with a patch that could be accepted upstream? \n\n(See #31543)",
    "created_at": "2022-04-12T16:44:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635265",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:84'></a>
Is there a way to fix this with a patch that could be accepted upstream? 

(See #31543)



---

archive/issue_comments_635266.json:
```json
{
    "body": "<a id='comment:85'></a>\nReplying to [mkoeppe](#comment%3A84):\n> Is there a way to fix this with a patch that could be accepted upstream? \n> \n> (See #31543)\n\n\nThere would be no simple patch. Even if there is a (big) patch, they may not accept it because it is not fixing a bug. \n\nIf we don't like patched source, then perhaps we should switch to sphinx-thebe.",
    "created_at": "2022-04-13T00:10:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635266",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:85'></a>
Replying to [mkoeppe](#comment%3A84):
> Is there a way to fix this with a patch that could be accepted upstream? 
> 
> (See #31543)


There would be no simple patch. Even if there is a (big) patch, they may not accept it because it is not fixing a bug. 

If we don't like patched source, then perhaps we should switch to sphinx-thebe.



---

archive/issue_comments_635267.json:
```json
{
    "body": "<a id='comment:86'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5420184b7be1024fe9c39587b330516b5c3153a8\">5420184</a></td><td><code>Make code blocks editable</code></td></tr></table>\n",
    "created_at": "2022-04-13T04:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635267",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:86'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5420184b7be1024fe9c39587b330516b5c3153a8">5420184</a></td><td><code>Make code blocks editable</code></td></tr></table>




---

archive/issue_comments_635268.json:
```json
{
    "body": "**Changing commit** from \"[e917f892a6e94c4f51fa3763e7c631bcc877d4a7](https://github.com/sagemath/sagetrac-mirror/commit/e917f892a6e94c4f51fa3763e7c631bcc877d4a7)\" to \"[5420184b7be1024fe9c39587b330516b5c3153a8](https://github.com/sagemath/sagetrac-mirror/commit/5420184b7be1024fe9c39587b330516b5c3153a8)\".",
    "created_at": "2022-04-13T04:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635268",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e917f892a6e94c4f51fa3763e7c631bcc877d4a7](https://github.com/sagemath/sagetrac-mirror/commit/e917f892a6e94c4f51fa3763e7c631bcc877d4a7)" to "[5420184b7be1024fe9c39587b330516b5c3153a8](https://github.com/sagemath/sagetrac-mirror/commit/5420184b7be1024fe9c39587b330516b5c3153a8)".



---

archive/issue_comments_635269.json:
```json
{
    "body": "<a id='comment:87'></a>\nReplying to [klee](#comment%3A67):\n> Replying to [mkoeppe](#comment%3A64):\n> > One thing is that the interaction is very limited - one cannot edit the inputs, so all one can do is reproduce the result that the doctest is already showing.\n\n> \n> I think this is the primary purpose of the documentation -- running the examples as they are. If they want to do variations, they should go to jupyter and copy-paste.\n> \n> Of course, it is easy to allow user modifications. A couple of configuration changes. But first we have to decide what behavior we want.\n\n\nUsing live docs, I realized that many example code blocks in sage documentation are not ready for live run, and frequently needs user's editing before run. Hence I changed my mind, and the last commit makes code blocks editable.",
    "created_at": "2022-04-13T04:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635269",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:87'></a>
Replying to [klee](#comment%3A67):
> Replying to [mkoeppe](#comment%3A64):
> > One thing is that the interaction is very limited - one cannot edit the inputs, so all one can do is reproduce the result that the doctest is already showing.

> 
> I think this is the primary purpose of the documentation -- running the examples as they are. If they want to do variations, they should go to jupyter and copy-paste.
> 
> Of course, it is easy to allow user modifications. A couple of configuration changes. But first we have to decide what behavior we want.


Using live docs, I realized that many example code blocks in sage documentation are not ready for live run, and frequently needs user's editing before run. Hence I changed my mind, and the last commit makes code blocks editable.



---

archive/issue_comments_635270.json:
```json
{
    "body": "<a id='comment:88'></a>\nNote that code-mirror configuration doesn't work. It seems an issue of the current thebe.",
    "created_at": "2022-04-13T04:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635270",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:88'></a>
Note that code-mirror configuration doesn't work. It seems an issue of the current thebe.



---

archive/issue_comments_635271.json:
```json
{
    "body": "<a id='comment:89'></a>\nNote also that it is now a lot easy to copy-paste code blocks into jupyter :)",
    "created_at": "2022-04-13T04:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635271",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:89'></a>
Note also that it is now a lot easy to copy-paste code blocks into jupyter :)



---

archive/issue_comments_635272.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -60,12 +60,18 @@\n   ```\n   before browsing the documentation.\n \n-For all above, removing the prebuilt documentation by\n+If things does not work as expected, removing the existing documentation by\n \n ```\n make doc-clean doc-uninstall\n ```\n-may be necessary before `make`.\n+may be necessary before `make`. If this is burdensome, try first\n+\n+```\n+sage --docbuild reference_top html\n+```\n+which updates static files (javascripts) directory.\n+\n ## Selective Build\n \n Build static doc\n``````\n",
    "created_at": "2022-04-15T02:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635272",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -60,12 +60,18 @@
   ```
   before browsing the documentation.
 
-For all above, removing the prebuilt documentation by
+If things does not work as expected, removing the existing documentation by
 
 ```
 make doc-clean doc-uninstall
 ```
-may be necessary before `make`.
+may be necessary before `make`. If this is burdensome, try first
+
+```
+sage --docbuild reference_top html
+```
+which updates static files (javascripts) directory.
+
 ## Selective Build
 
 Build static doc
``````




---

archive/issue_comments_635273.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -60,7 +60,7 @@\n   ```\n   before browsing the documentation.\n \n-If things does not work as expected, removing the existing documentation by\n+If things do not work as expected, removing the existing documentation by\n \n ```\n make doc-clean doc-uninstall\n``````\n",
    "created_at": "2022-04-15T02:46:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635273",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -60,7 +60,7 @@
   ```
   before browsing the documentation.
 
-If things does not work as expected, removing the existing documentation by
+If things do not work as expected, removing the existing documentation by
 
 ```
 make doc-clean doc-uninstall
``````




---

archive/issue_comments_635274.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -44,7 +44,7 @@\n \n   ```\n   export SAGE_LIVE_DOC=yes\n-  export SAGE_JUPYTER_SERVER=http://localhost:8888\n+  export SAGE_JUPYTER_SERVER=http://localhost:8889\n   export SAGE_JUPYTER_SERVER_TOKEN=secret\n   make\n   ```\n@@ -55,7 +55,7 @@\n     --ServerApp.token='secret' \\\n     --ServerApp.allow_origin='null' \\\n     --ServerApp.disable_check_xsrf=true \\\n-    --ServerApp.port=8888 \\\n+    --ServerApp.port=8889 \\\n     --ServerApp.open_browser=false \n   ```\n   before browsing the documentation.\n@@ -87,7 +87,7 @@\n or by\n \n ```\n-export SAGE_JUPYTER_SERVER=http://localhost:8888\n+export SAGE_JUPYTER_SERVER=http://localhost:8889\n export SAGE_JUPYTER_SERVER_TOKEN=secret\n sage --docbuild --live-doc prep html\n ```\n``````\n",
    "created_at": "2022-04-15T04:27:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635274",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -44,7 +44,7 @@
 
   ```
   export SAGE_LIVE_DOC=yes
-  export SAGE_JUPYTER_SERVER=http://localhost:8888
+  export SAGE_JUPYTER_SERVER=http://localhost:8889
   export SAGE_JUPYTER_SERVER_TOKEN=secret
   make
   ```
@@ -55,7 +55,7 @@
     --ServerApp.token='secret' \
     --ServerApp.allow_origin='null' \
     --ServerApp.disable_check_xsrf=true \
-    --ServerApp.port=8888 \
+    --ServerApp.port=8889 \
     --ServerApp.open_browser=false 
   ```
   before browsing the documentation.
@@ -87,7 +87,7 @@
 or by
 
 ```
-export SAGE_JUPYTER_SERVER=http://localhost:8888
+export SAGE_JUPYTER_SERVER=http://localhost:8889
 export SAGE_JUPYTER_SERVER_TOKEN=secret
 sage --docbuild --live-doc prep html
 ```
``````




---

archive/issue_comments_635275.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -45,7 +45,7 @@\n   ```\n   export SAGE_LIVE_DOC=yes\n   export SAGE_JUPYTER_SERVER=http://localhost:8889\n-  export SAGE_JUPYTER_SERVER_TOKEN=secret\n+  export SAGE_JUPYTER_SERVER_TOKEN=secret  # default \n   make\n   ```\n   Run\n@@ -88,7 +88,7 @@\n \n ```\n export SAGE_JUPYTER_SERVER=http://localhost:8889\n-export SAGE_JUPYTER_SERVER_TOKEN=secret\n+export SAGE_JUPYTER_SERVER_TOKEN=secret  # default \n sage --docbuild --live-doc prep html\n ```\n \n``````\n",
    "created_at": "2022-04-15T04:30:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635275",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -45,7 +45,7 @@
   ```
   export SAGE_LIVE_DOC=yes
   export SAGE_JUPYTER_SERVER=http://localhost:8889
-  export SAGE_JUPYTER_SERVER_TOKEN=secret
+  export SAGE_JUPYTER_SERVER_TOKEN=secret  # default 
   make
   ```
   Run
@@ -88,7 +88,7 @@
 
 ```
 export SAGE_JUPYTER_SERVER=http://localhost:8889
-export SAGE_JUPYTER_SERVER_TOKEN=secret
+export SAGE_JUPYTER_SERVER_TOKEN=secret  # default 
 sage --docbuild --live-doc prep html
 ```
 
``````




---

archive/issue_comments_635276.json:
```json
{
    "body": "**Changing commit** from \"[5420184b7be1024fe9c39587b330516b5c3153a8](https://github.com/sagemath/sagetrac-mirror/commit/5420184b7be1024fe9c39587b330516b5c3153a8)\" to \"[a5479ba9e365878410ead7d468e072d8164b0663](https://github.com/sagemath/sagetrac-mirror/commit/a5479ba9e365878410ead7d468e072d8164b0663)\".",
    "created_at": "2022-04-24T07:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635276",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5420184b7be1024fe9c39587b330516b5c3153a8](https://github.com/sagemath/sagetrac-mirror/commit/5420184b7be1024fe9c39587b330516b5c3153a8)" to "[a5479ba9e365878410ead7d468e072d8164b0663](https://github.com/sagemath/sagetrac-mirror/commit/a5479ba9e365878410ead7d468e072d8164b0663)".



---

archive/issue_comments_635277.json:
```json
{
    "body": "<a id='comment:94'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee57bfcac11186332868d133d3617d7505912793\">ee57bfc</a></td><td><code>Merge branch develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5479ba9e365878410ead7d468e072d8164b0663\">a5479ba</a></td><td><code>Fix a bug in patching jupyter-sphinx</code></td></tr></table>\n",
    "created_at": "2022-04-24T07:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635277",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:94'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee57bfcac11186332868d133d3617d7505912793">ee57bfc</a></td><td><code>Merge branch develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5479ba9e365878410ead7d468e072d8164b0663">a5479ba</a></td><td><code>Fix a bug in patching jupyter-sphinx</code></td></tr></table>




---

archive/issue_comments_635278.json:
```json
{
    "body": "<a id='comment:95'></a>\nThe last commit fixes a bug that causes a failure when `.. JUPYTER_EXECUTE::` is directly used without `execute` tag.",
    "created_at": "2022-04-24T08:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635278",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:95'></a>
The last commit fixes a bug that causes a failure when `.. JUPYTER_EXECUTE::` is directly used without `execute` tag.



---

archive/issue_comments_635279.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -92,10 +92,12 @@\n sage --docbuild --live-doc prep html\n ```\n \n+## Direct use of `.. JUPYTER-EXECUTE::` is deprecated\n+\n+As #33507 added jupyter-sphinx extension to Sphinx conf, it provided `.. JUPYTER-EXECUTE::` directive to documentation authors to add executable code blocks. As the present ticket allows to build the live documentation in which all code blocks are executable, direct use of the directive by documentation authors is deprecated. Along with this change, an issue of heavy javascript injections, which slows down documentation pages loading time, is fixed in this ticket.\n \n \n \n \n \n \n-\n``````\n",
    "created_at": "2022-04-25T07:26:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635279",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -92,10 +92,12 @@
 sage --docbuild --live-doc prep html
 ```
 
+## Direct use of `.. JUPYTER-EXECUTE::` is deprecated
+
+As #33507 added jupyter-sphinx extension to Sphinx conf, it provided `.. JUPYTER-EXECUTE::` directive to documentation authors to add executable code blocks. As the present ticket allows to build the live documentation in which all code blocks are executable, direct use of the directive by documentation authors is deprecated. Along with this change, an issue of heavy javascript injections, which slows down documentation pages loading time, is fixed in this ticket.
 
 
 
 
 
 
-
``````




---

archive/issue_comments_635280.json:
```json
{
    "body": "**Changing commit** from \"[a5479ba9e365878410ead7d468e072d8164b0663](https://github.com/sagemath/sagetrac-mirror/commit/a5479ba9e365878410ead7d468e072d8164b0663)\" to \"[f5dff4392a2551e9ae7634ecadccd53ec2158ac7](https://github.com/sagemath/sagetrac-mirror/commit/f5dff4392a2551e9ae7634ecadccd53ec2158ac7)\".",
    "created_at": "2022-04-25T07:37:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635280",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a5479ba9e365878410ead7d468e072d8164b0663](https://github.com/sagemath/sagetrac-mirror/commit/a5479ba9e365878410ead7d468e072d8164b0663)" to "[f5dff4392a2551e9ae7634ecadccd53ec2158ac7](https://github.com/sagemath/sagetrac-mirror/commit/f5dff4392a2551e9ae7634ecadccd53ec2158ac7)".



---

archive/issue_comments_635281.json:
```json
{
    "body": "<a id='comment:97'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5dff4392a2551e9ae7634ecadccd53ec2158ac7\">f5dff43</a></td><td><code>Use jupyter-sphinx only for live doc</code></td></tr></table>\n",
    "created_at": "2022-04-25T07:37:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635281",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:97'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5dff4392a2551e9ae7634ecadccd53ec2158ac7">f5dff43</a></td><td><code>Use jupyter-sphinx only for live doc</code></td></tr></table>




---

archive/issue_comments_635282.json:
```json
{
    "body": "**Dependencies:** #33763",
    "created_at": "2022-04-29T19:00:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635282",
    "user": "https://github.com/kwankyu"
}
```

**Dependencies:** #33763



---

archive/issue_comments_635283.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2022-04-29T19:00:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33320#issuecomment-635283",
    "user": "https://github.com/kwankyu"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_events_098634.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33320#event-98634"
}
```



---

archive/issue_events_098635.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33320",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33320#event-98635"
}
```
