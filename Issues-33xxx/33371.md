# Issue 33371: Building documentation is broken in Sage 9.6.beta6

archive/issues_033371.json:
```json
{
    "body": "CC:  @kwankyu @strogdon @haraldschilly @mkoeppe\n\nBuilding the documentation is currently broken and fails with the following error messages:\n\n$ make doc-clean; make doc-uninstall; make\n\n```\n...\n[sagemath_doc_html-none] [semirings] building [html]: targets for 3 source files that are out of date\n[sagemath_doc_html-none] [semirings] dumping search index in English (code: en)... done\n[sagemath_doc_html-none] [semirings] The HTML pages are in ../../home/gitpod/sage-local/share/doc/sage/html/en/reference/semirings.\n[sagemath_doc_html-none] [semirings] Extension error (matplotlib.sphinxext.plot_directive):\n[sagemath_doc_html-none] [semirings] Handler <function _copy_css_file at 0x7f0673973e50> for event 'build-finished' threw an exception (exception: [Errno 17] File exists: '/home/gitpod/sage-local/share/doc/sage/html/en/reference/semirings/_static')\n[sagemath_doc_html-none] Build finished. The built documents can be found in /home/gitpod/sage-local/share/doc/sage/html/en/reference/semirings\n...\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/33608\n\n",
    "closed_at": "2022-04-03T11:14:00Z",
    "created_at": "2022-03-30T20:12:45Z",
    "labels": [
        "component: documentation",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Building documentation is broken in Sage 9.6.beta6",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33371",
    "user": "https://github.com/tobiasdiez"
}
```
CC:  @kwankyu @strogdon @haraldschilly @mkoeppe

Building the documentation is currently broken and fails with the following error messages:

$ make doc-clean; make doc-uninstall; make

```
...
[sagemath_doc_html-none] [semirings] building [html]: targets for 3 source files that are out of date
[sagemath_doc_html-none] [semirings] dumping search index in English (code: en)... done
[sagemath_doc_html-none] [semirings] The HTML pages are in ../../home/gitpod/sage-local/share/doc/sage/html/en/reference/semirings.
[sagemath_doc_html-none] [semirings] Extension error (matplotlib.sphinxext.plot_directive):
[sagemath_doc_html-none] [semirings] Handler <function _copy_css_file at 0x7f0673973e50> for event 'build-finished' threw an exception (exception: [Errno 17] File exists: '/home/gitpod/sage-local/share/doc/sage/html/en/reference/semirings/_static')
[sagemath_doc_html-none] Build finished. The built documents can be found in /home/gitpod/sage-local/share/doc/sage/html/en/reference/semirings
...
```


Issue created by migration from https://trac.sagemath.org/ticket/33608





---

archive/issue_comments_474587.json:
```json
{
    "body": "This is not specific to gitpod. I am experiencing it too. It seem to have been introduced in beta6. \n\nI guess that the following happens. plot_directive extension writes its own css files into _static directory for each sphinx project. In our case, _static is a symlink to ../static directory, which is shared with all projects. Hence when plot_directive attempts to write again, _static (or ../static) directory already has the files, which triggers \"File exists\" error.\n\nWhat I don't understand why this mechanism was no problem before, but now it is...",
    "created_at": "2022-03-31T00:10:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474587",
    "user": "https://github.com/kwankyu"
}
```

This is not specific to gitpod. I am experiencing it too. It seem to have been introduced in beta6. 

I guess that the following happens. plot_directive extension writes its own css files into _static directory for each sphinx project. In our case, _static is a symlink to ../static directory, which is shared with all projects. Hence when plot_directive attempts to write again, _static (or ../static) directory already has the files, which triggers "File exists" error.

What I don't understand why this mechanism was no problem before, but now it is...



---

archive/issue_comments_474588.json:
```json
{
    "body": "Are\n\n```\n$ ./sage --docbuild tutorial html\n```\nand\n\n```\n$ ./sage --docbuild reference html\n```\nsupposed to fail after a normal `sagelib-9.6.beta6` build without doing anything else? If so, I don't see this here. Everything works.",
    "created_at": "2022-03-31T00:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474588",
    "user": "https://github.com/strogdon"
}
```

Are

```
$ ./sage --docbuild tutorial html
```
and

```
$ ./sage --docbuild reference html
```
supposed to fail after a normal `sagelib-9.6.beta6` build without doing anything else? If so, I don't see this here. Everything works.



---

archive/issue_comments_474589.json:
```json
{
    "body": "I must add that I have the `html` docs installed. Does one have to do a `make doc-clean doc-uninstall` first?",
    "created_at": "2022-03-31T01:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474589",
    "user": "https://github.com/strogdon"
}
```

I must add that I have the `html` docs installed. Does one have to do a `make doc-clean doc-uninstall` first?



---

archive/issue_comments_474590.json:
```json
{
    "body": "Replying to [comment:3 strogdon]:\n> I must add that I have the `html` docs installed. Does one have to do a `make doc-clean doc-uninstall` first?\n\n\nYes. This is also strange...",
    "created_at": "2022-03-31T02:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474590",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:3 strogdon]:
> I must add that I have the `html` docs installed. Does one have to do a `make doc-clean doc-uninstall` first?


Yes. This is also strange...



---

archive/issue_comments_474591.json:
```json
{
    "body": "In beta6, python3 was upgraded:\n\n```\n26574b0f82 Trac #33512: Update python3 to 3.10.3\n```\nIf you build sage with python 3.10.3, there are no more those errors. So this might be some incompatibility in python system library and packages...",
    "created_at": "2022-03-31T05:38:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474591",
    "user": "https://github.com/kwankyu"
}
```

In beta6, python3 was upgraded:

```
26574b0f82 Trac #33512: Update python3 to 3.10.3
```
If you build sage with python 3.10.3, there are no more those errors. So this might be some incompatibility in python system library and packages...



---

archive/issue_comments_474592.json:
```json
{
    "body": "Replying to [comment:5 klee]:\n> In beta6, python3 was upgraded:\n> \n> ```\n> 26574b0f82 Trac #33512: Update python3 to 3.10.3\n> ```\n> If you build sage with python 3.10.3, there are no more those errors. So this might be some incompatibility in python system library and packages... \n\n\nThis may be wrong. In another build, I see those errors back even with python 3.10.3. I am utterly confused.",
    "created_at": "2022-03-31T07:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474592",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:5 klee]:
> In beta6, python3 was upgraded:
> 
> ```
> 26574b0f82 Trac #33512: Update python3 to 3.10.3
> ```
> If you build sage with python 3.10.3, there are no more those errors. So this might be some incompatibility in python system library and packages... 


This may be wrong. In another build, I see those errors back even with python 3.10.3. I am utterly confused.



---

archive/issue_comments_474593.json:
```json
{
    "body": "Symlinks pointing to a non-existing directory broke documentation building. These symlinks were no problem before. But some obscure changes in Sage 9.6.beta6 (possibly merge of python 3.10.3) now makes them problematic.",
    "created_at": "2022-03-31T14:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474593",
    "user": "https://github.com/kwankyu"
}
```

Symlinks pointing to a non-existing directory broke documentation building. These symlinks were no problem before. But some obscure changes in Sage 9.6.beta6 (possibly merge of python 3.10.3) now makes them problematic.



---

archive/issue_comments_474594.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-31T14:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474594",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_474595.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-03-31T14:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474595",
    "user": "https://github.com/kwankyu"
}
```

New commits:



---

archive/issue_comments_474596.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2022-03-31T14:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474596",
    "user": "https://github.com/kwankyu"
}
```

Changing priority from major to critical.



---

archive/issue_comments_474597.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-03-31T14:17:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474597",
    "user": "https://github.com/kwankyu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_474598.json:
```json
{
    "body": "I don't want to get off topic, but since we're talking about symlinks, without this branch a fresh build of the `html` docs gives errors like\n\n```\n[reference] Handler <function _copy_css_file at 0x7f6177a57880> for event 'build-finished' threw an exception (exception: [Errno 17] File exists: '/local/sage-git/sage/local/share/doc/sage/html/en/reference/references/_static')\n```\nThere are 156 of these errors and the referenced `_static` files are symlinks to an actual `_static` folder, i.e.\n\n```\n/local/sage-git/sage/local/share/doc/sage/html/en/reference/references/_static -> ../_static\n```",
    "created_at": "2022-03-31T15:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474598",
    "user": "https://github.com/strogdon"
}
```

I don't want to get off topic, but since we're talking about symlinks, without this branch a fresh build of the `html` docs gives errors like

```
[reference] Handler <function _copy_css_file at 0x7f6177a57880> for event 'build-finished' threw an exception (exception: [Errno 17] File exists: '/local/sage-git/sage/local/share/doc/sage/html/en/reference/references/_static')
```
There are 156 of these errors and the referenced `_static` files are symlinks to an actual `_static` folder, i.e.

```
/local/sage-git/sage/local/share/doc/sage/html/en/reference/references/_static -> ../_static
```



---

archive/issue_comments_474599.json:
```json
{
    "body": "With this branch (on gitpod), I now get somewhat similar errors as reported by `@`strogdon (but for the inventories and not static files):\n\n```\n[tensor_fr] WARNING: failed to reach any of the inventories with the following issues:\n[tensor_fr] intersphinx inventory '/home/gitpod/sage-local/share/doc/sage/inventory/en/reference/objects.inv' not fetchable due to <class 'FileNotFoundError'>: [Errno 2] No such file or directory: '/home/gitpod/sage-local/share/doc/sage/inventory/en/reference/objects.inv'\n[tensor_fr] WARNING: failed to reach any of the inventories with the following issues:\n[tensor_fr] intersphinx inventory '/home/gitpod/sage-local/share/doc/sage/inventory/en/reference/references/objects.inv' not fetchable due to <class 'FileNotFoundError'>: [Errno 2] No such file or directory: '/home/gitpod/sage-local/share/doc/sage/inventory/en/reference/references/objects.inv'\n```\n\nAlso the issue for building the tutorial still persist.",
    "created_at": "2022-03-31T16:10:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474599",
    "user": "https://github.com/tobiasdiez"
}
```

With this branch (on gitpod), I now get somewhat similar errors as reported by `@`strogdon (but for the inventories and not static files):

```
[tensor_fr] WARNING: failed to reach any of the inventories with the following issues:
[tensor_fr] intersphinx inventory '/home/gitpod/sage-local/share/doc/sage/inventory/en/reference/objects.inv' not fetchable due to <class 'FileNotFoundError'>: [Errno 2] No such file or directory: '/home/gitpod/sage-local/share/doc/sage/inventory/en/reference/objects.inv'
[tensor_fr] WARNING: failed to reach any of the inventories with the following issues:
[tensor_fr] intersphinx inventory '/home/gitpod/sage-local/share/doc/sage/inventory/en/reference/references/objects.inv' not fetchable due to <class 'FileNotFoundError'>: [Errno 2] No such file or directory: '/home/gitpod/sage-local/share/doc/sage/inventory/en/reference/references/objects.inv'
```

Also the issue for building the tutorial still persist.



---

archive/issue_comments_474600.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-03-31T17:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474600",
    "user": "https://github.com/strogdon"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_474601.json:
```json
{
    "body": "With this branch after\n\n```\nmake doc-clean doc-uninstall\n```\nboth\n\n```\n./sage --docbuild tutorial html\n```\nand\n\n```\n./sage --docbuild reference html\n```\nfail as in the Description. Is `--docbuild` supposed to work out of the box in this way without doing something else?",
    "created_at": "2022-03-31T17:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474601",
    "user": "https://github.com/strogdon"
}
```

With this branch after

```
make doc-clean doc-uninstall
```
both

```
./sage --docbuild tutorial html
```
and

```
./sage --docbuild reference html
```
fail as in the Description. Is `--docbuild` supposed to work out of the box in this way without doing something else?



---

archive/issue_comments_474602.json:
```json
{
    "body": "Not related to this issue but I'm unable to start a new `SageMath` jupyter notebook. Before opening a new issue I wanted to make sure others are seeing this.\n\n```\n./sage -n jupyter\n```\nselect `New -> [SageMath](SageMath) 9.6.beta6` and nothing happens. In the terminal\n\n```\n[I 12:39:27.730 NotebookApp] Creating new notebook in\n```\nwith nothing else.",
    "created_at": "2022-03-31T18:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474602",
    "user": "https://github.com/strogdon"
}
```

Not related to this issue but I'm unable to start a new `SageMath` jupyter notebook. Before opening a new issue I wanted to make sure others are seeing this.

```
./sage -n jupyter
```
select `New -> [SageMath](SageMath) 9.6.beta6` and nothing happens. In the terminal

```
[I 12:39:27.730 NotebookApp] Creating new notebook in
```
with nothing else.



---

archive/issue_comments_474603.json:
```json
{
    "body": "Replying to [comment:15 strogdon]:\n> With this branch after\n> \n> ```\n> make doc-clean doc-uninstall\n> ```\n> both\n> \n> ```\n> ./sage --docbuild tutorial html\n> ```\n> and\n> \n> ```\n> ./sage --docbuild reference html\n> ```\n> fail as in the Description. Is `--docbuild` supposed to work out of the box in this way without doing something else? \n\n\nNo. You must successfully build the docoumentation from scratch first, which means\n\n```\nmake doc-clean; make doc-uninstall; make\n```",
    "created_at": "2022-04-01T00:26:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474603",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:15 strogdon]:
> With this branch after
> 
> ```
> make doc-clean doc-uninstall
> ```
> both
> 
> ```
> ./sage --docbuild tutorial html
> ```
> and
> 
> ```
> ./sage --docbuild reference html
> ```
> fail as in the Description. Is `--docbuild` supposed to work out of the box in this way without doing something else? 


No. You must successfully build the docoumentation from scratch first, which means

```
make doc-clean; make doc-uninstall; make
```



---

archive/issue_comments_474604.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-04-01T00:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474604",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_474605.json:
```json
{
    "body": "Replying to [comment:14 gh-tobiasdiez]:\n> With this branch (on gitpod), I now get somewhat similar errors as reported by `@`strogdon (but for the inventories and not static files):\n> \n> ```\n> [tensor_fr] WARNING: failed to reach any of the inventories with the following issues:\n> [tensor_fr] intersphinx inventory '/home/gitpod/sage-local/share/doc/sage/inventory/en/reference/objects.inv' not fetchable due to <class 'FileNotFoundError'>: [Errno 2] No such file or directory: '/home/gitpod/sage-local/share/doc/sage/inventory/en/reference/objects.inv'\n> [tensor_fr] WARNING: failed to reach any of the inventories with the following issues:\n> [tensor_fr] intersphinx inventory '/home/gitpod/sage-local/share/doc/sage/inventory/en/reference/references/objects.inv' not fetchable due to <class 'FileNotFoundError'>: [Errno 2] No such file or directory: '/home/gitpod/sage-local/share/doc/sage/inventory/en/reference/references/objects.inv'\n> ```\n> \n> Also the issue for building the tutorial still persist.\n\n\nIs this a documentation building from scratch?",
    "created_at": "2022-04-01T00:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474605",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:14 gh-tobiasdiez]:
> With this branch (on gitpod), I now get somewhat similar errors as reported by `@`strogdon (but for the inventories and not static files):
> 
> ```
> [tensor_fr] WARNING: failed to reach any of the inventories with the following issues:
> [tensor_fr] intersphinx inventory '/home/gitpod/sage-local/share/doc/sage/inventory/en/reference/objects.inv' not fetchable due to <class 'FileNotFoundError'>: [Errno 2] No such file or directory: '/home/gitpod/sage-local/share/doc/sage/inventory/en/reference/objects.inv'
> [tensor_fr] WARNING: failed to reach any of the inventories with the following issues:
> [tensor_fr] intersphinx inventory '/home/gitpod/sage-local/share/doc/sage/inventory/en/reference/references/objects.inv' not fetchable due to <class 'FileNotFoundError'>: [Errno 2] No such file or directory: '/home/gitpod/sage-local/share/doc/sage/inventory/en/reference/references/objects.inv'
> ```
> 
> Also the issue for building the tutorial still persist.


Is this a documentation building from scratch?



---

archive/issue_comments_474606.json:
```json
{
    "body": "Replying to [comment:17 klee]:\n> Replying to [comment:15 strogdon]:\n> > With this branch after\n> > \n> > ```\n> > make doc-clean doc-uninstall\n> > ```\n> > both\n> > \n> > ```\n> > ./sage --docbuild tutorial html\n> > ```\n> > and\n> > \n> > ```\n> > ./sage --docbuild reference html\n> > ```\n> > fail as in the Description. Is `--docbuild` supposed to work out of the box in this way without doing something else? \n\n> \n> No. You must successfully build the docoumentation from scratch first, which means\n> \n> ```\n> make doc-clean; make doc-uninstall; make\n> ``` \n> \n>  \n\nOK, then I do not have this issue. From the `develop` branch w/o this ticket and after successfully building the documentation:\n\n```\n$ ./sage --docbuild tutorial html\n[tutorial ] Merging environment/index files...\n[tutorial ] ... done (0 todos, 23 index, 17 citations, 0 modules)\n[tutorial ] no targets are out of date.\n[tutorial ] The HTML pages are in local/share/doc/sage/html/en/tutorial.\nBuild finished. The built documents can be found in /local/sage-git/sage/local/share/doc/sage/html/en/tutorial\n```\nand\n\n```\n$ ./sage --docbuild reference html\n[reference] no targets are out of date.\n[reference] The HTML pages are in local/share/doc/sage/html/en/reference/references.\nBuild finished. The built documents can be found in /local/sage-git/sage/local/share/doc/sage/html/en/reference/references\n[spkg     ] no targets are out of date.\n[spkg     ] The HTML pages are in local/share/doc/sage/html/en/reference/spkg.\nBuild finished. The built documents can be found in /local/sage-git/sage/local/share/doc/sage/html/en/reference/spkg\n\n...\n\n[reference] no targets are out of date.\n[reference] The HTML pages are in local/share/doc/sage/html/en/reference.\nBuild finished. The built documents can be found in /local/sage-git/sage/local/share/doc/sage/html/en/reference\n```\n\nI only see the `issue` if the documentation is not built first.",
    "created_at": "2022-04-01T03:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474606",
    "user": "https://github.com/strogdon"
}
```

Replying to [comment:17 klee]:
> Replying to [comment:15 strogdon]:
> > With this branch after
> > 
> > ```
> > make doc-clean doc-uninstall
> > ```
> > both
> > 
> > ```
> > ./sage --docbuild tutorial html
> > ```
> > and
> > 
> > ```
> > ./sage --docbuild reference html
> > ```
> > fail as in the Description. Is `--docbuild` supposed to work out of the box in this way without doing something else? 

> 
> No. You must successfully build the docoumentation from scratch first, which means
> 
> ```
> make doc-clean; make doc-uninstall; make
> ``` 
> 
>  

OK, then I do not have this issue. From the `develop` branch w/o this ticket and after successfully building the documentation:

```
$ ./sage --docbuild tutorial html
[tutorial ] Merging environment/index files...
[tutorial ] ... done (0 todos, 23 index, 17 citations, 0 modules)
[tutorial ] no targets are out of date.
[tutorial ] The HTML pages are in local/share/doc/sage/html/en/tutorial.
Build finished. The built documents can be found in /local/sage-git/sage/local/share/doc/sage/html/en/tutorial
```
and

```
$ ./sage --docbuild reference html
[reference] no targets are out of date.
[reference] The HTML pages are in local/share/doc/sage/html/en/reference/references.
Build finished. The built documents can be found in /local/sage-git/sage/local/share/doc/sage/html/en/reference/references
[spkg     ] no targets are out of date.
[spkg     ] The HTML pages are in local/share/doc/sage/html/en/reference/spkg.
Build finished. The built documents can be found in /local/sage-git/sage/local/share/doc/sage/html/en/reference/spkg

...

[reference] no targets are out of date.
[reference] The HTML pages are in local/share/doc/sage/html/en/reference.
Build finished. The built documents can be found in /local/sage-git/sage/local/share/doc/sage/html/en/reference
```

I only see the `issue` if the documentation is not built first.



---

archive/issue_comments_474607.json:
```json
{
    "body": "I should have tested it with\n\n```\nmake doc-clean; make doc-uninstall; make\n```\nin the first place, since the first issue I mentioned earlier is fixed by it.\n\nRunning this command on `develop` leads to the issues with `_static`, and with this branch these issues are fixed. Thus, lets get this in.",
    "created_at": "2022-04-01T15:39:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474607",
    "user": "https://github.com/tobiasdiez"
}
```

I should have tested it with

```
make doc-clean; make doc-uninstall; make
```
in the first place, since the first issue I mentioned earlier is fixed by it.

Running this command on `develop` leads to the issues with `_static`, and with this branch these issues are fixed. Thus, lets get this in.



---

archive/issue_comments_474608.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-04-01T15:39:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474608",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_474609.json:
```json
{
    "body": "If the documentation has not been built, then (for example) `./sage --docbuild tutorial html` fails. I think this used to work, but I'm not sure and if it did, I don't know how long ago. Is there a ticket for this issue?",
    "created_at": "2022-04-01T19:07:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474609",
    "user": "https://github.com/jhpalmieri"
}
```

If the documentation has not been built, then (for example) `./sage --docbuild tutorial html` fails. I think this used to work, but I'm not sure and if it did, I don't know how long ago. Is there a ticket for this issue?



---

archive/issue_comments_474610.json:
```json
{
    "body": "Replying to [comment:22 jhpalmieri]:\n> If the documentation has not been built, then (for example) `./sage --docbuild tutorial html` fails. I think this used to work, but I'm not sure and if it did, I don't know how long ago. Is there a ticket for this issue?\n\n\nPerhaps no. It could have worked before. But when I try that now, it fails because the reference manual is not yet built. Hence I am not sure whether building an individual document from source without building the whole documentation is something we do efforts to support.",
    "created_at": "2022-04-02T01:51:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474610",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:22 jhpalmieri]:
> If the documentation has not been built, then (for example) `./sage --docbuild tutorial html` fails. I think this used to work, but I'm not sure and if it did, I don't know how long ago. Is there a ticket for this issue?


Perhaps no. It could have worked before. But when I try that now, it fails because the reference manual is not yet built. Hence I am not sure whether building an individual document from source without building the whole documentation is something we do efforts to support.



---

archive/issue_events_088414.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-04-03T11:14:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33371#event-88414"
}
```



---

archive/issue_comments_474611.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-04-03T11:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474611",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_474612.json:
```json
{
    "body": "Replying to [comment:13 Steven Trogdon]:\n> I don't want to get off topic, but since we're talking about symlinks, without this branch a fresh build of the `html` docs gives errors like\n> \n> ```\n> [reference] Handler <function _copy_css_file at 0x7f6177a57880> for event 'build-finished' threw an exception (exception: [Errno 17] File exists: '/local/sage-git/sage/local/share/doc/sage/html/en/reference/references/_static')\n> ```\n> There are 156 of these errors and the referenced `_static` files are symlinks to an actual `_static` folder, i.e.\n> \n> ```\n> /local/sage-git/sage/local/share/doc/sage/html/en/reference/references/_static -> ../_static\n> ```\n\n\nThis may be fixed by https://github.com/matplotlib/matplotlib/pull/23805",
    "created_at": "2022-09-05T16:19:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33371#issuecomment-474612",
    "user": "https://github.com/collares"
}
```

Replying to [comment:13 Steven Trogdon]:
> I don't want to get off topic, but since we're talking about symlinks, without this branch a fresh build of the `html` docs gives errors like
> 
> ```
> [reference] Handler <function _copy_css_file at 0x7f6177a57880> for event 'build-finished' threw an exception (exception: [Errno 17] File exists: '/local/sage-git/sage/local/share/doc/sage/html/en/reference/references/_static')
> ```
> There are 156 of these errors and the referenced `_static` files are symlinks to an actual `_static` folder, i.e.
> 
> ```
> /local/sage-git/sage/local/share/doc/sage/html/en/reference/references/_static -> ../_static
> ```


This may be fixed by https://github.com/matplotlib/matplotlib/pull/23805
