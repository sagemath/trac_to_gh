# Issue 33941: Implement from_integer and to_integer for all finite fields, extending and replacing fetch_int and integer_representation

archive/issues_033704.json:
```json
{
    "body": "Finite fields have `.fetch_int()` to decode integers into finite-field elements by reinterpreting the base-`p` representation as a polynomial:\n\n```sage\nsage: F.<t> = GF(7^10)\nsage: el = F.fetch_int(2424); el\nt^4 + 3*t + 2\n```\n\nHowever, the inverse operation is a bit cumbersome:\n\n```sage\nsage: el.polynomial().change_ring(ZZ)(el.parent().characteristic())\n2424\n```\n\nIn this patch, we add an inverse to `.fetch_int()`, named `.to_integer()` in resemblance with the Python method `int.to_bytes()`.\n\nFor symmetry, we then rename `.fetch_int()` to `.from_integer()`: I, for one, could never remember if `.fetch_int()` refers to \"fetching an element from an int\" or \"fetching this element into an int\", so I think the new name makes a lot more sense.\n\nAlso, some code cleanup and optimization while we're at it.\n\nCC:  @davewittemorris @slel\n\nBranch/Commit: 0eabc46980d3ae9194cdb36d03308212481268e0\n\nReviewer: Kwankyu Lee\n\nAuthor: Lorenz Panny\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33941\n\n",
    "closed_at": "2022-12-11T11:11:41Z",
    "created_at": "2022-06-01T03:50:24Z",
    "labels": [
        "component: finite rings"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Implement from_integer and to_integer for all finite fields, extending and replacing fetch_int and integer_representation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33941",
    "user": "https://github.com/yyyyx4"
}
```
Finite fields have `.fetch_int()` to decode integers into finite-field elements by reinterpreting the base-`p` representation as a polynomial:

```sage
sage: F.<t> = GF(7^10)
sage: el = F.fetch_int(2424); el
t^4 + 3*t + 2
```

However, the inverse operation is a bit cumbersome:

```sage
sage: el.polynomial().change_ring(ZZ)(el.parent().characteristic())
2424
```

In this patch, we add an inverse to `.fetch_int()`, named `.to_integer()` in resemblance with the Python method `int.to_bytes()`.

For symmetry, we then rename `.fetch_int()` to `.from_integer()`: I, for one, could never remember if `.fetch_int()` refers to "fetching an element from an int" or "fetching this element into an int", so I think the new name makes a lot more sense.

Also, some code cleanup and optimization while we're at it.

CC:  @davewittemorris @slel

Branch/Commit: 0eabc46980d3ae9194cdb36d03308212481268e0

Reviewer: Kwankyu Lee

Author: Lorenz Panny

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33941





---

archive/issue_comments_512239.json:
```json
{
    "body": "<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-01T03:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512239",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_512240.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-06-01T04:00:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512240",
    "user": "https://github.com/yyyyx4"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_512241.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,7 +13,11 @@\n 2424\n ```\n \n-In this patch, we add an inverse to `.fetch_int()`, named `.to_integer()` in resemblance with the Python method `int.to_bytes()`. Also, some code cleanup and optimization while we're at it.\n+In this patch, we add an inverse to `.fetch_int()`, named `.to_integer()` in resemblance with the Python method `int.to_bytes()`.\n+\n+For symmetry, we then rename `.fetch_int()` to `.from_integer()`: I, for one, could never remember if `.fetch_int()` refers to \"fetching an element from an int\" or \"fetching this element into an int\", so I think the new name makes a lot more sense.\n+\n+Also, some code cleanup and optimization while we're at it.\n \n Author: Lorenz Panny\n \n``````\n",
    "created_at": "2022-06-01T04:00:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512241",
    "user": "https://github.com/yyyyx4"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,7 +13,11 @@
 2424
 ```
 
-In this patch, we add an inverse to `.fetch_int()`, named `.to_integer()` in resemblance with the Python method `int.to_bytes()`. Also, some code cleanup and optimization while we're at it.
+In this patch, we add an inverse to `.fetch_int()`, named `.to_integer()` in resemblance with the Python method `int.to_bytes()`.
+
+For symmetry, we then rename `.fetch_int()` to `.from_integer()`: I, for one, could never remember if `.fetch_int()` refers to "fetching an element from an int" or "fetching this element into an int", so I think the new name makes a lot more sense.
+
+Also, some code cleanup and optimization while we're at it.
 
 Author: Lorenz Panny
 
``````




---

archive/issue_comments_512242.json:
```json
{
    "body": "<a id='comment:3'></a>I just found out that #31605 already tracks this issue and that binary finite fields have `.integer_representation()`.\n\nThis leaves us with three options for naming these methods:\n1. `.fetch_int()` / `.integer_representation()`    [backwards compatible]\n2. `.from_integer()` / `.integer_representation()` [one deprecation]\n3. `.from_integer()` / `.to_integer()`             [two deprecations]\n\nPersonally I'm still in favor of (3) because the others lack symmetry. Opinions?",
    "created_at": "2022-06-01T05:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512242",
    "user": "https://github.com/yyyyx4"
}
```

<a id='comment:3'></a>I just found out that #31605 already tracks this issue and that binary finite fields have `.integer_representation()`.

This leaves us with three options for naming these methods:
1. `.fetch_int()` / `.integer_representation()`    [backwards compatible]
2. `.from_integer()` / `.integer_representation()` [one deprecation]
3. `.from_integer()` / `.to_integer()`             [two deprecations]

Personally I'm still in favor of (3) because the others lack symmetry. Opinions?



---

archive/issue_comments_512243.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:3 lorenz]:\n> I just found out that #31605 already tracks this issue and that binary finite fields have `.integer_representation()`.\n> \n> This leaves us with three options for naming these methods:\n> 1. `.fetch_int()` / `.integer_representation()`    [backwards compatible]\n> 2. `.from_integer()` / `.integer_representation()` [one deprecation]\n> 3. `.from_integer()` / `.to_integer()`             [two deprecations]\n> \n> Personally I'm still in favor of (3) because the others lack symmetry. Opinions?\n\n\n+1 to option 3",
    "created_at": "2022-08-13T10:26:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512243",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'></a>Replying to [comment:3 lorenz]:
> I just found out that #31605 already tracks this issue and that binary finite fields have `.integer_representation()`.
> 
> This leaves us with three options for naming these methods:
> 1. `.fetch_int()` / `.integer_representation()`    [backwards compatible]
> 2. `.from_integer()` / `.integer_representation()` [one deprecation]
> 3. `.from_integer()` / `.to_integer()`             [two deprecations]
> 
> Personally I'm still in favor of (3) because the others lack symmetry. Opinions?


+1 to option 3



---

archive/issue_comments_512244.json:
```json
{
    "body": "<a id='comment:6'></a>Also +1 for (3) for the sake of symmetry and consistency.",
    "created_at": "2022-08-13T15:29:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512244",
    "user": "https://github.com/slel"
}
```

<a id='comment:6'></a>Also +1 for (3) for the sake of symmetry and consistency.



---

archive/issue_comments_512245.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-13T15:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512245",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_512246.json:
```json
{
    "body": "<a id='comment:8'></a>Thanks for the responses! It seems the only remaining question is whether we want to deprecate `.integer_representation()` or not.",
    "created_at": "2022-08-13T15:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512246",
    "user": "https://github.com/yyyyx4"
}
```

<a id='comment:8'></a>Thanks for the responses! It seems the only remaining question is whether we want to deprecate `.integer_representation()` or not.



---

archive/issue_comments_512247.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 lorenz]:\n> [...] whether [...] to deprecate `.integer_representation()` or not.\n\n\nThe only reason I would see not to would be consistency\nwith other software.\n\nDo Magma, Maple, Mathematica have similar functions,\nand if so how they are named?",
    "created_at": "2022-08-15T03:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512247",
    "user": "https://github.com/slel"
}
```

<a id='comment:9'></a>Replying to [comment:8 lorenz]:
> [...] whether [...] to deprecate `.integer_representation()` or not.


The only reason I would see not to would be consistency
with other software.

Do Magma, Maple, Mathematica have similar functions,
and if so how they are named?



---

archive/issue_comments_512248.json:
```json
{
    "body": "<a id='comment:10'></a>I don't know. Some quick online searches didn't find anything.",
    "created_at": "2022-08-16T03:27:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512248",
    "user": "https://github.com/yyyyx4"
}
```

<a id='comment:10'></a>I don't know. Some quick online searches didn't find anything.



---

archive/issue_events_088948.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33941#event-88948"
}
```



---

archive/issue_comments_512249.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-17T15:50:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512249",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_512250.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-08T16:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512250",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_512251.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:9 Samuel Leli\u00e8vre]:\n> Do Magma, Maple, Mathematica have similar functions,\n> and if so how they are named?\n\n\nI could not find one for Magma and Maple. Mathematica has `ToElementCode` and `FromElementCode`\n\nI think Sage is the leading software in this regard. No worry for consistency.\n\n+1 to option 3.",
    "created_at": "2022-11-25T01:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512251",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:14'></a>Replying to [comment:9 Samuel Lelièvre]:
> Do Magma, Maple, Mathematica have similar functions,
> and if so how they are named?


I could not find one for Magma and Maple. Mathematica has `ToElementCode` and `FromElementCode`

I think Sage is the leading software in this regard. No worry for consistency.

+1 to option 3.



---

archive/issue_comments_512252.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-25T10:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512252",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_512253.json:
```json
{
    "body": "<a id='comment:16'></a>Thanks.\n\nOne more thing. I think the hyphen in `finite-field element` is legitimate but not really necessary. The hyphen is there to mean \"(finite field) element\" not \"finite (field element)\". But sage is mathematics software and there is zero risk that one reads it as \"finite (field element)\". \"finite field\", \"elliptic curve\", \"cyclic group\", etc are all mathematical terms, and rarely written in two forms (hyphened and not hyphened). For consistency, let us stick to one form. Please reconsider.",
    "created_at": "2022-11-25T10:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512253",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:16'></a>Thanks.

One more thing. I think the hyphen in `finite-field element` is legitimate but not really necessary. The hyphen is there to mean "(finite field) element" not "finite (field element)". But sage is mathematics software and there is zero risk that one reads it as "finite (field element)". "finite field", "elliptic curve", "cyclic group", etc are all mathematical terms, and rarely written in two forms (hyphened and not hyphened). For consistency, let us stick to one form. Please reconsider.



---

archive/issue_comments_512254.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-25T15:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512254",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_512255.json:
```json
{
    "body": "<a id='comment:18'></a>Done.\u2002(IMHO the hyphens improve readability even when they are not strictly *needed* to disambiguate, but it's obviously a matter of personal preference.)",
    "created_at": "2022-11-25T15:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512255",
    "user": "https://github.com/yyyyx4"
}
```

<a id='comment:18'></a>Done. (IMHO the hyphens improve readability even when they are not strictly *needed* to disambiguate, but it's obviously a matter of personal preference.)



---

archive/issue_comments_512256.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-26T01:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512256",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_512257.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-26T01:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512257",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_512258.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:18 Lorenz Panny]:\n> Done.\u2002(IMHO the hyphens improve readability even when they are not strictly *needed* to disambiguate, but it's obviously a matter of personal preference.)\n\n\nThanks! The boundary of consistency and personal preference is blurred and unfortunately is a source of perpetual debates.\n\nI made minor edits on spaces. Otherwise, the branch looks good to me. Set it positive review once tests pass.",
    "created_at": "2022-11-26T02:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512258",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:21'></a>Replying to [comment:18 Lorenz Panny]:
> Done. (IMHO the hyphens improve readability even when they are not strictly *needed* to disambiguate, but it's obviously a matter of personal preference.)


Thanks! The boundary of consistency and personal preference is blurred and unfortunately is a source of perpetual debates.

I made minor edits on spaces. Otherwise, the branch looks good to me. Set it positive review once tests pass.



---

archive/issue_comments_512259.json:
```json
{
    "body": "<a id='comment:23'></a>Bot looks green. Thank you!",
    "created_at": "2022-11-26T08:45:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512259",
    "user": "https://github.com/yyyyx4"
}
```

<a id='comment:23'></a>Bot looks green. Thank you!



---

archive/issue_comments_512260.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-11-26T08:45:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512260",
    "user": "https://github.com/yyyyx4"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_512261.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-12-11T11:11:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33941#issuecomment-512261",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_088949.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-12-11T11:11:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33941",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33941#event-88949"
}
```
