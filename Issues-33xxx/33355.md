# Issue 33355: Generate coverage results and upload to codecov

archive/issues_033118.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nUse coverage.py to generate coverage results for the sage source code based on the test execution. In contrast to sage's na\u00efve coverage tool, this not only looks for the existence of doctests for a method but actually measures which lines are actually executed by the tests.\n\nThese coverage results are then uploaded to codecov, where one can inspect the results. See https://codecov.io/gh/sagemath/sagetrac-mirror/tree/ec045eb0168b937e35375e803979975df4aa6564/src/sage for the current coverage. Codecov also displays the coverage of changed files, so that one can easily check if changes are indeed covered by tests. An example would be https://codecov.io/gh/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564 but there are of course no changes in python files in this ticket, so it shows nothing interesting. For a more interesting example from a different project see eg https://app.codecov.io/gh/JabRef/jabref/commit/2494509f2d75426bd7369b358880e7ffed2a47b4. The idea would be to add the link to such a report as a new badge in the trac ticket (after this ticket here is merged). \n\nRun: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov\n\n\nCC:  @mkoeppe\n\nComponent: **build**\n\nAuthor: **Tobias Diez**\n\nBranch: **[`ec045eb`](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)**\n\nReviewer: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33355_\n\n",
    "closed_at": "2022-03-08T08:12:09Z",
    "created_at": "2022-02-15T20:44:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Generate coverage results and upload to codecov",
    "type": "issue",
    "updated_at": "2022-04-22T22:01:29Z",
    "url": "https://github.com/sagemath/sage/issues/33355",
    "user": "https://github.com/tobiasdiez"
}
```
<div id="comment:0"></div>

Use coverage.py to generate coverage results for the sage source code based on the test execution. In contrast to sage's naïve coverage tool, this not only looks for the existence of doctests for a method but actually measures which lines are actually executed by the tests.

These coverage results are then uploaded to codecov, where one can inspect the results. See https://codecov.io/gh/sagemath/sagetrac-mirror/tree/ec045eb0168b937e35375e803979975df4aa6564/src/sage for the current coverage. Codecov also displays the coverage of changed files, so that one can easily check if changes are indeed covered by tests. An example would be https://codecov.io/gh/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564 but there are of course no changes in python files in this ticket, so it shows nothing interesting. For a more interesting example from a different project see eg https://app.codecov.io/gh/JabRef/jabref/commit/2494509f2d75426bd7369b358880e7ffed2a47b4. The idea would be to add the link to such a report as a new badge in the trac ticket (after this ticket here is merged). 

Run: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov


CC:  @mkoeppe

Component: **build**

Author: **Tobias Diez**

Branch: **[`ec045eb`](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)**

Reviewer: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/33355_





---

archive/issue_events_455216.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-02-15T20:44:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-455216"
}
```



---

archive/issue_events_455217.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-02-15T20:44:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-455217"
}
```



---

archive/issue_comments_538977.json:
```json
{
    "body": "Changed commit from **[`3c315dd`](https://github.com/sagemath/sagetrac-mirror/commit/3c315dd899db75084dd2a6ab5fc9fe3595347c35)** to **[`7ff3baa`](https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe)**",
    "created_at": "2022-02-15T23:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538977",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3c315dd`](https://github.com/sagemath/sagetrac-mirror/commit/3c315dd899db75084dd2a6ab5fc9fe3595347c35)** to **[`7ff3baa`](https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe)**



---

archive/issue_comments_538978.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe\"><code>7ff3baa</code></a></td><td><code>Try with editable install</code></td></tr></table>\n",
    "created_at": "2022-02-15T23:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538978",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe"><code>7ff3baa</code></a></td><td><code>Try with editable install</code></td></tr></table>




---

archive/issue_events_455218.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-02-16T12:41:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-455218"
}
```



---

archive/issue_events_455219.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-02-16T12:41:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-455219"
}
```



---

archive/issue_comments_538979.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n+Run: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov\n \n+This currently fails because the sage environment is not correctly activated before running `sage-runtests` (coverage needs a python script as argument, so one cannot use `sage -t`). What's the best way to accomplish this?\n``````\n",
    "created_at": "2022-02-16T12:41:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538979",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
+Run: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov
 
+This currently fails because the sage environment is not correctly activated before running `sage-runtests` (coverage needs a python script as argument, so one cannot use `sage -t`). What's the best way to accomplish this?
``````




---

archive/issue_comments_538980.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d\"><code>4c7c162</code></a></td><td><code>Try sourcing sage-env</code></td></tr></table>\n",
    "created_at": "2022-02-17T12:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538980",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d"><code>4c7c162</code></a></td><td><code>Try sourcing sage-env</code></td></tr></table>




---

archive/issue_comments_538981.json:
```json
{
    "body": "Changed commit from **[`7ff3baa`](https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe)** to **[`4c7c162`](https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d)**",
    "created_at": "2022-02-17T12:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538981",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7ff3baa`](https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe)** to **[`4c7c162`](https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d)**



---

archive/issue_comments_538982.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7\"><code>6a93454</code></a></td><td><code>No source cmd?!</code></td></tr></table>\n",
    "created_at": "2022-02-17T13:26:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538982",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7"><code>6a93454</code></a></td><td><code>No source cmd?!</code></td></tr></table>




---

archive/issue_comments_538983.json:
```json
{
    "body": "Changed commit from **[`4c7c162`](https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d)** to **[`6a93454`](https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7)**",
    "created_at": "2022-02-17T13:26:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538983",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4c7c162`](https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d)** to **[`6a93454`](https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7)**



---

archive/issue_comments_538984.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb\"><code>97970d1</code></a></td><td><code>Try sage-env-config</code></td></tr></table>\n",
    "created_at": "2022-02-17T16:09:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538984",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb"><code>97970d1</code></a></td><td><code>Try sage-env-config</code></td></tr></table>




---

archive/issue_comments_538985.json:
```json
{
    "body": "Changed commit from **[`6a93454`](https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7)** to **[`97970d1`](https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb)**",
    "created_at": "2022-02-17T16:09:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538985",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6a93454`](https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7)** to **[`97970d1`](https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb)**



---

archive/issue_comments_538986.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nUse `sage -sh -c \"....\"` to run a shell command `....` in the Sage environment.",
    "created_at": "2022-02-17T16:46:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538986",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

Use `sage -sh -c "...."` to run a shell command `....` in the Sage environment.



---

archive/issue_comments_538987.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nOr use `sage -python -m coverage ...`",
    "created_at": "2022-02-17T16:48:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538987",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Or use `sage -python -m coverage ...`



---

archive/issue_comments_538988.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769\"><code>af9b442</code></a></td><td><code>Try with sage -python</code></td></tr></table>\n",
    "created_at": "2022-02-17T17:08:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538988",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769"><code>af9b442</code></a></td><td><code>Try with sage -python</code></td></tr></table>




---

archive/issue_comments_538989.json:
```json
{
    "body": "Changed commit from **[`97970d1`](https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb)** to **[`af9b442`](https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769)**",
    "created_at": "2022-02-17T17:08:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538989",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`97970d1`](https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb)** to **[`af9b442`](https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769)**



---

archive/issue_comments_538990.json:
```json
{
    "body": "Changed commit from **[`af9b442`](https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769)** to **[`1c53f6f`](https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99)**",
    "created_at": "2022-02-17T19:31:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538990",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`af9b442`](https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769)** to **[`1c53f6f`](https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99)**



---

archive/issue_comments_538991.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99\"><code>1c53f6f</code></a></td><td><code>Ignore coverage warnings</code></td></tr></table>\n",
    "created_at": "2022-02-17T19:31:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538991",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99"><code>1c53f6f</code></a></td><td><code>Ignore coverage warnings</code></td></tr></table>




---

archive/issue_comments_538992.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6\"><code>3bf2fdc</code></a></td><td><code>Install git</code></td></tr></table>\n",
    "created_at": "2022-02-18T12:55:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538992",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6"><code>3bf2fdc</code></a></td><td><code>Install git</code></td></tr></table>




---

archive/issue_comments_538993.json:
```json
{
    "body": "Changed commit from **[`1c53f6f`](https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99)** to **[`3bf2fdc`](https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6)**",
    "created_at": "2022-02-18T12:55:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538993",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1c53f6f`](https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99)** to **[`3bf2fdc`](https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6)**



---

archive/issue_comments_538994.json:
```json
{
    "body": "Changed commit from **[`3bf2fdc`](https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6)** to **[`e4bca51`](https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1)**",
    "created_at": "2022-02-18T21:59:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538994",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3bf2fdc`](https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6)** to **[`e4bca51`](https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1)**



---

archive/issue_comments_538995.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1\"><code>e4bca51</code></a></td><td><code>Try without sudo</code></td></tr></table>\n",
    "created_at": "2022-02-18T21:59:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538995",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1"><code>e4bca51</code></a></td><td><code>Try without sudo</code></td></tr></table>




---

archive/issue_comments_538996.json:
```json
{
    "body": "Changed commit from **[`e4bca51`](https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1)** to **[`5523e44`](https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb)**",
    "created_at": "2022-02-19T10:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538996",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e4bca51`](https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1)** to **[`5523e44`](https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb)**



---

archive/issue_comments_538997.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb\"><code>5523e44</code></a></td><td><code>Have to manually combine coverage results</code></td></tr></table>\n",
    "created_at": "2022-02-19T10:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538997",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb"><code>5523e44</code></a></td><td><code>Have to manually combine coverage results</code></td></tr></table>




---

archive/issue_comments_538998.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd\"><code>8b25060</code></a></td><td><code>Force 2 threads</code></td></tr></table>\n",
    "created_at": "2022-02-19T10:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538998",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd"><code>8b25060</code></a></td><td><code>Force 2 threads</code></td></tr></table>




---

archive/issue_comments_538999.json:
```json
{
    "body": "Changed commit from **[`5523e44`](https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb)** to **[`8b25060`](https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd)**",
    "created_at": "2022-02-19T10:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-538999",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5523e44`](https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb)** to **[`8b25060`](https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd)**



---

archive/issue_comments_539000.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2\"><code>cc8e027</code></a></td><td><code>Fix indent</code></td></tr></table>\n",
    "created_at": "2022-02-19T11:36:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539000",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2"><code>cc8e027</code></a></td><td><code>Fix indent</code></td></tr></table>




---

archive/issue_comments_539001.json:
```json
{
    "body": "Changed commit from **[`8b25060`](https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd)** to **[`cc8e027`](https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2)**",
    "created_at": "2022-02-19T11:36:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539001",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8b25060`](https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd)** to **[`cc8e027`](https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2)**



---

archive/issue_comments_539002.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@mkoeppe](#comment%3A7):\n> Or use `sage -python -m coverage ...`\n\nThanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)\n\nI just noticed that elementary things like git and sudo are missing in the standard docker image. Would it make sense to add these tools?",
    "created_at": "2022-02-19T18:58:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539002",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@mkoeppe](#comment%3A7):
> Or use `sage -python -m coverage ...`

Thanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)

I just noticed that elementary things like git and sudo are missing in the standard docker image. Would it make sense to add these tools?



---

archive/issue_comments_539003.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564\"><code>ec045eb</code></a></td><td><code>Try to find coverage file</code></td></tr></table>\n",
    "created_at": "2022-02-19T19:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539003",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564"><code>ec045eb</code></a></td><td><code>Try to find coverage file</code></td></tr></table>




---

archive/issue_comments_539004.json:
```json
{
    "body": "Changed commit from **[`cc8e027`](https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2)** to **[`ec045eb`](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)**",
    "created_at": "2022-02-19T19:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539004",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cc8e027`](https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2)** to **[`ec045eb`](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)**



---

archive/issue_comments_539005.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@tobiasdiez](#comment%3A15):\n> Replying to [@mkoeppe](#comment%3A7):\n> > Or use `sage -python -m coverage ...`\n> \n> \n> Thanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)\n\nThis is a goal that has not been achieved yet. What `sage-env` does is still needed for some things in the Sage library. See for example #31296.",
    "created_at": "2022-02-19T20:02:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539005",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@tobiasdiez](#comment%3A15):
> Replying to [@mkoeppe](#comment%3A7):
> > Or use `sage -python -m coverage ...`
> 
> 
> Thanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)

This is a goal that has not been achieved yet. What `sage-env` does is still needed for some things in the Sage library. See for example #31296.



---

archive/issue_comments_539006.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@tobiasdiez](#comment%3A15):\n> Replying to [@mkoeppe](#comment%3A7):\n> > Or use `sage -python -m coverage ...`\n> \n> \n> Thanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)\n> \n> I just noticed that elementary things like git and sudo are missing in the standard docker image. Would it make sense to add these tools?\n\nI added `git` to `-recommended`, see #33296, #33277, but we're not building the image yet. We could replace `-standard` but `-recommended`. Probably best after #33062.\n\nYou don't need `sudo`, you are running as `root`.",
    "created_at": "2022-02-19T20:10:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539006",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@tobiasdiez](#comment%3A15):
> Replying to [@mkoeppe](#comment%3A7):
> > Or use `sage -python -m coverage ...`
> 
> 
> Thanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)
> 
> I just noticed that elementary things like git and sudo are missing in the standard docker image. Would it make sense to add these tools?

I added `git` to `-recommended`, see #33296, #33277, but we're not building the image yet. We could replace `-standard` but `-recommended`. Probably best after #33062.

You don't need `sudo`, you are running as `root`.



---

archive/issue_comments_539007.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@mkoeppe](#comment%3A18):\n> You don't need `sudo`, you are running as `root`.\n\nIt's more for convenience and coherence - normally github actions don't run as sudo.",
    "created_at": "2022-03-02T12:47:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539007",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@mkoeppe](#comment%3A18):
> You don't need `sudo`, you are running as `root`.

It's more for convenience and coherence - normally github actions don't run as sudo.



---

archive/issue_events_455220.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-02T12:59:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-455220"
}
```



---

archive/issue_comments_539008.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n+Use coverage.py to generate coverage results for the sage source code based on the test execution. In contrast to sage's na\u00efve coverage tool, this not only looks for the existence of doctests for a method but actually measures which lines are actually executed by the tests.\n+\n+These coverage results are then uploaded to codecov, where one can inspect the results. See https://codecov.io/gh/sagemath/sagetrac-mirror/tree/ec045eb0168b937e35375e803979975df4aa6564/src/sage for the current coverage. Codecov also displays the coverage of changed files, so that one can easily check if changes are indeed covered by tests. An example would be https://codecov.io/gh/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564 but there are of course no changes in python files in this ticket, so it shows nothing interesting. For a more interesting example from a different project see eg https://app.codecov.io/gh/JabRef/jabref/commit/2494509f2d75426bd7369b358880e7ffed2a47b4. The idea would be to add the link to such a report as a new badge in the trac ticket (after this ticket here is merged). \n+\n Run: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov\n \n-This currently fails because the sage environment is not correctly activated before running `sage-runtests` (coverage needs a python script as argument, so one cannot use `sage -t`). What's the best way to accomplish this?\n``````\n",
    "created_at": "2022-03-02T12:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539008",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
+Use coverage.py to generate coverage results for the sage source code based on the test execution. In contrast to sage's naïve coverage tool, this not only looks for the existence of doctests for a method but actually measures which lines are actually executed by the tests.
+
+These coverage results are then uploaded to codecov, where one can inspect the results. See https://codecov.io/gh/sagemath/sagetrac-mirror/tree/ec045eb0168b937e35375e803979975df4aa6564/src/sage for the current coverage. Codecov also displays the coverage of changed files, so that one can easily check if changes are indeed covered by tests. An example would be https://codecov.io/gh/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564 but there are of course no changes in python files in this ticket, so it shows nothing interesting. For a more interesting example from a different project see eg https://app.codecov.io/gh/JabRef/jabref/commit/2494509f2d75426bd7369b358880e7ffed2a47b4. The idea would be to add the link to such a report as a new badge in the trac ticket (after this ticket here is merged). 
+
 Run: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov
 
-This currently fails because the sage environment is not correctly activated before running `sage-runtests` (coverage needs a python script as argument, so one cannot use `sage -t`). What's the best way to accomplish this?
``````




---

archive/issue_comments_539009.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI am getting\n\"There was a problem getting the source code from your provider. Unable to show line by line coverage. \"\n\nhttps://app.codecov.io/gh/sagemath/sagetrac-mirror/blob/ec045eb0168b937e35375e803979975df4aa6564/src/sage/categories/chain_complexes.py",
    "created_at": "2022-03-02T17:14:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539009",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

I am getting
"There was a problem getting the source code from your provider. Unable to show line by line coverage. "

https://app.codecov.io/gh/sagemath/sagetrac-mirror/blob/ec045eb0168b937e35375e803979975df4aa6564/src/sage/categories/chain_complexes.py



---

archive/issue_comments_539010.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThe link is working for me. Maybe a temporary issues on their side?",
    "created_at": "2022-03-02T17:57:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539010",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:22" align="right">comment:22</div>

The link is working for me. Maybe a temporary issues on their side?



---

archive/issue_comments_539011.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nWorking now for me too",
    "created_at": "2022-03-02T19:44:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539011",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

Working now for me too



---

archive/issue_comments_539012.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nLooking great, thanks for this work!",
    "created_at": "2022-03-02T19:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539012",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

Looking great, thanks for this work!



---

archive/issue_comments_539013.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2022-03-02T19:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539013",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_events_455221.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-02T19:47:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-455221"
}
```



---

archive/issue_events_455222.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-02T19:47:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-455222"
}
```



---

archive/issue_comments_539014.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThanks for the review!",
    "created_at": "2022-03-02T20:15:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539014",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:25" align="right">comment:25</div>

Thanks for the review!



---

archive/issue_events_455223.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-08T08:12:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-455223"
}
```



---

archive/issue_events_455224.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e7f6c32784a894ff7d56d1a09fdb53fd2747a779",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-03-08T08:12:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-455224"
}
```



---

archive/issue_comments_539015.json:
```json
{
    "body": "Changed branch from **[public/build/codecov](https://github.com/sagemath/sagetrac-mirror/tree/public/build/codecov)** to **[`ec045eb`](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)**",
    "created_at": "2022-03-08T08:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539015",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/build/codecov](https://github.com/sagemath/sagetrac-mirror/tree/public/build/codecov)** to **[`ec045eb`](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)**



---

archive/issue_comments_539016.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\ncurrently not working in the \"Build and Test\" badge, shouting :\n\n```\nRun ./venv/bin/python3 -m coverage combine src/.coverage/\n  ./venv/bin/python3 -m coverage combine src/.coverage/\n  ./venv/bin/python3 -m coverage xml\n  find . -name *coverage*\n  shell: sh -e {0}\nCouldn't combine from non-existent path 'src/.coverage/'\nError: Process completed with exit code 1.\n```",
    "created_at": "2022-03-31T19:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539016",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:27" align="right">comment:27</div>

currently not working in the "Build and Test" badge, shouting :

```
Run ./venv/bin/python3 -m coverage combine src/.coverage/
  ./venv/bin/python3 -m coverage combine src/.coverage/
  ./venv/bin/python3 -m coverage xml
  find . -name *coverage*
  shell: sh -e {0}
Couldn't combine from non-existent path 'src/.coverage/'
Error: Process completed with exit code 1.
```



---

archive/issue_comments_539017.json:
```json
{
    "body": "Changed commit from **[`ec045eb`](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)** to none",
    "created_at": "2022-03-31T19:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539017",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`ec045eb`](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)** to none



---

archive/issue_comments_539018.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nWhich ticket shows this behavior? It is still working correctly in the latest beta: https://github.com/sagemath/sagetrac-mirror/runs/5710760370?check_suite_focus=true",
    "created_at": "2022-03-31T19:10:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539018",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:28" align="right">comment:28</div>

Which ticket shows this behavior? It is still working correctly in the latest beta: https://github.com/sagemath/sagetrac-mirror/runs/5710760370?check_suite_focus=true



---

archive/issue_comments_539019.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nsee #33629 for example",
    "created_at": "2022-04-02T10:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539019",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:29" align="right">comment:29</div>

see #33629 for example



---

archive/issue_comments_539020.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nOkay, was actually an issue with pyright. Fixed in #33631.",
    "created_at": "2022-04-02T11:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539020",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:30" align="right">comment:30</div>

Okay, was actually an issue with pyright. Fixed in #33631.



---

archive/issue_comments_539021.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nCan we get the badge now?",
    "created_at": "2022-04-05T04:40:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539021",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

Can we get the badge now?



---

archive/issue_comments_539022.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nthe badge \"Build & Test\" is still broken by problems about coverage\n\nfor example, see\n\nhttps://github.com/sagemath/sagetrac-mirror/runs/6117339523?check_suite_focus=true\n\nshouting\n\n```\nRun ./venv/bin/python3 -m coverage combine src/.coverage/\n6\n/__w/sagetrac-mirror/sagetrac-mirror/venv/bin/python3: No module named coverage\n7\nError: Process completed with exit code 1.\n```",
    "created_at": "2022-04-22T06:43:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539022",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:32" align="right">comment:32</div>

the badge "Build & Test" is still broken by problems about coverage

for example, see

https://github.com/sagemath/sagetrac-mirror/runs/6117339523?check_suite_focus=true

shouting

```
Run ./venv/bin/python3 -m coverage combine src/.coverage/
6
/__w/sagetrac-mirror/sagetrac-mirror/venv/bin/python3: No module named coverage
7
Error: Process completed with exit code 1.
```



---

archive/issue_comments_539023.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI've opened #33747 for this",
    "created_at": "2022-04-22T22:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-539023",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

I've opened #33747 for this
