# Issue 33355: Generate coverage results and upload to codecov

archive/issues_033118.json:
```json
{
    "assignees": [],
    "body": "Use coverage.py to generate coverage results for the sage source code based on the test execution. In contrast to sage's na\u00efve coverage tool, this not only looks for the existence of doctests for a method but actually measures which lines are actually executed by the tests.\n\nThese coverage results are then uploaded to codecov, where one can inspect the results. See https://codecov.io/gh/sagemath/sagetrac-mirror/tree/ec045eb0168b937e35375e803979975df4aa6564/src/sage for the current coverage. Codecov also displays the coverage of changed files, so that one can easily check if changes are indeed covered by tests. An example would be https://codecov.io/gh/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564 but there are of course no changes in python files in this ticket, so it shows nothing interesting. For a more interesting example from a different project see eg https://app.codecov.io/gh/JabRef/jabref/commit/2494509f2d75426bd7369b358880e7ffed2a47b4. The idea would be to add the link to such a report as a new badge in the trac ticket (after this ticket here is merged). \n\nRun: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov\n\n\nCC:  @mkoeppe\n\nBranch: **[ec045eb](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **Tobias Diez**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33355_\n\n",
    "closed_at": "2022-03-08T08:12:09Z",
    "created_at": "2022-02-15T20:44:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Generate coverage results and upload to codecov",
    "type": "issue",
    "updated_at": "2022-04-22T22:01:29Z",
    "url": "https://github.com/sagemath/sage/issues/33355",
    "user": "https://github.com/tobiasdiez"
}
```
Use coverage.py to generate coverage results for the sage source code based on the test execution. In contrast to sage's na√Øve coverage tool, this not only looks for the existence of doctests for a method but actually measures which lines are actually executed by the tests.

These coverage results are then uploaded to codecov, where one can inspect the results. See https://codecov.io/gh/sagemath/sagetrac-mirror/tree/ec045eb0168b937e35375e803979975df4aa6564/src/sage for the current coverage. Codecov also displays the coverage of changed files, so that one can easily check if changes are indeed covered by tests. An example would be https://codecov.io/gh/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564 but there are of course no changes in python files in this ticket, so it shows nothing interesting. For a more interesting example from a different project see eg https://app.codecov.io/gh/JabRef/jabref/commit/2494509f2d75426bd7369b358880e7ffed2a47b4. The idea would be to add the link to such a report as a new badge in the trac ticket (after this ticket here is merged). 

Run: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov


CC:  @mkoeppe

Branch: **[ec045eb](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)**

Reviewer: **Matthias Koeppe**

Author: **Tobias Diez**

_Issue created by migration from https://trac.sagemath.org/ticket/33355_





---

archive/issue_events_440238.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-02-15T20:44:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-440238"
}
```



---

archive/issue_events_440239.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-02-15T20:44:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-440239"
}
```



---

archive/issue_comments_542101.json:
```json
{
    "body": "Changed commit from **[3c315dd](https://github.com/sagemath/sagetrac-mirror/commit/3c315dd899db75084dd2a6ab5fc9fe3595347c35)** to **[7ff3baa](https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe)**",
    "created_at": "2022-02-15T23:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542101",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3c315dd](https://github.com/sagemath/sagetrac-mirror/commit/3c315dd899db75084dd2a6ab5fc9fe3595347c35)** to **[7ff3baa](https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe)**



---

archive/issue_comments_542102.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe\">7ff3baa</a></td><td><code>Try with editable install</code></td></tr></table>\n",
    "created_at": "2022-02-15T23:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542102",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1" align="right">Comment 1</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe">7ff3baa</a></td><td><code>Try with editable install</code></td></tr></table>




---

archive/issue_events_440240.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-02-16T12:41:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-440240"
}
```



---

archive/issue_events_440241.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-02-16T12:41:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-440241"
}
```



---

archive/issue_comments_542103.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n+Run: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov\n \n+This currently fails because the sage environment is not correctly activated before running `sage-runtests` (coverage needs a python script as argument, so one cannot use `sage -t`). What's the best way to accomplish this?\n``````\n",
    "created_at": "2022-02-16T12:41:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542103",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
+Run: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov
 
+This currently fails because the sage environment is not correctly activated before running `sage-runtests` (coverage needs a python script as argument, so one cannot use `sage -t`). What's the best way to accomplish this?
``````




---

archive/issue_comments_542104.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d\">4c7c162</a></td><td><code>Try sourcing sage-env</code></td></tr></table>\n",
    "created_at": "2022-02-17T12:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542104",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d">4c7c162</a></td><td><code>Try sourcing sage-env</code></td></tr></table>




---

archive/issue_comments_542105.json:
```json
{
    "body": "Changed commit from **[7ff3baa](https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe)** to **[4c7c162](https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d)**",
    "created_at": "2022-02-17T12:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542105",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7ff3baa](https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe)** to **[4c7c162](https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d)**



---

archive/issue_comments_542106.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7\">6a93454</a></td><td><code>No source cmd?!</code></td></tr></table>\n",
    "created_at": "2022-02-17T13:26:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542106",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4" align="right">Comment 4</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7">6a93454</a></td><td><code>No source cmd?!</code></td></tr></table>




---

archive/issue_comments_542107.json:
```json
{
    "body": "Changed commit from **[4c7c162](https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d)** to **[6a93454](https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7)**",
    "created_at": "2022-02-17T13:26:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542107",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4c7c162](https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d)** to **[6a93454](https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7)**



---

archive/issue_comments_542108.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb\">97970d1</a></td><td><code>Try sage-env-config</code></td></tr></table>\n",
    "created_at": "2022-02-17T16:09:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542108",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb">97970d1</a></td><td><code>Try sage-env-config</code></td></tr></table>




---

archive/issue_comments_542109.json:
```json
{
    "body": "Changed commit from **[6a93454](https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7)** to **[97970d1](https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb)**",
    "created_at": "2022-02-17T16:09:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542109",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6a93454](https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7)** to **[97970d1](https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb)**



---

archive/issue_comments_542110.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nUse `sage -sh -c \"....\"` to run a shell command `....` in the Sage environment.",
    "created_at": "2022-02-17T16:46:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542110",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">Comment 6</div>

Use `sage -sh -c "...."` to run a shell command `....` in the Sage environment.



---

archive/issue_comments_542111.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nOr use `sage -python -m coverage ...`",
    "created_at": "2022-02-17T16:48:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542111",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">Comment 7</div>

Or use `sage -python -m coverage ...`



---

archive/issue_comments_542112.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769\">af9b442</a></td><td><code>Try with sage -python</code></td></tr></table>\n",
    "created_at": "2022-02-17T17:08:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542112",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8" align="right">Comment 8</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769">af9b442</a></td><td><code>Try with sage -python</code></td></tr></table>




---

archive/issue_comments_542113.json:
```json
{
    "body": "Changed commit from **[97970d1](https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb)** to **[af9b442](https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769)**",
    "created_at": "2022-02-17T17:08:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542113",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[97970d1](https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb)** to **[af9b442](https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769)**



---

archive/issue_comments_542114.json:
```json
{
    "body": "Changed commit from **[af9b442](https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769)** to **[1c53f6f](https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99)**",
    "created_at": "2022-02-17T19:31:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542114",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[af9b442](https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769)** to **[1c53f6f](https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99)**



---

archive/issue_comments_542115.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99\">1c53f6f</a></td><td><code>Ignore coverage warnings</code></td></tr></table>\n",
    "created_at": "2022-02-17T19:31:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542115",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9" align="right">Comment 9</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99">1c53f6f</a></td><td><code>Ignore coverage warnings</code></td></tr></table>




---

archive/issue_comments_542116.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6\">3bf2fdc</a></td><td><code>Install git</code></td></tr></table>\n",
    "created_at": "2022-02-18T12:55:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542116",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10" align="right">Comment 10</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6">3bf2fdc</a></td><td><code>Install git</code></td></tr></table>




---

archive/issue_comments_542117.json:
```json
{
    "body": "Changed commit from **[1c53f6f](https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99)** to **[3bf2fdc](https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6)**",
    "created_at": "2022-02-18T12:55:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542117",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1c53f6f](https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99)** to **[3bf2fdc](https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6)**



---

archive/issue_comments_542118.json:
```json
{
    "body": "Changed commit from **[3bf2fdc](https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6)** to **[e4bca51](https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1)**",
    "created_at": "2022-02-18T21:59:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542118",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3bf2fdc](https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6)** to **[e4bca51](https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1)**



---

archive/issue_comments_542119.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1\">e4bca51</a></td><td><code>Try without sudo</code></td></tr></table>\n",
    "created_at": "2022-02-18T21:59:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542119",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11" align="right">Comment 11</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1">e4bca51</a></td><td><code>Try without sudo</code></td></tr></table>




---

archive/issue_comments_542120.json:
```json
{
    "body": "Changed commit from **[e4bca51](https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1)** to **[5523e44](https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb)**",
    "created_at": "2022-02-19T10:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542120",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e4bca51](https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1)** to **[5523e44](https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb)**



---

archive/issue_comments_542121.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb\">5523e44</a></td><td><code>Have to manually combine coverage results</code></td></tr></table>\n",
    "created_at": "2022-02-19T10:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542121",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12" align="right">Comment 12</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb">5523e44</a></td><td><code>Have to manually combine coverage results</code></td></tr></table>




---

archive/issue_comments_542122.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd\">8b25060</a></td><td><code>Force 2 threads</code></td></tr></table>\n",
    "created_at": "2022-02-19T10:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542122",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13" align="right">Comment 13</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd">8b25060</a></td><td><code>Force 2 threads</code></td></tr></table>




---

archive/issue_comments_542123.json:
```json
{
    "body": "Changed commit from **[5523e44](https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb)** to **[8b25060](https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd)**",
    "created_at": "2022-02-19T10:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542123",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5523e44](https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb)** to **[8b25060](https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd)**



---

archive/issue_comments_542124.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2\">cc8e027</a></td><td><code>Fix indent</code></td></tr></table>\n",
    "created_at": "2022-02-19T11:36:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542124",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14" align="right">Comment 14</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2">cc8e027</a></td><td><code>Fix indent</code></td></tr></table>




---

archive/issue_comments_542125.json:
```json
{
    "body": "Changed commit from **[8b25060](https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd)** to **[cc8e027](https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2)**",
    "created_at": "2022-02-19T11:36:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542125",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8b25060](https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd)** to **[cc8e027](https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2)**



---

archive/issue_comments_542126.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nReplying to [@mkoeppe](#comment%3A7):\n> Or use `sage -python -m coverage ...`\n\nThanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)\n\nI just noticed that elementary things like git and sudo are missing in the standard docker image. Would it make sense to add these tools?",
    "created_at": "2022-02-19T18:58:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542126",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:15" align="right">Comment 15</div>

Replying to [@mkoeppe](#comment%3A7):
> Or use `sage -python -m coverage ...`

Thanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)

I just noticed that elementary things like git and sudo are missing in the standard docker image. Would it make sense to add these tools?



---

archive/issue_comments_542127.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564\">ec045eb</a></td><td><code>Try to find coverage file</code></td></tr></table>\n",
    "created_at": "2022-02-19T19:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542127",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16" align="right">Comment 16</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564">ec045eb</a></td><td><code>Try to find coverage file</code></td></tr></table>




---

archive/issue_comments_542128.json:
```json
{
    "body": "Changed commit from **[cc8e027](https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2)** to **[ec045eb](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)**",
    "created_at": "2022-02-19T19:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542128",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cc8e027](https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2)** to **[ec045eb](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)**



---

archive/issue_comments_542129.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nReplying to [@tobiasdiez](#comment%3A15):\n> Replying to [@mkoeppe](#comment%3A7):\n> > Or use `sage -python -m coverage ...`\n\n> \n> Thanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)\n\nThis is a goal that has not been achieved yet. What `sage-env` does is still needed for some things in the Sage library. See for example #31296.",
    "created_at": "2022-02-19T20:02:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542129",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">Comment 17</div>

Replying to [@tobiasdiez](#comment%3A15):
> Replying to [@mkoeppe](#comment%3A7):
> > Or use `sage -python -m coverage ...`

> 
> Thanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)

This is a goal that has not been achieved yet. What `sage-env` does is still needed for some things in the Sage library. See for example #31296.



---

archive/issue_comments_542130.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@tobiasdiez](#comment%3A15):\n> Replying to [@mkoeppe](#comment%3A7):\n> > Or use `sage -python -m coverage ...`\n\n> \n> Thanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)\n> \n> I just noticed that elementary things like git and sudo are missing in the standard docker image. Would it make sense to add these tools?\n\nI added `git` to `-recommended`, see #33296, #33277, but we're not building the image yet. We could replace `-standard` but `-recommended`. Probably best after #33062.\n\nYou don't need `sudo`, you are running as `root`.",
    "created_at": "2022-02-19T20:10:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542130",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@tobiasdiez](#comment%3A15):
> Replying to [@mkoeppe](#comment%3A7):
> > Or use `sage -python -m coverage ...`

> 
> Thanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)
> 
> I just noticed that elementary things like git and sudo are missing in the standard docker image. Would it make sense to add these tools?

I added `git` to `-recommended`, see #33296, #33277, but we're not building the image yet. We could replace `-standard` but `-recommended`. Probably best after #33062.

You don't need `sudo`, you are running as `root`.



---

archive/issue_comments_542131.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@mkoeppe](#comment%3A18):\n> You don't need `sudo`, you are running as `root`.\n\nIt's more for convenience and coherence - normally github actions don't run as sudo.",
    "created_at": "2022-03-02T12:47:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542131",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@mkoeppe](#comment%3A18):
> You don't need `sudo`, you are running as `root`.

It's more for convenience and coherence - normally github actions don't run as sudo.



---

archive/issue_events_440242.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-02T12:59:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-440242"
}
```



---

archive/issue_comments_542132.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n+Use coverage.py to generate coverage results for the sage source code based on the test execution. In contrast to sage's na\u00efve coverage tool, this not only looks for the existence of doctests for a method but actually measures which lines are actually executed by the tests.\n+\n+These coverage results are then uploaded to codecov, where one can inspect the results. See https://codecov.io/gh/sagemath/sagetrac-mirror/tree/ec045eb0168b937e35375e803979975df4aa6564/src/sage for the current coverage. Codecov also displays the coverage of changed files, so that one can easily check if changes are indeed covered by tests. An example would be https://codecov.io/gh/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564 but there are of course no changes in python files in this ticket, so it shows nothing interesting. For a more interesting example from a different project see eg https://app.codecov.io/gh/JabRef/jabref/commit/2494509f2d75426bd7369b358880e7ffed2a47b4. The idea would be to add the link to such a report as a new badge in the trac ticket (after this ticket here is merged). \n+\n Run: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov\n \n-This currently fails because the sage environment is not correctly activated before running `sage-runtests` (coverage needs a python script as argument, so one cannot use `sage -t`). What's the best way to accomplish this?\n``````\n",
    "created_at": "2022-03-02T12:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542132",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
+Use coverage.py to generate coverage results for the sage source code based on the test execution. In contrast to sage's na√Øve coverage tool, this not only looks for the existence of doctests for a method but actually measures which lines are actually executed by the tests.
+
+These coverage results are then uploaded to codecov, where one can inspect the results. See https://codecov.io/gh/sagemath/sagetrac-mirror/tree/ec045eb0168b937e35375e803979975df4aa6564/src/sage for the current coverage. Codecov also displays the coverage of changed files, so that one can easily check if changes are indeed covered by tests. An example would be https://codecov.io/gh/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564 but there are of course no changes in python files in this ticket, so it shows nothing interesting. For a more interesting example from a different project see eg https://app.codecov.io/gh/JabRef/jabref/commit/2494509f2d75426bd7369b358880e7ffed2a47b4. The idea would be to add the link to such a report as a new badge in the trac ticket (after this ticket here is merged). 
+
 Run: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov
 
-This currently fails because the sage environment is not correctly activated before running `sage-runtests` (coverage needs a python script as argument, so one cannot use `sage -t`). What's the best way to accomplish this?
``````




---

archive/issue_comments_542133.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nI am getting\n\"There was a problem getting the source code from your provider. Unable to show line by line coverage. \"\n\nhttps://app.codecov.io/gh/sagemath/sagetrac-mirror/blob/ec045eb0168b937e35375e803979975df4aa6564/src/sage/categories/chain_complexes.py",
    "created_at": "2022-03-02T17:14:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542133",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">Comment 21</div>

I am getting
"There was a problem getting the source code from your provider. Unable to show line by line coverage. "

https://app.codecov.io/gh/sagemath/sagetrac-mirror/blob/ec045eb0168b937e35375e803979975df4aa6564/src/sage/categories/chain_complexes.py



---

archive/issue_comments_542134.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nThe link is working for me. Maybe a temporary issues on their side?",
    "created_at": "2022-03-02T17:57:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542134",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:22" align="right">Comment 22</div>

The link is working for me. Maybe a temporary issues on their side?



---

archive/issue_comments_542135.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nWorking now for me too",
    "created_at": "2022-03-02T19:44:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542135",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">Comment 23</div>

Working now for me too



---

archive/issue_comments_542136.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nLooking great, thanks for this work!",
    "created_at": "2022-03-02T19:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542136",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">Comment 24</div>

Looking great, thanks for this work!



---

archive/issue_comments_542137.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2022-03-02T19:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542137",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_events_440243.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-02T19:47:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-440243"
}
```



---

archive/issue_events_440244.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-02T19:47:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-440244"
}
```



---

archive/issue_comments_542138.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nThanks for the review!",
    "created_at": "2022-03-02T20:15:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542138",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:25" align="right">Comment 25</div>

Thanks for the review!



---

archive/issue_events_440245.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-08T08:12:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-440245"
}
```



---

archive/issue_events_440246.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e7f6c32784a894ff7d56d1a09fdb53fd2747a779",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-03-08T08:12:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33355#event-440246"
}
```



---

archive/issue_comments_542139.json:
```json
{
    "body": "Changed branch from **[public/build/codecov](https://github.com/sagemath/sagetrac-mirror/tree/public/build/codecov)** to **[ec045eb](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)**",
    "created_at": "2022-03-08T08:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542139",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/build/codecov](https://github.com/sagemath/sagetrac-mirror/tree/public/build/codecov)** to **[ec045eb](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)**



---

archive/issue_comments_542140.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\ncurrently not working in the \"Build and Test\" badge, shouting :\n\n```\nRun ./venv/bin/python3 -m coverage combine src/.coverage/\n  ./venv/bin/python3 -m coverage combine src/.coverage/\n  ./venv/bin/python3 -m coverage xml\n  find . -name *coverage*\n  shell: sh -e {0}\nCouldn't combine from non-existent path 'src/.coverage/'\nError: Process completed with exit code 1.\n```",
    "created_at": "2022-03-31T19:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542140",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:27" align="right">Comment 27</div>

currently not working in the "Build and Test" badge, shouting :

```
Run ./venv/bin/python3 -m coverage combine src/.coverage/
  ./venv/bin/python3 -m coverage combine src/.coverage/
  ./venv/bin/python3 -m coverage xml
  find . -name *coverage*
  shell: sh -e {0}
Couldn't combine from non-existent path 'src/.coverage/'
Error: Process completed with exit code 1.
```



---

archive/issue_comments_542141.json:
```json
{
    "body": "Changed commit from **[ec045eb](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)** to none",
    "created_at": "2022-03-31T19:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542141",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[ec045eb](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)** to none



---

archive/issue_comments_542142.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nWhich ticket shows this behavior? It is still working correctly in the latest beta: https://github.com/sagemath/sagetrac-mirror/runs/5710760370?check_suite_focus=true",
    "created_at": "2022-03-31T19:10:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542142",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:28" align="right">Comment 28</div>

Which ticket shows this behavior? It is still working correctly in the latest beta: https://github.com/sagemath/sagetrac-mirror/runs/5710760370?check_suite_focus=true



---

archive/issue_comments_542143.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nsee #33629 for example",
    "created_at": "2022-04-02T10:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542143",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:29" align="right">Comment 29</div>

see #33629 for example



---

archive/issue_comments_542144.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nOkay, was actually an issue with pyright. Fixed in #33631.",
    "created_at": "2022-04-02T11:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542144",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:30" align="right">Comment 30</div>

Okay, was actually an issue with pyright. Fixed in #33631.



---

archive/issue_comments_542145.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nCan we get the badge now?",
    "created_at": "2022-04-05T04:40:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542145",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">Comment 31</div>

Can we get the badge now?



---

archive/issue_comments_542146.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nthe badge \"Build & Test\" is still broken by problems about coverage\n\nfor example, see\n\nhttps://github.com/sagemath/sagetrac-mirror/runs/6117339523?check_suite_focus=true\n\nshouting\n\n```\nRun ./venv/bin/python3 -m coverage combine src/.coverage/\n6\n/__w/sagetrac-mirror/sagetrac-mirror/venv/bin/python3: No module named coverage\n7\nError: Process completed with exit code 1.\n```",
    "created_at": "2022-04-22T06:43:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542146",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:32" align="right">Comment 32</div>

the badge "Build & Test" is still broken by problems about coverage

for example, see

https://github.com/sagemath/sagetrac-mirror/runs/6117339523?check_suite_focus=true

shouting

```
Run ./venv/bin/python3 -m coverage combine src/.coverage/
6
/__w/sagetrac-mirror/sagetrac-mirror/venv/bin/python3: No module named coverage
7
Error: Process completed with exit code 1.
```



---

archive/issue_comments_542147.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nI've opened #33747 for this",
    "created_at": "2022-04-22T22:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33355#issuecomment-542147",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">Comment 33</div>

I've opened #33747 for this
