# Issue 33355: Generate coverage results and upload to codecov

archive/issues_033118.json:
```json
{
    "body": "Use coverage.py to generate coverage results for the sage source code based on the test execution. In contrast to sage's na\u00efve coverage tool, this not only looks for the existence of doctests for a method but actually measures which lines are actually executed by the tests.\n\nThese coverage results are then uploaded to codecov, where one can inspect the results. See https://codecov.io/gh/sagemath/sagetrac-mirror/tree/ec045eb0168b937e35375e803979975df4aa6564/src/sage for the current coverage. Codecov also displays the coverage of changed files, so that one can easily check if changes are indeed covered by tests. An example would be https://codecov.io/gh/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564 but there are of course no changes in python files in this ticket, so it shows nothing interesting. For a more interesting example from a different project see eg https://app.codecov.io/gh/JabRef/jabref/commit/2494509f2d75426bd7369b358880e7ffed2a47b4. The idea would be to add the link to such a report as a new badge in the trac ticket (after this ticket here is merged). \n\nRun: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov\n\n\n**CC:**  @mkoeppe\n\n**Branch:** [ec045eb0168b937e35375e803979975df4aa6564](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)\n\n**Reviewer:** Matthias Koeppe\n\n**Author:** Tobias Diez\n\nIssue created by migration from https://trac.sagemath.org/ticket/33355\n\n",
    "closed_at": "2022-03-08T08:12:09Z",
    "created_at": "2022-02-15T20:44:14Z",
    "labels": [
        "component: build",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Generate coverage results and upload to codecov",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33355",
    "user": "https://github.com/tobiasdiez"
}
```
Use coverage.py to generate coverage results for the sage source code based on the test execution. In contrast to sage's naïve coverage tool, this not only looks for the existence of doctests for a method but actually measures which lines are actually executed by the tests.

These coverage results are then uploaded to codecov, where one can inspect the results. See https://codecov.io/gh/sagemath/sagetrac-mirror/tree/ec045eb0168b937e35375e803979975df4aa6564/src/sage for the current coverage. Codecov also displays the coverage of changed files, so that one can easily check if changes are indeed covered by tests. An example would be https://codecov.io/gh/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564 but there are of course no changes in python files in this ticket, so it shows nothing interesting. For a more interesting example from a different project see eg https://app.codecov.io/gh/JabRef/jabref/commit/2494509f2d75426bd7369b358880e7ffed2a47b4. The idea would be to add the link to such a report as a new badge in the trac ticket (after this ticket here is merged). 

Run: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov


**CC:**  @mkoeppe

**Branch:** [ec045eb0168b937e35375e803979975df4aa6564](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)

**Reviewer:** Matthias Koeppe

**Author:** Tobias Diez

Issue created by migration from https://trac.sagemath.org/ticket/33355





---

archive/issue_comments_635705.json:
```json
{
    "body": "**Changing commit** from \"[3c315dd899db75084dd2a6ab5fc9fe3595347c35](https://github.com/sagemath/sagetrac-mirror/commit/3c315dd899db75084dd2a6ab5fc9fe3595347c35)\" to \"[7ff3baa51737b9991452da59ed1a42ca446566fe](https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe)\".",
    "created_at": "2022-02-15T23:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635705",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3c315dd899db75084dd2a6ab5fc9fe3595347c35](https://github.com/sagemath/sagetrac-mirror/commit/3c315dd899db75084dd2a6ab5fc9fe3595347c35)" to "[7ff3baa51737b9991452da59ed1a42ca446566fe](https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe)".



---

archive/issue_comments_635706.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe\">7ff3baa</a></td><td><code>Try with editable install</code></td></tr></table>\n",
    "created_at": "2022-02-15T23:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635706",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe">7ff3baa</a></td><td><code>Try with editable install</code></td></tr></table>




---

archive/issue_comments_635707.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n+Run: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov\n \n+This currently fails because the sage environment is not correctly activated before running `sage-runtests` (coverage needs a python script as argument, so one cannot use `sage -t`). What's the best way to accomplish this?\n``````\n",
    "created_at": "2022-02-16T12:41:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635707",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
+Run: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov
 
+This currently fails because the sage environment is not correctly activated before running `sage-runtests` (coverage needs a python script as argument, so one cannot use `sage -t`). What's the best way to accomplish this?
``````




---

archive/issue_comments_635708.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d\">4c7c162</a></td><td><code>Try sourcing sage-env</code></td></tr></table>\n",
    "created_at": "2022-02-17T12:38:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635708",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d">4c7c162</a></td><td><code>Try sourcing sage-env</code></td></tr></table>




---

archive/issue_comments_635709.json:
```json
{
    "body": "**Changing commit** from \"[7ff3baa51737b9991452da59ed1a42ca446566fe](https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe)\" to \"[4c7c162719a81d3acf9a3bd573d6e41acf3ea60d](https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d)\".",
    "created_at": "2022-02-17T12:38:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635709",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7ff3baa51737b9991452da59ed1a42ca446566fe](https://github.com/sagemath/sagetrac-mirror/commit/7ff3baa51737b9991452da59ed1a42ca446566fe)" to "[4c7c162719a81d3acf9a3bd573d6e41acf3ea60d](https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d)".



---

archive/issue_comments_635710.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7\">6a93454</a></td><td><code>No source cmd?!</code></td></tr></table>\n",
    "created_at": "2022-02-17T13:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635710",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7">6a93454</a></td><td><code>No source cmd?!</code></td></tr></table>




---

archive/issue_comments_635711.json:
```json
{
    "body": "**Changing commit** from \"[4c7c162719a81d3acf9a3bd573d6e41acf3ea60d](https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d)\" to \"[6a93454d3d48e373b1d195b2f4875ecd69b273e7](https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7)\".",
    "created_at": "2022-02-17T13:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635711",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4c7c162719a81d3acf9a3bd573d6e41acf3ea60d](https://github.com/sagemath/sagetrac-mirror/commit/4c7c162719a81d3acf9a3bd573d6e41acf3ea60d)" to "[6a93454d3d48e373b1d195b2f4875ecd69b273e7](https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7)".



---

archive/issue_comments_635712.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb\">97970d1</a></td><td><code>Try sage-env-config</code></td></tr></table>\n",
    "created_at": "2022-02-17T16:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635712",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb">97970d1</a></td><td><code>Try sage-env-config</code></td></tr></table>




---

archive/issue_comments_635713.json:
```json
{
    "body": "**Changing commit** from \"[6a93454d3d48e373b1d195b2f4875ecd69b273e7](https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7)\" to \"[97970d12a74ee8237f1c21fedd16873e995df6eb](https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb)\".",
    "created_at": "2022-02-17T16:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635713",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6a93454d3d48e373b1d195b2f4875ecd69b273e7](https://github.com/sagemath/sagetrac-mirror/commit/6a93454d3d48e373b1d195b2f4875ecd69b273e7)" to "[97970d12a74ee8237f1c21fedd16873e995df6eb](https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb)".



---

archive/issue_comments_635714.json:
```json
{
    "body": "<a id='comment:6'></a>\nUse `sage -sh -c \"....\"` to run a shell command `....` in the Sage environment.",
    "created_at": "2022-02-17T16:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635714",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Use `sage -sh -c "...."` to run a shell command `....` in the Sage environment.



---

archive/issue_comments_635715.json:
```json
{
    "body": "<a id='comment:7'></a>\nOr use `sage -python -m coverage ...`",
    "created_at": "2022-02-17T16:48:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635715",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Or use `sage -python -m coverage ...`



---

archive/issue_comments_635716.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769\">af9b442</a></td><td><code>Try with sage -python</code></td></tr></table>\n",
    "created_at": "2022-02-17T17:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635716",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769">af9b442</a></td><td><code>Try with sage -python</code></td></tr></table>




---

archive/issue_comments_635717.json:
```json
{
    "body": "**Changing commit** from \"[97970d12a74ee8237f1c21fedd16873e995df6eb](https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb)\" to \"[af9b442aeb64c782909d49759504ec2c39345769](https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769)\".",
    "created_at": "2022-02-17T17:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635717",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[97970d12a74ee8237f1c21fedd16873e995df6eb](https://github.com/sagemath/sagetrac-mirror/commit/97970d12a74ee8237f1c21fedd16873e995df6eb)" to "[af9b442aeb64c782909d49759504ec2c39345769](https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769)".



---

archive/issue_comments_635718.json:
```json
{
    "body": "**Changing commit** from \"[af9b442aeb64c782909d49759504ec2c39345769](https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769)\" to \"[1c53f6f2fb7ba8342b179b21ff88ccb33189fe99](https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99)\".",
    "created_at": "2022-02-17T19:31:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635718",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[af9b442aeb64c782909d49759504ec2c39345769](https://github.com/sagemath/sagetrac-mirror/commit/af9b442aeb64c782909d49759504ec2c39345769)" to "[1c53f6f2fb7ba8342b179b21ff88ccb33189fe99](https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99)".



---

archive/issue_comments_635719.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99\">1c53f6f</a></td><td><code>Ignore coverage warnings</code></td></tr></table>\n",
    "created_at": "2022-02-17T19:31:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635719",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99">1c53f6f</a></td><td><code>Ignore coverage warnings</code></td></tr></table>




---

archive/issue_comments_635720.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6\">3bf2fdc</a></td><td><code>Install git</code></td></tr></table>\n",
    "created_at": "2022-02-18T12:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635720",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6">3bf2fdc</a></td><td><code>Install git</code></td></tr></table>




---

archive/issue_comments_635721.json:
```json
{
    "body": "**Changing commit** from \"[1c53f6f2fb7ba8342b179b21ff88ccb33189fe99](https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99)\" to \"[3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6](https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6)\".",
    "created_at": "2022-02-18T12:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635721",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1c53f6f2fb7ba8342b179b21ff88ccb33189fe99](https://github.com/sagemath/sagetrac-mirror/commit/1c53f6f2fb7ba8342b179b21ff88ccb33189fe99)" to "[3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6](https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6)".



---

archive/issue_comments_635722.json:
```json
{
    "body": "**Changing commit** from \"[3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6](https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6)\" to \"[e4bca517e8774b0ac58aaad94da1f080978913b1](https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1)\".",
    "created_at": "2022-02-18T21:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635722",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6](https://github.com/sagemath/sagetrac-mirror/commit/3bf2fdcf6822e96859b584bd0856efbaf3ec2eb6)" to "[e4bca517e8774b0ac58aaad94da1f080978913b1](https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1)".



---

archive/issue_comments_635723.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1\">e4bca51</a></td><td><code>Try without sudo</code></td></tr></table>\n",
    "created_at": "2022-02-18T21:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635723",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1">e4bca51</a></td><td><code>Try without sudo</code></td></tr></table>




---

archive/issue_comments_635724.json:
```json
{
    "body": "**Changing commit** from \"[e4bca517e8774b0ac58aaad94da1f080978913b1](https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1)\" to \"[5523e44c5cdd7aeebfd99cb9a2167f4904f742bb](https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb)\".",
    "created_at": "2022-02-19T10:05:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635724",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e4bca517e8774b0ac58aaad94da1f080978913b1](https://github.com/sagemath/sagetrac-mirror/commit/e4bca517e8774b0ac58aaad94da1f080978913b1)" to "[5523e44c5cdd7aeebfd99cb9a2167f4904f742bb](https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb)".



---

archive/issue_comments_635725.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb\">5523e44</a></td><td><code>Have to manually combine coverage results</code></td></tr></table>\n",
    "created_at": "2022-02-19T10:05:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635725",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb">5523e44</a></td><td><code>Have to manually combine coverage results</code></td></tr></table>




---

archive/issue_comments_635726.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd\">8b25060</a></td><td><code>Force 2 threads</code></td></tr></table>\n",
    "created_at": "2022-02-19T10:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635726",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd">8b25060</a></td><td><code>Force 2 threads</code></td></tr></table>




---

archive/issue_comments_635727.json:
```json
{
    "body": "**Changing commit** from \"[5523e44c5cdd7aeebfd99cb9a2167f4904f742bb](https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb)\" to \"[8b25060723fa4667a9b666248b9bad60219e4ffd](https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd)\".",
    "created_at": "2022-02-19T10:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635727",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5523e44c5cdd7aeebfd99cb9a2167f4904f742bb](https://github.com/sagemath/sagetrac-mirror/commit/5523e44c5cdd7aeebfd99cb9a2167f4904f742bb)" to "[8b25060723fa4667a9b666248b9bad60219e4ffd](https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd)".



---

archive/issue_comments_635728.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2\">cc8e027</a></td><td><code>Fix indent</code></td></tr></table>\n",
    "created_at": "2022-02-19T11:36:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635728",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2">cc8e027</a></td><td><code>Fix indent</code></td></tr></table>




---

archive/issue_comments_635729.json:
```json
{
    "body": "**Changing commit** from \"[8b25060723fa4667a9b666248b9bad60219e4ffd](https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd)\" to \"[cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2](https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2)\".",
    "created_at": "2022-02-19T11:36:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635729",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8b25060723fa4667a9b666248b9bad60219e4ffd](https://github.com/sagemath/sagetrac-mirror/commit/8b25060723fa4667a9b666248b9bad60219e4ffd)" to "[cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2](https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2)".



---

archive/issue_comments_635730.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [mkoeppe](#comment%3A7):\n> Or use `sage -python -m coverage ...`\n\n\nThanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)\n\nI just noticed that elementary things like git and sudo are missing in the standard docker image. Would it make sense to add these tools?",
    "created_at": "2022-02-19T18:58:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635730",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:15'></a>
Replying to [mkoeppe](#comment%3A7):
> Or use `sage -python -m coverage ...`


Thanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)

I just noticed that elementary things like git and sudo are missing in the standard docker image. Would it make sense to add these tools?



---

archive/issue_comments_635731.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564\">ec045eb</a></td><td><code>Try to find coverage file</code></td></tr></table>\n",
    "created_at": "2022-02-19T19:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635731",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564">ec045eb</a></td><td><code>Try to find coverage file</code></td></tr></table>




---

archive/issue_comments_635732.json:
```json
{
    "body": "**Changing commit** from \"[cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2](https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2)\" to \"[ec045eb0168b937e35375e803979975df4aa6564](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)\".",
    "created_at": "2022-02-19T19:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635732",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2](https://github.com/sagemath/sagetrac-mirror/commit/cc8e027c21c36b4d40dc663b259d3d3b7b6b2da2)" to "[ec045eb0168b937e35375e803979975df4aa6564](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)".



---

archive/issue_comments_635733.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [gh-tobiasdiez](#comment%3A15):\n> Replying to [mkoeppe](#comment%3A7):\n> > Or use `sage -python -m coverage ...`\n\n> \n> Thanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)\n\n\nThis is a goal that has not been achieved yet. What `sage-env` does is still needed for some things in the Sage library. See for example #31296.",
    "created_at": "2022-02-19T20:02:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635733",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
Replying to [gh-tobiasdiez](#comment%3A15):
> Replying to [mkoeppe](#comment%3A7):
> > Or use `sage -python -m coverage ...`

> 
> Thanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)


This is a goal that has not been achieved yet. What `sage-env` does is still needed for some things in the Sage library. See for example #31296.



---

archive/issue_comments_635734.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [gh-tobiasdiez](#comment%3A15):\n> Replying to [mkoeppe](#comment%3A7):\n> > Or use `sage -python -m coverage ...`\n\n> \n> Thanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)\n> \n> I just noticed that elementary things like git and sudo are missing in the standard docker image. Would it make sense to add these tools?\n\n\nI added `git` to `-recommended`, see #33296, #33277, but we're not building the image yet. We could replace `-standard` but `-recommended`. Probably best after #33062.\n\nYou don't need `sudo`, you are running as `root`.",
    "created_at": "2022-02-19T20:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635734",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>
Replying to [gh-tobiasdiez](#comment%3A15):
> Replying to [mkoeppe](#comment%3A7):
> > Or use `sage -python -m coverage ...`

> 
> Thanks that worked well! (Why is this command actually necessary? I thought its the job of `sage-conf` to handle all environment variables)
> 
> I just noticed that elementary things like git and sudo are missing in the standard docker image. Would it make sense to add these tools?


I added `git` to `-recommended`, see #33296, #33277, but we're not building the image yet. We could replace `-standard` but `-recommended`. Probably best after #33062.

You don't need `sudo`, you are running as `root`.



---

archive/issue_comments_635735.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [mkoeppe](#comment%3A18):\n> You don't need `sudo`, you are running as `root`.\n\n\nIt's more for convenience and coherence - normally github actions don't run as sudo.",
    "created_at": "2022-03-02T12:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635735",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:19'></a>
Replying to [mkoeppe](#comment%3A18):
> You don't need `sudo`, you are running as `root`.


It's more for convenience and coherence - normally github actions don't run as sudo.



---

archive/issue_comments_635736.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2022-03-02T12:59:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635736",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_635737.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n+Use coverage.py to generate coverage results for the sage source code based on the test execution. In contrast to sage's na\u00efve coverage tool, this not only looks for the existence of doctests for a method but actually measures which lines are actually executed by the tests.\n+\n+These coverage results are then uploaded to codecov, where one can inspect the results. See https://codecov.io/gh/sagemath/sagetrac-mirror/tree/ec045eb0168b937e35375e803979975df4aa6564/src/sage for the current coverage. Codecov also displays the coverage of changed files, so that one can easily check if changes are indeed covered by tests. An example would be https://codecov.io/gh/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564 but there are of course no changes in python files in this ticket, so it shows nothing interesting. For a more interesting example from a different project see eg https://app.codecov.io/gh/JabRef/jabref/commit/2494509f2d75426bd7369b358880e7ffed2a47b4. The idea would be to add the link to such a report as a new badge in the trac ticket (after this ticket here is merged). \n+\n Run: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov\n \n-This currently fails because the sage environment is not correctly activated before running `sage-runtests` (coverage needs a python script as argument, so one cannot use `sage -t`). What's the best way to accomplish this?\n``````\n",
    "created_at": "2022-03-02T12:59:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635737",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
+Use coverage.py to generate coverage results for the sage source code based on the test execution. In contrast to sage's naïve coverage tool, this not only looks for the existence of doctests for a method but actually measures which lines are actually executed by the tests.
+
+These coverage results are then uploaded to codecov, where one can inspect the results. See https://codecov.io/gh/sagemath/sagetrac-mirror/tree/ec045eb0168b937e35375e803979975df4aa6564/src/sage for the current coverage. Codecov also displays the coverage of changed files, so that one can easily check if changes are indeed covered by tests. An example would be https://codecov.io/gh/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564 but there are of course no changes in python files in this ticket, so it shows nothing interesting. For a more interesting example from a different project see eg https://app.codecov.io/gh/JabRef/jabref/commit/2494509f2d75426bd7369b358880e7ffed2a47b4. The idea would be to add the link to such a report as a new badge in the trac ticket (after this ticket here is merged). 
+
 Run: https://github.com/sagemath/sagetrac-mirror/actions/workflows/build.yml?query=branch%3Apublic/build/codecov
 
-This currently fails because the sage environment is not correctly activated before running `sage-runtests` (coverage needs a python script as argument, so one cannot use `sage -t`). What's the best way to accomplish this?
``````




---

archive/issue_comments_635738.json:
```json
{
    "body": "<a id='comment:21'></a>\nI am getting\n\"There was a problem getting the source code from your provider. Unable to show line by line coverage. \"\n\nhttps://app.codecov.io/gh/sagemath/sagetrac-mirror/blob/ec045eb0168b937e35375e803979975df4aa6564/src/sage/categories/chain_complexes.py",
    "created_at": "2022-03-02T17:14:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635738",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
I am getting
"There was a problem getting the source code from your provider. Unable to show line by line coverage. "

https://app.codecov.io/gh/sagemath/sagetrac-mirror/blob/ec045eb0168b937e35375e803979975df4aa6564/src/sage/categories/chain_complexes.py



---

archive/issue_comments_635739.json:
```json
{
    "body": "<a id='comment:22'></a>\nThe link is working for me. Maybe a temporary issues on their side?",
    "created_at": "2022-03-02T17:57:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635739",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:22'></a>
The link is working for me. Maybe a temporary issues on their side?



---

archive/issue_comments_635740.json:
```json
{
    "body": "<a id='comment:23'></a>\nWorking now for me too",
    "created_at": "2022-03-02T19:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635740",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>
Working now for me too



---

archive/issue_comments_635741.json:
```json
{
    "body": "<a id='comment:24'></a>\nLooking great, thanks for this work!",
    "created_at": "2022-03-02T19:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635741",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
Looking great, thanks for this work!



---

archive/issue_comments_635742.json:
```json
{
    "body": "**Reviewer:** Matthias Koeppe",
    "created_at": "2022-03-02T19:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635742",
    "user": "https://github.com/mkoeppe"
}
```

**Reviewer:** Matthias Koeppe



---

archive/issue_comments_635743.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2022-03-02T19:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635743",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_635744.json:
```json
{
    "body": "<a id='comment:25'></a>\nThanks for the review!",
    "created_at": "2022-03-02T20:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635744",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:25'></a>
Thanks for the review!



---

archive/issue_events_098705.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-08T08:12:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33355#event-98705"
}
```



---

archive/issue_comments_635745.json:
```json
{
    "body": "**Changing branch** from \"[public/build/codecov](https://github.com/sagemath/sagetrac-mirror/tree/public/build/codecov)\" to \"[ec045eb0168b937e35375e803979975df4aa6564](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)\".",
    "created_at": "2022-03-08T08:12:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635745",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/build/codecov](https://github.com/sagemath/sagetrac-mirror/tree/public/build/codecov)" to "[ec045eb0168b937e35375e803979975df4aa6564](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)".



---

archive/issue_comments_635746.json:
```json
{
    "body": "<a id='comment:27'></a>\ncurrently not working in the \"Build and Test\" badge, shouting :\n\n```\nRun ./venv/bin/python3 -m coverage combine src/.coverage/\n  ./venv/bin/python3 -m coverage combine src/.coverage/\n  ./venv/bin/python3 -m coverage xml\n  find . -name *coverage*\n  shell: sh -e {0}\nCouldn't combine from non-existent path 'src/.coverage/'\nError: Process completed with exit code 1.\n```",
    "created_at": "2022-03-31T19:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635746",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:27'></a>
currently not working in the "Build and Test" badge, shouting :

```
Run ./venv/bin/python3 -m coverage combine src/.coverage/
  ./venv/bin/python3 -m coverage combine src/.coverage/
  ./venv/bin/python3 -m coverage xml
  find . -name *coverage*
  shell: sh -e {0}
Couldn't combine from non-existent path 'src/.coverage/'
Error: Process completed with exit code 1.
```



---

archive/issue_comments_635747.json:
```json
{
    "body": "**Changing commit** from \"[ec045eb0168b937e35375e803979975df4aa6564](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)\" to \"\".",
    "created_at": "2022-03-31T19:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635747",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[ec045eb0168b937e35375e803979975df4aa6564](https://github.com/sagemath/sagetrac-mirror/commit/ec045eb0168b937e35375e803979975df4aa6564)" to "".



---

archive/issue_comments_635748.json:
```json
{
    "body": "<a id='comment:28'></a>\nWhich ticket shows this behavior? It is still working correctly in the latest beta: https://github.com/sagemath/sagetrac-mirror/runs/5710760370?check_suite_focus=true",
    "created_at": "2022-03-31T19:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635748",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:28'></a>
Which ticket shows this behavior? It is still working correctly in the latest beta: https://github.com/sagemath/sagetrac-mirror/runs/5710760370?check_suite_focus=true



---

archive/issue_comments_635749.json:
```json
{
    "body": "<a id='comment:29'></a>\nsee #33629 for example",
    "created_at": "2022-04-02T10:09:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635749",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:29'></a>
see #33629 for example



---

archive/issue_comments_635750.json:
```json
{
    "body": "<a id='comment:30'></a>\nOkay, was actually an issue with pyright. Fixed in #33631.",
    "created_at": "2022-04-02T11:38:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635750",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:30'></a>
Okay, was actually an issue with pyright. Fixed in #33631.



---

archive/issue_comments_635751.json:
```json
{
    "body": "<a id='comment:31'></a>\nCan we get the badge now?",
    "created_at": "2022-04-05T04:40:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635751",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>
Can we get the badge now?



---

archive/issue_comments_635752.json:
```json
{
    "body": "<a id='comment:32'></a>\nthe badge \"Build & Test\" is still broken by problems about coverage\n\nfor example, see\n\nhttps://github.com/sagemath/sagetrac-mirror/runs/6117339523?check_suite_focus=true\n\nshouting\n\n```\nRun ./venv/bin/python3 -m coverage combine src/.coverage/\n6\n/__w/sagetrac-mirror/sagetrac-mirror/venv/bin/python3: No module named coverage\n7\nError: Process completed with exit code 1.\n```",
    "created_at": "2022-04-22T06:43:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635752",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:32'></a>
the badge "Build & Test" is still broken by problems about coverage

for example, see

https://github.com/sagemath/sagetrac-mirror/runs/6117339523?check_suite_focus=true

shouting

```
Run ./venv/bin/python3 -m coverage combine src/.coverage/
6
/__w/sagetrac-mirror/sagetrac-mirror/venv/bin/python3: No module named coverage
7
Error: Process completed with exit code 1.
```



---

archive/issue_comments_635753.json:
```json
{
    "body": "<a id='comment:33'></a>\nI've opened #33747 for this",
    "created_at": "2022-04-22T22:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33355#issuecomment-635753",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>
I've opened #33747 for this
