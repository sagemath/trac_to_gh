# Issue 33972: Another error in height_difference_bound

archive/issues_033735.json:
```json
{
    "body": "Similar to #33971, the height of a polynomial is not typically the max of the heights of the coefficients. In this application the height of the polynomial should be the height of the coefficients if they are thought of as a projective point (i.e., the height is independent of scaling). This is sometimes called the \"projective\" height of a polynomial. However, this function is computing `h(g_i)` as the max of the heights of the coefficients of `g_i`.\n\n```\nfor k in range(N + 1):\n    CoeffPolys = (CR.gen(k) ** D).lift(I)\n    h = max([c.global_height(prec) for g in CoeffPolys for c in (g).coefficients()])\n    maxh = max(maxh, h)\n```\n\n\n**CC:**  @bhutz @enderwannabe\n\n**Keywords:** gsoc2022\n\n**Branch/Commit:** [97ae98d43829256ae7b7cfa509c2aa569bcd648d](https://github.com/sagemath/sagetrac-mirror/commit/97ae98d43829256ae7b7cfa509c2aa569bcd648d)\n\n**Reviewer:** Ben Hutz\n\n**Author:** Jing Guo\n\n**Dependencies:** #34175\n\nIssue created by migration from https://trac.sagemath.org/ticket/33972\n\n",
    "closed_at": "2022-08-30T19:04:55Z",
    "created_at": "2022-06-10T11:51:29Z",
    "labels": [
        "component: dynamics",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Another error in height_difference_bound",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33972",
    "user": "https://github.com/guojing0"
}
```
Similar to #33971, the height of a polynomial is not typically the max of the heights of the coefficients. In this application the height of the polynomial should be the height of the coefficients if they are thought of as a projective point (i.e., the height is independent of scaling). This is sometimes called the "projective" height of a polynomial. However, this function is computing `h(g_i)` as the max of the heights of the coefficients of `g_i`.

```
for k in range(N + 1):
    CoeffPolys = (CR.gen(k) ** D).lift(I)
    h = max([c.global_height(prec) for g in CoeffPolys for c in (g).coefficients()])
    maxh = max(maxh, h)
```


**CC:**  @bhutz @enderwannabe

**Keywords:** gsoc2022

**Branch/Commit:** [97ae98d43829256ae7b7cfa509c2aa569bcd648d](https://github.com/sagemath/sagetrac-mirror/commit/97ae98d43829256ae7b7cfa509c2aa569bcd648d)

**Reviewer:** Ben Hutz

**Author:** Jing Guo

**Dependencies:** #34175

Issue created by migration from https://trac.sagemath.org/ticket/33972





---

archive/issue_comments_646505.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Similiar to #33971, the height of a polynomial is not the max of the heights of the coefficients. However, it is computing `h(g_i)` as the max of the heights of the coefficients of `g_i`.\n+Similar to #33971, the height of a polynomial is not typically the max of the heights of the coefficients. In this application the height of the polynomial should be the height of the coefficients if they are thought of as a projective point (i.e., the height is independent of scaling). This is sometimes called the \"projective\" height of a polynomial. However, this function is computing `h(g_i)` as the max of the heights of the coefficients of `g_i`.\n \n ```\n for k in range(N + 1):\n``````\n",
    "created_at": "2022-06-10T16:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646505",
    "user": "https://github.com/bhutz"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Similiar to #33971, the height of a polynomial is not the max of the heights of the coefficients. However, it is computing `h(g_i)` as the max of the heights of the coefficients of `g_i`.
+Similar to #33971, the height of a polynomial is not typically the max of the heights of the coefficients. In this application the height of the polynomial should be the height of the coefficients if they are thought of as a projective point (i.e., the height is independent of scaling). This is sometimes called the "projective" height of a polynomial. However, this function is computing `h(g_i)` as the max of the heights of the coefficients of `g_i`.
 
 ```
 for k in range(N + 1):
``````




---

archive/issue_comments_646506.json:
```json
{
    "body": "<a id='comment:1'></a>\nIt may makes sense to first implement a height function for polynomials and then use that height function in height_difference_bound",
    "created_at": "2022-06-10T16:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646506",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:1'></a>
It may makes sense to first implement a height function for polynomials and then use that height function in height_difference_bound



---

archive/issue_comments_646507.json:
```json
{
    "body": "**Commit:** [f8df80820dc7321dc9b18c9644c3b8315999670b](https://github.com/sagemath/sagetrac-mirror/commit/f8df80820dc7321dc9b18c9644c3b8315999670b)",
    "created_at": "2022-07-04T09:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646507",
    "user": "https://github.com/guojing0"
}
```

**Commit:** [f8df80820dc7321dc9b18c9644c3b8315999670b](https://github.com/sagemath/sagetrac-mirror/commit/f8df80820dc7321dc9b18c9644c3b8315999670b)



---

archive/issue_comments_646508.json:
```json
{
    "body": "**Branch:** [u/gh-guojing0/33972_height_diff_bound](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-guojing0/33972_height_diff_bound)",
    "created_at": "2022-07-04T09:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646508",
    "user": "https://github.com/guojing0"
}
```

**Branch:** [u/gh-guojing0/33972_height_diff_bound](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-guojing0/33972_height_diff_bound)



---

archive/issue_comments_646509.json:
```json
{
    "body": "**Dependencies:** #34060",
    "created_at": "2022-07-05T13:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646509",
    "user": "https://github.com/guojing0"
}
```

**Dependencies:** #34060



---

archive/issue_comments_646510.json:
```json
{
    "body": "<a id='comment:4'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/212ce1fa1ddb07ef9cf38168617491a5440bf3ee\">212ce1f</a></td><td><code>polynomial_element.pyx: First version of `global_height`</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c64289026ad88254fb7bb97196b4e4484b1dedc8\">c642890</a></td><td><code>multi_polynomial_libsingular.pyx: `global_height`</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c6a1763a5a7a2a710c28d37af19a91c7a2ac893\">0c6a176</a></td><td><code>More examples</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2242cb2eeb1b3df8f06176201be75bb0d848c12\">c2242cb</a></td><td><code>Move `import` stmts to top and correct doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ac23b81b323c1890fd57957cf15713c871044ef\">4ac23b8</a></td><td><code>remove `QQbar`</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a94e199b7070ea8c1c43a6ab5532133c7bb03075\">a94e199</a></td><td><code>local_height and local_height_arch for polys</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f4fe177c0e29784d67a5bae9a51af5a03167f13\">4f4fe17</a></td><td><code>Correct doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ebaa377df21f419faa36f86c825ce8af8cb85aef\">ebaa377</a></td><td><code>Replace incorrect code with `global_height`</code></td></tr></table>\n",
    "created_at": "2022-07-05T14:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646510",
    "user": "https://github.com/guojing0"
}
```

<a id='comment:4'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/212ce1fa1ddb07ef9cf38168617491a5440bf3ee">212ce1f</a></td><td><code>polynomial_element.pyx: First version of `global_height`</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c64289026ad88254fb7bb97196b4e4484b1dedc8">c642890</a></td><td><code>multi_polynomial_libsingular.pyx: `global_height`</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c6a1763a5a7a2a710c28d37af19a91c7a2ac893">0c6a176</a></td><td><code>More examples</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2242cb2eeb1b3df8f06176201be75bb0d848c12">c2242cb</a></td><td><code>Move `import` stmts to top and correct doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ac23b81b323c1890fd57957cf15713c871044ef">4ac23b8</a></td><td><code>remove `QQbar`</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a94e199b7070ea8c1c43a6ab5532133c7bb03075">a94e199</a></td><td><code>local_height and local_height_arch for polys</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f4fe177c0e29784d67a5bae9a51af5a03167f13">4f4fe17</a></td><td><code>Correct doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ebaa377df21f419faa36f86c825ce8af8cb85aef">ebaa377</a></td><td><code>Replace incorrect code with `global_height`</code></td></tr></table>




---

archive/issue_comments_646511.json:
```json
{
    "body": "**Changing branch** from \"[u/gh-guojing0/33972_height_diff_bound](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-guojing0/33972_height_diff_bound)\" to \"[u/gh-guojing0/33972_height_bound](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-guojing0/33972_height_bound)\".",
    "created_at": "2022-07-05T14:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646511",
    "user": "https://github.com/guojing0"
}
```

**Changing branch** from "[u/gh-guojing0/33972_height_diff_bound](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-guojing0/33972_height_diff_bound)" to "[u/gh-guojing0/33972_height_bound](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-guojing0/33972_height_bound)".



---

archive/issue_comments_646512.json:
```json
{
    "body": "**Changing commit** from \"[f8df80820dc7321dc9b18c9644c3b8315999670b](https://github.com/sagemath/sagetrac-mirror/commit/f8df80820dc7321dc9b18c9644c3b8315999670b)\" to \"[ebaa377df21f419faa36f86c825ce8af8cb85aef](https://github.com/sagemath/sagetrac-mirror/commit/ebaa377df21f419faa36f86c825ce8af8cb85aef)\".",
    "created_at": "2022-07-05T14:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646512",
    "user": "https://github.com/guojing0"
}
```

**Changing commit** from "[f8df80820dc7321dc9b18c9644c3b8315999670b](https://github.com/sagemath/sagetrac-mirror/commit/f8df80820dc7321dc9b18c9644c3b8315999670b)" to "[ebaa377df21f419faa36f86c825ce8af8cb85aef](https://github.com/sagemath/sagetrac-mirror/commit/ebaa377df21f419faa36f86c825ce8af8cb85aef)".



---

archive/issue_comments_646513.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2022-07-05T14:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646513",
    "user": "https://github.com/guojing0"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_646514.json:
```json
{
    "body": "**Changing commit** from \"[ebaa377df21f419faa36f86c825ce8af8cb85aef](https://github.com/sagemath/sagetrac-mirror/commit/ebaa377df21f419faa36f86c825ce8af8cb85aef)\" to \"[a5e23b81d90ed9b9d893e6cf11c8b608ecaef356](https://github.com/sagemath/sagetrac-mirror/commit/a5e23b81d90ed9b9d893e6cf11c8b608ecaef356)\".",
    "created_at": "2022-07-08T07:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646514",
    "user": "https://github.com/guojing0"
}
```

**Changing commit** from "[ebaa377df21f419faa36f86c825ce8af8cb85aef](https://github.com/sagemath/sagetrac-mirror/commit/ebaa377df21f419faa36f86c825ce8af8cb85aef)" to "[a5e23b81d90ed9b9d893e6cf11c8b608ecaef356](https://github.com/sagemath/sagetrac-mirror/commit/a5e23b81d90ed9b9d893e6cf11c8b608ecaef356)".



---

archive/issue_comments_646515.json:
```json
{
    "body": "<a id='comment:6'></a>\nUpdate with latest code from polynomial height.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1b22a11582dd8bf49f5699408780fb20fbe6a17\">c1b22a1</a></td><td><code>34060: initial implementation of heights for polynomials</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5aad0029645743225e79bbc59a16b6ddc6b2186\">d5aad00</a></td><td><code>34060: code cleanup and QQbar fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad991a3875175e78e274c3fd01aa00d3a19d194c\">ad991a3</a></td><td><code>34060: Number field and `prec` examples</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5e23b81d90ed9b9d893e6cf11c8b608ecaef356\">a5e23b8</a></td><td><code>33971: Commit with latest polynomial height code</code></td></tr></table>\n",
    "created_at": "2022-07-08T07:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646515",
    "user": "https://github.com/guojing0"
}
```

<a id='comment:6'></a>
Update with latest code from polynomial height.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1b22a11582dd8bf49f5699408780fb20fbe6a17">c1b22a1</a></td><td><code>34060: initial implementation of heights for polynomials</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5aad0029645743225e79bbc59a16b6ddc6b2186">d5aad00</a></td><td><code>34060: code cleanup and QQbar fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad991a3875175e78e274c3fd01aa00d3a19d194c">ad991a3</a></td><td><code>34060: Number field and `prec` examples</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5e23b81d90ed9b9d893e6cf11c8b608ecaef356">a5e23b8</a></td><td><code>33971: Commit with latest polynomial height code</code></td></tr></table>




---

archive/issue_comments_646516.json:
```json
{
    "body": "**Changing branch** from \"[u/gh-guojing0/33972_height_bound](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-guojing0/33972_height_bound)\" to \"[u/gh-guojing0/33972_hdb](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-guojing0/33972_hdb)\".",
    "created_at": "2022-07-08T07:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646516",
    "user": "https://github.com/guojing0"
}
```

**Changing branch** from "[u/gh-guojing0/33972_height_bound](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-guojing0/33972_height_bound)" to "[u/gh-guojing0/33972_hdb](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-guojing0/33972_hdb)".



---

archive/issue_comments_646517.json:
```json
{
    "body": "<a id='comment:7'></a>\nOnly failure (with actual return value `2.9957322...`):\n\n```\nsage: P.<x,y> = ProjectiveSpace(QQ, 1)\nsage: f = DynamicalSystem([5*x^2 + 3*x*y , y^2 + 3*x^2])\nsage: f.height_difference_bound(prec=100)\n5.3375380797013179737224159274\n```",
    "created_at": "2022-07-08T07:42:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646517",
    "user": "https://github.com/guojing0"
}
```

<a id='comment:7'></a>
Only failure (with actual return value `2.9957322...`):

```
sage: P.<x,y> = ProjectiveSpace(QQ, 1)
sage: f = DynamicalSystem([5*x^2 + 3*x*y , y^2 + 3*x^2])
sage: f.height_difference_bound(prec=100)
5.3375380797013179737224159274
```



---

archive/issue_comments_646518.json:
```json
{
    "body": "<a id='comment:8'></a>\nThis change is wrong:\n\n```\n-        CR = f.domain().coordinate_ring()\n-        I = CR.ideal(f.defining_polynomials())\n-        maxh = 0\n-        for k in range(N + 1):\n-            CoeffPolys = (CR.gen(k) ** D).lift(I)\n-            h = max([c.global_height(prec) for g in CoeffPolys for c in (g).coefficients()])\n-            maxh = max(maxh, h)\n-        L = R((N + 1) * binomial(N + D - d, D - d)).log() + maxh\n+        L = R((N + 1) * binomial(N + D - d, D - d)).log() + f.global_height(prec)\n```\n\nThe error of the existing code is the line\n\n```\nh = max([c.global_height(prec) for g in CoeffPolys for c in (g).coefficients()])\n```\nWhat is wrong is that it is taking the height of g to be the max of the height of its coefficients. You still need to take maxh to be the max of the heights of the CoeffPolys, but the correction is to use the new height code (#34060) to compute the heights of each g.",
    "created_at": "2022-07-11T13:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646518",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:8'></a>
This change is wrong:

```
-        CR = f.domain().coordinate_ring()
-        I = CR.ideal(f.defining_polynomials())
-        maxh = 0
-        for k in range(N + 1):
-            CoeffPolys = (CR.gen(k) ** D).lift(I)
-            h = max([c.global_height(prec) for g in CoeffPolys for c in (g).coefficients()])
-            maxh = max(maxh, h)
-        L = R((N + 1) * binomial(N + D - d, D - d)).log() + maxh
+        L = R((N + 1) * binomial(N + D - d, D - d)).log() + f.global_height(prec)
```

The error of the existing code is the line

```
h = max([c.global_height(prec) for g in CoeffPolys for c in (g).coefficients()])
```
What is wrong is that it is taking the height of g to be the max of the height of its coefficients. You still need to take maxh to be the max of the heights of the CoeffPolys, but the correction is to use the new height code (#34060) to compute the heights of each g.



---

archive/issue_comments_646519.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2022-07-11T13:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646519",
    "user": "https://github.com/bhutz"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_646520.json:
```json
{
    "body": "**Reviewer:** Ben Hutz",
    "created_at": "2022-07-11T13:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646520",
    "user": "https://github.com/bhutz"
}
```

**Reviewer:** Ben Hutz



---

archive/issue_comments_646521.json:
```json
{
    "body": "**Changing commit** from \"[a5e23b81d90ed9b9d893e6cf11c8b608ecaef356](https://github.com/sagemath/sagetrac-mirror/commit/a5e23b81d90ed9b9d893e6cf11c8b608ecaef356)\" to \"[a3af7bab11fb37afa52b47e08cf67441623777d0](https://github.com/sagemath/sagetrac-mirror/commit/a3af7bab11fb37afa52b47e08cf67441623777d0)\".",
    "created_at": "2022-07-12T12:47:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646521",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a5e23b81d90ed9b9d893e6cf11c8b608ecaef356](https://github.com/sagemath/sagetrac-mirror/commit/a5e23b81d90ed9b9d893e6cf11c8b608ecaef356)" to "[a3af7bab11fb37afa52b47e08cf67441623777d0](https://github.com/sagemath/sagetrac-mirror/commit/a3af7bab11fb37afa52b47e08cf67441623777d0)".



---

archive/issue_comments_646522.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31e2b34baaa6e834b09121831b29fd8966113952\">31e2b34</a></td><td><code>temp example</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3af7bab11fb37afa52b47e08cf67441623777d0\">a3af7ba</a></td><td><code>33072: Works for most tests</code></td></tr></table>\n",
    "created_at": "2022-07-12T12:47:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646522",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31e2b34baaa6e834b09121831b29fd8966113952">31e2b34</a></td><td><code>temp example</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3af7bab11fb37afa52b47e08cf67441623777d0">a3af7ba</a></td><td><code>33072: Works for most tests</code></td></tr></table>




---

archive/issue_comments_646523.json:
```json
{
    "body": "**Changing commit** from \"[a3af7bab11fb37afa52b47e08cf67441623777d0](https://github.com/sagemath/sagetrac-mirror/commit/a3af7bab11fb37afa52b47e08cf67441623777d0)\" to \"[2aff55c8787f735d621387e729adf847710e749d](https://github.com/sagemath/sagetrac-mirror/commit/2aff55c8787f735d621387e729adf847710e749d)\".",
    "created_at": "2022-07-13T11:00:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646523",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a3af7bab11fb37afa52b47e08cf67441623777d0](https://github.com/sagemath/sagetrac-mirror/commit/a3af7bab11fb37afa52b47e08cf67441623777d0)" to "[2aff55c8787f735d621387e729adf847710e749d](https://github.com/sagemath/sagetrac-mirror/commit/2aff55c8787f735d621387e729adf847710e749d)".



---

archive/issue_comments_646524.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/913fe1511bb171fae3ae4d6bd57958700bf38838\">913fe15</a></td><td><code>34175: global_height returns zero for zero poly</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2aff55c8787f735d621387e729adf847710e749d\">2aff55c</a></td><td><code>33972: Fix `height_difference_bound`</code></td></tr></table>\n",
    "created_at": "2022-07-13T11:00:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646524",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/913fe1511bb171fae3ae4d6bd57958700bf38838">913fe15</a></td><td><code>34175: global_height returns zero for zero poly</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2aff55c8787f735d621387e729adf847710e749d">2aff55c</a></td><td><code>33972: Fix `height_difference_bound`</code></td></tr></table>




---

archive/issue_comments_646525.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2022-07-13T11:01:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646525",
    "user": "https://github.com/guojing0"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_646526.json:
```json
{
    "body": "**Changing dependencies** from \"#34060\" to \"#34175\".",
    "created_at": "2022-07-13T11:01:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646526",
    "user": "https://github.com/guojing0"
}
```

**Changing dependencies** from "#34060" to "#34175".



---

archive/issue_comments_646527.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8a2b4491cf2ce7d2e8499b91e3c27821279c932\">b8a2b44</a></td><td><code>34175: Return zero as real of specific precision</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ceb3d6da2e2ad209971436ab5bb0a059166a198\">1ceb3d6</a></td><td><code>Merge branch 'zero_height' into height_bound</code></td></tr></table>\n",
    "created_at": "2022-07-13T13:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646527",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8a2b4491cf2ce7d2e8499b91e3c27821279c932">b8a2b44</a></td><td><code>34175: Return zero as real of specific precision</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ceb3d6da2e2ad209971436ab5bb0a059166a198">1ceb3d6</a></td><td><code>Merge branch 'zero_height' into height_bound</code></td></tr></table>




---

archive/issue_comments_646528.json:
```json
{
    "body": "**Changing commit** from \"[2aff55c8787f735d621387e729adf847710e749d](https://github.com/sagemath/sagetrac-mirror/commit/2aff55c8787f735d621387e729adf847710e749d)\" to \"[1ceb3d6da2e2ad209971436ab5bb0a059166a198](https://github.com/sagemath/sagetrac-mirror/commit/1ceb3d6da2e2ad209971436ab5bb0a059166a198)\".",
    "created_at": "2022-07-13T13:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646528",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2aff55c8787f735d621387e729adf847710e749d](https://github.com/sagemath/sagetrac-mirror/commit/2aff55c8787f735d621387e729adf847710e749d)" to "[1ceb3d6da2e2ad209971436ab5bb0a059166a198](https://github.com/sagemath/sagetrac-mirror/commit/1ceb3d6da2e2ad209971436ab5bb0a059166a198)".



---

archive/issue_comments_646529.json:
```json
{
    "body": "<a id='comment:13'></a>\nThis looks fine at this point. The difference in the examples is because of correcting the height of the ``g'' polynomials. They are monomials in these examples, so have (logarithmic) height 0 rather than the height of the coefficient.\n\nSo I'll mark this positive modulo any issues that show up when the dependency gets merged.",
    "created_at": "2022-07-26T15:08:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646529",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:13'></a>
This looks fine at this point. The difference in the examples is because of correcting the height of the ``g'' polynomials. They are monomials in these examples, so have (logarithmic) height 0 rather than the height of the coefficient.

So I'll mark this positive modulo any issues that show up when the dependency gets merged.



---

archive/issue_comments_646530.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2022-07-26T15:08:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646530",
    "user": "https://github.com/bhutz"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_646531.json:
```json
{
    "body": "<a id='comment:14'></a>\n\n```\n**********************************************************************\nFile \"src/sage/dynamics/arithmetic_dynamics/projective_ds.py\", line 2116, in sage.dynamics.arithmetic_dynamics.projective_ds.?.height_difference_bound\nFailed example:\n    f.height_difference_bound()\nExpected:\n    11.0020998412042\nGot:\n    10.3089526606443\n**********************************************************************\nFile \"src/sage/dynamics/arithmetic_dynamics/projective_ds.py\", line 2128, in sage.dynamics.arithmetic_dynamics.projective_ds.?.height_difference_bound\nFailed example:\n    f.height_difference_bound()\nExpected:\n    11.0020998412042\nGot:\n    11.3683039374269\n\nq^CKilling test src/sage/dynamics/arithmetic_dynamics/projective_ds.py\n----------------------------------------------------------------------\nDoctests interrupted: 0/1 files tested\n----------------------------------------------------------------------\n```",
    "created_at": "2022-08-05T20:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646531",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>

```
**********************************************************************
File "src/sage/dynamics/arithmetic_dynamics/projective_ds.py", line 2116, in sage.dynamics.arithmetic_dynamics.projective_ds.?.height_difference_bound
Failed example:
    f.height_difference_bound()
Expected:
    11.0020998412042
Got:
    10.3089526606443
**********************************************************************
File "src/sage/dynamics/arithmetic_dynamics/projective_ds.py", line 2128, in sage.dynamics.arithmetic_dynamics.projective_ds.?.height_difference_bound
Failed example:
    f.height_difference_bound()
Expected:
    11.0020998412042
Got:
    11.3683039374269

q^CKilling test src/sage/dynamics/arithmetic_dynamics/projective_ds.py
----------------------------------------------------------------------
Doctests interrupted: 0/1 files tested
----------------------------------------------------------------------
```



---

archive/issue_comments_646532.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2022-08-05T20:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646532",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_646533.json:
```json
{
    "body": "<a id='comment:15'></a>\nI'm also getting these errors on a clean branch. The first one is in the example\n\n```\n            sage: P.<x,y,z> = ProjectiveSpace(ZZ, 2)\n            sage: f = DynamicalSystem_projective([4*x^2 + 100*y^2, 210*x*y, 10000*z^2])\n            sage: f.height_difference_bound()\n            11.0020998412042\n            sage: f.normalize_coordinates()\n            sage: f.height_difference_bound()\n            10.3089526606443\n```\nIt doesn't make sense to keep .normalize in here anymore as the height of the polynomials is independent of the normalization. The 10.308... is the correct value. So condense this example down to a single (correct) value.\n\nThe second failure is just the wrong value.",
    "created_at": "2022-08-10T17:36:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646533",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:15'></a>
I'm also getting these errors on a clean branch. The first one is in the example

```
            sage: P.<x,y,z> = ProjectiveSpace(ZZ, 2)
            sage: f = DynamicalSystem_projective([4*x^2 + 100*y^2, 210*x*y, 10000*z^2])
            sage: f.height_difference_bound()
            11.0020998412042
            sage: f.normalize_coordinates()
            sage: f.height_difference_bound()
            10.3089526606443
```
It doesn't make sense to keep .normalize in here anymore as the height of the polynomials is independent of the normalization. The 10.308... is the correct value. So condense this example down to a single (correct) value.

The second failure is just the wrong value.



---

archive/issue_comments_646534.json:
```json
{
    "body": "**Changing commit** from \"[1ceb3d6da2e2ad209971436ab5bb0a059166a198](https://github.com/sagemath/sagetrac-mirror/commit/1ceb3d6da2e2ad209971436ab5bb0a059166a198)\" to \"[97ae98d43829256ae7b7cfa509c2aa569bcd648d](https://github.com/sagemath/sagetrac-mirror/commit/97ae98d43829256ae7b7cfa509c2aa569bcd648d)\".",
    "created_at": "2022-08-11T08:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646534",
    "user": "https://github.com/guojing0"
}
```

**Changing commit** from "[1ceb3d6da2e2ad209971436ab5bb0a059166a198](https://github.com/sagemath/sagetrac-mirror/commit/1ceb3d6da2e2ad209971436ab5bb0a059166a198)" to "[97ae98d43829256ae7b7cfa509c2aa569bcd648d](https://github.com/sagemath/sagetrac-mirror/commit/97ae98d43829256ae7b7cfa509c2aa569bcd648d)".



---

archive/issue_comments_646535.json:
```json
{
    "body": "**Changing branch** from \"[u/gh-guojing0/33972_hdb](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-guojing0/33972_hdb)\" to \"[u/gh-guojing0/33972_stable](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-guojing0/33972_stable)\".",
    "created_at": "2022-08-11T08:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646535",
    "user": "https://github.com/guojing0"
}
```

**Changing branch** from "[u/gh-guojing0/33972_hdb](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-guojing0/33972_hdb)" to "[u/gh-guojing0/33972_stable](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-guojing0/33972_stable)".



---

archive/issue_comments_646536.json:
```json
{
    "body": "<a id='comment:16'></a>\nBuild and pass all tests on the new branch based on the latest `develop` branch.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97ae98d43829256ae7b7cfa509c2aa569bcd648d\">97ae98d</a></td><td><code>33972 final version</code></td></tr></table>\n",
    "created_at": "2022-08-11T08:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646536",
    "user": "https://github.com/guojing0"
}
```

<a id='comment:16'></a>
Build and pass all tests on the new branch based on the latest `develop` branch.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97ae98d43829256ae7b7cfa509c2aa569bcd648d">97ae98d</a></td><td><code>33972 final version</code></td></tr></table>




---

archive/issue_comments_646537.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2022-08-11T08:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646537",
    "user": "https://github.com/guojing0"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_646538.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2022-08-11T18:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646538",
    "user": "https://github.com/bhutz"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_646539.json:
```json
{
    "body": "<a id='comment:17'></a>\nThis looks fine and the tests pass for me.\n\nIn the future it's better to edit the existing ticket to fix the issues rather than create a whole new branch that erases the history.",
    "created_at": "2022-08-11T18:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646539",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:17'></a>
This looks fine and the tests pass for me.

In the future it's better to edit the existing ticket to fix the issues rather than create a whole new branch that erases the history.



---

archive/issue_comments_646540.json:
```json
{
    "body": "**Changing branch** from \"[u/gh-guojing0/33972_stable](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-guojing0/33972_stable)\" to \"[97ae98d43829256ae7b7cfa509c2aa569bcd648d](https://github.com/sagemath/sagetrac-mirror/commit/97ae98d43829256ae7b7cfa509c2aa569bcd648d)\".",
    "created_at": "2022-08-30T19:04:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33972#issuecomment-646540",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/gh-guojing0/33972_stable](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-guojing0/33972_stable)" to "[97ae98d43829256ae7b7cfa509c2aa569bcd648d](https://github.com/sagemath/sagetrac-mirror/commit/97ae98d43829256ae7b7cfa509c2aa569bcd648d)".



---

archive/issue_events_100519.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-08-30T19:04:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33972",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33972#event-100519"
}
```
