# Issue 33114: Feature.require vs. is_present, is_functional

archive/issues_032877.json:
```json
{
    "assignees": [],
    "body": "(addressing slabbe's questions from [#33092 comment:23](https://github.com/sagemath/sage/issues/33092#comment:23))\n\nSome questions arise with respect to `is_present()`,\n`is_functional()` and `require()`:\n\n- why does `Feature.require()` not check\n  that `is_functional()` is `True`?\n- should `is_present()` always return `False`\n  when `is_functional` returns `False` (while\n  the method names suggest `is_present` could\n  be `True` while `is_functional` is `False`)?\n\nChoices made in this ticket:\n\n- only `is_present()` should be called from outside\n- it always checks that `is_functional()` returns True\n- the `require()` method only calls `is_present()`\n\nA further step, not done in this ticket, would be,\nas suggested in [comment:14](#comment%3A14), to rename `is_functional`\nto `_is_functional`, since only `is_present` is supposed\nto be used from outside. \n\n\nCC:  @seblabbe @orlitzky @kwankyu @saraedum\n\nComponent: **refactoring**\n\nAuthor: **Matthias Koeppe**\n\nBranch: **[`f9232e8`](https://github.com/sagemath/sagetrac-mirror/commit/f9232e8c15911f4a1434359d551372024db83f59)**\n\nReviewer: **S\u00e9bastien Labb\u00e9**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33114_\n\n",
    "closed_at": "2022-03-30T22:33:12Z",
    "created_at": "2022-01-04T18:43:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/refactoring",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Feature.require vs. is_present, is_functional",
    "type": "issue",
    "updated_at": "2022-03-31T09:36:26Z",
    "url": "https://github.com/sagemath/sage/issues/33114",
    "user": "https://github.com/mkoeppe"
}
```
(addressing slabbe's questions from [#33092 comment:23](https://github.com/sagemath/sage/issues/33092#comment:23))

Some questions arise with respect to `is_present()`,
`is_functional()` and `require()`:

- why does `Feature.require()` not check
  that `is_functional()` is `True`?
- should `is_present()` always return `False`
  when `is_functional` returns `False` (while
  the method names suggest `is_present` could
  be `True` while `is_functional` is `False`)?

Choices made in this ticket:

- only `is_present()` should be called from outside
- it always checks that `is_functional()` returns True
- the `require()` method only calls `is_present()`

A further step, not done in this ticket, would be,
as suggested in [comment:14](#comment%3A14), to rename `is_functional`
to `_is_functional`, since only `is_present` is supposed
to be used from outside. 


CC:  @seblabbe @orlitzky @kwankyu @saraedum

Component: **refactoring**

Author: **Matthias Koeppe**

Branch: **[`f9232e8`](https://github.com/sagemath/sagetrac-mirror/commit/f9232e8c15911f4a1434359d551372024db83f59)**

Reviewer: **Sébastien Labbé**

_Issue created by migration from https://trac.sagemath.org/ticket/33114_





---

archive/issue_events_452345.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-04T18:43:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33114#event-452345"
}
```



---

archive/issue_events_452346.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-04T18:43:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "label": "https://github.com/sagemath/sage/labels/refactoring",
    "label_color": "696969",
    "label_name": "refactoring",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33114#event-452346"
}
```



---

archive/issue_events_452347.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-04T18:43:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33114#event-452347"
}
```



---

archive/issue_events_452348.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-04T18:43:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33114#event-452348"
}
```



---

archive/issue_comments_534942.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI believe that the original idea was to use this in the build process of [SageMath](../wiki/SageMath). This influence some of the choices we made back then. If I understand correctly, that's not what we are planning to do anymore.\n\nAnyway, `require` calls `is_present` which calls `is_functional`. At least that's the idea. As far as I recall, `is_functional` is just meant as a hook that you can override to add an additional check while relying on the generic `is_present` check. It should maybe be renamed to `_is_functional` to make this more obvious.",
    "created_at": "2022-01-04T19:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534942",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:1" align="right">comment:1</div>

I believe that the original idea was to use this in the build process of [SageMath](../wiki/SageMath). This influence some of the choices we made back then. If I understand correctly, that's not what we are planning to do anymore.

Anyway, `require` calls `is_present` which calls `is_functional`. At least that's the idea. As far as I recall, `is_functional` is just meant as a hook that you can override to add an additional check while relying on the generic `is_present` check. It should maybe be renamed to `_is_functional` to make this more obvious.



---

archive/issue_comments_534943.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nSo, `is_present` means: is the feature present and functional.\n\nSimilarly, `require` means: require this feature to be present in the above sense.\n\nI believe that the task here is to improve the documentation of these methods if that is not sufficiently clear.",
    "created_at": "2022-01-04T19:13:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534943",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:2" align="right">comment:2</div>

So, `is_present` means: is the feature present and functional.

Similarly, `require` means: require this feature to be present in the above sense.

I believe that the task here is to improve the documentation of these methods if that is not sufficiently clear.



---

archive/issue_comments_534944.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nOk, this is how I understood the feature code up to today, but the meaning of `is_present` vs `is_functional` always perturbed me.\n\nWhen we speak with someone verbally, it is possible that we observe for example as in #33092 that imagemagick is \"installed\" on a machine, thus the convert command \"is present\", but it \"is not functional\" because it can't handle PNG files for instance. In real life, it happens that a feature is present but not functional. This is why the current design is weird a little (but probably easy to fix, for example by adding a new method `is_present_and_functional()` that would be used by `require()` and in the sagemath library.)\n\nWhat I realised today in [#33092 comment:20](https://github.com/sagemath/sage/issues/33092#comment:20) is that JoinFeature currently does not follow the same behavior with respect to `is_present` vs `is_functional`. Instead, it follows what we would be saying logically: a feature may be present but not functional.",
    "created_at": "2022-01-04T19:44:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534944",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:3" align="right">comment:3</div>

Ok, this is how I understood the feature code up to today, but the meaning of `is_present` vs `is_functional` always perturbed me.

When we speak with someone verbally, it is possible that we observe for example as in #33092 that imagemagick is "installed" on a machine, thus the convert command "is present", but it "is not functional" because it can't handle PNG files for instance. In real life, it happens that a feature is present but not functional. This is why the current design is weird a little (but probably easy to fix, for example by adding a new method `is_present_and_functional()` that would be used by `require()` and in the sagemath library.)

What I realised today in [#33092 comment:20](https://github.com/sagemath/sage/issues/33092#comment:20) is that JoinFeature currently does not follow the same behavior with respect to `is_present` vs `is_functional`. Instead, it follows what we would be saying logically: a feature may be present but not functional.



---

archive/issue_comments_534945.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@seblabbe](#comment%3A3):\n> Ok, this is how I understood the feature code up to today, but the meaning of `is_present` vs `is_functional` always perturbed me.\n\nI'd propose to rename `is_present` to `is_present_and_functional` and `is_functional` to `_is_functional`. I agree that it's confusing.\n\n> What I realised today in [#33092 comment:20](https://github.com/sagemath/sage/issues/33092#comment:20) is that JoinFeature currently does not follow the same behavior with respect to `is_present` vs `is_functional`. Instead, it follows what we would be saying logically: a feature may be present but not functional.\n\nYes, that is a bug in `JoinFeature`. (Copied over from the `Latte` feature from which it was created.)",
    "created_at": "2022-01-04T20:58:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534945",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@seblabbe](#comment%3A3):
> Ok, this is how I understood the feature code up to today, but the meaning of `is_present` vs `is_functional` always perturbed me.

I'd propose to rename `is_present` to `is_present_and_functional` and `is_functional` to `_is_functional`. I agree that it's confusing.

> What I realised today in [#33092 comment:20](https://github.com/sagemath/sage/issues/33092#comment:20) is that JoinFeature currently does not follow the same behavior with respect to `is_present` vs `is_functional`. Instead, it follows what we would be saying logically: a feature may be present but not functional.

Yes, that is a bug in `JoinFeature`. (Copied over from the `Latte` feature from which it was created.)



---

archive/issue_comments_534946.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI agree with all of the above - except that it's perhaps not necessary to do the renaming `is_present` -> `is_present_and_functional`",
    "created_at": "2022-01-04T23:35:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534946",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

I agree with all of the above - except that it's perhaps not necessary to do the renaming `is_present` -> `is_present_and_functional`



---

archive/issue_comments_534947.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@mkoeppe](#comment%3A5):\n> I agree with all of the above - except that it's perhaps not necessary to do the renaming `is_present` -> `is_present_and_functional`\n\nI agree, I was thinking the same. When `is_present_and_functional()` return `False`, the first question that comes is whether it is because it is not functional or whether it is not present. Thus the next question to ask is whether `is_present()` return True or False. Thus we need both `is_present_and_functional()` and `is_present()`.\n\nMaybe the `require()` should raise a different type of error when it is not present vs not functional. Currently, when a feature is not functional the error message says the feature is not present which is weird. See [#33092 comment:27](https://github.com/sagemath/sage/issues/33092#comment:27).",
    "created_at": "2022-01-05T09:48:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534947",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@mkoeppe](#comment%3A5):
> I agree with all of the above - except that it's perhaps not necessary to do the renaming `is_present` -> `is_present_and_functional`

I agree, I was thinking the same. When `is_present_and_functional()` return `False`, the first question that comes is whether it is because it is not functional or whether it is not present. Thus the next question to ask is whether `is_present()` return True or False. Thus we need both `is_present_and_functional()` and `is_present()`.

Maybe the `require()` should raise a different type of error when it is not present vs not functional. Currently, when a feature is not functional the error message says the feature is not present which is weird. See [#33092 comment:27](https://github.com/sagemath/sage/issues/33092#comment:27).



---

archive/issue_comments_534948.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@seblabbe](#comment%3A6):\n> Replying to [@mkoeppe](#comment%3A5):\n> > I agree with all of the above - except that it's perhaps not necessary to do the renaming `is_present` -> `is_present_and_functional`\n\n> \n> I agree, I was thinking the same. When `is_present_and_functional()` return `False`, the first question that comes is whether it is because it is not functional or whether it is not present. Thus the next question to ask is whether `is_present()` return True or False. Thus we need both `is_present_and_functional()` and `is_present()`.\n\nSo, `is_functional` was never meant to be exposed to the user. It should really be protected with a `_`. It is also only meant as a hook for the `Executable` feature. I would not change that. Similarly `_is_present` is not meant to be exposed to the user in any way.\n\nI don't think you need both `is_functional` and `is_present` for the user. I don't think you really need to distinguish why a feature can't be used like that, i.e., in a machine-readable way. What would be your use case? Instead, the checks can return a `FeatureTestResult` to provide a lot of detail why something is not sufficient.\n\n> Maybe the `require()` should raise a different type of error when it is not present vs not functional. Currently, when a feature is not functional the error message says the feature is not present which is weird. See [#33092 comment:27](https://github.com/sagemath/sage/issues/33092#comment:27).\n\nCurrently, require says `not available`. We could change that wording of course. The rest of the error message is pulled out of the `FeatureTestResult` if available.",
    "created_at": "2022-01-05T16:55:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534948",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@seblabbe](#comment%3A6):
> Replying to [@mkoeppe](#comment%3A5):
> > I agree with all of the above - except that it's perhaps not necessary to do the renaming `is_present` -> `is_present_and_functional`

> 
> I agree, I was thinking the same. When `is_present_and_functional()` return `False`, the first question that comes is whether it is because it is not functional or whether it is not present. Thus the next question to ask is whether `is_present()` return True or False. Thus we need both `is_present_and_functional()` and `is_present()`.

So, `is_functional` was never meant to be exposed to the user. It should really be protected with a `_`. It is also only meant as a hook for the `Executable` feature. I would not change that. Similarly `_is_present` is not meant to be exposed to the user in any way.

I don't think you need both `is_functional` and `is_present` for the user. I don't think you really need to distinguish why a feature can't be used like that, i.e., in a machine-readable way. What would be your use case? Instead, the checks can return a `FeatureTestResult` to provide a lot of detail why something is not sufficient.

> Maybe the `require()` should raise a different type of error when it is not present vs not functional. Currently, when a feature is not functional the error message says the feature is not present which is weird. See [#33092 comment:27](https://github.com/sagemath/sage/issues/33092#comment:27).

Currently, require says `not available`. We could change that wording of course. The rest of the error message is pulled out of the `FeatureTestResult` if available.



---

archive/issue_comments_534949.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@saraedum](#comment%3A7):\n> I don't think you need both `is_functional` and `is_present` for the user. I don't think you really need to distinguish why a feature can't be used like that, i.e., in a machine-readable way. What would be your use case? Instead, the checks can return a `FeatureTestResult` to provide a lot of detail why something is not sufficient.\n\n+1",
    "created_at": "2022-01-05T18:52:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534949",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@saraedum](#comment%3A7):
> I don't think you need both `is_functional` and `is_present` for the user. I don't think you really need to distinguish why a feature can't be used like that, i.e., in a machine-readable way. What would be your use case? Instead, the checks can return a `FeatureTestResult` to provide a lot of detail why something is not sufficient.

+1



---

archive/issue_comments_534950.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@saraedum](#comment%3A7):\n> Replying to [@seblabbe](#comment%3A6):\n> > Maybe the `require()` should raise a different type of error when it is not present vs not functional. Currently, when a feature is not functional the error message says the feature is not present which is weird. See [#33092 comment:27](https://github.com/sagemath/sage/issues/33092#comment:27).\n\n> \n> Currently, require says `not available`. We could change that wording of course. The rest of the error message is pulled out of the `FeatureTestResult` if available.\n\nWell, the full context of that line is `FeatureNotPresentError: imagemagick is not available.` When I read this and I try to interpret it, I understand that the command `convert` was simply not found on the machine. This is not the information that we want to give. The situation we have here is more tricky. The `convert` is available, the problem is that it does not work well. And here we should not say to the user \"here is how to install convert\" as we do currently.\n\nOr, maybe, I am wrong on the meaning of the word `feature` or the word `present`? For you, what is the definition of a feature? For example, when `ffmpeg` is found in the PATH but can't produce a gif from a png. Is `ffmpeg` a feature? or rather `ffmpeg` + some garenty that it can do something? For me, in this case, the feature `ffmpeg` is present but it is not functional. Therefore we should not raise a `FeatureNotPresentError` and tell the user to install the feature, but rather raise a `FeatureNotFunctionalError` and tell some more meaningfull message to the user which needs to deal with this tricky situation.",
    "created_at": "2022-01-08T14:20:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534950",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@saraedum](#comment%3A7):
> Replying to [@seblabbe](#comment%3A6):
> > Maybe the `require()` should raise a different type of error when it is not present vs not functional. Currently, when a feature is not functional the error message says the feature is not present which is weird. See [#33092 comment:27](https://github.com/sagemath/sage/issues/33092#comment:27).

> 
> Currently, require says `not available`. We could change that wording of course. The rest of the error message is pulled out of the `FeatureTestResult` if available.

Well, the full context of that line is `FeatureNotPresentError: imagemagick is not available.` When I read this and I try to interpret it, I understand that the command `convert` was simply not found on the machine. This is not the information that we want to give. The situation we have here is more tricky. The `convert` is available, the problem is that it does not work well. And here we should not say to the user "here is how to install convert" as we do currently.

Or, maybe, I am wrong on the meaning of the word `feature` or the word `present`? For you, what is the definition of a feature? For example, when `ffmpeg` is found in the PATH but can't produce a gif from a png. Is `ffmpeg` a feature? or rather `ffmpeg` + some garenty that it can do something? For me, in this case, the feature `ffmpeg` is present but it is not functional. Therefore we should not raise a `FeatureNotPresentError` and tell the user to install the feature, but rather raise a `FeatureNotFunctionalError` and tell some more meaningfull message to the user which needs to deal with this tricky situation.



---

archive/issue_comments_534951.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nGiven that features map to `optional` tags, we should avoid semantics more complicated than \"present\" vs. \"not present\".",
    "created_at": "2022-01-09T18:40:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534951",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Given that features map to `optional` tags, we should avoid semantics more complicated than "present" vs. "not present".



---

archive/issue_comments_534952.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nIf there is an actual use case for distinguishing different levels of \"presence\" for a feature (present, functional, awesome, spiffy) - then it would be clearer to actually define separate features for these levels.",
    "created_at": "2022-01-09T18:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534952",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

If there is an actual use case for distinguishing different levels of "presence" for a feature (present, functional, awesome, spiffy) - then it would be clearer to actually define separate features for these levels.



---

archive/issue_comments_534953.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@seblabbe](#comment%3A9):\n> we should not raise a `FeatureNotPresentError` and tell the user to install the feature, but rather raise a `FeatureNotFunctionalError` and tell some more meaningful message to the user which needs to deal with this tricky situation.\n\n+1 on better messages where possible, but I don't think it's useful to have a separate exception class.",
    "created_at": "2022-01-09T18:48:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534953",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@seblabbe](#comment%3A9):
> we should not raise a `FeatureNotPresentError` and tell the user to install the feature, but rather raise a `FeatureNotFunctionalError` and tell some more meaningful message to the user which needs to deal with this tricky situation.

+1 on better messages where possible, but I don't think it's useful to have a separate exception class.



---

archive/issue_comments_534954.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThanks for the answers. I agree to keep it simple and binary YES/NO. I do not have use cases for more levels of presence.\n\nI allow myself to ask whether `is_present()` is still the good yes/no question we want to ask with the current design? Maybe a better name for it exists? Possibly `is_present_and_functional()` as suggested earlier? or something else?\n\nI agree that my main point boils down to give good information to the user when `require()` fails.",
    "created_at": "2022-01-09T21:19:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534954",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:13" align="right">comment:13</div>

Thanks for the answers. I agree to keep it simple and binary YES/NO. I do not have use cases for more levels of presence.

I allow myself to ask whether `is_present()` is still the good yes/no question we want to ask with the current design? Maybe a better name for it exists? Possibly `is_present_and_functional()` as suggested earlier? or something else?

I agree that my main point boils down to give good information to the user when `require()` fails.



---

archive/issue_comments_534955.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nMaybe rename `is_functional` to `_is_functional\nand `is_present` to `is_functional`?",
    "created_at": "2022-01-12T09:00:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534955",
    "user": "https://github.com/slel"
}
```

<div id="comment:14" align="right">comment:14</div>

Maybe rename `is_functional` to `_is_functional
and `is_present` to `is_functional`?



---

archive/issue_events_452349.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-12T17:35:59Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33114#event-452349"
}
```



---

archive/issue_events_452350.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-12T17:35:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33114#event-452350"
}
```



---

archive/issue_comments_534956.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@slel](#comment%3A14):\n> Maybe rename `is_functional` to `_is_functional\n> and `is_present` to `is_functional`?\n\nPersonaly, I don't disagree.",
    "created_at": "2022-01-13T08:06:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534956",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@slel](#comment%3A14):
> Maybe rename `is_functional` to `_is_functional
> and `is_present` to `is_functional`?

Personaly, I don't disagree.



---

archive/issue_comments_534957.json:
```json
{
    "body": "Dependencies: **#31292**",
    "created_at": "2022-03-05T01:31:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534957",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#31292**



---

archive/issue_comments_534958.json:
```json
{
    "body": "Branch: **[u/mkoeppe/feature_require_vs__is_present__is_functional](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/feature_require_vs__is_present__is_functional)**",
    "created_at": "2022-03-06T00:58:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534958",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/feature_require_vs__is_present__is_functional](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/feature_require_vs__is_present__is_functional)**



---

archive/issue_comments_534959.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nHere's a minimal change to improve the situation.\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c3571755e46ca99c02114e02afa767e56dde1cc\"><code>6c35717</code></a></td><td><code>sage.features.FileFeature: Replace method absolute_path by absolute_filename, with deprecation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66d79f8f9b10087c6ecd6fcd560e547648e1fb99\"><code>66d79f8</code></a></td><td><code>sage.features.FileFeature.absolute_path: Fixup try...except...else</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cad9f0fa2ae0abb2e2452cbe0ba9da5e4b9f14c6\"><code>cad9f0f</code></a></td><td><code>sage.features.FileFeature.absolute_filename: New abstract method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57531d08204d981ac0d8795d2201379508fe61ee\"><code>57531d0</code></a></td><td><code>src/sage/features/__init__.py: Document why importing sage.misc.superseded can fail</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66b8125b6ee8ff8a641764ca581f509903a8be67\"><code>66b8125</code></a></td><td><code>sage.features.FileFeature: Add doc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d631a03a02cae81f6577f7de9a8ac9ed4da50d18\"><code>d631a03</code></a></td><td><code>src/sage/features/__init__.py: Fix docstring markup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9568e918ea34342dd03b0c62f5931af1ffa0529\"><code>e9568e9</code></a></td><td><code>FileFeature.absolute_filename: Fix docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec97570d73dea24d406efa9fc29cd7fb7c9b597d\"><code>ec97570</code></a></td><td><code>Merge #31292</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df2d06580d7fccd398e945e3ec3b927a476ded8c\"><code>df2d065</code></a></td><td><code>JoinFeature.is_functional: Deprecate</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/297e611d7a7457ff53d3d315e70cf0ad55005f45\"><code>297e611</code></a></td><td><code>Executable.is_functional: Document that it should not be called directly</code></td></tr></table>\n",
    "created_at": "2022-03-06T00:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534959",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

Here's a minimal change to improve the situation.

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c3571755e46ca99c02114e02afa767e56dde1cc"><code>6c35717</code></a></td><td><code>sage.features.FileFeature: Replace method absolute_path by absolute_filename, with deprecation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66d79f8f9b10087c6ecd6fcd560e547648e1fb99"><code>66d79f8</code></a></td><td><code>sage.features.FileFeature.absolute_path: Fixup try...except...else</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cad9f0fa2ae0abb2e2452cbe0ba9da5e4b9f14c6"><code>cad9f0f</code></a></td><td><code>sage.features.FileFeature.absolute_filename: New abstract method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57531d08204d981ac0d8795d2201379508fe61ee"><code>57531d0</code></a></td><td><code>src/sage/features/__init__.py: Document why importing sage.misc.superseded can fail</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66b8125b6ee8ff8a641764ca581f509903a8be67"><code>66b8125</code></a></td><td><code>sage.features.FileFeature: Add doc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d631a03a02cae81f6577f7de9a8ac9ed4da50d18"><code>d631a03</code></a></td><td><code>src/sage/features/__init__.py: Fix docstring markup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9568e918ea34342dd03b0c62f5931af1ffa0529"><code>e9568e9</code></a></td><td><code>FileFeature.absolute_filename: Fix docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec97570d73dea24d406efa9fc29cd7fb7c9b597d"><code>ec97570</code></a></td><td><code>Merge #31292</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df2d06580d7fccd398e945e3ec3b927a476ded8c"><code>df2d065</code></a></td><td><code>JoinFeature.is_functional: Deprecate</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/297e611d7a7457ff53d3d315e70cf0ad55005f45"><code>297e611</code></a></td><td><code>Executable.is_functional: Document that it should not be called directly</code></td></tr></table>




---

archive/issue_comments_534960.json:
```json
{
    "body": "Commit: **[`297e611`](https://github.com/sagemath/sagetrac-mirror/commit/297e611d7a7457ff53d3d315e70cf0ad55005f45)**",
    "created_at": "2022-03-06T00:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534960",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`297e611`](https://github.com/sagemath/sagetrac-mirror/commit/297e611d7a7457ff53d3d315e70cf0ad55005f45)**



---

archive/issue_comments_534961.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2022-03-06T00:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534961",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_452351.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-06T00:58:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33114#event-452351"
}
```



---

archive/issue_comments_534962.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n(Last 2 commits only; it is on top of #31292)",
    "created_at": "2022-03-06T00:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534962",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

(Last 2 commits only; it is on top of #31292)



---

archive/issue_events_452352.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-06T01:00:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33114#event-452352"
}
```



---

archive/issue_events_452353.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-06T01:00:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33114#event-452353"
}
```



---

archive/issue_comments_534963.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21d4004b7927bfc498273e9d3738b7e02784a311\"><code>21d4004</code></a></td><td><code>src/sage/features/imagemagick.py: Remove an is_functional doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9232e8c15911f4a1434359d551372024db83f59\"><code>f9232e8</code></a></td><td><code>src/sage/features/join_feature.py: Update doctest output with deprecation warning</code></td></tr></table>\n",
    "created_at": "2022-03-06T01:03:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534963",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21d4004b7927bfc498273e9d3738b7e02784a311"><code>21d4004</code></a></td><td><code>src/sage/features/imagemagick.py: Remove an is_functional doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9232e8c15911f4a1434359d551372024db83f59"><code>f9232e8</code></a></td><td><code>src/sage/features/join_feature.py: Update doctest output with deprecation warning</code></td></tr></table>




---

archive/issue_comments_534964.json:
```json
{
    "body": "Changed commit from **[`297e611`](https://github.com/sagemath/sagetrac-mirror/commit/297e611d7a7457ff53d3d315e70cf0ad55005f45)** to **[`f9232e8`](https://github.com/sagemath/sagetrac-mirror/commit/f9232e8c15911f4a1434359d551372024db83f59)**",
    "created_at": "2022-03-06T01:03:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534964",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`297e611`](https://github.com/sagemath/sagetrac-mirror/commit/297e611d7a7457ff53d3d315e70cf0ad55005f45)** to **[`f9232e8`](https://github.com/sagemath/sagetrac-mirror/commit/f9232e8c15911f4a1434359d551372024db83f59)**



---

archive/issue_events_452354.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-06T01:04:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33114#event-452354"
}
```



---

archive/issue_events_452355.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-06T01:04:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33114#event-452355"
}
```



---

archive/issue_comments_534965.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\n(Last 4 commits only; it's on top of #31292.)",
    "created_at": "2022-03-06T01:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534965",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

(Last 4 commits only; it's on top of #31292.)



---

archive/issue_comments_534966.json:
```json
{
    "body": "Changed dependencies from **#31292** to none",
    "created_at": "2022-03-17T18:16:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534966",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#31292** to none



---

archive/issue_comments_534967.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nLet's get this in please",
    "created_at": "2022-03-25T16:37:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534967",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

Let's get this in please



---

archive/issue_comments_534968.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nworks for me. Thanks for this improvement.\n\nI think a next step further is, as suggested in [comment:14](#comment%3A14), to rename `is_functional` to `_is_functional` since only `is_present` is supposed to be used from outside.",
    "created_at": "2022-03-25T17:18:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534968",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:27" align="right">comment:27</div>

works for me. Thanks for this improvement.

I think a next step further is, as suggested in [comment:14](#comment%3A14), to rename `is_functional` to `_is_functional` since only `is_present` is supposed to be used from outside.



---

archive/issue_comments_534969.json:
```json
{
    "body": "Reviewer: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2022-03-25T17:18:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534969",
    "user": "https://github.com/seblabbe"
}
```

Reviewer: **Sébastien Labbé**



---

archive/issue_events_452356.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-03-25T17:18:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33114#event-452356"
}
```



---

archive/issue_events_452357.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2022-03-25T17:18:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33114#event-452357"
}
```



---

archive/issue_comments_534970.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThanks!",
    "created_at": "2022-03-25T17:38:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534970",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

Thanks!



---

archive/issue_events_452358.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-30T22:33:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33114#event-452358"
}
```



---

archive/issue_events_452359.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a54d7ce44ae5c882c0233585f27efef8200aec4d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-03-30T22:33:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33114#event-452359"
}
```



---

archive/issue_comments_534971.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/feature_require_vs__is_present__is_functional](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/feature_require_vs__is_present__is_functional)** to **[`f9232e8`](https://github.com/sagemath/sagetrac-mirror/commit/f9232e8c15911f4a1434359d551372024db83f59)**",
    "created_at": "2022-03-30T22:33:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534971",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/feature_require_vs__is_present__is_functional](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/feature_require_vs__is_present__is_functional)** to **[`f9232e8`](https://github.com/sagemath/sagetrac-mirror/commit/f9232e8c15911f4a1434359d551372024db83f59)**



---

archive/issue_comments_534972.json:
```json
{
    "body": "Changed commit from **[`f9232e8`](https://github.com/sagemath/sagetrac-mirror/commit/f9232e8c15911f4a1434359d551372024db83f59)** to none",
    "created_at": "2022-03-31T09:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534972",
    "user": "https://github.com/seblabbe"
}
```

Changed commit from **[`f9232e8`](https://github.com/sagemath/sagetrac-mirror/commit/f9232e8c15911f4a1434359d551372024db83f59)** to none



---

archive/issue_comments_534973.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nupdated description with choices made in this ticket",
    "created_at": "2022-03-31T09:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534973",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:30" align="right">comment:30</div>

updated description with choices made in this ticket



---

archive/issue_comments_534974.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,8 @@\n - why `Feature.require()` does not check that `is_functional()` is True?\n - should `is_present()` always return False when `is_functional` return False (even if the vocabulary that is used should logically allow it)?\n \n+Choices made in this ticket:\n \n+- only `is_present()` should be called from outside, it always checks that `is_functional()` returns True.\n+- A next step further not done in this ticket is, as suggested in [comment:14](#comment%3A14), to rename `is_functional` to `_is_functional` since only is_present is supposed to be used from outside. \n+\n``````\n",
    "created_at": "2022-03-31T09:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534974",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,8 @@
 - why `Feature.require()` does not check that `is_functional()` is True?
 - should `is_present()` always return False when `is_functional` return False (even if the vocabulary that is used should logically allow it)?
 
+Choices made in this ticket:
 
+- only `is_present()` should be called from outside, it always checks that `is_functional()` returns True.
+- A next step further not done in this ticket is, as suggested in [comment:14](#comment%3A14), to rename `is_functional` to `_is_functional` since only is_present is supposed to be used from outside. 
+
``````




---

archive/issue_comments_534975.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,5 +7,6 @@\n Choices made in this ticket:\n \n - only `is_present()` should be called from outside, it always checks that `is_functional()` returns True.\n+- `require()` method only calls `is_present()`\n - A next step further not done in this ticket is, as suggested in [comment:14](#comment%3A14), to rename `is_functional` to `_is_functional` since only is_present is supposed to be used from outside. \n \n``````\n",
    "created_at": "2022-03-31T09:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534975",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,5 +7,6 @@
 Choices made in this ticket:
 
 - only `is_present()` should be called from outside, it always checks that `is_functional()` returns True.
+- `require()` method only calls `is_present()`
 - A next step further not done in this ticket is, as suggested in [comment:14](#comment%3A14), to rename `is_functional` to `_is_functional` since only is_present is supposed to be used from outside. 
 
``````




---

archive/issue_comments_534976.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,12 +1,23 @@\n-(from slabbe in #33092?replyto=23#comment:23)\n+(addressing slabbe's questions from [#33092 comment:23](https://github.com/sagemath/sage/issues/33092#comment:23))\n \n-Maybe changes needs to be done with respect to `is_present()`, `is_functional()` and `require()`. In particular, I have the following questions for @mkoeppe:\n-- why `Feature.require()` does not check that `is_functional()` is True?\n-- should `is_present()` always return False when `is_functional` return False (even if the vocabulary that is used should logically allow it)?\n+Some questions arise with respect to `is_present()`,\n+`is_functional()` and `require()`:\n+\n+- why does `Feature.require()` not check\n+  that `is_functional()` is `True`?\n+- should `is_present()` always return `False`\n+  when `is_functional` returns `False` (while\n+  the method names suggest `is_present` could\n+  be `True` while `is_functional` is `False`)?\n \n Choices made in this ticket:\n \n-- only `is_present()` should be called from outside, it always checks that `is_functional()` returns True.\n-- `require()` method only calls `is_present()`\n-- A next step further not done in this ticket is, as suggested in [comment:14](#comment%3A14), to rename `is_functional` to `_is_functional` since only is_present is supposed to be used from outside. \n+- only `is_present()` should be called from outside\n+- it always checks that `is_functional()` returns True\n+- the `require()` method only calls `is_present()`\n \n+A further step, not done in this ticket, would be,\n+as suggested in [comment:14](#comment%3A14), to rename `is_functional`\n+to `_is_functional`, since only `is_present` is supposed\n+to be used from outside. \n+\n``````\n",
    "created_at": "2022-03-31T09:36:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33114#issuecomment-534976",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,12 +1,23 @@
-(from slabbe in #33092?replyto=23#comment:23)
+(addressing slabbe's questions from [#33092 comment:23](https://github.com/sagemath/sage/issues/33092#comment:23))
 
-Maybe changes needs to be done with respect to `is_present()`, `is_functional()` and `require()`. In particular, I have the following questions for @mkoeppe:
-- why `Feature.require()` does not check that `is_functional()` is True?
-- should `is_present()` always return False when `is_functional` return False (even if the vocabulary that is used should logically allow it)?
+Some questions arise with respect to `is_present()`,
+`is_functional()` and `require()`:
+
+- why does `Feature.require()` not check
+  that `is_functional()` is `True`?
+- should `is_present()` always return `False`
+  when `is_functional` returns `False` (while
+  the method names suggest `is_present` could
+  be `True` while `is_functional` is `False`)?
 
 Choices made in this ticket:
 
-- only `is_present()` should be called from outside, it always checks that `is_functional()` returns True.
-- `require()` method only calls `is_present()`
-- A next step further not done in this ticket is, as suggested in [comment:14](#comment%3A14), to rename `is_functional` to `_is_functional` since only is_present is supposed to be used from outside. 
+- only `is_present()` should be called from outside
+- it always checks that `is_functional()` returns True
+- the `require()` method only calls `is_present()`
 
+A further step, not done in this ticket, would be,
+as suggested in [comment:14](#comment%3A14), to rename `is_functional`
+to `_is_functional`, since only `is_present` is supposed
+to be used from outside. 
+
``````

