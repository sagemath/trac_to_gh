# Issue 33114: Feature.require vs. is_present, is_functional

archive/issues_032877.json:
```json
{
    "body": "(addressing slabbe's questions from ticket:33092#comment:23)\n\nSome questions arise with respect to `is_present()`,\n`is_functional()` and `require()`:\n\n- why does `Feature.require()` not check\n  that `is_functional()` is `True`?\n- should `is_present()` always return `False`\n  when `is_functional` returns `False` (while\n  the method names suggest `is_present` could\n  be `True` while `is_functional` is `False`)?\n\nChoices made in this ticket:\n\n- only `is_present()` should be called from outside\n- it always checks that `is_functional()` returns True\n- the `require()` method only calls `is_present()`\n\nA further step, not done in this ticket, would be,\nas suggested in comment:14, to rename `is_functional`\nto `_is_functional`, since only `is_present` is supposed\nto be used from outside. \n\n\nCC:  @seblabbe @orlitzky @kwankyu @saraedum\n\nReviewer: S\u00e9bastien Labb\u00e9\n\nAuthor: Matthias Koeppe\n\nBranch: f9232e8c15911f4a1434359d551372024db83f59\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33114\n\n",
    "closed_at": "2022-03-30T22:33:12Z",
    "created_at": "2022-01-04T18:43:09Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Feature.require vs. is_present, is_functional",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33114",
    "user": "https://github.com/mkoeppe"
}
```
(addressing slabbe's questions from ticket:33092#comment:23)

Some questions arise with respect to `is_present()`,
`is_functional()` and `require()`:

- why does `Feature.require()` not check
  that `is_functional()` is `True`?
- should `is_present()` always return `False`
  when `is_functional` returns `False` (while
  the method names suggest `is_present` could
  be `True` while `is_functional` is `False`)?

Choices made in this ticket:

- only `is_present()` should be called from outside
- it always checks that `is_functional()` returns True
- the `require()` method only calls `is_present()`

A further step, not done in this ticket, would be,
as suggested in comment:14, to rename `is_functional`
to `_is_functional`, since only `is_present` is supposed
to be used from outside. 


CC:  @seblabbe @orlitzky @kwankyu @saraedum

Reviewer: Sébastien Labbé

Author: Matthias Koeppe

Branch: f9232e8c15911f4a1434359d551372024db83f59

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33114





---

archive/issue_comments_500729.json:
```json
{
    "body": "<a id='comment:1'></a>I believe that the original idea was to use this in the build process of [SageMath](SageMath). This influence some of the choices we made back then. If I understand correctly, that's not what we are planning to do anymore.\n\nAnyway, `require` calls `is_present` which calls `is_functional`. At least that's the idea. As far as I recall, `is_functional` is just meant as a hook that you can override to add an additional check while relying on the generic `is_present` check. It should maybe be renamed to `_is_functional` to make this more obvious.",
    "created_at": "2022-01-04T19:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500729",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:1'></a>I believe that the original idea was to use this in the build process of [SageMath](SageMath). This influence some of the choices we made back then. If I understand correctly, that's not what we are planning to do anymore.

Anyway, `require` calls `is_present` which calls `is_functional`. At least that's the idea. As far as I recall, `is_functional` is just meant as a hook that you can override to add an additional check while relying on the generic `is_present` check. It should maybe be renamed to `_is_functional` to make this more obvious.



---

archive/issue_comments_500730.json:
```json
{
    "body": "<a id='comment:2'></a>So, `is_present` means: is the feature present and functional.\n\nSimilarly, `require` means: require this feature to be present in the above sense.\n\nI believe that the task here is to improve the documentation of these methods if that is not sufficiently clear.",
    "created_at": "2022-01-04T19:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500730",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:2'></a>So, `is_present` means: is the feature present and functional.

Similarly, `require` means: require this feature to be present in the above sense.

I believe that the task here is to improve the documentation of these methods if that is not sufficiently clear.



---

archive/issue_comments_500731.json:
```json
{
    "body": "<a id='comment:3'></a>Ok, this is how I understood the feature code up to today, but the meaning of `is_present` vs `is_functional` always perturbed me.\n\nWhen we speak with someone verbally, it is possible that we observe for example as in #33092 that imagemagick is \"installed\" on a machine, thus the convert command \"is present\", but it \"is not functional\" because it can't handle PNG files for instance. In real life, it happens that a feature is present but not functional. This is why the current design is weird a little (but probably easy to fix, for example by adding a new method `is_present_and_functional()` that would be used by `require()` and in the sagemath library.)\n\nWhat I realised today in #33092#comment:20 is that JoinFeature currently does not follow the same behavior with respect to `is_present` vs `is_functional`. Instead, it follows what we would be saying logically: a feature may be present but not functional.",
    "created_at": "2022-01-04T19:44:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500731",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:3'></a>Ok, this is how I understood the feature code up to today, but the meaning of `is_present` vs `is_functional` always perturbed me.

When we speak with someone verbally, it is possible that we observe for example as in #33092 that imagemagick is "installed" on a machine, thus the convert command "is present", but it "is not functional" because it can't handle PNG files for instance. In real life, it happens that a feature is present but not functional. This is why the current design is weird a little (but probably easy to fix, for example by adding a new method `is_present_and_functional()` that would be used by `require()` and in the sagemath library.)

What I realised today in #33092#comment:20 is that JoinFeature currently does not follow the same behavior with respect to `is_present` vs `is_functional`. Instead, it follows what we would be saying logically: a feature may be present but not functional.



---

archive/issue_comments_500732.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 slabbe]:\n> Ok, this is how I understood the feature code up to today, but the meaning of `is_present` vs `is_functional` always perturbed me.\n\n\nI'd propose to rename `is_present` to `is_present_and_functional` and `is_functional` to `_is_functional`. I agree that it's confusing.\n\n> What I realised today in #33092#comment:20 is that JoinFeature currently does not follow the same behavior with respect to `is_present` vs `is_functional`. Instead, it follows what we would be saying logically: a feature may be present but not functional.\n\n\nYes, that is a bug in `JoinFeature`. (Copied over from the `Latte` feature from which it was created.)",
    "created_at": "2022-01-04T20:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500732",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:4'></a>Replying to [comment:3 slabbe]:
> Ok, this is how I understood the feature code up to today, but the meaning of `is_present` vs `is_functional` always perturbed me.


I'd propose to rename `is_present` to `is_present_and_functional` and `is_functional` to `_is_functional`. I agree that it's confusing.

> What I realised today in #33092#comment:20 is that JoinFeature currently does not follow the same behavior with respect to `is_present` vs `is_functional`. Instead, it follows what we would be saying logically: a feature may be present but not functional.


Yes, that is a bug in `JoinFeature`. (Copied over from the `Latte` feature from which it was created.)



---

archive/issue_comments_500733.json:
```json
{
    "body": "<a id='comment:5'></a>I agree with all of the above - except that it's perhaps not necessary to do the renaming `is_present` -> `is_present_and_functional`",
    "created_at": "2022-01-04T23:35:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500733",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>I agree with all of the above - except that it's perhaps not necessary to do the renaming `is_present` -> `is_present_and_functional`



---

archive/issue_comments_500734.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 mkoeppe]:\n> I agree with all of the above - except that it's perhaps not necessary to do the renaming `is_present` -> `is_present_and_functional`\n\n\nI agree, I was thinking the same. When `is_present_and_functional()` return `False`, the first question that comes is whether it is because it is not functional or whether it is not present. Thus the next question to ask is whether `is_present()` return True or False. Thus we need both `is_present_and_functional()` and `is_present()`.\n\nMaybe the `require()` should raise a different type of error when it is not present vs not functional. Currently, when a feature is not functional the error message says the feature is not present which is weird. See #33092#comment:27.",
    "created_at": "2022-01-05T09:48:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500734",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:6'></a>Replying to [comment:5 mkoeppe]:
> I agree with all of the above - except that it's perhaps not necessary to do the renaming `is_present` -> `is_present_and_functional`


I agree, I was thinking the same. When `is_present_and_functional()` return `False`, the first question that comes is whether it is because it is not functional or whether it is not present. Thus the next question to ask is whether `is_present()` return True or False. Thus we need both `is_present_and_functional()` and `is_present()`.

Maybe the `require()` should raise a different type of error when it is not present vs not functional. Currently, when a feature is not functional the error message says the feature is not present which is weird. See #33092#comment:27.



---

archive/issue_comments_500735.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 slabbe]:\n> Replying to [comment:5 mkoeppe]:\n> > I agree with all of the above - except that it's perhaps not necessary to do the renaming `is_present` -> `is_present_and_functional`\n\n> \n> I agree, I was thinking the same. When `is_present_and_functional()` return `False`, the first question that comes is whether it is because it is not functional or whether it is not present. Thus the next question to ask is whether `is_present()` return True or False. Thus we need both `is_present_and_functional()` and `is_present()`.\n\n\nSo, `is_functional` was never meant to be exposed to the user. It should really be protected with a `_`. It is also only meant as a hook for the `Executable` feature. I would not change that. Similarly `_is_present` is not meant to be exposed to the user in any way.\n\nI don't think you need both `is_functional` and `is_present` for the user. I don't think you really need to distinguish why a feature can't be used like that, i.e., in a machine-readable way. What would be your use case? Instead, the checks can return a `FeatureTestResult` to provide a lot of detail why something is not sufficient.\n\n> Maybe the `require()` should raise a different type of error when it is not present vs not functional. Currently, when a feature is not functional the error message says the feature is not present which is weird. See #33092#comment:27.\n\n\nCurrently, require says `not available`. We could change that wording of course. The rest of the error message is pulled out of the `FeatureTestResult` if available.",
    "created_at": "2022-01-05T16:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500735",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:7'></a>Replying to [comment:6 slabbe]:
> Replying to [comment:5 mkoeppe]:
> > I agree with all of the above - except that it's perhaps not necessary to do the renaming `is_present` -> `is_present_and_functional`

> 
> I agree, I was thinking the same. When `is_present_and_functional()` return `False`, the first question that comes is whether it is because it is not functional or whether it is not present. Thus the next question to ask is whether `is_present()` return True or False. Thus we need both `is_present_and_functional()` and `is_present()`.


So, `is_functional` was never meant to be exposed to the user. It should really be protected with a `_`. It is also only meant as a hook for the `Executable` feature. I would not change that. Similarly `_is_present` is not meant to be exposed to the user in any way.

I don't think you need both `is_functional` and `is_present` for the user. I don't think you really need to distinguish why a feature can't be used like that, i.e., in a machine-readable way. What would be your use case? Instead, the checks can return a `FeatureTestResult` to provide a lot of detail why something is not sufficient.

> Maybe the `require()` should raise a different type of error when it is not present vs not functional. Currently, when a feature is not functional the error message says the feature is not present which is weird. See #33092#comment:27.


Currently, require says `not available`. We could change that wording of course. The rest of the error message is pulled out of the `FeatureTestResult` if available.



---

archive/issue_comments_500736.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 saraedum]:\n> I don't think you need both `is_functional` and `is_present` for the user. I don't think you really need to distinguish why a feature can't be used like that, i.e., in a machine-readable way. What would be your use case? Instead, the checks can return a `FeatureTestResult` to provide a lot of detail why something is not sufficient.\n\n\n+1",
    "created_at": "2022-01-05T18:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500736",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Replying to [comment:7 saraedum]:
> I don't think you need both `is_functional` and `is_present` for the user. I don't think you really need to distinguish why a feature can't be used like that, i.e., in a machine-readable way. What would be your use case? Instead, the checks can return a `FeatureTestResult` to provide a lot of detail why something is not sufficient.


+1



---

archive/issue_comments_500737.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:7 saraedum]:\n> Replying to [comment:6 slabbe]:\n> > Maybe the `require()` should raise a different type of error when it is not present vs not functional. Currently, when a feature is not functional the error message says the feature is not present which is weird. See #33092#comment:27.\n\n> \n> Currently, require says `not available`. We could change that wording of course. The rest of the error message is pulled out of the `FeatureTestResult` if available.\n\n\nWell, the full context of that line is `FeatureNotPresentError: imagemagick is not available.` When I read this and I try to interpret it, I understand that the command `convert` was simply not found on the machine. This is not the information that we want to give. The situation we have here is more tricky. The `convert` is available, the problem is that it does not work well. And here we should not say to the user \"here is how to install convert\" as we do currently.\n\nOr, maybe, I am wrong on the meaning of the word `feature` or the word `present`? For you, what is the definition of a feature? For example, when `ffmpeg` is found in the PATH but can't produce a gif from a png. Is `ffmpeg` a feature? or rather `ffmpeg` + some garenty that it can do something? For me, in this case, the feature `ffmpeg` is present but it is not functional. Therefore we should not raise a `FeatureNotPresentError` and tell the user to install the feature, but rather raise a `FeatureNotFunctionalError` and tell some more meaningfull message to the user which needs to deal with this tricky situation.",
    "created_at": "2022-01-08T14:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500737",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:9'></a>Replying to [comment:7 saraedum]:
> Replying to [comment:6 slabbe]:
> > Maybe the `require()` should raise a different type of error when it is not present vs not functional. Currently, when a feature is not functional the error message says the feature is not present which is weird. See #33092#comment:27.

> 
> Currently, require says `not available`. We could change that wording of course. The rest of the error message is pulled out of the `FeatureTestResult` if available.


Well, the full context of that line is `FeatureNotPresentError: imagemagick is not available.` When I read this and I try to interpret it, I understand that the command `convert` was simply not found on the machine. This is not the information that we want to give. The situation we have here is more tricky. The `convert` is available, the problem is that it does not work well. And here we should not say to the user "here is how to install convert" as we do currently.

Or, maybe, I am wrong on the meaning of the word `feature` or the word `present`? For you, what is the definition of a feature? For example, when `ffmpeg` is found in the PATH but can't produce a gif from a png. Is `ffmpeg` a feature? or rather `ffmpeg` + some garenty that it can do something? For me, in this case, the feature `ffmpeg` is present but it is not functional. Therefore we should not raise a `FeatureNotPresentError` and tell the user to install the feature, but rather raise a `FeatureNotFunctionalError` and tell some more meaningfull message to the user which needs to deal with this tricky situation.



---

archive/issue_comments_500738.json:
```json
{
    "body": "<a id='comment:10'></a>Given that features map to `optional` tags, we should avoid semantics more complicated than \"present\" vs. \"not present\".",
    "created_at": "2022-01-09T18:40:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500738",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>Given that features map to `optional` tags, we should avoid semantics more complicated than "present" vs. "not present".



---

archive/issue_comments_500739.json:
```json
{
    "body": "<a id='comment:11'></a>If there is an actual use case for distinguishing different levels of \"presence\" for a feature (present, functional, awesome, spiffy) - then it would be clearer to actually define separate features for these levels.",
    "created_at": "2022-01-09T18:44:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500739",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>If there is an actual use case for distinguishing different levels of "presence" for a feature (present, functional, awesome, spiffy) - then it would be clearer to actually define separate features for these levels.



---

archive/issue_comments_500740.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:9 slabbe]:\n> we should not raise a `FeatureNotPresentError` and tell the user to install the feature, but rather raise a `FeatureNotFunctionalError` and tell some more meaningful message to the user which needs to deal with this tricky situation.\n\n\n+1 on better messages where possible, but I don't think it's useful to have a separate exception class.",
    "created_at": "2022-01-09T18:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500740",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Replying to [comment:9 slabbe]:
> we should not raise a `FeatureNotPresentError` and tell the user to install the feature, but rather raise a `FeatureNotFunctionalError` and tell some more meaningful message to the user which needs to deal with this tricky situation.


+1 on better messages where possible, but I don't think it's useful to have a separate exception class.



---

archive/issue_comments_500741.json:
```json
{
    "body": "<a id='comment:13'></a>Thanks for the answers. I agree to keep it simple and binary YES/NO. I do not have use cases for more levels of presence.\n\nI allow myself to ask whether `is_present()` is still the good yes/no question we want to ask with the current design? Maybe a better name for it exists? Possibly `is_present_and_functional()` as suggested earlier? or something else?\n\nI agree that my main point boils down to give good information to the user when `require()` fails.",
    "created_at": "2022-01-09T21:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500741",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:13'></a>Thanks for the answers. I agree to keep it simple and binary YES/NO. I do not have use cases for more levels of presence.

I allow myself to ask whether `is_present()` is still the good yes/no question we want to ask with the current design? Maybe a better name for it exists? Possibly `is_present_and_functional()` as suggested earlier? or something else?

I agree that my main point boils down to give good information to the user when `require()` fails.



---

archive/issue_comments_500742.json:
```json
{
    "body": "<a id='comment:14'></a>Maybe rename `is_functional` to `_is_functional\nand `is_present` to `is_functional`?",
    "created_at": "2022-01-12T09:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500742",
    "user": "https://github.com/slel"
}
```

<a id='comment:14'></a>Maybe rename `is_functional` to `_is_functional
and `is_present` to `is_functional`?



---

archive/issue_events_087501.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-12T17:35:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33114#event-87501"
}
```



---

archive/issue_comments_500743.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:14 slelievre]:\n> Maybe rename `is_functional` to `_is_functional\n> and `is_present` to `is_functional`?\n\n\nPersonaly, I don't disagree.",
    "created_at": "2022-01-13T08:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500743",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:16'></a>Replying to [comment:14 slelievre]:
> Maybe rename `is_functional` to `_is_functional
> and `is_present` to `is_functional`?


Personaly, I don't disagree.



---

archive/issue_comments_500744.json:
```json
{
    "body": "<a id='comment:19'></a>Here's a minimal change to improve the situation.\n\n---\nLast 10 new commits:",
    "created_at": "2022-03-06T00:58:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500744",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>Here's a minimal change to improve the situation.

---
Last 10 new commits:



---

archive/issue_comments_500745.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-03-06T00:58:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500745",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_500746.json:
```json
{
    "body": "<a id='comment:20'></a>(Last 2 commits only; it is on top of #31292)",
    "created_at": "2022-03-06T00:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500746",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>(Last 2 commits only; it is on top of #31292)



---

archive/issue_comments_500747.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-03-06T01:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500747",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_500748.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-06T01:03:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500748",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_500749.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-03-06T01:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500749",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_500750.json:
```json
{
    "body": "<a id='comment:24'></a>(Last 4 commits only; it's on top of #31292.)",
    "created_at": "2022-03-06T01:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500750",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>(Last 4 commits only; it's on top of #31292.)



---

archive/issue_comments_500751.json:
```json
{
    "body": "<a id='comment:26'></a>Let's get this in please",
    "created_at": "2022-03-25T16:37:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500751",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>Let's get this in please



---

archive/issue_comments_500752.json:
```json
{
    "body": "<a id='comment:27'></a>works for me. Thanks for this improvement.\n\nI think a next step further is, as suggested in comment:14, to rename `is_functional` to `_is_functional` since only `is_present` is supposed to be used from outside.",
    "created_at": "2022-03-25T17:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500752",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:27'></a>works for me. Thanks for this improvement.

I think a next step further is, as suggested in comment:14, to rename `is_functional` to `_is_functional` since only `is_present` is supposed to be used from outside.



---

archive/issue_comments_500753.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-03-25T17:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500753",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_500754.json:
```json
{
    "body": "<a id='comment:28'></a>Thanks!",
    "created_at": "2022-03-25T17:38:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500754",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>Thanks!



---

archive/issue_comments_500755.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-03-30T22:33:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500755",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_087502.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-30T22:33:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33114#event-87502"
}
```



---

archive/issue_comments_500756.json:
```json
{
    "body": "<a id='comment:30'></a>updated description with choices made in this ticket",
    "created_at": "2022-03-31T09:25:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500756",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:30'></a>updated description with choices made in this ticket



---

archive/issue_comments_500757.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -4,6 +4,12 @@\n - why \\`Feature.require()\\` does not check that \\`is_functional()\\` is True?\n - should \\`is_present()\\` always return False when \\`is_functional\\` return False (even if the vocabulary that is used should logically allow it)?\n \n+Choices made in this ticket:\n+\n+- only \\`is_present()\\` should be called from outside, it always checks that \\`is_functional()\\` returns True.\n+- A next step further not done in this ticket is, as suggested in comment:14, to rename \\`is_functional\\` to \\`_is_functional\\` since only is_present is supposed to be used from outside. \n+\n+\n Comment: 1\n \n Issue created by migration from https://trac.sagemath.org/ticket/33114\n```\n",
    "created_at": "2022-03-31T09:25:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500757",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -4,6 +4,12 @@
 - why \`Feature.require()\` does not check that \`is_functional()\` is True?
 - should \`is_present()\` always return False when \`is_functional\` return False (even if the vocabulary that is used should logically allow it)?
 
+Choices made in this ticket:
+
+- only \`is_present()\` should be called from outside, it always checks that \`is_functional()\` returns True.
+- A next step further not done in this ticket is, as suggested in comment:14, to rename \`is_functional\` to \`_is_functional\` since only is_present is supposed to be used from outside. 
+
+
 Comment: 1
 
 Issue created by migration from https://trac.sagemath.org/ticket/33114
```




---

archive/issue_comments_500758.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,14 @@\n+(from slabbe in #33092?replyto=23#comment:23)\n+\n+Maybe changes needs to be done with respect to \\`is_present()\\`, \\`is_functional()\\` and \\`require()\\`. In particular, I have the following questions for \\`@\\`mkoeppe:\n+- why \\`Feature.require()\\` does not check that \\`is_functional()\\` is True?\n+- should \\`is_present()\\` always return False when \\`is_functional\\` return False (even if the vocabulary that is used should logically allow it)?\n+\n+Choices made in this ticket:\n+\n+- only \\`is_present()\\` should be called from outside, it always checks that \\`is_functional()\\` returns True.\n+- \\`require()\\` method only calls \\`is_present()\\`\n+- A next step further not done in this ticket is, as suggested in comment:14, to rename \\`is_functional\\` to \\`_is_functional\\` since only is_present is supposed to be used from outside. \n \n \n Comment: 1\n```\n",
    "created_at": "2022-03-31T09:27:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500758",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,14 @@
+(from slabbe in #33092?replyto=23#comment:23)
+
+Maybe changes needs to be done with respect to \`is_present()\`, \`is_functional()\` and \`require()\`. In particular, I have the following questions for \`@\`mkoeppe:
+- why \`Feature.require()\` does not check that \`is_functional()\` is True?
+- should \`is_present()\` always return False when \`is_functional\` return False (even if the vocabulary that is used should logically allow it)?
+
+Choices made in this ticket:
+
+- only \`is_present()\` should be called from outside, it always checks that \`is_functional()\` returns True.
+- \`require()\` method only calls \`is_present()\`
+- A next step further not done in this ticket is, as suggested in comment:14, to rename \`is_functional\` to \`_is_functional\` since only is_present is supposed to be used from outside. 
 
 
 Comment: 1
```




---

archive/issue_comments_500759.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,25 @@\n+(addressing slabbe's questions from ticket:33092#comment:23)\n+\n+Some questions arise with respect to \\`is_present()\\`,\n+\\`is_functional()\\` and \\`require()\\`:\n+\n+- why does \\`Feature.require()\\` not check\n+  that \\`is_functional()\\` is \\`True\\`?\n+- should \\`is_present()\\` always return \\`False\\`\n+  when \\`is_functional\\` returns \\`False\\` (while\n+  the method names suggest \\`is_present\\` could\n+  be \\`True\\` while \\`is_functional\\` is \\`False\\`)?\n+\n+Choices made in this ticket:\n+\n+- only \\`is_present()\\` should be called from outside\n+- it always checks that \\`is_functional()\\` returns True\n+- the \\`require()\\` method only calls \\`is_present()\\`\n+\n+A further step, not done in this ticket, would be,\n+as suggested in comment:14, to rename \\`is_functional\\`\n+to \\`_is_functional\\`, since only \\`is_present\\` is supposed\n+to be used from outside. \n \n \n Comment: 1\n```\n",
    "created_at": "2022-03-31T09:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33114#issuecomment-500759",
    "user": "https://github.com/slel"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,25 @@
+(addressing slabbe's questions from ticket:33092#comment:23)
+
+Some questions arise with respect to \`is_present()\`,
+\`is_functional()\` and \`require()\`:
+
+- why does \`Feature.require()\` not check
+  that \`is_functional()\` is \`True\`?
+- should \`is_present()\` always return \`False\`
+  when \`is_functional\` returns \`False\` (while
+  the method names suggest \`is_present\` could
+  be \`True\` while \`is_functional\` is \`False\`)?
+
+Choices made in this ticket:
+
+- only \`is_present()\` should be called from outside
+- it always checks that \`is_functional()\` returns True
+- the \`require()\` method only calls \`is_present()\`
+
+A further step, not done in this ticket, would be,
+as suggested in comment:14, to rename \`is_functional\`
+to \`_is_functional\`, since only \`is_present\` is supposed
+to be used from outside. 
 
 
 Comment: 1
```

