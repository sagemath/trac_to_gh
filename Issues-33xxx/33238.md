# Issue 33238: a bijectionist's toolkit

archive/issues_033001.json:
```json
{
    "body": "We provide a toolkit for the combinatorialist to help find functions (\"statistics\") `s: A -> Z` and bijections `A -> B` given sequences of finite sets `A` and `B` that satisfy various constraints.\n\nCC:  stumpc5 @tscrim @fchapoton\n\nBranch: [u/mantepse/a_bijectionist_s_toolkit](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/a_bijectionist_s_toolkit)\n\nCommit: [ec3271c0e0d79727e2f5f80867bcb253eb6a639e](https://github.com/sagemath/sagetrac-mirror/commit/ec3271c0e0d79727e2f5f80867bcb253eb6a639e)\n\nAuthor: Alexander Grosz, Tobias Kietreiber, Stephan Pfannerer, Martin Rubey\n\nStatus: needs_review\n\nIssue created by migration from https://trac.sagemath.org/ticket/33238\n\n",
    "created_at": "2022-01-28T10:16:02Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "a bijectionist's toolkit",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33238",
    "user": "https://github.com/mantepse"
}
```
We provide a toolkit for the combinatorialist to help find functions ("statistics") `s: A -> Z` and bijections `A -> B` given sequences of finite sets `A` and `B` that satisfy various constraints.

CC:  stumpc5 @tscrim @fchapoton

Branch: [u/mantepse/a_bijectionist_s_toolkit](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/a_bijectionist_s_toolkit)

Commit: [ec3271c0e0d79727e2f5f80867bcb253eb6a639e](https://github.com/sagemath/sagetrac-mirror/commit/ec3271c0e0d79727e2f5f80867bcb253eb6a639e)

Author: Alexander Grosz, Tobias Kietreiber, Stephan Pfannerer, Martin Rubey

Status: needs_review

Issue created by migration from https://trac.sagemath.org/ticket/33238





---

archive/issue_events_098758.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T04:32:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33238#event-98758"
}
```



---

archive/issue_events_098759.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33238#event-98759"
}
```



---

archive/issue_events_098760.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33238#event-98760"
}
```



---

archive/issue_comments_663082.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mantepse/a_bijectionist_s_toolkit\"",
    "created_at": "2022-10-18T12:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663082",
    "user": "https://github.com/mantepse"
}
```

Changing branch from "" to "u/mantepse/a_bijectionist_s_toolkit"



---

archive/issue_comments_663083.json:
```json
{
    "body": "<a id='comment:4'></a>\nComments welcome!  In particular, it would be wonderful to find more interesting applications.  \n\nIn short: given two finite sets `A` and `B`, a statistic `tau: B -> Z`, and a set partition `P` of `A`, the program finds all possible statistics `s: A -> Z` which have the same distribution as `tau` but are constant on the blocks of `P`.\n\nThere is still some ongoing work. In particular, we try to implement a cache of solutions, which is checked for counterexamples before asking the solver to produce a counterexample from scratch.\n\n---\nNew commits:\n|                                                                                                                                          |                |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------|\n|[6d7ab9c](https://github.com/sagemath/sagetrac-mirror/commit/6d7ab9c14e94bffa959e9c310ee3d16529006d77)|`initial commit`|",
    "created_at": "2022-10-18T13:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663083",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:4'></a>
Comments welcome!  In particular, it would be wonderful to find more interesting applications.  

In short: given two finite sets `A` and `B`, a statistic `tau: B -> Z`, and a set partition `P` of `A`, the program finds all possible statistics `s: A -> Z` which have the same distribution as `tau` but are constant on the blocks of `P`.

There is still some ongoing work. In particular, we try to implement a cache of solutions, which is checked for counterexamples before asking the solver to produce a counterexample from scratch.

---
New commits:
|                                                                                                                                          |                |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------|
|[6d7ab9c](https://github.com/sagemath/sagetrac-mirror/commit/6d7ab9c14e94bffa959e9c310ee3d16529006d77)|`initial commit`|



---

archive/issue_comments_663084.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2022-10-18T13:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663084",
    "user": "https://github.com/mantepse"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_663085.json:
```json
{
    "body": "Changing commit from \"\" to \"6d7ab9c14e94bffa959e9c310ee3d16529006d77\"",
    "created_at": "2022-10-18T13:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663085",
    "user": "https://github.com/mantepse"
}
```

Changing commit from "" to "6d7ab9c14e94bffa959e9c310ee3d16529006d77"



---

archive/issue_comments_663086.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[6149eb2](https://github.com/sagemath/sagetrac-mirror/commit/6149eb25ff2301cd9ac7f41f8c2c6a6da367dccc)|`make the linter happier`|",
    "created_at": "2022-10-18T13:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663086",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[6149eb2](https://github.com/sagemath/sagetrac-mirror/commit/6149eb25ff2301cd9ac7f41f8c2c6a6da367dccc)|`make the linter happier`|



---

archive/issue_comments_663087.json:
```json
{
    "body": "Changing commit from \"6d7ab9c14e94bffa959e9c310ee3d16529006d77\" to \"6149eb25ff2301cd9ac7f41f8c2c6a6da367dccc\"",
    "created_at": "2022-10-18T13:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663087",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6d7ab9c14e94bffa959e9c310ee3d16529006d77" to "6149eb25ff2301cd9ac7f41f8c2c6a6da367dccc"



---

archive/issue_comments_663088.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[9d4bfb9](https://github.com/sagemath/sagetrac-mirror/commit/9d4bfb97b1667fc7fc7e58527a9d8beae9e1f621)|`remove useless assignment`|",
    "created_at": "2022-10-18T16:10:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663088",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[9d4bfb9](https://github.com/sagemath/sagetrac-mirror/commit/9d4bfb97b1667fc7fc7e58527a9d8beae9e1f621)|`remove useless assignment`|



---

archive/issue_comments_663089.json:
```json
{
    "body": "Changing commit from \"6149eb25ff2301cd9ac7f41f8c2c6a6da367dccc\" to \"9d4bfb97b1667fc7fc7e58527a9d8beae9e1f621\"",
    "created_at": "2022-10-18T16:10:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663089",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6149eb25ff2301cd9ac7f41f8c2c6a6da367dccc" to "9d4bfb97b1667fc7fc7e58527a9d8beae9e1f621"



---

archive/issue_comments_663090.json:
```json
{
    "body": "Changing commit from \"9d4bfb97b1667fc7fc7e58527a9d8beae9e1f621\" to \"6ee34e1d761af4b8ec23c721a12a0d123318661a\"",
    "created_at": "2022-10-18T22:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663090",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9d4bfb97b1667fc7fc7e58527a9d8beae9e1f621" to "6ee34e1d761af4b8ec23c721a12a0d123318661a"



---

archive/issue_comments_663091.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[6ee34e1](https://github.com/sagemath/sagetrac-mirror/commit/6ee34e1d761af4b8ec23c721a12a0d123318661a)|`make initialisation more efficient`|",
    "created_at": "2022-10-18T22:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663091",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[6ee34e1](https://github.com/sagemath/sagetrac-mirror/commit/6ee34e1d761af4b8ec23c721a12a0d123318661a)|`make initialisation more efficient`|



---

archive/issue_comments_663092.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[1a14bcf](https://github.com/sagemath/sagetrac-mirror/commit/1a14bcfcbd8202fb81481a0017c1df0974547797)|`consistently name variable`|",
    "created_at": "2022-10-18T22:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663092",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[1a14bcf](https://github.com/sagemath/sagetrac-mirror/commit/1a14bcfcbd8202fb81481a0017c1df0974547797)|`consistently name variable`|



---

archive/issue_comments_663093.json:
```json
{
    "body": "Changing commit from \"6ee34e1d761af4b8ec23c721a12a0d123318661a\" to \"1a14bcfcbd8202fb81481a0017c1df0974547797\"",
    "created_at": "2022-10-18T22:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663093",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6ee34e1d761af4b8ec23c721a12a0d123318661a" to "1a14bcfcbd8202fb81481a0017c1df0974547797"



---

archive/issue_comments_663094.json:
```json
{
    "body": "Changing commit from \"1a14bcfcbd8202fb81481a0017c1df0974547797\" to \"0901ec7a2dd6de58de2307489e844dd2978d79bb\"",
    "created_at": "2022-10-19T15:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663094",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1a14bcfcbd8202fb81481a0017c1df0974547797" to "0901ec7a2dd6de58de2307489e844dd2978d79bb"



---

archive/issue_comments_663095.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|\n|[0901ec7](https://github.com/sagemath/sagetrac-mirror/commit/0901ec7a2dd6de58de2307489e844dd2978d79bb)|`slightly improve documentation`|",
    "created_at": "2022-10-19T15:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663095",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
|[0901ec7](https://github.com/sagemath/sagetrac-mirror/commit/0901ec7a2dd6de58de2307489e844dd2978d79bb)|`slightly improve documentation`|



---

archive/issue_comments_663096.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|\n|[c39d653](https://github.com/sagemath/sagetrac-mirror/commit/c39d653071d1d00b73fca4bf961bab8d4a7ba360)|`non-copying intersection, to save memory when there are almost no restrictions on the values of a block`|",
    "created_at": "2022-11-02T09:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663096",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|
|[c39d653](https://github.com/sagemath/sagetrac-mirror/commit/c39d653071d1d00b73fca4bf961bab8d4a7ba360)|`non-copying intersection, to save memory when there are almost no restrictions on the values of a block`|



---

archive/issue_comments_663097.json:
```json
{
    "body": "Changing commit from \"0901ec7a2dd6de58de2307489e844dd2978d79bb\" to \"c39d653071d1d00b73fca4bf961bab8d4a7ba360\"",
    "created_at": "2022-11-02T09:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663097",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0901ec7a2dd6de58de2307489e844dd2978d79bb" to "c39d653071d1d00b73fca4bf961bab8d4a7ba360"



---

archive/issue_comments_663098.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|\n|[2f0bb0e](https://github.com/sagemath/sagetrac-mirror/commit/2f0bb0e7fd9620f47ece110e2364295205923ecb)|`Merge branch 'develop' of trac.sagemath.org:sage into t/33238/a_bijectionist_s_toolkit`|",
    "created_at": "2022-12-05T08:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663098",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|
|[2f0bb0e](https://github.com/sagemath/sagetrac-mirror/commit/2f0bb0e7fd9620f47ece110e2364295205923ecb)|`Merge branch 'develop' of trac.sagemath.org:sage into t/33238/a_bijectionist_s_toolkit`|



---

archive/issue_comments_663099.json:
```json
{
    "body": "Changing commit from \"c39d653071d1d00b73fca4bf961bab8d4a7ba360\" to \"2f0bb0e7fd9620f47ece110e2364295205923ecb\"",
    "created_at": "2022-12-05T08:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663099",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c39d653071d1d00b73fca4bf961bab8d4a7ba360" to "2f0bb0e7fd9620f47ece110e2364295205923ecb"



---

archive/issue_comments_663100.json:
```json
{
    "body": "Changing commit from \"2f0bb0e7fd9620f47ece110e2364295205923ecb\" to \"321ba43b09501549f459a0ec0e70349ade428c92\"",
    "created_at": "2022-12-05T08:41:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663100",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2f0bb0e7fd9620f47ece110e2364295205923ecb" to "321ba43b09501549f459a0ec0e70349ade428c92"



---

archive/issue_comments_663101.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[321ba43](https://github.com/sagemath/sagetrac-mirror/commit/321ba43b09501549f459a0ec0e70349ade428c92)|`start to cache solutions`|",
    "created_at": "2022-12-05T08:41:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663101",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[321ba43](https://github.com/sagemath/sagetrac-mirror/commit/321ba43b09501549f459a0ec0e70349ade428c92)|`start to cache solutions`|



---

archive/issue_comments_663102.json:
```json
{
    "body": "Changing commit from \"321ba43b09501549f459a0ec0e70349ade428c92\" to \"306395cf92435f6abc1656c7677cbb68ef7b02b2\"",
    "created_at": "2022-12-21T15:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663102",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "321ba43b09501549f459a0ec0e70349ade428c92" to "306395cf92435f6abc1656c7677cbb68ef7b02b2"



---

archive/issue_comments_663103.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|\n|[306395c](https://github.com/sagemath/sagetrac-mirror/commit/306395cf92435f6abc1656c7677cbb68ef7b02b2)|`finish implementation of cache`|",
    "created_at": "2022-12-21T15:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663103",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
|[306395c](https://github.com/sagemath/sagetrac-mirror/commit/306395cf92435f6abc1656c7677cbb68ef7b02b2)|`finish implementation of cache`|



---

archive/issue_comments_663104.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|\n|[1a8e564](https://github.com/sagemath/sagetrac-mirror/commit/1a8e564b8fa42f37f52bfbc8706c56c1ce2e5029)|`Merge branch 'develop' of trac.sagemath.org:sage into t/33238/a_bijectionist_s_toolkit`|\n|[1ac0978](https://github.com/sagemath/sagetrac-mirror/commit/1ac09787fd03c114725a775cdf22b6e14f108446)|`add some documentation and doctests, slightly simplify code`|",
    "created_at": "2022-12-21T23:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663104",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|
|[1a8e564](https://github.com/sagemath/sagetrac-mirror/commit/1a8e564b8fa42f37f52bfbc8706c56c1ce2e5029)|`Merge branch 'develop' of trac.sagemath.org:sage into t/33238/a_bijectionist_s_toolkit`|
|[1ac0978](https://github.com/sagemath/sagetrac-mirror/commit/1ac09787fd03c114725a775cdf22b6e14f108446)|`add some documentation and doctests, slightly simplify code`|



---

archive/issue_comments_663105.json:
```json
{
    "body": "Changing commit from \"306395cf92435f6abc1656c7677cbb68ef7b02b2\" to \"1ac09787fd03c114725a775cdf22b6e14f108446\"",
    "created_at": "2022-12-21T23:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663105",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "306395cf92435f6abc1656c7677cbb68ef7b02b2" to "1ac09787fd03c114725a775cdf22b6e14f108446"



---

archive/issue_comments_663106.json:
```json
{
    "body": "<a id='comment:15'></a>\nThere are still some doctests and some documentation missing, but otherwise this is ready.",
    "created_at": "2022-12-21T23:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663106",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:15'></a>
There are still some doctests and some documentation missing, but otherwise this is ready.



---

archive/issue_comments_663107.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[47945ac](https://github.com/sagemath/sagetrac-mirror/commit/47945ac2bbdbd927a6aaef8c72ead62d2922c94c)|`add missing documentation in table of contents`|",
    "created_at": "2022-12-22T00:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663107",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[47945ac](https://github.com/sagemath/sagetrac-mirror/commit/47945ac2bbdbd927a6aaef8c72ead62d2922c94c)|`add missing documentation in table of contents`|



---

archive/issue_comments_663108.json:
```json
{
    "body": "Changing commit from \"1ac09787fd03c114725a775cdf22b6e14f108446\" to \"47945ac2bbdbd927a6aaef8c72ead62d2922c94c\"",
    "created_at": "2022-12-22T00:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663108",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1ac09787fd03c114725a775cdf22b6e14f108446" to "47945ac2bbdbd927a6aaef8c72ead62d2922c94c"



---

archive/issue_comments_663109.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[19c3d8f](https://github.com/sagemath/sagetrac-mirror/commit/19c3d8fdc82471993ab800923eaeb2494c7551c7)|`mark doctests as long, slightly simplify logic`|",
    "created_at": "2022-12-22T10:05:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663109",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[19c3d8f](https://github.com/sagemath/sagetrac-mirror/commit/19c3d8fdc82471993ab800923eaeb2494c7551c7)|`mark doctests as long, slightly simplify logic`|



---

archive/issue_comments_663110.json:
```json
{
    "body": "Changing commit from \"47945ac2bbdbd927a6aaef8c72ead62d2922c94c\" to \"19c3d8fdc82471993ab800923eaeb2494c7551c7\"",
    "created_at": "2022-12-22T10:05:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663110",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "47945ac2bbdbd927a6aaef8c72ead62d2922c94c" to "19c3d8fdc82471993ab800923eaeb2494c7551c7"



---

archive/issue_comments_663111.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[eca857e](https://github.com/sagemath/sagetrac-mirror/commit/eca857ebb1c8f29abd4e7afb7f386f98b18584d5)|`slightly simplify, more doctests`|",
    "created_at": "2022-12-22T22:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663111",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[eca857e](https://github.com/sagemath/sagetrac-mirror/commit/eca857ebb1c8f29abd4e7afb7f386f98b18584d5)|`slightly simplify, more doctests`|



---

archive/issue_comments_663112.json:
```json
{
    "body": "Changing commit from \"19c3d8fdc82471993ab800923eaeb2494c7551c7\" to \"eca857ebb1c8f29abd4e7afb7f386f98b18584d5\"",
    "created_at": "2022-12-22T22:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663112",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "19c3d8fdc82471993ab800923eaeb2494c7551c7" to "eca857ebb1c8f29abd4e7afb7f386f98b18584d5"



---

archive/issue_comments_663113.json:
```json
{
    "body": "Changing commit from \"eca857ebb1c8f29abd4e7afb7f386f98b18584d5\" to \"a04d1460832a87550ef18bb1f6767f4240d6230f\"",
    "created_at": "2022-12-22T22:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663113",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "eca857ebb1c8f29abd4e7afb7f386f98b18584d5" to "a04d1460832a87550ef18bb1f6767f4240d6230f"



---

archive/issue_comments_663114.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[a04d146](https://github.com/sagemath/sagetrac-mirror/commit/a04d1460832a87550ef18bb1f6767f4240d6230f)|`doctest _find_counter_example`|",
    "created_at": "2022-12-22T22:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663114",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[a04d146](https://github.com/sagemath/sagetrac-mirror/commit/a04d1460832a87550ef18bb1f6767f4240d6230f)|`doctest _find_counter_example`|



---

archive/issue_comments_663115.json:
```json
{
    "body": "Changing commit from \"a04d1460832a87550ef18bb1f6767f4240d6230f\" to \"3508426a9d10c3c904f998cdfe55447c4753cf5c\"",
    "created_at": "2022-12-22T23:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663115",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a04d1460832a87550ef18bb1f6767f4240d6230f" to "3508426a9d10c3c904f998cdfe55447c4753cf5c"



---

archive/issue_comments_663116.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------|\n|[3508426](https://github.com/sagemath/sagetrac-mirror/commit/3508426a9d10c3c904f998cdfe55447c4753cf5c)|`doctest add_distribution_constraints and add_intertwing_relation_constraints`|",
    "created_at": "2022-12-22T23:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663116",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------|
|[3508426](https://github.com/sagemath/sagetrac-mirror/commit/3508426a9d10c3c904f998cdfe55447c4753cf5c)|`doctest add_distribution_constraints and add_intertwing_relation_constraints`|



---

archive/issue_comments_663117.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|\n|[0ac618c](https://github.com/sagemath/sagetrac-mirror/commit/0ac618c968e976d19fd2c61c2462611ce8f0cc3d)|`doctest _preprocess_intertwining_relations, _solution, _show_bmilp, _initialize_new_bmilp, _veto_current_solution`|",
    "created_at": "2022-12-22T23:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663117",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|
|[0ac618c](https://github.com/sagemath/sagetrac-mirror/commit/0ac618c968e976d19fd2c61c2462611ce8f0cc3d)|`doctest _preprocess_intertwining_relations, _solution, _show_bmilp, _initialize_new_bmilp, _veto_current_solution`|



---

archive/issue_comments_663118.json:
```json
{
    "body": "Changing commit from \"3508426a9d10c3c904f998cdfe55447c4753cf5c\" to \"0ac618c968e976d19fd2c61c2462611ce8f0cc3d\"",
    "created_at": "2022-12-22T23:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663118",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3508426a9d10c3c904f998cdfe55447c4753cf5c" to "0ac618c968e976d19fd2c61c2462611ce8f0cc3d"



---

archive/issue_comments_663119.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2022-12-22T23:43:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663119",
    "user": "https://github.com/mantepse"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_663120.json:
```json
{
    "body": "<a id='comment:24'></a>\nYou may want to try this with a better IP solver - see #31329 for SCIP",
    "created_at": "2022-12-23T00:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663120",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
You may want to try this with a better IP solver - see #31329 for SCIP



---

archive/issue_comments_663121.json:
```json
{
    "body": "<a id='comment:25'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|\n|[d50b62c](https://github.com/sagemath/sagetrac-mirror/commit/d50b62c2008a96849f99004a4c2ad883fab7d0f2)|`expand docstring of main class`|",
    "created_at": "2022-12-23T08:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663121",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
|[d50b62c](https://github.com/sagemath/sagetrac-mirror/commit/d50b62c2008a96849f99004a4c2ad883fab7d0f2)|`expand docstring of main class`|



---

archive/issue_comments_663122.json:
```json
{
    "body": "Changing commit from \"0ac618c968e976d19fd2c61c2462611ce8f0cc3d\" to \"d50b62c2008a96849f99004a4c2ad883fab7d0f2\"",
    "created_at": "2022-12-23T08:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663122",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0ac618c968e976d19fd2c61c2462611ce8f0cc3d" to "d50b62c2008a96849f99004a4c2ad883fab7d0f2"



---

archive/issue_comments_663123.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [Matthias K\u00f6ppe](#comment%3A24):\n> You may want to try this with a better IP solver - see #31329 for SCIP\n\n\nExcellent, I have now managed to install SCIP, and indeed, many doctests fail :-)\n\nPreviously, I only tested with gurobi (which was much faster), but apparently, we got sloppy during the last few big reorganisations.",
    "created_at": "2022-12-23T12:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663123",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:26'></a>
Replying to [Matthias KÃ¶ppe](#comment%3A24):
> You may want to try this with a better IP solver - see #31329 for SCIP


Excellent, I have now managed to install SCIP, and indeed, many doctests fail :-)

Previously, I only tested with gurobi (which was much faster), but apparently, we got sloppy during the last few big reorganisations.



---

archive/issue_comments_663124.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-12-23T12:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663124",
    "user": "https://github.com/mantepse"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_663125.json:
```json
{
    "body": "Changing commit from \"d50b62c2008a96849f99004a4c2ad883fab7d0f2\" to \"288e3917aaa8a2d56ec45c2137c5f4889842488e\"",
    "created_at": "2022-12-23T15:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663125",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d50b62c2008a96849f99004a4c2ad883fab7d0f2" to "288e3917aaa8a2d56ec45c2137c5f4889842488e"



---

archive/issue_comments_663126.json:
```json
{
    "body": "<a id='comment:28'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|\n|[288e391](https://github.com/sagemath/sagetrac-mirror/commit/288e3917aaa8a2d56ec45c2137c5f4889842488e)|`copy milp instead of adding and removing constraints`|",
    "created_at": "2022-12-23T15:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663126",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|
|[288e391](https://github.com/sagemath/sagetrac-mirror/commit/288e3917aaa8a2d56ec45c2137c5f4889842488e)|`copy milp instead of adding and removing constraints`|



---

archive/issue_comments_663127.json:
```json
{
    "body": "<a id='comment:29'></a>\nWith the simple fix from #31329,[comment:45](#comment%3A45):ticket:31329, this now also seems to work with SCIP.  However, SCIP seems to be much slower, by far.  In particular, GLPK finishes the doctest in line 3157-3171\n\n```\n    sage: As = Bs = [[],\n    ....:            [(1,i,j) for i in [-1,0,1] for j in [-1,1]],\n    ....:            [(2,i,j) for i in [-1,0,1] for j in [-1,1]],\n    ....:            [(3,i,j) for i in [-2,-1,0,1,2] for j in [-1,1]]]\n\n    sage: c1 = lambda a, b: (a[0]+b[0], a[1]*b[1], a[2]*b[2])\n    sage: c2 = lambda a: (a[0], -a[1], a[2])\n\n    sage: bij = Bijectionist(sum(As, []), sum(Bs, []))\n    sage: bij.set_statistics((lambda x: x[0], lambda x: x[0]))\n    sage: bij.set_intertwining_relations((2, c1, c1), (1, c2, c2))\n    sage: l = list(bij.solutions_iterator()); len(l)                            # long time\n    64\n```\nin about 1 minute on my laptop, while SCIP seems to take about an hour.  Is there a way to find out what's going on?  Even finding the first solution takes 25 seconds, vs. 0.3 seconds with GLPK.",
    "created_at": "2022-12-23T15:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663127",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:29'></a>
With the simple fix from #31329,[comment:45](#comment%3A45):ticket:31329, this now also seems to work with SCIP.  However, SCIP seems to be much slower, by far.  In particular, GLPK finishes the doctest in line 3157-3171

```
    sage: As = Bs = [[],
    ....:            [(1,i,j) for i in [-1,0,1] for j in [-1,1]],
    ....:            [(2,i,j) for i in [-1,0,1] for j in [-1,1]],
    ....:            [(3,i,j) for i in [-2,-1,0,1,2] for j in [-1,1]]]

    sage: c1 = lambda a, b: (a[0]+b[0], a[1]*b[1], a[2]*b[2])
    sage: c2 = lambda a: (a[0], -a[1], a[2])

    sage: bij = Bijectionist(sum(As, []), sum(Bs, []))
    sage: bij.set_statistics((lambda x: x[0], lambda x: x[0]))
    sage: bij.set_intertwining_relations((2, c1, c1), (1, c2, c2))
    sage: l = list(bij.solutions_iterator()); len(l)                            # long time
    64
```
in about 1 minute on my laptop, while SCIP seems to take about an hour.  Is there a way to find out what's going on?  Even finding the first solution takes 25 seconds, vs. 0.3 seconds with GLPK.



---

archive/issue_comments_663128.json:
```json
{
    "body": "<a id='comment:30'></a>\nI have found the culprit already - `deepcopy` takes forever:\n\n```\nsage: %prun next(bij.solutions_iterator())\n         54830 function calls (54618 primitive calls) in 25.558 seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n        1   24.908   24.908   24.908   24.908 {method '__deepcopy__' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}\n   ...\n```\nvs.\n\n```\nsage: %prun next(bij.solutions_iterator())\n         53403 function calls (53231 primitive calls) in 0.353 seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n        1    0.123    0.123    0.287    0.287 bijectionist.py:3005(add_intertwining_relation_constraints)\n     4093    0.114    0.000    0.124    0.000 {method 'add_constraint' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}\n        1    0.051    0.051    0.051    0.051 {method 'solve' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}\n     4083    0.021    0.000    0.031    0.000 {built-in method builtins.sum}\n     4372    0.010    0.000    0.010    0.000 <ipython-input-3-f7b4b09ab02e>:1(<lambda>)\n    12008    0.009    0.000    0.009    0.000 bijectionist.py:3068(<genexpr>)\n     4096    0.004    0.000    0.006    0.000 copy.py:66(copy)\n     4082    0.004    0.000    0.004    0.000 {method 'is_zero' of 'sage.numerical.linear_functions.LinearFunction' objects}\n        1    0.003    0.003    0.006    0.006 bijectionist.py:2026(_preprocess_intertwining_relations)\n     4093    0.003    0.000    0.003    0.000 {built-in method builtins.isinstance}\n        1    0.002    0.002    0.003    0.003 bijectionist.py:2892(add_alpha_beta_constraints)\n     4093    0.002    0.000    0.004    0.000 linear_tensor.py:112(is_LinearTensor)\n      194    0.001    0.000    0.001    0.000 bijectionist.py:2671(<genexpr>)\n      628    0.001    0.000    0.001    0.000 {method 'find' of 'sage.sets.disjoint_set.DisjointSet_of_hashables' objects}\n     4098    0.001    0.000    0.001    0.000 {method 'get' of 'dict' objects}\n     4095    0.001    0.000    0.001    0.000 {method 'copy' of 'dict' objects}\n        1    0.001    0.001    0.001    0.001 {method '__deepcopy__' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}\n```",
    "created_at": "2022-12-23T15:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663128",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:30'></a>
I have found the culprit already - `deepcopy` takes forever:

```
sage: %prun next(bij.solutions_iterator())
         54830 function calls (54618 primitive calls) in 25.558 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1   24.908   24.908   24.908   24.908 {method '__deepcopy__' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}
   ...
```
vs.

```
sage: %prun next(bij.solutions_iterator())
         53403 function calls (53231 primitive calls) in 0.353 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.123    0.123    0.287    0.287 bijectionist.py:3005(add_intertwining_relation_constraints)
     4093    0.114    0.000    0.124    0.000 {method 'add_constraint' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}
        1    0.051    0.051    0.051    0.051 {method 'solve' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}
     4083    0.021    0.000    0.031    0.000 {built-in method builtins.sum}
     4372    0.010    0.000    0.010    0.000 <ipython-input-3-f7b4b09ab02e>:1(<lambda>)
    12008    0.009    0.000    0.009    0.000 bijectionist.py:3068(<genexpr>)
     4096    0.004    0.000    0.006    0.000 copy.py:66(copy)
     4082    0.004    0.000    0.004    0.000 {method 'is_zero' of 'sage.numerical.linear_functions.LinearFunction' objects}
        1    0.003    0.003    0.006    0.006 bijectionist.py:2026(_preprocess_intertwining_relations)
     4093    0.003    0.000    0.003    0.000 {built-in method builtins.isinstance}
        1    0.002    0.002    0.003    0.003 bijectionist.py:2892(add_alpha_beta_constraints)
     4093    0.002    0.000    0.004    0.000 linear_tensor.py:112(is_LinearTensor)
      194    0.001    0.000    0.001    0.000 bijectionist.py:2671(<genexpr>)
      628    0.001    0.000    0.001    0.000 {method 'find' of 'sage.sets.disjoint_set.DisjointSet_of_hashables' objects}
     4098    0.001    0.000    0.001    0.000 {method 'get' of 'dict' objects}
     4095    0.001    0.000    0.001    0.000 {method 'copy' of 'dict' objects}
        1    0.001    0.001    0.001    0.001 {method '__deepcopy__' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}
```



---

archive/issue_comments_663129.json:
```json
{
    "body": "<a id='comment:31'></a>\n(I don't know whether copy would suffice for my purpose, but it takes forever, too)\n\nSince this is almost certainly a SCIP problem, I'm going back to needs-review.",
    "created_at": "2022-12-23T15:48:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663129",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:31'></a>
(I don't know whether copy would suffice for my purpose, but it takes forever, too)

Since this is almost certainly a SCIP problem, I'm going back to needs-review.



---

archive/issue_comments_663130.json:
```json
{
    "body": "<a id='comment:32'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[d57c8e5](https://github.com/sagemath/sagetrac-mirror/commit/d57c8e5295144152214c870f3a206ab0dc5a7716)|`derandomize a test, mark example as random`|",
    "created_at": "2022-12-23T16:22:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663130",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[d57c8e5](https://github.com/sagemath/sagetrac-mirror/commit/d57c8e5295144152214c870f3a206ab0dc5a7716)|`derandomize a test, mark example as random`|



---

archive/issue_comments_663131.json:
```json
{
    "body": "Changing commit from \"288e3917aaa8a2d56ec45c2137c5f4889842488e\" to \"d57c8e5295144152214c870f3a206ab0dc5a7716\"",
    "created_at": "2022-12-23T16:22:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663131",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "288e3917aaa8a2d56ec45c2137c5f4889842488e" to "d57c8e5295144152214c870f3a206ab0dc5a7716"



---

archive/issue_comments_663132.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-12-23T16:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663132",
    "user": "https://github.com/mantepse"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_663133.json:
```json
{
    "body": "Changing commit from \"d57c8e5295144152214c870f3a206ab0dc5a7716\" to \"7353fb523075c798dd3afe2cd57108b88909c94a\"",
    "created_at": "2022-12-23T21:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663133",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d57c8e5295144152214c870f3a206ab0dc5a7716" to "7353fb523075c798dd3afe2cd57108b88909c94a"



---

archive/issue_comments_663134.json:
```json
{
    "body": "<a id='comment:34'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[7353fb5](https://github.com/sagemath/sagetrac-mirror/commit/7353fb523075c798dd3afe2cd57108b88909c94a)|`correct typo, remove useless assignment`|",
    "created_at": "2022-12-23T21:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663134",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[7353fb5](https://github.com/sagemath/sagetrac-mirror/commit/7353fb523075c798dd3afe2cd57108b88909c94a)|`correct typo, remove useless assignment`|



---

archive/issue_comments_663135.json:
```json
{
    "body": "<a id='comment:35'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|\n|[db850f0](https://github.com/sagemath/sagetrac-mirror/commit/db850f00bdcea2011ed9194de177fbcbcc8b93d1)|`add and remove constraints instead of copying the whole program`|",
    "created_at": "2022-12-23T22:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663135",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|
|[db850f0](https://github.com/sagemath/sagetrac-mirror/commit/db850f00bdcea2011ed9194de177fbcbcc8b93d1)|`add and remove constraints instead of copying the whole program`|



---

archive/issue_comments_663136.json:
```json
{
    "body": "Changing commit from \"7353fb523075c798dd3afe2cd57108b88909c94a\" to \"db850f00bdcea2011ed9194de177fbcbcc8b93d1\"",
    "created_at": "2022-12-23T22:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663136",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7353fb523075c798dd3afe2cd57108b88909c94a" to "db850f00bdcea2011ed9194de177fbcbcc8b93d1"



---

archive/issue_comments_663137.json:
```json
{
    "body": "Changing commit from \"db850f00bdcea2011ed9194de177fbcbcc8b93d1\" to \"ec3271c0e0d79727e2f5f80867bcb253eb6a639e\"",
    "created_at": "2022-12-23T23:00:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663137",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "db850f00bdcea2011ed9194de177fbcbcc8b93d1" to "ec3271c0e0d79727e2f5f80867bcb253eb6a639e"



---

archive/issue_comments_663138.json:
```json
{
    "body": "<a id='comment:36'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[ec3271c](https://github.com/sagemath/sagetrac-mirror/commit/ec3271c0e0d79727e2f5f80867bcb253eb6a639e)|`fix problem with SCIP, add timings`|",
    "created_at": "2022-12-23T23:00:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663138",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[ec3271c](https://github.com/sagemath/sagetrac-mirror/commit/ec3271c0e0d79727e2f5f80867bcb253eb6a639e)|`fix problem with SCIP, add timings`|



---

archive/issue_comments_663139.json:
```json
{
    "body": "<a id='comment:37'></a>\n\n```\n+            d = minimal_subdistribution.get_values(D)  # a dict from P to multiplicities\n[...]\n+                support = [X[p] for p in P if d[p]]\n```\nI would recommend to use the recently added `convert` parameter of `get_values` https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/mip.html#sage.numerical.mip.MixedIntegerLinearProgram.get_values, which makes such tests much more robust.",
    "created_at": "2022-12-23T23:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33238#issuecomment-663139",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:37'></a>

```
+            d = minimal_subdistribution.get_values(D)  # a dict from P to multiplicities
[...]
+                support = [X[p] for p in P if d[p]]
```
I would recommend to use the recently added `convert` parameter of `get_values` https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/mip.html#sage.numerical.mip.MixedIntegerLinearProgram.get_values, which makes such tests much more robust.
