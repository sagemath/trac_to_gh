# Issue 33253: Ephemeral patchbot on GH Actions

archive/issues_033016.json:
```json
{
    "body": "PR https://github.com/sagemath/sage-patchbot/pull/155 adds a GH Actions workflow to sage-patchbot, which runs the patchbot in a Docker container using one of the pre-built images that our CI pushes to https://github.com/orgs/sagemath/packages?repo_name=sage\n\n\n\nFollow-ups:\n- https://github.com/sagemath/sage-patchbot/pull/156 (fixup)\n\n- https://github.com/sagemath/sage-patchbot/pull/157 (Cygwin)\n\n- Run as a scheduled workflow on GH Actions.  Users who fork the GitHub repo can activate the workflow by depositing a repository secret `SAGE_PATCHBOT_ENVS` of the form `ubuntu-focal-standard ubuntu-hirsute-standard ...`. The workflow would create 1 job per platform listed there\n\n\nCC:  @fchapoton\n\nStatus: needs_review\n\nIssue created by migration from https://trac.sagemath.org/ticket/33253\n\n",
    "created_at": "2022-01-30T23:40:44Z",
    "labels": [
        "component: scripts"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Ephemeral patchbot on GH Actions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33253",
    "user": "https://github.com/mkoeppe"
}
```
PR https://github.com/sagemath/sage-patchbot/pull/155 adds a GH Actions workflow to sage-patchbot, which runs the patchbot in a Docker container using one of the pre-built images that our CI pushes to https://github.com/orgs/sagemath/packages?repo_name=sage



Follow-ups:
- https://github.com/sagemath/sage-patchbot/pull/156 (fixup)

- https://github.com/sagemath/sage-patchbot/pull/157 (Cygwin)

- Run as a scheduled workflow on GH Actions.  Users who fork the GitHub repo can activate the workflow by depositing a repository secret `SAGE_PATCHBOT_ENVS` of the form `ubuntu-focal-standard ubuntu-hirsute-standard ...`. The workflow would create 1 job per platform listed there


CC:  @fchapoton

Status: needs_review

Issue created by migration from https://trac.sagemath.org/ticket/33253





---

archive/issue_comments_502759.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,8 @@\n The patchbot would run as a scheduled workflow on GH Actions.\n \n Users who fork the GitHub repo can activate the workflow by depositing a repository secret `SAGE_PATCHBOT_ENVS` of the form `ubuntu-focal-standard ubuntu-hirsute-standard ...`. The workflow would create 1 job per platform listed there and run the patchbot on a few tickets.\n+\n+https://wiki.sagemath.org/patchbot\n \n Comment: 1\n \n```\n",
    "created_at": "2022-01-31T06:30:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33253#issuecomment-502759",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,8 @@
 The patchbot would run as a scheduled workflow on GH Actions.
 
 Users who fork the GitHub repo can activate the workflow by depositing a repository secret `SAGE_PATCHBOT_ENVS` of the form `ubuntu-focal-standard ubuntu-hirsute-standard ...`. The workflow would create 1 job per platform listed there and run the patchbot on a few tickets.
+
+https://wiki.sagemath.org/patchbot
 
 Comment: 1
 
```




---

archive/issue_comments_502760.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n+The patchbot would run as a scheduled workflow on GH Actions.\n+\n+Users who fork the GitHub repo can activate the workflow by depositing a repository secret `SAGE_PATCHBOT_ENVS` of the form `ubuntu-focal-standard ubuntu-hirsute-standard ...`. The workflow would create 1 job per platform listed there and run the patchbot on a few tickets.\n+\n+https://wiki.sagemath.org/patchbot\n+\n+https://github.com/mkoeppe/sage-patchbot/actions/workflows/run_patchbot.yml\n \n \n Comment: 1\n```\n",
    "created_at": "2022-02-03T21:01:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33253#issuecomment-502760",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,10 @@
+The patchbot would run as a scheduled workflow on GH Actions.
+
+Users who fork the GitHub repo can activate the workflow by depositing a repository secret `SAGE_PATCHBOT_ENVS` of the form `ubuntu-focal-standard ubuntu-hirsute-standard ...`. The workflow would create 1 job per platform listed there and run the patchbot on a few tickets.
+
+https://wiki.sagemath.org/patchbot
+
+https://github.com/mkoeppe/sage-patchbot/actions/workflows/run_patchbot.yml
 
 
 Comment: 1
```




---

archive/issue_comments_502761.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,12 @@\n+The patchbot would run as a scheduled workflow on GH Actions.\n+\n+Users who fork the GitHub repo can activate the workflow by depositing a repository secret `SAGE_PATCHBOT_ENVS` of the form `ubuntu-focal-standard ubuntu-hirsute-standard ...`. The workflow would create 1 job per platform listed there and run the patchbot on a few tickets.\n+\n+https://wiki.sagemath.org/patchbot\n+\n+PR: https://github.com/sagemath/sage-patchbot/pull/155\n+\n+https://github.com/mkoeppe/sage-patchbot/actions/workflows/run_patchbot.yml\n \n \n Comment: 1\n```\n",
    "created_at": "2022-02-04T04:53:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33253#issuecomment-502761",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,12 @@
+The patchbot would run as a scheduled workflow on GH Actions.
+
+Users who fork the GitHub repo can activate the workflow by depositing a repository secret `SAGE_PATCHBOT_ENVS` of the form `ubuntu-focal-standard ubuntu-hirsute-standard ...`. The workflow would create 1 job per platform listed there and run the patchbot on a few tickets.
+
+https://wiki.sagemath.org/patchbot
+
+PR: https://github.com/sagemath/sage-patchbot/pull/155
+
+https://github.com/mkoeppe/sage-patchbot/actions/workflows/run_patchbot.yml
 
 
 Comment: 1
```




---

archive/issue_comments_502762.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,9 @@\n+PR https://github.com/sagemath/sage-patchbot/pull/155 adds a GH Actions workflow to sage-patchbot, which runs the patchbot in a Docker container using one of the pre-built images that our CI pushes to https://github.com/orgs/sagemath/packages?repo_name=sage\n+\n+\n+\n+Follow-up:\n+- Run as a scheduled workflow on GH Actions.  Users who fork the GitHub repo can activate the workflow by depositing a repository secret `SAGE_PATCHBOT_ENVS` of the form `ubuntu-focal-standard ubuntu-hirsute-standard ...`. The workflow would create 1 job per platform listed there\n \n \n Comment: 1\n```\n",
    "created_at": "2022-02-04T05:14:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33253#issuecomment-502762",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,9 @@
+PR https://github.com/sagemath/sage-patchbot/pull/155 adds a GH Actions workflow to sage-patchbot, which runs the patchbot in a Docker container using one of the pre-built images that our CI pushes to https://github.com/orgs/sagemath/packages?repo_name=sage
+
+
+
+Follow-up:
+- Run as a scheduled workflow on GH Actions.  Users who fork the GitHub repo can activate the workflow by depositing a repository secret `SAGE_PATCHBOT_ENVS` of the form `ubuntu-focal-standard ubuntu-hirsute-standard ...`. The workflow would create 1 job per platform listed there
 
 
 Comment: 1
```




---

archive/issue_comments_502763.json:
```json
{
    "body": "<a id='comment:5'></a>Is this really necessary? It's running one ci tool in another one. I would say its more flexible to convert the patchbot steps into github workflows, as we have already done with the linter and #33263. This should replace the patchbots completely in the long term.",
    "created_at": "2022-02-05T09:10:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33253#issuecomment-502763",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:5'></a>Is this really necessary? It's running one ci tool in another one. I would say its more flexible to convert the patchbot steps into github workflows, as we have already done with the linter and #33263. This should replace the patchbots completely in the long term.



---

archive/issue_comments_502764.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 gh-tobiasdiez]:\n> It's running one ci tool in another one.\n\n\nGH Actions is not a CI, it runs CIs",
    "created_at": "2022-02-05T15:54:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33253#issuecomment-502764",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>Replying to [comment:5 gh-tobiasdiez]:
> It's running one ci tool in another one.


GH Actions is not a CI, it runs CIs



---

archive/issue_comments_502765.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,13 @@\n+PR https://github.com/sagemath/sage-patchbot/pull/155 adds a GH Actions workflow to sage-patchbot, which runs the patchbot in a Docker container using one of the pre-built images that our CI pushes to https://github.com/orgs/sagemath/packages?repo_name=sage\n+\n+\n+\n+Follow-ups:\n+- https://github.com/sagemath/sage-patchbot/pull/156 (fixup)\n+\n+- https://github.com/sagemath/sage-patchbot/pull/157 (Cygwin)\n+\n+- Run as a scheduled workflow on GH Actions.  Users who fork the GitHub repo can activate the workflow by depositing a repository secret `SAGE_PATCHBOT_ENVS` of the form `ubuntu-focal-standard ubuntu-hirsute-standard ...`. The workflow would create 1 job per platform listed there\n \n \n Comment: 1\n```\n",
    "created_at": "2022-02-06T04:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33253#issuecomment-502765",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,13 @@
+PR https://github.com/sagemath/sage-patchbot/pull/155 adds a GH Actions workflow to sage-patchbot, which runs the patchbot in a Docker container using one of the pre-built images that our CI pushes to https://github.com/orgs/sagemath/packages?repo_name=sage
+
+
+
+Follow-ups:
+- https://github.com/sagemath/sage-patchbot/pull/156 (fixup)
+
+- https://github.com/sagemath/sage-patchbot/pull/157 (Cygwin)
+
+- Run as a scheduled workflow on GH Actions.  Users who fork the GitHub repo can activate the workflow by depositing a repository secret `SAGE_PATCHBOT_ENVS` of the form `ubuntu-focal-standard ubuntu-hirsute-standard ...`. The workflow would create 1 job per platform listed there
 
 
 Comment: 1
```




---

archive/issue_events_087808.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33253",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33253#event-87808"
}
```



---

archive/issue_events_087809.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T16:33:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33253",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33253#event-87809"
}
```



---

archive/issue_events_087810.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T16:33:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33253",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33253#event-87810"
}
```



---

archive/issue_comments_502766.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-09-10T19:09:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33253#issuecomment-502766",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_502767.json:
```json
{
    "body": "<a id='comment:10'></a>Completed, can be closed",
    "created_at": "2022-09-10T19:09:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33253",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33253#issuecomment-502767",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>Completed, can be closed



---

archive/issue_events_087811.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-10T19:09:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33253",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33253#event-87811"
}
```



---

archive/issue_events_087812.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-10T19:09:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33253",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33253#event-87812"
}
```
