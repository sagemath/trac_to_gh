# Issue 33144: Remove some py2 tags in explain_pickle

archive/issues_032907.json:
```json
{
    "body": "We remove some py2 tags from `explain_pickle` doctests which we still get correct results (with python3).\n\n**CC:**  @embray @mjungmath @tscrim\n\n**Branch/Commit:** [131841fbde0a3bc9bc62bac4381082d49251fb75](https://github.com/sagemath/sagetrac-mirror/commit/131841fbde0a3bc9bc62bac4381082d49251fb75)\n\n**Reviewer:** Travis Scrimshaw, Kwankyu Lee\n\n**Author:** Fr\u00e9d\u00e9ric Chapoton\n\nIssue created by migration from https://trac.sagemath.org/ticket/33144\n\n",
    "closed_at": "2022-07-09T22:31:18Z",
    "created_at": "2022-01-10T18:06:26Z",
    "labels": [
        "component: python3",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "title": "Remove some py2 tags in explain_pickle",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/33144",
    "user": "https://github.com/fchapoton"
}
```
We remove some py2 tags from `explain_pickle` doctests which we still get correct results (with python3).

**CC:**  @embray @mjungmath @tscrim

**Branch/Commit:** [131841fbde0a3bc9bc62bac4381082d49251fb75](https://github.com/sagemath/sagetrac-mirror/commit/131841fbde0a3bc9bc62bac4381082d49251fb75)

**Reviewer:** Travis Scrimshaw, Kwankyu Lee

**Author:** Frédéric Chapoton

Issue created by migration from https://trac.sagemath.org/ticket/33144





---

archive/issue_comments_538313.json:
```json
{
    "body": "**Branch:** [u/chapoton/33144](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/33144)",
    "created_at": "2022-01-10T18:07:28Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538313",
    "user": "https://github.com/fchapoton"
}
```

**Branch:** [u/chapoton/33144](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/33144)



---

archive/issue_comments_538314.json:
```json
{
    "body": "**Commit:** [9d0b7a16dce0b3adeeaf7da35a11ad2188498169](https://github.com/sagemath/sagetrac-mirror/commit/9d0b7a16dce0b3adeeaf7da35a11ad2188498169)",
    "created_at": "2022-01-10T18:07:28Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538314",
    "user": "https://github.com/fchapoton"
}
```

**Commit:** [9d0b7a16dce0b3adeeaf7da35a11ad2188498169](https://github.com/sagemath/sagetrac-mirror/commit/9d0b7a16dce0b3adeeaf7da35a11ad2188498169)



---

archive/issue_events_297246.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-01-10T18:07:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33144#event-297246"
}
```



---

archive/issue_comments_538315.json:
```json
{
    "body": "<a id='comment:1'></a>\nboring and painful update..\n\nany expert on pickles aboard ?\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d0b7a16dce0b3adeeaf7da35a11ad2188498169\">9d0b7a1</a></td><td><code>removal of py2 tag in doctests of explain pickle (first wave)</code></td></tr></table>\n",
    "created_at": "2022-01-10T18:07:28Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538315",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
boring and painful update..

any expert on pickles aboard ?

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d0b7a16dce0b3adeeaf7da35a11ad2188498169">9d0b7a1</a></td><td><code>removal of py2 tag in doctests of explain pickle (first wave)</code></td></tr></table>




---

archive/issue_events_297247.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-01-10T19:54:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33144#event-297247"
}
```



---

archive/issue_events_297248.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-01-10T19:54:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33144#event-297248"
}
```



---

archive/issue_events_297249.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-03-20T08:33:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33144#event-297249"
}
```



---

archive/issue_events_297250.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-03-20T08:33:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33144#event-297250"
}
```



---

archive/issue_comments_538316.json:
```json
{
    "body": "<a id='comment:3'></a>\nok, let's do that in several steps. Please review this first step.",
    "created_at": "2022-03-20T08:33:01Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538316",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
ok, let's do that in several steps. Please review this first step.



---

archive/issue_events_297251.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-17T19:59:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33144#event-297251"
}
```



---

archive/issue_events_297252.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-17T19:59:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33144#event-297252"
}
```



---

archive/issue_comments_538317.json:
```json
{
    "body": "<a id='comment:6'></a>\nplease somebody have a look\n\nThis is the last file containing `#py2` tags. Here I remove only the simple ones, and the changes should rather be uncontroversial. The remaining cases are out of my capacity, and require an expert of pickle, that we may no longer have anywhere in sight..\n\nOne alternative would be #27350 (externalize) or just drop the file completely.",
    "created_at": "2022-06-11T07:10:54Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538317",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
please somebody have a look

This is the last file containing `#py2` tags. Here I remove only the simple ones, and the changes should rather be uncontroversial. The remaining cases are out of my capacity, and require an expert of pickle, that we may no longer have anywhere in sight..

One alternative would be #27350 (externalize) or just drop the file completely.



---

archive/issue_comments_538318.json:
```json
{
    "body": "<a id='comment:7'></a>\nIt would be wonderful for Erik Bray to work on #27350 and close this ticket as `invalid/wontfix`. \n\nIf that would not happen, then I think we should fix `explain_pickle` for python3 before we remove the py2 tag, instead of \"fixing\" doctests for the broken `explain_pickle`.",
    "created_at": "2022-06-14T06:38:23Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538318",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:7'></a>
It would be wonderful for Erik Bray to work on #27350 and close this ticket as `invalid/wontfix`. 

If that would not happen, then I think we should fix `explain_pickle` for python3 before we remove the py2 tag, instead of "fixing" doctests for the broken `explain_pickle`.



---

archive/issue_comments_538319.json:
```json
{
    "body": "<a id='comment:8'></a>\nAs far as I understand, Erik is no longer available.",
    "created_at": "2022-06-14T06:57:11Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538319",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
As far as I understand, Erik is no longer available.



---

archive/issue_comments_538320.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2022-06-14T07:07:48Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538320",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_538321.json:
```json
{
    "body": "<a id='comment:9'></a>\nIn principle, I agree with #27350, but I am slightly worried about the practice of it since I find this tool to be very useful at times and would be saddened if it bitrotted. I, unfortunately, would not be able to maintain such a package as I don't understand how `explain_pickle()` works. Since these doctests seem to just be updating the output, I think we should merge these in now. Likewise, I don't think I could help with any of the further marked tests.\n\nKwankyu, any objections to me setting a positive review?",
    "created_at": "2022-06-14T07:07:48Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538321",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
In principle, I agree with #27350, but I am slightly worried about the practice of it since I find this tool to be very useful at times and would be saddened if it bitrotted. I, unfortunately, would not be able to maintain such a package as I don't understand how `explain_pickle()` works. Since these doctests seem to just be updating the output, I think we should merge these in now. Likewise, I don't think I could help with any of the further marked tests.

Kwankyu, any objections to me setting a positive review?



---

archive/issue_comments_538322.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [tscrim](#comment%3A9):\n> Since these doctests seem to just be updating the output, \n\n\nSome outputs from `explain_pickle` (via `test_pickle`), for instance,\n\n```diff\n             sage: from sage.misc.explain_pickle import *\n-            sage: test_pickle(dumps(100000r, compress=False))  # py2\n-                0: \\x80 PROTO      2\n-                2: J    BININT     100000\n-                7: .    STOP\n-            highest protocol among opcodes = 2\n-            explain_pickle in_current_sage=True/False:\n-            100000\n-            result: 100000\n+            sage: test_pickle(dumps(100000r, compress=False))\n+                    0: \\x80 PROTO      2\n+                    2: c    GLOBAL     '_codecs encode'\n+                   18: q    BINPUT     0\n+                   20: X    BINUNICODE '\\x80\\x02J\\xa0\\x86\\x01\\x00.'\n+                   36: q    BINPUT     1\n+                   38: X    BINUNICODE 'latin1'\n+                   49: q    BINPUT     2\n+                   51: \\x86 TUPLE2\n+                   52: q    BINPUT     3\n+                   54: R    REDUCE\n+                   55: q    BINPUT     4\n+                   57: .    STOP\n+                highest protocol among opcodes = 2\n+                explain_pickle in_current_sage=True:\n+                from _codecs import encode\n+                encode('\\x80\\x02J\\xa0\\x86\\x01\\x00.', 'latin1')\n+                explain_pickle in_current_sage=False:\n+                pg_encode = unpickle_global('_codecs', 'encode')\n+                pg_encode('\\x80\\x02J\\xa0\\x86\\x01\\x00.', 'latin1')\n+                result: b'\\x80\\x02J\\xa0\\x86\\x01\\x00.'\n```\n\n\nseem wrong, which indicates it worked fine with py2 but is now broken with py3. Do we ever correct doctests for wrong output? I think leaving them with py2 tag is right if we do not fix the broken `explain_pickle`.\n\nIndentations of outputs are wrong.",
    "created_at": "2022-06-14T07:29:55Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538322",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:10'></a>
Replying to [tscrim](#comment%3A9):
> Since these doctests seem to just be updating the output, 


Some outputs from `explain_pickle` (via `test_pickle`), for instance,

```diff
             sage: from sage.misc.explain_pickle import *
-            sage: test_pickle(dumps(100000r, compress=False))  # py2
-                0: \x80 PROTO      2
-                2: J    BININT     100000
-                7: .    STOP
-            highest protocol among opcodes = 2
-            explain_pickle in_current_sage=True/False:
-            100000
-            result: 100000
+            sage: test_pickle(dumps(100000r, compress=False))
+                    0: \x80 PROTO      2
+                    2: c    GLOBAL     '_codecs encode'
+                   18: q    BINPUT     0
+                   20: X    BINUNICODE '\x80\x02J\xa0\x86\x01\x00.'
+                   36: q    BINPUT     1
+                   38: X    BINUNICODE 'latin1'
+                   49: q    BINPUT     2
+                   51: \x86 TUPLE2
+                   52: q    BINPUT     3
+                   54: R    REDUCE
+                   55: q    BINPUT     4
+                   57: .    STOP
+                highest protocol among opcodes = 2
+                explain_pickle in_current_sage=True:
+                from _codecs import encode
+                encode('\x80\x02J\xa0\x86\x01\x00.', 'latin1')
+                explain_pickle in_current_sage=False:
+                pg_encode = unpickle_global('_codecs', 'encode')
+                pg_encode('\x80\x02J\xa0\x86\x01\x00.', 'latin1')
+                result: b'\x80\x02J\xa0\x86\x01\x00.'
```


seem wrong, which indicates it worked fine with py2 but is now broken with py3. Do we ever correct doctests for wrong output? I think leaving them with py2 tag is right if we do not fix the broken `explain_pickle`.

Indentations of outputs are wrong.



---

archive/issue_comments_538323.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [klee](#comment%3A10):\n> Replying to [tscrim](#comment%3A9):\n> > Since these doctests seem to just be updating the output, \n\n\n> seem wrong, which indicates it worked fine with py2 but is now broken with py3. Do we ever correct doctests for wrong output? I think leaving them with py2 tag is right if we do not fix the broken `explain_pickle`.\n\n\nThe pickle itself has changed. If you run `loads(dumps(100000r))`, it returns the correct object without error. In this case, it is likely because `int` has changed from Python2 to Python3.\n\n> Indentations of outputs are wrong. \n\n\nIndeed; although I found the extra indentation level helped make clear what the doctest outputs were since they are so long with their own indentation. I don't hold a strong opinion on changing this or not.",
    "created_at": "2022-06-14T07:37:06Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538323",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
Replying to [klee](#comment%3A10):
> Replying to [tscrim](#comment%3A9):
> > Since these doctests seem to just be updating the output, 


> seem wrong, which indicates it worked fine with py2 but is now broken with py3. Do we ever correct doctests for wrong output? I think leaving them with py2 tag is right if we do not fix the broken `explain_pickle`.


The pickle itself has changed. If you run `loads(dumps(100000r))`, it returns the correct object without error. In this case, it is likely because `int` has changed from Python2 to Python3.

> Indentations of outputs are wrong. 


Indeed; although I found the extra indentation level helped make clear what the doctest outputs were since they are so long with their own indentation. I don't hold a strong opinion on changing this or not.



---

archive/issue_comments_538324.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [tscrim](#comment%3A11):\n> Replying to [klee](#comment%3A10):\n> > Replying to [tscrim](#comment%3A9):\n> > > Since these doctests seem to just be updating the output, \n\n> \n> > seem wrong, which indicates it worked fine with py2 but is now broken with py3. Do we ever correct doctests for wrong output? I think leaving them with py2 tag is right if we do not fix the broken `explain_pickle`.\n\n> \n> The pickle itself has changed. \n\n\nI meant the `result`. Shouldn't it be `100000`?",
    "created_at": "2022-06-14T07:43:36Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538324",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:12'></a>
Replying to [tscrim](#comment%3A11):
> Replying to [klee](#comment%3A10):
> > Replying to [tscrim](#comment%3A9):
> > > Since these doctests seem to just be updating the output, 

> 
> > seem wrong, which indicates it worked fine with py2 but is now broken with py3. Do we ever correct doctests for wrong output? I think leaving them with py2 tag is right if we do not fix the broken `explain_pickle`.

> 
> The pickle itself has changed. 


I meant the `result`. Shouldn't it be `100000`?



---

archive/issue_comments_538325.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [klee](#comment%3A12):\n> Replying to [tscrim](#comment%3A11):\n> > Replying to [klee](#comment%3A10):\n> > > Replying to [tscrim](#comment%3A9):\n> > > > Since these doctests seem to just be updating the output, \n\n> > \n> > > seem wrong, which indicates it worked fine with py2 but is now broken with py3. Do we ever correct doctests for wrong output? I think leaving them with py2 tag is right if we do not fix the broken `explain_pickle`.\n\n> > \n> > The pickle itself has changed. \n\n> \n> I meant the `result`. Shouldn't it be `100000`?\n\n\nI believe it is the right result but represented or interpreted in the wrong format. Mainly the bytes returned are not converted to a string correctly or something similar.",
    "created_at": "2022-06-14T08:33:39Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538325",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
Replying to [klee](#comment%3A12):
> Replying to [tscrim](#comment%3A11):
> > Replying to [klee](#comment%3A10):
> > > Replying to [tscrim](#comment%3A9):
> > > > Since these doctests seem to just be updating the output, 

> > 
> > > seem wrong, which indicates it worked fine with py2 but is now broken with py3. Do we ever correct doctests for wrong output? I think leaving them with py2 tag is right if we do not fix the broken `explain_pickle`.

> > 
> > The pickle itself has changed. 

> 
> I meant the `result`. Shouldn't it be `100000`?


I believe it is the right result but represented or interpreted in the wrong format. Mainly the bytes returned are not converted to a string correctly or something similar.



---

archive/issue_comments_538326.json:
```json
{
    "body": "<a id='comment:14'></a>\nPerhaps we just don't remove the tag in the cases when the result is (at least superficially) different?",
    "created_at": "2022-06-14T08:35:34Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538326",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>
Perhaps we just don't remove the tag in the cases when the result is (at least superficially) different?



---

archive/issue_comments_538327.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [tscrim](#comment%3A14):\n> Perhaps we just don't remove the tag in the cases when the result is (at least superficially) different?\n\n\n+1",
    "created_at": "2022-06-14T08:41:55Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538327",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:15'></a>
Replying to [tscrim](#comment%3A14):
> Perhaps we just don't remove the tag in the cases when the result is (at least superficially) different?


+1



---

archive/issue_comments_538328.json:
```json
{
    "body": "**Changing branch** from \"[u/chapoton/33144](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/33144)\" to \"[public/ticket/33144-short](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/33144-short)\".",
    "created_at": "2022-06-14T12:15:38Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538328",
    "user": "https://github.com/fchapoton"
}
```

**Changing branch** from "[u/chapoton/33144](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/33144)" to "[public/ticket/33144-short](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/33144-short)".



---

archive/issue_comments_538329.json:
```json
{
    "body": "<a id='comment:16'></a>\nhere is a new branch, where I have dropped the changes that did no look right\n\nI may have missed some\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf9a6d92b3a5a0823adfd07cabb120a8fdeb64ed\">cf9a6d9</a></td><td><code>remove only some simple #py2 tags in explain_pickle</code></td></tr></table>\n",
    "created_at": "2022-06-14T12:15:38Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538329",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:16'></a>
here is a new branch, where I have dropped the changes that did no look right

I may have missed some

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf9a6d92b3a5a0823adfd07cabb120a8fdeb64ed">cf9a6d9</a></td><td><code>remove only some simple #py2 tags in explain_pickle</code></td></tr></table>




---

archive/issue_comments_538330.json:
```json
{
    "body": "**Changing commit** from \"[9d0b7a16dce0b3adeeaf7da35a11ad2188498169](https://github.com/sagemath/sagetrac-mirror/commit/9d0b7a16dce0b3adeeaf7da35a11ad2188498169)\" to \"[cf9a6d92b3a5a0823adfd07cabb120a8fdeb64ed](https://github.com/sagemath/sagetrac-mirror/commit/cf9a6d92b3a5a0823adfd07cabb120a8fdeb64ed)\".",
    "created_at": "2022-06-14T12:15:38Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538330",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[9d0b7a16dce0b3adeeaf7da35a11ad2188498169](https://github.com/sagemath/sagetrac-mirror/commit/9d0b7a16dce0b3adeeaf7da35a11ad2188498169)" to "[cf9a6d92b3a5a0823adfd07cabb120a8fdeb64ed](https://github.com/sagemath/sagetrac-mirror/commit/cf9a6d92b3a5a0823adfd07cabb120a8fdeb64ed)".



---

archive/issue_comments_538331.json:
```json
{
    "body": "<a id='comment:17'></a>\nHow about indentations? Did you indent more spaces intentionally?",
    "created_at": "2022-06-14T12:20:59Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538331",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:17'></a>
How about indentations? Did you indent more spaces intentionally?



---

archive/issue_comments_538332.json:
```json
{
    "body": "<a id='comment:18'></a>\nI think outputs should look as they do on the command line, modulo wrappings.",
    "created_at": "2022-06-14T12:24:52Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538332",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:18'></a>
I think outputs should look as they do on the command line, modulo wrappings.



---

archive/issue_comments_538333.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c82b13c6393dee104fc91fca80cc745b38f57c0\">3c82b13</a></td><td><code>remove some #py2 tags in explain_pickle</code></td></tr></table>\n",
    "created_at": "2022-06-15T08:16:20Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538333",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c82b13c6393dee104fc91fca80cc745b38f57c0">3c82b13</a></td><td><code>remove some #py2 tags in explain_pickle</code></td></tr></table>




---

archive/issue_comments_538334.json:
```json
{
    "body": "**Changing commit** from \"[cf9a6d92b3a5a0823adfd07cabb120a8fdeb64ed](https://github.com/sagemath/sagetrac-mirror/commit/cf9a6d92b3a5a0823adfd07cabb120a8fdeb64ed)\" to \"[3c82b13c6393dee104fc91fca80cc745b38f57c0](https://github.com/sagemath/sagetrac-mirror/commit/3c82b13c6393dee104fc91fca80cc745b38f57c0)\".",
    "created_at": "2022-06-15T08:16:20Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538334",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cf9a6d92b3a5a0823adfd07cabb120a8fdeb64ed](https://github.com/sagemath/sagetrac-mirror/commit/cf9a6d92b3a5a0823adfd07cabb120a8fdeb64ed)" to "[3c82b13c6393dee104fc91fca80cc745b38f57c0](https://github.com/sagemath/sagetrac-mirror/commit/3c82b13c6393dee104fc91fca80cc745b38f57c0)".



---

archive/issue_comments_538335.json:
```json
{
    "body": "<a id='comment:20'></a>\nnow the same as previous one, only with less indentations",
    "created_at": "2022-06-15T08:16:50Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538335",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:20'></a>
now the same as previous one, only with less indentations



---

archive/issue_comments_538336.json:
```json
{
    "body": "<a id='comment:21'></a>\nThanks. But some cases with different `result` are still in.",
    "created_at": "2022-06-15T08:32:35Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538336",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:21'></a>
Thanks. But some cases with different `result` are still in.



---

archive/issue_comments_538337.json:
```json
{
    "body": "patch for removing some #py2 tags",
    "created_at": "2022-06-26T07:30:19Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538337",
    "user": "https://github.com/fchapoton"
}
```

patch for removing some #py2 tags



---

archive/attachments_022312.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "0001-removal-of-py2-tag-in-doctests-of-explain-pickle-fir.patch",
    "asset_url": "tarball://root/attachments/ticket33144/0001-removal-of-py2-tag-in-doctests-of-explain-pickle-fir.patch",
    "created_at": "2022-06-26T07:31:43Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket33144/0001-removal-of-py2-tag-in-doctests-of-explain-pickle-fir.patch",
    "user": "https://github.com/fchapoton"
}
```



---

archive/issue_comments_538338.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Attachment:** [0001-removal-of-py2-tag-in-doctests-of-explain-pickle-fir.patch](https://github.com/sagemath/sage/files/ticket33144/0001-removal-of-py2-tag-in-doctests-of-explain-pickle-fir.patch)\n\nThen maybe the simplest way would be if you could please edit the attached patch file : keep only the changes that you find appropriate and make a branch from that modified patch.",
    "created_at": "2022-06-26T07:31:43Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538338",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:22'></a>
**Attachment:** [0001-removal-of-py2-tag-in-doctests-of-explain-pickle-fir.patch](https://github.com/sagemath/sage/files/ticket33144/0001-removal-of-py2-tag-in-doctests-of-explain-pickle-fir.patch)

Then maybe the simplest way would be if you could please edit the attached patch file : keep only the changes that you find appropriate and make a branch from that modified patch.



---

archive/issue_comments_538339.json:
```json
{
    "body": "**Changing commit** from \"[3c82b13c6393dee104fc91fca80cc745b38f57c0](https://github.com/sagemath/sagetrac-mirror/commit/3c82b13c6393dee104fc91fca80cc745b38f57c0)\" to \"[131841fbde0a3bc9bc62bac4381082d49251fb75](https://github.com/sagemath/sagetrac-mirror/commit/131841fbde0a3bc9bc62bac4381082d49251fb75)\".",
    "created_at": "2022-06-26T11:03:47Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538339",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3c82b13c6393dee104fc91fca80cc745b38f57c0](https://github.com/sagemath/sagetrac-mirror/commit/3c82b13c6393dee104fc91fca80cc745b38f57c0)" to "[131841fbde0a3bc9bc62bac4381082d49251fb75](https://github.com/sagemath/sagetrac-mirror/commit/131841fbde0a3bc9bc62bac4381082d49251fb75)".



---

archive/issue_comments_538340.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b47176e2a4efebc865e2bca2fdef7ffd3823ec23\">b47176e</a></td><td><code>Merge branch 'develop'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/131841fbde0a3bc9bc62bac4381082d49251fb75\">131841f</a></td><td><code>Restore py2 tag for cases with different result</code></td></tr></table>\n",
    "created_at": "2022-06-26T11:03:47Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538340",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b47176e2a4efebc865e2bca2fdef7ffd3823ec23">b47176e</a></td><td><code>Merge branch 'develop'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/131841fbde0a3bc9bc62bac4381082d49251fb75">131841f</a></td><td><code>Restore py2 tag for cases with different result</code></td></tr></table>




---

archive/issue_comments_538341.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [chapoton](#comment%3A22):\n> Then maybe the simplest way would be if you could please edit the attached patch file : keep only the changes that you find appropriate and make a branch from that modified patch.\n\n\nThat is done over your last commit.",
    "created_at": "2022-06-26T11:05:43Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538341",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:24'></a>
Replying to [chapoton](#comment%3A22):
> Then maybe the simplest way would be if you could please edit the attached patch file : keep only the changes that you find appropriate and make a branch from that modified patch.


That is done over your last commit.



---

archive/issue_comments_538342.json:
```json
{
    "body": "**Changing reviewer** from \"Travis Scrimshaw\" to \"Travis Scrimshaw, Kwankyu Lee\".",
    "created_at": "2022-06-26T11:09:04Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538342",
    "user": "https://github.com/kwankyu"
}
```

**Changing reviewer** from "Travis Scrimshaw" to "Travis Scrimshaw, Kwankyu Lee".



---

archive/issue_comments_538343.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+We remove py2 tags from `explain_pickle` doctests which we still get correct results (with python3).\n``````\n",
    "created_at": "2022-06-26T11:09:04Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538343",
    "user": "https://github.com/kwankyu"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+We remove py2 tags from `explain_pickle` doctests which we still get correct results (with python3).
``````




---

archive/issue_comments_538344.json:
```json
{
    "body": "<a id='comment:25'></a>\nI am positive now.",
    "created_at": "2022-06-26T11:09:04Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538344",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:25'></a>
I am positive now.



---

archive/issue_events_297253.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-06-26T11:09:04Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "rename": {
        "from": "remove py2 tags in explain_pickle",
        "to": "Remove py2 tags in explain_pickle"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33144#event-297253"
}
```



---

archive/issue_events_297254.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-06-26T17:00:42Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "rename": {
        "from": "Remove py2 tags in explain_pickle",
        "to": "Remove some py2 tags in explain_pickle"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33144#event-297254"
}
```



---

archive/issue_comments_538345.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-We remove py2 tags from `explain_pickle` doctests which we still get correct results (with python3).\n+We remove some py2 tags from `explain_pickle` doctests which we still get correct results (with python3).\n``````\n",
    "created_at": "2022-06-26T17:00:42Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538345",
    "user": "https://github.com/fchapoton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-We remove py2 tags from `explain_pickle` doctests which we still get correct results (with python3).
+We remove some py2 tags from `explain_pickle` doctests which we still get correct results (with python3).
``````




---

archive/issue_comments_538346.json:
```json
{
    "body": "<a id='comment:26'></a>\nthanks, you can set to positive if you wish",
    "created_at": "2022-06-26T17:00:42Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538346",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:26'></a>
thanks, you can set to positive if you wish



---

archive/issue_comments_538347.json:
```json
{
    "body": "<a id='comment:27'></a>\nThanks.",
    "created_at": "2022-06-27T00:09:26Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538347",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:27'></a>
Thanks.



---

archive/issue_events_297255.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-06-27T00:09:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "label": "minor",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33144#event-297255"
}
```



---

archive/issue_events_297256.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-06-27T00:09:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33144#event-297256"
}
```



---

archive/issue_events_297257.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-06-27T00:09:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33144#event-297257"
}
```



---

archive/issue_events_297258.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-09T22:31:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33144#event-297258"
}
```



---

archive/issue_events_297259.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "64e29cf9d907deb878854764070019d1eb2506b7",
    "created_at": "2022-07-09T22:31:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33144#event-297259"
}
```



---

archive/issue_comments_538348.json:
```json
{
    "body": "**Changing branch** from \"[public/ticket/33144-short](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/33144-short)\" to \"[131841fbde0a3bc9bc62bac4381082d49251fb75](https://github.com/sagemath/sagetrac-mirror/commit/131841fbde0a3bc9bc62bac4381082d49251fb75)\".",
    "created_at": "2022-07-09T22:31:18Z",
    "issue": "https://github.com/sagemath/sage/issues/33144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33144#issuecomment-538348",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/ticket/33144-short](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/33144-short)" to "[131841fbde0a3bc9bc62bac4381082d49251fb75](https://github.com/sagemath/sagetrac-mirror/commit/131841fbde0a3bc9bc62bac4381082d49251fb75)".
