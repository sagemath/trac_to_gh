# Issue 33115: Re-run bootstrap when an install-requires.txt or package-version.txt has changed

archive/issues_032878.json:
```json
{
    "body": "Developers may see messages like the following when merging package upgrade tickets such as #32968. \n\n```\nInstalling collected packages: Sphinx\n  changing mode of /home/gitpod/sage-local/var/lib/sage/venv-python3.8/bin/sphinx-apidoc to 755\n  changing mode of /home/gitpod/sage-local/var/lib/sage/venv-python3.8/bin/sphinx-autogen to 755\n  changing mode of /home/gitpod/sage-local/var/lib/sage/venv-python3.8/bin/sphinx-build to 755\n  changing mode of /home/gitpod/sage-local/var/lib/sage/venv-python3.8/bin/sphinx-quickstart to 755\nERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.\nsagemath-standard 9.5b9 requires sphinx<4.3,>=4, but you have sphinx 4.3.1 which is incompatible.\nSuccessfully installed Sphinx-4.3.1\n```\n`bootstrap` generates various files (in the above, `src/install-requires.txt`) from the source files `build/pkgs/*/install-requires.txt`).\nTo fix this, we should add these files as dependencies of the `configure` target in the top-level `Makefile`.\n\nLikewise for the source files `build/pkgs/*/package-version.txt`, which influence other files such as `src/requirements.txt` that are generated by `bootstrap`.\n\n\nBranch/Commit: 686fa78fc0dd8dd904c642aff6eaa1d7b9da5d6d\n\nReviewer: Michael Orlitzky\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33115\n\n",
    "closed_at": "2022-02-16T23:56:33Z",
    "created_at": "2022-01-04T21:47:16Z",
    "labels": [
        "component: build",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Re-run bootstrap when an install-requires.txt or package-version.txt has changed",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33115",
    "user": "https://github.com/mkoeppe"
}
```
Developers may see messages like the following when merging package upgrade tickets such as #32968. 

```
Installing collected packages: Sphinx
  changing mode of /home/gitpod/sage-local/var/lib/sage/venv-python3.8/bin/sphinx-apidoc to 755
  changing mode of /home/gitpod/sage-local/var/lib/sage/venv-python3.8/bin/sphinx-autogen to 755
  changing mode of /home/gitpod/sage-local/var/lib/sage/venv-python3.8/bin/sphinx-build to 755
  changing mode of /home/gitpod/sage-local/var/lib/sage/venv-python3.8/bin/sphinx-quickstart to 755
ERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.
sagemath-standard 9.5b9 requires sphinx<4.3,>=4, but you have sphinx 4.3.1 which is incompatible.
Successfully installed Sphinx-4.3.1
```
`bootstrap` generates various files (in the above, `src/install-requires.txt`) from the source files `build/pkgs/*/install-requires.txt`).
To fix this, we should add these files as dependencies of the `configure` target in the top-level `Makefile`.

Likewise for the source files `build/pkgs/*/package-version.txt`, which influence other files such as `src/requirements.txt` that are generated by `bootstrap`.


Branch/Commit: 686fa78fc0dd8dd904c642aff6eaa1d7b9da5d6d

Reviewer: Michael Orlitzky

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33115





---

archive/issue_comments_500760.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2022-01-04T21:57:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33115#issuecomment-500760",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_500761.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -10,7 +10,11 @@\n sagemath-standard 9.5b9 requires sphinx<4.3,>=4, but you have sphinx 4.3.1 which is incompatible.\n Successfully installed Sphinx-4.3.1\n \\`\\`\\`\n+\\`bootstrap\\` generates various files (in the above, \\`src/install-requires.txt\\`) from the source files \\`build/pkgs/*/install-requires.txt\\`).\n To fix this, we should add these files as dependencies of the \\`configure\\` target in the top-level \\`Makefile\\`.\n+\n+Likewise for the source files \\`build/pkgs/*/package-version.txt\\`, which influence other files such as \\`src/requirements.txt\\` that are generated by \\`bootstrap\\`.\n+\n \n Author: Matthias Koeppe\n \n```\n",
    "created_at": "2022-01-04T21:57:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33115#issuecomment-500761",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -10,7 +10,11 @@
 sagemath-standard 9.5b9 requires sphinx<4.3,>=4, but you have sphinx 4.3.1 which is incompatible.
 Successfully installed Sphinx-4.3.1
 \`\`\`
+\`bootstrap\` generates various files (in the above, \`src/install-requires.txt\`) from the source files \`build/pkgs/*/install-requires.txt\`).
 To fix this, we should add these files as dependencies of the \`configure\` target in the top-level \`Makefile\`.
+
+Likewise for the source files \`build/pkgs/*/package-version.txt\`, which influence other files such as \`src/requirements.txt\` that are generated by \`bootstrap\`.
+
 
 Author: Matthias Koeppe
 
```




---

archive/issue_comments_500762.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-01-04T21:57:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33115#issuecomment-500762",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_500763.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-01-05T23:20:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33115#issuecomment-500763",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_500764.json:
```json
{
    "body": "<a id='comment:4'></a>Thank you!",
    "created_at": "2022-01-05T23:21:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33115#issuecomment-500764",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>Thank you!



---

archive/issue_events_087503.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-10T23:22:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33115",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33115#event-87503"
}
```



---

archive/issue_events_087504.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-16T23:56:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33115",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33115#event-87504"
}
```



---

archive/issue_comments_500765.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-02-16T23:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33115",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33115#issuecomment-500765",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
