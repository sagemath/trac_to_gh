# Issue 33549: Rename test_... functions to avoid the naming scheme reserved by pytest

archive/issues_033312.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\n`sage -t` throws errors on some files because pytest is configured to look for methods prefixed with `test_` and treats them as pytest test functions/methods, which are then executed. However, sage's code base contains some functions that match this pattern without being pytests.\n\nThis leads to problems like\n\n```\n$ ./sage -tp src/sage/tests/cmdline.py\ntoo many failed tests, not using stored timings\nRunning doctests with ID 2022-03-20-11-46-21-1dc8fb11.\nUsing --optional=4ti2,buckygen,ccache,cryptominisat,debugpy,e_antic,gap_packages,homebrew,igraph,jupymake,latte_int,libsemigroups,lidia,lrslib,meataxe,normaliz,pip,polytopes_db_4d,pynormaliz,sage,sage_spkg,texttable\nFeatures to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,nauty,palp,pandoc,pdf2svg,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib\nDoctesting 1 file using 8 threads.\nsage -t --random-seed=23402257756506608859254049173870803147 src/sage/tests/cmdline.py\n...\n=================================================================================== test session starts ===================================================================================\nplatform darwin -- Python 3.10.2, pytest-7.0.1, pluggy-1.0.0\nrootdir: /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src, configfile: tox.ini\ncollected 1 item                                                                                                                                                                          \n\nsrc/sage/tests/cmdline.py E                                                                                                                                                         [100%]\n\n========================================================================================= ERRORS ==========================================================================================\n____________________________________________________________________________ ERROR at setup of test_executable ____________________________________________________________________________\nfile /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/tests/cmdline.py, line 61\n  def test_executable(args, input=\"\", timeout=100.0, pydebug_ignore_warnings=False, **kwds):\nE       fixture 'args' not found\n>       available fixtures: add_imports, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, doctest_namespace, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory\n>       use 'pytest --fixtures [testpath]' for help on them.\n\n/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/tests/cmdline.py:61\n================================================================================= short test summary info =================================================================================\nERROR src/sage/tests/cmdline.py::test_executable\n==================================================================================== 1 error in 0.01s =====================================================================================\n```\n\nWe fix it in this ticket as follows:\n- If the offending function is a proper (sage) test function, then change its name from `test_xyz` to `_test_xyz` (which also marks them as private)\n- If the offending function is a \"real\" user-faced function, then explicitly exclude it from pytests test discovery.\n\nSee #31924 for further discussion on different approaches to fix the same issue including their pros and cons. \n\nThis is preparation for #33546.\n\nDepends on #32975\nDepends on #33612\nDepends on #33617\n\nCC:  @tobiasdiez\n\nComponent: **refactoring**\n\nAuthor: **Tobias Diez**\n\nBranch/Commit: **[public/tests/pytest_wrong_test_methods](https://github.com/sagemath/sagetrac-mirror/tree/public/tests/pytest_wrong_test_methods) @ [`7644854`](https://github.com/sagemath/sagetrac-mirror/commit/76448545125b616ef20cc4ca20957674c0562357)**\n\nReviewer: **Sebastian Oehms, Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33549_\n\n",
    "created_at": "2022-03-22T16:32:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/refactoring",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20info"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Rename test_... functions to avoid the naming scheme reserved by pytest",
    "type": "issue",
    "updated_at": "2022-08-06T19:24:56Z",
    "url": "https://github.com/sagemath/sage/issues/33549",
    "user": "https://github.com/mkoeppe"
}
```
<div id="comment:0"></div>

`sage -t` throws errors on some files because pytest is configured to look for methods prefixed with `test_` and treats them as pytest test functions/methods, which are then executed. However, sage's code base contains some functions that match this pattern without being pytests.

This leads to problems like

```
$ ./sage -tp src/sage/tests/cmdline.py
too many failed tests, not using stored timings
Running doctests with ID 2022-03-20-11-46-21-1dc8fb11.
Using --optional=4ti2,buckygen,ccache,cryptominisat,debugpy,e_antic,gap_packages,homebrew,igraph,jupymake,latte_int,libsemigroups,lidia,lrslib,meataxe,normaliz,pip,polytopes_db_4d,pynormaliz,sage,sage_spkg,texttable
Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,nauty,palp,pandoc,pdf2svg,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib
Doctesting 1 file using 8 threads.
sage -t --random-seed=23402257756506608859254049173870803147 src/sage/tests/cmdline.py
...
=================================================================================== test session starts ===================================================================================
platform darwin -- Python 3.10.2, pytest-7.0.1, pluggy-1.0.0
rootdir: /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src, configfile: tox.ini
collected 1 item                                                                                                                                                                          

src/sage/tests/cmdline.py E                                                                                                                                                         [100%]

========================================================================================= ERRORS ==========================================================================================
____________________________________________________________________________ ERROR at setup of test_executable ____________________________________________________________________________
file /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/tests/cmdline.py, line 61
  def test_executable(args, input="", timeout=100.0, pydebug_ignore_warnings=False, **kwds):
E       fixture 'args' not found
>       available fixtures: add_imports, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, doctest_namespace, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/tests/cmdline.py:61
================================================================================= short test summary info =================================================================================
ERROR src/sage/tests/cmdline.py::test_executable
==================================================================================== 1 error in 0.01s =====================================================================================
```

We fix it in this ticket as follows:
- If the offending function is a proper (sage) test function, then change its name from `test_xyz` to `_test_xyz` (which also marks them as private)
- If the offending function is a "real" user-faced function, then explicitly exclude it from pytests test discovery.

See #31924 for further discussion on different approaches to fix the same issue including their pros and cons. 

This is preparation for #33546.

Depends on #32975
Depends on #33612
Depends on #33617

CC:  @tobiasdiez

Component: **refactoring**

Author: **Tobias Diez**

Branch/Commit: **[public/tests/pytest_wrong_test_methods](https://github.com/sagemath/sagetrac-mirror/tree/public/tests/pytest_wrong_test_methods) @ [`7644854`](https://github.com/sagemath/sagetrac-mirror/commit/76448545125b616ef20cc4ca20957674c0562357)**

Reviewer: **Sebastian Oehms, Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/33549_





---

archive/issue_events_457362.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-22T16:32:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457362"
}
```



---

archive/issue_events_457363.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-22T16:32:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/refactoring",
    "label_color": "696969",
    "label_name": "refactoring",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457363"
}
```



---

archive/issue_events_457364.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-22T16:32:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457364"
}
```



---

archive/issue_events_457365.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-22T16:32:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457365"
}
```



---

archive/issue_events_457366.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-22T18:44:05Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457366"
}
```



---

archive/issue_events_457367.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-22T18:44:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457367"
}
```



---

archive/issue_comments_541891.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nGood thing pycheck and pyright let us use\n`check_...` and `right_...`!    : )",
    "created_at": "2022-03-22T20:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541891",
    "user": "https://github.com/slel"
}
```

<div id="comment:2" align="right">comment:2</div>

Good thing pycheck and pyright let us use
`check_...` and `right_...`!    : )



---

archive/issue_comments_541892.json:
```json
{
    "body": "Changed dependencies from **#31924** to none",
    "created_at": "2022-03-23T12:50:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541892",
    "user": "https://github.com/tobiasdiez"
}
```

Changed dependencies from **#31924** to none



---

archive/issue_events_457368.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-23T12:50:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457368"
}
```



---

archive/issue_events_457369.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-23T12:50:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457369"
}
```



---

archive/issue_events_457370.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-23T12:50:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457370"
}
```



---

archive/issue_comments_541893.json:
```json
{
    "body": "Commit: **[`7060ea1`](https://github.com/sagemath/sagetrac-mirror/commit/7060ea12bc95374388037768cb8a3fcc12ac51ea)**",
    "created_at": "2022-03-23T12:50:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541893",
    "user": "https://github.com/tobiasdiez"
}
```

Commit: **[`7060ea1`](https://github.com/sagemath/sagetrac-mirror/commit/7060ea12bc95374388037768cb8a3fcc12ac51ea)**



---

archive/issue_comments_541894.json:
```json
{
    "body": "Branch: **[public/tests/pytest_wrong_test_methods](https://github.com/sagemath/sagetrac-mirror/tree/public/tests/pytest_wrong_test_methods)**",
    "created_at": "2022-03-23T12:50:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541894",
    "user": "https://github.com/tobiasdiez"
}
```

Branch: **[public/tests/pytest_wrong_test_methods](https://github.com/sagemath/sagetrac-mirror/tree/public/tests/pytest_wrong_test_methods)**



---

archive/issue_comments_541895.json:
```json
{
    "body": "Author: **Tobias Diez**",
    "created_at": "2022-03-23T12:50:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541895",
    "user": "https://github.com/tobiasdiez"
}
```

Author: **Tobias Diez**



---

archive/issue_comments_541896.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,41 @@\n-As suggested in [#31924 comment:37](https://github.com/sagemath/sage/issues/31924#comment:37)\n+`sage -t` throws errors on some files because pytest is configured to look for methods prefixed with `test_` and treats them as pytest test functions/methods, which are then executed. However, sage's code base contains some functions that match this pattern without being pytests.\n+\n+This leads to problems like\n+\n+```\n+$ ./sage -tp src/sage/tests/cmdline.py\n+too many failed tests, not using stored timings\n+Running doctests with ID 2022-03-20-11-46-21-1dc8fb11.\n+Using --optional=4ti2,buckygen,ccache,cryptominisat,debugpy,e_antic,gap_packages,homebrew,igraph,jupymake,latte_int,libsemigroups,lidia,lrslib,meataxe,normaliz,pip,polytopes_db_4d,pynormaliz,sage,sage_spkg,texttable\n+Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,nauty,palp,pandoc,pdf2svg,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib\n+Doctesting 1 file using 8 threads.\n+sage -t --random-seed=23402257756506608859254049173870803147 src/sage/tests/cmdline.py\n+...\n+=================================================================================== test session starts ===================================================================================\n+platform darwin -- Python 3.10.2, pytest-7.0.1, pluggy-1.0.0\n+rootdir: /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src, configfile: tox.ini\n+collected 1 item                                                                                                                                                                          \n+\n+src/sage/tests/cmdline.py E                                                                                                                                                         [100%]\n+\n+========================================================================================= ERRORS ==========================================================================================\n+____________________________________________________________________________ ERROR at setup of test_executable ____________________________________________________________________________\n+file /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/tests/cmdline.py, line 61\n+  def test_executable(args, input=\"\", timeout=100.0, pydebug_ignore_warnings=False, **kwds):\n+E       fixture 'args' not found\n+>       available fixtures: add_imports, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, doctest_namespace, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory\n+>       use 'pytest --fixtures [testpath]' for help on them.\n+\n+/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/tests/cmdline.py:61\n+================================================================================= short test summary info =================================================================================\n+ERROR src/sage/tests/cmdline.py::test_executable\n+==================================================================================== 1 error in 0.01s =====================================================================================\n+```\n+\n+We fix it in this ticket as follows:\n+- If the offending function is a proper (sage) test function, then change its name from `test_xyz` to `_test_xyz` (which also marks them as private)\n+- If the offending function is a \"real\" user-faced function, then explicitly exclude it from pytests test discovery.\n+\n+See #31924 for further discussion on different approaches to fix the same issue including their pros and cons. \n \n This is preparation for #33546.\n``````\n",
    "created_at": "2022-03-23T12:50:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541896",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,41 @@
-As suggested in [#31924 comment:37](https://github.com/sagemath/sage/issues/31924#comment:37)
+`sage -t` throws errors on some files because pytest is configured to look for methods prefixed with `test_` and treats them as pytest test functions/methods, which are then executed. However, sage's code base contains some functions that match this pattern without being pytests.
+
+This leads to problems like
+
+```
+$ ./sage -tp src/sage/tests/cmdline.py
+too many failed tests, not using stored timings
+Running doctests with ID 2022-03-20-11-46-21-1dc8fb11.
+Using --optional=4ti2,buckygen,ccache,cryptominisat,debugpy,e_antic,gap_packages,homebrew,igraph,jupymake,latte_int,libsemigroups,lidia,lrslib,meataxe,normaliz,pip,polytopes_db_4d,pynormaliz,sage,sage_spkg,texttable
+Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,nauty,palp,pandoc,pdf2svg,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib
+Doctesting 1 file using 8 threads.
+sage -t --random-seed=23402257756506608859254049173870803147 src/sage/tests/cmdline.py
+...
+=================================================================================== test session starts ===================================================================================
+platform darwin -- Python 3.10.2, pytest-7.0.1, pluggy-1.0.0
+rootdir: /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src, configfile: tox.ini
+collected 1 item                                                                                                                                                                          
+
+src/sage/tests/cmdline.py E                                                                                                                                                         [100%]
+
+========================================================================================= ERRORS ==========================================================================================
+____________________________________________________________________________ ERROR at setup of test_executable ____________________________________________________________________________
+file /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/tests/cmdline.py, line 61
+  def test_executable(args, input="", timeout=100.0, pydebug_ignore_warnings=False, **kwds):
+E       fixture 'args' not found
+>       available fixtures: add_imports, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, doctest_namespace, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
+>       use 'pytest --fixtures [testpath]' for help on them.
+
+/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/tests/cmdline.py:61
+================================================================================= short test summary info =================================================================================
+ERROR src/sage/tests/cmdline.py::test_executable
+==================================================================================== 1 error in 0.01s =====================================================================================
+```
+
+We fix it in this ticket as follows:
+- If the offending function is a proper (sage) test function, then change its name from `test_xyz` to `_test_xyz` (which also marks them as private)
+- If the offending function is a "real" user-faced function, then explicitly exclude it from pytests test discovery.
+
+See #31924 for further discussion on different approaches to fix the same issue including their pros and cons. 
 
 This is preparation for #33546.
``````




---

archive/issue_comments_541897.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59cabaa804c40d9225a916c93126d0db25bb5c1c\"><code>59cabaa</code></a></td><td><code>Make test methods private</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba260861b9bc0c4d52670db39f502485c8cc62fb\"><code>ba26086</code></a></td><td><code>Hide remaining methods starting with test from pytest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3dc0f63ecd2c28e5b052e37a0c1c9a384bff0519\"><code>3dc0f63</code></a></td><td><code>Cleanup cmdline</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/321bd9d61707378d9bda9184fd2dfd23997f6f02\"><code>321bd9d</code></a></td><td><code>Revert changes in test_class_pickling</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db1d5057631df267cd0ce385b15d4e206aef2e6d\"><code>db1d505</code></a></td><td><code>Fix tests in sageinspect</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a09d5ec39cfb6457165e3b86d1afbee27b326fce\"><code>a09d5ec</code></a></td><td><code>Fix test_long</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7060ea12bc95374388037768cb8a3fcc12ac51ea\"><code>7060ea1</code></a></td><td><code>Fix imports in modular decomposition</code></td></tr></table>\n",
    "created_at": "2022-03-23T12:50:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541897",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59cabaa804c40d9225a916c93126d0db25bb5c1c"><code>59cabaa</code></a></td><td><code>Make test methods private</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba260861b9bc0c4d52670db39f502485c8cc62fb"><code>ba26086</code></a></td><td><code>Hide remaining methods starting with test from pytest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3dc0f63ecd2c28e5b052e37a0c1c9a384bff0519"><code>3dc0f63</code></a></td><td><code>Cleanup cmdline</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/321bd9d61707378d9bda9184fd2dfd23997f6f02"><code>321bd9d</code></a></td><td><code>Revert changes in test_class_pickling</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db1d5057631df267cd0ce385b15d4e206aef2e6d"><code>db1d505</code></a></td><td><code>Fix tests in sageinspect</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a09d5ec39cfb6457165e3b86d1afbee27b326fce"><code>a09d5ec</code></a></td><td><code>Fix test_long</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7060ea12bc95374388037768cb8a3fcc12ac51ea"><code>7060ea1</code></a></td><td><code>Fix imports in modular decomposition</code></td></tr></table>




---

archive/issue_events_457371.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-23T12:50:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457371"
}
```



---

archive/issue_events_457372.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-23T12:50:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457372"
}
```



---

archive/issue_comments_541898.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nYo should have a look at:\n\n```\nsage -t --warn-long 126.1 --random-seed=123007730607096856939441742800394041101 src/sage/tests/cmdline.py\n**********************************************************************\nFile \"src/sage/tests/cmdline.py\", line 313, in sage.tests.cmdline._test_executable\nFailed example:\n    out.find(\"All tests passed!\") >= 0\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/tests/cmdline.py\", line 316, in sage.tests.cmdline._test_executable\nFailed example:\n    ret\nExpected:\n    0\nGot:\n    2\n**********************************************************************\n1 item had failures:\n   2 of 217 in sage.tests.cmdline._test_executable\n    [216 tests, 2 failures, 190.78 s]\n```\n\nand\n\n```\nsage -t --warn-long 125.1 --random-seed=216213492016970842904386788649176794439 src/sage/rings/tests.py\n**********************************************************************\nFile \"src/sage/rings/tests.py\", line 416, in sage.rings.tests.?\nFailed example:\n    sage.rings.tests._test_karatsuba_multiplication(ZZ, 6, 5, verbose=True, seed=42)\nExpected:\n    _test_karatsuba_multiplication: ring=Univariate Polynomial Ring in x over Integer Ring, threshold=2\n    (2*x^6 - x^5 - x^4 - 3*x^3 + 4*x^2 + 4*x + 1)*(4*x^4 + x^3 - 2*x^2 - 20*x + 3)\n      (16*x^2)*(-41*x + 1)\n      (x^6 + 2*x^5 + 8*x^4 - x^3 + x^2 + x)*(-x^2 - 4*x + 3)\n      (-x^3 - x - 8)*(-1)\n      (x - 1)*(-x^5 + 3*x^4 - x^3 + 2*x + 1)\n      (x^3 + x^2 + x + 1)*(4*x^3 + 76*x^2 - x - 1)\n      (x^6 - 5*x^4 - x^3 + 6*x^2 + 1)*(5*x^2 - x + 4)\n      (3*x - 2)*(x - 1)\n      (21)*(14*x^5 - x^2 + 4*x + 1)\n      (12*x^5 - 12*x^2 + 2*x + 1)*(26*x^4 + x^3 + 1)\nGot:\n    test_karatsuba_multiplication: ring=Univariate Polynomial Ring in x over Integer Ring, threshold=2\n      (2*x^6 - x^5 - x^4 - 3*x^3 + 4*x^2 + 4*x + 1)*(4*x^4 + x^3 - 2*x^2 - 20*x + 3)\n      (16*x^2)*(-41*x + 1)\n      (x^6 + 2*x^5 + 8*x^4 - x^3 + x^2 + x)*(-x^2 - 4*x + 3)\n      (-x^3 - x - 8)*(-1)\n      (x - 1)*(-x^5 + 3*x^4 - x^3 + 2*x + 1)\n      (x^3 + x^2 + x + 1)*(4*x^3 + 76*x^2 - x - 1)\n      (x^6 - 5*x^4 - x^3 + 6*x^2 + 1)*(5*x^2 - x + 4)\n      (3*x - 2)*(x - 1)\n      (21)*(14*x^5 - x^2 + 4*x + 1)\n      (12*x^5 - 12*x^2 + 2*x + 1)*(26*x^4 + x^3 + 1)\n**********************************************************************\n1 item had failures:\n   1 of   7 in sage.rings.tests.?\n    [54 tests, 1 failure, 20.02 s]\n```",
    "created_at": "2022-03-24T08:15:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541898",
    "user": "https://github.com/soehms"
}
```

<div id="comment:4" align="right">comment:4</div>

Yo should have a look at:

```
sage -t --warn-long 126.1 --random-seed=123007730607096856939441742800394041101 src/sage/tests/cmdline.py
**********************************************************************
File "src/sage/tests/cmdline.py", line 313, in sage.tests.cmdline._test_executable
Failed example:
    out.find("All tests passed!") >= 0
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/tests/cmdline.py", line 316, in sage.tests.cmdline._test_executable
Failed example:
    ret
Expected:
    0
Got:
    2
**********************************************************************
1 item had failures:
   2 of 217 in sage.tests.cmdline._test_executable
    [216 tests, 2 failures, 190.78 s]
```

and

```
sage -t --warn-long 125.1 --random-seed=216213492016970842904386788649176794439 src/sage/rings/tests.py
**********************************************************************
File "src/sage/rings/tests.py", line 416, in sage.rings.tests.?
Failed example:
    sage.rings.tests._test_karatsuba_multiplication(ZZ, 6, 5, verbose=True, seed=42)
Expected:
    _test_karatsuba_multiplication: ring=Univariate Polynomial Ring in x over Integer Ring, threshold=2
    (2*x^6 - x^5 - x^4 - 3*x^3 + 4*x^2 + 4*x + 1)*(4*x^4 + x^3 - 2*x^2 - 20*x + 3)
      (16*x^2)*(-41*x + 1)
      (x^6 + 2*x^5 + 8*x^4 - x^3 + x^2 + x)*(-x^2 - 4*x + 3)
      (-x^3 - x - 8)*(-1)
      (x - 1)*(-x^5 + 3*x^4 - x^3 + 2*x + 1)
      (x^3 + x^2 + x + 1)*(4*x^3 + 76*x^2 - x - 1)
      (x^6 - 5*x^4 - x^3 + 6*x^2 + 1)*(5*x^2 - x + 4)
      (3*x - 2)*(x - 1)
      (21)*(14*x^5 - x^2 + 4*x + 1)
      (12*x^5 - 12*x^2 + 2*x + 1)*(26*x^4 + x^3 + 1)
Got:
    test_karatsuba_multiplication: ring=Univariate Polynomial Ring in x over Integer Ring, threshold=2
      (2*x^6 - x^5 - x^4 - 3*x^3 + 4*x^2 + 4*x + 1)*(4*x^4 + x^3 - 2*x^2 - 20*x + 3)
      (16*x^2)*(-41*x + 1)
      (x^6 + 2*x^5 + 8*x^4 - x^3 + x^2 + x)*(-x^2 - 4*x + 3)
      (-x^3 - x - 8)*(-1)
      (x - 1)*(-x^5 + 3*x^4 - x^3 + 2*x + 1)
      (x^3 + x^2 + x + 1)*(4*x^3 + 76*x^2 - x - 1)
      (x^6 - 5*x^4 - x^3 + 6*x^2 + 1)*(5*x^2 - x + 4)
      (3*x - 2)*(x - 1)
      (21)*(14*x^5 - x^2 + 4*x + 1)
      (12*x^5 - 12*x^2 + 2*x + 1)*(26*x^4 + x^3 + 1)
**********************************************************************
1 item had failures:
   1 of   7 in sage.rings.tests.?
    [54 tests, 1 failure, 20.02 s]
```



---

archive/issue_comments_541899.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dec7b7bde0d64721bb1138ebe50a24304bf42ecf\"><code>dec7b7b</code></a></td><td><code>Fix doctest in rings</code></td></tr></table>\n",
    "created_at": "2022-03-24T08:53:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541899",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dec7b7bde0d64721bb1138ebe50a24304bf42ecf"><code>dec7b7b</code></a></td><td><code>Fix doctest in rings</code></td></tr></table>




---

archive/issue_comments_541900.json:
```json
{
    "body": "Changed commit from **[`7060ea1`](https://github.com/sagemath/sagetrac-mirror/commit/7060ea12bc95374388037768cb8a3fcc12ac51ea)** to **[`dec7b7b`](https://github.com/sagemath/sagetrac-mirror/commit/dec7b7bde0d64721bb1138ebe50a24304bf42ecf)**",
    "created_at": "2022-03-24T08:53:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541900",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7060ea1`](https://github.com/sagemath/sagetrac-mirror/commit/7060ea12bc95374388037768cb8a3fcc12ac51ea)** to **[`dec7b7b`](https://github.com/sagemath/sagetrac-mirror/commit/dec7b7bde0d64721bb1138ebe50a24304bf42ecf)**



---

archive/issue_comments_541901.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n@soehms, thanks for having a look. The first issue you mention also exists in `develop` and I made some progress in fixing it at #33550. The second issue is now fixed.",
    "created_at": "2022-03-24T12:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541901",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:6" align="right">comment:6</div>

@soehms, thanks for having a look. The first issue you mention also exists in `develop` and I made some progress in fixing it at #33550. The second issue is now fixed.



---

archive/issue_comments_541902.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nTesting with the command-line from the ticket description of #31924:\n\n```\n$ ./sage -tp src/sage/numerical/backends src/sage/symbolic/expression.pyx src/sage/manifolds/differentiable/symplectic_form_test.py \ntoo many failed tests, not using stored timings\nRunning doctests with ID 2022-03-24-12-10-39-2142352f.\nUsing --optional=4ti2,buckygen,ccache,cryptominisat,debugpy,e_antic,gap_packages,homebrew,igraph,jupymake,latte_int,libsemigroups,lidia,lrslib,meataxe,normaliz,pip,polytopes_db_4d,pynormaliz,sage,sage_spkg,texttable\nFeatures to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,nauty,palp,pandoc,pdf2svg,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib\nSorting sources by runtime so that slower doctests are run first....\nDoctesting 27 files using 8 threads.\nsage -t --random-seed=241138219171579094251943417982594901397 src/sage/numerical/backends/interactivelp_backend.pxd\n    [0 tests, 0.00 s]\n[...]\nsage -t --random-seed=241138219171579094251943417982594901397 src/sage/numerical/backends/interactivelp_backend.pyx\n    [266 tests, 5.13 s]\nsage -t --random-seed=241138219171579094251943417982594901397 src/sage/symbolic/expression.pyx\n    [3070 tests, 35.91 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 36.7 seconds\n    cpu time: 41.2 seconds\n    cumulative wall time: 48.9 seconds\nFeatures detected for doctesting: sage.rings.number_field\n============================================================================================================ test session starts ============================================================================================================\nplatform darwin -- Python 3.10.2, pytest-7.0.1, pluggy-1.0.0\nrootdir: /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src, configfile: tox.ini\ncollected 0 items                                                                                                                                                                                                                           \n\n=========================================================================================================== no tests ran in 0.01s ===========================================================================================================\nERROR: not found: /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/symbolic/expression.pyx\n(no name '/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/symbolic/expression.pyx' in any of [])\n```",
    "created_at": "2022-03-24T19:15:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541902",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Testing with the command-line from the ticket description of #31924:

```
$ ./sage -tp src/sage/numerical/backends src/sage/symbolic/expression.pyx src/sage/manifolds/differentiable/symplectic_form_test.py 
too many failed tests, not using stored timings
Running doctests with ID 2022-03-24-12-10-39-2142352f.
Using --optional=4ti2,buckygen,ccache,cryptominisat,debugpy,e_antic,gap_packages,homebrew,igraph,jupymake,latte_int,libsemigroups,lidia,lrslib,meataxe,normaliz,pip,polytopes_db_4d,pynormaliz,sage,sage_spkg,texttable
Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,nauty,palp,pandoc,pdf2svg,pdftocairo,plantri,polytopes_db,polytopes_db_4d,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib
Sorting sources by runtime so that slower doctests are run first....
Doctesting 27 files using 8 threads.
sage -t --random-seed=241138219171579094251943417982594901397 src/sage/numerical/backends/interactivelp_backend.pxd
    [0 tests, 0.00 s]
[...]
sage -t --random-seed=241138219171579094251943417982594901397 src/sage/numerical/backends/interactivelp_backend.pyx
    [266 tests, 5.13 s]
sage -t --random-seed=241138219171579094251943417982594901397 src/sage/symbolic/expression.pyx
    [3070 tests, 35.91 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 36.7 seconds
    cpu time: 41.2 seconds
    cumulative wall time: 48.9 seconds
Features detected for doctesting: sage.rings.number_field
============================================================================================================ test session starts ============================================================================================================
platform darwin -- Python 3.10.2, pytest-7.0.1, pluggy-1.0.0
rootdir: /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src, configfile: tox.ini
collected 0 items                                                                                                                                                                                                                           

=========================================================================================================== no tests ran in 0.01s ===========================================================================================================
ERROR: not found: /Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/symbolic/expression.pyx
(no name '/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/symbolic/expression.pyx' in any of [])
```



---

archive/issue_comments_541903.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThere's a (trivial) merge conflict with #32975, best to merge in to make it easier to test.",
    "created_at": "2022-03-24T19:17:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541903",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

There's a (trivial) merge conflict with #32975, best to merge in to make it easier to test.



---

archive/issue_comments_541904.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nTypo: `skip_as_false_positve` -> `skip_as_false_positive` (2 times)",
    "created_at": "2022-03-24T21:11:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541904",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Typo: `skip_as_false_positve` -> `skip_as_false_positive` (2 times)



---

archive/issue_comments_541905.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nOther than [comment:7](#comment%3A7), [comment:8](#comment%3A8), [comment:9](#comment%3A9), it looks good. \n\nI've tested it by itself (it makes a clear improvement - the remaining failures discussed in [comment:6](#comment%3A6) and [comment:7](#comment%3A7) are also present in the current beta).\n\nIt also works well with #31924 merged (it does not create new problems).",
    "created_at": "2022-03-24T21:15:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541905",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Other than [comment:7](#comment%3A7), [comment:8](#comment%3A8), [comment:9](#comment%3A9), it looks good. 

I've tested it by itself (it makes a clear improvement - the remaining failures discussed in [comment:6](#comment%3A6) and [comment:7](#comment%3A7) are also present in the current beta).

It also works well with #31924 merged (it does not create new problems).



---

archive/issue_comments_541906.json:
```json
{
    "body": "Reviewer: **Sebastian Oehms, Matthias Koeppe**",
    "created_at": "2022-03-24T21:25:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541906",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Sebastian Oehms, Matthias Koeppe**



---

archive/issue_events_457373.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-24T21:44:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457373"
}
```



---

archive/issue_events_457374.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-24T21:44:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457374"
}
```



---

archive/issue_comments_541907.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@tobiasdiez](#comment%3A6):\n> @soehms, thanks for having a look. The first issue you mention also exists in `develop` and I made some progress in fixing it at #33550. The second issue is now fixed.\n\nMerging with #33550 I had to resolve some conflics. So I think it would make sence to have it here as dependency.\n\nIm not really familiar with `pytest`. Thus, I can check that this branch does what it is supposed to. But I'm not the right person to evaluate the code.\nI think it would be helpful, if the hook function `pytest_collection_modifyitems` (and maybe other function and classes in `conftest.py`, as well) would have a docstring\nexplaining what this hook is good for (with pointers to the documentation) and why we need to use it here (in more than just one line).\n\nTogether with #33550 the behavior with respect to `src/sage/tests/cmdline.py` remains unchanged. Further, I get the following warnings:\n\n```\nDoctesting 3 files using 4 threads.\nsage -t --long --warn-long 124.6 --random-seed=329268236894550985110801561272292236637 src/sage/misc/explain_pickle.py\n    [329 tests, 0.52 s]\nsage -t --long --warn-long 124.6 --random-seed=329268236894550985110801561272292236637 src/sage/schemes/elliptic_curves/kraus.py\n    [142 tests, 24.97 s]\nsage -t --long --warn-long 124.6 --random-seed=329268236894550985110801561272292236637 src/sage/symbolic/relation.py\n    [393 tests, 28.02 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 28.6 seconds\n    cpu time: 51.6 seconds\n    cumulative wall time: 53.5 seconds\nFeatures detected for doctesting:\n==================================================================================================================== test session starts ====================================================================================================================\nplatform linux -- Python 3.10.2, pytest-7.1.1, pluggy-1.0.0\nrootdir: /home/sebastian/devel/sage/src, configfile: tox.ini\ncollected 7 items\n\nsrc/sage/misc/explain_pickle.py s                                                                                                                                                                                                                     [ 14%]\nsrc/sage/schemes/elliptic_curves/kraus.py sssss                                                                                                                                                                                                       [ 85%]\nsrc/sage/symbolic/relation.py s                                                                                                                                                                                                                       [100%]\n\n===================================================================================================================== warnings summary ======================================================================================================================\nsrc/sage/misc/explain_pickle.py:2723\n  /home/sebastian/devel/sage/src/sage/misc/explain_pickle.py:2723: PytestCollectionWarning: cannot collect test class 'TestReduceGetinitargs' because it has a __init__ constructor (from: sage/misc/explain_pickle.py)\n    class TestReduceGetinitargs:\n\nsrc/sage/misc/explain_pickle.py:2775\n  /home/sebastian/devel/sage/src/sage/misc/explain_pickle.py:2775: PytestCollectionWarning: cannot collect test class 'TestReduceNoGetinitargs' because it has a __init__ constructor (from: sage/misc/explain_pickle.py)\n    class TestReduceNoGetinitargs:\n\nsrc/sage/misc/explain_pickle.py:2813\n  /home/sebastian/devel/sage/src/sage/misc/explain_pickle.py:2813: PytestCollectionWarning: cannot collect test class 'TestAppendList' because it has a __init__ constructor (from: sage/misc/explain_pickle.py)\n    class TestAppendList(list):\n\nsrc/sage/misc/explain_pickle.py:2861\n  /home/sebastian/devel/sage/src/sage/misc/explain_pickle.py:2861: PytestCollectionWarning: cannot collect test class 'TestAppendNonlist' because it has a __init__ constructor (from: sage/misc/explain_pickle.py)\n    class TestAppendNonlist(object):\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n============================================================================================================== 7 skipped, 4 warnings in 0.18s ===============================================================================================================\n```\n\nAre these expected?",
    "created_at": "2022-03-25T08:41:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541907",
    "user": "https://github.com/soehms"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@tobiasdiez](#comment%3A6):
> @soehms, thanks for having a look. The first issue you mention also exists in `develop` and I made some progress in fixing it at #33550. The second issue is now fixed.

Merging with #33550 I had to resolve some conflics. So I think it would make sence to have it here as dependency.

Im not really familiar with `pytest`. Thus, I can check that this branch does what it is supposed to. But I'm not the right person to evaluate the code.
I think it would be helpful, if the hook function `pytest_collection_modifyitems` (and maybe other function and classes in `conftest.py`, as well) would have a docstring
explaining what this hook is good for (with pointers to the documentation) and why we need to use it here (in more than just one line).

Together with #33550 the behavior with respect to `src/sage/tests/cmdline.py` remains unchanged. Further, I get the following warnings:

```
Doctesting 3 files using 4 threads.
sage -t --long --warn-long 124.6 --random-seed=329268236894550985110801561272292236637 src/sage/misc/explain_pickle.py
    [329 tests, 0.52 s]
sage -t --long --warn-long 124.6 --random-seed=329268236894550985110801561272292236637 src/sage/schemes/elliptic_curves/kraus.py
    [142 tests, 24.97 s]
sage -t --long --warn-long 124.6 --random-seed=329268236894550985110801561272292236637 src/sage/symbolic/relation.py
    [393 tests, 28.02 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 28.6 seconds
    cpu time: 51.6 seconds
    cumulative wall time: 53.5 seconds
Features detected for doctesting:
==================================================================================================================== test session starts ====================================================================================================================
platform linux -- Python 3.10.2, pytest-7.1.1, pluggy-1.0.0
rootdir: /home/sebastian/devel/sage/src, configfile: tox.ini
collected 7 items

src/sage/misc/explain_pickle.py s                                                                                                                                                                                                                     [ 14%]
src/sage/schemes/elliptic_curves/kraus.py sssss                                                                                                                                                                                                       [ 85%]
src/sage/symbolic/relation.py s                                                                                                                                                                                                                       [100%]

===================================================================================================================== warnings summary ======================================================================================================================
src/sage/misc/explain_pickle.py:2723
  /home/sebastian/devel/sage/src/sage/misc/explain_pickle.py:2723: PytestCollectionWarning: cannot collect test class 'TestReduceGetinitargs' because it has a __init__ constructor (from: sage/misc/explain_pickle.py)
    class TestReduceGetinitargs:

src/sage/misc/explain_pickle.py:2775
  /home/sebastian/devel/sage/src/sage/misc/explain_pickle.py:2775: PytestCollectionWarning: cannot collect test class 'TestReduceNoGetinitargs' because it has a __init__ constructor (from: sage/misc/explain_pickle.py)
    class TestReduceNoGetinitargs:

src/sage/misc/explain_pickle.py:2813
  /home/sebastian/devel/sage/src/sage/misc/explain_pickle.py:2813: PytestCollectionWarning: cannot collect test class 'TestAppendList' because it has a __init__ constructor (from: sage/misc/explain_pickle.py)
    class TestAppendList(list):

src/sage/misc/explain_pickle.py:2861
  /home/sebastian/devel/sage/src/sage/misc/explain_pickle.py:2861: PytestCollectionWarning: cannot collect test class 'TestAppendNonlist' because it has a __init__ constructor (from: sage/misc/explain_pickle.py)
    class TestAppendNonlist(object):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
============================================================================================================== 7 skipped, 4 warnings in 0.18s ===============================================================================================================
```

Are these expected?



---

archive/issue_comments_541908.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5851f010757ba0ed077cdc0e14449a93f697865b\"><code>5851f01</code></a></td><td><code>Improve doctest interaction with pytest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e7177158b7a24826a449d61cd79266a58298fca7\"><code>e717715</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into public/tests/doctests_pytest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c5d5a9af0c0c217b480dea16048758796548186\"><code>9c5d5a9</code></a></td><td><code>Fix docs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c7bf1711fbb4647072d225980f9fe011d419306\"><code>0c7bf17</code></a></td><td><code>Add documentation for test:pytest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01f376c26194faa54a219a4f0ed562ba525f19de\"><code>01f376c</code></a></td><td><code>Use endswith to test for pytest files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b7da1bdc63dc9caa270dd11a7f89e0745c8e1ae\"><code>1b7da1b</code></a></td><td><code>Merge remote-tracking branch 'trac/public/tests/doctests_pytest' into public/tests/pytest_wrong_test_methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3cab51db41dbc2374bef98658d5e0fa90ab37246\"><code>3cab51d</code></a></td><td><code>Fix spelling</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6312ec2b0b453a3a0f6f9a88546e0e913f16a24\"><code>e6312ec</code></a></td><td><code>Add docs to newly added pytest hook</code></td></tr></table>\n",
    "created_at": "2022-03-25T11:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541908",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5851f010757ba0ed077cdc0e14449a93f697865b"><code>5851f01</code></a></td><td><code>Improve doctest interaction with pytest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e7177158b7a24826a449d61cd79266a58298fca7"><code>e717715</code></a></td><td><code>Merge remote-tracking branch 'origin/develop' into public/tests/doctests_pytest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c5d5a9af0c0c217b480dea16048758796548186"><code>9c5d5a9</code></a></td><td><code>Fix docs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c7bf1711fbb4647072d225980f9fe011d419306"><code>0c7bf17</code></a></td><td><code>Add documentation for test:pytest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01f376c26194faa54a219a4f0ed562ba525f19de"><code>01f376c</code></a></td><td><code>Use endswith to test for pytest files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b7da1bdc63dc9caa270dd11a7f89e0745c8e1ae"><code>1b7da1b</code></a></td><td><code>Merge remote-tracking branch 'trac/public/tests/doctests_pytest' into public/tests/pytest_wrong_test_methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3cab51db41dbc2374bef98658d5e0fa90ab37246"><code>3cab51d</code></a></td><td><code>Fix spelling</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6312ec2b0b453a3a0f6f9a88546e0e913f16a24"><code>e6312ec</code></a></td><td><code>Add docs to newly added pytest hook</code></td></tr></table>




---

archive/issue_comments_541909.json:
```json
{
    "body": "Changed commit from **[`dec7b7b`](https://github.com/sagemath/sagetrac-mirror/commit/dec7b7bde0d64721bb1138ebe50a24304bf42ecf)** to **[`e6312ec`](https://github.com/sagemath/sagetrac-mirror/commit/e6312ec2b0b453a3a0f6f9a88546e0e913f16a24)**",
    "created_at": "2022-03-25T11:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541909",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dec7b7b`](https://github.com/sagemath/sagetrac-mirror/commit/dec7b7bde0d64721bb1138ebe50a24304bf42ecf)** to **[`e6312ec`](https://github.com/sagemath/sagetrac-mirror/commit/e6312ec2b0b453a3a0f6f9a88546e0e913f16a24)**



---

archive/issue_comments_541910.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@mkoeppe](#comment%3A8):\n> There's a (trivial) merge conflict with #32975, best to merge in to make it easier to test.\n\nMerged!",
    "created_at": "2022-03-25T12:15:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541910",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@mkoeppe](#comment%3A8):
> There's a (trivial) merge conflict with #32975, best to merge in to make it easier to test.

Merged!



---

archive/issue_comments_541911.json:
```json
{
    "body": "Dependencies: **#32975**",
    "created_at": "2022-03-25T12:15:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541911",
    "user": "https://github.com/tobiasdiez"
}
```

Dependencies: **#32975**



---

archive/issue_events_457375.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-25T12:15:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457375"
}
```



---

archive/issue_events_457376.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-25T12:15:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457376"
}
```



---

archive/issue_comments_541912.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@mkoeppe](#comment%3A9):\n> Typo: `skip_as_false_positve` -> `skip_as_false_positive` (2 times)\n\nFixed!",
    "created_at": "2022-03-25T12:15:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541912",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@mkoeppe](#comment%3A9):
> Typo: `skip_as_false_positve` -> `skip_as_false_positive` (2 times)

Fixed!



---

archive/issue_comments_541913.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@mkoeppe](#comment%3A7):\n> Testing with the command-line from the ticket description of #31924:\n> \n> ```\n> $ ./sage -tp src/sage/numerical/backends src/sage/symbolic/expression.pyx src/sage/manifolds/differentiable/symplectic_form_test.py \n> ```\n\nThis is now #33560.",
    "created_at": "2022-03-25T12:20:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541913",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@mkoeppe](#comment%3A7):
> Testing with the command-line from the ticket description of #31924:
> 
> ```
> $ ./sage -tp src/sage/numerical/backends src/sage/symbolic/expression.pyx src/sage/manifolds/differentiable/symplectic_form_test.py 
> ```

This is now #33560.



---

archive/issue_comments_541914.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@soehms](#comment%3A13):\n> Replying to [@tobiasdiez](#comment%3A6):\n> > @soehms, thanks for having a look. The first issue you mention also exists in `develop` and I made some progress in fixing it at #33550. The second issue is now fixed.\n> \n> \n> Merging with #33550 I had to resolve some conflics. So I think it would make sence to have it here as dependency.\n\nSince both tickets are still under review, I would propose to merge the first positively-reviewed ticket in the other one (to facilitate reviewing). Is this okay?",
    "created_at": "2022-03-25T12:22:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541914",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@soehms](#comment%3A13):
> Replying to [@tobiasdiez](#comment%3A6):
> > @soehms, thanks for having a look. The first issue you mention also exists in `develop` and I made some progress in fixing it at #33550. The second issue is now fixed.
> 
> 
> Merging with #33550 I had to resolve some conflics. So I think it would make sence to have it here as dependency.

Since both tickets are still under review, I would propose to merge the first positively-reviewed ticket in the other one (to facilitate reviewing). Is this okay?



---

archive/issue_comments_541915.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@soehms](#comment%3A13):\n> I think it would be helpful, if the hook function `pytest_collection_modifyitems` (and maybe other function and classes in `conftest.py`, as well) would have a docstring\n> explaining what this hook is good for (with pointers to the documentation) and why we need to use it here (in more than just one line).\n\nGood suggestion! Implemented.",
    "created_at": "2022-03-25T12:22:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541915",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@soehms](#comment%3A13):
> I think it would be helpful, if the hook function `pytest_collection_modifyitems` (and maybe other function and classes in `conftest.py`, as well) would have a docstring
> explaining what this hook is good for (with pointers to the documentation) and why we need to use it here (in more than just one line).

Good suggestion! Implemented.



---

archive/issue_comments_541916.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@soehms](#comment%3A13):\n> Are these expected?\n\nNot really. It's the same issue as here with the test functions. These classes are discovered by pytest, which treats them as pytest test classes and fails. I've opened #33561 for this.",
    "created_at": "2022-03-25T12:25:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541916",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@soehms](#comment%3A13):
> Are these expected?

Not really. It's the same issue as here with the test functions. These classes are discovered by pytest, which treats them as pytest test classes and fails. I've opened #33561 for this.



---

archive/issue_comments_541917.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nLGTM. You can set to positive review or wait if Sebastian has further comments.",
    "created_at": "2022-03-25T15:42:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541917",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

LGTM. You can set to positive review or wait if Sebastian has further comments.



---

archive/issue_comments_541918.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@tobiasdiez](#comment%3A19):\n> Replying to [@soehms](#comment%3A13):\n> Since both tickets are still under review, I would propose to merge the first positively-reviewed ticket in the other one (to facilitate reviewing). Is this okay?\n\nYes, thats o.K.",
    "created_at": "2022-03-25T17:35:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541918",
    "user": "https://github.com/soehms"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@tobiasdiez](#comment%3A19):
> Replying to [@soehms](#comment%3A13):
> Since both tickets are still under review, I would propose to merge the first positively-reviewed ticket in the other one (to facilitate reviewing). Is this okay?

Yes, thats o.K.



---

archive/issue_comments_541919.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@mkoeppe](#comment%3A22):\n> LGTM. You can set to positive review or wait if Sebastian has further comments.\n\nLGTM as well!",
    "created_at": "2022-03-25T17:35:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541919",
    "user": "https://github.com/soehms"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@mkoeppe](#comment%3A22):
> LGTM. You can set to positive review or wait if Sebastian has further comments.

LGTM as well!



---

archive/issue_events_457377.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2022-03-25T17:35:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457377"
}
```



---

archive/issue_events_457378.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2022-03-25T17:35:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457378"
}
```



---

archive/issue_comments_541920.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThanks for the quick review!",
    "created_at": "2022-03-25T18:45:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541920",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:25" align="right">comment:25</div>

Thanks for the quick review!



---

archive/issue_events_457379.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2022-03-25T22:34:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457379"
}
```



---

archive/issue_events_457380.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2022-03-25T22:34:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457380"
}
```



---

archive/issue_comments_541921.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nSorry, that was a little bit too fast. You accidently dropped a line from the doctest in `src/sage/tests/cmdline.py`. The first failure (line 313) I reported in [comment:4](https://github.com/sagemath/sage/issues/33549#comment:4) has not been in `develop`.\n\n```diff\n@@ -308,12 +308,11 @@ def test_executable(args, input=\"\", timeout=100.0, pydebug_ignore_warnings=False\n     Now test my_script.sage and the preparsed version my_script.sage.py::\n\n-        sage: (out, err, ret) = test_executable([\"sage\", \"-t\", script])\n         sage: ret\n         0\n         sage: out.find(\"All tests passed!\") >= 0\n         True\n-        sage: (out, err, ret) = test_executable([\"sage\", \"-t\", script_py])\n+        sage: (out, err, ret) = _test_executable([\"sage\", \"-t\", script_py])\n         sage: ret\n```\n\nAs soon as this is fixed you may switch back to positive review.",
    "created_at": "2022-03-25T22:34:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541921",
    "user": "https://github.com/soehms"
}
```

<div id="comment:26" align="right">comment:26</div>

Sorry, that was a little bit too fast. You accidently dropped a line from the doctest in `src/sage/tests/cmdline.py`. The first failure (line 313) I reported in [comment:4](https://github.com/sagemath/sage/issues/33549#comment:4) has not been in `develop`.

```diff
@@ -308,12 +308,11 @@ def test_executable(args, input="", timeout=100.0, pydebug_ignore_warnings=False
     Now test my_script.sage and the preparsed version my_script.sage.py::

-        sage: (out, err, ret) = test_executable(["sage", "-t", script])
         sage: ret
         0
         sage: out.find("All tests passed!") >= 0
         True
-        sage: (out, err, ret) = test_executable(["sage", "-t", script_py])
+        sage: (out, err, ret) = _test_executable(["sage", "-t", script_py])
         sage: ret
```

As soon as this is fixed you may switch back to positive review.



---

archive/issue_comments_541922.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6768bd22e6784a0f062778bde3efecced73ce8b6\"><code>6768bd2</code></a></td><td><code>src/sage/tests/cmdline.py: Restore dropped line in doctest</code></td></tr></table>\n",
    "created_at": "2022-03-26T18:14:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541922",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6768bd22e6784a0f062778bde3efecced73ce8b6"><code>6768bd2</code></a></td><td><code>src/sage/tests/cmdline.py: Restore dropped line in doctest</code></td></tr></table>




---

archive/issue_comments_541923.json:
```json
{
    "body": "Changed commit from **[`e6312ec`](https://github.com/sagemath/sagetrac-mirror/commit/e6312ec2b0b453a3a0f6f9a88546e0e913f16a24)** to **[`6768bd2`](https://github.com/sagemath/sagetrac-mirror/commit/6768bd22e6784a0f062778bde3efecced73ce8b6)**",
    "created_at": "2022-03-26T18:14:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541923",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e6312ec`](https://github.com/sagemath/sagetrac-mirror/commit/e6312ec2b0b453a3a0f6f9a88546e0e913f16a24)** to **[`6768bd2`](https://github.com/sagemath/sagetrac-mirror/commit/6768bd22e6784a0f062778bde3efecced73ce8b6)**



---

archive/issue_events_457381.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-26T18:14:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457381"
}
```



---

archive/issue_events_457382.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-26T18:14:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457382"
}
```



---

archive/issue_comments_541924.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nGood that you spotted this accident, and thanks for already fixing it!",
    "created_at": "2022-03-27T09:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541924",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:29" align="right">comment:29</div>

Good that you spotted this accident, and thanks for already fixing it!



---

archive/issue_events_457383.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-03-27T09:51:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457383"
}
```



---

archive/issue_events_457384.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2022-03-27T09:51:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457384"
}
```



---

archive/issue_comments_541925.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76448545125b616ef20cc4ca20957674c0562357\"><code>7644854</code></a></td><td><code>Fix typo</code></td></tr></table>\n",
    "created_at": "2022-03-27T09:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541925",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76448545125b616ef20cc4ca20957674c0562357"><code>7644854</code></a></td><td><code>Fix typo</code></td></tr></table>




---

archive/issue_comments_541926.json:
```json
{
    "body": "Changed commit from **[`6768bd2`](https://github.com/sagemath/sagetrac-mirror/commit/6768bd22e6784a0f062778bde3efecced73ce8b6)** to **[`7644854`](https://github.com/sagemath/sagetrac-mirror/commit/76448545125b616ef20cc4ca20957674c0562357)**",
    "created_at": "2022-03-27T09:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541926",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6768bd2`](https://github.com/sagemath/sagetrac-mirror/commit/6768bd22e6784a0f062778bde3efecced73ce8b6)** to **[`7644854`](https://github.com/sagemath/sagetrac-mirror/commit/76448545125b616ef20cc4ca20957674c0562357)**



---

archive/issue_comments_541927.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThere was still a small typo in the function name, which I've fixed now.",
    "created_at": "2022-03-27T10:07:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541927",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:31" align="right">comment:31</div>

There was still a small typo in the function name, which I've fixed now.



---

archive/issue_events_457385.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-27T10:07:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457385"
}
```



---

archive/issue_events_457386.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-03-27T10:07:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457386"
}
```



---

archive/issue_comments_541928.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nFWIW, positive review for [SageMath](../wiki/SageMath) 9.6.beta6 plus #31924 and #33549 plus `make pytest` on Apple Silicon M1 Macs with Homebrew up to date, both macOS 11.6.5 (Big Sur) with Xcode 13.2.1 and macOS 12.3 (Monterey) with Xcode 13.3.",
    "created_at": "2022-03-28T01:02:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541928",
    "user": "https://github.com/GMS103"
}
```

<div id="comment:32" align="right">comment:32</div>

FWIW, positive review for [SageMath](../wiki/SageMath) 9.6.beta6 plus #31924 and #33549 plus `make pytest` on Apple Silicon M1 Macs with Homebrew up to date, both macOS 11.6.5 (Big Sur) with Xcode 13.2.1 and macOS 12.3 (Monterey) with Xcode 13.3.



---

archive/issue_events_457387.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-03-30T00:40:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457387"
}
```



---

archive/issue_events_457388.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-03-30T00:40:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457388"
}
```



---

archive/issue_comments_541929.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI am not sure I support giving pytest such high priority over namespace allocation. This is a fairly major change in policy that should be discussed on sage-devel first. Furthermore, you are also hiding functions that used to be public too, which violates Sage's deprecation policy",
    "created_at": "2022-03-30T00:40:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541929",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:33" align="right">comment:33</div>

I am not sure I support giving pytest such high priority over namespace allocation. This is a fairly major change in policy that should be discussed on sage-devel first. Furthermore, you are also hiding functions that used to be public too, which violates Sage's deprecation policy



---

archive/issue_comments_541930.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nIn [#31924 comment:43](https://github.com/sagemath/sage/issues/31924#comment:43), Matthias argues that\n> I think it's fine to rename them if they are only used by doctests in the same module. Then we might argue that it was not really intended to be in the public interface and should have been named _test.... \n\nI agree with him that these test-related methods should have been private from the get-go. Especially since most of them contain an explicit disclaimer ala \"this is intended only for usage in doctests\".\n\nBut if you really have issues with the rename and think it's the right procedure, I can start a discussion on the mailing list.",
    "created_at": "2022-03-30T18:38:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541930",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:34" align="right">comment:34</div>

In [#31924 comment:43](https://github.com/sagemath/sage/issues/31924#comment:43), Matthias argues that
> I think it's fine to rename them if they are only used by doctests in the same module. Then we might argue that it was not really intended to be in the public interface and should have been named _test.... 

I agree with him that these test-related methods should have been private from the get-go. Especially since most of them contain an explicit disclaimer ala "this is intended only for usage in doctests".

But if you really have issues with the rename and think it's the right procedure, I can start a discussion on the mailing list.



---

archive/issue_comments_541931.json:
```json
{
    "body": "Changed branch from **[public/tests/pytest_wrong_test_methods](https://github.com/sagemath/sagetrac-mirror/tree/public/tests/pytest_wrong_test_methods)** to **[`7644854`](https://github.com/sagemath/sagetrac-mirror/commit/76448545125b616ef20cc4ca20957674c0562357)**",
    "created_at": "2022-03-30T22:33:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541931",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/tests/pytest_wrong_test_methods](https://github.com/sagemath/sagetrac-mirror/tree/public/tests/pytest_wrong_test_methods)** to **[`7644854`](https://github.com/sagemath/sagetrac-mirror/commit/76448545125b616ef20cc4ca20957674c0562357)**



---

archive/issue_events_457389.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-30T22:33:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457389"
}
```



---

archive/issue_events_457390.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-30T22:33:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457390"
}
```



---

archive/issue_comments_541932.json:
```json
{
    "body": "Changed branch from **[`7644854`](https://github.com/sagemath/sagetrac-mirror/commit/76448545125b616ef20cc4ca20957674c0562357)** to **[public/tests/pytest_wrong_test_methods](https://github.com/sagemath/sagetrac-mirror/tree/public/tests/pytest_wrong_test_methods)**",
    "created_at": "2022-03-30T22:35:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541932",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[`7644854`](https://github.com/sagemath/sagetrac-mirror/commit/76448545125b616ef20cc4ca20957674c0562357)** to **[public/tests/pytest_wrong_test_methods](https://github.com/sagemath/sagetrac-mirror/tree/public/tests/pytest_wrong_test_methods)**



---

archive/issue_events_457391.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-30T22:35:54Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457391"
}
```



---

archive/issue_comments_541933.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nWell tests work... let me know when it is ready to be merged.",
    "created_at": "2022-03-30T22:36:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541933",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:37" align="right">comment:37</div>

Well tests work... let me know when it is ready to be merged.



---

archive/issue_events_457392.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-30T23:20:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457392"
}
```



---

archive/issue_events_457393.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-03-30T23:26:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457393"
}
```



---

archive/issue_events_457394.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-03-30T23:26:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457394"
}
```



---

archive/issue_comments_541934.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@tobiasdiez](#comment%3A34):\n> In [#31924 comment:43](https://github.com/sagemath/sage/issues/31924#comment:43), Matthias argues that\n> > I think it's fine to rename them if they are only used by doctests in the same module. Then we might argue that it was not really intended to be in the public interface and should have been named _test.... \n> \n> \n> I agree with him that these test-related methods should have been private from the get-go. Especially since most of them contain an explicit disclaimer ala \"this is intended only for usage in doctests\".\n\nIt does not matter what they should have been, just what they are.\n\n> But if you really have issues with the rename and think it's the right procedure, I can start a discussion on the mailing list.\n\nYes: [comment:33](#comment%3A33)",
    "created_at": "2022-03-30T23:26:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541934",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@tobiasdiez](#comment%3A34):
> In [#31924 comment:43](https://github.com/sagemath/sage/issues/31924#comment:43), Matthias argues that
> > I think it's fine to rename them if they are only used by doctests in the same module. Then we might argue that it was not really intended to be in the public interface and should have been named _test.... 
> 
> 
> I agree with him that these test-related methods should have been private from the get-go. Especially since most of them contain an explicit disclaimer ala "this is intended only for usage in doctests".

It does not matter what they should have been, just what they are.

> But if you really have issues with the rename and think it's the right procedure, I can start a discussion on the mailing list.

Yes: [comment:33](#comment%3A33)



---

archive/issue_comments_541935.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nInstead of a policy discussion, perhaps can we move the ticket forward by setting up deprecated aliases for the renamed functions.",
    "created_at": "2022-03-31T01:24:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541935",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">comment:40</div>

Instead of a policy discussion, perhaps can we move the ticket forward by setting up deprecated aliases for the renamed functions.



---

archive/issue_comments_541936.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI strongly think we should not give any package, much less an optional package, any priority over names of public functions without a very good reason. I am also not convinced that we want to move forward with pytest becoming standard either. Both of these need to be discussed on sage-devel, with the first issue for this ticket. You cannot sidestep this. Deprecating the functions is efffectively the same as renaming them as it marks a major policy change.",
    "created_at": "2022-03-31T01:43:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541936",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:41" align="right">comment:41</div>

I strongly think we should not give any package, much less an optional package, any priority over names of public functions without a very good reason. I am also not convinced that we want to move forward with pytest becoming standard either. Both of these need to be discussed on sage-devel, with the first issue for this ticket. You cannot sidestep this. Deprecating the functions is efffectively the same as renaming them as it marks a major policy change.



---

archive/issue_comments_541937.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nWell, function names that are generic. If they are sufficiently unique to the package, then that is fine with me.",
    "created_at": "2022-03-31T01:45:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541937",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:42" align="right">comment:42</div>

Well, function names that are generic. If they are sufficiently unique to the package, then that is fine with me.



---

archive/issue_comments_541938.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nAll of them are unique to the module that they are defined in, and their purpose is to support doctests in the same module. Renaming them from `test_...` to `_test_...` is justified by existing policies, I'd say.",
    "created_at": "2022-03-31T02:00:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541938",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">comment:43</div>

All of them are unique to the module that they are defined in, and their purpose is to support doctests in the same module. Renaming them from `test_...` to `_test_...` is justified by existing policies, I'd say.



---

archive/issue_comments_541939.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nYes, but that is a non sequitur. I agree that renaming them (with deprecation) is within the current policy, but it is the reason for these changes that is the issue. It is about the conflict with an optional package's conventions that are fully reserve a certain class of (natural) function names. Enforcing this (which is done here across the entire Sage library) would give `pytest` very special privileges and status within Sage.",
    "created_at": "2022-03-31T06:51:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541939",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:44" align="right">comment:44</div>

Yes, but that is a non sequitur. I agree that renaming them (with deprecation) is within the current policy, but it is the reason for these changes that is the issue. It is about the conflict with an optional package's conventions that are fully reserve a certain class of (natural) function names. Enforcing this (which is done here across the entire Sage library) would give `pytest` very special privileges and status within Sage.



---

archive/issue_comments_541940.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nI have split out #33612 for the strategy proposed in [comment:40](#comment%3A40), [comment:43](#comment%3A43). As you will see in the ticket description, it is an improvement to the Sage library independent from its motivation for pytest.",
    "created_at": "2022-03-31T13:23:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541940",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

I have split out #33612 for the strategy proposed in [comment:40](#comment%3A40), [comment:43](#comment%3A43). As you will see in the ticket description, it is an improvement to the Sage library independent from its motivation for pytest.



---

archive/issue_comments_541941.json:
```json
{
    "body": "Changed dependencies from **#32975** to **#32975, #33612**",
    "created_at": "2022-03-31T13:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541941",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#32975** to **#32975, #33612**



---

archive/issue_comments_541942.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nThanks Matthias!",
    "created_at": "2022-03-31T14:18:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541942",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:47" align="right">comment:47</div>

Thanks Matthias!



---

archive/issue_comments_541943.json:
```json
{
    "body": "Changed dependencies from **#32975, #33612** to **#32975, #33612, #33617**",
    "created_at": "2022-04-01T05:03:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33549#issuecomment-541943",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#32975, #33612** to **#32975, #33612, #33617**



---

archive/issue_events_457395.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457395"
}
```



---

archive/issue_events_457396.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457396"
}
```



---

archive/issue_events_457397.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-06T19:24:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457397"
}
```



---

archive/issue_events_457398.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-06T19:24:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457398"
}
```



---

archive/issue_events_457399.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-06T19:24:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457399"
}
```



---

archive/issue_events_457400.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-06T19:24:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33549",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33549#event-457400"
}
```
