# Issue 33194: openblas: Update to 0.3.20

archive/issues_032957.json:
```json
{
    "assignees": [],
    "body": "https://github.com/xianyi/OpenBLAS/releases/tag/v0.3.19\nhas various fixes, in particular for Apple M1\n\nhttps://github.com/xianyi/OpenBLAS/releases/tag/v0.3.20\nbrings some fixes including \"fixed miscompilation of AVX512 code in `DYNAMIC_ARCH` builds\"\n\n\nCC:  @vbraun\n\nBranch/Commit: **[91e156a](https://github.com/sagemath/sagetrac-mirror/commit/91e156a8600822ca18786c8cc2846c9918742c60)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33194_\n\n",
    "closed_at": "2022-02-27T22:00:25Z",
    "created_at": "2022-01-17T03:59:22Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "openblas: Update to 0.3.20",
    "type": "issue",
    "updated_at": "2022-02-27T22:00:25Z",
    "url": "https://github.com/sagemath/sage/issues/33194",
    "user": "https://github.com/mkoeppe"
}
```
https://github.com/xianyi/OpenBLAS/releases/tag/v0.3.19
has various fixes, in particular for Apple M1

https://github.com/xianyi/OpenBLAS/releases/tag/v0.3.20
brings some fixes including "fixed miscompilation of AVX512 code in `DYNAMIC_ARCH` builds"


CC:  @vbraun

Branch/Commit: **[91e156a](https://github.com/sagemath/sagetrac-mirror/commit/91e156a8600822ca18786c8cc2846c9918742c60)**

Reviewer: **Travis Scrimshaw**

Author: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/33194_





---

archive/issue_events_438419.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-17T03:59:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-438419"
}
```



---

archive/issue_events_438420.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-17T03:59:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-438420"
}
```



---

archive/issue_events_438421.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-17T03:59:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-438421"
}
```



---

archive/issue_events_438422.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-17T03:59:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-438422"
}
```



---

archive/issue_comments_539493.json:
```json
{
    "body": "Dependencies: **#33191**",
    "created_at": "2022-01-17T04:41:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-539493",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#33191**



---

archive/issue_comments_539494.json:
```json
{
    "body": "Branch: **[u/mkoeppe/openblas__update_to_0_3_19](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/openblas__update_to_0_3_19)**",
    "created_at": "2022-01-17T06:15:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-539494",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/openblas__update_to_0_3_19](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/openblas__update_to_0_3_19)**



---

archive/issue_comments_539495.json:
```json
{
    "body": "Changed dependencies from **#33191** to none",
    "created_at": "2022-01-17T06:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-539495",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#33191** to none



---

archive/issue_comments_539496.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2022-01-17T06:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-539496",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_438423.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-17T06:16:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-438423"
}
```



---

archive/issue_comments_539497.json:
```json
{
    "body": "Commit: **[f2a952e](https://github.com/sagemath/sagetrac-mirror/commit/f2a952eda732a329756c868b53e126f450c082aa)**",
    "created_at": "2022-01-17T06:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-539497",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[f2a952e](https://github.com/sagemath/sagetrac-mirror/commit/f2a952eda732a329756c868b53e126f450c082aa)**



---

archive/issue_comments_539498.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e79caf980e71a64d3c071007503c46283519cba8\">e79caf9</a></td><td><code>build/pkgs/openblas: Update to 0.3.19</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2a952eda732a329756c868b53e126f450c082aa\">f2a952e</a></td><td><code>build/pkgs/openblas/patches/trsv-fix-from-pr-3422.patch: Remove (included in 0.3.19)</code></td></tr></table>\n",
    "created_at": "2022-01-17T06:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-539498",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">Comment 3</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e79caf980e71a64d3c071007503c46283519cba8">e79caf9</a></td><td><code>build/pkgs/openblas: Update to 0.3.19</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2a952eda732a329756c868b53e126f450c082aa">f2a952e</a></td><td><code>build/pkgs/openblas/patches/trsv-fix-from-pr-3422.patch: Remove (included in 0.3.19)</code></td></tr></table>




---

archive/issue_comments_539499.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nSetting this to 9.6 because on users on M1 can build successfully with homebrew's openblas (0.3.19), [#30592 comment:61](https://github.com/sagemath/sage/issues/30592#comment:61)",
    "created_at": "2022-01-17T06:27:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-539499",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">Comment 4</div>

Setting this to 9.6 because on users on M1 can build successfully with homebrew's openblas (0.3.19), [#30592 comment:61](https://github.com/sagemath/sage/issues/30592#comment:61)



---

archive/issue_events_438424.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-17T06:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-438424"
}
```



---

archive/issue_events_438425.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-17T06:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-438425"
}
```



---

archive/issue_comments_539500.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nThe patchbot (experimental version that can handle packages) has found a failing doctest \n\n```\nFile \"src/sage/plot/plot.py\", line 1782, in sage.plot.plot.plot\nFailed example:\n    plot(f, (x, -3.5, 3.5), detect_poles='show', exclude=[-3..3], ymin=-5, ymax=5)\nExpected:\n    Graphics object consisting of 12 graphics primitives\nGot:\n    Graphics object consisting of 13 graphics primitives\n```\n\nnot clear to me if and how this is related to the update here",
    "created_at": "2022-01-24T17:26:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-539500",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">Comment 5</div>

The patchbot (experimental version that can handle packages) has found a failing doctest 

```
File "src/sage/plot/plot.py", line 1782, in sage.plot.plot.plot
Failed example:
    plot(f, (x, -3.5, 3.5), detect_poles='show', exclude=[-3..3], ymin=-5, ymax=5)
Expected:
    Graphics object consisting of 12 graphics primitives
Got:
    Graphics object consisting of 13 graphics primitives
```

not clear to me if and how this is related to the update here



---

archive/issue_comments_539501.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nUnrelated, this is #33129",
    "created_at": "2022-01-24T19:27:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-539501",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">Comment 6</div>

Unrelated, this is #33129



---

archive/issue_comments_539502.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nand 0.3.20 is out",
    "created_at": "2022-02-25T05:32:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-539502",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">Comment 7</div>

and 0.3.20 is out



---

archive/issue_comments_539503.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b34b162b047f12d1a039b0e2dc9825f7db62cda0\">b34b162</a></td><td><code>build/pkgs/openblas: Update to 0.3.19</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d221923cc4fc212764c12ac98a91b020389abcd\">7d22192</a></td><td><code>build/pkgs/openblas/patches/trsv-fix-from-pr-3422.patch: Remove (included in 0.3.19)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91e156a8600822ca18786c8cc2846c9918742c60\">91e156a</a></td><td><code>build/pkgs/openblas: Update to 0.3.20</code></td></tr></table>\n",
    "created_at": "2022-02-25T05:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-539503",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8" align="right">Comment 8</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b34b162b047f12d1a039b0e2dc9825f7db62cda0">b34b162</a></td><td><code>build/pkgs/openblas: Update to 0.3.19</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d221923cc4fc212764c12ac98a91b020389abcd">7d22192</a></td><td><code>build/pkgs/openblas/patches/trsv-fix-from-pr-3422.patch: Remove (included in 0.3.19)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91e156a8600822ca18786c8cc2846c9918742c60">91e156a</a></td><td><code>build/pkgs/openblas: Update to 0.3.20</code></td></tr></table>




---

archive/issue_comments_539504.json:
```json
{
    "body": "Changed commit from **[f2a952e](https://github.com/sagemath/sagetrac-mirror/commit/f2a952eda732a329756c868b53e126f450c082aa)** to **[91e156a](https://github.com/sagemath/sagetrac-mirror/commit/91e156a8600822ca18786c8cc2846c9918742c60)**",
    "created_at": "2022-02-25T05:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-539504",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f2a952e](https://github.com/sagemath/sagetrac-mirror/commit/f2a952eda732a329756c868b53e126f450c082aa)** to **[91e156a](https://github.com/sagemath/sagetrac-mirror/commit/91e156a8600822ca18786c8cc2846c9918742c60)**



---

archive/issue_comments_539505.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n https://github.com/xianyi/OpenBLAS/releases/tag/v0.3.19\n has various fixes, in particular for Apple M1\n \n+https://github.com/xianyi/OpenBLAS/releases/tag/v0.3.20\n+brings some fixes including \"fixed miscompilation of AVX512 code in `DYNAMIC_ARCH` builds\"\n+\n``````\n",
    "created_at": "2022-02-25T05:35:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-539505",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
 https://github.com/xianyi/OpenBLAS/releases/tag/v0.3.19
 has various fixes, in particular for Apple M1
 
+https://github.com/xianyi/OpenBLAS/releases/tag/v0.3.20
+brings some fixes including "fixed miscompilation of AVX512 code in `DYNAMIC_ARCH` builds"
+
``````




---

archive/issue_events_438426.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-25T05:35:57Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "title_is": "openblas: Update to 0.3.20",
    "title_was": "openblas: Update to 0.3.19",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-438426"
}
```



---

archive/issue_comments_539506.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nBuilds for me on Ubuntu. It will be good to get this in quickly and tested by the other devs.",
    "created_at": "2022-02-27T07:55:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-539506",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">Comment 10</div>

Builds for me on Ubuntu. It will be good to get this in quickly and tested by the other devs.



---

archive/issue_events_438427.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-02-27T07:55:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-438427"
}
```



---

archive/issue_events_438428.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-02-27T07:55:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-438428"
}
```



---

archive/issue_comments_539507.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2022-02-27T07:55:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-539507",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_539508.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/openblas__update_to_0_3_19](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/openblas__update_to_0_3_19)** to **[91e156a](https://github.com/sagemath/sagetrac-mirror/commit/91e156a8600822ca18786c8cc2846c9918742c60)**",
    "created_at": "2022-02-27T22:00:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-539508",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/openblas__update_to_0_3_19](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/openblas__update_to_0_3_19)** to **[91e156a](https://github.com/sagemath/sagetrac-mirror/commit/91e156a8600822ca18786c8cc2846c9918742c60)**



---

archive/issue_events_438429.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-27T22:00:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-438429"
}
```



---

archive/issue_events_438430.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "70a841107eeb79995b5c0d24c685c9fde0405702",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-02-27T22:00:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-438430"
}
```
