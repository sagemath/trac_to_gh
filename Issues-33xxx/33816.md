# Issue 33816: Update gcc/gfortran to 12.x + Apple Silicon support, update openblas to 0.3.21, gsl to 2.7.1

archive/issues_033579.json:
```json
{
    "assignees": [],
    "body": "We would use 12.2.0 plus the feature patch for Apple Silicon support that the homebrew folks use:\nhttps://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/gcc.rb#L12\n\n\nDepends on #34266\nDepends on #34228\n\nCC:  @culler @jhpalmieri @kliem\n\nBranch/Commit: **[`e89ba55`](https://github.com/sagemath/sagetrac-mirror/commit/e89ba553fa43eea1539f39cc423fd0174d371b64)**\n\nReviewer: **John Palmieri**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33816_\n\n",
    "closed_at": "2022-10-17T22:44:06Z",
    "created_at": "2022-05-06T15:49:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update gcc/gfortran to 12.x + Apple Silicon support, update openblas to 0.3.21, gsl to 2.7.1",
    "type": "issue",
    "updated_at": "2022-10-17T22:44:06Z",
    "url": "https://github.com/sagemath/sage/issues/33816",
    "user": "https://github.com/mkoeppe"
}
```
We would use 12.2.0 plus the feature patch for Apple Silicon support that the homebrew folks use:
https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/gcc.rb#L12


Depends on #34266
Depends on #34228

CC:  @culler @jhpalmieri @kliem

Branch/Commit: **[`e89ba55`](https://github.com/sagemath/sagetrac-mirror/commit/e89ba553fa43eea1539f39cc423fd0174d371b64)**

Reviewer: **John Palmieri**

Author: **Matthias Koeppe**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/33816_





---

archive/issue_events_460484.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-06T15:49:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460484"
}
```



---

archive/issue_events_460485.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-06T15:49:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460485"
}
```



---

archive/issue_events_460486.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-06T15:49:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460486"
}
```



---

archive/issue_events_460487.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-06T15:49:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460487"
}
```



---

archive/issue_comments_546532.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nLooks like homebrew is able to use upstream gcc 12 on M1 - https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/gcc@12.rb",
    "created_at": "2022-05-20T02:11:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546532",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">comment:1</div>

Looks like homebrew is able to use upstream gcc 12 on M1 - https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/gcc@12.rb



---

archive/issue_comments_546533.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\n... with one big patch: https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/gcc@12.rb#L43",
    "created_at": "2022-06-30T23:30:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546533",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

... with one big patch: https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/gcc@12.rb#L43



---

archive/issue_events_460488.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460488"
}
```



---

archive/issue_events_460489.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460489"
}
```



---

archive/issue_events_460490.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-20T19:59:32Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "title_is": "Update gcc/gfortran to 12.x + Apple Silicon support",
    "title_was": "Update gcc/gfortran to 12.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460490"
}
```



---

archive/issue_comments_546534.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-just released\n+We would use 12.2.0 plus the feature patch for Apple Silicon support that the homebrew folks use:\n+https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/gcc.rb#L12\n+\n``````\n",
    "created_at": "2022-09-20T19:59:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546534",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-just released
+We would use 12.2.0 plus the feature patch for Apple Silicon support that the homebrew folks use:
+https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/gcc.rb#L12
+
``````




---

archive/issue_comments_546535.json:
```json
{
    "body": "Branch: **[u/mkoeppe/update_gcc_gfortran_to_12_x___apple_silicon_support](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/update_gcc_gfortran_to_12_x___apple_silicon_support)**",
    "created_at": "2022-09-20T20:11:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546535",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/update_gcc_gfortran_to_12_x___apple_silicon_support](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/update_gcc_gfortran_to_12_x___apple_silicon_support)**



---

archive/issue_comments_546536.json:
```json
{
    "body": "Commit: **[`9ae559b`](https://github.com/sagemath/sagetrac-mirror/commit/9ae559bbe825b1d400e636637c2df8f48809729b)**",
    "created_at": "2022-09-20T20:15:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546536",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`9ae559b`](https://github.com/sagemath/sagetrac-mirror/commit/9ae559bbe825b1d400e636637c2df8f48809729b)**



---

archive/issue_comments_546537.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1dfeb141d5f661ea4ea3812f92472da2304a2ad5\"><code>1dfeb14</code></a></td><td><code>build/pkgs/gcc: Update to 12.2.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ae559bbe825b1d400e636637c2df8f48809729b\"><code>9ae559b</code></a></td><td><code>build/pkgs/gcc/patches/gcc-12.2.0-arm.patch: Import from https://raw.githubusercontent.com/Homebrew/formula-patches/1d184289/gcc/gcc-12.2.0-arm.diff</code></td></tr></table>\n",
    "created_at": "2022-09-20T20:15:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546537",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1dfeb141d5f661ea4ea3812f92472da2304a2ad5"><code>1dfeb14</code></a></td><td><code>build/pkgs/gcc: Update to 12.2.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ae559bbe825b1d400e636637c2df8f48809729b"><code>9ae559b</code></a></td><td><code>build/pkgs/gcc/patches/gcc-12.2.0-arm.patch: Import from https://raw.githubusercontent.com/Homebrew/formula-patches/1d184289/gcc/gcc-12.2.0-arm.diff</code></td></tr></table>




---

archive/issue_comments_546538.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2022-09-20T20:15:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546538",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_546539.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI don't know if this is ready yet but I tried it anyway on my new M2 laptop. It failed; the end of the log file reads\n\n```\n0  0x1010cc1a0  __assert_rtn + 140\n1  0x100f53a8c  mach_o::relocatable::Parser<arm64>::parse(mach_o::relocatable::ParserOptions const&) + 4536\n2  0x100f25d38  mach_o::relocatable::Parser<arm64>::parse(unsigned char const*, unsigned long long, char const*, long, ld::File::Ordinal, mach_o::relocatable::ParserOptions const&) + 148\n3  0x100f8e4ac  ld::tool::InputFiles::makeFile(Options::FileInfo const&, bool) + 1468\n4  0x100f91360  ___ZN2ld4tool10InputFilesC2ER7Options_block_invoke + 56\n5  0x188a041f4  _dispatch_client_callout2 + 20\n6  0x188a17954  _dispatch_apply_invoke + 224\n7  0x188a041b4  _dispatch_client_callout + 20\n8  0x188a15a04  _dispatch_root_queue_drain + 680\n9  0x188a16104  _dispatch_worker_thread2 + 164\n10  0x188bc4324  _pthread_wqthread + 228\nA linker snapshot was created at:\n\t/tmp/libstdc++.6.dylib-2022-09-20-133305.ld-snapshot\nld: Assertion failed: (_file->_atomsArrayCount == computedAtomCount && \"more atoms allocated than expected\"), function parse, file macho_relocatable_file.cpp, line 2061.\n```\nI can post the full log file if you want.",
    "created_at": "2022-09-20T20:36:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546539",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:7" align="right">comment:7</div>

I don't know if this is ready yet but I tried it anyway on my new M2 laptop. It failed; the end of the log file reads

```
0  0x1010cc1a0  __assert_rtn + 140
1  0x100f53a8c  mach_o::relocatable::Parser<arm64>::parse(mach_o::relocatable::ParserOptions const&) + 4536
2  0x100f25d38  mach_o::relocatable::Parser<arm64>::parse(unsigned char const*, unsigned long long, char const*, long, ld::File::Ordinal, mach_o::relocatable::ParserOptions const&) + 148
3  0x100f8e4ac  ld::tool::InputFiles::makeFile(Options::FileInfo const&, bool) + 1468
4  0x100f91360  ___ZN2ld4tool10InputFilesC2ER7Options_block_invoke + 56
5  0x188a041f4  _dispatch_client_callout2 + 20
6  0x188a17954  _dispatch_apply_invoke + 224
7  0x188a041b4  _dispatch_client_callout + 20
8  0x188a15a04  _dispatch_root_queue_drain + 680
9  0x188a16104  _dispatch_worker_thread2 + 164
10  0x188bc4324  _pthread_wqthread + 228
A linker snapshot was created at:
	/tmp/libstdc++.6.dylib-2022-09-20-133305.ld-snapshot
ld: Assertion failed: (_file->_atomsArrayCount == computedAtomCount && "more atoms allocated than expected"), function parse, file macho_relocatable_file.cpp, line 2061.
```
I can post the full log file if you want.



---

archive/issue_comments_546540.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThanks for testing. Also on Intel I ran into a build error. This will need more work.",
    "created_at": "2022-09-20T20:49:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546540",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Thanks for testing. Also on Intel I ran into a build error. This will need more work.



---

archive/issue_comments_546541.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI'm happy to test. It's just a MacBook Air, but it builds Sage faster than my iMac Pro, and I like giving it tasks.",
    "created_at": "2022-09-20T20:56:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546541",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

I'm happy to test. It's just a MacBook Air, but it builds Sage faster than my iMac Pro, and I like giving it tasks.



---

archive/issue_comments_546542.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49c407b9a63bbf42650eb72c07af2e4c5389207f\"><code>49c407b</code></a></td><td><code>build/pkgs/gcc/spkg-build.in: Remove workarounds for ancient OS X</code></td></tr></table>\n",
    "created_at": "2022-09-21T00:48:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546542",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49c407b9a63bbf42650eb72c07af2e4c5389207f"><code>49c407b</code></a></td><td><code>build/pkgs/gcc/spkg-build.in: Remove workarounds for ancient OS X</code></td></tr></table>




---

archive/issue_comments_546543.json:
```json
{
    "body": "Changed commit from **[`9ae559b`](https://github.com/sagemath/sagetrac-mirror/commit/9ae559bbe825b1d400e636637c2df8f48809729b)** to **[`49c407b`](https://github.com/sagemath/sagetrac-mirror/commit/49c407b9a63bbf42650eb72c07af2e4c5389207f)**",
    "created_at": "2022-09-21T00:48:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546543",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9ae559b`](https://github.com/sagemath/sagetrac-mirror/commit/9ae559bbe825b1d400e636637c2df8f48809729b)** to **[`49c407b`](https://github.com/sagemath/sagetrac-mirror/commit/49c407b9a63bbf42650eb72c07af2e4c5389207f)**



---

archive/issue_comments_546544.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba6de8339036d621352d9baacc0efb4591f52fe3\"><code>ba6de83</code></a></td><td><code>build/pkgs/gcc/build-gcc: Unset AS, LD</code></td></tr></table>\n",
    "created_at": "2022-09-21T01:58:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546544",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba6de8339036d621352d9baacc0efb4591f52fe3"><code>ba6de83</code></a></td><td><code>build/pkgs/gcc/build-gcc: Unset AS, LD</code></td></tr></table>




---

archive/issue_comments_546545.json:
```json
{
    "body": "Changed commit from **[`49c407b`](https://github.com/sagemath/sagetrac-mirror/commit/49c407b9a63bbf42650eb72c07af2e4c5389207f)** to **[`ba6de83`](https://github.com/sagemath/sagetrac-mirror/commit/ba6de8339036d621352d9baacc0efb4591f52fe3)**",
    "created_at": "2022-09-21T01:58:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546545",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`49c407b`](https://github.com/sagemath/sagetrac-mirror/commit/49c407b9a63bbf42650eb72c07af2e4c5389207f)** to **[`ba6de83`](https://github.com/sagemath/sagetrac-mirror/commit/ba6de8339036d621352d9baacc0efb4591f52fe3)**



---

archive/issue_comments_546546.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nOn Intel, this still fails `tox -e local-macos-nohomebrew -- gfortran`, but it passes with the full bootstrapped build `tox -e local-macos-nohomebrew -- gcc`.\n\nThe failure when trying to build `gfortran` using Apple's gcc (clang) is introduced by the patch - passing the argument `-nodefaultrpaths` to the compiler.",
    "created_at": "2022-09-21T02:00:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546546",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

On Intel, this still fails `tox -e local-macos-nohomebrew -- gfortran`, but it passes with the full bootstrapped build `tox -e local-macos-nohomebrew -- gcc`.

The failure when trying to build `gfortran` using Apple's gcc (clang) is introduced by the patch - passing the argument `-nodefaultrpaths` to the compiler.



---

archive/issue_comments_546547.json:
```json
{
    "body": "Changed commit from **[`ba6de83`](https://github.com/sagemath/sagetrac-mirror/commit/ba6de8339036d621352d9baacc0efb4591f52fe3)** to **[`5d9563b`](https://github.com/sagemath/sagetrac-mirror/commit/5d9563be5c4853d61e4127b19c9c3bd1e1468f7a)**",
    "created_at": "2022-09-21T02:29:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546547",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ba6de83`](https://github.com/sagemath/sagetrac-mirror/commit/ba6de8339036d621352d9baacc0efb4591f52fe3)** to **[`5d9563b`](https://github.com/sagemath/sagetrac-mirror/commit/5d9563be5c4853d61e4127b19c9c3bd1e1468f7a)**



---

archive/issue_comments_546548.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d9563be5c4853d61e4127b19c9c3bd1e1468f7a\"><code>5d9563b</code></a></td><td><code>build/pkgs/gfortran/spkg-build.in: Work around build failure with Apple gcc (clang)</code></td></tr></table>\n",
    "created_at": "2022-09-21T02:29:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546548",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d9563be5c4853d61e4127b19c9c3bd1e1468f7a"><code>5d9563b</code></a></td><td><code>build/pkgs/gfortran/spkg-build.in: Work around build failure with Apple gcc (clang)</code></td></tr></table>




---

archive/issue_comments_546549.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThis builds for me now on Intel. Haven't tested anything else yet",
    "created_at": "2022-09-21T02:29:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546549",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

This builds for me now on Intel. Haven't tested anything else yet



---

archive/issue_comments_546550.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nStill fails for me on m2.",
    "created_at": "2022-09-21T02:44:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546550",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:15" align="right">comment:15</div>

Still fails for me on m2.



---

archive/issue_comments_546551.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nfull log please",
    "created_at": "2022-09-21T02:45:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546551",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

full log please



---

archive/issue_comments_546552.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nHold on, I tried `make gcc`. I'm going to try `make gfortran` and see how that goes.",
    "created_at": "2022-09-21T02:46:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546552",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:17" align="right">comment:17</div>

Hold on, I tried `make gcc`. I'm going to try `make gfortran` and see how that goes.



---

archive/issue_comments_546553.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\n`gfortran` built successfully.",
    "created_at": "2022-09-21T02:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546553",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:18" align="right">comment:18</div>

`gfortran` built successfully.



---

archive/issue_comments_546554.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nGreat! I think we can ignore the failure to build gcc. We haven't been testing those in quite a while",
    "created_at": "2022-09-21T02:55:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546554",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

Great! I think we can ignore the failure to build gcc. We haven't been testing those in quite a while



---

archive/issue_comments_546555.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI'll run this for the Linux platforms on CI, just to be sure that this big patch doesn't break anything for those",
    "created_at": "2022-09-21T02:56:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546555",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

I'll run this for the Linux platforms on CI, just to be sure that this big patch doesn't break anything for those



---

archive/issue_comments_546556.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI assume that it works, but I can't test it properly since `openblas` won't build on this machine, and Sage insists on trying to build its own `openblas` if it builds its own `gfortran`.",
    "created_at": "2022-09-21T02:59:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546556",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:21" align="right">comment:21</div>

I assume that it works, but I can't test it properly since `openblas` won't build on this machine, and Sage insists on trying to build its own `openblas` if it builds its own `gfortran`.



---

archive/issue_comments_546557.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nMaybe worth trying if an openblas upgrade fixes the problem?",
    "created_at": "2022-09-21T03:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546557",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

Maybe worth trying if an openblas upgrade fixes the problem?



---

archive/issue_comments_546558.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nhomebrew uses 0.3.21, we are still at 0.3.20\nhttps://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/openblas.rb",
    "created_at": "2022-09-21T03:12:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546558",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

homebrew uses 0.3.21, we are still at 0.3.20
https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/openblas.rb



---

archive/issue_comments_546559.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e6af03773b262fd791c8dd5aeaf2256bdc84adc\"><code>6e6af03</code></a></td><td><code>build/pkgs/openblas: Update to 0.3.21</code></td></tr></table>\n",
    "created_at": "2022-09-21T03:24:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546559",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e6af03773b262fd791c8dd5aeaf2256bdc84adc"><code>6e6af03</code></a></td><td><code>build/pkgs/openblas: Update to 0.3.21</code></td></tr></table>




---

archive/issue_comments_546560.json:
```json
{
    "body": "Changed commit from **[`5d9563b`](https://github.com/sagemath/sagetrac-mirror/commit/5d9563be5c4853d61e4127b19c9c3bd1e1468f7a)** to **[`6e6af03`](https://github.com/sagemath/sagetrac-mirror/commit/6e6af03773b262fd791c8dd5aeaf2256bdc84adc)**",
    "created_at": "2022-09-21T03:24:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546560",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5d9563b`](https://github.com/sagemath/sagetrac-mirror/commit/5d9563be5c4853d61e4127b19c9c3bd1e1468f7a)** to **[`6e6af03`](https://github.com/sagemath/sagetrac-mirror/commit/6e6af03773b262fd791c8dd5aeaf2256bdc84adc)**



---

archive/issue_events_460491.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-21T03:24:53Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "title_is": "Update gcc/gfortran to 12.x + Apple Silicon support, update openblas to 0.3.21",
    "title_was": "Update gcc/gfortran to 12.x + Apple Silicon support",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460491"
}
```



---

archive/issue_comments_546561.json:
```json
{
    "body": "Dependencies: **#34266**",
    "created_at": "2022-09-21T03:25:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546561",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#34266**



---

archive/issue_comments_546562.json:
```json
{
    "body": "Changed commit from **[`6e6af03`](https://github.com/sagemath/sagetrac-mirror/commit/6e6af03773b262fd791c8dd5aeaf2256bdc84adc)** to **[`33668cb`](https://github.com/sagemath/sagetrac-mirror/commit/33668cbf857be6033e2f176913a41cb6281478ff)**",
    "created_at": "2022-09-21T03:26:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546562",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6e6af03`](https://github.com/sagemath/sagetrac-mirror/commit/6e6af03773b262fd791c8dd5aeaf2256bdc84adc)** to **[`33668cb`](https://github.com/sagemath/sagetrac-mirror/commit/33668cbf857be6033e2f176913a41cb6281478ff)**



---

archive/issue_comments_546563.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca6d16398420c242228656c04373b7e920684100\"><code>ca6d163</code></a></td><td><code>.github/workflows/ci-linux.yml: Rename stages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5713937de7ed72810013e0856b7ac0cca0d9b3e8\"><code>5713937</code></a></td><td><code>sage -package list --has-file, --no-file: Handle disjunctions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c7e0c4c03432e356f4d3f04e61978947a0fc171\"><code>8c7e0c4</code></a></td><td><code>Merge #33062</code></td></tr><tr><td><code>[4e8ec60](https://github.com/sagemath/sagetrac-mirror/commit/4e8ec602ed0653b6dbc0b19f45e48f943555e7c4)</code></td><td><code>`.github/workflows/docker.yml: Remove debian-stretch, fedora-{26,27,27`}</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9f4b154cfe44116bd0aa0dc6c86d9993aaaeab7\"><code>a9f4b15</code></a></td><td><code>tox.ini (gcc_8), build/pkgs/_gcc8: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/120ab057065a70a24c515e1a8788c96141f9db5f\"><code>120ab05</code></a></td><td><code>tox.ini (envlist): Replace docker-ubuntu-trusty-minimal with docker-ubuntu-trusty-toolchain-gcc_9-minimal</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b38bad852a3d10712f7cbcad6dfbca158f623d1\"><code>9b38bad</code></a></td><td><code>build/pkgs/_gcc{9,10,11}/distros/opensuse.txt: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ccce5b1e5fb7b8ac15512b079aa3ee98d7753dab\"><code>ccce5b1</code></a></td><td><code>.github/workflows/docker.yml: Use gcc_8 with ubuntu-bionic, linuxmint-19.x</code></td></tr><tr><td><code>[27a0882](https://github.com/sagemath/sagetrac-mirror/commit/27a0882bc43a231ebecb439f80026a3cf9c526fc)</code></td><td><code>`.github/workflows/docker.yml: Use gcc_11 with opensuse-15.{3,4`}</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33668cbf857be6033e2f176913a41cb6281478ff\"><code>33668cb</code></a></td><td><code>Merge #34266</code></td></tr></table>\n",
    "created_at": "2022-09-21T03:26:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546563",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca6d16398420c242228656c04373b7e920684100"><code>ca6d163</code></a></td><td><code>.github/workflows/ci-linux.yml: Rename stages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5713937de7ed72810013e0856b7ac0cca0d9b3e8"><code>5713937</code></a></td><td><code>sage -package list --has-file, --no-file: Handle disjunctions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c7e0c4c03432e356f4d3f04e61978947a0fc171"><code>8c7e0c4</code></a></td><td><code>Merge #33062</code></td></tr><tr><td><code>[4e8ec60](https://github.com/sagemath/sagetrac-mirror/commit/4e8ec602ed0653b6dbc0b19f45e48f943555e7c4)</code></td><td><code>`.github/workflows/docker.yml: Remove debian-stretch, fedora-{26,27,27`}</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9f4b154cfe44116bd0aa0dc6c86d9993aaaeab7"><code>a9f4b15</code></a></td><td><code>tox.ini (gcc_8), build/pkgs/_gcc8: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/120ab057065a70a24c515e1a8788c96141f9db5f"><code>120ab05</code></a></td><td><code>tox.ini (envlist): Replace docker-ubuntu-trusty-minimal with docker-ubuntu-trusty-toolchain-gcc_9-minimal</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b38bad852a3d10712f7cbcad6dfbca158f623d1"><code>9b38bad</code></a></td><td><code>build/pkgs/_gcc{9,10,11}/distros/opensuse.txt: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ccce5b1e5fb7b8ac15512b079aa3ee98d7753dab"><code>ccce5b1</code></a></td><td><code>.github/workflows/docker.yml: Use gcc_8 with ubuntu-bionic, linuxmint-19.x</code></td></tr><tr><td><code>[27a0882](https://github.com/sagemath/sagetrac-mirror/commit/27a0882bc43a231ebecb439f80026a3cf9c526fc)</code></td><td><code>`.github/workflows/docker.yml: Use gcc_11 with opensuse-15.{3,4`}</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33668cbf857be6033e2f176913a41cb6281478ff"><code>33668cb</code></a></td><td><code>Merge #34266</code></td></tr></table>




---

archive/issue_comments_546564.json:
```json
{
    "body": "Reviewer: **https://github.com/mkoeppe/sage/actions/runs/3094982876**",
    "created_at": "2022-09-21T03:29:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546564",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **https://github.com/mkoeppe/sage/actions/runs/3094982876**



---

archive/issue_comments_546565.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThis works for me on m2 and Intel.",
    "created_at": "2022-09-21T17:25:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546565",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:29" align="right">comment:29</div>

This works for me on m2 and Intel.



---

archive/issue_comments_546566.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nGreat, thanks for testing! The GH Actions will still need a bit of time to test on Linux, but I'm setting it to \"needs_review\" already",
    "created_at": "2022-09-21T17:27:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546566",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Great, thanks for testing! The GH Actions will still need a bit of time to test on Linux, but I'm setting it to "needs_review" already



---

archive/issue_events_460492.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-21T17:27:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460492"
}
```



---

archive/issue_comments_546567.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nOn the Intel machine I see some doctest failures involving numerical issues, for example\n\n```\nFile \"src/sage/tests/books/computational-mathematics-with-sagemath/float_doctest.py\", line 402, in sage.tests.books.computational-mathematics-with-sagemath.float_doctest\nFailed example:\n    NearlySingularMatrix(RDF,n).det() == 0.0\nExpected:\n    True\nGot:\n    False\n```\nand\n\n```\nFile \"src/sage/geometry/polyhedron/base7.py\", line 569, in sage.geometry.polyhedron.base7.Polyhedron_base7.volume\nFailed example:\n    w = Dinexact.faces(2)[2].as_polyhedron().volume(measure='induced', engine='internal'); RDF(w) # abs tol 1e-9\nExpected:\n    1.5340627082974878\nGot:\n    8.032456584010367\nTolerance exceeded:\n    1.5340627082974878 vs 8.032456584010367, tolerance 7e0 > 1e-9\n```",
    "created_at": "2022-09-21T19:04:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546567",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:31" align="right">comment:31</div>

On the Intel machine I see some doctest failures involving numerical issues, for example

```
File "src/sage/tests/books/computational-mathematics-with-sagemath/float_doctest.py", line 402, in sage.tests.books.computational-mathematics-with-sagemath.float_doctest
Failed example:
    NearlySingularMatrix(RDF,n).det() == 0.0
Expected:
    True
Got:
    False
```
and

```
File "src/sage/geometry/polyhedron/base7.py", line 569, in sage.geometry.polyhedron.base7.Polyhedron_base7.volume
Failed example:
    w = Dinexact.faces(2)[2].as_polyhedron().volume(measure='induced', engine='internal'); RDF(w) # abs tol 1e-9
Expected:
    1.5340627082974878
Got:
    8.032456584010367
Tolerance exceeded:
    1.5340627082974878 vs 8.032456584010367, tolerance 7e0 > 1e-9
```



---

archive/issue_comments_546568.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nMaybe related to #31621?",
    "created_at": "2022-09-21T19:21:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546568",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:32" align="right">comment:32</div>

Maybe related to #31621?



---

archive/issue_comments_546569.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI think many of our RDF doctests are frivolous. \n\nThe RDF determinant goes through `scipy.linalg.det` as far I can see, and that is also what goes into the volume computation",
    "created_at": "2022-09-21T19:38:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546569",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

I think many of our RDF doctests are frivolous. 

The RDF determinant goes through `scipy.linalg.det` as far I can see, and that is also what goes into the volume computation



---

archive/issue_comments_546570.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nThat said, the result for the dodecahedron volume is quite concerning.",
    "created_at": "2022-09-21T19:41:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546570",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

That said, the result for the dodecahedron volume is quite concerning.



---

archive/issue_comments_546571.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nI'm attaching a file showing all of the failures.",
    "created_at": "2022-09-21T19:50:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546571",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:36" align="right">comment:36</div>

I'm attaching a file showing all of the failures.



---

archive/issue_comments_546572.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nAttachment: **[test.log](https://github.com/sagemath/sage/files/ticket33816/test.log)**\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ad48d0f3428b5263bf831e23f6d6fd7ece09204\"><code>3ad48d0</code></a></td><td><code>build/pkgs/gsl: Update to 2.7.1</code></td></tr></table>\n",
    "created_at": "2022-09-21T19:51:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546572",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37" align="right">comment:37</div>

Attachment: **[test.log](https://github.com/sagemath/sage/files/ticket33816/test.log)**

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ad48d0f3428b5263bf831e23f6d6fd7ece09204"><code>3ad48d0</code></a></td><td><code>build/pkgs/gsl: Update to 2.7.1</code></td></tr></table>




---

archive/issue_comments_546573.json:
```json
{
    "body": "Changed commit from **[`33668cb`](https://github.com/sagemath/sagetrac-mirror/commit/33668cbf857be6033e2f176913a41cb6281478ff)** to **[`3ad48d0`](https://github.com/sagemath/sagetrac-mirror/commit/3ad48d0f3428b5263bf831e23f6d6fd7ece09204)**",
    "created_at": "2022-09-21T19:51:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546573",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`33668cb`](https://github.com/sagemath/sagetrac-mirror/commit/33668cbf857be6033e2f176913a41cb6281478ff)** to **[`3ad48d0`](https://github.com/sagemath/sagetrac-mirror/commit/3ad48d0f3428b5263bf831e23f6d6fd7ece09204)**



---

archive/issue_comments_546574.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nAnd again, this is on a machine where I have seen numerical issues before, as discussed in #31621.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ad48d0f3428b5263bf831e23f6d6fd7ece09204\"><code>3ad48d0</code></a></td><td><code>build/pkgs/gsl: Update to 2.7.1</code></td></tr></table>\n",
    "created_at": "2022-09-21T19:52:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546574",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:38" align="right">comment:38</div>

And again, this is on a machine where I have seen numerical issues before, as discussed in #31621.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ad48d0f3428b5263bf831e23f6d6fd7ece09204"><code>3ad48d0</code></a></td><td><code>build/pkgs/gsl: Update to 2.7.1</code></td></tr></table>




---

archive/issue_comments_546575.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nThrowing in a GSL upgrade just so we're up to date on everything that implements RDF stuff",
    "created_at": "2022-09-21T19:53:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546575",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">comment:39</div>

Throwing in a GSL upgrade just so we're up to date on everything that implements RDF stuff



---

archive/issue_events_460493.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-21T19:53:14Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "title_is": "Update gcc/gfortran to 12.x + Apple Silicon support, update openblas to 0.3.21, gsl to 2.7.1",
    "title_was": "Update gcc/gfortran to 12.x + Apple Silicon support, update openblas to 0.3.21",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460493"
}
```



---

archive/issue_comments_546576.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [John Palmieri](#comment:38):\n> And again, this is on a machine where I have seen numerical issues before, as discussed in #31621.\n\nI guess I'll have to re-read #31621 more carefully.",
    "created_at": "2022-09-21T19:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546576",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [John Palmieri](#comment:38):
> And again, this is on a machine where I have seen numerical issues before, as discussed in #31621.

I guess I'll have to re-read #31621 more carefully.



---

archive/issue_comments_546577.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nOne hypothesis in #31621 was the flag `-march=native` was causing problems somewhere: `openblas`, `gsl`, somewhere else?\n\nFor this ticket, it is certainly possible that these errors are not caused by building our own `gfortran` but by other packages which are built as a result of building our own `gfortran`.",
    "created_at": "2022-09-21T20:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546577",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:41" align="right">comment:41</div>

One hypothesis in #31621 was the flag `-march=native` was causing problems somewhere: `openblas`, `gsl`, somewhere else?

For this ticket, it is certainly possible that these errors are not caused by building our own `gfortran` but by other packages which are built as a result of building our own `gfortran`.



---

archive/issue_comments_546578.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nRegarding `gsl`, `gfortran`, and `openblas`: with the branch here, on two different machines, I see\n\n- If I do `./configure --with-system-gfortran=no`, everything builds, although I get numerical failures on one of the machines (Intel).\n- If I instead do `./configure --with-system-openblas=no`, then `gsl` fails to build: the error says `ld: file not found: `@`rpath/libquadmath.0.dylib for architecture x86_64` (Intel) and similar on M2 (but with `arm64` at the end). On the Intel machine at least, I see the same with the previous version of `gsl`: the upgrade had no effect.\n- If I instead do `./configure --with-system-gsl=no`, then everything builds and I do not see the same numerical failures.\n\nSo it's hard to tell whether the error is coming from `gfortran` or `openblas` or something else. I will try with the Intel machine doing `./configure --with-system-gfortran=no` without this branch and see if the same errors arise.",
    "created_at": "2022-09-21T21:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546578",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:42" align="right">comment:42</div>

Regarding `gsl`, `gfortran`, and `openblas`: with the branch here, on two different machines, I see

- If I do `./configure --with-system-gfortran=no`, everything builds, although I get numerical failures on one of the machines (Intel).
- If I instead do `./configure --with-system-openblas=no`, then `gsl` fails to build: the error says `ld: file not found: `@`rpath/libquadmath.0.dylib for architecture x86_64` (Intel) and similar on M2 (but with `arm64` at the end). On the Intel machine at least, I see the same with the previous version of `gsl`: the upgrade had no effect.
- If I instead do `./configure --with-system-gsl=no`, then everything builds and I do not see the same numerical failures.

So it's hard to tell whether the error is coming from `gfortran` or `openblas` or something else. I will try with the Intel machine doing `./configure --with-system-gfortran=no` without this branch and see if the same errors arise.



---

archive/issue_comments_546579.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [John Palmieri](#comment:42):\n> So it's hard to tell whether the error is coming from `gfortran` or `openblas` or something else. I will try with the Intel machine doing `./configure --with-system-gfortran=no` without this branch and see if the same errors arise.\n\nConfirmed: I get the same errors with the `develop` branch plus `--with-system-gfortran=no`.",
    "created_at": "2022-09-21T22:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546579",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [John Palmieri](#comment:42):
> So it's hard to tell whether the error is coming from `gfortran` or `openblas` or something else. I will try with the Intel machine doing `./configure --with-system-gfortran=no` without this branch and see if the same errors arise.

Confirmed: I get the same errors with the `develop` branch plus `--with-system-gfortran=no`.



---

archive/issue_comments_546580.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nNow I would like to track down two issues, perhaps neither of which are related to this ticket: \n\n1. the numerical failures on this machine\n2. the failure of `gsl` to build with homebrew's `gfortran` and Sage's `openblas`\n\nCould 2 be related to this message in the `openblas` log (`./configure --with-system-openblas=no`):\n\n```\nld: warning: dylib (/usr/local/Cellar/gcc/12.2.0/lib/gcc/current/libgfortran.dylib) was built for newer macOS version (12.0) than being linked (10.8)\n```",
    "created_at": "2022-09-21T22:45:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546580",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:44" align="right">comment:44</div>

Now I would like to track down two issues, perhaps neither of which are related to this ticket: 

1. the numerical failures on this machine
2. the failure of `gsl` to build with homebrew's `gfortran` and Sage's `openblas`

Could 2 be related to this message in the `openblas` log (`./configure --with-system-openblas=no`):

```
ld: warning: dylib (/usr/local/Cellar/gcc/12.2.0/lib/gcc/current/libgfortran.dylib) was built for newer macOS version (12.0) than being linked (10.8)
```



---

archive/issue_comments_546581.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nCould you post the failing gsl build log?",
    "created_at": "2022-09-22T00:23:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546581",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

Could you post the failing gsl build log?



---

archive/issue_comments_546582.json:
```json
{
    "body": "Attachment: **[gsl-2.7.1.log](https://github.com/sagemath/sage/files/ticket33816/gsl-2.7.1.log)**",
    "created_at": "2022-09-22T00:32:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546582",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment: **[gsl-2.7.1.log](https://github.com/sagemath/sage/files/ticket33816/gsl-2.7.1.log)**



---

archive/issue_comments_546583.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nHere it is.",
    "created_at": "2022-09-22T00:33:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546583",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:46" align="right">comment:46</div>

Here it is.



---

archive/issue_comments_546584.json:
```json
{
    "body": "Changed commit from **[`3ad48d0`](https://github.com/sagemath/sagetrac-mirror/commit/3ad48d0f3428b5263bf831e23f6d6fd7ece09204)** to **[`1e24d43`](https://github.com/sagemath/sagetrac-mirror/commit/1e24d43c0371b3285ad508cd95f2f3e31e66dd58)**",
    "created_at": "2022-09-22T00:56:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546584",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3ad48d0`](https://github.com/sagemath/sagetrac-mirror/commit/3ad48d0f3428b5263bf831e23f6d6fd7ece09204)** to **[`1e24d43`](https://github.com/sagemath/sagetrac-mirror/commit/1e24d43c0371b3285ad508cd95f2f3e31e66dd58)**



---

archive/issue_comments_546585.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e24d43c0371b3285ad508cd95f2f3e31e66dd58\"><code>1e24d43</code></a></td><td><code>build/pkgs/gsl/patches: Import https://raw.githubusercontent.com/Homebrew/formula-patches/03cf8088210822aa2c1ab544ed58ea04c897d9c4/libtool/configure-big_sur.diff</code></td></tr></table>\n",
    "created_at": "2022-09-22T00:56:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546585",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e24d43c0371b3285ad508cd95f2f3e31e66dd58"><code>1e24d43</code></a></td><td><code>build/pkgs/gsl/patches: Import https://raw.githubusercontent.com/Homebrew/formula-patches/03cf8088210822aa2c1ab544ed58ea04c897d9c4/libtool/configure-big_sur.diff</code></td></tr></table>




---

archive/issue_comments_546586.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nTry with this please",
    "created_at": "2022-09-22T00:57:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546586",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:48" align="right">comment:48</div>

Try with this please



---

archive/issue_comments_546587.json:
```json
{
    "body": "Changed commit from **[`1e24d43`](https://github.com/sagemath/sagetrac-mirror/commit/1e24d43c0371b3285ad508cd95f2f3e31e66dd58)** to **[`07d2dcb`](https://github.com/sagemath/sagetrac-mirror/commit/07d2dcbc22cb66741c8fcb69a1104c93b28e08d8)**",
    "created_at": "2022-09-22T01:09:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546587",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1e24d43`](https://github.com/sagemath/sagetrac-mirror/commit/1e24d43c0371b3285ad508cd95f2f3e31e66dd58)** to **[`07d2dcb`](https://github.com/sagemath/sagetrac-mirror/commit/07d2dcbc22cb66741c8fcb69a1104c93b28e08d8)**



---

archive/issue_comments_546588.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07d2dcbc22cb66741c8fcb69a1104c93b28e08d8\"><code>07d2dcb</code></a></td><td><code>.github/workflows/docker.yml: Use ubuntu-bionic-i386 with gcc_8, remove manylinux-2_24-i686 (based on dropped debian-stretch)</code></td></tr></table>\n",
    "created_at": "2022-09-22T01:09:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546588",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07d2dcbc22cb66741c8fcb69a1104c93b28e08d8"><code>07d2dcb</code></a></td><td><code>.github/workflows/docker.yml: Use ubuntu-bionic-i386 with gcc_8, remove manylinux-2_24-i686 (based on dropped debian-stretch)</code></td></tr></table>




---

archive/issue_comments_546589.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nThis works, thank you.",
    "created_at": "2022-09-22T03:38:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546589",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:50" align="right">comment:50</div>

This works, thank you.



---

archive/issue_comments_546590.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nWorks well: with each of: `--with-system-gfortran=no`, `--with-system-openblas=no`, `--with-system-gsl=no`, `gsl` builds and passes its test suite on an Intel machine and on an m2 machine. With at least one of those options I also did `make ptestlong` and everything passed.",
    "created_at": "2022-09-22T04:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546590",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:51" align="right">comment:51</div>

Works well: with each of: `--with-system-gfortran=no`, `--with-system-openblas=no`, `--with-system-gsl=no`, `gsl` builds and passes its test suite on an Intel machine and on an m2 machine. With at least one of those options I also did `make ptestlong` and everything passed.



---

archive/issue_comments_546591.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nMatthias, what's your assessment of the testing via GH Actions?",
    "created_at": "2022-09-22T18:49:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546591",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:52" align="right">comment:52</div>

Matthias, what's your assessment of the testing via GH Actions?



---

archive/issue_comments_546592.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nThe relevant tests among the many at https://github.com/mkoeppe/sage/actions/runs/3094982876 are the ones named \"minimal-pre\", which builds all non-Python packages. They have succeeded for all supported platforms.\n(Commit 07d2dcb fixes a mistake I made in #34266 - I had forgotten to remove one outdated 32-bit platform and forgot to update another to use GCC 8. These two show up as failing in the GH Actions run.)\n\nUnfortunately, the 2nd build stage (\"minimal\"), which builds the Python packages and the documentation, and runs \"make ptest\", has not started to run yet (I think because of general GH Actions flakiness).\n\nI'll test the 2nd stage either manually or on a separate GH Actions run later today.",
    "created_at": "2022-09-22T19:01:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546592",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:53" align="right">comment:53</div>

The relevant tests among the many at https://github.com/mkoeppe/sage/actions/runs/3094982876 are the ones named "minimal-pre", which builds all non-Python packages. They have succeeded for all supported platforms.
(Commit 07d2dcb fixes a mistake I made in #34266 - I had forgotten to remove one outdated 32-bit platform and forgot to update another to use GCC 8. These two show up as failing in the GH Actions run.)

Unfortunately, the 2nd build stage ("minimal"), which builds the Python packages and the documentation, and runs "make ptest", has not started to run yet (I think because of general GH Actions flakiness).

I'll test the 2nd stage either manually or on a separate GH Actions run later today.



---

archive/issue_comments_546593.json:
```json
{
    "body": "Changed commit from **[`07d2dcb`](https://github.com/sagemath/sagetrac-mirror/commit/07d2dcbc22cb66741c8fcb69a1104c93b28e08d8)** to **[`e89ba55`](https://github.com/sagemath/sagetrac-mirror/commit/e89ba553fa43eea1539f39cc423fd0174d371b64)**",
    "created_at": "2022-09-22T19:16:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546593",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`07d2dcb`](https://github.com/sagemath/sagetrac-mirror/commit/07d2dcbc22cb66741c8fcb69a1104c93b28e08d8)** to **[`e89ba55`](https://github.com/sagemath/sagetrac-mirror/commit/e89ba553fa43eea1539f39cc423fd0174d371b64)**



---

archive/issue_comments_546594.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/adddf8ee191844bedd7e6f81d655c3607fcb823d\"><code>adddf8e</code></a></td><td><code>Merge tag '9.7.beta8' into t/34228/tox__e_docker_____incremental</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a90608f7ac6cd3a63ada3ae939ec4b316a902639\"><code>a90608f</code></a></td><td><code>build/bin/write-dockerfile.sh: Invoke sage-package directly, do not go through ./sage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85ce9a666154ce6808bd76d60706f6a351ab269d\"><code>85ce9a6</code></a></td><td><code>Merge tag '9.7.rc0' into t/34228/tox__e_docker_____incremental</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d24647a646ece6f80690c508de4028bb58e23923\"><code>d24647a</code></a></td><td><code>Merge #34228</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e89ba553fa43eea1539f39cc423fd0174d371b64\"><code>e89ba55</code></a></td><td><code>.github/workflows/ci-linux.yml: Fix typo which prevented 'minimal-*' from starting</code></td></tr></table>\n",
    "created_at": "2022-09-22T19:16:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546594",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/adddf8ee191844bedd7e6f81d655c3607fcb823d"><code>adddf8e</code></a></td><td><code>Merge tag '9.7.beta8' into t/34228/tox__e_docker_____incremental</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a90608f7ac6cd3a63ada3ae939ec4b316a902639"><code>a90608f</code></a></td><td><code>build/bin/write-dockerfile.sh: Invoke sage-package directly, do not go through ./sage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85ce9a666154ce6808bd76d60706f6a351ab269d"><code>85ce9a6</code></a></td><td><code>Merge tag '9.7.rc0' into t/34228/tox__e_docker_____incremental</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d24647a646ece6f80690c508de4028bb58e23923"><code>d24647a</code></a></td><td><code>Merge #34228</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e89ba553fa43eea1539f39cc423fd0174d371b64"><code>e89ba55</code></a></td><td><code>.github/workflows/ci-linux.yml: Fix typo which prevented 'minimal-*' from starting</code></td></tr></table>




---

archive/issue_comments_546595.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [Matthias K\u00f6ppe](#comment:53):\n> Unfortunately, the 2nd build stage (\"minimal\") [...] has not started to run yet (I think because of general GH Actions flakiness).\n\nActually, a typo was the cause. Fixed now",
    "created_at": "2022-09-22T19:17:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546595",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [Matthias Köppe](#comment:53):
> Unfortunately, the 2nd build stage ("minimal") [...] has not started to run yet (I think because of general GH Actions flakiness).

Actually, a typo was the cause. Fixed now



---

archive/issue_comments_546596.json:
```json
{
    "body": "Changed dependencies from **#34266** to **#34266, #34228**",
    "created_at": "2022-09-22T19:17:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546596",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#34266** to **#34266, #34228**



---

archive/issue_comments_546597.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\n2nd stage running now at https://github.com/mkoeppe/sage/actions/runs/3108109396/jobs/5036946542",
    "created_at": "2022-09-22T19:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546597",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:57" align="right">comment:57</div>

2nd stage running now at https://github.com/mkoeppe/sage/actions/runs/3108109396/jobs/5036946542



---

archive/issue_comments_546598.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/3094982876** to **https://github.com/mkoeppe/sage/actions/runs/3094982876, https://github.com/mkoeppe/sage/actions/runs/3108109396/jobs/5036946542**",
    "created_at": "2022-09-22T19:24:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546598",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/3094982876** to **https://github.com/mkoeppe/sage/actions/runs/3094982876, https://github.com/mkoeppe/sage/actions/runs/3108109396/jobs/5036946542**



---

archive/issue_comments_546599.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [Matthias K\u00f6ppe](#comment:53):\n> The relevant tests among the many at https://github.com/mkoeppe/sage/actions/runs/3094982876 are the ones named \"minimal-pre\", which builds all non-Python packages. They have succeeded for all supported platforms.\n\n(although 4 timed out)",
    "created_at": "2022-09-22T19:25:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546599",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [Matthias Köppe](#comment:53):
> The relevant tests among the many at https://github.com/mkoeppe/sage/actions/runs/3094982876 are the ones named "minimal-pre", which builds all non-Python packages. They have succeeded for all supported platforms.

(although 4 timed out)



---

archive/issue_comments_546600.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nThere are some failures, I'll have to investigate what's going on there.",
    "created_at": "2022-09-22T22:10:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546600",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:59" align="right">comment:59</div>

There are some failures, I'll have to investigate what's going on there.



---

archive/issue_comments_546601.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nLooks like the failures are only due to a flaw in my new 2-stage workflow, related to the use of `-arch=native`. For example, looking into the config.log of the failing `fflas_ffpack` package on `fedora-35-minimal` https://github.com/mkoeppe/sage/actions/runs/3108109396/jobs/5036948018, one sees:\n\n```\nconfigure:18251: checking for use of MKL\nconfigure:18268: result: no \nconfigure:18288: checking for BLAS\nconfigure:18304: g++ -std=gnu++11 -o conftest -g -O2   -I. -I.. -I. -I./fflas-ffpack -fabi-version=6   -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib  conftest.cpp  -lopenblas  >&5\nconfigure:18304: $? = 0\nconfigure:18304: ./conftest\n./configure: line 1735: 100961 Illegal instruction     (core dumped) ./conftest$ac_exeext\n```",
    "created_at": "2022-09-23T00:21:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546601",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:60" align="right">comment:60</div>

Looks like the failures are only due to a flaw in my new 2-stage workflow, related to the use of `-arch=native`. For example, looking into the config.log of the failing `fflas_ffpack` package on `fedora-35-minimal` https://github.com/mkoeppe/sage/actions/runs/3108109396/jobs/5036948018, one sees:

```
configure:18251: checking for use of MKL
configure:18268: result: no 
configure:18288: checking for BLAS
configure:18304: g++ -std=gnu++11 -o conftest -g -O2   -I. -I.. -I. -I./fflas-ffpack -fabi-version=6   -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib  conftest.cpp  -lopenblas  >&5
configure:18304: $? = 0
configure:18304: ./conftest
./configure: line 1735: 100961 Illegal instruction     (core dumped) ./conftest$ac_exeext
```



---

archive/issue_comments_546602.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nI've opened #34572 to improve this.",
    "created_at": "2022-09-23T00:24:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546602",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:61" align="right">comment:61</div>

I've opened #34572 to improve this.



---

archive/issue_comments_546603.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nDo we need to test on OS X pre-Monterey? Otherwise, I'm ready to give this a positive review, at least from the OS X point of view.",
    "created_at": "2022-09-23T02:13:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546603",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:62" align="right">comment:62</div>

Do we need to test on OS X pre-Monterey? Otherwise, I'm ready to give this a positive review, at least from the OS X point of view.



---

archive/issue_comments_546604.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nA test on Catalina (10.15) ran at https://github.com/mkoeppe/sage/actions/runs/3094982845/jobs/5008934048, looks OK",
    "created_at": "2022-09-23T05:07:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546604",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:63" align="right">comment:63</div>

A test on Catalina (10.15) ran at https://github.com/mkoeppe/sage/actions/runs/3094982845/jobs/5008934048, looks OK



---

archive/issue_comments_546605.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nI've manually tested `tox -e docker-fedora-35-minimal` (also ran `make ptest`), also fine. \n\nI've also tested `EXTRA_CONFIGURE_ARGS=--without-system-gfortran tox -e docker-ubuntu-trusty-toolchain-gcc_9-minimal`, a bit of an usual configuration, which has a failure in `src/sage/misc/inline_fortran.py`, but I don't think this is important enough to investigate more",
    "created_at": "2022-09-23T05:09:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546605",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:64" align="right">comment:64</div>

I've manually tested `tox -e docker-fedora-35-minimal` (also ran `make ptest`), also fine. 

I've also tested `EXTRA_CONFIGURE_ARGS=--without-system-gfortran tox -e docker-ubuntu-trusty-toolchain-gcc_9-minimal`, a bit of an usual configuration, which has a failure in `src/sage/misc/inline_fortran.py`, but I don't think this is important enough to investigate more



---

archive/issue_comments_546606.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nSo I think this is ready to go",
    "created_at": "2022-09-23T05:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546606",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:65" align="right">comment:65</div>

So I think this is ready to go



---

archive/issue_comments_546607.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nOkay, let's merge it early in this release cycle, not that too many people are building our `gfortran` anyway...",
    "created_at": "2022-09-23T05:35:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546607",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:66" align="right">comment:66</div>

Okay, let's merge it early in this release cycle, not that too many people are building our `gfortran` anyway...



---

archive/issue_events_460494.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-09-23T05:35:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460494"
}
```



---

archive/issue_events_460495.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-09-23T05:35:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460495"
}
```



---

archive/issue_comments_546608.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/3094982876, https://github.com/mkoeppe/sage/actions/runs/3108109396/jobs/5036946542** to **John Palmieri**",
    "created_at": "2022-09-23T05:35:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546608",
    "user": "https://github.com/jhpalmieri"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/3094982876, https://github.com/mkoeppe/sage/actions/runs/3108109396/jobs/5036946542** to **John Palmieri**



---

archive/issue_comments_546609.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nThanks!",
    "created_at": "2022-09-23T05:51:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546609",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:67" align="right">comment:67</div>

Thanks!



---

archive/issue_comments_546610.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nFull run: http://build.sagemath.org/#/builders/15/builds/5\n\nFlint testsuite dies on the kucalc buildbot (Ubuntu 16.04.5 LTS)\n\n```\ngcc -g -O2 -I/var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.8.4/src -I/var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.8.4/src/build -I/var/lib/buildbot/slave/sage_git/build/local/include -I/var/lib/buildbot/slave/sage_git/build/local/include -I/var/lib/buildbot/slave/sage_git/build/local/include test_helpers.o test/t-sdiv_qrnnd.c -o build/test/t-sdiv_qrnnd -L/var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.8.4/src -L/var/lib/buildbot/slave/sage_git/build/local/lib -L/var/lib/buildbot/slave/sage_git/build/local/lib -L/var/lib/buildbot/slave/sage_git/build/local/lib -lflint -lmpfr -lgmp -lm -lntl -lpthread  -Wl,-rpath-link,/var/lib/buildbot/slave/sage_git/build/local/lib -L/var/lib/buildbot/slave/sage_git/build/local/lib -Wl,-rpath,/var/lib/buildbot/slave/sage_git/build/local/lib -Wl,-rpath-link,/var/lib/buildbot/slave/sage_git/build/local/lib -L/var/lib/buildbot/slave/sage_git/build/local/lib -Wl,-rpath,/var/lib/buildbot/slave/sage_git/build/local/lib  -Wl,-rpath,/var/lib/buildbot/slave/sage_git/build/local/lib -Wl,-rpath,/var/lib/buildbot/slave/sage_git/build/local/lib -Wl,-rpath,/var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.8.4/src\n(WANTDEPS=1; export WANTDEPS; BUILD_DIR=build; export BUILD_DIR; make -f Makefile.subdirs -C . check || exit $?;)\nsub_dddmmmsss....invert_limb....udiv_qrnnd....add_ssssaaaaaaaa....byte_swap....umul_ppmm....add_ssaaaa....add_sssaaaaaa....udiv_qrnnd_preinv....PASS\nsmul_ppmm....count_leading_zeros....count_trailing_zeros....PASS\nsub_ddmmss....PASS\nsdiv_qrnnd....PASS\nPASS\nPASS\nMakefile.subdirs:107: recipe for target 'build/test/t-sdiv_qrnnd_RUN' failed\nmake[6]: *** [build/test/t-sdiv_qrnnd_RUN] Floating point exception (core dumped)\nPASS\nPASS\nPASS\nPASS\nPASS\nPASS\nPASS\nmake[6]: Target 'check' not remade because of errors.\nMakefile:219: recipe for target 'check' failed\nmake[5]: *** [check] Error 2\n```",
    "created_at": "2022-09-26T22:36:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546610",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:68" align="right">comment:68</div>

Full run: http://build.sagemath.org/#/builders/15/builds/5

Flint testsuite dies on the kucalc buildbot (Ubuntu 16.04.5 LTS)

```
gcc -g -O2 -I/var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.8.4/src -I/var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.8.4/src/build -I/var/lib/buildbot/slave/sage_git/build/local/include -I/var/lib/buildbot/slave/sage_git/build/local/include -I/var/lib/buildbot/slave/sage_git/build/local/include test_helpers.o test/t-sdiv_qrnnd.c -o build/test/t-sdiv_qrnnd -L/var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.8.4/src -L/var/lib/buildbot/slave/sage_git/build/local/lib -L/var/lib/buildbot/slave/sage_git/build/local/lib -L/var/lib/buildbot/slave/sage_git/build/local/lib -lflint -lmpfr -lgmp -lm -lntl -lpthread  -Wl,-rpath-link,/var/lib/buildbot/slave/sage_git/build/local/lib -L/var/lib/buildbot/slave/sage_git/build/local/lib -Wl,-rpath,/var/lib/buildbot/slave/sage_git/build/local/lib -Wl,-rpath-link,/var/lib/buildbot/slave/sage_git/build/local/lib -L/var/lib/buildbot/slave/sage_git/build/local/lib -Wl,-rpath,/var/lib/buildbot/slave/sage_git/build/local/lib  -Wl,-rpath,/var/lib/buildbot/slave/sage_git/build/local/lib -Wl,-rpath,/var/lib/buildbot/slave/sage_git/build/local/lib -Wl,-rpath,/var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.8.4/src
(WANTDEPS=1; export WANTDEPS; BUILD_DIR=build; export BUILD_DIR; make -f Makefile.subdirs -C . check || exit $?;)
sub_dddmmmsss....invert_limb....udiv_qrnnd....add_ssssaaaaaaaa....byte_swap....umul_ppmm....add_ssaaaa....add_sssaaaaaa....udiv_qrnnd_preinv....PASS
smul_ppmm....count_leading_zeros....count_trailing_zeros....PASS
sub_ddmmss....PASS
sdiv_qrnnd....PASS
PASS
PASS
Makefile.subdirs:107: recipe for target 'build/test/t-sdiv_qrnnd_RUN' failed
make[6]: *** [build/test/t-sdiv_qrnnd_RUN] Floating point exception (core dumped)
PASS
PASS
PASS
PASS
PASS
PASS
PASS
make[6]: Target 'check' not remade because of errors.
Makefile:219: recipe for target 'check' failed
make[5]: *** [check] Error 2
```



---

archive/issue_events_460496.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-09-26T22:36:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460496"
}
```



---

archive/issue_events_460497.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-09-26T22:36:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460497"
}
```



---

archive/issue_comments_546611.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nOur web page https://trac.sagemath.org/wiki/ReleaseTours/sage-9.8#Configurationchanges says \"Users of older Linux distributions (in particular, ubuntu-xenial or older, debian-stretch or older, linuxmint-18 or older) should upgrade their systems before attempting to install Sage from source.\" So does a test failure on Ubuntu 16.04 matter?",
    "created_at": "2022-09-26T22:48:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546611",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:69" align="right">comment:69</div>

Our web page https://trac.sagemath.org/wiki/ReleaseTours/sage-9.8#Configurationchanges says "Users of older Linux distributions (in particular, ubuntu-xenial or older, debian-stretch or older, linuxmint-18 or older) should upgrade their systems before attempting to install Sage from source." So does a test failure on Ubuntu 16.04 matter?



---

archive/issue_comments_546612.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nYes, I think this buildbot should be updated to a supported configuration, for example using https://askubuntu.com/questions/1140183/install-gcc-9-on-ubuntu-18-04/1149383#1149383",
    "created_at": "2022-09-27T00:33:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546612",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:70" align="right">comment:70</div>

Yes, I think this buildbot should be updated to a supported configuration, for example using https://askubuntu.com/questions/1140183/install-gcc-9-on-ubuntu-18-04/1149383#1149383



---

archive/issue_comments_546613.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nSo do we just set this back to positive, or does someone have to do something with the buildbot first?",
    "created_at": "2022-10-12T18:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546613",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:71" align="right">comment:71</div>

So do we just set this back to positive, or does someone have to do something with the buildbot first?



---

archive/issue_events_460498.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-10-13T02:13:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460498"
}
```



---

archive/issue_events_460499.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-10-13T02:13:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460499"
}
```



---

archive/issue_comments_546614.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/update_gcc_gfortran_to_12_x___apple_silicon_support](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/update_gcc_gfortran_to_12_x___apple_silicon_support)** to **[`e89ba55`](https://github.com/sagemath/sagetrac-mirror/commit/e89ba553fa43eea1539f39cc423fd0174d371b64)**",
    "created_at": "2022-10-17T22:44:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33816#issuecomment-546614",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/update_gcc_gfortran_to_12_x___apple_silicon_support](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/update_gcc_gfortran_to_12_x___apple_silicon_support)** to **[`e89ba55`](https://github.com/sagemath/sagetrac-mirror/commit/e89ba553fa43eea1539f39cc423fd0174d371b64)**



---

archive/issue_events_460500.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-10-17T22:44:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460500"
}
```



---

archive/issue_events_460501.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "25d8bdc9025e0f1aa857dc02505e9886338affc0",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-10-17T22:44:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33816",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33816#event-460501"
}
```
