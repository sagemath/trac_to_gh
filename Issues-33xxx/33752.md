# Issue 33752: Implement solid angle measure for two-dimensional cones

archive/issues_033515.json:
```json
{
    "assignees": [],
    "body": "Implement the solid angle measure (the plane angle) of a two-dimensional cone, using the dot-product (trigonometry) formula. \n\nWe do not assume nor compute the minimal description of the cone.\nWhen the input contains more than two vectors as generators of the cone, we decompose the cone into simplicial cones. The helper function `simplicial_subcones_decomposition` will be re-used in higher dimension cases.\n\nFor example, the solid angle of the upper half plane (generated by three rays, hence not simplicial) `solid_angle_2d([[1,0],[0,1],[-1,0]])` is 1/2.\n\nDepends on #33656\n\nCC:  @yuan-zhou @mkoeppe\n\nKeywords: **solid angle**\n\nBranch/Commit: **[u/gh-allisonfitisone/implement_solid_angle_measure_for_two_dimensional_cones](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-allisonfitisone/implement_solid_angle_measure_for_two_dimensional_cones) @ [`7a7c253`](https://github.com/sagemath/sagetrac-mirror/commit/7a7c2535b221a93f27616155976250ddc7dd8893)**\n\nAuthor: **Allison Fitisone, Yuan Zhou**\n\nComponent: **geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33752_\n\n",
    "created_at": "2022-04-25T01:23:21Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20review"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement solid angle measure for two-dimensional cones",
    "type": "issue",
    "updated_at": "2022-09-19T18:58:47Z",
    "url": "https://github.com/sagemath/sage/issues/33752",
    "user": "https://github.com/allisonfitisone"
}
```
Implement the solid angle measure (the plane angle) of a two-dimensional cone, using the dot-product (trigonometry) formula. 

We do not assume nor compute the minimal description of the cone.
When the input contains more than two vectors as generators of the cone, we decompose the cone into simplicial cones. The helper function `simplicial_subcones_decomposition` will be re-used in higher dimension cases.

For example, the solid angle of the upper half plane (generated by three rays, hence not simplicial) `solid_angle_2d([[1,0],[0,1],[-1,0]])` is 1/2.

Depends on #33656

CC:  @yuan-zhou @mkoeppe

Keywords: **solid angle**

Branch/Commit: **[u/gh-allisonfitisone/implement_solid_angle_measure_for_two_dimensional_cones](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-allisonfitisone/implement_solid_angle_measure_for_two_dimensional_cones) @ [`7a7c253`](https://github.com/sagemath/sagetrac-mirror/commit/7a7c2535b221a93f27616155976250ddc7dd8893)**

Author: **Allison Fitisone, Yuan Zhou**

Component: **geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/33752_





---

archive/issue_events_459815.json:
```json
{
    "actor": "https://github.com/allisonfitisone",
    "created_at": "2022-04-25T01:23:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33752#event-459815"
}
```



---

archive/issue_events_459816.json:
```json
{
    "actor": "https://github.com/allisonfitisone",
    "created_at": "2022-04-25T01:23:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33752#event-459816"
}
```



---

archive/issue_events_459817.json:
```json
{
    "actor": "https://github.com/allisonfitisone",
    "created_at": "2022-04-25T01:23:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33752#event-459817"
}
```



---

archive/issue_events_459818.json:
```json
{
    "actor": "https://github.com/allisonfitisone",
    "created_at": "2022-04-25T01:23:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33752#event-459818"
}
```



---

archive/issue_comments_545610.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThe only non-simplicial cones in 2d are the non-pointed cones, i.e., cones that contain a nontrivial subspace. So the answer is either 0, 1/2, or 1; no triangulation is needed.",
    "created_at": "2022-04-25T02:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545610",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">comment:1</div>

The only non-simplicial cones in 2d are the non-pointed cones, i.e., cones that contain a nontrivial subspace. So the answer is either 0, 1/2, or 1; no triangulation is needed.



---

archive/issue_comments_545611.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n-Implement the solid angle measure (the plane angle) of a two-dimensional cone, using the dot-product (trigonometry) formula. When the cone is not simplicial, it is decomposed into simplicial cones.\n+Implement the solid angle measure (the plane angle) of a two-dimensional cone, using the dot-product (trigonometry) formula. \n+\n+We do not assume nor compute the minimal description of the cone.\n+When the input contains more than two vectors as generators of the cone, we decompose the cone into simplicial cones. The helper function `simplicial_subcones_decomposition` will be re-used in higher dimension cases.\n \n For example, the solid angle of the upper half plane (generated by three rays, hence not simplicial) `solid_angle_2d([[1,0],[0,1],[-1,0]])` is 1/2.\n``````\n",
    "created_at": "2022-04-25T03:45:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545611",
    "user": "https://github.com/yuan-zhou"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
-Implement the solid angle measure (the plane angle) of a two-dimensional cone, using the dot-product (trigonometry) formula. When the cone is not simplicial, it is decomposed into simplicial cones.
+Implement the solid angle measure (the plane angle) of a two-dimensional cone, using the dot-product (trigonometry) formula. 
+
+We do not assume nor compute the minimal description of the cone.
+When the input contains more than two vectors as generators of the cone, we decompose the cone into simplicial cones. The helper function `simplicial_subcones_decomposition` will be re-used in higher dimension cases.
 
 For example, the solid angle of the upper half plane (generated by three rays, hence not simplicial) `solid_angle_2d([[1,0],[0,1],[-1,0]])` is 1/2.
``````




---

archive/issue_comments_545612.json:
```json
{
    "body": "Branch: **[u/yzh/implement_solid_angle_measure_for_two_dimensional_cones](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/implement_solid_angle_measure_for_two_dimensional_cones)**",
    "created_at": "2022-04-26T19:51:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545612",
    "user": "https://github.com/yuan-zhou"
}
```

Branch: **[u/yzh/implement_solid_angle_measure_for_two_dimensional_cones](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/implement_solid_angle_measure_for_two_dimensional_cones)**



---

archive/issue_comments_545613.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nMerged in #33656.",
    "created_at": "2022-04-26T19:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545613",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:4" align="right">comment:4</div>

Merged in #33656.



---

archive/issue_comments_545614.json:
```json
{
    "body": "Commit: **[`29aa49e`](https://github.com/sagemath/sagetrac-mirror/commit/29aa49e9b46d5d5f52389ccb95431109af41bc05)**",
    "created_at": "2022-04-26T19:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545614",
    "user": "https://github.com/yuan-zhou"
}
```

Commit: **[`29aa49e`](https://github.com/sagemath/sagetrac-mirror/commit/29aa49e9b46d5d5f52389ccb95431109af41bc05)**



---

archive/issue_comments_545615.json:
```json
{
    "body": "Changed branch from **[u/yzh/implement_solid_angle_measure_for_two_dimensional_cones](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/implement_solid_angle_measure_for_two_dimensional_cones)** to **[u/gh-allisonfitisone/implement_solid_angle_measure_for_two_dimensional_cones](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-allisonfitisone/implement_solid_angle_measure_for_two_dimensional_cones)**",
    "created_at": "2022-05-06T13:24:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545615",
    "user": "https://github.com/allisonfitisone"
}
```

Changed branch from **[u/yzh/implement_solid_angle_measure_for_two_dimensional_cones](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/implement_solid_angle_measure_for_two_dimensional_cones)** to **[u/gh-allisonfitisone/implement_solid_angle_measure_for_two_dimensional_cones](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-allisonfitisone/implement_solid_angle_measure_for_two_dimensional_cones)**



---

archive/issue_comments_545616.json:
```json
{
    "body": "Changed commit from **[`29aa49e`](https://github.com/sagemath/sagetrac-mirror/commit/29aa49e9b46d5d5f52389ccb95431109af41bc05)** to **[`d4b7c16`](https://github.com/sagemath/sagetrac-mirror/commit/d4b7c16d1994409700c87c781d6990cc634b1518)**",
    "created_at": "2022-05-06T15:23:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545616",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`29aa49e`](https://github.com/sagemath/sagetrac-mirror/commit/29aa49e9b46d5d5f52389ccb95431109af41bc05)** to **[`d4b7c16`](https://github.com/sagemath/sagetrac-mirror/commit/d4b7c16d1994409700c87c781d6990cc634b1518)**



---

archive/issue_comments_545617.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4b7c16d1994409700c87c781d6990cc634b1518\"><code>d4b7c16</code></a></td><td><code>fixed typos/formatting]</code></td></tr></table>\n",
    "created_at": "2022-05-06T15:23:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545617",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4b7c16d1994409700c87c781d6990cc634b1518"><code>d4b7c16</code></a></td><td><code>fixed typos/formatting]</code></td></tr></table>




---

archive/issue_comments_545618.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f31325bb714e0ff122fb21ab4df18c6cc1350056\"><code>f31325b</code></a></td><td><code>wip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe77320a0f01b5401a7e61322bfdefa69f089928\"><code>fe77320</code></a></td><td><code>change output type</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72df52e5e76ffcc5282255be8b1b984027418134\"><code>72df52e</code></a></td><td><code>Merge branch 't/33656/implement_solid_angle_measure_for_two_dimensional_simplicial_cones' into t/33752/implement_solid_angle_measure_for_two_dimensional_cones</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e62f8b24d3bfafd5457c70ad2d5ecc1e3872dfc\"><code>1e62f8b</code></a></td><td><code>updates to logging and output type</code></td></tr></table>\n",
    "created_at": "2022-05-12T17:17:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545618",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f31325bb714e0ff122fb21ab4df18c6cc1350056"><code>f31325b</code></a></td><td><code>wip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe77320a0f01b5401a7e61322bfdefa69f089928"><code>fe77320</code></a></td><td><code>change output type</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72df52e5e76ffcc5282255be8b1b984027418134"><code>72df52e</code></a></td><td><code>Merge branch 't/33656/implement_solid_angle_measure_for_two_dimensional_simplicial_cones' into t/33752/implement_solid_angle_measure_for_two_dimensional_cones</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e62f8b24d3bfafd5457c70ad2d5ecc1e3872dfc"><code>1e62f8b</code></a></td><td><code>updates to logging and output type</code></td></tr></table>




---

archive/issue_comments_545619.json:
```json
{
    "body": "Changed commit from **[`d4b7c16`](https://github.com/sagemath/sagetrac-mirror/commit/d4b7c16d1994409700c87c781d6990cc634b1518)** to **[`1e62f8b`](https://github.com/sagemath/sagetrac-mirror/commit/1e62f8b24d3bfafd5457c70ad2d5ecc1e3872dfc)**",
    "created_at": "2022-05-12T17:17:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545619",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d4b7c16`](https://github.com/sagemath/sagetrac-mirror/commit/d4b7c16d1994409700c87c781d6990cc634b1518)** to **[`1e62f8b`](https://github.com/sagemath/sagetrac-mirror/commit/1e62f8b24d3bfafd5457c70ad2d5ecc1e3872dfc)**



---

archive/issue_comments_545620.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWhen `P.is_exact() or isinstance(P, sage.rings.abc.SymbolicRing)`, the return type should be `SymbolicConstantsSubring` element",
    "created_at": "2022-05-12T17:28:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545620",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:8" align="right">comment:8</div>

When `P.is_exact() or isinstance(P, sage.rings.abc.SymbolicRing)`, the return type should be `SymbolicConstantsSubring` element



---

archive/issue_comments_545621.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c9aa58e901d36c618a6d090df1f4919639a1903\"><code>3c9aa58</code></a></td><td><code>modified output type and added tests to docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3ad6650acdc592c2f3d6ba2fb0cafb4ea78caa7\"><code>d3ad665</code></a></td><td><code>wip</code></td></tr></table>\n",
    "created_at": "2022-05-17T12:47:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545621",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c9aa58e901d36c618a6d090df1f4919639a1903"><code>3c9aa58</code></a></td><td><code>modified output type and added tests to docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3ad6650acdc592c2f3d6ba2fb0cafb4ea78caa7"><code>d3ad665</code></a></td><td><code>wip</code></td></tr></table>




---

archive/issue_comments_545622.json:
```json
{
    "body": "Changed commit from **[`1e62f8b`](https://github.com/sagemath/sagetrac-mirror/commit/1e62f8b24d3bfafd5457c70ad2d5ecc1e3872dfc)** to **[`d3ad665`](https://github.com/sagemath/sagetrac-mirror/commit/d3ad6650acdc592c2f3d6ba2fb0cafb4ea78caa7)**",
    "created_at": "2022-05-17T12:47:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545622",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1e62f8b`](https://github.com/sagemath/sagetrac-mirror/commit/1e62f8b24d3bfafd5457c70ad2d5ecc1e3872dfc)** to **[`d3ad665`](https://github.com/sagemath/sagetrac-mirror/commit/d3ad6650acdc592c2f3d6ba2fb0cafb4ea78caa7)**



---

archive/issue_comments_545623.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/800d88d85523fbf7c4395914a397b316155db75d\"><code>800d88d</code></a></td><td><code>altered logging format</code></td></tr></table>\n",
    "created_at": "2022-05-17T19:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545623",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/800d88d85523fbf7c4395914a397b316155db75d"><code>800d88d</code></a></td><td><code>altered logging format</code></td></tr></table>




---

archive/issue_comments_545624.json:
```json
{
    "body": "Changed commit from **[`d3ad665`](https://github.com/sagemath/sagetrac-mirror/commit/d3ad6650acdc592c2f3d6ba2fb0cafb4ea78caa7)** to **[`800d88d`](https://github.com/sagemath/sagetrac-mirror/commit/800d88d85523fbf7c4395914a397b316155db75d)**",
    "created_at": "2022-05-17T19:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545624",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d3ad665`](https://github.com/sagemath/sagetrac-mirror/commit/d3ad6650acdc592c2f3d6ba2fb0cafb4ea78caa7)** to **[`800d88d`](https://github.com/sagemath/sagetrac-mirror/commit/800d88d85523fbf7c4395914a397b316155db75d)**



---

archive/issue_comments_545625.json:
```json
{
    "body": "Changed commit from **[`800d88d`](https://github.com/sagemath/sagetrac-mirror/commit/800d88d85523fbf7c4395914a397b316155db75d)** to **[`a8e1152`](https://github.com/sagemath/sagetrac-mirror/commit/a8e115205ed5b0554a51fc47e24105a71cde47f6)**",
    "created_at": "2022-05-19T19:34:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545625",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`800d88d`](https://github.com/sagemath/sagetrac-mirror/commit/800d88d85523fbf7c4395914a397b316155db75d)** to **[`a8e1152`](https://github.com/sagemath/sagetrac-mirror/commit/a8e115205ed5b0554a51fc47e24105a71cde47f6)**



---

archive/issue_comments_545626.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d5ab98190d9d2c1889986784e743e7208674d71\"><code>9d5ab98</code></a></td><td><code>change output type for input in symbolic ring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/165d13fdf60880f531982a98ec7850cb8c3af45a\"><code>165d13f</code></a></td><td><code>Merge branch 't/33656/implement_solid_angle_measure_for_two_dimensional_simplicial_cones' into t/33752/implement_solid_angle_measure_for_two_dimensional_cones</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8e115205ed5b0554a51fc47e24105a71cde47f6\"><code>a8e1152</code></a></td><td><code>change output type</code></td></tr></table>\n",
    "created_at": "2022-05-19T19:34:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545626",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d5ab98190d9d2c1889986784e743e7208674d71"><code>9d5ab98</code></a></td><td><code>change output type for input in symbolic ring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/165d13fdf60880f531982a98ec7850cb8c3af45a"><code>165d13f</code></a></td><td><code>Merge branch 't/33656/implement_solid_angle_measure_for_two_dimensional_simplicial_cones' into t/33752/implement_solid_angle_measure_for_two_dimensional_cones</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8e115205ed5b0554a51fc47e24105a71cde47f6"><code>a8e1152</code></a></td><td><code>change output type</code></td></tr></table>




---

archive/issue_events_459819.json:
```json
{
    "actor": "https://github.com/allisonfitisone",
    "created_at": "2022-05-19T19:36:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33752#event-459819"
}
```



---

archive/issue_comments_545627.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1381c2342805df967b812c2f679b32048c566478\"><code>1381c23</code></a></td><td><code>remove unnecessary line</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4673707af0ad04d247090587af6e609c31b554bd\"><code>4673707</code></a></td><td><code>wip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c48941bb8b2656500e64f3ce9dc269b94ba99ece\"><code>c48941b</code></a></td><td><code>output in Symbolic Constants Subring when input is exact</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6535715b30d88e43aedf4644272dfe8467d675eb\"><code>6535715</code></a></td><td><code>regroup the doctests for A and B with exact and inexact base rings.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8a5f5af1116736d2ff88d9e0666b8e36315c87c\"><code>d8a5f5a</code></a></td><td><code>fix doctests typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76cb13b554d1facfb14940840b68c02dbdfab6e9\"><code>76cb13b</code></a></td><td><code>Merge branch 't/33656/implement_solid_angle_measure_for_two_dimensional_simplicial_cones' into t/33752/implement_solid_angle_measure_for_two_dimensional_cones</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d23872ecb009ec5fcbadf7cd745d146ec76c6dee\"><code>d23872e</code></a></td><td><code>wip</code></td></tr></table>\n",
    "created_at": "2022-08-25T15:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545627",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1381c2342805df967b812c2f679b32048c566478"><code>1381c23</code></a></td><td><code>remove unnecessary line</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4673707af0ad04d247090587af6e609c31b554bd"><code>4673707</code></a></td><td><code>wip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c48941bb8b2656500e64f3ce9dc269b94ba99ece"><code>c48941b</code></a></td><td><code>output in Symbolic Constants Subring when input is exact</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6535715b30d88e43aedf4644272dfe8467d675eb"><code>6535715</code></a></td><td><code>regroup the doctests for A and B with exact and inexact base rings.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8a5f5af1116736d2ff88d9e0666b8e36315c87c"><code>d8a5f5a</code></a></td><td><code>fix doctests typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76cb13b554d1facfb14940840b68c02dbdfab6e9"><code>76cb13b</code></a></td><td><code>Merge branch 't/33656/implement_solid_angle_measure_for_two_dimensional_simplicial_cones' into t/33752/implement_solid_angle_measure_for_two_dimensional_cones</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d23872ecb009ec5fcbadf7cd745d146ec76c6dee"><code>d23872e</code></a></td><td><code>wip</code></td></tr></table>




---

archive/issue_comments_545628.json:
```json
{
    "body": "Changed commit from **[`a8e1152`](https://github.com/sagemath/sagetrac-mirror/commit/a8e115205ed5b0554a51fc47e24105a71cde47f6)** to **[`d23872e`](https://github.com/sagemath/sagetrac-mirror/commit/d23872ecb009ec5fcbadf7cd745d146ec76c6dee)**",
    "created_at": "2022-08-25T15:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545628",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a8e1152`](https://github.com/sagemath/sagetrac-mirror/commit/a8e115205ed5b0554a51fc47e24105a71cde47f6)** to **[`d23872e`](https://github.com/sagemath/sagetrac-mirror/commit/d23872ecb009ec5fcbadf7cd745d146ec76c6dee)**



---

archive/issue_comments_545629.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n\n```\n+                    var('a b')\n+                    eqn = (-a * v[0][0] - b * v[k][0] - v[j][0] == 0,\n+                           -a * v[0][1] - b * v[k][1] - v[j][1] == 0,\n+                           a >= 0,\n+                           b >= 0)\n+                    if solve(eqn, (a, b)):\n```\nBest not to use the general symbolics facility (`var`, `solve`) for linear algebra",
    "created_at": "2022-08-25T16:24:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545629",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>


```
+                    var('a b')
+                    eqn = (-a * v[0][0] - b * v[k][0] - v[j][0] == 0,
+                           -a * v[0][1] - b * v[k][1] - v[j][1] == 0,
+                           a >= 0,
+                           b >= 0)
+                    if solve(eqn, (a, b)):
```
Best not to use the general symbolics facility (`var`, `solve`) for linear algebra



---

archive/issue_comments_545630.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nFunctions that looks like this:\n\n```\n+        matrices = []\n+        for simplex in triangulation:\n+            matrices.append(matrix(A[i] for i in simplex if i != origin))\n+        return matrices\n```\n... are best rewritten as generators. https://realpython.com/introduction-to-python-generators/#understanding-generators",
    "created_at": "2022-08-25T16:26:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545630",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

Functions that looks like this:

```
+        matrices = []
+        for simplex in triangulation:
+            matrices.append(matrix(A[i] for i in simplex if i != origin))
+        return matrices
```
... are best rewritten as generators. https://realpython.com/introduction-to-python-generators/#understanding-generators



---

archive/issue_comments_545631.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n\n```\n+    This example shows that the cone in `\\RR^4` spanned by the rows of ``A``\n+    (which is input as a list of lists) is actually a halfspace of affine\n+    dimension `2`. The triangulation dissects it into three 2-d subcones::\n+\n+        sage: A_in = [[-3,0,5,0],[0,0,1,0],[-4,0,0,0],[-1,0,0,0],[0,0,-4,0]]\n+        sage: simplicial_subcones_decomposition(A_in)\n+        [\n+        [-3  0  5  0]  [-3  0  5  0]  [-4  0  0  0]\n+        [ 0  0  1  0], [-4  0  0  0], [ 0  0 -4  0]\n+        ]\n```\nThis decomposition looks correct, but I don't think this is the best way of computing the solid angle - as I explained in [comment:1](#comment%3A1).",
    "created_at": "2022-08-25T16:28:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545631",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>


```
+    This example shows that the cone in `\RR^4` spanned by the rows of ``A``
+    (which is input as a list of lists) is actually a halfspace of affine
+    dimension `2`. The triangulation dissects it into three 2-d subcones::
+
+        sage: A_in = [[-3,0,5,0],[0,0,1,0],[-4,0,0,0],[-1,0,0,0],[0,0,-4,0]]
+        sage: simplicial_subcones_decomposition(A_in)
+        [
+        [-3  0  5  0]  [-3  0  5  0]  [-4  0  0  0]
+        [ 0  0  1  0], [-4  0  0  0], [ 0  0 -4  0]
+        ]
```
This decomposition looks correct, but I don't think this is the best way of computing the solid angle - as I explained in [comment:1](#comment%3A1).



---

archive/issue_comments_545632.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAll of this can be replaced by just using `Polyhedron(rays=A.rows())`. To see whether it is at least a halfplane, check `lines()`",
    "created_at": "2022-08-25T16:31:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545632",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

All of this can be replaced by just using `Polyhedron(rays=A.rows())`. To see whether it is at least a halfplane, check `lines()`



---

archive/issue_comments_545633.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nWhen using `Polyhedron(rays=A.rows())`, we can't do computations over SR (see below). Any suggestions for a workaround?\n\n```\nsage: A = matrix([[sqrt(2),0],[0,1]])\nsage: solid_angle_2d(A)\nValueError: no default backend for computations with Symbolic Ring\n```\n\nReplying to [@mkoeppe](#comment%3A17):\n> All of this can be replaced by just using `Polyhedron(rays=A.rows())`. To see whether it is at least a halfplane, check `lines()`",
    "created_at": "2022-08-30T19:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545633",
    "user": "https://github.com/allisonfitisone"
}
```

<div id="comment:18" align="right">comment:18</div>

When using `Polyhedron(rays=A.rows())`, we can't do computations over SR (see below). Any suggestions for a workaround?

```
sage: A = matrix([[sqrt(2),0],[0,1]])
sage: solid_angle_2d(A)
ValueError: no default backend for computations with Symbolic Ring
```

Replying to [@mkoeppe](#comment%3A17):
> All of this can be replaced by just using `Polyhedron(rays=A.rows())`. To see whether it is at least a halfplane, check `lines()`



---

archive/issue_comments_545634.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nIf you only need algebraic numbers, you can use `A = matrix(AA, [[sqrt(2),0],[0,1]])`",
    "created_at": "2022-08-30T19:35:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545634",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

If you only need algebraic numbers, you can use `A = matrix(AA, [[sqrt(2),0],[0,1]])`



---

archive/issue_comments_545635.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nRight, if the input is of type AA, then Polyhedron can deal with it, and the output is also of type AA. The question is, what if the input is just `A = matrix([[sqrt(2),0],[0,1]])`? Would it be better to avoid Polyhedron and just use more elementary operations like rank?\nReplying to [@mkoeppe](#comment%3A19):\n> If you only need algebraic numbers, you can use `A = matrix(AA, [[sqrt(2),0],[0,1]])`",
    "created_at": "2022-08-30T20:02:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545635",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:20" align="right">comment:20</div>

Right, if the input is of type AA, then Polyhedron can deal with it, and the output is also of type AA. The question is, what if the input is just `A = matrix([[sqrt(2),0],[0,1]])`? Would it be better to avoid Polyhedron and just use more elementary operations like rank?
Replying to [@mkoeppe](#comment%3A19):
> If you only need algebraic numbers, you can use `A = matrix(AA, [[sqrt(2),0],[0,1]])`



---

archive/issue_comments_545636.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@yuan-zhou](#comment%3A20):\n> Right, if the input is of type AA, then Polyhedron can deal with it, and the output is also of type AA. The question is, what if the input is just `A = matrix([[sqrt(2),0],[0,1]])`? \n\nWell, you can try to convert it to a matrix space over `AA`, and if that fails, just raise an error.\n\n> Would it be better to avoid Polyhedron and just use more elementary operations like rank?\n\nDo you have an application for non-algebraic irrational input?\n\nIf yes, then yes, one would have to either avoid Polyhedron or extend Polyhedron so it can handle well-behaved symbolic elements. After all, this error:\n\n```\nsage: Polyhedron(vertices=[[1], [sqrt(2)]], base_ring=SR, backend='field')\nValueError: the 'field' backend for polyhedron cannot be used with non-exact fields\n```\nis artificial - it's there to protect users from weird stuff that can happen.\n\nIf no, then maybe this generality is not worth working on?",
    "created_at": "2022-08-30T20:11:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545636",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@yuan-zhou](#comment%3A20):
> Right, if the input is of type AA, then Polyhedron can deal with it, and the output is also of type AA. The question is, what if the input is just `A = matrix([[sqrt(2),0],[0,1]])`? 

Well, you can try to convert it to a matrix space over `AA`, and if that fails, just raise an error.

> Would it be better to avoid Polyhedron and just use more elementary operations like rank?

Do you have an application for non-algebraic irrational input?

If yes, then yes, one would have to either avoid Polyhedron or extend Polyhedron so it can handle well-behaved symbolic elements. After all, this error:

```
sage: Polyhedron(vertices=[[1], [sqrt(2)]], base_ring=SR, backend='field')
ValueError: the 'field' backend for polyhedron cannot be used with non-exact fields
```
is artificial - it's there to protect users from weird stuff that can happen.

If no, then maybe this generality is not worth working on?



---

archive/issue_comments_545637.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nYou are right, I don't have an application where the input is non-algebraic irrationals. \n\nI agree that symbolics facility (`var` and `solve`) should be avoid.\n\nHowever, I thought that checking the special cases of half space and whole space is straightforward enough, which make the use of Polyhedron and the conversion to AA seem overkill. It's just some if else statements, and with that, the input `A = matrix([[sqrt(2),0],[0,1]])` can work. In my option, it's unusual to input `matrix(AA, [[sqrt(2),0],[0,1]])`. \n\nAlso, if we convert the inputs matrix to over AA, what would be the right type of the output? Do we always have AA as output type, never the Symbolic ring or Symbolic Constants Subring?",
    "created_at": "2022-08-30T21:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545637",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:22" align="right">comment:22</div>

You are right, I don't have an application where the input is non-algebraic irrationals. 

I agree that symbolics facility (`var` and `solve`) should be avoid.

However, I thought that checking the special cases of half space and whole space is straightforward enough, which make the use of Polyhedron and the conversion to AA seem overkill. It's just some if else statements, and with that, the input `A = matrix([[sqrt(2),0],[0,1]])` can work. In my option, it's unusual to input `matrix(AA, [[sqrt(2),0],[0,1]])`. 

Also, if we convert the inputs matrix to over AA, what would be the right type of the output? Do we always have AA as output type, never the Symbolic ring or Symbolic Constants Subring?



---

archive/issue_comments_545638.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@yuan-zhou](#comment%3A22):\n> Also, if we convert the inputs matrix to over AA, what would be the right type of the output? Do we always have AA as output type, never the Symbolic ring or Symbolic Constants Subring?\n\nYes, it would make sense to convert it back to the ring where it came from if AA is used internally. (That's how we do this for the `Polyhedron(backend='normaliz')`, by the way.)",
    "created_at": "2022-08-30T21:41:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545638",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@yuan-zhou](#comment%3A22):
> Also, if we convert the inputs matrix to over AA, what would be the right type of the output? Do we always have AA as output type, never the Symbolic ring or Symbolic Constants Subring?

Yes, it would make sense to convert it back to the ring where it came from if AA is used internally. (That's how we do this for the `Polyhedron(backend='normaliz')`, by the way.)



---

archive/issue_comments_545639.json:
```json
{
    "body": "Changed commit from **[`d23872e`](https://github.com/sagemath/sagetrac-mirror/commit/d23872ecb009ec5fcbadf7cd745d146ec76c6dee)** to **[`7a7c253`](https://github.com/sagemath/sagetrac-mirror/commit/7a7c2535b221a93f27616155976250ddc7dd8893)**",
    "created_at": "2022-09-01T20:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545639",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d23872e`](https://github.com/sagemath/sagetrac-mirror/commit/d23872ecb009ec5fcbadf7cd745d146ec76c6dee)** to **[`7a7c253`](https://github.com/sagemath/sagetrac-mirror/commit/7a7c2535b221a93f27616155976250ddc7dd8893)**



---

archive/issue_comments_545640.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3a91f72dd7e7fea949b20404478acae1e9b8bb8\"><code>e3a91f7</code></a></td><td><code>wip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a7c2535b221a93f27616155976250ddc7dd8893\"><code>7a7c253</code></a></td><td><code>add QQ</code></td></tr></table>\n",
    "created_at": "2022-09-01T20:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545640",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3a91f72dd7e7fea949b20404478acae1e9b8bb8"><code>e3a91f7</code></a></td><td><code>wip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a7c2535b221a93f27616155976250ddc7dd8893"><code>7a7c253</code></a></td><td><code>add QQ</code></td></tr></table>




---

archive/issue_comments_545641.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nDo you mean to use `number_field_elements_from_algebraics` from `sage.rings.qqbar`?\nI still don't see how to convert `AA(sqrt(2))` (interval AA number) back to `sqrt(2)` as output, if the input was in the symbolic ring.\n\nReplying to [@mkoeppe](#comment%3A23):\n> Replying to [@yuan-zhou](#comment%3A22):\n> > Also, if we convert the inputs matrix to over AA, what would be the right type of the output? Do we always have AA as output type, never the Symbolic ring or Symbolic Constants Subring?\n\n> \n> Yes, it would make sense to convert it back to the ring where it came from if AA is used internally. (That's how we do this for the `Polyhedron(backend='normaliz')`, by the way.)",
    "created_at": "2022-09-02T01:42:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545641",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:25" align="right">comment:25</div>

Do you mean to use `number_field_elements_from_algebraics` from `sage.rings.qqbar`?
I still don't see how to convert `AA(sqrt(2))` (interval AA number) back to `sqrt(2)` as output, if the input was in the symbolic ring.

Replying to [@mkoeppe](#comment%3A23):
> Replying to [@yuan-zhou](#comment%3A22):
> > Also, if we convert the inputs matrix to over AA, what would be the right type of the output? Do we always have AA as output type, never the Symbolic ring or Symbolic Constants Subring?

> 
> Yes, it would make sense to convert it back to the ring where it came from if AA is used internally. (That's how we do this for the `Polyhedron(backend='normaliz')`, by the way.)



---

archive/issue_comments_545642.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nFirst check if `Polyhedron(..., backend='normaliz')` is able to handle the kinds of numbers you'd like to handle and gives back SR elements.",
    "created_at": "2022-09-02T01:47:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545642",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

First check if `Polyhedron(..., backend='normaliz')` is able to handle the kinds of numbers you'd like to handle and gives back SR elements.



---

archive/issue_comments_545643.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nSure, using `backend='normaliz'` solves most cases. The problem is that this is an optional backend. Do we really want to use an optional package that most users don't install to deal with something so elementary -- 2 very special cases in 2D?\n\nReplying to [@mkoeppe](#comment%3A26):\n> First check if `Polyhedron(..., backend='normaliz')` is able to handle the kinds of numbers you'd like to handle and gives back SR elements.",
    "created_at": "2022-09-02T02:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545643",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:27" align="right">comment:27</div>

Sure, using `backend='normaliz'` solves most cases. The problem is that this is an optional backend. Do we really want to use an optional package that most users don't install to deal with something so elementary -- 2 very special cases in 2D?

Replying to [@mkoeppe](#comment%3A26):
> First check if `Polyhedron(..., backend='normaliz')` is able to handle the kinds of numbers you'd like to handle and gives back SR elements.



---

archive/issue_comments_545644.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nYour code would still work without normaliz for rational input.",
    "created_at": "2022-09-02T02:03:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545644",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

Your code would still work without normaliz for rational input.



---

archive/issue_comments_545645.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nYes, that's right. As it's quite usual to have sqrt(2), sqrt(3) in rays (45\u00b0, 60\u00b0), I think the code should work for these cases regardless of having normaliz or not.\n\nReplying to [@mkoeppe](#comment%3A28):\n> Your code would still work without normaliz for rational input.",
    "created_at": "2022-09-02T02:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545645",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:29" align="right">comment:29</div>

Yes, that's right. As it's quite usual to have sqrt(2), sqrt(3) in rays (45°, 60°), I think the code should work for these cases regardless of having normaliz or not.

Replying to [@mkoeppe](#comment%3A28):
> Your code would still work without normaliz for rational input.



---

archive/issue_comments_545646.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI think some more thought on the use cases is needed. Where do your irrational inputs come from? If you already have angles, there's no need to recompute them",
    "created_at": "2022-09-02T02:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545646",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

I think some more thought on the use cases is needed. Where do your irrational inputs come from? If you already have angles, there's no need to recompute them



---

archive/issue_comments_545647.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@yuan-zhou](#comment%3A27):\n> Sure, using `backend='normaliz'` solves most cases. \n\nI mean I know that it can deal with `sqrt(2)`. Have you checked other cases? What are \"most\", are there exceptions that are motivated by an application?",
    "created_at": "2022-09-02T02:14:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545647",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@yuan-zhou](#comment%3A27):
> Sure, using `backend='normaliz'` solves most cases. 

I mean I know that it can deal with `sqrt(2)`. Have you checked other cases? What are "most", are there exceptions that are motivated by an application?



---

archive/issue_comments_545648.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI don't really have use cases in 2D, 2D angles are trivial...\n\nIt feels weird that if a Calculus student wants to compute the angle between ray (1, 0) and ray (0, sqrt(3)), they must have normaliz installed. \n\nMy thought is not to use Polyhedron in 2d, but just check for the two special cases.\n\nAlternatively, we can use `P = Polyhedron(rays=A.rows(), base_ring=AA)` which doesn't call normaliz. But then, I don't know how to convert the AA result back to symbolic.",
    "created_at": "2022-09-02T02:24:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545648",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:32" align="right">comment:32</div>

I don't really have use cases in 2D, 2D angles are trivial...

It feels weird that if a Calculus student wants to compute the angle between ray (1, 0) and ray (0, sqrt(3)), they must have normaliz installed. 

My thought is not to use Polyhedron in 2d, but just check for the two special cases.

Alternatively, we can use `P = Polyhedron(rays=A.rows(), base_ring=AA)` which doesn't call normaliz. But then, I don't know how to convert the AA result back to symbolic.



---

archive/issue_comments_545649.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@yuan-zhou](#comment%3A32):\n> Alternatively, we can use `P = Polyhedron(rays=A.rows(), base_ring=AA)` which doesn't call normaliz. But then, I don't know how to convert the AA result back to symbolic.\n\nYou're missing that the conversion code that is in our Normaliz backend does not need Normaliz. We are using it to communicate with Normaliz.",
    "created_at": "2022-09-02T02:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545649",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@yuan-zhou](#comment%3A32):
> Alternatively, we can use `P = Polyhedron(rays=A.rows(), base_ring=AA)` which doesn't call normaliz. But then, I don't know how to convert the AA result back to symbolic.

You're missing that the conversion code that is in our Normaliz backend does not need Normaliz. We are using it to communicate with Normaliz.



---

archive/issue_comments_545650.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI know that \"conversion code that is in our Normaliz backend does not need Normaliz.\"\nBut how does it help with 2d solid angle? \n\n> Replying to [@yuan-zhou](#comment%3A32):\n> > Alternatively, we can use `P = Polyhedron(rays=A.rows(), base_ring=AA)` which doesn't call normaliz. But then, I don't know how to convert the AA result back to symbolic.\n\n> \n> You're missing that the conversion code that is in our Normaliz backend does not need Normaliz. We are using it to communicate with Normaliz.",
    "created_at": "2022-09-02T02:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545650",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:34" align="right">comment:34</div>

I know that "conversion code that is in our Normaliz backend does not need Normaliz."
But how does it help with 2d solid angle? 

> Replying to [@yuan-zhou](#comment%3A32):
> > Alternatively, we can use `P = Polyhedron(rays=A.rows(), base_ring=AA)` which doesn't call normaliz. But then, I don't know how to convert the AA result back to symbolic.

> 
> You're missing that the conversion code that is in our Normaliz backend does not need Normaliz. We are using it to communicate with Normaliz.



---

archive/issue_comments_545651.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nSee #34479",
    "created_at": "2022-09-02T02:30:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545651",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

See #34479



---

archive/issue_comments_545652.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nI agree with #34479. That ticket will become more useful when we write code for solid angle computation in higher dimension. In 2d, it is like shooting butterfly with rifles :P, but why not...",
    "created_at": "2022-09-02T02:34:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-545652",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:36" align="right">comment:36</div>

I agree with #34479. That ticket will become more useful when we write code for solid angle computation in higher dimension. In 2d, it is like shooting butterfly with rifles :P, but why not...



---

archive/issue_events_459820.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33752#event-459820"
}
```



---

archive/issue_events_459821.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33752#event-459821"
}
```
