# Issue 33752: Implement solid angle measure for two-dimensional cones

archive/issues_033515.json:
```json
{
    "assignees": [],
    "body": "Implement the solid angle measure (the plane angle) of a two-dimensional cone, using the dot-product (trigonometry) formula. \n\nWe do not assume nor compute the minimal description of the cone.\nWhen the input contains more than two vectors as generators of the cone, we decompose the cone into simplicial cones. The helper function `simplicial_subcones_decomposition` will be re-used in higher dimension cases.\n\nFor example, the solid angle of the upper half plane (generated by three rays, hence not simplicial) `solid_angle_2d([[1,0],[0,1],[-1,0]])` is 1/2.\n\nDepends on #33656\n\nCC:  @yuan-zhou @mkoeppe\n\nKeywords: **solid angle**\n\nBranch/Commit: **[u/gh-allisonfitisone/implement_solid_angle_measure_for_two_dimensional_cones](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-allisonfitisone/implement_solid_angle_measure_for_two_dimensional_cones) @ [7a7c253](https://github.com/sagemath/sagetrac-mirror/commit/7a7c2535b221a93f27616155976250ddc7dd8893)**\n\nAuthor: **Allison Fitisone, Yuan Zhou**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33752_\n\n",
    "created_at": "2022-04-25T01:23:21Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20review"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement solid angle measure for two-dimensional cones",
    "type": "issue",
    "updated_at": "2022-09-19T18:58:47Z",
    "url": "https://github.com/sagemath/sage/issues/33752",
    "user": "https://github.com/allisonfitisone"
}
```
Implement the solid angle measure (the plane angle) of a two-dimensional cone, using the dot-product (trigonometry) formula. 

We do not assume nor compute the minimal description of the cone.
When the input contains more than two vectors as generators of the cone, we decompose the cone into simplicial cones. The helper function `simplicial_subcones_decomposition` will be re-used in higher dimension cases.

For example, the solid angle of the upper half plane (generated by three rays, hence not simplicial) `solid_angle_2d([[1,0],[0,1],[-1,0]])` is 1/2.

Depends on #33656

CC:  @yuan-zhou @mkoeppe

Keywords: **solid angle**

Branch/Commit: **[u/gh-allisonfitisone/implement_solid_angle_measure_for_two_dimensional_cones](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-allisonfitisone/implement_solid_angle_measure_for_two_dimensional_cones) @ [7a7c253](https://github.com/sagemath/sagetrac-mirror/commit/7a7c2535b221a93f27616155976250ddc7dd8893)**

Author: **Allison Fitisone, Yuan Zhou**

_Issue created by migration from https://trac.sagemath.org/ticket/33752_





---

archive/issue_events_444859.json:
```json
{
    "actor": "https://github.com/allisonfitisone",
    "created_at": "2022-04-25T01:23:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33752#event-444859"
}
```



---

archive/issue_events_444860.json:
```json
{
    "actor": "https://github.com/allisonfitisone",
    "created_at": "2022-04-25T01:23:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "component: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33752#event-444860"
}
```



---

archive/issue_events_444861.json:
```json
{
    "actor": "https://github.com/allisonfitisone",
    "created_at": "2022-04-25T01:23:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33752#event-444861"
}
```



---

archive/issue_events_444862.json:
```json
{
    "actor": "https://github.com/allisonfitisone",
    "created_at": "2022-04-25T01:23:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33752#event-444862"
}
```



---

archive/issue_comments_548745.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nThe only non-simplicial cones in 2d are the non-pointed cones, i.e., cones that contain a nontrivial subspace. So the answer is either 0, 1/2, or 1; no triangulation is needed.",
    "created_at": "2022-04-25T02:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548745",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'>Comment 1:</a>
The only non-simplicial cones in 2d are the non-pointed cones, i.e., cones that contain a nontrivial subspace. So the answer is either 0, 1/2, or 1; no triangulation is needed.



---

archive/issue_comments_548746.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n-Implement the solid angle measure (the plane angle) of a two-dimensional cone, using the dot-product (trigonometry) formula. When the cone is not simplicial, it is decomposed into simplicial cones.\n+Implement the solid angle measure (the plane angle) of a two-dimensional cone, using the dot-product (trigonometry) formula. \n+\n+We do not assume nor compute the minimal description of the cone.\n+When the input contains more than two vectors as generators of the cone, we decompose the cone into simplicial cones. The helper function `simplicial_subcones_decomposition` will be re-used in higher dimension cases.\n \n For example, the solid angle of the upper half plane (generated by three rays, hence not simplicial) `solid_angle_2d([[1,0],[0,1],[-1,0]])` is 1/2.\n``````\n",
    "created_at": "2022-04-25T03:45:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548746",
    "user": "https://github.com/yuan-zhou"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
-Implement the solid angle measure (the plane angle) of a two-dimensional cone, using the dot-product (trigonometry) formula. When the cone is not simplicial, it is decomposed into simplicial cones.
+Implement the solid angle measure (the plane angle) of a two-dimensional cone, using the dot-product (trigonometry) formula. 
+
+We do not assume nor compute the minimal description of the cone.
+When the input contains more than two vectors as generators of the cone, we decompose the cone into simplicial cones. The helper function `simplicial_subcones_decomposition` will be re-used in higher dimension cases.
 
 For example, the solid angle of the upper half plane (generated by three rays, hence not simplicial) `solid_angle_2d([[1,0],[0,1],[-1,0]])` is 1/2.
``````




---

archive/issue_comments_548747.json:
```json
{
    "body": "Branch: **[u/yzh/implement_solid_angle_measure_for_two_dimensional_cones](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/implement_solid_angle_measure_for_two_dimensional_cones)**",
    "created_at": "2022-04-26T19:51:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548747",
    "user": "https://github.com/yuan-zhou"
}
```

Branch: **[u/yzh/implement_solid_angle_measure_for_two_dimensional_cones](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/implement_solid_angle_measure_for_two_dimensional_cones)**



---

archive/issue_comments_548748.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nMerged in #33656.",
    "created_at": "2022-04-26T19:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548748",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:4'>Comment 4:</a>
Merged in #33656.



---

archive/issue_comments_548749.json:
```json
{
    "body": "Commit: **[29aa49e](https://github.com/sagemath/sagetrac-mirror/commit/29aa49e9b46d5d5f52389ccb95431109af41bc05)**",
    "created_at": "2022-04-26T19:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548749",
    "user": "https://github.com/yuan-zhou"
}
```

Commit: **[29aa49e](https://github.com/sagemath/sagetrac-mirror/commit/29aa49e9b46d5d5f52389ccb95431109af41bc05)**



---

archive/issue_comments_548750.json:
```json
{
    "body": "Changed branch from **[u/yzh/implement_solid_angle_measure_for_two_dimensional_cones](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/implement_solid_angle_measure_for_two_dimensional_cones)** to **[u/gh-allisonfitisone/implement_solid_angle_measure_for_two_dimensional_cones](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-allisonfitisone/implement_solid_angle_measure_for_two_dimensional_cones)**",
    "created_at": "2022-05-06T13:24:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548750",
    "user": "https://github.com/allisonfitisone"
}
```

Changed branch from **[u/yzh/implement_solid_angle_measure_for_two_dimensional_cones](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/implement_solid_angle_measure_for_two_dimensional_cones)** to **[u/gh-allisonfitisone/implement_solid_angle_measure_for_two_dimensional_cones](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-allisonfitisone/implement_solid_angle_measure_for_two_dimensional_cones)**



---

archive/issue_comments_548751.json:
```json
{
    "body": "Changed commit from **[29aa49e](https://github.com/sagemath/sagetrac-mirror/commit/29aa49e9b46d5d5f52389ccb95431109af41bc05)** to **[d4b7c16](https://github.com/sagemath/sagetrac-mirror/commit/d4b7c16d1994409700c87c781d6990cc634b1518)**",
    "created_at": "2022-05-06T15:23:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548751",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[29aa49e](https://github.com/sagemath/sagetrac-mirror/commit/29aa49e9b46d5d5f52389ccb95431109af41bc05)** to **[d4b7c16](https://github.com/sagemath/sagetrac-mirror/commit/d4b7c16d1994409700c87c781d6990cc634b1518)**



---

archive/issue_comments_548752.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4b7c16d1994409700c87c781d6990cc634b1518\">d4b7c16</a></td><td><code>fixed typos/formatting]</code></td></tr></table>\n",
    "created_at": "2022-05-06T15:23:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548752",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:6'>Comment 6:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4b7c16d1994409700c87c781d6990cc634b1518">d4b7c16</a></td><td><code>fixed typos/formatting]</code></td></tr></table>




---

archive/issue_comments_548753.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f31325bb714e0ff122fb21ab4df18c6cc1350056\">f31325b</a></td><td><code>wip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe77320a0f01b5401a7e61322bfdefa69f089928\">fe77320</a></td><td><code>change output type</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72df52e5e76ffcc5282255be8b1b984027418134\">72df52e</a></td><td><code>Merge branch 't/33656/implement_solid_angle_measure_for_two_dimensional_simplicial_cones' into t/33752/implement_solid_angle_measure_for_two_dimensional_cones</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e62f8b24d3bfafd5457c70ad2d5ecc1e3872dfc\">1e62f8b</a></td><td><code>updates to logging and output type</code></td></tr></table>\n",
    "created_at": "2022-05-12T17:17:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548753",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f31325bb714e0ff122fb21ab4df18c6cc1350056">f31325b</a></td><td><code>wip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe77320a0f01b5401a7e61322bfdefa69f089928">fe77320</a></td><td><code>change output type</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72df52e5e76ffcc5282255be8b1b984027418134">72df52e</a></td><td><code>Merge branch 't/33656/implement_solid_angle_measure_for_two_dimensional_simplicial_cones' into t/33752/implement_solid_angle_measure_for_two_dimensional_cones</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e62f8b24d3bfafd5457c70ad2d5ecc1e3872dfc">1e62f8b</a></td><td><code>updates to logging and output type</code></td></tr></table>




---

archive/issue_comments_548754.json:
```json
{
    "body": "Changed commit from **[d4b7c16](https://github.com/sagemath/sagetrac-mirror/commit/d4b7c16d1994409700c87c781d6990cc634b1518)** to **[1e62f8b](https://github.com/sagemath/sagetrac-mirror/commit/1e62f8b24d3bfafd5457c70ad2d5ecc1e3872dfc)**",
    "created_at": "2022-05-12T17:17:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548754",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d4b7c16](https://github.com/sagemath/sagetrac-mirror/commit/d4b7c16d1994409700c87c781d6990cc634b1518)** to **[1e62f8b](https://github.com/sagemath/sagetrac-mirror/commit/1e62f8b24d3bfafd5457c70ad2d5ecc1e3872dfc)**



---

archive/issue_comments_548755.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nWhen `P.is_exact() or isinstance(P, sage.rings.abc.SymbolicRing)`, the return type should be `SymbolicConstantsSubring` element",
    "created_at": "2022-05-12T17:28:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548755",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:8'>Comment 8:</a>
When `P.is_exact() or isinstance(P, sage.rings.abc.SymbolicRing)`, the return type should be `SymbolicConstantsSubring` element



---

archive/issue_comments_548756.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c9aa58e901d36c618a6d090df1f4919639a1903\">3c9aa58</a></td><td><code>modified output type and added tests to docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3ad6650acdc592c2f3d6ba2fb0cafb4ea78caa7\">d3ad665</a></td><td><code>wip</code></td></tr></table>\n",
    "created_at": "2022-05-17T12:47:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548756",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>Comment 9:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c9aa58e901d36c618a6d090df1f4919639a1903">3c9aa58</a></td><td><code>modified output type and added tests to docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3ad6650acdc592c2f3d6ba2fb0cafb4ea78caa7">d3ad665</a></td><td><code>wip</code></td></tr></table>




---

archive/issue_comments_548757.json:
```json
{
    "body": "Changed commit from **[1e62f8b](https://github.com/sagemath/sagetrac-mirror/commit/1e62f8b24d3bfafd5457c70ad2d5ecc1e3872dfc)** to **[d3ad665](https://github.com/sagemath/sagetrac-mirror/commit/d3ad6650acdc592c2f3d6ba2fb0cafb4ea78caa7)**",
    "created_at": "2022-05-17T12:47:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548757",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1e62f8b](https://github.com/sagemath/sagetrac-mirror/commit/1e62f8b24d3bfafd5457c70ad2d5ecc1e3872dfc)** to **[d3ad665](https://github.com/sagemath/sagetrac-mirror/commit/d3ad6650acdc592c2f3d6ba2fb0cafb4ea78caa7)**



---

archive/issue_comments_548758.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/800d88d85523fbf7c4395914a397b316155db75d\">800d88d</a></td><td><code>altered logging format</code></td></tr></table>\n",
    "created_at": "2022-05-17T19:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548758",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'>Comment 10:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/800d88d85523fbf7c4395914a397b316155db75d">800d88d</a></td><td><code>altered logging format</code></td></tr></table>




---

archive/issue_comments_548759.json:
```json
{
    "body": "Changed commit from **[d3ad665](https://github.com/sagemath/sagetrac-mirror/commit/d3ad6650acdc592c2f3d6ba2fb0cafb4ea78caa7)** to **[800d88d](https://github.com/sagemath/sagetrac-mirror/commit/800d88d85523fbf7c4395914a397b316155db75d)**",
    "created_at": "2022-05-17T19:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548759",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d3ad665](https://github.com/sagemath/sagetrac-mirror/commit/d3ad6650acdc592c2f3d6ba2fb0cafb4ea78caa7)** to **[800d88d](https://github.com/sagemath/sagetrac-mirror/commit/800d88d85523fbf7c4395914a397b316155db75d)**



---

archive/issue_comments_548760.json:
```json
{
    "body": "Changed commit from **[800d88d](https://github.com/sagemath/sagetrac-mirror/commit/800d88d85523fbf7c4395914a397b316155db75d)** to **[a8e1152](https://github.com/sagemath/sagetrac-mirror/commit/a8e115205ed5b0554a51fc47e24105a71cde47f6)**",
    "created_at": "2022-05-19T19:34:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548760",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[800d88d](https://github.com/sagemath/sagetrac-mirror/commit/800d88d85523fbf7c4395914a397b316155db75d)** to **[a8e1152](https://github.com/sagemath/sagetrac-mirror/commit/a8e115205ed5b0554a51fc47e24105a71cde47f6)**



---

archive/issue_comments_548761.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d5ab98190d9d2c1889986784e743e7208674d71\">9d5ab98</a></td><td><code>change output type for input in symbolic ring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/165d13fdf60880f531982a98ec7850cb8c3af45a\">165d13f</a></td><td><code>Merge branch 't/33656/implement_solid_angle_measure_for_two_dimensional_simplicial_cones' into t/33752/implement_solid_angle_measure_for_two_dimensional_cones</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8e115205ed5b0554a51fc47e24105a71cde47f6\">a8e1152</a></td><td><code>change output type</code></td></tr></table>\n",
    "created_at": "2022-05-19T19:34:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548761",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:11'>Comment 11:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d5ab98190d9d2c1889986784e743e7208674d71">9d5ab98</a></td><td><code>change output type for input in symbolic ring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/165d13fdf60880f531982a98ec7850cb8c3af45a">165d13f</a></td><td><code>Merge branch 't/33656/implement_solid_angle_measure_for_two_dimensional_simplicial_cones' into t/33752/implement_solid_angle_measure_for_two_dimensional_cones</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8e115205ed5b0554a51fc47e24105a71cde47f6">a8e1152</a></td><td><code>change output type</code></td></tr></table>




---

archive/issue_events_444863.json:
```json
{
    "actor": "https://github.com/allisonfitisone",
    "created_at": "2022-05-19T19:36:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33752#event-444863"
}
```



---

archive/issue_comments_548762.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1381c2342805df967b812c2f679b32048c566478\">1381c23</a></td><td><code>remove unnecessary line</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4673707af0ad04d247090587af6e609c31b554bd\">4673707</a></td><td><code>wip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c48941bb8b2656500e64f3ce9dc269b94ba99ece\">c48941b</a></td><td><code>output in Symbolic Constants Subring when input is exact</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6535715b30d88e43aedf4644272dfe8467d675eb\">6535715</a></td><td><code>regroup the doctests for A and B with exact and inexact base rings.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8a5f5af1116736d2ff88d9e0666b8e36315c87c\">d8a5f5a</a></td><td><code>fix doctests typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76cb13b554d1facfb14940840b68c02dbdfab6e9\">76cb13b</a></td><td><code>Merge branch 't/33656/implement_solid_angle_measure_for_two_dimensional_simplicial_cones' into t/33752/implement_solid_angle_measure_for_two_dimensional_cones</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d23872ecb009ec5fcbadf7cd745d146ec76c6dee\">d23872e</a></td><td><code>wip</code></td></tr></table>\n",
    "created_at": "2022-08-25T15:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548762",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>Comment 13:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1381c2342805df967b812c2f679b32048c566478">1381c23</a></td><td><code>remove unnecessary line</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4673707af0ad04d247090587af6e609c31b554bd">4673707</a></td><td><code>wip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c48941bb8b2656500e64f3ce9dc269b94ba99ece">c48941b</a></td><td><code>output in Symbolic Constants Subring when input is exact</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6535715b30d88e43aedf4644272dfe8467d675eb">6535715</a></td><td><code>regroup the doctests for A and B with exact and inexact base rings.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8a5f5af1116736d2ff88d9e0666b8e36315c87c">d8a5f5a</a></td><td><code>fix doctests typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76cb13b554d1facfb14940840b68c02dbdfab6e9">76cb13b</a></td><td><code>Merge branch 't/33656/implement_solid_angle_measure_for_two_dimensional_simplicial_cones' into t/33752/implement_solid_angle_measure_for_two_dimensional_cones</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d23872ecb009ec5fcbadf7cd745d146ec76c6dee">d23872e</a></td><td><code>wip</code></td></tr></table>




---

archive/issue_comments_548763.json:
```json
{
    "body": "Changed commit from **[a8e1152](https://github.com/sagemath/sagetrac-mirror/commit/a8e115205ed5b0554a51fc47e24105a71cde47f6)** to **[d23872e](https://github.com/sagemath/sagetrac-mirror/commit/d23872ecb009ec5fcbadf7cd745d146ec76c6dee)**",
    "created_at": "2022-08-25T15:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548763",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a8e1152](https://github.com/sagemath/sagetrac-mirror/commit/a8e115205ed5b0554a51fc47e24105a71cde47f6)** to **[d23872e](https://github.com/sagemath/sagetrac-mirror/commit/d23872ecb009ec5fcbadf7cd745d146ec76c6dee)**



---

archive/issue_comments_548764.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\n\n```\n+                    var('a b')\n+                    eqn = (-a * v[0][0] - b * v[k][0] - v[j][0] == 0,\n+                           -a * v[0][1] - b * v[k][1] - v[j][1] == 0,\n+                           a >= 0,\n+                           b >= 0)\n+                    if solve(eqn, (a, b)):\n```\nBest not to use the general symbolics facility (`var`, `solve`) for linear algebra",
    "created_at": "2022-08-25T16:24:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548764",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'>Comment 14:</a>

```
+                    var('a b')
+                    eqn = (-a * v[0][0] - b * v[k][0] - v[j][0] == 0,
+                           -a * v[0][1] - b * v[k][1] - v[j][1] == 0,
+                           a >= 0,
+                           b >= 0)
+                    if solve(eqn, (a, b)):
```
Best not to use the general symbolics facility (`var`, `solve`) for linear algebra



---

archive/issue_comments_548765.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nFunctions that looks like this:\n\n```\n+        matrices = []\n+        for simplex in triangulation:\n+            matrices.append(matrix(A[i] for i in simplex if i != origin))\n+        return matrices\n```\n... are best rewritten as generators. https://realpython.com/introduction-to-python-generators/#understanding-generators",
    "created_at": "2022-08-25T16:26:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548765",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'>Comment 15:</a>
Functions that looks like this:

```
+        matrices = []
+        for simplex in triangulation:
+            matrices.append(matrix(A[i] for i in simplex if i != origin))
+        return matrices
```
... are best rewritten as generators. https://realpython.com/introduction-to-python-generators/#understanding-generators



---

archive/issue_comments_548766.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\n\n```\n+    This example shows that the cone in `\\RR^4` spanned by the rows of ``A``\n+    (which is input as a list of lists) is actually a halfspace of affine\n+    dimension `2`. The triangulation dissects it into three 2-d subcones::\n+\n+        sage: A_in = [[-3,0,5,0],[0,0,1,0],[-4,0,0,0],[-1,0,0,0],[0,0,-4,0]]\n+        sage: simplicial_subcones_decomposition(A_in)\n+        [\n+        [-3  0  5  0]  [-3  0  5  0]  [-4  0  0  0]\n+        [ 0  0  1  0], [-4  0  0  0], [ 0  0 -4  0]\n+        ]\n```\nThis decomposition looks correct, but I don't think this is the best way of computing the solid angle - as I explained in [comment:1](#comment%3A1).",
    "created_at": "2022-08-25T16:28:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548766",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'>Comment 16:</a>

```
+    This example shows that the cone in `\RR^4` spanned by the rows of ``A``
+    (which is input as a list of lists) is actually a halfspace of affine
+    dimension `2`. The triangulation dissects it into three 2-d subcones::
+
+        sage: A_in = [[-3,0,5,0],[0,0,1,0],[-4,0,0,0],[-1,0,0,0],[0,0,-4,0]]
+        sage: simplicial_subcones_decomposition(A_in)
+        [
+        [-3  0  5  0]  [-3  0  5  0]  [-4  0  0  0]
+        [ 0  0  1  0], [-4  0  0  0], [ 0  0 -4  0]
+        ]
```
This decomposition looks correct, but I don't think this is the best way of computing the solid angle - as I explained in [comment:1](#comment%3A1).



---

archive/issue_comments_548767.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nAll of this can be replaced by just using `Polyhedron(rays=A.rows())`. To see whether it is at least a halfplane, check `lines()`",
    "created_at": "2022-08-25T16:31:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548767",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'>Comment 17:</a>
All of this can be replaced by just using `Polyhedron(rays=A.rows())`. To see whether it is at least a halfplane, check `lines()`



---

archive/issue_comments_548768.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nWhen using `Polyhedron(rays=A.rows())`, we can't do computations over SR (see below). Any suggestions for a workaround?\n\n```\nsage: A = matrix([[sqrt(2),0],[0,1]])\nsage: solid_angle_2d(A)\nValueError: no default backend for computations with Symbolic Ring\n```\n\nReplying to [@mkoeppe](#comment%3A17):\n> All of this can be replaced by just using `Polyhedron(rays=A.rows())`. To see whether it is at least a halfplane, check `lines()`",
    "created_at": "2022-08-30T19:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548768",
    "user": "https://github.com/allisonfitisone"
}
```

<a id='comment:18'>Comment 18:</a>
When using `Polyhedron(rays=A.rows())`, we can't do computations over SR (see below). Any suggestions for a workaround?

```
sage: A = matrix([[sqrt(2),0],[0,1]])
sage: solid_angle_2d(A)
ValueError: no default backend for computations with Symbolic Ring
```

Replying to [@mkoeppe](#comment%3A17):
> All of this can be replaced by just using `Polyhedron(rays=A.rows())`. To see whether it is at least a halfplane, check `lines()`



---

archive/issue_comments_548769.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nIf you only need algebraic numbers, you can use `A = matrix(AA, [[sqrt(2),0],[0,1]])`",
    "created_at": "2022-08-30T19:35:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548769",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'>Comment 19:</a>
If you only need algebraic numbers, you can use `A = matrix(AA, [[sqrt(2),0],[0,1]])`



---

archive/issue_comments_548770.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nRight, if the input is of type AA, then Polyhedron can deal with it, and the output is also of type AA. The question is, what if the input is just `A = matrix([[sqrt(2),0],[0,1]])`? Would it be better to avoid Polyhedron and just use more elementary operations like rank?\nReplying to [@mkoeppe](#comment%3A19):\n> If you only need algebraic numbers, you can use `A = matrix(AA, [[sqrt(2),0],[0,1]])`",
    "created_at": "2022-08-30T20:02:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548770",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:20'>Comment 20:</a>
Right, if the input is of type AA, then Polyhedron can deal with it, and the output is also of type AA. The question is, what if the input is just `A = matrix([[sqrt(2),0],[0,1]])`? Would it be better to avoid Polyhedron and just use more elementary operations like rank?
Replying to [@mkoeppe](#comment%3A19):
> If you only need algebraic numbers, you can use `A = matrix(AA, [[sqrt(2),0],[0,1]])`



---

archive/issue_comments_548771.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nReplying to [@yuan-zhou](#comment%3A20):\n> Right, if the input is of type AA, then Polyhedron can deal with it, and the output is also of type AA. The question is, what if the input is just `A = matrix([[sqrt(2),0],[0,1]])`? \n\nWell, you can try to convert it to a matrix space over `AA`, and if that fails, just raise an error.\n\n> Would it be better to avoid Polyhedron and just use more elementary operations like rank?\n\nDo you have an application for non-algebraic irrational input?\n\nIf yes, then yes, one would have to either avoid Polyhedron or extend Polyhedron so it can handle well-behaved symbolic elements. After all, this error:\n\n```\nsage: Polyhedron(vertices=[[1], [sqrt(2)]], base_ring=SR, backend='field')\nValueError: the 'field' backend for polyhedron cannot be used with non-exact fields\n```\nis artificial - it's there to protect users from weird stuff that can happen.\n\nIf no, then maybe this generality is not worth working on?",
    "created_at": "2022-08-30T20:11:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548771",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'>Comment 21:</a>
Replying to [@yuan-zhou](#comment%3A20):
> Right, if the input is of type AA, then Polyhedron can deal with it, and the output is also of type AA. The question is, what if the input is just `A = matrix([[sqrt(2),0],[0,1]])`? 

Well, you can try to convert it to a matrix space over `AA`, and if that fails, just raise an error.

> Would it be better to avoid Polyhedron and just use more elementary operations like rank?

Do you have an application for non-algebraic irrational input?

If yes, then yes, one would have to either avoid Polyhedron or extend Polyhedron so it can handle well-behaved symbolic elements. After all, this error:

```
sage: Polyhedron(vertices=[[1], [sqrt(2)]], base_ring=SR, backend='field')
ValueError: the 'field' backend for polyhedron cannot be used with non-exact fields
```
is artificial - it's there to protect users from weird stuff that can happen.

If no, then maybe this generality is not worth working on?



---

archive/issue_comments_548772.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nYou are right, I don't have an application where the input is non-algebraic irrationals. \n\nI agree that symbolics facility (`var` and `solve`) should be avoid.\n\nHowever, I thought that checking the special cases of half space and whole space is straightforward enough, which make the use of Polyhedron and the conversion to AA seem overkill. It's just some if else statements, and with that, the input `A = matrix([[sqrt(2),0],[0,1]])` can work. In my option, it's unusual to input `matrix(AA, [[sqrt(2),0],[0,1]])`. \n\nAlso, if we convert the inputs matrix to over AA, what would be the right type of the output? Do we always have AA as output type, never the Symbolic ring or Symbolic Constants Subring?",
    "created_at": "2022-08-30T21:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548772",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:22'>Comment 22:</a>
You are right, I don't have an application where the input is non-algebraic irrationals. 

I agree that symbolics facility (`var` and `solve`) should be avoid.

However, I thought that checking the special cases of half space and whole space is straightforward enough, which make the use of Polyhedron and the conversion to AA seem overkill. It's just some if else statements, and with that, the input `A = matrix([[sqrt(2),0],[0,1]])` can work. In my option, it's unusual to input `matrix(AA, [[sqrt(2),0],[0,1]])`. 

Also, if we convert the inputs matrix to over AA, what would be the right type of the output? Do we always have AA as output type, never the Symbolic ring or Symbolic Constants Subring?



---

archive/issue_comments_548773.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nReplying to [@yuan-zhou](#comment%3A22):\n> Also, if we convert the inputs matrix to over AA, what would be the right type of the output? Do we always have AA as output type, never the Symbolic ring or Symbolic Constants Subring?\n\nYes, it would make sense to convert it back to the ring where it came from if AA is used internally. (That's how we do this for the `Polyhedron(backend='normaliz')`, by the way.)",
    "created_at": "2022-08-30T21:41:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548773",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'>Comment 23:</a>
Replying to [@yuan-zhou](#comment%3A22):
> Also, if we convert the inputs matrix to over AA, what would be the right type of the output? Do we always have AA as output type, never the Symbolic ring or Symbolic Constants Subring?

Yes, it would make sense to convert it back to the ring where it came from if AA is used internally. (That's how we do this for the `Polyhedron(backend='normaliz')`, by the way.)



---

archive/issue_comments_548774.json:
```json
{
    "body": "Changed commit from **[d23872e](https://github.com/sagemath/sagetrac-mirror/commit/d23872ecb009ec5fcbadf7cd745d146ec76c6dee)** to **[7a7c253](https://github.com/sagemath/sagetrac-mirror/commit/7a7c2535b221a93f27616155976250ddc7dd8893)**",
    "created_at": "2022-09-01T20:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548774",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d23872e](https://github.com/sagemath/sagetrac-mirror/commit/d23872ecb009ec5fcbadf7cd745d146ec76c6dee)** to **[7a7c253](https://github.com/sagemath/sagetrac-mirror/commit/7a7c2535b221a93f27616155976250ddc7dd8893)**



---

archive/issue_comments_548775.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3a91f72dd7e7fea949b20404478acae1e9b8bb8\">e3a91f7</a></td><td><code>wip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a7c2535b221a93f27616155976250ddc7dd8893\">7a7c253</a></td><td><code>add QQ</code></td></tr></table>\n",
    "created_at": "2022-09-01T20:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548775",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>Comment 24:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3a91f72dd7e7fea949b20404478acae1e9b8bb8">e3a91f7</a></td><td><code>wip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a7c2535b221a93f27616155976250ddc7dd8893">7a7c253</a></td><td><code>add QQ</code></td></tr></table>




---

archive/issue_comments_548776.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nDo you mean to use `number_field_elements_from_algebraics` from `sage.rings.qqbar`?\nI still don't see how to convert `AA(sqrt(2))` (interval AA number) back to `sqrt(2)` as output, if the input was in the symbolic ring.\n\nReplying to [@mkoeppe](#comment%3A23):\n> Replying to [@yuan-zhou](#comment%3A22):\n> > Also, if we convert the inputs matrix to over AA, what would be the right type of the output? Do we always have AA as output type, never the Symbolic ring or Symbolic Constants Subring?\n\n> \n> Yes, it would make sense to convert it back to the ring where it came from if AA is used internally. (That's how we do this for the `Polyhedron(backend='normaliz')`, by the way.)",
    "created_at": "2022-09-02T01:42:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548776",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:25'>Comment 25:</a>
Do you mean to use `number_field_elements_from_algebraics` from `sage.rings.qqbar`?
I still don't see how to convert `AA(sqrt(2))` (interval AA number) back to `sqrt(2)` as output, if the input was in the symbolic ring.

Replying to [@mkoeppe](#comment%3A23):
> Replying to [@yuan-zhou](#comment%3A22):
> > Also, if we convert the inputs matrix to over AA, what would be the right type of the output? Do we always have AA as output type, never the Symbolic ring or Symbolic Constants Subring?

> 
> Yes, it would make sense to convert it back to the ring where it came from if AA is used internally. (That's how we do this for the `Polyhedron(backend='normaliz')`, by the way.)



---

archive/issue_comments_548777.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nFirst check if `Polyhedron(..., backend='normaliz')` is able to handle the kinds of numbers you'd like to handle and gives back SR elements.",
    "created_at": "2022-09-02T01:47:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548777",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'>Comment 26:</a>
First check if `Polyhedron(..., backend='normaliz')` is able to handle the kinds of numbers you'd like to handle and gives back SR elements.



---

archive/issue_comments_548778.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nSure, using `backend='normaliz'` solves most cases. The problem is that this is an optional backend. Do we really want to use an optional package that most users don't install to deal with something so elementary -- 2 very special cases in 2D?\n\nReplying to [@mkoeppe](#comment%3A26):\n> First check if `Polyhedron(..., backend='normaliz')` is able to handle the kinds of numbers you'd like to handle and gives back SR elements.",
    "created_at": "2022-09-02T02:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548778",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:27'>Comment 27:</a>
Sure, using `backend='normaliz'` solves most cases. The problem is that this is an optional backend. Do we really want to use an optional package that most users don't install to deal with something so elementary -- 2 very special cases in 2D?

Replying to [@mkoeppe](#comment%3A26):
> First check if `Polyhedron(..., backend='normaliz')` is able to handle the kinds of numbers you'd like to handle and gives back SR elements.



---

archive/issue_comments_548779.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nYour code would still work without normaliz for rational input.",
    "created_at": "2022-09-02T02:03:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548779",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'>Comment 28:</a>
Your code would still work without normaliz for rational input.



---

archive/issue_comments_548780.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nYes, that's right. As it's quite usual to have sqrt(2), sqrt(3) in rays (45\u00b0, 60\u00b0), I think the code should work for these cases regardless of having normaliz or not.\n\nReplying to [@mkoeppe](#comment%3A28):\n> Your code would still work without normaliz for rational input.",
    "created_at": "2022-09-02T02:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548780",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:29'>Comment 29:</a>
Yes, that's right. As it's quite usual to have sqrt(2), sqrt(3) in rays (45°, 60°), I think the code should work for these cases regardless of having normaliz or not.

Replying to [@mkoeppe](#comment%3A28):
> Your code would still work without normaliz for rational input.



---

archive/issue_comments_548781.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nI think some more thought on the use cases is needed. Where do your irrational inputs come from? If you already have angles, there's no need to recompute them",
    "created_at": "2022-09-02T02:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548781",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'>Comment 30:</a>
I think some more thought on the use cases is needed. Where do your irrational inputs come from? If you already have angles, there's no need to recompute them



---

archive/issue_comments_548782.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nReplying to [@yuan-zhou](#comment%3A27):\n> Sure, using `backend='normaliz'` solves most cases. \n\nI mean I know that it can deal with `sqrt(2)`. Have you checked other cases? What are \"most\", are there exceptions that are motivated by an application?",
    "created_at": "2022-09-02T02:14:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548782",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'>Comment 31:</a>
Replying to [@yuan-zhou](#comment%3A27):
> Sure, using `backend='normaliz'` solves most cases. 

I mean I know that it can deal with `sqrt(2)`. Have you checked other cases? What are "most", are there exceptions that are motivated by an application?



---

archive/issue_comments_548783.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nI don't really have use cases in 2D, 2D angles are trivial...\n\nIt feels weird that if a Calculus student wants to compute the angle between ray (1, 0) and ray (0, sqrt(3)), they must have normaliz installed. \n\nMy thought is not to use Polyhedron in 2d, but just check for the two special cases.\n\nAlternatively, we can use `P = Polyhedron(rays=A.rows(), base_ring=AA)` which doesn't call normaliz. But then, I don't know how to convert the AA result back to symbolic.",
    "created_at": "2022-09-02T02:24:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548783",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:32'>Comment 32:</a>
I don't really have use cases in 2D, 2D angles are trivial...

It feels weird that if a Calculus student wants to compute the angle between ray (1, 0) and ray (0, sqrt(3)), they must have normaliz installed. 

My thought is not to use Polyhedron in 2d, but just check for the two special cases.

Alternatively, we can use `P = Polyhedron(rays=A.rows(), base_ring=AA)` which doesn't call normaliz. But then, I don't know how to convert the AA result back to symbolic.



---

archive/issue_comments_548784.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nReplying to [@yuan-zhou](#comment%3A32):\n> Alternatively, we can use `P = Polyhedron(rays=A.rows(), base_ring=AA)` which doesn't call normaliz. But then, I don't know how to convert the AA result back to symbolic.\n\nYou're missing that the conversion code that is in our Normaliz backend does not need Normaliz. We are using it to communicate with Normaliz.",
    "created_at": "2022-09-02T02:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548784",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'>Comment 33:</a>
Replying to [@yuan-zhou](#comment%3A32):
> Alternatively, we can use `P = Polyhedron(rays=A.rows(), base_ring=AA)` which doesn't call normaliz. But then, I don't know how to convert the AA result back to symbolic.

You're missing that the conversion code that is in our Normaliz backend does not need Normaliz. We are using it to communicate with Normaliz.



---

archive/issue_comments_548785.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nI know that \"conversion code that is in our Normaliz backend does not need Normaliz.\"\nBut how does it help with 2d solid angle? \n\n> Replying to [@yuan-zhou](#comment%3A32):\n> > Alternatively, we can use `P = Polyhedron(rays=A.rows(), base_ring=AA)` which doesn't call normaliz. But then, I don't know how to convert the AA result back to symbolic.\n\n> \n> You're missing that the conversion code that is in our Normaliz backend does not need Normaliz. We are using it to communicate with Normaliz.",
    "created_at": "2022-09-02T02:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548785",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:34'>Comment 34:</a>
I know that "conversion code that is in our Normaliz backend does not need Normaliz."
But how does it help with 2d solid angle? 

> Replying to [@yuan-zhou](#comment%3A32):
> > Alternatively, we can use `P = Polyhedron(rays=A.rows(), base_ring=AA)` which doesn't call normaliz. But then, I don't know how to convert the AA result back to symbolic.

> 
> You're missing that the conversion code that is in our Normaliz backend does not need Normaliz. We are using it to communicate with Normaliz.



---

archive/issue_comments_548786.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nSee #34479",
    "created_at": "2022-09-02T02:30:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548786",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'>Comment 35:</a>
See #34479



---

archive/issue_comments_548787.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nI agree with #34479. That ticket will become more useful when we write code for solid angle computation in higher dimension. In 2d, it is like shooting butterfly with rifles :P, but why not...",
    "created_at": "2022-09-02T02:34:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33752#issuecomment-548787",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:36'>Comment 36:</a>
I agree with #34479. That ticket will become more useful when we write code for solid angle computation in higher dimension. In 2d, it is like shooting butterfly with rifles :P, but why not...



---

archive/issue_events_444864.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33752#event-444864"
}
```



---

archive/issue_events_444865.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33752",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33752#event-444865"
}
```
