# Issue 33829: sage.graphs: Do not use SAGE_TMP in doctests

archive/issues_033592.json:
```json
{
    "body": "(split out from #33213)\n\nCC:  @orlitzky @dcoudert @dimpase @fchapoton\n\nBranch/Commit: 976f0d686ee5375ed3894009a13b2cd54fcd89f2\n\nReviewer: David Coudert, Dima Pasechnik\n\nAuthor: Michael Orlitzky\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/33829\n\n",
    "closed_at": "2022-06-17T22:52:58Z",
    "created_at": "2022-05-09T23:26:54Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "sage.graphs: Do not use SAGE_TMP in doctests",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33829",
    "user": "https://github.com/mkoeppe"
}
```
(split out from #33213)

CC:  @orlitzky @dcoudert @dimpase @fchapoton

Branch/Commit: 976f0d686ee5375ed3894009a13b2cd54fcd89f2

Reviewer: David Coudert, Dima Pasechnik

Author: Michael Orlitzky

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/33829





---

archive/issue_comments_510760.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2022-05-09T23:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510760",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_510761.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-05-09T23:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510761",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_510762.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-09T23:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510762",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_510763.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-10T09:18:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510763",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_510764.json:
```json
{
    "body": "<a id='comment:4'></a>LGTM. All tests pass.",
    "created_at": "2022-05-10T09:18:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510764",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>LGTM. All tests pass.



---

archive/issue_comments_510765.json:
```json
{
    "body": "<a id='comment:5'></a>Merge failure on top of:\n\ne2ebf445d0 Trac #33825: Use pytest-xdist to run pytest in parallel\n\nb4009625f3 Trac #33824: make gens and orbits of PermutationGroup immutable\n\naf23627f18 Trac #33809: some pathlib in combinat and groups\n\n955b5d994c Trac #33803: Fixes for the distributions sagemath-objects, sagemath-categories\n\n3e6b41f7d6 Trac #33799: Replace SAGE_TMP in doctests of sage.misc.{persist,ostools}, sage.doctest, sage.repl\n\na3fd7185e3 Trac #33797: sage.misc.temporary_file: Remove use of SAGE_TMP\n\n2ca053010a Trac #33794: modules/fp_graded/morphism.py test failure\n\n7037fba482 Trac #33793: sage.misc.cython: Replace use of SPYX_TMP by a new cached function in sage.misc.temporary_file\n\nd1152701c4 Trac #33787: Installation manual: Update section \"system-wide install\"\n\n0ae55652cf Trac #33782: ci-cygwin: Update python version\n\n833f53d1cc Trac #33779: Remove use of SAGE_TMP in sage.interfaces.latte\n\nb376a8d71c Trac #33771: SSLContext needs an argument\n\ndf168c8112 Trac #33763: Refactor src/sage/docs\n\n9597eafded Trac #33748: make accessing coefficients of finite-field elements easier\n\nf02236f5b6 Trac #33744: Compute bases/circuits in MatroidUnion\n\n8943dc07fc Trac #33743: Faster random tree generator\n\n773ec37bec Trac #33740: Add conda dev environment\n\n5e65c16108 Trac #33734: variety() for polynomial systems over \u211a using msolve\n\n8e7dcca8d3 Trac #33733: allow to use flint for Stirling numbers\n\n6f4efb0bf3 Updated [SageMath](SageMath) version to 9.7.beta0\n\n\n\nmerge was not clean: conflicts in src/sage/graphs/isgci.py",
    "created_at": "2022-05-22T10:26:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510765",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>Merge failure on top of:

e2ebf445d0 Trac #33825: Use pytest-xdist to run pytest in parallel

b4009625f3 Trac #33824: make gens and orbits of PermutationGroup immutable

af23627f18 Trac #33809: some pathlib in combinat and groups

955b5d994c Trac #33803: Fixes for the distributions sagemath-objects, sagemath-categories

3e6b41f7d6 Trac #33799: Replace SAGE_TMP in doctests of sage.misc.{persist,ostools}, sage.doctest, sage.repl

a3fd7185e3 Trac #33797: sage.misc.temporary_file: Remove use of SAGE_TMP

2ca053010a Trac #33794: modules/fp_graded/morphism.py test failure

7037fba482 Trac #33793: sage.misc.cython: Replace use of SPYX_TMP by a new cached function in sage.misc.temporary_file

d1152701c4 Trac #33787: Installation manual: Update section "system-wide install"

0ae55652cf Trac #33782: ci-cygwin: Update python version

833f53d1cc Trac #33779: Remove use of SAGE_TMP in sage.interfaces.latte

b376a8d71c Trac #33771: SSLContext needs an argument

df168c8112 Trac #33763: Refactor src/sage/docs

9597eafded Trac #33748: make accessing coefficients of finite-field elements easier

f02236f5b6 Trac #33744: Compute bases/circuits in MatroidUnion

8943dc07fc Trac #33743: Faster random tree generator

773ec37bec Trac #33740: Add conda dev environment

5e65c16108 Trac #33734: variety() for polynomial systems over â„š using msolve

8e7dcca8d3 Trac #33733: allow to use flint for Stirling numbers

6f4efb0bf3 Updated [SageMath](SageMath) version to 9.7.beta0



merge was not clean: conflicts in src/sage/graphs/isgci.py



---

archive/issue_comments_510766.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-05-22T10:26:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510766",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_510767.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-25T20:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510767",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_510768.json:
```json
{
    "body": "<a id='comment:8'></a>Merged #33771 to resolve merge conflict",
    "created_at": "2022-05-25T20:51:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510768",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Merged #33771 to resolve merge conflict



---

archive/issue_comments_510769.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-05-25T20:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510769",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_510770.json:
```json
{
    "body": "<a id='comment:10'></a>in `isgci.py` in the following block you use variable `d` but this variable is unknown (reported by pyflakes)\n\n```diff\n+            # Save a systemwide updated copy whenever possible\n+            try:\n+                z.extract(_XML_FILE, GRAPHS_DATA_DIR)\n+                z.extract(_SMALLGRAPHS_FILE, GRAPHS_DATA_DIR)\n+            except IOError:\n+                z.extract(_XML_FILE, d)\n+                z.extract(_SMALLGRAPHS_FILE, GRAPHS_DATA_DIR)\n```\n\npyflakes also complains about  `os`  that is imported but not used. This is a minor issue.",
    "created_at": "2022-05-26T08:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510770",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:10'></a>in `isgci.py` in the following block you use variable `d` but this variable is unknown (reported by pyflakes)

```diff
+            # Save a systemwide updated copy whenever possible
+            try:
+                z.extract(_XML_FILE, GRAPHS_DATA_DIR)
+                z.extract(_SMALLGRAPHS_FILE, GRAPHS_DATA_DIR)
+            except IOError:
+                z.extract(_XML_FILE, d)
+                z.extract(_SMALLGRAPHS_FILE, GRAPHS_DATA_DIR)
```

pyflakes also complains about  `os`  that is imported but not used. This is a minor issue.



---

archive/issue_comments_510771.json:
```json
{
    "body": "<a id='comment:11'></a>lgtm",
    "created_at": "2022-06-10T09:20:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510771",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>lgtm



---

archive/issue_comments_510772.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-06-10T09:20:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510772",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_510773.json:
```json
{
    "body": "<a id='comment:12'></a>something should still be done with the `isgci.py` routine from comment:10\n\nit looks like the fallback `SAGE_TMP` location never worked because `_parse_db` doesn't try the fallback location, so maybe we should just delete the whole `except IOError:` block",
    "created_at": "2022-06-10T11:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510773",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:12'></a>something should still be done with the `isgci.py` routine from comment:10

it looks like the fallback `SAGE_TMP` location never worked because `_parse_db` doesn't try the fallback location, so maybe we should just delete the whole `except IOError:` block



---

archive/issue_comments_510774.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-06-10T11:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510774",
    "user": "https://github.com/orlitzky"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_510775.json:
```json
{
    "body": "<a id='comment:13'></a>I'm trying to replace what's inside the `except` by `pass`. We can of course go even further and get rid of `try` all together.",
    "created_at": "2022-06-10T16:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510775",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>I'm trying to replace what's inside the `except` by `pass`. We can of course go even further and get rid of `try` all together.



---

archive/issue_comments_510776.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-06-10T22:29:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510776",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_510777.json:
```json
{
    "body": "<a id='comment:14'></a>New commits:",
    "created_at": "2022-06-10T22:29:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510777",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>New commits:



---

archive/issue_comments_510778.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-06-13T10:01:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510778",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_510779.json:
```json
{
    "body": "<a id='comment:16'></a>rebased over latest 9.7.beta2",
    "created_at": "2022-06-13T10:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510779",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'></a>rebased over latest 9.7.beta2



---

archive/issue_comments_510780.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-06-13T10:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510780",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_510781.json:
```json
{
    "body": "<a id='comment:17'></a>it works",
    "created_at": "2022-06-13T10:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510781",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>it works



---

archive/issue_comments_510782.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-06-17T22:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33829#issuecomment-510782",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_088817.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-06-17T22:52:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33829",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33829#event-88817"
}
```
