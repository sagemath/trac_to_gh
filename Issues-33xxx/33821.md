# Issue 33821: Remove use of SAGE_LIB in sage.misc

archive/issues_033584.json:
```json
{
    "assignees": [],
    "body": "We delay importing `lazy_import_cache` until a lazy star import is done (which the Sage library never does).\n\nWe change two copies of essentially the same code that tries to use `SAGE_SRC` and `SAGE_LIB` to turn a source filename to a qualified package name so that \n- it does not fail when `sage.env.SAGE_SRC` cannot be imported or is empty\n- it replaces the use of `SAGE_LIB` by using `sage.__path__` (to handle namespace packages correctly)\n\npart of Meta-ticket #33037 (Remove use of `SAGE_LIB` and `SAGE_EXTCODE` variables)\n\nDepends on #33793\n\nCC:  @kiwifb @antonio-rojas @tornaria\n\nBranch/Commit: **[748d9fb](https://github.com/sagemath/sagetrac-mirror/commit/748d9fbe54bda2b9529053d261ba12ba168f6a81)**\n\nReviewer: **Fran\u00e7ois Bissey**\n\nAuthor: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33821_\n\n",
    "closed_at": "2022-07-03T22:06:02Z",
    "created_at": "2022-05-08T03:39:41Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/refactoring",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Remove use of SAGE_LIB in sage.misc",
    "type": "issue",
    "updated_at": "2022-07-03T22:06:02Z",
    "url": "https://github.com/sagemath/sage/issues/33821",
    "user": "https://github.com/mkoeppe"
}
```
We delay importing `lazy_import_cache` until a lazy star import is done (which the Sage library never does).

We change two copies of essentially the same code that tries to use `SAGE_SRC` and `SAGE_LIB` to turn a source filename to a qualified package name so that 
- it does not fail when `sage.env.SAGE_SRC` cannot be imported or is empty
- it replaces the use of `SAGE_LIB` by using `sage.__path__` (to handle namespace packages correctly)

part of Meta-ticket #33037 (Remove use of `SAGE_LIB` and `SAGE_EXTCODE` variables)

Depends on #33793

CC:  @kiwifb @antonio-rojas @tornaria

Branch/Commit: **[748d9fb](https://github.com/sagemath/sagetrac-mirror/commit/748d9fbe54bda2b9529053d261ba12ba168f6a81)**

Reviewer: **Fran√ßois Bissey**

Author: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/33821_





---

archive/issue_events_445611.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-08T03:39:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33821#event-445611"
}
```



---

archive/issue_events_445612.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-08T03:39:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "label": "https://github.com/sagemath/sage/labels/refactoring",
    "label_color": "696969",
    "label_name": "refactoring",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33821#event-445612"
}
```



---

archive/issue_events_445613.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-08T03:39:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33821#event-445613"
}
```



---

archive/issue_events_445614.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-08T03:39:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33821#event-445614"
}
```



---

archive/issue_comments_549886.json:
```json
{
    "body": "Dependencies: **#33793**",
    "created_at": "2022-05-08T03:44:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549886",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#33793**



---

archive/issue_comments_549887.json:
```json
{
    "body": "Branch: **[u/mkoeppe/remove_use_of_sage_lib_in_sage_misc](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/remove_use_of_sage_lib_in_sage_misc)**",
    "created_at": "2022-05-08T04:14:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549887",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/remove_use_of_sage_lib_in_sage_misc](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/remove_use_of_sage_lib_in_sage_misc)**



---

archive/issue_comments_549888.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cacd5ef926218eebe5cd1e0f5d7ab3282bba200\">8cacd5e</a></td><td><code>src/sage/misc/sageinspect.py: Remove import of SAGE_LIB</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8a5bdfdaf4bc348c9d6d1319b8b6784f7593ff7\">c8a5bdf</a></td><td><code>src/sage/misc/lazy_import.pyx: Import lazy_import_cache only when needed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cce53854c9fd93a4134ff31169585ce534dd5859\">cce5385</a></td><td><code>src/sage/sets/set_from_iterator.py: Remove use of SAGE_LIB</code></td></tr></table>\n",
    "created_at": "2022-05-08T04:35:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549888",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cacd5ef926218eebe5cd1e0f5d7ab3282bba200">8cacd5e</a></td><td><code>src/sage/misc/sageinspect.py: Remove import of SAGE_LIB</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8a5bdfdaf4bc348c9d6d1319b8b6784f7593ff7">c8a5bdf</a></td><td><code>src/sage/misc/lazy_import.pyx: Import lazy_import_cache only when needed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cce53854c9fd93a4134ff31169585ce534dd5859">cce5385</a></td><td><code>src/sage/sets/set_from_iterator.py: Remove use of SAGE_LIB</code></td></tr></table>




---

archive/issue_comments_549889.json:
```json
{
    "body": "Commit: **[cce5385](https://github.com/sagemath/sagetrac-mirror/commit/cce53854c9fd93a4134ff31169585ce534dd5859)**",
    "created_at": "2022-05-08T04:35:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549889",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[cce5385](https://github.com/sagemath/sagetrac-mirror/commit/cce53854c9fd93a4134ff31169585ce534dd5859)**



---

archive/issue_comments_549890.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2022-05-08T04:37:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549890",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_445615.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-08T04:37:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33821#event-445615"
}
```



---

archive/issue_comments_549891.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+part of Meta-ticket #33037\n``````\n",
    "created_at": "2022-05-08T04:37:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549891",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+part of Meta-ticket #33037
``````




---

archive/issue_comments_549892.json:
```json
{
    "body": "Changed commit from **[cce5385](https://github.com/sagemath/sagetrac-mirror/commit/cce53854c9fd93a4134ff31169585ce534dd5859)** to **[b39cf31](https://github.com/sagemath/sagetrac-mirror/commit/b39cf31719c3e62ee35d1ba3fe72852d86551a91)**",
    "created_at": "2022-05-08T18:20:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549892",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cce5385](https://github.com/sagemath/sagetrac-mirror/commit/cce53854c9fd93a4134ff31169585ce534dd5859)** to **[b39cf31](https://github.com/sagemath/sagetrac-mirror/commit/b39cf31719c3e62ee35d1ba3fe72852d86551a91)**



---

archive/issue_comments_549893.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b39cf31719c3e62ee35d1ba3fe72852d86551a91\">b39cf31</a></td><td><code>src/sage/misc/lazy_import.pyx: Update doctest</code></td></tr></table>\n",
    "created_at": "2022-05-08T18:20:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549893",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b39cf31719c3e62ee35d1ba3fe72852d86551a91">b39cf31</a></td><td><code>src/sage/misc/lazy_import.pyx: Update doctest</code></td></tr></table>




---

archive/issue_comments_549894.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nThe failure in \"Build&Test\" is in `sage -t --random-seed=54174803604868423169944467131116599504 sage/parallel/map_reduce.py `, unrelated.",
    "created_at": "2022-05-09T17:49:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549894",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">Comment 6</div>

The failure in "Build&Test" is in `sage -t --random-seed=54174803604868423169944467131116599504 sage/parallel/map_reduce.py `, unrelated.



---

archive/issue_comments_549895.json:
```json
{
    "body": "Changed commit from **[b39cf31](https://github.com/sagemath/sagetrac-mirror/commit/b39cf31719c3e62ee35d1ba3fe72852d86551a91)** to **[897e103](https://github.com/sagemath/sagetrac-mirror/commit/897e103a6c78e98aa1ce809a166cb9e90cd580c7)**",
    "created_at": "2022-05-10T05:11:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549895",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b39cf31](https://github.com/sagemath/sagetrac-mirror/commit/b39cf31719c3e62ee35d1ba3fe72852d86551a91)** to **[897e103](https://github.com/sagemath/sagetrac-mirror/commit/897e103a6c78e98aa1ce809a166cb9e90cd580c7)**



---

archive/issue_comments_549896.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b004ca9dea6f95d0705b9521b1e6195d2e10f1a7\">b004ca9</a></td><td><code>src/sage/misc/cachefunc.pyx: Do not fail if sage.env cannot be imported</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/897e103a6c78e98aa1ce809a166cb9e90cd580c7\">897e103</a></td><td><code>src/sage/sets/set_from_iterator.py: Do not fail if sage.env cannot be imported</code></td></tr></table>\n",
    "created_at": "2022-05-10T05:11:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549896",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b004ca9dea6f95d0705b9521b1e6195d2e10f1a7">b004ca9</a></td><td><code>src/sage/misc/cachefunc.pyx: Do not fail if sage.env cannot be imported</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/897e103a6c78e98aa1ce809a166cb9e90cd580c7">897e103</a></td><td><code>src/sage/sets/set_from_iterator.py: Do not fail if sage.env cannot be imported</code></td></tr></table>




---

archive/issue_comments_549897.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-part of Meta-ticket #33037\n+part of Meta-ticket #33037 (Remove use of `SAGE_LIB` and `SAGE_EXTCODE` variables)\n``````\n",
    "created_at": "2022-05-12T01:45:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549897",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-part of Meta-ticket #33037
+part of Meta-ticket #33037 (Remove use of `SAGE_LIB` and `SAGE_EXTCODE` variables)
``````




---

archive/issue_comments_549898.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,7 @@\n+We delay importing `lazy_import_cache` until a lazy star import is done (which the Sage library never does).\n+\n+We change two copies of essentially the same code that tries to use `SAGE_SRC` and `SAGE_LIB` to turn a source filename to a qualified package name so that \n+- it does not fail when `sage.env.SAGE_SRC` cannot be imported or is empty\n+- it replaces the use of `SAGE_LIB` by using `sage.__path__` (to handle namespace packages correctly)\n+\n part of Meta-ticket #33037 (Remove use of `SAGE_LIB` and `SAGE_EXTCODE` variables)\n``````\n",
    "created_at": "2022-05-12T01:50:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549898",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,7 @@
+We delay importing `lazy_import_cache` until a lazy star import is done (which the Sage library never does).
+
+We change two copies of essentially the same code that tries to use `SAGE_SRC` and `SAGE_LIB` to turn a source filename to a qualified package name so that 
+- it does not fail when `sage.env.SAGE_SRC` cannot be imported or is empty
+- it replaces the use of `SAGE_LIB` by using `sage.__path__` (to handle namespace packages correctly)
+
 part of Meta-ticket #33037 (Remove use of `SAGE_LIB` and `SAGE_EXTCODE` variables)
``````




---

archive/issue_comments_549899.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nYou have a repeated block\n\n```\n+                def directories():\n+                    try:\n+                        from sage.env import SAGE_SRC\n+                    except ImportError:\n+                        pass\n+                    else:\n+                        if SAGE_SRC:\n+                            yield normpath(os.path.join(SAGE_SRC, 'sage'))\n+                    import sage\n+                    yield from sage.__path__\n+\n+                for directory in directories():\n+                    if commonprefix([filename, directory]) == directory:\n+                        filename = os.path.join('sage', relpath(filename, directory))\n+                        break\n```\nIf it ends up being useful in more than two files, should it be factored somewhere?",
    "created_at": "2022-06-12T21:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549899",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">Comment 11</div>

You have a repeated block

```
+                def directories():
+                    try:
+                        from sage.env import SAGE_SRC
+                    except ImportError:
+                        pass
+                    else:
+                        if SAGE_SRC:
+                            yield normpath(os.path.join(SAGE_SRC, 'sage'))
+                    import sage
+                    yield from sage.__path__
+
+                for directory in directories():
+                    if commonprefix([filename, directory]) == directory:
+                        filename = os.path.join('sage', relpath(filename, directory))
+                        break
```
If it ends up being useful in more than two files, should it be factored somewhere?



---

archive/issue_comments_549900.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/53154b38bc26e9dbf054c1dc26c6dbcd0402c95d\">53154b3</a></td><td><code>Merge tag '9.7.beta3' into t/33821/remove_use_of_sage_lib_in_sage_misc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/748d9fbe54bda2b9529053d261ba12ba168f6a81\">748d9fb</a></td><td><code>sage.misc.sageinspect.sage_getfile_relative: New, use it in sage.misc.cachefunc, sage.sets.set_from_iterator.Decorator</code></td></tr></table>\n",
    "created_at": "2022-06-25T22:58:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549900",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12" align="right">Comment 12</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/53154b38bc26e9dbf054c1dc26c6dbcd0402c95d">53154b3</a></td><td><code>Merge tag '9.7.beta3' into t/33821/remove_use_of_sage_lib_in_sage_misc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/748d9fbe54bda2b9529053d261ba12ba168f6a81">748d9fb</a></td><td><code>sage.misc.sageinspect.sage_getfile_relative: New, use it in sage.misc.cachefunc, sage.sets.set_from_iterator.Decorator</code></td></tr></table>




---

archive/issue_comments_549901.json:
```json
{
    "body": "Changed commit from **[897e103](https://github.com/sagemath/sagetrac-mirror/commit/897e103a6c78e98aa1ce809a166cb9e90cd580c7)** to **[748d9fb](https://github.com/sagemath/sagetrac-mirror/commit/748d9fbe54bda2b9529053d261ba12ba168f6a81)**",
    "created_at": "2022-06-25T22:58:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549901",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[897e103](https://github.com/sagemath/sagetrac-mirror/commit/897e103a6c78e98aa1ce809a166cb9e90cd580c7)** to **[748d9fb](https://github.com/sagemath/sagetrac-mirror/commit/748d9fbe54bda2b9529053d261ba12ba168f6a81)**



---

archive/issue_comments_549902.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nGood suggestion, done now",
    "created_at": "2022-06-25T22:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549902",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">Comment 13</div>

Good suggestion, done now



---

archive/issue_comments_549903.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nLGTM, let's ship it.",
    "created_at": "2022-06-25T23:02:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549903",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14" align="right">Comment 14</div>

LGTM, let's ship it.



---

archive/issue_events_445616.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-06-25T23:02:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33821#event-445616"
}
```



---

archive/issue_events_445617.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-06-25T23:02:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33821#event-445617"
}
```



---

archive/issue_comments_549904.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2022-06-25T23:02:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549904",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **Fran√ßois Bissey**



---

archive/issue_comments_549905.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nThanks!",
    "created_at": "2022-06-25T23:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549905",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">Comment 15</div>

Thanks!



---

archive/issue_events_445618.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-03T22:06:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33821#event-445618"
}
```



---

archive/issue_events_445619.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9307820a88aab3609828c226e5b23e2c0de7fb88",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-07-03T22:06:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33821#event-445619"
}
```



---

archive/issue_comments_549906.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/remove_use_of_sage_lib_in_sage_misc](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/remove_use_of_sage_lib_in_sage_misc)** to **[748d9fb](https://github.com/sagemath/sagetrac-mirror/commit/748d9fbe54bda2b9529053d261ba12ba168f6a81)**",
    "created_at": "2022-07-03T22:06:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33821#issuecomment-549906",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/remove_use_of_sage_lib_in_sage_misc](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/remove_use_of_sage_lib_in_sage_misc)** to **[748d9fb](https://github.com/sagemath/sagetrac-mirror/commit/748d9fbe54bda2b9529053d261ba12ba168f6a81)**
