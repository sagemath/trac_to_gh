# Issue 33407: sage -t --installed

archive/issues_033170.json:
```json
{
    "assignees": [],
    "body": "This new option is similar to `--all` but \n- it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. (This will be useful for testing modularized distributions such as #32601.)\n- it tests the installed Sage documentation (specifically, the `.rst.txt` files installed in `html/**/_sources`) instead of `SAGE_DOC_SRC`.\n\n```\n$ ./sage -tp --installed\ntoo many failed tests, not using stored timings\nRunning doctests with ID 2022-02-23-21-52-47-11831639.\nUsing --optional=ccache,cryptominisat,debugpy,e_antic,homebrew,igraph,jupymake,lrslib,normaliz,pip,polytopes_db_4d,pycryptosat,pynormaliz,sage,sage_spkg\nFeatures to be detected: [...] \nDoctesting all installed modules of the Sage library.\nSorting sources by runtime so that slower doctests are run first....\nDoctesting 3522 files using 8 threads.\nsage -t --random-seed=334799075370772165291245032923424842623 local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/groups/matrix_gps/heisenberg.py\n    [32 tests, 1.83 s]\nsage -t --random-seed=334799075370772165291245032923424842623 local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/combinat/crystals/alcove_path.py\n    [293 tests, 4.16 s]\n...\n```\n\n(Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)\n\nThis would also make sense for distribution packaging, which no longer would have to rely on the fallbacks `SAGE_SRC` -> `SAGE_LIB` and `SAGE_DOC_SRC -> SAGE_DOC`.\n\n\n\nPart of Meta-ticket #33037.\n\n\nCC:  @kiwifb @antonio-rojas @tobiasdiez\n\nComponent: **doctest framework**\n\nAuthor: **Matthias Koeppe**\n\nBranch/Commit: **[`b4d2b8e`](https://github.com/sagemath/sagetrac-mirror/commit/b4d2b8ebb98eff0e5931ffc19fa15a5adb463158)**\n\nReviewer: **Fran\u00e7ois Bissey, Antonio Rojas**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33407_\n\n",
    "closed_at": "2022-03-21T23:34:29Z",
    "created_at": "2022-02-23T18:52:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20doctest%20framework",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sage -t --installed",
    "type": "issue",
    "updated_at": "2022-03-21T23:34:29Z",
    "url": "https://github.com/sagemath/sage/issues/33407",
    "user": "https://github.com/mkoeppe"
}
```
This new option is similar to `--all` but 
- it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. (This will be useful for testing modularized distributions such as #32601.)
- it tests the installed Sage documentation (specifically, the `.rst.txt` files installed in `html/**/_sources`) instead of `SAGE_DOC_SRC`.

```
$ ./sage -tp --installed
too many failed tests, not using stored timings
Running doctests with ID 2022-02-23-21-52-47-11831639.
Using --optional=ccache,cryptominisat,debugpy,e_antic,homebrew,igraph,jupymake,lrslib,normaliz,pip,polytopes_db_4d,pycryptosat,pynormaliz,sage,sage_spkg
Features to be detected: [...] 
Doctesting all installed modules of the Sage library.
Sorting sources by runtime so that slower doctests are run first....
Doctesting 3522 files using 8 threads.
sage -t --random-seed=334799075370772165291245032923424842623 local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/groups/matrix_gps/heisenberg.py
    [32 tests, 1.83 s]
sage -t --random-seed=334799075370772165291245032923424842623 local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/combinat/crystals/alcove_path.py
    [293 tests, 4.16 s]
...
```

(Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)

This would also make sense for distribution packaging, which no longer would have to rely on the fallbacks `SAGE_SRC` -> `SAGE_LIB` and `SAGE_DOC_SRC -> SAGE_DOC`.



Part of Meta-ticket #33037.


CC:  @kiwifb @antonio-rojas @tobiasdiez

Component: **doctest framework**

Author: **Matthias Koeppe**

Branch/Commit: **[`b4d2b8e`](https://github.com/sagemath/sagetrac-mirror/commit/b4d2b8ebb98eff0e5931ffc19fa15a5adb463158)**

Reviewer: **François Bissey, Antonio Rojas**

_Issue created by migration from https://trac.sagemath.org/ticket/33407_





---

archive/issue_events_455799.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-23T18:52:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-455799"
}
```



---

archive/issue_events_455800.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-23T18:52:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20doctest%20framework",
    "label_color": "0000b0",
    "label_name": "c: doctest framework",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-455800"
}
```



---

archive/issue_events_455801.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-23T18:52:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-455801"
}
```



---

archive/issue_events_455802.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-23T18:52:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-455802"
}
```



---

archive/issue_comments_539679.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,6 @@\n This new option would test all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. This would be useful for testing modularized distributions.\n \n+(Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)\n+\n+Part of Meta-ticket #33037.\n+\n``````\n",
    "created_at": "2022-02-23T18:56:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539679",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,6 @@
 This new option would test all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. This would be useful for testing modularized distributions.
 
+(Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)
+
+Part of Meta-ticket #33037.
+
``````




---

archive/issue_events_455803.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-24T05:55:43Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "title_is": "sage -t --installed",
    "title_was": "sage -t --all-installed",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-455803"
}
```



---

archive/issue_comments_539680.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2022-02-24T05:55:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539680",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_455804.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-24T05:55:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-455804"
}
```



---

archive/issue_comments_539681.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,21 @@\n-This new option would test all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. This would be useful for testing modularized distributions.\n+This new option is similar to `--all` but it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. This will be useful for testing modularized distributions.\n+\n+```\n+$ ./sage -tp --installed\n+too many failed tests, not using stored timings\n+Running doctests with ID 2022-02-23-21-52-47-11831639.\n+Using --optional=ccache,cryptominisat,debugpy,e_antic,homebrew,igraph,jupymake,lrslib,normaliz,pip,polytopes_db_4d,pycryptosat,pynormaliz,sage,sage_spkg\n+Features to be detected: [...] \n+Doctesting all installed modules of the Sage library.\n+Sorting sources by runtime so that slower doctests are run first....\n+Doctesting 3522 files using 8 threads.\n+sage -t --random-seed=334799075370772165291245032923424842623 local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/groups/matrix_gps/heisenberg.py\n+    [32 tests, 1.83 s]\n+sage -t --random-seed=334799075370772165291245032923424842623 local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/combinat/crystals/alcove_path.py\n+    [293 tests, 4.16 s]\n+...\n+```\n+\n \n (Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)\n \n``````\n",
    "created_at": "2022-02-24T05:55:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539681",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,21 @@
-This new option would test all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. This would be useful for testing modularized distributions.
+This new option is similar to `--all` but it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. This will be useful for testing modularized distributions.
+
+```
+$ ./sage -tp --installed
+too many failed tests, not using stored timings
+Running doctests with ID 2022-02-23-21-52-47-11831639.
+Using --optional=ccache,cryptominisat,debugpy,e_antic,homebrew,igraph,jupymake,lrslib,normaliz,pip,polytopes_db_4d,pycryptosat,pynormaliz,sage,sage_spkg
+Features to be detected: [...] 
+Doctesting all installed modules of the Sage library.
+Sorting sources by runtime so that slower doctests are run first....
+Doctesting 3522 files using 8 threads.
+sage -t --random-seed=334799075370772165291245032923424842623 local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/groups/matrix_gps/heisenberg.py
+    [32 tests, 1.83 s]
+sage -t --random-seed=334799075370772165291245032923424842623 local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/combinat/crystals/alcove_path.py
+    [293 tests, 4.16 s]
+...
+```
+
 
 (Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)
 
``````




---

archive/issue_comments_539682.json:
```json
{
    "body": "Branch: **[u/mkoeppe/sage__t___all_installed](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage__t___all_installed)**",
    "created_at": "2022-02-24T05:56:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539682",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/sage__t___all_installed](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage__t___all_installed)**



---

archive/issue_comments_539683.json:
```json
{
    "body": "Commit: **[`de649be`](https://github.com/sagemath/sagetrac-mirror/commit/de649beca7dee12c51d3d8838e9c406d763859e3)**",
    "created_at": "2022-02-24T22:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539683",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`de649be`](https://github.com/sagemath/sagetrac-mirror/commit/de649beca7dee12c51d3d8838e9c406d763859e3)**



---

archive/issue_comments_539684.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,8 +16,11 @@\n ...\n ```\n \n+(Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)\n \n-(Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)\n+This would also make sense for distribution packaging, which no longer would have to rely on the fallback `SAGE_SRC` -> `SAGE_LIB`.\n+\n+\n \n Part of Meta-ticket #33037.\n \n``````\n",
    "created_at": "2022-02-24T22:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539684",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,8 +16,11 @@
 ...
 ```
 
+(Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)
 
-(Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)
+This would also make sense for distribution packaging, which no longer would have to rely on the fallback `SAGE_SRC` -> `SAGE_LIB`.
+
+
 
 Part of Meta-ticket #33037.
 
``````




---

archive/issue_comments_539685.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de649beca7dee12c51d3d8838e9c406d763859e3\"><code>de649be</code></a></td><td><code>src/sage/doctest/control.py, src/bin/sage-runtests: Implement sage -t --installed</code></td></tr></table>\n",
    "created_at": "2022-02-24T22:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539685",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de649beca7dee12c51d3d8838e9c406d763859e3"><code>de649be</code></a></td><td><code>src/sage/doctest/control.py, src/bin/sage-runtests: Implement sage -t --installed</code></td></tr></table>




---

archive/issue_comments_539686.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI think the move makes some sense especially in the context of the elimination of `SAGE_LIB` and potentially more variables as sage matures more in the future.\n\nThe only thing I am not sure is introducing a new option. Why not make it the default instead? What workflow would that prevent?",
    "created_at": "2022-02-24T22:47:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539686",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">comment:5</div>

I think the move makes some sense especially in the context of the elimination of `SAGE_LIB` and potentially more variables as sage matures more in the future.

The only thing I am not sure is introducing a new option. Why not make it the default instead? What workflow would that prevent?



---

archive/issue_comments_539687.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@kiwifb](#comment%3A5):\n> Why not make it the default instead? What workflow would that prevent?\n\nI think the default is valuable because doctests can be written / updated and immediately tested without having to build the Sage library.",
    "created_at": "2022-02-24T22:51:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539687",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@kiwifb](#comment%3A5):
> Why not make it the default instead? What workflow would that prevent?

I think the default is valuable because doctests can be written / updated and immediately tested without having to build the Sage library.



---

archive/issue_comments_539688.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nValid for pure python files but not `.pyx`, you need to build those before testing them. But on the numbers they probably are the minority.",
    "created_at": "2022-02-24T22:53:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539688",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

Valid for pure python files but not `.pyx`, you need to build those before testing them. But on the numbers they probably are the minority.



---

archive/issue_comments_539689.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@kiwifb](#comment%3A7):\n> Valid for pure python files but not `.pyx`, you need to build those before testing them. \n\nWhen you are done changing code, you can still edit doctests and in this phase you don't need to recompile in order to tests the doctests.",
    "created_at": "2022-02-24T23:07:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539689",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@kiwifb](#comment%3A7):
> Valid for pure python files but not `.pyx`, you need to build those before testing them. 

When you are done changing code, you can still edit doctests and in this phase you don't need to recompile in order to tests the doctests.



---

archive/issue_comments_539690.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@mkoeppe](#comment%3A8):\n> Replying to [@kiwifb](#comment%3A7):\n> > Valid for pure python files but not `.pyx`, you need to build those before testing them. \n\n> \n> When you are done changing code, you can still edit doctests and in this phase you don't need to recompile in order to tests the doctests.\n\nMore to the point, it is a pain in the workflow to recompile in that case. But you should explicitly test a file or directory in that case. But let's go with a developer focused for now.\n\nWe may want to suggest not to use `--installed` and `--all` at the same time for distros as it will try to add a non-existent path once we remove the default `SAGE_SRC` -> `SAGE_LIB`. Also the current `--all` will catch `sage_setup`, `sage_docbuild` and `SAGE_DOC_SRC` (which in distros will point to `SAGE_DOC`). But `--installed` doesn't do any of that. Should it?",
    "created_at": "2022-02-24T23:19:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539690",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@mkoeppe](#comment%3A8):
> Replying to [@kiwifb](#comment%3A7):
> > Valid for pure python files but not `.pyx`, you need to build those before testing them. 

> 
> When you are done changing code, you can still edit doctests and in this phase you don't need to recompile in order to tests the doctests.

More to the point, it is a pain in the workflow to recompile in that case. But you should explicitly test a file or directory in that case. But let's go with a developer focused for now.

We may want to suggest not to use `--installed` and `--all` at the same time for distros as it will try to add a non-existent path once we remove the default `SAGE_SRC` -> `SAGE_LIB`. Also the current `--all` will catch `sage_setup`, `sage_docbuild` and `SAGE_DOC_SRC` (which in distros will point to `SAGE_DOC`). But `--installed` doesn't do any of that. Should it?



---

archive/issue_comments_539691.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@kiwifb](#comment%3A9):\n> We may want to suggest not to use `--installed` and `--all` at the same time\n\nYes, they are mutually exclusive options",
    "created_at": "2022-02-24T23:42:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539691",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@kiwifb](#comment%3A9):
> We may want to suggest not to use `--installed` and `--all` at the same time

Yes, they are mutually exclusive options



---

archive/issue_comments_539692.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@mkoeppe](#comment%3A10):\n> Replying to [@kiwifb](#comment%3A9):\n> > We may want to suggest not to use `--installed` and `--all` at the same time\n\n> \n> Yes, they are mutually exclusive options\n\nI didn't pay enough attention to that part of the code. I see it now.",
    "created_at": "2022-02-24T23:44:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539692",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@mkoeppe](#comment%3A10):
> Replying to [@kiwifb](#comment%3A9):
> > We may want to suggest not to use `--installed` and `--all` at the same time

> 
> Yes, they are mutually exclusive options

I didn't pay enough attention to that part of the code. I see it now.



---

archive/issue_comments_539693.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5dd2dd24db56ed7e05e0be39e4a1fdde8ad7a269\"><code>5dd2dd2</code></a></td><td><code>src/sage/doctest/control.py: In sage -t --installed, also handle sage_setup, sage_docbuild</code></td></tr></table>\n",
    "created_at": "2022-02-24T23:52:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539693",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5dd2dd24db56ed7e05e0be39e4a1fdde8ad7a269"><code>5dd2dd2</code></a></td><td><code>src/sage/doctest/control.py: In sage -t --installed, also handle sage_setup, sage_docbuild</code></td></tr></table>




---

archive/issue_comments_539694.json:
```json
{
    "body": "Changed commit from **[`de649be`](https://github.com/sagemath/sagetrac-mirror/commit/de649beca7dee12c51d3d8838e9c406d763859e3)** to **[`5dd2dd2`](https://github.com/sagemath/sagetrac-mirror/commit/5dd2dd24db56ed7e05e0be39e4a1fdde8ad7a269)**",
    "created_at": "2022-02-24T23:52:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539694",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`de649be`](https://github.com/sagemath/sagetrac-mirror/commit/de649beca7dee12c51d3d8838e9c406d763859e3)** to **[`5dd2dd2`](https://github.com/sagemath/sagetrac-mirror/commit/5dd2dd24db56ed7e05e0be39e4a1fdde8ad7a269)**



---

archive/issue_comments_539695.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@kiwifb](#comment%3A9):\n> Also the current `--all` will catch `sage_setup`, `sage_docbuild` and `SAGE_DOC_SRC` (which in distros will point to `SAGE_DOC`). But `--installed` doesn't do any of that. Should it?\n\nI have added `sage_setup`, `sage_docbuild` but I'm not sure about `SAGE_DOC_SRC` because Sage does not install it; do you install it in the Gentoo package?",
    "created_at": "2022-02-24T23:54:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539695",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@kiwifb](#comment%3A9):
> Also the current `--all` will catch `sage_setup`, `sage_docbuild` and `SAGE_DOC_SRC` (which in distros will point to `SAGE_DOC`). But `--installed` doesn't do any of that. Should it?

I have added `sage_setup`, `sage_docbuild` but I'm not sure about `SAGE_DOC_SRC` because Sage does not install it; do you install it in the Gentoo package?



---

archive/issue_comments_539696.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nNo, I don't install SAGE_DOC_SRC. But as I said it points to the installed `SAGE_DOC` which effectively tests nothing. Because the point would be to test the `.rst` files, but all those are installed as `.rst.txt` for some reason. It would make sense to me to add `SAGE_DOC` for `--installed` if we could test those.",
    "created_at": "2022-02-24T23:57:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539696",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14" align="right">comment:14</div>

No, I don't install SAGE_DOC_SRC. But as I said it points to the installed `SAGE_DOC` which effectively tests nothing. Because the point would be to test the `.rst` files, but all those are installed as `.rst.txt` for some reason. It would make sense to me to add `SAGE_DOC` for `--installed` if we could test those.



---

archive/issue_comments_539697.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAh, I see, in the `_sources` subdirectories",
    "created_at": "2022-02-25T00:07:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539697",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

Ah, I see, in the `_sources` subdirectories



---

archive/issue_comments_539698.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI looked at these files but they do not seem useful",
    "created_at": "2022-02-25T00:19:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539698",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

I looked at these files but they do not seem useful



---

archive/issue_comments_539699.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nWhat else do you test in `SAGE_DOC_SRC`? `conf.py` files? Those do not have doctests either. If there is no value in testing a `.rst.txt` in `SAGE_DOC`, I am not sure there is value in testing the corresponding `.rst` in `SAGE_DOC_SRC`.",
    "created_at": "2022-02-25T00:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539699",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:17" align="right">comment:17</div>

What else do you test in `SAGE_DOC_SRC`? `conf.py` files? Those do not have doctests either. If there is no value in testing a `.rst.txt` in `SAGE_DOC`, I am not sure there is value in testing the corresponding `.rst` in `SAGE_DOC_SRC`.



---

archive/issue_comments_539700.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nNone of these files have `TESTS` blocks but a few have stuff that does get tested\n\n```\n$ sage -t --long src/doc/en/thematic_tutorials/sandpile.rst\ntoo many failed tests, not using stored timings\nRunning doctests with ID 2022-02-25-13-31-30-ea5e5e11.\nUsing --optional=pip,sage\nFeatures to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,pandoc,pdf2svg,pdftocairo,plantri,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib\nDoctesting 1 file.\nsage -t --long --random-seed=249406959745805344364707629509298952414 src/doc/en/thematic_tutorials/sandpile.rst\n    [705 tests, 12.50 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```",
    "created_at": "2022-02-25T00:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539700",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:18" align="right">comment:18</div>

None of these files have `TESTS` blocks but a few have stuff that does get tested

```
$ sage -t --long src/doc/en/thematic_tutorials/sandpile.rst
too many failed tests, not using stored timings
Running doctests with ID 2022-02-25-13-31-30-ea5e5e11.
Using --optional=pip,sage
Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,pandoc,pdf2svg,pdftocairo,plantri,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib
Doctesting 1 file.
sage -t --long --random-seed=249406959745805344364707629509298952414 src/doc/en/thematic_tutorials/sandpile.rst
    [705 tests, 12.50 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```



---

archive/issue_comments_539701.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nYes, my mistake",
    "created_at": "2022-02-25T00:38:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539701",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

Yes, my mistake



---

archive/issue_comments_539702.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07f37d099a77db4f99b5d723ec487248eda5ffdf\"><code>07f37d0</code></a></td><td><code>src/sage/doctest/{control,sources}.py: Handle .rst.txt files like .rst files</code></td></tr></table>\n",
    "created_at": "2022-02-25T00:41:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539702",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07f37d099a77db4f99b5d723ec487248eda5ffdf"><code>07f37d0</code></a></td><td><code>src/sage/doctest/{control,sources}.py: Handle .rst.txt files like .rst files</code></td></tr></table>




---

archive/issue_comments_539703.json:
```json
{
    "body": "Changed commit from **[`5dd2dd2`](https://github.com/sagemath/sagetrac-mirror/commit/5dd2dd24db56ed7e05e0be39e4a1fdde8ad7a269)** to **[`07f37d0`](https://github.com/sagemath/sagetrac-mirror/commit/07f37d099a77db4f99b5d723ec487248eda5ffdf)**",
    "created_at": "2022-02-25T00:41:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539703",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5dd2dd2`](https://github.com/sagemath/sagetrac-mirror/commit/5dd2dd24db56ed7e05e0be39e4a1fdde8ad7a269)** to **[`07f37d0`](https://github.com/sagemath/sagetrac-mirror/commit/07f37d099a77db4f99b5d723ec487248eda5ffdf)**



---

archive/issue_comments_539704.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8376142493b17eccb95a8e850e26a6320e7fdff\"><code>e837614</code></a></td><td><code>src/sage/doctest/control.py: In sage -t --installed, also test SAGE_DOC</code></td></tr></table>\n",
    "created_at": "2022-02-25T00:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539704",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8376142493b17eccb95a8e850e26a6320e7fdff"><code>e837614</code></a></td><td><code>src/sage/doctest/control.py: In sage -t --installed, also test SAGE_DOC</code></td></tr></table>




---

archive/issue_comments_539705.json:
```json
{
    "body": "Changed commit from **[`07f37d0`](https://github.com/sagemath/sagetrac-mirror/commit/07f37d099a77db4f99b5d723ec487248eda5ffdf)** to **[`e837614`](https://github.com/sagemath/sagetrac-mirror/commit/e8376142493b17eccb95a8e850e26a6320e7fdff)**",
    "created_at": "2022-02-25T00:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539705",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`07f37d0`](https://github.com/sagemath/sagetrac-mirror/commit/07f37d099a77db4f99b5d723ec487248eda5ffdf)** to **[`e837614`](https://github.com/sagemath/sagetrac-mirror/commit/e8376142493b17eccb95a8e850e26a6320e7fdff)**



---

archive/issue_comments_539706.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n-This new option is similar to `--all` but it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. This will be useful for testing modularized distributions.\n+This new option is similar to `--all` but \n+- it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. (This will be useful for testing modularized distributions.)\n+- it tests the installed Sage documentation (specifically, the `.rst.txt` files installed in `html/**/_sources`) instead of `SAGE_DOC_SRC`.\n \n ```\n $ ./sage -tp --installed\n``````\n",
    "created_at": "2022-02-25T00:45:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539706",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
-This new option is similar to `--all` but it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. This will be useful for testing modularized distributions.
+This new option is similar to `--all` but 
+- it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. (This will be useful for testing modularized distributions.)
+- it tests the installed Sage documentation (specifically, the `.rst.txt` files installed in `html/**/_sources`) instead of `SAGE_DOC_SRC`.
 
 ```
 $ ./sage -tp --installed
``````




---

archive/issue_comments_539707.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,7 +20,7 @@\n \n (Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)\n \n-This would also make sense for distribution packaging, which no longer would have to rely on the fallback `SAGE_SRC` -> `SAGE_LIB`.\n+This would also make sense for distribution packaging, which no longer would have to rely on the fallbacks `SAGE_SRC` -> `SAGE_LIB` and `SAGE_DOC_SRC -> SAGE_DOC`.\n \n \n \n``````\n",
    "created_at": "2022-02-25T00:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539707",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,7 +20,7 @@
 
 (Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)
 
-This would also make sense for distribution packaging, which no longer would have to rely on the fallback `SAGE_SRC` -> `SAGE_LIB`.
+This would also make sense for distribution packaging, which no longer would have to rely on the fallbacks `SAGE_SRC` -> `SAGE_LIB` and `SAGE_DOC_SRC -> SAGE_DOC`.
 
 
 
``````




---

archive/issue_comments_539708.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1c4ee73ddd1d555b98bf640b0866fa4cfd3e3f4\"><code>f1c4ee7</code></a></td><td><code>src/sage/doctest/sources.py: Update doctest output</code></td></tr></table>\n",
    "created_at": "2022-02-25T00:52:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539708",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1c4ee73ddd1d555b98bf640b0866fa4cfd3e3f4"><code>f1c4ee7</code></a></td><td><code>src/sage/doctest/sources.py: Update doctest output</code></td></tr></table>




---

archive/issue_comments_539709.json:
```json
{
    "body": "Changed commit from **[`e837614`](https://github.com/sagemath/sagetrac-mirror/commit/e8376142493b17eccb95a8e850e26a6320e7fdff)** to **[`f1c4ee7`](https://github.com/sagemath/sagetrac-mirror/commit/f1c4ee73ddd1d555b98bf640b0866fa4cfd3e3f4)**",
    "created_at": "2022-02-25T00:52:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539709",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e837614`](https://github.com/sagemath/sagetrac-mirror/commit/e8376142493b17eccb95a8e850e26a6320e7fdff)** to **[`f1c4ee7`](https://github.com/sagemath/sagetrac-mirror/commit/f1c4ee73ddd1d555b98bf640b0866fa4cfd3e3f4)**



---

archive/issue_comments_539710.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nShould I remove the fallback `SAGE_DOC_SRC` -> `SAGE_DOC`?",
    "created_at": "2022-02-25T01:10:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539710",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Should I remove the fallback `SAGE_DOC_SRC` -> `SAGE_DOC`?



---

archive/issue_comments_539711.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2022-02-25T01:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539711",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **François Bissey**



---

archive/issue_comments_539712.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@mkoeppe](#comment%3A25):\n> Should I remove the fallback `SAGE_DOC_SRC` -> `SAGE_DOC`?\n\nLet's leave it for another clean up ticket. I am already quite happy that we fixed the `.rst.txt` thing in this one. I'll want a clean slate in my brain to think properly of all the consequences when we get to it.\n\nIt was good work on this one, thank you for all the commits :)\n\nIf you have nothing to add, it is a positive review from me.",
    "created_at": "2022-02-25T01:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539712",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@mkoeppe](#comment%3A25):
> Should I remove the fallback `SAGE_DOC_SRC` -> `SAGE_DOC`?

Let's leave it for another clean up ticket. I am already quite happy that we fixed the `.rst.txt` thing in this one. I'll want a clean slate in my brain to think properly of all the consequences when we get to it.

It was good work on this one, thank you for all the commits :)

If you have nothing to add, it is a positive review from me.



---

archive/issue_comments_539713.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1627cc98a1dcb42ca2416b2b958198fabb70f710\"><code>1627cc9</code></a></td><td><code>src/sage/doctest/control.py: Fall back from --all to --installed explicitly</code></td></tr></table>\n",
    "created_at": "2022-02-25T01:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539713",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1627cc98a1dcb42ca2416b2b958198fabb70f710"><code>1627cc9</code></a></td><td><code>src/sage/doctest/control.py: Fall back from --all to --installed explicitly</code></td></tr></table>




---

archive/issue_comments_539714.json:
```json
{
    "body": "Changed commit from **[`f1c4ee7`](https://github.com/sagemath/sagetrac-mirror/commit/f1c4ee73ddd1d555b98bf640b0866fa4cfd3e3f4)** to **[`1627cc9`](https://github.com/sagemath/sagetrac-mirror/commit/1627cc98a1dcb42ca2416b2b958198fabb70f710)**",
    "created_at": "2022-02-25T01:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539714",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f1c4ee7`](https://github.com/sagemath/sagetrac-mirror/commit/f1c4ee73ddd1d555b98bf640b0866fa4cfd3e3f4)** to **[`1627cc9`](https://github.com/sagemath/sagetrac-mirror/commit/1627cc98a1dcb42ca2416b2b958198fabb70f710)**



---

archive/issue_comments_539715.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nHere's another change, just stopping short of actually removing the fallbacks",
    "created_at": "2022-02-25T01:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539715",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

Here's another change, just stopping short of actually removing the fallbacks



---

archive/issue_comments_539716.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nBut we can leave this for another ticket if you prefer.",
    "created_at": "2022-02-25T01:21:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539716",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

But we can leave this for another ticket if you prefer.



---

archive/issue_comments_539717.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nWell, I'll be going for the school run in 20-25 minutes, I'll try to wrap my head around what this commit is about before going.",
    "created_at": "2022-02-25T01:23:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539717",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:30" align="right">comment:30</div>

Well, I'll be going for the school run in 20-25 minutes, I'll try to wrap my head around what this commit is about before going.



---

archive/issue_comments_539718.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e80c13562299dd2eea02d679f9a4e9ea19e028c2\"><code>e80c135</code></a></td><td><code>src/sage/doctest/control.py: Use elif because options are exclusive</code></td></tr></table>\n",
    "created_at": "2022-02-25T01:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539718",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e80c13562299dd2eea02d679f9a4e9ea19e028c2"><code>e80c135</code></a></td><td><code>src/sage/doctest/control.py: Use elif because options are exclusive</code></td></tr></table>




---

archive/issue_comments_539719.json:
```json
{
    "body": "Changed commit from **[`1627cc9`](https://github.com/sagemath/sagetrac-mirror/commit/1627cc98a1dcb42ca2416b2b958198fabb70f710)** to **[`e80c135`](https://github.com/sagemath/sagetrac-mirror/commit/e80c13562299dd2eea02d679f9a4e9ea19e028c2)**",
    "created_at": "2022-02-25T01:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539719",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1627cc9`](https://github.com/sagemath/sagetrac-mirror/commit/1627cc98a1dcb42ca2416b2b958198fabb70f710)** to **[`e80c135`](https://github.com/sagemath/sagetrac-mirror/commit/e80c13562299dd2eea02d679f9a4e9ea19e028c2)**



---

archive/issue_comments_539720.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nGood spotting that last commit. The previous commit is neat, it almost negates the need for having the `--installed` option. I can continue doing `--all` on distro and it will behave as `--installed`. It is only distinctive on vanilla sage where it does something different.\n\nIt feels like I won my first point about making it the default without you really conceding anything. Really well done. The code reorganisation around it is also quite good. It is all more clear about what each part does.",
    "created_at": "2022-02-25T01:40:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539720",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:32" align="right">comment:32</div>

Good spotting that last commit. The previous commit is neat, it almost negates the need for having the `--installed` option. I can continue doing `--all` on distro and it will behave as `--installed`. It is only distinctive on vanilla sage where it does something different.

It feels like I won my first point about making it the default without you really conceding anything. Really well done. The code reorganisation around it is also quite good. It is all more clear about what each part does.



---

archive/issue_comments_539721.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@kiwifb](#comment%3A32):\n> The previous commit is neat, it almost negates the need for having the `--installed` option. \n\nYes, for the Sage-on-distro use case, but not for my use case (doctesting a modularized subset distribution like **sagemath-polyhedra**).",
    "created_at": "2022-02-25T04:34:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539721",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@kiwifb](#comment%3A32):
> The previous commit is neat, it almost negates the need for having the `--installed` option. 

Yes, for the Sage-on-distro use case, but not for my use case (doctesting a modularized subset distribution like **sagemath-polyhedra**).



---

archive/issue_comments_539722.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n This new option is similar to `--all` but \n-- it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. (This will be useful for testing modularized distributions.)\n+- it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. (This will be useful for testing modularized distributions such as #32601.)\n - it tests the installed Sage documentation (specifically, the `.rst.txt` files installed in `html/**/_sources`) instead of `SAGE_DOC_SRC`.\n \n ```\n``````\n",
    "created_at": "2022-02-27T21:06:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539722",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 This new option is similar to `--all` but 
-- it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. (This will be useful for testing modularized distributions.)
+- it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. (This will be useful for testing modularized distributions such as #32601.)
 - it tests the installed Sage documentation (specifically, the `.rst.txt` files installed in `html/**/_sources`) instead of `SAGE_DOC_SRC`.
 
 ```
``````




---

archive/issue_events_455805.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-02-27T21:33:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-455805"
}
```



---

archive/issue_events_455806.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-02-27T21:33:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-455806"
}
```



---

archive/issue_comments_539723.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThank you!",
    "created_at": "2022-02-28T02:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539723",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

Thank you!



---

archive/issue_comments_539724.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nTest fail",
    "created_at": "2022-02-28T22:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539724",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:37" align="right">comment:37</div>

Test fail



---

archive/issue_events_455807.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-28T22:27:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-455807"
}
```



---

archive/issue_events_455808.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-28T22:27:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-455808"
}
```



---

archive/issue_comments_539725.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4d2b8ebb98eff0e5931ffc19fa15a5adb463158\"><code>b4d2b8e</code></a></td><td><code>src/sage/doctest/control.py: Update doctest output</code></td></tr></table>\n",
    "created_at": "2022-02-28T22:57:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539725",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4d2b8ebb98eff0e5931ffc19fa15a5adb463158"><code>b4d2b8e</code></a></td><td><code>src/sage/doctest/control.py: Update doctest output</code></td></tr></table>




---

archive/issue_comments_539726.json:
```json
{
    "body": "Changed commit from **[`e80c135`](https://github.com/sagemath/sagetrac-mirror/commit/e80c13562299dd2eea02d679f9a4e9ea19e028c2)** to **[`b4d2b8e`](https://github.com/sagemath/sagetrac-mirror/commit/b4d2b8ebb98eff0e5931ffc19fa15a5adb463158)**",
    "created_at": "2022-02-28T22:57:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539726",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e80c135`](https://github.com/sagemath/sagetrac-mirror/commit/e80c13562299dd2eea02d679f9a4e9ea19e028c2)** to **[`b4d2b8e`](https://github.com/sagemath/sagetrac-mirror/commit/b4d2b8ebb98eff0e5931ffc19fa15a5adb463158)**



---

archive/issue_events_455809.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-28T22:57:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-455809"
}
```



---

archive/issue_events_455810.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-28T22:57:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-455810"
}
```



---

archive/issue_comments_539727.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nApologies, that was very sloppy of me.",
    "created_at": "2022-02-28T23:03:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539727",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:40" align="right">comment:40</div>

Apologies, that was very sloppy of me.



---

archive/issue_comments_539728.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nPatchbots have been on strike, hard to see failures.",
    "created_at": "2022-03-01T01:04:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539728",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

Patchbots have been on strike, hard to see failures.



---

archive/issue_comments_539729.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nI have now run a full doctest on sage-on-gentoo with `--installed`. Because we have not acted yet on `SAGE_SRC`/`SAGE_LIB`/`SAGE_DOC_SRC` checking with `--all` was just business as usual. But nothing else came up (apart from the current lot of failures in #33141 and new giac issues that I have to inspect more closely).",
    "created_at": "2022-03-01T01:10:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539729",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:42" align="right">comment:42</div>

I have now run a full doctest on sage-on-gentoo with `--installed`. Because we have not acted yet on `SAGE_SRC`/`SAGE_LIB`/`SAGE_DOC_SRC` checking with `--all` was just business as usual. But nothing else came up (apart from the current lot of failures in #33141 and new giac issues that I have to inspect more closely).



---

archive/issue_comments_539730.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nWhile it is unrelated to eliminating `SAGE_*` variables, there is something related to testing an installed sage that we need to address in a follow up. pytest doesn't work if you cannot write in the \"rootdir\" of what is tested.\n\nThere are two issues with that. First it may leave unwanted files all over the place. Second it fails miserably if you try to test something that is read-only.\n\n```\n============================= test session starts ==============================\nplatform linux -- Python 3.10.2, pytest-7.0.1, pluggy-1.0.0\nrootdir: /usr\nplugins: hypothesis-6.38.0\ncollected 0 items\n\n=============================== warnings summary ===============================\n../../usr/lib/python3.10/site-packages/_pytest/cacheprovider.py:433\n  /usr/lib/python3.10/site-packages/_pytest/cacheprovider.py:433: PytestCacheWarning: could not create cache path /usr/.pytest_cache/v/cache/nodeids\n    config.cache.set(\"cache/nodeids\", sorted(self.cached_nodeids))\n\n../../usr/lib/python3.10/site-packages/_pytest/stepwise.py:52\n  /usr/lib/python3.10/site-packages/_pytest/stepwise.py:52: PytestCacheWarning: could not create cache path /usr/.pytest_cache/v/cache/stepwise\n    session.config.cache.set(STEPWISE_CACHE_DIR, [])\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n```\n\n\nThere seem to be some option to change where the cache is created (`-o cache_dir=$somelocation`) but I have so far failed to integrate it successfully in `sage-runtest` when `pytest` is called.",
    "created_at": "2022-03-17T09:07:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539730",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:43" align="right">comment:43</div>

While it is unrelated to eliminating `SAGE_*` variables, there is something related to testing an installed sage that we need to address in a follow up. pytest doesn't work if you cannot write in the "rootdir" of what is tested.

There are two issues with that. First it may leave unwanted files all over the place. Second it fails miserably if you try to test something that is read-only.

```
============================= test session starts ==============================
platform linux -- Python 3.10.2, pytest-7.0.1, pluggy-1.0.0
rootdir: /usr
plugins: hypothesis-6.38.0
collected 0 items

=============================== warnings summary ===============================
../../usr/lib/python3.10/site-packages/_pytest/cacheprovider.py:433
  /usr/lib/python3.10/site-packages/_pytest/cacheprovider.py:433: PytestCacheWarning: could not create cache path /usr/.pytest_cache/v/cache/nodeids
    config.cache.set("cache/nodeids", sorted(self.cached_nodeids))

../../usr/lib/python3.10/site-packages/_pytest/stepwise.py:52
  /usr/lib/python3.10/site-packages/_pytest/stepwise.py:52: PytestCacheWarning: could not create cache path /usr/.pytest_cache/v/cache/stepwise
    session.config.cache.set(STEPWISE_CACHE_DIR, [])

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
```


There seem to be some option to change where the cache is created (`-o cache_dir=$somelocation`) but I have so far failed to integrate it successfully in `sage-runtest` when `pytest` is called.



---

archive/issue_comments_539731.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nFollow up for `pytest` at #33521.",
    "created_at": "2022-03-17T19:47:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539731",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:45" align="right">comment:45</div>

Follow up for `pytest` at #33521.



---

archive/issue_comments_539732.json:
```json
{
    "body": "Changed reviewer from **Fran\u00e7ois Bissey** to **Fran\u00e7ois Bissey, Antonio Rojas**",
    "created_at": "2022-03-17T22:45:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539732",
    "user": "https://github.com/antonio-rojas"
}
```

Changed reviewer from **François Bissey** to **François Bissey, Antonio Rojas**



---

archive/issue_events_455811.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-03-17T22:45:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-455811"
}
```



---

archive/issue_events_455812.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-03-17T22:45:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-455812"
}
```



---

archive/issue_comments_539733.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nWorking fine here.",
    "created_at": "2022-03-17T22:45:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539733",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:46" align="right">comment:46</div>

Working fine here.



---

archive/issue_comments_539734.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nThanks all for the review!",
    "created_at": "2022-03-17T22:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539734",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

Thanks all for the review!



---

archive/issue_comments_539735.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/sage__t___all_installed](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage__t___all_installed)** to **[`b4d2b8e`](https://github.com/sagemath/sagetrac-mirror/commit/b4d2b8ebb98eff0e5931ffc19fa15a5adb463158)**",
    "created_at": "2022-03-21T23:34:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-539735",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/sage__t___all_installed](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage__t___all_installed)** to **[`b4d2b8e`](https://github.com/sagemath/sagetrac-mirror/commit/b4d2b8ebb98eff0e5931ffc19fa15a5adb463158)**



---

archive/issue_events_455813.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-21T23:34:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-455813"
}
```



---

archive/issue_events_455814.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a6364982871cc63abd0f4e69254fa9561eb8b9cf",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-03-21T23:34:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-455814"
}
```
