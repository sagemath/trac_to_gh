# Issue 33407: sage -t --installed

archive/issues_033170.json:
```json
{
    "assignees": [],
    "body": "This new option is similar to `--all` but \n- it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. (This will be useful for testing modularized distributions such as #32601.)\n- it tests the installed Sage documentation (specifically, the `.rst.txt` files installed in `html/**/_sources`) instead of `SAGE_DOC_SRC`.\n\n```\n$ ./sage -tp --installed\ntoo many failed tests, not using stored timings\nRunning doctests with ID 2022-02-23-21-52-47-11831639.\nUsing --optional=ccache,cryptominisat,debugpy,e_antic,homebrew,igraph,jupymake,lrslib,normaliz,pip,polytopes_db_4d,pycryptosat,pynormaliz,sage,sage_spkg\nFeatures to be detected: [...] \nDoctesting all installed modules of the Sage library.\nSorting sources by runtime so that slower doctests are run first....\nDoctesting 3522 files using 8 threads.\nsage -t --random-seed=334799075370772165291245032923424842623 local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/groups/matrix_gps/heisenberg.py\n    [32 tests, 1.83 s]\nsage -t --random-seed=334799075370772165291245032923424842623 local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/combinat/crystals/alcove_path.py\n    [293 tests, 4.16 s]\n...\n```\n\n(Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)\n\nThis would also make sense for distribution packaging, which no longer would have to rely on the fallbacks `SAGE_SRC` -> `SAGE_LIB` and `SAGE_DOC_SRC -> SAGE_DOC`.\n\n\n\nPart of Meta-ticket #33037.\n\n\nCC:  @kiwifb @antonio-rojas @tobiasdiez\n\nBranch/Commit: **[b4d2b8e](https://github.com/sagemath/sagetrac-mirror/commit/b4d2b8ebb98eff0e5931ffc19fa15a5adb463158)**\n\nReviewer: **Fran\u00e7ois Bissey, Antonio Rojas**\n\nAuthor: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33407_\n\n",
    "closed_at": "2022-03-21T23:34:29Z",
    "created_at": "2022-02-23T18:52:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20doctest%20framework",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sage -t --installed",
    "type": "issue",
    "updated_at": "2022-03-21T23:34:29Z",
    "url": "https://github.com/sagemath/sage/issues/33407",
    "user": "https://github.com/mkoeppe"
}
```
This new option is similar to `--all` but 
- it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. (This will be useful for testing modularized distributions such as #32601.)
- it tests the installed Sage documentation (specifically, the `.rst.txt` files installed in `html/**/_sources`) instead of `SAGE_DOC_SRC`.

```
$ ./sage -tp --installed
too many failed tests, not using stored timings
Running doctests with ID 2022-02-23-21-52-47-11831639.
Using --optional=ccache,cryptominisat,debugpy,e_antic,homebrew,igraph,jupymake,lrslib,normaliz,pip,polytopes_db_4d,pycryptosat,pynormaliz,sage,sage_spkg
Features to be detected: [...] 
Doctesting all installed modules of the Sage library.
Sorting sources by runtime so that slower doctests are run first....
Doctesting 3522 files using 8 threads.
sage -t --random-seed=334799075370772165291245032923424842623 local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/groups/matrix_gps/heisenberg.py
    [32 tests, 1.83 s]
sage -t --random-seed=334799075370772165291245032923424842623 local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/combinat/crystals/alcove_path.py
    [293 tests, 4.16 s]
...
```

(Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)

This would also make sense for distribution packaging, which no longer would have to rely on the fallbacks `SAGE_SRC` -> `SAGE_LIB` and `SAGE_DOC_SRC -> SAGE_DOC`.



Part of Meta-ticket #33037.


CC:  @kiwifb @antonio-rojas @tobiasdiez

Branch/Commit: **[b4d2b8e](https://github.com/sagemath/sagetrac-mirror/commit/b4d2b8ebb98eff0e5931ffc19fa15a5adb463158)**

Reviewer: **François Bissey, Antonio Rojas**

Author: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/33407_





---

archive/issue_events_426365.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-23T18:52:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-426365"
}
```



---

archive/issue_events_426366.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-23T18:52:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20doctest%20framework",
    "label_color": "000080",
    "label_name": "component: doctest framework",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-426366"
}
```



---

archive/issue_events_426367.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-23T18:52:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-426367"
}
```



---

archive/issue_events_426368.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-23T18:52:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-426368"
}
```



---

archive/issue_comments_542806.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,6 @@\n This new option would test all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. This would be useful for testing modularized distributions.\n \n+(Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)\n+\n+Part of Meta-ticket #33037.\n+\n``````\n",
    "created_at": "2022-02-23T18:56:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542806",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,6 @@
 This new option would test all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. This would be useful for testing modularized distributions.
 
+(Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)
+
+Part of Meta-ticket #33037.
+
``````




---

archive/issue_events_426369.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-24T05:55:43Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "title_is": "sage -t --installed",
    "title_was": "sage -t --all-installed",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-426369"
}
```



---

archive/issue_comments_542807.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2022-02-24T05:55:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542807",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_426370.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-24T05:55:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-426370"
}
```



---

archive/issue_comments_542808.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,21 @@\n-This new option would test all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. This would be useful for testing modularized distributions.\n+This new option is similar to `--all` but it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. This will be useful for testing modularized distributions.\n+\n+```\n+$ ./sage -tp --installed\n+too many failed tests, not using stored timings\n+Running doctests with ID 2022-02-23-21-52-47-11831639.\n+Using --optional=ccache,cryptominisat,debugpy,e_antic,homebrew,igraph,jupymake,lrslib,normaliz,pip,polytopes_db_4d,pycryptosat,pynormaliz,sage,sage_spkg\n+Features to be detected: [...] \n+Doctesting all installed modules of the Sage library.\n+Sorting sources by runtime so that slower doctests are run first....\n+Doctesting 3522 files using 8 threads.\n+sage -t --random-seed=334799075370772165291245032923424842623 local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/groups/matrix_gps/heisenberg.py\n+    [32 tests, 1.83 s]\n+sage -t --random-seed=334799075370772165291245032923424842623 local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/combinat/crystals/alcove_path.py\n+    [293 tests, 4.16 s]\n+...\n+```\n+\n \n (Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)\n \n``````\n",
    "created_at": "2022-02-24T05:55:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542808",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,21 @@
-This new option would test all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. This would be useful for testing modularized distributions.
+This new option is similar to `--all` but it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. This will be useful for testing modularized distributions.
+
+```
+$ ./sage -tp --installed
+too many failed tests, not using stored timings
+Running doctests with ID 2022-02-23-21-52-47-11831639.
+Using --optional=ccache,cryptominisat,debugpy,e_antic,homebrew,igraph,jupymake,lrslib,normaliz,pip,polytopes_db_4d,pycryptosat,pynormaliz,sage,sage_spkg
+Features to be detected: [...] 
+Doctesting all installed modules of the Sage library.
+Sorting sources by runtime so that slower doctests are run first....
+Doctesting 3522 files using 8 threads.
+sage -t --random-seed=334799075370772165291245032923424842623 local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/groups/matrix_gps/heisenberg.py
+    [32 tests, 1.83 s]
+sage -t --random-seed=334799075370772165291245032923424842623 local/var/lib/sage/venv-python3.9/lib/python3.9/site-packages/sage/combinat/crystals/alcove_path.py
+    [293 tests, 4.16 s]
+...
+```
+
 
 (Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)
 
``````




---

archive/issue_comments_542809.json:
```json
{
    "body": "Branch: **[u/mkoeppe/sage__t___all_installed](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage__t___all_installed)**",
    "created_at": "2022-02-24T05:56:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542809",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/sage__t___all_installed](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage__t___all_installed)**



---

archive/issue_comments_542810.json:
```json
{
    "body": "Commit: **[de649be](https://github.com/sagemath/sagetrac-mirror/commit/de649beca7dee12c51d3d8838e9c406d763859e3)**",
    "created_at": "2022-02-24T22:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542810",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[de649be](https://github.com/sagemath/sagetrac-mirror/commit/de649beca7dee12c51d3d8838e9c406d763859e3)**



---

archive/issue_comments_542811.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,8 +16,11 @@\n ...\n ```\n \n+(Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)\n \n-(Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)\n+This would also make sense for distribution packaging, which no longer would have to rely on the fallback `SAGE_SRC` -> `SAGE_LIB`.\n+\n+\n \n Part of Meta-ticket #33037.\n \n``````\n",
    "created_at": "2022-02-24T22:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542811",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,8 +16,11 @@
 ...
 ```
 
+(Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)
 
-(Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)
+This would also make sense for distribution packaging, which no longer would have to rely on the fallback `SAGE_SRC` -> `SAGE_LIB`.
+
+
 
 Part of Meta-ticket #33037.
 
``````




---

archive/issue_comments_542812.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de649beca7dee12c51d3d8838e9c406d763859e3\">de649be</a></td><td><code>src/sage/doctest/control.py, src/bin/sage-runtests: Implement sage -t --installed</code></td></tr></table>\n",
    "created_at": "2022-02-24T22:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542812",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'>Comment 4:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de649beca7dee12c51d3d8838e9c406d763859e3">de649be</a></td><td><code>src/sage/doctest/control.py, src/bin/sage-runtests: Implement sage -t --installed</code></td></tr></table>




---

archive/issue_comments_542813.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nI think the move makes some sense especially in the context of the elimination of `SAGE_LIB` and potentially more variables as sage matures more in the future.\n\nThe only thing I am not sure is introducing a new option. Why not make it the default instead? What workflow would that prevent?",
    "created_at": "2022-02-24T22:47:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542813",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'>Comment 5:</a>
I think the move makes some sense especially in the context of the elimination of `SAGE_LIB` and potentially more variables as sage matures more in the future.

The only thing I am not sure is introducing a new option. Why not make it the default instead? What workflow would that prevent?



---

archive/issue_comments_542814.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [@kiwifb](#comment%3A5):\n> Why not make it the default instead? What workflow would that prevent?\n\nI think the default is valuable because doctests can be written / updated and immediately tested without having to build the Sage library.",
    "created_at": "2022-02-24T22:51:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542814",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [@kiwifb](#comment%3A5):
> Why not make it the default instead? What workflow would that prevent?

I think the default is valuable because doctests can be written / updated and immediately tested without having to build the Sage library.



---

archive/issue_comments_542815.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nValid for pure python files but not `.pyx`, you need to build those before testing them. But on the numbers they probably are the minority.",
    "created_at": "2022-02-24T22:53:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542815",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'>Comment 7:</a>
Valid for pure python files but not `.pyx`, you need to build those before testing them. But on the numbers they probably are the minority.



---

archive/issue_comments_542816.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [@kiwifb](#comment%3A7):\n> Valid for pure python files but not `.pyx`, you need to build those before testing them. \n\nWhen you are done changing code, you can still edit doctests and in this phase you don't need to recompile in order to tests the doctests.",
    "created_at": "2022-02-24T23:07:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542816",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [@kiwifb](#comment%3A7):
> Valid for pure python files but not `.pyx`, you need to build those before testing them. 

When you are done changing code, you can still edit doctests and in this phase you don't need to recompile in order to tests the doctests.



---

archive/issue_comments_542817.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nReplying to [@mkoeppe](#comment%3A8):\n> Replying to [@kiwifb](#comment%3A7):\n> > Valid for pure python files but not `.pyx`, you need to build those before testing them. \n\n> \n> When you are done changing code, you can still edit doctests and in this phase you don't need to recompile in order to tests the doctests.\n\nMore to the point, it is a pain in the workflow to recompile in that case. But you should explicitly test a file or directory in that case. But let's go with a developer focused for now.\n\nWe may want to suggest not to use `--installed` and `--all` at the same time for distros as it will try to add a non-existent path once we remove the default `SAGE_SRC` -> `SAGE_LIB`. Also the current `--all` will catch `sage_setup`, `sage_docbuild` and `SAGE_DOC_SRC` (which in distros will point to `SAGE_DOC`). But `--installed` doesn't do any of that. Should it?",
    "created_at": "2022-02-24T23:19:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542817",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:9'>Comment 9:</a>
Replying to [@mkoeppe](#comment%3A8):
> Replying to [@kiwifb](#comment%3A7):
> > Valid for pure python files but not `.pyx`, you need to build those before testing them. 

> 
> When you are done changing code, you can still edit doctests and in this phase you don't need to recompile in order to tests the doctests.

More to the point, it is a pain in the workflow to recompile in that case. But you should explicitly test a file or directory in that case. But let's go with a developer focused for now.

We may want to suggest not to use `--installed` and `--all` at the same time for distros as it will try to add a non-existent path once we remove the default `SAGE_SRC` -> `SAGE_LIB`. Also the current `--all` will catch `sage_setup`, `sage_docbuild` and `SAGE_DOC_SRC` (which in distros will point to `SAGE_DOC`). But `--installed` doesn't do any of that. Should it?



---

archive/issue_comments_542818.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nReplying to [@kiwifb](#comment%3A9):\n> We may want to suggest not to use `--installed` and `--all` at the same time\n\nYes, they are mutually exclusive options",
    "created_at": "2022-02-24T23:42:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542818",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'>Comment 10:</a>
Replying to [@kiwifb](#comment%3A9):
> We may want to suggest not to use `--installed` and `--all` at the same time

Yes, they are mutually exclusive options



---

archive/issue_comments_542819.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nReplying to [@mkoeppe](#comment%3A10):\n> Replying to [@kiwifb](#comment%3A9):\n> > We may want to suggest not to use `--installed` and `--all` at the same time\n\n> \n> Yes, they are mutually exclusive options\n\nI didn't pay enough attention to that part of the code. I see it now.",
    "created_at": "2022-02-24T23:44:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542819",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:11'>Comment 11:</a>
Replying to [@mkoeppe](#comment%3A10):
> Replying to [@kiwifb](#comment%3A9):
> > We may want to suggest not to use `--installed` and `--all` at the same time

> 
> Yes, they are mutually exclusive options

I didn't pay enough attention to that part of the code. I see it now.



---

archive/issue_comments_542820.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5dd2dd24db56ed7e05e0be39e4a1fdde8ad7a269\">5dd2dd2</a></td><td><code>src/sage/doctest/control.py: In sage -t --installed, also handle sage_setup, sage_docbuild</code></td></tr></table>\n",
    "created_at": "2022-02-24T23:52:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542820",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5dd2dd24db56ed7e05e0be39e4a1fdde8ad7a269">5dd2dd2</a></td><td><code>src/sage/doctest/control.py: In sage -t --installed, also handle sage_setup, sage_docbuild</code></td></tr></table>




---

archive/issue_comments_542821.json:
```json
{
    "body": "Changed commit from **[de649be](https://github.com/sagemath/sagetrac-mirror/commit/de649beca7dee12c51d3d8838e9c406d763859e3)** to **[5dd2dd2](https://github.com/sagemath/sagetrac-mirror/commit/5dd2dd24db56ed7e05e0be39e4a1fdde8ad7a269)**",
    "created_at": "2022-02-24T23:52:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542821",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[de649be](https://github.com/sagemath/sagetrac-mirror/commit/de649beca7dee12c51d3d8838e9c406d763859e3)** to **[5dd2dd2](https://github.com/sagemath/sagetrac-mirror/commit/5dd2dd24db56ed7e05e0be39e4a1fdde8ad7a269)**



---

archive/issue_comments_542822.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nReplying to [@kiwifb](#comment%3A9):\n> Also the current `--all` will catch `sage_setup`, `sage_docbuild` and `SAGE_DOC_SRC` (which in distros will point to `SAGE_DOC`). But `--installed` doesn't do any of that. Should it?\n\nI have added `sage_setup`, `sage_docbuild` but I'm not sure about `SAGE_DOC_SRC` because Sage does not install it; do you install it in the Gentoo package?",
    "created_at": "2022-02-24T23:54:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542822",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'>Comment 13:</a>
Replying to [@kiwifb](#comment%3A9):
> Also the current `--all` will catch `sage_setup`, `sage_docbuild` and `SAGE_DOC_SRC` (which in distros will point to `SAGE_DOC`). But `--installed` doesn't do any of that. Should it?

I have added `sage_setup`, `sage_docbuild` but I'm not sure about `SAGE_DOC_SRC` because Sage does not install it; do you install it in the Gentoo package?



---

archive/issue_comments_542823.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nNo, I don't install SAGE_DOC_SRC. But as I said it points to the installed `SAGE_DOC` which effectively tests nothing. Because the point would be to test the `.rst` files, but all those are installed as `.rst.txt` for some reason. It would make sense to me to add `SAGE_DOC` for `--installed` if we could test those.",
    "created_at": "2022-02-24T23:57:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542823",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:14'>Comment 14:</a>
No, I don't install SAGE_DOC_SRC. But as I said it points to the installed `SAGE_DOC` which effectively tests nothing. Because the point would be to test the `.rst` files, but all those are installed as `.rst.txt` for some reason. It would make sense to me to add `SAGE_DOC` for `--installed` if we could test those.



---

archive/issue_comments_542824.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nAh, I see, in the `_sources` subdirectories",
    "created_at": "2022-02-25T00:07:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542824",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'>Comment 15:</a>
Ah, I see, in the `_sources` subdirectories



---

archive/issue_comments_542825.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nI looked at these files but they do not seem useful",
    "created_at": "2022-02-25T00:19:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542825",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'>Comment 16:</a>
I looked at these files but they do not seem useful



---

archive/issue_comments_542826.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nWhat else do you test in `SAGE_DOC_SRC`? `conf.py` files? Those do not have doctests either. If there is no value in testing a `.rst.txt` in `SAGE_DOC`, I am not sure there is value in testing the corresponding `.rst` in `SAGE_DOC_SRC`.",
    "created_at": "2022-02-25T00:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542826",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:17'>Comment 17:</a>
What else do you test in `SAGE_DOC_SRC`? `conf.py` files? Those do not have doctests either. If there is no value in testing a `.rst.txt` in `SAGE_DOC`, I am not sure there is value in testing the corresponding `.rst` in `SAGE_DOC_SRC`.



---

archive/issue_comments_542827.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nNone of these files have `TESTS` blocks but a few have stuff that does get tested\n\n```\n$ sage -t --long src/doc/en/thematic_tutorials/sandpile.rst\ntoo many failed tests, not using stored timings\nRunning doctests with ID 2022-02-25-13-31-30-ea5e5e11.\nUsing --optional=pip,sage\nFeatures to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,pandoc,pdf2svg,pdftocairo,plantri,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib\nDoctesting 1 file.\nsage -t --long --random-seed=249406959745805344364707629509298952414 src/doc/en/thematic_tutorials/sandpile.rst\n    [705 tests, 12.50 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```",
    "created_at": "2022-02-25T00:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542827",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:18'>Comment 18:</a>
None of these files have `TESTS` blocks but a few have stuff that does get tested

```
$ sage -t --long src/doc/en/thematic_tutorials/sandpile.rst
too many failed tests, not using stored timings
Running doctests with ID 2022-02-25-13-31-30-ea5e5e11.
Using --optional=pip,sage
Features to be detected: 4ti2,benzene,bliss,buckygen,conway_polynomials,csdp,database_cremona_ellcurve,database_cremona_mini_ellcurve,database_jones_numfield,database_knotinfo,dvipng,graphviz,imagemagick,jupymake,kenzo,latte_int,lrslib,mcqd,meataxe,pandoc,pdf2svg,pdftocairo,plantri,pynormaliz,python_igraph,rubiks,sage.combinat,sage.geometry.polyhedron,sage.graphs,sage.groups,sage.plot,sage.rings.number_field,sage.rings.padics,sage.rings.real_double,sage.symbolic,sage_numerical_backends_coin,sagemath_doc_html,sphinx,tdlib
Doctesting 1 file.
sage -t --long --random-seed=249406959745805344364707629509298952414 src/doc/en/thematic_tutorials/sandpile.rst
    [705 tests, 12.50 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```



---

archive/issue_comments_542828.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nYes, my mistake",
    "created_at": "2022-02-25T00:38:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542828",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'>Comment 19:</a>
Yes, my mistake



---

archive/issue_comments_542829.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07f37d099a77db4f99b5d723ec487248eda5ffdf\">07f37d0</a></td><td><code>src/sage/doctest/{control,sources}.py: Handle .rst.txt files like .rst files</code></td></tr></table>\n",
    "created_at": "2022-02-25T00:41:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542829",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:20'>Comment 20:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07f37d099a77db4f99b5d723ec487248eda5ffdf">07f37d0</a></td><td><code>src/sage/doctest/{control,sources}.py: Handle .rst.txt files like .rst files</code></td></tr></table>




---

archive/issue_comments_542830.json:
```json
{
    "body": "Changed commit from **[5dd2dd2](https://github.com/sagemath/sagetrac-mirror/commit/5dd2dd24db56ed7e05e0be39e4a1fdde8ad7a269)** to **[07f37d0](https://github.com/sagemath/sagetrac-mirror/commit/07f37d099a77db4f99b5d723ec487248eda5ffdf)**",
    "created_at": "2022-02-25T00:41:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542830",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5dd2dd2](https://github.com/sagemath/sagetrac-mirror/commit/5dd2dd24db56ed7e05e0be39e4a1fdde8ad7a269)** to **[07f37d0](https://github.com/sagemath/sagetrac-mirror/commit/07f37d099a77db4f99b5d723ec487248eda5ffdf)**



---

archive/issue_comments_542831.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8376142493b17eccb95a8e850e26a6320e7fdff\">e837614</a></td><td><code>src/sage/doctest/control.py: In sage -t --installed, also test SAGE_DOC</code></td></tr></table>\n",
    "created_at": "2022-02-25T00:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542831",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>Comment 21:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8376142493b17eccb95a8e850e26a6320e7fdff">e837614</a></td><td><code>src/sage/doctest/control.py: In sage -t --installed, also test SAGE_DOC</code></td></tr></table>




---

archive/issue_comments_542832.json:
```json
{
    "body": "Changed commit from **[07f37d0](https://github.com/sagemath/sagetrac-mirror/commit/07f37d099a77db4f99b5d723ec487248eda5ffdf)** to **[e837614](https://github.com/sagemath/sagetrac-mirror/commit/e8376142493b17eccb95a8e850e26a6320e7fdff)**",
    "created_at": "2022-02-25T00:44:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542832",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[07f37d0](https://github.com/sagemath/sagetrac-mirror/commit/07f37d099a77db4f99b5d723ec487248eda5ffdf)** to **[e837614](https://github.com/sagemath/sagetrac-mirror/commit/e8376142493b17eccb95a8e850e26a6320e7fdff)**



---

archive/issue_comments_542833.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n-This new option is similar to `--all` but it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. This will be useful for testing modularized distributions.\n+This new option is similar to `--all` but \n+- it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. (This will be useful for testing modularized distributions.)\n+- it tests the installed Sage documentation (specifically, the `.rst.txt` files installed in `html/**/_sources`) instead of `SAGE_DOC_SRC`.\n \n ```\n $ ./sage -tp --installed\n``````\n",
    "created_at": "2022-02-25T00:45:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542833",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
-This new option is similar to `--all` but it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. This will be useful for testing modularized distributions.
+This new option is similar to `--all` but 
+- it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. (This will be useful for testing modularized distributions.)
+- it tests the installed Sage documentation (specifically, the `.rst.txt` files installed in `html/**/_sources`) instead of `SAGE_DOC_SRC`.
 
 ```
 $ ./sage -tp --installed
``````




---

archive/issue_comments_542834.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,7 +20,7 @@\n \n (Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)\n \n-This would also make sense for distribution packaging, which no longer would have to rely on the fallback `SAGE_SRC` -> `SAGE_LIB`.\n+This would also make sense for distribution packaging, which no longer would have to rely on the fallbacks `SAGE_SRC` -> `SAGE_LIB` and `SAGE_DOC_SRC -> SAGE_DOC`.\n \n \n \n``````\n",
    "created_at": "2022-02-25T00:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542834",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,7 +20,7 @@
 
 (Actually, because portions of namespace packages can be installed in separate locations, the variable `sage.env.SAGE_LIB` is no longer meaningful. Instead, we make use of the `__path__` attribute of packages, https://python.readthedocs.io/en/stable/reference/import.html#module-path, which in the case of namespace packages is an iterable.)
 
-This would also make sense for distribution packaging, which no longer would have to rely on the fallback `SAGE_SRC` -> `SAGE_LIB`.
+This would also make sense for distribution packaging, which no longer would have to rely on the fallbacks `SAGE_SRC` -> `SAGE_LIB` and `SAGE_DOC_SRC -> SAGE_DOC`.
 
 
 
``````




---

archive/issue_comments_542835.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1c4ee73ddd1d555b98bf640b0866fa4cfd3e3f4\">f1c4ee7</a></td><td><code>src/sage/doctest/sources.py: Update doctest output</code></td></tr></table>\n",
    "created_at": "2022-02-25T00:52:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542835",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>Comment 24:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1c4ee73ddd1d555b98bf640b0866fa4cfd3e3f4">f1c4ee7</a></td><td><code>src/sage/doctest/sources.py: Update doctest output</code></td></tr></table>




---

archive/issue_comments_542836.json:
```json
{
    "body": "Changed commit from **[e837614](https://github.com/sagemath/sagetrac-mirror/commit/e8376142493b17eccb95a8e850e26a6320e7fdff)** to **[f1c4ee7](https://github.com/sagemath/sagetrac-mirror/commit/f1c4ee73ddd1d555b98bf640b0866fa4cfd3e3f4)**",
    "created_at": "2022-02-25T00:52:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542836",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e837614](https://github.com/sagemath/sagetrac-mirror/commit/e8376142493b17eccb95a8e850e26a6320e7fdff)** to **[f1c4ee7](https://github.com/sagemath/sagetrac-mirror/commit/f1c4ee73ddd1d555b98bf640b0866fa4cfd3e3f4)**



---

archive/issue_comments_542837.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nShould I remove the fallback `SAGE_DOC_SRC` -> `SAGE_DOC`?",
    "created_at": "2022-02-25T01:10:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542837",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'>Comment 25:</a>
Should I remove the fallback `SAGE_DOC_SRC` -> `SAGE_DOC`?



---

archive/issue_comments_542838.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2022-02-25T01:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542838",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **François Bissey**



---

archive/issue_comments_542839.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nReplying to [@mkoeppe](#comment%3A25):\n> Should I remove the fallback `SAGE_DOC_SRC` -> `SAGE_DOC`?\n\nLet's leave it for another clean up ticket. I am already quite happy that we fixed the `.rst.txt` thing in this one. I'll want a clean slate in my brain to think properly of all the consequences when we get to it.\n\nIt was good work on this one, thank you for all the commits :)\n\nIf you have nothing to add, it is a positive review from me.",
    "created_at": "2022-02-25T01:15:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542839",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:26'>Comment 26:</a>
Replying to [@mkoeppe](#comment%3A25):
> Should I remove the fallback `SAGE_DOC_SRC` -> `SAGE_DOC`?

Let's leave it for another clean up ticket. I am already quite happy that we fixed the `.rst.txt` thing in this one. I'll want a clean slate in my brain to think properly of all the consequences when we get to it.

It was good work on this one, thank you for all the commits :)

If you have nothing to add, it is a positive review from me.



---

archive/issue_comments_542840.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1627cc98a1dcb42ca2416b2b958198fabb70f710\">1627cc9</a></td><td><code>src/sage/doctest/control.py: Fall back from --all to --installed explicitly</code></td></tr></table>\n",
    "created_at": "2022-02-25T01:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542840",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:27'>Comment 27:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1627cc98a1dcb42ca2416b2b958198fabb70f710">1627cc9</a></td><td><code>src/sage/doctest/control.py: Fall back from --all to --installed explicitly</code></td></tr></table>




---

archive/issue_comments_542841.json:
```json
{
    "body": "Changed commit from **[f1c4ee7](https://github.com/sagemath/sagetrac-mirror/commit/f1c4ee73ddd1d555b98bf640b0866fa4cfd3e3f4)** to **[1627cc9](https://github.com/sagemath/sagetrac-mirror/commit/1627cc98a1dcb42ca2416b2b958198fabb70f710)**",
    "created_at": "2022-02-25T01:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542841",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f1c4ee7](https://github.com/sagemath/sagetrac-mirror/commit/f1c4ee73ddd1d555b98bf640b0866fa4cfd3e3f4)** to **[1627cc9](https://github.com/sagemath/sagetrac-mirror/commit/1627cc98a1dcb42ca2416b2b958198fabb70f710)**



---

archive/issue_comments_542842.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nHere's another change, just stopping short of actually removing the fallbacks",
    "created_at": "2022-02-25T01:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542842",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'>Comment 28:</a>
Here's another change, just stopping short of actually removing the fallbacks



---

archive/issue_comments_542843.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nBut we can leave this for another ticket if you prefer.",
    "created_at": "2022-02-25T01:21:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542843",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'>Comment 29:</a>
But we can leave this for another ticket if you prefer.



---

archive/issue_comments_542844.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nWell, I'll be going for the school run in 20-25 minutes, I'll try to wrap my head around what this commit is about before going.",
    "created_at": "2022-02-25T01:23:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542844",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:30'>Comment 30:</a>
Well, I'll be going for the school run in 20-25 minutes, I'll try to wrap my head around what this commit is about before going.



---

archive/issue_comments_542845.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e80c13562299dd2eea02d679f9a4e9ea19e028c2\">e80c135</a></td><td><code>src/sage/doctest/control.py: Use elif because options are exclusive</code></td></tr></table>\n",
    "created_at": "2022-02-25T01:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542845",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:31'>Comment 31:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e80c13562299dd2eea02d679f9a4e9ea19e028c2">e80c135</a></td><td><code>src/sage/doctest/control.py: Use elif because options are exclusive</code></td></tr></table>




---

archive/issue_comments_542846.json:
```json
{
    "body": "Changed commit from **[1627cc9](https://github.com/sagemath/sagetrac-mirror/commit/1627cc98a1dcb42ca2416b2b958198fabb70f710)** to **[e80c135](https://github.com/sagemath/sagetrac-mirror/commit/e80c13562299dd2eea02d679f9a4e9ea19e028c2)**",
    "created_at": "2022-02-25T01:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542846",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1627cc9](https://github.com/sagemath/sagetrac-mirror/commit/1627cc98a1dcb42ca2416b2b958198fabb70f710)** to **[e80c135](https://github.com/sagemath/sagetrac-mirror/commit/e80c13562299dd2eea02d679f9a4e9ea19e028c2)**



---

archive/issue_comments_542847.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nGood spotting that last commit. The previous commit is neat, it almost negates the need for having the `--installed` option. I can continue doing `--all` on distro and it will behave as `--installed`. It is only distinctive on vanilla sage where it does something different.\n\nIt feels like I won my first point about making it the default without you really conceding anything. Really well done. The code reorganisation around it is also quite good. It is all more clear about what each part does.",
    "created_at": "2022-02-25T01:40:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542847",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:32'>Comment 32:</a>
Good spotting that last commit. The previous commit is neat, it almost negates the need for having the `--installed` option. I can continue doing `--all` on distro and it will behave as `--installed`. It is only distinctive on vanilla sage where it does something different.

It feels like I won my first point about making it the default without you really conceding anything. Really well done. The code reorganisation around it is also quite good. It is all more clear about what each part does.



---

archive/issue_comments_542848.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nReplying to [@kiwifb](#comment%3A32):\n> The previous commit is neat, it almost negates the need for having the `--installed` option. \n\nYes, for the Sage-on-distro use case, but not for my use case (doctesting a modularized subset distribution like **sagemath-polyhedra**).",
    "created_at": "2022-02-25T04:34:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542848",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'>Comment 33:</a>
Replying to [@kiwifb](#comment%3A32):
> The previous commit is neat, it almost negates the need for having the `--installed` option. 

Yes, for the Sage-on-distro use case, but not for my use case (doctesting a modularized subset distribution like **sagemath-polyhedra**).



---

archive/issue_comments_542849.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n This new option is similar to `--all` but \n-- it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. (This will be useful for testing modularized distributions.)\n+- it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. (This will be useful for testing modularized distributions such as #32601.)\n - it tests the installed Sage documentation (specifically, the `.rst.txt` files installed in `html/**/_sources`) instead of `SAGE_DOC_SRC`.\n \n ```\n``````\n",
    "created_at": "2022-02-27T21:06:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542849",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 This new option is similar to `--all` but 
-- it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. (This will be useful for testing modularized distributions.)
+- it tests all Sage modules installed (in `SAGE_LIB`) instead of `SAGE_SRC`. (This will be useful for testing modularized distributions such as #32601.)
 - it tests the installed Sage documentation (specifically, the `.rst.txt` files installed in `html/**/_sources`) instead of `SAGE_DOC_SRC`.
 
 ```
``````




---

archive/issue_events_426371.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-02-27T21:33:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-426371"
}
```



---

archive/issue_events_426372.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-02-27T21:33:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-426372"
}
```



---

archive/issue_comments_542850.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nThank you!",
    "created_at": "2022-02-28T02:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542850",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'>Comment 36:</a>
Thank you!



---

archive/issue_comments_542851.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nTest fail",
    "created_at": "2022-02-28T22:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542851",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:37'>Comment 37:</a>
Test fail



---

archive/issue_events_426373.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-28T22:27:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-426373"
}
```



---

archive/issue_events_426374.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-28T22:27:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-426374"
}
```



---

archive/issue_comments_542852.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4d2b8ebb98eff0e5931ffc19fa15a5adb463158\">b4d2b8e</a></td><td><code>src/sage/doctest/control.py: Update doctest output</code></td></tr></table>\n",
    "created_at": "2022-02-28T22:57:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542852",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:38'>Comment 38:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4d2b8ebb98eff0e5931ffc19fa15a5adb463158">b4d2b8e</a></td><td><code>src/sage/doctest/control.py: Update doctest output</code></td></tr></table>




---

archive/issue_comments_542853.json:
```json
{
    "body": "Changed commit from **[e80c135](https://github.com/sagemath/sagetrac-mirror/commit/e80c13562299dd2eea02d679f9a4e9ea19e028c2)** to **[b4d2b8e](https://github.com/sagemath/sagetrac-mirror/commit/b4d2b8ebb98eff0e5931ffc19fa15a5adb463158)**",
    "created_at": "2022-02-28T22:57:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542853",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e80c135](https://github.com/sagemath/sagetrac-mirror/commit/e80c13562299dd2eea02d679f9a4e9ea19e028c2)** to **[b4d2b8e](https://github.com/sagemath/sagetrac-mirror/commit/b4d2b8ebb98eff0e5931ffc19fa15a5adb463158)**



---

archive/issue_events_426375.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-28T22:57:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-426375"
}
```



---

archive/issue_events_426376.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-28T22:57:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-426376"
}
```



---

archive/issue_comments_542854.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nApologies, that was very sloppy of me.",
    "created_at": "2022-02-28T23:03:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542854",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:40'>Comment 40:</a>
Apologies, that was very sloppy of me.



---

archive/issue_comments_542855.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nPatchbots have been on strike, hard to see failures.",
    "created_at": "2022-03-01T01:04:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542855",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'>Comment 41:</a>
Patchbots have been on strike, hard to see failures.



---

archive/issue_comments_542856.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nI have now run a full doctest on sage-on-gentoo with `--installed`. Because we have not acted yet on `SAGE_SRC`/`SAGE_LIB`/`SAGE_DOC_SRC` checking with `--all` was just business as usual. But nothing else came up (apart from the current lot of failures in #33141 and new giac issues that I have to inspect more closely).",
    "created_at": "2022-03-01T01:10:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542856",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:42'>Comment 42:</a>
I have now run a full doctest on sage-on-gentoo with `--installed`. Because we have not acted yet on `SAGE_SRC`/`SAGE_LIB`/`SAGE_DOC_SRC` checking with `--all` was just business as usual. But nothing else came up (apart from the current lot of failures in #33141 and new giac issues that I have to inspect more closely).



---

archive/issue_comments_542857.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nWhile it is unrelated to eliminating `SAGE_*` variables, there is something related to testing an installed sage that we need to address in a follow up. pytest doesn't work if you cannot write in the \"rootdir\" of what is tested.\n\nThere are two issues with that. First it may leave unwanted files all over the place. Second it fails miserably if you try to test something that is read-only.\n\n```\n============================= test session starts ==============================\nplatform linux -- Python 3.10.2, pytest-7.0.1, pluggy-1.0.0\nrootdir: /usr\nplugins: hypothesis-6.38.0\ncollected 0 items\n\n=============================== warnings summary ===============================\n../../usr/lib/python3.10/site-packages/_pytest/cacheprovider.py:433\n  /usr/lib/python3.10/site-packages/_pytest/cacheprovider.py:433: PytestCacheWarning: could not create cache path /usr/.pytest_cache/v/cache/nodeids\n    config.cache.set(\"cache/nodeids\", sorted(self.cached_nodeids))\n\n../../usr/lib/python3.10/site-packages/_pytest/stepwise.py:52\n  /usr/lib/python3.10/site-packages/_pytest/stepwise.py:52: PytestCacheWarning: could not create cache path /usr/.pytest_cache/v/cache/stepwise\n    session.config.cache.set(STEPWISE_CACHE_DIR, [])\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n```\n\n\nThere seem to be some option to change where the cache is created (`-o cache_dir=$somelocation`) but I have so far failed to integrate it successfully in `sage-runtest` when `pytest` is called.",
    "created_at": "2022-03-17T09:07:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542857",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:43'>Comment 43:</a>
While it is unrelated to eliminating `SAGE_*` variables, there is something related to testing an installed sage that we need to address in a follow up. pytest doesn't work if you cannot write in the "rootdir" of what is tested.

There are two issues with that. First it may leave unwanted files all over the place. Second it fails miserably if you try to test something that is read-only.

```
============================= test session starts ==============================
platform linux -- Python 3.10.2, pytest-7.0.1, pluggy-1.0.0
rootdir: /usr
plugins: hypothesis-6.38.0
collected 0 items

=============================== warnings summary ===============================
../../usr/lib/python3.10/site-packages/_pytest/cacheprovider.py:433
  /usr/lib/python3.10/site-packages/_pytest/cacheprovider.py:433: PytestCacheWarning: could not create cache path /usr/.pytest_cache/v/cache/nodeids
    config.cache.set("cache/nodeids", sorted(self.cached_nodeids))

../../usr/lib/python3.10/site-packages/_pytest/stepwise.py:52
  /usr/lib/python3.10/site-packages/_pytest/stepwise.py:52: PytestCacheWarning: could not create cache path /usr/.pytest_cache/v/cache/stepwise
    session.config.cache.set(STEPWISE_CACHE_DIR, [])

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
```


There seem to be some option to change where the cache is created (`-o cache_dir=$somelocation`) but I have so far failed to integrate it successfully in `sage-runtest` when `pytest` is called.



---

archive/issue_comments_542858.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nFollow up for `pytest` at #33521.",
    "created_at": "2022-03-17T19:47:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542858",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:45'>Comment 45:</a>
Follow up for `pytest` at #33521.



---

archive/issue_comments_542859.json:
```json
{
    "body": "Changed reviewer from **Fran\u00e7ois Bissey** to **Fran\u00e7ois Bissey, Antonio Rojas**",
    "created_at": "2022-03-17T22:45:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542859",
    "user": "https://github.com/antonio-rojas"
}
```

Changed reviewer from **François Bissey** to **François Bissey, Antonio Rojas**



---

archive/issue_events_426377.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-03-17T22:45:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-426377"
}
```



---

archive/issue_events_426378.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-03-17T22:45:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-426378"
}
```



---

archive/issue_comments_542860.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nWorking fine here.",
    "created_at": "2022-03-17T22:45:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542860",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:46'>Comment 46:</a>
Working fine here.



---

archive/issue_comments_542861.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nThanks all for the review!",
    "created_at": "2022-03-17T22:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542861",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'>Comment 47:</a>
Thanks all for the review!



---

archive/issue_comments_542862.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/sage__t___all_installed](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage__t___all_installed)** to **[b4d2b8e](https://github.com/sagemath/sagetrac-mirror/commit/b4d2b8ebb98eff0e5931ffc19fa15a5adb463158)**",
    "created_at": "2022-03-21T23:34:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33407#issuecomment-542862",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/sage__t___all_installed](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage__t___all_installed)** to **[b4d2b8e](https://github.com/sagemath/sagetrac-mirror/commit/b4d2b8ebb98eff0e5931ffc19fa15a5adb463158)**



---

archive/issue_events_426379.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-03-21T23:34:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-426379"
}
```



---

archive/issue_events_426380.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a6364982871cc63abd0f4e69254fa9561eb8b9cf",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-03-21T23:34:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33407",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33407#event-426380"
}
```
