# Issue 33278: Adapt Macaulay2 interface doctests to Macaulay2 1.19

archive/issues_033041.json:
```json
{
    "assignees": [],
    "body": "We adapt the Macaulay2 interface doctests\nto Macaulay2 1.19.\n\n\n**CC:**  @sheerluck @slel\n\n**Keywords:** Macaulay2\n\n**Branch/Commit:** [4b07b12af965bd44b83bd421b74f28903a00646c](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)\n\n**Reviewer:** Markus Wageringel\n\n**Author:** Andrey Belgorodski\n\nIssue created by migration from https://trac.sagemath.org/ticket/33278\n\n",
    "closed_at": "2022-02-16T23:57:10Z",
    "created_at": "2022-02-02T20:59:51Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interfaces%3A%20optional",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Adapt Macaulay2 interface doctests to Macaulay2 1.19",
    "type": "issue",
    "updated_at": "2022-02-16T23:57:10Z",
    "url": "https://github.com/sagemath/sage/issues/33278",
    "user": "https://github.com/sheerluck"
}
```
We adapt the Macaulay2 interface doctests
to Macaulay2 1.19.


**CC:**  @sheerluck @slel

**Keywords:** Macaulay2

**Branch/Commit:** [4b07b12af965bd44b83bd421b74f28903a00646c](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)

**Reviewer:** Markus Wageringel

**Author:** Andrey Belgorodski

Issue created by migration from https://trac.sagemath.org/ticket/33278





---

archive/issue_events_403318.json:
```json
{
    "actor": "https://github.com/sheerluck",
    "created_at": "2022-02-02T20:59:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-403318"
}
```



---

archive/issue_events_403319.json:
```json
{
    "actor": "https://github.com/sheerluck",
    "created_at": "2022-02-02T20:59:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interfaces%3A%20optional",
    "label_color": "08517b",
    "label_name": "component: interfaces: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-403319"
}
```



---

archive/issue_events_403320.json:
```json
{
    "actor": "https://github.com/sheerluck",
    "created_at": "2022-02-02T20:59:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-403320"
}
```



---

archive/issue_comments_540541.json:
```json
{
    "body": "**Commit:** [81b14e9aa8cc81f35793916f98b78975aa3b9395](https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395)",
    "created_at": "2022-02-02T21:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-540541",
    "user": "https://github.com/slel"
}
```

**Commit:** [81b14e9aa8cc81f35793916f98b78975aa3b9395](https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395)



---

archive/issue_comments_540542.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395\">81b14e9</a></td><td><code>33278: Adapt doctests to Macaulay2 1.19.1.1</code></td></tr></table>\n",
    "created_at": "2022-02-02T21:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-540542",
    "user": "https://github.com/slel"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395">81b14e9</a></td><td><code>33278: Adapt doctests to Macaulay2 1.19.1.1</code></td></tr></table>




---

archive/issue_comments_540543.json:
```json
{
    "body": "**Author:** Andrey Belgorodski",
    "created_at": "2022-02-02T21:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-540543",
    "user": "https://github.com/slel"
}
```

**Author:** Andrey Belgorodski



---

archive/issue_events_403321.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-02-02T21:00:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-403321"
}
```



---

archive/issue_comments_540544.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"Macaulay2\".",
    "created_at": "2022-02-02T21:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-540544",
    "user": "https://github.com/slel"
}
```

**Changing keywords** from "" to "Macaulay2".



---

archive/issue_comments_540545.json:
```json
{
    "body": "**Branch:** [public/33278](https://github.com/sagemath/sagetrac-mirror/tree/public/33278)",
    "created_at": "2022-02-02T21:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-540545",
    "user": "https://github.com/slel"
}
```

**Branch:** [public/33278](https://github.com/sagemath/sagetrac-mirror/tree/public/33278)



---

archive/issue_comments_540546.json:
```json
{
    "body": "<a id='comment:2'></a>\nI am still on Macaulay2 1.18, but also see the following failure. Is it present on your version as well?\n\n```\nsage -t --long --warn-long 68.6 --random-seed=245635289622745159370984825397477042598 src/sage/rings/ideal.py\n**********************************************************************\nFile \"src/sage/rings/ideal.py\", line 1185, in sage.rings.ideal.Ideal_generic._macaulay2_init_\nFailed example:\n    macaulay2(ideal(QQ(5)))                   # optional - macaulay2\nExpected:\n    ideal 1\nGot:\n    doctest:warning\n    ...\n    :\n    UserWarning: Constructing an ideal in Rational Field, which is a field. Did you intend to take numerators first? This warning can be muted by passing the base ring to Ideal() explicitly.\n    ideal 1\n```",
    "created_at": "2022-02-03T08:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-540546",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:2'></a>
I am still on Macaulay2 1.18, but also see the following failure. Is it present on your version as well?

```
sage -t --long --warn-long 68.6 --random-seed=245635289622745159370984825397477042598 src/sage/rings/ideal.py
**********************************************************************
File "src/sage/rings/ideal.py", line 1185, in sage.rings.ideal.Ideal_generic._macaulay2_init_
Failed example:
    macaulay2(ideal(QQ(5)))                   # optional - macaulay2
Expected:
    ideal 1
Got:
    doctest:warning
    ...
    :
    UserWarning: Constructing an ideal in Rational Field, which is a field. Did you intend to take numerators first? This warning can be muted by passing the base ring to Ideal() explicitly.
    ideal 1
```



---

archive/issue_comments_540547.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [@mwageringel](#comment%3A2):\n>Is it present on your version as well?\n\nyes\n\n```\n      File \"<doctest sage.rings.ideal.Ideal_generic._macaulay2_init_[10]>\", line 1, in <module>\n        macaulay2(ideal(QQ(Integer(5))))                   # optional - macaulay2\n      File \"/usr/lib/python3.10/site-packages/sage/rings/ideal.py\", line 197, in Ideal\n        warnings.warn(f'Constructing an ideal in {R}, which is a field.'\n      File \"/usr/lib/python3.10/warnings.py\", line 109, in _showwarnmsg\n        sw(msg.message, msg.category, msg.filename, msg.lineno,\n    :\n    UserWarning: Constructing an ideal in Rational Field, which is a field. Did you intend to take numerators first? This warning can be muted by passing the base ring to Ideal() explicitly.\n    ideal 1\n**********************************************************************\n1 item had failures:\n   1 of  17 in sage.rings.ideal.Ideal_generic._macaulay2_init_\n    0 tests not run because we ran out of time\n    [373 tests, 1 failure, 2.79 s]\n```",
    "created_at": "2022-02-03T09:15:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-540547",
    "user": "https://github.com/sheerluck"
}
```

<a id='comment:3'></a>
Replying to [@mwageringel](#comment%3A2):
>Is it present on your version as well?

yes

```
      File "<doctest sage.rings.ideal.Ideal_generic._macaulay2_init_[10]>", line 1, in <module>
        macaulay2(ideal(QQ(Integer(5))))                   # optional - macaulay2
      File "/usr/lib/python3.10/site-packages/sage/rings/ideal.py", line 197, in Ideal
        warnings.warn(f'Constructing an ideal in {R}, which is a field.'
      File "/usr/lib/python3.10/warnings.py", line 109, in _showwarnmsg
        sw(msg.message, msg.category, msg.filename, msg.lineno,
    :
    UserWarning: Constructing an ideal in Rational Field, which is a field. Did you intend to take numerators first? This warning can be muted by passing the base ring to Ideal() explicitly.
    ideal 1
**********************************************************************
1 item had failures:
   1 of  17 in sage.rings.ideal.Ideal_generic._macaulay2_init_
    0 tests not run because we ran out of time
    [373 tests, 1 failure, 2.79 s]
```



---

archive/issue_comments_540548.json:
```json
{
    "body": "**Changing commit** from \"[81b14e9aa8cc81f35793916f98b78975aa3b9395](https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395)\" to \"[4b07b12af965bd44b83bd421b74f28903a00646c](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)\".",
    "created_at": "2022-02-05T13:29:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-540548",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[81b14e9aa8cc81f35793916f98b78975aa3b9395](https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395)" to "[4b07b12af965bd44b83bd421b74f28903a00646c](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)".



---

archive/issue_comments_540549.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c\">4b07b12</a></td><td><code>33278: make tests compatible with Macaulay2 1.18/1.19</code></td></tr></table>\n",
    "created_at": "2022-02-05T13:29:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-540549",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c">4b07b12</a></td><td><code>33278: make tests compatible with Macaulay2 1.18/1.19</code></td></tr></table>




---

archive/issue_comments_540550.json:
```json
{
    "body": "<a id='comment:5'></a>\nThank you for the doctest fixes. I have resolved the problem in `ideal.py` \u2013 the warning comes from Sage and was introduced by #32320, so can be ignored in this doctest.\n\nMoreover, I have altered two tests in the interface to make them compatible with both 1.18 and 1.19. Then I can enable these tests on the patchbot again.\n\nIf you agree with these changes, we can set this ticket to positive.",
    "created_at": "2022-02-05T13:35:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-540550",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:5'></a>
Thank you for the doctest fixes. I have resolved the problem in `ideal.py` – the warning comes from Sage and was introduced by #32320, so can be ignored in this doctest.

Moreover, I have altered two tests in the interface to make them compatible with both 1.18 and 1.19. Then I can enable these tests on the patchbot again.

If you agree with these changes, we can set this ticket to positive.



---

archive/issue_comments_540551.json:
```json
{
    "body": "**Reviewer:** Markus Wageringel",
    "created_at": "2022-02-05T13:35:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-540551",
    "user": "https://github.com/mwageringel"
}
```

**Reviewer:** Markus Wageringel



---

archive/issue_comments_540552.json:
```json
{
    "body": "<a id='comment:6'></a>\n\n```\nsage -t --long --random-seed=19 interfaces/macaulay2.py\n    2 not tested tests not run\n    0 tests not run because we ran out of time\n    [296 tests, 19.94 s]\n----------------------------------------------------------------------\nAll tests passed!\n\nsage -t --long --random-seed=19 rings/ideal.py\n    0 tests not run because we ran out of time\n    [374 tests, 3.02 s]\n----------------------------------------------------------------------\nAll tests passed!\n```\nThank you, tests are compatible with both 1.18 and 1.19.",
    "created_at": "2022-02-05T15:17:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-540552",
    "user": "https://github.com/sheerluck"
}
```

<a id='comment:6'></a>

```
sage -t --long --random-seed=19 interfaces/macaulay2.py
    2 not tested tests not run
    0 tests not run because we ran out of time
    [296 tests, 19.94 s]
----------------------------------------------------------------------
All tests passed!

sage -t --long --random-seed=19 rings/ideal.py
    0 tests not run because we ran out of time
    [374 tests, 3.02 s]
----------------------------------------------------------------------
All tests passed!
```
Thank you, tests are compatible with both 1.18 and 1.19.



---

archive/issue_events_403322.json:
```json
{
    "actor": "https://github.com/sheerluck",
    "created_at": "2022-02-05T15:17:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-403322"
}
```



---

archive/issue_events_403323.json:
```json
{
    "actor": "https://github.com/sheerluck",
    "created_at": "2022-02-05T15:17:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-403323"
}
```



---

archive/issue_events_403324.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-16T23:57:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-403324"
}
```



---

archive/issue_events_403325.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "01e86774fe856bed5a3c6f42fcf8adc551109556",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-02-16T23:57:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-403325"
}
```



---

archive/issue_comments_540553.json:
```json
{
    "body": "**Changing branch** from \"[public/33278](https://github.com/sagemath/sagetrac-mirror/tree/public/33278)\" to \"[4b07b12af965bd44b83bd421b74f28903a00646c](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)\".",
    "created_at": "2022-02-16T23:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-540553",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/33278](https://github.com/sagemath/sagetrac-mirror/tree/public/33278)" to "[4b07b12af965bd44b83bd421b74f28903a00646c](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)".
