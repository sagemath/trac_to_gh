# Issue 33278: Adapt Macaulay2 interface doctests to Macaulay2 1.19

archive/issues_033041.json:
```json
{
    "body": "We adapt the Macaulay2 interface doctests\nto Macaulay2 1.19.\n\n\n**CC:**  @sheerluck @slel\n\n**Keywords:** Macaulay2\n\n**Branch/Commit:** [4b07b12af965bd44b83bd421b74f28903a00646c](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)\n\n**Reviewer:** Markus Wageringel\n\n**Author:** Andrey Belgorodski\n\nIssue created by migration from https://trac.sagemath.org/ticket/33278\n\n",
    "closed_at": "2022-02-16T23:57:10Z",
    "created_at": "2022-02-02T20:59:51Z",
    "labels": [
        "component: interfaces: optional",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Adapt Macaulay2 interface doctests to Macaulay2 1.19",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33278",
    "user": "https://github.com/sheerluck"
}
```
We adapt the Macaulay2 interface doctests
to Macaulay2 1.19.


**CC:**  @sheerluck @slel

**Keywords:** Macaulay2

**Branch/Commit:** [4b07b12af965bd44b83bd421b74f28903a00646c](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)

**Reviewer:** Markus Wageringel

**Author:** Andrey Belgorodski

Issue created by migration from https://trac.sagemath.org/ticket/33278





---

archive/issue_comments_634467.json:
```json
{
    "body": "**Commit:** [81b14e9aa8cc81f35793916f98b78975aa3b9395](https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395)",
    "created_at": "2022-02-02T21:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33278#issuecomment-634467",
    "user": "https://github.com/slel"
}
```

**Commit:** [81b14e9aa8cc81f35793916f98b78975aa3b9395](https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395)



---

archive/issue_comments_634468.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395\">81b14e9</a></td><td><code>33278: Adapt doctests to Macaulay2 1.19.1.1</code></td></tr></table>\n",
    "created_at": "2022-02-02T21:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33278#issuecomment-634468",
    "user": "https://github.com/slel"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395">81b14e9</a></td><td><code>33278: Adapt doctests to Macaulay2 1.19.1.1</code></td></tr></table>




---

archive/issue_comments_634469.json:
```json
{
    "body": "**Author:** Andrey Belgorodski",
    "created_at": "2022-02-02T21:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33278#issuecomment-634469",
    "user": "https://github.com/slel"
}
```

**Author:** Andrey Belgorodski



---

archive/issue_comments_634470.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2022-02-02T21:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33278#issuecomment-634470",
    "user": "https://github.com/slel"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_634471.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"Macaulay2\".",
    "created_at": "2022-02-02T21:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33278#issuecomment-634471",
    "user": "https://github.com/slel"
}
```

**Changing keywords** from "" to "Macaulay2".



---

archive/issue_comments_634472.json:
```json
{
    "body": "**Branch:** [public/33278](https://github.com/sagemath/sagetrac-mirror/tree/public/33278)",
    "created_at": "2022-02-02T21:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33278#issuecomment-634472",
    "user": "https://github.com/slel"
}
```

**Branch:** [public/33278](https://github.com/sagemath/sagetrac-mirror/tree/public/33278)



---

archive/issue_comments_634473.json:
```json
{
    "body": "<a id='comment:2'></a>\nI am still on Macaulay2 1.18, but also see the following failure. Is it present on your version as well?\n\n```\nsage -t --long --warn-long 68.6 --random-seed=245635289622745159370984825397477042598 src/sage/rings/ideal.py\n**********************************************************************\nFile \"src/sage/rings/ideal.py\", line 1185, in sage.rings.ideal.Ideal_generic._macaulay2_init_\nFailed example:\n    macaulay2(ideal(QQ(5)))                   # optional - macaulay2\nExpected:\n    ideal 1\nGot:\n    doctest:warning\n    ...\n    :\n    UserWarning: Constructing an ideal in Rational Field, which is a field. Did you intend to take numerators first? This warning can be muted by passing the base ring to Ideal() explicitly.\n    ideal 1\n```",
    "created_at": "2022-02-03T08:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33278#issuecomment-634473",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:2'></a>
I am still on Macaulay2 1.18, but also see the following failure. Is it present on your version as well?

```
sage -t --long --warn-long 68.6 --random-seed=245635289622745159370984825397477042598 src/sage/rings/ideal.py
**********************************************************************
File "src/sage/rings/ideal.py", line 1185, in sage.rings.ideal.Ideal_generic._macaulay2_init_
Failed example:
    macaulay2(ideal(QQ(5)))                   # optional - macaulay2
Expected:
    ideal 1
Got:
    doctest:warning
    ...
    :
    UserWarning: Constructing an ideal in Rational Field, which is a field. Did you intend to take numerators first? This warning can be muted by passing the base ring to Ideal() explicitly.
    ideal 1
```



---

archive/issue_comments_634474.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [gh-mwageringel](#comment%3A2):\n>Is it present on your version as well?\n\nyes\n\n```\n      File \"<doctest sage.rings.ideal.Ideal_generic._macaulay2_init_[10]>\", line 1, in <module>\n        macaulay2(ideal(QQ(Integer(5))))                   # optional - macaulay2\n      File \"/usr/lib/python3.10/site-packages/sage/rings/ideal.py\", line 197, in Ideal\n        warnings.warn(f'Constructing an ideal in {R}, which is a field.'\n      File \"/usr/lib/python3.10/warnings.py\", line 109, in _showwarnmsg\n        sw(msg.message, msg.category, msg.filename, msg.lineno,\n    :\n    UserWarning: Constructing an ideal in Rational Field, which is a field. Did you intend to take numerators first? This warning can be muted by passing the base ring to Ideal() explicitly.\n    ideal 1\n**********************************************************************\n1 item had failures:\n   1 of  17 in sage.rings.ideal.Ideal_generic._macaulay2_init_\n    0 tests not run because we ran out of time\n    [373 tests, 1 failure, 2.79 s]\n```",
    "created_at": "2022-02-03T09:15:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33278#issuecomment-634474",
    "user": "https://github.com/sheerluck"
}
```

<a id='comment:3'></a>
Replying to [gh-mwageringel](#comment%3A2):
>Is it present on your version as well?

yes

```
      File "<doctest sage.rings.ideal.Ideal_generic._macaulay2_init_[10]>", line 1, in <module>
        macaulay2(ideal(QQ(Integer(5))))                   # optional - macaulay2
      File "/usr/lib/python3.10/site-packages/sage/rings/ideal.py", line 197, in Ideal
        warnings.warn(f'Constructing an ideal in {R}, which is a field.'
      File "/usr/lib/python3.10/warnings.py", line 109, in _showwarnmsg
        sw(msg.message, msg.category, msg.filename, msg.lineno,
    :
    UserWarning: Constructing an ideal in Rational Field, which is a field. Did you intend to take numerators first? This warning can be muted by passing the base ring to Ideal() explicitly.
    ideal 1
**********************************************************************
1 item had failures:
   1 of  17 in sage.rings.ideal.Ideal_generic._macaulay2_init_
    0 tests not run because we ran out of time
    [373 tests, 1 failure, 2.79 s]
```



---

archive/issue_comments_634475.json:
```json
{
    "body": "**Changing commit** from \"[81b14e9aa8cc81f35793916f98b78975aa3b9395](https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395)\" to \"[4b07b12af965bd44b83bd421b74f28903a00646c](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)\".",
    "created_at": "2022-02-05T13:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33278#issuecomment-634475",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[81b14e9aa8cc81f35793916f98b78975aa3b9395](https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395)" to "[4b07b12af965bd44b83bd421b74f28903a00646c](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)".



---

archive/issue_comments_634476.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c\">4b07b12</a></td><td><code>33278: make tests compatible with Macaulay2 1.18/1.19</code></td></tr></table>\n",
    "created_at": "2022-02-05T13:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33278#issuecomment-634476",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c">4b07b12</a></td><td><code>33278: make tests compatible with Macaulay2 1.18/1.19</code></td></tr></table>




---

archive/issue_comments_634477.json:
```json
{
    "body": "<a id='comment:5'></a>\nThank you for the doctest fixes. I have resolved the problem in `ideal.py` \u2013 the warning comes from Sage and was introduced by #32320, so can be ignored in this doctest.\n\nMoreover, I have altered two tests in the interface to make them compatible with both 1.18 and 1.19. Then I can enable these tests on the patchbot again.\n\nIf you agree with these changes, we can set this ticket to positive.",
    "created_at": "2022-02-05T13:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33278#issuecomment-634477",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:5'></a>
Thank you for the doctest fixes. I have resolved the problem in `ideal.py` – the warning comes from Sage and was introduced by #32320, so can be ignored in this doctest.

Moreover, I have altered two tests in the interface to make them compatible with both 1.18 and 1.19. Then I can enable these tests on the patchbot again.

If you agree with these changes, we can set this ticket to positive.



---

archive/issue_comments_634478.json:
```json
{
    "body": "**Reviewer:** Markus Wageringel",
    "created_at": "2022-02-05T13:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33278#issuecomment-634478",
    "user": "https://github.com/mwageringel"
}
```

**Reviewer:** Markus Wageringel



---

archive/issue_comments_634479.json:
```json
{
    "body": "<a id='comment:6'></a>\n\n```\nsage -t --long --random-seed=19 interfaces/macaulay2.py\n    2 not tested tests not run\n    0 tests not run because we ran out of time\n    [296 tests, 19.94 s]\n----------------------------------------------------------------------\nAll tests passed!\n\nsage -t --long --random-seed=19 rings/ideal.py\n    0 tests not run because we ran out of time\n    [374 tests, 3.02 s]\n----------------------------------------------------------------------\nAll tests passed!\n```\nThank you, tests are compatible with both 1.18 and 1.19.",
    "created_at": "2022-02-05T15:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33278#issuecomment-634479",
    "user": "https://github.com/sheerluck"
}
```

<a id='comment:6'></a>

```
sage -t --long --random-seed=19 interfaces/macaulay2.py
    2 not tested tests not run
    0 tests not run because we ran out of time
    [296 tests, 19.94 s]
----------------------------------------------------------------------
All tests passed!

sage -t --long --random-seed=19 rings/ideal.py
    0 tests not run because we ran out of time
    [374 tests, 3.02 s]
----------------------------------------------------------------------
All tests passed!
```
Thank you, tests are compatible with both 1.18 and 1.19.



---

archive/issue_comments_634480.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2022-02-05T15:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33278#issuecomment-634480",
    "user": "https://github.com/sheerluck"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_098548.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-16T23:57:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33278",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33278#event-98548"
}
```



---

archive/issue_comments_634481.json:
```json
{
    "body": "**Changing branch** from \"[public/33278](https://github.com/sagemath/sagetrac-mirror/tree/public/33278)\" to \"[4b07b12af965bd44b83bd421b74f28903a00646c](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)\".",
    "created_at": "2022-02-16T23:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33278#issuecomment-634481",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/33278](https://github.com/sagemath/sagetrac-mirror/tree/public/33278)" to "[4b07b12af965bd44b83bd421b74f28903a00646c](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)".
