# Issue 33278: Adapt Macaulay2 interface doctests to Macaulay2 1.19

archive/issues_033041.json:
```json
{
    "assignees": [],
    "body": "We adapt the Macaulay2 interface doctests\nto Macaulay2 1.19.\n\n\nCC:  @sheerluck @slel\n\nKeywords: **Macaulay2**\n\nBranch/Commit: **[4b07b12](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)**\n\nReviewer: **Markus Wageringel**\n\nAuthor: **Andrey Belgorodski**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33278_\n\n",
    "closed_at": "2022-02-16T23:57:10Z",
    "created_at": "2022-02-02T20:59:51Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interfaces%3A%20optional",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Adapt Macaulay2 interface doctests to Macaulay2 1.19",
    "type": "issue",
    "updated_at": "2022-02-16T23:57:10Z",
    "url": "https://github.com/sagemath/sage/issues/33278",
    "user": "https://github.com/sheerluck"
}
```
We adapt the Macaulay2 interface doctests
to Macaulay2 1.19.


CC:  @sheerluck @slel

Keywords: **Macaulay2**

Branch/Commit: **[4b07b12](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)**

Reviewer: **Markus Wageringel**

Author: **Andrey Belgorodski**

_Issue created by migration from https://trac.sagemath.org/ticket/33278_





---

archive/issue_events_439425.json:
```json
{
    "actor": "https://github.com/sheerluck",
    "created_at": "2022-02-02T20:59:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-439425"
}
```



---

archive/issue_events_439426.json:
```json
{
    "actor": "https://github.com/sheerluck",
    "created_at": "2022-02-02T20:59:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interfaces%3A%20optional",
    "label_color": "0000ff",
    "label_name": "component: interfaces: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-439426"
}
```



---

archive/issue_events_439427.json:
```json
{
    "actor": "https://github.com/sheerluck",
    "created_at": "2022-02-02T20:59:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-439427"
}
```



---

archive/issue_events_439428.json:
```json
{
    "actor": "https://github.com/sheerluck",
    "created_at": "2022-02-02T20:59:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-439428"
}
```



---

archive/issue_comments_541008.json:
```json
{
    "body": "Commit: **[81b14e9](https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395)**",
    "created_at": "2022-02-02T21:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-541008",
    "user": "https://github.com/slel"
}
```

Commit: **[81b14e9](https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395)**



---

archive/issue_comments_541009.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395\">81b14e9</a></td><td><code>33278: Adapt doctests to Macaulay2 1.19.1.1</code></td></tr></table>\n",
    "created_at": "2022-02-02T21:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-541009",
    "user": "https://github.com/slel"
}
```

<div id="comment:1" align="right">Comment 1</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395">81b14e9</a></td><td><code>33278: Adapt doctests to Macaulay2 1.19.1.1</code></td></tr></table>




---

archive/issue_comments_541010.json:
```json
{
    "body": "Author: **Andrey Belgorodski**",
    "created_at": "2022-02-02T21:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-541010",
    "user": "https://github.com/slel"
}
```

Author: **Andrey Belgorodski**



---

archive/issue_events_439429.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2022-02-02T21:00:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-439429"
}
```



---

archive/issue_comments_541011.json:
```json
{
    "body": "Changed keywords from **** to **Macaulay2**",
    "created_at": "2022-02-02T21:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-541011",
    "user": "https://github.com/slel"
}
```

Changed keywords from **** to **Macaulay2**



---

archive/issue_comments_541012.json:
```json
{
    "body": "Branch: **[public/33278](https://github.com/sagemath/sagetrac-mirror/tree/public/33278)**",
    "created_at": "2022-02-02T21:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-541012",
    "user": "https://github.com/slel"
}
```

Branch: **[public/33278](https://github.com/sagemath/sagetrac-mirror/tree/public/33278)**



---

archive/issue_comments_541013.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nI am still on Macaulay2 1.18, but also see the following failure. Is it present on your version as well?\n\n```\nsage -t --long --warn-long 68.6 --random-seed=245635289622745159370984825397477042598 src/sage/rings/ideal.py\n**********************************************************************\nFile \"src/sage/rings/ideal.py\", line 1185, in sage.rings.ideal.Ideal_generic._macaulay2_init_\nFailed example:\n    macaulay2(ideal(QQ(5)))                   # optional - macaulay2\nExpected:\n    ideal 1\nGot:\n    doctest:warning\n    ...\n    :\n    UserWarning: Constructing an ideal in Rational Field, which is a field. Did you intend to take numerators first? This warning can be muted by passing the base ring to Ideal() explicitly.\n    ideal 1\n```",
    "created_at": "2022-02-03T08:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-541013",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:2" align="right">Comment 2</div>

I am still on Macaulay2 1.18, but also see the following failure. Is it present on your version as well?

```
sage -t --long --warn-long 68.6 --random-seed=245635289622745159370984825397477042598 src/sage/rings/ideal.py
**********************************************************************
File "src/sage/rings/ideal.py", line 1185, in sage.rings.ideal.Ideal_generic._macaulay2_init_
Failed example:
    macaulay2(ideal(QQ(5)))                   # optional - macaulay2
Expected:
    ideal 1
Got:
    doctest:warning
    ...
    :
    UserWarning: Constructing an ideal in Rational Field, which is a field. Did you intend to take numerators first? This warning can be muted by passing the base ring to Ideal() explicitly.
    ideal 1
```



---

archive/issue_comments_541014.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nReplying to [@mwageringel](#comment%3A2):\n>Is it present on your version as well?\n\nyes\n\n```\n      File \"<doctest sage.rings.ideal.Ideal_generic._macaulay2_init_[10]>\", line 1, in <module>\n        macaulay2(ideal(QQ(Integer(5))))                   # optional - macaulay2\n      File \"/usr/lib/python3.10/site-packages/sage/rings/ideal.py\", line 197, in Ideal\n        warnings.warn(f'Constructing an ideal in {R}, which is a field.'\n      File \"/usr/lib/python3.10/warnings.py\", line 109, in _showwarnmsg\n        sw(msg.message, msg.category, msg.filename, msg.lineno,\n    :\n    UserWarning: Constructing an ideal in Rational Field, which is a field. Did you intend to take numerators first? This warning can be muted by passing the base ring to Ideal() explicitly.\n    ideal 1\n**********************************************************************\n1 item had failures:\n   1 of  17 in sage.rings.ideal.Ideal_generic._macaulay2_init_\n    0 tests not run because we ran out of time\n    [373 tests, 1 failure, 2.79 s]\n```",
    "created_at": "2022-02-03T09:15:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-541014",
    "user": "https://github.com/sheerluck"
}
```

<div id="comment:3" align="right">Comment 3</div>

Replying to [@mwageringel](#comment%3A2):
>Is it present on your version as well?

yes

```
      File "<doctest sage.rings.ideal.Ideal_generic._macaulay2_init_[10]>", line 1, in <module>
        macaulay2(ideal(QQ(Integer(5))))                   # optional - macaulay2
      File "/usr/lib/python3.10/site-packages/sage/rings/ideal.py", line 197, in Ideal
        warnings.warn(f'Constructing an ideal in {R}, which is a field.'
      File "/usr/lib/python3.10/warnings.py", line 109, in _showwarnmsg
        sw(msg.message, msg.category, msg.filename, msg.lineno,
    :
    UserWarning: Constructing an ideal in Rational Field, which is a field. Did you intend to take numerators first? This warning can be muted by passing the base ring to Ideal() explicitly.
    ideal 1
**********************************************************************
1 item had failures:
   1 of  17 in sage.rings.ideal.Ideal_generic._macaulay2_init_
    0 tests not run because we ran out of time
    [373 tests, 1 failure, 2.79 s]
```



---

archive/issue_comments_541015.json:
```json
{
    "body": "Changed commit from **[81b14e9](https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395)** to **[4b07b12](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)**",
    "created_at": "2022-02-05T13:29:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-541015",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[81b14e9](https://github.com/sagemath/sagetrac-mirror/commit/81b14e9aa8cc81f35793916f98b78975aa3b9395)** to **[4b07b12](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)**



---

archive/issue_comments_541016.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c\">4b07b12</a></td><td><code>33278: make tests compatible with Macaulay2 1.18/1.19</code></td></tr></table>\n",
    "created_at": "2022-02-05T13:29:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-541016",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4" align="right">Comment 4</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c">4b07b12</a></td><td><code>33278: make tests compatible with Macaulay2 1.18/1.19</code></td></tr></table>




---

archive/issue_comments_541017.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nThank you for the doctest fixes. I have resolved the problem in `ideal.py` \u2013 the warning comes from Sage and was introduced by #32320, so can be ignored in this doctest.\n\nMoreover, I have altered two tests in the interface to make them compatible with both 1.18 and 1.19. Then I can enable these tests on the patchbot again.\n\nIf you agree with these changes, we can set this ticket to positive.",
    "created_at": "2022-02-05T13:35:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-541017",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:5" align="right">Comment 5</div>

Thank you for the doctest fixes. I have resolved the problem in `ideal.py` â€“ the warning comes from Sage and was introduced by #32320, so can be ignored in this doctest.

Moreover, I have altered two tests in the interface to make them compatible with both 1.18 and 1.19. Then I can enable these tests on the patchbot again.

If you agree with these changes, we can set this ticket to positive.



---

archive/issue_comments_541018.json:
```json
{
    "body": "Reviewer: **Markus Wageringel**",
    "created_at": "2022-02-05T13:35:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-541018",
    "user": "https://github.com/mwageringel"
}
```

Reviewer: **Markus Wageringel**



---

archive/issue_comments_541019.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\n\n```\nsage -t --long --random-seed=19 interfaces/macaulay2.py\n    2 not tested tests not run\n    0 tests not run because we ran out of time\n    [296 tests, 19.94 s]\n----------------------------------------------------------------------\nAll tests passed!\n\nsage -t --long --random-seed=19 rings/ideal.py\n    0 tests not run because we ran out of time\n    [374 tests, 3.02 s]\n----------------------------------------------------------------------\nAll tests passed!\n```\nThank you, tests are compatible with both 1.18 and 1.19.",
    "created_at": "2022-02-05T15:17:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-541019",
    "user": "https://github.com/sheerluck"
}
```

<div id="comment:6" align="right">Comment 6</div>


```
sage -t --long --random-seed=19 interfaces/macaulay2.py
    2 not tested tests not run
    0 tests not run because we ran out of time
    [296 tests, 19.94 s]
----------------------------------------------------------------------
All tests passed!

sage -t --long --random-seed=19 rings/ideal.py
    0 tests not run because we ran out of time
    [374 tests, 3.02 s]
----------------------------------------------------------------------
All tests passed!
```
Thank you, tests are compatible with both 1.18 and 1.19.



---

archive/issue_events_439430.json:
```json
{
    "actor": "https://github.com/sheerluck",
    "created_at": "2022-02-05T15:17:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-439430"
}
```



---

archive/issue_events_439431.json:
```json
{
    "actor": "https://github.com/sheerluck",
    "created_at": "2022-02-05T15:17:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-439431"
}
```



---

archive/issue_events_439432.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-16T23:57:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-439432"
}
```



---

archive/issue_events_439433.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "01e86774fe856bed5a3c6f42fcf8adc551109556",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-02-16T23:57:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33278#event-439433"
}
```



---

archive/issue_comments_541020.json:
```json
{
    "body": "Changed branch from **[public/33278](https://github.com/sagemath/sagetrac-mirror/tree/public/33278)** to **[4b07b12](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)**",
    "created_at": "2022-02-16T23:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33278#issuecomment-541020",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/33278](https://github.com/sagemath/sagetrac-mirror/tree/public/33278)** to **[4b07b12](https://github.com/sagemath/sagetrac-mirror/commit/4b07b12af965bd44b83bd421b74f28903a00646c)**
