# Issue 33614: Ideal homogenize is a trap for the unwary

archive/issues_033377.json:
```json
{
    "body": "The usual definition of the \"homogenization\" of an ideal I is the ideal consisting of the homogenizations of the polynomials in I. However, the method `I.homogenize()` doesn't compute this; it computes the ideal generated by the homogenizations **of the given generators of I**, which is in general strictly smaller (and is not what one wants for most applications).\n\nIt would be good to change this method so it computes the mathematically interesting quantity which its name suggests, rather than the essentially useless object it currently computes. (This is not difficult to do -- if we compute a Groebner basis of I w.r.t. a degree-graded order, then the homogenizations of the Groebner basis are generators of the homogenized ideal.)\n\nExample:\n\n```\nsage: R.<x,y,z> = QQ[]\nsage: J = R.ideal(x + y + z^2 - 1, x + y^2 + z - 1, x*y - y*z, z - 1)\nsage: K = J.homogenize('t')\nsage: x in J\nTrue\nsage: x.homogenize('t') in K\nFalse\n```\n\n(PS: The method `projective_closure()` of affine schemes makes a reasonable attempt at computing the mathematically correct notion of ideal homogenization using Groebner bases. Unfortunately it is wrong as well, but only if you go out of your way to break it by using non-default monomial term orders (it does not check that the term order is a graded one). See #33622. The correct solution seems (to me) to be to move the code currently in `projective_closure()` to `homogenize()` and add a check which raises an error if `R.term_order().name()[:3] != 'deg'`.\n\n**Status:** new\n\nIssue created by migration from https://trac.sagemath.org/ticket/33614\n\n",
    "created_at": "2022-03-31T15:52:57Z",
    "labels": [
        "component: commutative algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Ideal homogenize is a trap for the unwary",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33614",
    "user": "https://github.com/loefflerd"
}
```
The usual definition of the "homogenization" of an ideal I is the ideal consisting of the homogenizations of the polynomials in I. However, the method `I.homogenize()` doesn't compute this; it computes the ideal generated by the homogenizations **of the given generators of I**, which is in general strictly smaller (and is not what one wants for most applications).

It would be good to change this method so it computes the mathematically interesting quantity which its name suggests, rather than the essentially useless object it currently computes. (This is not difficult to do -- if we compute a Groebner basis of I w.r.t. a degree-graded order, then the homogenizations of the Groebner basis are generators of the homogenized ideal.)

Example:

```
sage: R.<x,y,z> = QQ[]
sage: J = R.ideal(x + y + z^2 - 1, x + y^2 + z - 1, x*y - y*z, z - 1)
sage: K = J.homogenize('t')
sage: x in J
True
sage: x.homogenize('t') in K
False
```

(PS: The method `projective_closure()` of affine schemes makes a reasonable attempt at computing the mathematically correct notion of ideal homogenization using Groebner bases. Unfortunately it is wrong as well, but only if you go out of your way to break it by using non-default monomial term orders (it does not check that the term order is a graded one). See #33622. The correct solution seems (to me) to be to move the code currently in `projective_closure()` to `homogenize()` and add a check which raises an error if `R.term_order().name()[:3] != 'deg'`.

**Status:** new

Issue created by migration from https://trac.sagemath.org/ticket/33614





---

archive/issue_comments_640514.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n \n ```\n sage: R.<x,y,z> = QQ[]\n-sage: J = R.ideal(x + y + z^2 - 1, x*z - y*z, x + y^2 + z - 1, x*y - y*z, z - 1)\n+sage: J = R.ideal(x + y + z^2 - 1, x + y^2 + z - 1, x*y - y*z, z - 1)\n sage: K = J.homogenize('t')\n sage: x in J\n True\n``````\n",
    "created_at": "2022-03-31T15:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33614",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33614#issuecomment-640514",
    "user": "https://github.com/loefflerd"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 
 ```
 sage: R.<x,y,z> = QQ[]
-sage: J = R.ideal(x + y + z^2 - 1, x*z - y*z, x + y^2 + z - 1, x*y - y*z, z - 1)
+sage: J = R.ideal(x + y + z^2 - 1, x + y^2 + z - 1, x*y - y*z, z - 1)
 sage: K = J.homogenize('t')
 sage: x in J
 True
``````




---

archive/issue_comments_640515.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -13,3 +13,5 @@\n sage: x.homogenize('t') in K\n False\n ```\n+\n+(PS: The method `projective_closure()` of affine schemes makes a reasonable attempt at computing the mathematically correct notion of ideal homogenization. Unfortunately it is wrong as well, but only if you go out of your way to break it by using non-default monomial term orders. See #33622. The correct solution seems (to me) to be to move the code currently in `projective_closure()` to `homogenize()` and add a check which raises an error if `R.term_order().name()[:3] != 'deg'`.\n``````\n",
    "created_at": "2022-04-01T09:54:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33614",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33614#issuecomment-640515",
    "user": "https://github.com/loefflerd"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -13,3 +13,5 @@
 sage: x.homogenize('t') in K
 False
 ```
+
+(PS: The method `projective_closure()` of affine schemes makes a reasonable attempt at computing the mathematically correct notion of ideal homogenization. Unfortunately it is wrong as well, but only if you go out of your way to break it by using non-default monomial term orders. See #33622. The correct solution seems (to me) to be to move the code currently in `projective_closure()` to `homogenize()` and add a check which raises an error if `R.term_order().name()[:3] != 'deg'`.
``````




---

archive/issue_comments_640516.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,4 +14,4 @@\n False\n ```\n \n-(PS: The method `projective_closure()` of affine schemes makes a reasonable attempt at computing the mathematically correct notion of ideal homogenization. Unfortunately it is wrong as well, but only if you go out of your way to break it by using non-default monomial term orders. See #33622. The correct solution seems (to me) to be to move the code currently in `projective_closure()` to `homogenize()` and add a check which raises an error if `R.term_order().name()[:3] != 'deg'`.\n+(PS: The method `projective_closure()` of affine schemes makes a reasonable attempt at computing the mathematically correct notion of ideal homogenization using Groebner bases. Unfortunately it is wrong as well, but only if you go out of your way to break it by using non-default monomial term orders (it does not check that the term order is a graded one). See #33622. The correct solution seems (to me) to be to move the code currently in `projective_closure()` to `homogenize()` and add a check which raises an error if `R.term_order().name()[:3] != 'deg'`.\n``````\n",
    "created_at": "2022-04-01T09:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33614",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33614#issuecomment-640516",
    "user": "https://github.com/loefflerd"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -14,4 +14,4 @@
 False
 ```
 
-(PS: The method `projective_closure()` of affine schemes makes a reasonable attempt at computing the mathematically correct notion of ideal homogenization. Unfortunately it is wrong as well, but only if you go out of your way to break it by using non-default monomial term orders. See #33622. The correct solution seems (to me) to be to move the code currently in `projective_closure()` to `homogenize()` and add a check which raises an error if `R.term_order().name()[:3] != 'deg'`.
+(PS: The method `projective_closure()` of affine schemes makes a reasonable attempt at computing the mathematically correct notion of ideal homogenization using Groebner bases. Unfortunately it is wrong as well, but only if you go out of your way to break it by using non-default monomial term orders (it does not check that the term order is a graded one). See #33622. The correct solution seems (to me) to be to move the code currently in `projective_closure()` to `homogenize()` and add a check which raises an error if `R.term_order().name()[:3] != 'deg'`.
``````




---

archive/issue_events_099215.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33614",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33614#event-99215"
}
```



---

archive/issue_events_099216.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33614",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33614#event-99216"
}
```



---

archive/issue_events_099217.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33614",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33614#event-99217"
}
```
