# Issue 33932: Sets of unhashable elements are broken

archive/issues_033695.json:
```json
{
    "body": "Documentation says \"Sets with unhashable objects work, but with less functionality\". However, this functionality is actually broken in at least two ways.\n\nFirst, Sets of unhashable elements fail to recognize equal elements - for example\n\n```\nS = Set([factor(10),factor(10)])\nprint(S)\n```\n\nprints `Set of elements of [2 * 5, 2 * 5]`, that is the resulting Set here contains two identical elements.\n\n---\n\nSecond, Set skips the first element when it's created from an iterator of unhashable elements:\n\n```\nS = Set( [i] for i in (1..5) )\nprint(list(S))\n```\n\nThis code prints `[[2], [3], [4], [5]]`, that is the first generated element `[1]` is missing.\n\nA patch for the latter issue was proposed at https://ask.sagemath.org/question/62252/?answer=62285#post-id-62285 which however comes with an overhead.\n\nCC:  @tscrim\n\nReviewer: Travis Scrimshaw\n\nDependencies: #23324, #34387\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/33932\n\n",
    "closed_at": "2022-09-01T02:30:35Z",
    "created_at": "2022-05-29T02:43:43Z",
    "labels": [
        "component: misc",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Sets of unhashable elements are broken",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33932",
    "user": "https://github.com/maxale"
}
```
Documentation says "Sets with unhashable objects work, but with less functionality". However, this functionality is actually broken in at least two ways.

First, Sets of unhashable elements fail to recognize equal elements - for example

```
S = Set([factor(10),factor(10)])
print(S)
```

prints `Set of elements of [2 * 5, 2 * 5]`, that is the resulting Set here contains two identical elements.

---

Second, Set skips the first element when it's created from an iterator of unhashable elements:

```
S = Set( [i] for i in (1..5) )
print(list(S))
```

This code prints `[[2], [3], [4], [5]]`, that is the first generated element `[1]` is missing.

A patch for the latter issue was proposed at https://ask.sagemath.org/question/62252/?answer=62285#post-id-62285 which however comes with an overhead.

CC:  @tscrim

Reviewer: Travis Scrimshaw

Dependencies: #23324, #34387

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/33932





---

archive/issue_comments_676708.json:
```json
{
    "body": "<a id='comment:1'></a>See also #23324",
    "created_at": "2022-06-06T21:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33932#issuecomment-676708",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:1'></a>See also #23324



---

archive/issue_comments_676709.json:
```json
{
    "body": "<a id='comment:2'></a>The second example is fixed in #34387",
    "created_at": "2022-08-31T21:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33932#issuecomment-676709",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>The second example is fixed in #34387



---

archive/issue_comments_676710.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#34387\"",
    "created_at": "2022-08-31T21:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33932#issuecomment-676710",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#34387"



---

archive/issue_events_088938.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T22:13:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/33932",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33932#event-88938"
}
```



---

archive/issue_comments_676711.json:
```json
{
    "body": "<a id='comment:3'></a>The first example is a dup of #23324.",
    "created_at": "2022-08-31T22:13:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33932#issuecomment-676711",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>The first example is a dup of #23324.



---

archive/issue_comments_676712.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-31T22:13:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33932#issuecomment-676712",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_676713.json:
```json
{
    "body": "Changing dependencies from \"#34387\" to \"#23324, #34387\"",
    "created_at": "2022-08-31T22:13:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33932#issuecomment-676713",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#34387" to "#23324, #34387"



---

archive/issue_comments_676714.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2022-08-31T23:17:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33932#issuecomment-676714",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_676715.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-08-31T23:17:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33932#issuecomment-676715",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_088939.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-01T02:30:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33932",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33932#event-88939"
}
```



---

archive/issue_comments_676716.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2022-09-01T02:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33932",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33932#issuecomment-676716",
    "user": "https://github.com/mkoeppe"
}
```

Resolution: invalid
