# Issue 33789: sage-dist-helpers (sdh_pip_install): Change default to --build-isolation

archive/issues_033552.json:
```json
{
    "body": "CC:  @jhpalmieri\n\n... hence, provisioning the build environment for each package from the stored wheels. \n\nThis gets us another step closer to using modern Python packaging infrastructure. It will make the build process more robust because it avoids concurrent read and write access to `site-packages`.\n\nIf it fails, it falls back the old behavior (`--no-build-isolation`) and issues a warning.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/33789\n\n",
    "closed_at": "2022-07-09T22:33:41Z",
    "created_at": "2022-05-03T02:14:42Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "sage-dist-helpers (sdh_pip_install): Change default to --build-isolation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33789",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @jhpalmieri

... hence, provisioning the build environment for each package from the stored wheels. 

This gets us another step closer to using modern Python packaging infrastructure. It will make the build process more robust because it avoids concurrent read and write access to `site-packages`.

If it fails, it falls back the old behavior (`--no-build-isolation`) and issues a warning.


Issue created by migration from https://trac.sagemath.org/ticket/33789





---

archive/issue_comments_477008.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-06-29T01:41:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33789",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33789#issuecomment-477008",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_477009.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-06-29T01:48:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33789",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33789#issuecomment-477009",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_477010.json:
```json
{
    "body": "Why does `tomli` require `no-build-isolation`? Also, a comment like \"Our new default\" is going to become dated. Maybe \"The default as of Sage 9.7\" instead?",
    "created_at": "2022-07-06T17:41:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33789",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33789#issuecomment-477010",
    "user": "https://github.com/jhpalmieri"
}
```

Why does `tomli` require `no-build-isolation`? Also, a comment like "Our new default" is going to become dated. Maybe "The default as of Sage 9.7" instead?



---

archive/issue_comments_477011.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-06T17:58:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33789",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33789#issuecomment-477011",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_477012.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-07-06T17:59:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33789",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33789#issuecomment-477012",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_477013.json:
```json
{
    "body": "To clarify, build with isolation is the default in `pip`, right? So it makes sense for us to switch to this, except in cases where necessary. If that's correct, feel free to set to \"positive review\" on my behalf.\n\n(Sage builds, including lots of optional packages, with this branch.)",
    "created_at": "2022-07-08T04:17:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33789",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33789#issuecomment-477013",
    "user": "https://github.com/jhpalmieri"
}
```

To clarify, build with isolation is the default in `pip`, right? So it makes sense for us to switch to this, except in cases where necessary. If that's correct, feel free to set to "positive review" on my behalf.

(Sage builds, including lots of optional packages, with this branch.)



---

archive/issue_comments_477014.json:
```json
{
    "body": "Yes, it's the default in pip.",
    "created_at": "2022-07-08T04:19:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33789",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33789#issuecomment-477014",
    "user": "https://github.com/mkoeppe"
}
```

Yes, it's the default in pip.



---

archive/issue_comments_477015.json:
```json
{
    "body": "Thanks!",
    "created_at": "2022-07-08T04:20:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33789",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33789#issuecomment-477015",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_comments_477016.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-07-08T04:20:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33789",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33789#issuecomment-477016",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_477017.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-07-09T22:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33789",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33789#issuecomment-477017",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_088766.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-09T22:33:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33789",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33789#event-88766"
}
```
