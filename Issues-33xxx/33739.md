# Issue 33739: Migrate gitpod to conda

archive/issues_033502.json:
```json
{
    "assignees": [],
    "body": "The current solution to prebuild the gitpod docker image using github actions does not work nicely, since prebuilds triggered shortly after a new release still use the old gitpod image (and it may take up to a few days until the new image is available). This is especially notable for the `develop` branch, which is the default entry point if you want to start a new branch on gitpod.\n\nIn this ticket, we migrate the gitpod config to use the conda environment, which is now generally stable enough for serious development (e.g. almost all tests pass). As a positive side effect, the gitpod config simplifies and startup times are considerably reduced.\n\nDepends on #33740\nDepends on #33855\n\nCC:  @mkoeppe @dimpase @isuruf\n\nComponent: **build**\n\nAuthor: **Tobias Diez**\n\nBranch/Commit: **[`5748c21`](https://github.com/sagemath/sagetrac-mirror/commit/5748c2157b28ef12311062743d2e830ec7f79a85)**\n\nReviewer: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33739_\n\n",
    "closed_at": "2022-05-29T11:29:09Z",
    "created_at": "2022-04-21T11:13:05Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Migrate gitpod to conda",
    "type": "issue",
    "updated_at": "2022-05-29T11:29:09Z",
    "url": "https://github.com/sagemath/sage/issues/33739",
    "user": "https://github.com/tobiasdiez"
}
```
The current solution to prebuild the gitpod docker image using github actions does not work nicely, since prebuilds triggered shortly after a new release still use the old gitpod image (and it may take up to a few days until the new image is available). This is especially notable for the `develop` branch, which is the default entry point if you want to start a new branch on gitpod.

In this ticket, we migrate the gitpod config to use the conda environment, which is now generally stable enough for serious development (e.g. almost all tests pass). As a positive side effect, the gitpod config simplifies and startup times are considerably reduced.

Depends on #33740
Depends on #33855

CC:  @mkoeppe @dimpase @isuruf

Component: **build**

Author: **Tobias Diez**

Branch/Commit: **[`5748c21`](https://github.com/sagemath/sagetrac-mirror/commit/5748c2157b28ef12311062743d2e830ec7f79a85)**

Reviewer: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/33739_





---

archive/issue_events_459637.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-21T11:13:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459637"
}
```



---

archive/issue_events_459638.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-21T11:13:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459638"
}
```



---

archive/issue_events_459639.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-21T11:13:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459639"
}
```



---

archive/issue_events_459640.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-21T11:13:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459640"
}
```



---

archive/issue_comments_545365.json:
```json
{
    "body": "Changed commit from **[`a1602c9`](https://github.com/sagemath/sagetrac-mirror/commit/a1602c9b06c66281c9221a79d1e4857e48db8ed9)** to **[`9361a33`](https://github.com/sagemath/sagetrac-mirror/commit/9361a337924203c14a4fdffc1194d50f12e2c15f)**",
    "created_at": "2022-04-21T11:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545365",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a1602c9`](https://github.com/sagemath/sagetrac-mirror/commit/a1602c9b06c66281c9221a79d1e4857e48db8ed9)** to **[`9361a33`](https://github.com/sagemath/sagetrac-mirror/commit/9361a337924203c14a4fdffc1194d50f12e2c15f)**



---

archive/issue_comments_545366.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9361a337924203c14a4fdffc1194d50f12e2c15f\"><code>9361a33</code></a></td><td><code>Cleanup</code></td></tr></table>\n",
    "created_at": "2022-04-21T11:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545366",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9361a337924203c14a4fdffc1194d50f12e2c15f"><code>9361a33</code></a></td><td><code>Cleanup</code></td></tr></table>




---

archive/issue_comments_545367.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd2f3d3bc7829f1ccc30f1aa274259d8ab138603\"><code>bd2f3d3</code></a></td><td><code>Remove gitpod docker image build</code></td></tr></table>\n",
    "created_at": "2022-04-21T11:28:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545367",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd2f3d3bc7829f1ccc30f1aa274259d8ab138603"><code>bd2f3d3</code></a></td><td><code>Remove gitpod docker image build</code></td></tr></table>




---

archive/issue_comments_545368.json:
```json
{
    "body": "Changed commit from **[`9361a33`](https://github.com/sagemath/sagetrac-mirror/commit/9361a337924203c14a4fdffc1194d50f12e2c15f)** to **[`bd2f3d3`](https://github.com/sagemath/sagetrac-mirror/commit/bd2f3d3bc7829f1ccc30f1aa274259d8ab138603)**",
    "created_at": "2022-04-21T11:28:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545368",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9361a33`](https://github.com/sagemath/sagetrac-mirror/commit/9361a337924203c14a4fdffc1194d50f12e2c15f)** to **[`bd2f3d3`](https://github.com/sagemath/sagetrac-mirror/commit/bd2f3d3bc7829f1ccc30f1aa274259d8ab138603)**



---

archive/issue_comments_545369.json:
```json
{
    "body": "Dependencies: **#33740**",
    "created_at": "2022-04-21T12:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545369",
    "user": "https://github.com/tobiasdiez"
}
```

Dependencies: **#33740**



---

archive/issue_events_459641.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-04-21T12:11:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459641"
}
```



---

archive/issue_events_459642.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459642"
}
```



---

archive/issue_events_459643.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459643"
}
```



---

archive/issue_comments_545370.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10338a76ce5812db62f4ac72a17e6c6330f1fb8c\"><code>10338a7</code></a></td><td><code>Change ci as well</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0cf7334736fa9ec9fb2af8099722767fea2bdc0d\"><code>0cf7334</code></a></td><td><code>Add sage-setup as install-requires dep</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d2b14978335da5bfd8148266183a8abd5f32cce\"><code>6d2b149</code></a></td><td><code>Use relative paths to not install src package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1dba3ba01d15153940f310a9e1c427f00d4460d6\"><code>1dba3ba</code></a></td><td><code>Maybe thats the correct shebang?</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1b2fbf6b82fb388cbb143453b2eeaa428b604ff\"><code>c1b2fbf</code></a></td><td><code>Revert install_requires change</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad56ba3dab303edea7cdd2d449c69feaaf624beb\"><code>ad56ba3</code></a></td><td><code>Go back to two pip installs for now</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b42f5f51e716d6d01cb491699220ba42c674cd5c\"><code>b42f5f5</code></a></td><td><code>Readd how to use specific python version</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87f360ca7a4703b6c45ad3427363ccf4ae531b2c\"><code>87f360c</code></a></td><td><code>Readd name arg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82fe6a654d7dba6acaa734d91675dca08f62049a\"><code>82fe6a6</code></a></td><td><code>Merge remote-tracking branch 'origin/public/build/conda-dev-env' into public/build/conda_gitpod</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67c74f2bc1ed80e81ceb599e7d5cb64570157378\"><code>67c74f2</code></a></td><td><code>Update based on recent changes in deps</code></td></tr></table>\n",
    "created_at": "2022-05-09T22:54:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545370",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10338a76ce5812db62f4ac72a17e6c6330f1fb8c"><code>10338a7</code></a></td><td><code>Change ci as well</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0cf7334736fa9ec9fb2af8099722767fea2bdc0d"><code>0cf7334</code></a></td><td><code>Add sage-setup as install-requires dep</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d2b14978335da5bfd8148266183a8abd5f32cce"><code>6d2b149</code></a></td><td><code>Use relative paths to not install src package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1dba3ba01d15153940f310a9e1c427f00d4460d6"><code>1dba3ba</code></a></td><td><code>Maybe thats the correct shebang?</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1b2fbf6b82fb388cbb143453b2eeaa428b604ff"><code>c1b2fbf</code></a></td><td><code>Revert install_requires change</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad56ba3dab303edea7cdd2d449c69feaaf624beb"><code>ad56ba3</code></a></td><td><code>Go back to two pip installs for now</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b42f5f51e716d6d01cb491699220ba42c674cd5c"><code>b42f5f5</code></a></td><td><code>Readd how to use specific python version</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87f360ca7a4703b6c45ad3427363ccf4ae531b2c"><code>87f360c</code></a></td><td><code>Readd name arg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82fe6a654d7dba6acaa734d91675dca08f62049a"><code>82fe6a6</code></a></td><td><code>Merge remote-tracking branch 'origin/public/build/conda-dev-env' into public/build/conda_gitpod</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67c74f2bc1ed80e81ceb599e7d5cb64570157378"><code>67c74f2</code></a></td><td><code>Update based on recent changes in deps</code></td></tr></table>




---

archive/issue_comments_545371.json:
```json
{
    "body": "Changed commit from **[`bd2f3d3`](https://github.com/sagemath/sagetrac-mirror/commit/bd2f3d3bc7829f1ccc30f1aa274259d8ab138603)** to **[`67c74f2`](https://github.com/sagemath/sagetrac-mirror/commit/67c74f2bc1ed80e81ceb599e7d5cb64570157378)**",
    "created_at": "2022-05-09T22:54:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545371",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bd2f3d3`](https://github.com/sagemath/sagetrac-mirror/commit/bd2f3d3bc7829f1ccc30f1aa274259d8ab138603)** to **[`67c74f2`](https://github.com/sagemath/sagetrac-mirror/commit/67c74f2bc1ed80e81ceb599e7d5cb64570157378)**



---

archive/issue_comments_545372.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThis is now using the latest version of #33740, so ready for review again.",
    "created_at": "2022-05-10T19:24:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545372",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:7" align="right">comment:7</div>

This is now using the latest version of #33740, so ready for review again.



---

archive/issue_comments_545373.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI don't know if it's a good idea to make this change because it means that gitpod can no longer be used for trying out package updates in the Sage distribution.\n\nToo bad that Gitpod has decided that a project can only have one Gitpod configuration - an obvious design limitation",
    "created_at": "2022-05-10T19:32:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545373",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

I don't know if it's a good idea to make this change because it means that gitpod can no longer be used for trying out package updates in the Sage distribution.

Too bad that Gitpod has decided that a project can only have one Gitpod configuration - an obvious design limitation



---

archive/issue_comments_545374.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nCan you not install the updated package manually using `make xyz`? But yes, there are a few things that might be harder to test in a conda environment. On the other hand, you also got a few new tools at your hand. For example, you can easily install specific versions of dependencies using conda.\n\nI think its also not a good idea to optimize gitpod for package update tickets, they should only be a small subset of all tickets. And for those the conda-based gitpod works more reliable and has shorter startup times.",
    "created_at": "2022-05-11T09:05:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545374",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:9" align="right">comment:9</div>

Can you not install the updated package manually using `make xyz`? But yes, there are a few things that might be harder to test in a conda environment. On the other hand, you also got a few new tools at your hand. For example, you can easily install specific versions of dependencies using conda.

I think its also not a good idea to optimize gitpod for package update tickets, they should only be a small subset of all tickets. And for those the conda-based gitpod works more reliable and has shorter startup times.



---

archive/issue_comments_545375.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@tobiasdiez](#comment%3A9):\n> Can you not install the updated package manually using `make xyz`? \n\nAs the documentation says - \n \"Note that ``make`` is not used at all. All dependencies\n (including all Python packages) are provided by conda. [...] this will invalidate the \n use of any Sage-the-distribution commands such as ``sage -i``. Do not use them.\"",
    "created_at": "2022-05-11T16:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545375",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@tobiasdiez](#comment%3A9):
> Can you not install the updated package manually using `make xyz`? 

As the documentation says - 
 "Note that ``make`` is not used at all. All dependencies
 (including all Python packages) are provided by conda. [...] this will invalidate the 
 use of any Sage-the-distribution commands such as ``sage -i``. Do not use them."



---

archive/issue_comments_545376.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI think the way forward could be to work on the devcontainer ticket (#33671). There can be multiple devcontainers (we could have them for all the platforms that we generate Docker images for). This would be a good replacement for what gitpod right now offers in terms of testing package upgrades.\n\nWhen done, I agree that switching gitpod to conda is a good idea. \n\nAlso consider that both the conda stuff and the gitpod stuff are new -- for onboarding current developers, right now I think it's better if gitpod shows them something that is more familiar.",
    "created_at": "2022-05-11T18:27:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545376",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

I think the way forward could be to work on the devcontainer ticket (#33671). There can be multiple devcontainers (we could have them for all the platforms that we generate Docker images for). This would be a good replacement for what gitpod right now offers in terms of testing package upgrades.

When done, I agree that switching gitpod to conda is a good idea. 

Also consider that both the conda stuff and the gitpod stuff are new -- for onboarding current developers, right now I think it's better if gitpod shows them something that is more familiar.



---

archive/issue_comments_545377.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@mkoeppe](#comment%3A11):\n> I think the way forward could be to work on the devcontainer ticket (#33671). There can be multiple devcontainers (we could have them for all the platforms that we generate Docker images for). This would be a good replacement for what gitpod right now offers in terms of testing package upgrades.\n\nHow would devcontainer help here? Gitpod doesn't support them yet and its not clear yet when they will and in which form; the linked github issue reads more like that the are considering this as a alternative syntax for their gitpod.yml file and not that they would offer prebuilds for all defined devcontainers.",
    "created_at": "2022-05-11T19:37:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545377",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@mkoeppe](#comment%3A11):
> I think the way forward could be to work on the devcontainer ticket (#33671). There can be multiple devcontainers (we could have them for all the platforms that we generate Docker images for). This would be a good replacement for what gitpod right now offers in terms of testing package upgrades.

How would devcontainer help here? Gitpod doesn't support them yet and its not clear yet when they will and in which form; the linked github issue reads more like that the are considering this as a alternative syntax for their gitpod.yml file and not that they would offer prebuilds for all defined devcontainers.



---

archive/issue_comments_545378.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@mkoeppe](#comment%3A10):\n> Replying to [@tobiasdiez](#comment%3A9):\n> > Can you not install the updated package manually using `make xyz`? \n\n> \n> As the documentation says - \n>  \"Note that ``make`` is not used at all. All dependencies\n>  (including all Python packages) are provided by conda. [...] this will invalidate the \n>  use of any Sage-the-distribution commands such as ``sage -i``. Do not use them.\"\n>  \n\nI just run `make pari` in the conda-based gitpod and it worked just fine.",
    "created_at": "2022-05-11T19:38:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545378",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@mkoeppe](#comment%3A10):
> Replying to [@tobiasdiez](#comment%3A9):
> > Can you not install the updated package manually using `make xyz`? 

> 
> As the documentation says - 
>  "Note that ``make`` is not used at all. All dependencies
>  (including all Python packages) are provided by conda. [...] this will invalidate the 
>  use of any Sage-the-distribution commands such as ``sage -i``. Do not use them."
>  

I just run `make pari` in the conda-based gitpod and it worked just fine.



---

archive/issue_comments_545379.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@tobiasdiez](#comment%3A12):\n> Replying to [@mkoeppe](#comment%3A11):\n> > I think the way forward could be to work on the devcontainer ticket (#33671). There can be multiple devcontainers (we could have them for all the platforms that we generate Docker images for). This would be a good replacement for what gitpod right now offers in terms of testing package upgrades.\n\n> \n> How would devcontainer help here?\n\nIf done right, it would make working on package upgrades almost as convenient as using gitpod. Sure, using local compilation (unless we orchestrate devcontainer prebuild), but convenient",
    "created_at": "2022-05-11T19:43:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545379",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@tobiasdiez](#comment%3A12):
> Replying to [@mkoeppe](#comment%3A11):
> > I think the way forward could be to work on the devcontainer ticket (#33671). There can be multiple devcontainers (we could have them for all the platforms that we generate Docker images for). This would be a good replacement for what gitpod right now offers in terms of testing package upgrades.

> 
> How would devcontainer help here?

If done right, it would make working on package upgrades almost as convenient as using gitpod. Sure, using local compilation (unless we orchestrate devcontainer prebuild), but convenient



---

archive/issue_comments_545380.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@mkoeppe](#comment%3A14):\n> Replying to [@tobiasdiez](#comment%3A12):\n> > Replying to [@mkoeppe](#comment%3A11):\n> > > I think the way forward could be to work on the devcontainer ticket (#33671). There can be multiple devcontainers (we could have them for all the platforms that we generate Docker images for). This would be a good replacement for what gitpod right now offers in terms of testing package upgrades.\n\n> > \n> > How would devcontainer help here?\n\n> \n> If done right, it would make working on package upgrades almost as convenient as using gitpod. Sure, using local compilation (unless we orchestrate devcontainer prebuild), but convenient\n> \n\nEven with a conda-based gitpod, you can simply deactivate the conda environment and run `configure && make`. This is pretty much a disposable devcontainer without prebuild.",
    "created_at": "2022-05-11T20:38:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545380",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@mkoeppe](#comment%3A14):
> Replying to [@tobiasdiez](#comment%3A12):
> > Replying to [@mkoeppe](#comment%3A11):
> > > I think the way forward could be to work on the devcontainer ticket (#33671). There can be multiple devcontainers (we could have them for all the platforms that we generate Docker images for). This would be a good replacement for what gitpod right now offers in terms of testing package upgrades.

> > 
> > How would devcontainer help here?

> 
> If done right, it would make working on package upgrades almost as convenient as using gitpod. Sure, using local compilation (unless we orchestrate devcontainer prebuild), but convenient
> 

Even with a conda-based gitpod, you can simply deactivate the conda environment and run `configure && make`. This is pretty much a disposable devcontainer without prebuild.



---

archive/issue_comments_545381.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@tobiasdiez](#comment%3A15):\n> Even with a conda-based gitpod, you can simply deactivate the conda environment and run `configure && make`. \n\nThat's true, of course\n\n> This is pretty much a disposable devcontainer without prebuild.\n\nWell no, because it wouldn't even have a SAGE_LOCAL. So it offers nothing over just building the whole thing locally",
    "created_at": "2022-05-11T20:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545381",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@tobiasdiez](#comment%3A15):
> Even with a conda-based gitpod, you can simply deactivate the conda environment and run `configure && make`. 

That's true, of course

> This is pretty much a disposable devcontainer without prebuild.

Well no, because it wouldn't even have a SAGE_LOCAL. So it offers nothing over just building the whole thing locally



---

archive/issue_comments_545382.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThe advantage would be that you can run whatever commands you want without worrying how it affects the rest of your system / the main installation of sage.\n\nAnyway, I still think that package updates are only a small subset of all tickets and making them temporarily slightly less convenient to test with gitpod is a price worth paying if gitpod gets more useful for the rest of the tickets. Moreover, as you mention, gitpod support is new so developers can easily go back to whatever they were using before to test package updates until further improvements like #33671 are implemented.\n\nIt would be nice if this ticket could be merged before the sagedays so that I don't have to wait 5mins during my talk until the workspace started.",
    "created_at": "2022-05-12T10:04:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545382",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:17" align="right">comment:17</div>

The advantage would be that you can run whatever commands you want without worrying how it affects the rest of your system / the main installation of sage.

Anyway, I still think that package updates are only a small subset of all tickets and making them temporarily slightly less convenient to test with gitpod is a price worth paying if gitpod gets more useful for the rest of the tickets. Moreover, as you mention, gitpod support is new so developers can easily go back to whatever they were using before to test package updates until further improvements like #33671 are implemented.

It would be nice if this ticket could be merged before the sagedays so that I don't have to wait 5mins during my talk until the workspace started.



---

archive/issue_comments_545383.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f56a535d712eb598b207c5d88d3c2f32fbbcafaa\"><code>f56a535</code></a></td><td><code>Install esbonio using conda</code></td></tr></table>\n",
    "created_at": "2022-05-13T22:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545383",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f56a535d712eb598b207c5d88d3c2f32fbbcafaa"><code>f56a535</code></a></td><td><code>Install esbonio using conda</code></td></tr></table>




---

archive/issue_comments_545384.json:
```json
{
    "body": "Changed commit from **[`67c74f2`](https://github.com/sagemath/sagetrac-mirror/commit/67c74f2bc1ed80e81ceb599e7d5cb64570157378)** to **[`f56a535`](https://github.com/sagemath/sagetrac-mirror/commit/f56a535d712eb598b207c5d88d3c2f32fbbcafaa)**",
    "created_at": "2022-05-13T22:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545384",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`67c74f2`](https://github.com/sagemath/sagetrac-mirror/commit/67c74f2bc1ed80e81ceb599e7d5cb64570157378)** to **[`f56a535`](https://github.com/sagemath/sagetrac-mirror/commit/f56a535d712eb598b207c5d88d3c2f32fbbcafaa)**



---

archive/issue_comments_545385.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nIs it really starting up faster?",
    "created_at": "2022-05-15T15:09:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545385",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

Is it really starting up faster?



---

archive/issue_comments_545386.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nRegression: The SageMath jupyter kernel cannot be selected (Command Palette - Create: New Jupyter Notebook, then \"Select Kernel\" in the upper right corner)",
    "created_at": "2022-05-15T15:19:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545386",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

Regression: The SageMath jupyter kernel cannot be selected (Command Palette - Create: New Jupyter Notebook, then "Select Kernel" in the upper right corner)



---

archive/issue_events_459644.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-15T16:54:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459644"
}
```



---

archive/issue_events_459645.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-15T16:54:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459645"
}
```



---

archive/issue_comments_545387.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@mkoeppe](#comment%3A19):\n> Is it really starting up faster?\n\nyes for me its <1 min until the workspace is started.",
    "created_at": "2022-05-15T18:24:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545387",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@mkoeppe](#comment%3A19):
> Is it really starting up faster?

yes for me its <1 min until the workspace is started.



---

archive/issue_comments_545388.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI haven't timed it but here it took much longer than that. I'll use the timer to get more data later.",
    "created_at": "2022-05-15T18:26:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545388",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

I haven't timed it but here it took much longer than that. I'll use the timer to get more data later.



---

archive/issue_comments_545389.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@mkoeppe](#comment%3A20):\n> Regression: The SageMath jupyter kernel cannot be selected (Command Palette - Create: New Jupyter Notebook, then \"Select Kernel\" in the upper right corner)\n\nI can select the correct \"venv\" there, what are you missing?",
    "created_at": "2022-05-15T18:26:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545389",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@mkoeppe](#comment%3A20):
> Regression: The SageMath jupyter kernel cannot be selected (Command Palette - Create: New Jupyter Notebook, then "Select Kernel" in the upper right corner)

I can select the correct "venv" there, what are you missing?



---

archive/issue_comments_545390.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nMissing the \"SageMath\" kernel (not the IPython kernel).",
    "created_at": "2022-05-15T18:34:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545390",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Missing the "SageMath" kernel (not the IPython kernel).



---

archive/issue_comments_545391.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nHow is this supposed to work? I found `src/sage_setup/command/sage_install.py` which installs the jupyter kernel but is only referenced in the `install` hook in `setup.py` and thus not invoked for editable installs. So this doesn't seem specific to the conda or github setup. What do I miss?",
    "created_at": "2022-05-15T19:48:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545391",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:26" align="right">comment:26</div>

How is this supposed to work? I found `src/sage_setup/command/sage_install.py` which installs the jupyter kernel but is only referenced in the `install` hook in `setup.py` and thus not invoked for editable installs. So this doesn't seem specific to the conda or github setup. What do I miss?



---

archive/issue_comments_545392.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI think currently it is working because sagelib is first installed without `--enable-editable` in the image.",
    "created_at": "2022-05-15T19:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545392",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

I think currently it is working because sagelib is first installed without `--enable-editable` in the image.



---

archive/issue_comments_545393.json:
```json
{
    "body": "Changed dependencies from **#33740** to **#33740, #33855**",
    "created_at": "2022-05-15T19:51:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545393",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#33740** to **#33740, #33855**



---

archive/issue_comments_545394.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nLet's add it in #33855.",
    "created_at": "2022-05-15T19:52:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545394",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Let's add it in #33855.



---

archive/issue_comments_545395.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c5903d70aeb330d6667066d5988be35a8a3d3c9\"><code>6c5903d</code></a></td><td><code>src/sage_setup/command/sage_install.py: Split sage_install_and_clean into several classes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40b44a1bbc3191c0c0e220746cc235f0cc04b6b4\"><code>40b44a1</code></a></td><td><code>build/pkgs/sagelib/spkg-install: Do installation of sagemath kernelspec here, not in sage_setup.command.sage_install</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c1dbc5e2f0d2c5e5f41924a4bc3ecda03e30c07\"><code>1c1dbc5</code></a></td><td><code>src/setup.py: No need to use custom sage_install</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/686228720f88da996935ccaf62a1bed71ae435b7\"><code>6862287</code></a></td><td><code>build/pkgs/sagelib/spkg-install: Un-poison SAGE_DOC for installing the kernelspec</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88d769b8c396a61f6e5dff91434cf724766f06ad\"><code>88d769b</code></a></td><td><code>Merge #33855</code></td></tr></table>\n",
    "created_at": "2022-05-16T20:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545395",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c5903d70aeb330d6667066d5988be35a8a3d3c9"><code>6c5903d</code></a></td><td><code>src/sage_setup/command/sage_install.py: Split sage_install_and_clean into several classes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40b44a1bbc3191c0c0e220746cc235f0cc04b6b4"><code>40b44a1</code></a></td><td><code>build/pkgs/sagelib/spkg-install: Do installation of sagemath kernelspec here, not in sage_setup.command.sage_install</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c1dbc5e2f0d2c5e5f41924a4bc3ecda03e30c07"><code>1c1dbc5</code></a></td><td><code>src/setup.py: No need to use custom sage_install</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/686228720f88da996935ccaf62a1bed71ae435b7"><code>6862287</code></a></td><td><code>build/pkgs/sagelib/spkg-install: Un-poison SAGE_DOC for installing the kernelspec</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88d769b8c396a61f6e5dff91434cf724766f06ad"><code>88d769b</code></a></td><td><code>Merge #33855</code></td></tr></table>




---

archive/issue_comments_545396.json:
```json
{
    "body": "Changed commit from **[`f56a535`](https://github.com/sagemath/sagetrac-mirror/commit/f56a535d712eb598b207c5d88d3c2f32fbbcafaa)** to **[`88d769b`](https://github.com/sagemath/sagetrac-mirror/commit/88d769b8c396a61f6e5dff91434cf724766f06ad)**",
    "created_at": "2022-05-16T20:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545396",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f56a535`](https://github.com/sagemath/sagetrac-mirror/commit/f56a535d712eb598b207c5d88d3c2f32fbbcafaa)** to **[`88d769b`](https://github.com/sagemath/sagetrac-mirror/commit/88d769b8c396a61f6e5dff91434cf724766f06ad)**



---

archive/issue_events_459646.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-16T20:45:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459646"
}
```



---

archive/issue_events_459647.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-16T20:45:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459647"
}
```



---

archive/issue_comments_545397.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nOf course by itself #33855 doesn't fix it -- the same line in spkg-install needs to be run manually...",
    "created_at": "2022-05-16T23:13:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545397",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

Of course by itself #33855 doesn't fix it -- the same line in spkg-install needs to be run manually...



---

archive/issue_events_459648.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-16T23:13:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459648"
}
```



---

archive/issue_events_459649.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-16T23:13:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459649"
}
```



---

archive/issue_comments_545398.json:
```json
{
    "body": "Changed commit from **[`88d769b`](https://github.com/sagemath/sagetrac-mirror/commit/88d769b8c396a61f6e5dff91434cf724766f06ad)** to **[`2b9ef5a`](https://github.com/sagemath/sagetrac-mirror/commit/2b9ef5aa985213832f07fe299fa1c2f608fd0d4e)**",
    "created_at": "2022-05-18T16:57:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545398",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`88d769b`](https://github.com/sagemath/sagetrac-mirror/commit/88d769b8c396a61f6e5dff91434cf724766f06ad)** to **[`2b9ef5a`](https://github.com/sagemath/sagetrac-mirror/commit/2b9ef5aa985213832f07fe299fa1c2f608fd0d4e)**



---

archive/issue_comments_545399.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c5903d70aeb330d6667066d5988be35a8a3d3c9\"><code>6c5903d</code></a></td><td><code>src/sage_setup/command/sage_install.py: Split sage_install_and_clean into several classes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4473375c4a90dcb47c6c459cd9117f1571730bc3\"><code>4473375</code></a></td><td><code>src/sage_setup/command/sage_install.py: Add sage_develop, use it in src/setup.py, pkgs/sagemath-standard/setup.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b9ef5aa985213832f07fe299fa1c2f608fd0d4e\"><code>2b9ef5a</code></a></td><td><code>Merge #33855</code></td></tr></table>\n",
    "created_at": "2022-05-18T16:57:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545399",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c5903d70aeb330d6667066d5988be35a8a3d3c9"><code>6c5903d</code></a></td><td><code>src/sage_setup/command/sage_install.py: Split sage_install_and_clean into several classes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4473375c4a90dcb47c6c459cd9117f1571730bc3"><code>4473375</code></a></td><td><code>src/sage_setup/command/sage_install.py: Add sage_develop, use it in src/setup.py, pkgs/sagemath-standard/setup.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b9ef5aa985213832f07fe299fa1c2f608fd0d4e"><code>2b9ef5a</code></a></td><td><code>Merge #33855</code></td></tr></table>




---

archive/issue_comments_545400.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nRolled back the merge and merged the new version of #33855.",
    "created_at": "2022-05-18T16:57:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545400",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

Rolled back the merge and merged the new version of #33855.



---

archive/issue_events_459650.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-18T16:57:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459650"
}
```



---

archive/issue_events_459651.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-18T16:57:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459651"
}
```



---

archive/issue_comments_545401.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nNow the kernel is available",
    "created_at": "2022-05-18T19:16:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545401",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

Now the kernel is available



---

archive/issue_comments_545402.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2022-05-18T19:21:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545402",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_comments_545403.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI haven't tested it thoroughly, but it looks like a nice improvement. It does start faster than the previous solution using our huge prebuilt Docker images.",
    "created_at": "2022-05-18T19:26:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545403",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:37" align="right">comment:37</div>

I haven't tested it thoroughly, but it looks like a nice improvement. It does start faster than the previous solution using our huge prebuilt Docker images.



---

archive/issue_events_459652.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-18T19:26:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459652"
}
```



---

archive/issue_events_459653.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-18T19:26:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459653"
}
```



---

archive/issue_comments_545404.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThanks!",
    "created_at": "2022-05-18T20:04:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545404",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:38" align="right">comment:38</div>

Thanks!



---

archive/issue_comments_545405.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nMerge failure on top of:\n\n054e8ed8d9 Trac #33316: Drop support for GCC < 6.3 in Sage 9.7\n\nfa3b529c41 Trac #25833: Upgrade to MathJax 3 and configure Sage\n\ne2ebf445d0 Trac #33825: Use pytest-xdist to run pytest in parallel\n\nb4009625f3 Trac #33824: make gens and orbits of PermutationGroup immutable\n\naf23627f18 Trac #33809: some pathlib in combinat and groups\n\n955b5d994c Trac #33803: Fixes for the distributions sagemath-objects, sagemath-categories\n\n3e6b41f7d6 Trac #33799: Replace SAGE_TMP in doctests of sage.misc.{persist,ostools}, sage.doctest, sage.repl\n\na3fd7185e3 Trac #33797: sage.misc.temporary_file: Remove use of SAGE_TMP\n\n2ca053010a Trac #33794: modules/fp_graded/morphism.py test failure\n\n7037fba482 Trac #33793: sage.misc.cython: Replace use of SPYX_TMP by a new cached function in sage.misc.temporary_file\n\nd1152701c4 Trac #33787: Installation manual: Update section \"system-wide install\"\n\n0ae55652cf Trac #33782: ci-cygwin: Update python version\n\n833f53d1cc Trac #33779: Remove use of SAGE_TMP in sage.interfaces.latte\n\nb376a8d71c Trac #33771: SSLContext needs an argument\n\ndf168c8112 Trac #33763: Refactor src/sage/docs\n\n9597eafded Trac #33748: make accessing coefficients of finite-field elements easier\n\nf02236f5b6 Trac #33744: Compute bases/circuits in MatroidUnion\n\n8943dc07fc Trac #33743: Faster random tree generator\n\n773ec37bec Trac #33740: Add conda dev environment\n\n5e65c16108 Trac #33734: variety() for polynomial systems over \u211a using msolve\n\n8e7dcca8d3 Trac #33733: allow to use flint for Stirling numbers\n\n6f4efb0bf3 Updated [SageMath](../wiki/SageMath) version to 9.7.beta0\n\n\n\nmerge was not clean: conflicts in .github/workflows/tox.yml",
    "created_at": "2022-05-22T16:33:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545405",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:39" align="right">comment:39</div>

Merge failure on top of:

054e8ed8d9 Trac #33316: Drop support for GCC < 6.3 in Sage 9.7

fa3b529c41 Trac #25833: Upgrade to MathJax 3 and configure Sage

e2ebf445d0 Trac #33825: Use pytest-xdist to run pytest in parallel

b4009625f3 Trac #33824: make gens and orbits of PermutationGroup immutable

af23627f18 Trac #33809: some pathlib in combinat and groups

955b5d994c Trac #33803: Fixes for the distributions sagemath-objects, sagemath-categories

3e6b41f7d6 Trac #33799: Replace SAGE_TMP in doctests of sage.misc.{persist,ostools}, sage.doctest, sage.repl

a3fd7185e3 Trac #33797: sage.misc.temporary_file: Remove use of SAGE_TMP

2ca053010a Trac #33794: modules/fp_graded/morphism.py test failure

7037fba482 Trac #33793: sage.misc.cython: Replace use of SPYX_TMP by a new cached function in sage.misc.temporary_file

d1152701c4 Trac #33787: Installation manual: Update section "system-wide install"

0ae55652cf Trac #33782: ci-cygwin: Update python version

833f53d1cc Trac #33779: Remove use of SAGE_TMP in sage.interfaces.latte

b376a8d71c Trac #33771: SSLContext needs an argument

df168c8112 Trac #33763: Refactor src/sage/docs

9597eafded Trac #33748: make accessing coefficients of finite-field elements easier

f02236f5b6 Trac #33744: Compute bases/circuits in MatroidUnion

8943dc07fc Trac #33743: Faster random tree generator

773ec37bec Trac #33740: Add conda dev environment

5e65c16108 Trac #33734: variety() for polynomial systems over ℚ using msolve

8e7dcca8d3 Trac #33733: allow to use flint for Stirling numbers

6f4efb0bf3 Updated [SageMath](../wiki/SageMath) version to 9.7.beta0



merge was not clean: conflicts in .github/workflows/tox.yml



---

archive/issue_events_459654.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-22T16:33:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459654"
}
```



---

archive/issue_events_459655.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-22T16:33:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459655"
}
```



---

archive/issue_comments_545406.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5748c2157b28ef12311062743d2e830ec7f79a85\"><code>5748c21</code></a></td><td><code>Merge tag '9.7.beta1' into t/33739/public/build/conda_gitpod</code></td></tr></table>\n",
    "created_at": "2022-05-27T19:34:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545406",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5748c2157b28ef12311062743d2e830ec7f79a85"><code>5748c21</code></a></td><td><code>Merge tag '9.7.beta1' into t/33739/public/build/conda_gitpod</code></td></tr></table>




---

archive/issue_comments_545407.json:
```json
{
    "body": "Changed commit from **[`2b9ef5a`](https://github.com/sagemath/sagetrac-mirror/commit/2b9ef5aa985213832f07fe299fa1c2f608fd0d4e)** to **[`5748c21`](https://github.com/sagemath/sagetrac-mirror/commit/5748c2157b28ef12311062743d2e830ec7f79a85)**",
    "created_at": "2022-05-27T19:34:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545407",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2b9ef5a`](https://github.com/sagemath/sagetrac-mirror/commit/2b9ef5aa985213832f07fe299fa1c2f608fd0d4e)** to **[`5748c21`](https://github.com/sagemath/sagetrac-mirror/commit/5748c2157b28ef12311062743d2e830ec7f79a85)**



---

archive/issue_events_459656.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-27T19:34:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459656"
}
```



---

archive/issue_events_459657.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-27T19:34:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459657"
}
```



---

archive/issue_events_459658.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-29T11:29:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459658"
}
```



---

archive/issue_events_459659.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "788281e06183bf1d99553bd0ba2fbc9a8404ebdf",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-05-29T11:29:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33739#event-459659"
}
```



---

archive/issue_comments_545408.json:
```json
{
    "body": "Changed branch from **[public/build/conda_gitpod](https://github.com/sagemath/sagetrac-mirror/tree/public/build/conda_gitpod)** to **[`5748c21`](https://github.com/sagemath/sagetrac-mirror/commit/5748c2157b28ef12311062743d2e830ec7f79a85)**",
    "created_at": "2022-05-29T11:29:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33739",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33739#issuecomment-545408",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/build/conda_gitpod](https://github.com/sagemath/sagetrac-mirror/tree/public/build/conda_gitpod)** to **[`5748c21`](https://github.com/sagemath/sagetrac-mirror/commit/5748c2157b28ef12311062743d2e830ec7f79a85)**
