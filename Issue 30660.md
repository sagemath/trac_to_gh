# Issue 30660: Class Function Partitions

Issue created by migration from https://trac.sagemath.org/ticket/30897

Original creator: @tekaysquared

Original creation time: 2020-11-11 21:36:57

CC:  slelievre

Keywords: partition, symmetric group, charachter

The current output of SymmetricGroup(n).irreducible_characters() is a list of ClassFunction_libgap objects. It would be nice to take one of those class functions and instead of passing in a SymmetricGroup element, pass in a Partition of n since those represent the conjugacy classes. 

This could be done by checking if the input to ClassFunction_libgap objects are Partitions, and if so using the default_representative of the partition.


---

Comment by @tekaysquared created at 2020-11-11 23:47:20

Changing keywords from "partition, symmetric group, charachter" to "partition, symmetric group, character".


---

Comment by tkarn created at 2020-11-12 01:46:45

Set assignee to tkarn.


---

Comment by tkarn created at 2020-11-12 01:53:43

New commits:


---

Comment by tkarn created at 2020-11-12 01:56:42

Changing status from new to needs_review.


---

Comment by embray created at 2021-02-16 12:44:30

Thanks for the patch.  Hopefully someone with the necessary subject-matter background will be along to review it soon.


---

Comment by @darijgr created at 2021-02-17 10:24:34

Please fix the spacing in the doctest:

```
+            sage: h.cycle_type()
+            [2,1]
+			sage: triv(h.cycle_type())
+			1
```

It looks like a space/tab mismatch that might be invisible in your editor.


---

Comment by @darijgr created at 2021-02-17 10:25:37

Also, please check the empty partition [] and [3] too, just in case (ducktyping can often be fickle around such cases).

If this works: LGTM!


---

Comment by @darijgr created at 2021-02-17 10:27:26

Oh, and one more thing: I'm not sure any more, but there might be different implementations of symmetric groups in Sage. Does your code work with all of them? I think `Permutations(n)` is one thing worth trying, as is the Coxeter group of type A (don't remember how it is created).

EDIT: Not saying that it should work with all of them; probably best to document rather than fix.


---

Comment by git created at 2021-02-22 19:57:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tkarn created at 2021-02-22 21:00:13

It turns out that the `CoxeterMatrixGroup` and `Permutations` classes don't have `.irreducible_characters()` method. It might be good to implement it eventually, but for now I just want to start by supporting the `SymmetricGroup` class.


---

Comment by tscrim created at 2021-03-11 05:34:00

Welcome to Sage development. So I have a few other additional comments for you to address:

- Add your (real) name to the author field.
- Instead of using an `assert` statement to check for valid input, you should instead raise a `ValueError` (or more generally whichever type of error is appropriate). This is a general convention we have taken across Sage (there is still some legacy code that does not do this).
- I think the error message would be better as `f"the size of the partition {g.size()} must equal {len(self._group.domain())}"` as it is more concise and direct about what is needed.
- It would be better to move the `if isinstance(self._group, SymmetricGroup):` first. This makes the code more clean and slightly faster for other groups.
- These changes:
  {{{#!diff
             sage: chi([2,1])
-            <BLANKLINE>
             Traceback (most recent call last):
-                ...
+            ...
             TypeError: Cyclic group of order 3 as a permutation group is not a SymmetricGroup. Give an element of Cyclic group of order 3 as a permutation group.
  }}}


---

Comment by git created at 2021-03-12 16:47:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-03-14 16:46:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-03-24 02:04:25

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.


---

Comment by tkarn created at 2021-06-04 19:43:40

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2021-07-19 00:44:56

Setting a new milestone for this ticket based on a cursory review.
