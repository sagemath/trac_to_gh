# Issue 30660: Class Function Partitions

archive/issues_030660.json:
```json
{
    "body": "CC:  @slel\n\nKeywords: partition, symmetric group, charachter\n\nThe current output of SymmetricGroup(n).irreducible_characters() is a list of ClassFunction_libgap objects. It would be nice to take one of those class functions and instead of passing in a SymmetricGroup element, pass in a Partition of n since those represent the conjugacy classes. \n\nThis could be done by checking if the input to ClassFunction_libgap objects are Partitions, and if so using the default_representative of the partition.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30897\n\n",
    "created_at": "2020-11-11T21:36:57Z",
    "labels": [
        "group theory",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Class Function Partitions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30660",
    "user": "@tekaysquared"
}
```
CC:  @slel

Keywords: partition, symmetric group, charachter

The current output of SymmetricGroup(n).irreducible_characters() is a list of ClassFunction_libgap objects. It would be nice to take one of those class functions and instead of passing in a SymmetricGroup element, pass in a Partition of n since those represent the conjugacy classes. 

This could be done by checking if the input to ClassFunction_libgap objects are Partitions, and if so using the default_representative of the partition.

Issue created by migration from https://trac.sagemath.org/ticket/30897





---

archive/issue_comments_438226.json:
```json
{
    "body": "Changing keywords from \"partition, symmetric group, charachter\" to \"partition, symmetric group, character\".",
    "created_at": "2020-11-11T23:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30660#issuecomment-438226",
    "user": "@tekaysquared"
}
```

Changing keywords from "partition, symmetric group, charachter" to "partition, symmetric group, character".



---

archive/issue_comments_438227.json:
```json
{
    "body": "Set assignee to @trevorkarn.",
    "created_at": "2020-11-12T01:46:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30660#issuecomment-438227",
    "user": "@trevorkarn"
}
```

Set assignee to @trevorkarn.



---

archive/issue_comments_438228.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-11-12T01:53:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30660#issuecomment-438228",
    "user": "@trevorkarn"
}
```

New commits:



---

archive/issue_comments_438229.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-12T01:56:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30660#issuecomment-438229",
    "user": "@trevorkarn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_438230.json:
```json
{
    "body": "Thanks for the patch.  Hopefully someone with the necessary subject-matter background will be along to review it soon.",
    "created_at": "2021-02-16T12:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30660#issuecomment-438230",
    "user": "@embray"
}
```

Thanks for the patch.  Hopefully someone with the necessary subject-matter background will be along to review it soon.



---

archive/issue_comments_438231.json:
```json
{
    "body": "Please fix the spacing in the doctest:\n\n```\n+            sage: h.cycle_type()\n+            [2,1]\n+\t\t\tsage: triv(h.cycle_type())\n+\t\t\t1\n```\n\nIt looks like a space/tab mismatch that might be invisible in your editor.",
    "created_at": "2021-02-17T10:24:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30660#issuecomment-438231",
    "user": "@darijgr"
}
```

Please fix the spacing in the doctest:

```
+            sage: h.cycle_type()
+            [2,1]
+			sage: triv(h.cycle_type())
+			1
```

It looks like a space/tab mismatch that might be invisible in your editor.



---

archive/issue_comments_438232.json:
```json
{
    "body": "Also, please check the empty partition [] and [3] too, just in case (ducktyping can often be fickle around such cases).\n\nIf this works: LGTM!",
    "created_at": "2021-02-17T10:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30660#issuecomment-438232",
    "user": "@darijgr"
}
```

Also, please check the empty partition [] and [3] too, just in case (ducktyping can often be fickle around such cases).

If this works: LGTM!



---

archive/issue_comments_438233.json:
```json
{
    "body": "Oh, and one more thing: I'm not sure any more, but there might be different implementations of symmetric groups in Sage. Does your code work with all of them? I think `Permutations(n)` is one thing worth trying, as is the Coxeter group of type A (don't remember how it is created).\n\nEDIT: Not saying that it should work with all of them; probably best to document rather than fix.",
    "created_at": "2021-02-17T10:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30660#issuecomment-438233",
    "user": "@darijgr"
}
```

Oh, and one more thing: I'm not sure any more, but there might be different implementations of symmetric groups in Sage. Does your code work with all of them? I think `Permutations(n)` is one thing worth trying, as is the Coxeter group of type A (don't remember how it is created).

EDIT: Not saying that it should work with all of them; probably best to document rather than fix.



---

archive/issue_comments_438234.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-22T19:57:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30660#issuecomment-438234",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_438235.json:
```json
{
    "body": "It turns out that the `CoxeterMatrixGroup` and `Permutations` classes don't have `.irreducible_characters()` method. It might be good to implement it eventually, but for now I just want to start by supporting the `SymmetricGroup` class.",
    "created_at": "2021-02-22T21:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30660#issuecomment-438235",
    "user": "@trevorkarn"
}
```

It turns out that the `CoxeterMatrixGroup` and `Permutations` classes don't have `.irreducible_characters()` method. It might be good to implement it eventually, but for now I just want to start by supporting the `SymmetricGroup` class.



---

archive/issue_comments_438236.json:
```json
{
    "body": "Welcome to Sage development. So I have a few other additional comments for you to address:\n\n- Add your (real) name to the author field.\n- Instead of using an `assert` statement to check for valid input, you should instead raise a `ValueError` (or more generally whichever type of error is appropriate). This is a general convention we have taken across Sage (there is still some legacy code that does not do this).\n- I think the error message would be better as `f\"the size of the partition {g.size()} must equal {len(self._group.domain())}\"` as it is more concise and direct about what is needed.\n- It would be better to move the `if isinstance(self._group, SymmetricGroup):` first. This makes the code more clean and slightly faster for other groups.\n- These changes:\n  {{{#!diff\n             sage: chi([2,1])\n-            <BLANKLINE>\n             Traceback (most recent call last):\n-                ...\n+            ...\n             TypeError: Cyclic group of order 3 as a permutation group is not a SymmetricGroup. Give an element of Cyclic group of order 3 as a permutation group.\n  }}}",
    "created_at": "2021-03-11T05:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30660#issuecomment-438236",
    "user": "@tscrim"
}
```

Welcome to Sage development. So I have a few other additional comments for you to address:

- Add your (real) name to the author field.
- Instead of using an `assert` statement to check for valid input, you should instead raise a `ValueError` (or more generally whichever type of error is appropriate). This is a general convention we have taken across Sage (there is still some legacy code that does not do this).
- I think the error message would be better as `f"the size of the partition {g.size()} must equal {len(self._group.domain())}"` as it is more concise and direct about what is needed.
- It would be better to move the `if isinstance(self._group, SymmetricGroup):` first. This makes the code more clean and slightly faster for other groups.
- These changes:
  {{{#!diff
             sage: chi([2,1])
-            <BLANKLINE>
             Traceback (most recent call last):
-                ...
+            ...
             TypeError: Cyclic group of order 3 as a permutation group is not a SymmetricGroup. Give an element of Cyclic group of order 3 as a permutation group.
  }}}



---

archive/issue_comments_438237.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-12T16:47:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30660#issuecomment-438237",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_438238.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-14T16:46:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30660#issuecomment-438238",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_438239.json:
```json
{
    "body": "Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30660#issuecomment-438239",
    "user": "@mkoeppe"
}
```

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_438240.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-06-04T19:43:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30660#issuecomment-438240",
    "user": "@trevorkarn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_438241.json:
```json
{
    "body": "Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30660#issuecomment-438241",
    "user": "@mkoeppe"
}
```

Setting a new milestone for this ticket based on a cursory review.
