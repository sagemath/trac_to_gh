# Issue 34041: RealSet: Add option cache=False

Issue created by migration from https://trac.sagemath.org/ticket/34278

Original creator: mkoeppe

Original creation time: 2022-08-04 18:56:00

CC:  yzh tscrim

When receiving `cache=False`, this would use an implementation class that does not inherit from `UniqueRepresentation` to avoid persistence in memory.



---

Comment by mkoeppe created at 2022-08-05 19:01:53

here's a beginning (untested)
----
Last 10 new commits:


---

Comment by git created at 2022-08-07 00:25:21

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2022-08-07 00:25:36

Rebased on new version of #34277


---

Comment by git created at 2022-08-07 00:33:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-08-07 00:35:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-08-07 00:51:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-08-07 00:56:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-08-07 01:38:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2022-08-07 07:55:07

Can you give some more explanation why you want to do this? While this should not be an issue with coercion (equal-but-not-identical-parents are often a source of frustration there), it increases the overall code complexity.


---

Comment by mkoeppe created at 2022-08-07 18:12:56

When algorithms create lots of `RealSet`s as intermediate objects, we don't want them to persist in memory for the remainder of the session


---

Comment by mkoeppe created at 2022-08-07 18:21:47

But now I realize the premise is wrong - `CachedRepresentation`/`UniqueRepresentation` use `WeakCachedFunction`, so it does not actually pin the objects into memory


---

Comment by tscrim created at 2022-08-07 23:46:53

Indeed, it is a weak cache. However, if this needs to be done in a tight loop, the extra overhead of checking and maintaining the cache might matter. To the profiler!
