# Issue 32968: prompt_toolkit 3.x vs. Tk graphics

Issue created by migration from https://trac.sagemath.org/ticket/33205

Original creator: mkoeppe

Original creation time: 2022-01-19 22:38:28

CC:  culler dunfield

From Marc Culler:

`prompt_toolbox` with versions >= 3.0.0 completely breaks Tk graphics.  Symptoms include very high CPU usage when doing essentially nothing as well as crashes.  The older `prompt_toolbox` 2.0.10 works fine.  The change from 2.0.10 to 3.0.0 was a major rewrite which replaced the custom event loops that they had written with `asyncio`.

The current version of `IPython` that ships with Sage is perfectly happy using `prompt_toolbox` 2.0.10.  We know of no downside to reverting to that version.  The upside is that Tk works normally, which is very important to SnapPy


---

Comment by mkoeppe created at 2022-01-19 22:43:37

If 2.0.10 works fine, we should at least relax the version constraint in `build/pkgs/prompt_toolkit/install-requires.txt`.


---

Comment by dunfield created at 2022-01-20 00:39:55

Updated description to reflect that this is macOS specific.
