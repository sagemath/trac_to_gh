# Issue 15236: Minor fixes to symmetric functions

archive/issues_015236.json:
```json
{
    "body": "CC:  tscrim zabrocki sage-combinat simonking nthiery\n\nKeywords: sage-combinat, symmetric functions\n\n- Some doc fixed (mostly ReST errors, mostly due to myself).\n\n- `is_integral_domain` added fwiw (maybe we can have the fraction field eventually).\n\n- Some deprecated stuff is now lazy-imported rather than imported.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15473\n\n",
    "created_at": "2013-11-30T18:56:26Z",
    "labels": [
        "combinatorics",
        "minor",
        "bug"
    ],
    "title": "Minor fixes to symmetric functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15236",
    "user": "darij"
}
```
CC:  tscrim zabrocki sage-combinat simonking nthiery

Keywords: sage-combinat, symmetric functions

- Some doc fixed (mostly ReST errors, mostly due to myself).

- `is_integral_domain` added fwiw (maybe we can have the fraction field eventually).

- Some deprecated stuff is now lazy-imported rather than imported.

Issue created by migration from https://trac.sagemath.org/ticket/15473





---

archive/issue_comments_195817.json:
```json
{
    "body": "So, here's the file... but... it fails doctests for no reason whatsoever!\n\n```\n**********************************************************************\nFile \"devel/sage-main/sage/combinat/sf/sfa.py\", line 875, in sage.combinat.sf.sfa.SymmetricFunctionsBases.ParentMethods.corresponding_basis_over\nFailed example:\n    s.corresponding_basis_over(Integers(13))\nException raised:\n    Traceback (most recent call last):\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 479, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 838, in execute\n        exec compiled in globs\n      File \"<doctest sage.combinat.sf.sfa.SymmetricFunctionsBases.ParentMethods.corresponding_basis_over[5]>\", line 1, in <module>\n        s.corresponding_basis_over(Integers(Integer(13)))\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sfa.py\", line 937, in corresponding_basis_over\n        return attrcall(self._basis)(SymmetricFunctions(R))\n      File \"classcall_metaclass.pyx\", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)\n      File \"cachefunc.pyx\", line 1030, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\", line 1005, in __classcall__\n        instance = typecall(cls, *args, **options)\n      File \"classcall_metaclass.pyx\", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.py\", line 764, in __init__\n        Parent.__init__(self, category = GradedHopfAlgebras(R).WithRealizations())\n      File \"parent.pyx\", line 368, in sage.structure.parent.Parent.__init__ (sage/structure/parent.c:4392)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.py\", line 1225, in __init_extra__\n        basis1 = getattr(self, basis1_name)()\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.py\", line 812, in powersum\n        return powersum.SymmetricFunctionAlgebra_power(self)\n      File \"classcall_metaclass.pyx\", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)\n      File \"cachefunc.pyx\", line 1030, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\", line 1005, in __classcall__\n        instance = typecall(cls, *args, **options)\n      File \"classcall_metaclass.pyx\", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/powersum.py\", line 41, in __init__\n        classical.SymmetricFunctionAlgebra_classical.__init__(self, Sym, \"powersum\", 'p')\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sfa.py\", line 1025, in __init__\n        category = SymmetricFunctionsBases(Sym),\n      File \"classcall_metaclass.pyx\", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 464, in __classcall__\n        return super(Category, cls).__classcall__(cls, *args, **options)\n      File \"cachefunc.pyx\", line 1030, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\", line 1005, in __classcall__\n        instance = typecall(cls, *args, **options)\n      File \"classcall_metaclass.pyx\", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sfa.py\", line 477, in __init__\n        Category_realization_of_parent.__init__(self, base)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/realizations.py\", line 147, in __init__\n        Category_over_base.__init__(self, parent_with_realization)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category_types.py\", line 204, in __init__\n        Category.__init__(self, name)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 499, in __init__\n        (self.__class__, self.subcategory_class, ),\n      File \"lazy_attribute.pyx\", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 1277, in subcategory_class\n        cache=False, picklable=False)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 2064, in _make_named_class\n        cache=cache, **options)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 1233, in _make_named_class\n        tuple(getattr(cat,name) for cat in self._super_categories_for_classes),\n      File \"lazy_attribute.pyx\", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 1059, in _super_categories_for_classes\n        self._all_super_categories\n      File \"lazy_attribute.pyx\", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 885, in _all_super_categories\n        for cat in self._super_categories] +\n      File \"lazy_attribute.pyx\", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 1034, in _super_categories\n        return sorted(Category._flatten_categories(self.super_categories()), key = category_sort_key, reverse=True)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sfa.py\", line 514, in super_categories\n        return [GradedHopfAlgebrasWithBasis(self.base().base_ring()),\n      File \"classcall_metaclass.pyx\", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 464, in __classcall__\n        return super(Category, cls).__classcall__(cls, *args, **options)\n      File \"cachefunc.pyx\", line 1030, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\", line 1005, in __classcall__\n        instance = typecall(cls, *args, **options)\n      File \"classcall_metaclass.pyx\", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category_types.py\", line 327, in __init__\n        Category_over_base.__init__(self, base, name)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category_types.py\", line 204, in __init__\n        Category.__init__(self, name)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 499, in __init__\n        (self.__class__, self.subcategory_class, ),\n      File \"lazy_attribute.pyx\", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 1277, in subcategory_class\n        cache=False, picklable=False)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 2064, in _make_named_class\n        cache=cache, **options)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 1233, in _make_named_class\n        tuple(getattr(cat,name) for cat in self._super_categories_for_classes),\n      File \"lazy_attribute.pyx\", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 1059, in _super_categories_for_classes\n        self._all_super_categories\n      File \"lazy_attribute.pyx\", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 885, in _all_super_categories\n        for cat in self._super_categories] +\n      File \"lazy_attribute.pyx\", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 1034, in _super_categories\n        return sorted(Category._flatten_categories(self.super_categories()), key = category_sort_key, reverse=True)\n      File \"cachefunc.pyx\", line 1775, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (sage/misc/cachefunc.c:9548)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/graded_hopf_algebras_with_basis.py\", line 42, in super_categories\n        return [GradedBialgebrasWithBasis(R), GradedHopfAlgebras(R), HopfAlgebrasWithBasis(R)]\n      File \"classcall_metaclass.pyx\", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 464, in __classcall__\n        return super(Category, cls).__classcall__(cls, *args, **options)\n      File \"cachefunc.pyx\", line 1030, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\", line 1005, in __classcall__\n        instance = typecall(cls, *args, **options)\n      File \"classcall_metaclass.pyx\", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category_types.py\", line 327, in __init__\n        Category_over_base.__init__(self, base, name)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category_types.py\", line 204, in __init__\n        Category.__init__(self, name)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 499, in __init__\n        (self.__class__, self.subcategory_class, ),\n      File \"lazy_attribute.pyx\", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 1277, in subcategory_class\n        cache=False, picklable=False)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 2064, in _make_named_class\n        cache=cache, **options)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 1233, in _make_named_class\n        tuple(getattr(cat,name) for cat in self._super_categories_for_classes),\n      File \"lazy_attribute.pyx\", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 1059, in _super_categories_for_classes\n        self._all_super_categories\n      File \"lazy_attribute.pyx\", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 885, in _all_super_categories\n        for cat in self._super_categories] +\n      File \"lazy_attribute.pyx\", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 1034, in _super_categories\n        return sorted(Category._flatten_categories(self.super_categories()), key = category_sort_key, reverse=True)\n      File \"cachefunc.pyx\", line 1775, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (sage/misc/cachefunc.c:9548)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/graded_bialgebras_with_basis.py\", line 40, in super_categories\n        return [GradedAlgebrasWithBasis(R), GradedCoalgebrasWithBasis(R), GradedBialgebras(R)]\n      File \"classcall_metaclass.pyx\", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 464, in __classcall__\n        return super(Category, cls).__classcall__(cls, *args, **options)\n      File \"cachefunc.pyx\", line 1030, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\", line 1005, in __classcall__\n        instance = typecall(cls, *args, **options)\n      File \"classcall_metaclass.pyx\", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category_types.py\", line 327, in __init__\n        Category_over_base.__init__(self, base, name)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category_types.py\", line 204, in __init__\n        Category.__init__(self, name)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 499, in __init__\n        (self.__class__, self.subcategory_class, ),\n      File \"lazy_attribute.pyx\", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 1277, in subcategory_class\n        cache=False, picklable=False)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 2064, in _make_named_class\n        cache=cache, **options)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py\", line 1235, in _make_named_class\n        reduction = reduction, cache = cache)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/dynamic_class.py\", line 316, in dynamic_class\n        return dynamic_class_internal.f(name, bases, cls, reduction, doccls, prepend_cls_bases)\n      File \"/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/dynamic_class.py\", line 411, in dynamic_class_internal\n        return metaclass(name, bases, methods)\n    TypeError: Cannot create a consistent method resolution\n    order (MRO) for bases ModulesWithBasis.subcategory_class, Modules.subcategory_class, GradedModules.subcategory_class\n**********************************************************************\n```\n\nThis happens only because of the doctest\n\n```\n                sage: s = SymmetricFunctions(Zmod(14)).s()\n                sage: s.is_integral_domain()\n                False\n```\n\nbefore it. Both doctests work fine in isolation, but it seems that the `Zmod(14)` one corrupts the MRO for the `Integers(13)` one.\n\nWhat the fuck???",
    "created_at": "2013-11-30T19:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195817",
    "user": "darij"
}
```

So, here's the file... but... it fails doctests for no reason whatsoever!

```
**********************************************************************
File "devel/sage-main/sage/combinat/sf/sfa.py", line 875, in sage.combinat.sf.sfa.SymmetricFunctionsBases.ParentMethods.corresponding_basis_over
Failed example:
    s.corresponding_basis_over(Integers(13))
Exception raised:
    Traceback (most recent call last):
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 479, in _run
        self.execute(example, compiled, test.globs)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 838, in execute
        exec compiled in globs
      File "<doctest sage.combinat.sf.sfa.SymmetricFunctionsBases.ParentMethods.corresponding_basis_over[5]>", line 1, in <module>
        s.corresponding_basis_over(Integers(Integer(13)))
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sfa.py", line 937, in corresponding_basis_over
        return attrcall(self._basis)(SymmetricFunctions(R))
      File "classcall_metaclass.pyx", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)
      File "cachefunc.pyx", line 1030, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 1005, in __classcall__
        instance = typecall(cls, *args, **options)
      File "classcall_metaclass.pyx", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.py", line 764, in __init__
        Parent.__init__(self, category = GradedHopfAlgebras(R).WithRealizations())
      File "parent.pyx", line 368, in sage.structure.parent.Parent.__init__ (sage/structure/parent.c:4392)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.py", line 1225, in __init_extra__
        basis1 = getattr(self, basis1_name)()
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.py", line 812, in powersum
        return powersum.SymmetricFunctionAlgebra_power(self)
      File "classcall_metaclass.pyx", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)
      File "cachefunc.pyx", line 1030, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 1005, in __classcall__
        instance = typecall(cls, *args, **options)
      File "classcall_metaclass.pyx", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/powersum.py", line 41, in __init__
        classical.SymmetricFunctionAlgebra_classical.__init__(self, Sym, "powersum", 'p')
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sfa.py", line 1025, in __init__
        category = SymmetricFunctionsBases(Sym),
      File "classcall_metaclass.pyx", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 464, in __classcall__
        return super(Category, cls).__classcall__(cls, *args, **options)
      File "cachefunc.pyx", line 1030, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 1005, in __classcall__
        instance = typecall(cls, *args, **options)
      File "classcall_metaclass.pyx", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sfa.py", line 477, in __init__
        Category_realization_of_parent.__init__(self, base)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/realizations.py", line 147, in __init__
        Category_over_base.__init__(self, parent_with_realization)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category_types.py", line 204, in __init__
        Category.__init__(self, name)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 499, in __init__
        (self.__class__, self.subcategory_class, ),
      File "lazy_attribute.pyx", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 1277, in subcategory_class
        cache=False, picklable=False)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 2064, in _make_named_class
        cache=cache, **options)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 1233, in _make_named_class
        tuple(getattr(cat,name) for cat in self._super_categories_for_classes),
      File "lazy_attribute.pyx", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 1059, in _super_categories_for_classes
        self._all_super_categories
      File "lazy_attribute.pyx", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 885, in _all_super_categories
        for cat in self._super_categories] +
      File "lazy_attribute.pyx", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 1034, in _super_categories
        return sorted(Category._flatten_categories(self.super_categories()), key = category_sort_key, reverse=True)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sfa.py", line 514, in super_categories
        return [GradedHopfAlgebrasWithBasis(self.base().base_ring()),
      File "classcall_metaclass.pyx", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 464, in __classcall__
        return super(Category, cls).__classcall__(cls, *args, **options)
      File "cachefunc.pyx", line 1030, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 1005, in __classcall__
        instance = typecall(cls, *args, **options)
      File "classcall_metaclass.pyx", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category_types.py", line 327, in __init__
        Category_over_base.__init__(self, base, name)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category_types.py", line 204, in __init__
        Category.__init__(self, name)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 499, in __init__
        (self.__class__, self.subcategory_class, ),
      File "lazy_attribute.pyx", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 1277, in subcategory_class
        cache=False, picklable=False)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 2064, in _make_named_class
        cache=cache, **options)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 1233, in _make_named_class
        tuple(getattr(cat,name) for cat in self._super_categories_for_classes),
      File "lazy_attribute.pyx", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 1059, in _super_categories_for_classes
        self._all_super_categories
      File "lazy_attribute.pyx", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 885, in _all_super_categories
        for cat in self._super_categories] +
      File "lazy_attribute.pyx", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 1034, in _super_categories
        return sorted(Category._flatten_categories(self.super_categories()), key = category_sort_key, reverse=True)
      File "cachefunc.pyx", line 1775, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (sage/misc/cachefunc.c:9548)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/graded_hopf_algebras_with_basis.py", line 42, in super_categories
        return [GradedBialgebrasWithBasis(R), GradedHopfAlgebras(R), HopfAlgebrasWithBasis(R)]
      File "classcall_metaclass.pyx", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 464, in __classcall__
        return super(Category, cls).__classcall__(cls, *args, **options)
      File "cachefunc.pyx", line 1030, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 1005, in __classcall__
        instance = typecall(cls, *args, **options)
      File "classcall_metaclass.pyx", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category_types.py", line 327, in __init__
        Category_over_base.__init__(self, base, name)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category_types.py", line 204, in __init__
        Category.__init__(self, name)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 499, in __init__
        (self.__class__, self.subcategory_class, ),
      File "lazy_attribute.pyx", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 1277, in subcategory_class
        cache=False, picklable=False)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 2064, in _make_named_class
        cache=cache, **options)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 1233, in _make_named_class
        tuple(getattr(cat,name) for cat in self._super_categories_for_classes),
      File "lazy_attribute.pyx", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 1059, in _super_categories_for_classes
        self._all_super_categories
      File "lazy_attribute.pyx", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 885, in _all_super_categories
        for cat in self._super_categories] +
      File "lazy_attribute.pyx", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 1034, in _super_categories
        return sorted(Category._flatten_categories(self.super_categories()), key = category_sort_key, reverse=True)
      File "cachefunc.pyx", line 1775, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (sage/misc/cachefunc.c:9548)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/graded_bialgebras_with_basis.py", line 40, in super_categories
        return [GradedAlgebrasWithBasis(R), GradedCoalgebrasWithBasis(R), GradedBialgebras(R)]
      File "classcall_metaclass.pyx", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 464, in __classcall__
        return super(Category, cls).__classcall__(cls, *args, **options)
      File "cachefunc.pyx", line 1030, in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 1005, in __classcall__
        instance = typecall(cls, *args, **options)
      File "classcall_metaclass.pyx", line 518, in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category_types.py", line 327, in __init__
        Category_over_base.__init__(self, base, name)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category_types.py", line 204, in __init__
        Category.__init__(self, name)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 499, in __init__
        (self.__class__, self.subcategory_class, ),
      File "lazy_attribute.pyx", line 127, in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 1277, in subcategory_class
        cache=False, picklable=False)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 2064, in _make_named_class
        cache=cache, **options)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.py", line 1235, in _make_named_class
        reduction = reduction, cache = cache)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/dynamic_class.py", line 316, in dynamic_class
        return dynamic_class_internal.f(name, bases, cls, reduction, doccls, prepend_cls_bases)
      File "/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/dynamic_class.py", line 411, in dynamic_class_internal
        return metaclass(name, bases, methods)
    TypeError: Cannot create a consistent method resolution
    order (MRO) for bases ModulesWithBasis.subcategory_class, Modules.subcategory_class, GradedModules.subcategory_class
**********************************************************************
```

This happens only because of the doctest

```
                sage: s = SymmetricFunctions(Zmod(14)).s()
                sage: s.is_integral_domain()
                False
```

before it. Both doctests work fine in isolation, but it seems that the `Zmod(14)` one corrupts the MRO for the `Integers(13)` one.

What the fuck???



---

archive/issue_comments_195818.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2013-11-30T19:06:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195818",
    "user": "darij"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_195819.json:
```json
{
    "body": "No idea about this failure. On #15303, I need to touch qsym.py for different reasons: Coercion maps use weak references to their domain (by #14711), and thus one should copy them when using outside of the coercion system.",
    "created_at": "2013-11-30T19:11:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195819",
    "user": "SimonKing"
}
```

No idea about this failure. On #15303, I need to touch qsym.py for different reasons: Coercion maps use weak references to their domain (by #14711), and thus one should copy them when using outside of the coercion system.



---

archive/issue_comments_195820.json:
```json
{
    "body": "This is, sadly, not the patch where I'm touching QSym; I cc'ed you because it seems to be a category issue. Thanks for looking into it nevertheless!",
    "created_at": "2013-11-30T19:31:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195820",
    "user": "darij"
}
```

This is, sadly, not the patch where I'm touching QSym; I cc'ed you because it seems to be a category issue. Thanks for looking into it nevertheless!



---

archive/issue_comments_195821.json:
```json
{
    "body": "Replying to [comment:5 darij]:\n> This is, sadly, not the patch where I'm touching QSym; I cc'ed you because it seems to be a category issue.\n\nI see!\n\nActually I thought that with Nicolas' modification of the C3 algorithm, an inconsistent method resolution order should never occur.",
    "created_at": "2013-11-30T19:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195821",
    "user": "SimonKing"
}
```

Replying to [comment:5 darij]:
> This is, sadly, not the patch where I'm touching QSym; I cc'ed you because it seems to be a category issue.

I see!

Actually I thought that with Nicolas' modification of the C3 algorithm, an inconsistent method resolution order should never occur.



---

archive/issue_comments_195822.json:
```json
{
    "body": "Nevermind my patch -- the bug is already triggered by\n\n```\nsage: SymmetricFunctions(Zmod(2)); SymmetricFunctions(Zmod(4))\n```\n\nIf I use two primes instead of `2` and `4`, then it works! It is probably a field/ring distinction. Maybe determining a category at runtime is bad for caching?\n\nThere should be a contest for the shortest string that breaks Sage...",
    "created_at": "2013-11-30T20:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195822",
    "user": "darij"
}
```

Nevermind my patch -- the bug is already triggered by

```
sage: SymmetricFunctions(Zmod(2)); SymmetricFunctions(Zmod(4))
```

If I use two primes instead of `2` and `4`, then it works! It is probably a field/ring distinction. Maybe determining a category at runtime is bad for caching?

There should be a contest for the shortest string that breaks Sage...



---

archive/issue_comments_195823.json:
```json
{
    "body": "But... not all is well in field-land either!\n\n\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Sage Version 5.13.beta3, Release Date: 2013-11-14                  \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: SymmetricFunctions(Zmod(2)); SymmetricFunctions(Zmod(5)); SymmetricFunctions(Zmod(3))\nSymmetric Functions over Ring of integers modulo 2\nSymmetric Functions over Ring of integers modulo 5\n---------------------------------------------------------------------------\nKeyError                                  Traceback (most recent call last)\n<ipython-input-1-55467dc7f5ca> in <module>()\n----> 1 SymmetricFunctions(Zmod(Integer(2))); SymmetricFunctions(Zmod(Integer(5))); SymmetricFunctions(Zmod(Integer(3)))\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.so in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)()\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/cachefunc.so in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)()\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.pyc in __classcall__(cls, *args, **options)\n   1003             True\n   1004         \"\"\"\n-> 1005         instance = typecall(cls, *args, **options)\n   1006         assert isinstance( instance, cls )\n   1007         if instance.__class__.__reduce__ == CachedRepresentation.__reduce__:\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.so in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)()\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.pyc in __init__(self, R)\n    762         assert(R in Rings())\n    763         self._base = R # Won't be needed when CategoryObject won't override anymore base_ring\n--> 764         Parent.__init__(self, category = GradedHopfAlgebras(R).WithRealizations())\n    765 \n    766     def a_realization(self):\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__init__ (sage/structure/parent.c:4392)()\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.pyc in __init_extra__(self)\n   1223 \n   1224         for (basis1_name, basis2_name) in conversion_functions.keys():\n-> 1225             basis1 = getattr(self, basis1_name)()\n   1226             basis2 = getattr(self, basis2_name)()\n   1227             on_basis = SymmetricaConversionOnBasis(t = conversion_functions[basis1_name,basis2_name], domain = basis1, codomain = basis2)\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.pyc in powersum(self)\n    810             Symmetric Functions over Rational Field in the powersum basis\n    811         \"\"\"\n--> 812         return powersum.SymmetricFunctionAlgebra_power(self)\n    813     p = powersum\n    814     power = powersum # Todo: get rid of this one when it won't be needed anymore\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.so in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)()\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/cachefunc.so in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)()\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.pyc in __classcall__(cls, *args, **options)\n   1003             True\n   1004         \"\"\"\n-> 1005         instance = typecall(cls, *args, **options)\n   1006         assert isinstance( instance, cls )\n   1007         if instance.__class__.__reduce__ == CachedRepresentation.__reduce__:\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.so in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)()\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/powersum.pyc in __init__(self, Sym)\n     39             sage: TestSuite(p).run(elements = [p[1,1]+p[2], p[1]+2*p[1,1]])\n     40         \"\"\"\n---> 41         classical.SymmetricFunctionAlgebra_classical.__init__(self, Sym, \"powersum\", 'p')\n     42 \n     43     def coproduct_on_generators(self, i):\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sfa.pyc in __init__(self, Sym, basis_name, prefix)\n   1020         self._sym = Sym\n   1021         CombinatorialFreeModule.__init__(self, Sym.base_ring(), sage.combinat.partition.Partitions(),\n-> 1022                                          category = SymmetricFunctionsBases(Sym),\n   1023                                          bracket = \"\", prefix = prefix)\n   1024 \n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.so in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)()\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.pyc in __classcall__(cls, *args, **options)\n    462         if isinstance(cls, DynamicMetaclass):\n    463             cls = cls.__base__\n--> 464         return super(Category, cls).__classcall__(cls, *args, **options)\n    465 \n    466     def __init__(self, s=None):\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/cachefunc.so in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)()\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.pyc in __classcall__(cls, *args, **options)\n   1003             True\n   1004         \"\"\"\n-> 1005         instance = typecall(cls, *args, **options)\n   1006         assert isinstance( instance, cls )\n   1007         if instance.__class__.__reduce__ == CachedRepresentation.__reduce__:\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.so in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)()\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sfa.pyc in __init__(self, base)\n    475             True\n    476         \"\"\"\n--> 477         Category_realization_of_parent.__init__(self, base)\n    478 \n    479     def _repr_(self):\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/realizations.pyc in __init__(self, parent_with_realization)\n    145             sage: TestSuite(C).run()\n    146         \"\"\"\n--> 147         Category_over_base.__init__(self, parent_with_realization)\n    148         self.parent_with_realization = parent_with_realization\n    149 \n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category_types.pyc in __init__(self, base, name)\n    202     def __init__(self, base, name=None):\n    203         self.__base = base\n--> 204         Category.__init__(self, name)\n    205 \n    206     def _make_named_class_key(self, name):\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.pyc in __init__(self, s)\n    497                 raise TypeError, \"Argument string must be a string.\"\n    498         self.__class__ = dynamic_class(\"%s_with_category\"%self.__class__.__name__,\n--> 499                                        (self.__class__, self.subcategory_class, ),\n    500                                        cache = False, reduction = None,\n    501                                        doccls=self.__class__)\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/lazy_attribute.so in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)()\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.pyc in subcategory_class(self)\n   1275         \"\"\"\n   1276         return self._make_named_class('subcategory_class', 'SubcategoryMethods',\n-> 1277                                       cache=False, picklable=False)\n   1278 \n   1279     @lazy_attribute\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.pyc in _make_named_class(self, name, method_provider, cache, **options)\n   2062             pass\n   2063         result = Category._make_named_class(self, name, method_provider,\n-> 2064                                             cache=cache, **options)\n   2065         self._make_named_class_cache[key] = result\n   2066         return result\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.pyc in _make_named_class(self, name, method_provider, cache, picklable)\n   1231             reduction = None\n   1232         return dynamic_class(class_name,\n-> 1233                              tuple(getattr(cat,name) for cat in self._super_categories_for_classes),\n   1234                              method_provider_cls, prepend_cls_bases = False, doccls = doccls,\n   1235                              reduction = reduction, cache = cache)\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/lazy_attribute.so in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)()\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.pyc in _super_categories_for_classes(self)\n   1057             [Category of rngs, Category of semirings]\n   1058         \"\"\"\n-> 1059         self._all_super_categories\n   1060         return self._super_categories_for_classes\n   1061 \n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/lazy_attribute.so in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)()\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.pyc in _all_super_categories(self)\n    885                                            for cat in self._super_categories] +\n    886                                           [self._super_categories],\n--> 887                                           category_sort_key)\n    888         self._super_categories_for_classes = bases\n    889         return [self] + result\n\n/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/c3_controlled.so in sage.misc.c3_controlled.C3_sorted_merge (sage/misc/c3_controlled.c:4377)()\n\nKeyError: (6048, 95)\n```\n",
    "created_at": "2013-11-30T20:55:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195823",
    "user": "darij"
}
```

But... not all is well in field-land either!


```
┌────────────────────────────────────────────────────────────────────┐
│ Sage Version 5.13.beta3, Release Date: 2013-11-14                  │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
sage: SymmetricFunctions(Zmod(2)); SymmetricFunctions(Zmod(5)); SymmetricFunctions(Zmod(3))
Symmetric Functions over Ring of integers modulo 2
Symmetric Functions over Ring of integers modulo 5
---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)
<ipython-input-1-55467dc7f5ca> in <module>()
----> 1 SymmetricFunctions(Zmod(Integer(2))); SymmetricFunctions(Zmod(Integer(5))); SymmetricFunctions(Zmod(Integer(3)))

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.so in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)()

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/cachefunc.so in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)()

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.pyc in __classcall__(cls, *args, **options)
   1003             True
   1004         """
-> 1005         instance = typecall(cls, *args, **options)
   1006         assert isinstance( instance, cls )
   1007         if instance.__class__.__reduce__ == CachedRepresentation.__reduce__:

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.so in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)()

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.pyc in __init__(self, R)
    762         assert(R in Rings())
    763         self._base = R # Won't be needed when CategoryObject won't override anymore base_ring
--> 764         Parent.__init__(self, category = GradedHopfAlgebras(R).WithRealizations())
    765 
    766     def a_realization(self):

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/parent.so in sage.structure.parent.Parent.__init__ (sage/structure/parent.c:4392)()

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.pyc in __init_extra__(self)
   1223 
   1224         for (basis1_name, basis2_name) in conversion_functions.keys():
-> 1225             basis1 = getattr(self, basis1_name)()
   1226             basis2 = getattr(self, basis2_name)()
   1227             on_basis = SymmetricaConversionOnBasis(t = conversion_functions[basis1_name,basis2_name], domain = basis1, codomain = basis2)

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sf.pyc in powersum(self)
    810             Symmetric Functions over Rational Field in the powersum basis
    811         """
--> 812         return powersum.SymmetricFunctionAlgebra_power(self)
    813     p = powersum
    814     power = powersum # Todo: get rid of this one when it won't be needed anymore

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.so in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)()

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/cachefunc.so in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)()

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.pyc in __classcall__(cls, *args, **options)
   1003             True
   1004         """
-> 1005         instance = typecall(cls, *args, **options)
   1006         assert isinstance( instance, cls )
   1007         if instance.__class__.__reduce__ == CachedRepresentation.__reduce__:

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.so in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)()

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/powersum.pyc in __init__(self, Sym)
     39             sage: TestSuite(p).run(elements = [p[1,1]+p[2], p[1]+2*p[1,1]])
     40         """
---> 41         classical.SymmetricFunctionAlgebra_classical.__init__(self, Sym, "powersum", 'p')
     42 
     43     def coproduct_on_generators(self, i):

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sfa.pyc in __init__(self, Sym, basis_name, prefix)
   1020         self._sym = Sym
   1021         CombinatorialFreeModule.__init__(self, Sym.base_ring(), sage.combinat.partition.Partitions(),
-> 1022                                          category = SymmetricFunctionsBases(Sym),
   1023                                          bracket = "", prefix = prefix)
   1024 

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.so in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (sage/misc/classcall_metaclass.c:1224)()

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.pyc in __classcall__(cls, *args, **options)
    462         if isinstance(cls, DynamicMetaclass):
    463             cls = cls.__base__
--> 464         return super(Category, cls).__classcall__(cls, *args, **options)
    465 
    466     def __init__(self, s=None):

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/cachefunc.so in sage.misc.cachefunc.WeakCachedFunction.__call__ (sage/misc/cachefunc.c:5675)()

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/structure/unique_representation.pyc in __classcall__(cls, *args, **options)
   1003             True
   1004         """
-> 1005         instance = typecall(cls, *args, **options)
   1006         assert isinstance( instance, cls )
   1007         if instance.__class__.__reduce__ == CachedRepresentation.__reduce__:

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/classcall_metaclass.so in sage.misc.classcall_metaclass.typecall (sage/misc/classcall_metaclass.c:1586)()

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/combinat/sf/sfa.pyc in __init__(self, base)
    475             True
    476         """
--> 477         Category_realization_of_parent.__init__(self, base)
    478 
    479     def _repr_(self):

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/realizations.pyc in __init__(self, parent_with_realization)
    145             sage: TestSuite(C).run()
    146         """
--> 147         Category_over_base.__init__(self, parent_with_realization)
    148         self.parent_with_realization = parent_with_realization
    149 

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category_types.pyc in __init__(self, base, name)
    202     def __init__(self, base, name=None):
    203         self.__base = base
--> 204         Category.__init__(self, name)
    205 
    206     def _make_named_class_key(self, name):

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.pyc in __init__(self, s)
    497                 raise TypeError, "Argument string must be a string."
    498         self.__class__ = dynamic_class("%s_with_category"%self.__class__.__name__,
--> 499                                        (self.__class__, self.subcategory_class, ),
    500                                        cache = False, reduction = None,
    501                                        doccls=self.__class__)

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/lazy_attribute.so in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)()

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.pyc in subcategory_class(self)
   1275         """
   1276         return self._make_named_class('subcategory_class', 'SubcategoryMethods',
-> 1277                                       cache=False, picklable=False)
   1278 
   1279     @lazy_attribute

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.pyc in _make_named_class(self, name, method_provider, cache, **options)
   2062             pass
   2063         result = Category._make_named_class(self, name, method_provider,
-> 2064                                             cache=cache, **options)
   2065         self._make_named_class_cache[key] = result
   2066         return result

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.pyc in _make_named_class(self, name, method_provider, cache, picklable)
   1231             reduction = None
   1232         return dynamic_class(class_name,
-> 1233                              tuple(getattr(cat,name) for cat in self._super_categories_for_classes),
   1234                              method_provider_cls, prepend_cls_bases = False, doccls = doccls,
   1235                              reduction = reduction, cache = cache)

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/lazy_attribute.so in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)()

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.pyc in _super_categories_for_classes(self)
   1057             [Category of rngs, Category of semirings]
   1058         """
-> 1059         self._all_super_categories
   1060         return self._super_categories_for_classes
   1061 

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/lazy_attribute.so in sage.misc.lazy_attribute._lazy_attribute.__get__ (sage/misc/lazy_attribute.c:1300)()

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/categories/category.pyc in _all_super_categories(self)
    885                                            for cat in self._super_categories] +
    886                                           [self._super_categories],
--> 887                                           category_sort_key)
    888         self._super_categories_for_classes = bases
    889         return [self] + result

/home/darij/sage-5.13.beta3/local/lib/python2.7/site-packages/sage/misc/c3_controlled.so in sage.misc.c3_controlled.C3_sorted_merge (sage/misc/c3_controlled.c:4377)()

KeyError: (6048, 95)
```




---

archive/issue_comments_195824.json:
```json
{
    "body": "without the offending doctest",
    "created_at": "2013-12-01T01:30:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195824",
    "user": "darij"
}
```

without the offending doctest



---

archive/issue_comments_195825.json:
```json
{
    "body": "Attachment",
    "created_at": "2013-12-01T01:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195825",
    "user": "darij"
}
```

Attachment



---

archive/issue_comments_195826.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2013-12-01T01:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195826",
    "user": "darij"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_195827.json:
```json
{
    "body": "All is well that ends well -- it turns out that both bugs are fixed by the hg version of #10963. I'll open a new ticket to not lose track of this issue, but this patch can be reviewed independently of it since I've disabled the doctest.",
    "created_at": "2013-12-01T01:32:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195827",
    "user": "darij"
}
```

All is well that ends well -- it turns out that both bugs are fixed by the hg version of #10963. I'll open a new ticket to not lose track of this issue, but this patch can be reviewed independently of it since I've disabled the doctest.



---

archive/issue_comments_195828.json:
```json
{
    "body": "Hey Darij,\n\nI've converted this to a branch, removed the deprecated functions (15 months old) except the k-Schurs (they are more tricky), and formally deprecated `SymmetricFunctionAlgebra`. If you agree with my changes, then we can set this to positive review.\n\nBest,\n\nTravis\n\nFor the record, the doctests are re-enabled at #15475.\n----\nNew commits:",
    "created_at": "2013-12-16T19:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195828",
    "user": "tscrim"
}
```

Hey Darij,

I've converted this to a branch, removed the deprecated functions (15 months old) except the k-Schurs (they are more tricky), and formally deprecated `SymmetricFunctionAlgebra`. If you agree with my changes, then we can set this to positive review.

Best,

Travis

For the record, the doctests are re-enabled at #15475.
----
New commits:



---

archive/issue_comments_195829.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2013-12-17T03:23:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195829",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_195830.json:
```json
{
    "body": "Thanks for the review again! Good job clearing up the deprecations. If these couple new changes are fine, please set to positive_review.",
    "created_at": "2013-12-17T03:25:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195830",
    "user": "darij"
}
```

Thanks for the review again! Good job clearing up the deprecations. If these couple new changes are fine, please set to positive_review.



---

archive/issue_comments_195831.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-12-17T06:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195831",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_195832.json:
```json
{
    "body": "Looks good to me.",
    "created_at": "2013-12-17T06:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195832",
    "user": "tscrim"
}
```

Looks good to me.



---

archive/issue_comments_195833.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-12-17T22:10:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15236",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15236#issuecomment-195833",
    "user": "vbraun"
}
```

Resolution: fixed
