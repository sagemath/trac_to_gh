# Issue 33624: Incompatibility with ecm-7.0.5

Issue created by migration from https://trac.sagemath.org/ticket/33861

Original creator: tornaria

Original creation time: 2022-05-17 02:20:03

ecm-7.0.5 was released a couple of weeks ago, output was slightly changed making `ecm.time()` broken. Unfortunately I didn't doctest sage after rc3 and before the final 9.6 so I didn't catch it in time.

Actual failures:

```
**********************************************************************
File "/builddir/sage-9.6/pkgs/sagemath-standard/build/lib.linux-x86_64-3.10/sage/interfaces/ecm.py", line 717, in sage.interfaces.ecm.ECM.time
Failed example:
    ecm.time(n, 35)                  # random output
Exception raised:
    Traceback (most recent call last):
      File "/builddir/sage-9.6/pkgs/sagemath-standard/build/lib.linux-x86_64-3.10/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/builddir/sage-9.6/pkgs/sagemath-standard/build/lib.linux-x86_64-3.10/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.ecm.ECM.time[1]>", line 1, in <module>
        ecm.time(n, Integer(35))                  # random output
      File "/builddir/sage-9.6/pkgs/sagemath-standard/build/lib.linux-x86_64-3.10/sage/interfaces/ecm.py", line 770, in time
        while next(out_lines) != title_curves:
    StopIteration
**********************************************************************
File "/builddir/sage-9.6/pkgs/sagemath-standard/build/lib.linux-x86_64-3.10/sage/interfaces/ecm.py", line 720, in sage.interfaces.ecm.ECM.time
Failed example:
    ecm.time(n, 30, verbose=True)     # random output
Exception raised:
    Traceback (most recent call last):
      File "/builddir/sage-9.6/pkgs/sagemath-standard/build/lib.linux-x86_64-3.10/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/builddir/sage-9.6/pkgs/sagemath-standard/build/lib.linux-x86_64-3.10/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)                                                                                                                                 
      File "<doctest sage.interfaces.ecm.ECM.time[2]>", line 1, in <module>                                                                                   
        ecm.time(n, Integer(30), verbose=True)     # random output
      File "/builddir/sage-9.6/pkgs/sagemath-standard/build/lib.linux-x86_64-3.10/sage/interfaces/ecm.py", line 770, in time
        while next(out_lines) != title_curves:
    StopIteration
**********************************************************************
```



---

Comment by tornaria created at 2022-05-17 02:24:59

Changing status from new to needs_review.


---

Comment by tornaria created at 2022-05-17 02:24:59

This seems to work, tested with ecm-7.0.4 and ecm-7.0.5.
----
New commits:


---

Comment by tornaria created at 2022-05-17 03:24:36

#31325 includes a patch with similar effect to this, so this one can be dropped if that ticket is merged. Sorry for the noise.


---

Comment by mkoeppe created at 2022-05-17 03:26:15

dup of #31325


---

Comment by klee created at 2022-07-29 20:29:11

Yes.


---

Comment by klee created at 2022-07-29 20:29:11

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-08-02 06:31:03

Resolution: invalid
