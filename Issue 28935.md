# Issue 28935: conversion Laurent polynomial -> polynomial

Issue created by migration from https://trac.sagemath.org/ticket/29172

Original creator: vdelecroix

Original creation time: 2020-02-09 14:20:08

CC:  tscrim chapoton

We implement the conversion from univariate Laurent polynomial to (univariate or multivariate) polynomials.


---

Comment by vdelecroix created at 2020-02-09 14:23:40

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2020-02-09 14:23:40

New commits:


---

Comment by tscrim created at 2020-02-09 21:37:31

This part here is a little worrisome to me:

```
            if self.__u.degree():
                x = u.variables()[0]
            else:
                x = R(self.gen())
            return x**self.__n * u
```

when `__u` has positive degree, then it relies on the variables of `u` starting with the same one for the polynomial ring. However, I don't see that as being guaranteed for multivariate polynomial rings. I get the idea of being faster by avoiding one extra coercion call, and I like it. Yet, I don't see why this is guaranteed. I think you should include the test:

```
sage: Pa.<a> = ZZ[]
sage: L.<x> = Pa[]
sage: Pax = ZZ['a,x']
sage: p = a*x
sage: Pax(p)
a*x
sage: _.variables()
(a, x)
```



---

Comment by vdelecroix created at 2020-02-10 14:16:24

Thanks for having a look Travis.

There is no reason to be worried. `u` is univariate (the change happens in `class LaurentPolynomial_univariate`). Or maybe I misunderstood your remark.


---

Comment by tscrim created at 2020-02-10 23:02:51

Small thing, in the test above, it should be `L.<x> = LaurentPolynomialRing(Pa)`, but this is the conversion analog I expected.

I know `__u` is univariate, but I don't see why `u` must be. In particular, I am saying take a (Laurent) polynomial in *Z*[a][x] into the multivariate polynomial ring *Z*[a,x]. I believe this method will also be called for this, and if you take a polynomial `p` with coefficients in *Z*[a] that contains an `a`, then the variables of `p` will contain both `a` and `x`, and `a` will be `u.variables()[0]` in this case. Or is the method not called in this case? Does this particular test work?


---

Comment by git created at 2020-02-11 08:13:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2020-02-11 08:13:44

You were correct! Thanks.


---

Comment by tscrim created at 2020-02-11 09:46:00

Thank you. LGTM.


---

Comment by tscrim created at 2020-02-11 09:46:00

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-02-17 23:16:10

Resolution: fixed
