# Issue 29682: Restore "huge" package type

Issue created by migration from https://trac.sagemath.org/ticket/29919

Original creator: mkoeppe

Original creation time: 2020-06-20 16:18:11

CC:  jhpalmieri dimpase mjo slabbe etn40ff @tobiasdiez

(from #29901)

... for packages like `database_stein_watkins` and `polytopes_db_4d`


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by mkoeppe created at 2022-02-13 22:36:50

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-02-13 22:37:31

New commits:


---

Comment by git created at 2022-02-16 05:28:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2022-02-24 23:35:24

Can you document both `huge` and `has_nonfree_dependencies` in the developer's guide?


---

Comment by mkoeppe created at 2022-02-24 23:44:06

Good idea


---

Comment by mjo created at 2022-02-25 00:40:44

I think we should have a cleaner way to add "tags" to packages, but in lieu of general solution this gets the job done.

The nonfree-dependencies thing is a bit of a legal mess. Users who install such a package lose the right to distribute their copy of sage. Entities such as universities may not want to wade into that sort of grey area. Anyway, that's orthogonal to this ticket.


---

Comment by git created at 2022-02-25 01:09:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-02-25 18:38:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-02-25 18:39:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2022-02-25 19:50:26

Would

```
if any(not pkg.has_file(filename) for filename in filenames):
```

be more efficient than the current

```
if not all(pkg.has_file(filename) for filename in filenames):
```

and similarly a few lines later with `not any(...)`? Or does Python do this sort of optimization automatically?


---

Comment by jhpalmieri created at 2022-02-25 20:04:27

Never mind, I guess it doesn't matter.


---

Comment by mkoeppe created at 2022-02-25 20:32:19

There's no difference in efficiency - both `any` and `all` shortcircuit.
And I think there is no difference in clarity


---

Comment by jhpalmieri created at 2022-02-25 21:18:46

I got confused and thought that the two might short-circuit at different points, but they will short-circuit at exactly the same point, so it makes no difference.

This is not your fault and should not be fixed on this ticket, but I wish that the code in `expand_class.py` were documented. Anyway, let's move forward with this.


---

Comment by jhpalmieri created at 2022-02-25 21:18:46

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-02-25 22:12:02

Thanks!


---

Comment by vbraun created at 2022-02-27 22:00:55

Resolution: fixed
