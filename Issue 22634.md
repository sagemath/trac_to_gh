# Issue 22634: py3: use six.integer_types

Issue created by migration from https://trac.sagemath.org/ticket/22871

Original creator: chapoton

Original creation time: 2017-04-25 18:45:15

CC:  tscrim jdemeyer aapitzsch jmantysalo

in some calls to isinstance (inside .py files)

part of #16072


---

Comment by chapoton created at 2017-04-25 18:45:48

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-04-25 18:45:48

New commits:


---

Comment by git created at 2017-04-25 19:30:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-04-25 19:45:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-04-25 19:54:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-04-25 20:00:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2017-04-26 03:59:20

After I made the following changes, doctests passed:

```diff
diff --git a/src/sage/crypto/mq/sbox.py b/src/sage/crypto/mq/sbox.py
index 2ca7a87ce4..fe83e4f36c 100644
--- a/src/sage/crypto/mq/sbox.py
+++ b/src/sage/crypto/mq/sbox.py
@@ -3,6 +3,7 @@ S-Boxes and Their Algebraic Representations
 """
 from __future__ import print_function, division
 from six.moves import range
+from six import integer_types
 
 from sage.combinat.integer_vector import IntegerVectors
 from sage.crypto.boolean_function import BooleanFunction
diff --git a/src/sage/monoids/free_abelian_monoid_element.py b/src/sage/monoids/free_abelian_monoid_element.py
index e04b295483..0c7d859068 100644
--- a/src/sage/monoids/free_abelian_monoid_element.py
+++ b/src/sage/monoids/free_abelian_monoid_element.py
@@ -78,7 +78,7 @@ class FreeAbelianMonoidElement(MonoidElement):
         """
         MonoidElement.__init__(self, F)
         n = F.ngens()
-        if isinstance(x, integer_types, + (Integer,)) and x == 1:
+        if isinstance(x, integer_types + (Integer,)) and x == 1:
             self._element_vector = tuple([0]*n)
         elif isinstance(x, (list, tuple)):
             if len(x) != n:
diff --git a/src/sage/monoids/string_monoid_element.py b/src/sage/monoids/string_monoid_element.py
index 503b56f8c0..1173827469 100644
--- a/src/sage/monoids/string_monoid_element.py
+++ b/src/sage/monoids/string_monoid_element.py
@@ -83,7 +83,7 @@ class StringMonoidElement(FreeMonoidElement):
         if isinstance(x, list):
             if check:
                 for b in x:
-                    if not isinstance(b, integer_types + (Intger,)):
+                    if not isinstance(b, integer_types + (Integer,)):
                         raise TypeError(
                             "x (= %s) must be a list of integers." % x)
             self._element_list = list(x) # make copy
diff --git a/src/sage/schemes/elliptic_curves/constructor.py b/src/sage/schemes/elliptic_curves/constructor.py
index c6375ad632..c2f38de010 100644
--- a/src/sage/schemes/elliptic_curves/constructor.py
+++ b/src/sage/schemes/elliptic_curves/constructor.py
@@ -421,7 +421,7 @@ class EllipticCurveFactory(UniqueFactory):
 
         if R is None:
             R = Sequence(x).universe()
-            if R in (rings.ZZ, integer_types):
+            if R in (rings.ZZ,) + integer_types:
                 R = rings.QQ
 
         return (R, tuple(R(a) for a in x)), kwds
```



---

Comment by chapoton created at 2017-04-26 07:08:04

Thank you. It was all hand-made, I had no time to compile sage, and I was tired..
----
New commits:


---

Comment by chapoton created at 2017-04-26 09:44:58

I just found two other places needing corrections
----
New commits:


---

Comment by jhpalmieri created at 2017-04-26 16:01:18

Okay, looks good. I haven't searched to see if this is every instance, but we can fix more on another ticket if necessary.


---

Comment by jhpalmieri created at 2017-04-26 16:01:18

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2017-04-26 16:01:50

(see the sequel in #22879)


---

Comment by chapoton created at 2017-04-26 20:12:44

Thanks, John.

After this and #22879, there remains at least

```
src/sage/arith/misc.py:    if U is ZZ or U is int or U is long:# ZZ.has_coerce_map_from(U):
```

and

```
src/sage/rings/number_field/order.py:        return R is ZZ or R is int or R is long
```


to be done later in another ticket.


---

Comment by vbraun created at 2017-04-28 23:54:41

Resolution: fixed
