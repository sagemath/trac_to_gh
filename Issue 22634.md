# Issue 22634: py3: use six.integer_types

archive/issues_022634.json:
```json
{
    "body": "CC:  @tscrim @jdemeyer @a-andre @jm58660\n\nin some calls to isinstance (inside .py files)\n\npart of #16072\n\nIssue created by migration from https://trac.sagemath.org/ticket/22871\n\n",
    "created_at": "2017-04-25T18:45:15Z",
    "labels": [
        "python3",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "py3: use six.integer_types",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22634",
    "user": "@fchapoton"
}
```
CC:  @tscrim @jdemeyer @a-andre @jm58660

in some calls to isinstance (inside .py files)

part of #16072

Issue created by migration from https://trac.sagemath.org/ticket/22871





---

archive/issue_comments_315789.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-04-25T18:45:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22634#issuecomment-315789",
    "user": "@fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_315790.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-04-25T18:45:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22634#issuecomment-315790",
    "user": "@fchapoton"
}
```

New commits:



---

archive/issue_comments_315791.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-25T19:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22634#issuecomment-315791",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_315792.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-25T19:45:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22634#issuecomment-315792",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_315793.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-25T19:54:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22634#issuecomment-315793",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_315794.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-25T20:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22634#issuecomment-315794",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_315795.json:
```json
{
    "body": "After I made the following changes, doctests passed:\n\n```diff\ndiff --git a/src/sage/crypto/mq/sbox.py b/src/sage/crypto/mq/sbox.py\nindex 2ca7a87ce4..fe83e4f36c 100644\n--- a/src/sage/crypto/mq/sbox.py\n+++ b/src/sage/crypto/mq/sbox.py\n@@ -3,6 +3,7 @@ S-Boxes and Their Algebraic Representations\n \"\"\"\n from __future__ import print_function, division\n from six.moves import range\n+from six import integer_types\n \n from sage.combinat.integer_vector import IntegerVectors\n from sage.crypto.boolean_function import BooleanFunction\ndiff --git a/src/sage/monoids/free_abelian_monoid_element.py b/src/sage/monoids/free_abelian_monoid_element.py\nindex e04b295483..0c7d859068 100644\n--- a/src/sage/monoids/free_abelian_monoid_element.py\n+++ b/src/sage/monoids/free_abelian_monoid_element.py\n@@ -78,7 +78,7 @@ class FreeAbelianMonoidElement(MonoidElement):\n         \"\"\"\n         MonoidElement.__init__(self, F)\n         n = F.ngens()\n-        if isinstance(x, integer_types, + (Integer,)) and x == 1:\n+        if isinstance(x, integer_types + (Integer,)) and x == 1:\n             self._element_vector = tuple([0]*n)\n         elif isinstance(x, (list, tuple)):\n             if len(x) != n:\ndiff --git a/src/sage/monoids/string_monoid_element.py b/src/sage/monoids/string_monoid_element.py\nindex 503b56f8c0..1173827469 100644\n--- a/src/sage/monoids/string_monoid_element.py\n+++ b/src/sage/monoids/string_monoid_element.py\n@@ -83,7 +83,7 @@ class StringMonoidElement(FreeMonoidElement):\n         if isinstance(x, list):\n             if check:\n                 for b in x:\n-                    if not isinstance(b, integer_types + (Intger,)):\n+                    if not isinstance(b, integer_types + (Integer,)):\n                         raise TypeError(\n                             \"x (= %s) must be a list of integers.\" % x)\n             self._element_list = list(x) # make copy\ndiff --git a/src/sage/schemes/elliptic_curves/constructor.py b/src/sage/schemes/elliptic_curves/constructor.py\nindex c6375ad632..c2f38de010 100644\n--- a/src/sage/schemes/elliptic_curves/constructor.py\n+++ b/src/sage/schemes/elliptic_curves/constructor.py\n@@ -421,7 +421,7 @@ class EllipticCurveFactory(UniqueFactory):\n \n         if R is None:\n             R = Sequence(x).universe()\n-            if R in (rings.ZZ, integer_types):\n+            if R in (rings.ZZ,) + integer_types:\n                 R = rings.QQ\n \n         return (R, tuple(R(a) for a in x)), kwds\n```\n",
    "created_at": "2017-04-26T03:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22634#issuecomment-315795",
    "user": "@jhpalmieri"
}
```

After I made the following changes, doctests passed:

```diff
diff --git a/src/sage/crypto/mq/sbox.py b/src/sage/crypto/mq/sbox.py
index 2ca7a87ce4..fe83e4f36c 100644
--- a/src/sage/crypto/mq/sbox.py
+++ b/src/sage/crypto/mq/sbox.py
@@ -3,6 +3,7 @@ S-Boxes and Their Algebraic Representations
 """
 from __future__ import print_function, division
 from six.moves import range
+from six import integer_types
 
 from sage.combinat.integer_vector import IntegerVectors
 from sage.crypto.boolean_function import BooleanFunction
diff --git a/src/sage/monoids/free_abelian_monoid_element.py b/src/sage/monoids/free_abelian_monoid_element.py
index e04b295483..0c7d859068 100644
--- a/src/sage/monoids/free_abelian_monoid_element.py
+++ b/src/sage/monoids/free_abelian_monoid_element.py
@@ -78,7 +78,7 @@ class FreeAbelianMonoidElement(MonoidElement):
         """
         MonoidElement.__init__(self, F)
         n = F.ngens()
-        if isinstance(x, integer_types, + (Integer,)) and x == 1:
+        if isinstance(x, integer_types + (Integer,)) and x == 1:
             self._element_vector = tuple([0]*n)
         elif isinstance(x, (list, tuple)):
             if len(x) != n:
diff --git a/src/sage/monoids/string_monoid_element.py b/src/sage/monoids/string_monoid_element.py
index 503b56f8c0..1173827469 100644
--- a/src/sage/monoids/string_monoid_element.py
+++ b/src/sage/monoids/string_monoid_element.py
@@ -83,7 +83,7 @@ class StringMonoidElement(FreeMonoidElement):
         if isinstance(x, list):
             if check:
                 for b in x:
-                    if not isinstance(b, integer_types + (Intger,)):
+                    if not isinstance(b, integer_types + (Integer,)):
                         raise TypeError(
                             "x (= %s) must be a list of integers." % x)
             self._element_list = list(x) # make copy
diff --git a/src/sage/schemes/elliptic_curves/constructor.py b/src/sage/schemes/elliptic_curves/constructor.py
index c6375ad632..c2f38de010 100644
--- a/src/sage/schemes/elliptic_curves/constructor.py
+++ b/src/sage/schemes/elliptic_curves/constructor.py
@@ -421,7 +421,7 @@ class EllipticCurveFactory(UniqueFactory):
 
         if R is None:
             R = Sequence(x).universe()
-            if R in (rings.ZZ, integer_types):
+            if R in (rings.ZZ,) + integer_types:
                 R = rings.QQ
 
         return (R, tuple(R(a) for a in x)), kwds
```




---

archive/issue_comments_315796.json:
```json
{
    "body": "Thank you. It was all hand-made, I had no time to compile sage, and I was tired..\n----\nNew commits:",
    "created_at": "2017-04-26T07:08:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22634#issuecomment-315796",
    "user": "@fchapoton"
}
```

Thank you. It was all hand-made, I had no time to compile sage, and I was tired..
----
New commits:



---

archive/issue_comments_315797.json:
```json
{
    "body": "I just found two other places needing corrections\n----\nNew commits:",
    "created_at": "2017-04-26T09:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22634#issuecomment-315797",
    "user": "@fchapoton"
}
```

I just found two other places needing corrections
----
New commits:



---

archive/issue_comments_315798.json:
```json
{
    "body": "Okay, looks good. I haven't searched to see if this is every instance, but we can fix more on another ticket if necessary.",
    "created_at": "2017-04-26T16:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22634#issuecomment-315798",
    "user": "@jhpalmieri"
}
```

Okay, looks good. I haven't searched to see if this is every instance, but we can fix more on another ticket if necessary.



---

archive/issue_comments_315799.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-04-26T16:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22634#issuecomment-315799",
    "user": "@jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_315800.json:
```json
{
    "body": "(see the sequel in #22879)",
    "created_at": "2017-04-26T16:01:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22634#issuecomment-315800",
    "user": "@fchapoton"
}
```

(see the sequel in #22879)



---

archive/issue_comments_315801.json:
```json
{
    "body": "Thanks, John.\n\nAfter this and #22879, there remains at least\n\n```\nsrc/sage/arith/misc.py:    if U is ZZ or U is int or U is long:# ZZ.has_coerce_map_from(U):\n```\n\nand\n\n```\nsrc/sage/rings/number_field/order.py:        return R is ZZ or R is int or R is long\n```\n\n\nto be done later in another ticket.",
    "created_at": "2017-04-26T20:12:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22634#issuecomment-315801",
    "user": "@fchapoton"
}
```

Thanks, John.

After this and #22879, there remains at least

```
src/sage/arith/misc.py:    if U is ZZ or U is int or U is long:# ZZ.has_coerce_map_from(U):
```

and

```
src/sage/rings/number_field/order.py:        return R is ZZ or R is int or R is long
```


to be done later in another ticket.



---

archive/issue_comments_315802.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-28T23:54:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22634#issuecomment-315802",
    "user": "@vbraun"
}
```

Resolution: fixed
