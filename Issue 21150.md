# Issue 21150: IntegrableRepresentation does not pass its testsuite

Issue created by migration from https://trac.sagemath.org/ticket/21387

Original creator: jdemeyer

Original creation time: 2016-09-01 08:51:36

CC:  tscrim bump

After #20686, which enables all required tests:

```
sage: Lambda = RootSystem(['A',3,1]).weight_lattice(extended=true).fundamental_weights()
sage: V = IntegrableRepresentation(Lambda[1]+Lambda[2]+Lambda[3])
sage: TestSuite(V).run()
Failure in _test_additive_associativity:
Traceback (most recent call last):
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 283, in run
    test_method(tester = tester)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/additive_semigroups.py", line 82, in _test_additive_associativity
    S = tester.some_elements()
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 539, in some_elements
    S = self._instance.some_elements()
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1332, in some_elements
    return [self.an_element()]
  File "sage/misc/cachefunc.pyx", line 2401, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12717)
    self.cache = f(self._instance)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1037, in an_element
    return self._an_element_()
  File "sage/structure/category_object.pyx", line 900, in sage.structure.category_object.CategoryObject.__getattr__ (build/cythonized/sage/structure/category_object.c:9274)
    return self.getattr_from_category(name)
  File "sage/structure/category_object.pyx", line 915, in sage.structure.category_object.CategoryObject.getattr_from_category (build/cythonized/sage/structure/category_object.c:9438)
    attr = getattr_from_other_class(self, cls, name)
  File "sage/structure/misc.pyx", line 300, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1782)
    raise dummy_attribute_error
AttributeError: 'IntegrableRepresentation' object has no attribute '_an_element_'
------------------------------------------------------------
Failure in _test_an_element:
Traceback (most recent call last):
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 283, in run
    test_method(tester = tester)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1068, in _test_an_element
    an_element = self.an_element()
  File "sage/misc/cachefunc.pyx", line 2401, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12717)
    self.cache = f(self._instance)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1037, in an_element
    return self._an_element_()
  File "sage/structure/category_object.pyx", line 900, in sage.structure.category_object.CategoryObject.__getattr__ (build/cythonized/sage/structure/category_object.c:9274)
    return self.getattr_from_category(name)
  File "sage/structure/category_object.pyx", line 915, in sage.structure.category_object.CategoryObject.getattr_from_category (build/cythonized/sage/structure/category_object.c:9438)
    attr = getattr_from_other_class(self, cls, name)
  File "sage/structure/misc.pyx", line 300, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1782)
    raise dummy_attribute_error
AttributeError: 'IntegrableRepresentation' object has no attribute '_an_element_'
------------------------------------------------------------
Failure in _test_elements:
Traceback (most recent call last):
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 283, in run
    test_method(tester = tester)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1132, in _test_elements
    an_element = self.an_element()
  File "sage/misc/cachefunc.pyx", line 2401, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12717)
    self.cache = f(self._instance)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1037, in an_element
    return self._an_element_()
  File "sage/structure/category_object.pyx", line 900, in sage.structure.category_object.CategoryObject.__getattr__ (build/cythonized/sage/structure/category_object.c:9274)
    return self.getattr_from_category(name)
  File "sage/structure/category_object.pyx", line 915, in sage.structure.category_object.CategoryObject.getattr_from_category (build/cythonized/sage/structure/category_object.c:9438)
    attr = getattr_from_other_class(self, cls, name)
  File "sage/structure/misc.pyx", line 300, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1782)
    raise dummy_attribute_error
AttributeError: 'IntegrableRepresentation' object has no attribute '_an_element_'
------------------------------------------------------------
Failure in _test_elements_eq_reflexive:
Traceback (most recent call last):
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 283, in run
    test_method(tester = tester)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1172, in _test_elements_eq_reflexive
    S = list(tester.some_elements()) + [None, 0]
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 539, in some_elements
    S = self._instance.some_elements()
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1332, in some_elements
    return [self.an_element()]
  File "sage/misc/cachefunc.pyx", line 2401, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12717)
    self.cache = f(self._instance)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1037, in an_element
    return self._an_element_()
  File "sage/structure/category_object.pyx", line 900, in sage.structure.category_object.CategoryObject.__getattr__ (build/cythonized/sage/structure/category_object.c:9274)
    return self.getattr_from_category(name)
  File "sage/structure/category_object.pyx", line 915, in sage.structure.category_object.CategoryObject.getattr_from_category (build/cythonized/sage/structure/category_object.c:9438)
    attr = getattr_from_other_class(self, cls, name)
  File "sage/structure/misc.pyx", line 300, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1782)
    raise dummy_attribute_error
AttributeError: 'IntegrableRepresentation' object has no attribute '_an_element_'
------------------------------------------------------------
Failure in _test_elements_eq_symmetric:
Traceback (most recent call last):
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 283, in run
    test_method(tester = tester)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1211, in _test_elements_eq_symmetric
    S = list(tester.some_elements()) + [None, 0]
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 539, in some_elements
    S = self._instance.some_elements()
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1332, in some_elements
    return [self.an_element()]
  File "sage/misc/cachefunc.pyx", line 2401, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12717)
    self.cache = f(self._instance)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1037, in an_element
    return self._an_element_()
  File "sage/structure/category_object.pyx", line 900, in sage.structure.category_object.CategoryObject.__getattr__ (build/cythonized/sage/structure/category_object.c:9274)
    return self.getattr_from_category(name)
  File "sage/structure/category_object.pyx", line 915, in sage.structure.category_object.CategoryObject.getattr_from_category (build/cythonized/sage/structure/category_object.c:9438)
    attr = getattr_from_other_class(self, cls, name)
  File "sage/structure/misc.pyx", line 300, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1782)
    raise dummy_attribute_error
AttributeError: 'IntegrableRepresentation' object has no attribute '_an_element_'
------------------------------------------------------------
Failure in _test_elements_eq_transitive:
Traceback (most recent call last):
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 283, in run
    test_method(tester = tester)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1243, in _test_elements_eq_transitive
    S = list(tester.some_elements())
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 539, in some_elements
    S = self._instance.some_elements()
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1332, in some_elements
    return [self.an_element()]
  File "sage/misc/cachefunc.pyx", line 2401, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12717)
    self.cache = f(self._instance)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1037, in an_element
    return self._an_element_()
  File "sage/structure/category_object.pyx", line 900, in sage.structure.category_object.CategoryObject.__getattr__ (build/cythonized/sage/structure/category_object.c:9274)
    return self.getattr_from_category(name)
  File "sage/structure/category_object.pyx", line 915, in sage.structure.category_object.CategoryObject.getattr_from_category (build/cythonized/sage/structure/category_object.c:9438)
    attr = getattr_from_other_class(self, cls, name)
  File "sage/structure/misc.pyx", line 300, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1782)
    raise dummy_attribute_error
AttributeError: 'IntegrableRepresentation' object has no attribute '_an_element_'
------------------------------------------------------------
Failure in _test_elements_neq:
Traceback (most recent call last):
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 283, in run
    test_method(tester = tester)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1299, in _test_elements_neq
    S = list(tester.some_elements()) + [None, 0]
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 539, in some_elements
    S = self._instance.some_elements()
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1332, in some_elements
    return [self.an_element()]
  File "sage/misc/cachefunc.pyx", line 2401, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12717)
    self.cache = f(self._instance)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1037, in an_element
    return self._an_element_()
  File "sage/structure/category_object.pyx", line 900, in sage.structure.category_object.CategoryObject.__getattr__ (build/cythonized/sage/structure/category_object.c:9274)
    return self.getattr_from_category(name)
  File "sage/structure/category_object.pyx", line 915, in sage.structure.category_object.CategoryObject.getattr_from_category (build/cythonized/sage/structure/category_object.c:9438)
    attr = getattr_from_other_class(self, cls, name)
  File "sage/structure/misc.pyx", line 300, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1782)
    raise dummy_attribute_error
AttributeError: 'IntegrableRepresentation' object has no attribute '_an_element_'
------------------------------------------------------------
Failure in _test_not_implemented_methods:
Traceback (most recent call last):
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 283, in run
    test_method(tester = tester)
  File "sage/structure/sage_object.pyx", line 611, in sage.structure.sage_object.SageObject._test_not_implemented_methods (build/cythonized/sage/structure/sage_object.c:4816)
    tester.fail("Not implemented method: %s"%name)
  File "/usr/local/src/sage-config/local/lib/python/unittest/case.py", line 412, in fail
    raise self.failureException(msg)
AssertionError: Not implemented method: __contains__
------------------------------------------------------------
Failure in _test_some_elements:
Traceback (most recent call last):
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 283, in run
    test_method(tester = tester)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1360, in _test_some_elements
    elements = self.some_elements()
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1332, in some_elements
    return [self.an_element()]
  File "sage/misc/cachefunc.pyx", line 2401, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12717)
    self.cache = f(self._instance)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1037, in an_element
    return self._an_element_()
  File "sage/structure/category_object.pyx", line 900, in sage.structure.category_object.CategoryObject.__getattr__ (build/cythonized/sage/structure/category_object.c:9274)
    return self.getattr_from_category(name)
  File "sage/structure/category_object.pyx", line 915, in sage.structure.category_object.CategoryObject.getattr_from_category (build/cythonized/sage/structure/category_object.c:9438)
    attr = getattr_from_other_class(self, cls, name)
  File "sage/structure/misc.pyx", line 300, in sage.structure.misc.getattr_from_other_class (build/cythonized/sage/structure/misc.c:1782)
    raise dummy_attribute_error
AttributeError: 'IntegrableRepresentation' object has no attribute '_an_element_'
------------------------------------------------------------
Failure in _test_zero:
Traceback (most recent call last):
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 283, in run
    test_method(tester = tester)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/additive_magmas.py", line 669, in _test_zero
    zero = self.zero()
  File "sage/misc/cachefunc.pyx", line 2401, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12717)
    self.cache = f(self._instance)
  File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/categories/additive_magmas.py", line 703, in zero
    return self(0)
TypeError: 'IntegrableRepresentation' object is not callable
------------------------------------------------------------
The following tests failed: _test_additive_associativity, _test_an_element, _test_elements, _test_elements_eq_reflexive, _test_elements_eq_symmetric, _test_elements_eq_transitive, _test_elements_neq, _test_not_implemented_methods, _test_some_elements, _test_zero
```



---

Comment by mkoeppe created at 2022-09-16 22:18:16

Still the same in 9.7.rc1
