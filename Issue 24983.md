# Issue 24983: fix definite fricas integration

Issue created by migration from https://trac.sagemath.org/ticket/25220

Original creator: mantepse

Original creation time: 2018-04-20 11:12:38

CC:  tmonteil charpent mafra

As reported at https://ask.sagemath.org/question/40733/integrate-sqrt1-cosx-integrinterval-from-0-to-2pi, the sage interface to the fricas integrator fails to do the definite integral

```
sage: integral(sqrt(1-cos(x)), x, 0, 2*pi, algorithm="fricas")
```

which this ticket fixes:

```
4*sqrt(2)
```


See also #24587.


---

Comment by mantepse created at 2018-04-20 11:21:58

Changing keywords from "" to "FriCAS".


---

Comment by mantepse created at 2018-04-20 11:21:58

Changing status from new to needs_review.


---

Comment by mantepse created at 2018-04-20 11:21:58

New commits:


---

Comment by mafra created at 2018-04-23 10:59:46

Changing status from needs_review to positive_review.


---

Comment by mafra created at 2018-04-24 08:03:00

I have compiled sage where the last commit is


```
commit 06a28da627ee5c08f3eede278c1338ff47bdc44a
Author: Martin Rubey <martin.rubey@tuwien.ac.at>
Date:   Mon Apr 23 09:57:46 2018 +0200

    add missing import
```

and I get a division by zero error that starts like this:

```
integrate(sqrt(1-cos(x)),x,0,2*pi,algorithm='fricas')

---------------------------------------------------------------------------
ZeroDivisionError                         Traceback (most recent call last)
<ipython-input-23-837f9d0d7334> in <module>()
----> 1 integrate(sqrt(Integer(1)-cos(x)),x,Integer(0),Integer(2)*pi,algorithm='fricas')

/home/mafra/git-repos/sage/local/lib/python2.7/site-packages/sage/misc/functional.pyc in integral(x, *args, **kwds)
    751     """
    752     if hasattr(x, 'integral'):
--> 753         return x.integral(*args, **kwds)
    754     else:
    755         from sage.symbolic.ring import SR
```


Any ideas of what I did wrong? However, I checked that your `dilog` changes from #25224 are indeed fixed.


---

Comment by mantepse created at 2018-04-24 08:18:17

Hm, I cannot reproduce this.  Do you have all of

- #25174 	conversion of I to fricas is wrong
- #25220 	fix definite fricas integration
- #25224 	Mismatch in the definition of dilog() between fricas and sympy

applied?


---

Comment by mantepse created at 2018-04-24 08:22:05

Actually, I cannot reproduce this at all, provided that #25220 (this ticket) is applied.  How did you apply the ticket?


---

Comment by mafra created at 2018-04-24 08:23:23

Replying to [comment:5 mantepse]:
> Hm, I cannot reproduce this.  Do you have all of
> 
> - #25174 	conversion of I to fricas is wrong
> - #25220 	fix definite fricas integration
> - #25224 	Mismatch in the definition of dilog() between fricas and sympy
> 
> applied?

Sorry for the noise, I missed the other ones when I merged your branch for #25224 as I was under the impression that it also contained the other fixes. Sorry again!


---

Comment by vbraun created at 2018-05-14 17:35:31

Resolution: fixed
