# Issue 22690: Add gmpy2 as an optional package

Issue created by migration from Trac.

Original creator: vklein

Original creation time: 2017-05-02 08:47:46

CC:  vdelecroix

Add gmpy2 as an optional package


---

Comment by vklein created at 2017-05-02 15:03:16

Set assignee to vklein.


---

Comment by vdelecroix created at 2017-05-03 08:06:52

Note that gmpy2 was already an optional package. The title and description of the ticket are not be appropriate.
----
New commits:


---

Comment by vklein created at 2017-05-03 08:14:23

New commits:


---

Comment by vdelecroix created at 2017-05-11 15:26:03

Changing keywords from "" to "jsb++".


---

Comment by vdelecroix created at 2017-05-11 15:28:23

Changing keywords from "jsb++" to "thursdaysbdx".


---

Comment by git created at 2017-05-12 16:22:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vklein created at 2017-05-12 16:25:17

The version in the snapshot's setup.py was incorrect. â€‹https://www.labri.fr/perso/vklein/gmpy2-snapshot-02.05.17.tar.gz ans checksum.ini have been updated


---

Comment by vdelecroix created at 2017-05-17 17:46:26

See [gmpy pull request #134](https://github.com/aleaxit/gmpy/pull/134) for making `mpz(a)` and `mpq(a)` call the methods `.__mpz__()` and `.__mpq__()` respectively.


---

Comment by git created at 2017-05-22 14:20:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-05-22 14:25:43

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vklein created at 2017-05-22 14:29:01

New snapshot version [gmpy2-snapshot-22.05.17.tar.gz](https://www.labri.fr/perso/vklein/gmpy2-snapshot-22.05.17.tar.gz), checksum has been updated.


---

Comment by vklein created at 2017-05-23 14:04:56

Changing component from packages: optional to packages: standard.


---

Comment by jdemeyer created at 2017-05-23 14:21:19

Why the change in component? If you want to make it standard, it should be discussed on `sage-devel`.


---

Comment by vdelecroix created at 2017-05-23 14:29:20

Replying to [comment:19 jdemeyer]:
> Why the change in component? If you want to make it standard, it should be discussed on `sage-devel`.

Because of #23024. Of course it will be discussed on `sage-devel`. Note that the ticket status is `new` and there is no official release of gmpy2 yet.


---

Comment by jdemeyer created at 2017-05-23 14:32:15

Replying to [comment:20 vdelecroix]:
> Replying to [comment:19 jdemeyer]:
> > Why the change in component? If you want to make it standard, it should be discussed on `sage-devel`.
> 
> Because of #23024. Of course it will be discussed on `sage-devel`. Note that the ticket status is `new` and there is no official release of gmpy2 yet.

Then why not keep it optional here and make it standard in #23024?


---

Comment by vklein created at 2017-05-23 15:06:22

I don't see the point of keeping it optional here. 

This ticket is a prerequisite of #22928 which is a prerequisite of #23024. 

In my point of view, changes concerning gmpy2 package should be listed in this ticket, change concerning gmpy2 integration with sage in #22928 and change specifics to pplpy integration in #23024.


---

Comment by jdemeyer created at 2017-05-23 15:14:41

Replying to [comment:22 vklein]:
> I don't see the point of keeping it optional here.

And I don't see any reason to make it standard here. It's not used by anything, so why should it be standard?

"Just having plans to use it in the future" is not sufficient reason IMHO to make a package standard.


---

Comment by jdemeyer created at 2017-05-23 15:18:43

Put in a different way: a Trac ticket should always be reviewed as a single unit. It's fine it the motivation for a Trac ticket comes from a different ticket, but the ticket should still make sense by itself.


---

Comment by vklein created at 2017-05-23 15:38:08

Changing component from packages: standard to packages: optional.


---

Comment by vklein created at 2017-05-23 15:38:08

And we can imagine an optional extension using gmpy2's C-API, ok i see your point.


---

Comment by git created at 2017-05-24 13:51:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vklein created at 2017-05-24 13:57:53

Updating snapshot to version [gmpy2-snapshot-24.05.17.tar.gz](https://www.labri.fr/perso/vklein/gmpy2-snapshot-24.05.17.tar.gz), the cython interface now include MPZ_Check and MPQ_Check function (Test if an object is of type gmpy2.mpz or gmpy2.mpq respectively)


---

Comment by git created at 2017-06-22 14:06:04

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vklein created at 2017-06-22 14:42:03

Updating snapshot version to [gmpy2-snapshot-22.06.17.tar.gz](https://www.labri.fr/perso/vklein/gmpy2-snapshot-22.06.17.tar.gz)


---

Comment by git created at 2017-06-23 08:49:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vklein created at 2017-06-23 08:57:20

Update snapshot version to [gmpy2-snapshot-23.06.17.tar.gz](https://1drv.ms/u/s!AkXFM4yChnqcqTW60E2WIeAcScha)


---

Comment by git created at 2017-11-13 13:55:36

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2017-11-13 14:19:41

Replying to [ticket:22927 vklein]:
> For now the check of the package fail

In that case, I'm not sure whether the package can be accepted. At a minimum, could you add a patch to disable the failing tests, such that `gmpy2` at least formally passes its testsuite?

Second, you should better document how you obtained this tarball. Posting a tarball on your personal home page without further explanation is not sufficient. Is there any chance you could convince upstream to make a proper release? That would of course be much better.

Note that you have never set this ticket to needs_review. If you want this to be merged in Sage, you'll need to do that.


---

Comment by vklein created at 2017-11-13 14:57:16

> Is there any chance you could convince upstream to make a proper release? 
Our goal has always be to have a proper release of gmpy2. It look like things are progressing well these last weeks. You can look at [issue #146](https://github.com/aleaxit/gmpy/issues/146) if you want more specifics.


---

Comment by git created at 2017-11-14 14:22:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vklein created at 2017-11-14 14:26:37

update package version to [gmpy2-snapshot-14.11.17.tar.gz](https://www.labri.fr/perso/vklein/gmpy2-snapshot-14.11.17.tar.gz)


---

Comment by git created at 2017-11-17 10:45:36

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vklein created at 2017-11-17 10:47:31

rebase on 8.1.rc0 and squash commit


---

Comment by git created at 2017-11-24 15:46:03

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vklein created at 2017-11-24 15:52:46

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-11-24 16:23:12

Running `make ptestlong` now, but I don't expect any problems.


---

Comment by vdelecroix created at 2017-11-24 16:25:53

(me too (running ptestlong))


---

Comment by vdelecroix created at 2017-11-24 17:03:23

Replying to [comment:45 vdelecroix]:
> (me too (running ptestlong))

good for me!


---

Comment by jdemeyer created at 2017-11-24 18:27:55

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-12-11 01:03:47

Resolution: fixed
