# Issue 22690: Add gmpy2 as an optional package

archive/issues_022690.json:
```json
{
    "body": "CC:  vdelecroix\n\nAdd gmpy2 as an optional package\n\nIssue created by migration from https://trac.sagemath.org/ticket/22927\n\n",
    "created_at": "2017-05-02T08:47:46Z",
    "labels": [
        "packages: optional",
        "major",
        "enhancement"
    ],
    "title": "Add gmpy2 as an optional package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22690",
    "user": "vklein"
}
```
CC:  vdelecroix

Add gmpy2 as an optional package

Issue created by migration from https://trac.sagemath.org/ticket/22927





---

archive/issue_comments_316583.json:
```json
{
    "body": "Set assignee to vklein.",
    "created_at": "2017-05-02T15:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316583",
    "user": "vklein"
}
```

Set assignee to vklein.



---

archive/issue_comments_316584.json:
```json
{
    "body": "Note that gmpy2 was already an optional package. The title and description of the ticket are not be appropriate.\n----\nNew commits:",
    "created_at": "2017-05-03T08:06:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316584",
    "user": "vdelecroix"
}
```

Note that gmpy2 was already an optional package. The title and description of the ticket are not be appropriate.
----
New commits:



---

archive/issue_comments_316585.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-05-03T08:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316585",
    "user": "vklein"
}
```

New commits:



---

archive/issue_comments_316586.json:
```json
{
    "body": "Changing keywords from \"\" to \"jsb++\".",
    "created_at": "2017-05-11T15:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316586",
    "user": "vdelecroix"
}
```

Changing keywords from "" to "jsb++".



---

archive/issue_comments_316587.json:
```json
{
    "body": "Changing keywords from \"jsb++\" to \"thursdaysbdx\".",
    "created_at": "2017-05-11T15:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316587",
    "user": "vdelecroix"
}
```

Changing keywords from "jsb++" to "thursdaysbdx".



---

archive/issue_comments_316588.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-12T16:22:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316588",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_316589.json:
```json
{
    "body": "The version in the snapshot's setup.py was incorrect. \u200bhttps://www.labri.fr/perso/vklein/gmpy2-snapshot-02.05.17.tar.gz ans checksum.ini have been updated",
    "created_at": "2017-05-12T16:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316589",
    "user": "vklein"
}
```

The version in the snapshot's setup.py was incorrect. â€‹https://www.labri.fr/perso/vklein/gmpy2-snapshot-02.05.17.tar.gz ans checksum.ini have been updated



---

archive/issue_comments_316590.json:
```json
{
    "body": "See [gmpy pull request #134](https://github.com/aleaxit/gmpy/pull/134) for making `mpz(a)` and `mpq(a)` call the methods `.__mpz__()` and `.__mpq__()` respectively.",
    "created_at": "2017-05-17T17:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316590",
    "user": "vdelecroix"
}
```

See [gmpy pull request #134](https://github.com/aleaxit/gmpy/pull/134) for making `mpz(a)` and `mpq(a)` call the methods `.__mpz__()` and `.__mpq__()` respectively.



---

archive/issue_comments_316591.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-22T14:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316591",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_316592.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-05-22T14:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316592",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_316593.json:
```json
{
    "body": "New snapshot version [gmpy2-snapshot-22.05.17.tar.gz](https://www.labri.fr/perso/vklein/gmpy2-snapshot-22.05.17.tar.gz), checksum has been updated.",
    "created_at": "2017-05-22T14:29:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316593",
    "user": "vklein"
}
```

New snapshot version [gmpy2-snapshot-22.05.17.tar.gz](https://www.labri.fr/perso/vklein/gmpy2-snapshot-22.05.17.tar.gz), checksum has been updated.



---

archive/issue_comments_316594.json:
```json
{
    "body": "Changing component from packages: optional to packages: standard.",
    "created_at": "2017-05-23T14:04:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316594",
    "user": "vklein"
}
```

Changing component from packages: optional to packages: standard.



---

archive/issue_comments_316595.json:
```json
{
    "body": "Why the change in component? If you want to make it standard, it should be discussed on `sage-devel`.",
    "created_at": "2017-05-23T14:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316595",
    "user": "jdemeyer"
}
```

Why the change in component? If you want to make it standard, it should be discussed on `sage-devel`.



---

archive/issue_comments_316596.json:
```json
{
    "body": "Replying to [comment:19 jdemeyer]:\n> Why the change in component? If you want to make it standard, it should be discussed on `sage-devel`.\n\nBecause of #23024. Of course it will be discussed on `sage-devel`. Note that the ticket status is `new` and there is no official release of gmpy2 yet.",
    "created_at": "2017-05-23T14:29:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316596",
    "user": "vdelecroix"
}
```

Replying to [comment:19 jdemeyer]:
> Why the change in component? If you want to make it standard, it should be discussed on `sage-devel`.

Because of #23024. Of course it will be discussed on `sage-devel`. Note that the ticket status is `new` and there is no official release of gmpy2 yet.



---

archive/issue_comments_316597.json:
```json
{
    "body": "Replying to [comment:20 vdelecroix]:\n> Replying to [comment:19 jdemeyer]:\n> > Why the change in component? If you want to make it standard, it should be discussed on `sage-devel`.\n> \n> Because of #23024. Of course it will be discussed on `sage-devel`. Note that the ticket status is `new` and there is no official release of gmpy2 yet.\n\nThen why not keep it optional here and make it standard in #23024?",
    "created_at": "2017-05-23T14:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316597",
    "user": "jdemeyer"
}
```

Replying to [comment:20 vdelecroix]:
> Replying to [comment:19 jdemeyer]:
> > Why the change in component? If you want to make it standard, it should be discussed on `sage-devel`.
> 
> Because of #23024. Of course it will be discussed on `sage-devel`. Note that the ticket status is `new` and there is no official release of gmpy2 yet.

Then why not keep it optional here and make it standard in #23024?



---

archive/issue_comments_316598.json:
```json
{
    "body": "I don't see the point of keeping it optional here. \n\nThis ticket is a prerequisite of #22928 which is a prerequisite of #23024. \n\nIn my point of view, changes concerning gmpy2 package should be listed in this ticket, change concerning gmpy2 integration with sage in #22928 and change specifics to pplpy integration in #23024.",
    "created_at": "2017-05-23T15:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316598",
    "user": "vklein"
}
```

I don't see the point of keeping it optional here. 

This ticket is a prerequisite of #22928 which is a prerequisite of #23024. 

In my point of view, changes concerning gmpy2 package should be listed in this ticket, change concerning gmpy2 integration with sage in #22928 and change specifics to pplpy integration in #23024.



---

archive/issue_comments_316599.json:
```json
{
    "body": "Replying to [comment:22 vklein]:\n> I don't see the point of keeping it optional here.\n\nAnd I don't see any reason to make it standard here. It's not used by anything, so why should it be standard?\n\n\"Just having plans to use it in the future\" is not sufficient reason IMHO to make a package standard.",
    "created_at": "2017-05-23T15:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316599",
    "user": "jdemeyer"
}
```

Replying to [comment:22 vklein]:
> I don't see the point of keeping it optional here.

And I don't see any reason to make it standard here. It's not used by anything, so why should it be standard?

"Just having plans to use it in the future" is not sufficient reason IMHO to make a package standard.



---

archive/issue_comments_316600.json:
```json
{
    "body": "Put in a different way: a Trac ticket should always be reviewed as a single unit. It's fine it the motivation for a Trac ticket comes from a different ticket, but the ticket should still make sense by itself.",
    "created_at": "2017-05-23T15:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316600",
    "user": "jdemeyer"
}
```

Put in a different way: a Trac ticket should always be reviewed as a single unit. It's fine it the motivation for a Trac ticket comes from a different ticket, but the ticket should still make sense by itself.



---

archive/issue_comments_316601.json:
```json
{
    "body": "Changing component from packages: standard to packages: optional.",
    "created_at": "2017-05-23T15:38:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316601",
    "user": "vklein"
}
```

Changing component from packages: standard to packages: optional.



---

archive/issue_comments_316602.json:
```json
{
    "body": "And we can imagine an optional extension using gmpy2's C-API, ok i see your point.",
    "created_at": "2017-05-23T15:38:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316602",
    "user": "vklein"
}
```

And we can imagine an optional extension using gmpy2's C-API, ok i see your point.



---

archive/issue_comments_316603.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-24T13:51:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316603",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_316604.json:
```json
{
    "body": "Updating snapshot to version [gmpy2-snapshot-24.05.17.tar.gz](https://www.labri.fr/perso/vklein/gmpy2-snapshot-24.05.17.tar.gz), the cython interface now include MPZ_Check and MPQ_Check function (Test if an object is of type gmpy2.mpz or gmpy2.mpq respectively)",
    "created_at": "2017-05-24T13:57:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316604",
    "user": "vklein"
}
```

Updating snapshot to version [gmpy2-snapshot-24.05.17.tar.gz](https://www.labri.fr/perso/vklein/gmpy2-snapshot-24.05.17.tar.gz), the cython interface now include MPZ_Check and MPQ_Check function (Test if an object is of type gmpy2.mpz or gmpy2.mpq respectively)



---

archive/issue_comments_316605.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-06-22T14:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316605",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_316606.json:
```json
{
    "body": "Updating snapshot version to [gmpy2-snapshot-22.06.17.tar.gz](https://www.labri.fr/perso/vklein/gmpy2-snapshot-22.06.17.tar.gz)",
    "created_at": "2017-06-22T14:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316606",
    "user": "vklein"
}
```

Updating snapshot version to [gmpy2-snapshot-22.06.17.tar.gz](https://www.labri.fr/perso/vklein/gmpy2-snapshot-22.06.17.tar.gz)



---

archive/issue_comments_316607.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-23T08:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316607",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_316608.json:
```json
{
    "body": "Update snapshot version to [gmpy2-snapshot-23.06.17.tar.gz](https://1drv.ms/u/s!AkXFM4yChnqcqTW60E2WIeAcScha)",
    "created_at": "2017-06-23T08:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316608",
    "user": "vklein"
}
```

Update snapshot version to [gmpy2-snapshot-23.06.17.tar.gz](https://1drv.ms/u/s!AkXFM4yChnqcqTW60E2WIeAcScha)



---

archive/issue_comments_316609.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-11-13T13:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316609",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_316610.json:
```json
{
    "body": "Replying to [ticket:22927 vklein]:\n> For now the check of the package fail\n\nIn that case, I'm not sure whether the package can be accepted. At a minimum, could you add a patch to disable the failing tests, such that `gmpy2` at least formally passes its testsuite?\n\nSecond, you should better document how you obtained this tarball. Posting a tarball on your personal home page without further explanation is not sufficient. Is there any chance you could convince upstream to make a proper release? That would of course be much better.\n\nNote that you have never set this ticket to needs_review. If you want this to be merged in Sage, you'll need to do that.",
    "created_at": "2017-11-13T14:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316610",
    "user": "jdemeyer"
}
```

Replying to [ticket:22927 vklein]:
> For now the check of the package fail

In that case, I'm not sure whether the package can be accepted. At a minimum, could you add a patch to disable the failing tests, such that `gmpy2` at least formally passes its testsuite?

Second, you should better document how you obtained this tarball. Posting a tarball on your personal home page without further explanation is not sufficient. Is there any chance you could convince upstream to make a proper release? That would of course be much better.

Note that you have never set this ticket to needs_review. If you want this to be merged in Sage, you'll need to do that.



---

archive/issue_comments_316611.json:
```json
{
    "body": "> Is there any chance you could convince upstream to make a proper release? \nOur goal has always be to have a proper release of gmpy2. It look like things are progressing well these last weeks. You can look at [issue #146](https://github.com/aleaxit/gmpy/issues/146) if you want more specifics.",
    "created_at": "2017-11-13T14:57:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316611",
    "user": "vklein"
}
```

> Is there any chance you could convince upstream to make a proper release? 
Our goal has always be to have a proper release of gmpy2. It look like things are progressing well these last weeks. You can look at [issue #146](https://github.com/aleaxit/gmpy/issues/146) if you want more specifics.



---

archive/issue_comments_316612.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-14T14:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316612",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_316613.json:
```json
{
    "body": "update package version to [gmpy2-snapshot-14.11.17.tar.gz](https://www.labri.fr/perso/vklein/gmpy2-snapshot-14.11.17.tar.gz)",
    "created_at": "2017-11-14T14:26:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316613",
    "user": "vklein"
}
```

update package version to [gmpy2-snapshot-14.11.17.tar.gz](https://www.labri.fr/perso/vklein/gmpy2-snapshot-14.11.17.tar.gz)



---

archive/issue_comments_316614.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-11-17T10:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316614",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_316615.json:
```json
{
    "body": "rebase on 8.1.rc0 and squash commit",
    "created_at": "2017-11-17T10:47:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316615",
    "user": "vklein"
}
```

rebase on 8.1.rc0 and squash commit



---

archive/issue_comments_316616.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-11-24T15:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316616",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_316617.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-11-24T15:52:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316617",
    "user": "vklein"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_316618.json:
```json
{
    "body": "Running `make ptestlong` now, but I don't expect any problems.",
    "created_at": "2017-11-24T16:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316618",
    "user": "jdemeyer"
}
```

Running `make ptestlong` now, but I don't expect any problems.



---

archive/issue_comments_316619.json:
```json
{
    "body": "(me too (running ptestlong))",
    "created_at": "2017-11-24T16:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316619",
    "user": "vdelecroix"
}
```

(me too (running ptestlong))



---

archive/issue_comments_316620.json:
```json
{
    "body": "Replying to [comment:45 vdelecroix]:\n> (me too (running ptestlong))\n\ngood for me!",
    "created_at": "2017-11-24T17:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316620",
    "user": "vdelecroix"
}
```

Replying to [comment:45 vdelecroix]:
> (me too (running ptestlong))

good for me!



---

archive/issue_comments_316621.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-11-24T18:27:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316621",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_316622.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-12-11T01:03:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22690",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22690#issuecomment-316622",
    "user": "vbraun"
}
```

Resolution: fixed
