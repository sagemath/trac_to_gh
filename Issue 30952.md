# Issue 30952: local quicklisp install interfers with Maxima package building

archive/issues_030952.json:
```json
{
    "body": "CC:  @mkoeppe\n\nthis is what I get with a non-empty ~/quicklisp\n\n```\n...\n /bin/mkdir -p '/home/dimpase/sage/local/var/tmp/sage/build/maxima-5.44.0/inst/home/dimpase/sage/local/share/mime/packages'\n /usr/bin/install -c -m 644 x-mac.xml x-maxima-out.xml '/home/dimpase/sage/local/var/tmp/sage/build/maxima-5.44.0/inst/home/dimpase/sage/local/share/mime/packages'\nMakefile:1011: warning: overriding recipe for target 'rpm'\nMakefile:919: warning: ignoring old recipe for target 'rpm'\nMakefile:1011: warning: overriding recipe for target 'rpm'\nMakefile:919: warning: ignoring old recipe for target 'rpm'\nmake[7]: Nothing to be done for 'install-exec-am'.\n/bin/bash /home/dimpase/sage/local/var/tmp/sage/build/maxima-5.44.0/src/install-sh -d /home/dimpase/sage/local/var/tmp/sage/build/maxima-5.44.0/inst\n\nNow installing the Maxima library as ';;; Loading \"/home/dimpase/quicklisp/setup.lisp\"\n;;; Loading #P\"/home/dimpase/sage/local/lib/ecl/asdf.fas\"\n/home/dimpase/sage/local/lib/ecl//maxima.fas'...\ncp: cannot create regular file ';;; Loading \"/home/dimpase/quicklisp/setup.lisp\"'$'\\n'';;; Loading #P\"/home/dimpase/sage/local/lib/ecl/asdf.fas\"'$'\\n''/home/dimpase/sage/local/lib/ecl//maxima.fas': No such file or directory\n*********************************************************************************************************************************************************************************************\nFailed to install 'src/binary-ecl/maxima.fas' as ';;; Loading \"/home/dimpase/quicklisp/setup.lisp\"\n;;; Loading #P\"/home/dimpase/sage/local/lib/ecl/asdf.fas\"\n/home/dimpase/sage/local/lib/ecl//maxima.fas'.\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/31189\n\n",
    "closed_at": "2021-01-24T10:37:45Z",
    "created_at": "2021-01-06T14:01:03Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "local quicklisp install interfers with Maxima package building",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30952",
    "user": "https://github.com/dimpase"
}
```
CC:  @mkoeppe

this is what I get with a non-empty ~/quicklisp

```
...
 /bin/mkdir -p '/home/dimpase/sage/local/var/tmp/sage/build/maxima-5.44.0/inst/home/dimpase/sage/local/share/mime/packages'
 /usr/bin/install -c -m 644 x-mac.xml x-maxima-out.xml '/home/dimpase/sage/local/var/tmp/sage/build/maxima-5.44.0/inst/home/dimpase/sage/local/share/mime/packages'
Makefile:1011: warning: overriding recipe for target 'rpm'
Makefile:919: warning: ignoring old recipe for target 'rpm'
Makefile:1011: warning: overriding recipe for target 'rpm'
Makefile:919: warning: ignoring old recipe for target 'rpm'
make[7]: Nothing to be done for 'install-exec-am'.
/bin/bash /home/dimpase/sage/local/var/tmp/sage/build/maxima-5.44.0/src/install-sh -d /home/dimpase/sage/local/var/tmp/sage/build/maxima-5.44.0/inst

Now installing the Maxima library as ';;; Loading "/home/dimpase/quicklisp/setup.lisp"
;;; Loading #P"/home/dimpase/sage/local/lib/ecl/asdf.fas"
/home/dimpase/sage/local/lib/ecl//maxima.fas'...
cp: cannot create regular file ';;; Loading "/home/dimpase/quicklisp/setup.lisp"'$'\n'';;; Loading #P"/home/dimpase/sage/local/lib/ecl/asdf.fas"'$'\n''/home/dimpase/sage/local/lib/ecl//maxima.fas': No such file or directory
*********************************************************************************************************************************************************************************************
Failed to install 'src/binary-ecl/maxima.fas' as ';;; Loading "/home/dimpase/quicklisp/setup.lisp"
;;; Loading #P"/home/dimpase/sage/local/lib/ecl/asdf.fas"
/home/dimpase/sage/local/lib/ecl//maxima.fas'.
```

Issue created by migration from https://trac.sagemath.org/ticket/31189





---

archive/issue_comments_441562.json:
```json
{
    "body": "This line from `build/pkgs/maxima/spkg-install.in`:\n\n```\nECLLIB=`ecl -eval \"(princ (SI:GET-LIBRARY-PATHNAME))\" -eval \"(quit)\"`\n```\nis causing it. It's picking up additional output from loading.",
    "created_at": "2021-01-06T18:29:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30952",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30952#issuecomment-441562",
    "user": "https://github.com/mkoeppe"
}
```

This line from `build/pkgs/maxima/spkg-install.in`:

```
ECLLIB=`ecl -eval "(princ (SI:GET-LIBRARY-PATHNAME))" -eval "(quit)"`
```
is causing it. It's picking up additional output from loading.



---

archive/issue_comments_441563.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-01-06T18:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30952",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30952#issuecomment-441563",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_441564.json:
```json
{
    "body": "Please try if this helps\n\n---\nNew commits:",
    "created_at": "2021-01-06T18:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30952",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30952#issuecomment-441564",
    "user": "https://github.com/mkoeppe"
}
```

Please try if this helps

---
New commits:



---

archive/issue_comments_441565.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-01-06T22:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30952",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30952#issuecomment-441565",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_441566.json:
```json
{
    "body": "this works, thanks!",
    "created_at": "2021-01-06T22:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30952",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30952#issuecomment-441566",
    "user": "https://github.com/dimpase"
}
```

this works, thanks!



---

archive/issue_comments_441567.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-01-24T10:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30952",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30952#issuecomment-441567",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_081516.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-24T10:37:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30952",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30952#event-81516"
}
```
