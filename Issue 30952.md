# Issue 30952: local quicklisp install interfers with Maxima package building

Issue created by migration from https://trac.sagemath.org/ticket/31189

Original creator: dimpase

Original creation time: 2021-01-06 14:01:03

CC:  mkoeppe

this is what I get with a non-empty ~/quicklisp

```
...
 /bin/mkdir -p '/home/dimpase/sage/local/var/tmp/sage/build/maxima-5.44.0/inst/home/dimpase/sage/local/share/mime/packages'
 /usr/bin/install -c -m 644 x-mac.xml x-maxima-out.xml '/home/dimpase/sage/local/var/tmp/sage/build/maxima-5.44.0/inst/home/dimpase/sage/local/share/mime/packages'
Makefile:1011: warning: overriding recipe for target 'rpm'
Makefile:919: warning: ignoring old recipe for target 'rpm'
Makefile:1011: warning: overriding recipe for target 'rpm'
Makefile:919: warning: ignoring old recipe for target 'rpm'
make[7]: Nothing to be done for 'install-exec-am'.
/bin/bash /home/dimpase/sage/local/var/tmp/sage/build/maxima-5.44.0/src/install-sh -d /home/dimpase/sage/local/var/tmp/sage/build/maxima-5.44.0/inst

Now installing the Maxima library as ';;; Loading "/home/dimpase/quicklisp/setup.lisp"
;;; Loading #P"/home/dimpase/sage/local/lib/ecl/asdf.fas"
/home/dimpase/sage/local/lib/ecl//maxima.fas'...
cp: cannot create regular file ';;; Loading "/home/dimpase/quicklisp/setup.lisp"'$'\n'';;; Loading #P"/home/dimpase/sage/local/lib/ecl/asdf.fas"'$'\n''/home/dimpase/sage/local/lib/ecl//maxima.fas': No such file or directory
*********************************************************************************************************************************************************************************************
Failed to install 'src/binary-ecl/maxima.fas' as ';;; Loading "/home/dimpase/quicklisp/setup.lisp"
;;; Loading #P"/home/dimpase/sage/local/lib/ecl/asdf.fas"
/home/dimpase/sage/local/lib/ecl//maxima.fas'.
```



---

Comment by mkoeppe created at 2021-01-06 18:29:07

This line from `build/pkgs/maxima/spkg-install.in`:

```
ECLLIB=`ecl -eval "(princ (SI:GET-LIBRARY-PATHNAME))" -eval "(quit)"`
```

is causing it. It's picking up additional output from loading.


---

Comment by mkoeppe created at 2021-01-06 18:47:39

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-01-06 18:47:39

Please try if this helps
----
New commits:


---

Comment by dimpase created at 2021-01-06 22:19:30

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2021-01-06 22:19:30

this works, thanks!


---

Comment by vbraun created at 2021-01-24 10:37:45

Resolution: fixed
