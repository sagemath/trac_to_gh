# Issue 16223: a cache for OA/TD/MOLS existence

Issue created by migration from Trac.

Original creator: ncohen

Original creation time: 2014-06-09 12:30:38

CC:  vdelecroix

Here it is ! Short and efficient, but OA-specific.

Right now it is not linked wth any constructor, it will be done while #16347 is implemented.

The same thing will have to be done later for `incomplete_orthogonal_array`.

Nathann


---

Comment by ncohen created at 2014-06-09 12:31:05

Changing status from new to needs_review.


---

Comment by git created at 2014-06-09 12:31:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2014-06-09 15:08:32

Hi Nathann,

I implemented the changes associated to the following comments in u/vdelecroix/16460.

- the default for `min_false` should be `n+2`? No?
- with the current implementation, the `_set_OA_cache` set a new value to `_OA_cache[n]` even if nothing has changed. This is bad from the global warming point of view.
- it would be better that the keys and values are only Python `int` or only Sage `Integer` but not a mix.

On the other hand, wouldn't it be better to have this in `designs_pyx.pyx`?

Vincent


---

Comment by ncohen created at 2014-06-09 15:52:08

Yo !

> - the default for `min_false` should be `n+2`? No?

Aahahah right. I had thought about this afterwards and forgot to change it, but I had comforted myself before by figuring out that it had actually no effect on the answers. Because "True" is tested before "False" `:-)`

> - with the current implementation, the `_set_OA_cache` set a new value to `_OA_cache[n]` even if nothing has changed. This is bad from the global warming point of view.

And you think that your added "if" have a zero cost ? To me it is rather useless and adds lines for no point...

> - it would be better that the keys and values are only Python `int` or only Sage `Integer` but not a mix.

I'm not sensible to these problems `:-P`

> On the other hand, wouldn't it be better to have this in `designs_pyx.pyx`?

Ahahah. We are not there yet. There is a long road in front of us before that this caching mechanism represent a non-negligible part of the computations `:-P`

Okay... Well, if you insist on having this "best" test I guess it can go although really I don't see the point... Otherwise if you are okay with not including it I would be glad to add to my branch the part of your commit that converts k,n to Python 'int' if it makes you sleep easier.

Nathann


---

Comment by vdelecroix created at 2014-06-09 19:24:31

Replying to [comment:4 ncohen]:
> Yo !
> 
> > - the default for `min_false` should be `n+2`? No?
> 
> Aahahah right. I had thought about this afterwards and forgot to change it, but I had comforted myself before by figuring out that it had actually no effect on the answers. Because "True" is tested before "False" `:-)`

> > - with the current implementation, the `_set_OA_cache` set a new value to `_OA_cache[n]` even if nothing has changed. This is bad from the global warming point of view.
> 
> And you think that your added "if" have a zero cost ? To me it is rather useless and adds lines for no point...
> 
> > - it would be better that the keys and values are only Python `int` or only Sage `Integer` but not a mix.
> 
> I'm not sensible to these problems `:-P`
> 
> > On the other hand, wouldn't it be better to have this in `designs_pyx.pyx`?
> 
> Ahahah. We are not there yet. There is a long road in front of us before that this caching mechanism represent a non-negligible part of the computations `:-P`
> 
> Okay... Well, if you insist on having this "best" test I guess it can go although really I don't see the point... Otherwise if you are okay with not including it I would be glad to add to my branch the part of your commit that converts k,n to Python 'int' if it makes you sleep easier.

Please convert to int *and* set the default `False` to `n+2`. Otherwise, you assume that there is no projective plane except for prime powers.


---

Comment by git created at 2014-06-09 21:03:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2014-06-09 21:04:01

Done !

Nathann


---

Comment by vdelecroix created at 2014-06-09 21:43:51

I set to positive review. But anyway, it will be interesting only when it will be integrated in the code.

Vincent


---

Comment by vdelecroix created at 2014-06-09 21:43:51

Changing status from needs_review to positive_review.


---

Comment by git created at 2014-06-12 14:22:49

Changing status from positive_review to needs_review.


---

Comment by git created at 2014-06-12 14:22:49

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:


---

Comment by ncohen created at 2014-06-12 14:23:41

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-06-14 19:59:29

Resolution: fixed
