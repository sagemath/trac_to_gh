# Issue 14397: table.__repr__() replaces True and False by 1 and 0

Issue created by migration from Trac.

Original creator: slabbe

Original creation time: 2013-05-16 20:31:17

Assignee: jason

Using sage-5.8 with #13131 merged in sage-5.10.beta0, I get


```
sage: table([('a','b','c'), (True, False,None)]) 
  a      b       c                               
  1      0       None                            
```


I was expecting :


```
sage: table([('a','b','c'), (True, False,None)]) 
  a      b       c                               
  True   False   None                            
```



---

Comment by jhpalmieri created at 2013-05-16 20:53:46

Maybe the calls to `format` should include `!s` in the string? As in

```diff
--- a/sage/misc/table.py
+++ b/sage/misc/table.py
`@``@` -500,7 +500,7 `@``@`
             widths = widths[1:]
 
         for (entry, width) in zip(row, widths):
-            s += ("{:" + align_char + str(width) + "}").format(entry)
+            s += ("{!s:" + align_char + str(width) + "}").format(entry)
             if frame:
                 s += " | "
             else:
```

and another similar change. (Untested.)


---

Comment by slabbe created at 2013-05-16 21:05:02

I did not know about this `!s` I have never used this format syntax for strings...

Related to this same line, I got the following deprecation warning when I called table the first time in my session :


```python
/Users/slabbe/Applications/sage-5.8/local/lib/python2.7/site-packages/sage/misc/table.py:503:
PendingDeprecationWarning: object.__format__ with a non-empty format string is deprecated
  s += ("{:" + align_char + str(width) + "}").format(entry)
```


Do you get such warning also?

UPDATE : I am not able to reproduce the warning...


---

Comment by slabbe created at 2013-05-16 21:31:39

After reading http://docs.python.org/2/library/string.html

and doing some tests, I now understand your suggestion :


```
sage: ("{:^10}").format(False)  
'    0     '        
sage: ("{!s:^10}").format(False)
'  False   '                    
sage: ("{!r:^10}").format(False)
'  False   '   
```



```
sage: ("{:^10}").format(None)   
'   None   '                    
sage: ("{!s:^10}").format(None) 
'   None   '                    
sage: ("{!r:^10}").format(None) 
'   None   '                                     
```


I think `!s` is preferable to `!r`, so I agree with your diff.


---

Comment by jhpalmieri created at 2013-05-17 17:05:21

Here's a patch. By the way, I used this format syntax as an experiment, because it's going to be the standard way of doing things in Python 3.


---

Comment by jhpalmieri created at 2013-05-17 17:05:21

Changing status from new to needs_review.


---

Attachment


---

Comment by slabbe created at 2013-05-17 20:16:01

Changing status from needs_review to positive_review.


---

Comment by slabbe created at 2013-05-17 20:16:01

All tests passed on `sage/misc/table.py`. Problem shown in the ticket is solved. Doc builds fine. Patch have a commit message. Positive review. (Tested using sage-5.8 with #13131.)

I believe the patchbot plugin failed blue icon issue is unrelated.


---

Comment by jdemeyer created at 2013-05-22 08:20:03

Resolution: fixed
