# Issue 31794: patchbots fail to build mpmath

archive/issues_031794.json:
```json
{
    "body": "CC:  dimpase mkoeppe @rocky fbissey isuruf @kliem\n\nSee https://patchbot.sagemath.org/ticket/0/\n\nPossibly related to `pip` and `setuptools_scm`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/32031\n\n",
    "created_at": "2021-06-22T08:45:14Z",
    "labels": [
        "PLEASE CHANGE",
        "critical",
        "bug"
    ],
    "title": "patchbots fail to build mpmath",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31794",
    "user": "tmonteil"
}
```
CC:  dimpase mkoeppe @rocky fbissey isuruf @kliem

See https://patchbot.sagemath.org/ticket/0/

Possibly related to `pip` and `setuptools_scm`.

Issue created by migration from https://trac.sagemath.org/ticket/32031





---

archive/issue_comments_454268.json:
```json
{
    "body": "\n```\n[mpmath-1.2.1]     ERROR: Could not find a version that satisfies the requirement setuptools_scm>=1.7.0 (from versions: none)\n[mpmath-1.2.1]     ERROR: No matching distribution found for setuptools_scm>=1.7.0\n[mpmath-1.2.1]     Traceback (most recent call last):\n[mpmath-1.2.1]       File \"/home/chapoton/sage/local/lib/python3.9/site-packages/setuptools/installer.py\", line 75, in fetch_build_egg\n[mpmath-1.2.1]         subprocess.check_call(cmd)\n[mpmath-1.2.1]       File \"/usr/lib/python3.9/subprocess.py\", line 373, in check_call\n[mpmath-1.2.1]         raise CalledProcessError(retcode, cmd)\n[mpmath-1.2.1]     subprocess.CalledProcessError: Command '['/home/chapoton/sage/local/bin/python3', '-m', 'pip', '--disable-pip-version-check', 'wheel', '--no-deps', '-w', '/tmp/tmpqau7q1i8', '--quiet', 'setuptools_scm>=1.7.0']' returned non-zero exit status 1.\n```\n\n\nDespite the dependencies declared in `build/pkgs/mpmath/dependencies`, it seems `setuptools_scm` has not been installed",
    "created_at": "2021-06-22T13:16:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454268",
    "user": "mkoeppe"
}
```


```
[mpmath-1.2.1]     ERROR: Could not find a version that satisfies the requirement setuptools_scm>=1.7.0 (from versions: none)
[mpmath-1.2.1]     ERROR: No matching distribution found for setuptools_scm>=1.7.0
[mpmath-1.2.1]     Traceback (most recent call last):
[mpmath-1.2.1]       File "/home/chapoton/sage/local/lib/python3.9/site-packages/setuptools/installer.py", line 75, in fetch_build_egg
[mpmath-1.2.1]         subprocess.check_call(cmd)
[mpmath-1.2.1]       File "/usr/lib/python3.9/subprocess.py", line 373, in check_call
[mpmath-1.2.1]         raise CalledProcessError(retcode, cmd)
[mpmath-1.2.1]     subprocess.CalledProcessError: Command '['/home/chapoton/sage/local/bin/python3', '-m', 'pip', '--disable-pip-version-check', 'wheel', '--no-deps', '-w', '/tmp/tmpqau7q1i8', '--quiet', 'setuptools_scm>=1.7.0']' returned non-zero exit status 1.
```


Despite the dependencies declared in `build/pkgs/mpmath/dependencies`, it seems `setuptools_scm` has not been installed



---

archive/issue_comments_454269.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to build.",
    "created_at": "2021-06-22T13:22:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454269",
    "user": "mkoeppe"
}
```

Changing component from PLEASE CHANGE to build.



---

archive/issue_comments_454270.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2021-06-22T13:22:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454270",
    "user": "mkoeppe"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_454271.json:
```json
{
    "body": "Something similar happened before in #31915 - are our order-only dependencies broken?",
    "created_at": "2021-06-22T13:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454271",
    "user": "mkoeppe"
}
```

Something similar happened before in #31915 - are our order-only dependencies broken?



---

archive/issue_comments_454272.json:
```json
{
    "body": "What's the version of `make` on the machines where this fails?",
    "created_at": "2021-06-22T13:42:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454272",
    "user": "mkoeppe"
}
```

What's the version of `make` on the machines where this fails?



---

archive/issue_comments_454273.json:
```json
{
    "body": "\n```\nkliem@cofio:~/localhome/sage$ make --version\nGNU Make 4.2.1\nBuilt for x86_64-pc-linux-gnu\nCopyright (C) 1988-2016 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n```\n",
    "created_at": "2021-06-22T13:44:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454273",
    "user": "@kliem"
}
```


```
kliem@cofio:~/localhome/sage$ make --version
GNU Make 4.2.1
Built for x86_64-pc-linux-gnu
Copyright (C) 1988-2016 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
```




---

archive/issue_comments_454274.json:
```json
{
    "body": "It would be helpful to use `make --debug=all` to see what's happening with the dependencies.",
    "created_at": "2021-06-22T13:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454274",
    "user": "mkoeppe"
}
```

It would be helpful to use `make --debug=all` to see what's happening with the dependencies.



---

archive/issue_comments_454275.json:
```json
{
    "body": "Ok. So what part do I need to rebuilt then?",
    "created_at": "2021-06-22T13:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454275",
    "user": "@kliem"
}
```

Ok. So what part do I need to rebuilt then?



---

archive/issue_comments_454276.json:
```json
{
    "body": "I'd say do `make setuptools_scm-clean mpmath-clean` and then run `make --debug=all mpmath`",
    "created_at": "2021-06-22T13:50:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454276",
    "user": "mkoeppe"
}
```

I'd say do `make setuptools_scm-clean mpmath-clean` and then run `make --debug=all mpmath`



---

archive/issue_comments_454277.json:
```json
{
    "body": "My guess is that #29013 (merged in 9.4.beta0) somehow managed to break order-only dependencies",
    "created_at": "2021-06-22T13:52:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454277",
    "user": "mkoeppe"
}
```

My guess is that #29013 (merged in 9.4.beta0) somehow managed to break order-only dependencies



---

archive/issue_comments_454278.json:
```json
{
    "body": "Well it fixed it. Thanks. But now I'm confused and I don't know what happened.",
    "created_at": "2021-06-22T13:55:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454278",
    "user": "@kliem"
}
```

Well it fixed it. Thanks. But now I'm confused and I don't know what happened.



---

archive/issue_comments_454279.json:
```json
{
    "body": "Should I fix the patchbot like this?",
    "created_at": "2021-06-22T14:15:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454279",
    "user": "@kliem"
}
```

Should I fix the patchbot like this?



---

archive/issue_comments_454280.json:
```json
{
    "body": "Can you post the debug output please?",
    "created_at": "2021-06-22T14:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454280",
    "user": "mkoeppe"
}
```

Can you post the debug output please?



---

archive/issue_comments_454281.json:
```json
{
    "body": "Attachment [debug.log](tarball://root/attachments/some-uuid/ticket32031/debug.log) by @kliem created at 2021-06-22 14:22:06\n\nmpmath with debug",
    "created_at": "2021-06-22T14:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454281",
    "user": "@kliem"
}
```

Attachment [debug.log](tarball://root/attachments/some-uuid/ticket32031/debug.log) by @kliem created at 2021-06-22 14:22:06

mpmath with debug



---

archive/issue_comments_454282.json:
```json
{
    "body": "Everything looks fine in this log...",
    "created_at": "2021-06-22T15:05:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454282",
    "user": "mkoeppe"
}
```

Everything looks fine in this log...



---

archive/issue_comments_454283.json:
```json
{
    "body": "\n```\n[setuptools_scm-6.0.1] Ignoring indexes: https://pypi.org/simple\n```\n\nCould this make the difference?",
    "created_at": "2021-06-22T15:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454283",
    "user": "@kliem"
}
```


```
[setuptools_scm-6.0.1] Ignoring indexes: https://pypi.org/simple
```

Could this make the difference?



---

archive/issue_comments_454284.json:
```json
{
    "body": "\"Ignoring indexes\" is normal - we do not use PyPI for installing normal packages. (See `build/bin/sage-dist-helpers` (`sdh_pip_install`)",
    "created_at": "2021-06-22T16:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454284",
    "user": "mkoeppe"
}
```

"Ignoring indexes" is normal - we do not use PyPI for installing normal packages. (See `build/bin/sage-dist-helpers` (`sdh_pip_install`)



---

archive/issue_comments_454285.json:
```json
{
    "body": "Replying to [comment:6 mkoeppe]:\n> It would be helpful to use `make --debug=all` to see what's happening with the dependencies.\n\nIn my biased opinion, if you feel the need to run `make --debug=all`, `remake -x` is better.",
    "created_at": "2021-06-22T16:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454285",
    "user": "@rocky"
}
```

Replying to [comment:6 mkoeppe]:
> It would be helpful to use `make --debug=all` to see what's happening with the dependencies.

In my biased opinion, if you feel the need to run `make --debug=all`, `remake -x` is better.



---

archive/issue_comments_454286.json:
```json
{
    "body": "I gather that `setuptools_scm` must really depend on `setuptools`, not just order-only.\nBecause if I rebuild `setuptools`, clean `mpmath` and try building `mpmath` again (without cleaning `setuptools_scm`), it gets stuck,\nas follows:\n\n```\n[mpmath-1.2.1]     Running setup.py (path:/private/var/folders/lh/tzyg2vbn4z99vg__rg2_t_f80000gs/T/pip-req-build-wmba2pau/setup.py) egg_info for package from file:///Users/dima/sage/local/var/tmp/sage/build/mpmath-1.2.1/src\n[mpmath-1.2.1]     Created temporary directory: /private/var/folders/lh/tzyg2vbn4z99vg__rg2_t_f80000gs/T/pip-pip-egg-info-3tzuenlm\n[mpmath-1.2.1]     Running command python setup.py egg_info\n[mpmath-1.2.1]     WARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ConnectTimeoutError(<pip._vendor.urllib3.connection.HTTPSConnection object at 0x10d35a910>, 'Connection to 192.0.2.0 timed out. (connect timeout=15)')': /simple/setuptools-scm/\n```\n",
    "created_at": "2021-06-22T16:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454286",
    "user": "dimpase"
}
```

I gather that `setuptools_scm` must really depend on `setuptools`, not just order-only.
Because if I rebuild `setuptools`, clean `mpmath` and try building `mpmath` again (without cleaning `setuptools_scm`), it gets stuck,
as follows:

```
[mpmath-1.2.1]     Running setup.py (path:/private/var/folders/lh/tzyg2vbn4z99vg__rg2_t_f80000gs/T/pip-req-build-wmba2pau/setup.py) egg_info for package from file:///Users/dima/sage/local/var/tmp/sage/build/mpmath-1.2.1/src
[mpmath-1.2.1]     Created temporary directory: /private/var/folders/lh/tzyg2vbn4z99vg__rg2_t_f80000gs/T/pip-pip-egg-info-3tzuenlm
[mpmath-1.2.1]     Running command python setup.py egg_info
[mpmath-1.2.1]     WARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ConnectTimeoutError(<pip._vendor.urllib3.connection.HTTPSConnection object at 0x10d35a910>, 'Connection to 192.0.2.0 timed out. (connect timeout=15)')': /simple/setuptools-scm/
```




---

archive/issue_comments_454287.json:
```json
{
    "body": "That seems to be exacly the problem. Do you want to provide a branch?",
    "created_at": "2021-06-22T18:08:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454287",
    "user": "@kliem"
}
```

That seems to be exacly the problem. Do you want to provide a branch?



---

archive/issue_comments_454288.json:
```json
{
    "body": "Replying to [comment:16 gh-rocky]:\n> Replying to [comment:6 mkoeppe]:\n> > It would be helpful to use `make --debug=all` to see what's happening with the dependencies.\n> \n> In my biased opinion, if you feel the need to run `make --debug=all`, `remake -x` is better. \nThanks! I'll try it out next time I feel this need",
    "created_at": "2021-06-22T18:30:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454288",
    "user": "mkoeppe"
}
```

Replying to [comment:16 gh-rocky]:
> Replying to [comment:6 mkoeppe]:
> > It would be helpful to use `make --debug=all` to see what's happening with the dependencies.
> 
> In my biased opinion, if you feel the need to run `make --debug=all`, `remake -x` is better. 
Thanks! I'll try it out next time I feel this need



---

archive/issue_comments_454289.json:
```json
{
    "body": "Replying to [comment:17 dimpase]:\n> I gather that `setuptools_scm` must really depend on `setuptools`, not just order-only.\n> Because if I rebuild `setuptools`, clean `mpmath` and try building `mpmath` again (without cleaning `setuptools_scm`), it gets stuck,\n> as follows:\n> {{{\n> [mpmath-1.2.1]     Running setup.py (path:/private/var/folders/lh/tzyg2vbn4z99vg__rg2_t_f80000gs/T/pip-req-build-wmba2pau/setup.py) egg_info for package from file:///Users/dima/sage/local/var/tmp/sage/build/mpmath-1.2.1/src\n> [mpmath-1.2.1]     Created temporary directory: /private/var/folders/lh/tzyg2vbn4z99vg__rg2_t_f80000gs/T/pip-pip-egg-info-3tzuenlm\n> [mpmath-1.2.1]     Running command python setup.py egg_info\n> [mpmath-1.2.1]     WARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ConnectTimeoutError(<pip._vendor.urllib3.connection.HTTPSConnection object at 0x10d35a910>, 'Connection to 192.0.2.0 timed out. (connect timeout=15)')': /simple/setuptools-scm/\n> }}}\n\nAfter rebuilding `setuptools`, is `setuptools_scm` still present or did it somehow get lost?",
    "created_at": "2021-06-22T18:34:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454289",
    "user": "mkoeppe"
}
```

Replying to [comment:17 dimpase]:
> I gather that `setuptools_scm` must really depend on `setuptools`, not just order-only.
> Because if I rebuild `setuptools`, clean `mpmath` and try building `mpmath` again (without cleaning `setuptools_scm`), it gets stuck,
> as follows:
> {{{
> [mpmath-1.2.1]     Running setup.py (path:/private/var/folders/lh/tzyg2vbn4z99vg__rg2_t_f80000gs/T/pip-req-build-wmba2pau/setup.py) egg_info for package from file:///Users/dima/sage/local/var/tmp/sage/build/mpmath-1.2.1/src
> [mpmath-1.2.1]     Created temporary directory: /private/var/folders/lh/tzyg2vbn4z99vg__rg2_t_f80000gs/T/pip-pip-egg-info-3tzuenlm
> [mpmath-1.2.1]     Running command python setup.py egg_info
> [mpmath-1.2.1]     WARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ConnectTimeoutError(<pip._vendor.urllib3.connection.HTTPSConnection object at 0x10d35a910>, 'Connection to 192.0.2.0 timed out. (connect timeout=15)')': /simple/setuptools-scm/
> }}}

After rebuilding `setuptools`, is `setuptools_scm` still present or did it somehow get lost?



---

archive/issue_comments_454290.json:
```json
{
    "body": "\n```\nModuleNotFoundError: No module named 'setuptools_scm'\n```\n\nSo somehow got lost somehow.\n\nBut `sage --standard` claims it's installed somehow.",
    "created_at": "2021-06-22T18:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454290",
    "user": "@kliem"
}
```


```
ModuleNotFoundError: No module named 'setuptools_scm'
```

So somehow got lost somehow.

But `sage --standard` claims it's installed somehow.



---

archive/issue_comments_454291.json:
```json
{
    "body": "It's bad old code at the top of `build/pkgs/setuptools/spkg-install.in`",
    "created_at": "2021-06-22T18:37:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454291",
    "user": "mkoeppe"
}
```

It's bad old code at the top of `build/pkgs/setuptools/spkg-install.in`



---

archive/issue_comments_454292.json:
```json
{
    "body": "... which just nukes everything in site-packages that starts with \"setuptools\". Ouch.",
    "created_at": "2021-06-22T18:38:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454292",
    "user": "mkoeppe"
}
```

... which just nukes everything in site-packages that starts with "setuptools". Ouch.



---

archive/issue_comments_454293.json:
```json
{
    "body": "Try with this change please\n----\nNew commits:",
    "created_at": "2021-06-22T18:44:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454293",
    "user": "mkoeppe"
}
```

Try with this change please
----
New commits:



---

archive/issue_comments_454294.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-06-22T18:44:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454294",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_454295.json:
```json
{
    "body": "OK, this works, thanks.",
    "created_at": "2021-06-22T19:02:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454295",
    "user": "dimpase"
}
```

OK, this works, thanks.



---

archive/issue_comments_454296.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-22T19:02:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454296",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_454297.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-06-22T19:42:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454297",
    "user": "mkoeppe"
}
```

Thanks!



---

archive/issue_comments_454298.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-06-22T20:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454298",
    "user": "strogdon"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_454299.json:
```json
{
    "body": "This doesn't work here. After applying the patch and\n\n```\n./bootstrap\n./configure\nmake\n```\n\nSee attached mpmath and py logs.",
    "created_at": "2021-06-22T20:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454299",
    "user": "strogdon"
}
```

This doesn't work here. After applying the patch and

```
./bootstrap
./configure
make
```

See attached mpmath and py logs.



---

archive/issue_comments_454300.json:
```json
{
    "body": "Attachment [py-1.10.0.log](tarball://root/attachments/some-uuid/ticket32031/py-1.10.0.log) by strogdon created at 2021-06-22 20:33:44",
    "created_at": "2021-06-22T20:33:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454300",
    "user": "strogdon"
}
```

Attachment [py-1.10.0.log](tarball://root/attachments/some-uuid/ticket32031/py-1.10.0.log) by strogdon created at 2021-06-22 20:33:44



---

archive/issue_comments_454301.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2021-06-22T20:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454301",
    "user": "strogdon"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_454302.json:
```json
{
    "body": "OK, doing\n\n```\n./sage -f setuptools_scm\n```\n\nfixed things.",
    "created_at": "2021-06-22T20:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454302",
    "user": "strogdon"
}
```

OK, doing

```
./sage -f setuptools_scm
```

fixed things.



---

archive/issue_comments_454303.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-29T17:39:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31794",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31794#issuecomment-454303",
    "user": "vbraun"
}
```

Resolution: fixed
