# Issue 27190: Don't use base except: statements

Issue created by migration from https://trac.sagemath.org/ticket/27427

Original creator: jdemeyer

Original creation time: 2019-03-05 11:39:13

It's well known that `except:` should be avoided because it catches things like `KeyboardInterrupt`.


---

Comment by jdemeyer created at 2019-03-05 14:07:35

New commits:


---

Comment by jdemeyer created at 2019-03-05 14:07:35

Changing status from new to needs_review.


---

Comment by chapoton created at 2019-03-05 15:19:02

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2019-03-05 15:19:02

some failing doctests in inverse doctests, see patchbot


---

Comment by tscrim created at 2019-03-05 22:33:30

Seems like the failures are from the change in `rings/valuation/valuation_space.py`.


---

Comment by chapoton created at 2019-03-06 16:52:08

This is because `_test_inverse` in the same file is ignoring the `NotImplementedError` cases only.


---

Comment by jdemeyer created at 2019-03-06 17:01:04

Replying to [comment:6 chapoton]:
> This is because `_test_inverse` in the same file is ignoring the `NotImplementedError` cases only.

That's wrong: inverting a non-invertible element shouldn't raise `NotImplementedError`.


---

Comment by git created at 2019-03-07 10:34:03

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2019-03-07 10:42:17

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2019-03-07 11:26:24

I think the code in `matrix_gps` should catch a `ValueError` as the `is_positive_definite()` will fail with one when the matrix (group) is defined over a field without an embedding into *C*.


---

Comment by chapoton created at 2019-03-07 13:16:25

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2019-03-07 13:16:25

doctests on inverse are still not fixed


---

Comment by jdemeyer created at 2019-03-07 14:30:17

Sorry for the mess, I'm doing too many things at the same time.


---

Comment by jdemeyer created at 2019-03-07 14:58:39

Replying to [comment:11 chapoton]:
> doctests on inverse are still not fixed

Are you sure? I ran all tests in `src/sage/rings` and it worked fine.

(edit: never mind, I ran all tests without `--long` and the failing ones all have `# long time`)


---

Comment by chapoton created at 2019-03-07 14:59:55

pathcbots say that long test fails on 0104d64536e08abf61b4e


---

Comment by git created at 2019-03-07 16:03:17

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2019-03-08 15:45:48

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2019-03-08 15:47:31

I think that this fixes all comments. I decided to make some changes to the handling of matrix groups, printing "positive definite" when it is positive definite (previously, it only printed "non positive definite").


---

Comment by jdemeyer created at 2019-03-08 15:47:31

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2019-03-08 15:49:24

Note that the other places where I removed a `try`/`except` block was with code of the form

```
try:
    ...
except:
    raise ...
```

In general, I don't like this code structure, I prefer the keep the original exception (which often contains more useful information).


---

Comment by chapoton created at 2019-03-08 18:50:03

ok, let it be..


---

Comment by chapoton created at 2019-03-08 18:50:03

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-03-11 22:42:09

Resolution: fixed


---

Comment by soehms created at 2019-03-13 21:21:28

Thanks Jeroen, for correcting my mistakes!
Thanks Travis and Frédéric for your help on that!
