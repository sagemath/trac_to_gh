# Issue 22973: immediate dominators and strong articulation points

Issue created by migration from https://trac.sagemath.org/ticket/23210

Original creator: dcoudert

Original creation time: 2017-06-10 17:58:56

Adds methods `immediate_dominators` and `strong_articulation_points` for directed graphs.


---

Comment by dcoudert created at 2017-06-10 18:45:32

New commits:


---

Comment by dcoudert created at 2017-06-10 18:45:32

Changing status from new to needs_review.


---

Comment by git created at 2017-06-11 07:28:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2017-06-11 23:09:01

Quick comments:

- Use `r` instead of `root` in the doc as it gives better latex.
- No period (full stop) at the end here:
  {{{
        - ``root`` -- a vertex of the digraph, the root of the
          immediate dominators tree.
  }}}
- ~if not root in self:` to ` if root not in self:`.
- Stylistic, but I prefer `SAP = []` to `SAP = list()` as it is shorter (and IMO, cleaner)
- How difficult would it be to modify `immediate_dominators` to have an argument to handle the reversed case? This would make it so you do not have to construct the reversed `DiGraph`, which could be very costly in terms of time/memory. At least, this seems like it would be straightforward to do.

I will give more detailed comments later.


---

Comment by git created at 2017-06-12 07:01:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2017-06-12 07:13:38

Thank you for your comments. 

To handle the reversed case in `immediate_dominators`, we need a reversed (or backward) depth first search. This is currently implemented only for the `c_graph` backend.
What I can do is to check in `immediate_dominators` if the backend is `c_graph` and raise an error if it is not the case and the reverse parameter is True. Then, in the `strong_articulation_points` method, I can make a copy of the digraph using the `c_graph` backend if self uses a different backend.
I will also have to check the backend used in `strongly_connected_component_subgraphs`.

Do you have other suggestions?


---

Comment by dcoudert created at 2017-06-12 09:52:33

Another issue: the current code is not working with immutable graphs...


---

Comment by tscrim created at 2017-06-12 12:38:05

Ah, right, reversing a dfs is not the same thing on the reverse graph. Then don't worry about it; premature optimization, root of all evil, and whatnot.


---

Comment by dcoudert created at 2017-06-12 13:01:27

Since I have to take care of 1) immutable graphs and 2) that I should not modify the input graph (I'm currently removing/adding edges to test if `r` is a SAP, I must:
- if the input graph is strongly connected: make a mutable copy, preferably using a backend with the reverse DFS option
- for each strongly connected component, get a mutable subgraph, preferably using the good backend

Then in method `immediate_dominators`, I could add a parameter `reverse` that could be used only if the backend has the desirable method (otherwise raise an error).

do you have other suggestions before I start modifying the code?


---

Comment by git created at 2017-06-12 15:49:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2017-06-12 15:53:19

This should solve our issues.


---

Comment by dcoudert created at 2017-07-07 03:51:46

Ready to review


---

Comment by git created at 2017-08-11 11:14:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2017-08-11 15:14:36

Sorry for letting this drop off my radar. LGTM.


---

Comment by tscrim created at 2017-08-11 15:14:36

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2017-08-11 15:55:04

Thank you Travis.


---

Comment by vbraun created at 2017-08-13 09:44:52

Resolution: fixed
