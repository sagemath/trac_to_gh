# Issue 22973: immediate dominators and strong articulation points

archive/issues_022973.json:
```json
{
    "body": "Adds methods `immediate_dominators` and `strong_articulation_points` for directed graphs.\n\nIssue created by migration from https://trac.sagemath.org/ticket/23210\n\n",
    "created_at": "2017-06-10T17:58:56Z",
    "labels": [
        "component: graph theory",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "immediate dominators and strong articulation points",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22973",
    "user": "https://github.com/dcoudert"
}
```
Adds methods `immediate_dominators` and `strong_articulation_points` for directed graphs.

Issue created by migration from https://trac.sagemath.org/ticket/23210





---

archive/issue_comments_321071.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-06-10T18:45:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321071",
    "user": "https://github.com/dcoudert"
}
```

New commits:



---

archive/issue_comments_321072.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-06-10T18:45:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321072",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_321073.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-11T07:28:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321073",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_321074.json:
```json
{
    "body": "Quick comments:\n\n- Use `r` instead of `root` in the doc as it gives better latex.\n- No period (full stop) at the end here:\n  {{{\n        - ``root`` -- a vertex of the digraph, the root of the\n          immediate dominators tree.\n  }}}\n- ~if not root in self:` to ` if root not in self:`.\n- Stylistic, but I prefer `SAP = []` to `SAP = list()` as it is shorter (and IMO, cleaner)\n- How difficult would it be to modify `immediate_dominators` to have an argument to handle the reversed case? This would make it so you do not have to construct the reversed `DiGraph`, which could be very costly in terms of time/memory. At least, this seems like it would be straightforward to do.\n\nI will give more detailed comments later.",
    "created_at": "2017-06-11T23:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321074",
    "user": "https://github.com/tscrim"
}
```

Quick comments:

- Use `r` instead of `root` in the doc as it gives better latex.
- No period (full stop) at the end here:
  {{{
        - ``root`` -- a vertex of the digraph, the root of the
          immediate dominators tree.
  }}}
- ~if not root in self:` to ` if root not in self:`.
- Stylistic, but I prefer `SAP = []` to `SAP = list()` as it is shorter (and IMO, cleaner)
- How difficult would it be to modify `immediate_dominators` to have an argument to handle the reversed case? This would make it so you do not have to construct the reversed `DiGraph`, which could be very costly in terms of time/memory. At least, this seems like it would be straightforward to do.

I will give more detailed comments later.



---

archive/issue_comments_321075.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-12T07:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321075",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_321076.json:
```json
{
    "body": "Thank you for your comments. \n\nTo handle the reversed case in `immediate_dominators`, we need a reversed (or backward) depth first search. This is currently implemented only for the `c_graph` backend.\nWhat I can do is to check in `immediate_dominators` if the backend is `c_graph` and raise an error if it is not the case and the reverse parameter is True. Then, in the `strong_articulation_points` method, I can make a copy of the digraph using the `c_graph` backend if self uses a different backend.\nI will also have to check the backend used in `strongly_connected_component_subgraphs`.\n\nDo you have other suggestions?",
    "created_at": "2017-06-12T07:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321076",
    "user": "https://github.com/dcoudert"
}
```

Thank you for your comments. 

To handle the reversed case in `immediate_dominators`, we need a reversed (or backward) depth first search. This is currently implemented only for the `c_graph` backend.
What I can do is to check in `immediate_dominators` if the backend is `c_graph` and raise an error if it is not the case and the reverse parameter is True. Then, in the `strong_articulation_points` method, I can make a copy of the digraph using the `c_graph` backend if self uses a different backend.
I will also have to check the backend used in `strongly_connected_component_subgraphs`.

Do you have other suggestions?



---

archive/issue_comments_321077.json:
```json
{
    "body": "Another issue: the current code is not working with immutable graphs...",
    "created_at": "2017-06-12T09:52:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321077",
    "user": "https://github.com/dcoudert"
}
```

Another issue: the current code is not working with immutable graphs...



---

archive/issue_comments_321078.json:
```json
{
    "body": "Ah, right, reversing a dfs is not the same thing on the reverse graph. Then don't worry about it; premature optimization, root of all evil, and whatnot.",
    "created_at": "2017-06-12T12:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321078",
    "user": "https://github.com/tscrim"
}
```

Ah, right, reversing a dfs is not the same thing on the reverse graph. Then don't worry about it; premature optimization, root of all evil, and whatnot.



---

archive/issue_comments_321079.json:
```json
{
    "body": "Since I have to take care of 1) immutable graphs and 2) that I should not modify the input graph (I'm currently removing/adding edges to test if `r` is a SAP, I must:\n- if the input graph is strongly connected: make a mutable copy, preferably using a backend with the reverse DFS option\n- for each strongly connected component, get a mutable subgraph, preferably using the good backend\n\nThen in method `immediate_dominators`, I could add a parameter `reverse` that could be used only if the backend has the desirable method (otherwise raise an error).\n\ndo you have other suggestions before I start modifying the code?",
    "created_at": "2017-06-12T13:01:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321079",
    "user": "https://github.com/dcoudert"
}
```

Since I have to take care of 1) immutable graphs and 2) that I should not modify the input graph (I'm currently removing/adding edges to test if `r` is a SAP, I must:
- if the input graph is strongly connected: make a mutable copy, preferably using a backend with the reverse DFS option
- for each strongly connected component, get a mutable subgraph, preferably using the good backend

Then in method `immediate_dominators`, I could add a parameter `reverse` that could be used only if the backend has the desirable method (otherwise raise an error).

do you have other suggestions before I start modifying the code?



---

archive/issue_comments_321080.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-12T15:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321080",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_321081.json:
```json
{
    "body": "This should solve our issues.",
    "created_at": "2017-06-12T15:53:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321081",
    "user": "https://github.com/dcoudert"
}
```

This should solve our issues.



---

archive/issue_comments_321082.json:
```json
{
    "body": "Ready to review",
    "created_at": "2017-07-07T03:51:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321082",
    "user": "https://github.com/dcoudert"
}
```

Ready to review



---

archive/issue_comments_321083.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-11T11:14:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321083",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_321084.json:
```json
{
    "body": "Sorry for letting this drop off my radar. LGTM.",
    "created_at": "2017-08-11T15:14:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321084",
    "user": "https://github.com/tscrim"
}
```

Sorry for letting this drop off my radar. LGTM.



---

archive/issue_comments_321085.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-11T15:14:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321085",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_321086.json:
```json
{
    "body": "Thank you Travis.",
    "created_at": "2017-08-11T15:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321086",
    "user": "https://github.com/dcoudert"
}
```

Thank you Travis.



---

archive/issue_comments_321087.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-08-13T09:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22973#issuecomment-321087",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_021586.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2017-08-13T09:44:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22973",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22973#event-21586"
}
```
