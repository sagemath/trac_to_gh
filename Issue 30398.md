# Issue 30398: doctests failures in sage/graphs

archive/issues_030398.json:
```json
{
    "body": "CC:  @mkoeppe @dimpase\n\nOn Ubuntu 18.04, with 9.2.beta13, running\n\n```\nsage -tp src/sage/graphs/generic_graph.py src/sage/graphs/graph.py\n```\n\nwith the following optional packages:\n\n```\nUsing --optional=4ti2,build,ccache,cryptominisat,dochtml,dot2tex,e_antic,fricas,glucose,latte_int,libnauty,lidia,lrslib,memlimit,normaliz,notedown,openssl,pandoc_attributes,pycosat,pynormaliz,rst2ipynb,sage,sage_numerical_backends_coin\n```\n\ngives\n\n```\nsage -t --random-seed=0 src/sage/graphs/graph.py\n**********************************************************************\nFile \"src/sage/graphs/graph.py\", line 4507, in sage.graphs.graph.Graph.has_homomorphism_to\nFailed example:\n    g.has_homomorphism_to(graphs.CycleGraph(4)) is not False\nExpected:\n    False\nGot:\n    True\n**********************************************************************\nFile \"src/sage/graphs/graph.py\", line 4902, in sage.graphs.graph.Graph.minor\nFailed example:\n    L = g.minor(graphs.CompleteGraph(3))\nExpected:\n    Traceback (most recent call last):\n    ...\n    ValueError: This graph has no minor isomorphic to H !\nGot:\n    <BLANKLINE>\n**********************************************************************\nFile \"src/sage/graphs/graph.py\", line 6112, in sage.graphs.graph.Graph.topological_minor\nFailed example:\n    g.topological_minor(graphs.CycleGraph(3))\nExpected:\n    False\nGot:\n    Subgraph of (Subgraph of (RandomGNP(15,0.300000000000000))): Graph on 0 vertices\n**********************************************************************\n3 items had failures:\n   1 of  10 in sage.graphs.graph.Graph.has_homomorphism_to\n   1 of  12 in sage.graphs.graph.Graph.minor\n   1 of   7 in sage.graphs.graph.Graph.topological_minor\n    [1229 tests, 3 failures, 12.35 s]\nsage -t --random-seed=0 src/sage/graphs/generic_graph.py\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 8909, in sage.graphs.generic_graph.GenericGraph.nowhere_zero_flow\nFailed example:\n    h = g.nowhere_zero_flow(k=3)\nExpected:\n    Traceback (most recent call last):\n    ...\n    EmptySetError: the problem has no feasible solution\nGot:\n    <BLANKLINE>\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 9530, in sage.graphs.generic_graph.GenericGraph.disjoint_routed_paths\nFailed example:\n    p1,p2 = g.disjoint_routed_paths([((0, 0), (4, 4)), ((0, 4), (4, 0))])\nExpected:\n    Traceback (most recent call last):\n    ...\n    EmptySetError: the disjoint routed paths do not exist\nGot:\n    <BLANKLINE>\n**********************************************************************\n2 items had failures:\n   1 of   5 in sage.graphs.generic_graph.GenericGraph.disjoint_routed_paths\n   1 of  29 in sage.graphs.generic_graph.GenericGraph.nowhere_zero_flow\n    [3458 tests, 2 failures, 13.67 s]\n----------------------------------------------------------------------\nsage -t --random-seed=0 src/sage/graphs/graph.py  # 3 doctests failed\nsage -t --random-seed=0 src/sage/graphs/generic_graph.py  # 2 doctests failed\n----------------------------------------------------------------------\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30635\n\n",
    "created_at": "2020-09-22T20:40:13Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "doctests failures in sage/graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30398",
    "user": "https://github.com/seblabbe"
}
```
CC:  @mkoeppe @dimpase

On Ubuntu 18.04, with 9.2.beta13, running

```
sage -tp src/sage/graphs/generic_graph.py src/sage/graphs/graph.py
```

with the following optional packages:

```
Using --optional=4ti2,build,ccache,cryptominisat,dochtml,dot2tex,e_antic,fricas,glucose,latte_int,libnauty,lidia,lrslib,memlimit,normaliz,notedown,openssl,pandoc_attributes,pycosat,pynormaliz,rst2ipynb,sage,sage_numerical_backends_coin
```

gives

```
sage -t --random-seed=0 src/sage/graphs/graph.py
**********************************************************************
File "src/sage/graphs/graph.py", line 4507, in sage.graphs.graph.Graph.has_homomorphism_to
Failed example:
    g.has_homomorphism_to(graphs.CycleGraph(4)) is not False
Expected:
    False
Got:
    True
**********************************************************************
File "src/sage/graphs/graph.py", line 4902, in sage.graphs.graph.Graph.minor
Failed example:
    L = g.minor(graphs.CompleteGraph(3))
Expected:
    Traceback (most recent call last):
    ...
    ValueError: This graph has no minor isomorphic to H !
Got:
    <BLANKLINE>
**********************************************************************
File "src/sage/graphs/graph.py", line 6112, in sage.graphs.graph.Graph.topological_minor
Failed example:
    g.topological_minor(graphs.CycleGraph(3))
Expected:
    False
Got:
    Subgraph of (Subgraph of (RandomGNP(15,0.300000000000000))): Graph on 0 vertices
**********************************************************************
3 items had failures:
   1 of  10 in sage.graphs.graph.Graph.has_homomorphism_to
   1 of  12 in sage.graphs.graph.Graph.minor
   1 of   7 in sage.graphs.graph.Graph.topological_minor
    [1229 tests, 3 failures, 12.35 s]
sage -t --random-seed=0 src/sage/graphs/generic_graph.py
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 8909, in sage.graphs.generic_graph.GenericGraph.nowhere_zero_flow
Failed example:
    h = g.nowhere_zero_flow(k=3)
Expected:
    Traceback (most recent call last):
    ...
    EmptySetError: the problem has no feasible solution
Got:
    <BLANKLINE>
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 9530, in sage.graphs.generic_graph.GenericGraph.disjoint_routed_paths
Failed example:
    p1,p2 = g.disjoint_routed_paths([((0, 0), (4, 4)), ((0, 4), (4, 0))])
Expected:
    Traceback (most recent call last):
    ...
    EmptySetError: the disjoint routed paths do not exist
Got:
    <BLANKLINE>
**********************************************************************
2 items had failures:
   1 of   5 in sage.graphs.generic_graph.GenericGraph.disjoint_routed_paths
   1 of  29 in sage.graphs.generic_graph.GenericGraph.nowhere_zero_flow
    [3458 tests, 2 failures, 13.67 s]
----------------------------------------------------------------------
sage -t --random-seed=0 src/sage/graphs/graph.py  # 3 doctests failed
sage -t --random-seed=0 src/sage/graphs/generic_graph.py  # 2 doctests failed
----------------------------------------------------------------------
```


Issue created by migration from https://trac.sagemath.org/ticket/30635





---

archive/issue_comments_433111.json:
```json
{
    "body": "I suspect it is due to coin. Can you try for instance\n\n```\nsage: g = graphs.CycleGraph(9)\nsage: g.has_homomorphism_to(graphs.CycleGraph(4), solver='GLPK')\nFalse\n```\n\n\nfedora 32, with cplex as default solver, I get\n\n```\nmusclotte:/home/dcoudert/sage> ./sage -version\nSageMath version 9.2.beta13, Release Date: 2020-09-21\nmusclotte:/home/dcoudert/sage> ./sage -tp src/sage/graphs/generic_graph.py src/sage/graphs/graph.py \ntoo few successful tests, not using stored timings\nRunning doctests with ID 2020-09-22-23-04-40-6379f74f.\nGit branch: develop\nUsing --optional=benzene,bliss,buckygen,build,cryptominisat,csdp,dochtml,dot2tex,gap_packages,glucose,igraph,libsemigroups,mcqd,memlimit,plantri,python_igraph,rubiks,sage,sage_numerical_backends_cplex,sage_numerical_backends_gurobi,tdlib\nDoctesting 2 files using 8 threads.\nsage -t --random-seed=0 src/sage/graphs/graph.py\n    [1244 tests, 21.04 s]\nsage -t --random-seed=0 src/sage/graphs/generic_graph.py\n    [3514 tests, 47.27 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 48.2 seconds\n    cpu time: 122.6 seconds\n    cumulative wall time: 68.3 seconds\n```\n\nsame on macOS 10.15.6 but with only cplex as optional package.",
    "created_at": "2020-09-22T21:23:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433111",
    "user": "https://github.com/dcoudert"
}
```

I suspect it is due to coin. Can you try for instance

```
sage: g = graphs.CycleGraph(9)
sage: g.has_homomorphism_to(graphs.CycleGraph(4), solver='GLPK')
False
```


fedora 32, with cplex as default solver, I get

```
musclotte:/home/dcoudert/sage> ./sage -version
SageMath version 9.2.beta13, Release Date: 2020-09-21
musclotte:/home/dcoudert/sage> ./sage -tp src/sage/graphs/generic_graph.py src/sage/graphs/graph.py 
too few successful tests, not using stored timings
Running doctests with ID 2020-09-22-23-04-40-6379f74f.
Git branch: develop
Using --optional=benzene,bliss,buckygen,build,cryptominisat,csdp,dochtml,dot2tex,gap_packages,glucose,igraph,libsemigroups,mcqd,memlimit,plantri,python_igraph,rubiks,sage,sage_numerical_backends_cplex,sage_numerical_backends_gurobi,tdlib
Doctesting 2 files using 8 threads.
sage -t --random-seed=0 src/sage/graphs/graph.py
    [1244 tests, 21.04 s]
sage -t --random-seed=0 src/sage/graphs/generic_graph.py
    [3514 tests, 47.27 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 48.2 seconds
    cpu time: 122.6 seconds
    cumulative wall time: 68.3 seconds
```

same on macOS 10.15.6 but with only cplex as optional package.



---

archive/issue_comments_433112.json:
```json
{
    "body": "Ok, I see, I need to reinstall Gurobi and/or CPLEX again, but I haven't needed it recently.\n\nI get this:\n\n```\nsage: g = graphs.CycleGraph(9) \nsage: g.has_homomorphism_to(graphs.CycleGraph(4))                     \n{1: 1, 2: 0, 3: 1, 4: 0, 5: 1, 6: 0, 7: 1}\nsage: g.has_homomorphism_to(graphs.CycleGraph(4), solver='COIN')                     \n{1: 1, 2: 0, 3: 1, 4: 0, 5: 1, 6: 0, 7: 1}\nsage: g.has_homomorphism_to(graphs.CycleGraph(4), solver='GLPK')                     \nLong-step dual simplex will be used\nFalse\n```\n",
    "created_at": "2020-09-23T08:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433112",
    "user": "https://github.com/seblabbe"
}
```

Ok, I see, I need to reinstall Gurobi and/or CPLEX again, but I haven't needed it recently.

I get this:

```
sage: g = graphs.CycleGraph(9) 
sage: g.has_homomorphism_to(graphs.CycleGraph(4))                     
{1: 1, 2: 0, 3: 1, 4: 0, 5: 1, 6: 0, 7: 1}
sage: g.has_homomorphism_to(graphs.CycleGraph(4), solver='COIN')                     
{1: 1, 2: 0, 3: 1, 4: 0, 5: 1, 6: 0, 7: 1}
sage: g.has_homomorphism_to(graphs.CycleGraph(4), solver='GLPK')                     
Long-step dual simplex will be used
False
```




---

archive/issue_comments_433113.json:
```json
{
    "body": "So something is wrong with cbc/coin. I never use it...\n\nFYI, the `Long-step dual simplex will be used` message when using glpk is ignored in doctests since #29587.",
    "created_at": "2020-09-23T09:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433113",
    "user": "https://github.com/dcoudert"
}
```

So something is wrong with cbc/coin. I never use it...

FYI, the `Long-step dual simplex will be used` message when using glpk is ignored in doctests since #29587.



---

archive/issue_comments_433114.json:
```json
{
    "body": "What is weird is that vertices 0 and 8 are not a key of the dictionnary \"found\" by coin:\n\n\n```\nsage: g8 = graphs.CycleGraph(8)                                                            \nsage: g9 = graphs.CycleGraph(9)                                                            \nsage: g4 = graphs.CycleGraph(4)                                                            \nsage: g9.has_homomorphism_to(g4, solver='COIN') # key 0 and 8 are missing in the output\n{1: 1, 2: 0, 3: 1, 4: 0, 5: 1, 6: 0, 7: 1}\nsage: g8.has_homomorphism_to(g4, solver='COIN')                                            \n{0: 0, 1: 1, 2: 0, 3: 1, 4: 0, 5: 1, 6: 0, 7: 1}\nsage: g9.has_homomorphism_to(g4, solver='GLPK')                                            \nLong-step dual simplex will be used\nFalse\nsage: g8.has_homomorphism_to(g4, solver='GLPK')                                            \nLong-step dual simplex will be used\n{0: 0, 1: 3, 2: 0, 3: 3, 4: 0, 5: 3, 6: 0, 7: 3}\n```\n",
    "created_at": "2020-09-23T09:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433114",
    "user": "https://github.com/seblabbe"
}
```

What is weird is that vertices 0 and 8 are not a key of the dictionnary "found" by coin:


```
sage: g8 = graphs.CycleGraph(8)                                                            
sage: g9 = graphs.CycleGraph(9)                                                            
sage: g4 = graphs.CycleGraph(4)                                                            
sage: g9.has_homomorphism_to(g4, solver='COIN') # key 0 and 8 are missing in the output
{1: 1, 2: 0, 3: 1, 4: 0, 5: 1, 6: 0, 7: 1}
sage: g8.has_homomorphism_to(g4, solver='COIN')                                            
{0: 0, 1: 1, 2: 0, 3: 1, 4: 0, 5: 1, 6: 0, 7: 1}
sage: g9.has_homomorphism_to(g4, solver='GLPK')                                            
Long-step dual simplex will be used
False
sage: g8.has_homomorphism_to(g4, solver='GLPK')                                            
Long-step dual simplex will be used
{0: 0, 1: 3, 2: 0, 3: 3, 4: 0, 5: 3, 6: 0, 7: 3}
```




---

archive/issue_comments_433115.json:
```json
{
    "body": "Do you think #30637 is also cbc/coin related?",
    "created_at": "2020-09-23T09:08:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433115",
    "user": "https://github.com/seblabbe"
}
```

Do you think #30637 is also cbc/coin related?



---

archive/issue_comments_433116.json:
```json
{
    "body": "Replying to [comment:6 slabbe]:\n> Do you think #30637 is also cbc/coin related?\nnot sure. See #29551",
    "created_at": "2020-09-23T09:22:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433116",
    "user": "https://github.com/dcoudert"
}
```

Replying to [comment:6 slabbe]:
> Do you think #30637 is also cbc/coin related?
not sure. See #29551



---

archive/issue_comments_433117.json:
```json
{
    "body": "What is the difference between cbc and coin?\n\nCan I use `solver='COIN'` if cbc is not installed?\n\n\n```\n$ sage -optional | grep cbc\ncbc.....................................2.9.4.p0 (not_installed)\n```\n",
    "created_at": "2020-09-23T09:23:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433117",
    "user": "https://github.com/seblabbe"
}
```

What is the difference between cbc and coin?

Can I use `solver='COIN'` if cbc is not installed?


```
$ sage -optional | grep cbc
cbc.....................................2.9.4.p0 (not_installed)
```




---

archive/issue_comments_433118.json:
```json
{
    "body": "I confirm that the issue dissappear after installing cbc:\n\n```\n$ sage -optional | grep cbc\ncbc.....................................2.9.4.p0 (2.9.4.p0)\n```\n\n\n```\nsage -t --random-seed=0 src/sage/graphs/generic_graph.py\n    [3458 tests, 13.66 s]\nsage -t --random-seed=0 src/sage/graphs/graph.py\n    [1229 tests, 14.46 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```\n",
    "created_at": "2020-09-23T09:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433118",
    "user": "https://github.com/seblabbe"
}
```

I confirm that the issue dissappear after installing cbc:

```
$ sage -optional | grep cbc
cbc.....................................2.9.4.p0 (2.9.4.p0)
```


```
sage -t --random-seed=0 src/sage/graphs/generic_graph.py
    [3458 tests, 13.66 s]
sage -t --random-seed=0 src/sage/graphs/graph.py
    [1229 tests, 14.46 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```




---

archive/issue_comments_433119.json:
```json
{
    "body": "Something is weird in the configuration, because I did `--enable-cbc`:\n\n\n```\n$ head config.log\nThis file contains any messages produced by compilers while\nrunning configure, to aid debugging if configure makes a mistake.\n\nIt was created by Sage configure 9.2.beta13, which was\ngenerated by GNU Autoconf 2.69.  Invocation command line was\n\n  $ ./configure --enable-experimental-packages --enable-download-from-upstream-url --enable-ccache --enable-dot2tex --enable-rst2ipynb --enable-openssl --enable-cbc --enable-cryptominisat --enable-pycosat --enable-glucose --enable-sage_numerical_backends_coin --enable-pynormaliz --enable-latte_int --enable-awali --enable-fricas --no-create --no-recursion\n\n## --------- ##\n## Platform. ##\n```\n\n\nSo, I should not need to run `sage -i cbc` after...",
    "created_at": "2020-09-23T09:33:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433119",
    "user": "https://github.com/seblabbe"
}
```

Something is weird in the configuration, because I did `--enable-cbc`:


```
$ head config.log
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by Sage configure 9.2.beta13, which was
generated by GNU Autoconf 2.69.  Invocation command line was

  $ ./configure --enable-experimental-packages --enable-download-from-upstream-url --enable-ccache --enable-dot2tex --enable-rst2ipynb --enable-openssl --enable-cbc --enable-cryptominisat --enable-pycosat --enable-glucose --enable-sage_numerical_backends_coin --enable-pynormaliz --enable-latte_int --enable-awali --enable-fricas --no-create --no-recursion

## --------- ##
## Platform. ##
```


So, I should not need to run `sage -i cbc` after...



---

archive/issue_comments_433120.json:
```json
{
    "body": "I'm not completely sure of what `coin` provides apart from a linear programming solver. If I'm right, `cbc` is the branch and cut / branch and bound engine.\n\nIf installing cbc is sufficient to fix the issues, it confirms that we must clarify when we can use `coin` and when we must use `cbc`, or if `cbc` is always needed to with `coin`. \n\nConcerning configuration / installation, I suggest to ask Dima or Matthias.",
    "created_at": "2020-09-23T09:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433120",
    "user": "https://github.com/dcoudert"
}
```

I'm not completely sure of what `coin` provides apart from a linear programming solver. If I'm right, `cbc` is the branch and cut / branch and bound engine.

If installing cbc is sufficient to fix the issues, it confirms that we must clarify when we can use `coin` and when we must use `cbc`, or if `cbc` is always needed to with `coin`. 

Concerning configuration / installation, I suggest to ask Dima or Matthias.



---

archive/issue_comments_433121.json:
```json
{
    "body": "adding Matthias in cc here. Questions are:\n\n- is it normal to have `sage_numerical_backends_coin` installed but not `cbc` (this is the source of the bug in this ticket)?\n- is it normal that `--enable-cbc` in the configuration did not installed `cbc` ?",
    "created_at": "2020-09-23T09:49:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433121",
    "user": "https://github.com/seblabbe"
}
```

adding Matthias in cc here. Questions are:

- is it normal to have `sage_numerical_backends_coin` installed but not `cbc` (this is the source of the bug in this ticket)?
- is it normal that `--enable-cbc` in the configuration did not installed `cbc` ?



---

archive/issue_comments_433122.json:
```json
{
    "body": "`sage_numerical_backends_coin` does have cbc in its list of dependencies. Normal installs either using the `./configure` option  `--enable-sage_numerical_backends_coin` or `sage -i sage_numerical_backends_coin` should install cbc too.\n\nNote, however, that `cbc` knows how to find system packages. So `--enable-cbc` does not install its own copy of `cbc` if you have one in the system.",
    "created_at": "2020-09-23T12:32:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433122",
    "user": "https://github.com/mkoeppe"
}
```

`sage_numerical_backends_coin` does have cbc in its list of dependencies. Normal installs either using the `./configure` option  `--enable-sage_numerical_backends_coin` or `sage -i sage_numerical_backends_coin` should install cbc too.

Note, however, that `cbc` knows how to find system packages. So `--enable-cbc` does not install its own copy of `cbc` if you have one in the system.



---

archive/issue_comments_433123.json:
```json
{
    "body": "ok, I see, and I have \n\n```\n$ cbc --version\nWelcome to the CBC MILP Solver \nVersion: 2.9.9 \nBuild Date: Aug 21 2017 \n```\n\ninstalled on the system as opposed to `2.9.4.p0` available in sage. Therefore it seems to be a regression in cbc that happen between `2.9.4.p0` and `2.9.9`.",
    "created_at": "2020-09-23T12:58:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433123",
    "user": "https://github.com/seblabbe"
}
```

ok, I see, and I have 

```
$ cbc --version
Welcome to the CBC MILP Solver 
Version: 2.9.9 
Build Date: Aug 21 2017 
```

installed on the system as opposed to `2.9.4.p0` available in sage. Therefore it seems to be a regression in cbc that happen between `2.9.4.p0` and `2.9.9`.



---

archive/issue_comments_433124.json:
```json
{
    "body": "and the [latest release version](https://projects.coin-or.org/Cbc) of Cbc is 2.10.5",
    "created_at": "2020-09-23T13:02:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433124",
    "user": "https://github.com/seblabbe"
}
```

and the [latest release version](https://projects.coin-or.org/Cbc) of Cbc is 2.10.5



---

archive/issue_comments_433125.json:
```json
{
    "body": "Should\n\n```\n$ sage -optional | grep cbc\ncbc.....................................2.9.4.p0 (not_installed)\n```\n\ninstead return\n\n```\n$ sage -optional | grep cbc\ncbc.....................................2.9.4.p0 (2.9.9)\n```\n\nif cbc 2.9.9 was found on the system by the `--enable-cbc`?",
    "created_at": "2020-09-23T13:07:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433125",
    "user": "https://github.com/seblabbe"
}
```

Should

```
$ sage -optional | grep cbc
cbc.....................................2.9.4.p0 (not_installed)
```

instead return

```
$ sage -optional | grep cbc
cbc.....................................2.9.4.p0 (2.9.9)
```

if cbc 2.9.9 was found on the system by the `--enable-cbc`?



---

archive/issue_comments_433126.json:
```json
{
    "body": "Replying to [comment:17 slabbe]:\n> Should\n> {{{\n> $ sage -optional | grep cbc\n> cbc.....................................2.9.4.p0 (not_installed)\n> }}}\n> instead return\n> {{{\n> $ sage -optional | grep cbc\n> cbc.....................................2.9.4.p0 (2.9.9)\n> }}}\n> if cbc 2.9.9 was found on the system by the `--enable-cbc`?\n\nBest to ignore `sage -optional` and everything that comes from `sage.misc.package`...",
    "created_at": "2020-09-23T13:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433126",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:17 slabbe]:
> Should
> {{{
> $ sage -optional | grep cbc
> cbc.....................................2.9.4.p0 (not_installed)
> }}}
> instead return
> {{{
> $ sage -optional | grep cbc
> cbc.....................................2.9.4.p0 (2.9.9)
> }}}
> if cbc 2.9.9 was found on the system by the `--enable-cbc`?

Best to ignore `sage -optional` and everything that comes from `sage.misc.package`...



---

archive/issue_comments_433127.json:
```json
{
    "body": "Replying to [comment:4 slabbe]:\n> What is weird is that vertices 0 and 8 are not a key of the dictionnary \"found\" by coin:\n> \n> {{{\n> sage: g8 = graphs.CycleGraph(8)                                                            \n> sage: g9 = graphs.CycleGraph(9)                                                            \n> sage: g4 = graphs.CycleGraph(4)                                                            \n> sage: g9.has_homomorphism_to(g4, solver='COIN') # key 0 and 8 are missing in the output\n> {1: 1, 2: 0, 3: 1, 4: 0, 5: 1, 6: 0, 7: 1}\n> sage: g8.has_homomorphism_to(g4, solver='COIN')                                            \n> {0: 0, 1: 1, 2: 0, 3: 1, 4: 0, 5: 1, 6: 0, 7: 1}\n> sage: g9.has_homomorphism_to(g4, solver='GLPK')                                            \n> Long-step dual simplex will be used\n> False\n> sage: g8.has_homomorphism_to(g4, solver='GLPK')                                            \n> Long-step dual simplex will be used\n> {0: 0, 1: 3, 2: 0, 3: 3, 4: 0, 5: 3, 6: 0, 7: 3}\n> }}}\n\nThis seems to come from this code in `vertex_cover`:\n\n```\n                b = p.get_values(b)\n                cover_g = set(v for v in g if b[v] == 1)\n```\n\nwhich ignores the fact that a numerical solver is used and therefore `b` will include numerical noise.",
    "created_at": "2020-09-23T13:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433127",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:4 slabbe]:
> What is weird is that vertices 0 and 8 are not a key of the dictionnary "found" by coin:
> 
> {{{
> sage: g8 = graphs.CycleGraph(8)                                                            
> sage: g9 = graphs.CycleGraph(9)                                                            
> sage: g4 = graphs.CycleGraph(4)                                                            
> sage: g9.has_homomorphism_to(g4, solver='COIN') # key 0 and 8 are missing in the output
> {1: 1, 2: 0, 3: 1, 4: 0, 5: 1, 6: 0, 7: 1}
> sage: g8.has_homomorphism_to(g4, solver='COIN')                                            
> {0: 0, 1: 1, 2: 0, 3: 1, 4: 0, 5: 1, 6: 0, 7: 1}
> sage: g9.has_homomorphism_to(g4, solver='GLPK')                                            
> Long-step dual simplex will be used
> False
> sage: g8.has_homomorphism_to(g4, solver='GLPK')                                            
> Long-step dual simplex will be used
> {0: 0, 1: 3, 2: 0, 3: 3, 4: 0, 5: 3, 6: 0, 7: 3}
> }}}

This seems to come from this code in `vertex_cover`:

```
                b = p.get_values(b)
                cover_g = set(v for v in g if b[v] == 1)
```

which ignores the fact that a numerical solver is used and therefore `b` will include numerical noise.



---

archive/issue_comments_433128.json:
```json
{
    "body": "Testing with cbc 2.10.5 (upgrade at #30644), the doctest failure stays.",
    "created_at": "2020-09-23T13:51:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433128",
    "user": "https://github.com/seblabbe"
}
```

Testing with cbc 2.10.5 (upgrade at #30644), the doctest failure stays.



---

archive/issue_comments_433129.json:
```json
{
    "body": "Replying to [comment:20 mkoeppe]:\n> This seems to come from this code in `vertex_cover`:\n> {{{\n>                 b = p.get_values(b)\n>                 cover_g = set(v for v in g if b[v] == 1)\n> }}}\n> which ignores the fact that a numerical solver is used and therefore `b` will include numerical noise.\n> \nwell, `has_homomorphism_to` does not use `vertex_cover`, but I agree that it might be better to check e.g. `if b[v] >= .5`. Such tests are not unified (at least) in the graph module.",
    "created_at": "2020-09-23T14:39:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433129",
    "user": "https://github.com/dcoudert"
}
```

Replying to [comment:20 mkoeppe]:
> This seems to come from this code in `vertex_cover`:
> {{{
>                 b = p.get_values(b)
>                 cover_g = set(v for v in g if b[v] == 1)
> }}}
> which ignores the fact that a numerical solver is used and therefore `b` will include numerical noise.
> 
well, `has_homomorphism_to` does not use `vertex_cover`, but I agree that it might be better to check e.g. `if b[v] >= .5`. Such tests are not unified (at least) in the graph module.



---

archive/issue_comments_433130.json:
```json
{
    "body": "Replying to [comment:21 slabbe]:\n> Testing with cbc 2.10.5 (upgrade at #30644), the doctest failure stays.\n\nI have  cbc 2.10.5 installed with hombrew, and after `sage -I sage_numerical_backends_coin` I get the correct result.\n\n```\nsage: g = graphs.CycleGraph(9)                                                                                                      \nsage: g.has_homomorphism_to(graphs.CycleGraph(4), solver='Coin')                                                                    \nFalse\n```\n",
    "created_at": "2020-09-23T14:41:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433130",
    "user": "https://github.com/dcoudert"
}
```

Replying to [comment:21 slabbe]:
> Testing with cbc 2.10.5 (upgrade at #30644), the doctest failure stays.

I have  cbc 2.10.5 installed with hombrew, and after `sage -I sage_numerical_backends_coin` I get the correct result.

```
sage: g = graphs.CycleGraph(9)                                                                                                      
sage: g.has_homomorphism_to(graphs.CycleGraph(4), solver='Coin')                                                                    
False
```




---

archive/issue_comments_433131.json:
```json
{
    "body": "Replying to [comment:22 dcoudert]:\n> Replying to [comment:20 mkoeppe]:\n> > This seems to come from this code in `vertex_cover`:\n> > {{{\n> >                 b = p.get_values(b)\n> >                 cover_g = set(v for v in g if b[v] == 1)\n> > }}}\n> > which ignores the fact that a numerical solver is used and therefore `b` will include numerical noise.\n> > \n> well, `has_homomorphism_to` does not use `vertex_cover`, \n\nOK, `has_homomorphism_to` also has code like this:\n\n```\n            p.solve(log = verbose)\n            b = p.get_values(b)\n            mapping = dict(x[0] for x in b.items() if x[1])\n```\n\n\n> but I agree that it might be better to check e.g. `if b[v] >= .5`. Such tests are not unified (at least) in the graph module.\n\nIn deed, \"at least\"... this is severely broken code when `solver` is a numerical solver.",
    "created_at": "2020-09-23T17:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433131",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:22 dcoudert]:
> Replying to [comment:20 mkoeppe]:
> > This seems to come from this code in `vertex_cover`:
> > {{{
> >                 b = p.get_values(b)
> >                 cover_g = set(v for v in g if b[v] == 1)
> > }}}
> > which ignores the fact that a numerical solver is used and therefore `b` will include numerical noise.
> > 
> well, `has_homomorphism_to` does not use `vertex_cover`, 

OK, `has_homomorphism_to` also has code like this:

```
            p.solve(log = verbose)
            b = p.get_values(b)
            mapping = dict(x[0] for x in b.items() if x[1])
```


> but I agree that it might be better to check e.g. `if b[v] >= .5`. Such tests are not unified (at least) in the graph module.

In deed, "at least"... this is severely broken code when `solver` is a numerical solver.



---

archive/issue_comments_433132.json:
```json
{
    "body": "If I'm correct, there is a confusion in the graph module between coin and cbc. Most of the models should be solved with ILP solvers, so `cbc` in this case and not `coin`, right ?",
    "created_at": "2020-09-23T17:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433132",
    "user": "https://github.com/dcoudert"
}
```

If I'm correct, there is a confusion in the graph module between coin and cbc. Most of the models should be solved with ILP solvers, so `cbc` in this case and not `coin`, right ?



---

archive/issue_comments_433133.json:
```json
{
    "body": "Replying to [comment:25 dcoudert]:\n> If I'm correct, there is a confusion in the graph module between coin and cbc. Most of the models should be solved with ILP solvers, so `cbc` in this case and not `coin`, right ?\n\nSage only has one solver backend from the COIN-OR project, and that is the CBC solver, which we use both for mixed integer linear programming and linear programming. The string `\"coin\"` designates the use of this backend -- see `sage.numerical.backends.generic_backend.get_solver`. \n\n`chc` is the name of the SPKG providing the solver. Sage does not use it directly but only via the SPKG `sage_numerical_backends_coin`, which provides the class `sage_numerical_backends_coin.coin_backend.CoinBackend`.",
    "created_at": "2020-09-23T17:42:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433133",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:25 dcoudert]:
> If I'm correct, there is a confusion in the graph module between coin and cbc. Most of the models should be solved with ILP solvers, so `cbc` in this case and not `coin`, right ?

Sage only has one solver backend from the COIN-OR project, and that is the CBC solver, which we use both for mixed integer linear programming and linear programming. The string `"coin"` designates the use of this backend -- see `sage.numerical.backends.generic_backend.get_solver`. 

`chc` is the name of the SPKG providing the solver. Sage does not use it directly but only via the SPKG `sage_numerical_backends_coin`, which provides the class `sage_numerical_backends_coin.coin_backend.CoinBackend`.



---

archive/issue_comments_433134.json:
```json
{
    "body": "Any doctests using this solver should be marked `optional - sage_numerical_backends_coin`, by the way (see #30646). Installing `cbc` by itself does not trigger installation of `sage_numerical_backends_coin`.",
    "created_at": "2020-09-23T17:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433134",
    "user": "https://github.com/mkoeppe"
}
```

Any doctests using this solver should be marked `optional - sage_numerical_backends_coin`, by the way (see #30646). Installing `cbc` by itself does not trigger installation of `sage_numerical_backends_coin`.



---

archive/issue_comments_433135.json:
```json
{
    "body": "I would suggest to create a helper function that converts an inexact 0/1 output to bool with error margin checking, and to use it throughout the `sage.graphs` package.  Define a small epsilon, say 1e-4. Error out if input is away from 0 or 1 by something larger than that epsilon -- this indicates either a modeling error or a severe numerical issue in the solver.",
    "created_at": "2020-09-23T18:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433135",
    "user": "https://github.com/mkoeppe"
}
```

I would suggest to create a helper function that converts an inexact 0/1 output to bool with error margin checking, and to use it throughout the `sage.graphs` package.  Define a small epsilon, say 1e-4. Error out if input is away from 0 or 1 by something larger than that epsilon -- this indicates either a modeling error or a severe numerical issue in the solver.



---

archive/issue_comments_433136.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-09-23T19:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433136",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_433137.json:
```json
{
    "body": "related to the suggestion of Matthias, I see that the following change was made in #28689:\n\n```diff\n     cpdef get_variable_value(self, int variable):\n         r\"\"\"\n@@ -868,7 +868,7 @@ cdef class CoinBackend(GenericBackend):\n         if self.is_variable_continuous(variable):\n             return v\n         else:\n-            return round(v)\n+            return int(round(v))\n \n     cpdef int ncols(self):\n         r\"\"\"\n```\n",
    "created_at": "2020-09-23T20:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433137",
    "user": "https://github.com/seblabbe"
}
```

related to the suggestion of Matthias, I see that the following change was made in #28689:

```diff
     cpdef get_variable_value(self, int variable):
         r"""
@@ -868,7 +868,7 @@ cdef class CoinBackend(GenericBackend):
         if self.is_variable_continuous(variable):
             return v
         else:
-            return round(v)
+            return int(round(v))
 
     cpdef int ncols(self):
         r"""
```




---

archive/issue_comments_433138.json:
```json
{
    "body": "I don't support attempts of this kind to clean up the floating point results in the solver backends or in the `MixedIntegerLinearProgram` front-end. There is no generally correct way to exactify a solution to a MIP. \n\n`MixedIntegerLinearProgram` has the notion of a `base_ring`, which is `RDF` in the case of the numerical solvers. Client code of `MixedIntegerLinearProgram` needs to handle floating point results in a model-specific way.",
    "created_at": "2020-09-23T20:50:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433138",
    "user": "https://github.com/mkoeppe"
}
```

I don't support attempts of this kind to clean up the floating point results in the solver backends or in the `MixedIntegerLinearProgram` front-end. There is no generally correct way to exactify a solution to a MIP. 

`MixedIntegerLinearProgram` has the notion of a `base_ring`, which is `RDF` in the case of the numerical solvers. Client code of `MixedIntegerLinearProgram` needs to handle floating point results in a model-specific way.



---

archive/issue_comments_433139.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433139",
    "user": "https://github.com/mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_433140.json:
```json
{
    "body": "Replying to [comment:28 mkoeppe]:\n> I would suggest to create a helper function that converts an inexact 0/1 output to bool with error margin checking, and to use it throughout the `sage.graphs` package.  Define a small epsilon, say 1e-4. Error out if input is away from 0 or 1 by something larger than that epsilon -- this indicates either a modeling error or a severe numerical issue in the solver.\n\nThis is now available with #32197. Meta-ticket #32191 (Audit/fix all uses of `MixedIntegerLinearProgram`) tracks the necessary changes in the library",
    "created_at": "2021-07-17T02:50:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433140",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:28 mkoeppe]:
> I would suggest to create a helper function that converts an inexact 0/1 output to bool with error margin checking, and to use it throughout the `sage.graphs` package.  Define a small epsilon, say 1e-4. Error out if input is away from 0 or 1 by something larger than that epsilon -- this indicates either a modeling error or a severe numerical issue in the solver.

This is now available with #32197. Meta-ticket #32191 (Audit/fix all uses of `MixedIntegerLinearProgram`) tracks the necessary changes in the library



---

archive/issue_comments_433141.json:
```json
{
    "body": "Does #32239 (which depends on #32197) fix the issues in `graph.py` ?",
    "created_at": "2021-07-19T15:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433141",
    "user": "https://github.com/dcoudert"
}
```

Does #32239 (which depends on #32197) fix the issues in `graph.py` ?



---

archive/issue_comments_433142.json:
```json
{
    "body": "I haven't tested anything with COIN, but it is likely that these are all symptoms of the same issue that we're addressing in #32191.",
    "created_at": "2021-07-19T20:15:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433142",
    "user": "https://github.com/mkoeppe"
}
```

I haven't tested anything with COIN, but it is likely that these are all symptoms of the same issue that we're addressing in #32191.



---

archive/issue_comments_433143.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-07-20T06:12:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433143",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_433144.json:
```json
{
    "body": "No error with `sage_numerical_backends_coin` installed with the above tickets from #32191 merged. This is with `cbc` 2.10.3 from homebrew.",
    "created_at": "2021-07-20T06:12:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433144",
    "user": "https://github.com/mkoeppe"
}
```

No error with `sage_numerical_backends_coin` installed with the above tickets from #32191 merged. This is with `cbc` 2.10.3 from homebrew.



---

archive/issue_comments_433145.json:
```json
{
    "body": "Also no error with `cbc` from our outdated SPKG (2.9.4.p0).",
    "created_at": "2021-07-20T06:41:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433145",
    "user": "https://github.com/mkoeppe"
}
```

Also no error with `cbc` from our outdated SPKG (2.9.4.p0).



---

archive/issue_comments_433146.json:
```json
{
    "body": "However, I do get errors with the `cbc` from the upgrade ticket #30644 that looks like the original report!",
    "created_at": "2021-07-20T06:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433146",
    "user": "https://github.com/mkoeppe"
}
```

However, I do get errors with the `cbc` from the upgrade ticket #30644 that looks like the original report!



---

archive/issue_comments_433147.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2021-07-20T06:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433147",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_433148.json:
```json
{
    "body": "That's a bug that will need investigating. \n\nhttps://coin-or.github.io/Cbc/cbcmodelclass.html:\n\n  Primal column solution\t\n\n  `const double * getColSolution()`\n\n  The OSI method will return the best solution found thus far, unless none has been found. It is safer to use CbcModel version, CbcModel::bestSolution()\"",
    "created_at": "2021-07-20T07:31:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433148",
    "user": "https://github.com/mkoeppe"
}
```

That's a bug that will need investigating. 

https://coin-or.github.io/Cbc/cbcmodelclass.html:

  Primal column solution	

  `const double * getColSolution()`

  The OSI method will return the best solution found thus far, unless none has been found. It is safer to use CbcModel version, CbcModel::bestSolution()"



---

archive/issue_comments_433149.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2021-07-20T15:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433149",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_433150.json:
```json
{
    "body": "`g.minor()` is buggy. E.g. with `solver='ppl'` is doesn't seem to terminate on \n\n```\ng = graphs.RandomGNP(20,.5)\ng = g.subgraph(edges = g.min_spanning_tree())\ng.minor(graphs.CompleteGraph(3), solver='ppl')\n```\n\n\nWith 'glpk' instead of 'ppl' it's quick and correct (no such minor).\n\nWith Coin/cbc (from #30644, but do not forget to `make sage_numerical_backends_coin`)\nit returns nonsense `{0: [], 1: [0], 2: [17]}`.\n\nAn interface bug? (both for PPL and Coin/cbc?)",
    "created_at": "2021-07-21T11:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433150",
    "user": "https://github.com/dimpase"
}
```

`g.minor()` is buggy. E.g. with `solver='ppl'` is doesn't seem to terminate on 

```
g = graphs.RandomGNP(20,.5)
g = g.subgraph(edges = g.min_spanning_tree())
g.minor(graphs.CompleteGraph(3), solver='ppl')
```


With 'glpk' instead of 'ppl' it's quick and correct (no such minor).

With Coin/cbc (from #30644, but do not forget to `make sage_numerical_backends_coin`)
it returns nonsense `{0: [], 1: [0], 2: [17]}`.

An interface bug? (both for PPL and Coin/cbc?)



---

archive/issue_comments_433151.json:
```json
{
    "body": "Replying to [comment:44 dimpase]:\n>  with `solver='ppl'` is doesn't seem to terminate \n\nThis is a MIP model with 117 binary variables, 344 total variables. Just way out of league for PPL. No bug here",
    "created_at": "2021-07-26T18:24:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433151",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:44 dimpase]:
>  with `solver='ppl'` is doesn't seem to terminate 

This is a MIP model with 117 binary variables, 344 total variables. Just way out of league for PPL. No bug here



---

archive/issue_comments_433152.json:
```json
{
    "body": "Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433152",
    "user": "https://github.com/mkoeppe"
}
```

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_comments_433153.json:
```json
{
    "body": "Obsolete after #30644",
    "created_at": "2022-07-30T23:50:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433153",
    "user": "https://github.com/mkoeppe"
}
```

Obsolete after #30644



---

archive/issue_comments_433154.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2022-07-30T23:50:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433154",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_433155.json:
```json
{
    "body": "So then.",
    "created_at": "2022-07-31T06:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433155",
    "user": "https://github.com/dcoudert"
}
```

So then.



---

archive/issue_comments_433156.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-07-31T06:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433156",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_433157.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2022-08-02T06:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30398",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30398#issuecomment-433157",
    "user": "https://github.com/mkoeppe"
}
```

Resolution: invalid
