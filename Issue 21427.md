# Issue 21427: Fix initialization of vectors

Issue created by migration from https://trac.sagemath.org/ticket/21664

Original creator: jdemeyer

Original creation time: 2016-10-07 13:58:56


```
sage: P = QQ^10
sage: t = type(P())
sage: t.__new__(t, P);
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred.
This probably occurred because a *compiled* module has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Python will now terminate.
------------------------------------------------------------------------
```



---

Comment by jdemeyer created at 2016-10-07 15:25:10

New commits:


---

Comment by jdemeyer created at 2016-10-07 17:15:11

Changing status from new to needs_review.


---

Comment by tscrim created at 2016-10-07 22:03:32

Is there a reason why `_init` has an `int` return value? AFAICS, it doesn't return anything, which I guess defaults to 0? I feel we should be a bit more explicit and put a `return 0` if we do need a return value (I think we do to handle exceptions).


---

Comment by jdemeyer created at 2016-10-08 06:17:29

Replying to [comment:6 tscrim]:
> Is there a reason why `_init` has an `int` return value?

I get this question _every time_ that I do this `cdef int ... except -1` trick. The return value is only for exception handling. Mentally, you should think that it returns `None` (that is also why I don't want to add `return 0`, that would be even more confusing).


---

Comment by jdemeyer created at 2016-10-08 08:29:14

Personally, I think that Cython should have a special data type for "an `int` used only for exception handling", like they already have `bint` for "an `int` used as boolean".  But they don't like the idea.


---

Comment by tscrim created at 2016-10-08 14:28:03

Replying to [comment:7 jdemeyer]:
> Replying to [comment:6 tscrim]:
> > Is there a reason why `_init` has an `int` return value?
> 
> I get this question _every time_ that I do this `cdef int ... except -1` trick. The return value is only for exception handling. Mentally, you should think that it returns `None` (that is also why I don't want to add `return 0`, that would be even more confusing).

I'm probably the one asking it most of those times... Thank you for the explanation. LGTM.


---

Comment by tscrim created at 2016-10-08 14:28:03

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-10-29 14:28:00

Resolution: fixed
