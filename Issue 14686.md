# Issue 14686: rounding in logs

Issue created by migration from https://trac.sagemath.org/ticket/14890

Original creator: amy

Original creation time: 2013-07-14 17:26:14

Assignee: burcin

Keywords: logarithms

Logarithms seem to evaluate numbers differently, depending on type. This causes some precision errors when using numbers which can be coerced into integers. For example, if we use integers and evaluate something of the form log_b(b^k) the answer is what it should be:


```
sage: log(3^5,3)==5
True
```


However, if we use reals which can be coerced into integers, the answer is rounded and slightly off:


```
sage: log(3.0^5,3.0)==5
False
```


This problem doesn't always happen, for example if we replace the 5 with 12:


```
sage: log(3.0^12,3.0)==12
True
```


This only seems to be happening for some exponents; in base 3, we found that this sort of expression evaluates to False for exponents equal to 5, 13 and 17, but it does not happen for numbers in between.


---

Comment by kcrisman created at 2013-07-15 01:50:25

author is for the author of the patch :)  This is probably typical floating point stuff, not sure how easy it would be to fix.


---

Comment by jdemeyer created at 2014-06-27 10:37:58

Changing component from calculus to basic arithmetic.


---

Comment by jdemeyer created at 2014-06-27 10:37:58

Changing keywords from "logarithms" to "logarithm mpfr rounding".


---

Comment by jdemeyer created at 2014-06-27 10:37:58

Changing assignee from burcin to AlexGhitza.


---

Comment by jdemeyer created at 2014-08-29 16:11:50

Sage is not the place to implement this. If you really need this, it should be implemented in MPFR, then Sage can interface it.

Close as "wontfix".


---

Comment by jdemeyer created at 2014-08-29 16:11:50

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2014-08-29 16:11:56

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-08-29 18:33:03

Resolution: wontfix
