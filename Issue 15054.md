# Issue 15054: The Matroid() function should support rings that don't implement is_field()

Issue created by migration from Trac.

Original creator: Stefan

Original creation time: 2013-10-16 16:35:47

Keywords: matroid

Example:


```
sage: R.<x,y> = ZZ['x','y']
sage: Q = R.quotient([x^2 - y + 1, y^3 + 3 * x - 7])
sage: A = Matrix(Q, [[1,0,1],[0,1,1]])
sage: M = Matroid(A)
Traceback (most recent call last)
...
NotImplementedError: 
```


Solution:

Catch NotImplementedError in a try... except block. Probably do the same for the order() test in the same line of code of sage/matroids/constructor.py


---

Comment by Rajesh_Veeranki created at 2014-02-11 20:40:15

I'm not sure what should be written inside the except block.How do we construct a matroid from a ring which is not a field, and which function to use.Please clarify,seeing the code i've pasted!
----


```python
if 'matrix' in kwds:
            if base_ring == GF(2):
                M = BinaryMatroid(groundset=kwds['groundset'], matrix=A)
            elif base_ring == GF(3):
                M = TernaryMatroid(groundset=kwds['groundset'], matrix=A)
            else:
                try:
                    if base_ring.is_field():
                        try:
                            if base_ring.order() == 4:  # GF(4) can have different generators.
                                M = QuaternaryMatroid(groundset=kwds['groundset'], matrix=A)
                            else:
                                M = LinearMatroid(groundset=kwds['groundset'], matrix=A, ring=base_ring)
                        except NotImplementedError:
                            raise NotImplementedError
                except NotImplementedError:
                    raise NotImplementedError
```



---

Comment by slelievre created at 2014-11-13 15:41:36

A similar discussion (try/except around `is_field`) took place at #10063.


---

Comment by jdemeyer created at 2017-07-07 11:26:50

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-07-07 11:26:50

The issue from this ticket is fixed by #23382.

However, even then the example does not work because `Q` is not a field. Linear matroids (defined using matrices) require linear algebra, which really means that they should be defined over a field. One might get away with integral domains by going to the fraction field (and it's not clear to me that `Q` really is an integral domain). In any case, Sage is unable to do non-trivial arithmetic in `Q`, so this example does not work.


---

Comment by jdemeyer created at 2017-07-07 11:26:55

Changing status from needs_review to positive_review.


---

Comment by Stefan created at 2017-07-07 15:11:32

Not completely accurate. Matroid theory research includes matroids representable over "partial fields", where the entries are from a ring, and the submatrix determinants are all zero or in a multiplicative group of units from that ring. Easiest example: the ring is ZZ and the group is {-1,1}. This gives the regular matroids (they happen to have a custom implementation in Sage using the RegularMatroid class, but other partial fields don't).

Sage's LinearMatroid class has support for partial fields, especially through the "fundamentals=" argument to some methods. Internally everything was designed to work with such matrices. Consideration for these lead to tickets like #17692 and #15297 and #15295 .

I assume #23382 fixes the issue reported here (I'll try to review that this weekend), so I will leave this ticket as positive_review.


---

Comment by embray created at 2017-07-13 07:54:31

Closing tickets in the sage-duplicate/invalid/wontfix module with positive_review (i.e. someone has confirmed they should be closed).


---

Comment by embray created at 2017-07-13 07:54:31

Resolution: wontfix
