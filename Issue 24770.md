# Issue 24770: Bug in to_vector-method of ClassicalMatrixLieAlgebra class

Issue created by migration from Trac.

Original creator: soehms

Original creation time: 2018-03-18 17:49:50

CC:  tscrim

Keywords: classical lie algebra to_vector

Reproducible bug explained by the following example:


```
sage: LM = lie_algebras.sp(QQ, 4, representation='matrix')
sage: e1, e2, f1, f2, h1, h2 = LM.gens()
sage: h1.to_vector()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
/home/sebastian/develop/sage/local/lib/python2.7/site-packages/sage/categories/finite_dimensional_lie_algebras_with_basis.pyc in to_vector(self)
    862             M = self.parent().module()
    863             B = M.basis()
--> 864             return M.sum(self[k] * B[i] for i,k in enumerate(self.parent()._basis_ordering))
    865
    866         _vector_ = to_vector

....................

TypeError: unsupported operand parent(s) for *: 'Sparse vector space of dimension 4 over Rational Field' and 'Vector space of dimension 10 over Rational Field'
sage:

```




---

Comment by tscrim created at 2018-03-20 00:38:13

What I did was make the generic `to_vector` call `monomial_coefficients`. Now the `NotImplementedError` raise by `monomial_coefficients` is a more general safeguard when the dimension is not known to be finite. However, fixing that is a separate issue IMO.
----
New commits:


---

Comment by tscrim created at 2018-03-20 00:38:13

Changing status from new to needs_review.


---

Comment by soehms created at 2018-03-22 19:12:16

I agree! If you create a new ticket for the implementation of monomial_coefficients for finite dimensional instances of LieAlgebraFromAssociative you can switch to positive review!


---

Comment by tscrim created at 2018-03-26 00:46:17

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2018-03-26 00:46:17

Replying to [comment:2 soehms]:
> I agree! If you create a new ticket for the implementation of monomial_coefficients for finite dimensional instances of LieAlgebraFromAssociative you can switch to positive review!

Great, thank you. This is now #25033.


---

Comment by vbraun created at 2018-05-12 11:47:29

Resolution: fixed
