# Issue 15561: MWrank doctest broken on Solaris

archive/issues_015561.json:
```json
{
    "body": "CC:  @JohnCremona @categorie @mwhansen\n\nKeywords: mwrank\n\nThis was most likely caused by #10108:\n\nhttp://build.sagemath.org/sage/builders/%20%20slow%20Skynet%20mark%20%28SunOS%205.10-32%29%20incremental/builds/11/steps/shell_5/logs/stdio\n\n```\nsage -t --long src/sage/interfaces/mwrank.py\n**********************************************************************\nFile \"src/sage/interfaces/mwrank.py\", line 180, in sage.interfaces.mwrank.Mwrank_class.__init__\nFailed example:\n    M('0 -1 1 0 0')\nExpected:\n    'Curve [0,-1,1,0,0] :\\tRank = 0\\n\\n\\nRegulator = 1\\n'\nGot:\n    'Curve [0,-1,1,0,0] :    Rank = 0\\n\\n\\nRegulator = 1\\n'\n**********************************************************************\nFile \"src/sage/interfaces/mwrank.py\", line 233, in sage.interfaces.mwrank.Mwrank_class.__call__\nFailed example:\n    mwrank('0 -1 1 0 0')\nExpected:\n    'Curve [0,-1,1,0,0] :\\tBasic pair: I=16, J=-304\\n...'\nGot:\n    'Curve [0,-1,1,0,0] :    Basic pair: I=16, J=-304\\ndisc=-76032\\n2-adic index bound = 2\\nBy Lemma 5.1(a), 2-adic index = 1\\n2-adic index = 1\\nOne (I,J) pair\\nLooking for quartics with I = 16, J = -304\\nLooking for Type 3 quartics:\\nTrying positive a from 1 up to 1 (square a first...)\\n(1,0,-4,4,0)    --trivial\\n(1,0,2,4,1)     --trivial\\nTrying positive a from 1 up to 1 (...then non-square a)\\nFinished looking for Type 3 quartics.\\nMordell rank contribution from B=im(eps) = 0\\nSelmer  rank contribution from B=im(eps) = 0\\nSha     rank contribution from B=im(eps) = 0\\nMordell rank contribution from A=ker(eps) = 0\\nSelmer  rank contribution from A=ker(eps) = 0\\nSha     rank contribution from A=ker(eps) = 0\\n\\nUsed full 2-descent via multiplication-by-2 map\\nRank = 0\\nRank of S^2(E)  = 0\\n\\nProcessing points found during 2-descent...done:\\n  now regulator = 1\\n\\n\\nRegulator = 1\\n\\nThe rank and full Mordell-Weil basis have been determined unconditionally.\\n (0.030118 seconds)'\n**********************************************************************\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/15798\n\n",
    "created_at": "2014-02-08T13:01:39Z",
    "labels": [
        "component: elliptic curves",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "MWrank doctest broken on Solaris",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15561",
    "user": "https://github.com/vbraun"
}
```
CC:  @JohnCremona @categorie @mwhansen

Keywords: mwrank

This was most likely caused by #10108:

http://build.sagemath.org/sage/builders/%20%20slow%20Skynet%20mark%20%28SunOS%205.10-32%29%20incremental/builds/11/steps/shell_5/logs/stdio

```
sage -t --long src/sage/interfaces/mwrank.py
**********************************************************************
File "src/sage/interfaces/mwrank.py", line 180, in sage.interfaces.mwrank.Mwrank_class.__init__
Failed example:
    M('0 -1 1 0 0')
Expected:
    'Curve [0,-1,1,0,0] :\tRank = 0\n\n\nRegulator = 1\n'
Got:
    'Curve [0,-1,1,0,0] :    Rank = 0\n\n\nRegulator = 1\n'
**********************************************************************
File "src/sage/interfaces/mwrank.py", line 233, in sage.interfaces.mwrank.Mwrank_class.__call__
Failed example:
    mwrank('0 -1 1 0 0')
Expected:
    'Curve [0,-1,1,0,0] :\tBasic pair: I=16, J=-304\n...'
Got:
    'Curve [0,-1,1,0,0] :    Basic pair: I=16, J=-304\ndisc=-76032\n2-adic index bound = 2\nBy Lemma 5.1(a), 2-adic index = 1\n2-adic index = 1\nOne (I,J) pair\nLooking for quartics with I = 16, J = -304\nLooking for Type 3 quartics:\nTrying positive a from 1 up to 1 (square a first...)\n(1,0,-4,4,0)    --trivial\n(1,0,2,4,1)     --trivial\nTrying positive a from 1 up to 1 (...then non-square a)\nFinished looking for Type 3 quartics.\nMordell rank contribution from B=im(eps) = 0\nSelmer  rank contribution from B=im(eps) = 0\nSha     rank contribution from B=im(eps) = 0\nMordell rank contribution from A=ker(eps) = 0\nSelmer  rank contribution from A=ker(eps) = 0\nSha     rank contribution from A=ker(eps) = 0\n\nUsed full 2-descent via multiplication-by-2 map\nRank = 0\nRank of S^2(E)  = 0\n\nProcessing points found during 2-descent...done:\n  now regulator = 1\n\n\nRegulator = 1\n\nThe rank and full Mordell-Weil basis have been determined unconditionally.\n (0.030118 seconds)'
**********************************************************************
```

Issue created by migration from https://trac.sagemath.org/ticket/15798





---

archive/issue_comments_200773.json:
```json
{
    "body": "OK, but please do not revert #10108 since there was a real problem fixed there.  This is just a question of putting the right expected output into a doctest to allow for whitespace differences.  The output really does contain a tab character after the colon.\n\nI hope someone knows how to fix this, other than removing tab chars from all eclib output (I count 321 lines in eclib's source code) which would be very tedious.",
    "created_at": "2014-02-08T14:13:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15561#issuecomment-200773",
    "user": "https://github.com/JohnCremona"
}
```

OK, but please do not revert #10108 since there was a real problem fixed there.  This is just a question of putting the right expected output into a doctest to allow for whitespace differences.  The output really does contain a tab character after the colon.

I hope someone knows how to fix this, other than removing tab chars from all eclib output (I count 321 lines in eclib's source code) which would be very tedious.



---

archive/issue_comments_200774.json:
```json
{
    "body": "The terminal decides to replace the tab character with spaces, not eclib. Just change the doctest to an ellipsis instead of testing for the presence of a tab character.",
    "created_at": "2014-02-08T14:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15561#issuecomment-200774",
    "user": "https://github.com/vbraun"
}
```

The terminal decides to replace the tab character with spaces, not eclib. Just change the doctest to an ellipsis instead of testing for the presence of a tab character.



---

archive/issue_comments_200775.json:
```json
{
    "body": "I thought that everything after the ellipsis was ignored?  Ignoring everything after the first tab would mean that the correctness of the output was not tested.",
    "created_at": "2014-02-08T14:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15561#issuecomment-200775",
    "user": "https://github.com/JohnCremona"
}
```

I thought that everything after the ellipsis was ignored?  Ignoring everything after the first tab would mean that the correctness of the output was not tested.



---

archive/issue_comments_200776.json:
```json
{
    "body": "no, you can have multiple ellipses, every one just matches some substring. See http://docs.python.org/2/library/doctest.html#directives",
    "created_at": "2014-02-08T14:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15561#issuecomment-200776",
    "user": "https://github.com/vbraun"
}
```

no, you can have multiple ellipses, every one just matches some substring. See http://docs.python.org/2/library/doctest.html#directives



---

archive/issue_comments_200777.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-02-09T18:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15561#issuecomment-200777",
    "user": "https://github.com/JohnCremona"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_200778.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-02-09T18:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15561#issuecomment-200778",
    "user": "https://github.com/JohnCremona"
}
```

New commits:



---

archive/issue_events_046464.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-02-11T15:14:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15561",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15561#event-46464"
}
```



---

archive/issue_comments_200779.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-02-11T15:14:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15561#issuecomment-200779",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
