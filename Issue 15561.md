# Issue 15561: MWrank doctest broken on Solaris

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2014-02-08 13:01:39

CC:  cremona wuthrich mhansen

Keywords: mwrank

This was most likely caused by #10108:

http://build.sagemath.org/sage/builders/%20%20slow%20Skynet%20mark%20%28SunOS%205.10-32%29%20incremental/builds/11/steps/shell_5/logs/stdio


```
sage -t --long src/sage/interfaces/mwrank.py
**********************************************************************
File "src/sage/interfaces/mwrank.py", line 180, in sage.interfaces.mwrank.Mwrank_class.__init__
Failed example:
    M('0 -1 1 0 0')
Expected:
    'Curve [0,-1,1,0,0] :\tRank = 0\n\n\nRegulator = 1\n'
Got:
    'Curve [0,-1,1,0,0] :    Rank = 0\n\n\nRegulator = 1\n'
**********************************************************************
File "src/sage/interfaces/mwrank.py", line 233, in sage.interfaces.mwrank.Mwrank_class.__call__
Failed example:
    mwrank('0 -1 1 0 0')
Expected:
    'Curve [0,-1,1,0,0] :\tBasic pair: I=16, J=-304\n...'
Got:
    'Curve [0,-1,1,0,0] :    Basic pair: I=16, J=-304\ndisc=-76032\n2-adic index bound = 2\nBy Lemma 5.1(a), 2-adic index = 1\n2-adic index = 1\nOne (I,J) pair\nLooking for quartics with I = 16, J = -304\nLooking for Type 3 quartics:\nTrying positive a from 1 up to 1 (square a first...)\n(1,0,-4,4,0)    --trivial\n(1,0,2,4,1)     --trivial\nTrying positive a from 1 up to 1 (...then non-square a)\nFinished looking for Type 3 quartics.\nMordell rank contribution from B=im(eps) = 0\nSelmer  rank contribution from B=im(eps) = 0\nSha     rank contribution from B=im(eps) = 0\nMordell rank contribution from A=ker(eps) = 0\nSelmer  rank contribution from A=ker(eps) = 0\nSha     rank contribution from A=ker(eps) = 0\n\nUsed full 2-descent via multiplication-by-2 map\nRank = 0\nRank of S^2(E)  = 0\n\nProcessing points found during 2-descent...done:\n  now regulator = 1\n\n\nRegulator = 1\n\nThe rank and full Mordell-Weil basis have been determined unconditionally.\n (0.030118 seconds)'
**********************************************************************
```



---

Comment by cremona created at 2014-02-08 14:13:11

OK, but please do not revert #10108 since there was a real problem fixed there.  This is just a question of putting the right expected output into a doctest to allow for whitespace differences.  The output really does contain a tab character after the colon.

I hope someone knows how to fix this, other than removing tab chars from all eclib output (I count 321 lines in eclib's source code) which would be very tedious.


---

Comment by vbraun created at 2014-02-08 14:22:05

The terminal decides to replace the tab character with spaces, not eclib. Just change the doctest to an ellipsis instead of testing for the presence of a tab character.


---

Comment by cremona created at 2014-02-08 14:48:56

I thought that everything after the ellipsis was ignored?  Ignoring everything after the first tab would mean that the correctness of the output was not tested.


---

Comment by vbraun created at 2014-02-08 14:59:50

no, you can have multiple ellipses, every one just matches some substring. See http://docs.python.org/2/library/doctest.html#directives


---

Comment by cremona created at 2014-02-09 18:40:08

Changing status from new to needs_review.


---

Comment by cremona created at 2014-02-09 18:40:08

New commits:


---

Comment by vbraun created at 2014-02-11 15:14:13

Resolution: fixed
