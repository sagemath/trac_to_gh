# Issue 23296: fail to build cryptominisat

archive/issues_023296.json:
```json
{
    "body": "CC:  saraedum slelievre tmonteil\n\nKeywords: cryptominisat\n\nThe compiler complains at\n\n```\n../src/scalmc.cpp: In member function 'bool CUSP::ScalApproxMC(SATCount&)':\n../src/scalmc.cpp:554:40: error: call of overloaded 'abs(uint64_t)' is ambiguous\n                 if (abs(hashCount-mPrev) <= 2 && mPrev != 0) {\n```\n\nSee the logfile [attachment:cryptominisat-5.0.1.log]. Might be due to the recent gcc 7.1.1 that I am using\n\nIssue created by migration from https://trac.sagemath.org/ticket/23533\n\n",
    "created_at": "2017-07-24T09:02:18Z",
    "labels": [
        "packages: optional",
        "major",
        "bug"
    ],
    "title": "fail to build cryptominisat",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23296",
    "user": "vdelecroix"
}
```
CC:  saraedum slelievre tmonteil

Keywords: cryptominisat

The compiler complains at

```
../src/scalmc.cpp: In member function 'bool CUSP::ScalApproxMC(SATCount&)':
../src/scalmc.cpp:554:40: error: call of overloaded 'abs(uint64_t)' is ambiguous
                 if (abs(hashCount-mPrev) <= 2 && mPrev != 0) {
```

See the logfile [attachment:cryptominisat-5.0.1.log]. Might be due to the recent gcc 7.1.1 that I am using

Issue created by migration from https://trac.sagemath.org/ticket/23533





---

archive/issue_comments_325959.json:
```json
{
    "body": "Attachment [cryptominisat-5.0.1.log](tarball://root/attachments/some-uuid/ticket23533/cryptominisat-5.0.1.log) by vdelecroix created at 2017-07-24 09:02:43",
    "created_at": "2017-07-24T09:02:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23296#issuecomment-325959",
    "user": "vdelecroix"
}
```

Attachment [cryptominisat-5.0.1.log](tarball://root/attachments/some-uuid/ticket23533/cryptominisat-5.0.1.log) by vdelecroix created at 2017-07-24 09:02:43



---

archive/issue_comments_325960.json:
```json
{
    "body": "cf. https://github.com/msoos/cryptominisat/issues/422",
    "created_at": "2017-08-25T13:59:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23296#issuecomment-325960",
    "user": "malb"
}
```

cf. https://github.com/msoos/cryptominisat/issues/422



---

archive/issue_comments_325961.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2018-03-05T16:46:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23296#issuecomment-325961",
    "user": "vdelecroix"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_325962.json:
```json
{
    "body": "Do you want to upgrade to 5.0.2 even so it is marked as a pre-release? It should contain the fix.",
    "created_at": "2018-03-05T20:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23296#issuecomment-325962",
    "user": "fbissey"
}
```

Do you want to upgrade to 5.0.2 even so it is marked as a pre-release? It should contain the fix.



---

archive/issue_comments_325963.json:
```json
{
    "body": "Replying to [comment:5 fbissey]:\n> Do you want to upgrade to 5.0.2 even so it is marked as a pre-release? It should contain the fix.\n\n5.0.2 does build on my computer. However, your patch `osx_install_nameQA.patch` does not apply anymore. Should it simply be removed? If not, I won't be able to adapt it.",
    "created_at": "2018-03-05T21:37:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23296#issuecomment-325963",
    "user": "vdelecroix"
}
```

Replying to [comment:5 fbissey]:
> Do you want to upgrade to 5.0.2 even so it is marked as a pre-release? It should contain the fix.

5.0.2 does build on my computer. However, your patch `osx_install_nameQA.patch` does not apply anymore. Should it simply be removed? If not, I won't be able to adapt it.



---

archive/issue_comments_325964.json:
```json
{
    "body": "Replying to [comment:6 vdelecroix]:\n> Replying to [comment:5 fbissey]:\n> > Do you want to upgrade to 5.0.2 even so it is marked as a pre-release? It should contain the fix.\n> \n> 5.0.2 does build on my computer. However, your patch `osx_install_nameQA.patch` does not apply anymore. Should it simply be removed? If not, I won't be able to adapt it.\n\nI opened a discussion about a release in [issue 463](https://github.com/msoos/cryptominisat/issues/463).",
    "created_at": "2018-03-05T21:41:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23296#issuecomment-325964",
    "user": "vdelecroix"
}
```

Replying to [comment:6 vdelecroix]:
> Replying to [comment:5 fbissey]:
> > Do you want to upgrade to 5.0.2 even so it is marked as a pre-release? It should contain the fix.
> 
> 5.0.2 does build on my computer. However, your patch `osx_install_nameQA.patch` does not apply anymore. Should it simply be removed? If not, I won't be able to adapt it.

I opened a discussion about a release in [issue 463](https://github.com/msoos/cryptominisat/issues/463).



---

archive/issue_comments_325965.json:
```json
{
    "body": "The patch doesn't apply because there is too much fuzz but the issue hasn't been fixed. I must say I never followed with upstream to get them to fix those particular issues better than what they do now.",
    "created_at": "2018-03-06T01:26:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23296#issuecomment-325965",
    "user": "fbissey"
}
```

The patch doesn't apply because there is too much fuzz but the issue hasn't been fixed. I must say I never followed with upstream to get them to fix those particular issues better than what they do now.



---

archive/issue_comments_325966.json:
```json
{
    "body": "I inspected the stuff upstream did a bit more. I cannot say I think it is very good but it is worth trying without doing anything first. There is a lot more windows specific code now. I feel like `src/CMakeLists.txt` could use a trim but I may be arrogant there.",
    "created_at": "2018-03-06T01:37:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23296#issuecomment-325966",
    "user": "fbissey"
}
```

I inspected the stuff upstream did a bit more. I cannot say I think it is very good but it is worth trying without doing anything first. There is a lot more windows specific code now. I feel like `src/CMakeLists.txt` could use a trim but I may be arrogant there.



---

archive/issue_comments_325967.json:
```json
{
    "body": "I have no problems building 5.0.1 with clang-4.",
    "created_at": "2018-03-06T13:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23296#issuecomment-325967",
    "user": "rws"
}
```

I have no problems building 5.0.1 with clang-4.



---

archive/issue_comments_325968.json:
```json
{
    "body": "5.0.1 also builds fine with clang-5.0.1.",
    "created_at": "2018-03-08T06:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23296#issuecomment-325968",
    "user": "rws"
}
```

5.0.1 also builds fine with clang-5.0.1.



---

archive/issue_comments_325969.json:
```json
{
    "body": "Changing priority from blocker to critical.",
    "created_at": "2018-03-25T00:38:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23296#issuecomment-325969",
    "user": "vbraun"
}
```

Changing priority from blocker to critical.



---

archive/issue_comments_325970.json:
```json
{
    "body": "Fixed by #25480?",
    "created_at": "2018-06-01T19:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23296#issuecomment-325970",
    "user": "jdemeyer"
}
```

Fixed by #25480?



---

archive/issue_comments_325971.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-06-01T21:48:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23296#issuecomment-325971",
    "user": "vdelecroix"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_325972.json:
```json
{
    "body": "Replying to [comment:15 jdemeyer]:\n> Fixed by #25480?\n\nyes",
    "created_at": "2018-06-01T21:48:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23296#issuecomment-325972",
    "user": "vdelecroix"
}
```

Replying to [comment:15 jdemeyer]:
> Fixed by #25480?

yes



---

archive/issue_comments_325973.json:
```json
{
    "body": "The upgrade to a stable version of Cryptominisat containing the fix is at #25480.\n\nOnce #25480 is merged and closed, this can be closed too.",
    "created_at": "2018-06-11T12:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23296#issuecomment-325973",
    "user": "slelievre"
}
```

The upgrade to a stable version of Cryptominisat containing the fix is at #25480.

Once #25480 is merged and closed, this can be closed too.



---

archive/issue_comments_325974.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2018-06-11T12:34:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23296#issuecomment-325974",
    "user": "jdemeyer"
}
```

Resolution: duplicate
