# Issue 25392: Bad latex translation of output

Issue created by migration from https://trac.sagemath.org/ticket/25629

Original creator: @nasser1

Original creation time: 2018-06-21 12:30:34

CC:  rws tscrim alexjbest

Keywords: latex

sage 8.3 beta 6.



```
    sage: var('t')
    sage: anti=integrate(exp(t)*log(1+t),t)
    sage: anti
    e^(-1)*exp_integral_e(1, -t - 1) + e^t*log(t + 1)

    sage: latex(anti)
    e^{\left(-1\right)} exp_integral_e\left(1, -t - 1\right) + e^{t} \log\left(t + 1\right)

```


The latex above is not good at all. It renders as (do not know how to inser images here).


Which is not good. May be sage needs to use a `\DeclareMathOperator` on `exp_integral_e`


---

Comment by @nasser1 created at 2018-06-21 13:11:09

Changing type from PLEASE CHANGE to enhancement.


---

Comment by alexjbest created at 2018-06-22 06:41:23

Changing keywords from "latex" to "latex,beginner".


---

Comment by alexjbest created at 2018-06-22 06:41:23

Changing component from PLEASE CHANGE to user interface.


---

Comment by alexjbest created at 2018-06-22 06:41:23

It seems this can be accomplished by adding a custom `_print_latex_` method such as this one from Bessel to the classes in `src/sage/functions/exp_integral.pyc`, it looks like `E_n` is a pretty accepted notation for it.


```
    def _print_latex_(self, n, z):
        """
        Custom ``_print_latex_`` method.

        EXAMPLES::

            sage: latex(bessel_J(1, x))
            J_{1}(x)
        """
        return r"J_{%s}(%s)" % (latex(n), latex(z))
```


Possibly the arguments like `latex_name=r'exp_integral_e',` should also be removed in the same file then.


---

Comment by @durgeshra created at 2019-01-10 13:19:43

Changing status from new to needs_review.


---

Comment by @durgeshra created at 2019-01-10 13:19:43

New commits:


---

Comment by tscrim created at 2019-01-10 17:46:08

The patchbot says there are 3 failing doctests:

```
sage -t --long src/sage/functions/other.py  # 3 doctests failed
```


Ralf, I was wondering if you could quickly confirm that this is the correct thing to do.


---

Comment by git created at 2019-01-11 03:31:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @durgeshra created at 2019-01-11 05:44:33

`@`tscrim The doctest failures were due to change in LaTeX translation. I have fixed them and they work fine now. :-)


---

Comment by @durgeshra created at 2019-01-12 11:06:05

`@`tscrim `@`rws Any reviews on the commit, please?


---

Comment by alexjbest created at 2019-01-12 12:27:51

Some of these look good, but others seem like the code has been made more complicated and the output worse looking, for example before this patch


```
sage: latex(sin_integral(x))
\operatorname{Si}\left(x\right)

```


which renders in latex with roman Si which looks better than without the `operatorname`.


---

Comment by @durgeshra created at 2019-01-12 13:02:01

Replying to [comment:11 alexjbest]:

Then is it okay if I change the first two classes only (the ones whose LaTeX output is not rendered properly at all without the patch)?

> Some of these look good, but others seem like the code has been made more complicated and the output worse looking, for example before this patch
> 
> {{{
> sage: latex(sin_integral(x))
> \operatorname{Si}\left(x\right)
> 
> }}}
> 
> which renders in latex with roman Si which looks better than without the `operatorname`.


---

Comment by git created at 2019-01-12 13:45:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @durgeshra created at 2019-01-12 13:48:06

`@`alexjbest Now, the present diff improves the latex output of `exp_integral_e` and `exp_integral_e1` without affecting the rest. :-)


---

Comment by alexjbest created at 2019-01-13 07:48:25

Okay this looks good to me now. Thanks.


---

Comment by alexjbest created at 2019-01-13 07:48:25

Changing status from needs_review to positive_review.


---

Comment by embray created at 2019-01-15 18:16:10

Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.


---

Comment by vbraun created at 2019-01-26 15:53:29

Resolution: fixed
