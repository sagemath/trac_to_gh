# Issue 19314: Basic failures in projective product morphisms

Issue created by migration from Trac.

Original creator: bhutz

Original creation time: 2015-11-08 19:33:17

CC:  bhutz

Keywords: product projective morphism

The following are simple bugs in projective product morphisms:


```
PP.<x,y,z,u,v,w>=ProductProjectiveSpaces(QQ,[1,1,1])
HP=End(PP)
f=HP([v*x^2,w*y^2,z^2,u^2,v^2,w^2])
Q=PP([0,1,1,1,1,0])
f(Q)
```



```
R.<s,t>=PolynomialRing(QQ)
Z.<a,b,x,y,z> = ProductProjectiveSpaces([1,2],QQ)
P.<u,v,w,s,t,r>=ProductProjectiveSpaces([3,1],QQ)
H =Hom(Z,P)
f = H([a^2,b^2,a^2,a*b,a*x,b*z])
```


the following should fail (not multihomogeneous) but passes

```
Z.<a,b,c,x,y,z> = ProductProjectiveSpaces([1,3],QQ)
P.<u,v,w,s,t,r>=ProductProjectiveSpaces([2,2],QQ)
H =Hom(Z,P)
f = H([a^2,b^2,c^2,x^2,y^2,z^2])
```



---

Comment by bhutz created at 2015-11-21 14:04:03

Call also needs some basic input checking:


```
PP.<t0,t1,t2,t3,t4>=ProductProjectiveSpaces([2,1],ZZ)
Q=PP([1,1,1,2,1])
Z.<a,b,x,y,z> = ProductProjectiveSpaces([1,2],ZZ)
H = End(Z)
f = H([a^3,b^3+a*b^2,x^2,y^2-z^2,z*y])
f(Q)
```



---

Comment by tsalvi created at 2015-12-11 22:12:14

New commits:


---

Comment by tsalvi created at 2015-12-11 22:12:14

Changing status from new to needs_review.


---

Comment by bhutz created at 2015-12-12 18:54:22

Changing status from needs_review to needs_work.


---

Comment by bhutz created at 2015-12-12 18:54:22

A couple comments:

- There is a test failure in morphism.py. That test is checking if the map is a non-morpism, but the map is actually poorly defined. So correct the map to still be a non-morphism, but a valid map.

- I think we need at least some basic input checking in __call__, e.g. that the codomain of the point is in the domain of the function, otherwise examples like the following are badly behaved:


```
PP.<t0,t1,t2,t3,t4>=ProductProjectiveSpaces([2,1],ZZ)
Q=PP([1,1,1,2,1])
Z.<a,b,x,y,z> = ProductProjectiveSpaces([1,2],ZZ)
H = End(Z)
f = H([a^3,b^3+a*b^2,x^2,y^2-z^2,z*y])
f(Q)
```


While we are fixing __call__, I think you should add a test for the parameter `check` as well, such as the following:


```
PP.<x,y,z,u,v,w,s,t>=ProductProjectiveSpaces(QQ,[3,3])
HP=End(PP)
g=HP([4*v*x^2,2*w*y^2,2*v*z^2,2*s*x*y,v^2,w^2,3*s*v,t^2])
P=PP([1,1,2,1,1,0,3,1])
g(P,check=False)
```



---

Comment by git created at 2016-01-15 20:19:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-01-21 16:57:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bhutz created at 2016-01-21 17:17:31

Still needs some minor work:

should have spaces around the =
`sage: PP.<t0,t1,t2,t3,t4>=ProductProjectiveSpaces([2,1], ZZ)`


On lines 12, 39, 62, 149, 388 there is terminating white space

In the functions init, call no space around = for check

2 doc test failures


---

Comment by git created at 2016-01-21 17:26:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tsalvi created at 2016-01-21 17:27:11

Changing status from needs_work to needs_review.


---

Comment by bhutz created at 2016-01-21 17:29:24

Changing status from needs_review to positive_review.


---

Comment by bhutz created at 2016-01-21 17:29:24

Still needs some minor work:

should have spaces around the =
`sage: PP.<t0,t1,t2,t3,t4>=ProductProjectiveSpaces([2,1], ZZ)`


On lines 12, 39, 62, 149, 388 there is terminating white space

In the functions init, call no space around = for check

2 doc test failures
----
New commits:


---

Comment by vbraun created at 2016-01-24 21:48:27

Resolution: fixed


---

Comment by jdemeyer created at 2016-03-22 13:41:30

Is "Joe Eisner" by chance equal to "Joseph Eisner" from #19891 and #20067?


---

Comment by bhutz created at 2016-03-22 14:06:33

Yes, those are the same.


---

Comment by kcrisman created at 2016-03-22 14:17:52

Also, just want to make sure that it should be "Tom Salvi" and not "Thomas P. Salvi" as you registered.
