# Issue 28613: Polar of polytopes does not check if polytope is full-dimensional

Issue created by migration from https://trac.sagemath.org/ticket/28850

Original creator: @kliem

Original creation time: 2019-12-06 12:41:06

CC:  jipilab @laisrast

Currently, the polar of rational polyhedra does not check, whether the polyhedron is full-dimensional:


```
sage: P = polytopes.simplex(3, base_ring=QQ)
sage: P.polar()
A 4-dimensional polyhedron in QQ^4 defined as the convex hull of 4 vertices and 1 line
```


We fix this by adding an assertion


```
sage: P = polytopes.simplex(3, base_ring=QQ)
sage: P.polar()
Traceback (most recent call last):
...
AssertionError: must be full-dimensional
```


We change the other message `"Not a polytope."` according to conventions to `"not a polytope"`.


---

Comment by @kliem created at 2019-12-06 13:47:33

Changing status from new to needs_review.


---

Comment by @kliem created at 2019-12-06 13:47:33

I'm not exactly happy with the phrasing and the name `in_affine_span`.
----
New commits:


---

Comment by @kliem created at 2019-12-06 13:47:52

phrasing in the doctests


---

Comment by @kliem created at 2019-12-06 15:44:22

Changing keywords from "" to "polar, polytopes".


---

Comment by tscrim created at 2019-12-11 01:42:28


```
Check that :trac:`28850` is fixed::
```

is overindented. Also it is not considered good practice to do an `assert` to check input but instead raise a `ValueError` or `TypeError`. Otherwise LGTM.


---

Comment by git created at 2019-12-11 06:44:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2019-12-11 07:15:14

Ok, done. I also changed the test for compactness to give a `ValueError`.

Replying to [comment:5 tscrim]:
> {{{
> Check that :trac:`28850` is fixed::
> }}}
> is overindented. Also it is not considered good practice to do an `assert` to check input but instead raise a `ValueError` or `TypeError`. Otherwise LGTM.


---

Comment by tscrim created at 2019-12-11 07:18:10

Thanks.


---

Comment by tscrim created at 2019-12-11 07:18:10

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-12-16 23:15:07

Resolution: fixed
