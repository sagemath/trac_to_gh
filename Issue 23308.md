# Issue 23308: segmentation fault with coefficients() on symbolic expressions

Issue created by migration from Trac.

Original creator: vdelecroix

Original creation time: 2017-07-26 09:44:39

CC:  rws

Keywords: bug, symbolics

On sage 8.0

```
sage: q,a,b = SR.var('q,a,b')
sage: F = (a^2 + 6*a + 2*b)*q/(a^5 + 3*a^4*b + 3*a^3*b^2 + a^2*b^3) + (3*a + b)/(a^5 + 3*a^4*b + 3*a^3*b^2 + a^2*b^3)
sage: F.coefficients()
Erreur de segmentation (core dumped)
```



---

Comment by rws created at 2017-07-26 13:39:24

Confirmed. I added a minimal case.


---

Comment by rws created at 2017-07-29 14:41:28

The Pynac code does not check if the expression is a polynomial fraction in `x`. That case cannot be handled via `coefficient()` (the user should expand as a series). I will add a check to prevent this problem.


---

Comment by rws created at 2017-08-03 06:33:15

Pynac master has the fix. This branch adds doctests.
----
New commits:


---

Comment by rws created at 2017-09-06 04:47:30

While the core dump is fixed in develop, one of the doctests fails.


---

Comment by rws created at 2017-09-06 04:47:30

Changing priority from critical to major.


---

Comment by charpent created at 2017-11-22 22:19:56

Fixed by #24262. I will give positive review if necessary, but as suggest to matk it duplicate and close it (after positive review of #24262, pf course...)..


---

Comment by rws created at 2017-11-23 06:44:34

This ticket has doctests for #24147 too so let's make #24147 the duplicate.


---

Comment by rws created at 2017-12-26 09:35:07

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-12-27 08:29:23

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-12-27 08:29:23

LGTM.


---

Comment by vbraun created at 2017-12-29 08:57:26

Resolution: fixed
