# Issue 18948: Avoid a %crun crash

Issue created by migration from https://trac.sagemath.org/ticket/19185

Original creator: ncohen

Original creation time: 2015-09-10 13:55:33

CC:  vbraun simonking

When typing several times in a row the following command (which is indeed incorrect)

```
sage: %crun -s cumulative 1+1
```

Sage ends up crashing. That's apparently because the timer is started but not stopped (because of the exception).

This very small branch fixes the problem, and may possibly also fix the other occurrences of a crash due to this function. It happens from time to time on my computer, though the previous example at least is deterministic.

I do not know how exactly I should doctest it, though.


---

Comment by ncohen created at 2015-09-10 13:56:25

New commits:


---

Comment by ncohen created at 2015-09-10 13:56:25

Changing status from new to needs_review.


---

Comment by git created at 2015-09-10 13:56:59

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by chapoton created at 2015-09-12 10:43:31

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2015-09-12 10:43:31

ok, bot is happy and this looks good enough


---

Comment by ncohen created at 2015-09-12 10:43:52

Thanks!


---

Comment by vbraun created at 2015-09-12 16:47:37

Reviewer name missing


---

Comment by vbraun created at 2015-09-12 16:47:37

Changing status from positive_review to needs_work.


---

Comment by chapoton created at 2015-09-13 07:16:38

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2015-09-14 19:01:08

Resolution: fixed
