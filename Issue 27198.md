# Issue 27198: py3: failing doctest in graph_database.py with interactive_query

archive/issues_027198.json:
```json
{
    "body": "CC:  @dimpase @jdemeyer\n\nKeywords: py3, graph\n\n\n```\nsage -t --long src/sage/graphs/graph_database.py\n**********************************************************************\nFile \"src/sage/graphs/graph_database.py\", line 1081, in sage.graphs.graph_database.GraphDatabase.interactive_query\nFailed example:\n    D.interactive_query(display_cols=['graph6', 'num_vertices', 'degree_sequence'], num_edges=5, max_degree=3)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.6/inspect.py\", line 1119, in getfullargspec\n        sigcls=Signature)\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.6/inspect.py\", line 2186, in _signature_from_callable\n        raise TypeError('{!r} is not a callable object'.format(obj))\n    TypeError: 0 is not a callable object\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.6/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.6/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.graph_database.GraphDatabase.interactive_query[1]>\", line 1, in <module>\n        D.interactive_query(display_cols=['graph6', 'num_vertices', 'degree_sequence'], num_edges=Integer(5), max_degree=Integer(3))\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.6/site-packages/sage/graphs/graph_database.py\", line 1087, in interactive_query\n        interact(f)\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.6/site-packages/sage/misc/decorators.py\", line 343, in my_wrap\n        return func(*args)\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.6/site-packages/sagenb/notebook/interact.py\", line 2636, in interact\n        (args, varargs, varkw, defaults) = inspect.getargspec(f)\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.6/inspect.py\", line 1073, in getargspec\n        getfullargspec(func)\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.6/inspect.py\", line 1125, in getfullargspec\n        raise TypeError('unsupported callable') from ex\n    TypeError: unsupported callable\n\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/27435\n\n",
    "created_at": "2019-03-07T12:02:04Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "py3: failing doctest in graph_database.py with interactive_query",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27198",
    "user": "https://github.com/dcoudert"
}
```
CC:  @dimpase @jdemeyer

Keywords: py3, graph


```
sage -t --long src/sage/graphs/graph_database.py
**********************************************************************
File "src/sage/graphs/graph_database.py", line 1081, in sage.graphs.graph_database.GraphDatabase.interactive_query
Failed example:
    D.interactive_query(display_cols=['graph6', 'num_vertices', 'degree_sequence'], num_edges=5, max_degree=3)
Exception raised:
    Traceback (most recent call last):
      File "/Users/dcoudert/sage3/sage/local/lib/python3.6/inspect.py", line 1119, in getfullargspec
        sigcls=Signature)
      File "/Users/dcoudert/sage3/sage/local/lib/python3.6/inspect.py", line 2186, in _signature_from_callable
        raise TypeError('{!r} is not a callable object'.format(obj))
    TypeError: 0 is not a callable object

    The above exception was the direct cause of the following exception:

    Traceback (most recent call last):
      File "/Users/dcoudert/sage3/sage/local/lib/python3.6/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/dcoudert/sage3/sage/local/lib/python3.6/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.graph_database.GraphDatabase.interactive_query[1]>", line 1, in <module>
        D.interactive_query(display_cols=['graph6', 'num_vertices', 'degree_sequence'], num_edges=Integer(5), max_degree=Integer(3))
      File "/Users/dcoudert/sage3/sage/local/lib/python3.6/site-packages/sage/graphs/graph_database.py", line 1087, in interactive_query
        interact(f)
      File "/Users/dcoudert/sage3/sage/local/lib/python3.6/site-packages/sage/misc/decorators.py", line 343, in my_wrap
        return func(*args)
      File "/Users/dcoudert/sage3/sage/local/lib/python3.6/site-packages/sagenb/notebook/interact.py", line 2636, in interact
        (args, varargs, varkw, defaults) = inspect.getargspec(f)
      File "/Users/dcoudert/sage3/sage/local/lib/python3.6/inspect.py", line 1073, in getargspec
        getfullargspec(func)
      File "/Users/dcoudert/sage3/sage/local/lib/python3.6/inspect.py", line 1125, in getfullargspec
        raise TypeError('unsupported callable') from ex
    TypeError: unsupported callable

```


Issue created by migration from https://trac.sagemath.org/ticket/27435





---

archive/issue_comments_382800.json:
```json
{
    "body": "I don't know how to fix it.",
    "created_at": "2019-03-07T12:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382800",
    "user": "https://github.com/dcoudert"
}
```

I don't know how to fix it.



---

archive/issue_comments_382801.json:
```json
{
    "body": "Hi, I am Piyush, I am new to sage, I was wondering if I could be of some help here.\n\nI am not able to replicate this test. Is there something that I am missing? I am using Ubuntu 16.04\n\n```\n$ ./sage -t --long src/sage/graphs/graph_database.py\nRunning doctests with ID 2019-03-08-11-03-04-40b4d48a.\nGit branch: develop\nUsing --optional=dochtml,memlimit,mpir,python2,sage\nDoctesting 1 file.\nsage -t --long src/sage/graphs/graph_database.py\n    [50 tests, 0.49 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 0.6 seconds\n    cpu time: 0.5 seconds\n    cumulative wall time: 0.5 seconds\n```\n",
    "created_at": "2019-03-08T11:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382801",
    "user": "https://github.com/sheldoncooper07"
}
```

Hi, I am Piyush, I am new to sage, I was wondering if I could be of some help here.

I am not able to replicate this test. Is there something that I am missing? I am using Ubuntu 16.04

```
$ ./sage -t --long src/sage/graphs/graph_database.py
Running doctests with ID 2019-03-08-11-03-04-40b4d48a.
Git branch: develop
Using --optional=dochtml,memlimit,mpir,python2,sage
Doctesting 1 file.
sage -t --long src/sage/graphs/graph_database.py
    [50 tests, 0.49 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 0.6 seconds
    cpu time: 0.5 seconds
    cumulative wall time: 0.5 seconds
```




---

archive/issue_comments_382802.json:
```json
{
    "body": "The problem is with Python 3. We are working hard on the transition from Python 2 to Python 3.",
    "created_at": "2019-03-08T11:55:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382802",
    "user": "https://github.com/dcoudert"
}
```

The problem is with Python 3. We are working hard on the transition from Python 2 to Python 3.



---

archive/issue_events_068140.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27198#event-68140"
}
```



---

archive/issue_comments_382803.json:
```json
{
    "body": "Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382803",
    "user": "https://github.com/embray"
}
```

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_comments_382804.json:
```json
{
    "body": "I may have managed to fix this error. I don't know anything about the origins of the code but the error arises in in `graph_database._gen_interact_func` where it seems a string defining a function called `_` is run with `exec`.\n\nI tried changing the name of the function that gets defined and ran into a different python3-related bug in the `sagenb` python package (maintained out of the main sage tree): it still uses `xrange` in `sagenb.notebook.interact` at line 1185.\n\nI downloaded the source for that package, changed the uses of `xrange`, and now the doctest passes on my machine, but the bar for passing is simply emitting a string starting and finishing with `<html>` and `</html>`. \n\nI'm not sure what to suggest for this ticket, the doctest in question has something to do with the old sage notebook (sagenb). The function `interactive_query` returns some html that doesn't appear do anything in jupyter, and I can't use the old notebook on python3 (an error related to Twisted). Is the old notebook formally deprecated? See #22431 and in particular the 'side remark' about the graph database explorer.\n\nIf my changes to `_gen_interact_func` and the `sagenb` package are wanted I can send patches, but as I can't run the notebook myself on python3 I can't even verify that it's a proper fix.",
    "created_at": "2019-05-13T04:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382804",
    "user": "https://github.com/ed359"
}
```

I may have managed to fix this error. I don't know anything about the origins of the code but the error arises in in `graph_database._gen_interact_func` where it seems a string defining a function called `_` is run with `exec`.

I tried changing the name of the function that gets defined and ran into a different python3-related bug in the `sagenb` python package (maintained out of the main sage tree): it still uses `xrange` in `sagenb.notebook.interact` at line 1185.

I downloaded the source for that package, changed the uses of `xrange`, and now the doctest passes on my machine, but the bar for passing is simply emitting a string starting and finishing with `<html>` and `</html>`. 

I'm not sure what to suggest for this ticket, the doctest in question has something to do with the old sage notebook (sagenb). The function `interactive_query` returns some html that doesn't appear do anything in jupyter, and I can't use the old notebook on python3 (an error related to Twisted). Is the old notebook formally deprecated? See #22431 and in particular the 'side remark' about the graph database explorer.

If my changes to `_gen_interact_func` and the `sagenb` package are wanted I can send patches, but as I can't run the notebook myself on python3 I can't even verify that it's a proper fix.



---

archive/issue_comments_382805.json:
```json
{
    "body": "Let's ask the author of #22431 if anything was said about `graph_editor` and interactive queries in `graph_database`.\n\nAlso I don't know if these tools have users. If not, we may simply deprecate the parts involving `sagenb`. Otherwise, someone with enough knowledge in notebooks should try to solve the issues.",
    "created_at": "2019-05-13T06:14:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382805",
    "user": "https://github.com/dcoudert"
}
```

Let's ask the author of #22431 if anything was said about `graph_editor` and interactive queries in `graph_database`.

Also I don't know if these tools have users. If not, we may simply deprecate the parts involving `sagenb`. Otherwise, someone with enough knowledge in notebooks should try to solve the issues.



---

archive/issue_comments_382806.json:
```json
{
    "body": "Replying to [comment:5 gh-ed359]:\n> I may have managed to fix this error. I don't know anything about the origins of the code but the error arises in in `graph_database._gen_interact_func` where it seems a string defining a function called `_` is run with `exec`.\n> \n> I tried changing the name of the function that gets defined and ran into a different python3-related bug in the `sagenb` python package (maintained out of the main sage tree): it still uses `xrange` in `sagenb.notebook.interact` at line 1185.\n> \n> I downloaded the source for that package, changed the uses of `xrange`, and now the doctest passes on my machine, but the bar for passing is simply emitting a string starting and finishing with `<html>` and `</html>`. \n> \n> I'm not sure what to suggest for this ticket, the doctest in question has something to do with the old sage notebook (sagenb). The function `interactive_query` returns some html that doesn't appear do anything in jupyter, and I can't use the old notebook on python3 (an error related to Twisted). Is the old notebook formally deprecated? See #22431 and in particular the 'side remark' about the graph database explorer.\n> \n> If my changes to `_gen_interact_func` and the `sagenb` package are wanted I can send patches, but as I can't run the notebook myself on python3 I can't even verify that it's a proper fix.\n\nAs long as these changes don't break sagenb on python2, it is fine.\nPlease send a PR on https://github.com/sagemath/sagenb\n(perhaps they are already fixed in the 4 most recent open PRs there.)\n\nAs to functionality to be removed, I don't know.",
    "created_at": "2019-05-13T07:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382806",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:5 gh-ed359]:
> I may have managed to fix this error. I don't know anything about the origins of the code but the error arises in in `graph_database._gen_interact_func` where it seems a string defining a function called `_` is run with `exec`.
> 
> I tried changing the name of the function that gets defined and ran into a different python3-related bug in the `sagenb` python package (maintained out of the main sage tree): it still uses `xrange` in `sagenb.notebook.interact` at line 1185.
> 
> I downloaded the source for that package, changed the uses of `xrange`, and now the doctest passes on my machine, but the bar for passing is simply emitting a string starting and finishing with `<html>` and `</html>`. 
> 
> I'm not sure what to suggest for this ticket, the doctest in question has something to do with the old sage notebook (sagenb). The function `interactive_query` returns some html that doesn't appear do anything in jupyter, and I can't use the old notebook on python3 (an error related to Twisted). Is the old notebook formally deprecated? See #22431 and in particular the 'side remark' about the graph database explorer.
> 
> If my changes to `_gen_interact_func` and the `sagenb` package are wanted I can send patches, but as I can't run the notebook myself on python3 I can't even verify that it's a proper fix.

As long as these changes don't break sagenb on python2, it is fine.
Please send a PR on https://github.com/sagemath/sagenb
(perhaps they are already fixed in the 4 most recent open PRs there.)

As to functionality to be removed, I don't know.



---

archive/issue_comments_382807.json:
```json
{
    "body": "Thanks.  We may need to think about how to deal with this in the eventual removal of sagenb, as the interact should in principle still be able to work in e.g. Jupyter notebooks, but would have to import from elsewhere.  Cc:ing Jeroen as he knows a lot about how that is implemented in Jupyter and where things might need to import from now.\n----\nNew commits:",
    "created_at": "2019-05-13T18:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382807",
    "user": "https://github.com/kcrisman"
}
```

Thanks.  We may need to think about how to deal with this in the eventual removal of sagenb, as the interact should in principle still be able to work in e.g. Jupyter notebooks, but would have to import from elsewhere.  Cc:ing Jeroen as he knows a lot about how that is implemented in Jupyter and where things might need to import from now.
----
New commits:



---

archive/issue_comments_382808.json:
```json
{
    "body": "Now the error is in sagenb (tested over 8.8.beta6).\n\n```\nsage -t --long src/sage/graphs/graph_database.py\n**********************************************************************\nFile \"src/sage/graphs/graph_database.py\", line 1082, in sage.graphs.graph_database.GraphDatabase.interactive_query\nFailed example:\n    D.interactive_query(display_cols=['graph6', 'num_vertices', 'degree_sequence'], num_edges=5, max_degree=3)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.graph_database.GraphDatabase.interactive_query[1]>\", line 1, in <module>\n        D.interactive_query(display_cols=['graph6', 'num_vertices', 'degree_sequence'], num_edges=Integer(5), max_degree=Integer(3))\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/graph_database.py\", line 1088, in interactive_query\n        interact(f)\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/misc/decorators.py\", line 343, in my_wrap\n        return func(*args)\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sagenb/notebook/interact.py\", line 2643, in interact\n        for i, arg in enumerate(args)]\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sagenb/notebook/interact.py\", line 2643, in <listcomp>\n        for i, arg in enumerate(args)]\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sagenb/notebook/interact.py\", line 3093, in render\n        to_value=self.__to_value, width=self.__width)\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sagenb/notebook/interact.py\", line 1185, in __init__\n        default_value = [[default_value[i * columns + j] for j in xrange(columns)] for i in xrange(rows)]\n    NameError: name 'xrange' is not defined\n**********************************************************************\n```\n",
    "created_at": "2019-05-30T15:59:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382808",
    "user": "https://github.com/dcoudert"
}
```

Now the error is in sagenb (tested over 8.8.beta6).

```
sage -t --long src/sage/graphs/graph_database.py
**********************************************************************
File "src/sage/graphs/graph_database.py", line 1082, in sage.graphs.graph_database.GraphDatabase.interactive_query
Failed example:
    D.interactive_query(display_cols=['graph6', 'num_vertices', 'degree_sequence'], num_edges=5, max_degree=3)
Exception raised:
    Traceback (most recent call last):
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.graph_database.GraphDatabase.interactive_query[1]>", line 1, in <module>
        D.interactive_query(display_cols=['graph6', 'num_vertices', 'degree_sequence'], num_edges=Integer(5), max_degree=Integer(3))
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/graph_database.py", line 1088, in interactive_query
        interact(f)
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/misc/decorators.py", line 343, in my_wrap
        return func(*args)
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sagenb/notebook/interact.py", line 2643, in interact
        for i, arg in enumerate(args)]
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sagenb/notebook/interact.py", line 2643, in <listcomp>
        for i, arg in enumerate(args)]
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sagenb/notebook/interact.py", line 3093, in render
        to_value=self.__to_value, width=self.__width)
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sagenb/notebook/interact.py", line 1185, in __init__
        default_value = [[default_value[i * columns + j] for j in xrange(columns)] for i in xrange(rows)]
    NameError: name 'xrange' is not defined
**********************************************************************
```




---

archive/issue_events_068141.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:54:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "milestone": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27198#event-68141"
}
```



---

archive/issue_comments_382809.json:
```json
{
    "body": "As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382809",
    "user": "https://github.com/embray"
}
```

As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_events_068142.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-06-15T08:42:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27198#event-68142"
}
```



---

archive/issue_comments_382810.json:
```json
{
    "body": "If the problem is with sagenb, then can we mark the doctest as \"# py2\", since my understanding is that sagenb is not compatible with Python 3? That is, keep the proposed changes here, but also tag the doctest as py2 only.",
    "created_at": "2019-07-10T18:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382810",
    "user": "https://github.com/jhpalmieri"
}
```

If the problem is with sagenb, then can we mark the doctest as "# py2", since my understanding is that sagenb is not compatible with Python 3? That is, keep the proposed changes here, but also tag the doctest as py2 only.



---

archive/issue_comments_382811.json:
```json
{
    "body": "can't we just skip installing sagenb on Python3?",
    "created_at": "2019-07-10T19:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382811",
    "user": "https://github.com/dimpase"
}
```

can't we just skip installing sagenb on Python3?



---

archive/issue_comments_382812.json:
```json
{
    "body": "I think that sagenb as a whole does not work with Python 3, but parts of it do, and parts are imported into the Sage library in various places. If we don't install it, some things may break. Some of the imports:\n\n```\nsrc/sage/graphs/graph_editor.py:    import sagenb.notebook.interact\nsrc/sage/interacts/library.py:        import sagenb.notebook.interact\nsrc/sage/interacts/debugger.py:        from sagenb.notebook.interact import slider, input_box, selector\n```\n",
    "created_at": "2019-07-10T19:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382812",
    "user": "https://github.com/jhpalmieri"
}
```

I think that sagenb as a whole does not work with Python 3, but parts of it do, and parts are imported into the Sage library in various places. If we don't install it, some things may break. Some of the imports:

```
src/sage/graphs/graph_editor.py:    import sagenb.notebook.interact
src/sage/interacts/library.py:        import sagenb.notebook.interact
src/sage/interacts/debugger.py:        from sagenb.notebook.interact import slider, input_box, selector
```




---

archive/issue_comments_382813.json:
```json
{
    "body": "I agree with the proposal of marking this doctest as `# py2`, but we should also add that there is known issue with py3, no ? This way, we don't await for a decision about sagenb.",
    "created_at": "2019-07-10T20:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382813",
    "user": "https://github.com/dcoudert"
}
```

I agree with the proposal of marking this doctest as `# py2`, but we should also add that there is known issue with py3, no ? This way, we don't await for a decision about sagenb.



---

archive/issue_comments_382814.json:
```json
{
    "body": "I added proposed modification and pushed the code to a new branch in public. Feel free to modify it if needed.\n----\nNew commits:",
    "created_at": "2019-07-11T09:44:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382814",
    "user": "https://github.com/dcoudert"
}
```

I added proposed modification and pushed the code to a new branch in public. Feel free to modify it if needed.
----
New commits:



---

archive/issue_comments_382815.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-07-11T09:44:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382815",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_382816.json:
```json
{
    "body": "This is fine with me. Anyone else have any comments? Objections to setting to positive review?",
    "created_at": "2019-07-17T21:02:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382816",
    "user": "https://github.com/jhpalmieri"
}
```

This is fine with me. Anyone else have any comments? Objections to setting to positive review?



---

archive/issue_comments_382817.json:
```json
{
    "body": "ok..",
    "created_at": "2019-07-18T07:14:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382817",
    "user": "https://github.com/fchapoton"
}
```

ok..



---

archive/issue_comments_382818.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-18T07:14:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382818",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_382819.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-07-20T09:10:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27198#issuecomment-382819",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_068143.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-07-20T09:10:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27198",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27198#event-68143"
}
```
