# Issue 26141: Bugs in Mass formula for quadratic forms

Issue created by migration from https://trac.sagemath.org/ticket/26378

Original creator: sbrandhorst

Original creation time: 2018-10-01 17:30:42

CC:  anna haensch


```
sage: Q = QuadraticForm(Matrix(ZZ,2,[2,1,1,2]))
sage: Q.conway_mass()
....
TypeError: unable to convert sqrt(1/144) to a rational
```

The correct result is 1/12.

The method seems to fail in dimension 6 as well for example for the E6 lattice.


---

Comment by chapoton created at 2018-10-03 12:37:54

Changing status from new to needs_review.


---

Comment by chapoton created at 2018-10-03 12:37:54

here is a fix proposal, not tested on E6
----
New commits:


---

Comment by sbrandhorst created at 2018-10-03 13:27:22

Changing status from needs_review to positive_review.


---

Comment by sbrandhorst created at 2018-10-03 13:27:22

I tested this against a few thousand lattices of determiants <= 400 in dimensions <= 6 against magma. The answers agree. Thank you so much Frédéric :-).


---

Comment by vbraun created at 2018-10-03 21:59:09

Reviewer name...


---

Comment by vbraun created at 2018-10-03 21:59:09

Changing status from positive_review to needs_work.


---

Comment by sbrandhorst created at 2018-10-03 21:59:46

woops


---

Comment by sbrandhorst created at 2018-10-03 22:21:10

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2018-10-05 16:56:53

Resolution: fixed
