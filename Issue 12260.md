# Issue 12260: zlib fails to compile shared libs with clang

Issue created by migration from Trac.

Original creator: ohanar

Original creation time: 2012-02-04 18:01:20

Assignee: GeorgSWeber

The solution is to configure zlib as if you were compiling with gcc.

I've posted an spkg at [http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/zlib-1.2.5.p1.spkg](http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/zlib-1.2.5.p1.spkg).


---

Comment by ohanar created at 2012-02-04 18:01:33

for review purposes


---

Attachment


---

Comment by ohanar created at 2012-02-04 18:01:44

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2012-04-03 16:29:24

Could you check whether #12800 by chance fixes this problem?


---

Comment by ohanar created at 2012-04-08 09:42:53

Replying to [comment:2 jdemeyer]:
> Could you check whether #12800 by chance fixes this problem?
Yes it does.


---

Comment by ohanar created at 2012-04-08 10:43:38

so it fixes compiling, but there are still issues with the library (which causes other build failures) if the patch is not applied, i'll post a new spkg rebased off of #12800


---

Attachment

diff for the spkg, for review only


---

Comment by jdemeyer created at 2012-04-08 17:07:26

I think your patch needs more documentation: mention your patch and explain what goes wrong in the "special update/build" section SPKG.txt.

Also: #12800 still needs a review...


---

Comment by jdemeyer created at 2012-04-08 17:08:32

Also the line

```
# Apply all patches (currently none)
```

needs to be changed :-)


---

Comment by jdemeyer created at 2012-04-11 09:54:54

Changing status from needs_review to needs_work.


---

Comment by leif created at 2012-04-11 18:31:40

Replying to [comment:6 jdemeyer]:
> Also: #12800 still needs a review...

Fixed, at least for the moment...


---

Comment by jdemeyer created at 2012-04-14 21:50:37

This needs to be rebased to the new version of #12800 (which has positive_review now).


---

Comment by jdemeyer created at 2013-05-30 12:35:14

Changing component from build to packages: standard.


---

Comment by jdemeyer created at 2013-05-30 12:35:14

Fixed by #14661


---

Comment by jdemeyer created at 2013-05-30 12:35:14

Changing status from needs_work to positive_review.


---

Comment by jdemeyer created at 2013-06-03 13:07:27

Resolution: duplicate


---

Comment by leif created at 2013-06-03 14:44:43

Rather (meanwhile) "invalid" or "worksforme" than "duplicate".


---

Comment by jdemeyer created at 2013-06-03 15:31:55

Resolution changed from duplicate to worksforme
