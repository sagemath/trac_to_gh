# Issue 34067: pep8 cleanup for one file in quadratic_forms

archive/issues_034067.json:
```json
{
    "body": "CC:  tscrim klee slelievre dcoudert\n\nalso a few code and doc details\n\nIssue created by migration from https://trac.sagemath.org/ticket/34304\n\n",
    "created_at": "2022-08-08T12:35:13Z",
    "labels": [
        "quadratic forms",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "pep8 cleanup for one file in quadratic_forms",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34067",
    "user": "chapoton"
}
```
CC:  tscrim klee slelievre dcoudert

also a few code and doc details

Issue created by migration from https://trac.sagemath.org/ticket/34304





---

archive/issue_comments_483445.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-08T12:35:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483445",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_483446.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-08-08T12:35:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483446",
    "user": "chapoton"
}
```

New commits:



---

archive/issue_comments_483447.json:
```json
{
    "body": "\n```\ndiff --git a/src/sage/quadratic_forms/quadratic_form.py b/src/sage/quadratic_forms/quadratic_form.py\nindex f5ac84b..e76e1ab 100644\n--- a/src/sage/quadratic_forms/quadratic_form.py\n+++ b/src/sage/quadratic_forms/quadratic_form.py\n@@ -453,13 +453,13 @@ class QuadraticForm(SageObject):\n...\n+    from sage.quadratic_forms.local_representation_conditions import (\n+        local_representation_conditions,\n```\n\nI think it's problematic that the imported name `local_representation_conditions` shadows the module name `sage.quadratic_forms.local_representation_conditions`",
    "created_at": "2022-08-08T16:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483447",
    "user": "mkoeppe"
}
```


```
diff --git a/src/sage/quadratic_forms/quadratic_form.py b/src/sage/quadratic_forms/quadratic_form.py
index f5ac84b..e76e1ab 100644
--- a/src/sage/quadratic_forms/quadratic_form.py
+++ b/src/sage/quadratic_forms/quadratic_form.py
@@ -453,13 +453,13 @@ class QuadraticForm(SageObject):
...
+    from sage.quadratic_forms.local_representation_conditions import (
+        local_representation_conditions,
```

I think it's problematic that the imported name `local_representation_conditions` shadows the module name `sage.quadratic_forms.local_representation_conditions`



---

archive/issue_comments_483448.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-08-08T18:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483448",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_483449.json:
```json
{
    "body": "ok, right. Now with a shorter filename",
    "created_at": "2022-08-08T18:02:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483449",
    "user": "chapoton"
}
```

ok, right. Now with a shorter filename



---

archive/issue_comments_483450.json:
```json
{
    "body": "The `.. TODO::` block seems indented by 3 spaces instead of 4.",
    "created_at": "2022-08-08T18:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483450",
    "user": "slelievre"
}
```

The `.. TODO::` block seems indented by 3 spaces instead of 4.



---

archive/issue_comments_483451.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-08T19:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483451",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_483452.json:
```json
{
    "body": "voila",
    "created_at": "2022-08-08T19:19:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483452",
    "user": "chapoton"
}
```

voila



---

archive/issue_comments_483453.json:
```json
{
    "body": "review, please?",
    "created_at": "2022-08-16T11:52:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483453",
    "user": "chapoton"
}
```

review, please?



---

archive/issue_comments_483454.json:
```json
{
    "body": "You renamed `sage.quadratic_forms.quadratic_form__local_representation_conditions` to `sage.quadratic_forms.local_representation`.\n\nThere are many `sage.quadratic_forms.quadratic_form__xxx` modules in the same package. Hence your change make only one of those modules out of the naming pattern. \n\nWhy only one module? Do you plan to change the name of other modules too?\n\nIf you plan to change them all, how about the pattern `sage.quadratic_forms._local_representation_conditions`? \n\nAnd I think we should keep the original name `local_representation_conditions` as the original author intended.",
    "created_at": "2022-08-16T12:49:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483454",
    "user": "klee"
}
```

You renamed `sage.quadratic_forms.quadratic_form__local_representation_conditions` to `sage.quadratic_forms.local_representation`.

There are many `sage.quadratic_forms.quadratic_form__xxx` modules in the same package. Hence your change make only one of those modules out of the naming pattern. 

Why only one module? Do you plan to change the name of other modules too?

If you plan to change them all, how about the pattern `sage.quadratic_forms._local_representation_conditions`? 

And I think we should keep the original name `local_representation_conditions` as the original author intended.



---

archive/issue_comments_483455.json:
```json
{
    "body": "I changed only one filename to avoid controversy.\n\nMy first choice for the shorter name was indeed `local_representation_conditions` but objected in comment:2 so I picked a shorter one.\n\nThere are also many files in the folder that already do not follow the pattern `quadratic_form__xxx` so I am not breaking the pattern.",
    "created_at": "2022-08-16T13:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483455",
    "user": "chapoton"
}
```

I changed only one filename to avoid controversy.

My first choice for the shorter name was indeed `local_representation_conditions` but objected in comment:2 so I picked a shorter one.

There are also many files in the folder that already do not follow the pattern `quadratic_form__xxx` so I am not breaking the pattern.



---

archive/issue_comments_483456.json:
```json
{
    "body": "Replying to [comment:10 chapoton]:\n> My first choice for the shorter name was indeed `local_representation_conditions` but objected in comment:2 so I picked a shorter one.\n\nI understood. But dropping a word has danger of changing the meaning. So instead of dropping a part, I suggested to add the prefix `_`. Then this pattern may be applied to other similar files later...",
    "created_at": "2022-08-16T13:50:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483456",
    "user": "klee"
}
```

Replying to [comment:10 chapoton]:
> My first choice for the shorter name was indeed `local_representation_conditions` but objected in comment:2 so I picked a shorter one.

I understood. But dropping a word has danger of changing the meaning. So instead of dropping a part, I suggested to add the prefix `_`. Then this pattern may be applied to other similar files later...



---

archive/issue_comments_483457.json:
```json
{
    "body": "Sorry, using the prefix `_` for a module name does not look like a good idea.\n\nLet's try to choose another name, that would suit everybody..\n\nMaybe `local_representation_criteria` ?",
    "created_at": "2022-08-16T14:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483457",
    "user": "chapoton"
}
```

Sorry, using the prefix `_` for a module name does not look like a good idea.

Let's try to choose another name, that would suit everybody..

Maybe `local_representation_criteria` ?



---

archive/issue_comments_483458.json:
```json
{
    "body": "If the aim is to have a short name, how about\n\n`qf__local_representation_conditions`\n\n?",
    "created_at": "2022-08-16T15:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483458",
    "user": "klee"
}
```

If the aim is to have a short name, how about

`qf__local_representation_conditions`

?



---

archive/issue_comments_483459.json:
```json
{
    "body": "I think these modules `quadratic_form__xxx` are special in that they were created to provide class method definitions in separate files. So a slightly non-conventional naming is okay if it could satisfy the style checker. Like the prefix `qf__` :)",
    "created_at": "2022-08-16T15:08:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483459",
    "user": "klee"
}
```

I think these modules `quadratic_form__xxx` are special in that they were created to provide class method definitions in separate files. So a slightly non-conventional naming is okay if it could satisfy the style checker. Like the prefix `qf__` :)



---

archive/issue_comments_483460.json:
```json
{
    "body": "It may make sense to change it back to the original for this ticket, and open a separate ticket for doing all renames simultaneously.",
    "created_at": "2022-08-16T15:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483460",
    "user": "mkoeppe"
}
```

It may make sense to change it back to the original for this ticket, and open a separate ticket for doing all renames simultaneously.



---

archive/issue_comments_483461.json:
```json
{
    "body": "My 2 cents.\n\nI agree with Matthias in comment:15; we should rename all of them on one (separate) ticket.\n\nI am +1 on removing `quadratic_form__` from all of the filenames as they are redundant with the folder name.\n\nI am not so worried about comment:2; we have ways of resolving such conflicts with, e.g., `import foo as bar`. Yet, it would be good to avoid that for us humans who get confused.",
    "created_at": "2022-08-17T00:05:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483461",
    "user": "tscrim"
}
```

My 2 cents.

I agree with Matthias in comment:15; we should rename all of them on one (separate) ticket.

I am +1 on removing `quadratic_form__` from all of the filenames as they are redundant with the folder name.

I am not so worried about comment:2; we have ways of resolving such conflicts with, e.g., `import foo as bar`. Yet, it would be good to avoid that for us humans who get confused.



---

archive/issue_comments_483462.json:
```json
{
    "body": "Replying to [comment:15 mkoeppe]:\n> It may make sense to change it back to the original for this ticket, and open a separate ticket for doing all renames simultaneously.\n\n+1.",
    "created_at": "2022-08-17T03:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483462",
    "user": "klee"
}
```

Replying to [comment:15 mkoeppe]:
> It may make sense to change it back to the original for this ticket, and open a separate ticket for doing all renames simultaneously.

+1.



---

archive/issue_comments_483463.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-08-17T06:38:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483463",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_483464.json:
```json
{
    "body": "ok, so here is a branch not renaming the modified file",
    "created_at": "2022-08-17T06:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483464",
    "user": "chapoton"
}
```

ok, so here is a branch not renaming the modified file



---

archive/issue_comments_483465.json:
```json
{
    "body": "LGTM.",
    "created_at": "2022-08-17T07:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483465",
    "user": "klee"
}
```

LGTM.



---

archive/issue_comments_483466.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-08-17T07:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483466",
    "user": "klee"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_483467.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-08-30T19:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34067",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34067#issuecomment-483467",
    "user": "vbraun"
}
```

Resolution: fixed
