# Issue 32117: wrong integral with giac

Issue created by migration from https://trac.sagemath.org/ticket/32354

Original creator: chapoton

Original creation time: 2021-08-10 07:17:30

CC:  slelievre parisse tscrim @kliem

Keywords: integral

Compare

```
sage: integral(1/max_symbolic(x,1)**2,x,0,oo,algorithm='maxima')                
integrate(max(1, x)^(-2), x, 0, +Infinity)
sage: integral(1/max_symbolic(x,1)**2,x,0,oo,algorithm='sympy')                 
2
sage: integral(1/max_symbolic(x,1)**2,x,0,oo,algorithm='giac')                  
+Infinity
```

The correct answer is sympy's answer.


---

Comment by chapoton created at 2021-08-10 12:52:13

inside Giac:

```
  --> Switching to Giac <--

giac: integrate(1/max(x,1)^2,x,0,2)                                             
Warning, integration of abs or sign assumes constant sign by intervals (correct if the argument is real):
Check [abs(x-1)]
when2sign does not work properly with infinities. Replace inf by Inf and run limit after.
Unable to cancel step at 1 of -4*1/2/(x+x)-infinity
undef
giac: integrate(1/max(x,1)^2,x,0,1)                                             
1
giac: integrate(1/max(x,1)^2,x,1,2)                                             
1/2
```



---

Comment by chapoton created at 2021-08-28 19:20:12

un petit souci avec cette intégrale assez simple de la fonction max, dans giac


---

Comment by parisse created at 2021-08-29 07:21:48

Fixed in my source tree. I will certainly make a 1.7.0-27 release next week.


---

Comment by chapoton created at 2021-08-29 07:28:04

Merci !


---

Comment by chapoton created at 2022-08-09 18:34:19

now works, should be doctested


---

Comment by chapoton created at 2022-10-01 18:55:46

voilà un test
----
New commits:


---

Comment by chapoton created at 2022-10-01 18:55:46

Changing status from new to needs_review.


---

Comment by git created at 2022-10-01 18:56:37

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by chapoton created at 2022-10-02 06:51:49

lights are morally green, so please review


---

Comment by tscrim created at 2022-10-03 09:16:03

LGTM.


---

Comment by tscrim created at 2022-10-03 09:16:03

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-10-11 09:14:52

Resolution: fixed
