# Issue 29530: Implement the Jucys-Murphy elements for the partition algebra

Issue created by migration from https://trac.sagemath.org/ticket/29767

Original creator: tscrim

Original creation time: 2020-05-31 06:12:41

CC:  sage-combinat s.r.doty saliola zabrocki darij alauve ghseeli

Keywords: partition algebra

We use the recursive formula from https://arxiv.org/abs/2005.00600.


---

Comment by tscrim created at 2020-05-31 06:14:42

Changing status from new to needs_review.


---

Comment by tscrim created at 2020-05-31 06:14:42

New commits:


---

Comment by tscrim created at 2020-06-01 05:45:49

Patchbot is (morally) green.


---

Comment by zabrocki created at 2020-06-02 13:32:27

I don't know what is wrong with your branch.  Its a mess.  I could make it work by merging it with develop.

So experimenting with this a little, I think that you are using the convention `jucys_murphy_element(r)` computes L_{2r} in the Creedon reference?  I think that you need to make clearer the phrase `(except we divide the indices by 2)` (the indices in the program or in the paper?)

I suggest:

Return the element `L_{2*i}` from [Cre2020]_

and

Return the element `\sigma_{2*i}` from [Cre2020]_

These are also taken from Enyang's reference but there (a) there is a typo and (b) there is a change from the Halverson-Ram convention and (c) there is a doubling of indices from the literature in 2010 to the literature in 2011 and later.

Halverson-Ram have an M_0=1, M_{1/2}=1 and M_1=`P{{1},{-1}}-P{{1,-1}}` which does not agree with the definition in this ticket (in fact `jucys_murphy_element(0)` is `ValueError: i must be an integer between 1 and 2` (probably should return a better error message), `jucys_murphy_element(1/2)` is `0` (this follows Enyang and Creedon) and `jucys_murphy_element(1)` is `P{{1},{-1}}` (again, follows Enyang and Creedon)).  But for r>1, M_r = L_{2r} (*probably* because there are errors in the literature).

Are these supposed to work for half partition algebras?

```
sage: PartitionAlgebra(3/2,x).jucys_murphy_element(1)
---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)
...
TypeError: unable to convert rational 5/2 to an integer
```



---

Comment by git created at 2020-06-04 01:11:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-06-04 01:19:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2020-06-04 01:21:58

Replying to [comment:3 zabrocki]:
> I don't know what is wrong with your branch.  Its a mess.  I could make it work by merging it with develop.

Probably because the machine I used to develop it on was not using the latest beta version. I have rebased it.

> So experimenting with this a little, I think that you are using the convention `jucys_murphy_element(r)` computes L_{2r} in the Creedon reference?

Yes, that is correct.

>  I think that you need to make clearer the phrase `(except we divide the indices by 2)` (the indices in the program or in the paper?)
> 
> I suggest:
> 
> Return the element `L_{2*i}` from [Cre2020]_
> 
> and
> 
> Return the element `\sigma_{2*i}` from [Cre2020]_

Good idea. I have changed it.

> These are also taken from Enyang's reference but there (a) there is a typo and (b) there is a change from the Halverson-Ram convention and (c) there is a doubling of indices from the literature in 2010 to the literature in 2011 and later.
> 
> Halverson-Ram have an M_0=1, M_{1/2}=1 and M_1=`P{{1},{-1}}-P{{1,-1}}` which does not agree with the definition in this ticket

Indeed, that is from the definition I used. I have tried to clarify this in the documentation.

> (in fact `jucys_murphy_element(0)` is `ValueError: i must be an integer between 1 and 2` (probably should return a better error message),

Ah, this comes from the fact that the checking is done lower down. I have fixed this.

> `jucys_murphy_element(1/2)` is `0` (this follows Enyang and Creedon) and `jucys_murphy_element(1)` is `P{{1},{-1}}` (again, follows Enyang and Creedon)).  But for r>1, M_r = L_{2r} (*probably* because there are errors in the literature).

In fact, I get an extra element in the support for

```
sage: len(P.jucys_murphy_element(5/2).support())
21
```

compared to Halverson-Ram, which has 20 and I just assumed was just a diagram that got lost in either their computation or writing the paper.

> Are these supposed to work for half partition algebras?
> {{{
> sage: PartitionAlgebra(3/2,x).jucys_murphy_element(1)
> ---------------------------------------------------------------------------
> KeyError                                  Traceback (most recent call last)
> ...
> TypeError: unable to convert rational 5/2 to an integer
> }}}

I didn't implement with those in mind, but perhaps it is fairly easy to extend the functionality. I will check.


---

Comment by git created at 2020-06-05 02:20:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2020-06-05 02:21:30

Replying to [comment:6 tscrim]:
> Replying to [comment:3 zabrocki]:
> > Are these supposed to work for half partition algebras?
> > {{{
> > sage: PartitionAlgebra(3/2,x).jucys_murphy_element(1)
> > ---------------------------------------------------------------------------
> > KeyError                                  Traceback (most recent call last)
> > ...
> > TypeError: unable to convert rational 5/2 to an integer
> > }}}
> 
> I didn't implement with those in mind, but perhaps it is fairly easy to extend the functionality. I will check.

This now works for the half partition algebra. However, I needed to remove the safety check on the `s(i)` elements as I need to go briefly outside the half integer diagram algebras in order to construct the sigma and JM elements.


---

Comment by git created at 2020-06-05 18:02:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-06-05 18:51:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by zabrocki created at 2020-06-05 19:00:13

Changing status from needs_review to needs_work.


---

Comment by zabrocki created at 2020-06-05 19:00:13

I think that we need to discuss notation here.  `s_i` seems to be relatively universal in the literature, but [Cre2020]_ and [Eny2013]_ use `e_i` for `i` an integer, but [HR2005]_ and [Eny2012]_ use `p_i` and `p_{i+1/2}` (essentially following what is programmed here) and then there is another element `e_i` that has blocks `{i,i+1}` and `{-i,-i-1}` in [HR2005]_.  Notation is not universal and so we should either spell out the name clearer or state references where they come from.

I don't know if this is important or if we want to be consistent, but in `BrauerAlgebra` the method is `jucys_murphy` instead of `jucys_murphy_element`.  I saw a really nice talk yesterday explaining how non-unique Jucys-Murphy elements are.


---

Comment by tscrim created at 2020-06-06 00:53:33

Replying to [comment:11 zabrocki]:
> I think that we need to discuss notation here.  `s_i` seems to be relatively universal in the literature, but [Cre2020]_ and [Eny2013]_ use `e_i` for `i` an integer, but [HR2005]_ and [Eny2012]_ use `p_i` and `p_{i+1/2}` (essentially following what is programmed here) and then there is another element `e_i` that has blocks `{i,i+1}` and `{-i,-i-1}` in [HR2005]_.  Notation is not universal and so we should either spell out the name clearer or state references where they come from.

I agree with spelling it out. The `e_i` here is consistent with [HR2005]_ and fits the pattern of doubling for [Cre2020]_ and [Eny2013]_ if I am not mistaken. Beyond what you have added (thank you for doing that), do you think there is something more that should be done?

Something else that we should be consistent about is what a half integer is. Is it just (2k+1)/2 or do we allow any k/2? My inclination was the first, that it was not an actual integer, which is why I have the error messages as (half) integer.

> I don't know if this is important or if we want to be consistent, but in `BrauerAlgebra` the method is `jucys_murphy` instead of `jucys_murphy_element`.

Thinking about the naming more, I don't quite like what `SymmetricGroupAlgebra` and `BrauerAlgebra` does, but we have done it twice. So I guess to be consistent that way, we should renaming it here to be `jucys_murphy`. It just is a little strange when speaking it, "I want to know the i-th Jucys-Murphy."

> I saw a really nice talk yesterday explaining how non-unique Jucys-Murphy elements are.

I wish I could have seen that. `:/`


---

Comment by zabrocki created at 2020-06-06 01:20:57

I'm ok with breaking poorly chosen conventions by adding `_element` (or leaving it off, because I think that either way someone searching for it will find the right method).

The `e_i` is not consistent with [HR2005]_ (at least in the copy I have from the arxiv, they use `p_i` and `p_{i+1/2}`) but just to be clear, choose a different reference and you will find a different notation: Halverson's paper on the Characters of the partition algebra from 2000 uses `A_i` and `E_i`.  If you are happy with the choice of `e` I think that it merits saying that we are calculating `e_{2i}` from [Cre2020]_ (or choose a different reference), and that will have to be good enough because there is no obvious way we can choose a naming convention that allows one to guess what the generators represent.

What I worry about though is that `e` and `s` are just too short for anyone searching to know to find it (I think that current naming convention will cause users to reprogram the same thing because they are not able to find it).  How about `e_generator` and `s_generator` with the short name `e` and `s`.

> I wish I could have seen that. `:/`
I will send you the link for the talk if they post the video (I think that they will, but it is not yet available).


---

Comment by tscrim created at 2020-06-06 02:24:14

Replying to [comment:13 zabrocki]:
> I'm ok with breaking poorly chosen conventions by adding `_element` (or leaving it off, because I think that either way someone searching for it will find the right method).

Then might I suggest keeping the `_element` here and then on a separate ticket add it to the other instances?

> The `e_i` is not consistent with [HR2005]_ (at least in the copy I have from the arxiv, they use `p_i` and `p_{i+1/2}`)

Ah, yes, you're right. I misread that as being 1 partition, not the cup and the cap together. Sorry for the noise.

> but just to be clear, choose a different reference and you will find a different notation: Halverson's paper on the Characters of the partition algebra from 2000 uses `A_i` and `E_i`.  If you are happy with the choice of `e` I think that it merits saying that we are calculating `e_{2i}` from [Cre2020]_ (or choose a different reference), and that will have to be good enough because there is no obvious way we can choose a naming convention that allows one to guess what the generators represent.

I have no strong opinion on the naming convention. It sounds like what we need is something at the class level documentation saying here are a number of special named elements with examples (shameless plug, we can use the ascii art from #29696). I will defer to your choice on what the most appropriate names would be. You are definitely correct that we must be absolutely clear about our choices.

> What I worry about though is that `e` and `s` are just too short for anyone searching to know to find it (I think that current naming convention will cause users to reprogram the same thing because they are not able to find it).  How about `e_generator` and `s_generator` with the short name `e` and `s`.

I don't think that will have any affect on the discoverability. They would still have to know to start with either `e` or `s`. Both would still be in the html doc and using a general `P.<tab>` (with `P` a `PartitionAlgebra`) search. If we have it at the class-level, then they could see it when doing `P?`.

> > I wish I could have seen that. `:/`
> I will send you the link for the talk if they post the video (I think that they will, but it is not yet available).
> 

Great, thank you.


---

Comment by zabrocki created at 2020-06-06 11:25:05

> Then might I suggest keeping the `_element` here and then on a separate ticket add it to the other instances?
sounds good

> I have no strong opinion on the naming convention. It sounds like what we need is something at the class level documentation saying here are a number of special named elements with examples (shameless plug, we can use the ascii art from #29696). I will defer to your choice on what the most appropriate names would be. You are definitely correct that we must be absolutely clear about our choices.
The class level documentation sounds good, but maybe then `generator_e`, `generator_s` (and then maybe add a `generator_a` for the cup/cap element) with short names `e` and `s` (and `a`).


---

Comment by zabrocki created at 2020-06-08 15:37:57

This line is in the documentation: "The Iwahori--Hecke algebra of type `A` (with a single parameter) is naturally a subalgebra of the partition algebra."  This statement is not obvious to me.  Does someone know what the embedding is?


---

Comment by tscrim created at 2020-06-09 07:10:03

Replying to [comment:16 zabrocki]:
> This line is in the documentation: "The Iwahori--Hecke algebra of type `A` (with a single parameter) is naturally a subalgebra of the partition algebra."  This statement is not obvious to me.  Does someone know what the embedding is?

I don't offhand. All I know is the Temperley-Lieb algebra is a quotient of the Hecke algebra. I am cc-ing George who wrote that into the documentation. The closest I could find was this: https://arxiv.org/pdf/1304.5158.pdf (but that is clearly not the claimed embedding).


---

Comment by git created at 2020-06-09 07:32:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2020-06-09 07:33:21

I added the documentation and the cup/cap pair generator method. I also removed a double reference (so now it moves the [HR2005]_ reference to the master references file).


---

Comment by tscrim created at 2020-06-09 07:33:29

Changing status from needs_work to needs_review.


---

Comment by s.r.doty created at 2020-06-09 15:00:07

I also don't see why the Iwahori-Hecke algebra should embed. It seems unlikely to be true. Probably that line should be removed from the documentation, unless a reference can be found.


---

Comment by @darijgr created at 2020-06-09 15:17:03

A few brief comments from looking at the doc mostly (I don't actually know these elements and haven't found the time to read anything serious about the partition algebra so far):


```
+.. [Cre2020] Creedon, Samuel. *The center of the partition algebra*.
+             Preprint, :arxiv:`2005.00600` (2020).
```

Version number please.


```
+    def a(self, i):
+        r"""
+        Return the element `a_i` in ``self``.
+
+        The element `a_i` is the cap and cup at `(i, i+1)`, so it contains
+        the blocks `\{i, i+1\}`, `\{-i, -i-1\}`, and `\{-j, j\}` for all
+        `j \neq i, i+1`.
```

You mean "for all positive j \neq i, i+1".


```
+    def e(self, i):
[...]
+        - ``i`` -- a half integer between 1/2 and `k`
[...]
+            sage: P3.e(3)
+            Traceback (most recent call last):
+            ...
+            ValueError: i must be an (half) integer between 1/2 and 5/2
```

Which of the upper bounds is the right one, k or k - 1/2 ?


```
+    def s(self, i):
+        r"""
+        Return the ``i``-th simple transposition `s_i` in ``self``.
+
+        Borrowing the notation from the symmetric group, the `i`-th
+        simple transposition `s_i` has blocks of the form `\{-i, i+1\}`,
+        `\{-i-1, i\}` and `\{-j, j\}` for `j \notin \{ i, i+1 \}`.
```

Again, j should be positive.


```
+    def sigma(self, i):
+        r"""
+        Return the element `\sigma_i` from [Eny2012]_ of ``self``.
[...]
+        - ``i`` -- a half integer between 1/2 and `k`
[...]
+        if i <= 0 or i >= self._k:
+            raise ValueError("i must be an (half) integer between 1 and {}".format((2*self._k-1)/2))
```

Again, is the upper bound k or (2k-1) / 2?


```
+    def jucys_murphy_element(self, i):
+        r"""
+        Return the ``i``-th Jucys-Murphy element `L_i` from [Eny2012]_.
+        of ``self``.
```

One period too much after [Eny2012]_.


```
+            return (self.s(j) * L(i-1) * self.s(j)
+                    - L(j)*self.e(j) - self.e(j)*L(j)
+                    + (self._q*self.one() - L(i-1))*self.e(j)
+                    + self.sigma(j))
```

The `- L(j)*self.e(j)` and `(self._q*self.one() - L(i-1))*self.e(j)` terms might enjoy being combined for a bit of performance.


---

Comment by zabrocki created at 2020-06-09 15:32:56

Is it worth documenting that `PartitionAlgebra(k,x).s(k-1/2)` returns something that is not technically in the algebra if k is a half integer >=3/2?  I'm leaning towards "no" since I don't feel it is clearer, but asking in case you feel otherwise.

Delete the [HR2005] from `diagrams_algebras.py`


---

Comment by git created at 2020-06-11 11:20:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by zabrocki created at 2020-06-11 11:28:36

> (I don't actually know these elements and haven't found the time to read anything serious about the partition algebra so far)
I'm calling B.S. on this.  I know of an 8 page document written by you that lists errata of [HR2005]

If everyone is happy with these changes I am ready to vote positive review.


---

Comment by @darijgr created at 2020-06-11 22:55:19

> I'm calling B.S. on this. I know of an 8 page document written by you that lists errata of [HR2005]

That document (plus my attempt at reading Comes-Ostrik) is an upper bound on my knowledge of partition algebras; I never got through Halverson-Ram (arguably I blame this partly on the paper and partly on me getting grossed out by the Tits deformation theorem).

For what it's worth, I've never heard of the Hecke algebra embedding into the partition algebra either. (I wouldn't be overly surprised to learn it's true either, but for now I'm skeptical.)


---

Comment by tscrim created at 2020-06-11 23:15:08

I am a strong -1 on adding the version to the reference. It should ultimately be the published version, so we should stay as close to that as possible.


---

Comment by tscrim created at 2020-06-11 23:17:25

Thank you Mike for do the changes. I was going to get to them this morning. In regards to the question you asked in comment:23, I also think that we should not add it in both for cleanliness and because it is a misuse that we just have to allow for a technical issue.


---

Comment by ghseeli created at 2020-06-11 23:38:19

Hi, everyone! Sorry for the delayed response. I cannot tell which of s.r.doty, alauve, or I wrote that line in the documentation, but it certainly is not obvious to me how to embed the Hecke algebra into the partition algebra.


---

Comment by @darijgr created at 2020-06-12 06:03:37

`@`tscrim: The version number is important, as notations may well change before the publication and we need to keep track of which ones we are using.


---

Comment by tscrim created at 2020-06-12 06:17:30

Yes, but if the notation changes, then we need to change our documentation. I really don't think it is good to tie it to a version number but instead to the article.


---

Comment by @darijgr created at 2020-06-12 06:18:35

This ticket should preferably go into Sage before the paper gets published.


---

Comment by tscrim created at 2020-06-12 06:20:39

Yes, but we don't want to cite a version of the paper, we want to cite the paper.


---

Comment by zabrocki created at 2020-06-12 10:53:50

In this case the notation of [Cre2020] is based on the notation of [Eny2012] and [Eny2013] and is unlikely to change.  However the reference to Lemma 2.2.3(1) or Lemma 2.2.3(2) very well might change and any update of the reference may not update the Lemma numbers.


---

Comment by tscrim created at 2020-06-14 07:47:33

The first thing I would do if I saw a later version on the arXiv is go to the later version then compare. The lemma's might be shown to be wrong in the later version, but we are then claiming they are correct. We really should not depend on (and hence cite) the version but instead the paper itself. If there becomes a discrepancy, then we should be updating the Sage documentation accordingly.


---

Comment by @darijgr created at 2020-06-14 08:11:25

This is like saying "we shouldn't depend on a version of a package, but on the package itself". But you are depending on the version, whether you want it or not, because that's all you have; all you achieve is making the dependency less explicit and leaving future-you without a clear indication of how to "rebase" the dependency. In particular, if v2 of the preprint omits the lemma because it turned out to be wrong, then referencing it to v1 will at least give the reader a way to see what has happened (and readers will look it up because these functions are not defined in the doc), while referencing it to the paper will mask the fact that something's wrong.


---

Comment by tscrim created at 2020-06-14 08:33:03

If you depend on a misfeature of a package, then you need to fix your code when the package updates. This is what bisecting is for, to see where things no long match. You want stuff to break when upstream changes, not hide it under the rug. Ideally software depends on a range of package versions, not on any particular one; typical is a minimum version number. The equivalent of this here is citing the paper itself.


---

Comment by @darijgr created at 2020-06-14 08:34:20

But any bug here won't be found by automatic tests; bisecting isn't very useful. We need precise references so that people, not computers, can figure out what has gone wrong.


---

Comment by tscrim created at 2020-06-14 08:39:50

Not automatic, but close enough to it: you go back versions until you get the one that matches. There really are not going to be that many versions.

Look, as a compromise, how about where we cite those lemmas, we cite the version number there?


---

Comment by @darijgr created at 2020-06-14 08:42:45

> Look, as a compromise, how about where we cite those lemmas, we cite the version number there?

That's a good idea -- but I'd extend it to the definitions.

I certainly had a homomorphism completely change from one version of a preprint to the next -- because I needed it in a certain role, and found that the new homomorphism fit that role better than the old one. If anyone had cited my preprint without version number for the homomorphism itself, they'd now have an error.


---

Comment by tscrim created at 2020-06-14 08:49:38

Replying to [comment:40 gh-darijgr]:
> > Look, as a compromise, how about where we cite those lemmas, we cite the version number there?
> 
> That's a good idea -- but I'd extend it to the definitions.

The definitions are from the Enyang paper(s), so we should do it only on the lemma citations.


---

Comment by @darijgr created at 2020-06-14 09:28:50

Sure, if you cite the Enyang papers too.


---

Comment by git created at 2020-06-14 23:54:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2020-06-14 23:55:19

Done.

Replying to [comment:42 gh-darijgr]:
> Sure, if you cite the Enyang papers too.

It does.


---

Comment by zabrocki created at 2020-06-15 17:27:29

I approve.


---

Comment by zabrocki created at 2020-06-15 17:27:29

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-06-26 15:38:15

Resolution: fixed
