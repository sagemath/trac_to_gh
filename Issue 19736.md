# Issue 19736: More trouble with immutable graphs

Issue created by migration from https://trac.sagemath.org/ticket/19973

Original creator: jaanos

Original creation time: 2016-01-27 13:41:12

CC:  ncohen




---

Comment by jaanos created at 2016-01-27 14:22:40

Changing keywords from "" to "graphs digraphs immutable".


---

Comment by jaanos created at 2016-01-27 14:22:40

Changing type from PLEASE CHANGE to defect.


---

Comment by jaanos created at 2016-01-27 14:22:40

Changing status from new to needs_review.


---

Comment by ncohen created at 2016-01-27 18:17:21

Wondering about the default: why shouldn't we use `immutable = self.is_immutable()`?


---

Comment by jaanos created at 2016-01-27 18:51:14

Hi!

This is the default for `subgraph` since #19526 (if that's what you meant). But in these cases the algorithms change these subgraphs (in fairly trivial ways, but still), so we need them to be mutable.

Jano≈°


---

Comment by ncohen created at 2016-01-27 18:53:00

Oh. My mistake: what I meant is that the functions will now return a mutable graph (e.g. the tsp) even when called on an immutable graph. Should we change the mutability status of those graphs we are about to return to match the status of `self`?


---

Comment by jaanos created at 2016-01-27 19:08:59

Yes, we could do that. Also, when calling `is_hamiltonian`, we don't really need to construct this subgraph at all (unless it's cached somewhere, but I don't see it in the current code).


---

Comment by git created at 2016-01-27 19:54:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jaanos created at 2016-01-27 19:57:35

OK, `traveling_salesman_problem` now preserves mutability. It still constructs the subgraph, even if called from `is_hamiltonian` - this is, after all, the easy part of the algorithm:)


---

Comment by ncohen created at 2016-01-28 07:56:30

OKayyy.. Thanks for this ticket, good to go!


---

Comment by ncohen created at 2016-01-28 07:56:30

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2016-01-28 07:56:42

Changing component from PLEASE CHANGE to graph theory.


---

Comment by vbraun created at 2016-01-28 20:09:01

Resolution: fixed


---

Comment by jaanos created at 2016-01-28 20:25:06

Thanks again!
