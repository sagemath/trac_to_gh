# Issue 19736: More trouble with immutable graphs

archive/issues_019736.json:
```json
{
    "body": "CC:  ncohen\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/19973\n\n",
    "created_at": "2016-01-27T13:41:12Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "More trouble with immutable graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19736",
    "user": "jaanos"
}
```
CC:  ncohen



Issue created by migration from https://trac.sagemath.org/ticket/19973





---

archive/issue_comments_271283.json:
```json
{
    "body": "Changing keywords from \"\" to \"graphs digraphs immutable\".",
    "created_at": "2016-01-27T14:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19736#issuecomment-271283",
    "user": "jaanos"
}
```

Changing keywords from "" to "graphs digraphs immutable".



---

archive/issue_comments_271284.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2016-01-27T14:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19736#issuecomment-271284",
    "user": "jaanos"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_271285.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-01-27T14:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19736#issuecomment-271285",
    "user": "jaanos"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_271286.json:
```json
{
    "body": "Wondering about the default: why shouldn't we use `immutable = self.is_immutable()`?",
    "created_at": "2016-01-27T18:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19736#issuecomment-271286",
    "user": "ncohen"
}
```

Wondering about the default: why shouldn't we use `immutable = self.is_immutable()`?



---

archive/issue_comments_271287.json:
```json
{
    "body": "Hi!\n\nThis is the default for `subgraph` since #19526 (if that's what you meant). But in these cases the algorithms change these subgraphs (in fairly trivial ways, but still), so we need them to be mutable.\n\nJano\u0161",
    "created_at": "2016-01-27T18:51:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19736#issuecomment-271287",
    "user": "jaanos"
}
```

Hi!

This is the default for `subgraph` since #19526 (if that's what you meant). But in these cases the algorithms change these subgraphs (in fairly trivial ways, but still), so we need them to be mutable.

Jano≈°



---

archive/issue_comments_271288.json:
```json
{
    "body": "Oh. My mistake: what I meant is that the functions will now return a mutable graph (e.g. the tsp) even when called on an immutable graph. Should we change the mutability status of those graphs we are about to return to match the status of `self`?",
    "created_at": "2016-01-27T18:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19736#issuecomment-271288",
    "user": "ncohen"
}
```

Oh. My mistake: what I meant is that the functions will now return a mutable graph (e.g. the tsp) even when called on an immutable graph. Should we change the mutability status of those graphs we are about to return to match the status of `self`?



---

archive/issue_comments_271289.json:
```json
{
    "body": "Yes, we could do that. Also, when calling `is_hamiltonian`, we don't really need to construct this subgraph at all (unless it's cached somewhere, but I don't see it in the current code).",
    "created_at": "2016-01-27T19:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19736#issuecomment-271289",
    "user": "jaanos"
}
```

Yes, we could do that. Also, when calling `is_hamiltonian`, we don't really need to construct this subgraph at all (unless it's cached somewhere, but I don't see it in the current code).



---

archive/issue_comments_271290.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-27T19:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19736#issuecomment-271290",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_271291.json:
```json
{
    "body": "OK, `traveling_salesman_problem` now preserves mutability. It still constructs the subgraph, even if called from `is_hamiltonian` - this is, after all, the easy part of the algorithm:)",
    "created_at": "2016-01-27T19:57:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19736#issuecomment-271291",
    "user": "jaanos"
}
```

OK, `traveling_salesman_problem` now preserves mutability. It still constructs the subgraph, even if called from `is_hamiltonian` - this is, after all, the easy part of the algorithm:)



---

archive/issue_comments_271292.json:
```json
{
    "body": "OKayyy.. Thanks for this ticket, good to go!",
    "created_at": "2016-01-28T07:56:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19736#issuecomment-271292",
    "user": "ncohen"
}
```

OKayyy.. Thanks for this ticket, good to go!



---

archive/issue_comments_271293.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-01-28T07:56:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19736#issuecomment-271293",
    "user": "ncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_271294.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to graph theory.",
    "created_at": "2016-01-28T07:56:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19736#issuecomment-271294",
    "user": "ncohen"
}
```

Changing component from PLEASE CHANGE to graph theory.



---

archive/issue_comments_271295.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-01-28T20:09:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19736#issuecomment-271295",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_271296.json:
```json
{
    "body": "Thanks again!",
    "created_at": "2016-01-28T20:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19736",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19736#issuecomment-271296",
    "user": "jaanos"
}
```

Thanks again!
