# Issue 19562: numerical approximation of zeta involving symbolic constants fails

Issue created by migration from Trac.

Original creator: behackl

Original creation time: 2015-12-29 18:03:38

CC:  rws

when evaluating `zeta(s)` numerically at arguments where symbolic constants like `pi`, `sqrt(2)`, `log(2)` etc... are involved, it raises an error (in contrast to `gamma(s)`):


```
sage: gamma(pi).n()
2.28803779534003
sage: zeta(pi).n()
Traceback (most recent call last):
...
TypeError: cannot evaluate symbolic expression numerically
```


or, similarly


```
sage: gamma(sqrt(2)).n()
0.886581428719259
sage: zeta(sqrt(2)).n()
Traceback (most recent call last):
...
TypeError: cannot evaluate symbolic expression numerically
```


and so on.


---

Comment by behackl created at 2015-12-29 18:09:02

Could this be caused by any chance by the line


```
do_not_evalf_params().
```


in the [registration of zeta in pynac, inifcns_nstdsums.cpp, line 3836ff](https://github.com/pynac/pynac/blob/7e32cd6755eb16d59f5dab81e2e40300f7eff7e8/ginac/inifcns_nstdsums.cpp#L3842)?


---

Comment by rws created at 2015-12-30 06:33:41

Replying to [comment:1 behackl]:
> Could this be caused by any chance by the line
> 
> {{{
> do_not_evalf_params().
> }}}
> 
> in the [registration of zeta in pynac, inifcns_nstdsums.cpp, line 3836ff](https://github.com/pynac/pynac/blob/7e32cd6755eb16d59f5dab81e2e40300f7eff7e8/ginac/inifcns_nstdsums.cpp#L3842)?
Yes, there appears to be a conceptual problem in that file because when I remove that option the `zeta` problem goes away but then `polylog` complains:

```
sage: polylog(sqrt(2),1).n()
3.02073767948603
polylog(4, 2).n()
...
TypeError: cannot evaluate symbolic expression numerically
```



---

Comment by rws created at 2015-12-30 06:39:04

Ah ok, I had to remove the option specifically for `zeta`. Expect the fix in pynac-0.5.4.


---

Comment by behackl created at 2015-12-30 11:03:54

Replying to [comment:3 rws]:
> Ah ok, I had to remove the option specifically for `zeta`. Expect the fix in pynac-0.5.4.

that was fast -- thank you! :-)

I'll let this ticket rest and add a doctest in `functions/transcendental.py` after the update to pynac-0.5.4.


---

Comment by slelievre created at 2016-01-13 09:30:10

Fixed by update to Pynac 0.6.0 at #19819?


---

Comment by behackl created at 2016-01-16 21:55:23

Changing status from new to needs_review.


---

Comment by behackl created at 2016-01-16 21:55:23

... added two doctests, `needs_review`.
----
New commits:


---

Comment by vdelecroix created at 2016-01-17 03:48:47

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-01-20 10:19:59

Resolution: fixed
