# Issue 18524: method submatrix of matrix_mod2_dense needs default arguments

Issue created by migration from Trac.

Original creator: cnassau

Original creation time: 2015-06-22 18:07:58

CC:  malb

Keywords: dense matrix, sub matrix

The `submatrix` methods for dense matrices mod 2<sup>e</sup> have a different signature than the other `submatrix` methods; the latter treat their last two arguments as optional. This leads to errors like this (from 6.8.beta5):


```
sage: d0=matrix(GF(2),[[1, 1], [1, 1], [1, 1], [1, 1]])
sage: d0._echelon_form_PID()---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
...
TypeError: submatrix() takes exactly 4 positional arguments (2 given)
}}} 

or this

{{{
sage: d0=matrix(GF(2),[[1, 1], [1, 1], [1, 1], [1, 1]])
sage: d1=matrix(GF(2),[[1, 1, 0, 0],
 [1, 1, 0, 0],
 [1, 1, 1, 1],
 [1, 1, 1, 1],
 [0, 0, 1, 1],
 [0, 0, 1, 1]]
)
sage: C=ChainComplex(data=(d0,d1))
sage: C.homology(1,generators=True)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
...
TypeError: submatrix() takes exactly 4 positional arguments (2 given)
}}}


---

Comment by cnassau created at 2015-06-22 19:17:26

New commits:


---

Comment by cnassau created at 2015-06-22 19:17:26

Changing status from new to needs_review.


---

Comment by cnassau created at 2015-06-22 19:22:41

I have given the submatrix methods the same signature as in file "matrix1.pyx". This includes a name change of the arguments, because in parts of Sage (eg, `ChainComplex._homology_generators_snf`) the method is called with named arguments.

I also made this change: 

```
-        if self._ncols == 0 or self._nrows == 0:
+        if ncols == 0 or nrows == 0:
```

This fixed a segfault in my tests, and also seems to make more sense that the original: one returns an uninitialized matrix if *it* is empty, not if *self* is empty.

Caveat: I have no detailed understanding of m4rie, someone knowledgeable might want to have a look at my changes.


---

Comment by malb created at 2015-06-23 08:07:03

Looks good to me.


---

Comment by malb created at 2015-06-23 08:07:03

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-06-24 10:06:23

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2015-06-24 10:06:23

Reviewer name is missing


---

Comment by cnassau created at 2015-06-24 10:41:55

I have added the name of the reviewer, and taken the liberty to revert the status to positive-review again myself.


---

Comment by cnassau created at 2015-06-24 10:41:55

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2015-06-24 20:11:28

Resolution: fixed
