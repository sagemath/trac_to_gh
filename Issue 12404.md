# Issue 12404: OS X Lion: don't require setting SAGE_PORT

archive/issues_012404.json:
```json
{
    "body": "Assignee: GeorgSWeber\n\nKeywords: osx lion prereq\n\nThe prereq script requires setting `SAGE_PORT` to build on OS X Lion. We should remove this requirement, since building successfully on Lion should be imminent.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12576\n\n",
    "created_at": "2012-02-23T19:15:03Z",
    "labels": [
        "build",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "OS X Lion: don't require setting SAGE_PORT",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12404",
    "user": "@jhpalmieri"
}
```
Assignee: GeorgSWeber

Keywords: osx lion prereq

The prereq script requires setting `SAGE_PORT` to build on OS X Lion. We should remove this requirement, since building successfully on Lion should be imminent.

Issue created by migration from https://trac.sagemath.org/ticket/12576





---

archive/issue_comments_146486.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-02-23T19:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146486",
    "user": "@jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_146487.json:
```json
{
    "body": "While you're changing this, you should really also fix the `xcodebuild` check.  At least, redirect 2>/dev/null so we don't see the error messages.",
    "created_at": "2012-02-23T20:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146487",
    "user": "@jdemeyer"
}
```

While you're changing this, you should really also fix the `xcodebuild` check.  At least, redirect 2>/dev/null so we don't see the error messages.



---

archive/issue_comments_146488.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-23T20:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146488",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_146489.json:
```json
{
    "body": "With the current patch, xcodebuild is only used on pre-Lion systems. Since whoever worked on prereq before seemed to think that the particular version of Xcode was important in some cases, I think we should keep this check there. I can redirect the output, though.",
    "created_at": "2012-02-23T22:09:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146489",
    "user": "@jhpalmieri"
}
```

With the current patch, xcodebuild is only used on pre-Lion systems. Since whoever worked on prereq before seemed to think that the particular version of Xcode was important in some cases, I think we should keep this check there. I can redirect the output, though.



---

archive/issue_comments_146490.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-23T22:33:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146490",
    "user": "@jhpalmieri"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_146491.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-27T10:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146491",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_146492.json:
```json
{
    "body": "Please remove also\n\n```\necho \"Solaris 9: copying work around stdint.h\" \ncp $SAGE_ROOT/spkg/base/stdint.h_Solaris9 $SAGE_LOCAL/include/stdint.h \n```\n\n(the file `$SAGE_ROOT/spkg/base/stdint.h_Solaris9` was removed in #11073).",
    "created_at": "2012-02-27T10:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146492",
    "user": "@jdemeyer"
}
```

Please remove also

```
echo "Solaris 9: copying work around stdint.h" 
cp $SAGE_ROOT/spkg/base/stdint.h_Solaris9 $SAGE_LOCAL/include/stdint.h 
```

(the file `$SAGE_ROOT/spkg/base/stdint.h_Solaris9` was removed in #11073).



---

archive/issue_comments_146493.json:
```json
{
    "body": "In fact, why not remove all of\n\n```\nif [ \"$UNAME\" = \"SunOS\" ] && [ \"$RELEASE\" = \"5.9\" ]; then\n    echo \"WARNING: Building Sage is not supported on Solaris 9\"\n    echo \"but it might work, so the build will continue.\"\n    echo \"Solaris 9: copying work around stdint.h\"\n    cp $SAGE_ROOT/spkg/base/stdint.h_Solaris9 $SAGE_LOCAL/include/stdint.h\nfi\n\nif [ \"$UNAME\" = \"SunOS\" ] && [ \"$RELEASE\" = \"5.8\" ]; then\n    echo \"WARNING: Building Sage is not supported on Solaris 8\"\n    echo \"but it might work, so the build will continue.\"\n    echo \"Solaris 8: copying work around stdint.h\"\n    cp $SAGE_ROOT/spkg/base/stdint.h_Solaris9 $SAGE_LOCAL/include/stdint.h\nfi\n```\n\nas those versions are already checked for above.",
    "created_at": "2012-02-27T10:26:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146493",
    "user": "@jdemeyer"
}
```

In fact, why not remove all of

```
if [ "$UNAME" = "SunOS" ] && [ "$RELEASE" = "5.9" ]; then
    echo "WARNING: Building Sage is not supported on Solaris 9"
    echo "but it might work, so the build will continue."
    echo "Solaris 9: copying work around stdint.h"
    cp $SAGE_ROOT/spkg/base/stdint.h_Solaris9 $SAGE_LOCAL/include/stdint.h
fi

if [ "$UNAME" = "SunOS" ] && [ "$RELEASE" = "5.8" ]; then
    echo "WARNING: Building Sage is not supported on Solaris 8"
    echo "but it might work, so the build will continue."
    echo "Solaris 8: copying work around stdint.h"
    cp $SAGE_ROOT/spkg/base/stdint.h_Solaris9 $SAGE_LOCAL/include/stdint.h
fi
```

as those versions are already checked for above.



---

archive/issue_comments_146494.json:
```json
{
    "body": "I would also remove\n\n```\n# From Kate Minola kate01123@gmail.com\n# On my powerpc-Darwin machine with csh as my shell, when I attempt\n# to build SAGE in the background (i.e., \"make &\") the build\n# stops when executing 'prereq-0.2-install'.  The reason is\n# that the line\n#     which $1 > /dev/null\n# issues a SIGTTOU signal (background process attempting to write\n# to tty).  Solution:\ntrap '' TTOU\n```\n\n\nwhich refers to a very outdated version of Sage (and I doubt this one line will fix the problem described).",
    "created_at": "2012-02-27T10:29:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146494",
    "user": "@jdemeyer"
}
```

I would also remove

```
# From Kate Minola kate01123@gmail.com
# On my powerpc-Darwin machine with csh as my shell, when I attempt
# to build SAGE in the background (i.e., "make &") the build
# stops when executing 'prereq-0.2-install'.  The reason is
# that the line
#     which $1 > /dev/null
# issues a SIGTTOU signal (background process attempting to write
# to tty).  Solution:
trap '' TTOU
```


which refers to a very outdated version of Sage (and I doubt this one line will fix the problem described).



---

archive/issue_comments_146495.json:
```json
{
    "body": "Replace\n\n```\nXCODE_VERS=`xcodebuild -version | grep Xcode | sed -e 's/[A-Za-z ]//g' 2> /dev/null\n```\n\nby\n\n```\nXCODE_VERS=`xcodebuild -version 2>/dev/null | grep Xcode | sed 's/[A-Za-z ]//g'\n```\n",
    "created_at": "2012-02-27T10:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146495",
    "user": "@jdemeyer"
}
```

Replace

```
XCODE_VERS=`xcodebuild -version | grep Xcode | sed -e 's/[A-Za-z ]//g' 2> /dev/null
```

by

```
XCODE_VERS=`xcodebuild -version 2>/dev/null | grep Xcode | sed 's/[A-Za-z ]//g'
```




---

archive/issue_comments_146496.json:
```json
{
    "body": "Replace TABs by spaces.",
    "created_at": "2012-02-27T10:32:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146496",
    "user": "@jdemeyer"
}
```

Replace TABs by spaces.



---

archive/issue_comments_146497.json:
```json
{
    "body": "Changing assignee from GeorgSWeber to @jdemeyer.",
    "created_at": "2012-02-27T10:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146497",
    "user": "@jdemeyer"
}
```

Changing assignee from GeorgSWeber to @jdemeyer.



---

archive/issue_comments_146498.json:
```json
{
    "body": "I would also replace\n\n```\necho \"You are using Xcode version \" $XCODE_VERS \".\"\n```\n\nby\n\n```\necho \"You are using Xcode version $XCODE_VERS.\"\n```\n\nwhich is more readable.",
    "created_at": "2012-02-27T10:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146498",
    "user": "@jdemeyer"
}
```

I would also replace

```
echo "You are using Xcode version " $XCODE_VERS "."
```

by

```
echo "You are using Xcode version $XCODE_VERS."
```

which is more readable.



---

archive/issue_comments_146499.json:
```json
{
    "body": "This \"if\" will never be true (as you already special-cased it above), so this block can be removed:\n\n```\n        if [ $DARWIN_VERSION -gt 10 ]; then\n           echo \"Probably you need Xcode 4.3 (or later)\"\n           echo \"Also, make sure you install Xcode's\"\n           echo \"Command Line Tools -- see Sage's README.txt.\"\n```\n",
    "created_at": "2012-02-27T10:38:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146499",
    "user": "@jdemeyer"
}
```

This "if" will never be true (as you already special-cased it above), so this block can be removed:

```
        if [ $DARWIN_VERSION -gt 10 ]; then
           echo "Probably you need Xcode 4.3 (or later)"
           echo "Also, make sure you install Xcode's"
           echo "Command Line Tools -- see Sage's README.txt."
```




---

archive/issue_comments_146500.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-27T22:22:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146500",
    "user": "@jhpalmieri"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_146501.json:
```json
{
    "body": "Fixed.  Here's a new patch.",
    "created_at": "2012-02-27T22:22:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146501",
    "user": "@jhpalmieri"
}
```

Fixed.  Here's a new patch.



---

archive/issue_comments_146502.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-03-05T12:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146502",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_146503.json:
```json
{
    "body": "Undid the changes to `spkg/base/bzip2-1.0.5-install` (for compatibility with #12102)",
    "created_at": "2012-03-23T22:34:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146503",
    "user": "@jdemeyer"
}
```

Undid the changes to `spkg/base/bzip2-1.0.5-install` (for compatibility with #12102)



---

archive/issue_comments_146504.json:
```json
{
    "body": "The parts of this patch which are unrelated to Darwin are moved to #12112.",
    "created_at": "2012-03-26T13:41:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146504",
    "user": "@jdemeyer"
}
```

The parts of this patch which are unrelated to Darwin are moved to #12112.



---

archive/issue_comments_146505.json:
```json
{
    "body": "Attachment [trac_12576-lion-sage_port.patch](tarball://root/attachments/some-uuid/ticket12576/trac_12576-lion-sage_port.patch) by @jdemeyer created at 2012-03-26 13:41:27\n\nroot repo",
    "created_at": "2012-03-26T13:41:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146505",
    "user": "@jdemeyer"
}
```

Attachment [trac_12576-lion-sage_port.patch](tarball://root/attachments/some-uuid/ticket12576/trac_12576-lion-sage_port.patch) by @jdemeyer created at 2012-03-26 13:41:27

root repo



---

archive/issue_comments_146506.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-04-07T15:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12404#issuecomment-146506",
    "user": "@jdemeyer"
}
```

Resolution: fixed
