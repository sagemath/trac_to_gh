# Issue 17370: Add a python 3 package

archive/issues_017370.json:
```json
{
    "body": "CC:  @vbraun wstein @wluebbe @a-andre @jdemeyer\n\nTo assist in porting to python 3 (and supposedly to use once we have a working python 3 port).\n\nIssue created by migration from https://trac.sagemath.org/ticket/17607\n\n",
    "created_at": "2015-01-08T23:07:49Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "Add a python 3 package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17370",
    "user": "https://github.com/ohanar"
}
```
CC:  @vbraun wstein @wluebbe @a-andre @jdemeyer

To assist in porting to python 3 (and supposedly to use once we have a working python 3 port).

Issue created by migration from https://trac.sagemath.org/ticket/17607





---

archive/issue_comments_231232.json:
```json
{
    "body": "This is missing a few of the patches that were in the python 2.7 package, mainly because parts of the codebase has changed significantly and I didn't want to spend the time resolving the differences. Most of the ones cut had to do with cygwin support, the main exception being Jereon's patch for #13579.",
    "created_at": "2015-01-08T23:12:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17370#issuecomment-231232",
    "user": "https://github.com/ohanar"
}
```

This is missing a few of the patches that were in the python 2.7 package, mainly because parts of the codebase has changed significantly and I didn't want to spend the time resolving the differences. Most of the ones cut had to do with cygwin support, the main exception being Jereon's patch for #13579.



---

archive/issue_comments_231233.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-05-24T17:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17370#issuecomment-231233",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_231234.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-24T17:57:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17370#issuecomment-231234",
    "user": "https://github.com/ohanar"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_231235.json:
```json
{
    "body": "tarball?",
    "created_at": "2015-05-24T19:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17370#issuecomment-231235",
    "user": "https://github.com/vbraun"
}
```

tarball?



---

archive/issue_comments_231236.json:
```json
{
    "body": "Replying to [comment:4 vbraun]:\n> tarball?\nderp.",
    "created_at": "2015-05-24T19:36:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17370#issuecomment-231236",
    "user": "https://github.com/ohanar"
}
```

Replying to [comment:4 vbraun]:
> tarball?
derp.



---

archive/issue_comments_231237.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-25T07:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17370#issuecomment-231237",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_016754.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-25T07:29:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17370",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17370#event-16754"
}
```



---

archive/issue_comments_231238.json:
```json
{
    "body": "\n```\n(GRRR|\u2026)~/.Sage/build/pkgs$ head python3/checksums.ini -n 1\ntarball=Python-VERSION.tar.gz\n(GRRR|\u2026)~/.Sage/build/pkgs$ head python2/checksums.ini -n 1\ntarball=python-VERSION.tar.gz\n```\n\n\nReally guys...",
    "created_at": "2015-05-26T10:24:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17370#issuecomment-231238",
    "user": "https://github.com/nathanncohen"
}
```


```
(GRRR|…)~/.Sage/build/pkgs$ head python3/checksums.ini -n 1
tarball=Python-VERSION.tar.gz
(GRRR|…)~/.Sage/build/pkgs$ head python2/checksums.ini -n 1
tarball=python-VERSION.tar.gz
```


Really guys...



---

archive/issue_comments_231239.json:
```json
{
    "body": "Small and big question: First, when I install this on OS X 10.10.3 (using `sage -i python3`), I see\n\n```\nconfigure: WARNING: unrecognized options: --enable-unicode, --disable-toolbox-glue\n```\n\nI assume that's minor, but it should probably be cleaned up.\n\nSecond, after installing, if I do `sage --python`, I get\n\n```\n/Users/palmieri/Desktop/Sage_stuff/git/sage/src/bin/sage-env: line 411: 33785 Abort trap: 6           \"$SAGE_ROOT/local/bin/python\" -c 'import pkg_resources; pkg_resources.get_distribution(\"matplotlib\").version' 2> /dev/null\nFatal Python error: Py_Initialize: unable to load the file system codec\n  File \"/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python/encodings/__init__.py\", line 123\n    raise CodecRegistryError,\\\n                            ^\nSyntaxError: invalid syntax\n/usr/local/bin/sage: line 134: 33763 Abort trap: 6           \"$SAGE_ROOT/src/bin/sage\" \"$@\"\n```\n\nThis breaks Sage completely. I don't mind having an optional package which doesn't build for me, but I don't think we should have one that breaks Sage.",
    "created_at": "2015-05-26T17:02:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17370#issuecomment-231239",
    "user": "https://github.com/jhpalmieri"
}
```

Small and big question: First, when I install this on OS X 10.10.3 (using `sage -i python3`), I see

```
configure: WARNING: unrecognized options: --enable-unicode, --disable-toolbox-glue
```

I assume that's minor, but it should probably be cleaned up.

Second, after installing, if I do `sage --python`, I get

```
/Users/palmieri/Desktop/Sage_stuff/git/sage/src/bin/sage-env: line 411: 33785 Abort trap: 6           "$SAGE_ROOT/local/bin/python" -c 'import pkg_resources; pkg_resources.get_distribution("matplotlib").version' 2> /dev/null
Fatal Python error: Py_Initialize: unable to load the file system codec
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python/encodings/__init__.py", line 123
    raise CodecRegistryError,\
                            ^
SyntaxError: invalid syntax
/usr/local/bin/sage: line 134: 33763 Abort trap: 6           "$SAGE_ROOT/src/bin/sage" "$@"
```

This breaks Sage completely. I don't mind having an optional package which doesn't build for me, but I don't think we should have one that breaks Sage.



---

archive/issue_comments_231240.json:
```json
{
    "body": "John, would you make a follow up ticket and cc me?",
    "created_at": "2015-05-26T17:41:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17370#issuecomment-231240",
    "user": "https://github.com/ohanar"
}
```

John, would you make a follow up ticket and cc me?



---

archive/issue_comments_231241.json:
```json
{
    "body": "Done: it's #18521.",
    "created_at": "2015-05-26T18:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17370#issuecomment-231241",
    "user": "https://github.com/jhpalmieri"
}
```

Done: it's #18521.



---

archive/issue_comments_231242.json:
```json
{
    "body": "Funny, you added a `site_packages` (sic!) directory to `PYTHONPATH`. That directory doesn't exist, but `site-packages` exists. See #21688",
    "created_at": "2016-10-12T07:52:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17370#issuecomment-231242",
    "user": "https://github.com/jdemeyer"
}
```

Funny, you added a `site_packages` (sic!) directory to `PYTHONPATH`. That directory doesn't exist, but `site-packages` exists. See #21688
