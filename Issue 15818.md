# Issue 15818: Implement Jordan algebras

Issue created by migration from Trac.

Original creator: tscrim

Original creation time: 2014-04-03 19:57:18

Assignee: tscrim

Keywords: jordan algebra

So we have a non-associative algebra to play with (and they are connected with Lie algebras).

If by some chance #10963 gets merged before this, we should change the category to their non-associative variety.


---

Comment by tscrim created at 2014-04-03 19:58:00

New commits:


---

Comment by tscrim created at 2014-04-03 19:58:00

Changing status from new to needs_review.


---

Comment by git created at 2014-04-03 21:30:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-06-17 22:29:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-02-14 01:45:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-02-14 18:13:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2015-02-16 16:51:24

Thank you! Just to make sure, `_lmul_` only gets called when you multiply with a scalar?

EDIT: Also, I don't see the `(x^m y) x^n = x^m (y x^n)` identity in McCrimmon...


---

Comment by tscrim created at 2015-02-16 18:57:31

Replying to [comment:9 darij]:
> Thank you! Just to make sure, `_lmul_` only gets called when you multiply with a scalar?'s 

Correct. If it's an element of the Jordan algebra, then regular `_mul_` gets called.

> EDIT: Also, I don't see the `(x^m y) x^n = x^m (y x^n)` identity in McCrimmon...

It's not. I cited Jacobson (as I believe it's in there but I don't have the book right now to check [tonight I will]), but it's on the wikipedia page (which I didn't want to explicitly cite).


---

Comment by darij created at 2015-02-17 21:31:50

Found it: equality (11) in

```
A. A. Albert, *A Structure Theory for Jordan Algebras*,
Annals of Mathematics, Second Series, Vol. 48, No. 3
(Jul., 1947), pp. 546--567.
```

I'll put this into the doc later.


---

Comment by tscrim created at 2015-02-17 21:59:35

It's not in Jacobson; I'm glad you found an explicit reference.


---

Comment by git created at 2015-02-17 22:00:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-02-17 22:01:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2015-02-17 22:52:48

Here's why the `~` is safer than `/`:

```
sage: R.<q,t> = LaurentPolynomialRing(QQ)
sage: 1 / R(2)
1/2
sage: _.parent()
Fraction Field of Multivariate Polynomial Ring in q, t over Rational Field
sage: ~R(2)
1/2
sage: _.parent()
Multivariate Laurent Polynomial Ring in q, t over Rational Field
```

Although this might be fixed by #17740. However I think instead of `QQ`, we could just convert to (the fraction field of) the base ring. I'll test and make changes.

I'm happy with setting `algebras_generators = basis`, and subclassing does not respect aliases (this has given me many headaches, but it makes sense from the python perspective). I'll do this on my next commit.


---

Comment by git created at 2015-02-17 23:07:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2015-02-18 00:54:48

Thanks for the explanations. I was worried that subclassing wouldn't completely ignore aliases in case of `@`cached_function usage. But experiments suggest that there is no problem with that.


```
            sage: J(2, (-2, 3)) # known bug - defaults to the base ring morphism #16054
            2 + (-2, 3)
            sage: J(-1, 1, 0) # known bug - defaults to the base ring morphism #16054
            -1 + (1, 0)
```

But these work!


---

Comment by git created at 2015-02-18 01:44:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2015-02-18 01:51:46

I'm glad you tested that. That used to not work, but now since there is no coercion map from the base ring (when I first wrote it, there was one), it doesn't go through the coercion path noted in #16054.


---

Comment by git created at 2015-02-18 02:50:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2015-02-18 02:52:08

Replying to [comment:19 tscrim]:
> I'm glad you tested that. That used to not work, but now since there is no coercion map from the base ring (when I first wrote it, there was one), it doesn't go through the coercion path noted in #16054.

Does this mean that this will break again when the base ring coercion is reintroduced?

Also, I've finished reviewing this, but there is a TODO in the latest commit.


---

Comment by git created at 2015-02-18 03:24:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2015-02-18 03:39:25

Replying to [comment:21 darij]:
> Does this mean that this will break again when the base ring coercion is reintroduced?

This isn't a coercion for non-commutative base rings. The commutativity of the associative algebra actually suppresses the non-associativity of the Jordan algebra since

```
(xy + yx)/2 = xy = yx
(yz + zy)/2 = yz = zy
(xyz + zyx)/2 = xyz = yxz = ... = zyx
```

Perhaps we could add extra checks for the base ring being commutative and adding such a coercion if there is a need, but for now I think we have the conversion and left/right actions.

> Also, I've finished reviewing this, but there is a TODO in the latest commit.

Fixed; sign error. So can I consider this as a positive review?


---

Comment by darij created at 2015-02-18 03:43:52

Uhm, the base ring is assumed to be commutative, right? Are you talking about a coercion from the base ring, or from the algebra which serves as a ground set? Which of these would break the element constructor?

And yes, this is a positive review, apart from this little issue.


---

Comment by tscrim created at 2015-02-18 04:05:17

Right, we are... The issue is when we have a coercion from the base ring, the first input gets checked to see if there is a coercion, and if there is, then it passes all arguments via that coercion (ignoring that the combination of elements should give a different coercion/conversion). So I could one of the two:

- leave it as it is,
- add a custom coercion from the base ring and put back the known bug tag.

Which is your preference?


---

Comment by darij created at 2015-02-18 04:12:06

I'd leave it as it is -- it does make sense that a map from an associative into a non-associative ring is only a conversion. Can you add in a comment on this?


---

Comment by tscrim created at 2015-02-18 04:13:33

On that those doctests will break if there is a coercion?


---

Comment by darij created at 2015-02-18 04:16:47

Well, you currently have this line:

```
+ # Remove the preceding line once :trac:`16492` is fixed
```

You should say that #16492 is not the only obstruction to the coercion.

Once done, this is positive_review! I'd make the change myself, but that would add yet another merge commit.


---

Comment by git created at 2015-02-18 04:21:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2015-02-18 04:22:30

Done. Thanks for doing the review Darij!


---

Comment by tscrim created at 2015-02-18 04:22:30

Changing status from needs_review to positive_review.


---

Comment by darij created at 2015-02-18 04:34:11

No problem -- this is probably the easiest of your Lie-algebra tickets.


---

Comment by vbraun created at 2015-02-18 23:22:49

Resolution: fixed
