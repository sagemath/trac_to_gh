# Issue 14451: Dynkin diagrams does not copy like digraph

archive/issues_014451.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  sage-combinat @nthiery mshimo @anneschilling\n\nKeywords: dynkin diagram copy\n\nInitializing:\n\n```\nsage: d = DynkinDiagram(['B',3,1])\nsage: g = DiGraph()\nsage: for x in d.vertices(): g.add_vertex(x)\nsage: for y in d.edges(): g.add_edge(y)\nsage: cd = copy(d)\nsage: cg = copy(g)\nsage: cd is d\nFalse\nsage: cd == d and cg == g\nTrue\n```\n\nNow the correct behavior using `DiGraph`:\n\n```\nsage: g.vertices()\n[0, 1, 2, 3]\nsage: cg.vertices()\n[0, 1, 2, 3]\nsage: cg.add_vertex(4)\nsage: g.vertices()\n[0, 1, 2, 3]\nsage: cg.vertices()\n[0, 1, 2, 3, 4]\n```\n\nThe error with `DynkinDiagram`:\n\n```\nsage: d.vertices()\n[0, 1, 2, 3]\nsage: cd.vertices()\n[0, 1, 2, 3]\nsage: cd.add_vertex(4)       \nsage: cd.vertices()\n[0, 1, 2, 3, 4]\nsage: d.vertices()\n[0, 1, 2, 3, 4]\n```\n\n\nThis causes problems with `automorphism_group(edge_labels=True)` noticed by Mark Shimozono.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14655\n\n",
    "created_at": "2013-05-28T17:05:24Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.11",
    "title": "Dynkin diagrams does not copy like digraph",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14451",
    "user": "https://github.com/tscrim"
}
```
Assignee: sage-combinat

CC:  sage-combinat @nthiery mshimo @anneschilling

Keywords: dynkin diagram copy

Initializing:

```
sage: d = DynkinDiagram(['B',3,1])
sage: g = DiGraph()
sage: for x in d.vertices(): g.add_vertex(x)
sage: for y in d.edges(): g.add_edge(y)
sage: cd = copy(d)
sage: cg = copy(g)
sage: cd is d
False
sage: cd == d and cg == g
True
```

Now the correct behavior using `DiGraph`:

```
sage: g.vertices()
[0, 1, 2, 3]
sage: cg.vertices()
[0, 1, 2, 3]
sage: cg.add_vertex(4)
sage: g.vertices()
[0, 1, 2, 3]
sage: cg.vertices()
[0, 1, 2, 3, 4]
```

The error with `DynkinDiagram`:

```
sage: d.vertices()
[0, 1, 2, 3]
sage: cd.vertices()
[0, 1, 2, 3]
sage: cd.add_vertex(4)       
sage: cd.vertices()
[0, 1, 2, 3, 4]
sage: d.vertices()
[0, 1, 2, 3, 4]
```


This causes problems with `automorphism_group(edge_labels=True)` noticed by Mark Shimozono.

Issue created by migration from https://trac.sagemath.org/ticket/14655





---

archive/issue_comments_182615.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-06-10T17:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14451#issuecomment-182615",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_182616.json:
```json
{
    "body": "Fixed by making `DynkinDiagram_class.__init__()` handle the input from `GenericGraph.__copy__()` and do some type-checking.",
    "created_at": "2013-06-10T17:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14451#issuecomment-182616",
    "user": "https://github.com/tscrim"
}
```

Fixed by making `DynkinDiagram_class.__init__()` handle the input from `GenericGraph.__copy__()` and do some type-checking.



---

archive/issue_comments_182617.json:
```json
{
    "body": "Thanks, Travis, for fixing this. A few small things to deal with:\n\nPlease fix the docstring for :func:`DynkinDiagram`: the real issue for the Cartan matrix convention\nis transposing or not; in everyone's conventions the arrow points from a *longer* root to a *shorter* one.\n\nI ran the following tests and got some errors.\n\n\n```\nsage: d = DynkinDiagram(['A',3,1])\nsage: TestSuite(d).run()\nFailure in _test_not_implemented_methods:\nTraceback (click to the left of this block for traceback)\n...\nThe following tests failed: _test_not_implemented_methods\n```\n\n\nI'm not sure I understand why, but :class:`DynkinDiagram_class` inherits from\n:class:`CartanType_abstract` and therefore is obligated to supply its abstract methods.\nIt appears not to fulfill its promise for :meth:`is_finite`, :meth:`is_affine`, and :meth:`is_irreducible`.\n\nOtherwise it looks great!",
    "created_at": "2013-06-11T19:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14451#issuecomment-182617",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

Thanks, Travis, for fixing this. A few small things to deal with:

Please fix the docstring for :func:`DynkinDiagram`: the real issue for the Cartan matrix convention
is transposing or not; in everyone's conventions the arrow points from a *longer* root to a *shorter* one.

I ran the following tests and got some errors.


```
sage: d = DynkinDiagram(['A',3,1])
sage: TestSuite(d).run()
Failure in _test_not_implemented_methods:
Traceback (click to the left of this block for traceback)
...
The following tests failed: _test_not_implemented_methods
```


I'm not sure I understand why, but :class:`DynkinDiagram_class` inherits from
:class:`CartanType_abstract` and therefore is obligated to supply its abstract methods.
It appears not to fulfill its promise for :meth:`is_finite`, :meth:`is_affine`, and :meth:`is_irreducible`.

Otherwise it looks great!



---

archive/issue_comments_182618.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-06-11T19:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14451#issuecomment-182618",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_182619.json:
```json
{
    "body": "I believe it is so that you can easily pass Dynkin diagrams as Cartan types (without using the coercion system). Anyways, new version of the patch which implements the additional methods and makes the docstring fix.",
    "created_at": "2013-06-11T21:05:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14451#issuecomment-182619",
    "user": "https://github.com/tscrim"
}
```

I believe it is so that you can easily pass Dynkin diagrams as Cartan types (without using the coercion system). Anyways, new version of the patch which implements the additional methods and makes the docstring fix.



---

archive/issue_comments_182620.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-06-11T21:05:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14451#issuecomment-182620",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_182621.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-06-12T00:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14451#issuecomment-182621",
    "user": "https://trac.sagemath.org/admin/accounts/users/mshimo"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_041866.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-12T07:46:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/14451",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14451#event-41866"
}
```



---

archive/issue_comments_182622.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2013-06-12T08:12:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14451#issuecomment-182622",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_182623.json:
```json
{
    "body": "The patch file is missing some metadata, in particular a username. Did you create the patch using `hg export`?",
    "created_at": "2013-06-12T08:12:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14451#issuecomment-182623",
    "user": "https://github.com/jdemeyer"
}
```

The patch file is missing some metadata, in particular a username. Did you create the patch using `hg export`?



---

archive/issue_comments_182624.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2013-06-12T08:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14451#issuecomment-182624",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_182625.json:
```json
{
    "body": "Attachment [trac_14655-dynkin_copy-ts.patch](tarball://root/attachments/some-uuid/ticket14655/trac_14655-dynkin_copy-ts.patch) by @tscrim created at 2013-06-12 08:41:51\n\nForgot to export. Fixed.",
    "created_at": "2013-06-12T08:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14451#issuecomment-182625",
    "user": "https://github.com/tscrim"
}
```

Attachment [trac_14655-dynkin_copy-ts.patch](tarball://root/attachments/some-uuid/ticket14655/trac_14655-dynkin_copy-ts.patch) by @tscrim created at 2013-06-12 08:41:51

Forgot to export. Fixed.



---

archive/issue_comments_182626.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-06-12T08:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14451#issuecomment-182626",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_182627.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-06-15T12:21:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14451#issuecomment-182627",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_041867.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-06-15T12:21:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14451",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14451#event-41867"
}
```
