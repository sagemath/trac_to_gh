# Issue 14451: Dynkin diagrams does not copy like digraph

Issue created by migration from https://trac.sagemath.org/ticket/14655

Original creator: tscrim

Original creation time: 2013-05-28 17:05:24

Assignee: sage-combinat

CC:  sage-combinat nthiery mshimo aschilling

Keywords: dynkin diagram copy

Initializing:

```
sage: d = DynkinDiagram(['B',3,1])
sage: g = DiGraph()
sage: for x in d.vertices(): g.add_vertex(x)
sage: for y in d.edges(): g.add_edge(y)
sage: cd = copy(d)
sage: cg = copy(g)
sage: cd is d
False
sage: cd == d and cg == g
True
```

Now the correct behavior using `DiGraph`:

```
sage: g.vertices()
[0, 1, 2, 3]
sage: cg.vertices()
[0, 1, 2, 3]
sage: cg.add_vertex(4)
sage: g.vertices()
[0, 1, 2, 3]
sage: cg.vertices()
[0, 1, 2, 3, 4]
```

The error with `DynkinDiagram`:

```
sage: d.vertices()
[0, 1, 2, 3]
sage: cd.vertices()
[0, 1, 2, 3]
sage: cd.add_vertex(4)       
sage: cd.vertices()
[0, 1, 2, 3, 4]
sage: d.vertices()
[0, 1, 2, 3, 4]
```


This causes problems with `automorphism_group(edge_labels=True)` noticed by Mark Shimozono.


---

Comment by tscrim created at 2013-06-10 17:23:54

Changing status from new to needs_review.


---

Comment by tscrim created at 2013-06-10 17:23:54

Fixed by making `DynkinDiagram_class.__init__()` handle the input from `GenericGraph.__copy__()` and do some type-checking.


---

Comment by mshimo created at 2013-06-11 19:04:00

Thanks, Travis, for fixing this. A few small things to deal with:

Please fix the docstring for :func:`DynkinDiagram`: the real issue for the Cartan matrix convention
is transposing or not; in everyone's conventions the arrow points from a *longer* root to a *shorter* one.

I ran the following tests and got some errors.


```
sage: d = DynkinDiagram(['A',3,1])
sage: TestSuite(d).run()
Failure in _test_not_implemented_methods:
Traceback (click to the left of this block for traceback)
...
The following tests failed: _test_not_implemented_methods
```


I'm not sure I understand why, but :class:`DynkinDiagram_class` inherits from
:class:`CartanType_abstract` and therefore is obligated to supply its abstract methods.
It appears not to fulfill its promise for :meth:`is_finite`, :meth:`is_affine`, and :meth:`is_irreducible`.

Otherwise it looks great!


---

Comment by mshimo created at 2013-06-11 19:04:00

Changing status from needs_review to needs_work.


---

Comment by tscrim created at 2013-06-11 21:05:13

I believe it is so that you can easily pass Dynkin diagrams as Cartan types (without using the coercion system). Anyways, new version of the patch which implements the additional methods and makes the docstring fix.


---

Comment by tscrim created at 2013-06-11 21:05:13

Changing status from needs_work to needs_review.


---

Comment by mshimo created at 2013-06-12 00:04:45

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-06-12 08:12:09

Changing status from positive_review to needs_info.


---

Comment by jdemeyer created at 2013-06-12 08:12:09

The patch file is missing some metadata, in particular a username. Did you create the patch using `hg export`?


---

Comment by tscrim created at 2013-06-12 08:41:51

Changing status from needs_info to needs_review.


---

Attachment

Forgot to export. Fixed.


---

Comment by tscrim created at 2013-06-12 08:42:03

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-06-15 12:21:21

Resolution: fixed
