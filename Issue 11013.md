# Issue 11013: Typo in initialization of FreeModule_generic_field

Issue created by migration from Trac.

Original creator: nborie

Original creation time: 2011-04-10 09:02:48

Assignee: nborie

A base_field become base_ring... I is very funny this bug never make things going bad.


```
sage: from sage.modules.free_module import FreeModule_generic_field
sage: FreeModule_generic_field(QQ, 5, 5)
Traceback (most recent call last):
...
NameError: global name 'base_ring' is not defined
```


And in the code:

```
class FreeModule_generic_field(FreeModule_generic_pid):
    ...
    def __init__(self, base_field, dimension, degree, sparse=False):
        ...
        FreeModule_generic_pid.__init__(self, base_ring, dimension, degree, sparse=sparse)
```


As the creation is done with a factory, This bug is invisible from the user. But, if you want to build your own FreeModule over a field with category and some other stuff, calling the __init__ of this class make me fall on the bug.


---

Comment by nborie created at 2011-04-10 09:13:44

Changing status from new to needs_review.


---

Attachment

Will see what the builbot will say...

This fixed :

```
sage: from sage.modules.free_module import FreeModule_generic_field
sage: FreeModule_generic_field(QQ, 5, 5)
<class 'sage.modules.free_module.FreeModule_generic_field_with_category'>
```



---

Attachment

attempt at a doctest


---

Comment by ltw created at 2011-06-04 17:52:11

Patch looks good and passes `sage --testall --long` on 4.7. I think all that is missing is a doctest that directly exercises this function. Someone needs to carefully check whether my attempt at a doctest is sufficient.


---

Comment by chapoton created at 2011-06-16 18:38:07

Please correct the headers, first line should contain exactly #11166

Apply trac_11166_FreeModule_generic_field-nb-v2.patch, trac_11166_doctest.patch


---

Comment by ltw created at 2011-06-16 21:48:33

Replying to [comment:4 chapoton]:

> Please correct the headers, first line should contain exactly !#11166

Sorry, I do not understand what you mean. Are you referring to the commit messages in the patches?


---

Comment by chapoton created at 2011-06-17 07:25:38

Yes, sorry for being unclear. The patch buildbot apparently requires that the first line of the commit message should contain the ticket number, in the specific format #xxxxx, with the # attached before the number. Otherwise, the bot will not give a green report. I was trying to help this ticket to reach the green report.


---

Comment by ltw created at 2011-06-17 17:44:40

rebased on 4.7


---

Attachment

Replying to [comment:6 chapoton]:
> Yes, sorry for being unclear. The patch buildbot apparently requires that the first line of the commit message should contain the ticket number, in the specific format #xxxxx, with the # attached before the number. Otherwise, the bot will not give a green report. I was trying to help this ticket to reach the green report.

Thanks for the explanation; I have updated the affected patch. I've known about the patchbot for a while, but I can't find any documentation on it. I don't even know how it determines which patches to apply!


---

Comment by rbeezer created at 2011-07-26 17:02:34

Changing status from needs_review to positive_review.


---

Comment by rbeezer created at 2011-07-26 17:02:34

This looks all ready to go.  Passes long tests on 4.7.1.alpha4.  So positive review.

Quite amazing this didn't crop up sooner!

I think both patches need their commit string edited, I am going to put up corrected versions.

Rob


---

Attachment


---

Attachment


---

Comment by jdemeyer created at 2011-08-18 22:03:26

Resolution: fixed
