# Issue 13415: Enable polynomial content over padic fields

archive/issues_013415.json:
```json
{
    "body": "Assignee: roed\n\nCurrently, one cannot call `content()` for a polynomial defined over `Qp`:\n\n```\nsage: K = Qp(3)\nsage: R.<t> = K[]\nsage: t.content()\nTypeError: ground ring is a field.  Answer is only defined up to units.\n```\n\n\nThe intention is apparently to protect the user from calling `content()` if he mistakenly got from `Zp` into `Qp`, since the content there would be always zero or one. However, this can be annoying when writing algorithms which work over `Zp` and `Qp`\u00a0but which have to take the content into account over `Zp`.\n\nAdditionally, the content shows a somewhat strange behaviour for zero polynomials::\n\n```\nsage: R = Zp(3)\nsage: S.<t> = R[]\nsage: f = S(R(0,3)); f\n(O(3^3))\nsage: f.is_zero()\nTrue\nsage: f.content()\n3 + O(3^23)\nsage: _.is_zero()\nFalse\n```\n\n\nI don't think that the current behaviour is mathematically incorrect, but I believe it's not very intuitive.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13619\n\n",
    "created_at": "2012-10-19T00:56:41Z",
    "labels": [
        "padics",
        "trivial",
        "enhancement"
    ],
    "title": "Enable polynomial content over padic fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13415",
    "user": "saraedum"
}
```
Assignee: roed

Currently, one cannot call `content()` for a polynomial defined over `Qp`:

```
sage: K = Qp(3)
sage: R.<t> = K[]
sage: t.content()
TypeError: ground ring is a field.  Answer is only defined up to units.
```


The intention is apparently to protect the user from calling `content()` if he mistakenly got from `Zp` into `Qp`, since the content there would be always zero or one. However, this can be annoying when writing algorithms which work over `Zp` and `Qp`Â but which have to take the content into account over `Zp`.

Additionally, the content shows a somewhat strange behaviour for zero polynomials::

```
sage: R = Zp(3)
sage: S.<t> = R[]
sage: f = S(R(0,3)); f
(O(3^3))
sage: f.is_zero()
True
sage: f.content()
3 + O(3^23)
sage: _.is_zero()
False
```


I don't think that the current behaviour is mathematically incorrect, but I believe it's not very intuitive.

Issue created by migration from https://trac.sagemath.org/ticket/13619





---

archive/issue_comments_165286.json:
```json
{
    "body": "Attachment\n\nI'm happy with this.  Let me know when you want a review.",
    "created_at": "2012-10-24T08:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165286",
    "user": "roed"
}
```

Attachment

I'm happy with this.  Let me know when you want a review.



---

archive/issue_comments_165287.json:
```json
{
    "body": "As a quick informal review, the `OUTPUT:` block is indented one too many times.",
    "created_at": "2012-11-25T07:28:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165287",
    "user": "tscrim"
}
```

As a quick informal review, the `OUTPUT:` block is indented one too many times.



---

archive/issue_comments_165288.json:
```json
{
    "body": "rebased and converted to git branch; changed indentation of `OUTPUT:` block, but no other changes\n----\nNew commits:",
    "created_at": "2014-01-28T14:27:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165288",
    "user": "niles"
}
```

rebased and converted to git branch; changed indentation of `OUTPUT:` block, but no other changes
----
New commits:



---

archive/issue_comments_165289.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-06-25T19:46:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165289",
    "user": "saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_165290.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd59\".",
    "created_at": "2014-06-25T19:46:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165290",
    "user": "saraedum"
}
```

Changing keywords from "" to "sd59".



---

archive/issue_comments_165291.json:
```json
{
    "body": "Is there are reason you are only doing this for `capped_relative_dense` rings and not in the generic `Polynomial_padic`?\n----\nNew commits:",
    "created_at": "2014-09-12T08:20:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165291",
    "user": "jdemeyer"
}
```

Is there are reason you are only doing this for `capped_relative_dense` rings and not in the generic `Polynomial_padic`?
----
New commits:



---

archive/issue_comments_165292.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-01-23T08:49:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165292",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_165293.json:
```json
{
    "body": "This should be done for generic padics polynomials. I would prefer to get the same answer for `Zp` and `Qp`, i.e. `p^k` where `k` is the minimal valuation. That would be more useful than always getting `1` as answer over `Qp`.",
    "created_at": "2015-01-23T08:49:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165293",
    "user": "jdemeyer"
}
```

This should be done for generic padics polynomials. I would prefer to get the same answer for `Zp` and `Qp`, i.e. `p^k` where `k` is the minimal valuation. That would be more useful than always getting `1` as answer over `Qp`.



---

archive/issue_comments_165294.json:
```json
{
    "body": "Changing priority from trivial to major.",
    "created_at": "2015-01-23T08:49:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165294",
    "user": "jdemeyer"
}
```

Changing priority from trivial to major.



---

archive/issue_comments_165295.json:
```json
{
    "body": "Replying to [comment:14 jdemeyer]:\n> Is there are reason you are only doing this for `capped_relative_dense` rings and not in the generic `Polynomial_padic`?\nI believe `Polynomial_padic` did not exist when I wrote this first. Anyway, there is no reason, I'll change it.",
    "created_at": "2015-01-23T13:55:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165295",
    "user": "saraedum"
}
```

Replying to [comment:14 jdemeyer]:
> Is there are reason you are only doing this for `capped_relative_dense` rings and not in the generic `Polynomial_padic`?
I believe `Polynomial_padic` did not exist when I wrote this first. Anyway, there is no reason, I'll change it.



---

archive/issue_comments_165296.json:
```json
{
    "body": "Replying to [comment:15 jdemeyer]:\n> This should be done for generic padics polynomials. I would prefer to get the same answer for `Zp` and `Qp`, i.e. `p^k` where `k` is the minimal valuation. That would be more useful than always getting `1` as answer over `Qp`.\nThis would be inconsistent with the current behaviour of `content()` over `QQ`. What should be the answer if a coefficient has negative valuation? I would rather stick to the usual definition of content. If people are interested in the content over `Zp`, then they should change the base ring.",
    "created_at": "2015-01-23T14:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165296",
    "user": "saraedum"
}
```

Replying to [comment:15 jdemeyer]:
> This should be done for generic padics polynomials. I would prefer to get the same answer for `Zp` and `Qp`, i.e. `p^k` where `k` is the minimal valuation. That would be more useful than always getting `1` as answer over `Qp`.
This would be inconsistent with the current behaviour of `content()` over `QQ`. What should be the answer if a coefficient has negative valuation? I would rather stick to the usual definition of content. If people are interested in the content over `Zp`, then they should change the base ring.



---

archive/issue_comments_165297.json:
```json
{
    "body": "Btw. I'd rather return the content as an ideal, just like `QQ` does. But this could probably break some code. Do you think this would be an acceptable change?",
    "created_at": "2015-01-23T14:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165297",
    "user": "saraedum"
}
```

Btw. I'd rather return the content as an ideal, just like `QQ` does. But this could probably break some code. Do you think this would be an acceptable change?



---

archive/issue_comments_165298.json:
```json
{
    "body": "I think it's certainly not a good idea that `content()` sometimes returns an element and sometimes returns an ideal. Ideally, there would be two methods:\n- `content()` returning an ideal in the mathematical sense\n- `content_gen()` returning an element, preferably a generator of the *fractional ideal* generated by the coefficients.",
    "created_at": "2015-01-23T16:41:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165298",
    "user": "jdemeyer"
}
```

I think it's certainly not a good idea that `content()` sometimes returns an element and sometimes returns an ideal. Ideally, there would be two methods:
- `content()` returning an ideal in the mathematical sense
- `content_gen()` returning an element, preferably a generator of the *fractional ideal* generated by the coefficients.



---

archive/issue_comments_165299.json:
```json
{
    "body": "Replying to [comment:17 saraedum]:\n> What should be the answer if a coefficient has negative valuation?\n`p^k` where `k` is the minimal valuation of the coefficients.\n\n> I would rather stick to the usual definition of content.\nThe \"usual\" definition doesn't care about the unit part, so answering `p^k` is a more useful and equally correct answer over `Qp`.",
    "created_at": "2015-01-23T16:45:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165299",
    "user": "jdemeyer"
}
```

Replying to [comment:17 saraedum]:
> What should be the answer if a coefficient has negative valuation?
`p^k` where `k` is the minimal valuation of the coefficients.

> I would rather stick to the usual definition of content.
The "usual" definition doesn't care about the unit part, so answering `p^k` is a more useful and equally correct answer over `Qp`.



---

archive/issue_comments_165300.json:
```json
{
    "body": "Replying to [comment:19 jdemeyer]:\n> I think it's certainly not a good idea that `content()` sometimes returns an element and sometimes returns an ideal. Ideally, there would be two methods:\n> - `content()` returning an ideal in the mathematical sense\n> - `content_gen()` returning an element, preferably a generator of the *fractional ideal* generated by the coefficients.\nWhat is the value of `content_gen()`? It is almost always equivalent to `content().gen()` unless in some cases where both should raise an error?",
    "created_at": "2015-01-23T16:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165300",
    "user": "saraedum"
}
```

Replying to [comment:19 jdemeyer]:
> I think it's certainly not a good idea that `content()` sometimes returns an element and sometimes returns an ideal. Ideally, there would be two methods:
> - `content()` returning an ideal in the mathematical sense
> - `content_gen()` returning an element, preferably a generator of the *fractional ideal* generated by the coefficients.
What is the value of `content_gen()`? It is almost always equivalent to `content().gen()` unless in some cases where both should raise an error?



---

archive/issue_comments_165301.json:
```json
{
    "body": "Replying to [comment:20 jdemeyer]:\n> Replying to [comment:17 saraedum]:\n> > What should be the answer if a coefficient has negative valuation?\n> `p^k` where `k` is the minimal valuation of the coefficients.\n> \n> > I would rather stick to the usual definition of content.\n> The \"usual\" definition doesn't care about the unit part, so answering `p^k` is a more useful and equally correct answer over `Qp`.\nOk. You are right. I'll change it.",
    "created_at": "2015-01-23T16:57:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165301",
    "user": "saraedum"
}
```

Replying to [comment:20 jdemeyer]:
> Replying to [comment:17 saraedum]:
> > What should be the answer if a coefficient has negative valuation?
> `p^k` where `k` is the minimal valuation of the coefficients.
> 
> > I would rather stick to the usual definition of content.
> The "usual" definition doesn't care about the unit part, so answering `p^k` is a more useful and equally correct answer over `Qp`.
Ok. You are right. I'll change it.



---

archive/issue_comments_165302.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-02-18T17:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165302",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_165303.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-02-18T17:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165303",
    "user": "saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_165304.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-02-19T10:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165304",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_165305.json:
```json
{
    "body": "See [comment:14]",
    "created_at": "2015-02-19T10:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165305",
    "user": "jdemeyer"
}
```

See [comment:14]



---

archive/issue_comments_165306.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-15T23:47:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165306",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_165307.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-17T02:43:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165307",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_165308.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-17T02:43:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165308",
    "user": "saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_165309.json:
```json
{
    "body": "Looks good to me.",
    "created_at": "2016-03-19T16:17:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165309",
    "user": "aly.deines"
}
```

Looks good to me.



---

archive/issue_comments_165310.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-03-19T16:17:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165310",
    "user": "aly.deines"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_165311.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-03-20T23:41:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165311",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_165312.json:
```json
{
    "body": "Changing keywords from \"sd59\" to \"sd59, sd71\".",
    "created_at": "2016-03-23T15:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165312",
    "user": "aly.deines"
}
```

Changing keywords from "sd59" to "sd59, sd71".



---

archive/issue_comments_165313.json:
```json
{
    "body": "Changing keywords from \"sd59, sd71\" to \"sd59, days71\".",
    "created_at": "2016-03-23T17:42:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13415#issuecomment-165313",
    "user": "aly.deines"
}
```

Changing keywords from "sd59, sd71" to "sd59, days71".
