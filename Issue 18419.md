# Issue 18419: Cache rational_diagonal_form()

Issue created by migration from https://trac.sagemath.org/ticket/18656

Original creator: jdemeyer

Original creation time: 2015-06-09 18:14:24

The diagonalized form is an important starting point for computing invariants, so it should certainly be cached.


---

Comment by jdemeyer created at 2015-06-09 18:39:44

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2015-06-09 18:39:44

New commits:


---

Comment by vdelecroix created at 2015-08-10 08:35:51

Since `T` is computed each time, why not returning it by default? If you use a `cached_method` you should minimize the number of arguments.

Also, make the output matrices immutable.


---

Comment by vdelecroix created at 2015-08-10 08:35:51

Changing status from needs_review to needs_work.


---

Comment by git created at 2015-08-30 10:44:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2015-08-30 10:46:07

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2015-08-30 10:46:07

Replying to [comment:3 vdelecroix]:
> Since `T` is computed each time, why not returning it by default? If you use a `cached_method` you should minimize the number of arguments.
> 
> Also, make the output matrices immutable.

Done, I made `rational_diagonal_form()` a front-end for a cached function `_rational_diagonal_form_and_transformation()` which returns the form and matrix.


---

Comment by vdelecroix created at 2015-09-02 22:10:36

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-09-04 23:52:16

Resolution: fixed
