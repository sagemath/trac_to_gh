# Issue 13516: Scale legendre_P to [a,b]

archive/issues_013516.json:
```json
{
    "body": "Assignee: burcin\n\nThe Legendre polynomials, returned by `legendre_P()`, of the first kind are orthogonal over [-1,1] and are normalized to have value +-1 at the endpoints.\n\nWhen solving least-squares problems, it's convenient to be able to construct them over an arbitrary interval [a,b].\n\nIssue created by migration from https://trac.sagemath.org/ticket/13720\n\n",
    "created_at": "2012-11-18T01:27:47Z",
    "labels": [
        "symbolics",
        "major",
        "enhancement"
    ],
    "title": "Scale legendre_P to [a,b]",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13516",
    "user": "mjo"
}
```
Assignee: burcin

The Legendre polynomials, returned by `legendre_P()`, of the first kind are orthogonal over [-1,1] and are normalized to have value +-1 at the endpoints.

When solving least-squares problems, it's convenient to be able to construct them over an arbitrary interval [a,b].

Issue created by migration from https://trac.sagemath.org/ticket/13720





---

archive/issue_comments_166815.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-11-19T04:04:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166815",
    "user": "mjo"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_166816.json:
```json
{
    "body": "* The code seems over-complicated to me.  Replacing the last few lines with \n\n```\n    R = PolynomialRing(ZZ, 't')\n    f = R([(-1)^(n - k)*binomial(n, k)*binomial(n + k, k) for k in range(n + 1)])\n    return f((x - a)/(b - a))\n```\n\n  is much simpler and is significantly faster.  Moreover, this makes expressions such as\n\n```\nlegendre_P(4, Zmod(5), 3, 6)\n```\n\n   evaluate correctly; at it stands the patch yields an\n\n```\nArithmeticError: 0^0 is undefined.\n```\n\n\n* I don't see why `a` and `b` need to be real numbers.  Actually they could be polynomial variables, giving:\n\n```\nsage: R.<r,s,t> = QQ[]\nsage: legendre_P(2, t, r, s)\n6*((r - t)/(r - s) - 1)*(r - t)/(r - s) + 1\n```\n\n\n* I don't see the need to use `bool` in doctests such as\n\n```\nbool(legendre_P(0, x, 0, 1) == p0)\n```\n\n\n* It's not clear to me why back-quotes are used in some of the error strings:\n\n```\n        raise TypeError('`n` must be a natural number')\n```\n\n   but\n\n```\n        raise ValueError('n must be nonnegative')\n```\n",
    "created_at": "2012-11-25T18:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166816",
    "user": "fwclarke"
}
```

* The code seems over-complicated to me.  Replacing the last few lines with 

```
    R = PolynomialRing(ZZ, 't')
    f = R([(-1)^(n - k)*binomial(n, k)*binomial(n + k, k) for k in range(n + 1)])
    return f((x - a)/(b - a))
```

  is much simpler and is significantly faster.  Moreover, this makes expressions such as

```
legendre_P(4, Zmod(5), 3, 6)
```

   evaluate correctly; at it stands the patch yields an

```
ArithmeticError: 0^0 is undefined.
```


* I don't see why `a` and `b` need to be real numbers.  Actually they could be polynomial variables, giving:

```
sage: R.<r,s,t> = QQ[]
sage: legendre_P(2, t, r, s)
6*((r - t)/(r - s) - 1)*(r - t)/(r - s) + 1
```


* I don't see the need to use `bool` in doctests such as

```
bool(legendre_P(0, x, 0, 1) == p0)
```


* It's not clear to me why back-quotes are used in some of the error strings:

```
        raise TypeError('`n` must be a natural number')
```

   but

```
        raise ValueError('n must be nonnegative')
```




---

archive/issue_comments_166817.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-11-25T18:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166817",
    "user": "fwclarke"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_166818.json:
```json
{
    "body": "Replying to [comment:2 fwclarke]:\n> * The code seems over-complicated to me.  Replacing the last few lines with \n> {{{\n>     R = PolynomialRing(ZZ, 't')\n>     f = R([(-1)^(n - k)*binomial(n, k)*binomial(n + k, k) for k in range(n + 1)])\n>     return f((x - a)/(b - a))\n> }}}\n>   is much simpler and is significantly faster.  Moreover, this makes expressions such as\n> {{{\n> legendre_P(4, Zmod(5), 3, 6)\n> }}}\n>    evaluate correctly; at it stands the patch yields an\n> {{{\n> ArithmeticError: 0^0 is undefined.\n> }}}\n> \n\n\n\nI tried this, but it's producing the wrong results. For example,\n\n\n```\nsage: legendre_P(1, x)\n-1/2*x - 5/2\n```\n\n\nThat said, there are two reasons it might seem over-complicated.\n\nThe first is that I was very careful not to break any existing doctests, even though they're doing some crazy things. I tried to comment each of these hurdles.\n\nThe second is that I wanted to be clear about what was happening. The `c(m)` and `g(m)` functions are as defined in A&S. So the final `return` statement is exactly the form given in the reference. The use of the affine transform `phi()` allows me to retain that form, and also provides some rationale for the result. I think this makes it (more) clear that we're composing the standard `P()` over [-1,1] with an affine transform, which will intuitively preserve orthogonality.\n\n\n\n> * I don't see why `a` and `b` need to be real numbers.  Actually they could be polynomial variables, giving:\n> {{{\n> sage: R.<r,s,t> = QQ[]\n> sage: legendre_P(2, t, r, s)\n> 6*((r - t)/(r - s) - 1)*(r - t)/(r - s) + 1\n> }}}\n> \n\n\n\nI'm happy to change this if it can be done without breaking the existing doctests. I'll wait to see what you say about the first thing.\n\n\n\n> * I don't see the need to use `bool` in doctests such as\n> {{{\n> bool(legendre_P(0, x, 0, 1) == p0)\n> }}}\n\n\n\nOften, the `==` operator will return a symbolic equality rather than True/False. This is true even in this simple case:\n\n\n```\nsage: p0 = 1\nsage: legendre_P(0, x, 0, 1) == p0\n1 == 1\n```\n\n\nIf you cast the symbolic equality to `bool`, you get,\n\n* True, if Sage can convince itself that equality holds.\n* False, if Sage can \"prove\" inequality.\n* False, if it's not sure.\n\nSo it should be safe to test for `True`.\n\n\n\n> * It's not clear to me why back-quotes are used in some of the error strings:\n> {{{\n>         raise TypeError('`n` must be a natural number')\n> }}}\n>    but\n> {{{\n>         raise ValueError('n must be nonnegative')\n> }}}\n\n\n\nI was just careless with that one, I'll fix it. I think backticks or single quotes are needed around 'a' and 'b', otherwise it reads weird. But 'n' at the beginning is fine without it.",
    "created_at": "2012-11-26T06:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166818",
    "user": "mjo"
}
```

Replying to [comment:2 fwclarke]:
> * The code seems over-complicated to me.  Replacing the last few lines with 
> {{{
>     R = PolynomialRing(ZZ, 't')
>     f = R([(-1)^(n - k)*binomial(n, k)*binomial(n + k, k) for k in range(n + 1)])
>     return f((x - a)/(b - a))
> }}}
>   is much simpler and is significantly faster.  Moreover, this makes expressions such as
> {{{
> legendre_P(4, Zmod(5), 3, 6)
> }}}
>    evaluate correctly; at it stands the patch yields an
> {{{
> ArithmeticError: 0^0 is undefined.
> }}}
> 



I tried this, but it's producing the wrong results. For example,


```
sage: legendre_P(1, x)
-1/2*x - 5/2
```


That said, there are two reasons it might seem over-complicated.

The first is that I was very careful not to break any existing doctests, even though they're doing some crazy things. I tried to comment each of these hurdles.

The second is that I wanted to be clear about what was happening. The `c(m)` and `g(m)` functions are as defined in A&S. So the final `return` statement is exactly the form given in the reference. The use of the affine transform `phi()` allows me to retain that form, and also provides some rationale for the result. I think this makes it (more) clear that we're composing the standard `P()` over [-1,1] with an affine transform, which will intuitively preserve orthogonality.



> * I don't see why `a` and `b` need to be real numbers.  Actually they could be polynomial variables, giving:
> {{{
> sage: R.<r,s,t> = QQ[]
> sage: legendre_P(2, t, r, s)
> 6*((r - t)/(r - s) - 1)*(r - t)/(r - s) + 1
> }}}
> 



I'm happy to change this if it can be done without breaking the existing doctests. I'll wait to see what you say about the first thing.



> * I don't see the need to use `bool` in doctests such as
> {{{
> bool(legendre_P(0, x, 0, 1) == p0)
> }}}



Often, the `==` operator will return a symbolic equality rather than True/False. This is true even in this simple case:


```
sage: p0 = 1
sage: legendre_P(0, x, 0, 1) == p0
1 == 1
```


If you cast the symbolic equality to `bool`, you get,

* True, if Sage can convince itself that equality holds.
* False, if Sage can "prove" inequality.
* False, if it's not sure.

So it should be safe to test for `True`.



> * It's not clear to me why back-quotes are used in some of the error strings:
> {{{
>         raise TypeError('`n` must be a natural number')
> }}}
>    but
> {{{
>         raise ValueError('n must be nonnegative')
> }}}



I was just careless with that one, I'll fix it. I think backticks or single quotes are needed around 'a' and 'b', otherwise it reads weird. But 'n' at the beginning is fine without it.



---

archive/issue_comments_166819.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-11-29T04:18:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166819",
    "user": "mjo"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_166820.json:
```json
{
    "body": "I've fixed the variable quoting in the new patch, and allowed the endpoints a,b to be symbolic. There's also a new test to make sure that the symbolic endpoints work as expected.\n\nI haven't heard back, so maybe you bought my reasoning for the affine transform =)\n\nThe `bool()` casts do have to stay, otherwise the tests just don't work.\n\nThanks for taking a look.",
    "created_at": "2012-11-29T04:18:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166820",
    "user": "mjo"
}
```

I've fixed the variable quoting in the new patch, and allowed the endpoints a,b to be symbolic. There's also a new test to make sure that the symbolic endpoints work as expected.

I haven't heard back, so maybe you bought my reasoning for the affine transform =)

The `bool()` casts do have to stay, otherwise the tests just don't work.

Thanks for taking a look.



---

archive/issue_comments_166821.json:
```json
{
    "body": "Replying to [comment:4 mjo]:\n> I've fixed the variable quoting in the new patch, and allowed the endpoints a,b to be symbolic. There's also a new test to make sure that the symbolic endpoints work as expected.\n\nWhy force them to be symbolic?  Better, surely, to allow anything that will evaluate and let coercion handle it. \n\n> I haven't heard back, so maybe you bought my reasoning for the affine transform =)\n\nNo, just busy with other things.  There is an affine transform in what I wrote, but it's a transform of the interval [a, b] onto [0, 1] rather than [-1, 1].  This is simpler, and the Legendre polynomials on the interval [0, 1] have a simple form.\n\n>  I tried this, but it's producing the wrong results. For example,\n> {{{\n> sage: legendre_P(1, x)\n> -1/2*x - 5/2\n> }}}\nThis is what results from using `^` rather than `**` in python.  I'm sorry my proposed code had only been testing in Sage, and therefore was being prepared.  This dealt with, my version does pass all the doctests, is faster when if the variable is a polynomial generator, and the error\n\n```\nsage: legendre_P(4, Zmod(5)(1), 3, 6)\n...\nArithmeticError: 0^0 is undefined.\n```\n\nis eliminated.  Apologies for mistyping this before.\n\n> The `bool()` casts do have to stay, otherwise the tests just don't work.\n\nAnother way of doing this is to introduce a polynomial variable.  Thus\n\n```\nsage: R.<x> = QQ[]\nsage: legendre_P(1, x) == x\nTrue\n```\n\nI know very little about the symbolic side of Sage, but I do find things like\n\n```\nsage: SR(1) == SR(1)\n1 == 1\n```\n\nvery strange, and confusing when compared with\n\n```\nsage: 1 == 1\nTrue\n```\n",
    "created_at": "2012-11-29T10:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166821",
    "user": "fwclarke"
}
```

Replying to [comment:4 mjo]:
> I've fixed the variable quoting in the new patch, and allowed the endpoints a,b to be symbolic. There's also a new test to make sure that the symbolic endpoints work as expected.

Why force them to be symbolic?  Better, surely, to allow anything that will evaluate and let coercion handle it. 

> I haven't heard back, so maybe you bought my reasoning for the affine transform =)

No, just busy with other things.  There is an affine transform in what I wrote, but it's a transform of the interval [a, b] onto [0, 1] rather than [-1, 1].  This is simpler, and the Legendre polynomials on the interval [0, 1] have a simple form.

>  I tried this, but it's producing the wrong results. For example,
> {{{
> sage: legendre_P(1, x)
> -1/2*x - 5/2
> }}}
This is what results from using `^` rather than `**` in python.  I'm sorry my proposed code had only been testing in Sage, and therefore was being prepared.  This dealt with, my version does pass all the doctests, is faster when if the variable is a polynomial generator, and the error

```
sage: legendre_P(4, Zmod(5)(1), 3, 6)
...
ArithmeticError: 0^0 is undefined.
```

is eliminated.  Apologies for mistyping this before.

> The `bool()` casts do have to stay, otherwise the tests just don't work.

Another way of doing this is to introduce a polynomial variable.  Thus

```
sage: R.<x> = QQ[]
sage: legendre_P(1, x) == x
True
```

I know very little about the symbolic side of Sage, but I do find things like

```
sage: SR(1) == SR(1)
1 == 1
```

very strange, and confusing when compared with

```
sage: 1 == 1
True
```




---

archive/issue_comments_166822.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-11-29T10:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166822",
    "user": "fwclarke"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_166823.json:
```json
{
    "body": "Replying to [comment:5 fwclarke]:\n> Why force them to be symbolic?  Better, surely, to allow anything that will evaluate and let coercion handle it. \n\n\n\nI removed the RR check, so you can actually pass in anything you want now. I'm not convinced this isn't a foot-gun, but it's still a clear improvement over what we have now so I'm happy with it.\n\n\n\n> This is what results from using `^` rather than `**` in python.\n\n\n\nAh, yes, I should have caught that, sorry.\n\n\n\n\n> I'm sorry my proposed code had only been testing in Sage, and therefore was being prepared.  This dealt with, my version does pass all the doctests, is faster when if the variable is a polynomial generator, and the error\n> {{{\n> sage: legendre_P(4, Zmod(5)(1), 3, 6)\n> ...\n> ArithmeticError: 0^0 is undefined.\n> }}}\n> is eliminated.  Apologies for mistyping this before.\n> \n\n\nI believe this is another bug, elsewhere. I've set out to fix it and am trapped in a rabbit hole at the moment, about four bugs from here. Once that's sorted out, I'll do some experiments.\n\n\n\n\n> > The `bool()` casts do have to stay, otherwise the tests just don't work.\n> \n> Another way of doing this is to introduce a polynomial variable.  Thus\n> {{{\n> sage: R.<x> = QQ[]\n> sage: legendre_P(1, x) == x\n> True\n> }}}\n> I know very little about the symbolic side of Sage, but I do find things like\n> {{{\n> sage: SR(1) == SR(1)\n> 1 == 1\n> }}}\n> very strange, and confusing when compared with\n> {{{\n> sage: 1 == 1\n> True\n> }}}\n\n\n\nYou'll get no argument from me there. I do prefer to test with the default symbol `x` though just because that's what most people will use.",
    "created_at": "2012-12-01T04:30:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166823",
    "user": "mjo"
}
```

Replying to [comment:5 fwclarke]:
> Why force them to be symbolic?  Better, surely, to allow anything that will evaluate and let coercion handle it. 



I removed the RR check, so you can actually pass in anything you want now. I'm not convinced this isn't a foot-gun, but it's still a clear improvement over what we have now so I'm happy with it.



> This is what results from using `^` rather than `**` in python.



Ah, yes, I should have caught that, sorry.




> I'm sorry my proposed code had only been testing in Sage, and therefore was being prepared.  This dealt with, my version does pass all the doctests, is faster when if the variable is a polynomial generator, and the error
> {{{
> sage: legendre_P(4, Zmod(5)(1), 3, 6)
> ...
> ArithmeticError: 0^0 is undefined.
> }}}
> is eliminated.  Apologies for mistyping this before.
> 


I believe this is another bug, elsewhere. I've set out to fix it and am trapped in a rabbit hole at the moment, about four bugs from here. Once that's sorted out, I'll do some experiments.




> > The `bool()` casts do have to stay, otherwise the tests just don't work.
> 
> Another way of doing this is to introduce a polynomial variable.  Thus
> {{{
> sage: R.<x> = QQ[]
> sage: legendre_P(1, x) == x
> True
> }}}
> I know very little about the symbolic side of Sage, but I do find things like
> {{{
> sage: SR(1) == SR(1)
> 1 == 1
> }}}
> very strange, and confusing when compared with
> {{{
> sage: 1 == 1
> True
> }}}



You'll get no argument from me there. I do prefer to test with the default symbol `x` though just because that's what most people will use.



---

archive/issue_comments_166824.json:
```json
{
    "body": "I think that people on this ticket may find #9706 interesting, though I imagine it has bitrotted somewhat and Burcin had a very long list of comments for it.",
    "created_at": "2013-04-21T03:29:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166824",
    "user": "kcrisman"
}
```

I think that people on this ticket may find #9706 interesting, though I imagine it has bitrotted somewhat and Burcin had a very long list of comments for it.



---

archive/issue_comments_166825.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-04-23T15:54:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166825",
    "user": "mjo"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_166826.json:
```json
{
    "body": "Replying to [comment:7 kcrisman]:\n> I think that people on this ticket may find #9706 interesting, though I imagine it has bitrotted somewhat and Burcin had a very long list of comments for it.\n\nThat's too big to ever get merged... I would break out the functions into individual tickets where possible.\n\nAnyway, I was waiting here on #13786 which fixes the `ArithmeticError: 0^0 is undefined` mentioned above. Unfortunately, both implementations now fail due to some other error on `legendre_P(4, Zmod(5)(1), 3, 6)`, but what can you do.\n\nNow the only difference between my implementation and the one in comment 2 is speed: mine is slightly faster unscaled, and that one is slightly faster on a nonstandard interval. But both deltas are negligible, and I have an aesthetic preference for the algorithm that's described in the reference.\n\nThis still passes all the tests and is a big improvement over what we have so I'm going to put it up for review again.",
    "created_at": "2013-04-23T15:54:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166826",
    "user": "mjo"
}
```

Replying to [comment:7 kcrisman]:
> I think that people on this ticket may find #9706 interesting, though I imagine it has bitrotted somewhat and Burcin had a very long list of comments for it.

That's too big to ever get merged... I would break out the functions into individual tickets where possible.

Anyway, I was waiting here on #13786 which fixes the `ArithmeticError: 0^0 is undefined` mentioned above. Unfortunately, both implementations now fail due to some other error on `legendre_P(4, Zmod(5)(1), 3, 6)`, but what can you do.

Now the only difference between my implementation and the one in comment 2 is speed: mine is slightly faster unscaled, and that one is slightly faster on a nonstandard interval. But both deltas are negligible, and I have an aesthetic preference for the algorithm that's described in the reference.

This still passes all the tests and is a big improvement over what we have so I'm going to put it up for review again.



---

archive/issue_comments_166827.json:
```json
{
    "body": "Brief questions:\n* When special-casing `n=0`, you have \n\n```\nreturn 1\n```\n\n  Will this be a Python int?\n* What if `n` is a Python int?\n\n```\nWe can accept Python integers for ``x`` as well::\n```\n\n* How's speed?  I can imagine the sum thing getting slow.\n* Am I misreading this?  Should it be beta = 1?\n\n```\n# From Abramowitz & Stegun, (22.3.2) with alpha = beta = 0. \n```\n\n  Oh, I see.  [It's actually (22.3.1)](http://people.math.sfu.ca/~cbm/aands/page_775.htm) and maybe this should be in the code with a reference section.",
    "created_at": "2013-06-18T21:31:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166827",
    "user": "kcrisman"
}
```

Brief questions:
* When special-casing `n=0`, you have 

```
return 1
```

  Will this be a Python int?
* What if `n` is a Python int?

```
We can accept Python integers for ``x`` as well::
```

* How's speed?  I can imagine the sum thing getting slow.
* Am I misreading this?  Should it be beta = 1?

```
# From Abramowitz & Stegun, (22.3.2) with alpha = beta = 0. 
```

  Oh, I see.  [It's actually (22.3.1)](http://people.math.sfu.ca/~cbm/aands/page_775.htm) and maybe this should be in the code with a reference section.



---

archive/issue_comments_166828.json:
```json
{
    "body": "Attachment\n\nWhen n=0, I try to return unity from the same ring as the variable:\n\n\n```\nif n == 0:\n    # Easy base case, save time. Attempt to return a value in the\n    # same field/ring as x.\n    try:\n        return x.parent()(1)\n    except AttributeError:\n        # In case something without a parent was given for x.\n        return 1\n```\n\n\nThe exceptional case is just there as a failsafe, and it would probably give a python int. I guess ZZ(1) is better, so I've changed it.\n\nIf `n` is a python int, we're happy. Early in the function we check that `n` can be coerced into `ZZ`. Then later,\n\n\n```\n# Ensure that (2**n) is an element of ZZ. This is used later --\n# we can divide finite field elements by integers but we can't\n# multiply them by rationals at the moment.\nn = ZZ(n)\n```\n\n\n\nFor speed, the current implementation has,\n\n\n```\nsage: timeit('legendre_P(100,x)')\n5 loops, best of 3: 57.1 ms per loop\n```\n\n\nThe posted patch has,\n\n\n```\nsage: timeit('legendre_P(100,x)')\n5 loops, best of 3: 47.3 ms per loop\n```\n\n\nSo, even for the unscaled version it's an improvement. There's a slowdown for the scaled version, of course:\n\n\n```\nsage: timeit('legendre_P(100,x,-5,10)')\n5 loops, best of 3: 70.4 ms per loop\n```\n\n\nBut it's still very fast.\n\nYou're right about the reference, I must have typo'd it. It's fixed, and I've added a REFERENCES section to the docs.\n\nThe new patch is up, I forgot to check the box, so use the one with the \"2\" at the end.",
    "created_at": "2013-06-19T01:14:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166828",
    "user": "mjo"
}
```

Attachment

When n=0, I try to return unity from the same ring as the variable:


```
if n == 0:
    # Easy base case, save time. Attempt to return a value in the
    # same field/ring as x.
    try:
        return x.parent()(1)
    except AttributeError:
        # In case something without a parent was given for x.
        return 1
```


The exceptional case is just there as a failsafe, and it would probably give a python int. I guess ZZ(1) is better, so I've changed it.

If `n` is a python int, we're happy. Early in the function we check that `n` can be coerced into `ZZ`. Then later,


```
# Ensure that (2**n) is an element of ZZ. This is used later --
# we can divide finite field elements by integers but we can't
# multiply them by rationals at the moment.
n = ZZ(n)
```



For speed, the current implementation has,


```
sage: timeit('legendre_P(100,x)')
5 loops, best of 3: 57.1 ms per loop
```


The posted patch has,


```
sage: timeit('legendre_P(100,x)')
5 loops, best of 3: 47.3 ms per loop
```


So, even for the unscaled version it's an improvement. There's a slowdown for the scaled version, of course:


```
sage: timeit('legendre_P(100,x,-5,10)')
5 loops, best of 3: 70.4 ms per loop
```


But it's still very fast.

You're right about the reference, I must have typo'd it. It's fixed, and I've added a REFERENCES section to the docs.

The new patch is up, I forgot to check the box, so use the one with the "2" at the end.



---

archive/issue_comments_166829.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-06-20T00:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166829",
    "user": "kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_166830.json:
```json
{
    "body": "Thanks.  I'm glad I asked, because before\n\n```\nsage: legendre_P(0,float(1))\n1\nsage: type(_)\n<type 'int'>\n```\n\nbut now\n\n```\nsage: legendre_P(0,float(1))\n1\nsage: type(_)\n<type 'sage.rings.integer.Integer'>\n```\n\n\nWork:\n* So to my surprise, plotting these things works great.  It would be nice to add one or two examples.\n* I wouldn't ask for this on this ticket, but it probably should have one or two examples of the errors actually catching silly input.  I find it worthwhile to test those branches.\nIs that okay?  Otherwise I think this is nice.",
    "created_at": "2013-06-20T00:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166830",
    "user": "kcrisman"
}
```

Thanks.  I'm glad I asked, because before

```
sage: legendre_P(0,float(1))
1
sage: type(_)
<type 'int'>
```

but now

```
sage: legendre_P(0,float(1))
1
sage: type(_)
<type 'sage.rings.integer.Integer'>
```


Work:
* So to my surprise, plotting these things works great.  It would be nice to add one or two examples.
* I wouldn't ask for this on this ticket, but it probably should have one or two examples of the errors actually catching silly input.  I find it worthwhile to test those branches.
Is that okay?  Otherwise I think this is nice.



---

archive/issue_comments_166831.json:
```json
{
    "body": "Oh, I should ask the dumb question of whether this scaling is standard in terminology, or whether we need any other disclaimers.",
    "created_at": "2013-06-20T00:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166831",
    "user": "kcrisman"
}
```

Oh, I should ask the dumb question of whether this scaling is standard in terminology, or whether we need any other disclaimers.



---

archive/issue_comments_166832.json:
```json
{
    "body": "Ok, I added a plotting example, and three tests for nonsense input. They're at the end of their respective sections.\n\nWhat might not be standard terminology? \"Scaling\"? In any case I don't think I'm qualified to say, but it made sense to me at the time.",
    "created_at": "2013-06-24T01:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166832",
    "user": "mjo"
}
```

Ok, I added a plotting example, and three tests for nonsense input. They're at the end of their respective sections.

What might not be standard terminology? "Scaling"? In any case I don't think I'm qualified to say, but it made sense to me at the time.



---

archive/issue_comments_166833.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-06-24T01:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166833",
    "user": "mjo"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_166834.json:
```json
{
    "body": "Use tmp_filename() instead of SAGE_TMP",
    "created_at": "2013-06-24T01:58:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166834",
    "user": "mjo"
}
```

Use tmp_filename() instead of SAGE_TMP



---

archive/issue_comments_166835.json:
```json
{
    "body": "Attachment\n\nQuick update to use tmp_filename() per Jeroen's comment on #12852.",
    "created_at": "2013-06-24T02:00:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166835",
    "user": "mjo"
}
```

Attachment

Quick update to use tmp_filename() per Jeroen's comment on #12852.



---

archive/issue_comments_166836.json:
```json
{
    "body": "apply only sage-trac_13720.patch",
    "created_at": "2013-08-21T08:24:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166836",
    "user": "chapoton"
}
```

apply only sage-trac_13720.patch



---

archive/issue_comments_166837.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-11-01T10:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166837",
    "user": "fwclarke"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_166838.json:
```json
{
    "body": "Attachment\n\nI really don't understand why `a` and `b` get converted into symbolic expressions. \u00a0This has some very strange consequences, e.g.,\n\n```\nsage: legendre_P(3, 7, -1/2, 1/2).parent()\nSymbolic Ring\n```\n\nIt is my understanding that coercion should arrange that the parent of an expression is as close as possible to the parents of the constituant parts. \u00a0It is thus wrong to force (almost) everything into the Symbolic Ring.\n\nBut anyway, I'm afraid I still prefer my version of the code: (1) for its simplicity (having 3 local functions, two of them only used once, seems far too over-elaborate); (2) my code is significantly faster.\n\nIf you don't like that then something like\n\n```\n\u00a0 \u00a0 if a == -1 and b == 1:\n\u00a0 \u00a0 \u00a0 \u00a0 _init()\n\u00a0 \u00a0 \u00a0 \u00a0 return sage_eval(maxima.eval('legendre_p(%s,x)'%ZZ(n)), locals={'x':x})\n\u00a0 \u00a0 else:\n\u00a0 \u00a0 \u00a0 \u00a0 return legendre_P(n, (2*x - a - b)/(b - a), -1, 1)\n```\n\nwould be a very simple change to the existing code which avoids 'reinventing the wheel'. \u00a0This would also have the advantage that an almost identical change would provide scaled versions for the the Legendre functions `legendre_Q` of the second kind. \u00a0However the maxima code is very slow.\n\nIncidentally, in all cases there needs to be a check to see if `a == b`.",
    "created_at": "2013-11-01T10:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166838",
    "user": "fwclarke"
}
```

Attachment

I really don't understand why `a` and `b` get converted into symbolic expressions.  This has some very strange consequences, e.g.,

```
sage: legendre_P(3, 7, -1/2, 1/2).parent()
Symbolic Ring
```

It is my understanding that coercion should arrange that the parent of an expression is as close as possible to the parents of the constituant parts.  It is thus wrong to force (almost) everything into the Symbolic Ring.

But anyway, I'm afraid I still prefer my version of the code: (1) for its simplicity (having 3 local functions, two of them only used once, seems far too over-elaborate); (2) my code is significantly faster.

If you don't like that then something like

```
    if a == -1 and b == 1:
        _init()
        return sage_eval(maxima.eval('legendre_p(%s,x)'%ZZ(n)), locals={'x':x})
    else:
        return legendre_P(n, (2*x - a - b)/(b - a), -1, 1)
```

would be a very simple change to the existing code which avoids 'reinventing the wheel'.  This would also have the advantage that an almost identical change would provide scaled versions for the the Legendre functions `legendre_Q` of the second kind.  However the maxima code is very slow.

Incidentally, in all cases there needs to be a check to see if `a == b`.



---

archive/issue_comments_166839.json:
```json
{
    "body": "Replying to [comment:18 fwclarke]:\n> I really don't understand why `a` and `b` get converted into symbolic expressions. \u00a0This has some very strange consequences, e.g.,\n> {{{\n> sage: legendre_P(3, 7, -1/2, 1/2).parent()\n> Symbolic Ring\n> }}}\n> It is my understanding that coercion should arrange that the parent of an expression is as close as possible to the parents of the constituant parts. \u00a0It is thus wrong to force (almost) everything into the Symbolic Ring.\n\nI had a comment in the code about this, but I've forgotten the details. In any case -- whatever the issue was -- it seems to be fixed. I removed the manual coercions of n,a,b and all of the tests still pass.\n\nSo this is fixed:\n\n\n```\nsage: legendre_P(3, 7, -1/2, 1/2).parent()\nRational Field\n```\n\n\n\n> Incidentally, in all cases there needs to be a check to see if `a == b`. \u00a0\n\nThis will throw a divide-by-zero. What's the alternative?",
    "created_at": "2013-12-11T17:17:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166839",
    "user": "mjo"
}
```

Replying to [comment:18 fwclarke]:
> I really don't understand why `a` and `b` get converted into symbolic expressions.  This has some very strange consequences, e.g.,
> {{{
> sage: legendre_P(3, 7, -1/2, 1/2).parent()
> Symbolic Ring
> }}}
> It is my understanding that coercion should arrange that the parent of an expression is as close as possible to the parents of the constituant parts.  It is thus wrong to force (almost) everything into the Symbolic Ring.

I had a comment in the code about this, but I've forgotten the details. In any case -- whatever the issue was -- it seems to be fixed. I removed the manual coercions of n,a,b and all of the tests still pass.

So this is fixed:


```
sage: legendre_P(3, 7, -1/2, 1/2).parent()
Rational Field
```



> Incidentally, in all cases there needs to be a check to see if `a == b`.  

This will throw a divide-by-zero. What's the alternative?



---

archive/issue_comments_166840.json:
```json
{
    "body": "> This will throw a divide-by-zero. What's the alternative? \n\nNevermind, stupid question =)",
    "created_at": "2013-12-11T17:22:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166840",
    "user": "mjo"
}
```

> This will throw a divide-by-zero. What's the alternative? 

Nevermind, stupid question =)



---

archive/issue_comments_166841.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-12-11T17:34:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166841",
    "user": "mjo"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_166842.json:
```json
{
    "body": "This should address the `a==b` issue and avoid the coercions.\n----\nNew commits:",
    "created_at": "2013-12-11T17:34:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166842",
    "user": "mjo"
}
```

This should address the `a==b` issue and avoid the coercions.
----
New commits:



---

archive/issue_comments_166843.json:
```json
{
    "body": "Adding an author, as I merged the reviewer patch.",
    "created_at": "2013-12-11T17:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166843",
    "user": "mjo"
}
```

Adding an author, as I merged the reviewer patch.



---

archive/issue_comments_166844.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-04-09T20:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166844",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_166845.json:
```json
{
    "body": "This needs to be rebased.",
    "created_at": "2014-04-09T20:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166845",
    "user": "chapoton"
}
```

This needs to be rebased.



---

archive/issue_comments_166846.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2014-04-23T04:51:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166846",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_166847.json:
```json
{
    "body": "I had to change the `_init()` doctest to use the laguerre polynomials instead, since the implementation of `legendre_P()` no longer uses maxima.",
    "created_at": "2014-04-23T04:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166847",
    "user": "mjo"
}
```

I had to change the `_init()` doctest to use the laguerre polynomials instead, since the implementation of `legendre_P()` no longer uses maxima.



---

archive/issue_comments_166848.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-04-23T04:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166848",
    "user": "mjo"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_166849.json:
```json
{
    "body": "I'm not sure if they're related, but the Maxima\n\n```\nassoc_legendre_p[v,u] (z)      Legendre function of degree v and order u \nassoc_legendre_q[v,u] (z)      Legendre function, 2nd kind\n```\n\nfrom [the symbolic wiki on Trac](http://trac.sagemath.org/wiki/symbolics/functions) could be relevant here.  If so, we should have conversions - if not, sorry for the noise.",
    "created_at": "2014-04-23T14:27:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166849",
    "user": "kcrisman"
}
```

I'm not sure if they're related, but the Maxima

```
assoc_legendre_p[v,u] (z)      Legendre function of degree v and order u 
assoc_legendre_q[v,u] (z)      Legendre function, 2nd kind
```

from [the symbolic wiki on Trac](http://trac.sagemath.org/wiki/symbolics/functions) could be relevant here.  If so, we should have conversions - if not, sorry for the noise.



---

archive/issue_comments_166850.json:
```json
{
    "body": "Replying to [comment:27 kcrisman]:\n> I'm not sure if they're related, ...\n\nThose two functions are different than our `legendre_{P,Q}`. Maxima has matching `legendre_p(n,x)` and `legendre_q(n,x)` which we're currently using for our implementations.\n\nI updated the note on the wiki page.",
    "created_at": "2014-04-23T14:40:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166850",
    "user": "mjo"
}
```

Replying to [comment:27 kcrisman]:
> I'm not sure if they're related, ...

Those two functions are different than our `legendre_{P,Q}`. Maxima has matching `legendre_p(n,x)` and `legendre_q(n,x)` which we're currently using for our implementations.

I updated the note on the wiki page.



---

archive/issue_comments_166851.json:
```json
{
    "body": "> > I'm not sure if they're related, ...\n> \n> Those two functions are different than our `legendre_{P,Q}`. Maxima has matching `legendre_p(n,x)` and `legendre_q(n,x)` which we're currently using for our implementations.\n> \n> I updated the note on the wiki page.\nThanks, and I updated based on that update, very helpful.",
    "created_at": "2014-04-23T15:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166851",
    "user": "kcrisman"
}
```

> > I'm not sure if they're related, ...
> 
> Those two functions are different than our `legendre_{P,Q}`. Maxima has matching `legendre_p(n,x)` and `legendre_q(n,x)` which we're currently using for our implementations.
> 
> I updated the note on the wiki page.
Thanks, and I updated based on that update, very helpful.



---

archive/issue_comments_166852.json:
```json
{
    "body": "patchbot:\n\n```\nsage -t --long src/sage/functions/orthogonal_polys.py  # 33 doctests failed\n```\n",
    "created_at": "2014-05-09T09:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166852",
    "user": "rws"
}
```

patchbot:

```
sage -t --long src/sage/functions/orthogonal_polys.py  # 33 doctests failed
```




---

archive/issue_comments_166853.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-05-09T09:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166853",
    "user": "rws"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_166854.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-05-09T20:00:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166854",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_166855.json:
```json
{
    "body": "I have corrected the problem (and also make a little cleanup). Back to needs review.\n----\nNew commits:",
    "created_at": "2014-05-09T20:00:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166855",
    "user": "chapoton"
}
```

I have corrected the problem (and also make a little cleanup). Back to needs review.
----
New commits:



---

archive/issue_comments_166856.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-09T21:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166856",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_166857.json:
```json
{
    "body": "Thanks for cleaning that up, I had forgotten about it.",
    "created_at": "2014-12-09T22:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166857",
    "user": "mjo"
}
```

Thanks for cleaning that up, I had forgotten about it.



---

archive/issue_comments_166858.json:
```json
{
    "body": "Conflicts with #16813. We might want to merge efforts.",
    "created_at": "2015-03-11T17:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166858",
    "user": "rws"
}
```

Conflicts with #16813. We might want to merge efforts.



---

archive/issue_comments_166859.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-10-11T20:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166859",
    "user": "kdilks"
}
```

New commits:



---

archive/issue_comments_166860.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-10-12T05:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166860",
    "user": "rws"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_166861.json:
```json
{
    "body": "You introduced merge conflict markers in your branch. Better always eyeball your diff before committing.",
    "created_at": "2015-10-12T05:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166861",
    "user": "rws"
}
```

You introduced merge conflict markers in your branch. Better always eyeball your diff before committing.



---

archive/issue_comments_166862.json:
```json
{
    "body": "Yeesh, yeah, thought it was just the one thing, but a lot more needs to be cleaned up. I'll take care of that tomorrow.",
    "created_at": "2015-10-12T06:00:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166862",
    "user": "kdilks"
}
```

Yeesh, yeah, thought it was just the one thing, but a lot more needs to be cleaned up. I'll take care of that tomorrow.



---

archive/issue_comments_166863.json:
```json
{
    "body": "I'll just change it back and let Fr\u00e9d\u00e9ric deal with rebasing.",
    "created_at": "2015-10-12T15:30:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166863",
    "user": "kdilks"
}
```

I'll just change it back and let Frédéric deal with rebasing.



---

archive/issue_comments_166864.json:
```json
{
    "body": "Let's just kill this. I'm not going to rewrite the whole function from scratch, as would be necessary at this point.",
    "created_at": "2021-02-23T02:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166864",
    "user": "mjo"
}
```

Let's just kill this. I'm not going to rewrite the whole function from scratch, as would be necessary at this point.



---

archive/issue_comments_166865.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2021-02-23T02:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166865",
    "user": "mjo"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_166866.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-02-23T03:34:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166866",
    "user": "kcrisman"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_166867.json:
```json
{
    "body": "Can't someone else start from scratch, though?  It seems like a worthwhile ticket to have open.",
    "created_at": "2021-02-23T03:34:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166867",
    "user": "kcrisman"
}
```

Can't someone else start from scratch, though?  It seems like a worthwhile ticket to have open.



---

archive/issue_comments_166868.json:
```json
{
    "body": "Replying to [comment:45 kcrisman]:\n> Can't someone else start from scratch, though?  It seems like a worthwhile ticket to have open.\n\nIt would be tricky since `legendre_P` is now implemented as a `BuiltinFunction`. You would need a different symbolic function for each interval `[a,b]` because, for example, its symbolic derivative changes when the interval does. But it's probably doable somehow.\n\nI was the original reporter and also the author. If I remember correctly, I needed it to simplify  some finite element example problem, and these days I have no need for it. But naturally I wouldn't object to someone else making an attempt.",
    "created_at": "2021-02-23T03:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13516#issuecomment-166868",
    "user": "mjo"
}
```

Replying to [comment:45 kcrisman]:
> Can't someone else start from scratch, though?  It seems like a worthwhile ticket to have open.

It would be tricky since `legendre_P` is now implemented as a `BuiltinFunction`. You would need a different symbolic function for each interval `[a,b]` because, for example, its symbolic derivative changes when the interval does. But it's probably doable somehow.

I was the original reporter and also the author. If I remember correctly, I needed it to simplify  some finite element example problem, and these days I have no need for it. But naturally I wouldn't object to someone else making an attempt.
