# Issue 24361: Get rid of SPKG types like "script" and "pip"

Issue created by migration from Trac.

Original creator: embray

Original creation time: 2018-01-26 16:34:13

CC:  dimpase

As mentioned in #24586#comment:4 and in some other past discussions, we're committing a category error with the "type" of SPKGs.

On one hand "type" is used to indicate when a package should be installed, depending on how reliable it is.  "standard" is basically always installed. "optional" is installed on request, or depending on the value of some flag (e.g. python 2 vs python 3, though I'm skeptical of this usage), and "experimental" is like "optional" but very much "use at your own risk".

On the other hand "script" and "pip" are sort of like "optional", but really the indicate _how_ the package is to be installed, not if/when.  We should use some other means of indicating this (or do away with them entirely).  For the most part the only thing that distinguishes "script" and "pip" is that Sage does directly handle extracting and building from a source tarball.  In the case of "pip" there isn't even an spkg-install.  We could probably think of other ways of indicating these cases without overloading "type" too much.


---

Comment by tmonteil created at 2018-01-26 19:17:11

I always hated the `type` word, because it is too imprecise, i guess what you are meaning for the first hand is called `priority` in some distros. So i am +1.

However, i remember to have suggested such a name change once, and got negative answer, i do not remember the argument though, unfortunately i could not find a reference (too many answers when i type "type" in the search box).

By the way, one could also imagine that checksums, version, dependencies, priority, description, license, upstream contact, could all belong to a single well-formatted (e.g. yaml) file.


---

Comment by embray created at 2018-01-30 17:29:26

Replying to [comment:1 tmonteil]:
> I always hated the `type` word, because it is too imprecise, i guess what you are meaning for the first hand is called `priority` in some distros. So i am +1.
> 
> However, i remember to have suggested such a name change once, and got negative answer, i do not remember the argument though, unfortunately i could not find a reference (too many answers when i type "type" in the search box).

Hmm, I agree. If I had to guess it's just because renaming it would be a big patch bomb, but it's not the worst thing in the world especially if it's a trivial rename.

> By the way, one could also imagine that checksums, version, dependencies, priority, description, license, upstream contact, could all belong to a single well-formatted (e.g. yaml) file.

I agree--I've been wanting to do this a long time. Right now the advantage is the simplicity of parsing by basic shell tools, but I think with some of the other build system updates I've been _trying_ to make this becomes less important.


---

Comment by mkoeppe created at 2020-04-18 06:38:53

Done in #29287. Should be closed.


---

Comment by mkoeppe created at 2020-04-18 06:38:53

Changing status from new to needs_review.


---

Comment by chapoton created at 2020-06-28 19:12:30

Resolution: duplicate
