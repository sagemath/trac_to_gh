# Issue 11385: Machine-readable timeit() output

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2011-06-30 14:37:01

Assignee: tbd

This patch implements an optional `seconds=True` keyword argument to return the number of seconds as a floating-point number instead of printing something on the screen:

```
sage: t = timeit("print 'Hi'", seconds=True)
sage: t
6.7710876464843747e-07
```

This makes it much easier to make plots for timing information.


---

Comment by vbraun created at 2011-06-30 14:38:30

Initial patch


---

Attachment

Also, documentation of `sage.misc.sage_timeit` is cleaned up and added to reference manual.


---

Comment by vbraun created at 2011-06-30 14:40:00

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2011-06-30 16:26:19

Looks good overall.

A few comments:

 - line 42 in sage_timeit.py: "blah"?

 - line 99: "evaluate" should be capitalized.

 - should sage_timeit_class.pyx be in the reference manual?

 - in sage_timeit_class.pyx, do you understand the parenthetical remark in "The preparser is on by default (if it is on)"?  Do you have ideas about how to clarify it?

I'm attaching a referee patch to address the first three of these.


---

Comment by jhpalmieri created at 2011-06-30 16:26:45

apply on top of other patch


---

Attachment

I thought about adding `sage_timeit_class.pyx` to the manual but decided against it. Its just some Cython nuts and bolts for the Python `timeit` command. But then I don't have a strong opinion on it.

As for the "(if it is on)", I think it refers to the possibility to turn the preparser off in the Sage session via `preparser(False)`.


---

Comment by jhpalmieri created at 2011-07-01 18:06:57

The advantage of adding `sage_timeit_class.pyx` to the manual is that its focus is to document the timeit command.  You can extract some of the same information from the page for `sage_timeit.py`, but I think it's a good idea to include both pages.

I'm happy with the combination of the two patches.  How about you?


---

Comment by vbraun created at 2011-07-01 18:27:38

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2011-07-01 18:27:38

I'm happy with them, too. I take it you mean "positive review" by that :-)


---

Comment by kcrisman created at 2011-07-02 02:21:09

Hey, this is a nice ticket.  

I don't want to hold it up, but I am wondering whether you think it would be worth having a new ticket to include an example of what you mean by "This makes it much easier to make plots for timing information."?    If this is now in the reference manual, then having a common use case - perhaps even toward the top of the module, or in `timeit?`, could be useful.

Anyway, just a thought if you have an easy `# random` example, not here, of course.


---

Comment by jdemeyer created at 2011-07-28 10:24:21

Resolution: fixed
