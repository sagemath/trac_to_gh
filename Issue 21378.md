# Issue 21378: Implementation of Littlewood-Richardson tableaux

archive/issues_021378.json:
```json
{
    "body": "CC:  mariamonks j.levinson @tscrim\n\nThis patch will implement a new class for Littlewood-Richardson tableaux.\n\nIssue created by migration from https://trac.sagemath.org/ticket/21615\n\n",
    "created_at": "2016-09-30T16:46:36Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Implementation of Littlewood-Richardson tableaux",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21378",
    "user": "https://github.com/anneschilling"
}
```
CC:  mariamonks j.levinson @tscrim

This patch will implement a new class for Littlewood-Richardson tableaux.

Issue created by migration from https://trac.sagemath.org/ticket/21615





---

archive/issue_comments_296500.json:
```json
{
    "body": "This is a first implementation of LR tableaux. Things to improve:\n\n- allow for skew LR tableaux\n\n- improve the iterator (it is currently a dumb iterator selecting semistandard tableaux that are LR with respect to a given sequence of weights)\n----\nNew commits:",
    "created_at": "2016-10-06T04:47:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296500",
    "user": "https://github.com/anneschilling"
}
```

This is a first implementation of LR tableaux. Things to improve:

- allow for skew LR tableaux

- improve the iterator (it is currently a dumb iterator selecting semistandard tableaux that are LR with respect to a given sequence of weights)
----
New commits:



---

archive/issue_comments_296501.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-10-06T04:47:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296501",
    "user": "https://github.com/anneschilling"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_296502.json:
```json
{
    "body": "Hey Maria and Anne,\n\nI've taken a look over this and there are a few polishing things that need to be done.\n\n- You should have documentation for each of the classes. This is important both for locality of documentation and so `LittlewoodRichardsonTableau?` does not show the `__init__` documentation. You can just put the `INPUT:` block at the class level doc as well.\n- For error messages, they are typically not considered complete sentences, and should not start with a capital letter or end with punctuation.\n- In the documentation, double backticks is code formatting, single is latex. So you should change, e.g., ``self`` to ```self```.\n- For inputs, we are trying to standardize them to the form\n  {{{\n- ``arg`` -- (optional) some explanation\n  }}}\n  (note, also no punctuation).\n\nIt also seems like what you want LR tableaux to inherit from is `SemistandardTableaux_shape_weight`. This way you can just use the base class iterator instead of creating a new parent. Actually, better yet, you could just call `for t in symmetrica.kostka_tab(self.shape, self.weight):`. As of right now, your iterator does not create instances of `LittlewoodRichardsonTableau`:\n\n```\nsage: from sage.combinat.lr_tableau import LittlewoodRichardsonTableaux\nsage: LR = LittlewoodRichardsonTableaux([3,2,1],[[2,1],[2,1]])\nsage: LR[0]\n[[1, 1, 3], [2, 3], [4]]\nsage: type(_)\n<class 'sage.combinat.tableau.SemistandardTableaux_shape_weight_with_category.element_class'>\n```\n",
    "created_at": "2016-10-06T14:15:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296502",
    "user": "https://github.com/tscrim"
}
```

Hey Maria and Anne,

I've taken a look over this and there are a few polishing things that need to be done.

- You should have documentation for each of the classes. This is important both for locality of documentation and so `LittlewoodRichardsonTableau?` does not show the `__init__` documentation. You can just put the `INPUT:` block at the class level doc as well.
- For error messages, they are typically not considered complete sentences, and should not start with a capital letter or end with punctuation.
- In the documentation, double backticks is code formatting, single is latex. So you should change, e.g., ``self`` to ```self```.
- For inputs, we are trying to standardize them to the form
  {{{
- ``arg`` -- (optional) some explanation
  }}}
  (note, also no punctuation).

It also seems like what you want LR tableaux to inherit from is `SemistandardTableaux_shape_weight`. This way you can just use the base class iterator instead of creating a new parent. Actually, better yet, you could just call `for t in symmetrica.kostka_tab(self.shape, self.weight):`. As of right now, your iterator does not create instances of `LittlewoodRichardsonTableau`:

```
sage: from sage.combinat.lr_tableau import LittlewoodRichardsonTableaux
sage: LR = LittlewoodRichardsonTableaux([3,2,1],[[2,1],[2,1]])
sage: LR[0]
[[1, 1, 3], [2, 3], [4]]
sage: type(_)
<class 'sage.combinat.tableau.SemistandardTableaux_shape_weight_with_category.element_class'>
```




---

archive/issue_comments_296503.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-10-06T14:15:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296503",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_296504.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-07T04:49:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296504",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_296505.json:
```json
{
    "body": "Hi Travis,\n\nThanks for your comments. I fixed most of the issues you mention.\n\n> It also seems like what you want LR tableaux to inherit from is `SemistandardTableaux_shape_weight`. This way you can just use the base class iterator instead of creating a new parent. Actually, better yet, you could just call `for t in symmetrica.kostka_tab(self.shape, self.weight):`. \n\nThis suggestion does not seem to work. We are anyway planning to implement a smarter iterator, so it is probably not worth it to call symmetrica.\n\nAnne",
    "created_at": "2016-10-07T04:51:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296505",
    "user": "https://github.com/anneschilling"
}
```

Hi Travis,

Thanks for your comments. I fixed most of the issues you mention.

> It also seems like what you want LR tableaux to inherit from is `SemistandardTableaux_shape_weight`. This way you can just use the base class iterator instead of creating a new parent. Actually, better yet, you could just call `for t in symmetrica.kostka_tab(self.shape, self.weight):`. 

This suggestion does not seem to work. We are anyway planning to implement a smarter iterator, so it is probably not worth it to call symmetrica.

Anne



---

archive/issue_comments_296506.json:
```json
{
    "body": "I reworked things around a bit so that the iterator doesn't create intermediate instances of `SemistandardTableau`. I also added a `__contains__` method and subsequently reworked the `check` to avoid duplication. I also did a few other doc and little things, including lazily importing the LR tableaux into the global namespace. Let me know if you want to do the iterator on this ticket or on a followup.\n----\nNew commits:",
    "created_at": "2016-10-15T22:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296506",
    "user": "https://github.com/tscrim"
}
```

I reworked things around a bit so that the iterator doesn't create intermediate instances of `SemistandardTableau`. I also added a `__contains__` method and subsequently reworked the `check` to avoid duplication. I also did a few other doc and little things, including lazily importing the LR tableaux into the global namespace. Let me know if you want to do the iterator on this ticket or on a followup.
----
New commits:



---

archive/issue_comments_296507.json:
```json
{
    "body": "There seems to be a doctest failure now:\n\n```\nsage -t finite_word.py\n**********************************************************************\nFile \"finite_word.py\", line 606, in sage.combinat.words.finite_word.FiniteWord_class.is_yamanouchi\nFailed example:\n    w.is_yamanouchi(n=3)\nException raised:\n    Traceback (most recent call last):\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.words.finite_word.FiniteWord_class.is_yamanouchi[5]>\", line 1, in <module>\n        w.is_yamanouchi(n=Integer(3))\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/finite_word.py\", line 619, in is_yamanouchi\n        w = Word(self, alphabet = range(1,n+1))\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/word.py\", line 208, in Word\n        parent = Words(alphabet)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/words.py\", line 101, in Words\n        return FiniteOrInfiniteWords(alphabet)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/words.py\", line 1722, in __init__\n        AbstractLanguage.__init__(self, alphabet)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/words.py\", line 149, in __init__\n        alphabet = build_alphabet(alphabet)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/alphabet.py\", line 268, in build_alphabet\n        raise ValueError(\"unable to construct an alphabet from the given parameters\")\n    ValueError: unable to construct an alphabet from the given parameters\n**********************************************************************\n1 item had failures:\n   1 of  12 in sage.combinat.words.finite_word.FiniteWord_class.is_yamanouchi\n    [1270 tests, 1 failure, 3.31 s]\n```\n\nI do not recall that it was there before, but I could be mistaken!",
    "created_at": "2016-10-17T06:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296507",
    "user": "https://github.com/anneschilling"
}
```

There seems to be a doctest failure now:

```
sage -t finite_word.py
**********************************************************************
File "finite_word.py", line 606, in sage.combinat.words.finite_word.FiniteWord_class.is_yamanouchi
Failed example:
    w.is_yamanouchi(n=3)
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.words.finite_word.FiniteWord_class.is_yamanouchi[5]>", line 1, in <module>
        w.is_yamanouchi(n=Integer(3))
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/finite_word.py", line 619, in is_yamanouchi
        w = Word(self, alphabet = range(1,n+1))
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/word.py", line 208, in Word
        parent = Words(alphabet)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/words.py", line 101, in Words
        return FiniteOrInfiniteWords(alphabet)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/words.py", line 1722, in __init__
        AbstractLanguage.__init__(self, alphabet)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/words.py", line 149, in __init__
        alphabet = build_alphabet(alphabet)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/alphabet.py", line 268, in build_alphabet
        raise ValueError("unable to construct an alphabet from the given parameters")
    ValueError: unable to construct an alphabet from the given parameters
**********************************************************************
1 item had failures:
   1 of  12 in sage.combinat.words.finite_word.FiniteWord_class.is_yamanouchi
    [1270 tests, 1 failure, 3.31 s]
```

I do not recall that it was there before, but I could be mistaken!



---

archive/issue_comments_296508.json:
```json
{
    "body": "This comes from the fact that I used a new beta of sage, where words are now using Python3 style `range`. It is not a list anymore, so the simplest fix is to wrap it in a `list`.",
    "created_at": "2016-10-17T12:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296508",
    "user": "https://github.com/tscrim"
}
```

This comes from the fact that I used a new beta of sage, where words are now using Python3 style `range`. It is not a list anymore, so the simplest fix is to wrap it in a `list`.



---

archive/issue_comments_296509.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-17T14:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296509",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_296510.json:
```json
{
    "body": "I think this can go in now. We can reimplement the iterator later!",
    "created_at": "2016-10-19T23:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296510",
    "user": "https://github.com/anneschilling"
}
```

I think this can go in now. We can reimplement the iterator later!



---

archive/issue_comments_296511.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-10-19T23:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296511",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_296512.json:
```json
{
    "body": "Then if you're happy with my latest changes, then you can set a positive review.",
    "created_at": "2016-10-20T05:32:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296512",
    "user": "https://github.com/tscrim"
}
```

Then if you're happy with my latest changes, then you can set a positive review.



---

archive/issue_comments_296513.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-10-20T05:37:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296513",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_296514.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2016-10-24T04:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296514",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_296515.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2016-10-24T04:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296515",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_296516.json:
```json
{
    "body": "Hi all,\n\nI wrote an iterator, `LRtabs_multi`, that calls Anders Buch's fast lrcalc code (which can compute LR tableaux with specified skew shape). The tableaux we want can be found using a sequence of lrcalc calls.\n\nI didn't rewrite the current `__iter__` method because this new one is slightly more general (it can compute skew tableaux rather than straight shape tableaux).\n\n-Jake",
    "created_at": "2016-10-24T04:51:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296516",
    "user": "https://trac.sagemath.org/admin/accounts/users/j.levinson"
}
```

Hi all,

I wrote an iterator, `LRtabs_multi`, that calls Anders Buch's fast lrcalc code (which can compute LR tableaux with specified skew shape). The tableaux we want can be found using a sequence of lrcalc calls.

I didn't rewrite the current `__iter__` method because this new one is slightly more general (it can compute skew tableaux rather than straight shape tableaux).

-Jake



---

archive/issue_comments_296517.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-26T12:05:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296517",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_296518.json:
```json
{
    "body": "Hi Jake and all,\n\nThank you for your improvements. I rewrote the __iter__ method that uses lrskew and your method _tableauJoin (which I renamed _tableau_join). It seems shorter than what you had as it does not need standardization or destandardization. See what you think. It should be relatively easy to upgrade the whole class to allow for SkewTableaux as well. But perhaps we can leave that for another\nticket?\n\nBest,\n\nAnne",
    "created_at": "2016-10-26T12:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296518",
    "user": "https://github.com/anneschilling"
}
```

Hi Jake and all,

Thank you for your improvements. I rewrote the __iter__ method that uses lrskew and your method _tableauJoin (which I renamed _tableau_join). It seems shorter than what you had as it does not need standardization or destandardization. See what you think. It should be relatively easy to upgrade the whole class to allow for SkewTableaux as well. But perhaps we can leave that for another
ticket?

Best,

Anne



---

archive/issue_comments_296519.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-30T22:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296519",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_296520.json:
```json
{
    "body": "I made a few little more tweaks. If my changes look good, you can set it back to a positive review.",
    "created_at": "2016-10-30T22:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296520",
    "user": "https://github.com/tscrim"
}
```

I made a few little more tweaks. If my changes look good, you can set it back to a positive review.



---

archive/issue_comments_296521.json:
```json
{
    "body": "Thanks for the review!",
    "created_at": "2016-11-01T07:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296521",
    "user": "https://github.com/anneschilling"
}
```

Thanks for the review!



---

archive/issue_comments_296522.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-01T07:02:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296522",
    "user": "https://github.com/anneschilling"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_296523.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-11-07T18:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21378",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21378#issuecomment-296523",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
