# Issue 21378: Implementation of Littlewood-Richardson tableaux

Issue created by migration from https://trac.sagemath.org/ticket/21615

Original creator: aschilling

Original creation time: 2016-09-30 16:46:36

CC:  mariamonks j.levinson tscrim

This patch will implement a new class for Littlewood-Richardson tableaux.


---

Comment by aschilling created at 2016-10-06 04:47:57

This is a first implementation of LR tableaux. Things to improve:

- allow for skew LR tableaux

- improve the iterator (it is currently a dumb iterator selecting semistandard tableaux that are LR with respect to a given sequence of weights)
----
New commits:


---

Comment by aschilling created at 2016-10-06 04:47:57

Changing status from new to needs_review.


---

Comment by tscrim created at 2016-10-06 14:15:44

Hey Maria and Anne,

I've taken a look over this and there are a few polishing things that need to be done.

- You should have documentation for each of the classes. This is important both for locality of documentation and so `LittlewoodRichardsonTableau?` does not show the `__init__` documentation. You can just put the `INPUT:` block at the class level doc as well.
- For error messages, they are typically not considered complete sentences, and should not start with a capital letter or end with punctuation.
- In the documentation, double backticks is code formatting, single is latex. So you should change, e.g., ``self`` to ```self```.
- For inputs, we are trying to standardize them to the form
  {{{
- ``arg`` -- (optional) some explanation
  }}}
  (note, also no punctuation).

It also seems like what you want LR tableaux to inherit from is `SemistandardTableaux_shape_weight`. This way you can just use the base class iterator instead of creating a new parent. Actually, better yet, you could just call `for t in symmetrica.kostka_tab(self.shape, self.weight):`. As of right now, your iterator does not create instances of `LittlewoodRichardsonTableau`:

```
sage: from sage.combinat.lr_tableau import LittlewoodRichardsonTableaux
sage: LR = LittlewoodRichardsonTableaux([3,2,1],[[2,1],[2,1]])
sage: LR[0]
[[1, 1, 3], [2, 3], [4]]
sage: type(_)
<class 'sage.combinat.tableau.SemistandardTableaux_shape_weight_with_category.element_class'>
```



---

Comment by tscrim created at 2016-10-06 14:15:44

Changing status from needs_review to needs_work.


---

Comment by git created at 2016-10-07 04:49:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aschilling created at 2016-10-07 04:51:45

Hi Travis,

Thanks for your comments. I fixed most of the issues you mention.

> It also seems like what you want LR tableaux to inherit from is `SemistandardTableaux_shape_weight`. This way you can just use the base class iterator instead of creating a new parent. Actually, better yet, you could just call `for t in symmetrica.kostka_tab(self.shape, self.weight):`. 

This suggestion does not seem to work. We are anyway planning to implement a smarter iterator, so it is probably not worth it to call symmetrica.

Anne


---

Comment by tscrim created at 2016-10-15 22:23:21

I reworked things around a bit so that the iterator doesn't create intermediate instances of `SemistandardTableau`. I also added a `__contains__` method and subsequently reworked the `check` to avoid duplication. I also did a few other doc and little things, including lazily importing the LR tableaux into the global namespace. Let me know if you want to do the iterator on this ticket or on a followup.
----
New commits:


---

Comment by aschilling created at 2016-10-17 06:10:44

There seems to be a doctest failure now:

```
sage -t finite_word.py
**********************************************************************
File "finite_word.py", line 606, in sage.combinat.words.finite_word.FiniteWord_class.is_yamanouchi
Failed example:
    w.is_yamanouchi(n=3)
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.words.finite_word.FiniteWord_class.is_yamanouchi[5]>", line 1, in <module>
        w.is_yamanouchi(n=Integer(3))
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/finite_word.py", line 619, in is_yamanouchi
        w = Word(self, alphabet = range(1,n+1))
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/word.py", line 208, in Word
        parent = Words(alphabet)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/words.py", line 101, in Words
        return FiniteOrInfiniteWords(alphabet)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/words.py", line 1722, in __init__
        AbstractLanguage.__init__(self, alphabet)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/words.py", line 149, in __init__
        alphabet = build_alphabet(alphabet)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/words/alphabet.py", line 268, in build_alphabet
        raise ValueError("unable to construct an alphabet from the given parameters")
    ValueError: unable to construct an alphabet from the given parameters
**********************************************************************
1 item had failures:
   1 of  12 in sage.combinat.words.finite_word.FiniteWord_class.is_yamanouchi
    [1270 tests, 1 failure, 3.31 s]
```

I do not recall that it was there before, but I could be mistaken!


---

Comment by tscrim created at 2016-10-17 12:34:39

This comes from the fact that I used a new beta of sage, where words are now using Python3 style `range`. It is not a list anymore, so the simplest fix is to wrap it in a `list`.


---

Comment by git created at 2016-10-17 14:03:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aschilling created at 2016-10-19 23:20:48

I think this can go in now. We can reimplement the iterator later!


---

Comment by aschilling created at 2016-10-19 23:20:48

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2016-10-20 05:32:17

Then if you're happy with my latest changes, then you can set a positive review.


---

Comment by aschilling created at 2016-10-20 05:37:28

Changing status from needs_review to positive_review.


---

Comment by git created at 2016-10-24 04:41:48

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2016-10-24 04:41:48

Changing status from positive_review to needs_review.


---

Comment by j.levinson created at 2016-10-24 04:51:33

Hi all,

I wrote an iterator, `LRtabs_multi`, that calls Anders Buch's fast lrcalc code (which can compute LR tableaux with specified skew shape). The tableaux we want can be found using a sequence of lrcalc calls.

I didn't rewrite the current `__iter__` method because this new one is slightly more general (it can compute skew tableaux rather than straight shape tableaux).

-Jake


---

Comment by git created at 2016-10-26 12:05:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aschilling created at 2016-10-26 12:26:16

Hi Jake and all,

Thank you for your improvements. I rewrote the __iter__ method that uses lrskew and your method _tableauJoin (which I renamed _tableau_join). It seems shorter than what you had as it does not need standardization or destandardization. See what you think. It should be relatively easy to upgrade the whole class to allow for SkewTableaux as well. But perhaps we can leave that for another
ticket?

Best,

Anne


---

Comment by git created at 2016-10-30 22:53:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2016-10-30 22:56:18

I made a few little more tweaks. If my changes look good, you can set it back to a positive review.


---

Comment by aschilling created at 2016-11-01 07:02:01

Thanks for the review!


---

Comment by aschilling created at 2016-11-01 07:02:14

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-11-07 18:27:47

Resolution: fixed
