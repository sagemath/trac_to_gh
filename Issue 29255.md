# Issue 29255: Remove outdated boilerplate from spkg-install.in and spkg-check.in

Issue created by migration from https://trac.sagemath.org/ticket/29492

Original creator: mkoeppe

Original creation time: 2020-04-09 23:48:39

CC:  jhpalmieri embray

Replying to [comment:1 jhpalmieri]:
> Many `spkg-check.in` and `spkg-install.in` files contain
> {{{
> if [ -z "$SAGE_LOCAL" ]; then
>     echo >&2 "Error: SAGE_LOCAL undefined - exiting..."
>     echo >&2 "Maybe run 'sage -sh'?"
>     exit 1
> fi
> }}}
> Should these lines just be deleted?

Yes -- they are outdated

(from #29488)


---

Comment by git created at 2020-04-11 02:53:41

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jhpalmieri created at 2020-04-11 05:08:17

Let's try this.


---

Comment by jhpalmieri created at 2020-04-11 05:08:17

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-04-11 05:40:56

Looks good to me and merges cleanly on top of my development branch


---

Comment by mkoeppe created at 2020-04-11 17:14:18

tests ran at https://github.com/mkoeppe/sage/actions/runs/75739694


---

Comment by mkoeppe created at 2020-04-11 17:14:18

Changing status from needs_review to positive_review.


---

Comment by jhpalmieri created at 2020-04-11 17:18:55

Thank you. Note that there are some changes like this, in addition to removing the SAGE_LOCAL check:

```diff
 sdh_pip_install .
-
-if [ $? -ne 0 ]; then
-    exit 1
-fi
-
```

I did not carefully search for these, but if I saw them and was touching that file anyway, I cleaned it up. There are probably more instances of this, but the whole thing was enough of a patch bomb that I didn't want to make it worse.


---

Comment by mkoeppe created at 2020-04-11 17:45:00

Yes, I saw them in the diff and thought they were fine.


---

Comment by mkoeppe created at 2020-04-15 17:24:26

Follow up with similar clean-up: #29510


---

Comment by vbraun created at 2020-04-18 08:34:49

Resolution: fixed
