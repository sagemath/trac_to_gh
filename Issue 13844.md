# Issue 13844: Fix a bug in class_size for QuiverMutationType (in types F and G)

archive/issues_013844.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  gmoose05 stumpc5\n\nKeywords: cluster algebras, class_size, exceptional types\n\n\nJeroen ran \"pyflakes\" on the sage code, which detects certain kinds of problems (which can then be confirmed by testing).  \n\n\n```\nsage: X=QuiverMutationType('F',4,(2,1))\nsage: X.class_size()\n...\nNameError: global name 'twist' is not defined\n```\n\n\nSame issue for type G.  \n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/14048\n\n",
    "created_at": "2013-02-02T01:20:47Z",
    "labels": [
        "combinatorics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.7",
    "title": "Fix a bug in class_size for QuiverMutationType (in types F and G)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13844",
    "user": "hthomas"
}
```
Assignee: sage-combinat

CC:  gmoose05 stumpc5

Keywords: cluster algebras, class_size, exceptional types


Jeroen ran "pyflakes" on the sage code, which detects certain kinds of problems (which can then be confirmed by testing).  


```
sage: X=QuiverMutationType('F',4,(2,1))
sage: X.class_size()
...
NameError: global name 'twist' is not defined
```


Same issue for type G.  



Issue created by migration from https://trac.sagemath.org/ticket/14048





---

archive/issue_comments_172055.json:
```json
{
    "body": "Oh, also, turns out we were checking that twist be a tuple, and it is never a tuple, so this wasn't the only problem in the code!\n\nPatch coming soon.",
    "created_at": "2013-02-02T01:31:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13844#issuecomment-172055",
    "user": "hthomas"
}
```

Oh, also, turns out we were checking that twist be a tuple, and it is never a tuple, so this wasn't the only problem in the code!

Patch coming soon.



---

archive/issue_comments_172056.json:
```json
{
    "body": "Attachment [trac_14048-fix-cluster-class_size-bug-ht.patch](tarball://root/attachments/some-uuid/ticket14048/trac_14048-fix-cluster-class_size-bug-ht.patch) by hthomas created at 2013-02-02 01:56:47",
    "created_at": "2013-02-02T01:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13844#issuecomment-172056",
    "user": "hthomas"
}
```

Attachment [trac_14048-fix-cluster-class_size-bug-ht.patch](tarball://root/attachments/some-uuid/ticket14048/trac_14048-fix-cluster-class_size-bug-ht.patch) by hthomas created at 2013-02-02 01:56:47



---

archive/issue_comments_172057.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-02-02T01:58:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13844#issuecomment-172057",
    "user": "hthomas"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_172058.json:
```json
{
    "body": "It would also be fine with me if you want to fold this into one of the big cluster patches.",
    "created_at": "2013-02-02T04:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13844#issuecomment-172058",
    "user": "hthomas"
}
```

It would also be fine with me if you want to fold this into one of the big cluster patches.



---

archive/issue_comments_172059.json:
```json
{
    "body": "Thanks for catching this Jeroen and Hugh!\n\nJust to clarify, when you say \"this wasn't the only problem in the code\", does trac_14048-fix-cluster-class_size-bug-ht.patch appear to fix the issue that Jereon found or was there an additional issue that we had to deal with?\n\nAlso to update you: 10527 and 10538 are merged into 5.5 and 5.6.\n\n     Christian, Salvatore, and I are nearing completion of 13369 (perhaps by next week), and 13424 should be ready shortly after.\n\nIf the ticket really is just these couple lines, and I don't believe 13369 or 13424 alter quiver_mutation_type.py, we could double-check that this fix would be independent of our current work and then possibly give it a quick positive review.\n\nAlso, Christian and I will both be at ICERM Feb 11-15 so can discuss it there, if this ticket is still outstanding then.\n\nGregg",
    "created_at": "2013-02-02T05:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13844#issuecomment-172059",
    "user": "gmoose05"
}
```

Thanks for catching this Jeroen and Hugh!

Just to clarify, when you say "this wasn't the only problem in the code", does trac_14048-fix-cluster-class_size-bug-ht.patch appear to fix the issue that Jereon found or was there an additional issue that we had to deal with?

Also to update you: 10527 and 10538 are merged into 5.5 and 5.6.

     Christian, Salvatore, and I are nearing completion of 13369 (perhaps by next week), and 13424 should be ready shortly after.

If the ticket really is just these couple lines, and I don't believe 13369 or 13424 alter quiver_mutation_type.py, we could double-check that this fix would be independent of our current work and then possibly give it a quick positive review.

Also, Christian and I will both be at ICERM Feb 11-15 so can discuss it there, if this ticket is still outstanding then.

Gregg



---

archive/issue_comments_172060.json:
```json
{
    "body": "I fixed the issue Jeroen found and also the issue I found.  So this ticket is ready to go and, so far as I know, makes class_size work correctly.  \n\nIt sounds like the easiest thing might be if you can check it doesn't play badly with the new patches, and give it a green light.  \n\ncheers,\n\nHugh",
    "created_at": "2013-02-02T06:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13844#issuecomment-172060",
    "user": "hthomas"
}
```

I fixed the issue Jeroen found and also the issue I found.  So this ticket is ready to go and, so far as I know, makes class_size work correctly.  

It sounds like the easiest thing might be if you can check it doesn't play badly with the new patches, and give it a green light.  

cheers,

Hugh



---

archive/issue_comments_172061.json:
```json
{
    "body": "It commutes with #13369, it catches the bug, and is documented -- thanks Hugh!",
    "created_at": "2013-02-02T08:22:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13844#issuecomment-172061",
    "user": "stumpc5"
}
```

It commutes with #13369, it catches the bug, and is documented -- thanks Hugh!



---

archive/issue_comments_172062.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-02-02T08:22:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13844#issuecomment-172062",
    "user": "stumpc5"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_172063.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-02-05T08:21:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13844",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13844#issuecomment-172063",
    "user": "jdemeyer"
}
```

Resolution: fixed
