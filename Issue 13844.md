# Issue 13844: Fix a bug in class_size for QuiverMutationType (in types F and G)

Issue created by migration from Trac.

Original creator: hthomas

Original creation time: 2013-02-02 01:20:47

Assignee: sage-combinat

CC:  gmoose05 stumpc5

Keywords: cluster algebras, class_size, exceptional types


Jeroen ran "pyflakes" on the sage code, which detects certain kinds of problems (which can then be confirmed by testing).  


```
sage: X=QuiverMutationType('F',4,(2,1))
sage: X.class_size()
...
NameError: global name 'twist' is not defined
```


Same issue for type G.  




---

Comment by hthomas created at 2013-02-02 01:31:48

Oh, also, turns out we were checking that twist be a tuple, and it is never a tuple, so this wasn't the only problem in the code!

Patch coming soon.


---

Attachment


---

Comment by hthomas created at 2013-02-02 01:58:04

Changing status from new to needs_review.


---

Comment by hthomas created at 2013-02-02 04:50:08

It would also be fine with me if you want to fold this into one of the big cluster patches.


---

Comment by gmoose05 created at 2013-02-02 05:49:48

Thanks for catching this Jeroen and Hugh!

Just to clarify, when you say "this wasn't the only problem in the code", does trac_14048-fix-cluster-class_size-bug-ht.patch appear to fix the issue that Jereon found or was there an additional issue that we had to deal with?

Also to update you: 10527 and 10538 are merged into 5.5 and 5.6.

     Christian, Salvatore, and I are nearing completion of 13369 (perhaps by next week), and 13424 should be ready shortly after.

If the ticket really is just these couple lines, and I don't believe 13369 or 13424 alter quiver_mutation_type.py, we could double-check that this fix would be independent of our current work and then possibly give it a quick positive review.

Also, Christian and I will both be at ICERM Feb 11-15 so can discuss it there, if this ticket is still outstanding then.

Gregg


---

Comment by hthomas created at 2013-02-02 06:06:22

I fixed the issue Jeroen found and also the issue I found.  So this ticket is ready to go and, so far as I know, makes class_size work correctly.  

It sounds like the easiest thing might be if you can check it doesn't play badly with the new patches, and give it a green light.  

cheers,

Hugh


---

Comment by stumpc5 created at 2013-02-02 08:22:59

It commutes with #13369, it catches the bug, and is documented -- thanks Hugh!


---

Comment by stumpc5 created at 2013-02-02 08:22:59

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-02-05 08:21:51

Resolution: fixed
