# Issue 27815: Incorporating a function for Tautological Implication in the Logic Module

Issue created by migration from https://trac.sagemath.org/ticket/28052

Original creator: @Medha210699

Original creation time: 2019-06-25 11:56:39

Keywords: logic, symbolics, propositional formula

This ticket aims at implementing a boolean function which returns True if some formula, say f, tautologically implies another formula, say g.hat 
Refer to the below example for understanding how the function will work.

```

sage: f = propcalc.formula("a")
sage: g = propcalc.formula("a|b")
sage: f.TautologicallyImplies(g)
True
sage: g.TautologicallyImplies(f)
False

```



---

Comment by @Medha210699 created at 2019-06-25 12:02:55

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2019-06-25 19:13:01

A ticket should be set in needs review when it provides source code ready to be integrated into Sage.


---

Comment by vdelecroix created at 2019-06-25 19:13:01

Changing status from needs_review to needs_work.


---

Comment by @Medha210699 created at 2019-06-27 11:30:56

Set assignee to @Medha210699.


---

Comment by embray created at 2019-12-30 14:48:17

Ticket retargeted after milestone closed


---

Comment by @DaveWitteMorris created at 2020-03-11 05:49:21

Changing status from needs_work to needs_review.


---

Comment by @DaveWitteMorris created at 2020-03-11 05:49:21

I recommend closing this ticket as "invalid/wontfix", because the functionality is already available by using `sage.logic.propcalc.valid_consequence`.


```
sage: from sage.logic.propcalc import valid_consequence
sage: f = propcalc.formula("a")
sage: g = propcalc.formula("a|b")
sage: valid_consequence(g,f) # is g a tautological consequence of f ?
True
sage: valid_consequence(f,g) # is f a tautological consequence of g ?
False
```



---

Comment by @DaveWitteMorris created at 2020-03-11 05:49:21

Changing priority from major to minor.


---

Comment by tscrim created at 2020-03-13 00:19:56

Perhaps it would be good to add a method `valid_consequence` that redirects to this function to make it more discoverable?


---

Comment by @DaveWitteMorris created at 2020-03-13 01:20:18

Changing status from needs_review to needs_work.


---

Comment by @DaveWitteMorris created at 2020-03-13 01:20:18

Thanks, that seems like a good idea. I'll do it soon, but probably not today. Probably it makes the most sense to move the definition into a method, and then (for backward compatibility) define a stand-alone function that calls the method. Perhaps the stand-alone should be deprecated?


---

Comment by tscrim created at 2020-03-13 01:46:06

I don't use this, so I don't have an option. I think it is okay to have a method redirect to a function (or vice versa; they are equivalent in my mind up to putting the definition in the method to make it easier to see via `?` on the command-line). There might be some reason for having the actual computation done in a function (which could be in a separate file). Actually, the easiest thing to do would be to simply make the function into a (bounded) method of the appropriate class. I think you just need:

```python
def foo(x, y):
    return -y
class Bar:
    foo = foo
```


```
sage: b = Bar()
sage: b.foo(2)
-2
```

This would mean everything in the doc, etc. is properly linked without redundancy. This would be my recommendation.


---

Comment by @DaveWitteMorris created at 2020-03-19 03:48:02

Thanks for telling me about `foo = foo`. I was going to do something more complicated.
1. I defined a method of the class `BooleanFormula` by moving the code for `valid_consequence` from `propcalc.py` into `boolformula.py`.
2. I named the method `is_consequence` (and also defined a standalone function of this same name), to be consistent with the methods `is_satisfiable`, `is_contradiction`, etc., but retained `valid_consequence` as a deprecated function for backwards compatibility (in the file `propcalc.py`).
3. I refactored the code for the `is_consequence` method, added coverage of the case where there are no hypotheses, and added more doctests.
4. I made some other minor tweaks to `propcalc.py` and `boolformula.py`, such as changing "http" to "https".
5. I revised the description of this ticket. 
Should some of this be on a separate ticket?
----
New commits:


---

Comment by @DaveWitteMorris created at 2020-03-19 03:48:02

Changing status from needs_work to needs_review.


---

Comment by @DaveWitteMorris created at 2020-03-19 04:42:54

Merge conflict.


---

Comment by @DaveWitteMorris created at 2020-03-19 04:42:54

Changing status from needs_review to needs_work.


---

Comment by git created at 2020-03-19 05:25:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DaveWitteMorris created at 2020-03-19 05:27:52

Changing status from needs_work to needs_review.


---

Comment by @DaveWitteMorris created at 2020-03-19 05:27:52

Fixed the merge conflict with #28053 and merged 9.1b8. I hope the patchbots will be happy now.


---

Comment by tscrim created at 2020-03-19 07:28:30

Some little comments:


```diff
-if not(hypotheses):
+if not hypotheses:
```


Remove ``self`` as an `INPUT:`.

Beyond that, LGTM.


---

Comment by git created at 2020-03-19 17:56:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DaveWitteMorris created at 2020-03-19 18:00:12

Thanks for the corrections.


---

Comment by tscrim created at 2020-03-19 22:00:02

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2020-03-19 22:00:02

Thank you. LGTM.


---

Comment by vbraun created at 2020-03-25 22:48:27

Resolution: fixed
