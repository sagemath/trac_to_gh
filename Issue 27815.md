# Issue 27815: Incorporating a function for Tautological Implication in the Logic Module

archive/issues_027815.json:
```json
{
    "body": "Keywords: logic, symbolics, propositional formula\n\nThis ticket aims at implementing a boolean function which returns True if some formula, say f, tautologically implies another formula, say g.hat \nRefer to the below example for understanding how the function will work.\n\n```\n\nsage: f = propcalc.formula(\"a\")\nsage: g = propcalc.formula(\"a|b\")\nsage: f.TautologicallyImplies(g)\nTrue\nsage: g.TautologicallyImplies(f)\nFalse\n\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/28052\n\n",
    "created_at": "2019-06-25T11:56:39Z",
    "labels": [
        "symbolics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Incorporating a function for Tautological Implication in the Logic Module",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27815",
    "user": "@Medha210699"
}
```
Keywords: logic, symbolics, propositional formula

This ticket aims at implementing a boolean function which returns True if some formula, say f, tautologically implies another formula, say g.hat 
Refer to the below example for understanding how the function will work.

```

sage: f = propcalc.formula("a")
sage: g = propcalc.formula("a|b")
sage: f.TautologicallyImplies(g)
True
sage: g.TautologicallyImplies(f)
False

```


Issue created by migration from https://trac.sagemath.org/ticket/28052





---

archive/issue_comments_392855.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-06-25T12:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392855",
    "user": "@Medha210699"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_392856.json:
```json
{
    "body": "A ticket should be set in needs review when it provides source code ready to be integrated into Sage.",
    "created_at": "2019-06-25T19:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392856",
    "user": "vdelecroix"
}
```

A ticket should be set in needs review when it provides source code ready to be integrated into Sage.



---

archive/issue_comments_392857.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-06-25T19:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392857",
    "user": "vdelecroix"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_392858.json:
```json
{
    "body": "Set assignee to @Medha210699.",
    "created_at": "2019-06-27T11:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392858",
    "user": "@Medha210699"
}
```

Set assignee to @Medha210699.



---

archive/issue_comments_392859.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392859",
    "user": "embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_392860.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-11T05:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392860",
    "user": "@DaveWitteMorris"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_392861.json:
```json
{
    "body": "I recommend closing this ticket as \"invalid/wontfix\", because the functionality is already available by using `sage.logic.propcalc.valid_consequence`.\n\n\n```\nsage: from sage.logic.propcalc import valid_consequence\nsage: f = propcalc.formula(\"a\")\nsage: g = propcalc.formula(\"a|b\")\nsage: valid_consequence(g,f) # is g a tautological consequence of f ?\nTrue\nsage: valid_consequence(f,g) # is f a tautological consequence of g ?\nFalse\n```\n",
    "created_at": "2020-03-11T05:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392861",
    "user": "@DaveWitteMorris"
}
```

I recommend closing this ticket as "invalid/wontfix", because the functionality is already available by using `sage.logic.propcalc.valid_consequence`.


```
sage: from sage.logic.propcalc import valid_consequence
sage: f = propcalc.formula("a")
sage: g = propcalc.formula("a|b")
sage: valid_consequence(g,f) # is g a tautological consequence of f ?
True
sage: valid_consequence(f,g) # is f a tautological consequence of g ?
False
```




---

archive/issue_comments_392862.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2020-03-11T05:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392862",
    "user": "@DaveWitteMorris"
}
```

Changing priority from major to minor.



---

archive/issue_comments_392863.json:
```json
{
    "body": "Perhaps it would be good to add a method `valid_consequence` that redirects to this function to make it more discoverable?",
    "created_at": "2020-03-13T00:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392863",
    "user": "tscrim"
}
```

Perhaps it would be good to add a method `valid_consequence` that redirects to this function to make it more discoverable?



---

archive/issue_comments_392864.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-03-13T01:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392864",
    "user": "@DaveWitteMorris"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_392865.json:
```json
{
    "body": "Thanks, that seems like a good idea. I'll do it soon, but probably not today. Probably it makes the most sense to move the definition into a method, and then (for backward compatibility) define a stand-alone function that calls the method. Perhaps the stand-alone should be deprecated?",
    "created_at": "2020-03-13T01:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392865",
    "user": "@DaveWitteMorris"
}
```

Thanks, that seems like a good idea. I'll do it soon, but probably not today. Probably it makes the most sense to move the definition into a method, and then (for backward compatibility) define a stand-alone function that calls the method. Perhaps the stand-alone should be deprecated?



---

archive/issue_comments_392866.json:
```json
{
    "body": "I don't use this, so I don't have an option. I think it is okay to have a method redirect to a function (or vice versa; they are equivalent in my mind up to putting the definition in the method to make it easier to see via `?` on the command-line). There might be some reason for having the actual computation done in a function (which could be in a separate file). Actually, the easiest thing to do would be to simply make the function into a (bounded) method of the appropriate class. I think you just need:\n\n```python\ndef foo(x, y):\n    return -y\nclass Bar:\n    foo = foo\n```\n\n\n```\nsage: b = Bar()\nsage: b.foo(2)\n-2\n```\n\nThis would mean everything in the doc, etc. is properly linked without redundancy. This would be my recommendation.",
    "created_at": "2020-03-13T01:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392866",
    "user": "tscrim"
}
```

I don't use this, so I don't have an option. I think it is okay to have a method redirect to a function (or vice versa; they are equivalent in my mind up to putting the definition in the method to make it easier to see via `?` on the command-line). There might be some reason for having the actual computation done in a function (which could be in a separate file). Actually, the easiest thing to do would be to simply make the function into a (bounded) method of the appropriate class. I think you just need:

```python
def foo(x, y):
    return -y
class Bar:
    foo = foo
```


```
sage: b = Bar()
sage: b.foo(2)
-2
```

This would mean everything in the doc, etc. is properly linked without redundancy. This would be my recommendation.



---

archive/issue_comments_392867.json:
```json
{
    "body": "Thanks for telling me about `foo = foo`. I was going to do something more complicated.\n1. I defined a method of the class `BooleanFormula` by moving the code for `valid_consequence` from `propcalc.py` into `boolformula.py`.\n2. I named the method `is_consequence` (and also defined a standalone function of this same name), to be consistent with the methods `is_satisfiable`, `is_contradiction`, etc., but retained `valid_consequence` as a deprecated function for backwards compatibility (in the file `propcalc.py`).\n3. I refactored the code for the `is_consequence` method, added coverage of the case where there are no hypotheses, and added more doctests.\n4. I made some other minor tweaks to `propcalc.py` and `boolformula.py`, such as changing \"http\" to \"https\".\n5. I revised the description of this ticket. \nShould some of this be on a separate ticket?\n----\nNew commits:",
    "created_at": "2020-03-19T03:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392867",
    "user": "@DaveWitteMorris"
}
```

Thanks for telling me about `foo = foo`. I was going to do something more complicated.
1. I defined a method of the class `BooleanFormula` by moving the code for `valid_consequence` from `propcalc.py` into `boolformula.py`.
2. I named the method `is_consequence` (and also defined a standalone function of this same name), to be consistent with the methods `is_satisfiable`, `is_contradiction`, etc., but retained `valid_consequence` as a deprecated function for backwards compatibility (in the file `propcalc.py`).
3. I refactored the code for the `is_consequence` method, added coverage of the case where there are no hypotheses, and added more doctests.
4. I made some other minor tweaks to `propcalc.py` and `boolformula.py`, such as changing "http" to "https".
5. I revised the description of this ticket. 
Should some of this be on a separate ticket?
----
New commits:



---

archive/issue_comments_392868.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-19T03:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392868",
    "user": "@DaveWitteMorris"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_392869.json:
```json
{
    "body": "Merge conflict.",
    "created_at": "2020-03-19T04:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392869",
    "user": "@DaveWitteMorris"
}
```

Merge conflict.



---

archive/issue_comments_392870.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-03-19T04:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392870",
    "user": "@DaveWitteMorris"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_392871.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-19T05:25:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392871",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_392872.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-19T05:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392872",
    "user": "@DaveWitteMorris"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_392873.json:
```json
{
    "body": "Fixed the merge conflict with #28053 and merged 9.1b8. I hope the patchbots will be happy now.",
    "created_at": "2020-03-19T05:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392873",
    "user": "@DaveWitteMorris"
}
```

Fixed the merge conflict with #28053 and merged 9.1b8. I hope the patchbots will be happy now.



---

archive/issue_comments_392874.json:
```json
{
    "body": "Some little comments:\n\n\n```diff\n-if not(hypotheses):\n+if not hypotheses:\n```\n\n\nRemove ``self`` as an `INPUT:`.\n\nBeyond that, LGTM.",
    "created_at": "2020-03-19T07:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392874",
    "user": "tscrim"
}
```

Some little comments:


```diff
-if not(hypotheses):
+if not hypotheses:
```


Remove ``self`` as an `INPUT:`.

Beyond that, LGTM.



---

archive/issue_comments_392875.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-19T17:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392875",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_392876.json:
```json
{
    "body": "Thanks for the corrections.",
    "created_at": "2020-03-19T18:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392876",
    "user": "@DaveWitteMorris"
}
```

Thanks for the corrections.



---

archive/issue_comments_392877.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-19T22:00:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392877",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_392878.json:
```json
{
    "body": "Thank you. LGTM.",
    "created_at": "2020-03-19T22:00:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392878",
    "user": "tscrim"
}
```

Thank you. LGTM.



---

archive/issue_comments_392879.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-03-25T22:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27815",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27815#issuecomment-392879",
    "user": "vbraun"
}
```

Resolution: fixed
