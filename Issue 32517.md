# Issue 32517: Add make option to use prebuild wheels from pypi

Issue created by migration from https://trac.sagemath.org/ticket/32754

Original creator: @tobiasdiez

Original creation time: 2021-10-24 12:41:11

CC:  mkoeppe

In order to speedup the build process, it would be nice to use prebuild wheels from pypi instead of always building everything on our own. Especially for developer tools like tox etc there are not many advantages of building wheels locally.


---

Comment by mkoeppe created at 2021-10-24 17:40:48

For `pip` packages (those with `requirements.txt` instead of `checksums.ini`), wheels are already used if available.

For `normal` packages (those with `checksums.ini`) I think it is too complicated to have a separate, alternative installation source as part of the build system.

I would instead suggest that we do the following:

Add a `make` target `tricky-venv` that only builds the Python packages (and thus, implicitly, their wheels in `var/lib/sage/wheels`) that have tricky dependencies (in particular, using native libraries shared with other packages).
(See corresponding comments in the branch of #31396.)


---

Comment by @tobiasdiez created at 2021-10-24 22:03:43

What kind of problems do you anticipate of using the prebuilt wheels from pypi of say numpy/scipy? As far as I know it shouldn't be a problem to use prebuilt wheels of two libraries that depend on the same native library but use different versions of that native library to create the wheels.


---

Comment by dimpase created at 2021-12-14 20:08:09

how about wheels from other places, not only pypi?


---

Comment by dimpase created at 2021-12-14 20:12:40

If both `requirements.txt` and `checksums.ini` are present, install should not try to unpack the wheel file, but merely download and verify the checksums - then the wheel from `upstream/` can be used, not necessarily from pypi.
