# Issue 14971: Finite enumerated sets and random elements

Issue created by migration from Trac.

Original creator: elixyre

Original creation time: 2013-09-18 07:23:58

Keywords: finite enumerated sets, random element

There is a problem when we try to produce several random element:


```
sage: BinaryTrees(5).random_element()
    o
   / \
  o   o
 /    
o     
 \    
  o   
sage: BinaryTrees(5).random_element()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-2-e0000e9c90c3> in <module>()
----> 1 BinaryTrees(Integer(5)).random_element()

/Users/Jean-Baptiste/sage/sage-5.12.beta5/local/lib/python2.7/site-packages/sage/categories/finite_enumerated_sets.pyc in _random_element_from_unrank(self)
    373             """
    374             from sage.misc.prandom import randint
--> 375             c = self.cardinality()
    376             r = randint(0, c-1)
    377             return self.unrank(r)

/Users/Jean-Baptiste/sage/sage-5.12.beta5/local/lib/python2.7/site-packages/sage/misc/cachefunc.so in sage.misc.cachefunc.CachedMethodCaller.__call__ (sage/misc/cachefunc.c:7512)()

TypeError: Expected dict, got sage.rings.integer.Integer
```


or an other example with same problem:


```
sage: SetPartitions(4).random_element()
{{1, 2, 3, 4}}
sage: SetPartitions(4).random_element()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-4-1bf49c0b2651> in <module>()
----> 1 SetPartitions(Integer(4)).random_element()

/Users/Jean-Baptiste/sage/sage-5.12.beta5/local/lib/python2.7/site-packages/sage/categories/finite_enumerated_sets.pyc in _random_element_from_unrank(self)
    373             """
    374             from sage.misc.prandom import randint
--> 375             c = self.cardinality()
    376             r = randint(0, c-1)
    377             return self.unrank(r)

/Users/Jean-Baptiste/sage/sage-5.12.beta5/local/lib/python2.7/site-packages/sage/misc/cachefunc.so in sage.misc.cachefunc.CachedMethodCaller.__call__ (sage/misc/cachefunc.c:7512)()

TypeError: Expected dict, got sage.rings.integer.Integer
```


Thanks,

Jean-Baptiste


---

Comment by mantepse created at 2014-06-11 08:00:17

I cannot reproduce this on 6.3.beta1.


---

Comment by elixyre created at 2014-06-11 12:40:49

Neither do I


---

Comment by tscrim created at 2014-06-11 16:16:48

Same.


---

Comment by tscrim created at 2014-06-11 16:16:48

Changing status from new to needs_review.


---

Comment by tscrim created at 2014-06-11 16:17:06

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-06-14 13:18:30

Resolution: worksforme
