# Issue 32274: minimize_constrained() reorders the arguments of symbolic functions

Issue created by migration from https://trac.sagemath.org/ticket/32511

Original creator: mjo

Original creation time: 2021-09-14 11:25:54

When the argument to `minimize_constrained()` is a symbolic function, it does...



```python
var_list = func.variables()
```


but (as documented) the `variables()` method sorts the variables alphabetically. This leads to incorrect output when the `variables()` order does not agree with the order of the arguments to your function; say if your function if `f(z,y,x)` and the minimizer is output as `(x,y,z)`.


---

Comment by mjo created at 2021-09-16 12:11:11

I've added a "soft dependency" on #32234 here to avoid a merge conflict.

FWIW both symbolic functions and expressions support an `arguments()` method that does not sort its result. Fixing this may be as easy as replacing `.variables()` with `.arguments()`.


---

Comment by mjo created at 2021-11-20 13:32:33

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-11-20 18:32:45

However, `arguments` for non-callable symbolic expressions is proposed to be deprecated in #32227...


---

Comment by mkoeppe created at 2021-11-20 18:40:00

You could use the new `is_callable` method to distinguish the two cases...


---

Comment by git created at 2021-11-20 20:06:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mjo created at 2021-11-20 20:09:46

Replying to [comment:3 mkoeppe]:
> However, `arguments` for non-callable symbolic expressions is proposed to be deprecated in #32227...

I think this is OK. The documentation for `minimize_constrained()` says that it should take either a symbolic function, or a python function. It was our `EXAMPLES` that were misleading and that I've fixed in the latest commit.

When `arguments()` is deprecated, anyone still trying to use expressions with `minimize_constrained()` will be warned. Then when it's removed, you won't be able to use non-callable expressions at all. And that's fine. A tuple return value is meaningless when the only way to "call your expression" is via a dict.


---

Comment by mkoeppe created at 2021-11-20 20:13:00

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-11-20 20:13:00

OK, I agree with this. LGTM.


---

Comment by vbraun created at 2021-12-05 11:15:09

Resolution: fixed
