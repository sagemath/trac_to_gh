# Issue 32642: src/tox.yml: Check that there are no .all imports from namespace packages

archive/issues_032642.json:
```json
{
    "body": "CC:  klee chapoton\n\nWe add the following test to a linting workflow:\nLibrary code should not import from `sage.PAC.KAGE.all` when `sage.PAC.KAGE` is a namespace package (see #32501)\n\nIssue created by migration from https://trac.sagemath.org/ticket/32879\n\n",
    "created_at": "2021-11-15T23:25:04Z",
    "labels": [
        "refactoring",
        "major",
        "enhancement"
    ],
    "title": "src/tox.yml: Check that there are no .all imports from namespace packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32642",
    "user": "mkoeppe"
}
```
CC:  klee chapoton

We add the following test to a linting workflow:
Library code should not import from `sage.PAC.KAGE.all` when `sage.PAC.KAGE` is a namespace package (see #32501)

Issue created by migration from https://trac.sagemath.org/ticket/32879





---

archive/issue_comments_465601.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-12-01T04:30:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32642#issuecomment-465601",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_465602.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-12-01T04:30:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32642#issuecomment-465602",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_465603.json:
```json
{
    "body": "It works well. I am positive with the branch.\n\nOne small comment: I am dimly aware that there was a discussion somewhere(perhaps on sage-devel) on using two space characters (vs. one space character) to separate sentences. I don't remember the conclusion, but I feel uncomfortable with it, just like a typo. Hence please fix:\n\n```diff\n - name: 'namespace_pkg_all_import: import from .all of a namespace package'\n   hint: |\n     Sage library code should not import from sage.PAC.KAGE.all when sage.PAC.KAGE is an implicit\n-    Hint: namespace package.  Type import_statements(\"SOME_IDENTIFIER\") to find a more specific import.\n+    Hint: namespace package. Type import_statements(\"SOME_IDENTIFIER\") to find a more specific import.\n   pattern: 'from\\s+sage[.](categories|misc|rings|combinat|graphs|interfaces|libs)[.]all\\s+import'\n   filePattern: '.*[.](py|pyx)$'\n```\n",
    "created_at": "2021-12-02T02:15:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32642#issuecomment-465603",
    "user": "klee"
}
```

It works well. I am positive with the branch.

One small comment: I am dimly aware that there was a discussion somewhere(perhaps on sage-devel) on using two space characters (vs. one space character) to separate sentences. I don't remember the conclusion, but I feel uncomfortable with it, just like a typo. Hence please fix:

```diff
 - name: 'namespace_pkg_all_import: import from .all of a namespace package'
   hint: |
     Sage library code should not import from sage.PAC.KAGE.all when sage.PAC.KAGE is an implicit
-    Hint: namespace package.  Type import_statements("SOME_IDENTIFIER") to find a more specific import.
+    Hint: namespace package. Type import_statements("SOME_IDENTIFIER") to find a more specific import.
   pattern: 'from\s+sage[.](categories|misc|rings|combinat|graphs|interfaces|libs)[.]all\s+import'
   filePattern: '.*[.](py|pyx)$'
```




---

archive/issue_comments_465604.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-04T23:46:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32642#issuecomment-465604",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_465605.json:
```json
{
    "body": "Thank you.",
    "created_at": "2021-12-04T23:57:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32642#issuecomment-465605",
    "user": "klee"
}
```

Thank you.



---

archive/issue_comments_465606.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-04T23:57:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32642#issuecomment-465606",
    "user": "klee"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_465607.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-12-19T11:47:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32642#issuecomment-465607",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_465608.json:
```json
{
    "body": "Imho, it is a very bad idea to introduce a check before it has been fully fixed. This just makes the linter useless.",
    "created_at": "2021-12-29T17:42:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32642#issuecomment-465608",
    "user": "chapoton"
}
```

Imho, it is a very bad idea to introduce a check before it has been fully fixed. This just makes the linter useless.



---

archive/issue_comments_465609.json:
```json
{
    "body": "Useless, I don't think so. Sorry for ruining the green linter checkmarks on the tickets though",
    "created_at": "2021-12-29T18:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32642#issuecomment-465609",
    "user": "mkoeppe"
}
```

Useless, I don't think so. Sorry for ruining the green linter checkmarks on the tickets though



---

archive/issue_comments_465610.json:
```json
{
    "body": "I have to agree. Now the linter workflow is falling for each ticket and it's no longer clear if that's because the ticket introduced some new issues or because of the all imports. \n\nI propose to either remove the all imports soon or demote this check to a warning instead of an error (if that's possible with relint).",
    "created_at": "2022-01-14T12:24:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32642#issuecomment-465610",
    "user": "@tobiasdiez"
}
```

I have to agree. Now the linter workflow is falling for each ticket and it's no longer clear if that's because the ticket introduced some new issues or because of the all imports. 

I propose to either remove the all imports soon or demote this check to a warning instead of an error (if that's possible with relint).



---

archive/issue_comments_465611.json:
```json
{
    "body": "Replying to [comment:10 gh-tobiasdiez]:\n> I propose to either remove the all imports soon\n\n+1, help welcome",
    "created_at": "2022-01-14T17:56:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32642#issuecomment-465611",
    "user": "mkoeppe"
}
```

Replying to [comment:10 gh-tobiasdiez]:
> I propose to either remove the all imports soon

+1, help welcome



---

archive/issue_comments_465612.json:
```json
{
    "body": "Sorry, but if you don't plan to work on this yourself I would say we should demote it for now to a warning and fully activate it later.",
    "created_at": "2022-01-14T20:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32642#issuecomment-465612",
    "user": "@tobiasdiez"
}
```

Sorry, but if you don't plan to work on this yourself I would say we should demote it for now to a warning and fully activate it later.



---

archive/issue_comments_465613.json:
```json
{
    "body": "Replying to [comment:12 gh-tobiasdiez]:\n> ... but if you don't plan to work on this yourself ...\n\nWork is already underway on this, see tickets #32989, #32999, #33007, #33146, #33199, #33202",
    "created_at": "2022-01-14T20:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32642",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32642#issuecomment-465613",
    "user": "mkoeppe"
}
```

Replying to [comment:12 gh-tobiasdiez]:
> ... but if you don't plan to work on this yourself ...

Work is already underway on this, see tickets #32989, #32999, #33007, #33146, #33199, #33202
