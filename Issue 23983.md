# Issue 23983: py3: fixing one bad use of zip

Issue created by migration from https://trac.sagemath.org/ticket/24220

Original creator: chapoton

Original creation time: 2017-11-16 07:12:42

CC:  tscrim jdemeyer tmonteil

part of #16082


---

Comment by chapoton created at 2017-11-16 07:13:50

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-11-16 07:13:50

New commits:


---

Comment by tscrim created at 2017-11-16 07:22:32

I am not sure this is a problem. I thought that things like `zip` were (repeatedly) iterable. So the initial iteration should be okay, and `delete_edges` also iterates over the edges. Or can we only iterate over it once?


---

Comment by chapoton created at 2017-11-16 07:26:40

This fixes a failure found in the last patchbot run on #16082. And indeed in python3

```
>>> A=zip([4,3],[5,6])
>>> list(A)
[(4, 5), (3, 6)]
>>> list(A)
[]
```



---

Comment by tscrim created at 2017-11-16 07:32:14

I see. I think a better solution in this case is to duplicate the zip (with a comment saying in Python3, we need a fresh iterator). That way we keep the advantages in Python3, and we still have to make a copy of the list in Python2. What do you think?


---

Comment by chapoton created at 2017-11-16 07:47:11

Are we sure that "delete_edges" can take an iterator ?


---

Comment by tscrim created at 2017-11-16 07:48:54

The code is

```python
for e in edges:
    self.delete_edge(e)
```



---

Comment by git created at 2017-11-16 09:23:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-11-16 09:24:04

done, thanks
----
New commits:
----
New commits:


---

Comment by chapoton created at 2017-11-16 13:44:51

green bot


---

Comment by tscrim created at 2017-11-16 20:37:29

LGTM. Thanks.


---

Comment by tscrim created at 2017-11-16 20:37:29

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-12-11 01:02:21

Resolution: fixed
