# Issue 17331: Allow syntax FiniteField(p, n)

archive/issues_017331.json:
```json
{
    "body": "CC:  ncohen vdelecroix jpflori dimpase bruno jdemeyer vbraun slelievre\n\nKeywords: finite field\n\nIt should be possible to use the syntax `FiniteField(p, n, ...)` as a synonym for `FiniteField(p^n, ...)` to create a finite field with `p^n` elements.\n\nDiscussion on sage-devel: https://groups.google.com/forum/#!topic/sage-devel/LlstHp950uo\n\nIssue created by migration from https://trac.sagemath.org/ticket/17568\n\n",
    "created_at": "2014-12-30T14:25:55Z",
    "labels": [
        "finite rings",
        "minor",
        "enhancement"
    ],
    "title": "Allow syntax FiniteField(p, n)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17331",
    "user": "pbruin"
}
```
CC:  ncohen vdelecroix jpflori dimpase bruno jdemeyer vbraun slelievre

Keywords: finite field

It should be possible to use the syntax `FiniteField(p, n, ...)` as a synonym for `FiniteField(p^n, ...)` to create a finite field with `p^n` elements.

Discussion on sage-devel: https://groups.google.com/forum/#!topic/sage-devel/LlstHp950uo

Issue created by migration from https://trac.sagemath.org/ticket/17568





---

archive/issue_comments_230849.json:
```json
{
    "body": "Another possibility would be `FiniteField((p, n))`.\n\nDiscussed at ticket:31686#comment:8 which led to\nopening #31709 (duplicate of this ticket).",
    "created_at": "2021-04-21T16:30:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230849",
    "user": "slelievre"
}
```

Another possibility would be `FiniteField((p, n))`.

Discussed at ticket:31686#comment:8 which led to
opening #31709 (duplicate of this ticket).



---

archive/issue_comments_230850.json:
```json
{
    "body": "using `foo((a,b))` instead of `foo(a,b)` is weird. If you have `t=(a,b)` you can always call `foo(*t)`.",
    "created_at": "2021-04-21T17:10:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230850",
    "user": "dimpase"
}
```

using `foo((a,b))` instead of `foo(a,b)` is weird. If you have `t=(a,b)` you can always call `foo(*t)`.



---

archive/issue_comments_230851.json:
```json
{
    "body": "I definitely prefer `FiniteField((p, n))` rather than `FiniteField(p, n)`.  Here the tuple `(p, n)` is taking the place of the integer `p^n` to save some factoring time.  In `FiniteField(p, n)` the `n` is a positional argument in a slot that is usually the variable name.  How do you specify the variable name if you want to use this syntax?  Yes, it's possible to parse all this, but `GF((p, n))` is simple enough.\n\nI'll also note that factoring the order is a small fraction of the time spent in constructing the field (unless the prime is quite large):\n\n\n```\nsage: %time factor(2^1001)                                                                                                                                                     \nCPU times: user 214 \u00b5s, sys: 173 \u00b5s, total: 387 \u00b5s\nWall time: 392 \u00b5s\n2^1001\nsage: %time K.<a> = GF(2^1001)                                                                                                                                                 \nCPU times: user 397 ms, sys: 87.2 ms, total: 485 ms\nWall time: 496 ms\n\nsage: %time factor(next_prime(2^200)^6)                                                                                                                                        \nCPU times: user 117 ms, sys: 1.95 ms, total: 119 ms\nWall time: 167 ms\n1606938044258990275541962092341162602522202993782792835301611^6\nsage: %time K.<a> = GF(next_prime(2^200)^6)                                                                                                                                    \nCPU times: user 360 ms, sys: 13.8 ms, total: 374 ms\nWall time: 651 ms\n```\n\n\nThis optimization will be useful for very large characteristic though.",
    "created_at": "2021-04-21T20:06:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230851",
    "user": "roed"
}
```

I definitely prefer `FiniteField((p, n))` rather than `FiniteField(p, n)`.  Here the tuple `(p, n)` is taking the place of the integer `p^n` to save some factoring time.  In `FiniteField(p, n)` the `n` is a positional argument in a slot that is usually the variable name.  How do you specify the variable name if you want to use this syntax?  Yes, it's possible to parse all this, but `GF((p, n))` is simple enough.

I'll also note that factoring the order is a small fraction of the time spent in constructing the field (unless the prime is quite large):


```
sage: %time factor(2^1001)                                                                                                                                                     
CPU times: user 214 µs, sys: 173 µs, total: 387 µs
Wall time: 392 µs
2^1001
sage: %time K.<a> = GF(2^1001)                                                                                                                                                 
CPU times: user 397 ms, sys: 87.2 ms, total: 485 ms
Wall time: 496 ms

sage: %time factor(next_prime(2^200)^6)                                                                                                                                        
CPU times: user 117 ms, sys: 1.95 ms, total: 119 ms
Wall time: 167 ms
1606938044258990275541962092341162602522202993782792835301611^6
sage: %time K.<a> = GF(next_prime(2^200)^6)                                                                                                                                    
CPU times: user 360 ms, sys: 13.8 ms, total: 374 ms
Wall time: 651 ms
```


This optimization will be useful for very large characteristic though.



---

archive/issue_comments_230852.json:
```json
{
    "body": "I don't know why the 2nd slot it \"usually\" the primitive element name.\nE.g. we have `PolynomialRing(QQ, 2, 'alpha0')`. Make it the 3rd slot, or a keyword arg.\nPutting extra pair of brackets around `p,n` is very wrong to me.",
    "created_at": "2021-04-21T21:31:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230852",
    "user": "dimpase"
}
```

I don't know why the 2nd slot it "usually" the primitive element name.
E.g. we have `PolynomialRing(QQ, 2, 'alpha0')`. Make it the 3rd slot, or a keyword arg.
Putting extra pair of brackets around `p,n` is very wrong to me.



---

archive/issue_comments_230853.json:
```json
{
    "body": "I was actually thinking of the `PolynomialRing` parsing code as exactly what I wanted to avoid.",
    "created_at": "2021-04-22T00:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230853",
    "user": "roed"
}
```

I was actually thinking of the `PolynomialRing` parsing code as exactly what I wanted to avoid.



---

archive/issue_comments_230854.json:
```json
{
    "body": "Using a tuple there doesn't seem wrong to me at all.  It's a different way of representing a single argument: the order of the field.",
    "created_at": "2021-04-22T00:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230854",
    "user": "roed"
}
```

Using a tuple there doesn't seem wrong to me at all.  It's a different way of representing a single argument: the order of the field.



---

archive/issue_comments_230855.json:
```json
{
    "body": "I see `GF(3, 5)` as more strange, as if `5` is an extra argument in the construction of `GF(3)`.",
    "created_at": "2021-04-22T00:07:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230855",
    "user": "roed"
}
```

I see `GF(3, 5)` as more strange, as if `5` is an extra argument in the construction of `GF(3)`.



---

archive/issue_comments_230856.json:
```json
{
    "body": "And why not change `Factorization([(2,3),(3,5)])` to `Factorization(2, 3, 3, 5)`? More seriously, grouping `(p, n)` makes a lot of sense as it represents a single number in a factored form. This is also the format that PARI/GP uses.",
    "created_at": "2021-04-22T06:44:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230856",
    "user": "vdelecroix"
}
```

And why not change `Factorization([(2,3),(3,5)])` to `Factorization(2, 3, 3, 5)`? More seriously, grouping `(p, n)` makes a lot of sense as it represents a single number in a factored form. This is also the format that PARI/GP uses.



---

archive/issue_comments_230857.json:
```json
{
    "body": "and the format I advocate is used by GAP and Magma.",
    "created_at": "2021-04-22T07:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230857",
    "user": "dimpase"
}
```

and the format I advocate is used by GAP and Magma.



---

archive/issue_comments_230858.json:
```json
{
    "body": "Yes, they have uniform notations: `GF(2,3)` and `SL(2,3)`.",
    "created_at": "2021-04-22T07:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230858",
    "user": "vdelecroix"
}
```

Yes, they have uniform notations: `GF(2,3)` and `SL(2,3)`.



---

archive/issue_comments_230859.json:
```json
{
    "body": "well, we can allow both formats, just check whether the type of the 1st argument is a pair.",
    "created_at": "2021-04-22T09:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230859",
    "user": "dimpase"
}
```

well, we can allow both formats, just check whether the type of the 1st argument is a pair.



---

archive/issue_comments_230860.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-08-21T11:54:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230860",
    "user": "chapoton"
}
```

New commits:



---

archive/issue_comments_230861.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-08-21T11:54:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230861",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_230862.json:
```json
{
    "body": "What happens if the user passes (9, 1)?",
    "created_at": "2021-08-21T13:03:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230862",
    "user": "slelievre"
}
```

What happens if the user passes (9, 1)?



---

archive/issue_comments_230863.json:
```json
{
    "body": "currently, this raises an Error. Would you like it to be accepted ?",
    "created_at": "2021-08-21T15:28:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230863",
    "user": "chapoton"
}
```

currently, this raises an Error. Would you like it to be accepted ?



---

archive/issue_comments_230864.json:
```json
{
    "body": "Raising an error in this case is fine.\n\nMaybe add an example or two to\nthe [main finite field documentation](https://doc.sagemath.org/html/en/reference/finite_rings/sage/rings/finite_rings/finite_field_constructor.html)?",
    "created_at": "2021-08-21T15:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230864",
    "user": "slelievre"
}
```

Raising an error in this case is fine.

Maybe add an example or two to
the [main finite field documentation](https://doc.sagemath.org/html/en/reference/finite_rings/sage/rings/finite_rings/finite_field_constructor.html)?



---

archive/issue_comments_230865.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-21T16:14:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230865",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_230866.json:
```json
{
    "body": "voil\u00e0 (a minima)",
    "created_at": "2021-08-21T16:15:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230866",
    "user": "chapoton"
}
```

voilà (a minima)



---

archive/issue_comments_230867.json:
```json
{
    "body": "This is a welcome improvement.",
    "created_at": "2021-08-21T16:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230867",
    "user": "slelievre"
}
```

This is a welcome improvement.



---

archive/issue_comments_230868.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-21T16:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230868",
    "user": "slelievre"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_230869.json:
```json
{
    "body": "Changing priority from minor to major.",
    "created_at": "2021-08-21T16:22:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230869",
    "user": "slelievre"
}
```

Changing priority from minor to major.



---

archive/issue_comments_230870.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-08-29T09:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17331",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17331#issuecomment-230870",
    "user": "vbraun"
}
```

Resolution: fixed
