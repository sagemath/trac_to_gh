# Issue 27963: reduce base field for scheme morphisms

archive/issues_027963.json:
```json
{
    "body": "Keywords: SI2019\n\nIt is possible that the field defined by the coefficients is strictly contained in base field of the morphism. This can be happen in a number of situations, especially from conjugations or computing normal forms. There should be a general function to reduce to the field of definition of the coefficients.\n\nIssue created by migration from https://trac.sagemath.org/ticket/28200\n\n",
    "created_at": "2019-07-15T17:23:55Z",
    "labels": [
        "component: algebraic geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "reduce base field for scheme morphisms",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27963",
    "user": "https://github.com/bhutz"
}
```
Keywords: SI2019

It is possible that the field defined by the coefficients is strictly contained in base field of the morphism. This can be happen in a number of situations, especially from conjugations or computing normal forms. There should be a general function to reduce to the field of definition of the coefficients.

Issue created by migration from https://trac.sagemath.org/ticket/28200





---

archive/issue_comments_394645.json:
```json
{
    "body": "Here is an initial implementation that could use some more testing.\n\nThis just implements the function and does not have any of the 'client' functions utilize this; like conjugate or normal form. I'm not sure those additional modifications should be part of this ticket.\n----\nNew commits:",
    "created_at": "2019-07-15T17:27:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27963#issuecomment-394645",
    "user": "https://github.com/bhutz"
}
```

Here is an initial implementation that could use some more testing.

This just implements the function and does not have any of the 'client' functions utilize this; like conjugate or normal form. I'm not sure those additional modifications should be part of this ticket.
----
New commits:



---

archive/issue_comments_394646.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-07-25T15:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27963#issuecomment-394646",
    "user": "https://github.com/bhutz"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_394647.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-07-25T15:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27963#issuecomment-394647",
    "user": "https://github.com/HTalbott"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_394648.json:
```json
{
    "body": "On line 1684 of src/sage/schemes/projective/projective_morphism.py, the method finds the max of the the degrees of the coefficients. This should find the LCM rather than the max. For instance, the following code currently gives the minimal field as GF(5 to 3), when it should give GF(5 to 6), as below:\n\n```\nsage: K.<t>=GF(5^6)\nsage: A.<x>=AffineSpace(K,1)\nsage: H=End(A)\nsage: f=H([x^2+x*(t^3 + 2*t^2 + 4*t)+(t^5 + 3*t^4 + t^2 + 4*t)])\nsage: f.reduce_base_field()\nScheme endomorphism of Affine Space of dimension 1 over Finite Field in t of size 5^6\n  Defn: Defined on coordinates by sending (x) to\n        (x^2 + (t^3 + 2*t^2 - t)*x + (t^5 - 2*t^4 + t^2 - t))\n```\n",
    "created_at": "2019-07-25T15:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27963#issuecomment-394648",
    "user": "https://github.com/HTalbott"
}
```

On line 1684 of src/sage/schemes/projective/projective_morphism.py, the method finds the max of the the degrees of the coefficients. This should find the LCM rather than the max. For instance, the following code currently gives the minimal field as GF(5 to 3), when it should give GF(5 to 6), as below:

```
sage: K.<t>=GF(5^6)
sage: A.<x>=AffineSpace(K,1)
sage: H=End(A)
sage: f=H([x^2+x*(t^3 + 2*t^2 + 4*t)+(t^5 + 3*t^4 + t^2 + 4*t)])
sage: f.reduce_base_field()
Scheme endomorphism of Affine Space of dimension 1 over Finite Field in t of size 5^6
  Defn: Defined on coordinates by sending (x) to
        (x^2 + (t^3 + 2*t^2 - t)*x + (t^5 - 2*t^4 + t^2 - t))
```




---

archive/issue_comments_394649.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-25T18:27:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27963#issuecomment-394649",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_394650.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-07-25T18:28:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27963#issuecomment-394650",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_394651.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-30T13:59:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27963#issuecomment-394651",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_394652.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-30T14:01:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27963#issuecomment-394652",
    "user": "https://github.com/HTalbott"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_394653.json:
```json
{
    "body": "Fixed small documentations errors. Everything else looks good!\n----\nNew commits:",
    "created_at": "2019-07-30T14:01:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27963#issuecomment-394653",
    "user": "https://github.com/HTalbott"
}
```

Fixed small documentations errors. Everything else looks good!
----
New commits:



---

archive/issue_events_070089.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-08-01T22:54:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27963",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27963#event-70089"
}
```



---

archive/issue_comments_394654.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-08-01T22:54:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27963#issuecomment-394654",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
