# Issue 20358: Setting Besselexpand to true globally

Issue created by migration from Trac.

Original creator: zonova

Original creation time: 2016-05-12 04:50:10

Check thread:
https://groups.google.com/forum/#!topic/sage-support/PPsHBx6Z6Fc

I think it would be beneficial to Sage, in terms of its accessibility, if bessel functions were automatically reduced to trig functions. Part of my mentality is that those who know trig functions are not likely to know bessel functions, whereas though who do know about bessel functions are likely able to understand their equivalent trig form. 

Emailing the Maxima development list here:
https://sourceforge.net/p/maxima/mailman/maxima-discuss/thread/CAC05q1u%3D8gJRvBC6ucSRrHstsQqnse2pvV5Xs239qWdNyr1-Ow`@`mail.gmail.com/#msg34796315

It seems that it didn't cause any errors when tested, and is likely not to cause errors. 

This is a simple change, however I was hoping to be able to do it myself so that I could gain an understanding of the entire process of adding to Sage. 


---

Comment by git created at 2016-05-13 16:08:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by zonova created at 2016-05-13 16:10:05

Changing status from new to needs_review.


---

Comment by nbruin created at 2016-05-13 18:47:56

I don't think a string dumped in a file arbitrarily will get picked up as a doctest. Probably adding the test to `sage.interfaces.maxima_lib.MaximaLib.sr_sum` (in the same file) is the best solution.
----
New commits:


---

Comment by git created at 2016-05-13 19:01:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2016-05-13 22:34:49

Replying to [comment:7 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[ed47f6a](http://git.sagemath.org/sage.git/commit/?id=ed47f6a346a65df0ceb8db86f087b3cb307bdf9a)||`Changing placement of doctest`||

you are not following the quite strict formatting rules for docs and doctests.
In particular EXAMPLES must be in capitals, and everything in the EXAMPLES section should be indented appropriately. Look at how this is done elsewhere, e.g. in the same file:

```
def max_to_string(s):
    r"""
    Return the Maxima string corresponding to this ECL object.

    INPUT:

    - ``s`` - ECL object

    OUTPUT: string

    EXAMPLES::

        sage: from sage.interfaces.maxima_lib import maxima_lib, max_to_string
        sage: ecl = maxima_lib(cos(x)).ecl()
        sage: max_to_string(ecl)
        'cos(_SAGE_VAR_x)'
    """
```


probably your docs change should go into either one of functions, or into the top part of the file, which has somewhat different formatting rules. In particular it does not need EXAMPLES: keyword. So you could put your doc change just before the triple quote on line 52, as follows:


```

Changed besselexpand to true -- automatically simplify bessel functions to trig functions when appropriate when true. Examples:

For some infinite sums, a closed expression can be found. By default, "maxima" is used for that::

    sage: sum(((-1)^n)*((x)^(2*n+1))/factorial(2*n+1),n,0,oo)
    sin(x)

Maxima has some flags that affect how the result gets simplified(By default, besselexpand was set to false in Maxima)::

    sage:  maxima_calculus("besselexpand:false")
    false
    sage: sum(((-1)^n)*((x)^(2*n+1))/factorial(2*n+1),n,0,oo)
    1/2*sqrt(2)*sqrt(pi)*sqrt(x)*bessel_J(1/2, x)
    sage:  maxima_calculus("besselexpand:true")
    true

```


Note the double colons, and spacing I added.


---

Comment by dimpase created at 2016-05-13 22:44:50

Changing status from needs_review to needs_work.


---

Comment by git created at 2016-05-13 23:27:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by kcrisman created at 2016-05-17 12:52:11

The formatting is still not right...


---

Comment by git created at 2016-05-17 23:26:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by zonova created at 2016-05-20 21:48:50

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2016-05-21 16:27:45

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-05-22 21:09:43

Resolution: fixed
