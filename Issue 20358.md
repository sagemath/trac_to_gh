# Issue 20358: Setting Besselexpand to true globally

archive/issues_020358.json:
```json
{
    "body": "Check thread:\nhttps://groups.google.com/forum/#!topic/sage-support/PPsHBx6Z6Fc\n\nI think it would be beneficial to Sage, in terms of its accessibility, if bessel functions were automatically reduced to trig functions. Part of my mentality is that those who know trig functions are not likely to know bessel functions, whereas though who do know about bessel functions are likely able to understand their equivalent trig form. \n\nEmailing the Maxima development list here:\nhttps://sourceforge.net/p/maxima/mailman/maxima-discuss/thread/CAC05q1u%3D8gJRvBC6ucSRrHstsQqnse2pvV5Xs239qWdNyr1-Ow`@`mail.gmail.com/#msg34796315\n\nIt seems that it didn't cause any errors when tested, and is likely not to cause errors. \n\nThis is a simple change, however I was hoping to be able to do it myself so that I could gain an understanding of the entire process of adding to Sage. \n\nIssue created by migration from https://trac.sagemath.org/ticket/20595\n\n",
    "created_at": "2016-05-12T04:50:10Z",
    "labels": [
        "interfaces",
        "minor",
        "enhancement"
    ],
    "title": "Setting Besselexpand to true globally",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20358",
    "user": "zonova"
}
```
Check thread:
https://groups.google.com/forum/#!topic/sage-support/PPsHBx6Z6Fc

I think it would be beneficial to Sage, in terms of its accessibility, if bessel functions were automatically reduced to trig functions. Part of my mentality is that those who know trig functions are not likely to know bessel functions, whereas though who do know about bessel functions are likely able to understand their equivalent trig form. 

Emailing the Maxima development list here:
https://sourceforge.net/p/maxima/mailman/maxima-discuss/thread/CAC05q1u%3D8gJRvBC6ucSRrHstsQqnse2pvV5Xs239qWdNyr1-Ow`@`mail.gmail.com/#msg34796315

It seems that it didn't cause any errors when tested, and is likely not to cause errors. 

This is a simple change, however I was hoping to be able to do it myself so that I could gain an understanding of the entire process of adding to Sage. 

Issue created by migration from https://trac.sagemath.org/ticket/20595





---

archive/issue_comments_280689.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-13T16:08:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20358#issuecomment-280689",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_280690.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-05-13T16:10:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20358#issuecomment-280690",
    "user": "zonova"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_280691.json:
```json
{
    "body": "I don't think a string dumped in a file arbitrarily will get picked up as a doctest. Probably adding the test to `sage.interfaces.maxima_lib.MaximaLib.sr_sum` (in the same file) is the best solution.\n----\nNew commits:",
    "created_at": "2016-05-13T18:47:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20358#issuecomment-280691",
    "user": "nbruin"
}
```

I don't think a string dumped in a file arbitrarily will get picked up as a doctest. Probably adding the test to `sage.interfaces.maxima_lib.MaximaLib.sr_sum` (in the same file) is the best solution.
----
New commits:



---

archive/issue_comments_280692.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-13T19:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20358#issuecomment-280692",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_280693.json:
```json
{
    "body": "Replying to [comment:7 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> ||[ed47f6a](http://git.sagemath.org/sage.git/commit/?id=ed47f6a346a65df0ceb8db86f087b3cb307bdf9a)||`Changing placement of doctest`||\n\nyou are not following the quite strict formatting rules for docs and doctests.\nIn particular EXAMPLES must be in capitals, and everything in the EXAMPLES section should be indented appropriately. Look at how this is done elsewhere, e.g. in the same file:\n\n```\ndef max_to_string(s):\n    r\"\"\"\n    Return the Maxima string corresponding to this ECL object.\n\n    INPUT:\n\n    - ``s`` - ECL object\n\n    OUTPUT: string\n\n    EXAMPLES::\n\n        sage: from sage.interfaces.maxima_lib import maxima_lib, max_to_string\n        sage: ecl = maxima_lib(cos(x)).ecl()\n        sage: max_to_string(ecl)\n        'cos(_SAGE_VAR_x)'\n    \"\"\"\n```\n\n\nprobably your docs change should go into either one of functions, or into the top part of the file, which has somewhat different formatting rules. In particular it does not need EXAMPLES: keyword. So you could put your doc change just before the triple quote on line 52, as follows:\n\n\n```\n\nChanged besselexpand to true -- automatically simplify bessel functions to trig functions when appropriate when true. Examples:\n\nFor some infinite sums, a closed expression can be found. By default, \"maxima\" is used for that::\n\n    sage: sum(((-1)^n)*((x)^(2*n+1))/factorial(2*n+1),n,0,oo)\n    sin(x)\n\nMaxima has some flags that affect how the result gets simplified(By default, besselexpand was set to false in Maxima)::\n\n    sage:  maxima_calculus(\"besselexpand:false\")\n    false\n    sage: sum(((-1)^n)*((x)^(2*n+1))/factorial(2*n+1),n,0,oo)\n    1/2*sqrt(2)*sqrt(pi)*sqrt(x)*bessel_J(1/2, x)\n    sage:  maxima_calculus(\"besselexpand:true\")\n    true\n\n```\n\n\nNote the double colons, and spacing I added.",
    "created_at": "2016-05-13T22:34:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20358#issuecomment-280693",
    "user": "dimpase"
}
```

Replying to [comment:7 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[ed47f6a](http://git.sagemath.org/sage.git/commit/?id=ed47f6a346a65df0ceb8db86f087b3cb307bdf9a)||`Changing placement of doctest`||

you are not following the quite strict formatting rules for docs and doctests.
In particular EXAMPLES must be in capitals, and everything in the EXAMPLES section should be indented appropriately. Look at how this is done elsewhere, e.g. in the same file:

```
def max_to_string(s):
    r"""
    Return the Maxima string corresponding to this ECL object.

    INPUT:

    - ``s`` - ECL object

    OUTPUT: string

    EXAMPLES::

        sage: from sage.interfaces.maxima_lib import maxima_lib, max_to_string
        sage: ecl = maxima_lib(cos(x)).ecl()
        sage: max_to_string(ecl)
        'cos(_SAGE_VAR_x)'
    """
```


probably your docs change should go into either one of functions, or into the top part of the file, which has somewhat different formatting rules. In particular it does not need EXAMPLES: keyword. So you could put your doc change just before the triple quote on line 52, as follows:


```

Changed besselexpand to true -- automatically simplify bessel functions to trig functions when appropriate when true. Examples:

For some infinite sums, a closed expression can be found. By default, "maxima" is used for that::

    sage: sum(((-1)^n)*((x)^(2*n+1))/factorial(2*n+1),n,0,oo)
    sin(x)

Maxima has some flags that affect how the result gets simplified(By default, besselexpand was set to false in Maxima)::

    sage:  maxima_calculus("besselexpand:false")
    false
    sage: sum(((-1)^n)*((x)^(2*n+1))/factorial(2*n+1),n,0,oo)
    1/2*sqrt(2)*sqrt(pi)*sqrt(x)*bessel_J(1/2, x)
    sage:  maxima_calculus("besselexpand:true")
    true

```


Note the double colons, and spacing I added.



---

archive/issue_comments_280694.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-05-13T22:44:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20358#issuecomment-280694",
    "user": "dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_280695.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-13T23:27:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20358#issuecomment-280695",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_280696.json:
```json
{
    "body": "The formatting is still not right...",
    "created_at": "2016-05-17T12:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20358#issuecomment-280696",
    "user": "kcrisman"
}
```

The formatting is still not right...



---

archive/issue_comments_280697.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-17T23:26:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20358#issuecomment-280697",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_280698.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-05-20T21:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20358#issuecomment-280698",
    "user": "zonova"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_280699.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-05-21T16:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20358#issuecomment-280699",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_280700.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-05-22T21:09:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20358#issuecomment-280700",
    "user": "vbraun"
}
```

Resolution: fixed
