# Issue 25110: Package hol-light (and dependency camlp5)

archive/issues_025110.json:
```json
{
    "body": "Experimental package for the HOL Light theorem prover (http://www.cl.cam.ac.uk/~jrh13/hol-light/)\n\nAssuming distribution package for OCaml is available. Tested on Homebrew, which has version 4.06.1.\n\nAdding package `camlp5`. The package available in Homebrew does not seem to work for HOL light, probably because it has not been built in strict mode (https://github.com/jrh13/hol-light/blob/master/README)\n\n```\n(cd upstream && wget https://github.com/camlp5/camlp5/archive/rel705.tar.gz -O camlp5-7.05.tar.gz )\n```\n\n\nAdding package `hol-light`. Upstream () has no releases. For now we pull directly from their git. Alternatively, could use Debian's `.orig.tar.gz` (https://packages.debian.org/stretch/hol-light) as our upstream.\n\nIssue created by migration from https://trac.sagemath.org/ticket/25347\n\n",
    "created_at": "2018-05-11T18:52:30Z",
    "labels": [
        "packages: experimental",
        "major",
        "enhancement"
    ],
    "title": "Package hol-light (and dependency camlp5)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25110",
    "user": "mkoeppe"
}
```
Experimental package for the HOL Light theorem prover (http://www.cl.cam.ac.uk/~jrh13/hol-light/)

Assuming distribution package for OCaml is available. Tested on Homebrew, which has version 4.06.1.

Adding package `camlp5`. The package available in Homebrew does not seem to work for HOL light, probably because it has not been built in strict mode (https://github.com/jrh13/hol-light/blob/master/README)

```
(cd upstream && wget https://github.com/camlp5/camlp5/archive/rel705.tar.gz -O camlp5-7.05.tar.gz )
```


Adding package `hol-light`. Upstream () has no releases. For now we pull directly from their git. Alternatively, could use Debian's `.orig.tar.gz` (https://packages.debian.org/stretch/hol-light) as our upstream.

Issue created by migration from https://trac.sagemath.org/ticket/25347





---

archive/issue_comments_353317.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-05-11T19:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25110#issuecomment-353317",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_353318.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-11T19:43:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25110#issuecomment-353318",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_353319.json:
```json
{
    "body": "Earliest error:\n\n```\nException: Failure \"tryfind\".\nError in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/hol-light/Multivariate/realanalysis.ml\n- : unit = ()\nFile \"/Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/trig/series.hl\", line 318, characters 55-84:\nError: Unbound value REAL_INTEGRABLE_UNIFORM_LIMIT\nError in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/trig/series.hl\n- : unit = ()\nFile \"_none_\", line 1:\nError: Unbound module Series\n```\n",
    "created_at": "2018-05-11T21:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25110#issuecomment-353319",
    "user": "mkoeppe"
}
```

Earliest error:

```
Exception: Failure "tryfind".
Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/hol-light/Multivariate/realanalysis.ml
- : unit = ()
File "/Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/trig/series.hl", line 318, characters 55-84:
Error: Unbound value REAL_INTEGRABLE_UNIFORM_LIMIT
Error in included file /Users/mkoeppe/s/sage/some-sage-install-prefix/share/formal_ineqs/trig/series.hl
- : unit = ()
File "_none_", line 1:
Error: Unbound module Series
```




---

archive/issue_comments_353320.json:
```json
{
    "body": "Just a comment on the installer scripts: you should use the `sdh_...` functions (grep for `sdh_make_install` for example).",
    "created_at": "2018-05-12T12:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25110#issuecomment-353320",
    "user": "jdemeyer"
}
```

Just a comment on the installer scripts: you should use the `sdh_...` functions (grep for `sdh_make_install` for example).



---

archive/issue_comments_353321.json:
```json
{
    "body": "I don't really like how you pull from git at install time. Better just make a proper package from the git repo. For `script` packages, there is no dependency or version checking.\n\nAnd even if you do want to pull from git, this is really bad:\n\n```\nif [ -n \"${FORMAL_INEQS_COMMIT}\" ]; then\n    git checkout ${FORMAL_INEQS_COMMIT}\nelse\n    git pull --ff-only\nfi\n```\n\nYou really should fix a commit, not just pull whatever is on the master branch.\n\n(NOTE: for experimental packages, you can do whatever you want. So take these comments as advice, not as a requirement)",
    "created_at": "2018-05-12T12:27:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25110#issuecomment-353321",
    "user": "jdemeyer"
}
```

I don't really like how you pull from git at install time. Better just make a proper package from the git repo. For `script` packages, there is no dependency or version checking.

And even if you do want to pull from git, this is really bad:

```
if [ -n "${FORMAL_INEQS_COMMIT}" ]; then
    git checkout ${FORMAL_INEQS_COMMIT}
else
    git pull --ff-only
fi
```

You really should fix a commit, not just pull whatever is on the master branch.

(NOTE: for experimental packages, you can do whatever you want. So take these comments as advice, not as a requirement)



---

archive/issue_comments_353322.json:
```json
{
    "body": "Thanks for the comments; yes, these are very preliminary scripts and before I would set this ticket to review, it would be replaced by using a tarball.",
    "created_at": "2018-05-12T20:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25110#issuecomment-353322",
    "user": "mkoeppe"
}
```

Thanks for the comments; yes, these are very preliminary scripts and before I would set this ticket to review, it would be replaced by using a tarball.



---

archive/issue_comments_353323.json:
```json
{
    "body": "Loading Formal_ineqs also fails in Debian's version of the package. https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=898514",
    "created_at": "2018-05-12T22:38:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25110#issuecomment-353323",
    "user": "mkoeppe"
}
```

Loading Formal_ineqs also fails in Debian's version of the package. https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=898514



---

archive/issue_comments_353324.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-13T15:17:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25110",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25110#issuecomment-353324",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:
