# Issue 12949: Upgrade sagenb to 0.9.1

archive/issues_012949.json:
```json
{
    "body": "Assignee: jason, mpatel, was\n\nCC:  @jhpalmieri @gutow jyeo @rbeezer\n\nKeywords: sagenb\n\nThis is a followup to #11080. During the review process of #11080, which stretched for quite a while, at some point we decided to have a feature freeze on the version of sagenb 0.9.x associated with #11080, just to simplify the review process. The purpose of this ticket is to incorporate some new features, bugfixes, code refactoring, etc. into the version of sagenb shipped with Sage, beyond what was reviewed in #11080. The exact scope of what will go into this sagenb 0.9.1 release is as yet undecided.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13121\n\n",
    "created_at": "2012-06-15T21:30:00Z",
    "labels": [
        "component: notebook"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.4",
    "title": "Upgrade sagenb to 0.9.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12949",
    "user": "https://github.com/kini"
}
```
Assignee: jason, mpatel, was

CC:  @jhpalmieri @gutow jyeo @rbeezer

Keywords: sagenb

This is a followup to #11080. During the review process of #11080, which stretched for quite a while, at some point we decided to have a feature freeze on the version of sagenb 0.9.x associated with #11080, just to simplify the review process. The purpose of this ticket is to incorporate some new features, bugfixes, code refactoring, etc. into the version of sagenb shipped with Sage, beyond what was reviewed in #11080. The exact scope of what will go into this sagenb 0.9.1 release is as yet undecided.

Issue created by migration from https://trac.sagemath.org/ticket/13121





---

archive/issue_events_036123.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-06-15T21:51:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "milestone": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12949#event-36123"
}
```



---

archive/issue_comments_155772.json:
```json
{
    "body": "See [this comment on github pull request 64](https://github.com/sagemath/sagenb/pull/64#issuecomment-6436779) to confirm that #12299 will be in 0.9.1.",
    "created_at": "2012-06-20T00:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155772",
    "user": "https://github.com/kcrisman"
}
```

See [this comment on github pull request 64](https://github.com/sagemath/sagenb/pull/64#issuecomment-6436779) to confirm that #12299 will be in 0.9.1.



---

archive/issue_comments_155773.json:
```json
{
    "body": "I've released 0.9.1. The SPKG is [here](http://wstein.org/home/keshav/files/sagenb-0.9.1.spkg). Please test and review!",
    "created_at": "2012-06-21T08:29:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155773",
    "user": "https://github.com/kini"
}
```

I've released 0.9.1. The SPKG is [here](http://wstein.org/home/keshav/files/sagenb-0.9.1.spkg). Please test and review!



---

archive/issue_comments_155774.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-06-21T08:29:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155774",
    "user": "https://github.com/kini"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_155775.json:
```json
{
    "body": "In spkg-install, the check\n\n```\nif [ -n $SAGE64 ]; then\n```\n\nneeds to take into account that `$SAGE64` may be set to \"no\". According to `SAGE_ROOT/spkg/bin/sage-arch-env`, it should be unset, \"no\", or \"yes\", so you should test that it's set to \"yes\".",
    "created_at": "2012-06-21T17:35:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155775",
    "user": "https://github.com/jhpalmieri"
}
```

In spkg-install, the check

```
if [ -n $SAGE64 ]; then
```

needs to take into account that `$SAGE64` may be set to "no". According to `SAGE_ROOT/spkg/bin/sage-arch-env`, it should be unset, "no", or "yes", so you should test that it's set to "yes".



---

archive/issue_comments_155776.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-06-21T17:35:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155776",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_155777.json:
```json
{
    "body": "You should also take [this possible change to CPPFLAGS](http://trac.sagemath.org/sage_trac/ticket/11080#comment:323) into account. For example:\n\n```diff\ndiff --git a/spkg-install b/spkg-install\n--- a/spkg-install\n+++ b/spkg-install\n@@ -17,10 +17,10 @@ die () {\n export CPATH=\"$CPATH\"\"$SAGE_LOCAL\"/include\n export LIBRARY_PATH=\"$LIBRARY_PATH\"\"$SAGE_LOCAL\"/lib\n \n-export CPPFLAGS=\"-I$SAGE_LOCAL/include $CPPFLAGS\"\n+export CPPFLAGS=\"-I$SAGE_LOCAL/include $CPPFLAGS -D_XOPEN_SOURCE=500\"\n export LDFLAGS=\"-L$SAGE_LOCAL/lib $LDFLAGS\"\n \n-if [ -n $SAGE64 ]; then\n+if [ $SAGE64 = \"yes\" ]; then\n     echo \"Building with extra 64-bit flags for MacOS X and Open Solaris.\"\n     if [ -z $CFLAG64 ]; then\n         CFLAG64=-m64\n```\n\n(even better, with a comment explaining why CPPFLAGS has been changed)",
    "created_at": "2012-06-21T17:51:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155777",
    "user": "https://github.com/jhpalmieri"
}
```

You should also take [this possible change to CPPFLAGS](http://trac.sagemath.org/sage_trac/ticket/11080#comment:323) into account. For example:

```diff
diff --git a/spkg-install b/spkg-install
--- a/spkg-install
+++ b/spkg-install
@@ -17,10 +17,10 @@ die () {
 export CPATH="$CPATH""$SAGE_LOCAL"/include
 export LIBRARY_PATH="$LIBRARY_PATH""$SAGE_LOCAL"/lib
 
-export CPPFLAGS="-I$SAGE_LOCAL/include $CPPFLAGS"
+export CPPFLAGS="-I$SAGE_LOCAL/include $CPPFLAGS -D_XOPEN_SOURCE=500"
 export LDFLAGS="-L$SAGE_LOCAL/lib $LDFLAGS"
 
-if [ -n $SAGE64 ]; then
+if [ $SAGE64 = "yes" ]; then
     echo "Building with extra 64-bit flags for MacOS X and Open Solaris."
     if [ -z $CFLAG64 ]; then
         CFLAG64=-m64
```

(even better, with a comment explaining why CPPFLAGS has been changed)



---

archive/issue_comments_155778.json:
```json
{
    "body": "With these changes, this spkg builds on OS X Lion, sage.math, hawk, and skynet machines mark (after installing the openssl spkg from #13126), cicero, iras (with openssl), silius (with openssl), and taurus. So it's looking good to me.",
    "created_at": "2012-06-21T19:50:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155778",
    "user": "https://github.com/jhpalmieri"
}
```

With these changes, this spkg builds on OS X Lion, sage.math, hawk, and skynet machines mark (after installing the openssl spkg from #13126), cicero, iras (with openssl), silius (with openssl), and taurus. So it's looking good to me.



---

archive/issue_comments_155779.json:
```json
{
    "body": "SPKG updated with your changes, more or less:\n\n\n```diff\ndiff --git a/spkg-install b/spkg-install\n--- a/spkg-install\n+++ b/spkg-install\n@@ -17,10 +17,13 @@\n export CPATH=\"$CPATH\"\"$SAGE_LOCAL\"/include\n export LIBRARY_PATH=\"$LIBRARY_PATH\"\"$SAGE_LOCAL\"/lib\n \n-export CPPFLAGS=\"-I$SAGE_LOCAL/include $CPPFLAGS\"\n+# note: the -D_XOPEN_SOURCE=500 is to fix build errors in Twisted 12.1 on\n+# Solaris. See http://trac.sagemath.org/sage_trac/ticket/11080#comment:314 and\n+# the subsequent few comments.\n+export CPPFLAGS=\"-I$SAGE_LOCAL/include -D_XOPEN_SOURCE=500 $CPPFLAGS\"\n export LDFLAGS=\"-L$SAGE_LOCAL/lib $LDFLAGS\"\n \n-if [ -n $SAGE64 ]; then\n+if [ $SAGE64 = \"yes\" ]; then\n     echo \"Building with extra 64-bit flags for MacOS X and Open Solaris.\"\n     if [ -z $CFLAG64 ]; then\n         CFLAG64=-m64\n```\n",
    "created_at": "2012-06-21T21:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155779",
    "user": "https://github.com/kini"
}
```

SPKG updated with your changes, more or less:


```diff
diff --git a/spkg-install b/spkg-install
--- a/spkg-install
+++ b/spkg-install
@@ -17,10 +17,13 @@
 export CPATH="$CPATH""$SAGE_LOCAL"/include
 export LIBRARY_PATH="$LIBRARY_PATH""$SAGE_LOCAL"/lib
 
-export CPPFLAGS="-I$SAGE_LOCAL/include $CPPFLAGS"
+# note: the -D_XOPEN_SOURCE=500 is to fix build errors in Twisted 12.1 on
+# Solaris. See http://trac.sagemath.org/sage_trac/ticket/11080#comment:314 and
+# the subsequent few comments.
+export CPPFLAGS="-I$SAGE_LOCAL/include -D_XOPEN_SOURCE=500 $CPPFLAGS"
 export LDFLAGS="-L$SAGE_LOCAL/lib $LDFLAGS"
 
-if [ -n $SAGE64 ]; then
+if [ $SAGE64 = "yes" ]; then
     echo "Building with extra 64-bit flags for MacOS X and Open Solaris."
     if [ -z $CFLAG64 ]; then
         CFLAG64=-m64
```




---

archive/issue_comments_155780.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-06-21T21:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155780",
    "user": "https://github.com/kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_155781.json:
```json
{
    "body": "On my Mac (OS X 10.7), I can't get worksheets to actually evaluate anything. With Chrome, Firefox, and Safari, I see an evaluate button, but clicking on it does nothing. Hitting 'shift-enter' either does nothing (Firefox) or gives me a new line in the current cell (Chrome and Safari), and does not evaluate anything. Hitting 'Save & quit' does nothing (Chrome and Safari) or actually quits the current worksheet (Firefox).\n\nI think I see some of the same behavior with 0.9.0, but not as severe: it works in Firefox, but not in Chrome or Safari. I'm not sure about that, though; I'm not sure my 0.9.0 install was clean, or whether I corrupted it with 0.9.1 related things.\n\nDoes it matter that there is no directory for this version of sagenb in `SAGE_LOCAL/lib/python/site-packages/`? After installing 0.9.0 and then 0.9.1, I see\n\n```\n  drwxr-xr-x    4 palmieri  admin    136 Jun 19 11:13 sagenb-0.8.29-py2.7.egg\n  drwxr-xr-x    4 palmieri  admin    136 Jun 21 16:47 sagenb-0.9.0-py2.7.egg\n  -rw-r--r--    1 palmieri  admin     26 Jun 21 16:59 sagenb.egg-link\n```\n",
    "created_at": "2012-06-22T00:16:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155781",
    "user": "https://github.com/jhpalmieri"
}
```

On my Mac (OS X 10.7), I can't get worksheets to actually evaluate anything. With Chrome, Firefox, and Safari, I see an evaluate button, but clicking on it does nothing. Hitting 'shift-enter' either does nothing (Firefox) or gives me a new line in the current cell (Chrome and Safari), and does not evaluate anything. Hitting 'Save & quit' does nothing (Chrome and Safari) or actually quits the current worksheet (Firefox).

I think I see some of the same behavior with 0.9.0, but not as severe: it works in Firefox, but not in Chrome or Safari. I'm not sure about that, though; I'm not sure my 0.9.0 install was clean, or whether I corrupted it with 0.9.1 related things.

Does it matter that there is no directory for this version of sagenb in `SAGE_LOCAL/lib/python/site-packages/`? After installing 0.9.0 and then 0.9.1, I see

```
  drwxr-xr-x    4 palmieri  admin    136 Jun 19 11:13 sagenb-0.8.29-py2.7.egg
  drwxr-xr-x    4 palmieri  admin    136 Jun 21 16:47 sagenb-0.9.0-py2.7.egg
  -rw-r--r--    1 palmieri  admin     26 Jun 21 16:59 sagenb.egg-link
```




---

archive/issue_comments_155782.json:
```json
{
    "body": "I was able to duplicate this on linux. The problem went away when I did a hard refresh of the page, forcing my browser to reload all javascript. The problem is probably caused by [this](https://github.com/sagemath/sagenb/commit/20750380437c69d74caa33f79e657b2d3047079e) or [this](https://github.com/sagemath/sagenb/commit/b64d8938316ce71275f4a2d7d3101c4b601e1127).\n\nDoes a hard refresh solve the problem on your end too?",
    "created_at": "2012-06-22T00:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155782",
    "user": "https://github.com/kini"
}
```

I was able to duplicate this on linux. The problem went away when I did a hard refresh of the page, forcing my browser to reload all javascript. The problem is probably caused by [this](https://github.com/sagemath/sagenb/commit/20750380437c69d74caa33f79e657b2d3047079e) or [this](https://github.com/sagemath/sagenb/commit/b64d8938316ce71275f4a2d7d3101c4b601e1127).

Does a hard refresh solve the problem on your end too?



---

archive/issue_comments_155783.json:
```json
{
    "body": "A hard refresh helps to get 0.9.0 to work, but not 0.9.1. \n\nBy the way, when the notebook is running, how can I tell which version is running? I would suggest having a variable, or displaying it somewhere when the notebook opens.",
    "created_at": "2012-06-22T02:41:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155783",
    "user": "https://github.com/jhpalmieri"
}
```

A hard refresh helps to get 0.9.0 to work, but not 0.9.1. 

By the way, when the notebook is running, how can I tell which version is running? I would suggest having a variable, or displaying it somewhere when the notebook opens.



---

archive/issue_comments_155784.json:
```json
{
    "body": "Um, wow. Silly typo in [this commit](https://github.com/sagemath/sagenb/commit/b64d8938316ce71275f4a2d7d3101c4b601e1127). I'll fix this, and actually I think I'm going to call this 0.10. Our version numbers are moving too slowly. Adding mathjax is a lot more substantial of a change than a bump to the patch level should cause a user to expect.",
    "created_at": "2012-06-22T05:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155784",
    "user": "https://github.com/kini"
}
```

Um, wow. Silly typo in [this commit](https://github.com/sagemath/sagenb/commit/b64d8938316ce71275f4a2d7d3101c4b601e1127). I'll fix this, and actually I think I'm going to call this 0.10. Our version numbers are moving too slowly. Adding mathjax is a lot more substantial of a change than a bump to the patch level should cause a user to expect.



---

archive/issue_comments_155785.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-06-22T05:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155785",
    "user": "https://github.com/kini"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_155786.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-06-22T07:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155786",
    "user": "https://github.com/kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_155787.json:
```json
{
    "body": "OK, new SPKG is up.\n\n>By the way, when the notebook is running, how can I tell which version is running? I would suggest having a variable, or displaying it somewhere when the notebook opens.\n\n`sagenb.misc.misc.SAGENB_VERSION` should tell you that, but it's sort of a hack. I probably could have changed that in the packaging rewrite...",
    "created_at": "2012-06-22T07:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155787",
    "user": "https://github.com/kini"
}
```

OK, new SPKG is up.

>By the way, when the notebook is running, how can I tell which version is running? I would suggest having a variable, or displaying it somewhere when the notebook opens.

`sagenb.misc.misc.SAGENB_VERSION` should tell you that, but it's sort of a hack. I probably could have changed that in the packaging rewrite...



---

archive/issue_comments_155788.json:
```json
{
    "body": "Okay, now a hard refresh is getting everything to work, on all three browsers. Now, is there any way to set it up to avoid the hard refresh? Otherwise users may be frustrated when they first switch to the new notebook.",
    "created_at": "2012-06-22T15:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155788",
    "user": "https://github.com/jhpalmieri"
}
```

Okay, now a hard refresh is getting everything to work, on all three browsers. Now, is there any way to set it up to avoid the hard refresh? Otherwise users may be frustrated when they first switch to the new notebook.



---

archive/issue_comments_155789.json:
```json
{
    "body": "Attachment [trac_13121-scripts.patch](tarball://root/attachments/some-uuid/ticket13121/trac_13121-scripts.patch) by @jhpalmieri created at 2012-06-22 16:02:55\n\nscripts repo",
    "created_at": "2012-06-22T16:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155789",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment [trac_13121-scripts.patch](tarball://root/attachments/some-uuid/ticket13121/trac_13121-scripts.patch) by @jhpalmieri created at 2012-06-22 16:02:55

scripts repo



---

archive/issue_comments_155790.json:
```json
{
    "body": "I've attached a patch to put \"webassets\" into the .hgignore file.",
    "created_at": "2012-06-22T16:04:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155790",
    "user": "https://github.com/jhpalmieri"
}
```

I've attached a patch to put "webassets" into the .hgignore file.



---

archive/issue_comments_155791.json:
```json
{
    "body": "Thanks for the .hgignore patch.\n\nAs for avoiding hard refreshes, it might be possible to make Flask set some HTTP headers to the date/time when the server was started, to advise client-side caching. I'm not sure of the details, but it's probably not a one-liner like the typo fix I just made was; I'd also consider it more of a feature than a bugfix, so probably it won't go into 0.10.",
    "created_at": "2012-06-22T21:51:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155791",
    "user": "https://github.com/kini"
}
```

Thanks for the .hgignore patch.

As for avoiding hard refreshes, it might be possible to make Flask set some HTTP headers to the date/time when the server was started, to advise client-side caching. I'm not sure of the details, but it's probably not a one-liner like the typo fix I just made was; I'd also consider it more of a feature than a bugfix, so probably it won't go into 0.10.



---

archive/issue_comments_155792.json:
```json
{
    "body": "(I've set myself as the author since this ticket is just about making an SPKG - there are many more important contributors to the new version of sagenb than me, for the record.)",
    "created_at": "2012-06-23T07:55:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155792",
    "user": "https://github.com/kini"
}
```

(I've set myself as the author since this ticket is just about making an SPKG - there are many more important contributors to the new version of sagenb than me, for the record.)



---

archive/issue_comments_155793.json:
```json
{
    "body": "This is mostly working for me on OS X Lion, except issues with #8473. Otherwise, the spkg looks good to me. People should test it on other platforms.",
    "created_at": "2012-06-23T16:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155793",
    "user": "https://github.com/jhpalmieri"
}
```

This is mostly working for me on OS X Lion, except issues with #8473. Otherwise, the spkg looks good to me. People should test it on other platforms.



---

archive/issue_comments_155794.json:
```json
{
    "body": "Any objections to making this a blocker for sage-5.2?  It feels to me like sage-0.9.0 is a kind of \"beta version\" for sage-0.10.0, so I would really prefer to have sage-0.10.0 in the final release.",
    "created_at": "2012-06-26T11:58:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155794",
    "user": "https://github.com/jdemeyer"
}
```

Any objections to making this a blocker for sage-5.2?  It feels to me like sage-0.9.0 is a kind of "beta version" for sage-0.10.0, so I would really prefer to have sage-0.10.0 in the final release.



---

archive/issue_comments_155795.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2012-06-26T11:58:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155795",
    "user": "https://github.com/jdemeyer"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_155796.json:
```json
{
    "body": "Actually, I think of 0.9.0 as sort of the stable, LTS release where we had a *long* feature freeze and concentrated on stability.  0.10.0 is like the release just after LTS stable release, where we merged in a bunch of new functionality that was put off during the long feature freeze.  There are some important bugfixes in 0.10.0 (IIRC), but there is a lot of new functionality in 0.10 too.",
    "created_at": "2012-06-26T13:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155796",
    "user": "https://github.com/jasongrout"
}
```

Actually, I think of 0.9.0 as sort of the stable, LTS release where we had a *long* feature freeze and concentrated on stability.  0.10.0 is like the release just after LTS stable release, where we merged in a bunch of new functionality that was put off during the long feature freeze.  There are some important bugfixes in 0.10.0 (IIRC), but there is a lot of new functionality in 0.10 too.



---

archive/issue_comments_155797.json:
```json
{
    "body": "That said, I would prefer 0.10 to be in 5.2, but I think it's probably more important to have 0.9 out by the time school starts.  \n\nThere is still one or two rather frustrating known bugs in 0.9 (and 0.10): some sort of leak where worker processes don't get killed, and sometimes creating a new worksheet actually just gets an old worksheet.  If we solve those in 0.10.1 or something, it would be great to have that as our before-semester release.",
    "created_at": "2012-06-26T13:25:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155797",
    "user": "https://github.com/jasongrout"
}
```

That said, I would prefer 0.10 to be in 5.2, but I think it's probably more important to have 0.9 out by the time school starts.  

There is still one or two rather frustrating known bugs in 0.9 (and 0.10): some sort of leak where worker processes don't get killed, and sometimes creating a new worksheet actually just gets an old worksheet.  If we solve those in 0.10.1 or something, it would be great to have that as our before-semester release.



---

archive/issue_comments_155798.json:
```json
{
    "body": "> That said, I would prefer 0.10 to be in 5.2, but I think it's probably more important to have 0.9 out by the time school starts.  \nCorrect.",
    "created_at": "2012-06-26T13:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155798",
    "user": "https://github.com/kcrisman"
}
```

> That said, I would prefer 0.10 to be in 5.2, but I think it's probably more important to have 0.9 out by the time school starts.  
Correct.



---

archive/issue_comments_155799.json:
```json
{
    "body": "Replying to [comment:23 jhpalmieri]:\n> This is mostly working for me on OS X Lion, except issues with #8473. Otherwise, the spkg looks good to me. People should test it on other platforms.\n\nJust for reference, this was (or will be, when it's merged) dealt with - see [this pull request on sagenb](https://github.com/sagemath/sagenb/issues/76).",
    "created_at": "2012-06-26T13:36:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155799",
    "user": "https://github.com/kcrisman"
}
```

Replying to [comment:23 jhpalmieri]:
> This is mostly working for me on OS X Lion, except issues with #8473. Otherwise, the spkg looks good to me. People should test it on other platforms.

Just for reference, this was (or will be, when it's merged) dealt with - see [this pull request on sagenb](https://github.com/sagemath/sagenb/issues/76).



---

archive/issue_comments_155800.json:
```json
{
    "body": "Replying to [comment:28 kcrisman]:\n> Replying to [comment:23 jhpalmieri]:\n> > This is mostly working for me on OS X Lion, except issues with #8473. Otherwise, the spkg looks good to me. People should test it on other platforms.\n> \n> Just for reference, this was (or will be, when it's merged) dealt with - see [this pull request on sagenb](https://github.com/sagemath/sagenb/issues/76).\n\nRight. Keshav, when you have a chance, could you make a new 0.10.0 spkg for us to test? Any notebook fans: can you positively review the last change at #11080 (the one which allows building on Solaris)?",
    "created_at": "2012-06-26T22:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155800",
    "user": "https://github.com/jhpalmieri"
}
```

Replying to [comment:28 kcrisman]:
> Replying to [comment:23 jhpalmieri]:
> > This is mostly working for me on OS X Lion, except issues with #8473. Otherwise, the spkg looks good to me. People should test it on other platforms.
> 
> Just for reference, this was (or will be, when it's merged) dealt with - see [this pull request on sagenb](https://github.com/sagemath/sagenb/issues/76).

Right. Keshav, when you have a chance, could you make a new 0.10.0 spkg for us to test? Any notebook fans: can you positively review the last change at #11080 (the one which allows building on Solaris)?



---

archive/issue_comments_155801.json:
```json
{
    "body": "To clarify for whoever makes the \"final\" spkg here - to make sure #8473 is a-ok, we would need [this pull request](https://github.com/sagemath/sagenb/pull/77) and [this one](https://github.com/sagemath/sagenb/pull/78) to fix the minor issues John mentioned.",
    "created_at": "2012-06-27T15:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155801",
    "user": "https://github.com/kcrisman"
}
```

To clarify for whoever makes the "final" spkg here - to make sure #8473 is a-ok, we would need [this pull request](https://github.com/sagemath/sagenb/pull/77) and [this one](https://github.com/sagemath/sagenb/pull/78) to fix the minor issues John mentioned.



---

archive/issue_comments_155802.json:
```json
{
    "body": "I'm confused about the location of JMOL. It used to be (before #11080) part of sagenb. Now it isn't (or at least I don't see it anywhere). Does it need to be distributed as a separate spkg, and thus included in spkg/standard/deps? Or should the new JMOL spkg from #12299 be part of this spkg?\n\nOh, I see: it is now in spkg/standard/deps, and it needs to be included as a separate spkg.",
    "created_at": "2012-06-27T23:13:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155802",
    "user": "https://github.com/jhpalmieri"
}
```

I'm confused about the location of JMOL. It used to be (before #11080) part of sagenb. Now it isn't (or at least I don't see it anywhere). Does it need to be distributed as a separate spkg, and thus included in spkg/standard/deps? Or should the new JMOL spkg from #12299 be part of this spkg?

Oh, I see: it is now in spkg/standard/deps, and it needs to be included as a separate spkg.



---

archive/issue_comments_155803.json:
```json
{
    "body": "See #11503, where the deps file is patched to require the new JMOL spkg from #11503. For some reason #12299 seems to require a newer version of the SPKG, a version which is not on #11503 or anywhere else. I posted a comment on #11503 about it.",
    "created_at": "2012-06-27T23:21:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155803",
    "user": "https://github.com/kini"
}
```

See #11503, where the deps file is patched to require the new JMOL spkg from #11503. For some reason #12299 seems to require a newer version of the SPKG, a version which is not on #11503 or anywhere else. I posted a comment on #11503 about it.



---

archive/issue_comments_155804.json:
```json
{
    "body": "The spkg here needs work: when it gets installed, `SAGE_ROOT/devel` may not yet exist. So something like this:\n\n```diff\ndiff --git a/spkg-install b/spkg-install\n--- a/spkg-install\n+++ b/spkg-install\n@@ -53,6 +53,7 @@ BASENAME=${BASENAME%.tar.gz}\n #easy_install -H None -f src \"sagenb\" || die \"Error installing sagenb !\"\n \n # Extract sagenb into $SAGE_ROOT/devel and set up the symlink\n+mkdir -p \"$SAGE_ROOT/devel\"\n cd \"$SAGE_ROOT/devel\"\n if [ -d \"$SAGE_ROOT/devel/sagenb-main\" ]; then\n     echo \"Moving old SageNB package to '$SAGE_ROOT/devel/sagenb-main-old'...\"\n```\n",
    "created_at": "2012-06-28T00:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155804",
    "user": "https://github.com/jhpalmieri"
}
```

The spkg here needs work: when it gets installed, `SAGE_ROOT/devel` may not yet exist. So something like this:

```diff
diff --git a/spkg-install b/spkg-install
--- a/spkg-install
+++ b/spkg-install
@@ -53,6 +53,7 @@ BASENAME=${BASENAME%.tar.gz}
 #easy_install -H None -f src "sagenb" || die "Error installing sagenb !"
 
 # Extract sagenb into $SAGE_ROOT/devel and set up the symlink
+mkdir -p "$SAGE_ROOT/devel"
 cd "$SAGE_ROOT/devel"
 if [ -d "$SAGE_ROOT/devel/sagenb-main" ]; then
     echo "Moving old SageNB package to '$SAGE_ROOT/devel/sagenb-main-old'..."
```




---

archive/issue_comments_155805.json:
```json
{
    "body": "> See #11503, where the deps file is patched to require the new JMOL spkg from #11503. For some reason #12299 seems to require a newer version of the SPKG, a version which is not on #11503 or anywhere else. I posted a comment on #11503 about it.\nAs far as I know, this is on purpose, because the newest Jmol at #12299 needs the many updates to Jmol there.  In that sense #11503 is a 'hard' prereq for #11080 and hence this ticket.  I am pretty sure Jonathan was careful about exactly which version of Jmol needed to be with which other patches.",
    "created_at": "2012-06-28T01:21:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155805",
    "user": "https://github.com/kcrisman"
}
```

> See #11503, where the deps file is patched to require the new JMOL spkg from #11503. For some reason #12299 seems to require a newer version of the SPKG, a version which is not on #11503 or anywhere else. I posted a comment on #11503 about it.
As far as I know, this is on purpose, because the newest Jmol at #12299 needs the many updates to Jmol there.  In that sense #11503 is a 'hard' prereq for #11080 and hence this ticket.  I am pretty sure Jonathan was careful about exactly which version of Jmol needed to be with which other patches.



---

archive/issue_comments_155806.json:
```json
{
    "body": "OK, I see, thanks.",
    "created_at": "2012-06-28T02:11:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155806",
    "user": "https://github.com/kini"
}
```

OK, I see, thanks.



---

archive/issue_comments_155807.json:
```json
{
    "body": "jhpalmieri or others:\n\nWhen you ran into the problem with the evaluate button not working, did you find that other buttons also stopped working?  For instance, the Stop and Archive buttons on the main worksheet list page.  I must have done something wrong because even a hard refresh isn't getting things to work for me, but I wanted to ask if anyone had tried those.",
    "created_at": "2012-06-29T17:18:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155807",
    "user": "https://github.com/kcrisman"
}
```

jhpalmieri or others:

When you ran into the problem with the evaluate button not working, did you find that other buttons also stopped working?  For instance, the Stop and Archive buttons on the main worksheet list page.  I must have done something wrong because even a hard refresh isn't getting things to work for me, but I wanted to ask if anyone had tried those.



---

archive/issue_comments_155808.json:
```json
{
    "body": "For me, on some browsers, everything stopped working. A hard refresh did fix it (Firefox or Chrome: cmd-shift-r. Safari: hold the option key down while hitting the little \"refresh\" symbol at the right end of the address box).",
    "created_at": "2012-06-29T17:48:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155808",
    "user": "https://github.com/jhpalmieri"
}
```

For me, on some browsers, everything stopped working. A hard refresh did fix it (Firefox or Chrome: cmd-shift-r. Safari: hold the option key down while hitting the little "refresh" symbol at the right end of the address box).



---

archive/issue_comments_155809.json:
```json
{
    "body": "> For me, on some browsers, everything stopped working. \nOk.\n> A hard refresh did fix it (Firefox or Chrome: cmd-shift-r. Safari: hold the option key down while hitting the little \"refresh\" symbol at the right end of the address box).\nYup, that's what I tried, and that didn't work.  But like I said on those commits in sagenb, maybe I just destroyed my installation anyway.\n\nEdit: I did finally manage to get the upstream commit of the parenthesis fix in to make it work with the \"hard refresh\".  That definitely needs some big warning somewhere...  Strange that doing it \"by hand\" didn't work, but getting from upstream did.",
    "created_at": "2012-06-29T17:56:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155809",
    "user": "https://github.com/kcrisman"
}
```

> For me, on some browsers, everything stopped working. 
Ok.
> A hard refresh did fix it (Firefox or Chrome: cmd-shift-r. Safari: hold the option key down while hitting the little "refresh" symbol at the right end of the address box).
Yup, that's what I tried, and that didn't work.  But like I said on those commits in sagenb, maybe I just destroyed my installation anyway.

Edit: I did finally manage to get the upstream commit of the parenthesis fix in to make it work with the "hard refresh".  That definitely needs some big warning somewhere...  Strange that doing it "by hand" didn't work, but getting from upstream did.



---

archive/issue_comments_155810.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-06-29T23:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155810",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_155811.json:
```json
{
    "body": "Sorry for the delay, John.\n\nI'm going to release a 0.10.1 with the fixes for #8473 and also hopefully a fix for Jason Yeo's javascript event shuffling (see comments at the bottom of [PR #69](https://github.com/sagemath/sagenb/pull/69) on github), so I'm leaving this ticket as needs_work.",
    "created_at": "2012-07-03T08:31:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155811",
    "user": "https://github.com/kini"
}
```

Sorry for the delay, John.

I'm going to release a 0.10.1 with the fixes for #8473 and also hopefully a fix for Jason Yeo's javascript event shuffling (see comments at the bottom of [PR #69](https://github.com/sagemath/sagenb/pull/69) on github), so I'm leaving this ticket as needs_work.



---

archive/issue_comments_155812.json:
```json
{
    "body": "Anything else?",
    "created_at": "2012-07-08T16:42:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155812",
    "user": "https://github.com/kini"
}
```

Anything else?



---

archive/issue_comments_155813.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-07-08T16:42:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155813",
    "user": "https://github.com/kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_155814.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-07-09T19:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155814",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_155815.json:
```json
{
    "body": "I think this looks good now. The main parts have already been positively reviewed (as parts of the prerequisite tickets). The `spkg-install` script is in good shape, as is `SPKG.txt`. Let's merge it to get MathJax into Sage.",
    "created_at": "2012-07-09T19:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155815",
    "user": "https://github.com/jhpalmieri"
}
```

I think this looks good now. The main parts have already been positively reviewed (as parts of the prerequisite tickets). The `spkg-install` script is in good shape, as is `SPKG.txt`. Let's merge it to get MathJax into Sage.



---

archive/issue_comments_155816.json:
```json
{
    "body": "Probably meaningless, but I do get the following weirdness on OS X PPC when upgrading from 5.2.alpha0 (not beta0!) by using just the latest 0.10.1 spkg.\n\n```\nDasher-03:~/Desktop/sage-5.2.alpha0 student$ ./sage -i http://wstein.org/home/keshav/files/sagenb-0.10.1.spkg\nCalling sage-spkg on 'http://wstein.org/home/keshav/files/sagenb-0.10.1.spkg'\nAttempting to download package sagenb-0.10.1\nhttp://wstein.org/home/keshav/files/sagenb-0.10.1.spkg --> sagenb-0.10.1.spkg\n[..................................................]\nsagenb-0.10.1\n====================================================\nExtracting package /Users/student/Desktop/sage-5.2.alpha0/spkg/optional/sagenb-0.10.1.spkg\n-rw-r--r--   1 student  student  13506560 Jul 10 13:59 /Users/student/Desktop/sage-5.2.alpha0/spkg/optional/sagenb-0.10.1.spkg\nFinished extraction\n****************************************************\nHost system:\nDarwin Dasher-03.local 8.11.0 Darwin Kernel Version 8.11.0: Wed Oct 10 18:26:00 PDT 2007; root:xnu-792.24.17~1/RELEASE_PPC Power Macintosh powerpc\n****************************************************\nC compiler: gcc\nC compiler version:\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/Users/student/Desktop/sage-5.2.alpha0/local/libexec/gcc/powerpc-apple-darwin8.11.0/4.6.3/lto-wrapper\nTarget: powerpc-apple-darwin8.11.0\nConfigured with: ../src/configure --prefix=/Users/student/Desktop/sage-5.2.alpha0/local --with-local-prefix=/Users/student/Desktop/sage-5.2.alpha0/local --with-gmp=/Users/student/Desktop/sage-5.2.alpha0/local --with-mpfr=/Users/student/Desktop/sage-5.2.alpha0/local --with-mpc=/Users/student/Desktop/sage-5.2.alpha0/local --with-system-zlib --disable-multilib  \nThread model: posix\ngcc version 4.6.3 (GCC) \n****************************************************\nProcessing Twisted-12.1.0.tar.bz2\nRunning Twisted-12.1.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-UaYpDr/Twisted-12.1.0/egg-dist-tmp-ywlzEJ\nconftest.c:1:23: fatal error: sys/epoll.h: No such file or directory\ncompilation terminated.\ntwisted/python/_initgroups.c: In function 'initgroups_initgroups':\ntwisted/python/_initgroups.c:39:2: warning: implicit declaration of function 'initgroups' [-Wimplicit-function-declaration]\ntwisted/python/sendmsg.c: In function 'sendmsg_sendmsg':\ntwisted/python/sendmsg.c:243:13: warning: implicit declaration of function 'CMSG_SPACE' [-Wimplicit-function-declaration]\ntwisted/python/sendmsg.c:306:13: warning: implicit declaration of function 'CMSG_LEN' [-Wimplicit-function-declaration]\ntwisted/internet/_sigchld.c: In function 'got_signal':\ntwisted/internet/_sigchld.c:15:9: warning: variable 'ignored_result' set but not used [-Wunused-but-set-variable]\nRemoving Twisted 12.0.0 from easy-install.pth file\nAdding Twisted 12.1.0 to easy-install.pth file\n```\n\nafter which all proceeds normally.  It just looks a lot like comment:314:ticket:11080 so I wondered.\n\nEdit:\n\n```\n./spkg-install: line 76: cd: sagenb: No such file or directory\npython: can't open file 'setup.py': [Errno 2] No such file or directory\nError installing sagenb via setup.py develop\n\nreal    11m4.240s\nuser    3m0.371s\nsys     2m27.994s\n************************************************************************\nError installing package sagenb-0.10.1\n************************************************************************\n```\n\nwhich is weird enough that I must have done something wrong.  I'll try beta0 instead, sorry for the noise.",
    "created_at": "2012-07-10T18:08:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155816",
    "user": "https://github.com/kcrisman"
}
```

Probably meaningless, but I do get the following weirdness on OS X PPC when upgrading from 5.2.alpha0 (not beta0!) by using just the latest 0.10.1 spkg.

```
Dasher-03:~/Desktop/sage-5.2.alpha0 student$ ./sage -i http://wstein.org/home/keshav/files/sagenb-0.10.1.spkg
Calling sage-spkg on 'http://wstein.org/home/keshav/files/sagenb-0.10.1.spkg'
Attempting to download package sagenb-0.10.1
http://wstein.org/home/keshav/files/sagenb-0.10.1.spkg --> sagenb-0.10.1.spkg
[..................................................]
sagenb-0.10.1
====================================================
Extracting package /Users/student/Desktop/sage-5.2.alpha0/spkg/optional/sagenb-0.10.1.spkg
-rw-r--r--   1 student  student  13506560 Jul 10 13:59 /Users/student/Desktop/sage-5.2.alpha0/spkg/optional/sagenb-0.10.1.spkg
Finished extraction
****************************************************
Host system:
Darwin Dasher-03.local 8.11.0 Darwin Kernel Version 8.11.0: Wed Oct 10 18:26:00 PDT 2007; root:xnu-792.24.17~1/RELEASE_PPC Power Macintosh powerpc
****************************************************
C compiler: gcc
C compiler version:
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/Users/student/Desktop/sage-5.2.alpha0/local/libexec/gcc/powerpc-apple-darwin8.11.0/4.6.3/lto-wrapper
Target: powerpc-apple-darwin8.11.0
Configured with: ../src/configure --prefix=/Users/student/Desktop/sage-5.2.alpha0/local --with-local-prefix=/Users/student/Desktop/sage-5.2.alpha0/local --with-gmp=/Users/student/Desktop/sage-5.2.alpha0/local --with-mpfr=/Users/student/Desktop/sage-5.2.alpha0/local --with-mpc=/Users/student/Desktop/sage-5.2.alpha0/local --with-system-zlib --disable-multilib  
Thread model: posix
gcc version 4.6.3 (GCC) 
****************************************************
Processing Twisted-12.1.0.tar.bz2
Running Twisted-12.1.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-UaYpDr/Twisted-12.1.0/egg-dist-tmp-ywlzEJ
conftest.c:1:23: fatal error: sys/epoll.h: No such file or directory
compilation terminated.
twisted/python/_initgroups.c: In function 'initgroups_initgroups':
twisted/python/_initgroups.c:39:2: warning: implicit declaration of function 'initgroups' [-Wimplicit-function-declaration]
twisted/python/sendmsg.c: In function 'sendmsg_sendmsg':
twisted/python/sendmsg.c:243:13: warning: implicit declaration of function 'CMSG_SPACE' [-Wimplicit-function-declaration]
twisted/python/sendmsg.c:306:13: warning: implicit declaration of function 'CMSG_LEN' [-Wimplicit-function-declaration]
twisted/internet/_sigchld.c: In function 'got_signal':
twisted/internet/_sigchld.c:15:9: warning: variable 'ignored_result' set but not used [-Wunused-but-set-variable]
Removing Twisted 12.0.0 from easy-install.pth file
Adding Twisted 12.1.0 to easy-install.pth file
```

after which all proceeds normally.  It just looks a lot like comment:314:ticket:11080 so I wondered.

Edit:

```
./spkg-install: line 76: cd: sagenb: No such file or directory
python: can't open file 'setup.py': [Errno 2] No such file or directory
Error installing sagenb via setup.py develop

real    11m4.240s
user    3m0.371s
sys     2m27.994s
************************************************************************
Error installing package sagenb-0.10.1
************************************************************************
```

which is weird enough that I must have done something wrong.  I'll try beta0 instead, sorry for the noise.



---

archive/issue_comments_155817.json:
```json
{
    "body": "Incidentally, are the instructions in the description correct for 5.2.beta0?  I assume not, based on the presence of 0.10.0 and not 0.10.1. Thanks.",
    "created_at": "2012-07-10T18:30:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155817",
    "user": "https://github.com/kcrisman"
}
```

Incidentally, are the instructions in the description correct for 5.2.beta0?  I assume not, based on the presence of 0.10.0 and not 0.10.1. Thanks.



---

archive/issue_comments_155818.json:
```json
{
    "body": "Oops, sorry. Indeed, the instructions are not correct for 5.2.beta0, but not just because of 0.10.0 vs. 0.10.1 - I need to remove the parts about adding patches that are already merged in 5.2.beta0.",
    "created_at": "2012-07-11T05:29:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155818",
    "user": "https://github.com/kini"
}
```

Oops, sorry. Indeed, the instructions are not correct for 5.2.beta0, but not just because of 0.10.0 vs. 0.10.1 - I need to remove the parts about adding patches that are already merged in 5.2.beta0.



---

archive/issue_comments_155819.json:
```json
{
    "body": "OK, the only remaining instructions should now be correct for 5.2.beta0... can you try again, kcrisman?",
    "created_at": "2012-07-11T05:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155819",
    "user": "https://github.com/kini"
}
```

OK, the only remaining instructions should now be correct for 5.2.beta0... can you try again, kcrisman?



---

archive/issue_events_036124.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-11T08:58:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "milestone": "sage-5.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12949#event-36124"
}
```



---

archive/issue_events_036125.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-07-11T08:58:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12949#event-36125"
}
```



---

archive/issue_comments_155820.json:
```json
{
    "body": "Added a missing patch from #12299.",
    "created_at": "2012-07-11T09:28:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155820",
    "user": "https://github.com/kini"
}
```

Added a missing patch from #12299.



---

archive/issue_comments_155821.json:
```json
{
    "body": "The Jmol package has been updated to include more extensive version checking for the JVM.",
    "created_at": "2012-07-12T17:22:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155821",
    "user": "https://github.com/gutow"
}
```

The Jmol package has been updated to include more extensive version checking for the JVM.



---

archive/issue_comments_155822.json:
```json
{
    "body": "Update mathjax patch",
    "created_at": "2012-07-14T00:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155822",
    "user": "https://github.com/ppurka"
}
```

Update mathjax patch



---

archive/issue_comments_155823.json:
```json
{
    "body": "update jmol package to match latest on #12299",
    "created_at": "2012-07-14T22:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155823",
    "user": "https://github.com/gutow"
}
```

update jmol package to match latest on #12299



---

archive/issue_comments_155824.json:
```json
{
    "body": "I've installed this version on Sage-5.2.beta1 and it is still not possible to sign out.\n\nMoreover, when I removed all cookies of the site and got to the login page, I was able to register as a new user and I am pretty sure I have never enabled it (I did add one user manually as admin). I can't reproduce it, however, so maybe I've done something wrong.",
    "created_at": "2012-07-16T20:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155824",
    "user": "https://github.com/novoselt"
}
```

I've installed this version on Sage-5.2.beta1 and it is still not possible to sign out.

Moreover, when I removed all cookies of the site and got to the login page, I was able to register as a new user and I am pretty sure I have never enabled it (I did add one user manually as admin). I can't reproduce it, however, so maybe I've done something wrong.



---

archive/issue_comments_155825.json:
```json
{
    "body": "Jeroen: since 5.2.rc0 has been released, should I set this to the 5.3 milestone?",
    "created_at": "2012-07-17T06:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155825",
    "user": "https://github.com/kini"
}
```

Jeroen: since 5.2.rc0 has been released, should I set this to the 5.3 milestone?



---

archive/issue_comments_155826.json:
```json
{
    "body": "Never mind. For some reason I thought 5.2.rc0 had been released, but apparently it has not. Sorry for the noise.",
    "created_at": "2012-07-17T06:30:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155826",
    "user": "https://github.com/kini"
}
```

Never mind. For some reason I thought 5.2.rc0 had been released, but apparently it has not. Sorry for the noise.



---

archive/issue_comments_155827.json:
```json
{
    "body": "sage-5.2.rc0 is as good as released (in the sense that I have decided which patches it will contain).  So yes, this is going to be sage-5.3 or later.",
    "created_at": "2012-07-17T08:38:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155827",
    "user": "https://github.com/jdemeyer"
}
```

sage-5.2.rc0 is as good as released (in the sense that I have decided which patches it will contain).  So yes, this is going to be sage-5.3 or later.



---

archive/issue_comments_155828.json:
```json
{
    "body": "Adding patch from #12299 to make java dependent doctests in jmoldata.py optional.",
    "created_at": "2012-07-17T13:02:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155828",
    "user": "https://github.com/gutow"
}
```

Adding patch from #12299 to make java dependent doctests in jmoldata.py optional.



---

archive/issue_comments_155829.json:
```json
{
    "body": "Two issues:\n1. Evaluate button does not work for a cell until it loses focus to another (pull request 85 on git).\n2. Secure mode does not work even with system wide ssl-dev headers ( I have libcurl4-openssl-dev and libssl-dev installed).  Either the specifications or install checking need to be more specific.  I suggest that the spkg check for what is needed and prompts for a local install of openssl if what is needed is not available.\n\nError on launch of notebook in secure mode (this goes away after local openssl install):\n\n```\n/home/sage/sage-5.2.beta1/<ipython console> in <module>()\n\n/home/sage/sage-5.2.beta1/devel/sagenb/sagenb/notebook/notebook_object.py in __call__(self, *args, **kwds)\n    217     \"\"\"\n    218     def __call__(self, *args, **kwds):\n--> 219         return self.notebook(*args, **kwds)\n    220 \n    221     notebook = run_notebook.notebook_run\n\n/home/sage/sage-5.2.beta1/devel/sagenb/sagenb/notebook/run_notebook.py in notebook_run(self, directory, port, interface, port_tries, secure, reset, accounts, openid, server_pool, ulimit, timeout, upload, automatic_login, start_path, fork, quiet, server, profile, subnets, require_login, open_viewer, address)\n    614     os.chdir(cwd)\n    615     if e == 256:\n--> 616         raise socket.error\n    617 \n    618 def get_admin_passwd():\n\n```\n",
    "created_at": "2012-07-17T13:30:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155829",
    "user": "https://github.com/gutow"
}
```

Two issues:
1. Evaluate button does not work for a cell until it loses focus to another (pull request 85 on git).
2. Secure mode does not work even with system wide ssl-dev headers ( I have libcurl4-openssl-dev and libssl-dev installed).  Either the specifications or install checking need to be more specific.  I suggest that the spkg check for what is needed and prompts for a local install of openssl if what is needed is not available.

Error on launch of notebook in secure mode (this goes away after local openssl install):

```
/home/sage/sage-5.2.beta1/<ipython console> in <module>()

/home/sage/sage-5.2.beta1/devel/sagenb/sagenb/notebook/notebook_object.py in __call__(self, *args, **kwds)
    217     """
    218     def __call__(self, *args, **kwds):
--> 219         return self.notebook(*args, **kwds)
    220 
    221     notebook = run_notebook.notebook_run

/home/sage/sage-5.2.beta1/devel/sagenb/sagenb/notebook/run_notebook.py in notebook_run(self, directory, port, interface, port_tries, secure, reset, accounts, openid, server_pool, ulimit, timeout, upload, automatic_login, start_path, fork, quiet, server, profile, subnets, require_login, open_viewer, address)
    614     os.chdir(cwd)
    615     if e == 256:
--> 616         raise socket.error
    617 
    618 def get_admin_passwd():

```




---

archive/issue_comments_155830.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-07-17T13:30:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155830",
    "user": "https://github.com/gutow"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_155831.json:
```json
{
    "body": "Another issue:  New worksheets do not open empty.  They now copy their content from one of the other worksheets.",
    "created_at": "2012-07-17T13:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155831",
    "user": "https://github.com/gutow"
}
```

Another issue:  New worksheets do not open empty.  They now copy their content from one of the other worksheets.



---

archive/issue_comments_155832.json:
```json
{
    "body": "Thank you for all this careful testing, Jonathan.",
    "created_at": "2012-07-17T13:43:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155832",
    "user": "https://github.com/kcrisman"
}
```

Thank you for all this careful testing, Jonathan.



---

archive/issue_comments_155833.json:
```json
{
    "body": "Do new worksheets *always* copy their content?  They only sporadically do that for me; maybe one in ten or twenty.  If I open several new worksheets in succession, it eventually gets to a real blank worksheet and then things work okay from there.\n\nI commented on https://github.com/sagemath/sagenb/issues/87",
    "created_at": "2012-07-17T13:48:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155833",
    "user": "https://github.com/jasongrout"
}
```

Do new worksheets *always* copy their content?  They only sporadically do that for me; maybe one in ten or twenty.  If I open several new worksheets in succession, it eventually gets to a real blank worksheet and then things work okay from there.

I commented on https://github.com/sagemath/sagenb/issues/87



---

archive/issue_comments_155834.json:
```json
{
    "body": ">Thank you for all this careful testing, Jonathan.\n\n+1, yes, thank you :)\n\nAbout the SSL problem, is there any further output than what you've given? Can you in fact just run `sage -bn` on the command line and paste everything you get from then until the next command prompt?",
    "created_at": "2012-07-18T08:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155834",
    "user": "https://github.com/kini"
}
```

>Thank you for all this careful testing, Jonathan.

+1, yes, thank you :)

About the SSL problem, is there any further output than what you've given? Can you in fact just run `sage -bn` on the command line and paste everything you get from then until the next command prompt?



---

archive/issue_comments_155835.json:
```json
{
    "body": "Replying to [comment:66 kini]:\n> >Thank you for all this careful testing, Jonathan.\n> \n> +1, yes, thank you :)\nYou're welcome.  I was just updating my server so thought I would  try to pile in all the notebook stuff we thought was working.\n> \n> About the SSL problem, is there any further output than what you've given?\nThat's all the error output I get when I try to start a secure notebook on my system, without doing a local install of openssl.  Note, that this doesn't happen on all my systems.  I suspect that the way openssl is searched for is not working. Ubuntu 12.04 are the systems I'm having trouble with.\n>Can you in fact just run `sage -bn` on the command line and paste everything you get from then until the next command prompt?\nI'll see what I can do.  I think I saved the .tar so can make a clean copy to work with.",
    "created_at": "2012-07-18T19:08:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155835",
    "user": "https://github.com/gutow"
}
```

Replying to [comment:66 kini]:
> >Thank you for all this careful testing, Jonathan.
> 
> +1, yes, thank you :)
You're welcome.  I was just updating my server so thought I would  try to pile in all the notebook stuff we thought was working.
> 
> About the SSL problem, is there any further output than what you've given?
That's all the error output I get when I try to start a secure notebook on my system, without doing a local install of openssl.  Note, that this doesn't happen on all my systems.  I suspect that the way openssl is searched for is not working. Ubuntu 12.04 are the systems I'm having trouble with.
>Can you in fact just run `sage -bn` on the command line and paste everything you get from then until the next command prompt?
I'll see what I can do.  I think I saved the .tar so can make a clean copy to work with.



---

archive/issue_comments_155836.json:
```json
{
    "body": "This time I trapped a more complete error message when I started the server in secure mode.  This is on Ubuntu 12.04 with the following openssl related pacakges installed: openssl,python-openssl, libssl0.9.8,ssl-cert,libssl-doc,libssl-dev.\n\n```\n----------------------------------------------------------------------\n----------------------------------------------------------------------\n**********************************************************************\n*                                                                    *\n* Warning: this is a prerelease version, and it may be unstable.     *\n*                                                                    *\n**********************************************************************\nsage: notebook(secure=True,automatic_login=False)\nThe notebook files are stored in: sage_notebook.sagenb\n****************************************************\n*                                                  *\n* Open your web browser to https://localhost:8080  *\n*                                                  *\n****************************************************\nThere is an admin account.  If you do not remember the password,\nquit the notebook and type notebook(reset=True).\nExecuting twistd  --pidfile=\"sage_notebook.sagenb/sagenb.pid\" -ny \"sage_notebook.sagenb/twistedconf.tac\"\nUnhandled Error\nTraceback (most recent call last):\n  File \"/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/application/app.py\", line 652, in run\n    runApp(config)\n  File \"/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/scripts/twistd.py\", line 23, in runApp\n    _SomeApplicationRunner(config).run()\n  File \"/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/application/app.py\", line 386, in run\n    self.application = self.createOrGetApplication()\n  File \"/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/application/app.py\", line 451, in createOrGetApplication\n    application = getApplication(self.config, passphrase)\n--- <exception caught here> ---\n  File \"/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/application/app.py\", line 462, in getApplication\n    application = service.loadApplication(filename, style, passphrase)\n  File \"/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/application/service.py\", line 405, in loadApplication\n    application = sob.loadValueFromFile(filename, 'application', passphrase)\n  File \"/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/persisted/sob.py\", line 210, in loadValueFromFile\n    exec fileObj in d, d\n  File \"sage_notebook.sagenb/twistedconf.tac\", line 83, in <module>\n    s = strports.service('ssl:8080:interface=localhost:privateKey=/home/jonathan/.sage/notebook/private.pem:certKey=/home/jonathan/.sage/notebook/public.pem', site)\n  File \"/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/application/strports.py\", line 77, in service\n    endpoints._serverFromStringLegacy(reactor, description, default),\n  File \"/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/internet/endpoints.py\", line 873, in _serverFromStringLegacy\n    nameOrPlugin, args, kw = _parseServer(description, None, default)\n  File \"/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/internet/endpoints.py\", line 864, in _parseServer\n    return (endpointType.upper(),) + parser(factory, *args[1:], **kw)\n  File \"/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/internet/endpoints.py\", line 671, in _parseSSL\n    from twisted.internet import ssl\n  File \"/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/internet/ssl.py\", line 23, in <module>\n    from OpenSSL import SSL\n  File \"/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/pyOpenSSL-0.12-py2.7-linux-i686.egg/OpenSSL/__init__.py\", line 36, in <module>\n    from OpenSSL import crypto\nexceptions.ImportError: cannot import name crypto\n| Sage Version 5.2.rc0, Release Date: 2012-07-17                     |\n| Type \"notebook()\" for the browser-based notebook interface.        |\n| Type \"help()\" for help.                                            |\nFailed to load application: cannot import name crypto\n\n---------------------------------------------------------------------------\nerror                                     Traceback (most recent call last)\n\n/media/Extra_Space/Sage_installs/sage-5.2.rc0/<ipython console> in <module>()\n\n/media/Extra_Space/Sage_installs/sage-5.2.rc0/devel/sagenb/sagenb/notebook/notebook_object.pyc in __call__(self, *args, **kwds)\n    217     \"\"\"\n    218     def __call__(self, *args, **kwds):\n--> 219         return self.notebook(*args, **kwds)\n    220 \n    221     notebook = run_notebook.notebook_run\n\n/media/Extra_Space/Sage_installs/sage-5.2.rc0/devel/sagenb/sagenb/notebook/run_notebook.pyc in notebook_run(self, directory, port, interface, port_tries, secure, reset, accounts, openid, server_pool, ulimit, timeout, upload, automatic_login, start_path, fork, quiet, server, profile, subnets, require_login, open_viewer, address)\n    614     os.chdir(cwd)\n    615     if e == 256:\n--> 616         raise socket.error\n    617 \n    618 def get_admin_passwd():\n\nerror: \nsage:\n```\n",
    "created_at": "2012-07-19T22:12:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155836",
    "user": "https://github.com/gutow"
}
```

This time I trapped a more complete error message when I started the server in secure mode.  This is on Ubuntu 12.04 with the following openssl related pacakges installed: openssl,python-openssl, libssl0.9.8,ssl-cert,libssl-doc,libssl-dev.

```
----------------------------------------------------------------------
----------------------------------------------------------------------
**********************************************************************
*                                                                    *
* Warning: this is a prerelease version, and it may be unstable.     *
*                                                                    *
**********************************************************************
sage: notebook(secure=True,automatic_login=False)
The notebook files are stored in: sage_notebook.sagenb
****************************************************
*                                                  *
* Open your web browser to https://localhost:8080  *
*                                                  *
****************************************************
There is an admin account.  If you do not remember the password,
quit the notebook and type notebook(reset=True).
Executing twistd  --pidfile="sage_notebook.sagenb/sagenb.pid" -ny "sage_notebook.sagenb/twistedconf.tac"
Unhandled Error
Traceback (most recent call last):
  File "/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/application/app.py", line 652, in run
    runApp(config)
  File "/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/scripts/twistd.py", line 23, in runApp
    _SomeApplicationRunner(config).run()
  File "/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/application/app.py", line 386, in run
    self.application = self.createOrGetApplication()
  File "/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/application/app.py", line 451, in createOrGetApplication
    application = getApplication(self.config, passphrase)
--- <exception caught here> ---
  File "/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/application/app.py", line 462, in getApplication
    application = service.loadApplication(filename, style, passphrase)
  File "/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/application/service.py", line 405, in loadApplication
    application = sob.loadValueFromFile(filename, 'application', passphrase)
  File "/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/persisted/sob.py", line 210, in loadValueFromFile
    exec fileObj in d, d
  File "sage_notebook.sagenb/twistedconf.tac", line 83, in <module>
    s = strports.service('ssl:8080:interface=localhost:privateKey=/home/jonathan/.sage/notebook/private.pem:certKey=/home/jonathan/.sage/notebook/public.pem', site)
  File "/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/application/strports.py", line 77, in service
    endpoints._serverFromStringLegacy(reactor, description, default),
  File "/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/internet/endpoints.py", line 873, in _serverFromStringLegacy
    nameOrPlugin, args, kw = _parseServer(description, None, default)
  File "/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/internet/endpoints.py", line 864, in _parseServer
    return (endpointType.upper(),) + parser(factory, *args[1:], **kw)
  File "/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/internet/endpoints.py", line 671, in _parseSSL
    from twisted.internet import ssl
  File "/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/Twisted-12.1.0-py2.7-linux-i686.egg/twisted/internet/ssl.py", line 23, in <module>
    from OpenSSL import SSL
  File "/media/Extra_Space/Sage_installs/sage-5.2.rc0/local/lib/python2.7/site-packages/pyOpenSSL-0.12-py2.7-linux-i686.egg/OpenSSL/__init__.py", line 36, in <module>
    from OpenSSL import crypto
exceptions.ImportError: cannot import name crypto
| Sage Version 5.2.rc0, Release Date: 2012-07-17                     |
| Type "notebook()" for the browser-based notebook interface.        |
| Type "help()" for help.                                            |
Failed to load application: cannot import name crypto

---------------------------------------------------------------------------
error                                     Traceback (most recent call last)

/media/Extra_Space/Sage_installs/sage-5.2.rc0/<ipython console> in <module>()

/media/Extra_Space/Sage_installs/sage-5.2.rc0/devel/sagenb/sagenb/notebook/notebook_object.pyc in __call__(self, *args, **kwds)
    217     """
    218     def __call__(self, *args, **kwds):
--> 219         return self.notebook(*args, **kwds)
    220 
    221     notebook = run_notebook.notebook_run

/media/Extra_Space/Sage_installs/sage-5.2.rc0/devel/sagenb/sagenb/notebook/run_notebook.pyc in notebook_run(self, directory, port, interface, port_tries, secure, reset, accounts, openid, server_pool, ulimit, timeout, upload, automatic_login, start_path, fork, quiet, server, profile, subnets, require_login, open_viewer, address)
    614     os.chdir(cwd)
    615     if e == 256:
--> 616         raise socket.error
    617 
    618 def get_admin_passwd():

error: 
sage:
```




---

archive/issue_comments_155837.json:
```json
{
    "body": "OK, just checking, but did you install from source? If so, can you upload the output of `easy_install pyopenssl` inside a `sage -sh` session?",
    "created_at": "2012-07-26T09:29:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155837",
    "user": "https://github.com/kini"
}
```

OK, just checking, but did you install from source? If so, can you upload the output of `easy_install pyopenssl` inside a `sage -sh` session?



---

archive/issue_comments_155838.json:
```json
{
    "body": "I tried this updated to see if it fixes #13318. I see that `require_login` is now renamed to `automatic_login`, but I still end up with the login screen.",
    "created_at": "2012-08-03T16:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155838",
    "user": "https://github.com/vbraun"
}
```

I tried this updated to see if it fixes #13318. I see that `require_login` is now renamed to `automatic_login`, but I still end up with the login screen.



---

archive/issue_comments_155839.json:
```json
{
    "body": "I have the same issue with PyOpenSSL on Debian/sid, already with sagenb 0.9.1:\n\n\n```\ndaniel-mobile% sage -python\nPython 2.7.3 (default, Aug  1 2012, 19:24:06) \n[GCC 4.7.1] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import OpenSSL\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/opt/sage-5.2.rc0/local/lib/python2.7/site-packages/pyOpenSSL-0.12-py2.7-linux-x86_64.egg/OpenSSL/__init__.py\", line 41, in <module>\n    from OpenSSL import rand, SSL\nImportError: /opt/sage-5.2.rc0/local/lib/python2.7/site-packages/pyOpenSSL-0.12-py2.7-linux-x86_64.egg/OpenSSL/SSL.so: undefined symbol: SSLv2_method\n```\n\n\nlibssl1.0.0 is built with `no-ssl2` on Debian/Ubuntu for security reasons. Therefore the symbol `SSLv2_method` is not defined. Older PyOpenSSL versions don't check for this, but >=0.13 should be fine.\n\n(Aside: This also seems to cause funky segmentation faults on Debian/Ubuntu: https://groups.google.com/d/msg/sage-release/5TCe2JnV56o/QME2igZSF8YJ )",
    "created_at": "2012-08-07T18:34:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155839",
    "user": "https://github.com/dansme"
}
```

I have the same issue with PyOpenSSL on Debian/sid, already with sagenb 0.9.1:


```
daniel-mobile% sage -python
Python 2.7.3 (default, Aug  1 2012, 19:24:06) 
[GCC 4.7.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import OpenSSL
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/sage-5.2.rc0/local/lib/python2.7/site-packages/pyOpenSSL-0.12-py2.7-linux-x86_64.egg/OpenSSL/__init__.py", line 41, in <module>
    from OpenSSL import rand, SSL
ImportError: /opt/sage-5.2.rc0/local/lib/python2.7/site-packages/pyOpenSSL-0.12-py2.7-linux-x86_64.egg/OpenSSL/SSL.so: undefined symbol: SSLv2_method
```


libssl1.0.0 is built with `no-ssl2` on Debian/Ubuntu for security reasons. Therefore the symbol `SSLv2_method` is not defined. Older PyOpenSSL versions don't check for this, but >=0.13 should be fine.

(Aside: This also seems to cause funky segmentation faults on Debian/Ubuntu: https://groups.google.com/d/msg/sage-release/5TCe2JnV56o/QME2igZSF8YJ )



---

archive/issue_comments_155840.json:
```json
{
    "body": "IIRC we made a conscious decision to use PyOpenSSL <0.13 because 0.13 breaks with libssl <1.0.0 ... (?) Obviously \"<\"-based version dependencies are not viable in the long run though so I'd like to use new PyOpenSSL in the notebook if possible, certainly.",
    "created_at": "2012-08-08T00:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155840",
    "user": "https://github.com/kini"
}
```

IIRC we made a conscious decision to use PyOpenSSL <0.13 because 0.13 breaks with libssl <1.0.0 ... (?) Obviously "<"-based version dependencies are not viable in the long run though so I'd like to use new PyOpenSSL in the notebook if possible, certainly.



---

archive/issue_comments_155841.json:
```json
{
    "body": "I remembered correctly - http://trac.sagemath.org/sage_trac/ticket/11080#comment:159",
    "created_at": "2012-08-08T06:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155841",
    "user": "https://github.com/kini"
}
```

I remembered correctly - http://trac.sagemath.org/sage_trac/ticket/11080#comment:159



---

archive/issue_comments_155842.json:
```json
{
    "body": "Thanks, I did not realize that. It seems unfortunate that our PyOpenSSL is broken out of the box on recent Ubuntu / Debian installs (and messes `with sys.setdlopenflags` in the notebook process). I don't really know how this should be fixed. Is it reasonable, for example, to include 0.13 and not install it on systems with old OpenSSL (<0.9.8f) or use a patched version of either 0.12 or 0.13?",
    "created_at": "2012-08-08T07:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155842",
    "user": "https://github.com/dansme"
}
```

Thanks, I did not realize that. It seems unfortunate that our PyOpenSSL is broken out of the box on recent Ubuntu / Debian installs (and messes `with sys.setdlopenflags` in the notebook process). I don't really know how this should be fixed. Is it reasonable, for example, to include 0.13 and not install it on systems with old OpenSSL (<0.9.8f) or use a patched version of either 0.12 or 0.13?



---

archive/issue_comments_155843.json:
```json
{
    "body": "The best thing would be if pyOpenSSL 0.14 could be released to handle old OpenSSL versions...\n\nJeroen, can you try directly building pyOpenSSL on the OS X 10.4 PPC machine which caused the failure I linked a couple comments ago? That way we could submit a proper bug report to the pyOpenSSL devs.",
    "created_at": "2012-08-08T07:32:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155843",
    "user": "https://github.com/kini"
}
```

The best thing would be if pyOpenSSL 0.14 could be released to handle old OpenSSL versions...

Jeroen, can you try directly building pyOpenSSL on the OS X 10.4 PPC machine which caused the failure I linked a couple comments ago? That way we could submit a proper bug report to the pyOpenSSL devs.



---

archive/issue_comments_155844.json:
```json
{
    "body": "I found what seems to be an upstream bug report about this:\n\nhttps://bugs.launchpad.net/pyopenssl/+bug/845445\n\nNot much progress though.",
    "created_at": "2012-08-08T09:00:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155844",
    "user": "https://github.com/dansme"
}
```

I found what seems to be an upstream bug report about this:

https://bugs.launchpad.net/pyopenssl/+bug/845445

Not much progress though.



---

archive/issue_comments_155845.json:
```json
{
    "body": "Thanks for finding that.",
    "created_at": "2012-08-08T09:07:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155845",
    "user": "https://github.com/kini"
}
```

Thanks for finding that.



---

archive/issue_comments_155846.json:
```json
{
    "body": "I tested the patch there on a CentOS 5 machine I have access to. Hopefully the developer will consider that good enough to release the fix :)",
    "created_at": "2012-08-08T09:21:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155846",
    "user": "https://github.com/kini"
}
```

I tested the patch there on a CentOS 5 machine I have access to. Hopefully the developer will consider that good enough to release the fix :)



---

archive/issue_comments_155847.json:
```json
{
    "body": "I've made a pyOpenSSL SPKG so that we can use pyOpenSSL 0.13 + the patch daniels found. See #13384.",
    "created_at": "2012-08-20T07:57:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155847",
    "user": "https://github.com/kini"
}
```

I've made a pyOpenSSL SPKG so that we can use pyOpenSSL 0.13 + the patch daniels found. See #13384.



---

archive/issue_comments_155848.json:
```json
{
    "body": "Actually, we might not even need OpenSSL at all. See #13385.",
    "created_at": "2012-08-21T07:08:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155848",
    "user": "https://github.com/kini"
}
```

Actually, we might not even need OpenSSL at all. See #13385.



---

archive/issue_comments_155849.json:
```json
{
    "body": "Jonathan, do you see the non-empty new worksheets problem in the version of the Flask notebook in 5.2?\n\nOther than that, the only remaining work issue before this can be set to needs_review again is for someone to review [this pull request](https://github.com/sagemath/sagenb/pull/95) which makes pyOpenSSL an optional dependency of sagenb. Once that's in, I'll release 0.10.2 and make a new SPKG, since I have no idea where this non-empty new worksheets problem is coming from, nor can I seem to replicate it...",
    "created_at": "2012-08-22T15:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155849",
    "user": "https://github.com/kini"
}
```

Jonathan, do you see the non-empty new worksheets problem in the version of the Flask notebook in 5.2?

Other than that, the only remaining work issue before this can be set to needs_review again is for someone to review [this pull request](https://github.com/sagemath/sagenb/pull/95) which makes pyOpenSSL an optional dependency of sagenb. Once that's in, I'll release 0.10.2 and make a new SPKG, since I have no idea where this non-empty new worksheets problem is coming from, nor can I seem to replicate it...



---

archive/issue_comments_155850.json:
```json
{
    "body": "Replying to [comment:83 kini]:\n> Jonathan, do you see the non-empty new worksheets problem in the version of the Flask notebook in 5.2?\n\nI haven't seen the problem again since I manually reset my last worksheet id.  However, unless someone added code to check the worksheet directory on launch, I don't think it is fixed.  I only think the problem occurs if the server shuts down inappropriately; thus this should not be a blocker.  I vote for removing it as an issue from this ticket and setting up a separate ticket on the sagenb site.\n\nI like the make pyOpenSSL optional solution.\n\nI'm in my last week of ramp-up to classes, but I will see if I can do a test of things ASAP.",
    "created_at": "2012-08-22T16:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155850",
    "user": "https://github.com/gutow"
}
```

Replying to [comment:83 kini]:
> Jonathan, do you see the non-empty new worksheets problem in the version of the Flask notebook in 5.2?

I haven't seen the problem again since I manually reset my last worksheet id.  However, unless someone added code to check the worksheet directory on launch, I don't think it is fixed.  I only think the problem occurs if the server shuts down inappropriately; thus this should not be a blocker.  I vote for removing it as an issue from this ticket and setting up a separate ticket on the sagenb site.

I like the make pyOpenSSL optional solution.

I'm in my last week of ramp-up to classes, but I will see if I can do a test of things ASAP.



---

archive/issue_comments_155851.json:
```json
{
    "body": "Just to clarify, the version of the Flask notebook that came out in 5.2 is older than the one you tested on this ticket (which makes sense since this ticket is still open! :) ). I was asking because if you didn't see that behavior on 5.2, it would mean this problem is a recent regression, not an age-old bug.\n\nBut if you can't even replicate it on this ticket again, or say that it's a corner case, then I agree that it shouldn't be a blocker for this ticket (thankfully, since I have no idea what causes it).",
    "created_at": "2012-08-22T16:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155851",
    "user": "https://github.com/kini"
}
```

Just to clarify, the version of the Flask notebook that came out in 5.2 is older than the one you tested on this ticket (which makes sense since this ticket is still open! :) ). I was asking because if you didn't see that behavior on 5.2, it would mean this problem is a recent regression, not an age-old bug.

But if you can't even replicate it on this ticket again, or say that it's a corner case, then I agree that it shouldn't be a blocker for this ticket (thankfully, since I have no idea what causes it).



---

archive/issue_comments_155852.json:
```json
{
    "body": "I'm pretty sure it's an age-old bug.  I've been seeing it for at least 6-9 months on sagenb.org, on occasion.",
    "created_at": "2012-08-23T01:54:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155852",
    "user": "https://github.com/jasongrout"
}
```

I'm pretty sure it's an age-old bug.  I've been seeing it for at least 6-9 months on sagenb.org, on occasion.



---

archive/issue_comments_155853.json:
```json
{
    "body": "So except for updating README.rst at the [pull request](https://github.com/sagemath/sagenb/pull/95), is this done?",
    "created_at": "2012-08-23T15:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155853",
    "user": "https://github.com/jhpalmieri"
}
```

So except for updating README.rst at the [pull request](https://github.com/sagemath/sagenb/pull/95), is this done?



---

archive/issue_comments_155854.json:
```json
{
    "body": "See [my comment on #13385](http://trac.sagemath.org/sage_trac/ticket/13385#comment:34).",
    "created_at": "2012-08-24T06:03:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155854",
    "user": "https://github.com/kini"
}
```

See [my comment on #13385](http://trac.sagemath.org/sage_trac/ticket/13385#comment:34).



---

archive/issue_comments_155855.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-08-31T21:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155855",
    "user": "https://github.com/kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_155856.json:
```json
{
    "body": "OK, new SPKG is finally complete (I hope). Please test!",
    "created_at": "2012-08-31T21:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155856",
    "user": "https://github.com/kini"
}
```

OK, new SPKG is finally complete (I hope). Please test!



---

archive/issue_comments_155857.json:
```json
{
    "body": "oops",
    "created_at": "2012-08-31T21:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155857",
    "user": "https://github.com/kini"
}
```

oops



---

archive/issue_comments_155858.json:
```json
{
    "body": "Setting milestone away from sage-pending again since I don't think anything is pending anymore (is it?).",
    "created_at": "2012-09-02T12:55:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155858",
    "user": "https://github.com/kini"
}
```

Setting milestone away from sage-pending again since I don't think anything is pending anymore (is it?).



---

archive/issue_events_036126.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-09-02T12:55:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12949#event-36126"
}
```



---

archive/issue_events_036127.json:
```json
{
    "actor": "https://github.com/kini",
    "created_at": "2012-09-02T12:55:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "milestone": "sage-5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12949#event-36127"
}
```



---

archive/issue_comments_155859.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-09-02T14:47:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155859",
    "user": "https://github.com/gutow"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_155860.json:
```json
{
    "body": "I'm giving this a positive review.  Tested on 5.2. The evaluate button now works, and openssl is not necessary.  Warning message when you try to launch a secure notebook without installing pyOpenSSL is reasonable.  If I missed checking something, please set this back to needs_review and remind us what else needs to be checked.",
    "created_at": "2012-09-02T14:47:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155860",
    "user": "https://github.com/gutow"
}
```

I'm giving this a positive review.  Tested on 5.2. The evaluate button now works, and openssl is not necessary.  Warning message when you try to launch a secure notebook without installing pyOpenSSL is reasonable.  If I missed checking something, please set this back to needs_review and remind us what else needs to be checked.



---

archive/issue_comments_155861.json:
```json
{
    "body": "Thanks, Jonathan!",
    "created_at": "2012-09-02T17:06:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155861",
    "user": "https://github.com/kini"
}
```

Thanks, Jonathan!



---

archive/issue_events_036128.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-02T21:28:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "milestone": "sage-5.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12949#event-36128"
}
```



---

archive/issue_events_036129.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-02T21:28:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "milestone": "sage-5.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12949#event-36129"
}
```



---

archive/issue_comments_155862.json:
```json
{
    "body": "One detail for `SPKG.txt`: you should replace\n\n```\n### 0.10.2 (Keshav Kini, 2012-09-01)\n```\n\nby\n\n```\n### sagenb-0.10.2 (Keshav Kini, 2012-09-01)\n```\n\nor even\n\n```\n### sagenb-0.10.2 (Keshav Kini, 1 September 2012)\n```\n\n(and analogous on the other lines)",
    "created_at": "2012-09-02T22:01:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155862",
    "user": "https://github.com/jdemeyer"
}
```

One detail for `SPKG.txt`: you should replace

```
### 0.10.2 (Keshav Kini, 2012-09-01)
```

by

```
### sagenb-0.10.2 (Keshav Kini, 2012-09-01)
```

or even

```
### sagenb-0.10.2 (Keshav Kini, 1 September 2012)
```

(and analogous on the other lines)



---

archive/issue_comments_155863.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-09-02T22:01:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155863",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_155864.json:
```json
{
    "body": "Tests OK on 5.3.rc0 as well.",
    "created_at": "2012-09-03T02:09:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155864",
    "user": "https://github.com/gutow"
}
```

Tests OK on 5.3.rc0 as well.



---

archive/issue_comments_155865.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-09-03T06:32:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155865",
    "user": "https://github.com/kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_155866.json:
```json
{
    "body": "Jeroen: I changed the version strings to include \"sagenb\", but I'm keeping the dates as they are. See http://en.wikipedia.org/wiki/ISO_8601 .",
    "created_at": "2012-09-03T06:32:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155866",
    "user": "https://github.com/kini"
}
```

Jeroen: I changed the version strings to include "sagenb", but I'm keeping the dates as they are. See http://en.wikipedia.org/wiki/ISO_8601 .



---

archive/issue_comments_155867.json:
```json
{
    "body": "Replying to [comment:92 gutow]:\n> Warning message when you try to launch a secure notebook without installing pyOpenSSL is reasonable.\n\nJust checking, but this should cause an *error*, not a warning. If you don't have pyOpenSSL installed and sagenb is unable to host the server over HTTPS, it should fail to start at all - see [this commit](https://github.com/kini/sagenb/commit/e372ced77be68f2a3084ab00b6337f298885907d). Is that indeed what happens? If not, something's wrong.",
    "created_at": "2012-09-03T07:09:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155867",
    "user": "https://github.com/kini"
}
```

Replying to [comment:92 gutow]:
> Warning message when you try to launch a secure notebook without installing pyOpenSSL is reasonable.

Just checking, but this should cause an *error*, not a warning. If you don't have pyOpenSSL installed and sagenb is unable to host the server over HTTPS, it should fail to start at all - see [this commit](https://github.com/kini/sagenb/commit/e372ced77be68f2a3084ab00b6337f298885907d). Is that indeed what happens? If not, something's wrong.



---

archive/issue_comments_155868.json:
```json
{
    "body": "Packaging of the spkg is fine now.\n\nPS: when are we going to have sagenb-1.0?",
    "created_at": "2012-09-03T08:11:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155868",
    "user": "https://github.com/jdemeyer"
}
```

Packaging of the spkg is fine now.

PS: when are we going to have sagenb-1.0?



---

archive/issue_comments_155869.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-09-03T08:11:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155869",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_155870.json:
```json
{
    "body": "Replying to [comment:100 jdemeyer]:\n> Packaging of the spkg is fine now.\n\ngreat. Finally, this can go in! :)\n\n> PS: when are we going to have sagenb-1.0?\n\nafter samuela's rewrite? That would be a good time to launch 1.0, I suppose. :)",
    "created_at": "2012-09-03T08:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155870",
    "user": "https://github.com/ppurka"
}
```

Replying to [comment:100 jdemeyer]:
> Packaging of the spkg is fine now.

great. Finally, this can go in! :)

> PS: when are we going to have sagenb-1.0?

after samuela's rewrite? That would be a good time to launch 1.0, I suppose. :)



---

archive/issue_comments_155871.json:
```json
{
    "body": "Good idea.  0.9 was about rewriting the backend, 1.0 is about rewriting the frontend?",
    "created_at": "2012-09-03T13:38:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155871",
    "user": "https://github.com/jasongrout"
}
```

Good idea.  0.9 was about rewriting the backend, 1.0 is about rewriting the frontend?



---

archive/issue_comments_155872.json:
```json
{
    "body": "Going by semver.org, I guess there should have been a 1.0 ages ago, the flask notebook should have been 2.0, and Samuel's UI rewrite should either have been 2.1 or 3.0, depending on what you consider a \"public API\". IMO we can just make Samuel's UI rewrite 0.11.",
    "created_at": "2012-09-03T13:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155872",
    "user": "https://github.com/kini"
}
```

Going by semver.org, I guess there should have been a 1.0 ages ago, the flask notebook should have been 2.0, and Samuel's UI rewrite should either have been 2.1 or 3.0, depending on what you consider a "public API". IMO we can just make Samuel's UI rewrite 0.11.



---

archive/issue_comments_155873.json:
```json
{
    "body": "You sound like Linus!",
    "created_at": "2012-09-03T13:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155873",
    "user": "https://github.com/jasongrout"
}
```

You sound like Linus!



---

archive/issue_comments_155874.json:
```json
{
    "body": "Replying to [comment:99 kini]:\n> Replying to [comment:92 gutow]:\n> > Warning message when you try to launch a secure notebook without installing pyOpenSSL is reasonable.\n> \n> Just checking, but this should cause an *error*, not a warning. If you don't have pyOpenSSL installed and sagenb is unable to host the server over HTTPS, it should fail to start at all - see [this commit](https://github.com/kini/sagenb/commit/e372ced77be68f2a3084ab00b6337f298885907d). Is that indeed what happens? If not, something's wrong.\nI wasn't specific enough. It does, indeed, throw and error with a good explanation.  I concur with the positive review.",
    "created_at": "2012-09-03T14:45:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155874",
    "user": "https://github.com/gutow"
}
```

Replying to [comment:99 kini]:
> Replying to [comment:92 gutow]:
> > Warning message when you try to launch a secure notebook without installing pyOpenSSL is reasonable.
> 
> Just checking, but this should cause an *error*, not a warning. If you don't have pyOpenSSL installed and sagenb is unable to host the server over HTTPS, it should fail to start at all - see [this commit](https://github.com/kini/sagenb/commit/e372ced77be68f2a3084ab00b6337f298885907d). Is that indeed what happens? If not, something's wrong.
I wasn't specific enough. It does, indeed, throw and error with a good explanation.  I concur with the positive review.



---

archive/issue_comments_155875.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-09-04T16:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155875",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_155876.json:
```json
{
    "body": "There is a easy to fix bug in `spkg-install`: the command\n\n```\ntar xf \"$CUR/src/$BASENAME.tar.gz\"\n```\n\nshould be\n\n```\ntar xzf \"$CUR/src/$BASENAME.tar.gz\" || die \"Error: cannot extract $BASENAME.tar.gz\"\n```\n\nor similar.",
    "created_at": "2012-09-04T16:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155876",
    "user": "https://github.com/jdemeyer"
}
```

There is a easy to fix bug in `spkg-install`: the command

```
tar xf "$CUR/src/$BASENAME.tar.gz"
```

should be

```
tar xzf "$CUR/src/$BASENAME.tar.gz" || die "Error: cannot extract $BASENAME.tar.gz"
```

or similar.



---

archive/issue_comments_155877.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-09-04T18:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155877",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_155878.json:
```json
{
    "body": "I have just noticed that I cannot stay connected to two notebook servers: both are on the same machine on different ports (usernames and passwords are also different). One is 5.2, another 5.3.rc1+this notebook. When I login to one, another one logs out. This is a bit annoying and such interaction between servers may be dangerous, i.e. now they drop connection because of the other - can there be a situation when logging into one server will trigger logging into another?",
    "created_at": "2012-09-04T21:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155878",
    "user": "https://github.com/novoselt"
}
```

I have just noticed that I cannot stay connected to two notebook servers: both are on the same machine on different ports (usernames and passwords are also different). One is 5.2, another 5.3.rc1+this notebook. When I login to one, another one logs out. This is a bit annoying and such interaction between servers may be dangerous, i.e. now they drop connection because of the other - can there be a situation when logging into one server will trigger logging into another?



---

archive/issue_comments_155879.json:
```json
{
    "body": "Huh.  This sounds like a cookie problem.  The cookie should be tied to the port.",
    "created_at": "2012-09-04T21:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155879",
    "user": "https://github.com/jasongrout"
}
```

Huh.  This sounds like a cookie problem.  The cookie should be tied to the port.



---

archive/issue_comments_155880.json:
```json
{
    "body": "Cookie names seem to include the port number.\n\nAlso, while it is a bug, I don't think that it should delay this and related tickets: switch to MathJax is awesome for using classroom podium computers, as I have just confirmed ;-)",
    "created_at": "2012-09-04T22:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155880",
    "user": "https://github.com/novoselt"
}
```

Cookie names seem to include the port number.

Also, while it is a bug, I don't think that it should delay this and related tickets: switch to MathJax is awesome for using classroom podium computers, as I have just confirmed ;-)



---

archive/issue_comments_155881.json:
```json
{
    "body": "I should mention on this ticket, as I mentioned on the mailing list (https://groups.google.com/forum/?fromgroups=#!topic/sage-notebook/sQBBiHygG9E) that a design issue in this version of the notebook really bothers me (and others that have emailed me).  Basically, 3d graphs do not show up as jmol instances initially, but always require an extra click to \"activate\".  See the mailing list thread above for discussion, but the end result is that I apply these patches: https://gist.github.com/3527075 to *.sagenb.org and my personal Sage server.",
    "created_at": "2012-09-04T22:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155881",
    "user": "https://github.com/jasongrout"
}
```

I should mention on this ticket, as I mentioned on the mailing list (https://groups.google.com/forum/?fromgroups=#!topic/sage-notebook/sQBBiHygG9E) that a design issue in this version of the notebook really bothers me (and others that have emailed me).  Basically, 3d graphs do not show up as jmol instances initially, but always require an extra click to "activate".  See the mailing list thread above for discussion, but the end result is that I apply these patches: https://gist.github.com/3527075 to *.sagenb.org and my personal Sage server.



---

archive/issue_comments_155882.json:
```json
{
    "body": "I fixed the issue Jeroen pointed out, but forgot to mention I had uploaded a new SPKG. Looks like Jeroen noticed it anyway, though :)",
    "created_at": "2012-09-05T06:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155882",
    "user": "https://github.com/kini"
}
```

I fixed the issue Jeroen pointed out, but forgot to mention I had uploaded a new SPKG. Looks like Jeroen noticed it anyway, though :)



---

archive/issue_comments_155883.json:
```json
{
    "body": "The current plan is to merge this in sage-5.4.beta0, so it's better not to do any changes anymore (unless serious problems are discovered of course).",
    "created_at": "2012-09-05T07:14:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155883",
    "user": "https://github.com/jdemeyer"
}
```

The current plan is to merge this in sage-5.4.beta0, so it's better not to do any changes anymore (unless serious problems are discovered of course).



---

archive/issue_comments_155884.json:
```json
{
    "body": "I'm not sure if jdemeyer's comment was answering mine or kini's.  As for my comment, I'm happy to just apply the patches I mentioned to *.sagenb.org and my personal servers; I personally don't need them to be in the official notebook.  However, I think it's a big regression for those that don't have the patches applied.",
    "created_at": "2012-09-05T13:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155884",
    "user": "https://github.com/jasongrout"
}
```

I'm not sure if jdemeyer's comment was answering mine or kini's.  As for my comment, I'm happy to just apply the patches I mentioned to *.sagenb.org and my personal servers; I personally don't need them to be in the official notebook.  However, I think it's a big regression for those that don't have the patches applied.



---

archive/issue_comments_155885.json:
```json
{
    "body": "Replying to [comment:114 jason]:\n> I'm not sure if jdemeyer's comment was answering mine or kini's.\nNone, I was just making a statement.\n\n> However, I think it's a big regression for those that don't have the patches applied.\nThen I guess we need to decide whether that issue is serious enough not to merge this and related tickets (my gut feeling is: no, it's not that serious).",
    "created_at": "2012-09-05T14:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155885",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:114 jason]:
> I'm not sure if jdemeyer's comment was answering mine or kini's.
None, I was just making a statement.

> However, I think it's a big regression for those that don't have the patches applied.
Then I guess we need to decide whether that issue is serious enough not to merge this and related tickets (my gut feeling is: no, it's not that serious).



---

archive/issue_comments_155886.json:
```json
{
    "body": "Replying to [comment:115 jdemeyer]:\n> Replying to [comment:114 jason]:\n> > However, I think it's a big regression for those that don't have the patches applied.\n> Then I guess we need to decide whether that issue is serious enough not to merge this and related tickets (my gut feeling is: no, it's not that serious).\n\nI'll leave that vote to others, as I'm happy to apply the patches reverting the behavior to installs that I administer.  I'd suggest, for example, that kini and others try doing an interact that has a slider and a 3d graph and see how smooth of an experience it is.  Imagine trying to present something to a class, or trying to change the slider to investigate a property.  I think the regression basically makes this use-case unusable.",
    "created_at": "2012-09-05T14:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155886",
    "user": "https://github.com/jasongrout"
}
```

Replying to [comment:115 jdemeyer]:
> Replying to [comment:114 jason]:
> > However, I think it's a big regression for those that don't have the patches applied.
> Then I guess we need to decide whether that issue is serious enough not to merge this and related tickets (my gut feeling is: no, it's not that serious).

I'll leave that vote to others, as I'm happy to apply the patches reverting the behavior to installs that I administer.  I'd suggest, for example, that kini and others try doing an interact that has a slider and a 3d graph and see how smooth of an experience it is.  Imagine trying to present something to a class, or trying to change the slider to investigate a property.  I think the regression basically makes this use-case unusable.



---

archive/issue_comments_155887.json:
```json
{
    "body": "I would love the previous behavior as well, but I just want to make sure that Jonathan's concerns are at least partially addressed.  Maybe we could raise some kind of warning?  \n\nI wish some other people would have commented at the time; we raised this on sage-devel as well as on the relevant ticket, if I recall correctly, and there was little response.  I felt like my voice was the only one for the original behavior, and I was very hesitant to override a change due to a technical failing on the vote of one person.",
    "created_at": "2012-09-05T14:36:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155887",
    "user": "https://github.com/kcrisman"
}
```

I would love the previous behavior as well, but I just want to make sure that Jonathan's concerns are at least partially addressed.  Maybe we could raise some kind of warning?  

I wish some other people would have commented at the time; we raised this on sage-devel as well as on the relevant ticket, if I recall correctly, and there was little response.  I felt like my voice was the only one for the original behavior, and I was very hesitant to override a change due to a technical failing on the vote of one person.



---

archive/issue_comments_155888.json:
```json
{
    "body": "kcrisman: I realize that I didn't have time to participate as much as I would have liked in the original discussion.\n\nAs for a warning---we're just reverting back to original behavior, so I don't think it's any worse than it was before.  I agree something needs to be done moving forward, but I don't think we need to raise a warning for continuing the same behavior as before.",
    "created_at": "2012-09-05T14:57:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155888",
    "user": "https://github.com/jasongrout"
}
```

kcrisman: I realize that I didn't have time to participate as much as I would have liked in the original discussion.

As for a warning---we're just reverting back to original behavior, so I don't think it's any worse than it was before.  I agree something needs to be done moving forward, but I don't think we need to raise a warning for continuing the same behavior as before.



---

archive/issue_comments_155889.json:
```json
{
    "body": "Sorry, by \"warning\" I meant a warning that using an interact with Jmol over the web (not on a local computer) might lead to horrible massive desynchronization (if I understand the issue correctly).\n\nOn the other hand, I haven't used that in production environments yet; maybe it turns out not to be a problem using e.g. *.sagenb.org or your Drake server etc.",
    "created_at": "2012-09-05T15:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155889",
    "user": "https://github.com/kcrisman"
}
```

Sorry, by "warning" I meant a warning that using an interact with Jmol over the web (not on a local computer) might lead to horrible massive desynchronization (if I understand the issue correctly).

On the other hand, I haven't used that in production environments yet; maybe it turns out not to be a problem using e.g. *.sagenb.org or your Drake server etc.



---

archive/issue_comments_155890.json:
```json
{
    "body": "The problem with having jmol come up by default was faced by us when we had many jmols in a single page. I had to grade some assignments last year, and it wasn't a pleasant experience. You could be sitting there twiddling your fingers all the while the browser seems completely frozen.",
    "created_at": "2012-09-05T15:23:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155890",
    "user": "https://github.com/ppurka"
}
```

The problem with having jmol come up by default was faced by us when we had many jmols in a single page. I had to grade some assignments last year, and it wasn't a pleasant experience. You could be sitting there twiddling your fingers all the while the browser seems completely frozen.



---

archive/issue_comments_155891.json:
```json
{
    "body": "I have not noticed any problems.",
    "created_at": "2012-09-05T15:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155891",
    "user": "https://github.com/jasongrout"
}
```

I have not noticed any problems.



---

archive/issue_comments_155892.json:
```json
{
    "body": "But the new jmol implementation *will* automatically sleep instances when you reach a certain number, right?  So \"many jmols on a page\" should be fixed, right?\n\nCan you try it on sagenb.org (which has my patch) and see if it is a problem still?",
    "created_at": "2012-09-05T15:36:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155892",
    "user": "https://github.com/jasongrout"
}
```

But the new jmol implementation *will* automatically sleep instances when you reach a certain number, right?  So "many jmols on a page" should be fixed, right?

Can you try it on sagenb.org (which has my patch) and see if it is a problem still?



---

archive/issue_comments_155893.json:
```json
{
    "body": "Hmm.. it froze firefox once, but it is otherwise quite smooth now. I forgot about the fact that not all jmols are loaded now. This definitely helps.",
    "created_at": "2012-09-05T15:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155893",
    "user": "https://github.com/ppurka"
}
```

Hmm.. it froze firefox once, but it is otherwise quite smooth now. I forgot about the fact that not all jmols are loaded now. This definitely helps.



---

archive/issue_comments_155894.json:
```json
{
    "body": "The old behavior hangs most of the time in interacts for me using anything but a local instance.  Thus I still consider the old behavior a bug.  For me interacts work faster and more smoothly using the on server image generation.  Only if I want to rotate the image do I need to load the applet. The problem seems to be browser/OS/JVM independent so I think it is a network timing issue.\n\nThat said, I certainly think it is reasonable for people to want access to the old behavior.  I suggest we start a new ticket and develop a good patch that provides a per-worksheet switch that allows one to turn on live Jmol loading in a worksheet.  However, I strongly recommend against defaulting to the old behavior, which is broken except under special circumstances on devices that have a reasonably up-to-date JVM installed.\n\nIn the meantime, I suggest people who want the old behavior use Jason's patch.",
    "created_at": "2012-09-05T17:23:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155894",
    "user": "https://github.com/gutow"
}
```

The old behavior hangs most of the time in interacts for me using anything but a local instance.  Thus I still consider the old behavior a bug.  For me interacts work faster and more smoothly using the on server image generation.  Only if I want to rotate the image do I need to load the applet. The problem seems to be browser/OS/JVM independent so I think it is a network timing issue.

That said, I certainly think it is reasonable for people to want access to the old behavior.  I suggest we start a new ticket and develop a good patch that provides a per-worksheet switch that allows one to turn on live Jmol loading in a worksheet.  However, I strongly recommend against defaulting to the old behavior, which is broken except under special circumstances on devices that have a reasonably up-to-date JVM installed.

In the meantime, I suggest people who want the old behavior use Jason's patch.



---

archive/issue_comments_155895.json:
```json
{
    "body": "Yes, definitely open up a new ticket. Once this is merged, we will get lots of questions about how to get the old behavior back, and so implementing a solution should have a very high priority.",
    "created_at": "2012-09-05T17:47:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155895",
    "user": "https://github.com/jhpalmieri"
}
```

Yes, definitely open up a new ticket. Once this is merged, we will get lots of questions about how to get the old behavior back, and so implementing a solution should have a very high priority.



---

archive/issue_comments_155896.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-09-05T18:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155896",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_155897.json:
```json
{
    "body": "OK, so this is ready to go?",
    "created_at": "2012-09-05T18:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155897",
    "user": "https://github.com/jdemeyer"
}
```

OK, so this is ready to go?



---

archive/issue_events_036130.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-05T18:04:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12949#event-36130"
}
```



---

archive/issue_comments_155898.json:
```json
{
    "body": "> OK, so this is ready to go?\n\nAs long as Jason and Jonathan can commit to figuring out what to do about this issue, then yes.  One would hope that the 5.4 beta sequence would be long enough to accommodate this.  The Jmol upgrade is otherwise really worth the effort.\n\n> I should mention on this ticket, as I mentioned on the mailing list (https://groups.google.com/forum/?fromgroups=#!topic/sage-notebook/sQBBiHygG9E) that a design issue in this version of the notebook really bothers me (and others that have emailed me).  Basically, 3d graphs do not show up as jmol instances initially, but always require an extra click to \"activate\".  See the mailing list thread above for discussion, but the end result is that I apply these patches: https://gist.github.com/3527075 to *.sagenb.org and my personal Sage server.\n\nSo *.sagenb.org is running Sage 5.2, but with sagenb 0.10.x?  See also [comment:192:ticket:12299] where I predicted this discussion :)  On the plus side, this hasn't been merged into a released Sage yet, right?",
    "created_at": "2012-09-05T18:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155898",
    "user": "https://github.com/kcrisman"
}
```

> OK, so this is ready to go?

As long as Jason and Jonathan can commit to figuring out what to do about this issue, then yes.  One would hope that the 5.4 beta sequence would be long enough to accommodate this.  The Jmol upgrade is otherwise really worth the effort.

> I should mention on this ticket, as I mentioned on the mailing list (https://groups.google.com/forum/?fromgroups=#!topic/sage-notebook/sQBBiHygG9E) that a design issue in this version of the notebook really bothers me (and others that have emailed me).  Basically, 3d graphs do not show up as jmol instances initially, but always require an extra click to "activate".  See the mailing list thread above for discussion, but the end result is that I apply these patches: https://gist.github.com/3527075 to *.sagenb.org and my personal Sage server.

So *.sagenb.org is running Sage 5.2, but with sagenb 0.10.x?  See also [comment:192:ticket:12299] where I predicted this discussion :)  On the plus side, this hasn't been merged into a released Sage yet, right?



---

archive/issue_comments_155899.json:
```json
{
    "body": "Replying to [comment:125 jhpalmieri]:\n> Yes, definitely open up a new ticket. Once this is merged, we will get lots of questions about how to get the old behavior back, and so implementing a solution should have a very high priority.\n\nOK, Jason please open a ticket in trac (I'm still getting my feet wet with GIT).  Please describe the options you think would be useful to you, remembering that I have not found a way to make live Jmols in interacts reliable over the network without a major rewrite of how interacts work (something I'm not in a position to commit to doing, but think should be done).  Personally, I vote for some kind of a switch.  Please make sure to cc me on the new ticket.",
    "created_at": "2012-09-05T18:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155899",
    "user": "https://github.com/gutow"
}
```

Replying to [comment:125 jhpalmieri]:
> Yes, definitely open up a new ticket. Once this is merged, we will get lots of questions about how to get the old behavior back, and so implementing a solution should have a very high priority.

OK, Jason please open a ticket in trac (I'm still getting my feet wet with GIT).  Please describe the options you think would be useful to you, remembering that I have not found a way to make live Jmols in interacts reliable over the network without a major rewrite of how interacts work (something I'm not in a position to commit to doing, but think should be done).  Personally, I vote for some kind of a switch.  Please make sure to cc me on the new ticket.



---

archive/issue_comments_155900.json:
```json
{
    "body": "What will be the behaviour of Sage Cell Server? Will interacts also require clicking a button for interaction every time? Or is it possible perhaps to have a switch between 2D/3D modes which persists over changes of other parameters?",
    "created_at": "2012-09-05T19:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155900",
    "user": "https://github.com/novoselt"
}
```

What will be the behaviour of Sage Cell Server? Will interacts also require clicking a button for interaction every time? Or is it possible perhaps to have a switch between 2D/3D modes which persists over changes of other parameters?



---

archive/issue_comments_155901.json:
```json
{
    "body": "The cell server will default to live jmol (in fact, that's the only option right now).  It doesn't include the advanced functionality Jonathan has put into sagenb.",
    "created_at": "2012-09-05T19:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155901",
    "user": "https://github.com/jasongrout"
}
```

The cell server will default to live jmol (in fact, that's the only option right now).  It doesn't include the advanced functionality Jonathan has put into sagenb.



---

archive/issue_comments_155902.json:
```json
{
    "body": "When you try to recover a forgotten password in the new notebook, you are asked for the username, and then get the response \"invalid username\" even if the username is valid, and the email has been confirmed.\n\n\nI think that the problem is in the file authentication.py\n\nThe function forgot_pass() has the following lines:\n\n\n```\ndef forgot_pass():\n    if not g.notebook.conf()['email']:\n        return current_app.message('The account recovery system is not active.')\n\n    username = request.values.get('username', '').strip()\n    if not username:\n        return render_template(os.path.join('html', 'accounts', 'account_recovery.html'))\n\n    def error(msg):\n        return current_app.message(msg, url_for('forgot_pass'))\n\n    try:\n        user = g.notebook.user(request.values[username])\n    except KeyError:\n        return error('Username is invalid.')\n\n    if not user.is_email_confirmed():\n        return error(\"The e-mail address hasn't been confirmed.\")\n\n    #XXX: some of this could be factored out into a random passowrd\n    #function.  There are a few places in admin.py that also use it.\n    from random import choice\n    import string\n    chara = string.letters + string.digits\n    old_pass = user.password()\n    password = ''.join([choice(chara) for i in range(8)])\n    user.set_password(password)\n\n    from sagenb.notebook.smtpsend import send_mail\n    from sagenb.notebook.register import build_password_msg\n    # TODO: make this come from the server settings\n\n    listenaddr = g.notebook.interface\n    port = g.notebook.port\n    fromaddr = 'no-reply@%s' % listenaddr\n    body = build_password_msg(password, username, listenaddr, port, g.notebook.secure)\n    destaddr = user.get_email()\n    try:\n        send_mail(fromaddr, destaddr, \"Sage Notebook Account Recovery\", body)\n    except ValueError:\n        # the email address is invalid\n        user.set_password(old_pass)\n        return error(\"The new password couldn't be sent.\"%destaddr)\n\n    return current_app.message(\"A new password has been sent to your e-mail address.\", url_for('base.index'))\n```\n\n\nBut \n\n```\n    try:\n        user = g.notebook.user(request.values[username])\n```\n\n\ndoesn't work because username is already defined as \n\n\n```\n   username = request.values.get('username', '').strip()\n```\n\n\n\nAlso, the process of changing passwords with user.set_password() does not work. I think g.notebook.user_manager().set_password(g.username, new) should be used instead (that is what settings.py does).",
    "created_at": "2012-09-28T08:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155902",
    "user": "https://github.com/miguelmarco"
}
```

When you try to recover a forgotten password in the new notebook, you are asked for the username, and then get the response "invalid username" even if the username is valid, and the email has been confirmed.


I think that the problem is in the file authentication.py

The function forgot_pass() has the following lines:


```
def forgot_pass():
    if not g.notebook.conf()['email']:
        return current_app.message('The account recovery system is not active.')

    username = request.values.get('username', '').strip()
    if not username:
        return render_template(os.path.join('html', 'accounts', 'account_recovery.html'))

    def error(msg):
        return current_app.message(msg, url_for('forgot_pass'))

    try:
        user = g.notebook.user(request.values[username])
    except KeyError:
        return error('Username is invalid.')

    if not user.is_email_confirmed():
        return error("The e-mail address hasn't been confirmed.")

    #XXX: some of this could be factored out into a random passowrd
    #function.  There are a few places in admin.py that also use it.
    from random import choice
    import string
    chara = string.letters + string.digits
    old_pass = user.password()
    password = ''.join([choice(chara) for i in range(8)])
    user.set_password(password)

    from sagenb.notebook.smtpsend import send_mail
    from sagenb.notebook.register import build_password_msg
    # TODO: make this come from the server settings

    listenaddr = g.notebook.interface
    port = g.notebook.port
    fromaddr = 'no-reply@%s' % listenaddr
    body = build_password_msg(password, username, listenaddr, port, g.notebook.secure)
    destaddr = user.get_email()
    try:
        send_mail(fromaddr, destaddr, "Sage Notebook Account Recovery", body)
    except ValueError:
        # the email address is invalid
        user.set_password(old_pass)
        return error("The new password couldn't be sent."%destaddr)

    return current_app.message("A new password has been sent to your e-mail address.", url_for('base.index'))
```


But 

```
    try:
        user = g.notebook.user(request.values[username])
```


doesn't work because username is already defined as 


```
   username = request.values.get('username', '').strip()
```



Also, the process of changing passwords with user.set_password() does not work. I think g.notebook.user_manager().set_password(g.username, new) should be used instead (that is what settings.py does).



---

archive/issue_comments_155903.json:
```json
{
    "body": "Replying to [comment:131 mmarco]:\n> When you try to recover a forgotten password in the new notebook, you are asked for the username, and then get the response \"invalid username\" even if the username is valid, and the email has been confirmed.\n> \n> \nJust fyi to the authors, mmarco has also already opened #13536 to track this, but put this here for more visibility.  See [this pull request](https://github.com/sagemath/sagenb/pull/99) for a pull version of his patch.  (`@`kini - ok, I do like being able to just edit on the fly!  Not a convert to github yet, though :) )",
    "created_at": "2012-09-28T14:44:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155903",
    "user": "https://github.com/kcrisman"
}
```

Replying to [comment:131 mmarco]:
> When you try to recover a forgotten password in the new notebook, you are asked for the username, and then get the response "invalid username" even if the username is valid, and the email has been confirmed.
> 
> 
Just fyi to the authors, mmarco has also already opened #13536 to track this, but put this here for more visibility.  See [this pull request](https://github.com/sagemath/sagenb/pull/99) for a pull version of his patch.  (`@`kini - ok, I do like being able to just edit on the fly!  Not a convert to github yet, though :) )



---

archive/issue_comments_155904.json:
```json
{
    "body": "Replying to [comment:128 gutow]:\n> Replying to [comment:125 jhpalmieri]:\n> > Yes, definitely open up a new ticket. Once this is merged, we will get lots of questions about how to get the old behavior back, and so implementing a solution should have a very high priority.\n> \n> OK, Jason please open a ticket in trac (I'm still getting my feet wet with GIT).  Please describe the options you think would be useful to you, remembering that I have not found a way to make live Jmols in interacts reliable over the network without a major rewrite of how interacts work (something I'm not in a position to commit to doing, but think should be done).  Personally, I vote for some kind of a switch.  Please make sure to cc me on the new ticket.\n\nUmm, what is the status of this?  Sounds like Jeroen is almost ready to release Sage 5.4, and it seems like the consensus is that this would be a regression... I really don't know how to even fix it in the minimalist way Jason has done on his own.",
    "created_at": "2012-10-18T18:55:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12949",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12949#issuecomment-155904",
    "user": "https://github.com/kcrisman"
}
```

Replying to [comment:128 gutow]:
> Replying to [comment:125 jhpalmieri]:
> > Yes, definitely open up a new ticket. Once this is merged, we will get lots of questions about how to get the old behavior back, and so implementing a solution should have a very high priority.
> 
> OK, Jason please open a ticket in trac (I'm still getting my feet wet with GIT).  Please describe the options you think would be useful to you, remembering that I have not found a way to make live Jmols in interacts reliable over the network without a major rewrite of how interacts work (something I'm not in a position to commit to doing, but think should be done).  Personally, I vote for some kind of a switch.  Please make sure to cc me on the new ticket.

Umm, what is the status of this?  Sounds like Jeroen is almost ready to release Sage 5.4, and it seems like the consensus is that this would be a regression... I really don't know how to even fix it in the minimalist way Jason has done on his own.
