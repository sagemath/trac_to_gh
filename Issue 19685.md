# Issue 19685: coercion between real and complex interval fields

Issue created by migration from https://trac.sagemath.org/ticket/19922

Original creator: vdelecroix

Original creation time: 2016-01-20 21:46:08

We have

```
sage: ComplexIntervalField(64).an_element() + RealIntervalField(128).an_element()
1 + 1*I
sage: parent(_)
Complex Interval Field with 64 bits of precision
```

But

```
sage: ComplexIntervalField(128).an_element() + RealIntervalField(64).an_element()
Traceback (most recent call last):
...
TypeError: unsupported operand parent(s) for '+'
```

The above should work with parent `ComplexIntervalField(64)`.


---

Comment by vdelecroix created at 2016-01-20 22:09:02

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2016-01-20 22:09:02

Though the following still fails

```
sage: R = ComplexIntervalField(128)['x']
sage: R.gen() * RIF.one()
```

where I would expect an answer in `CIF['x']`.
----
New commits:


---

Comment by dkrenn created at 2016-01-21 08:36:41

Replying to [comment:1 vdelecroix]:
> Though the following still fails
> {{{
> sage: R = ComplexIntervalField(128)['x']
> sage: R.gen() * RIF.one()
> }}}
> where I would expect an answer in `CIF['x']`.

This comes from

```
sage: RIF.construction()
(Completion[+Infinity], Rational Field)
sage: CIF.construction() is None
True
```


In contrast to

```
sage: CC.construction()
(AlgebraicClosureFunctor, Real Field with 53 bits of precision)
sage: RR.construction()
(Completion[+Infinity], Rational Field)
```


So implementing the construction for `ComplexIntervalField` should (I hope so at least) also fix the original problem, since then there is a common starting point for the pushout (namely `QQ`) and the two `CompletionFunctor` and the `AlgebraicClosureFunctor` can be applied on it.


---

Comment by dkrenn created at 2016-01-21 08:46:31

I'll provide a patch...


---

Comment by dkrenn created at 2016-01-21 08:59:48

Pushed my changes; `make ptestlong` runs at the moment...
----
New commits:


---

Comment by dkrenn created at 2016-01-21 09:41:31

Replying to [comment:5 dkrenn]:
> [...] `make ptestlong` runs at the moment...

Passed. So please review.


---

Comment by vdelecroix created at 2016-01-21 11:14:46

Thanks! Much cleaner.


---

Comment by vdelecroix created at 2016-01-21 11:14:46

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-01-24 12:52:41

Resolution: fixed
