# Issue 31083: Fix for potential good reduction for dynamical systems

archive/issues_030846.json:
```json
{
    "body": "The function `potential_good_reduction` states that it returns a dynamical system with good reduction at a specified prime.\n\nCurrently, the following example returns a dynamical system:\n\n```\nP.<x,y> = ProjectiveSpace(QQ, 1)\nsystem = DynamicalSystem_projective([3^5*x^3 + x^2*y - 3^5*x*y^2 , -3^5*x^2*y + x*y^2 + 3^5*y^3])\nsystem.potential_good_reduction(3)\n```\n\nHowever, it is proved in [https://arxiv.org/pdf/1304.1201.pdf](https://arxiv.org/pdf/1304.1201.pdf) that this dynamical system does not have potential good reduction at 3.\n\nFollowing the criterion in [https://arxiv.org/pdf/1311.6695.pdf](https://arxiv.org/pdf/1311.6695.pdf), a fix is implemented by first checking the valuation of the resultant of the conjugate system before returning.\n\nIn order to be consistent, we change the function return type so that a tuple is returned in all cases.\n\nFurthermore, we add an optional return conjugation parameter.\n\nCC:  @bhutz @pfili\n\nBranch/Commit: abc6978d1ba197ecba2a5f2129d6950fe96cf0a2\n\nReviewer: Ben Hutz\n\nAuthor: Alexander Galarraga\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31083\n\n",
    "closed_at": "2021-07-25T13:27:04Z",
    "created_at": "2020-12-19T19:09:50Z",
    "labels": [
        "component: dynamics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Fix for potential good reduction for dynamical systems",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31083",
    "user": "https://github.com/EnderWannabe"
}
```
The function `potential_good_reduction` states that it returns a dynamical system with good reduction at a specified prime.

Currently, the following example returns a dynamical system:

```
P.<x,y> = ProjectiveSpace(QQ, 1)
system = DynamicalSystem_projective([3^5*x^3 + x^2*y - 3^5*x*y^2 , -3^5*x^2*y + x*y^2 + 3^5*y^3])
system.potential_good_reduction(3)
```

However, it is proved in [https://arxiv.org/pdf/1304.1201.pdf](https://arxiv.org/pdf/1304.1201.pdf) that this dynamical system does not have potential good reduction at 3.

Following the criterion in [https://arxiv.org/pdf/1311.6695.pdf](https://arxiv.org/pdf/1311.6695.pdf), a fix is implemented by first checking the valuation of the resultant of the conjugate system before returning.

In order to be consistent, we change the function return type so that a tuple is returned in all cases.

Furthermore, we add an optional return conjugation parameter.

CC:  @bhutz @pfili

Branch/Commit: abc6978d1ba197ecba2a5f2129d6950fe96cf0a2

Reviewer: Ben Hutz

Author: Alexander Galarraga

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31083





---

archive/issue_comments_616761.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-EnderWannabe/good_reduction_fix\"",
    "created_at": "2020-12-19T19:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616761",
    "user": "https://github.com/EnderWannabe"
}
```

Changing branch from "" to "u/gh-EnderWannabe/good_reduction_fix"



---

archive/issue_comments_616762.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-12-19T19:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616762",
    "user": "https://github.com/EnderWannabe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_616763.json:
```json
{
    "body": "Changing commit from \"\" to \"8865571137d7e4f35e3bbf07a2bd93a5dd1b5a53\"",
    "created_at": "2020-12-19T19:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616763",
    "user": "https://github.com/EnderWannabe"
}
```

Changing commit from "" to "8865571137d7e4f35e3bbf07a2bd93a5dd1b5a53"



---

archive/issue_comments_616764.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2020-12-19T19:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616764",
    "user": "https://github.com/EnderWannabe"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_616765.json:
```json
{
    "body": "<a id='comment:3'></a>I took a look at this (finally) and it looks fine to me. If I'm understanding the references correctly, the conjugation you are producing must be the one that gives good reduction, so you check if the resulting map does, otherwise it does not.\n\nMaybe this is not the place to discuss this, but I'm a little concerned about the fact that this function returns different types depending on the result.  I'd be a little inclined to change the returns to\n\nTrue, dynamicalsystem\n\nFalse, None\n\nAlthough, why is there no option to return the conjugation? So perhaps as a second option\n\nTrue, DS, PGL\n\nFalse, None, None\n\nThat way the returns are always consistent.\n\nSince this is not yet in a released version, we're still free to change such things without having to worry about deprecation.",
    "created_at": "2021-01-30T17:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616765",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:3'></a>I took a look at this (finally) and it looks fine to me. If I'm understanding the references correctly, the conjugation you are producing must be the one that gives good reduction, so you check if the resulting map does, otherwise it does not.

Maybe this is not the place to discuss this, but I'm a little concerned about the fact that this function returns different types depending on the result.  I'd be a little inclined to change the returns to

True, dynamicalsystem

False, None

Although, why is there no option to return the conjugation? So perhaps as a second option

True, DS, PGL

False, None, None

That way the returns are always consistent.

Since this is not yet in a released version, we're still free to change such things without having to worry about deprecation.



---

archive/issue_comments_616766.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-01T01:59:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616766",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_616767.json:
```json
{
    "body": "Changing commit from \"8865571137d7e4f35e3bbf07a2bd93a5dd1b5a53\" to \"6aff61faa957f9f6f4bb112451673cecdb99cfd5\"",
    "created_at": "2021-02-01T01:59:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616767",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8865571137d7e4f35e3bbf07a2bd93a5dd1b5a53" to "6aff61faa957f9f6f4bb112451673cecdb99cfd5"



---

archive/issue_comments_616768.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,3 +11,7 @@\n However, it is proved in [https://arxiv.org/pdf/1304.1201.pdf](https://arxiv.org/pdf/1304.1201.pdf) that this dynamical system does not have potential good reduction at 3.\n \n Following the criterion in [https://arxiv.org/pdf/1311.6695.pdf](https://arxiv.org/pdf/1311.6695.pdf), a fix is implemented by first checking the valuation of the resultant of the conjugate system before returning.\n+\n+In order to be consistent, we change the function return type so that a tuple is returned in all cases.\n+\n+Furthermore, we add an optional return conjugation parameter.\n``````\n",
    "created_at": "2021-02-01T02:04:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616768",
    "user": "https://github.com/EnderWannabe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,3 +11,7 @@
 However, it is proved in [https://arxiv.org/pdf/1304.1201.pdf](https://arxiv.org/pdf/1304.1201.pdf) that this dynamical system does not have potential good reduction at 3.
 
 Following the criterion in [https://arxiv.org/pdf/1311.6695.pdf](https://arxiv.org/pdf/1311.6695.pdf), a fix is implemented by first checking the valuation of the resultant of the conjugate system before returning.
+
+In order to be consistent, we change the function return type so that a tuple is returned in all cases.
+
+Furthermore, we add an optional return conjugation parameter.
``````




---

archive/issue_comments_616769.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [bhutz](#comment%3A3):\n> Maybe this is not the place to discuss this, but I'm a little concerned about the fact that this function returns different types depending on the result. \n\n\nImplemented the change suggested, and updated the ticket description. Should we consider separating these changes into two separate tickets?",
    "created_at": "2021-02-01T02:07:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616769",
    "user": "https://github.com/EnderWannabe"
}
```

<a id='comment:6'></a>Replying to [bhutz](#comment%3A3):
> Maybe this is not the place to discuss this, but I'm a little concerned about the fact that this function returns different types depending on the result. 


Implemented the change suggested, and updated the ticket description. Should we consider separating these changes into two separate tickets?



---

archive/issue_comments_616770.json:
```json
{
    "body": "<a id='comment:7'></a>These are both small fixes to the same function under beta, so I'm ok doing them both here.\n\nPaul it looks like you reviewed the original function. Are you ok with the new return types?",
    "created_at": "2021-02-02T19:58:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616770",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:7'></a>These are both small fixes to the same function under beta, so I'm ok doing them both here.

Paul it looks like you reviewed the original function. Are you ok with the new return types?



---

archive/issue_comments_616771.json:
```json
{
    "body": "<a id='comment:8'></a>fyi, the docs fail to build\n\n```\n/arithmetic_dynamics/projective_ds.py:docstring of sage.dynamics.arithmetic_dynamics.projective_ds.DynamicalSystem_projective_field.potential_good_reduction:37: WARNING: Unexpected indentation.\nMakefile:1873: recipe for target 'doc-html' failed\n```",
    "created_at": "2021-02-03T21:05:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616771",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:8'></a>fyi, the docs fail to build

```
/arithmetic_dynamics/projective_ds.py:docstring of sage.dynamics.arithmetic_dynamics.projective_ds.DynamicalSystem_projective_field.potential_good_reduction:37: WARNING: Unexpected indentation.
Makefile:1873: recipe for target 'doc-html' failed
```



---

archive/issue_comments_616772.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-06T17:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616772",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_616773.json:
```json
{
    "body": "Changing commit from \"6aff61faa957f9f6f4bb112451673cecdb99cfd5\" to \"26379c5a40015c27a0f59c74687faa5a77bd30ef\"",
    "created_at": "2021-02-06T17:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616773",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6aff61faa957f9f6f4bb112451673cecdb99cfd5" to "26379c5a40015c27a0f59c74687faa5a77bd30ef"



---

archive/issue_comments_616774.json:
```json
{
    "body": "<a id='comment:10'></a>Docs should build now.",
    "created_at": "2021-02-06T17:46:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616774",
    "user": "https://github.com/EnderWannabe"
}
```

<a id='comment:10'></a>Docs should build now.



---

archive/issue_comments_616775.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-02-11T19:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616775",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_616776.json:
```json
{
    "body": "<a id='comment:11'></a>This looks good to me. Just one further tweak I'd like. A test that checks that the conjugation returned actually gives the model with good reduction.",
    "created_at": "2021-02-11T19:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616776",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:11'></a>This looks good to me. Just one further tweak I'd like. A test that checks that the conjugation returned actually gives the model with good reduction.



---

archive/issue_comments_616777.json:
```json
{
    "body": "Changing reviewer from \"\" to \"bhutz\"",
    "created_at": "2021-02-11T19:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616777",
    "user": "https://github.com/bhutz"
}
```

Changing reviewer from "" to "bhutz"



---

archive/issue_comments_616778.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-27T17:52:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616778",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_616779.json:
```json
{
    "body": "Changing commit from \"26379c5a40015c27a0f59c74687faa5a77bd30ef\" to \"330c7ae5f7784a997776ad6bf35f3b01e52f061a\"",
    "created_at": "2021-02-27T17:52:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616779",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "26379c5a40015c27a0f59c74687faa5a77bd30ef" to "330c7ae5f7784a997776ad6bf35f3b01e52f061a"



---

archive/issue_comments_616780.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-27T17:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616780",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_616781.json:
```json
{
    "body": "Changing commit from \"330c7ae5f7784a997776ad6bf35f3b01e52f061a\" to \"67540210248922a9129a9757a7f9ffce5cf4ecf2\"",
    "created_at": "2021-02-27T17:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616781",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "330c7ae5f7784a997776ad6bf35f3b01e52f061a" to "67540210248922a9129a9757a7f9ffce5cf4ecf2"



---

archive/issue_comments_616782.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-27T18:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616782",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_616783.json:
```json
{
    "body": "Changing commit from \"67540210248922a9129a9757a7f9ffce5cf4ecf2\" to \"4df15d390fbedd8512db739b3f494e0f1cef61e0\"",
    "created_at": "2021-02-27T18:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616783",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "67540210248922a9129a9757a7f9ffce5cf4ecf2" to "4df15d390fbedd8512db739b3f494e0f1cef61e0"



---

archive/issue_comments_616784.json:
```json
{
    "body": "<a id='comment:15'></a>Added the desired example.\n\nI found an example which failed causing an embedding error:\n\n```\nP.<x,y> = ProjectiveSpace(QQ, 1)\nsystem = DynamicalSystem_projective([3*x^2 + x*y+y^2, 9*y^2])\nprime = system.field_of_definition_periodic(1).prime_above(3)\nsystem.potential_good_reduction(prime)\n```\n\nThe most recent pushes fixes this and add it as a test. Some of the code I wrote to fix it, however, I am unhappy with.\n\nSince the change ring on projective points doesn't let me pass an embedding, I tried to use the embedding by hand on line 7076. Check that line to see if I missed something there.\n\nAlso, I resorted to checking if an embedding is defined on line 7094. Is that good practice? I couldn't come up with another approach, as using the identity when embedding_preimage was not defined failed tests.",
    "created_at": "2021-02-27T18:11:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616784",
    "user": "https://github.com/EnderWannabe"
}
```

<a id='comment:15'></a>Added the desired example.

I found an example which failed causing an embedding error:

```
P.<x,y> = ProjectiveSpace(QQ, 1)
system = DynamicalSystem_projective([3*x^2 + x*y+y^2, 9*y^2])
prime = system.field_of_definition_periodic(1).prime_above(3)
system.potential_good_reduction(prime)
```

The most recent pushes fixes this and add it as a test. Some of the code I wrote to fix it, however, I am unhappy with.

Since the change ring on projective points doesn't let me pass an embedding, I tried to use the embedding by hand on line 7076. Check that line to see if I missed something there.

Also, I resorted to checking if an embedding is defined on line 7094. Is that good practice? I couldn't come up with another approach, as using the identity when embedding_preimage was not defined failed tests.



---

archive/issue_comments_616785.json:
```json
{
    "body": "<a id='comment:16'></a>err..why can't you pass en embedding into the projective point change_ring. I'm under the impression this works and changing your code to (7075-7076)\n\n```\n            system = system.change_ring(embedding_preimage)\n            point = point.change_ring(embedding_preimage)\n```\n\ndoes not cause any doctest failures. Could you give me an example that is failing under this?\n\nbtw, you have at least one doctest failure in general that needs to be fixed (7029: does not have the return value to check against.)",
    "created_at": "2021-03-04T16:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616785",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:16'></a>err..why can't you pass en embedding into the projective point change_ring. I'm under the impression this works and changing your code to (7075-7076)

```
            system = system.change_ring(embedding_preimage)
            point = point.change_ring(embedding_preimage)
```

does not cause any doctest failures. Could you give me an example that is failing under this?

btw, you have at least one doctest failure in general that needs to be fixed (7029: does not have the return value to check against.)



---

archive/issue_comments_616786.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-07T00:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616786",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_616787.json:
```json
{
    "body": "Changing commit from \"4df15d390fbedd8512db739b3f494e0f1cef61e0\" to \"42fc94d790b6c306f9b52a3e4a5cf21dc50b7588\"",
    "created_at": "2021-03-07T00:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616787",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4df15d390fbedd8512db739b3f494e0f1cef61e0" to "42fc94d790b6c306f9b52a3e4a5cf21dc50b7588"



---

archive/issue_comments_616788.json:
```json
{
    "body": "<a id='comment:18'></a>Thanks for the suggestion, that works much better. I didn't realize I could just pass the embedding.\n\nFailing doctest fixed! I'm going to change the status to needs review, as I think all the current issues have been addressed.",
    "created_at": "2021-03-07T00:44:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616788",
    "user": "https://github.com/EnderWannabe"
}
```

<a id='comment:18'></a>Thanks for the suggestion, that works much better. I didn't realize I could just pass the embedding.

Failing doctest fixed! I'm going to change the status to needs review, as I think all the current issues have been addressed.



---

archive/issue_comments_616789.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-03-07T00:44:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616789",
    "user": "https://github.com/EnderWannabe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_616790.json:
```json
{
    "body": "Changing branch from \"u/gh-EnderWannabe/good_reduction_fix\" to \"u/bhutz/good_reduction_fix\"",
    "created_at": "2021-03-09T01:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616790",
    "user": "https://github.com/bhutz"
}
```

Changing branch from "u/gh-EnderWannabe/good_reduction_fix" to "u/bhutz/good_reduction_fix"



---

archive/issue_comments_616791.json:
```json
{
    "body": "Changing commit from \"42fc94d790b6c306f9b52a3e4a5cf21dc50b7588\" to \"ea29310ef2775664262c712c5f2256c469b447f3\"",
    "created_at": "2021-03-09T01:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616791",
    "user": "https://github.com/bhutz"
}
```

Changing commit from "42fc94d790b6c306f9b52a3e4a5cf21dc50b7588" to "ea29310ef2775664262c712c5f2256c469b447f3"



---

archive/issue_comments_616792.json:
```json
{
    "body": "<a id='comment:21'></a>I actually meant checking that you are getting the actual map you return not just that it has the correct resultant. See the test I added.\n\nOtherwise, I'm fine with this ticket as is. If you are also fine with the doctest I added, we can mark this positive.\n\n---\nNew commits:",
    "created_at": "2021-03-09T01:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616792",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:21'></a>I actually meant checking that you are getting the actual map you return not just that it has the correct resultant. See the test I added.

Otherwise, I'm fine with this ticket as is. If you are also fine with the doctest I added, we can mark this positive.

---
New commits:



---

archive/issue_comments_616793.json:
```json
{
    "body": "<a id='comment:22'></a>Looks good to me! Marked as positive review.",
    "created_at": "2021-03-13T15:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616793",
    "user": "https://github.com/EnderWannabe"
}
```

<a id='comment:22'></a>Looks good to me! Marked as positive review.



---

archive/issue_comments_616794.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-03-13T15:12:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616794",
    "user": "https://github.com/EnderWannabe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_616795.json:
```json
{
    "body": "<a id='comment:24'></a>reviewer name should be full real name, please",
    "created_at": "2021-03-13T20:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616795",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>reviewer name should be full real name, please



---

archive/issue_comments_616796.json:
```json
{
    "body": "Changing reviewer from \"bhutz\" to \"Ben Hutz\"",
    "created_at": "2021-03-15T07:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616796",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "bhutz" to "Ben Hutz"



---

archive/issue_comments_616797.json:
```json
{
    "body": "<a id='comment:26'></a>sorry. Thanks for updating it.",
    "created_at": "2021-03-15T16:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616797",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:26'></a>sorry. Thanks for updating it.



---

archive/issue_comments_616798.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-03-16T23:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616798",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_616799.json:
```json
{
    "body": "<a id='comment:27'></a>Merge conflict",
    "created_at": "2021-03-16T23:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616799",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:27'></a>Merge conflict



---

archive/issue_comments_616800.json:
```json
{
    "body": "Changing branch from \"u/bhutz/good_reduction_fix\" to \"u/gh-EnderWannabe/good_reduction_fix\"",
    "created_at": "2021-03-19T19:19:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616800",
    "user": "https://github.com/EnderWannabe"
}
```

Changing branch from "u/bhutz/good_reduction_fix" to "u/gh-EnderWannabe/good_reduction_fix"



---

archive/issue_comments_616801.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-03-19T19:20:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616801",
    "user": "https://github.com/EnderWannabe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_616802.json:
```json
{
    "body": "Changing commit from \"ea29310ef2775664262c712c5f2256c469b447f3\" to \"2d838a1bf517ae3e2f4241d048560f87d2e49703\"",
    "created_at": "2021-03-19T19:20:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616802",
    "user": "https://github.com/EnderWannabe"
}
```

Changing commit from "ea29310ef2775664262c712c5f2256c469b447f3" to "2d838a1bf517ae3e2f4241d048560f87d2e49703"



---

archive/issue_comments_616803.json:
```json
{
    "body": "<a id='comment:29'></a>New commits:",
    "created_at": "2021-03-19T19:20:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616803",
    "user": "https://github.com/EnderWannabe"
}
```

<a id='comment:29'></a>New commits:



---

archive/issue_comments_616804.json:
```json
{
    "body": "Changing branch from \"u/gh-EnderWannabe/good_reduction_fix\" to \"u/bhutz/good_reduction_fix\"",
    "created_at": "2021-03-20T00:50:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616804",
    "user": "https://github.com/bhutz"
}
```

Changing branch from "u/gh-EnderWannabe/good_reduction_fix" to "u/bhutz/good_reduction_fix"



---

archive/issue_comments_616805.json:
```json
{
    "body": "Changing commit from \"2d838a1bf517ae3e2f4241d048560f87d2e49703\" to \"ea29310ef2775664262c712c5f2256c469b447f3\"",
    "created_at": "2021-03-20T00:51:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616805",
    "user": "https://github.com/bhutz"
}
```

Changing commit from "2d838a1bf517ae3e2f4241d048560f87d2e49703" to "ea29310ef2775664262c712c5f2256c469b447f3"



---

archive/issue_comments_616806.json:
```json
{
    "body": "<a id='comment:31'></a>err...that didn't fix the merge conflict. Try this one.",
    "created_at": "2021-03-20T00:51:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616806",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:31'></a>err...that didn't fix the merge conflict. Try this one.



---

archive/issue_comments_616807.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-03-22T15:53:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616807",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_616808.json:
```json
{
    "body": "<a id='comment:32'></a>red branch => needs work",
    "created_at": "2021-03-22T15:53:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616808",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:32'></a>red branch => needs work



---

archive/issue_comments_616809.json:
```json
{
    "body": "Changing commit from \"ea29310ef2775664262c712c5f2256c469b447f3\" to \"abc6978d1ba197ecba2a5f2129d6950fe96cf0a2\"",
    "created_at": "2021-03-22T18:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616809",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ea29310ef2775664262c712c5f2256c469b447f3" to "abc6978d1ba197ecba2a5f2129d6950fe96cf0a2"



---

archive/issue_comments_616810.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-22T18:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616810",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_616811.json:
```json
{
    "body": "<a id='comment:34'></a>Apparently I failed to commit the merge conflict fix. I've done so now.",
    "created_at": "2021-03-22T19:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616811",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:34'></a>Apparently I failed to commit the merge conflict fix. I've done so now.



---

archive/issue_comments_616812.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-03-22T19:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616812",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_616813.json:
```json
{
    "body": "<a id='comment:35'></a>ping",
    "created_at": "2021-03-28T00:11:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616813",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:35'></a>ping



---

archive/issue_comments_616814.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-03-28T20:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616814",
    "user": "https://github.com/EnderWannabe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_616815.json:
```json
{
    "body": "<a id='comment:36'></a>Looks good. Hopefully that resolves this merge conflict",
    "created_at": "2021-03-28T20:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616815",
    "user": "https://github.com/EnderWannabe"
}
```

<a id='comment:36'></a>Looks good. Hopefully that resolves this merge conflict



---

archive/issue_comments_616816.json:
```json
{
    "body": "<a id='comment:37'></a>milestone to 9.4, as 9.3 has been released",
    "created_at": "2021-05-10T11:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616816",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:37'></a>milestone to 9.4, as 9.3 has been released



---

archive/issue_events_081151.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-05-10T11:05:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31083#event-81151"
}
```



---

archive/issue_comments_616817.json:
```json
{
    "body": "<a id='comment:38'></a>\n```\n             return gccc, m * mc * mc2, psi\n         return gccc\n \n-    def potential_good_reduction(self, prime):\n+    def potential_good_reduction(self, prime, return_conjugation=False):\n         r\"\"\"\n-        Return if this dynamical system has potential good reduction at ``prime``.\n+        Return ``True`` if this dynamical system has potential good reduction at ``prime``.\n \n         A dynamical system has good reduction at ``prime`` if after the coefficients\n```\nIn light of the discussion in #32205, this could proactively be changed to \n`def potential_good_reduction(self, prime, *, return_conjugation=False)`, to declare `return_conjugation` to be a keyword-only argument.",
    "created_at": "2021-07-24T18:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616817",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>
```
             return gccc, m * mc * mc2, psi
         return gccc
 
-    def potential_good_reduction(self, prime):
+    def potential_good_reduction(self, prime, return_conjugation=False):
         r"""
-        Return if this dynamical system has potential good reduction at ``prime``.
+        Return ``True`` if this dynamical system has potential good reduction at ``prime``.
 
         A dynamical system has good reduction at ``prime`` if after the coefficients
```
In light of the discussion in #32205, this could proactively be changed to 
`def potential_good_reduction(self, prime, *, return_conjugation=False)`, to declare `return_conjugation` to be a keyword-only argument.



---

archive/issue_comments_616818.json:
```json
{
    "body": "<a id='comment:39'></a>Promoting 5 tickets that fix defects to \"major\" so that they have a chance to get merged",
    "created_at": "2021-07-24T18:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616818",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>Promoting 5 tickets that fix defects to "major" so that they have a chance to get merged



---

archive/issue_events_081152.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-25T13:27:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31083#event-81152"
}
```



---

archive/issue_comments_616819.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-25T13:27:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616819",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_616820.json:
```json
{
    "body": "Changing branch from \"u/bhutz/good_reduction_fix\" to \"abc6978d1ba197ecba2a5f2129d6950fe96cf0a2\"",
    "created_at": "2021-07-25T13:27:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31083#issuecomment-616820",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/bhutz/good_reduction_fix" to "abc6978d1ba197ecba2a5f2129d6950fe96cf0a2"
