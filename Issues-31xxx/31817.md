# Issue 31817: looking for a sane installation process

archive/issues_031580.json:
```json
{
    "body": "I'm looking for a sane installation process. We have a linux system that\nalready has python2, python3, pkgconf, gcc, gdb, openblas, scipy,...., yet\nthe sage source code insists on downloading and compiling what amounts\nto an entire new linux system. Is there not a sane installation process that\nbuilds against the libraries that already exist on the system and uses\nthe compilation tools that already exist?\n\nI'm going to leave the priority at \"major\" because this blocks us from\nproducing a package for this linux distribution.\n\n\nCC:  @slel\n\nReviewer: Dima Pasechnik\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/31817\n\n",
    "closed_at": "2021-06-23T15:47:30Z",
    "created_at": "2021-05-12T03:27:57Z",
    "labels": [
        "component: build: configure"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "looking for a sane installation process",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31817",
    "user": "https://github.com/themaddoctor"
}
```
I'm looking for a sane installation process. We have a linux system that
already has python2, python3, pkgconf, gcc, gdb, openblas, scipy,...., yet
the sage source code insists on downloading and compiling what amounts
to an entire new linux system. Is there not a sane installation process that
builds against the libraries that already exist on the system and uses
the compilation tools that already exist?

I'm going to leave the priority at "major" because this blocks us from
producing a package for this linux distribution.


CC:  @slel

Reviewer: Dima Pasechnik

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/31817





---

archive/issue_comments_632560.json:
```json
{
    "body": "<a id='comment:1'></a>Try with reading the README first.",
    "created_at": "2021-05-12T04:03:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31817#issuecomment-632560",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>Try with reading the README first.



---

archive/issue_comments_632561.json:
```json
{
    "body": "<a id='comment:2'></a>Take a look at Gentoo Linux: `emerge sage` literally builds against the libraries that already exist on the system and uses the compilation tools that already exist",
    "created_at": "2021-05-12T07:56:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31817#issuecomment-632561",
    "user": "https://github.com/sheerluck"
}
```

<a id='comment:2'></a>Take a look at Gentoo Linux: `emerge sage` literally builds against the libraries that already exist on the system and uses the compilation tools that already exist



---

archive/issue_comments_632562.json:
```json
{
    "body": "<a id='comment:3'></a>> Is there not a sane installation process that\n> builds against the libraries that already exist\n> on the system and uses the compilation tools\n> that already exist?\n\n\nThere is. Follow the instructions in the README:\n\n- https://github.com/sagemath/sage/blob/master/README.md\n\nIn particular, the output of the `./configure` step\nends with recommendations of system packages to install\nto ensure Sage installs as few components as possible.\n\nThis works for many distributions (Arch Linux, Conda,\nCygwin, Debian, Fedora, FreeBSD, Gentoo, Homebrew, . Yours might\nbe supported; you only mention \"a linux system\".\n\nFor many packages, an `spkg-configure.m4` script detects\nwhether that package is already present system-wide\nso Sage will use it instead of building its own.\n\nProgress of this \"spkg-configure\" effort is tracked at\n\n- #27330: Meta-ticket: spkg-configure: Try to use as many system packages as possible",
    "created_at": "2021-05-12T08:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31817#issuecomment-632562",
    "user": "https://github.com/slel"
}
```

<a id='comment:3'></a>> Is there not a sane installation process that
> builds against the libraries that already exist
> on the system and uses the compilation tools
> that already exist?


There is. Follow the instructions in the README:

- https://github.com/sagemath/sage/blob/master/README.md

In particular, the output of the `./configure` step
ends with recommendations of system packages to install
to ensure Sage installs as few components as possible.

This works for many distributions (Arch Linux, Conda,
Cygwin, Debian, Fedora, FreeBSD, Gentoo, Homebrew, . Yours might
be supported; you only mention "a linux system".

For many packages, an `spkg-configure.m4` script detects
whether that package is already present system-wide
so Sage will use it instead of building its own.

Progress of this "spkg-configure" effort is tracked at

- #27330: Meta-ticket: spkg-configure: Try to use as many system packages as possible



---

archive/issue_comments_632563.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to build: configure.",
    "created_at": "2021-05-12T08:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31817#issuecomment-632563",
    "user": "https://github.com/slel"
}
```

Changing component from PLEASE CHANGE to build: configure.



---

archive/issue_comments_632564.json:
```json
{
    "body": "<a id='comment:4'></a>Marking as duplicate as improving the installation\nprocess is tracked elsewhere.\n\nWhen you say\n\n> this blocks us from producing a package\n> for this linux distribution\n\n\ndoes it blocks installing Sage, or does it block\nproducing another package that depends on it?",
    "created_at": "2021-05-12T08:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31817#issuecomment-632564",
    "user": "https://github.com/slel"
}
```

<a id='comment:4'></a>Marking as duplicate as improving the installation
process is tracked elsewhere.

When you say

> this blocks us from producing a package
> for this linux distribution


does it blocks installing Sage, or does it block
producing another package that depends on it?



---

archive/issue_events_084037.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-05-12T08:58:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31817",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31817#event-84037"
}
```



---

archive/issue_comments_632565.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-05-12T08:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31817#issuecomment-632565",
    "user": "https://github.com/slel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_632566.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2021-05-12T08:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31817#issuecomment-632566",
    "user": "https://github.com/slel"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_632567.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-03T21:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31817#issuecomment-632567",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_632568.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2021-06-03T21:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31817#issuecomment-632568",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_632569.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2021-06-23T15:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31817",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31817#issuecomment-632569",
    "user": "https://github.com/fchapoton"
}
```

Resolution: invalid



---

archive/issue_events_084038.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-06-23T15:47:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31817",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31817#event-84038"
}
```
