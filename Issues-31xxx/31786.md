# Issue 31786: Accept gcc 11 (for fedora 34)

archive/issues_031549.json:
```json
{
    "body": "After having resolved the following blockers:\n\n- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds\n- #31624 fedora-34-standard: eclib, singular build failures with system ntl\n- #31838 gfortran: Accept system gfortran 11\n- #31879/#27901 `libgd`\n- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)\n- #32093 `ecl`: Add `SAGE_SPKG_DEPCHECK` for `gcc`\n- #31837 `lcalc` headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)\n- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)\n- gcc 10 build fails in some circumstances on Fedora 34 (https://groups.google.com/g/sage-devel/c/LcQ3ufUOJpI/m/lOsDMZ0qBQAJ, https://gcc.gnu.org/pipermail/gcc-help/2021-June/140439.html)\n\n... we accept gcc 11 again. This will allow building Sage with the default compilers on Fedora 34 and other platforms.\n\n\nNot so urgent:\n\n- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)\n- Optional package `latte_int` doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)\n\n\nCC:  @zlscherr @jhpalmieri @dimpase @kiwifb @enriqueartal @vbraun\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nBranch: f47c47e4560c449524a77daa7cc17f4e630e8483\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31786\n\n",
    "closed_at": "2021-07-23T20:12:01Z",
    "created_at": "2021-05-06T17:21:13Z",
    "labels": [
        "component: build",
        "blocker"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Accept gcc 11 (for fedora 34)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31786",
    "user": "https://github.com/mkoeppe"
}
```
After having resolved the following blockers:

- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds
- #31624 fedora-34-standard: eclib, singular build failures with system ntl
- #31838 gfortran: Accept system gfortran 11
- #31879/#27901 `libgd`
- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)
- #32093 `ecl`: Add `SAGE_SPKG_DEPCHECK` for `gcc`
- #31837 `lcalc` headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)
- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)
- gcc 10 build fails in some circumstances on Fedora 34 (https://groups.google.com/g/sage-devel/c/LcQ3ufUOJpI/m/lOsDMZ0qBQAJ, https://gcc.gnu.org/pipermail/gcc-help/2021-June/140439.html)

... we accept gcc 11 again. This will allow building Sage with the default compilers on Fedora 34 and other platforms.


Not so urgent:

- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)
- Optional package `latte_int` doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)


CC:  @zlscherr @jhpalmieri @dimpase @kiwifb @enriqueartal @vbraun

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Branch: f47c47e4560c449524a77daa7cc17f4e630e8483

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31786





---

archive/issue_comments_632071.json:
```json
{
    "body": "<a id='comment:1'></a>I didn't have any problems in Gentoo with `eclib` and `ntl`.",
    "created_at": "2021-05-06T20:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632071",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:1'></a>I didn't have any problems in Gentoo with `eclib` and `ntl`.



---

archive/issue_comments_632072.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,13 @@\n - #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds\n - #31624 fedora-34-standard: eclib, singular build failures with system ntl\n+\n+- pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)\n+- lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)\n+- fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)\n+\n+Optional package:\n+- latte doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)\n+\n \n Comment: 1\n \n``````\n",
    "created_at": "2021-05-06T20:29:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632072",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,13 @@
 - #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds
 - #31624 fedora-34-standard: eclib, singular build failures with system ntl
+
+- pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)
+- lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)
+- fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)
+
+Optional package:
+- latte doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)
+
 
 Comment: 1
 
``````




---

archive/issue_comments_632073.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,13 @@\n+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds\n+- #31624 fedora-34-standard: eclib, singular build failures with system ntl\n+\n+- pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)\n+- lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)\n+- fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)\n+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)\n+\n+Optional package:\n+- latte doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-05-06T20:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632073",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,13 @@
+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds
+- #31624 fedora-34-standard: eclib, singular build failures with system ntl
+
+- pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)
+- lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)
+- fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)
+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)
+
+Optional package:
+- latte doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)
 
 
 Comment: 1
``````




---

archive/issue_comments_632074.json:
```json
{
    "body": "<a id='comment:3'></a>Note that issue of standard do not arise in vanilla sage since we enforce std=c++11. However, issues with headers are not prevented by sticking to that standard, which means the following have to be fixed in any case:\n* fplll\n* pynac\n* lcalc\n\nOthers can be delayed.",
    "created_at": "2021-05-06T20:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632074",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:3'></a>Note that issue of standard do not arise in vanilla sage since we enforce std=c++11. However, issues with headers are not prevented by sticking to that standard, which means the following have to be fixed in any case:
* fplll
* pynac
* lcalc

Others can be delayed.



---

archive/issue_comments_632075.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,13 @@\n+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds\n+- #31624 fedora-34-standard: eclib, singular build failures with system ntl\n+\n+- pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)\n+- lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)\n+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)\n+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)\n+\n+Optional package:\n+- latte doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-05-18T05:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632075",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,13 @@
+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds
+- #31624 fedora-34-standard: eclib, singular build failures with system ntl
+
+- pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)
+- lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)
+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)
+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)
+
+Optional package:
+- latte doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)
 
 
 Comment: 1
``````




---

archive/issue_comments_632076.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,13 @@\n+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds\n+- #31624 fedora-34-standard: eclib, singular build failures with system ntl\n+\n+- pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)\n+- #31837 lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)\n+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)\n+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)\n+\n+Optional package:\n+- latte doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-05-18T18:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632076",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,13 @@
+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds
+- #31624 fedora-34-standard: eclib, singular build failures with system ntl
+
+- pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)
+- #31837 lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)
+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)
+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)
+
+Optional package:
+- latte doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)
 
 
 Comment: 1
``````




---

archive/issue_comments_632077.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,13 @@\n+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds\n+- #31624 fedora-34-standard: eclib, singular build failures with system ntl\n+\n+- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)\n+- #31837 lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)\n+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)\n+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)\n+\n+Optional package:\n+- latte doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-05-18T18:06:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632077",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,13 @@
+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds
+- #31624 fedora-34-standard: eclib, singular build failures with system ntl
+
+- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)
+- #31837 lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)
+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)
+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)
+
+Optional package:
+- latte doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)
 
 
 Comment: 1
``````




---

archive/issue_comments_632078.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,15 @@\n+Blockers for 9.4:\n+\n+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds\n+- #31624 fedora-34-standard: eclib, singular build failures with system ntl\n+- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)\n+- #31837 lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)\n+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)\n+\n+Not so urgent:\n+\n+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)\n+- Optional package `latte_int` doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-05-18T18:13:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632078",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,15 @@
+Blockers for 9.4:
+
+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds
+- #31624 fedora-34-standard: eclib, singular build failures with system ntl
+- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)
+- #31837 lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)
+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)
+
+Not so urgent:
+
+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)
+- Optional package `latte_int` doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)
 
 
 Comment: 1
``````




---

archive/issue_comments_632079.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/meta_ticket__support_gcc_11__fedora_34_\"",
    "created_at": "2021-05-19T01:31:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632079",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/meta_ticket__support_gcc_11__fedora_34_"



---

archive/issue_comments_632080.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,16 @@\n+Blockers for 9.4:\n+\n+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds\n+- #31624 fedora-34-standard: eclib, singular build failures with system ntl\n+- #31838 gfortran: Accept system gfortran 11\n+- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)\n+- #31837 lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)\n+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)\n+\n+Not so urgent:\n+\n+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)\n+- Optional package `latte_int` doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-05-19T01:46:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632080",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,16 @@
+Blockers for 9.4:
+
+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds
+- #31624 fedora-34-standard: eclib, singular build failures with system ntl
+- #31838 gfortran: Accept system gfortran 11
+- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)
+- #31837 lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)
+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)
+
+Not so urgent:
+
+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)
+- Optional package `latte_int` doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)
 
 
 Comment: 1
``````




---

archive/issue_comments_632081.json:
```json
{
    "body": "Changing commit from \"\" to \"5486f814f2b1b2210ca253b6b4c342b9b1a0bc8f\"",
    "created_at": "2021-05-19T01:46:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632081",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "5486f814f2b1b2210ca253b6b4c342b9b1a0bc8f"



---

archive/issue_comments_632082.json:
```json
{
    "body": "<a id='comment:9'></a>New commits:",
    "created_at": "2021-05-19T01:46:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632082",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>New commits:



---

archive/issue_comments_632083.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,17 @@\n+Blockers for 9.4:\n+\n+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds\n+- #31624 fedora-34-standard: eclib, singular build failures with system ntl\n+- #31838 gfortran: Accept system gfortran 11\n+- #27901 `libgd`\n+- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)\n+- #31837 lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)\n+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)\n+\n+Not so urgent:\n+\n+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)\n+- Optional package `latte_int` doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-05-28T06:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632083",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,17 @@
+Blockers for 9.4:
+
+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds
+- #31624 fedora-34-standard: eclib, singular build failures with system ntl
+- #31838 gfortran: Accept system gfortran 11
+- #27901 `libgd`
+- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)
+- #31837 lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)
+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)
+
+Not so urgent:
+
+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)
+- Optional package `latte_int` doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)
 
 
 Comment: 1
``````




---

archive/issue_comments_632084.json:
```json
{
    "body": "<a id='comment:11'></a>The compilation failed with lcalc and pynac. The other packages in the introduction have been built, except for fplll which did not appear.",
    "created_at": "2021-05-29T21:01:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632084",
    "user": "https://github.com/enriqueartal"
}
```

<a id='comment:11'></a>The compilation failed with lcalc and pynac. The other packages in the introduction have been built, except for fplll which did not appear.



---

archive/issue_comments_632085.json:
```json
{
    "body": "<a id='comment:12'></a>Workaround for libgd is at #31879",
    "created_at": "2021-05-30T17:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632085",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>Workaround for libgd is at #31879



---

archive/issue_comments_632086.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,17 @@\n+Blockers for 9.4:\n+\n+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds\n+- #31624 fedora-34-standard: eclib, singular build failures with system ntl\n+- #31838 gfortran: Accept system gfortran 11\n+- #31879/#27901 `libgd`\n+- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)\n+- #31837 lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)\n+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)\n+\n+Not so urgent:\n+\n+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)\n+- Optional package `latte_int` doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-05-30T17:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632086",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,17 @@
+Blockers for 9.4:
+
+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds
+- #31624 fedora-34-standard: eclib, singular build failures with system ntl
+- #31838 gfortran: Accept system gfortran 11
+- #31879/#27901 `libgd`
+- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)
+- #31837 lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)
+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)
+
+Not so urgent:
+
+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)
+- Optional package `latte_int` doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)
 
 
 Comment: 1
``````




---

archive/issue_comments_632087.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,18 @@\n+Blockers for 9.4:\n+\n+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds\n+- #31624 fedora-34-standard: eclib, singular build failures with system ntl\n+- #31838 gfortran: Accept system gfortran 11\n+- #31879/#27901 `libgd`\n+- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)\n+- #31837 lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)\n+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)\n+- gcc 10 build fails in some circumstances on Fedora 34 (https://groups.google.com/g/sage-devel/c/LcQ3ufUOJpI/m/lOsDMZ0qBQAJ, https://gcc.gnu.org/pipermail/gcc-help/2021-June/140439.html)\n+\n+Not so urgent:\n+\n+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)\n+- Optional package `latte_int` doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-06-22T15:29:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632087",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,18 @@
+Blockers for 9.4:
+
+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds
+- #31624 fedora-34-standard: eclib, singular build failures with system ntl
+- #31838 gfortran: Accept system gfortran 11
+- #31879/#27901 `libgd`
+- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)
+- #31837 lcalc headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)
+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)
+- gcc 10 build fails in some circumstances on Fedora 34 (https://groups.google.com/g/sage-devel/c/LcQ3ufUOJpI/m/lOsDMZ0qBQAJ, https://gcc.gnu.org/pipermail/gcc-help/2021-June/140439.html)
+
+Not so urgent:
+
+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)
+- Optional package `latte_int` doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)
 
 
 Comment: 1
``````




---

archive/issue_comments_632088.json:
```json
{
    "body": "<a id='comment:15'></a>rebase please",
    "created_at": "2021-06-22T20:40:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632088",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>rebase please



---

archive/issue_comments_632089.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/meta_ticket__support_gcc_11__fedora_34_\" to \"\"",
    "created_at": "2021-06-22T22:16:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632089",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "u/mkoeppe/meta_ticket__support_gcc_11__fedora_34_" to ""



---

archive/issue_comments_632090.json:
```json
{
    "body": "<a id='comment:16'></a>The branch is no longer relevant, all tickets have been merged",
    "created_at": "2021-06-22T22:16:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632090",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>The branch is no longer relevant, all tickets have been merged



---

archive/issue_comments_632091.json:
```json
{
    "body": "Changing commit from \"5486f814f2b1b2210ca253b6b4c342b9b1a0bc8f\" to \"\"",
    "created_at": "2021-06-22T22:16:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632091",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "5486f814f2b1b2210ca253b6b4c342b9b1a0bc8f" to ""



---

archive/issue_comments_632092.json:
```json
{
    "body": "<a id='comment:17'></a>By the way, a viable route to work on Fedora 34 might be to use clang rather than gcc.\n\n```\ndnf install clang\nCC=clang CXX=clang++ ./configure...\n```\nDo we test Linux/clang on GH Actions? We should...",
    "created_at": "2021-06-23T08:25:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632092",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>By the way, a viable route to work on Fedora 34 might be to use clang rather than gcc.

```
dnf install clang
CC=clang CXX=clang++ ./configure...
```
Do we test Linux/clang on GH Actions? We should...



---

archive/issue_comments_632093.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:17 dimpase]:\n> Do we test Linux/clang on GH Actions? We should...\n\n\nI agree. #30835 can be broadened to include this...",
    "created_at": "2021-06-23T16:04:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632093",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>Replying to [comment:17 dimpase]:
> Do we test Linux/clang on GH Actions? We should...


I agree. #30835 can be broadened to include this...



---

archive/issue_comments_632094.json:
```json
{
    "body": "<a id='comment:19'></a>we see Maxima builds failing in Fedora 34 on the latests CI runs, see e.g.\nhttps://github.com/sagemath/sagetrac-mirror/runs/2918514130",
    "created_at": "2021-06-30T16:49:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632094",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>we see Maxima builds failing in Fedora 34 on the latests CI runs, see e.g.
https://github.com/sagemath/sagetrac-mirror/runs/2918514130



---

archive/issue_comments_632095.json:
```json
{
    "body": "<a id='comment:20'></a>earlier in that log:\n\n```\n;;; (EXT:RUN-PROGRAM \"gcc\" (\"-I.\" \"-I/usr/include/\" \"-D_GNU_SOURCE\" \"-D_FILE_OFFSET_BITS=64\" \"-O2\" \"-flto=auto\" \"-ffat-lto-objects\" \"-fexceptions\" \"-g\" \"-grecord-gcc-switches\" \"-pipe\" \"-Wall\" \"-Werror=format-security\" \"-Wp,-D_FORTIFY_SOURCE=2\" \"-Wp,-D_GLIBCXX_ASSERTIONS\" \"-specs=/usr/lib/rpm/redhat/redhat-hardened-cc1\" \"-fstack-protector-strong\" \"-specs=/usr/lib/rpm/redhat/redhat-annobin-cc1\" \"-m64\" \"-mtune=generic\" \"-fasynchronous-unwind-tables\" \"-fstack-clash-protection\" \"-fcf-protection\" \"-Wno-unused\" \"-Wno-return-type\" \"-Wno-unknown-pragmas\" \"-fPIC\" \"-D_THREAD_SAFE\" \"-Dlinux\" \"-O2\" \"-c\" \"binary-ecl/maxima-package.c\" \"-o\" \"binary-ecl/maxima-package.o\")):\n;;; cc1: fatal error: inaccessible plugin file /sage/local/lib/gcc/x86_64-pc-linux-gnu/10.3.0/plugin/annobin.so expanded from short plugin name annobin: No such file or directory\n;;; compilation terminated.\n;      - Loading binary file \"binary-ecl/maxima-package.fas\" \nCondition of type: FILE-ERROR\nFilesystem error with pathname #P\"/sage/local/var/tmp/sage/build/maxima-5.45.0/src/src/binary-ecl/maxima-package.fas\".\n```",
    "created_at": "2021-06-30T18:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632095",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>earlier in that log:

```
;;; (EXT:RUN-PROGRAM "gcc" ("-I." "-I/usr/include/" "-D_GNU_SOURCE" "-D_FILE_OFFSET_BITS=64" "-O2" "-flto=auto" "-ffat-lto-objects" "-fexceptions" "-g" "-grecord-gcc-switches" "-pipe" "-Wall" "-Werror=format-security" "-Wp,-D_FORTIFY_SOURCE=2" "-Wp,-D_GLIBCXX_ASSERTIONS" "-specs=/usr/lib/rpm/redhat/redhat-hardened-cc1" "-fstack-protector-strong" "-specs=/usr/lib/rpm/redhat/redhat-annobin-cc1" "-m64" "-mtune=generic" "-fasynchronous-unwind-tables" "-fstack-clash-protection" "-fcf-protection" "-Wno-unused" "-Wno-return-type" "-Wno-unknown-pragmas" "-fPIC" "-D_THREAD_SAFE" "-Dlinux" "-O2" "-c" "binary-ecl/maxima-package.c" "-o" "binary-ecl/maxima-package.o")):
;;; cc1: fatal error: inaccessible plugin file /sage/local/lib/gcc/x86_64-pc-linux-gnu/10.3.0/plugin/annobin.so expanded from short plugin name annobin: No such file or directory
;;; compilation terminated.
;      - Loading binary file "binary-ecl/maxima-package.fas" 
Condition of type: FILE-ERROR
Filesystem error with pathname #P"/sage/local/var/tmp/sage/build/maxima-5.45.0/src/src/binary-ecl/maxima-package.fas".
```



---

archive/issue_comments_632096.json:
```json
{
    "body": "<a id='comment:21'></a>Looks like combining system `ecl` with our `gcc` does not work because it uses Fedora-specific compiler options. \n\nThis will go away when we can accept system gcc11...",
    "created_at": "2021-06-30T18:18:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632096",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>Looks like combining system `ecl` with our `gcc` does not work because it uses Fedora-specific compiler options. 

This will go away when we can accept system gcc11...



---

archive/issue_comments_632097.json:
```json
{
    "body": "<a id='comment:22'></a>that annobin-related gcc/ecl bug was also reported on sage-devel\n\nRedhat/Fedora does something special with annobin,\nperhaps that's the fallout we see here",
    "created_at": "2021-06-30T20:13:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632097",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>that annobin-related gcc/ecl bug was also reported on sage-devel

Redhat/Fedora does something special with annobin,
perhaps that's the fallout we see here



---

archive/issue_comments_632098.json:
```json
{
    "body": "<a id='comment:23'></a>I've opened #32093 for this",
    "created_at": "2021-06-30T20:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632098",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>I've opened #32093 for this



---

archive/issue_comments_632099.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,19 @@\n+Blockers for 9.4:\n+\n+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds\n+- #31624 fedora-34-standard: eclib, singular build failures with system ntl\n+- #31838 gfortran: Accept system gfortran 11\n+- #31879/#27901 `libgd`\n+- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)\n+- #32093 `ecl`: Add `SAGE_SPKG_DEPCHECK` for `gcc`\n+- #31837 `lcalc` headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)\n+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)\n+- gcc 10 build fails in some circumstances on Fedora 34 (https://groups.google.com/g/sage-devel/c/LcQ3ufUOJpI/m/lOsDMZ0qBQAJ, https://gcc.gnu.org/pipermail/gcc-help/2021-June/140439.html)\n+\n+Not so urgent:\n+\n+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)\n+- Optional package `latte_int` doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-06-30T20:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632099",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,19 @@
+Blockers for 9.4:
+
+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds
+- #31624 fedora-34-standard: eclib, singular build failures with system ntl
+- #31838 gfortran: Accept system gfortran 11
+- #31879/#27901 `libgd`
+- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)
+- #32093 `ecl`: Add `SAGE_SPKG_DEPCHECK` for `gcc`
+- #31837 `lcalc` headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)
+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)
+- gcc 10 build fails in some circumstances on Fedora 34 (https://groups.google.com/g/sage-devel/c/LcQ3ufUOJpI/m/lOsDMZ0qBQAJ, https://gcc.gnu.org/pipermail/gcc-help/2021-June/140439.html)
+
+Not so urgent:
+
+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)
+- Optional package `latte_int` doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)
 
 
 Comment: 1
``````




---

archive/issue_comments_632100.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/meta_ticket__support_gcc_11__fedora_34_\"",
    "created_at": "2021-06-30T21:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632100",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/meta_ticket__support_gcc_11__fedora_34_"



---

archive/issue_comments_632101.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-06-30T21:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632101",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_632102.json:
```json
{
    "body": "<a id='comment:26'></a>Last 10 new commits:",
    "created_at": "2021-06-30T21:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632102",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>Last 10 new commits:



---

archive/issue_comments_632103.json:
```json
{
    "body": "Changing commit from \"\" to \"f47c47e4560c449524a77daa7cc17f4e630e8483\"",
    "created_at": "2021-06-30T21:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632103",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "f47c47e4560c449524a77daa7cc17f4e630e8483"



---

archive/issue_comments_632104.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#31694, #32093, #31837\"",
    "created_at": "2021-06-30T21:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632104",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#31694, #32093, #31837"



---

archive/issue_comments_632105.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-06-30T21:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632105",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_632106.json:
```json
{
    "body": "Changing reviewer from \"\" to \"https://github.com/mkoeppe/sage/actions/runs/984105414\"",
    "created_at": "2021-06-30T21:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632106",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "https://github.com/mkoeppe/sage/actions/runs/984105414"



---

archive/issue_comments_632107.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2021-06-30T21:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632107",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_632108.json:
```json
{
    "body": "<a id='comment:28'></a>Does this work with #32037 and without lcalc patch?",
    "created_at": "2021-07-07T16:25:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632108",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'></a>Does this work with #32037 and without lcalc patch?



---

archive/issue_comments_632109.json:
```json
{
    "body": "<a id='comment:29'></a>This is unknown. I don't think portability testing has been run on #32037.",
    "created_at": "2021-07-07T20:05:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632109",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>This is unknown. I don't think portability testing has been run on #32037.



---

archive/issue_comments_632110.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:29 mkoeppe]:\n> This is unknown. I don't think portability testing has been run on #32037.\n\nthey are now running on https://github.com/sagemath/sagetrac-mirror/actions/runs/1009717554",
    "created_at": "2021-07-07T22:52:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632110",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:30'></a>Replying to [comment:29 mkoeppe]:
> This is unknown. I don't think portability testing has been run on #32037.

they are now running on https://github.com/sagemath/sagetrac-mirror/actions/runs/1009717554



---

archive/issue_comments_632111.json:
```json
{
    "body": "<a id='comment:31'></a>gengetopt does not build on ubunty-trusty. Arrgh...",
    "created_at": "2021-07-08T10:25:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632111",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>gengetopt does not build on ubunty-trusty. Arrgh...



---

archive/issue_comments_632112.json:
```json
{
    "body": "Changing dependencies from \"#31694, #32093, #31837\" to \"\"",
    "created_at": "2021-07-19T03:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632112",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#31694, #32093, #31837" to ""



---

archive/issue_comments_632113.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,22 @@\n+After having resolved the following blockers:\n+\n+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds\n+- #31624 fedora-34-standard: eclib, singular build failures with system ntl\n+- #31838 gfortran: Accept system gfortran 11\n+- #31879/#27901 `libgd`\n+- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)\n+- #32093 `ecl`: Add `SAGE_SPKG_DEPCHECK` for `gcc`\n+- #31837 `lcalc` headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)\n+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)\n+- gcc 10 build fails in some circumstances on Fedora 34 (https://groups.google.com/g/sage-devel/c/LcQ3ufUOJpI/m/lOsDMZ0qBQAJ, https://gcc.gnu.org/pipermail/gcc-help/2021-June/140439.html)\n+\n+... we accept gcc 11 again. This will allow building Sage with the default compilers on Fedora 34 and other platforms.\n+\n+\n+Not so urgent:\n+\n+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)\n+- Optional package `latte_int` doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)\n \n \n Comment: 1\n``````\n",
    "created_at": "2021-07-19T03:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632113",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,22 @@
+After having resolved the following blockers:
+
+- #29703 Upgrade gcc to 10.3 (latest 10.x), fix --without-system-gcc builds
+- #31624 fedora-34-standard: eclib, singular build failures with system ntl
+- #31838 gfortran: Accept system gfortran 11
+- #31879/#27901 `libgd`
+- #31694 pynac fails to compile with gcc-11 (headers porting) [https://github.com/pynac/pynac/pull/375](https://github.com/pynac/pynac/pull/375)
+- #32093 `ecl`: Add `SAGE_SPKG_DEPCHECK` for `gcc`
+- #31837 `lcalc` headers prevent sage compilation [https://github.com/cschwan/sage-on-gentoo/issues/634](https://github.com/cschwan/sage-on-gentoo/issues/634) and [https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch](https://github.com/cschwan/sage-on-gentoo/blob/master/sci-mathematics/lcalc/files/lcalc-1.23-gcc11.patch)
+- #31832 fplll fails to compile with gcc-11 (headers porting) [https://github.com/fplll/fplll/pull/463](https://github.com/fplll/fplll/pull/463)
+- gcc 10 build fails in some circumstances on Fedora 34 (https://groups.google.com/g/sage-devel/c/LcQ3ufUOJpI/m/lOsDMZ0qBQAJ, https://gcc.gnu.org/pipermail/gcc-help/2021-June/140439.html)
+
+... we accept gcc 11 again. This will allow building Sage with the default compilers on Fedora 34 and other platforms.
+
+
+Not so urgent:
+
+- giac (any versions) doesn't compile with std=c++17 [https://bugs.gentoo.org/788283](https://bugs.gentoo.org/788283)
+- Optional package `latte_int` doesn't compile with std=c++17 (exception handling) [https://github.com/latte-int/latte/issues/24](https://github.com/latte-int/latte/issues/24)
 
 
 Comment: 1
``````




---

archive/issue_comments_632114.json:
```json
{
    "body": "<a id='comment:32'></a>With all dependencies now merged in 9.4.beta5, let's get this in please.",
    "created_at": "2021-07-19T03:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632114",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>With all dependencies now merged in 9.4.beta5, let's get this in please.



---

archive/issue_comments_632115.json:
```json
{
    "body": "Changing reviewer from \"https://github.com/mkoeppe/sage/actions/runs/984105414\" to \"Dima Pasechnik\"",
    "created_at": "2021-07-19T21:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632115",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "https://github.com/mkoeppe/sage/actions/runs/984105414" to "Dima Pasechnik"



---

archive/issue_comments_632116.json:
```json
{
    "body": "<a id='comment:33'></a>I believe it actually works on Fedora 34, right?",
    "created_at": "2021-07-19T21:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632116",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:33'></a>I believe it actually works on Fedora 34, right?



---

archive/issue_comments_632117.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-19T21:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632117",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_632118.json:
```json
{
    "body": "<a id='comment:34'></a>Thanks, yes, I think so",
    "created_at": "2021-07-19T22:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632118",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>Thanks, yes, I think so



---

archive/issue_comments_632119.json:
```json
{
    "body": "<a id='comment:35'></a>It works for me in Fedora 34",
    "created_at": "2021-07-20T06:08:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632119",
    "user": "https://github.com/enriqueartal"
}
```

<a id='comment:35'></a>It works for me in Fedora 34



---

archive/issue_comments_632120.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/meta_ticket__support_gcc_11__fedora_34_\" to \"f47c47e4560c449524a77daa7cc17f4e630e8483\"",
    "created_at": "2021-07-23T20:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632120",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/meta_ticket__support_gcc_11__fedora_34_" to "f47c47e4560c449524a77daa7cc17f4e630e8483"



---

archive/issue_events_083913.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-23T20:12:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31786#event-83913"
}
```



---

archive/issue_comments_632121.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-23T20:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632121",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_632122.json:
```json
{
    "body": "Changing commit from \"f47c47e4560c449524a77daa7cc17f4e630e8483\" to \"\"",
    "created_at": "2022-06-12T12:51:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632122",
    "user": "https://github.com/vbraun"
}
```

Changing commit from "f47c47e4560c449524a77daa7cc17f4e630e8483" to ""



---

archive/issue_comments_632123.json:
```json
{
    "body": "<a id='comment:37'></a>I've created #33981 for latte_int",
    "created_at": "2022-06-12T12:51:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31786#issuecomment-632123",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:37'></a>I've created #33981 for latte_int
