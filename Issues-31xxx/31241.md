# Issue 31241: Forgetful Functors for Manifold Objects

archive/issues_031004.json:
```json
{
    "body": "It would be nice to allow forgetful functors for manifolds. In particular:\n\n- differentiable manifolds -> topological manifolds\n- (Pseudo-)Riemannian manifolds -> differentiable manifolds (not a category yet)\n- topological manifolds -> sets (?)\n\nand probably even more. The last point, if getting to work somehow, might also be useful and/or should be seen in view of #30832.\n\nAt the moment, we have the following behavior (which could be seen as a bug):\n\n```\nsage: from sage.categories.functor import ForgetfulFunctor\nsage: from sage.categories.manifolds import Manifolds\nsage: F = ForgetfulFunctor(Manifolds(RR).Differentiable(), Manifolds(RR).Topological())\nsage: M = Manifold(2, 'M')\nsage: F(M)\n2-dimensional differentiable manifold M\n```\n\n\nDepends on #31247\n\n**CC:**  @tscrim @egourgoulhon @mkoeppe\n\nIssue created by migration from https://trac.sagemath.org/ticket/31241\n\n",
    "created_at": "2021-01-14T17:02:40Z",
    "labels": [
        "component: manifolds",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "title": "Forgetful Functors for Manifold Objects",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/31241",
    "user": "https://github.com/mjungmath"
}
```
It would be nice to allow forgetful functors for manifolds. In particular:

- differentiable manifolds -> topological manifolds
- (Pseudo-)Riemannian manifolds -> differentiable manifolds (not a category yet)
- topological manifolds -> sets (?)

and probably even more. The last point, if getting to work somehow, might also be useful and/or should be seen in view of #30832.

At the moment, we have the following behavior (which could be seen as a bug):

```
sage: from sage.categories.functor import ForgetfulFunctor
sage: from sage.categories.manifolds import Manifolds
sage: F = ForgetfulFunctor(Manifolds(RR).Differentiable(), Manifolds(RR).Topological())
sage: M = Manifold(2, 'M')
sage: F(M)
2-dimensional differentiable manifold M
```


Depends on #31247

**CC:**  @tscrim @egourgoulhon @mkoeppe

Issue created by migration from https://trac.sagemath.org/ticket/31241





---

archive/issue_comments_503399.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n - (Pseudo-)Riemannian manifold -> differentiable manifold\n - topological manifold -> sets (?)\n \n-and probably even more. The last point might also be useful in terms of #30832.\n+and probably even more. The last point, if working, might also be useful in terms of #30832.\n \n At the moment, we have the following behavior (which could be seen as a bug):\n \n``````\n",
    "created_at": "2021-01-14T17:03:06Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503399",
    "user": "https://github.com/mjungmath"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 - (Pseudo-)Riemannian manifold -> differentiable manifold
 - topological manifold -> sets (?)
 
-and probably even more. The last point might also be useful in terms of #30832.
+and probably even more. The last point, if working, might also be useful in terms of #30832.
 
 At the moment, we have the following behavior (which could be seen as a bug):
 
``````




---

archive/issue_comments_503400.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -11,7 +11,7 @@\n ```\n sage: from sage.categories.functor import ForgetfulFunctor\n sage: from sage.categories.manifolds import Manifolds\n-sage: F = ForgetfulFunctor(Manifolds(RR).Differentiable(), Manifolds().Topological())\n+sage: F = ForgetfulFunctor(Manifolds(RR).Differentiable(), Manifolds(RR).Topological())\n sage: M = Manifold(2, 'M')\n sage: F(M)\n 2-dimensional differentiable manifold M\n``````\n",
    "created_at": "2021-01-14T17:03:54Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503400",
    "user": "https://github.com/mjungmath"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -11,7 +11,7 @@
 ```
 sage: from sage.categories.functor import ForgetfulFunctor
 sage: from sage.categories.manifolds import Manifolds
-sage: F = ForgetfulFunctor(Manifolds(RR).Differentiable(), Manifolds().Topological())
+sage: F = ForgetfulFunctor(Manifolds(RR).Differentiable(), Manifolds(RR).Topological())
 sage: M = Manifold(2, 'M')
 sage: F(M)
 2-dimensional differentiable manifold M
``````




---

archive/issue_comments_503401.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n It would be nice to allow forgetful functors for manifolds. In particular:\n \n-- differentiable manifold -> topological manifold\n-- (Pseudo-)Riemannian manifold -> differentiable manifold\n-- topological manifold -> sets (?)\n+- differentiable manifolds -> topological manifolds\n+- (Pseudo-)Riemannian manifolds -> differentiable manifolds\n+- topological manifolds -> sets (?)\n \n-and probably even more. The last point, if working, might also be useful in terms of #30832.\n+and probably even more. The last point, if getting to work somehow, might also be useful in terms of #30832.\n \n At the moment, we have the following behavior (which could be seen as a bug):\n \n``````\n",
    "created_at": "2021-01-14T17:04:41Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503401",
    "user": "https://github.com/mjungmath"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
 It would be nice to allow forgetful functors for manifolds. In particular:
 
-- differentiable manifold -> topological manifold
-- (Pseudo-)Riemannian manifold -> differentiable manifold
-- topological manifold -> sets (?)
+- differentiable manifolds -> topological manifolds
+- (Pseudo-)Riemannian manifolds -> differentiable manifolds
+- topological manifolds -> sets (?)
 
-and probably even more. The last point, if working, might also be useful in terms of #30832.
+and probably even more. The last point, if getting to work somehow, might also be useful in terms of #30832.
 
 At the moment, we have the following behavior (which could be seen as a bug):
 
``````




---

archive/issue_comments_503402.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n - (Pseudo-)Riemannian manifolds -> differentiable manifolds\n - topological manifolds -> sets (?)\n \n-and probably even more. The last point, if getting to work somehow, might also be useful in terms of #30832.\n+and probably even more. The last point, if getting to work somehow, might also be useful and/or should be seen in terms of #30832.\n \n At the moment, we have the following behavior (which could be seen as a bug):\n \n``````\n",
    "created_at": "2021-01-14T17:12:43Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503402",
    "user": "https://github.com/mjungmath"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 - (Pseudo-)Riemannian manifolds -> differentiable manifolds
 - topological manifolds -> sets (?)
 
-and probably even more. The last point, if getting to work somehow, might also be useful in terms of #30832.
+and probably even more. The last point, if getting to work somehow, might also be useful and/or should be seen in terms of #30832.
 
 At the moment, we have the following behavior (which could be seen as a bug):
 
``````




---

archive/issue_comments_503403.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n - (Pseudo-)Riemannian manifolds -> differentiable manifolds\n - topological manifolds -> sets (?)\n \n-and probably even more. The last point, if getting to work somehow, might also be useful and/or should be seen in terms of #30832.\n+and probably even more. The last point, if getting to work somehow, might also be useful and/or should be seen in view of #30832.\n \n At the moment, we have the following behavior (which could be seen as a bug):\n \n``````\n",
    "created_at": "2021-01-14T17:36:22Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503403",
    "user": "https://github.com/mjungmath"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 - (Pseudo-)Riemannian manifolds -> differentiable manifolds
 - topological manifolds -> sets (?)
 
-and probably even more. The last point, if getting to work somehow, might also be useful and/or should be seen in terms of #30832.
+and probably even more. The last point, if getting to work somehow, might also be useful and/or should be seen in view of #30832.
 
 At the moment, we have the following behavior (which could be seen as a bug):
 
``````




---

archive/issue_events_279996.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2021-01-14T17:37:11Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "rename": {
        "from": "Forgetful Functors for Manifolds",
        "to": "Forgetful Functors for Manifold Objects"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31241#event-279996"
}
```



---

archive/issue_comments_503404.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n It would be nice to allow forgetful functors for manifolds. In particular:\n \n - differentiable manifolds -> topological manifolds\n-- (Pseudo-)Riemannian manifolds -> differentiable manifolds\n+- (Pseudo-)Riemannian manifolds -> differentiable manifolds (not a category yet)\n - topological manifolds -> sets (?)\n \n and probably even more. The last point, if getting to work somehow, might also be useful and/or should be seen in view of #30832.\n``````\n",
    "created_at": "2021-01-14T22:18:37Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503404",
    "user": "https://github.com/mjungmath"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 It would be nice to allow forgetful functors for manifolds. In particular:
 
 - differentiable manifolds -> topological manifolds
-- (Pseudo-)Riemannian manifolds -> differentiable manifolds
+- (Pseudo-)Riemannian manifolds -> differentiable manifolds (not a category yet)
 - topological manifolds -> sets (?)
 
 and probably even more. The last point, if getting to work somehow, might also be useful and/or should be seen in view of #30832.
``````




---

archive/issue_comments_503405.json:
```json
{
    "body": "<a id='comment:9'></a>\nI am a little hesitant to call it a bug because it still has that structure once it goes through the functor. The problem is the mutability and that you can make it leave the corresponding category. Now you could implement something specific that handles an instance of `Manifold`. Although I feel that getting something of this level of generality would be hard. I think you are probably better off implementing a mechanism in the `Manifold` class itself.",
    "created_at": "2021-01-15T03:08:06Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503405",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
I am a little hesitant to call it a bug because it still has that structure once it goes through the functor. The problem is the mutability and that you can make it leave the corresponding category. Now you could implement something specific that handles an instance of `Manifold`. Although I feel that getting something of this level of generality would be hard. I think you are probably better off implementing a mechanism in the `Manifold` class itself.



---

archive/issue_comments_503406.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [tscrim](#comment%3A9):\n> I am a little hesitant to call it a bug because it still has that structure once it goes through the functor. The problem is the mutability and that you can make it leave the corresponding category. Now you could implement something specific that handles an instance of `Manifold`. Although I feel that getting something of this level of generality would be hard. I think you are probably better off implementing a mechanism in the `Manifold` class itself.\n\n\nAgreed. Calling that, one could make a function in `OpenInterval` returning an element of `RealSet`. But wait, the forgetful functor to sets works differently, right?\n\nThe approach I had in mind is as simple as that: new instance of the desired kind and copy charts. Where do you think may problems occour?",
    "created_at": "2021-01-15T09:01:33Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503406",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:10'></a>
Replying to [tscrim](#comment%3A9):
> I am a little hesitant to call it a bug because it still has that structure once it goes through the functor. The problem is the mutability and that you can make it leave the corresponding category. Now you could implement something specific that handles an instance of `Manifold`. Although I feel that getting something of this level of generality would be hard. I think you are probably better off implementing a mechanism in the `Manifold` class itself.


Agreed. Calling that, one could make a function in `OpenInterval` returning an element of `RealSet`. But wait, the forgetful functor to sets works differently, right?

The approach I had in mind is as simple as that: new instance of the desired kind and copy charts. Where do you think may problems occour?



---

archive/issue_comments_503407.json:
```json
{
    "body": "<a id='comment:11'></a>\nThe forgetful functor seems not to work properly anyway. Opened another ticket #31247.",
    "created_at": "2021-01-15T10:38:32Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503407",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:11'></a>
The forgetful functor seems not to work properly anyway. Opened another ticket #31247.



---

archive/issue_comments_503408.json:
```json
{
    "body": "**Dependencies:** #31247",
    "created_at": "2021-01-15T13:34:19Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503408",
    "user": "https://github.com/mjungmath"
}
```

**Dependencies:** #31247



---

archive/issue_comments_503409.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [gh-mjungmath](#comment%3A10):\n> Replying to [tscrim](#comment%3A9):\n> > I am a little hesitant to call it a bug because it still has that structure once it goes through the functor. The problem is the mutability and that you can make it leave the corresponding category. Now you could implement something specific that handles an instance of `Manifold`. Although I feel that getting something of this level of generality would be hard. I think you are probably better off implementing a mechanism in the `Manifold` class itself.\n\n> \n> Agreed. Calling that, one could make a function in `OpenInterval` returning an element of `RealSet`. But wait, the forgetful functor to sets works differently, right?\n> \n> The approach I had in mind is as simple as that: new instance of the desired kind and copy charts. Where do you think may problems occour?\n\n\nSomething you could do is implement the corresponding `_call_` in the appropriate subcategories of `Manifolds` to handle the corresponding transferring of data. Although this probably would be a lot easier once there is a way to copy manifolds and reconstruct them, which I still need to do as part of the pickling fix... There is just a lot of data that needs to be carefully preserved and constructed ideally using the construction methods already in place. That is where bugs will likely occur. There are many ways to implement this that have various pros and cons, you just need to decide on which one you want.",
    "created_at": "2021-01-17T02:29:34Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503409",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
Replying to [gh-mjungmath](#comment%3A10):
> Replying to [tscrim](#comment%3A9):
> > I am a little hesitant to call it a bug because it still has that structure once it goes through the functor. The problem is the mutability and that you can make it leave the corresponding category. Now you could implement something specific that handles an instance of `Manifold`. Although I feel that getting something of this level of generality would be hard. I think you are probably better off implementing a mechanism in the `Manifold` class itself.

> 
> Agreed. Calling that, one could make a function in `OpenInterval` returning an element of `RealSet`. But wait, the forgetful functor to sets works differently, right?
> 
> The approach I had in mind is as simple as that: new instance of the desired kind and copy charts. Where do you think may problems occour?


Something you could do is implement the corresponding `_call_` in the appropriate subcategories of `Manifolds` to handle the corresponding transferring of data. Although this probably would be a lot easier once there is a way to copy manifolds and reconstruct them, which I still need to do as part of the pickling fix... There is just a lot of data that needs to be carefully preserved and constructed ideally using the construction methods already in place. That is where bugs will likely occur. There are many ways to implement this that have various pros and cons, you just need to decide on which one you want.



---

archive/issue_comments_503410.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [tscrim](#comment%3A13):\n> Something you could do is implement the corresponding `_call_` in the appropriate subcategories of `Manifolds` to handle the corresponding transferring of data.\n\n\nWon't work at the current stage. See #31247.",
    "created_at": "2021-01-17T09:43:05Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503410",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:14'></a>
Replying to [tscrim](#comment%3A13):
> Something you could do is implement the corresponding `_call_` in the appropriate subcategories of `Manifolds` to handle the corresponding transferring of data.


Won't work at the current stage. See #31247.



---

archive/issue_comments_503411.json:
```json
{
    "body": "<a id='comment:15'></a>\nOkay, if I recall correctly, #31247 is not a bug, just simply not realistic. Instead, we can overwrite `__call__` (double underscore!) for the special case of manifolds.",
    "created_at": "2021-01-18T10:32:55Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503411",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:15'></a>
Okay, if I recall correctly, #31247 is not a bug, just simply not realistic. Instead, we can overwrite `__call__` (double underscore!) for the special case of manifolds.



---

archive/issue_events_279997.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31241#event-279997"
}
```



---

archive/issue_events_279998.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31241#event-279998"
}
```



---

archive/issue_comments_503412.json:
```json
{
    "body": "<a id='comment:16'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503412",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_503413.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [tscrim](#comment%3A13):\n> Something you could do is implement the corresponding `_call_` in the appropriate subcategories of `Manifolds` to handle the corresponding transferring of data. Although this probably would be a lot easier once there is a way to copy manifolds and reconstruct them, which I still need to do as part of the pickling fix... There is just a lot of data that needs to be carefully preserved and constructed ideally using the construction methods already in place. That is where bugs will likely occur. There are many ways to implement this that have various pros and cons, you just need to decide on which one you want.\n\n\nForemost charts, transition maps and their domains need to be copied since they encode the manifold's topology. I don't think that more data are necessary, except for the name and the dimension.\n\nIs there a ticket devoted to pickling of manifolds yet?",
    "created_at": "2021-05-05T20:58:35Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503413",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:17'></a>
Replying to [tscrim](#comment%3A13):
> Something you could do is implement the corresponding `_call_` in the appropriate subcategories of `Manifolds` to handle the corresponding transferring of data. Although this probably would be a lot easier once there is a way to copy manifolds and reconstruct them, which I still need to do as part of the pickling fix... There is just a lot of data that needs to be carefully preserved and constructed ideally using the construction methods already in place. That is where bugs will likely occur. There are many ways to implement this that have various pros and cons, you just need to decide on which one you want.


Foremost charts, transition maps and their domains need to be copied since they encode the manifold's topology. I don't think that more data are necessary, except for the name and the dimension.

Is there a ticket devoted to pickling of manifolds yet?



---

archive/issue_comments_503414.json:
```json
{
    "body": "<a id='comment:18'></a>\nSee also: discussion in ticket:31877#comment:10",
    "created_at": "2021-05-31T00:30:36Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503414",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>
See also: discussion in ticket:31877#comment:10



---

archive/issue_comments_503415.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [mkoeppe](#comment%3A18):\n> See also: discussion in ticket:31877#comment:10\n\n\nI tend to say that things are different for manifold objects. Sometimes you really want to  work in a genuine weaker structure, for example to impose new charts that have continuous transition maps instead of differentiable ones.",
    "created_at": "2021-05-31T07:58:21Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503415",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:19'></a>
Replying to [mkoeppe](#comment%3A18):
> See also: discussion in ticket:31877#comment:10


I tend to say that things are different for manifold objects. Sometimes you really want to  work in a genuine weaker structure, for example to impose new charts that have continuous transition maps instead of differentiable ones.



---

archive/issue_comments_503416.json:
```json
{
    "body": "<a id='comment:20'></a>\nI think you can boil it down to the following. In contrast to rings like `ZZ` or `QQ`, where elements are immutable objects, manifold objects can dynamically be extended. Now, the extension highly depends on the context (topological, differentiable, semi-Riemannian).",
    "created_at": "2021-05-31T08:06:07Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503416",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:20'></a>
I think you can boil it down to the following. In contrast to rings like `ZZ` or `QQ`, where elements are immutable objects, manifold objects can dynamically be extended. Now, the extension highly depends on the context (topological, differentiable, semi-Riemannian).



---

archive/issue_comments_503417.json:
```json
{
    "body": "<a id='comment:21'></a>\nAs I mentioned in #31877, the manifold is not as special as you want it to be. It can be provided more information, but it is not something that is mutable. Subsequently, you have genuinely different objects for topological and differentiable on the same underlying set if you have different maximal atlases. Applying the forgetful functor, you would have the *same* maximal atlas, which means the differentiable structure would still be there.",
    "created_at": "2021-06-01T00:47:08Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503417",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>
As I mentioned in #31877, the manifold is not as special as you want it to be. It can be provided more information, but it is not something that is mutable. Subsequently, you have genuinely different objects for topological and differentiable on the same underlying set if you have different maximal atlases. Applying the forgetful functor, you would have the *same* maximal atlas, which means the differentiable structure would still be there.



---

archive/issue_comments_503418.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [tscrim](#comment%3A21):\n> As I mentioned in #31877, the manifold is not as special as you want it to be. It can be provided more information, but it is not something that is mutable. Subsequently, you have genuinely different objects for topological and differentiable on the same underlying set if you have different maximal atlases. Applying the forgetful functor, you would have the *same* maximal atlas, which means the differentiable structure would still be there.\n\n\nSure, starting with a differential manifold and applying the forgetful functor to it, a new instance must be constructed, particularly an instance of `TopologicalManifold`. It should come with the \"same\" charts (different instances of course). Then you can add new charts dynamically, e.g. continuous but not differentiable, to the implementation. This is where the dynamical nature of manifolds comes into play.\n\nThat is at least how I would think the forgetful functor might be used in this case.",
    "created_at": "2021-06-01T08:49:14Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503418",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:22'></a>
Replying to [tscrim](#comment%3A21):
> As I mentioned in #31877, the manifold is not as special as you want it to be. It can be provided more information, but it is not something that is mutable. Subsequently, you have genuinely different objects for topological and differentiable on the same underlying set if you have different maximal atlases. Applying the forgetful functor, you would have the *same* maximal atlas, which means the differentiable structure would still be there.


Sure, starting with a differential manifold and applying the forgetful functor to it, a new instance must be constructed, particularly an instance of `TopologicalManifold`. It should come with the "same" charts (different instances of course). Then you can add new charts dynamically, e.g. continuous but not differentiable, to the implementation. This is where the dynamical nature of manifolds comes into play.

That is at least how I would think the forgetful functor might be used in this case.



---

archive/issue_comments_503419.json:
```json
{
    "body": "<a id='comment:23'></a>\nAnd I didn't say the manifold itself was mutable. I said its objects were.",
    "created_at": "2021-06-01T08:52:08Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503419",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:23'></a>
And I didn't say the manifold itself was mutable. I said its objects were.



---

archive/issue_comments_503420.json:
```json
{
    "body": "<a id='comment:24'></a>\nYou are confusing the notion of mutable and dynamic and forgetting that a manifold is defined by its objects (e.g., charts). If you have a differentiable manifold `M` and apply the forgetful functor to it, you get the **same** manifold `M` back with the **same** maximal atlas. If you then \"add\" something that makes it not a differentiable manifold, then you actually have a *different* manifold because you have a different maximal atlas. So you are actually creating a copy with some of the initial information the same, but you then give information that your copy is different than what you started with. Having initial information is a programming concept, not a mathematical one.",
    "created_at": "2021-06-02T05:57:32Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503420",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>
You are confusing the notion of mutable and dynamic and forgetting that a manifold is defined by its objects (e.g., charts). If you have a differentiable manifold `M` and apply the forgetful functor to it, you get the **same** manifold `M` back with the **same** maximal atlas. If you then "add" something that makes it not a differentiable manifold, then you actually have a *different* manifold because you have a different maximal atlas. So you are actually creating a copy with some of the initial information the same, but you then give information that your copy is different than what you started with. Having initial information is a programming concept, not a mathematical one.



---

archive/issue_comments_503421.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [tscrim](#comment%3A24):\n> You are confusing the notion of mutable and dynamic and forgetting that a manifold is defined by its objects (e.g., charts). If you have a differentiable manifold `M` and apply the forgetful functor to it, you get the **same** manifold `M` back with the **same** maximal atlas. If you then \"add\" something that makes it not a differentiable manifold, then you actually have a *different* manifold because you have a different maximal atlas. So you are actually creating a copy with some of the initial information the same, but you then give information that your copy is different than what you started with. Having initial information is a programming concept, not a mathematical one.\n\n\nMathematically this is wrong. As soon as you apply the forgetful functor from differentiable manifolds to topological manifolds, the maximal atlas changes accordingly. In particular, the maximal atlas now consists of all charts that are continuously compatible w.r.t. to all charts in the differentiable structure.\n\nThat is exactly the punchline: adding a non-compatible chart (in the differentiable sense) which is still countinously compatible would corrupt the differentiable structure, but keep the maximal atlas of the topological manifold intact.",
    "created_at": "2021-06-02T08:59:44Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503421",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:25'></a>
Replying to [tscrim](#comment%3A24):
> You are confusing the notion of mutable and dynamic and forgetting that a manifold is defined by its objects (e.g., charts). If you have a differentiable manifold `M` and apply the forgetful functor to it, you get the **same** manifold `M` back with the **same** maximal atlas. If you then "add" something that makes it not a differentiable manifold, then you actually have a *different* manifold because you have a different maximal atlas. So you are actually creating a copy with some of the initial information the same, but you then give information that your copy is different than what you started with. Having initial information is a programming concept, not a mathematical one.


Mathematically this is wrong. As soon as you apply the forgetful functor from differentiable manifolds to topological manifolds, the maximal atlas changes accordingly. In particular, the maximal atlas now consists of all charts that are continuously compatible w.r.t. to all charts in the differentiable structure.

That is exactly the punchline: adding a non-compatible chart (in the differentiable sense) which is still countinously compatible would corrupt the differentiable structure, but keep the maximal atlas of the topological manifold intact.



---

archive/issue_comments_503422.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [gh-mjungmath](#comment%3A25):\n> Replying to [tscrim](#comment%3A24):\n> > You are confusing the notion of mutable and dynamic and forgetting that a manifold is defined by its objects (e.g., charts). If you have a differentiable manifold `M` and apply the forgetful functor to it, you get the **same** manifold `M` back with the **same** maximal atlas. If you then \"add\" something that makes it not a differentiable manifold, then you actually have a *different* manifold because you have a different maximal atlas. So you are actually creating a copy with some of the initial information the same, but you then give information that your copy is different than what you started with. Having initial information is a programming concept, not a mathematical one.\n\n> \n> Mathematically this is wrong. As soon as you apply the forgetful functor from differentiable manifolds to topological manifolds, the maximal atlas changes accordingly. In particular, the maximal atlas now consists of all charts that are continuously compatible w.r.t. to all charts in the differentiable structure.\n\n\nYou're wrong. Otherwise the category of differentiable manifolds is not a subcategory of topological manifolds. So there would be no forgetful functor. Alternatively, you have a covering of your manifold by charts with maps to open subsets of R<sup>n</sup> that are diffeomorphic. The fact this is a covering forces any other chart to also be a diffeomorphism by the transition functions. Your maximal atlas cannot change under the forgetful functor.\n\n> That is exactly the punchline: adding a non-compatible chart (in the differentiable sense) which is still countinously compatible would corrupt the differentiable structure, but keep the maximal atlas of the topological manifold intact.\n\n\nWhich gives you a new distinct mathematical object. You cannot add information to the manifold by the forgetful functor. In the implementation here, you are not adding or changing the information, only \"discovering\" more.",
    "created_at": "2021-06-02T09:17:38Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503422",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:26'></a>
Replying to [gh-mjungmath](#comment%3A25):
> Replying to [tscrim](#comment%3A24):
> > You are confusing the notion of mutable and dynamic and forgetting that a manifold is defined by its objects (e.g., charts). If you have a differentiable manifold `M` and apply the forgetful functor to it, you get the **same** manifold `M` back with the **same** maximal atlas. If you then "add" something that makes it not a differentiable manifold, then you actually have a *different* manifold because you have a different maximal atlas. So you are actually creating a copy with some of the initial information the same, but you then give information that your copy is different than what you started with. Having initial information is a programming concept, not a mathematical one.

> 
> Mathematically this is wrong. As soon as you apply the forgetful functor from differentiable manifolds to topological manifolds, the maximal atlas changes accordingly. In particular, the maximal atlas now consists of all charts that are continuously compatible w.r.t. to all charts in the differentiable structure.


You're wrong. Otherwise the category of differentiable manifolds is not a subcategory of topological manifolds. So there would be no forgetful functor. Alternatively, you have a covering of your manifold by charts with maps to open subsets of R<sup>n</sup> that are diffeomorphic. The fact this is a covering forces any other chart to also be a diffeomorphism by the transition functions. Your maximal atlas cannot change under the forgetful functor.

> That is exactly the punchline: adding a non-compatible chart (in the differentiable sense) which is still countinously compatible would corrupt the differentiable structure, but keep the maximal atlas of the topological manifold intact.


Which gives you a new distinct mathematical object. You cannot add information to the manifold by the forgetful functor. In the implementation here, you are not adding or changing the information, only "discovering" more.



---

archive/issue_comments_503423.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [tscrim](#comment%3A26):\n> You're wrong. Otherwise the category of differentiable manifolds is not a subcategory of topological manifolds. So there would be no forgetful functor.\n\n\nWhy not? The differentiable structure is a subset of the maximal topological atlas, and the maximal atlas is uniquely determined by the differentiable structure, so I don't see any problems here.\n\nIn any case, it would be nice to copy a differentiable manifold in terms of a topological manifold. The forgetful functor would do the job in the mathematical sense.",
    "created_at": "2021-06-02T10:37:55Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503423",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:27'></a>
Replying to [tscrim](#comment%3A26):
> You're wrong. Otherwise the category of differentiable manifolds is not a subcategory of topological manifolds. So there would be no forgetful functor.


Why not? The differentiable structure is a subset of the maximal topological atlas, and the maximal atlas is uniquely determined by the differentiable structure, so I don't see any problems here.

In any case, it would be nice to copy a differentiable manifold in terms of a topological manifold. The forgetful functor would do the job in the mathematical sense.



---

archive/issue_comments_503424.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [gh-mjungmath](#comment%3A27):\n> Replying to [tscrim](#comment%3A26):\n> > You're wrong. Otherwise the category of differentiable manifolds is not a subcategory of topological manifolds. So there would be no forgetful functor.\n\n> \n> Why not? The differentiable structure is a subset of the maximal topological atlas, and the maximal atlas is uniquely determined by the differentiable structure, so I don't see any problems here.\n\n\nBecause you have a genuinely different manifold when your maximal atlas changes. This is *not* the result of applying the forgetful functor as an embedding of subcategories.\n\nYou also have to be careful that this is up to *equality*, not *isomorphism*. For example, there are infinitely many smooth structures you can place upon R<sup>4</sup>, so they are not equivalent (i.e., diffeomorphic) in the category of smooth manifolds. However, applying the forgetful functor to each of these do not result in the same (in the equality sense) copy of R<sup>4</sup>, but they are all isomorphic (now here homeomorphic) in the category of topological manifolds.\n\nFor a very concrete example of the above, the above is analogous to the groups C<sub>4</sub> and C<sub>2</sub> x C<sub>2</sub>. They are equivalent as sets (i.e., same cardinality) but not as groups.\n\n> In any case, it would be nice to copy a differentiable manifold in terms of a topological manifold. The forgetful functor would do the job in the mathematical sense.\n\n\nSee above. It is mathematically wrong to not obtain a differentiable manifold from the forgetful functor if you want differentiable manifolds to be a subcategory of topological manifolds. I don't see how the category of differentiable manifolds is not a subcategory of topological manifolds (in the mathematical sense of a subcategory). If you want to call this the forgetful functor, you need to prove to me that the maximal atlas actually changes.",
    "created_at": "2021-06-02T12:19:28Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503424",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'></a>
Replying to [gh-mjungmath](#comment%3A27):
> Replying to [tscrim](#comment%3A26):
> > You're wrong. Otherwise the category of differentiable manifolds is not a subcategory of topological manifolds. So there would be no forgetful functor.

> 
> Why not? The differentiable structure is a subset of the maximal topological atlas, and the maximal atlas is uniquely determined by the differentiable structure, so I don't see any problems here.


Because you have a genuinely different manifold when your maximal atlas changes. This is *not* the result of applying the forgetful functor as an embedding of subcategories.

You also have to be careful that this is up to *equality*, not *isomorphism*. For example, there are infinitely many smooth structures you can place upon R<sup>4</sup>, so they are not equivalent (i.e., diffeomorphic) in the category of smooth manifolds. However, applying the forgetful functor to each of these do not result in the same (in the equality sense) copy of R<sup>4</sup>, but they are all isomorphic (now here homeomorphic) in the category of topological manifolds.

For a very concrete example of the above, the above is analogous to the groups C<sub>4</sub> and C<sub>2</sub> x C<sub>2</sub>. They are equivalent as sets (i.e., same cardinality) but not as groups.

> In any case, it would be nice to copy a differentiable manifold in terms of a topological manifold. The forgetful functor would do the job in the mathematical sense.


See above. It is mathematically wrong to not obtain a differentiable manifold from the forgetful functor if you want differentiable manifolds to be a subcategory of topological manifolds. I don't see how the category of differentiable manifolds is not a subcategory of topological manifolds (in the mathematical sense of a subcategory). If you want to call this the forgetful functor, you need to prove to me that the maximal atlas actually changes.



---

archive/issue_comments_503425.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [tscrim](#comment%3A28):\n> Because you have a genuinely different manifold when your maximal atlas changes. This is *not* the result of applying the forgetful functor as an embedding of subcategories.\n\n\nOkay, I think we can see it as follows. A topological manifold comes equipped with a maximal *topological* atlas. This atlas contains all information about the topology and local Euclideanness.\n\nTo impose a differentiable structure, we add an additional atlas, namely the maximal *differentiable* atlas. So in a way, we can say that a differentiable manifold is endowed with two atlases. However, it turns out that the topological atlas is not needed because it can be recovered from the differentiable atlas.\n\nNow, when we apply the forgetful functor, we simply forget about the differentiable atlas, and what remains is the maximal *topological* atlas.\n\nSo you were right when you said \"the atlas does not change\". I suppose I was just extremely sloppy here. Does that resolve some things?",
    "created_at": "2021-06-02T22:27:21Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503425",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:29'></a>
Replying to [tscrim](#comment%3A28):
> Because you have a genuinely different manifold when your maximal atlas changes. This is *not* the result of applying the forgetful functor as an embedding of subcategories.


Okay, I think we can see it as follows. A topological manifold comes equipped with a maximal *topological* atlas. This atlas contains all information about the topology and local Euclideanness.

To impose a differentiable structure, we add an additional atlas, namely the maximal *differentiable* atlas. So in a way, we can say that a differentiable manifold is endowed with two atlases. However, it turns out that the topological atlas is not needed because it can be recovered from the differentiable atlas.

Now, when we apply the forgetful functor, we simply forget about the differentiable atlas, and what remains is the maximal *topological* atlas.

So you were right when you said "the atlas does not change". I suppose I was just extremely sloppy here. Does that resolve some things?



---

archive/issue_comments_503426.json:
```json
{
    "body": "<a id='comment:30'></a>\nYe. Thus what you really want is a way to create a copy of the current data, but with the category changed. This is similar to the `change_ring()` method of matrices.",
    "created_at": "2021-06-03T00:04:29Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503426",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:30'></a>
Ye. Thus what you really want is a way to create a copy of the current data, but with the category changed. This is similar to the `change_ring()` method of matrices.



---

archive/issue_comments_503427.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [tscrim](#comment%3A30):\n> Ye. Thus what you really want is a way to create a copy of the current data, but with the category changed. This is similar to the `change_ring()` method of matrices.\n\n\nMh. Not really, right? A differentiable manifold is an instance of `DifferentiableManifold`. If we want to work with that manifold in terms of a topological manifold, we must turn (or rather copy) it into an instance of `TopologicalManifold`. Changing the category or a structure attribute alone wouldn't do the job, no?",
    "created_at": "2021-06-03T08:58:31Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503427",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:31'></a>
Replying to [tscrim](#comment%3A30):
> Ye. Thus what you really want is a way to create a copy of the current data, but with the category changed. This is similar to the `change_ring()` method of matrices.


Mh. Not really, right? A differentiable manifold is an instance of `DifferentiableManifold`. If we want to work with that manifold in terms of a topological manifold, we must turn (or rather copy) it into an instance of `TopologicalManifold`. Changing the category or a structure attribute alone wouldn't do the job, no?



---

archive/issue_comments_503428.json:
```json
{
    "body": "<a id='comment:32'></a>\nYea, perhaps I was a little imprecise. I meant change the necessary information in the copy.",
    "created_at": "2021-06-03T09:00:49Z",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31241#issuecomment-503428",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:32'></a>
Yea, perhaps I was a little imprecise. I meant change the necessary information in the copy.



---

archive/issue_events_279999.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31241#event-279999"
}
```



---

archive/issue_events_280000.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31241#event-280000"
}
```



---

archive/issue_events_280001.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31241#event-280001"
}
```



---

archive/issue_events_280002.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31241#event-280002"
}
```



---

archive/issue_events_280003.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31241#event-280003"
}
```



---

archive/issue_events_280004.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31241#event-280004"
}
```



---

archive/issue_events_280005.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31241#event-280005"
}
```



---

archive/issue_events_280006.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31241",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31241#event-280006"
}
```
