# Issue 31796: Make maxima(<string>) output parseable

archive/issues_031559.json:
```json
{
    "assignees": [],
    "body": "(See also this `sage-devel` [post](https://groups.google.com/g/sage-devel/c/U_WGbYG2zOE/m/gO3tZyVEAwAJ).)\n\nCurrently, all whitespace is stripped off `maxima(x)` and `maxima_calculus(x)` where `x` is a string. The same goes for Maxima code defined via the interfaces. To illustrate :\n\n```\nr1=maxima_calculus('foo: a and (b or c)')\nr2=maxima_calculus('untree(x) := append([part(x, 0)], maplist(lambda([u], if atom(u) then u else untree(u)), x))')\nr3=maxima_calculus('untree(foo)')\n(r1, r2, r3)\n```\noutputs :\n\n```\n(aand(borc),\n untree(x):=append([part(x,0)],maplist(lambda([u],ifatom(u)thenuelseuntree(u)),x)),\n [\\\"and\\\",a,[\\\"or\\\",b,c]])\n```\n\nThis also deminstrates that the Maxima interpretation of the first instruction is correct ; it is its output which is ill-interpreted by Sage...\n\nIn order to maintain the `print(eval(read(x))==x` equality, it is desirable to keep spaces at least around boolean operators.\n\n\nCC:  @fchapoton @nbruin @slel @spaghettisalat\n\nKeywords: **maxima symbolics**\n\nBranch/Commit: **[`05fa319`](https://github.com/sagemath/sagetrac-mirror/commit/05fa319b65be9b31487bb493450510e32c2f0d07)**\n\nReviewer: **Samuel Leli\u00e8vre**\n\nAuthor: **Emmanuel Charpentier, Matthias Koeppe, Fr\u00e9d\u00e9ric Chapoton**\n\nComponent: **interfaces**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31796_\n\n",
    "closed_at": "2021-12-05T11:14:58Z",
    "created_at": "2021-05-08T14:09:02Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make maxima(<string>) output parseable",
    "type": "issue",
    "updated_at": "2021-12-05T11:14:58Z",
    "url": "https://github.com/sagemath/sage/issues/31796",
    "user": "https://github.com/EmmanuelCharpentier"
}
```
(See also this `sage-devel` [post](https://groups.google.com/g/sage-devel/c/U_WGbYG2zOE/m/gO3tZyVEAwAJ).)

Currently, all whitespace is stripped off `maxima(x)` and `maxima_calculus(x)` where `x` is a string. The same goes for Maxima code defined via the interfaces. To illustrate :

```
r1=maxima_calculus('foo: a and (b or c)')
r2=maxima_calculus('untree(x) := append([part(x, 0)], maplist(lambda([u], if atom(u) then u else untree(u)), x))')
r3=maxima_calculus('untree(foo)')
(r1, r2, r3)
```
outputs :

```
(aand(borc),
 untree(x):=append([part(x,0)],maplist(lambda([u],ifatom(u)thenuelseuntree(u)),x)),
 [\"and\",a,[\"or\",b,c]])
```

This also deminstrates that the Maxima interpretation of the first instruction is correct ; it is its output which is ill-interpreted by Sage...

In order to maintain the `print(eval(read(x))==x` equality, it is desirable to keep spaces at least around boolean operators.


CC:  @fchapoton @nbruin @slel @spaghettisalat

Keywords: **maxima symbolics**

Branch/Commit: **[`05fa319`](https://github.com/sagemath/sagetrac-mirror/commit/05fa319b65be9b31487bb493450510e32c2f0d07)**

Reviewer: **Samuel Lelièvre**

Author: **Emmanuel Charpentier, Matthias Koeppe, Frédéric Chapoton**

Component: **interfaces**

_Issue created by migration from https://trac.sagemath.org/ticket/31796_





---

archive/issue_events_435304.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2021-05-08T14:09:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435304"
}
```



---

archive/issue_events_435305.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2021-05-08T14:09:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "c: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435305"
}
```



---

archive/issue_events_435306.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2021-05-08T14:09:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435306"
}
```



---

archive/issue_events_435307.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2021-05-08T14:09:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435307"
}
```



---

archive/issue_comments_511254.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nIt actually looks like whitespace has been stripped right from the start from output in the maxima interface:\nhttps://github.com/sagemath/sage/blob/e76b97fedaaec412fb4cce98bc55eb3d0ba2697f/src/sage/interfaces/maxima.py#L562\n(the blame of that line goes back to original commits)\n\nIf I recall correctly, there were problems with maxima inserting spaces at unpredictable places every now and again; even in the middle of identifiers! The original commits would have been for maxima on CLISP rather than on ECL (although I recall the whitespace problem occurring on ECL (too?)). It could be that with the different iterations of \"expect\" -- and almost certainly in maxima_lib -- this isn't a problem anymore, but it means you'll have to test a *lot* in order to make really sure that a very old problem doesn't inadvertently comes back.\n\nAlso note that maxima_lib and maxima each have their own `_eval_line_` which does the stripping, so to keep the two interfaces in step, you'd want to change it in both.",
    "created_at": "2021-05-08T17:54:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511254",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:1" align="right">comment:1</div>

It actually looks like whitespace has been stripped right from the start from output in the maxima interface:
https://github.com/sagemath/sage/blob/e76b97fedaaec412fb4cce98bc55eb3d0ba2697f/src/sage/interfaces/maxima.py#L562
(the blame of that line goes back to original commits)

If I recall correctly, there were problems with maxima inserting spaces at unpredictable places every now and again; even in the middle of identifiers! The original commits would have been for maxima on CLISP rather than on ECL (although I recall the whitespace problem occurring on ECL (too?)). It could be that with the different iterations of "expect" -- and almost certainly in maxima_lib -- this isn't a problem anymore, but it means you'll have to test a *lot* in order to make really sure that a very old problem doesn't inadvertently comes back.

Also note that maxima_lib and maxima each have their own `_eval_line_` which does the stripping, so to keep the two interfaces in step, you'd want to change it in both.



---

archive/issue_comments_511255.json:
```json
{
    "body": "Branch: **[u/charpent/legible_maxima_output](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/legible_maxima_output)**",
    "created_at": "2021-05-08T21:31:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511255",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Branch: **[u/charpent/legible_maxima_output](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/legible_maxima_output)**



---

archive/issue_comments_511256.json:
```json
{
    "body": "Commit: **[`5f31eeb`](https://github.com/sagemath/sagetrac-mirror/commit/5f31eeba0240bd032737d1de4bb6b347b526afa9)**",
    "created_at": "2021-05-08T21:51:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511256",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Commit: **[`5f31eeb`](https://github.com/sagemath/sagetrac-mirror/commit/5f31eeba0240bd032737d1de4bb6b347b526afa9)**



---

archive/issue_comments_511257.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@nbruin](#comment:1):\n> It actually looks like whitespace has been stripped right from the start from output in the maxima interface:\n> https://github.com/sagemath/sage/blob/e76b97fedaaec412fb4cce98bc55eb3d0ba2697f/src/sage/interfaces/maxima.py#L562\n> (the blame of that line goes back to original commits)\n> \n> If I recall correctly, there were problems with maxima inserting spaces at unpredictable places every now and again;\n\nThis still happens, at least for MaximaElement pieces. To be explored in a followup ticket (but I'm afraid that this one is in Maxima's territory...). I've installed a workaround for this in `assumptions.py`\n\n> even in the middle of identifiers!\n\nThis I didn't see (yet).\n\n> The original commits would have been for maxima on CLISP rather than on ECL (although I recall the whitespace problem occurring on ECL (too?)). It could be that with the different iterations of \"expect\" -- and almost certainly in maxima_lib -- this isn't a problem anymore, but it means you'll have to test a *lot* in order to make really sure that a very old problem doesn't inadvertently comes back.\n\nAdvice gladly accepted for filing and solving a followup ticket, or to better test the proposed solution.\n\nFor the latter : what would you think of generating random SR expressions, translate them to Maxima strings, and check back-and-forth translations ? ISTR that such a random expression generator exists somewhere in Sage but, for the life of me, I'm unable to recall *where* I saw this...\n\n> Also note that maxima_lib and maxima each have their own `_eval_line_` which does the stripping,\n\nIn different ways ==> two different fixes. No possible code sharing here without *major* restructuration.\n\n\n> so to keep the two interfaces in step, you'd want to change it in both.\n\nDone. You're welcome to review my branch, which passes `ptestlong` with exactly the same errors as `develop` at `9.3.rc5` (and therefore `needs_review`). And delivers parseable output for Maxima strings containing logical operators. Yay !\n  \n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f31eeba0240bd032737d1de4bb6b347b526afa9\"><code>5f31eeb</code></a></td><td><code>Ticket #31796 : make maxima output parseable.</code></td></tr></table>\n",
    "created_at": "2021-05-08T21:51:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511257",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@nbruin](#comment:1):
> It actually looks like whitespace has been stripped right from the start from output in the maxima interface:
> https://github.com/sagemath/sage/blob/e76b97fedaaec412fb4cce98bc55eb3d0ba2697f/src/sage/interfaces/maxima.py#L562
> (the blame of that line goes back to original commits)
> 
> If I recall correctly, there were problems with maxima inserting spaces at unpredictable places every now and again;

This still happens, at least for MaximaElement pieces. To be explored in a followup ticket (but I'm afraid that this one is in Maxima's territory...). I've installed a workaround for this in `assumptions.py`

> even in the middle of identifiers!

This I didn't see (yet).

> The original commits would have been for maxima on CLISP rather than on ECL (although I recall the whitespace problem occurring on ECL (too?)). It could be that with the different iterations of "expect" -- and almost certainly in maxima_lib -- this isn't a problem anymore, but it means you'll have to test a *lot* in order to make really sure that a very old problem doesn't inadvertently comes back.

Advice gladly accepted for filing and solving a followup ticket, or to better test the proposed solution.

For the latter : what would you think of generating random SR expressions, translate them to Maxima strings, and check back-and-forth translations ? ISTR that such a random expression generator exists somewhere in Sage but, for the life of me, I'm unable to recall *where* I saw this...

> Also note that maxima_lib and maxima each have their own `_eval_line_` which does the stripping,

In different ways ==> two different fixes. No possible code sharing here without *major* restructuration.


> so to keep the two interfaces in step, you'd want to change it in both.

Done. You're welcome to review my branch, which passes `ptestlong` with exactly the same errors as `develop` at `9.3.rc5` (and therefore `needs_review`). And delivers parseable output for Maxima strings containing logical operators. Yay !
  
---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f31eeba0240bd032737d1de4bb6b347b526afa9"><code>5f31eeb</code></a></td><td><code>Ticket #31796 : make maxima output parseable.</code></td></tr></table>




---

archive/issue_events_435308.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2021-05-08T21:51:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435308"
}
```



---

archive/issue_comments_511258.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nNote : `Lint` complains concern exclusively `trailing whitespace` (a couple occurrences in my patch) and `multiple statements on one line` (none in my patch).\n\nShould I try and fix all these occurrences (at least as a public service) ? Or should this be a separate ticket ?",
    "created_at": "2021-05-08T22:02:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511258",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:4" align="right">comment:4</div>

Note : `Lint` complains concern exclusively `trailing whitespace` (a couple occurrences in my patch) and `multiple statements on one line` (none in my patch).

Should I try and fix all these occurrences (at least as a public service) ? Or should this be a separate ticket ?



---

archive/issue_events_435309.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-05-08T22:36:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435309"
}
```



---

archive/issue_events_435310.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-05-08T22:36:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435310"
}
```



---

archive/issue_comments_511259.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThere seems to be a copy-paste mistake in the German\nand Japanese `tour_algebra.rst`, with the `de2` block\nreplaced by the adapted `de1` block rather than by the\nadapted `de2` block.",
    "created_at": "2021-05-08T22:36:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511259",
    "user": "https://github.com/slel"
}
```

<div id="comment:5" align="right">comment:5</div>

There seems to be a copy-paste mistake in the German
and Japanese `tour_algebra.rst`, with the `de2` block
replaced by the adapted `de1` block rather than by the
adapted `de2` block.



---

archive/issue_comments_511260.json:
```json
{
    "body": "Reviewer: **Samuel Leli\u00e8vre**",
    "created_at": "2021-05-08T22:36:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511260",
    "user": "https://github.com/slel"
}
```

Reviewer: **Samuel Lelièvre**



---

archive/issue_comments_511261.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nPlease fill in author name so patchbots run.",
    "created_at": "2021-05-08T22:38:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511261",
    "user": "https://github.com/slel"
}
```

<div id="comment:6" align="right">comment:6</div>

Please fill in author name so patchbots run.



---

archive/issue_comments_511262.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d2059f7ca2d876213e938cc50fd19c5adbf15b8d\"><code>d2059f7</code></a></td><td><code>Ticket #31796: fix paste mistakes in german and japanese tutorials.</code></td></tr></table>\n",
    "created_at": "2021-05-09T02:16:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511262",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d2059f7ca2d876213e938cc50fd19c5adbf15b8d"><code>d2059f7</code></a></td><td><code>Ticket #31796: fix paste mistakes in german and japanese tutorials.</code></td></tr></table>




---

archive/issue_comments_511263.json:
```json
{
    "body": "Changed commit from **[`5f31eeb`](https://github.com/sagemath/sagetrac-mirror/commit/5f31eeba0240bd032737d1de4bb6b347b526afa9)** to **[`d2059f7`](https://github.com/sagemath/sagetrac-mirror/commit/d2059f7ca2d876213e938cc50fd19c5adbf15b8d)**",
    "created_at": "2021-05-09T02:16:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511263",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5f31eeb`](https://github.com/sagemath/sagetrac-mirror/commit/5f31eeba0240bd032737d1de4bb6b347b526afa9)** to **[`d2059f7`](https://github.com/sagemath/sagetrac-mirror/commit/d2059f7ca2d876213e938cc50fd19c5adbf15b8d)**



---

archive/issue_comments_511264.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@slel](#comment:5):\n> There seems to be a copy-paste mistake in the German\n> and Japanese `tour_algebra.rst`, with the `de2` block\n> replaced by the adapted `de1` block rather than by the\n> adapted `de2` block.\n\nRight. Damn...  Fixed.",
    "created_at": "2021-05-09T02:17:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511264",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@slel](#comment:5):
> There seems to be a copy-paste mistake in the German
> and Japanese `tour_algebra.rst`, with the `de2` block
> replaced by the adapted `de1` block rather than by the
> adapted `de2` block.

Right. Damn...  Fixed.



---

archive/issue_events_435311.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2021-05-09T02:19:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435311"
}
```



---

archive/issue_events_435312.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2021-05-09T02:19:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435312"
}
```



---

archive/issue_comments_511265.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@slel](#comment:6):\n> Please fill in author name so patchbots run.\n\nDone. Thank you !",
    "created_at": "2021-05-09T02:19:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511265",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@slel](#comment:6):
> Please fill in author name so patchbots run.

Done. Thank you !



---

archive/issue_comments_511266.json:
```json
{
    "body": "Author: **Emmanuel Charpentier**",
    "created_at": "2021-05-09T02:19:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511266",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Author: **Emmanuel Charpentier**



---

archive/issue_comments_511267.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,10 +11,9 @@\n outputs :\n \n ```\n-r1=maxima_calculus('foo: a and (b or c)')\n-r2=maxima_calculus('untree(x) := append([part(x, 0)], maplist(lambda([u], if atom(u) then u else untree(u)), x))')\n-r3=maxima_calculus('untree(foo)')\n-(r1, r2, r3)\n+(aand(borc),\n+ untree(x):=append([part(x,0)],maplist(lambda([u],ifatom(u)thenuelseuntree(u)),x)),\n+ [\\\"and\\\",a,[\\\"or\\\",b,c]])\n ```\n \n This also deminstrates that the Maxima interpretation of the first instruction is correct ; it is its output which is ill-interpreted by Sage...\n``````\n",
    "created_at": "2021-05-09T07:41:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511267",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,10 +11,9 @@
 outputs :
 
 ```
-r1=maxima_calculus('foo: a and (b or c)')
-r2=maxima_calculus('untree(x) := append([part(x, 0)], maplist(lambda([u], if atom(u) then u else untree(u)), x))')
-r3=maxima_calculus('untree(foo)')
-(r1, r2, r3)
+(aand(borc),
+ untree(x):=append([part(x,0)],maplist(lambda([u],ifatom(u)thenuelseuntree(u)),x)),
+ [\"and\",a,[\"or\",b,c]])
 ```
 
 This also deminstrates that the Maxima interpretation of the first instruction is correct ; it is its output which is ill-interpreted by Sage...
``````




---

archive/issue_comments_511268.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThe patchbot's pyflakes plugin complains:\n\n```\n- src/sage/interfaces/maxima.py:498:1\n  'sage.env.DOT_SAGE' imported but unused\n\n- src/sage/interfaces/maxima.py:498:1\n  'sage.env.SAGE_LOCAL' imported but unused\n\n- src/sage/interfaces/maxima_abstract.py:997:9\n  local variable 'a' is assigned to but never used\n\n- src/sage/symbolic/expression_conversions.py:21:1\n  'sage.symbolic.constants.I' imported but unused\n\n- src/sage/symbolic/expression_conversions.py:1112:13\n  redefinition of unused 'I' from line 21\n```\nNot sure what to make of those, especially the first two.\n\nSomeone with an expert opinion on those please chime in.",
    "created_at": "2021-05-11T13:53:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511268",
    "user": "https://github.com/slel"
}
```

<div id="comment:11" align="right">comment:11</div>

The patchbot's pyflakes plugin complains:

```
- src/sage/interfaces/maxima.py:498:1
  'sage.env.DOT_SAGE' imported but unused

- src/sage/interfaces/maxima.py:498:1
  'sage.env.SAGE_LOCAL' imported but unused

- src/sage/interfaces/maxima_abstract.py:997:9
  local variable 'a' is assigned to but never used

- src/sage/symbolic/expression_conversions.py:21:1
  'sage.symbolic.constants.I' imported but unused

- src/sage/symbolic/expression_conversions.py:1112:13
  redefinition of unused 'I' from line 21
```
Not sure what to make of those, especially the first two.

Someone with an expert opinion on those please chime in.



---

archive/issue_comments_511269.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@slel](#comment:11):\n> The patchbot's pyflakes plugin complains:\n> \n> ```\n> - src/sage/interfaces/maxima.py:498:1\n>   'sage.env.DOT_SAGE' imported but unused\n> \n> - src/sage/interfaces/maxima.py:498:1\n>   'sage.env.SAGE_LOCAL' imported but unused\n> ```\n\nIndeed : neither `DOT_SAGE` nor `SAGE_LOCAL` appear anywhere in this file but on line 487, where they are imported from `sage.env`.\n\nResidues of code past ?\n \n>\n>```\n> - src/sage/interfaces/maxima_abstract.py:997:9\n>   local variable 'a' is assigned to but never used}}}\n> ```\n\nThis one is right, but seems harmless. Was in the original code.\n\n> ```\n> - src/sage/symbolic/expression_conversions.py:21:1\n>   'sage.symbolic.constants.I' imported but unused\n> \n> - src/sage/symbolic/expression_conversions.py:1112:13\n>   redefinition of unused 'I' from line 21\n> ```\n\nThis one is hard to check. After hunting all capital `I` in the file :\n* In live code, I find an import of I in `AlgebraicConverter.arithmetic`, line 1112 (as announced by `pyflakes`). \n* All the other uses are in examples/tests.\n\nPast code residues, again ?\n\n> Not sure what to make of those, especially the first two.\n> \n> Someone with an expert opinion on those please chime in.\n\nI'm interested, too.\n\nBut I can also make a new commit including the changes suggested by `pyflakes` (as well as deleting the \"trailing whitespace\" `relint` complains about so insistently, but not the semicolon uses `pycodestyle` hates...).\n\nAdvice ?",
    "created_at": "2021-05-11T16:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511269",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@slel](#comment:11):
> The patchbot's pyflakes plugin complains:
> 
> ```
> - src/sage/interfaces/maxima.py:498:1
>   'sage.env.DOT_SAGE' imported but unused
> 
> - src/sage/interfaces/maxima.py:498:1
>   'sage.env.SAGE_LOCAL' imported but unused
> ```

Indeed : neither `DOT_SAGE` nor `SAGE_LOCAL` appear anywhere in this file but on line 487, where they are imported from `sage.env`.

Residues of code past ?
 
>
>```
> - src/sage/interfaces/maxima_abstract.py:997:9
>   local variable 'a' is assigned to but never used}}}
> ```

This one is right, but seems harmless. Was in the original code.

> ```
> - src/sage/symbolic/expression_conversions.py:21:1
>   'sage.symbolic.constants.I' imported but unused
> 
> - src/sage/symbolic/expression_conversions.py:1112:13
>   redefinition of unused 'I' from line 21
> ```

This one is hard to check. After hunting all capital `I` in the file :
* In live code, I find an import of I in `AlgebraicConverter.arithmetic`, line 1112 (as announced by `pyflakes`). 
* All the other uses are in examples/tests.

Past code residues, again ?

> Not sure what to make of those, especially the first two.
> 
> Someone with an expert opinion on those please chime in.

I'm interested, too.

But I can also make a new commit including the changes suggested by `pyflakes` (as well as deleting the "trailing whitespace" `relint` complains about so insistently, but not the semicolon uses `pycodestyle` hates...).

Advice ?



---

archive/issue_events_435313.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-05-11T17:00:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435313"
}
```



---

archive/issue_events_435314.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-05-11T17:00:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435314"
}
```



---

archive/issue_comments_511270.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nLet us get this in; pyflakes and relint\ncan be worked on in a follow-up ticket.",
    "created_at": "2021-05-11T17:00:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511270",
    "user": "https://github.com/slel"
}
```

<div id="comment:13" align="right">comment:13</div>

Let us get this in; pyflakes and relint
can be worked on in a follow-up ticket.



---

archive/issue_comments_511271.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThe ticket tests fine, but once you remove the `$DOT_SAGE/maxima_commandlist_cache.sobj` then tests fail with (this took quite a long time to track down):\n\n```\nsage -t --long --random-seed=0 src/sage/symbolic/maxima_wrapper.py\n**********************************************************************\nFile \"src/sage/symbolic/maxima_wrapper.py\", line 81, in sage.symbolic.maxima_wrapper.MaximaWrapper.__getattr__\nFailed example:\n    s.completions('u.airy_',globals())\nExpected:\n    ['u.airy_ai', 'u.airy_bi', 'u.airy_dai', 'u.airy_dbi']\nGot:\n    ['u.airy_ai', 'u.airy_bi', 'u.airy_dbi']\n**********************************************************************\n1 item had failures:\n   1 of   7 in sage.symbolic.maxima_wrapper.MaximaWrapper.__getattr__\n    [30 tests, 1 failure, 1.40 s]\n----------------------------------------------------------------------\nsage -t --long --random-seed=0 src/sage/symbolic/maxima_wrapper.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nHow about we just version it as `maxima_commandlist_cache_v2.sobj`",
    "created_at": "2021-06-12T11:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511271",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:14" align="right">comment:14</div>

The ticket tests fine, but once you remove the `$DOT_SAGE/maxima_commandlist_cache.sobj` then tests fail with (this took quite a long time to track down):

```
sage -t --long --random-seed=0 src/sage/symbolic/maxima_wrapper.py
**********************************************************************
File "src/sage/symbolic/maxima_wrapper.py", line 81, in sage.symbolic.maxima_wrapper.MaximaWrapper.__getattr__
Failed example:
    s.completions('u.airy_',globals())
Expected:
    ['u.airy_ai', 'u.airy_bi', 'u.airy_dai', 'u.airy_dbi']
Got:
    ['u.airy_ai', 'u.airy_bi', 'u.airy_dbi']
**********************************************************************
1 item had failures:
   1 of   7 in sage.symbolic.maxima_wrapper.MaximaWrapper.__getattr__
    [30 tests, 1 failure, 1.40 s]
----------------------------------------------------------------------
sage -t --long --random-seed=0 src/sage/symbolic/maxima_wrapper.py  # 1 doctest failed
----------------------------------------------------------------------
```
How about we just version it as `maxima_commandlist_cache_v2.sobj`



---

archive/issue_events_435315.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-12T11:31:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435315"
}
```



---

archive/issue_events_435316.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-12T11:31:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435316"
}
```



---

archive/issue_comments_511272.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHow does versioning the command list help for this? It looks to be that there's a parsing problem that leads to `airy_dai` not being discovered as a valid function in maxima. Shouldn't the fix consist of fixing the parsing? I don't think we are shipping maxima_commandlist_cache, so sage should be able to build the cache reliable and correctly by itself.",
    "created_at": "2021-06-12T17:28:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511272",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:16" align="right">comment:16</div>

How does versioning the command list help for this? It looks to be that there's a parsing problem that leads to `airy_dai` not being discovered as a valid function in maxima. Shouldn't the fix consist of fixing the parsing? I don't think we are shipping maxima_commandlist_cache, so sage should be able to build the cache reliable and correctly by itself.



---

archive/issue_comments_511273.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511273",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_435317.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435317"
}
```



---

archive/issue_events_435318.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435318"
}
```



---

archive/issue_comments_511274.json:
```json
{
    "body": "Changed branch from **[u/charpent/legible_maxima_output](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/legible_maxima_output)** to **[u/mkoeppe/legible_maxima_output](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/legible_maxima_output)**",
    "created_at": "2021-08-14T20:09:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511274",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/charpent/legible_maxima_output](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/legible_maxima_output)** to **[u/mkoeppe/legible_maxima_output](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/legible_maxima_output)**



---

archive/issue_comments_511275.json:
```json
{
    "body": "Changed commit from **[`d2059f7`](https://github.com/sagemath/sagetrac-mirror/commit/d2059f7ca2d876213e938cc50fd19c5adbf15b8d)** to **[`a3aa3c9`](https://github.com/sagemath/sagetrac-mirror/commit/a3aa3c93405b014e9facc97b6363a85faacdc4c4)**",
    "created_at": "2021-08-14T20:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511275",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`d2059f7`](https://github.com/sagemath/sagetrac-mirror/commit/d2059f7ca2d876213e938cc50fd19c5adbf15b8d)** to **[`a3aa3c9`](https://github.com/sagemath/sagetrac-mirror/commit/a3aa3c93405b014e9facc97b6363a85faacdc4c4)**



---

archive/issue_comments_511276.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nrebased on 9.4.rc2\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3aa3c93405b014e9facc97b6363a85faacdc4c4\"><code>a3aa3c9</code></a></td><td><code>Ticket #31796 : make maxima output parseable.</code></td></tr></table>\n",
    "created_at": "2021-08-14T20:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511276",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

rebased on 9.4.rc2

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3aa3c93405b014e9facc97b6363a85faacdc4c4"><code>a3aa3c9</code></a></td><td><code>Ticket #31796 : make maxima output parseable.</code></td></tr></table>




---

archive/issue_comments_511277.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/767e89a1480f828a71ec32d5007e4bfc77b2e649\"><code>767e89a</code></a></td><td><code>Ticket #31796 : make maxima output parseable.</code></td></tr></table>\n",
    "created_at": "2021-08-14T20:19:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511277",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/767e89a1480f828a71ec32d5007e4bfc77b2e649"><code>767e89a</code></a></td><td><code>Ticket #31796 : make maxima output parseable.</code></td></tr></table>




---

archive/issue_comments_511278.json:
```json
{
    "body": "Changed commit from **[`a3aa3c9`](https://github.com/sagemath/sagetrac-mirror/commit/a3aa3c93405b014e9facc97b6363a85faacdc4c4)** to **[`767e89a`](https://github.com/sagemath/sagetrac-mirror/commit/767e89a1480f828a71ec32d5007e4bfc77b2e649)**",
    "created_at": "2021-08-14T20:19:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511278",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a3aa3c9`](https://github.com/sagemath/sagetrac-mirror/commit/a3aa3c93405b014e9facc97b6363a85faacdc4c4)** to **[`767e89a`](https://github.com/sagemath/sagetrac-mirror/commit/767e89a1480f828a71ec32d5007e4bfc77b2e649)**



---

archive/issue_comments_511279.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n`rm ~/.sage/maxima_commandlist_cache.sobj && ./sage -t --long --random-seed=0 src/sage/symbolic/maxima_wrapper.py` gives a different failure here:\n\n```\nFile \"src/sage/symbolic/maxima_wrapper.py\", line 62, in sage.symbolic.maxima_wrapper.MaximaWrapper.__init__\nFailed example:\n    s.completions('u.elliptic_',globals())\nExpected:\n    ['u.elliptic_e', 'u.elliptic_ec', 'u.elliptic_eu', 'u.elliptic_f', 'u.elliptic_kc', 'u.elliptic_pi']\nGot:\n    ['u.elliptic_ec',\n     'u.elliptic_eu',\n     'u.elliptic_f',\n     'u.elliptic_kc',\n     'u.elliptic_pi']\n```",
    "created_at": "2021-08-14T20:58:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511279",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

`rm ~/.sage/maxima_commandlist_cache.sobj && ./sage -t --long --random-seed=0 src/sage/symbolic/maxima_wrapper.py` gives a different failure here:

```
File "src/sage/symbolic/maxima_wrapper.py", line 62, in sage.symbolic.maxima_wrapper.MaximaWrapper.__init__
Failed example:
    s.completions('u.elliptic_',globals())
Expected:
    ['u.elliptic_e', 'u.elliptic_ec', 'u.elliptic_eu', 'u.elliptic_f', 'u.elliptic_kc', 'u.elliptic_pi']
Got:
    ['u.elliptic_ec',
     'u.elliptic_eu',
     'u.elliptic_f',
     'u.elliptic_kc',
     'u.elliptic_pi']
```



---

archive/issue_comments_511280.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7abbe62be2a4bbb9262963de68bb0d0cf9cbcfe\"><code>d7abbe6</code></a></td><td><code>MaximaAbstract._commands: Remove whitespace in apropos output before breaking it apart</code></td></tr></table>\n",
    "created_at": "2021-08-14T21:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511280",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7abbe62be2a4bbb9262963de68bb0d0cf9cbcfe"><code>d7abbe6</code></a></td><td><code>MaximaAbstract._commands: Remove whitespace in apropos output before breaking it apart</code></td></tr></table>




---

archive/issue_comments_511281.json:
```json
{
    "body": "Changed commit from **[`767e89a`](https://github.com/sagemath/sagetrac-mirror/commit/767e89a1480f828a71ec32d5007e4bfc77b2e649)** to **[`d7abbe6`](https://github.com/sagemath/sagetrac-mirror/commit/d7abbe62be2a4bbb9262963de68bb0d0cf9cbcfe)**",
    "created_at": "2021-08-14T21:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511281",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`767e89a`](https://github.com/sagemath/sagetrac-mirror/commit/767e89a1480f828a71ec32d5007e4bfc77b2e649)** to **[`d7abbe6`](https://github.com/sagemath/sagetrac-mirror/commit/d7abbe62be2a4bbb9262963de68bb0d0cf9cbcfe)**



---

archive/issue_comments_511282.json:
```json
{
    "body": "Changed author from **Emmanuel Charpentier** to **Emmanuel Charpentier, Matthias Koeppe**",
    "created_at": "2021-08-14T21:10:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511282",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Emmanuel Charpentier** to **Emmanuel Charpentier, Matthias Koeppe**



---

archive/issue_events_435319.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-14T21:10:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435319"
}
```



---

archive/issue_events_435320.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-14T21:10:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435320"
}
```



---

archive/issue_comments_511283.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\npatchbot reports some trivial failing doctests in it tutorial",
    "created_at": "2021-11-12T10:55:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511283",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:25" align="right">comment:25</div>

patchbot reports some trivial failing doctests in it tutorial



---

archive/issue_events_435321.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-11-12T10:55:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435321"
}
```



---

archive/issue_events_435322.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-11-12T10:55:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435322"
}
```



---

archive/issue_comments_511284.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI have fixed the doctests in italian documentation\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3ec3aaddbd729e183dc569bea19458e3470c545\"><code>d3ec3aa</code></a></td><td><code>Merge branch 'u/mkoeppe/legible_maxima_output' in 9.5.b7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e483652d0fe72ca59c5af56daacf4c56955b507\"><code>9e48365</code></a></td><td><code>fix doctest inside it documentation ; wrap some long lines</code></td></tr></table>\n",
    "created_at": "2021-11-19T14:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511284",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:27" align="right">comment:27</div>

I have fixed the doctests in italian documentation

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3ec3aaddbd729e183dc569bea19458e3470c545"><code>d3ec3aa</code></a></td><td><code>Merge branch 'u/mkoeppe/legible_maxima_output' in 9.5.b7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e483652d0fe72ca59c5af56daacf4c56955b507"><code>9e48365</code></a></td><td><code>fix doctest inside it documentation ; wrap some long lines</code></td></tr></table>




---

archive/issue_events_435323.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-11-19T14:05:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435323"
}
```



---

archive/issue_events_435324.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-11-19T14:05:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435324"
}
```



---

archive/issue_comments_511285.json:
```json
{
    "body": "Changed commit from **[`d7abbe6`](https://github.com/sagemath/sagetrac-mirror/commit/d7abbe62be2a4bbb9262963de68bb0d0cf9cbcfe)** to **[`9e48365`](https://github.com/sagemath/sagetrac-mirror/commit/9e483652d0fe72ca59c5af56daacf4c56955b507)**",
    "created_at": "2021-11-19T14:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511285",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`d7abbe6`](https://github.com/sagemath/sagetrac-mirror/commit/d7abbe62be2a4bbb9262963de68bb0d0cf9cbcfe)** to **[`9e48365`](https://github.com/sagemath/sagetrac-mirror/commit/9e483652d0fe72ca59c5af56daacf4c56955b507)**



---

archive/issue_comments_511286.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/legible_maxima_output](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/legible_maxima_output)** to **[public/ticket/31796](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/31796)**",
    "created_at": "2021-11-19T14:05:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511286",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/mkoeppe/legible_maxima_output](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/legible_maxima_output)** to **[public/ticket/31796](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/31796)**



---

archive/issue_comments_511287.json:
```json
{
    "body": "Changed author from **Emmanuel Charpentier, Matthias Koeppe** to **Emmanuel Charpentier, Matthias Koeppe, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2021-11-19T17:42:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511287",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Emmanuel Charpentier, Matthias Koeppe** to **Emmanuel Charpentier, Matthias Koeppe, Frédéric Chapoton**



---

archive/issue_comments_511288.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05fa319b65be9b31487bb493450510e32c2f0d07\"><code>05fa319</code></a></td><td><code>some more details</code></td></tr></table>\n",
    "created_at": "2021-11-20T07:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511288",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05fa319b65be9b31487bb493450510e32c2f0d07"><code>05fa319</code></a></td><td><code>some more details</code></td></tr></table>




---

archive/issue_comments_511289.json:
```json
{
    "body": "Changed commit from **[`9e48365`](https://github.com/sagemath/sagetrac-mirror/commit/9e483652d0fe72ca59c5af56daacf4c56955b507)** to **[`05fa319`](https://github.com/sagemath/sagetrac-mirror/commit/05fa319b65be9b31487bb493450510e32c2f0d07)**",
    "created_at": "2021-11-20T07:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511289",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9e48365`](https://github.com/sagemath/sagetrac-mirror/commit/9e483652d0fe72ca59c5af56daacf4c56955b507)** to **[`05fa319`](https://github.com/sagemath/sagetrac-mirror/commit/05fa319b65be9b31487bb493450510e32c2f0d07)**



---

archive/issue_comments_511290.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nok, looks good. Patchbot is morally green.\n\nI vote for positive review. Any confirmation from other reviewers or authors ?",
    "created_at": "2021-11-24T07:54:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511290",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:30" align="right">comment:30</div>

ok, looks good. Patchbot is morally green.

I vote for positive review. Any confirmation from other reviewers or authors ?



---

archive/issue_comments_511291.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@fchapoton](#comment:30):\n> ok, looks good. Patchbot is morally green.\n\nWhat means \"morally\" green ???\n\n> I vote for positive review. Any confirmation from other reviewers or authors ?\n\nRunning `ptestlong` once more (just in case : this particular patch has already proven not-so-easy to integrate). Stay tuned...",
    "created_at": "2021-11-24T08:42:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511291",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@fchapoton](#comment:30):
> ok, looks good. Patchbot is morally green.

What means "morally" green ???

> I vote for positive review. Any confirmation from other reviewers or authors ?

Running `ptestlong` once more (just in case : this particular patch has already proven not-so-easy to integrate). Stay tuned...



---

archive/issue_comments_511292.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@EmmanuelCharpentier](#comment:31):\n> Replying to [@fchapoton](#comment:30):\n> > ok, looks good. Patchbot is morally green.\n\n> \n> What means \"morally\" green ???\n> \n> > I vote for positive review. Any confirmation from other reviewers or authors ?\n\n> \n> Running `ptestlong` once more (just in case : this particular patch has already proven not-so-easy to integrate). Stay tuned...\n\nOn Debian testing running on core i7 + 16 GB RAM, running `ptestlong` on this patch added on top of 9.5.beta7 gives no new failure.\n\n==> `positive_review` is OK for me. I set it, but feel free to unset if necessary.",
    "created_at": "2021-11-24T11:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511292",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@EmmanuelCharpentier](#comment:31):
> Replying to [@fchapoton](#comment:30):
> > ok, looks good. Patchbot is morally green.

> 
> What means "morally" green ???
> 
> > I vote for positive review. Any confirmation from other reviewers or authors ?

> 
> Running `ptestlong` once more (just in case : this particular patch has already proven not-so-easy to integrate). Stay tuned...

On Debian testing running on core i7 + 16 GB RAM, running `ptestlong` on this patch added on top of 9.5.beta7 gives no new failure.

==> `positive_review` is OK for me. I set it, but feel free to unset if necessary.



---

archive/issue_events_435325.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2021-11-24T11:44:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435325"
}
```



---

archive/issue_events_435326.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2021-11-24T11:44:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435326"
}
```



---

archive/issue_comments_511293.json:
```json
{
    "body": "Changed branch from **[public/ticket/31796](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/31796)** to **[`05fa319`](https://github.com/sagemath/sagetrac-mirror/commit/05fa319b65be9b31487bb493450510e32c2f0d07)**",
    "created_at": "2021-12-05T11:14:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31796#issuecomment-511293",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/ticket/31796](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/31796)** to **[`05fa319`](https://github.com/sagemath/sagetrac-mirror/commit/05fa319b65be9b31487bb493450510e32c2f0d07)**



---

archive/issue_events_435327.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-12-05T11:14:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435327"
}
```



---

archive/issue_events_435328.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "6f6f779ee490d2570489ff6961858159545bd301",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-12-05T11:14:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31796",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31796#event-435328"
}
```
