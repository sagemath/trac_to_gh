# Issue 31415: GH Actions workflow that builds documentation on each push

archive/issues_031178.json:
```json
{
    "assignees": [],
    "body": "On each push to a branch in `sagemath/sagetrac-mirror`, it builds the HTML documentation and, if this succeeds, deploys it to netlify for easy inspection.\nExample: https://62018055188ce050610e98a6--sagemath-tobias.netlify.app\nWorkflow runs: https://github.com/sagemath/sagetrac-mirror/actions/workflows/doc-build.yml\n\n\nOnce this ticket is merged, I will add a badge pointing to the github workflow (similar to the linting badge), where one then can get the url for this particular deployment. Due to various open issues at netlify, it is sadly not possible right now to set the deployment url to the branch name so we use the commit hash for this.\n\nFor pushes to the develop branch it deploys the docs to the 'production' website \nhttps://sagemath-tobias.netlify.app/\n\nI've chosen netlify (say over github pages) mainly since it easily allows to push multiple versions of the same page under different urls (and does an intelligent diff so that the upload is smaller).\n\nRelated: https://github.com/sagemath/documentation/issues/24 #33263 #33294\n\nFollow-up: \n- Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account, `sagemath.netlify.org` is still available. Then one just needs to change the secrets in the github repo.\n\n- Incorporate the post-fixes of https://github.com/sagemath/documentation into the main repo here, so that the preview looks the same as the published page.\n\n- For pushes with tags (or to master), publish it on docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).\n\n\n\nCC:  @slel @jhpalmieri @haraldschilly @williamstein @tobiasdiez @kwankyu @vbraun\n\nBranch: **[31665de](https://github.com/sagemath/sagetrac-mirror/commit/31665def57b107136a67bd3708f1c2e641cdf2de)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **Tobias Diez**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31415_\n\n",
    "closed_at": "2022-02-13T10:17:57Z",
    "created_at": "2021-02-18T22:42:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20website/wiki",
        "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "GH Actions workflow that builds documentation on each push",
    "type": "issue",
    "updated_at": "2022-02-13T21:24:17Z",
    "url": "https://github.com/sagemath/sage/issues/31415",
    "user": "https://github.com/mkoeppe"
}
```
On each push to a branch in `sagemath/sagetrac-mirror`, it builds the HTML documentation and, if this succeeds, deploys it to netlify for easy inspection.
Example: https://62018055188ce050610e98a6--sagemath-tobias.netlify.app
Workflow runs: https://github.com/sagemath/sagetrac-mirror/actions/workflows/doc-build.yml


Once this ticket is merged, I will add a badge pointing to the github workflow (similar to the linting badge), where one then can get the url for this particular deployment. Due to various open issues at netlify, it is sadly not possible right now to set the deployment url to the branch name so we use the commit hash for this.

For pushes to the develop branch it deploys the docs to the 'production' website 
https://sagemath-tobias.netlify.app/

I've chosen netlify (say over github pages) mainly since it easily allows to push multiple versions of the same page under different urls (and does an intelligent diff so that the upload is smaller).

Related: https://github.com/sagemath/documentation/issues/24 #33263 #33294

Follow-up: 
- Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account, `sagemath.netlify.org` is still available. Then one just needs to change the secrets in the github repo.

- Incorporate the post-fixes of https://github.com/sagemath/documentation into the main repo here, so that the preview looks the same as the published page.

- For pushes with tags (or to master), publish it on docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).



CC:  @slel @jhpalmieri @haraldschilly @williamstein @tobiasdiez @kwankyu @vbraun

Branch: **[31665de](https://github.com/sagemath/sagetrac-mirror/commit/31665def57b107136a67bd3708f1c2e641cdf2de)**

Reviewer: **Matthias Koeppe**

Author: **Tobias Diez**

_Issue created by migration from https://trac.sagemath.org/ticket/31415_





---

archive/issue_events_414814.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-18T22:42:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414814"
}
```



---

archive/issue_events_414815.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-18T22:42:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20website/wiki",
    "label_color": "0075ca",
    "label_name": "component: website/wiki",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414815"
}
```



---

archive/issue_events_414816.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-18T22:42:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414816"
}
```



---

archive/issue_events_414817.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-18T22:42:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414817"
}
```



---

archive/issue_comments_507426.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n On each release tag pushed to `sagemath/sage`, it would build the HTML and PDF documentation and commit it to https://github.com/sagemath/documentation\n \n as discussed in https://github.com/sagemath/documentation/issues/24\n+\n+for example using https://github.com/marketplace/actions/deploy-to-github-pages\n+\n+\n``````\n",
    "created_at": "2021-02-18T23:20:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507426",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
 On each release tag pushed to `sagemath/sage`, it would build the HTML and PDF documentation and commit it to https://github.com/sagemath/documentation
 
 as discussed in https://github.com/sagemath/documentation/issues/24
+
+for example using https://github.com/marketplace/actions/deploy-to-github-pages
+
+
``````




---

archive/issue_comments_507427.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nI'm the one creating the documentation pages in the last few years. It's more than just building the files, because the output requires post-processing to make the pages fit for the CDN and I also have a script to create index pages. I'm also maintaining patches on top of Sage. So, all I want to add is that this task can't be automated right now.",
    "created_at": "2021-02-19T17:35:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507427",
    "user": "https://github.com/haraldschilly"
}
```

<a id='comment:3'>Comment 3:</a>
I'm the one creating the documentation pages in the last few years. It's more than just building the files, because the output requires post-processing to make the pages fit for the CDN and I also have a script to create index pages. I'm also maintaining patches on top of Sage. So, all I want to add is that this task can't be automated right now.



---

archive/issue_comments_507428.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nAre these patches available somewhere, and should we look into whether they should be integrated into Sage?",
    "created_at": "2021-02-19T18:35:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507428",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'>Comment 4:</a>
Are these patches available somewhere, and should we look into whether they should be integrated into Sage?



---

archive/issue_comments_507429.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nRelated:\n\n- #29576: Missing js objects on doc search page",
    "created_at": "2021-03-27T20:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507429",
    "user": "https://github.com/slel"
}
```

<a id='comment:6'>Comment 6:</a>
Related:

- #29576: Missing js objects on doc search page



---

archive/issue_comments_507430.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nMoving this ticket to 9.4, as it seems unlikely that it will be merged in 9.3, which is in the release candidate stage",
    "created_at": "2021-04-02T20:21:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507430",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'>Comment 7:</a>
Moving this ticket to 9.4, as it seems unlikely that it will be merged in 9.3, which is in the release candidate stage



---

archive/issue_events_414818.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-02T20:21:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414818"
}
```



---

archive/issue_events_414819.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-02T20:21:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414819"
}
```



---

archive/issue_events_414820.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414820"
}
```



---

archive/issue_events_414821.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414821"
}
```



---

archive/issue_events_414822.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-21T06:00:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414822"
}
```



---

archive/issue_events_414823.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-21T06:00:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414823"
}
```



---

archive/issue_comments_507431.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nLooks like you are working on this, Tobias?",
    "created_at": "2022-02-06T18:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507431",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'>Comment 11:</a>
Looks like you are working on this, Tobias?



---

archive/issue_comments_507432.json:
```json
{
    "body": "Branch: **[public/build/doc_build_ci](https://github.com/sagemath/sagetrac-mirror/tree/public/build/doc_build_ci)**",
    "created_at": "2022-02-06T20:10:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507432",
    "user": "https://github.com/tobiasdiez"
}
```

Branch: **[public/build/doc_build_ci](https://github.com/sagemath/sagetrac-mirror/tree/public/build/doc_build_ci)**



---

archive/issue_comments_507433.json:
```json
{
    "body": "Commit: **[a94d1e8](https://github.com/sagemath/sagetrac-mirror/commit/a94d1e8700f822f197481529c819b024cc1bbfac)**",
    "created_at": "2022-02-06T20:10:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507433",
    "user": "https://github.com/tobiasdiez"
}
```

Commit: **[a94d1e8](https://github.com/sagemath/sagetrac-mirror/commit/a94d1e8700f822f197481529c819b024cc1bbfac)**



---

archive/issue_comments_507434.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nYes, here is what I have for now.\n\nOn each push, it builds the documentation and deploys it to netlify. Example: https://61ffda629c2d6f02653112ff--sagemath-tobias.netlify.app/\n\nHowever, what Harald says above is still true. Currently, there are symlinks in the documentation tree (to import static files), which yields to display errors. I have the same display problems locally (because I'm using WSL and Windows is not resolving the Linux symlinks). So that's something that still needs fixing. Any ideas how to remove the symlinks?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41231160aa29f8774ff6c9ba41db7f288d13341c\">4123116</a></td><td><code>Add continuous deployment of docs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b989cecf3c2099140c9bfa3565c348f4d6139b2\">2b989ce</a></td><td><code>Why are you not showing up?</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/361c95bd43fd6865ddfb6c35f41152e3bab9cfc6\">361c95b</a></td><td><code>Back to full workflow</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0847118f8e759082efdb4da22605d74de72fc305\">0847118</a></td><td><code>Fix path to build docs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/915da279b926b8b61ee4d94fa5b93710517261f0\">915da27</a></td><td><code>Trigger build again</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5c91d8d5ecd7152112354d139fc140aca7e72ff\">f5c91d8</a></td><td><code>Absolute path not relative...</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8db26733707b5158d5666119026c02695ebbe84\">a8db267</a></td><td><code>Don't comment on commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/442134217d16e61e6ccdc97f76f0718ec37d3e39\">4421342</a></td><td><code>Use netlify deploy cli over api</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a94d1e8700f822f197481529c819b024cc1bbfac\">a94d1e8</a></td><td><code>Copy docs before deployment</code></td></tr></table>\n",
    "created_at": "2022-02-06T20:10:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507434",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:12'>Comment 12:</a>
Yes, here is what I have for now.

On each push, it builds the documentation and deploys it to netlify. Example: https://61ffda629c2d6f02653112ff--sagemath-tobias.netlify.app/

However, what Harald says above is still true. Currently, there are symlinks in the documentation tree (to import static files), which yields to display errors. I have the same display problems locally (because I'm using WSL and Windows is not resolving the Linux symlinks). So that's something that still needs fixing. Any ideas how to remove the symlinks?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41231160aa29f8774ff6c9ba41db7f288d13341c">4123116</a></td><td><code>Add continuous deployment of docs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b989cecf3c2099140c9bfa3565c348f4d6139b2">2b989ce</a></td><td><code>Why are you not showing up?</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/361c95bd43fd6865ddfb6c35f41152e3bab9cfc6">361c95b</a></td><td><code>Back to full workflow</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0847118f8e759082efdb4da22605d74de72fc305">0847118</a></td><td><code>Fix path to build docs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/915da279b926b8b61ee4d94fa5b93710517261f0">915da27</a></td><td><code>Trigger build again</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5c91d8d5ecd7152112354d139fc140aca7e72ff">f5c91d8</a></td><td><code>Absolute path not relative...</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8db26733707b5158d5666119026c02695ebbe84">a8db267</a></td><td><code>Don't comment on commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/442134217d16e61e6ccdc97f76f0718ec37d3e39">4421342</a></td><td><code>Use netlify deploy cli over api</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a94d1e8700f822f197481529c819b024cc1bbfac">a94d1e8</a></td><td><code>Copy docs before deployment</code></td></tr></table>




---

archive/issue_comments_507435.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nReplying to [@tobiasdiez](#comment%3A12):\n> Yes, here is what I have for now.\n> \n> On each push, it builds the documentation and deploys it to netlify. Example: https://61ffda629c2d6f02653112ff--sagemath-tobias.netlify.app/\n> \n> However, what Harald says above is still true. Currently, there are symlinks in the documentation tree (to import static files), which yields to display errors. \n\nWhere and how can I see the display errors?",
    "created_at": "2022-02-07T02:47:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507435",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:14'>Comment 14:</a>
Replying to [@tobiasdiez](#comment%3A12):
> Yes, here is what I have for now.
> 
> On each push, it builds the documentation and deploys it to netlify. Example: https://61ffda629c2d6f02653112ff--sagemath-tobias.netlify.app/
> 
> However, what Harald says above is still true. Currently, there are symlinks in the documentation tree (to import static files), which yields to display errors. 

Where and how can I see the display errors?



---

archive/issue_comments_507436.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nAttachment: **[Screenshot 2022-02-07 134004.png.gz](https://github.com/sagemath/sage/files/ticket31415/2e4acbfeb065b531040bb9e0edd9844d.gz)**\n\nSorry, should have provided an example. I think all subpages that are not `index.html` are affected, for example https://61ffda629c2d6f02653112ff--sagemath-tobias.netlify.app/reference/structure/sage/structure/sage_object.html. The problem is the symlink that normally resolves `_static` to the correct path. This doesn't work on netlify (nor github pages) and leads to the following error:\n<img src=\"ticket:31415:Screenshot 2022-02-07 134004.png\" width=800px>",
    "created_at": "2022-02-07T12:44:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507436",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:15'>Comment 15:</a>
Attachment: **[Screenshot 2022-02-07 134004.png.gz](https://github.com/sagemath/sage/files/ticket31415/2e4acbfeb065b531040bb9e0edd9844d.gz)**

Sorry, should have provided an example. I think all subpages that are not `index.html` are affected, for example https://61ffda629c2d6f02653112ff--sagemath-tobias.netlify.app/reference/structure/sage/structure/sage_object.html. The problem is the symlink that normally resolves `_static` to the correct path. This doesn't work on netlify (nor github pages) and leads to the following error:
<img src="ticket:31415:Screenshot 2022-02-07 134004.png" width=800px>



---

archive/issue_comments_507437.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nReplying to [@tobiasdiez](#comment%3A15):\n> Sorry, should have provided an example. I think all subpages that are not `index.html` are affected, for example https://61ffda629c2d6f02653112ff--sagemath-tobias.netlify.app/reference/structure/sage/structure/sage_object.html. The problem is the symlink that normally resolves `_static` to the correct path. This doesn't work on netlify (nor github pages) and leads to the following error:\n\nI see. Thanks. The symlinks are there to save disk space. But for CDN, it seems that the best option is just to copy files to resolve symlinks. See this:\n\nhttps://superuser.com/questions/216919/how-to-copy-symlinks-to-target-as-normal-folders",
    "created_at": "2022-02-07T14:28:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507437",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:16'>Comment 16:</a>
Replying to [@tobiasdiez](#comment%3A15):
> Sorry, should have provided an example. I think all subpages that are not `index.html` are affected, for example https://61ffda629c2d6f02653112ff--sagemath-tobias.netlify.app/reference/structure/sage/structure/sage_object.html. The problem is the symlink that normally resolves `_static` to the correct path. This doesn't work on netlify (nor github pages) and leads to the following error:

I see. Thanks. The symlinks are there to save disk space. But for CDN, it seems that the best option is just to copy files to resolve symlinks. See this:

https://superuser.com/questions/216919/how-to-copy-symlinks-to-target-as-normal-folders



---

archive/issue_comments_507438.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nThat would work indeed, thanks for the idea! Will try it this evening.\n\nWhy are symlinks actually needed in the first place? Is there no easy way to specify the correct path to the static files from these pages? (For example, in webpack you have `~` which resolves to the root of the project regardless from where it is accessed.)",
    "created_at": "2022-02-07T14:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507438",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:17'>Comment 17:</a>
That would work indeed, thanks for the idea! Will try it this evening.

Why are symlinks actually needed in the first place? Is there no easy way to specify the correct path to the static files from these pages? (For example, in webpack you have `~` which resolves to the root of the project regardless from where it is accessed.)



---

archive/issue_comments_507439.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nReplying to [@tobiasdiez](#comment%3A17):\n> That would work indeed, thanks for the idea! Will try it this evening.\n> \n> Why are symlinks actually needed in the first place? Is there no easy way to specify the correct path to the static files from these pages? (For example, in webpack you have `~` which resolves to the root of the project regardless from where it is accessed.)\n\nSphinx might have dictated hard-coded location of static files directory. But I don't know if this location can be changed.",
    "created_at": "2022-02-07T15:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507439",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:18'>Comment 18:</a>
Replying to [@tobiasdiez](#comment%3A17):
> That would work indeed, thanks for the idea! Will try it this evening.
> 
> Why are symlinks actually needed in the first place? Is there no easy way to specify the correct path to the static files from these pages? (For example, in webpack you have `~` which resolves to the root of the project regardless from where it is accessed.)

Sphinx might have dictated hard-coded location of static files directory. But I don't know if this location can be changed.



---

archive/issue_comments_507440.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0bac5f18f19a8f4460f9063501b7e47189ef48a\">e0bac5f</a></td><td><code>Replace symlinks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e7c8e4662f84ce7d74bfeb9a56e0960cfffa2ec3\">e7c8e46</a></td><td><code>Don't use alias for now due to various netlify bugs</code></td></tr></table>\n",
    "created_at": "2022-02-07T18:11:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507440",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'>Comment 19:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0bac5f18f19a8f4460f9063501b7e47189ef48a">e0bac5f</a></td><td><code>Replace symlinks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e7c8e4662f84ce7d74bfeb9a56e0960cfffa2ec3">e7c8e46</a></td><td><code>Don't use alias for now due to various netlify bugs</code></td></tr></table>




---

archive/issue_comments_507441.json:
```json
{
    "body": "Changed commit from **[a94d1e8](https://github.com/sagemath/sagetrac-mirror/commit/a94d1e8700f822f197481529c819b024cc1bbfac)** to **[e7c8e46](https://github.com/sagemath/sagetrac-mirror/commit/e7c8e4662f84ce7d74bfeb9a56e0960cfffa2ec3)**",
    "created_at": "2022-02-07T18:11:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507441",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a94d1e8](https://github.com/sagemath/sagetrac-mirror/commit/a94d1e8700f822f197481529c819b024cc1bbfac)** to **[e7c8e46](https://github.com/sagemath/sagetrac-mirror/commit/e7c8e4662f84ce7d74bfeb9a56e0960cfffa2ec3)**



---

archive/issue_comments_507442.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nmerge #33309?",
    "created_at": "2022-02-07T18:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507442",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'>Comment 20:</a>
merge #33309?



---

archive/issue_comments_507443.json:
```json
{
    "body": "Changed commit from **[e7c8e46](https://github.com/sagemath/sagetrac-mirror/commit/e7c8e4662f84ce7d74bfeb9a56e0960cfffa2ec3)** to **[870745e](https://github.com/sagemath/sagetrac-mirror/commit/870745e4a407c8b9f1381611eb36cfd5c9adce41)**",
    "created_at": "2022-02-07T19:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507443",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e7c8e46](https://github.com/sagemath/sagetrac-mirror/commit/e7c8e4662f84ce7d74bfeb9a56e0960cfffa2ec3)** to **[870745e](https://github.com/sagemath/sagetrac-mirror/commit/870745e4a407c8b9f1381611eb36cfd5c9adce41)**



---

archive/issue_comments_507444.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f7086fffb80f397c043ac7ab6c4a63161c1972e\">5f7086f</a></td><td><code>Print url in action overview</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/870745e4a407c8b9f1381611eb36cfd5c9adce41\">870745e</a></td><td><code>Copy only contents of folder not the folder itself</code></td></tr></table>\n",
    "created_at": "2022-02-07T19:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507444",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>Comment 21:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f7086fffb80f397c043ac7ab6c4a63161c1972e">5f7086f</a></td><td><code>Print url in action overview</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/870745e4a407c8b9f1381611eb36cfd5c9adce41">870745e</a></td><td><code>Copy only contents of folder not the folder itself</code></td></tr></table>




---

archive/issue_events_414824.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-02-07T19:51:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414824"
}
```



---

archive/issue_events_414825.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-02-07T19:51:23Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "title_is": "GH Actions workflow that builds documentation on each push",
    "title_was": "GH Actions workflow that deploys built documentation",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414825"
}
```



---

archive/issue_comments_507445.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,17 @@\n-On each release tag pushed to `sagemath/sage`, it would build the HTML and PDF documentation and commit it to https://github.com/sagemath/documentation\n+On each push to a branch in `sagemath/sagetrac-mirror`, it builds the HTML documentation and, if this succeeds, deploys it to netlify for easy inspection.\n+Example: https://62016ee98f882c471f0a3373--sagemath-tobias.netlify.app/en\n+Once this ticket is merged, I will add a badge pointing to the github workflow (similar to the linting badge), where one then can get the url for this particular deployment. Due to various open issues at netlify, it is sadly not possible right now to set the deployment url to the branch name.\n \n-as discussed in https://github.com/sagemath/documentation/issues/24\n+For the master branch it would be pushed to the 'production' website \n+https://sagemath-tobias.netlify.app/\n \n-for example using https://github.com/marketplace/actions/deploy-to-github-pages\n+I've chosen netlify (say over github pages) mainly since it easily allows to push multiple versions of the same page under different urls (and does an intelligent diff so that the upload is smaller).\n+\n+Related: https://github.com/sagemath/documentation/issues/24\n+\n+Follow-up: \n+- Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account `sagemtah.netlify.org` is still available. Then just change the secrets in the github repo.\n+\n+- For pushes with tags (to master), publish it on the live docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).\n \n \n``````\n",
    "created_at": "2022-02-07T19:51:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507445",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,17 @@
-On each release tag pushed to `sagemath/sage`, it would build the HTML and PDF documentation and commit it to https://github.com/sagemath/documentation
+On each push to a branch in `sagemath/sagetrac-mirror`, it builds the HTML documentation and, if this succeeds, deploys it to netlify for easy inspection.
+Example: https://62016ee98f882c471f0a3373--sagemath-tobias.netlify.app/en
+Once this ticket is merged, I will add a badge pointing to the github workflow (similar to the linting badge), where one then can get the url for this particular deployment. Due to various open issues at netlify, it is sadly not possible right now to set the deployment url to the branch name.
 
-as discussed in https://github.com/sagemath/documentation/issues/24
+For the master branch it would be pushed to the 'production' website 
+https://sagemath-tobias.netlify.app/
 
-for example using https://github.com/marketplace/actions/deploy-to-github-pages
+I've chosen netlify (say over github pages) mainly since it easily allows to push multiple versions of the same page under different urls (and does an intelligent diff so that the upload is smaller).
+
+Related: https://github.com/sagemath/documentation/issues/24
+
+Follow-up: 
+- Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account `sagemtah.netlify.org` is still available. Then just change the secrets in the github repo.
+
+- For pushes with tags (to master), publish it on the live docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).
 
 
``````




---

archive/issue_comments_507446.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nProbably should conditionalize the deployment step on the presence of the secrets",
    "created_at": "2022-02-07T19:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507446",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'>Comment 23:</a>
Probably should conditionalize the deployment step on the presence of the secrets



---

archive/issue_comments_507447.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nAlso typo \"neflify\" -> \"netlify\"",
    "created_at": "2022-02-07T19:55:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507447",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'>Comment 24:</a>
Also typo "neflify" -> "netlify"



---

archive/issue_comments_507448.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nAlso since the first steps are identical to the `build.yml` workflow added in #33263, could this not just be an additional, conditional step of that?",
    "created_at": "2022-02-07T19:57:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507448",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'>Comment 25:</a>
Also since the first steps are identical to the `build.yml` workflow added in #33263, could this not just be an additional, conditional step of that?



---

archive/issue_comments_507449.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nReplying to [@mkoeppe](#comment%3A20):\n> merge #33309?\n\nI think this is pretty independent.",
    "created_at": "2022-02-07T21:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507449",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:26'>Comment 26:</a>
Replying to [@mkoeppe](#comment%3A20):
> merge #33309?

I think this is pretty independent.



---

archive/issue_comments_507450.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nReplying to [@mkoeppe](#comment%3A23):\n> Probably should conditionalize the deployment step on the presence of the secrets\n\nWhy do you think so? If the secrets are not provided or missconfigured, then this workflow fails at this step, which I think is what you want.",
    "created_at": "2022-02-07T21:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507450",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:27'>Comment 27:</a>
Replying to [@mkoeppe](#comment%3A23):
> Probably should conditionalize the deployment step on the presence of the secrets

Why do you think so? If the secrets are not provided or missconfigured, then this workflow fails at this step, which I think is what you want.



---

archive/issue_comments_507451.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nReplying to [@mkoeppe](#comment%3A24):\n> Also typo \"neflify\" -> \"netlify\"\n\nThanks, corrected.",
    "created_at": "2022-02-07T21:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507451",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:28'>Comment 28:</a>
Replying to [@mkoeppe](#comment%3A24):
> Also typo "neflify" -> "netlify"

Thanks, corrected.



---

archive/issue_comments_507452.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nReplying to [@mkoeppe](#comment%3A25):\n> Also since the first steps are identical to the `build.yml` workflow added in #33263, could this not just be an additional, conditional step of that?\n\nThought about this as well. If we would use github PRs then I would definitely merge the workflows and provide feedback in form of different status checks. But since we awkwardly need to link to github through the badge. And as badges are workflow-specific this is the only way to make the distinction between \"tests failed\" and \"documentation didn't build\". Also the idea was to link the \"documentation badge\" link directly to the preview url. Another advantage is that you get quicker feedback since tests and doc build run in parallel.",
    "created_at": "2022-02-07T21:42:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507452",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:29'>Comment 29:</a>
Replying to [@mkoeppe](#comment%3A25):
> Also since the first steps are identical to the `build.yml` workflow added in #33263, could this not just be an additional, conditional step of that?

Thought about this as well. If we would use github PRs then I would definitely merge the workflows and provide feedback in form of different status checks. But since we awkwardly need to link to github through the badge. And as badges are workflow-specific this is the only way to make the distinction between "tests failed" and "documentation didn't build". Also the idea was to link the "documentation badge" link directly to the preview url. Another advantage is that you get quicker feedback since tests and doc build run in parallel.



---

archive/issue_comments_507453.json:
```json
{
    "body": "Changed commit from **[870745e](https://github.com/sagemath/sagetrac-mirror/commit/870745e4a407c8b9f1381611eb36cfd5c9adce41)** to **[1728782](https://github.com/sagemath/sagetrac-mirror/commit/17287820443c64e1b24e462d8c446c9db8f21c62)**",
    "created_at": "2022-02-07T22:02:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507453",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[870745e](https://github.com/sagemath/sagetrac-mirror/commit/870745e4a407c8b9f1381611eb36cfd5c9adce41)** to **[1728782](https://github.com/sagemath/sagetrac-mirror/commit/17287820443c64e1b24e462d8c446c9db8f21c62)**



---

archive/issue_comments_507454.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b88ed5ea81b18496edfa28fd8ee00ddfe504cbcd\">b88ed5e</a></td><td><code>Deploy to production on push to master</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2035054f3fa3c0a7e6901b74c4ca199f4236ecd4\">2035054</a></td><td><code>Specify line break in message in the correct format</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17287820443c64e1b24e462d8c446c9db8f21c62\">1728782</a></td><td><code>Correct spelling of netlify</code></td></tr></table>\n",
    "created_at": "2022-02-07T22:02:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507454",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:30'>Comment 30:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b88ed5ea81b18496edfa28fd8ee00ddfe504cbcd">b88ed5e</a></td><td><code>Deploy to production on push to master</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2035054f3fa3c0a7e6901b74c4ca199f4236ecd4">2035054</a></td><td><code>Specify line break in message in the correct format</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17287820443c64e1b24e462d8c446c9db8f21c62">1728782</a></td><td><code>Correct spelling of netlify</code></td></tr></table>




---

archive/issue_comments_507455.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,8 @@\n On each push to a branch in `sagemath/sagetrac-mirror`, it builds the HTML documentation and, if this succeeds, deploys it to netlify for easy inspection.\n-Example: https://62016ee98f882c471f0a3373--sagemath-tobias.netlify.app/en\n+Example: https://62018055188ce050610e98a6--sagemath-tobias.netlify.app\n+Workflow runs: https://github.com/sagemath/sagetrac-mirror/actions/workflows/doc-build.yml\n+\n+\n Once this ticket is merged, I will add a badge pointing to the github workflow (similar to the linting badge), where one then can get the url for this particular deployment. Due to various open issues at netlify, it is sadly not possible right now to set the deployment url to the branch name.\n \n For the master branch it would be pushed to the 'production' website \n``````\n",
    "created_at": "2022-02-07T22:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507455",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,8 @@
 On each push to a branch in `sagemath/sagetrac-mirror`, it builds the HTML documentation and, if this succeeds, deploys it to netlify for easy inspection.
-Example: https://62016ee98f882c471f0a3373--sagemath-tobias.netlify.app/en
+Example: https://62018055188ce050610e98a6--sagemath-tobias.netlify.app
+Workflow runs: https://github.com/sagemath/sagetrac-mirror/actions/workflows/doc-build.yml
+
+
 Once this ticket is merged, I will add a badge pointing to the github workflow (similar to the linting badge), where one then can get the url for this particular deployment. Due to various open issues at netlify, it is sadly not possible right now to set the deployment url to the branch name.
 
 For the master branch it would be pushed to the 'production' website 
``````




---

archive/issue_comments_507456.json:
```json
{
    "body": "Changed commit from **[1728782](https://github.com/sagemath/sagetrac-mirror/commit/17287820443c64e1b24e462d8c446c9db8f21c62)** to **[81e7a2e](https://github.com/sagemath/sagetrac-mirror/commit/81e7a2ebec91b975ca779a8531ee54f1c64c51d5)**",
    "created_at": "2022-02-07T22:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507456",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1728782](https://github.com/sagemath/sagetrac-mirror/commit/17287820443c64e1b24e462d8c446c9db8f21c62)** to **[81e7a2e](https://github.com/sagemath/sagetrac-mirror/commit/81e7a2ebec91b975ca779a8531ee54f1c64c51d5)**



---

archive/issue_comments_507457.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81e7a2ebec91b975ca779a8531ee54f1c64c51d5\">81e7a2e</a></td><td><code>Fix workflow</code></td></tr></table>\n",
    "created_at": "2022-02-07T22:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507457",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:32'>Comment 32:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81e7a2ebec91b975ca779a8531ee54f1c64c51d5">81e7a2e</a></td><td><code>Fix workflow</code></td></tr></table>




---

archive/issue_comments_507458.json:
```json
{
    "body": "Author: **Tobias Diez**",
    "created_at": "2022-02-07T22:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507458",
    "user": "https://github.com/tobiasdiez"
}
```

Author: **Tobias Diez**



---

archive/issue_events_414826.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-02-07T22:16:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414826"
}
```



---

archive/issue_events_414827.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2022-02-07T22:16:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414827"
}
```



---

archive/issue_comments_507459.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,18 +3,18 @@\n Workflow runs: https://github.com/sagemath/sagetrac-mirror/actions/workflows/doc-build.yml\n \n \n-Once this ticket is merged, I will add a badge pointing to the github workflow (similar to the linting badge), where one then can get the url for this particular deployment. Due to various open issues at netlify, it is sadly not possible right now to set the deployment url to the branch name.\n+Once this ticket is merged, I will add a badge pointing to the github workflow (similar to the linting badge), where one then can get the url for this particular deployment. Due to various open issues at netlify, it is sadly not possible right now to set the deployment url to the branch name. So it's not possible to directly link to the deployed url as of now, but hopefully this will be available soon.\n \n For the master branch it would be pushed to the 'production' website \n https://sagemath-tobias.netlify.app/\n \n I've chosen netlify (say over github pages) mainly since it easily allows to push multiple versions of the same page under different urls (and does an intelligent diff so that the upload is smaller).\n \n-Related: https://github.com/sagemath/documentation/issues/24\n+Related: https://github.com/sagemath/documentation/issues/24 #33263 #33294\n \n Follow-up: \n-- Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account `sagemtah.netlify.org` is still available. Then just change the secrets in the github repo.\n+- Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account, `sagemtah.netlify.org` is still available. Then one just needs to change the secrets in the github repo.\n \n-- For pushes with tags (to master), publish it on the live docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).\n+- For pushes with tags (to master), publish it on docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).\n \n \n``````\n",
    "created_at": "2022-02-07T22:19:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507459",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,18 +3,18 @@
 Workflow runs: https://github.com/sagemath/sagetrac-mirror/actions/workflows/doc-build.yml
 
 
-Once this ticket is merged, I will add a badge pointing to the github workflow (similar to the linting badge), where one then can get the url for this particular deployment. Due to various open issues at netlify, it is sadly not possible right now to set the deployment url to the branch name.
+Once this ticket is merged, I will add a badge pointing to the github workflow (similar to the linting badge), where one then can get the url for this particular deployment. Due to various open issues at netlify, it is sadly not possible right now to set the deployment url to the branch name. So it's not possible to directly link to the deployed url as of now, but hopefully this will be available soon.
 
 For the master branch it would be pushed to the 'production' website 
 https://sagemath-tobias.netlify.app/
 
 I've chosen netlify (say over github pages) mainly since it easily allows to push multiple versions of the same page under different urls (and does an intelligent diff so that the upload is smaller).
 
-Related: https://github.com/sagemath/documentation/issues/24
+Related: https://github.com/sagemath/documentation/issues/24 #33263 #33294
 
 Follow-up: 
-- Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account `sagemtah.netlify.org` is still available. Then just change the secrets in the github repo.
+- Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account, `sagemtah.netlify.org` is still available. Then one just needs to change the secrets in the github repo.
 
-- For pushes with tags (to master), publish it on the live docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).
+- For pushes with tags (to master), publish it on docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).
 
 
``````




---

archive/issue_comments_507460.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,6 +15,8 @@\n Follow-up: \n - Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account, `sagemtah.netlify.org` is still available. Then one just needs to change the secrets in the github repo.\n \n+- Incorporate the post-fixes of https://github.com/sagemath/documentation into the main repo here, so that the preview looks the same as the published page.\n+\n - For pushes with tags (to master), publish it on docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).\n \n \n``````\n",
    "created_at": "2022-02-07T22:21:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507460",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,6 +15,8 @@
 Follow-up: 
 - Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account, `sagemtah.netlify.org` is still available. Then one just needs to change the secrets in the github repo.
 
+- Incorporate the post-fixes of https://github.com/sagemath/documentation into the main repo here, so that the preview looks the same as the published page.
+
 - For pushes with tags (to master), publish it on docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).
 
 
``````




---

archive/issue_comments_507461.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,7 +13,7 @@\n Related: https://github.com/sagemath/documentation/issues/24 #33263 #33294\n \n Follow-up: \n-- Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account, `sagemtah.netlify.org` is still available. Then one just needs to change the secrets in the github repo.\n+- Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account, `sagemath.netlify.org` is still available. Then one just needs to change the secrets in the github repo.\n \n - Incorporate the post-fixes of https://github.com/sagemath/documentation into the main repo here, so that the preview looks the same as the published page.\n \n``````\n",
    "created_at": "2022-02-07T22:29:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507461",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,7 +13,7 @@
 Related: https://github.com/sagemath/documentation/issues/24 #33263 #33294
 
 Follow-up: 
-- Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account, `sagemtah.netlify.org` is still available. Then one just needs to change the secrets in the github repo.
+- Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account, `sagemath.netlify.org` is still available. Then one just needs to change the secrets in the github repo.
 
 - Incorporate the post-fixes of https://github.com/sagemath/documentation into the main repo here, so that the preview looks the same as the published page.
 
``````




---

archive/issue_comments_507462.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nReplying to [@tobiasdiez](#comment%3A29):\n> since we awkwardly need to link to github through the badge. And as badges are workflow-specific this is the only way to make the distinction between \"tests failed\" and \"documentation didn't build\". \n\nOK, this certainly makes sense.",
    "created_at": "2022-02-07T22:55:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507462",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'>Comment 38:</a>
Replying to [@tobiasdiez](#comment%3A29):
> since we awkwardly need to link to github through the badge. And as badges are workflow-specific this is the only way to make the distinction between "tests failed" and "documentation didn't build". 

OK, this certainly makes sense.



---

archive/issue_comments_507463.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nReplying to [@tobiasdiez](#comment%3A27):\n> Why do you think so? If the secrets are not provided or missconfigured, then this workflow fails at this step, which I think is what you want.\n\nPeople who clone the repo do not want to see failing workflows",
    "created_at": "2022-02-07T22:56:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507463",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'>Comment 39:</a>
Replying to [@tobiasdiez](#comment%3A27):
> Why do you think so? If the secrets are not provided or missconfigured, then this workflow fails at this step, which I think is what you want.

People who clone the repo do not want to see failing workflows



---

archive/issue_comments_507464.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nReplying to [@mkoeppe](#comment%3A39):\n> Replying to [@tobiasdiez](#comment%3A27):\n> > Why do you think so? If the secrets are not provided or missconfigured, then this workflow fails at this step, which I think is what you want.\n\n> \n> People who clone the repo do not want to see failing workflows\n\nWorkflows are not run on forks by default, and you can disable a particular workflow in a fork. I think its more important that the workflow fails if it's not able to do what its supposed to do in the main repo.",
    "created_at": "2022-02-07T23:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507464",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:40'>Comment 40:</a>
Replying to [@mkoeppe](#comment%3A39):
> Replying to [@tobiasdiez](#comment%3A27):
> > Why do you think so? If the secrets are not provided or missconfigured, then this workflow fails at this step, which I think is what you want.

> 
> People who clone the repo do not want to see failing workflows

Workflows are not run on forks by default, and you can disable a particular workflow in a fork. I think its more important that the workflow fails if it's not able to do what its supposed to do in the main repo.



---

archive/issue_comments_507465.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nIt's clearly a bad default to have deployment run & fail if there is exactly one fork on which it is supposed to run.",
    "created_at": "2022-02-08T00:19:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507465",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'>Comment 41:</a>
It's clearly a bad default to have deployment run & fail if there is exactly one fork on which it is supposed to run.



---

archive/issue_comments_507466.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nI don't understand you. Deployment workflows should by design only work in the main repo and should be disabled on forks. This is the default on github. If someone enables actions for a fork, then it's this persons responsibility to configure the actions according to her preferences. It's not our responsibility to think about how forks handle actions. (I know that some sage devs have forks whose only purpose is to more easily run the actions; but in this case you can disable the documentation workflow very easily in the ui and be done with it or just ignore the failed run).\n\nThe alternative is checking for the existence of the secrets. But if the secrets are misconfigured in the main repo, then the workflow would still succeed although its clearly not doing what its supposed to do. I think a robust main workflow is more important than no red workflow runs on forks.",
    "created_at": "2022-02-08T11:32:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507466",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:42'>Comment 42:</a>
I don't understand you. Deployment workflows should by design only work in the main repo and should be disabled on forks. This is the default on github. If someone enables actions for a fork, then it's this persons responsibility to configure the actions according to her preferences. It's not our responsibility to think about how forks handle actions. (I know that some sage devs have forks whose only purpose is to more easily run the actions; but in this case you can disable the documentation workflow very easily in the ui and be done with it or just ignore the failed run).

The alternative is checking for the existence of the secrets. But if the secrets are misconfigured in the main repo, then the workflow would still succeed although its clearly not doing what its supposed to do. I think a robust main workflow is more important than no red workflow runs on forks.



---

archive/issue_comments_507467.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b11cd9b7f2e4677b01db834f1477a7779f02f0d\">3b11cd9</a></td><td><code>Deploy to production for develop branch not master</code></td></tr></table>\n",
    "created_at": "2022-02-08T16:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507467",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:43'>Comment 43:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b11cd9b7f2e4677b01db834f1477a7779f02f0d">3b11cd9</a></td><td><code>Deploy to production for develop branch not master</code></td></tr></table>




---

archive/issue_comments_507468.json:
```json
{
    "body": "Changed commit from **[81e7a2e](https://github.com/sagemath/sagetrac-mirror/commit/81e7a2ebec91b975ca779a8531ee54f1c64c51d5)** to **[3b11cd9](https://github.com/sagemath/sagetrac-mirror/commit/3b11cd9b7f2e4677b01db834f1477a7779f02f0d)**",
    "created_at": "2022-02-08T16:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507468",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[81e7a2e](https://github.com/sagemath/sagetrac-mirror/commit/81e7a2ebec91b975ca779a8531ee54f1c64c51d5)** to **[3b11cd9](https://github.com/sagemath/sagetrac-mirror/commit/3b11cd9b7f2e4677b01db834f1477a7779f02f0d)**



---

archive/issue_comments_507469.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n \n Once this ticket is merged, I will add a badge pointing to the github workflow (similar to the linting badge), where one then can get the url for this particular deployment. Due to various open issues at netlify, it is sadly not possible right now to set the deployment url to the branch name. So it's not possible to directly link to the deployed url as of now, but hopefully this will be available soon.\n \n-For the master branch it would be pushed to the 'production' website \n+For pushes to the develop branch it deploys the docs to the 'production' website \n https://sagemath-tobias.netlify.app/\n \n I've chosen netlify (say over github pages) mainly since it easily allows to push multiple versions of the same page under different urls (and does an intelligent diff so that the upload is smaller).\n@@ -17,6 +17,6 @@\n \n - Incorporate the post-fixes of https://github.com/sagemath/documentation into the main repo here, so that the preview looks the same as the published page.\n \n-- For pushes with tags (to master), publish it on docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).\n+- For pushes with tags (or to master), publish it on docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).\n \n \n``````\n",
    "created_at": "2022-02-08T16:37:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507469",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 
 Once this ticket is merged, I will add a badge pointing to the github workflow (similar to the linting badge), where one then can get the url for this particular deployment. Due to various open issues at netlify, it is sadly not possible right now to set the deployment url to the branch name. So it's not possible to directly link to the deployed url as of now, but hopefully this will be available soon.
 
-For the master branch it would be pushed to the 'production' website 
+For pushes to the develop branch it deploys the docs to the 'production' website 
 https://sagemath-tobias.netlify.app/
 
 I've chosen netlify (say over github pages) mainly since it easily allows to push multiple versions of the same page under different urls (and does an intelligent diff so that the upload is smaller).
@@ -17,6 +17,6 @@
 
 - Incorporate the post-fixes of https://github.com/sagemath/documentation into the main repo here, so that the preview looks the same as the published page.
 
-- For pushes with tags (to master), publish it on docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).
+- For pushes with tags (or to master), publish it on docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).
 
 
``````




---

archive/issue_comments_507470.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nReplying to [@tobiasdiez](#comment%3A42):\n> Deployment workflows should by design only work in the main repo and should be disabled on forks. \n\nExactly -- and this can be implemented by not running it when no deployment secrets are deposited.",
    "created_at": "2022-02-08T20:52:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507470",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'>Comment 45:</a>
Replying to [@tobiasdiez](#comment%3A42):
> Deployment workflows should by design only work in the main repo and should be disabled on forks. 

Exactly -- and this can be implemented by not running it when no deployment secrets are deposited.



---

archive/issue_comments_507471.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nReplying to [@tobiasdiez](#comment%3A42):\n> It's not our responsibility to think about how forks handle actions.\n\nYes it is because we document creating forks & running actions as part of portability work.",
    "created_at": "2022-02-08T20:53:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507471",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'>Comment 46:</a>
Replying to [@tobiasdiez](#comment%3A42):
> It's not our responsibility to think about how forks handle actions.

Yes it is because we document creating forks & running actions as part of portability work.



---

archive/issue_comments_507472.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nReplying to [@tobiasdiez](#comment%3A42):\n> if the secrets are misconfigured in the main repo, then the workflow would still succeed although its clearly not doing what its supposed to do. \n\nYou can still make it an error if bad secrets are deposited. \n\nBut please no error if no secrets are present.",
    "created_at": "2022-02-08T20:53:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507472",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'>Comment 47:</a>
Replying to [@tobiasdiez](#comment%3A42):
> if the secrets are misconfigured in the main repo, then the workflow would still succeed although its clearly not doing what its supposed to do. 

You can still make it an error if bad secrets are deposited. 

But please no error if no secrets are present.



---

archive/issue_comments_507473.json:
```json
{
    "body": "Changed commit from **[3b11cd9](https://github.com/sagemath/sagetrac-mirror/commit/3b11cd9b7f2e4677b01db834f1477a7779f02f0d)** to **[2c97b7c](https://github.com/sagemath/sagetrac-mirror/commit/2c97b7cca224932d58920f0958cf2a829e556cb2)**",
    "created_at": "2022-02-08T23:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507473",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3b11cd9](https://github.com/sagemath/sagetrac-mirror/commit/3b11cd9b7f2e4677b01db834f1477a7779f02f0d)** to **[2c97b7c](https://github.com/sagemath/sagetrac-mirror/commit/2c97b7cca224932d58920f0958cf2a829e556cb2)**



---

archive/issue_comments_507474.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c97b7cca224932d58920f0958cf2a829e556cb2\">2c97b7c</a></td><td><code>Only run in sagetrac-mirror repo</code></td></tr></table>\n",
    "created_at": "2022-02-08T23:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507474",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:48'>Comment 48:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c97b7cca224932d58920f0958cf2a829e556cb2">2c97b7c</a></td><td><code>Only run in sagetrac-mirror repo</code></td></tr></table>




---

archive/issue_comments_507475.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nReplying to [@mkoeppe](#comment%3A45):\n> Replying to [@tobiasdiez](#comment%3A42):\n> > Deployment workflows should by design only work in the main repo and should be disabled on forks. \n\n> \n> Exactly -- and this can be implemented by not running it when no deployment secrets are deposited.\n\nNow it runs only in the sagemath/sagetrac-mirror repo. Is this what you wanted?",
    "created_at": "2022-02-08T23:29:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507475",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:49'>Comment 49:</a>
Replying to [@mkoeppe](#comment%3A45):
> Replying to [@tobiasdiez](#comment%3A42):
> > Deployment workflows should by design only work in the main repo and should be disabled on forks. 

> 
> Exactly -- and this can be implemented by not running it when no deployment secrets are deposited.

Now it runs only in the sagemath/sagetrac-mirror repo. Is this what you wanted?



---

archive/issue_comments_507476.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nThat's a good solution, thanks",
    "created_at": "2022-02-08T23:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507476",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:50'>Comment 50:</a>
That's a good solution, thanks



---

archive/issue_comments_507477.json:
```json
{
    "body": "<a id='comment:51'>Comment 51:</a>\nOkay, anything else to do here?",
    "created_at": "2022-02-09T08:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507477",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:51'>Comment 51:</a>
Okay, anything else to do here?



---

archive/issue_comments_507478.json:
```json
{
    "body": "<a id='comment:52'>Comment 52:</a>\nI don't understand the discussion of the `preview-netlify` stuff, maybe you could expand on this in ticket description or comments in the yml?\n\nCould this not just deploy to a directory name that depends on the `ref_name`?",
    "created_at": "2022-02-09T18:04:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507478",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:52'>Comment 52:</a>
I don't understand the discussion of the `preview-netlify` stuff, maybe you could expand on this in ticket description or comments in the yml?

Could this not just deploy to a directory name that depends on the `ref_name`?



---

archive/issue_comments_507479.json:
```json
{
    "body": "<a id='comment:53'>Comment 53:</a>\nWhat I wanted to achieve is to deploy the branch `xyz` to `xyz-sagemath.netlify.app`. For this, you normally use their branch-deployment github integration, which would automatically rebuild the site for every change in the branch and deploys it to the correct url. However, this doesn't work for us since building the documentation is too involved, as sage has to be built first etc. Alternatively, there is an `--alias` switch to their `deploy` command which almost does the same thing. However, there is currently a bug which prevents that further deployments with the same alias update the deployed site. So you would always see the initial deployment of the branch.\n\nAs long as this bug is not fixed the workflow will look as follows:\n- Click on the \"Documentation\" badge in the trac ticket, which opens the github workflow page\n- Copy the preview url from the overview.\n\nOnce this bug is fixed, we can directly link the \"Documentation\" badge to the preview url (which is then derived from the branch name). Or we just switch to a github-based workflow, where the action can simply post a message to the PR or add it as a status check.",
    "created_at": "2022-02-09T18:44:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507479",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:53'>Comment 53:</a>
What I wanted to achieve is to deploy the branch `xyz` to `xyz-sagemath.netlify.app`. For this, you normally use their branch-deployment github integration, which would automatically rebuild the site for every change in the branch and deploys it to the correct url. However, this doesn't work for us since building the documentation is too involved, as sage has to be built first etc. Alternatively, there is an `--alias` switch to their `deploy` command which almost does the same thing. However, there is currently a bug which prevents that further deployments with the same alias update the deployed site. So you would always see the initial deployment of the branch.

As long as this bug is not fixed the workflow will look as follows:
- Click on the "Documentation" badge in the trac ticket, which opens the github workflow page
- Copy the preview url from the overview.

Once this bug is fixed, we can directly link the "Documentation" badge to the preview url (which is then derived from the branch name). Or we just switch to a github-based workflow, where the action can simply post a message to the PR or add it as a status check.



---

archive/issue_comments_507480.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\nReplying to [@mkoeppe](#comment%3A52):\n> Could this not just deploy to a directory name that depends on the `ref_name`?\n\nThe only stable url we have is the \"production\" webpage. And each deploy to this overrides the complete page. So it's not possible to only update one directory in the deployed page.",
    "created_at": "2022-02-09T18:45:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507480",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:54'>Comment 54:</a>
Replying to [@mkoeppe](#comment%3A52):
> Could this not just deploy to a directory name that depends on the `ref_name`?

The only stable url we have is the "production" webpage. And each deploy to this overrides the complete page. So it's not possible to only update one directory in the deployed page.



---

archive/issue_comments_507481.json:
```json
{
    "body": "<a id='comment:55'>Comment 55:</a>\nReplying to [@tobiasdiez](#comment%3A53):\n> there is currently a bug which prevents that further deployments with the same alias update the deployed site. So you would always see the initial deployment of the branch.\n\nThen why not just use the commit sha as the key instead of the branch name?",
    "created_at": "2022-02-09T18:49:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507481",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'>Comment 55:</a>
Replying to [@tobiasdiez](#comment%3A53):
> there is currently a bug which prevents that further deployments with the same alias update the deployed site. So you would always see the initial deployment of the branch.

Then why not just use the commit sha as the key instead of the branch name?



---

archive/issue_comments_507482.json:
```json
{
    "body": "<a id='comment:56'>Comment 56:</a>\nThat's a good idea and should work. Is the commit sha easily available on the trac side? The relevant part should be https://github.com/sagemath/sage_trac_plugin/blob/1d644a16ea89f9ed8232c92de6302d0622ec466d/sage_trac/ticket_box.py#L151-L158.",
    "created_at": "2022-02-09T20:10:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507482",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:56'>Comment 56:</a>
That's a good idea and should work. Is the commit sha easily available on the trac side? The relevant part should be https://github.com/sagemath/sage_trac_plugin/blob/1d644a16ea89f9ed8232c92de6302d0622ec466d/sage_trac/ticket_box.py#L151-L158.



---

archive/issue_comments_507483.json:
```json
{
    "body": "<a id='comment:57'>Comment 57:</a>\nIt's displayed in the ticket box",
    "created_at": "2022-02-09T20:19:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507483",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:57'>Comment 57:</a>
It's displayed in the ticket box



---

archive/issue_comments_507484.json:
```json
{
    "body": "<a id='comment:58'>Comment 58:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff8f6d2473d787a765ff324a26ebf955ca644b73\">ff8f6d2</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/doc_build_ci</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31665def57b107136a67bd3708f1c2e641cdf2de\">31665de</a></td><td><code>Use commit sha for url</code></td></tr></table>\n",
    "created_at": "2022-02-10T13:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507484",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:58'>Comment 58:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff8f6d2473d787a765ff324a26ebf955ca644b73">ff8f6d2</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/doc_build_ci</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31665def57b107136a67bd3708f1c2e641cdf2de">31665de</a></td><td><code>Use commit sha for url</code></td></tr></table>




---

archive/issue_comments_507485.json:
```json
{
    "body": "Changed commit from **[2c97b7c](https://github.com/sagemath/sagetrac-mirror/commit/2c97b7cca224932d58920f0958cf2a829e556cb2)** to **[31665de](https://github.com/sagemath/sagetrac-mirror/commit/31665def57b107136a67bd3708f1c2e641cdf2de)**",
    "created_at": "2022-02-10T13:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507485",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2c97b7c](https://github.com/sagemath/sagetrac-mirror/commit/2c97b7cca224932d58920f0958cf2a829e556cb2)** to **[31665de](https://github.com/sagemath/sagetrac-mirror/commit/31665def57b107136a67bd3708f1c2e641cdf2de)**



---

archive/issue_comments_507486.json:
```json
{
    "body": "<a id='comment:59'>Comment 59:</a>\nOkay, it is now using the commit sha. Thanks for the suggestion.",
    "created_at": "2022-02-10T13:28:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507486",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:59'>Comment 59:</a>
Okay, it is now using the commit sha. Thanks for the suggestion.



---

archive/issue_comments_507487.json:
```json
{
    "body": "<a id='comment:60'>Comment 60:</a>\nCan you update the ticket description please?",
    "created_at": "2022-02-10T18:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507487",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:60'>Comment 60:</a>
Can you update the ticket description please?



---

archive/issue_comments_507488.json:
```json
{
    "body": "<a id='comment:61'>Comment 61:</a>\nI don't think the ticket and the comments in the yml file need to apologize for not using the branch name. Branch names are not very important in Sage - all branches are short-lived ticket branches.",
    "created_at": "2022-02-10T18:11:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507488",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:61'>Comment 61:</a>
I don't think the ticket and the comments in the yml file need to apologize for not using the branch name. Branch names are not very important in Sage - all branches are short-lived ticket branches.



---

archive/issue_comments_507489.json:
```json
{
    "body": "Replying to [ticket:31415 mkoeppe]:\n> - For pushes with tags (or to master), publish it on docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).\n\nHow about adding another `alias` for the tag name?",
    "created_at": "2022-02-10T18:13:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507489",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [ticket:31415 mkoeppe]:
> - For pushes with tags (or to master), publish it on docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).

How about adding another `alias` for the tag name?



---

archive/issue_comments_507490.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n Workflow runs: https://github.com/sagemath/sagetrac-mirror/actions/workflows/doc-build.yml\n \n \n-Once this ticket is merged, I will add a badge pointing to the github workflow (similar to the linting badge), where one then can get the url for this particular deployment. Due to various open issues at netlify, it is sadly not possible right now to set the deployment url to the branch name. So it's not possible to directly link to the deployed url as of now, but hopefully this will be available soon.\n+Once this ticket is merged, I will add a badge pointing to the github workflow (similar to the linting badge), where one then can get the url for this particular deployment. Due to various open issues at netlify, it is sadly not possible right now to set the deployment url to the branch name so we use the commit hash for this.\n \n For pushes to the develop branch it deploys the docs to the 'production' website \n https://sagemath-tobias.netlify.app/\n``````\n",
    "created_at": "2022-02-10T19:16:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507490",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 Workflow runs: https://github.com/sagemath/sagetrac-mirror/actions/workflows/doc-build.yml
 
 
-Once this ticket is merged, I will add a badge pointing to the github workflow (similar to the linting badge), where one then can get the url for this particular deployment. Due to various open issues at netlify, it is sadly not possible right now to set the deployment url to the branch name. So it's not possible to directly link to the deployed url as of now, but hopefully this will be available soon.
+Once this ticket is merged, I will add a badge pointing to the github workflow (similar to the linting badge), where one then can get the url for this particular deployment. Due to various open issues at netlify, it is sadly not possible right now to set the deployment url to the branch name so we use the commit hash for this.
 
 For pushes to the develop branch it deploys the docs to the 'production' website 
 https://sagemath-tobias.netlify.app/
``````




---

archive/issue_comments_507491.json:
```json
{
    "body": "<a id='comment:64'>Comment 64:</a>\nReplying to [@mkoeppe](#comment%3A60):\n> Can you update the ticket description please?\n\nDone.",
    "created_at": "2022-02-10T19:17:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507491",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:64'>Comment 64:</a>
Replying to [@mkoeppe](#comment%3A60):
> Can you update the ticket description please?

Done.



---

archive/issue_comments_507492.json:
```json
{
    "body": "<a id='comment:65'>Comment 65:</a>\nReplying to [@mkoeppe](#comment%3A61):\n> I don't think the ticket and the comments in the yml file need to apologize for not using the branch name. Branch names are not very important in Sage - all branches are short-lived ticket branches.\n\nIt's the same spirit in netlify. It would be just nicer to have branch-based urls, since then you can easily refer to the latest version of the documentation of a ticket (e.g. if you share it with others). Netlify in addition would create a unique url for each deployment, so if you want to refer to a particular deploy this would still possible.",
    "created_at": "2022-02-10T19:21:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507492",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:65'>Comment 65:</a>
Replying to [@mkoeppe](#comment%3A61):
> I don't think the ticket and the comments in the yml file need to apologize for not using the branch name. Branch names are not very important in Sage - all branches are short-lived ticket branches.

It's the same spirit in netlify. It would be just nicer to have branch-based urls, since then you can easily refer to the latest version of the documentation of a ticket (e.g. if you share it with others). Netlify in addition would create a unique url for each deployment, so if you want to refer to a particular deploy this would still possible.



---

archive/issue_comments_507493.json:
```json
{
    "body": "<a id='comment:66'>Comment 66:</a>\nEven if fixed, it would make more sense for us to have URLs keyed to ticket numbers, not branch names",
    "created_at": "2022-02-10T19:23:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507493",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:66'>Comment 66:</a>
Even if fixed, it would make more sense for us to have URLs keyed to ticket numbers, not branch names



---

archive/issue_comments_507494.json:
```json
{
    "body": "<a id='comment:67'>Comment 67:</a>\nReplying to [@mkoeppe](#comment%3A62):\n> Replying to [ticket:31415 mkoeppe]:\n> > - For pushes with tags (or to master), publish it on docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).\n\n> \n> How about adding another `alias` for the tag name?\n\nI would prefer to keep this ticket for documentation previews for tickets; lets leave the CD of the main docs for another ticket.",
    "created_at": "2022-02-10T19:23:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507494",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:67'>Comment 67:</a>
Replying to [@mkoeppe](#comment%3A62):
> Replying to [ticket:31415 mkoeppe]:
> > - For pushes with tags (or to master), publish it on docs.sagemath.org website (for example using https://github.com/marketplace/actions/deploy-to-github-pages or by completely migrating to netlify).

> 
> How about adding another `alias` for the tag name?

I would prefer to keep this ticket for documentation previews for tickets; lets leave the CD of the main docs for another ticket.



---

archive/issue_comments_507495.json:
```json
{
    "body": "<a id='comment:68'>Comment 68:</a>\nReplying to [@mkoeppe](#comment%3A66):\n> Even if fixed, it would make more sense for us to have URLs keyed to ticket numbers, not branch names\n\nAgreed.",
    "created_at": "2022-02-10T19:24:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507495",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:68'>Comment 68:</a>
Replying to [@mkoeppe](#comment%3A66):
> Even if fixed, it would make more sense for us to have URLs keyed to ticket numbers, not branch names

Agreed.



---

archive/issue_events_414828.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-10T20:01:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414828"
}
```



---

archive/issue_events_414829.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-10T20:01:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414829"
}
```



---

archive/issue_comments_507496.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2022-02-10T20:01:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507496",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_comments_507497.json:
```json
{
    "body": "<a id='comment:69'>Comment 69:</a>\nOK",
    "created_at": "2022-02-10T20:01:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507497",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:69'>Comment 69:</a>
OK



---

archive/issue_comments_507498.json:
```json
{
    "body": "<a id='comment:70'>Comment 70:</a>\nThanks!",
    "created_at": "2022-02-10T20:01:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507498",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:70'>Comment 70:</a>
Thanks!



---

archive/issue_events_414830.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-11T19:50:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414830"
}
```



---

archive/issue_events_414831.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-11T19:50:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414831"
}
```



---

archive/issue_comments_507499.json:
```json
{
    "body": "Changed branch from **[public/build/doc_build_ci](https://github.com/sagemath/sagetrac-mirror/tree/public/build/doc_build_ci)** to **[31665de](https://github.com/sagemath/sagetrac-mirror/commit/31665def57b107136a67bd3708f1c2e641cdf2de)**",
    "created_at": "2022-02-13T10:17:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507499",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/build/doc_build_ci](https://github.com/sagemath/sagetrac-mirror/tree/public/build/doc_build_ci)** to **[31665de](https://github.com/sagemath/sagetrac-mirror/commit/31665def57b107136a67bd3708f1c2e641cdf2de)**



---

archive/issue_events_414832.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-13T10:17:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414832"
}
```



---

archive/issue_events_414833.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c4e4a6387f2db1e6a9eb81d933582e978ac45630",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-02-13T10:17:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31415#event-414833"
}
```



---

archive/issue_comments_507500.json:
```json
{
    "body": "Changed commit from **[31665de](https://github.com/sagemath/sagetrac-mirror/commit/31665def57b107136a67bd3708f1c2e641cdf2de)** to none",
    "created_at": "2022-02-13T16:21:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507500",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[31665de](https://github.com/sagemath/sagetrac-mirror/commit/31665def57b107136a67bd3708f1c2e641cdf2de)** to none



---

archive/issue_comments_507501.json:
```json
{
    "body": "Replying to [ticket:31415 mkoeppe]:\n> - Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account, `sagemath.netlify.org` is still available. Then one just needs to change the secrets in the github repo.\n\nTicket is merged now - should provide the secrets now",
    "created_at": "2022-02-13T16:21:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507501",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [ticket:31415 mkoeppe]:
> - Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account, `sagemath.netlify.org` is still available. Then one just needs to change the secrets in the github repo.

Ticket is merged now - should provide the secrets now



---

archive/issue_comments_507502.json:
```json
{
    "body": "<a id='comment:74'>Comment 74:</a>\nReplying to [@mkoeppe](#comment%3A73):\n> Replying to [ticket:31415 mkoeppe]:\n> > - Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account, `sagemath.netlify.org` is still available. Then one just needs to change the secrets in the github repo.\n\n> \n> Ticket is merged now - should provide the secrets now\n\nSecrets are in place already, it just uses `branchxyz--sagemath-tobias.netlify.org`. This can stay for now (from my side). Depending on where and how you want to host the documentation in the future, it might make sense to completely migrate to netlify and register the `docs.sagemath.org` domain there, probably with a new netlify account. Netlify also has a free open source plan that should suffice for sage. https://www.netlify.com/legal/open-source-policy",
    "created_at": "2022-02-13T17:07:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507502",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:74'>Comment 74:</a>
Replying to [@mkoeppe](#comment%3A73):
> Replying to [ticket:31415 mkoeppe]:
> > - Change the deployment url to something more official. For this reason, I've created the site `sagemath-tobias.netlify.org`, so if you want to create an official sage account, `sagemath.netlify.org` is still available. Then one just needs to change the secrets in the github repo.

> 
> Ticket is merged now - should provide the secrets now

Secrets are in place already, it just uses `branchxyz--sagemath-tobias.netlify.org`. This can stay for now (from my side). Depending on where and how you want to host the documentation in the future, it might make sense to completely migrate to netlify and register the `docs.sagemath.org` domain there, probably with a new netlify account. Netlify also has a free open source plan that should suffice for sage. https://www.netlify.com/legal/open-source-policy



---

archive/issue_comments_507503.json:
```json
{
    "body": "<a id='comment:75'>Comment 75:</a>\nAh, thanks, I guess that's good enough for now.",
    "created_at": "2022-02-13T17:24:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507503",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:75'>Comment 75:</a>
Ah, thanks, I guess that's good enough for now.



---

archive/issue_comments_507504.json:
```json
{
    "body": "<a id='comment:76'>Comment 76:</a>\nI see that you have added the badge now to the ticket box. When the docbuild fails and nothing is deployed, would it be possible to link to the Actions run instead of the failed deployment - https://2ed27f1014ad0db190c370210e54b99b9ea8a3e1--sagemath-tobias.netlify.app/ ?",
    "created_at": "2022-02-13T19:59:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507504",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:76'>Comment 76:</a>
I see that you have added the badge now to the ticket box. When the docbuild fails and nothing is deployed, would it be possible to link to the Actions run instead of the failed deployment - https://2ed27f1014ad0db190c370210e54b99b9ea8a3e1--sagemath-tobias.netlify.app/ ?



---

archive/issue_comments_507505.json:
```json
{
    "body": "<a id='comment:77'>Comment 77:</a>\nNot easily. One could use the github api to query the workflow status and then decide about which link to use...",
    "created_at": "2022-02-13T21:02:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507505",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:77'>Comment 77:</a>
Not easily. One could use the github api to query the workflow status and then decide about which link to use...



---

archive/issue_comments_507506.json:
```json
{
    "body": "<a id='comment:78'>Comment 78:</a>\nthen maybe just add a second link for the docbuild logs?",
    "created_at": "2022-02-13T21:24:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31415#issuecomment-507506",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:78'>Comment 78:</a>
then maybe just add a second link for the docbuild logs?
