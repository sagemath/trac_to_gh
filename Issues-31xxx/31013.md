# Issue 31013: Remove unused class from sage_setup.optional extension

archive/issues_030776.json:
```json
{
    "assignees": [],
    "body": "The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). \nThe only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package`.\n\nRelated: #28815\n\nCC:  @mkoeppe @kiwifb\n\nKeywords: **sd111**\n\nBranch/Commit: **[a7b1e81](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)**\n\nReviewer: **Fran\u00e7ois Bissey**\n\nAuthor: **Tobias Diez**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31013_\n\n",
    "closed_at": "2022-01-31T23:31:41Z",
    "created_at": "2020-12-05T18:36:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Remove unused class from sage_setup.optional extension",
    "type": "issue",
    "updated_at": "2022-01-31T23:31:41Z",
    "url": "https://github.com/sagemath/sage/issues/31013",
    "user": "https://github.com/tobiasdiez"
}
```
The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). 
The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package`.

Related: #28815

CC:  @mkoeppe @kiwifb

Keywords: **sd111**

Branch/Commit: **[a7b1e81](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)**

Reviewer: **Fran√ßois Bissey**

Author: **Tobias Diez**

_Issue created by migration from https://trac.sagemath.org/ticket/31013_





---

archive/issue_events_409427.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T18:36:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409427"
}
```



---

archive/issue_events_409428.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T18:36:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409428"
}
```



---

archive/issue_events_409429.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T18:36:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409429"
}
```



---

archive/issue_events_409430.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T18:36:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409430"
}
```



---

archive/issue_events_409431.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T18:36:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409431"
}
```



---

archive/issue_comments_499993.json:
```json
{
    "body": "Changed commit from **[508075c](https://github.com/sagemath/sagetrac-mirror/commit/508075cb9f6558c267c546f2fdff6cd1dac0cf83)** to **[2492f1e](https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c)**",
    "created_at": "2020-12-05T18:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499993",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[508075c](https://github.com/sagemath/sagetrac-mirror/commit/508075cb9f6558c267c546f2fdff6cd1dac0cf83)** to **[2492f1e](https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c)**



---

archive/issue_comments_499994.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c\">2492f1e</a></td><td><code>Code cleanup</code></td></tr></table>\n",
    "created_at": "2020-12-05T18:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499994",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:2'>Comment 2:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c">2492f1e</a></td><td><code>Code cleanup</code></td></tr></table>




---

archive/issue_comments_499995.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). \n The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package` (where also a bit of typing info is added).\n+\n+Related: #28815\n``````\n",
    "created_at": "2020-12-05T18:38:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499995",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). 
 The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package` (where also a bit of typing info is added).
+
+Related: #28815
``````




---

archive/issue_comments_499996.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nCan't make incompatible changes to the interface of a public function",
    "created_at": "2020-12-05T18:39:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499996",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'>Comment 4:</a>
Can't make incompatible changes to the interface of a public function



---

archive/issue_comments_499997.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\n(I'm referring to the `list_packages` function)",
    "created_at": "2020-12-05T18:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499997",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'>Comment 5:</a>
(I'm referring to the `list_packages` function)



---

archive/issue_comments_499998.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nIt's also conflicting with the changes in #30940 (which needs review)",
    "created_at": "2020-12-05T18:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499998",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'>Comment 6:</a>
It's also conflicting with the changes in #30940 (which needs review)



---

archive/issue_comments_499999.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09\">649ffff</a></td><td><code>Fix build</code></td></tr></table>\n",
    "created_at": "2020-12-05T18:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499999",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09">649ffff</a></td><td><code>Fix build</code></td></tr></table>




---

archive/issue_comments_500000.json:
```json
{
    "body": "Changed commit from **[2492f1e](https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c)** to **[649ffff](https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09)**",
    "created_at": "2020-12-05T18:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500000",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2492f1e](https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c)** to **[649ffff](https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09)**



---

archive/issue_comments_500001.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nReplying to [@mkoeppe](#comment%3A4):\n> Can't make incompatible changes to the interface of a public function\n\nSo one cannot change public facing functions at all? What is the policy/strategy for this? Introduce a new method, say `list_packages_typed`?\n\n> It's also conflicting with the changes in #30940 (which needs review)\n\nI wouldn't say it's conflicting, just results in easy-to-resolve merge conflicts.",
    "created_at": "2020-12-05T19:20:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500001",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:8'>Comment 8:</a>
Replying to [@mkoeppe](#comment%3A4):
> Can't make incompatible changes to the interface of a public function

So one cannot change public facing functions at all? What is the policy/strategy for this? Introduce a new method, say `list_packages_typed`?

> It's also conflicting with the changes in #30940 (which needs review)

I wouldn't say it's conflicting, just results in easy-to-resolve merge conflicts.



---

archive/issue_comments_500002.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nReplying to [@tobiasdiez](#comment%3A8):\n> Replying to [@mkoeppe](#comment%3A4):\n> > Can't make incompatible changes to the interface of a public function\n\n> \n> So one cannot change public facing functions at all? What is the policy/strategy for this? Introduce a new method, say `list_packages_typed`?\n\nIt could be a new function (with deprecation for the old one), or an optional argument that controls the return type, ...\n\nBut in this particular case, it would probably be good enough to just give the new class dictionary-like behavior so that user code can continue to access the slots like a dictionary. Possibly with deprecation warning.",
    "created_at": "2020-12-05T19:33:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500002",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'>Comment 9:</a>
Replying to [@tobiasdiez](#comment%3A8):
> Replying to [@mkoeppe](#comment%3A4):
> > Can't make incompatible changes to the interface of a public function

> 
> So one cannot change public facing functions at all? What is the policy/strategy for this? Introduce a new method, say `list_packages_typed`?

It could be a new function (with deprecation for the old one), or an optional argument that controls the return type, ...

But in this particular case, it would probably be good enough to just give the new class dictionary-like behavior so that user code can continue to access the slots like a dictionary. Possibly with deprecation warning.



---

archive/issue_comments_500003.json:
```json
{
    "body": "Changed commit from **[649ffff](https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09)** to **[26b59ad](https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4)**",
    "created_at": "2020-12-05T20:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500003",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[649ffff](https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09)** to **[26b59ad](https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4)**



---

archive/issue_comments_500004.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4\">26b59ad</a></td><td><code>Implement __getitem__</code></td></tr></table>\n",
    "created_at": "2020-12-05T20:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500004",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'>Comment 10:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4">26b59ad</a></td><td><code>Implement __getitem__</code></td></tr></table>




---

archive/issue_comments_500005.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nReplying to [@mkoeppe](#comment%3A9):\n> But in this particular case, it would probably be good enough to just give the new class dictionary-like behavior so that user code can continue to access the slots like a dictionary. Possibly with deprecation warning.\n> \n\nThat's a nice idea, implemented!",
    "created_at": "2020-12-05T20:16:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500005",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:11'>Comment 11:</a>
Replying to [@mkoeppe](#comment%3A9):
> But in this particular case, it would probably be good enough to just give the new class dictionary-like behavior so that user code can continue to access the slots like a dictionary. Possibly with deprecation warning.
> 

That's a nice idea, implemented!



---

archive/issue_comments_500006.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nInstead of \"string-based access\", perhaps this should be called \"dict-like access\" in the deprecation messages?",
    "created_at": "2020-12-05T20:44:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500006",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'>Comment 12:</a>
Instead of "string-based access", perhaps this should be called "dict-like access" in the deprecation messages?



---

archive/issue_comments_500007.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nI think in this change you need to use `is_installed()` instead\n\n```\n--- a/src/bin/sage-list-packages\n+++ b/src/bin/sage-list-packages\n@@ -91,16 +91,16 @@ else:\n if WARN:\n     print(WARN)\n if args['installed_only']:\n-    L = [pkg for pkg in L if pkg['installed']]\n+    L = [pkg for pkg in L if pkg.installed]\n elif args['not_installed_only']:\n-    L = [pkg for pkg in L if not pkg['installed']]\n+    L = [pkg for pkg in L if not pkg.installed]\n```",
    "created_at": "2020-12-06T00:20:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500007",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'>Comment 13:</a>
I think in this change you need to use `is_installed()` instead

```
--- a/src/bin/sage-list-packages
+++ b/src/bin/sage-list-packages
@@ -91,16 +91,16 @@ else:
 if WARN:
     print(WARN)
 if args['installed_only']:
-    L = [pkg for pkg in L if pkg['installed']]
+    L = [pkg for pkg in L if pkg.installed]
 elif args['not_installed_only']:
-    L = [pkg for pkg in L if not pkg['installed']]
+    L = [pkg for pkg in L if not pkg.installed]
```



---

archive/issue_events_409432.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-06T00:20:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409432"
}
```



---

archive/issue_events_409433.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-06T00:20:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409433"
}
```



---

archive/issue_events_409434.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-06T00:20:38Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "title_is": "Remove unused optional extension, improve interface of list_packages",
    "title_was": "Remove unused optional extension",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409434"
}
```



---

archive/issue_comments_500008.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nHoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500008",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'>Comment 16:</a>
Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_500009.json:
```json
{
    "body": "Changed keywords from **** to **sd111**",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500009",
    "user": "https://github.com/mkoeppe"
}
```

Changed keywords from **** to **sd111**



---

archive/issue_comments_500010.json:
```json
{
    "body": "Changed commit from **[26b59ad](https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4)** to **[0c10be0](https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a)**",
    "created_at": "2020-12-06T22:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500010",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[26b59ad](https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4)** to **[0c10be0](https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a)**



---

archive/issue_comments_500011.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a\">0c10be0</a></td><td><code>Fix build</code></td></tr></table>\n",
    "created_at": "2020-12-06T22:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500011",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>Comment 17:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a">0c10be0</a></td><td><code>Fix build</code></td></tr></table>




---

archive/issue_comments_500012.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nReplying to [@mkoeppe](#comment%3A13):\n> I think in this change you need to use `is_installed()` instead\n\nIndeed, thanks!",
    "created_at": "2020-12-06T22:25:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500012",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:18'>Comment 18:</a>
Replying to [@mkoeppe](#comment%3A13):
> I think in this change you need to use `is_installed()` instead

Indeed, thanks!



---

archive/issue_events_409435.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-06T22:25:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409435"
}
```



---

archive/issue_events_409436.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-06T22:25:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409436"
}
```



---

archive/issue_comments_500013.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nReplying to [@mkoeppe](#comment%3A16):\n> Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111\n\nI try to join, but I'm on vacation this week...",
    "created_at": "2020-12-06T22:25:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500013",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:19'>Comment 19:</a>
Replying to [@mkoeppe](#comment%3A16):
> Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111

I try to join, but I'm on vacation this week...



---

archive/issue_comments_500014.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nNeeds rebase on latest beta",
    "created_at": "2020-12-07T00:15:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500014",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'>Comment 20:</a>
Needs rebase on latest beta



---

archive/issue_events_409437.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-07T00:15:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409437"
}
```



---

archive/issue_events_409438.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-07T00:15:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409438"
}
```



---

archive/issue_comments_500015.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/008bfd2a74eb9e7e5eef165f4ad4b1a351af9122\">008bfd2</a></td><td><code>Merge branch 'u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available' of git://trac.sagemath.org/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd2269b6c4881cac87a683afe2e32cdea42016e7\">bd2269b</a></td><td><code>Finish merge</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa\">0213e20</a></td><td><code>Finish interface cleanup</code></td></tr></table>\n",
    "created_at": "2020-12-07T13:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500015",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>Comment 21:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/008bfd2a74eb9e7e5eef165f4ad4b1a351af9122">008bfd2</a></td><td><code>Merge branch 'u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available' of git://trac.sagemath.org/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd2269b6c4881cac87a683afe2e32cdea42016e7">bd2269b</a></td><td><code>Finish merge</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa">0213e20</a></td><td><code>Finish interface cleanup</code></td></tr></table>




---

archive/issue_comments_500016.json:
```json
{
    "body": "Changed commit from **[0c10be0](https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a)** to **[0213e20](https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa)**",
    "created_at": "2020-12-07T13:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500016",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0c10be0](https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a)** to **[0213e20](https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa)**



---

archive/issue_comments_500017.json:
```json
{
    "body": "Changed commit from **[0213e20](https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa)** to **[95ff8c1](https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee)**",
    "created_at": "2020-12-07T13:13:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500017",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0213e20](https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa)** to **[95ff8c1](https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee)**



---

archive/issue_comments_500018.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee\">95ff8c1</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr></table>\n",
    "created_at": "2020-12-07T13:13:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500018",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'>Comment 22:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee">95ff8c1</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr></table>




---

archive/issue_comments_500019.json:
```json
{
    "body": "Changed commit from **[95ff8c1](https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee)** to **[1d72cc6](https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3)**",
    "created_at": "2020-12-07T13:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500019",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[95ff8c1](https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee)** to **[1d72cc6](https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3)**



---

archive/issue_comments_500020.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3\">1d72cc6</a></td><td><code>Fix symlinks</code></td></tr></table>\n",
    "created_at": "2020-12-07T13:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500020",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:23'>Comment 23:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3">1d72cc6</a></td><td><code>Fix symlinks</code></td></tr></table>




---

archive/issue_comments_500021.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nI've now rebased on top of develop and on #30940.",
    "created_at": "2020-12-07T13:27:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500021",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:24'>Comment 24:</a>
I've now rebased on top of develop and on #30940.



---

archive/issue_events_409439.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T13:27:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409439"
}
```



---

archive/issue_events_409440.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T13:27:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409440"
}
```



---

archive/issue_comments_500022.json:
```json
{
    "body": "Dependencies: **#30940**",
    "created_at": "2020-12-07T13:27:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500022",
    "user": "https://github.com/tobiasdiez"
}
```

Dependencies: **#30940**



---

archive/issue_events_409441.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-07T19:18:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409441"
}
```



---

archive/issue_events_409442.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-07T19:18:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409442"
}
```



---

archive/issue_comments_500023.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nThis branch is seriously messed up... best to squash some of the intermediate commits",
    "created_at": "2020-12-07T19:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500023",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'>Comment 26:</a>
This branch is seriously messed up... best to squash some of the intermediate commits



---

archive/issue_comments_500024.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nI agree, everything should be squashed instead of merged for the final integration in `develop`/`master` - but that's going to happen anyway, right?",
    "created_at": "2020-12-07T19:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500024",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:27'>Comment 27:</a>
I agree, everything should be squashed instead of merged for the final integration in `develop`/`master` - but that's going to happen anyway, right?



---

archive/issue_comments_500025.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nNo, the branches of the tickets are merged as is, not squashed, by the release manager",
    "created_at": "2020-12-07T19:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500025",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'>Comment 28:</a>
No, the branches of the tickets are merged as is, not squashed, by the release manager



---

archive/issue_comments_500026.json:
```json
{
    "body": "Changed commit from **[1d72cc6](https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3)** to **[4fc77ee](https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229)**",
    "created_at": "2020-12-07T20:17:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500026",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1d72cc6](https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3)** to **[4fc77ee](https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229)**



---

archive/issue_comments_500027.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229\">4fc77ee</a></td><td><code>Remove unused optional extension, improve interface of list_packages</code></td></tr></table>\n",
    "created_at": "2020-12-07T20:17:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500027",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:29'>Comment 29:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229">4fc77ee</a></td><td><code>Remove unused optional extension, improve interface of list_packages</code></td></tr></table>




---

archive/issue_comments_500028.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nReplying to [@mkoeppe](#comment%3A28):\n> No, the branches of the tickets are merged as is, not squashed, by the release manager\n\nOk, I got the impression they are squashed by looking at https://github.com/sagemath/sage/commits/develop. I've now squashed everything.",
    "created_at": "2020-12-07T20:19:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500028",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:30'>Comment 30:</a>
Replying to [@mkoeppe](#comment%3A28):
> No, the branches of the tickets are merged as is, not squashed, by the release manager

Ok, I got the impression they are squashed by looking at https://github.com/sagemath/sage/commits/develop. I've now squashed everything.



---

archive/issue_events_409443.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T20:19:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409443"
}
```



---

archive/issue_events_409444.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T20:19:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409444"
}
```



---

archive/issue_comments_500029.json:
```json
{
    "body": "Changed commit from **[4fc77ee](https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229)** to **[9cfe6db](https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042)**",
    "created_at": "2020-12-07T20:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500029",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4fc77ee](https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229)** to **[9cfe6db](https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042)**



---

archive/issue_comments_500030.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042\">9cfe6db</a></td><td><code>dict-like instead of string-based</code></td></tr></table>\n",
    "created_at": "2020-12-07T20:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500030",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:32'>Comment 32:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042">9cfe6db</a></td><td><code>dict-like instead of string-based</code></td></tr></table>




---

archive/issue_comments_500031.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nThe doctest of `__getitem__` is not formatted correctly",
    "created_at": "2020-12-07T23:34:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500031",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'>Comment 33:</a>
The doctest of `__getitem__` is not formatted correctly



---

archive/issue_comments_500032.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e\">5185685</a></td><td><code>Fix formatting</code></td></tr></table>\n",
    "created_at": "2020-12-07T23:41:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500032",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:34'>Comment 34:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e">5185685</a></td><td><code>Fix formatting</code></td></tr></table>




---

archive/issue_comments_500033.json:
```json
{
    "body": "Changed commit from **[9cfe6db](https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042)** to **[5185685](https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e)**",
    "created_at": "2020-12-07T23:41:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500033",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9cfe6db](https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042)** to **[5185685](https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e)**



---

archive/issue_comments_500034.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nReplying to [@mkoeppe](#comment%3A33):\n> The doctest of `__getitem__` is not formatted correctly\n\nHopefully fixed now. \n\n(doctest still don't run for me...e.g I now get RuntimeError: refusing to run doctests from the current directory '/mnt/d/Programming/sage' since untrusted users could put files in this directory, making it unsafe to run Sage code from)",
    "created_at": "2020-12-07T23:42:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500034",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:35'>Comment 35:</a>
Replying to [@mkoeppe](#comment%3A33):
> The doctest of `__getitem__` is not formatted correctly

Hopefully fixed now. 

(doctest still don't run for me...e.g I now get RuntimeError: refusing to run doctests from the current directory '/mnt/d/Programming/sage' since untrusted users could put files in this directory, making it unsafe to run Sage code from)



---

archive/issue_comments_500035.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nBuild fails for me\n\n```\n  [sagelib-9.3.beta3]   Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1\n  [sagelib-9.3.beta3]   Discovering Python/Cython source code....\n  [sagelib-9.3.beta3]   ************************************************************************\n  [sagelib-9.3.beta3]   Traceback (most recent call last):\n  [sagelib-9.3.beta3]     File \"setup.py\", line 60, in <module>\n  [sagelib-9.3.beta3]       from sage.misc.package import is_package_installed_and_updated\n  [sagelib-9.3.beta3]     File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py\", line 177, in <module>\n  [sagelib-9.3.beta3]       class PackageInfo(NamedTuple):\n  [sagelib-9.3.beta3]   RuntimeError: __class__ not set defining 'PackageInfo' as <class 'sage.misc.package.PackageInfo'>. Was __classcell__ propagated to type.__new__?\n  [sagelib-9.3.beta3]   ************************************************************************\n  [sagelib-9.3.beta3]   Error building the Sage library\n  [sagelib-9.3.beta3]   ************************************************************************\n```",
    "created_at": "2020-12-08T01:14:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500035",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'>Comment 36:</a>
Build fails for me

```
  [sagelib-9.3.beta3]   Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1
  [sagelib-9.3.beta3]   Discovering Python/Cython source code....
  [sagelib-9.3.beta3]   ************************************************************************
  [sagelib-9.3.beta3]   Traceback (most recent call last):
  [sagelib-9.3.beta3]     File "setup.py", line 60, in <module>
  [sagelib-9.3.beta3]       from sage.misc.package import is_package_installed_and_updated
  [sagelib-9.3.beta3]     File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py", line 177, in <module>
  [sagelib-9.3.beta3]       class PackageInfo(NamedTuple):
  [sagelib-9.3.beta3]   RuntimeError: __class__ not set defining 'PackageInfo' as <class 'sage.misc.package.PackageInfo'>. Was __classcell__ propagated to type.__new__?
  [sagelib-9.3.beta3]   ************************************************************************
  [sagelib-9.3.beta3]   Error building the Sage library
  [sagelib-9.3.beta3]   ************************************************************************
```



---

archive/issue_events_409445.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-08T01:14:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409445"
}
```



---

archive/issue_events_409446.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-08T01:14:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409446"
}
```



---

archive/issue_comments_500036.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed\">5472ee9</a></td><td><code>Fix build and tests</code></td></tr></table>\n",
    "created_at": "2020-12-08T09:48:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500036",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:37'>Comment 37:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed">5472ee9</a></td><td><code>Fix build and tests</code></td></tr></table>




---

archive/issue_comments_500037.json:
```json
{
    "body": "Changed commit from **[5185685](https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e)** to **[5472ee9](https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed)**",
    "created_at": "2020-12-08T09:48:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500037",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5185685](https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e)** to **[5472ee9](https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed)**



---

archive/issue_events_409447.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-08T09:57:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409447"
}
```



---

archive/issue_events_409448.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-08T09:57:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409448"
}
```



---

archive/issue_comments_500038.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nReplying to [@mkoeppe](#comment%3A36):\n> Build fails for me\n\nShould be fixed now.\n\nCould you please have a look at #30901 and #30748. It's really awkward for me not be able to test my own changes. Thanks!",
    "created_at": "2020-12-08T09:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500038",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:38'>Comment 38:</a>
Replying to [@mkoeppe](#comment%3A36):
> Build fails for me

Should be fixed now.

Could you please have a look at #30901 and #30748. It's really awkward for me not be able to test my own changes. Thanks!



---

archive/issue_comments_500039.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\n\n```\n[sagelib-9.3.beta3] Discovering Python/Cython source code....\n[sagelib-9.3.beta3] ************************************************************************\n[sagelib-9.3.beta3] Traceback (most recent call last):\n[sagelib-9.3.beta3]   File \"setup.py\", line 60, in <module>\n[sagelib-9.3.beta3]     from sage.misc.package import is_package_installed_and_updated\n[sagelib-9.3.beta3]   File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py\", line 434, in <module>\n[sagelib-9.3.beta3]     all_packages = list_packages(local=True)\n[sagelib-9.3.beta3]   File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py\", line 329, in list_packages\n[sagelib-9.3.beta3]     pkg.name = p\n[sagelib-9.3.beta3] AttributeError: can't set attribute\n[sagelib-9.3.beta3] ************************************************************************\n```",
    "created_at": "2020-12-09T02:11:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500039",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'>Comment 39:</a>

```
[sagelib-9.3.beta3] Discovering Python/Cython source code....
[sagelib-9.3.beta3] ************************************************************************
[sagelib-9.3.beta3] Traceback (most recent call last):
[sagelib-9.3.beta3]   File "setup.py", line 60, in <module>
[sagelib-9.3.beta3]     from sage.misc.package import is_package_installed_and_updated
[sagelib-9.3.beta3]   File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py", line 434, in <module>
[sagelib-9.3.beta3]     all_packages = list_packages(local=True)
[sagelib-9.3.beta3]   File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py", line 329, in list_packages
[sagelib-9.3.beta3]     pkg.name = p
[sagelib-9.3.beta3] AttributeError: can't set attribute
[sagelib-9.3.beta3] ************************************************************************
```



---

archive/issue_comments_500040.json:
```json
{
    "body": "Changed commit from **[5472ee9](https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed)** to **[0bb7738](https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d)**",
    "created_at": "2020-12-09T09:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500040",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5472ee9](https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed)** to **[0bb7738](https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d)**



---

archive/issue_comments_500041.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d\">0bb7738</a></td><td><code>Fix immutability</code></td></tr></table>\n",
    "created_at": "2020-12-09T09:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500041",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:40'>Comment 40:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d">0bb7738</a></td><td><code>Fix immutability</code></td></tr></table>




---

archive/issue_comments_500042.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nSorry should have tested it after the merge. Should work now.",
    "created_at": "2020-12-09T10:01:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500042",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:41'>Comment 41:</a>
Sorry should have tested it after the merge. Should work now.



---

archive/issue_comments_500043.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\n\n```diff\n-                deprecation(31013, \"dict-like access is deprecated, use e.g `pkg.name` instead of `pkg[name]`\")\n+                deprecation(31013, \"dict-like access is deprecated, use e.g `pkg.name` instead of `pkg['name']`\")\n```",
    "created_at": "2020-12-09T19:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500043",
    "user": "https://github.com/kliem"
}
```

<a id='comment:42'>Comment 42:</a>

```diff
-                deprecation(31013, "dict-like access is deprecated, use e.g `pkg.name` instead of `pkg[name]`")
+                deprecation(31013, "dict-like access is deprecated, use e.g `pkg.name` instead of `pkg['name']`")
```



---

archive/issue_comments_500044.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\n\n```\nRunning doctests with ID 2020-12-09-21-48-42-bac7d593.\nGit branch: test/31013\nUsing --optional=4ti2,build,debian,dochtml,e_antic,lidia,lrslib,mcqd,memlimit,normaliz,pip,pynormaliz,pyroaringbitmap,python_igraph,rubiks,sage,sage_spkg,speaklater,texttable     \nDoctesting 1 file.\nsage -t --random-seed=0 src/sage/misc/package.py\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 194, in sage.misc.package.PackageInfo\nFailed example:\n    package = PackageInfo(\"test_package\")\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.PackageInfo[0]>\", line 1, in <module>\n        package = PackageInfo(\"test_package\")\n    NameError: name 'PackageInfo' is not defined\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 195, in sage.misc.package.PackageInfo\nFailed example:\n    package[\"name\"]\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.PackageInfo[1]>\", line 1, in <module>\n        package[\"name\"]\n    NameError: name 'package' is not defined\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 199, in sage.misc.package.PackageInfo\nFailed example:\n    package[0]\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.PackageInfo[2]>\", line 1, in <module>\n        package[Integer(0)]\n    NameError: name 'package' is not defined\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 263, in sage.misc.package.pkg_sources\nFailed example:\n    sage_conf_info.installed # optional - build\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.pkg_sources[5]>\", line 1, in <module>\n        sage_conf_info.installed # optional - build\n    AttributeError: 'PackageInfo' object has no attribute 'installed'\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 413, in sage.misc.package.is_package_installed\nFailed example:\n    for pkg in list_packages(pkg_sources=('pip'), local=True):  # optional - build\n        assert not is_package_installed(pkg), \"pip package is installed: {}\".format(pkg)\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.is_package_installed[3]>\", line 2, in <module>\n        assert not is_package_installed(pkg), \"pip package is installed: {}\".format(pkg)\n    AssertionError: pip package is installed: itsdangerous\n**********************************************************************\n3 items had failures:\n   3 of   4 in sage.misc.package.PackageInfo\n   1 of   5 in sage.misc.package.is_package_installed\n   1 of   9 in sage.misc.package.pkg_sources\n    [55 tests, 5 failures, 2.38 s]\n----------------------------------------------------------------------\nsage -t --random-seed=0 src/sage/misc/package.py  # 5 doctests failed\n```\n\nEverything else passes. Build as well.",
    "created_at": "2020-12-09T20:52:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500044",
    "user": "https://github.com/kliem"
}
```

<a id='comment:43'>Comment 43:</a>

```
Running doctests with ID 2020-12-09-21-48-42-bac7d593.
Git branch: test/31013
Using --optional=4ti2,build,debian,dochtml,e_antic,lidia,lrslib,mcqd,memlimit,normaliz,pip,pynormaliz,pyroaringbitmap,python_igraph,rubiks,sage,sage_spkg,speaklater,texttable     
Doctesting 1 file.
sage -t --random-seed=0 src/sage/misc/package.py
**********************************************************************
File "src/sage/misc/package.py", line 194, in sage.misc.package.PackageInfo
Failed example:
    package = PackageInfo("test_package")
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.PackageInfo[0]>", line 1, in <module>
        package = PackageInfo("test_package")
    NameError: name 'PackageInfo' is not defined
**********************************************************************
File "src/sage/misc/package.py", line 195, in sage.misc.package.PackageInfo
Failed example:
    package["name"]
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.PackageInfo[1]>", line 1, in <module>
        package["name"]
    NameError: name 'package' is not defined
**********************************************************************
File "src/sage/misc/package.py", line 199, in sage.misc.package.PackageInfo
Failed example:
    package[0]
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.PackageInfo[2]>", line 1, in <module>
        package[Integer(0)]
    NameError: name 'package' is not defined
**********************************************************************
File "src/sage/misc/package.py", line 263, in sage.misc.package.pkg_sources
Failed example:
    sage_conf_info.installed # optional - build
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.pkg_sources[5]>", line 1, in <module>
        sage_conf_info.installed # optional - build
    AttributeError: 'PackageInfo' object has no attribute 'installed'
**********************************************************************
File "src/sage/misc/package.py", line 413, in sage.misc.package.is_package_installed
Failed example:
    for pkg in list_packages(pkg_sources=('pip'), local=True):  # optional - build
        assert not is_package_installed(pkg), "pip package is installed: {}".format(pkg)
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.is_package_installed[3]>", line 2, in <module>
        assert not is_package_installed(pkg), "pip package is installed: {}".format(pkg)
    AssertionError: pip package is installed: itsdangerous
**********************************************************************
3 items had failures:
   3 of   4 in sage.misc.package.PackageInfo
   1 of   5 in sage.misc.package.is_package_installed
   1 of   9 in sage.misc.package.pkg_sources
    [55 tests, 5 failures, 2.38 s]
----------------------------------------------------------------------
sage -t --random-seed=0 src/sage/misc/package.py  # 5 doctests failed
```

Everything else passes. Build as well.



---

archive/issue_events_409449.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-12-09T20:52:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409449"
}
```



---

archive/issue_events_409450.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-12-09T20:52:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409450"
}
```



---

archive/issue_comments_500045.json:
```json
{
    "body": "Changed commit from **[0bb7738](https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d)** to **[6b82d90](https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821)**",
    "created_at": "2020-12-10T17:45:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500045",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0bb7738](https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d)** to **[6b82d90](https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821)**



---

archive/issue_comments_500046.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0e4a907b904e2422a51e0ef035ea63c949cc1b4\">d0e4a90</a></td><td><code>sage.misc.package.PackageInfo: Improve wording of deprecation message, fix doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821\">6b82d90</a></td><td><code>sage.misc.package.list_packages: Align optional tags in doctests</code></td></tr></table>\n",
    "created_at": "2020-12-10T17:45:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500046",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:44'>Comment 44:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0e4a907b904e2422a51e0ef035ea63c949cc1b4">d0e4a90</a></td><td><code>sage.misc.package.PackageInfo: Improve wording of deprecation message, fix doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821">6b82d90</a></td><td><code>sage.misc.package.list_packages: Align optional tags in doctests</code></td></tr></table>




---

archive/issue_comments_500047.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nI have fixed a few things but the assertion error remains to be fixed",
    "created_at": "2020-12-10T17:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500047",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'>Comment 45:</a>
I have fixed a few things but the assertion error remains to be fixed



---

archive/issue_comments_500048.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nLatest #30940 also needs to be merged",
    "created_at": "2020-12-16T23:51:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500048",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'>Comment 46:</a>
Latest #30940 also needs to be merged



---

archive/issue_comments_500049.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nThe dependency has been merged in 9.3.beta6. Needs rebase",
    "created_at": "2021-01-19T20:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500049",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'>Comment 47:</a>
The dependency has been merged in 9.3.beta6. Needs rebase



---

archive/issue_comments_500050.json:
```json
{
    "body": "Changed dependencies from **#30940** to none",
    "created_at": "2021-01-19T20:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500050",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30940** to none



---

archive/issue_comments_500051.json:
```json
{
    "body": "Changed commit from **[6b82d90](https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821)** to **[2eee858](https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23)**",
    "created_at": "2021-01-19T21:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500051",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6b82d90](https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821)** to **[2eee858](https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23)**



---

archive/issue_comments_500052.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b48edf797444e433a6873ea0a4edac53aa35a19a\">b48edf7</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23\">2eee858</a></td><td><code>Code cleanup</code></td></tr></table>\n",
    "created_at": "2021-01-19T21:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500052",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:48'>Comment 48:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b48edf797444e433a6873ea0a4edac53aa35a19a">b48edf7</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23">2eee858</a></td><td><code>Code cleanup</code></td></tr></table>




---

archive/issue_events_409451.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-01-19T21:45:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409451"
}
```



---

archive/issue_events_409452.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-01-19T21:45:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409452"
}
```



---

archive/issue_comments_500053.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nLocally, all tests pass for me now. So this should be ready for review.",
    "created_at": "2021-01-19T21:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500053",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:49'>Comment 49:</a>
Locally, all tests pass for me now. So this should be ready for review.



---

archive/issue_comments_500054.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nTests pass for me, too.\n\n```\nall_packages = list_packages(local=True)\n```\nIt was fine to executed this code at module load time in `sage_setup.optional_extension`,  but I don't think it is good to do so at load time of `sage.misc.package`.\n\nAlso `is_package_installed_and_updated` would need documentation + test as it is moved to sagelib",
    "created_at": "2021-01-30T23:16:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500054",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:50'>Comment 50:</a>
Tests pass for me, too.

```
all_packages = list_packages(local=True)
```
It was fine to executed this code at module load time in `sage_setup.optional_extension`,  but I don't think it is good to do so at load time of `sage.misc.package`.

Also `is_package_installed_and_updated` would need documentation + test as it is moved to sagelib



---

archive/issue_events_409453.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-30T23:16:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409453"
}
```



---

archive/issue_events_409454.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-30T23:16:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409454"
}
```



---

archive/issue_comments_500055.json:
```json
{
    "body": "Changed commit from **[2eee858](https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23)** to **[541fa1b](https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790)**",
    "created_at": "2021-02-02T17:12:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500055",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2eee858](https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23)** to **[541fa1b](https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790)**



---

archive/issue_comments_500056.json:
```json
{
    "body": "<a id='comment:51'>Comment 51:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790\">541fa1b</a></td><td><code>Add documentation, test and remove caching</code></td></tr></table>\n",
    "created_at": "2021-02-02T17:12:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500056",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:51'>Comment 51:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790">541fa1b</a></td><td><code>Add documentation, test and remove caching</code></td></tr></table>




---

archive/issue_comments_500057.json:
```json
{
    "body": "<a id='comment:52'>Comment 52:</a>\n> Also is_package_installed_and_updated would need documentation + test as it is moved to sagelib \n\nOk done.\n\nI've removed the caching completely, because this probably is best done at the level of `list_packages` anyway.",
    "created_at": "2021-02-02T17:13:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500057",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:52'>Comment 52:</a>
> Also is_package_installed_and_updated would need documentation + test as it is moved to sagelib 

Ok done.

I've removed the caching completely, because this probably is best done at the level of `list_packages` anyway.



---

archive/issue_events_409455.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-02-02T17:14:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409455"
}
```



---

archive/issue_events_409456.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-02-02T17:14:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409456"
}
```



---

archive/issue_comments_500058.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\nRemoving caching will probably make `setup.py` somewhat slower, so I am not sure this is a good idea.",
    "created_at": "2021-02-02T17:43:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500058",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:54'>Comment 54:</a>
Removing caching will probably make `setup.py` somewhat slower, so I am not sure this is a good idea.



---

archive/issue_comments_500059.json:
```json
{
    "body": "<a id='comment:55'>Comment 55:</a>\nPerhaps it's best to split this ticket and only do the interface improvement for `list_packages` here.",
    "created_at": "2021-02-02T17:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500059",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'>Comment 55:</a>
Perhaps it's best to split this ticket and only do the interface improvement for `list_packages` here.



---

archive/issue_events_409457.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-10T20:28:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409457"
}
```



---

archive/issue_events_409458.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-10T20:28:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409458"
}
```



---

archive/issue_comments_500060.json:
```json
{
    "body": "<a id='comment:57'>Comment 57:</a>\nReplying to [@mkoeppe](#comment%3A55):\n> Perhaps it's best to split this ticket \n\n... I have opened #31385 (Improve interface of `list_packages`)",
    "created_at": "2021-02-12T00:32:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500060",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:57'>Comment 57:</a>
Replying to [@mkoeppe](#comment%3A55):
> Perhaps it's best to split this ticket 

... I have opened #31385 (Improve interface of `list_packages`)



---

archive/issue_comments_500061.json:
```json
{
    "body": "<a id='comment:58'>Comment 58:</a>\nThanks!",
    "created_at": "2021-02-12T08:56:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500061",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:58'>Comment 58:</a>
Thanks!



---

archive/issue_comments_500062.json:
```json
{
    "body": "Work Issues: **rebase on #31385**",
    "created_at": "2021-02-12T20:58:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500062",
    "user": "https://github.com/mkoeppe"
}
```

Work Issues: **rebase on #31385**



---

archive/issue_events_409459.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-12T20:58:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "title_is": "Remove unused class from sage_setup.optional extension",
    "title_was": "Remove unused optional extension, improve interface of list_packages",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409459"
}
```



---

archive/issue_comments_500063.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). \n-The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package` (where also a bit of typing info is added).\n+The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package`.\n \n Related: #28815\n``````\n",
    "created_at": "2021-02-12T20:58:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500063",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). 
-The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package` (where also a bit of typing info is added).
+The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package`.
 
 Related: #28815
``````




---

archive/issue_comments_500064.json:
```json
{
    "body": "Dependencies: **#31385**",
    "created_at": "2021-02-12T20:58:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500064",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#31385**



---

archive/issue_events_409460.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409460"
}
```



---

archive/issue_events_409461.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409461"
}
```



---

archive/issue_comments_500065.json:
```json
{
    "body": "<a id='comment:60'>Comment 60:</a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500065",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:60'>Comment 60:</a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_409462.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409462"
}
```



---

archive/issue_events_409463.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409463"
}
```



---

archive/issue_comments_500066.json:
```json
{
    "body": "<a id='comment:61'>Comment 61:</a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500066",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:61'>Comment 61:</a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_500067.json:
```json
{
    "body": "Changed commit from **[541fa1b](https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790)** to **[6c67908](https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13)**",
    "created_at": "2021-11-26T21:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500067",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[541fa1b](https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790)** to **[6c67908](https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13)**



---

archive/issue_comments_500068.json:
```json
{
    "body": "<a id='comment:62'>Comment 62:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13\">6c67908</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr></table>\n",
    "created_at": "2021-11-26T21:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500068",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:62'>Comment 62:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13">6c67908</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr></table>




---

archive/issue_comments_500069.json:
```json
{
    "body": "<a id='comment:63'>Comment 63:</a>\nRebased, so this is now ready for review.",
    "created_at": "2021-11-26T21:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500069",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:63'>Comment 63:</a>
Rebased, so this is now ready for review.



---

archive/issue_comments_500070.json:
```json
{
    "body": "Changed work issues from **rebase on #31385** to none",
    "created_at": "2021-11-26T21:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500070",
    "user": "https://github.com/tobiasdiez"
}
```

Changed work issues from **rebase on #31385** to none



---

archive/issue_events_409464.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-11-26T21:40:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409464"
}
```



---

archive/issue_events_409465.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-11-26T21:40:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409465"
}
```



---

archive/issue_events_409466.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409466"
}
```



---

archive/issue_events_409467.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409467"
}
```



---

archive/issue_comments_500071.json:
```json
{
    "body": "<a id='comment:64'>Comment 64:</a>\nStalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500071",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:64'>Comment 64:</a>
Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_comments_500072.json:
```json
{
    "body": "<a id='comment:65'>Comment 65:</a>\nYes, I would appreciate if this ticket could be reviewed!",
    "created_at": "2021-12-19T20:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500072",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:65'>Comment 65:</a>
Yes, I would appreciate if this ticket could be reviewed!



---

archive/issue_comments_500073.json:
```json
{
    "body": "Changed commit from **[6c67908](https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13)** to **[a7b1e81](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)**",
    "created_at": "2022-01-03T12:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500073",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6c67908](https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13)** to **[a7b1e81](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)**



---

archive/issue_comments_500074.json:
```json
{
    "body": "<a id='comment:66'>Comment 66:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11b45bda2e31e3025a3be9ab9e5bf571f527466c\">11b45bd</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57\">a7b1e81</a></td><td><code>Improve typing</code></td></tr></table>\n",
    "created_at": "2022-01-03T12:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500074",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:66'>Comment 66:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11b45bda2e31e3025a3be9ab9e5bf571f527466c">11b45bd</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57">a7b1e81</a></td><td><code>Improve typing</code></td></tr></table>




---

archive/issue_comments_500075.json:
```json
{
    "body": "Changed dependencies from **#31385** to none",
    "created_at": "2022-01-03T12:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500075",
    "user": "https://github.com/tobiasdiez"
}
```

Changed dependencies from **#31385** to none



---

archive/issue_comments_500076.json:
```json
{
    "body": "<a id='comment:69'>Comment 69:</a>\nThanks for copying me Matthias. I was aware of this ticket and I guess it will at least remove some pesky doctests. Otherwise it will just make me move some patch from one file to another.\n\n`is_package_installed_and_updated` is one of those things I am patiently waiting for the modularisation of sage to kill. In the meantime I am patching an alternative mechanism anyway.",
    "created_at": "2022-01-10T04:20:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500076",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:69'>Comment 69:</a>
Thanks for copying me Matthias. I was aware of this ticket and I guess it will at least remove some pesky doctests. Otherwise it will just make me move some patch from one file to another.

`is_package_installed_and_updated` is one of those things I am patiently waiting for the modularisation of sage to kill. In the meantime I am patching an alternative mechanism anyway.



---

archive/issue_events_409468.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-01-10T04:25:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409468"
}
```



---

archive/issue_events_409469.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-01-10T04:25:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409469"
}
```



---

archive/issue_comments_500077.json:
```json
{
    "body": "<a id='comment:70'>Comment 70:</a>\nOther than that, if you copied me for the review, it all looks good and sensible to me.",
    "created_at": "2022-01-10T04:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500077",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:70'>Comment 70:</a>
Other than that, if you copied me for the review, it all looks good and sensible to me.



---

archive/issue_comments_500078.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2022-01-10T04:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500078",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **Fran√ßois Bissey**



---

archive/issue_comments_500079.json:
```json
{
    "body": "<a id='comment:71'>Comment 71:</a>\nThanks for the review!",
    "created_at": "2022-01-10T12:46:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500079",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:71'>Comment 71:</a>
Thanks for the review!



---

archive/issue_comments_500080.json:
```json
{
    "body": "Changed branch from **[public/build/remove_optional_extension](https://github.com/sagemath/sagetrac-mirror/tree/public/build/remove_optional_extension)** to **[a7b1e81](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)**",
    "created_at": "2022-01-31T23:31:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-500080",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/build/remove_optional_extension](https://github.com/sagemath/sagetrac-mirror/tree/public/build/remove_optional_extension)** to **[a7b1e81](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)**



---

archive/issue_events_409470.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-31T23:31:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409470"
}
```



---

archive/issue_events_409471.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3abe1a7938ff00196c1d8e9c35a6714d7a8d60f8",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-01-31T23:31:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-409471"
}
```
