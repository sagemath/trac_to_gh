# Issue 31013: Remove unused class from sage_setup.optional extension

archive/issues_030776.json:
```json
{
    "body": "The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). \nThe only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package`.\n\nRelated: #28815\n\nCC:  @mkoeppe @kiwifb\n\nKeywords: sd111\n\nBranch/Commit: a7b1e818d0a0a8da264017dbc81be2984bd56d57\n\nReviewer: Fran\u00e7ois Bissey\n\nAuthor: Tobias Diez\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31013\n\n",
    "closed_at": "2022-01-31T23:31:41Z",
    "created_at": "2020-12-05T18:36:48Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Remove unused class from sage_setup.optional extension",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31013",
    "user": "https://github.com/tobiasdiez"
}
```
The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). 
The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package`.

Related: #28815

CC:  @mkoeppe @kiwifb

Keywords: sd111

Branch/Commit: a7b1e818d0a0a8da264017dbc81be2984bd56d57

Reviewer: Fran√ßois Bissey

Author: Tobias Diez

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31013





---

archive/issue_comments_615377.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-12-05T18:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615377",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_615378.json:
```json
{
    "body": "Changing commit from \"508075cb9f6558c267c546f2fdff6cd1dac0cf83\" to \"2492f1ec3e9258c8cb05df19fd90946c8a55932c\"",
    "created_at": "2020-12-05T18:37:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615378",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "508075cb9f6558c267c546f2fdff6cd1dac0cf83" to "2492f1ec3e9258c8cb05df19fd90946c8a55932c"



---

archive/issue_comments_615379.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-05T18:37:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615379",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615380.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). \n The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package` (where also a bit of typing info is added).\n+\n+Related: #28815\n``````\n",
    "created_at": "2020-12-05T18:38:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615380",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). 
 The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package` (where also a bit of typing info is added).
+
+Related: #28815
``````




---

archive/issue_comments_615381.json:
```json
{
    "body": "<a id='comment:4'></a>Can't make incompatible changes to the interface of a public function",
    "created_at": "2020-12-05T18:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615381",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>Can't make incompatible changes to the interface of a public function



---

archive/issue_comments_615382.json:
```json
{
    "body": "<a id='comment:5'></a>(I'm referring to the `list_packages` function)",
    "created_at": "2020-12-05T18:44:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615382",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>(I'm referring to the `list_packages` function)



---

archive/issue_comments_615383.json:
```json
{
    "body": "<a id='comment:6'></a>It's also conflicting with the changes in #30940 (which needs review)",
    "created_at": "2020-12-05T18:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615383",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>It's also conflicting with the changes in #30940 (which needs review)



---

archive/issue_comments_615384.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-05T18:57:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615384",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615385.json:
```json
{
    "body": "Changing commit from \"2492f1ec3e9258c8cb05df19fd90946c8a55932c\" to \"649ffff0142a666f541b1d7a90e3680bd408ba09\"",
    "created_at": "2020-12-05T18:57:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615385",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2492f1ec3e9258c8cb05df19fd90946c8a55932c" to "649ffff0142a666f541b1d7a90e3680bd408ba09"



---

archive/issue_comments_615386.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [mkoeppe](#comment%3A4):\n> Can't make incompatible changes to the interface of a public function\n\n\nSo one cannot change public facing functions at all? What is the policy/strategy for this? Introduce a new method, say `list_packages_typed`?\n\n> It's also conflicting with the changes in #30940 (which needs review)\n\n\nI wouldn't say it's conflicting, just results in easy-to-resolve merge conflicts.",
    "created_at": "2020-12-05T19:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615386",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:8'></a>Replying to [mkoeppe](#comment%3A4):
> Can't make incompatible changes to the interface of a public function


So one cannot change public facing functions at all? What is the policy/strategy for this? Introduce a new method, say `list_packages_typed`?

> It's also conflicting with the changes in #30940 (which needs review)


I wouldn't say it's conflicting, just results in easy-to-resolve merge conflicts.



---

archive/issue_comments_615387.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [gh-tobiasdiez](#comment%3A8):\n> Replying to [mkoeppe](#comment%3A4):\n> > Can't make incompatible changes to the interface of a public function\n\n> \n> So one cannot change public facing functions at all? What is the policy/strategy for this? Introduce a new method, say `list_packages_typed`?\n\n\nIt could be a new function (with deprecation for the old one), or an optional argument that controls the return type, ...\n\nBut in this particular case, it would probably be good enough to just give the new class dictionary-like behavior so that user code can continue to access the slots like a dictionary. Possibly with deprecation warning.",
    "created_at": "2020-12-05T19:33:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615387",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>Replying to [gh-tobiasdiez](#comment%3A8):
> Replying to [mkoeppe](#comment%3A4):
> > Can't make incompatible changes to the interface of a public function

> 
> So one cannot change public facing functions at all? What is the policy/strategy for this? Introduce a new method, say `list_packages_typed`?


It could be a new function (with deprecation for the old one), or an optional argument that controls the return type, ...

But in this particular case, it would probably be good enough to just give the new class dictionary-like behavior so that user code can continue to access the slots like a dictionary. Possibly with deprecation warning.



---

archive/issue_comments_615388.json:
```json
{
    "body": "Changing commit from \"649ffff0142a666f541b1d7a90e3680bd408ba09\" to \"26b59ad06672b1dc9b99c2bb22acce7c8b3110c4\"",
    "created_at": "2020-12-05T20:16:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615388",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "649ffff0142a666f541b1d7a90e3680bd408ba09" to "26b59ad06672b1dc9b99c2bb22acce7c8b3110c4"



---

archive/issue_comments_615389.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-05T20:16:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615389",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615390.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [mkoeppe](#comment%3A9):\n> But in this particular case, it would probably be good enough to just give the new class dictionary-like behavior so that user code can continue to access the slots like a dictionary. Possibly with deprecation warning.\n> \n\n\nThat's a nice idea, implemented!",
    "created_at": "2020-12-05T20:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615390",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:11'></a>Replying to [mkoeppe](#comment%3A9):
> But in this particular case, it would probably be good enough to just give the new class dictionary-like behavior so that user code can continue to access the slots like a dictionary. Possibly with deprecation warning.
> 


That's a nice idea, implemented!



---

archive/issue_comments_615391.json:
```json
{
    "body": "<a id='comment:12'></a>Instead of \"string-based access\", perhaps this should be called \"dict-like access\" in the deprecation messages?",
    "created_at": "2020-12-05T20:44:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615391",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Instead of "string-based access", perhaps this should be called "dict-like access" in the deprecation messages?



---

archive/issue_comments_615392.json:
```json
{
    "body": "<a id='comment:13'></a>I think in this change you need to use `is_installed()` instead\n\n```\n--- a/src/bin/sage-list-packages\n+++ b/src/bin/sage-list-packages\n@@ -91,16 +91,16 @@ else:\n if WARN:\n     print(WARN)\n if args['installed_only']:\n-    L = [pkg for pkg in L if pkg['installed']]\n+    L = [pkg for pkg in L if pkg.installed]\n elif args['not_installed_only']:\n-    L = [pkg for pkg in L if not pkg['installed']]\n+    L = [pkg for pkg in L if not pkg.installed]\n```",
    "created_at": "2020-12-06T00:20:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615392",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>I think in this change you need to use `is_installed()` instead

```
--- a/src/bin/sage-list-packages
+++ b/src/bin/sage-list-packages
@@ -91,16 +91,16 @@ else:
 if WARN:
     print(WARN)
 if args['installed_only']:
-    L = [pkg for pkg in L if pkg['installed']]
+    L = [pkg for pkg in L if pkg.installed]
 elif args['not_installed_only']:
-    L = [pkg for pkg in L if not pkg['installed']]
+    L = [pkg for pkg in L if not pkg.installed]
```



---

archive/issue_comments_615393.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-12-06T00:20:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615393",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_615394.json:
```json
{
    "body": "<a id='comment:16'></a>Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615394",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_615395.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd111\".",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615395",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "sd111".



---

archive/issue_comments_615396.json:
```json
{
    "body": "Changing commit from \"26b59ad06672b1dc9b99c2bb22acce7c8b3110c4\" to \"0c10be07ade50949f599b70ce255c2100bd60c6a\"",
    "created_at": "2020-12-06T22:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615396",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "26b59ad06672b1dc9b99c2bb22acce7c8b3110c4" to "0c10be07ade50949f599b70ce255c2100bd60c6a"



---

archive/issue_comments_615397.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-06T22:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615397",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615398.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [mkoeppe](#comment%3A13):\n> I think in this change you need to use `is_installed()` instead\n\n\nIndeed, thanks!",
    "created_at": "2020-12-06T22:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615398",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:18'></a>Replying to [mkoeppe](#comment%3A13):
> I think in this change you need to use `is_installed()` instead


Indeed, thanks!



---

archive/issue_comments_615399.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-12-06T22:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615399",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_615400.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [mkoeppe](#comment%3A16):\n> Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111\n\n\nI try to join, but I'm on vacation this week...",
    "created_at": "2020-12-06T22:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615400",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:19'></a>Replying to [mkoeppe](#comment%3A16):
> Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111


I try to join, but I'm on vacation this week...



---

archive/issue_comments_615401.json:
```json
{
    "body": "<a id='comment:20'></a>Needs rebase on latest beta",
    "created_at": "2020-12-07T00:15:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615401",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>Needs rebase on latest beta



---

archive/issue_comments_615402.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-12-07T00:15:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615402",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_615403.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-07T13:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615403",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615404.json:
```json
{
    "body": "Changing commit from \"0c10be07ade50949f599b70ce255c2100bd60c6a\" to \"0213e20fd015b7d4da6da5493c7e73872e7fe1fa\"",
    "created_at": "2020-12-07T13:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615404",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0c10be07ade50949f599b70ce255c2100bd60c6a" to "0213e20fd015b7d4da6da5493c7e73872e7fe1fa"



---

archive/issue_comments_615405.json:
```json
{
    "body": "Changing commit from \"0213e20fd015b7d4da6da5493c7e73872e7fe1fa\" to \"95ff8c1c58896d1232c6daa08edf3575c9bce1ee\"",
    "created_at": "2020-12-07T13:13:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615405",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0213e20fd015b7d4da6da5493c7e73872e7fe1fa" to "95ff8c1c58896d1232c6daa08edf3575c9bce1ee"



---

archive/issue_comments_615406.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-07T13:13:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615406",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615407.json:
```json
{
    "body": "Changing commit from \"95ff8c1c58896d1232c6daa08edf3575c9bce1ee\" to \"1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3\"",
    "created_at": "2020-12-07T13:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615407",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "95ff8c1c58896d1232c6daa08edf3575c9bce1ee" to "1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3"



---

archive/issue_comments_615408.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-07T13:26:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615408",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615409.json:
```json
{
    "body": "<a id='comment:24'></a>I've now rebased on top of develop and on #30940.",
    "created_at": "2020-12-07T13:27:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615409",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:24'></a>I've now rebased on top of develop and on #30940.



---

archive/issue_comments_615410.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-12-07T13:27:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615410",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_615411.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#30940\"",
    "created_at": "2020-12-07T13:27:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615411",
    "user": "https://github.com/tobiasdiez"
}
```

Changing dependencies from "" to "#30940"



---

archive/issue_comments_615412.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-12-07T19:18:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615412",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_615413.json:
```json
{
    "body": "<a id='comment:26'></a>This branch is seriously messed up... best to squash some of the intermediate commits",
    "created_at": "2020-12-07T19:18:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615413",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>This branch is seriously messed up... best to squash some of the intermediate commits



---

archive/issue_comments_615414.json:
```json
{
    "body": "<a id='comment:27'></a>I agree, everything should be squashed instead of merged for the final integration in `develop`/`master` - but that's going to happen anyway, right?",
    "created_at": "2020-12-07T19:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615414",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:27'></a>I agree, everything should be squashed instead of merged for the final integration in `develop`/`master` - but that's going to happen anyway, right?



---

archive/issue_comments_615415.json:
```json
{
    "body": "<a id='comment:28'></a>No, the branches of the tickets are merged as is, not squashed, by the release manager",
    "created_at": "2020-12-07T19:34:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615415",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>No, the branches of the tickets are merged as is, not squashed, by the release manager



---

archive/issue_comments_615416.json:
```json
{
    "body": "Changing commit from \"1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3\" to \"4fc77eebe6d78927483b72d934efcda485ba9229\"",
    "created_at": "2020-12-07T20:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615416",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3" to "4fc77eebe6d78927483b72d934efcda485ba9229"



---

archive/issue_comments_615417.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-12-07T20:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615417",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_615418.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [mkoeppe](#comment%3A28):\n> No, the branches of the tickets are merged as is, not squashed, by the release manager\n\n\nOk, I got the impression they are squashed by looking at https://github.com/sagemath/sage/commits/develop. I've now squashed everything.",
    "created_at": "2020-12-07T20:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615418",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:30'></a>Replying to [mkoeppe](#comment%3A28):
> No, the branches of the tickets are merged as is, not squashed, by the release manager


Ok, I got the impression they are squashed by looking at https://github.com/sagemath/sage/commits/develop. I've now squashed everything.



---

archive/issue_comments_615419.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-12-07T20:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615419",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_615420.json:
```json
{
    "body": "Changing commit from \"4fc77eebe6d78927483b72d934efcda485ba9229\" to \"9cfe6db1b51858b13f24efa053d8c9d9e45b0042\"",
    "created_at": "2020-12-07T20:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615420",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4fc77eebe6d78927483b72d934efcda485ba9229" to "9cfe6db1b51858b13f24efa053d8c9d9e45b0042"



---

archive/issue_comments_615421.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-07T20:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615421",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615422.json:
```json
{
    "body": "<a id='comment:33'></a>The doctest of `__getitem__` is not formatted correctly",
    "created_at": "2020-12-07T23:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615422",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>The doctest of `__getitem__` is not formatted correctly



---

archive/issue_comments_615423.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-07T23:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615423",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615424.json:
```json
{
    "body": "Changing commit from \"9cfe6db1b51858b13f24efa053d8c9d9e45b0042\" to \"51856852aa79738387f338321f3b1f094c45395e\"",
    "created_at": "2020-12-07T23:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9cfe6db1b51858b13f24efa053d8c9d9e45b0042" to "51856852aa79738387f338321f3b1f094c45395e"



---

archive/issue_comments_615425.json:
```json
{
    "body": "<a id='comment:35'></a>Replying to [mkoeppe](#comment%3A33):\n> The doctest of `__getitem__` is not formatted correctly\n\n\nHopefully fixed now. \n\n(doctest still don't run for me...e.g I now get RuntimeError: refusing to run doctests from the current directory '/mnt/d/Programming/sage' since untrusted users could put files in this directory, making it unsafe to run Sage code from)",
    "created_at": "2020-12-07T23:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615425",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:35'></a>Replying to [mkoeppe](#comment%3A33):
> The doctest of `__getitem__` is not formatted correctly


Hopefully fixed now. 

(doctest still don't run for me...e.g I now get RuntimeError: refusing to run doctests from the current directory '/mnt/d/Programming/sage' since untrusted users could put files in this directory, making it unsafe to run Sage code from)



---

archive/issue_comments_615426.json:
```json
{
    "body": "<a id='comment:36'></a>Build fails for me\n\n```\n  [sagelib-9.3.beta3]   Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1\n  [sagelib-9.3.beta3]   Discovering Python/Cython source code....\n  [sagelib-9.3.beta3]   ************************************************************************\n  [sagelib-9.3.beta3]   Traceback (most recent call last):\n  [sagelib-9.3.beta3]     File \"setup.py\", line 60, in <module>\n  [sagelib-9.3.beta3]       from sage.misc.package import is_package_installed_and_updated\n  [sagelib-9.3.beta3]     File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py\", line 177, in <module>\n  [sagelib-9.3.beta3]       class PackageInfo(NamedTuple):\n  [sagelib-9.3.beta3]   RuntimeError: __class__ not set defining 'PackageInfo' as <class 'sage.misc.package.PackageInfo'>. Was __classcell__ propagated to type.__new__?\n  [sagelib-9.3.beta3]   ************************************************************************\n  [sagelib-9.3.beta3]   Error building the Sage library\n  [sagelib-9.3.beta3]   ************************************************************************\n```",
    "created_at": "2020-12-08T01:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615426",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>Build fails for me

```
  [sagelib-9.3.beta3]   Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1
  [sagelib-9.3.beta3]   Discovering Python/Cython source code....
  [sagelib-9.3.beta3]   ************************************************************************
  [sagelib-9.3.beta3]   Traceback (most recent call last):
  [sagelib-9.3.beta3]     File "setup.py", line 60, in <module>
  [sagelib-9.3.beta3]       from sage.misc.package import is_package_installed_and_updated
  [sagelib-9.3.beta3]     File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py", line 177, in <module>
  [sagelib-9.3.beta3]       class PackageInfo(NamedTuple):
  [sagelib-9.3.beta3]   RuntimeError: __class__ not set defining 'PackageInfo' as <class 'sage.misc.package.PackageInfo'>. Was __classcell__ propagated to type.__new__?
  [sagelib-9.3.beta3]   ************************************************************************
  [sagelib-9.3.beta3]   Error building the Sage library
  [sagelib-9.3.beta3]   ************************************************************************
```



---

archive/issue_comments_615427.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-12-08T01:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615427",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_615428.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-08T09:48:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615428",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615429.json:
```json
{
    "body": "Changing commit from \"51856852aa79738387f338321f3b1f094c45395e\" to \"5472ee904b7da94378baa3f9e69916a0f35c95ed\"",
    "created_at": "2020-12-08T09:48:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615429",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "51856852aa79738387f338321f3b1f094c45395e" to "5472ee904b7da94378baa3f9e69916a0f35c95ed"



---

archive/issue_comments_615430.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-12-08T09:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615430",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_615431.json:
```json
{
    "body": "<a id='comment:38'></a>Replying to [mkoeppe](#comment%3A36):\n> Build fails for me\n\n\nShould be fixed now.\n\nCould you please have a look at #30901 and #30748. It's really awkward for me not be able to test my own changes. Thanks!",
    "created_at": "2020-12-08T09:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615431",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:38'></a>Replying to [mkoeppe](#comment%3A36):
> Build fails for me


Should be fixed now.

Could you please have a look at #30901 and #30748. It's really awkward for me not be able to test my own changes. Thanks!



---

archive/issue_comments_615432.json:
```json
{
    "body": "<a id='comment:39'></a>\n```\n[sagelib-9.3.beta3] Discovering Python/Cython source code....\n[sagelib-9.3.beta3] ************************************************************************\n[sagelib-9.3.beta3] Traceback (most recent call last):\n[sagelib-9.3.beta3]   File \"setup.py\", line 60, in <module>\n[sagelib-9.3.beta3]     from sage.misc.package import is_package_installed_and_updated\n[sagelib-9.3.beta3]   File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py\", line 434, in <module>\n[sagelib-9.3.beta3]     all_packages = list_packages(local=True)\n[sagelib-9.3.beta3]   File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py\", line 329, in list_packages\n[sagelib-9.3.beta3]     pkg.name = p\n[sagelib-9.3.beta3] AttributeError: can't set attribute\n[sagelib-9.3.beta3] ************************************************************************\n```",
    "created_at": "2020-12-09T02:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615432",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>
```
[sagelib-9.3.beta3] Discovering Python/Cython source code....
[sagelib-9.3.beta3] ************************************************************************
[sagelib-9.3.beta3] Traceback (most recent call last):
[sagelib-9.3.beta3]   File "setup.py", line 60, in <module>
[sagelib-9.3.beta3]     from sage.misc.package import is_package_installed_and_updated
[sagelib-9.3.beta3]   File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py", line 434, in <module>
[sagelib-9.3.beta3]     all_packages = list_packages(local=True)
[sagelib-9.3.beta3]   File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py", line 329, in list_packages
[sagelib-9.3.beta3]     pkg.name = p
[sagelib-9.3.beta3] AttributeError: can't set attribute
[sagelib-9.3.beta3] ************************************************************************
```



---

archive/issue_comments_615433.json:
```json
{
    "body": "Changing commit from \"5472ee904b7da94378baa3f9e69916a0f35c95ed\" to \"0bb7738255072b03b52488f408fdc9a7cf8e5c1d\"",
    "created_at": "2020-12-09T09:57:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615433",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5472ee904b7da94378baa3f9e69916a0f35c95ed" to "0bb7738255072b03b52488f408fdc9a7cf8e5c1d"



---

archive/issue_comments_615434.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-09T09:57:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615435.json:
```json
{
    "body": "<a id='comment:41'></a>Sorry should have tested it after the merge. Should work now.",
    "created_at": "2020-12-09T10:01:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615435",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:41'></a>Sorry should have tested it after the merge. Should work now.



---

archive/issue_comments_615436.json:
```json
{
    "body": "<a id='comment:42'></a>\n```diff\n-                deprecation(31013, \"dict-like access is deprecated, use e.g `pkg.name` instead of `pkg[name]`\")\n+                deprecation(31013, \"dict-like access is deprecated, use e.g `pkg.name` instead of `pkg['name']`\")\n```",
    "created_at": "2020-12-09T19:24:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615436",
    "user": "https://github.com/kliem"
}
```

<a id='comment:42'></a>
```diff
-                deprecation(31013, "dict-like access is deprecated, use e.g `pkg.name` instead of `pkg[name]`")
+                deprecation(31013, "dict-like access is deprecated, use e.g `pkg.name` instead of `pkg['name']`")
```



---

archive/issue_comments_615437.json:
```json
{
    "body": "<a id='comment:43'></a>\n```\nRunning doctests with ID 2020-12-09-21-48-42-bac7d593.\nGit branch: test/31013\nUsing --optional=4ti2,build,debian,dochtml,e_antic,lidia,lrslib,mcqd,memlimit,normaliz,pip,pynormaliz,pyroaringbitmap,python_igraph,rubiks,sage,sage_spkg,speaklater,texttable     \nDoctesting 1 file.\nsage -t --random-seed=0 src/sage/misc/package.py\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 194, in sage.misc.package.PackageInfo\nFailed example:\n    package = PackageInfo(\"test_package\")\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.PackageInfo[0]>\", line 1, in <module>\n        package = PackageInfo(\"test_package\")\n    NameError: name 'PackageInfo' is not defined\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 195, in sage.misc.package.PackageInfo\nFailed example:\n    package[\"name\"]\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.PackageInfo[1]>\", line 1, in <module>\n        package[\"name\"]\n    NameError: name 'package' is not defined\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 199, in sage.misc.package.PackageInfo\nFailed example:\n    package[0]\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.PackageInfo[2]>\", line 1, in <module>\n        package[Integer(0)]\n    NameError: name 'package' is not defined\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 263, in sage.misc.package.pkg_sources\nFailed example:\n    sage_conf_info.installed # optional - build\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.pkg_sources[5]>\", line 1, in <module>\n        sage_conf_info.installed # optional - build\n    AttributeError: 'PackageInfo' object has no attribute 'installed'\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 413, in sage.misc.package.is_package_installed\nFailed example:\n    for pkg in list_packages(pkg_sources=('pip'), local=True):  # optional - build\n        assert not is_package_installed(pkg), \"pip package is installed: {}\".format(pkg)\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.is_package_installed[3]>\", line 2, in <module>\n        assert not is_package_installed(pkg), \"pip package is installed: {}\".format(pkg)\n    AssertionError: pip package is installed: itsdangerous\n**********************************************************************\n3 items had failures:\n   3 of   4 in sage.misc.package.PackageInfo\n   1 of   5 in sage.misc.package.is_package_installed\n   1 of   9 in sage.misc.package.pkg_sources\n    [55 tests, 5 failures, 2.38 s]\n----------------------------------------------------------------------\nsage -t --random-seed=0 src/sage/misc/package.py  # 5 doctests failed\n```\n\nEverything else passes. Build as well.",
    "created_at": "2020-12-09T20:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615437",
    "user": "https://github.com/kliem"
}
```

<a id='comment:43'></a>
```
Running doctests with ID 2020-12-09-21-48-42-bac7d593.
Git branch: test/31013
Using --optional=4ti2,build,debian,dochtml,e_antic,lidia,lrslib,mcqd,memlimit,normaliz,pip,pynormaliz,pyroaringbitmap,python_igraph,rubiks,sage,sage_spkg,speaklater,texttable     
Doctesting 1 file.
sage -t --random-seed=0 src/sage/misc/package.py
**********************************************************************
File "src/sage/misc/package.py", line 194, in sage.misc.package.PackageInfo
Failed example:
    package = PackageInfo("test_package")
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.PackageInfo[0]>", line 1, in <module>
        package = PackageInfo("test_package")
    NameError: name 'PackageInfo' is not defined
**********************************************************************
File "src/sage/misc/package.py", line 195, in sage.misc.package.PackageInfo
Failed example:
    package["name"]
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.PackageInfo[1]>", line 1, in <module>
        package["name"]
    NameError: name 'package' is not defined
**********************************************************************
File "src/sage/misc/package.py", line 199, in sage.misc.package.PackageInfo
Failed example:
    package[0]
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.PackageInfo[2]>", line 1, in <module>
        package[Integer(0)]
    NameError: name 'package' is not defined
**********************************************************************
File "src/sage/misc/package.py", line 263, in sage.misc.package.pkg_sources
Failed example:
    sage_conf_info.installed # optional - build
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.pkg_sources[5]>", line 1, in <module>
        sage_conf_info.installed # optional - build
    AttributeError: 'PackageInfo' object has no attribute 'installed'
**********************************************************************
File "src/sage/misc/package.py", line 413, in sage.misc.package.is_package_installed
Failed example:
    for pkg in list_packages(pkg_sources=('pip'), local=True):  # optional - build
        assert not is_package_installed(pkg), "pip package is installed: {}".format(pkg)
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.is_package_installed[3]>", line 2, in <module>
        assert not is_package_installed(pkg), "pip package is installed: {}".format(pkg)
    AssertionError: pip package is installed: itsdangerous
**********************************************************************
3 items had failures:
   3 of   4 in sage.misc.package.PackageInfo
   1 of   5 in sage.misc.package.is_package_installed
   1 of   9 in sage.misc.package.pkg_sources
    [55 tests, 5 failures, 2.38 s]
----------------------------------------------------------------------
sage -t --random-seed=0 src/sage/misc/package.py  # 5 doctests failed
```

Everything else passes. Build as well.



---

archive/issue_comments_615438.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-12-09T20:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615438",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_615439.json:
```json
{
    "body": "Changing commit from \"0bb7738255072b03b52488f408fdc9a7cf8e5c1d\" to \"6b82d90810dfa0c839143e0d248f8b8731dad821\"",
    "created_at": "2020-12-10T17:45:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615439",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0bb7738255072b03b52488f408fdc9a7cf8e5c1d" to "6b82d90810dfa0c839143e0d248f8b8731dad821"



---

archive/issue_comments_615440.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-10T17:45:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615440",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615441.json:
```json
{
    "body": "<a id='comment:45'></a>I have fixed a few things but the assertion error remains to be fixed",
    "created_at": "2020-12-10T17:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615441",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>I have fixed a few things but the assertion error remains to be fixed



---

archive/issue_comments_615442.json:
```json
{
    "body": "<a id='comment:46'></a>Latest #30940 also needs to be merged",
    "created_at": "2020-12-16T23:51:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615442",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>Latest #30940 also needs to be merged



---

archive/issue_comments_615443.json:
```json
{
    "body": "<a id='comment:47'></a>The dependency has been merged in 9.3.beta6. Needs rebase",
    "created_at": "2021-01-19T20:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615443",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>The dependency has been merged in 9.3.beta6. Needs rebase



---

archive/issue_comments_615444.json:
```json
{
    "body": "Changing dependencies from \"#30940\" to \"\"",
    "created_at": "2021-01-19T20:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615444",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30940" to ""



---

archive/issue_comments_615445.json:
```json
{
    "body": "Changing commit from \"6b82d90810dfa0c839143e0d248f8b8731dad821\" to \"2eee85882a27e5538a1139cd25384f19859a8e23\"",
    "created_at": "2021-01-19T21:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615445",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6b82d90810dfa0c839143e0d248f8b8731dad821" to "2eee85882a27e5538a1139cd25384f19859a8e23"



---

archive/issue_comments_615446.json:
```json
{
    "body": "<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-19T21:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615446",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615447.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-01-19T21:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615447",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_615448.json:
```json
{
    "body": "<a id='comment:49'></a>Locally, all tests pass for me now. So this should be ready for review.",
    "created_at": "2021-01-19T21:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615448",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:49'></a>Locally, all tests pass for me now. So this should be ready for review.



---

archive/issue_comments_615449.json:
```json
{
    "body": "<a id='comment:50'></a>Tests pass for me, too.\n\n```\nall_packages = list_packages(local=True)\n```\nIt was fine to executed this code at module load time in `sage_setup.optional_extension`,  but I don't think it is good to do so at load time of `sage.misc.package`.\n\nAlso `is_package_installed_and_updated` would need documentation + test as it is moved to sagelib",
    "created_at": "2021-01-30T23:16:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615449",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:50'></a>Tests pass for me, too.

```
all_packages = list_packages(local=True)
```
It was fine to executed this code at module load time in `sage_setup.optional_extension`,  but I don't think it is good to do so at load time of `sage.misc.package`.

Also `is_package_installed_and_updated` would need documentation + test as it is moved to sagelib



---

archive/issue_comments_615450.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-01-30T23:16:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615450",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_615451.json:
```json
{
    "body": "Changing commit from \"2eee85882a27e5538a1139cd25384f19859a8e23\" to \"541fa1bbe08ed7bcda32b33e5328c6259d03e790\"",
    "created_at": "2021-02-02T17:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615451",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2eee85882a27e5538a1139cd25384f19859a8e23" to "541fa1bbe08ed7bcda32b33e5328c6259d03e790"



---

archive/issue_comments_615452.json:
```json
{
    "body": "<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-02T17:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615452",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615453.json:
```json
{
    "body": "<a id='comment:52'></a>> Also is_package_installed_and_updated would need documentation + test as it is moved to sagelib \n\nOk done.\n\nI've removed the caching completely, because this probably is best done at the level of `list_packages` anyway.",
    "created_at": "2021-02-02T17:13:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615453",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:52'></a>> Also is_package_installed_and_updated would need documentation + test as it is moved to sagelib 

Ok done.

I've removed the caching completely, because this probably is best done at the level of `list_packages` anyway.



---

archive/issue_comments_615454.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-02-02T17:14:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615454",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_615455.json:
```json
{
    "body": "<a id='comment:54'></a>Removing caching will probably make `setup.py` somewhat slower, so I am not sure this is a good idea.",
    "created_at": "2021-02-02T17:43:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615455",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:54'></a>Removing caching will probably make `setup.py` somewhat slower, so I am not sure this is a good idea.



---

archive/issue_comments_615456.json:
```json
{
    "body": "<a id='comment:55'></a>Perhaps it's best to split this ticket and only do the interface improvement for `list_packages` here.",
    "created_at": "2021-02-02T17:45:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615456",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'></a>Perhaps it's best to split this ticket and only do the interface improvement for `list_packages` here.



---

archive/issue_comments_615457.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-02-10T20:28:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615457",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_615458.json:
```json
{
    "body": "<a id='comment:57'></a>Replying to [mkoeppe](#comment%3A55):\n> Perhaps it's best to split this ticket \n\n\n... I have opened #31385 (Improve interface of `list_packages`)",
    "created_at": "2021-02-12T00:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615458",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:57'></a>Replying to [mkoeppe](#comment%3A55):
> Perhaps it's best to split this ticket 


... I have opened #31385 (Improve interface of `list_packages`)



---

archive/issue_comments_615459.json:
```json
{
    "body": "<a id='comment:58'></a>Thanks!",
    "created_at": "2021-02-12T08:56:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615459",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:58'></a>Thanks!



---

archive/issue_comments_615460.json:
```json
{
    "body": "Changing work_issues from \"\" to \"rebase on #31385\"",
    "created_at": "2021-02-12T20:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615460",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "" to "rebase on #31385"



---

archive/issue_comments_615461.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). \n-The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package` (where also a bit of typing info is added).\n+The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package`.\n \n Related: #28815\n``````\n",
    "created_at": "2021-02-12T20:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615461",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). 
-The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package` (where also a bit of typing info is added).
+The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package`.
 
 Related: #28815
``````




---

archive/issue_comments_615462.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#31385\"",
    "created_at": "2021-02-12T20:58:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615462",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#31385"



---

archive/issue_events_080987.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31013#event-80987"
}
```



---

archive/issue_comments_615463.json:
```json
{
    "body": "<a id='comment:60'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615463",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:60'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_080988.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31013#event-80988"
}
```



---

archive/issue_events_080989.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31013#event-80989"
}
```



---

archive/issue_comments_615464.json:
```json
{
    "body": "<a id='comment:61'></a>Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615464",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:61'></a>Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_615465.json:
```json
{
    "body": "Changing commit from \"541fa1bbe08ed7bcda32b33e5328c6259d03e790\" to \"6c67908838f12bf11e9c986ba5c13ff9b758dc13\"",
    "created_at": "2021-11-26T21:38:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615465",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "541fa1bbe08ed7bcda32b33e5328c6259d03e790" to "6c67908838f12bf11e9c986ba5c13ff9b758dc13"



---

archive/issue_comments_615466.json:
```json
{
    "body": "<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-26T21:38:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615466",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615467.json:
```json
{
    "body": "<a id='comment:63'></a>Rebased, so this is now ready for review.",
    "created_at": "2021-11-26T21:40:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615467",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:63'></a>Rebased, so this is now ready for review.



---

archive/issue_comments_615468.json:
```json
{
    "body": "Changing work_issues from \"rebase on #31385\" to \"\"",
    "created_at": "2021-11-26T21:40:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615468",
    "user": "https://github.com/tobiasdiez"
}
```

Changing work_issues from "rebase on #31385" to ""



---

archive/issue_comments_615469.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-11-26T21:40:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615469",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_080990.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31013#event-80990"
}
```



---

archive/issue_events_080991.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31013#event-80991"
}
```



---

archive/issue_comments_615470.json:
```json
{
    "body": "<a id='comment:64'></a>Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615470",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:64'></a>Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_comments_615471.json:
```json
{
    "body": "<a id='comment:65'></a>Yes, I would appreciate if this ticket could be reviewed!",
    "created_at": "2021-12-19T20:33:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615471",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:65'></a>Yes, I would appreciate if this ticket could be reviewed!



---

archive/issue_comments_615472.json:
```json
{
    "body": "Changing commit from \"6c67908838f12bf11e9c986ba5c13ff9b758dc13\" to \"a7b1e818d0a0a8da264017dbc81be2984bd56d57\"",
    "created_at": "2022-01-03T12:28:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615472",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6c67908838f12bf11e9c986ba5c13ff9b758dc13" to "a7b1e818d0a0a8da264017dbc81be2984bd56d57"



---

archive/issue_comments_615473.json:
```json
{
    "body": "<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-01-03T12:28:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615473",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615474.json:
```json
{
    "body": "Changing dependencies from \"#31385\" to \"\"",
    "created_at": "2022-01-03T12:31:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615474",
    "user": "https://github.com/tobiasdiez"
}
```

Changing dependencies from "#31385" to ""



---

archive/issue_comments_615475.json:
```json
{
    "body": "<a id='comment:69'></a>Thanks for copying me Matthias. I was aware of this ticket and I guess it will at least remove some pesky doctests. Otherwise it will just make me move some patch from one file to another.\n\n`is_package_installed_and_updated` is one of those things I am patiently waiting for the modularisation of sage to kill. In the meantime I am patching an alternative mechanism anyway.",
    "created_at": "2022-01-10T04:20:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615475",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:69'></a>Thanks for copying me Matthias. I was aware of this ticket and I guess it will at least remove some pesky doctests. Otherwise it will just make me move some patch from one file to another.

`is_package_installed_and_updated` is one of those things I am patiently waiting for the modularisation of sage to kill. In the meantime I am patching an alternative mechanism anyway.



---

archive/issue_comments_615476.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-01-10T04:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615476",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_615477.json:
```json
{
    "body": "<a id='comment:70'></a>Other than that, if you copied me for the review, it all looks good and sensible to me.",
    "created_at": "2022-01-10T04:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615477",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:70'></a>Other than that, if you copied me for the review, it all looks good and sensible to me.



---

archive/issue_comments_615478.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fran\u00e7ois Bissey\"",
    "created_at": "2022-01-10T04:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615478",
    "user": "https://github.com/kiwifb"
}
```

Changing reviewer from "" to "Fran√ßois Bissey"



---

archive/issue_comments_615479.json:
```json
{
    "body": "<a id='comment:71'></a>Thanks for the review!",
    "created_at": "2022-01-10T12:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615479",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:71'></a>Thanks for the review!



---

archive/issue_comments_615480.json:
```json
{
    "body": "Changing branch from \"public/build/remove_optional_extension\" to \"a7b1e818d0a0a8da264017dbc81be2984bd56d57\"",
    "created_at": "2022-01-31T23:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615480",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/build/remove_optional_extension" to "a7b1e818d0a0a8da264017dbc81be2984bd56d57"



---

archive/issue_comments_615481.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-01-31T23:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31013#issuecomment-615481",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_080992.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-31T23:31:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31013",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31013#event-80992"
}
```
