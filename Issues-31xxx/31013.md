# Issue 31013: Remove unused class from sage_setup.optional extension

archive/issues_030776.json:
```json
{
    "assignees": [],
    "body": "The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). \nThe only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package`.\n\nRelated: #28815\n\n**CC:**  @mkoeppe @kiwifb\n\n**Keywords:** sd111\n\n**Branch/Commit:** [a7b1e818d0a0a8da264017dbc81be2984bd56d57](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)\n\n**Reviewer:** Fran\u00e7ois Bissey\n\n**Author:** Tobias Diez\n\nIssue created by migration from https://trac.sagemath.org/ticket/31013\n\n",
    "closed_at": "2022-01-31T23:31:41Z",
    "created_at": "2020-12-05T18:36:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Remove unused class from sage_setup.optional extension",
    "type": "issue",
    "updated_at": "2022-01-31T23:31:41Z",
    "url": "https://github.com/sagemath/sage/issues/31013",
    "user": "https://github.com/tobiasdiez"
}
```
The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). 
The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package`.

Related: #28815

**CC:**  @mkoeppe @kiwifb

**Keywords:** sd111

**Branch/Commit:** [a7b1e818d0a0a8da264017dbc81be2984bd56d57](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)

**Reviewer:** Fran√ßois Bissey

**Author:** Tobias Diez

Issue created by migration from https://trac.sagemath.org/ticket/31013





---

archive/issue_events_376108.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T18:36:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376108"
}
```



---

archive/issue_events_376109.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T18:36:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "08517b",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376109"
}
```



---

archive/issue_events_376110.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T18:36:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376110"
}
```



---

archive/issue_events_376111.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T18:36:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376111"
}
```



---

archive/issue_comments_499792.json:
```json
{
    "body": "**Changing commit** from \"[508075cb9f6558c267c546f2fdff6cd1dac0cf83](https://github.com/sagemath/sagetrac-mirror/commit/508075cb9f6558c267c546f2fdff6cd1dac0cf83)\" to \"[2492f1ec3e9258c8cb05df19fd90946c8a55932c](https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c)\".",
    "created_at": "2020-12-05T18:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499792",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[508075cb9f6558c267c546f2fdff6cd1dac0cf83](https://github.com/sagemath/sagetrac-mirror/commit/508075cb9f6558c267c546f2fdff6cd1dac0cf83)" to "[2492f1ec3e9258c8cb05df19fd90946c8a55932c](https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c)".



---

archive/issue_comments_499793.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c\">2492f1e</a></td><td><code>Code cleanup</code></td></tr></table>\n",
    "created_at": "2020-12-05T18:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499793",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c">2492f1e</a></td><td><code>Code cleanup</code></td></tr></table>




---

archive/issue_comments_499794.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). \n The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package` (where also a bit of typing info is added).\n+\n+Related: #28815\n``````\n",
    "created_at": "2020-12-05T18:38:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499794",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). 
 The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package` (where also a bit of typing info is added).
+
+Related: #28815
``````




---

archive/issue_comments_499795.json:
```json
{
    "body": "<a id='comment:4'></a>\nCan't make incompatible changes to the interface of a public function",
    "created_at": "2020-12-05T18:39:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499795",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
Can't make incompatible changes to the interface of a public function



---

archive/issue_comments_499796.json:
```json
{
    "body": "<a id='comment:5'></a>\n(I'm referring to the `list_packages` function)",
    "created_at": "2020-12-05T18:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499796",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
(I'm referring to the `list_packages` function)



---

archive/issue_comments_499797.json:
```json
{
    "body": "<a id='comment:6'></a>\nIt's also conflicting with the changes in #30940 (which needs review)",
    "created_at": "2020-12-05T18:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499797",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
It's also conflicting with the changes in #30940 (which needs review)



---

archive/issue_comments_499798.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09\">649ffff</a></td><td><code>Fix build</code></td></tr></table>\n",
    "created_at": "2020-12-05T18:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499798",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09">649ffff</a></td><td><code>Fix build</code></td></tr></table>




---

archive/issue_comments_499799.json:
```json
{
    "body": "**Changing commit** from \"[2492f1ec3e9258c8cb05df19fd90946c8a55932c](https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c)\" to \"[649ffff0142a666f541b1d7a90e3680bd408ba09](https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09)\".",
    "created_at": "2020-12-05T18:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499799",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[2492f1ec3e9258c8cb05df19fd90946c8a55932c](https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c)" to "[649ffff0142a666f541b1d7a90e3680bd408ba09](https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09)".



---

archive/issue_comments_499800.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [@mkoeppe](#comment%3A4):\n> Can't make incompatible changes to the interface of a public function\n\nSo one cannot change public facing functions at all? What is the policy/strategy for this? Introduce a new method, say `list_packages_typed`?\n\n> It's also conflicting with the changes in #30940 (which needs review)\n\nI wouldn't say it's conflicting, just results in easy-to-resolve merge conflicts.",
    "created_at": "2020-12-05T19:20:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499800",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:8'></a>
Replying to [@mkoeppe](#comment%3A4):
> Can't make incompatible changes to the interface of a public function

So one cannot change public facing functions at all? What is the policy/strategy for this? Introduce a new method, say `list_packages_typed`?

> It's also conflicting with the changes in #30940 (which needs review)

I wouldn't say it's conflicting, just results in easy-to-resolve merge conflicts.



---

archive/issue_comments_499801.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [@tobiasdiez](#comment%3A8):\n> Replying to [@mkoeppe](#comment%3A4):\n> > Can't make incompatible changes to the interface of a public function\n\n> \n> So one cannot change public facing functions at all? What is the policy/strategy for this? Introduce a new method, say `list_packages_typed`?\n\nIt could be a new function (with deprecation for the old one), or an optional argument that controls the return type, ...\n\nBut in this particular case, it would probably be good enough to just give the new class dictionary-like behavior so that user code can continue to access the slots like a dictionary. Possibly with deprecation warning.",
    "created_at": "2020-12-05T19:33:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499801",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Replying to [@tobiasdiez](#comment%3A8):
> Replying to [@mkoeppe](#comment%3A4):
> > Can't make incompatible changes to the interface of a public function

> 
> So one cannot change public facing functions at all? What is the policy/strategy for this? Introduce a new method, say `list_packages_typed`?

It could be a new function (with deprecation for the old one), or an optional argument that controls the return type, ...

But in this particular case, it would probably be good enough to just give the new class dictionary-like behavior so that user code can continue to access the slots like a dictionary. Possibly with deprecation warning.



---

archive/issue_comments_499802.json:
```json
{
    "body": "**Changing commit** from \"[649ffff0142a666f541b1d7a90e3680bd408ba09](https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09)\" to \"[26b59ad06672b1dc9b99c2bb22acce7c8b3110c4](https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4)\".",
    "created_at": "2020-12-05T20:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499802",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[649ffff0142a666f541b1d7a90e3680bd408ba09](https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09)" to "[26b59ad06672b1dc9b99c2bb22acce7c8b3110c4](https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4)".



---

archive/issue_comments_499803.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4\">26b59ad</a></td><td><code>Implement __getitem__</code></td></tr></table>\n",
    "created_at": "2020-12-05T20:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499803",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4">26b59ad</a></td><td><code>Implement __getitem__</code></td></tr></table>




---

archive/issue_comments_499804.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [@mkoeppe](#comment%3A9):\n> But in this particular case, it would probably be good enough to just give the new class dictionary-like behavior so that user code can continue to access the slots like a dictionary. Possibly with deprecation warning.\n> \n\nThat's a nice idea, implemented!",
    "created_at": "2020-12-05T20:16:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499804",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:11'></a>
Replying to [@mkoeppe](#comment%3A9):
> But in this particular case, it would probably be good enough to just give the new class dictionary-like behavior so that user code can continue to access the slots like a dictionary. Possibly with deprecation warning.
> 

That's a nice idea, implemented!



---

archive/issue_comments_499805.json:
```json
{
    "body": "<a id='comment:12'></a>\nInstead of \"string-based access\", perhaps this should be called \"dict-like access\" in the deprecation messages?",
    "created_at": "2020-12-05T20:44:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499805",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
Instead of "string-based access", perhaps this should be called "dict-like access" in the deprecation messages?



---

archive/issue_comments_499806.json:
```json
{
    "body": "<a id='comment:13'></a>\nI think in this change you need to use `is_installed()` instead\n\n```\n--- a/src/bin/sage-list-packages\n+++ b/src/bin/sage-list-packages\n@@ -91,16 +91,16 @@ else:\n if WARN:\n     print(WARN)\n if args['installed_only']:\n-    L = [pkg for pkg in L if pkg['installed']]\n+    L = [pkg for pkg in L if pkg.installed]\n elif args['not_installed_only']:\n-    L = [pkg for pkg in L if not pkg['installed']]\n+    L = [pkg for pkg in L if not pkg.installed]\n```",
    "created_at": "2020-12-06T00:20:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499806",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
I think in this change you need to use `is_installed()` instead

```
--- a/src/bin/sage-list-packages
+++ b/src/bin/sage-list-packages
@@ -91,16 +91,16 @@ else:
 if WARN:
     print(WARN)
 if args['installed_only']:
-    L = [pkg for pkg in L if pkg['installed']]
+    L = [pkg for pkg in L if pkg.installed]
 elif args['not_installed_only']:
-    L = [pkg for pkg in L if not pkg['installed']]
+    L = [pkg for pkg in L if not pkg.installed]
```



---

archive/issue_events_376112.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-06T00:20:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376112"
}
```



---

archive/issue_events_376113.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-06T00:20:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376113"
}
```



---

archive/issue_events_376114.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-06T00:20:38Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "rename": {
        "from": "Remove unused optional extension",
        "to": "Remove unused optional extension, improve interface of list_packages"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376114"
}
```



---

archive/issue_comments_499807.json:
```json
{
    "body": "<a id='comment:16'></a>\nHoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499807",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_499808.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd111\".",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499808",
    "user": "https://github.com/mkoeppe"
}
```

**Changing keywords** from "" to "sd111".



---

archive/issue_comments_499809.json:
```json
{
    "body": "**Changing commit** from \"[26b59ad06672b1dc9b99c2bb22acce7c8b3110c4](https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4)\" to \"[0c10be07ade50949f599b70ce255c2100bd60c6a](https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a)\".",
    "created_at": "2020-12-06T22:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499809",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[26b59ad06672b1dc9b99c2bb22acce7c8b3110c4](https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4)" to "[0c10be07ade50949f599b70ce255c2100bd60c6a](https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a)".



---

archive/issue_comments_499810.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a\">0c10be0</a></td><td><code>Fix build</code></td></tr></table>\n",
    "created_at": "2020-12-06T22:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499810",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a">0c10be0</a></td><td><code>Fix build</code></td></tr></table>




---

archive/issue_comments_499811.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [@mkoeppe](#comment%3A13):\n> I think in this change you need to use `is_installed()` instead\n\nIndeed, thanks!",
    "created_at": "2020-12-06T22:25:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499811",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:18'></a>
Replying to [@mkoeppe](#comment%3A13):
> I think in this change you need to use `is_installed()` instead

Indeed, thanks!



---

archive/issue_events_376115.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-06T22:25:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376115"
}
```



---

archive/issue_events_376116.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-06T22:25:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376116"
}
```



---

archive/issue_comments_499812.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [@mkoeppe](#comment%3A16):\n> Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111\n\nI try to join, but I'm on vacation this week...",
    "created_at": "2020-12-06T22:25:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499812",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:19'></a>
Replying to [@mkoeppe](#comment%3A16):
> Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111

I try to join, but I'm on vacation this week...



---

archive/issue_comments_499813.json:
```json
{
    "body": "<a id='comment:20'></a>\nNeeds rebase on latest beta",
    "created_at": "2020-12-07T00:15:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499813",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>
Needs rebase on latest beta



---

archive/issue_events_376117.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-07T00:15:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376117"
}
```



---

archive/issue_events_376118.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-07T00:15:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376118"
}
```



---

archive/issue_comments_499814.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/008bfd2a74eb9e7e5eef165f4ad4b1a351af9122\">008bfd2</a></td><td><code>Merge branch 'u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available' of git://trac.sagemath.org/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd2269b6c4881cac87a683afe2e32cdea42016e7\">bd2269b</a></td><td><code>Finish merge</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa\">0213e20</a></td><td><code>Finish interface cleanup</code></td></tr></table>\n",
    "created_at": "2020-12-07T13:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499814",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/008bfd2a74eb9e7e5eef165f4ad4b1a351af9122">008bfd2</a></td><td><code>Merge branch 'u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available' of git://trac.sagemath.org/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd2269b6c4881cac87a683afe2e32cdea42016e7">bd2269b</a></td><td><code>Finish merge</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa">0213e20</a></td><td><code>Finish interface cleanup</code></td></tr></table>




---

archive/issue_comments_499815.json:
```json
{
    "body": "**Changing commit** from \"[0c10be07ade50949f599b70ce255c2100bd60c6a](https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a)\" to \"[0213e20fd015b7d4da6da5493c7e73872e7fe1fa](https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa)\".",
    "created_at": "2020-12-07T13:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499815",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[0c10be07ade50949f599b70ce255c2100bd60c6a](https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a)" to "[0213e20fd015b7d4da6da5493c7e73872e7fe1fa](https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa)".



---

archive/issue_comments_499816.json:
```json
{
    "body": "**Changing commit** from \"[0213e20fd015b7d4da6da5493c7e73872e7fe1fa](https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa)\" to \"[95ff8c1c58896d1232c6daa08edf3575c9bce1ee](https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee)\".",
    "created_at": "2020-12-07T13:13:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499816",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[0213e20fd015b7d4da6da5493c7e73872e7fe1fa](https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa)" to "[95ff8c1c58896d1232c6daa08edf3575c9bce1ee](https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee)".



---

archive/issue_comments_499817.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee\">95ff8c1</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr></table>\n",
    "created_at": "2020-12-07T13:13:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499817",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee">95ff8c1</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr></table>




---

archive/issue_comments_499818.json:
```json
{
    "body": "**Changing commit** from \"[95ff8c1c58896d1232c6daa08edf3575c9bce1ee](https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee)\" to \"[1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3](https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3)\".",
    "created_at": "2020-12-07T13:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499818",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[95ff8c1c58896d1232c6daa08edf3575c9bce1ee](https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee)" to "[1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3](https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3)".



---

archive/issue_comments_499819.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3\">1d72cc6</a></td><td><code>Fix symlinks</code></td></tr></table>\n",
    "created_at": "2020-12-07T13:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499819",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3">1d72cc6</a></td><td><code>Fix symlinks</code></td></tr></table>




---

archive/issue_comments_499820.json:
```json
{
    "body": "<a id='comment:24'></a>\nI've now rebased on top of develop and on #30940.",
    "created_at": "2020-12-07T13:27:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499820",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:24'></a>
I've now rebased on top of develop and on #30940.



---

archive/issue_events_376119.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T13:27:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376119"
}
```



---

archive/issue_events_376120.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T13:27:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376120"
}
```



---

archive/issue_comments_499821.json:
```json
{
    "body": "**Dependencies:** #30940",
    "created_at": "2020-12-07T13:27:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499821",
    "user": "https://github.com/tobiasdiez"
}
```

**Dependencies:** #30940



---

archive/issue_events_376121.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-07T19:18:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376121"
}
```



---

archive/issue_events_376122.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-07T19:18:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376122"
}
```



---

archive/issue_comments_499822.json:
```json
{
    "body": "<a id='comment:26'></a>\nThis branch is seriously messed up... best to squash some of the intermediate commits",
    "created_at": "2020-12-07T19:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499822",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
This branch is seriously messed up... best to squash some of the intermediate commits



---

archive/issue_comments_499823.json:
```json
{
    "body": "<a id='comment:27'></a>\nI agree, everything should be squashed instead of merged for the final integration in `develop`/`master` - but that's going to happen anyway, right?",
    "created_at": "2020-12-07T19:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499823",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:27'></a>
I agree, everything should be squashed instead of merged for the final integration in `develop`/`master` - but that's going to happen anyway, right?



---

archive/issue_comments_499824.json:
```json
{
    "body": "<a id='comment:28'></a>\nNo, the branches of the tickets are merged as is, not squashed, by the release manager",
    "created_at": "2020-12-07T19:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499824",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>
No, the branches of the tickets are merged as is, not squashed, by the release manager



---

archive/issue_comments_499825.json:
```json
{
    "body": "**Changing commit** from \"[1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3](https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3)\" to \"[4fc77eebe6d78927483b72d934efcda485ba9229](https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229)\".",
    "created_at": "2020-12-07T20:17:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499825",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3](https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3)" to "[4fc77eebe6d78927483b72d934efcda485ba9229](https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229)".



---

archive/issue_comments_499826.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229\">4fc77ee</a></td><td><code>Remove unused optional extension, improve interface of list_packages</code></td></tr></table>\n",
    "created_at": "2020-12-07T20:17:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499826",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229">4fc77ee</a></td><td><code>Remove unused optional extension, improve interface of list_packages</code></td></tr></table>




---

archive/issue_comments_499827.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [@mkoeppe](#comment%3A28):\n> No, the branches of the tickets are merged as is, not squashed, by the release manager\n\nOk, I got the impression they are squashed by looking at https://github.com/sagemath/sage/commits/develop. I've now squashed everything.",
    "created_at": "2020-12-07T20:19:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499827",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:30'></a>
Replying to [@mkoeppe](#comment%3A28):
> No, the branches of the tickets are merged as is, not squashed, by the release manager

Ok, I got the impression they are squashed by looking at https://github.com/sagemath/sage/commits/develop. I've now squashed everything.



---

archive/issue_events_376123.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T20:19:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376123"
}
```



---

archive/issue_events_376124.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T20:19:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376124"
}
```



---

archive/issue_comments_499828.json:
```json
{
    "body": "**Changing commit** from \"[4fc77eebe6d78927483b72d934efcda485ba9229](https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229)\" to \"[9cfe6db1b51858b13f24efa053d8c9d9e45b0042](https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042)\".",
    "created_at": "2020-12-07T20:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499828",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[4fc77eebe6d78927483b72d934efcda485ba9229](https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229)" to "[9cfe6db1b51858b13f24efa053d8c9d9e45b0042](https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042)".



---

archive/issue_comments_499829.json:
```json
{
    "body": "<a id='comment:32'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042\">9cfe6db</a></td><td><code>dict-like instead of string-based</code></td></tr></table>\n",
    "created_at": "2020-12-07T20:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499829",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:32'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042">9cfe6db</a></td><td><code>dict-like instead of string-based</code></td></tr></table>




---

archive/issue_comments_499830.json:
```json
{
    "body": "<a id='comment:33'></a>\nThe doctest of `__getitem__` is not formatted correctly",
    "created_at": "2020-12-07T23:34:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499830",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>
The doctest of `__getitem__` is not formatted correctly



---

archive/issue_comments_499831.json:
```json
{
    "body": "<a id='comment:34'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e\">5185685</a></td><td><code>Fix formatting</code></td></tr></table>\n",
    "created_at": "2020-12-07T23:41:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499831",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:34'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e">5185685</a></td><td><code>Fix formatting</code></td></tr></table>




---

archive/issue_comments_499832.json:
```json
{
    "body": "**Changing commit** from \"[9cfe6db1b51858b13f24efa053d8c9d9e45b0042](https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042)\" to \"[51856852aa79738387f338321f3b1f094c45395e](https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e)\".",
    "created_at": "2020-12-07T23:41:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499832",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[9cfe6db1b51858b13f24efa053d8c9d9e45b0042](https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042)" to "[51856852aa79738387f338321f3b1f094c45395e](https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e)".



---

archive/issue_comments_499833.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [@mkoeppe](#comment%3A33):\n> The doctest of `__getitem__` is not formatted correctly\n\nHopefully fixed now. \n\n(doctest still don't run for me...e.g I now get RuntimeError: refusing to run doctests from the current directory '/mnt/d/Programming/sage' since untrusted users could put files in this directory, making it unsafe to run Sage code from)",
    "created_at": "2020-12-07T23:42:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499833",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:35'></a>
Replying to [@mkoeppe](#comment%3A33):
> The doctest of `__getitem__` is not formatted correctly

Hopefully fixed now. 

(doctest still don't run for me...e.g I now get RuntimeError: refusing to run doctests from the current directory '/mnt/d/Programming/sage' since untrusted users could put files in this directory, making it unsafe to run Sage code from)



---

archive/issue_comments_499834.json:
```json
{
    "body": "<a id='comment:36'></a>\nBuild fails for me\n\n```\n  [sagelib-9.3.beta3]   Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1\n  [sagelib-9.3.beta3]   Discovering Python/Cython source code....\n  [sagelib-9.3.beta3]   ************************************************************************\n  [sagelib-9.3.beta3]   Traceback (most recent call last):\n  [sagelib-9.3.beta3]     File \"setup.py\", line 60, in <module>\n  [sagelib-9.3.beta3]       from sage.misc.package import is_package_installed_and_updated\n  [sagelib-9.3.beta3]     File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py\", line 177, in <module>\n  [sagelib-9.3.beta3]       class PackageInfo(NamedTuple):\n  [sagelib-9.3.beta3]   RuntimeError: __class__ not set defining 'PackageInfo' as <class 'sage.misc.package.PackageInfo'>. Was __classcell__ propagated to type.__new__?\n  [sagelib-9.3.beta3]   ************************************************************************\n  [sagelib-9.3.beta3]   Error building the Sage library\n  [sagelib-9.3.beta3]   ************************************************************************\n```",
    "created_at": "2020-12-08T01:14:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499834",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>
Build fails for me

```
  [sagelib-9.3.beta3]   Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1
  [sagelib-9.3.beta3]   Discovering Python/Cython source code....
  [sagelib-9.3.beta3]   ************************************************************************
  [sagelib-9.3.beta3]   Traceback (most recent call last):
  [sagelib-9.3.beta3]     File "setup.py", line 60, in <module>
  [sagelib-9.3.beta3]       from sage.misc.package import is_package_installed_and_updated
  [sagelib-9.3.beta3]     File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py", line 177, in <module>
  [sagelib-9.3.beta3]       class PackageInfo(NamedTuple):
  [sagelib-9.3.beta3]   RuntimeError: __class__ not set defining 'PackageInfo' as <class 'sage.misc.package.PackageInfo'>. Was __classcell__ propagated to type.__new__?
  [sagelib-9.3.beta3]   ************************************************************************
  [sagelib-9.3.beta3]   Error building the Sage library
  [sagelib-9.3.beta3]   ************************************************************************
```



---

archive/issue_events_376125.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-08T01:14:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376125"
}
```



---

archive/issue_events_376126.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-08T01:14:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376126"
}
```



---

archive/issue_comments_499835.json:
```json
{
    "body": "<a id='comment:37'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed\">5472ee9</a></td><td><code>Fix build and tests</code></td></tr></table>\n",
    "created_at": "2020-12-08T09:48:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499835",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:37'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed">5472ee9</a></td><td><code>Fix build and tests</code></td></tr></table>




---

archive/issue_comments_499836.json:
```json
{
    "body": "**Changing commit** from \"[51856852aa79738387f338321f3b1f094c45395e](https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e)\" to \"[5472ee904b7da94378baa3f9e69916a0f35c95ed](https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed)\".",
    "created_at": "2020-12-08T09:48:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499836",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[51856852aa79738387f338321f3b1f094c45395e](https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e)" to "[5472ee904b7da94378baa3f9e69916a0f35c95ed](https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed)".



---

archive/issue_events_376127.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-08T09:57:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376127"
}
```



---

archive/issue_events_376128.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-08T09:57:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376128"
}
```



---

archive/issue_comments_499837.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [@mkoeppe](#comment%3A36):\n> Build fails for me\n\nShould be fixed now.\n\nCould you please have a look at #30901 and #30748. It's really awkward for me not be able to test my own changes. Thanks!",
    "created_at": "2020-12-08T09:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499837",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:38'></a>
Replying to [@mkoeppe](#comment%3A36):
> Build fails for me

Should be fixed now.

Could you please have a look at #30901 and #30748. It's really awkward for me not be able to test my own changes. Thanks!



---

archive/issue_comments_499838.json:
```json
{
    "body": "<a id='comment:39'></a>\n\n```\n[sagelib-9.3.beta3] Discovering Python/Cython source code....\n[sagelib-9.3.beta3] ************************************************************************\n[sagelib-9.3.beta3] Traceback (most recent call last):\n[sagelib-9.3.beta3]   File \"setup.py\", line 60, in <module>\n[sagelib-9.3.beta3]     from sage.misc.package import is_package_installed_and_updated\n[sagelib-9.3.beta3]   File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py\", line 434, in <module>\n[sagelib-9.3.beta3]     all_packages = list_packages(local=True)\n[sagelib-9.3.beta3]   File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py\", line 329, in list_packages\n[sagelib-9.3.beta3]     pkg.name = p\n[sagelib-9.3.beta3] AttributeError: can't set attribute\n[sagelib-9.3.beta3] ************************************************************************\n```",
    "created_at": "2020-12-09T02:11:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499838",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>

```
[sagelib-9.3.beta3] Discovering Python/Cython source code....
[sagelib-9.3.beta3] ************************************************************************
[sagelib-9.3.beta3] Traceback (most recent call last):
[sagelib-9.3.beta3]   File "setup.py", line 60, in <module>
[sagelib-9.3.beta3]     from sage.misc.package import is_package_installed_and_updated
[sagelib-9.3.beta3]   File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py", line 434, in <module>
[sagelib-9.3.beta3]     all_packages = list_packages(local=True)
[sagelib-9.3.beta3]   File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py", line 329, in list_packages
[sagelib-9.3.beta3]     pkg.name = p
[sagelib-9.3.beta3] AttributeError: can't set attribute
[sagelib-9.3.beta3] ************************************************************************
```



---

archive/issue_comments_499839.json:
```json
{
    "body": "**Changing commit** from \"[5472ee904b7da94378baa3f9e69916a0f35c95ed](https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed)\" to \"[0bb7738255072b03b52488f408fdc9a7cf8e5c1d](https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d)\".",
    "created_at": "2020-12-09T09:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499839",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[5472ee904b7da94378baa3f9e69916a0f35c95ed](https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed)" to "[0bb7738255072b03b52488f408fdc9a7cf8e5c1d](https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d)".



---

archive/issue_comments_499840.json:
```json
{
    "body": "<a id='comment:40'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d\">0bb7738</a></td><td><code>Fix immutability</code></td></tr></table>\n",
    "created_at": "2020-12-09T09:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499840",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:40'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d">0bb7738</a></td><td><code>Fix immutability</code></td></tr></table>




---

archive/issue_comments_499841.json:
```json
{
    "body": "<a id='comment:41'></a>\nSorry should have tested it after the merge. Should work now.",
    "created_at": "2020-12-09T10:01:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499841",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:41'></a>
Sorry should have tested it after the merge. Should work now.



---

archive/issue_comments_499842.json:
```json
{
    "body": "<a id='comment:42'></a>\n\n```diff\n-                deprecation(31013, \"dict-like access is deprecated, use e.g `pkg.name` instead of `pkg[name]`\")\n+                deprecation(31013, \"dict-like access is deprecated, use e.g `pkg.name` instead of `pkg['name']`\")\n```",
    "created_at": "2020-12-09T19:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499842",
    "user": "https://github.com/kliem"
}
```

<a id='comment:42'></a>

```diff
-                deprecation(31013, "dict-like access is deprecated, use e.g `pkg.name` instead of `pkg[name]`")
+                deprecation(31013, "dict-like access is deprecated, use e.g `pkg.name` instead of `pkg['name']`")
```



---

archive/issue_comments_499843.json:
```json
{
    "body": "<a id='comment:43'></a>\n\n```\nRunning doctests with ID 2020-12-09-21-48-42-bac7d593.\nGit branch: test/31013\nUsing --optional=4ti2,build,debian,dochtml,e_antic,lidia,lrslib,mcqd,memlimit,normaliz,pip,pynormaliz,pyroaringbitmap,python_igraph,rubiks,sage,sage_spkg,speaklater,texttable     \nDoctesting 1 file.\nsage -t --random-seed=0 src/sage/misc/package.py\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 194, in sage.misc.package.PackageInfo\nFailed example:\n    package = PackageInfo(\"test_package\")\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.PackageInfo[0]>\", line 1, in <module>\n        package = PackageInfo(\"test_package\")\n    NameError: name 'PackageInfo' is not defined\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 195, in sage.misc.package.PackageInfo\nFailed example:\n    package[\"name\"]\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.PackageInfo[1]>\", line 1, in <module>\n        package[\"name\"]\n    NameError: name 'package' is not defined\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 199, in sage.misc.package.PackageInfo\nFailed example:\n    package[0]\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.PackageInfo[2]>\", line 1, in <module>\n        package[Integer(0)]\n    NameError: name 'package' is not defined\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 263, in sage.misc.package.pkg_sources\nFailed example:\n    sage_conf_info.installed # optional - build\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.pkg_sources[5]>\", line 1, in <module>\n        sage_conf_info.installed # optional - build\n    AttributeError: 'PackageInfo' object has no attribute 'installed'\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 413, in sage.misc.package.is_package_installed\nFailed example:\n    for pkg in list_packages(pkg_sources=('pip'), local=True):  # optional - build\n        assert not is_package_installed(pkg), \"pip package is installed: {}\".format(pkg)\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.is_package_installed[3]>\", line 2, in <module>\n        assert not is_package_installed(pkg), \"pip package is installed: {}\".format(pkg)\n    AssertionError: pip package is installed: itsdangerous\n**********************************************************************\n3 items had failures:\n   3 of   4 in sage.misc.package.PackageInfo\n   1 of   5 in sage.misc.package.is_package_installed\n   1 of   9 in sage.misc.package.pkg_sources\n    [55 tests, 5 failures, 2.38 s]\n----------------------------------------------------------------------\nsage -t --random-seed=0 src/sage/misc/package.py  # 5 doctests failed\n```\n\nEverything else passes. Build as well.",
    "created_at": "2020-12-09T20:52:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499843",
    "user": "https://github.com/kliem"
}
```

<a id='comment:43'></a>

```
Running doctests with ID 2020-12-09-21-48-42-bac7d593.
Git branch: test/31013
Using --optional=4ti2,build,debian,dochtml,e_antic,lidia,lrslib,mcqd,memlimit,normaliz,pip,pynormaliz,pyroaringbitmap,python_igraph,rubiks,sage,sage_spkg,speaklater,texttable     
Doctesting 1 file.
sage -t --random-seed=0 src/sage/misc/package.py
**********************************************************************
File "src/sage/misc/package.py", line 194, in sage.misc.package.PackageInfo
Failed example:
    package = PackageInfo("test_package")
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.PackageInfo[0]>", line 1, in <module>
        package = PackageInfo("test_package")
    NameError: name 'PackageInfo' is not defined
**********************************************************************
File "src/sage/misc/package.py", line 195, in sage.misc.package.PackageInfo
Failed example:
    package["name"]
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.PackageInfo[1]>", line 1, in <module>
        package["name"]
    NameError: name 'package' is not defined
**********************************************************************
File "src/sage/misc/package.py", line 199, in sage.misc.package.PackageInfo
Failed example:
    package[0]
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.PackageInfo[2]>", line 1, in <module>
        package[Integer(0)]
    NameError: name 'package' is not defined
**********************************************************************
File "src/sage/misc/package.py", line 263, in sage.misc.package.pkg_sources
Failed example:
    sage_conf_info.installed # optional - build
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.pkg_sources[5]>", line 1, in <module>
        sage_conf_info.installed # optional - build
    AttributeError: 'PackageInfo' object has no attribute 'installed'
**********************************************************************
File "src/sage/misc/package.py", line 413, in sage.misc.package.is_package_installed
Failed example:
    for pkg in list_packages(pkg_sources=('pip'), local=True):  # optional - build
        assert not is_package_installed(pkg), "pip package is installed: {}".format(pkg)
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.is_package_installed[3]>", line 2, in <module>
        assert not is_package_installed(pkg), "pip package is installed: {}".format(pkg)
    AssertionError: pip package is installed: itsdangerous
**********************************************************************
3 items had failures:
   3 of   4 in sage.misc.package.PackageInfo
   1 of   5 in sage.misc.package.is_package_installed
   1 of   9 in sage.misc.package.pkg_sources
    [55 tests, 5 failures, 2.38 s]
----------------------------------------------------------------------
sage -t --random-seed=0 src/sage/misc/package.py  # 5 doctests failed
```

Everything else passes. Build as well.



---

archive/issue_events_376129.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-12-09T20:52:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376129"
}
```



---

archive/issue_events_376130.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-12-09T20:52:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376130"
}
```



---

archive/issue_comments_499844.json:
```json
{
    "body": "**Changing commit** from \"[0bb7738255072b03b52488f408fdc9a7cf8e5c1d](https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d)\" to \"[6b82d90810dfa0c839143e0d248f8b8731dad821](https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821)\".",
    "created_at": "2020-12-10T17:45:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499844",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[0bb7738255072b03b52488f408fdc9a7cf8e5c1d](https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d)" to "[6b82d90810dfa0c839143e0d248f8b8731dad821](https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821)".



---

archive/issue_comments_499845.json:
```json
{
    "body": "<a id='comment:44'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0e4a907b904e2422a51e0ef035ea63c949cc1b4\">d0e4a90</a></td><td><code>sage.misc.package.PackageInfo: Improve wording of deprecation message, fix doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821\">6b82d90</a></td><td><code>sage.misc.package.list_packages: Align optional tags in doctests</code></td></tr></table>\n",
    "created_at": "2020-12-10T17:45:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499845",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:44'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0e4a907b904e2422a51e0ef035ea63c949cc1b4">d0e4a90</a></td><td><code>sage.misc.package.PackageInfo: Improve wording of deprecation message, fix doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821">6b82d90</a></td><td><code>sage.misc.package.list_packages: Align optional tags in doctests</code></td></tr></table>




---

archive/issue_comments_499846.json:
```json
{
    "body": "<a id='comment:45'></a>\nI have fixed a few things but the assertion error remains to be fixed",
    "created_at": "2020-12-10T17:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499846",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>
I have fixed a few things but the assertion error remains to be fixed



---

archive/issue_comments_499847.json:
```json
{
    "body": "<a id='comment:46'></a>\nLatest #30940 also needs to be merged",
    "created_at": "2020-12-16T23:51:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499847",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>
Latest #30940 also needs to be merged



---

archive/issue_comments_499848.json:
```json
{
    "body": "<a id='comment:47'></a>\nThe dependency has been merged in 9.3.beta6. Needs rebase",
    "created_at": "2021-01-19T20:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499848",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>
The dependency has been merged in 9.3.beta6. Needs rebase



---

archive/issue_comments_499849.json:
```json
{
    "body": "**Changing dependencies** from \"#30940\" to \"\".",
    "created_at": "2021-01-19T20:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499849",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#30940" to "".



---

archive/issue_comments_499850.json:
```json
{
    "body": "**Changing commit** from \"[6b82d90810dfa0c839143e0d248f8b8731dad821](https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821)\" to \"[2eee85882a27e5538a1139cd25384f19859a8e23](https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23)\".",
    "created_at": "2021-01-19T21:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499850",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[6b82d90810dfa0c839143e0d248f8b8731dad821](https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821)" to "[2eee85882a27e5538a1139cd25384f19859a8e23](https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23)".



---

archive/issue_comments_499851.json:
```json
{
    "body": "<a id='comment:48'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b48edf797444e433a6873ea0a4edac53aa35a19a\">b48edf7</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23\">2eee858</a></td><td><code>Code cleanup</code></td></tr></table>\n",
    "created_at": "2021-01-19T21:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499851",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:48'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b48edf797444e433a6873ea0a4edac53aa35a19a">b48edf7</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23">2eee858</a></td><td><code>Code cleanup</code></td></tr></table>




---

archive/issue_events_376131.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-01-19T21:45:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376131"
}
```



---

archive/issue_events_376132.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-01-19T21:45:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376132"
}
```



---

archive/issue_comments_499852.json:
```json
{
    "body": "<a id='comment:49'></a>\nLocally, all tests pass for me now. So this should be ready for review.",
    "created_at": "2021-01-19T21:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499852",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:49'></a>
Locally, all tests pass for me now. So this should be ready for review.



---

archive/issue_comments_499853.json:
```json
{
    "body": "<a id='comment:50'></a>\nTests pass for me, too.\n\n```\nall_packages = list_packages(local=True)\n```\nIt was fine to executed this code at module load time in `sage_setup.optional_extension`,  but I don't think it is good to do so at load time of `sage.misc.package`.\n\nAlso `is_package_installed_and_updated` would need documentation + test as it is moved to sagelib",
    "created_at": "2021-01-30T23:16:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499853",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:50'></a>
Tests pass for me, too.

```
all_packages = list_packages(local=True)
```
It was fine to executed this code at module load time in `sage_setup.optional_extension`,  but I don't think it is good to do so at load time of `sage.misc.package`.

Also `is_package_installed_and_updated` would need documentation + test as it is moved to sagelib



---

archive/issue_events_376133.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-30T23:16:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376133"
}
```



---

archive/issue_events_376134.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-30T23:16:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376134"
}
```



---

archive/issue_comments_499854.json:
```json
{
    "body": "**Changing commit** from \"[2eee85882a27e5538a1139cd25384f19859a8e23](https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23)\" to \"[541fa1bbe08ed7bcda32b33e5328c6259d03e790](https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790)\".",
    "created_at": "2021-02-02T17:12:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499854",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[2eee85882a27e5538a1139cd25384f19859a8e23](https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23)" to "[541fa1bbe08ed7bcda32b33e5328c6259d03e790](https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790)".



---

archive/issue_comments_499855.json:
```json
{
    "body": "<a id='comment:51'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790\">541fa1b</a></td><td><code>Add documentation, test and remove caching</code></td></tr></table>\n",
    "created_at": "2021-02-02T17:12:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499855",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:51'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790">541fa1b</a></td><td><code>Add documentation, test and remove caching</code></td></tr></table>




---

archive/issue_comments_499856.json:
```json
{
    "body": "<a id='comment:52'></a>\n> Also is_package_installed_and_updated would need documentation + test as it is moved to sagelib \n\nOk done.\n\nI've removed the caching completely, because this probably is best done at the level of `list_packages` anyway.",
    "created_at": "2021-02-02T17:13:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499856",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:52'></a>
> Also is_package_installed_and_updated would need documentation + test as it is moved to sagelib 

Ok done.

I've removed the caching completely, because this probably is best done at the level of `list_packages` anyway.



---

archive/issue_events_376135.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-02-02T17:14:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376135"
}
```



---

archive/issue_events_376136.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-02-02T17:14:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376136"
}
```



---

archive/issue_comments_499857.json:
```json
{
    "body": "<a id='comment:54'></a>\nRemoving caching will probably make `setup.py` somewhat slower, so I am not sure this is a good idea.",
    "created_at": "2021-02-02T17:43:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499857",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:54'></a>
Removing caching will probably make `setup.py` somewhat slower, so I am not sure this is a good idea.



---

archive/issue_comments_499858.json:
```json
{
    "body": "<a id='comment:55'></a>\nPerhaps it's best to split this ticket and only do the interface improvement for `list_packages` here.",
    "created_at": "2021-02-02T17:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499858",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'></a>
Perhaps it's best to split this ticket and only do the interface improvement for `list_packages` here.



---

archive/issue_events_376137.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-10T20:28:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376137"
}
```



---

archive/issue_events_376138.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-10T20:28:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376138"
}
```



---

archive/issue_comments_499859.json:
```json
{
    "body": "<a id='comment:57'></a>\nReplying to [@mkoeppe](#comment%3A55):\n> Perhaps it's best to split this ticket \n\n... I have opened #31385 (Improve interface of `list_packages`)",
    "created_at": "2021-02-12T00:32:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499859",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:57'></a>
Replying to [@mkoeppe](#comment%3A55):
> Perhaps it's best to split this ticket 

... I have opened #31385 (Improve interface of `list_packages`)



---

archive/issue_comments_499860.json:
```json
{
    "body": "<a id='comment:58'></a>\nThanks!",
    "created_at": "2021-02-12T08:56:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499860",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:58'></a>
Thanks!



---

archive/issue_comments_499861.json:
```json
{
    "body": "**Work Issues:** rebase on #31385",
    "created_at": "2021-02-12T20:58:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499861",
    "user": "https://github.com/mkoeppe"
}
```

**Work Issues:** rebase on #31385



---

archive/issue_events_376139.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-12T20:58:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "rename": {
        "from": "Remove unused optional extension, improve interface of list_packages",
        "to": "Remove unused class from sage_setup.optional extension"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376139"
}
```



---

archive/issue_comments_499862.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). \n-The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package` (where also a bit of typing info is added).\n+The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package`.\n \n Related: #28815\n``````\n",
    "created_at": "2021-02-12T20:58:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499862",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). 
-The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package` (where also a bit of typing info is added).
+The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package`.
 
 Related: #28815
``````




---

archive/issue_comments_499863.json:
```json
{
    "body": "**Dependencies:** #31385",
    "created_at": "2021-02-12T20:58:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499863",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #31385



---

archive/issue_events_376140.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376140"
}
```



---

archive/issue_events_376141.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376141"
}
```



---

archive/issue_comments_499864.json:
```json
{
    "body": "<a id='comment:60'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499864",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:60'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_376142.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376142"
}
```



---

archive/issue_events_376143.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376143"
}
```



---

archive/issue_comments_499865.json:
```json
{
    "body": "<a id='comment:61'></a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499865",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:61'></a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_499866.json:
```json
{
    "body": "**Changing commit** from \"[541fa1bbe08ed7bcda32b33e5328c6259d03e790](https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790)\" to \"[6c67908838f12bf11e9c986ba5c13ff9b758dc13](https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13)\".",
    "created_at": "2021-11-26T21:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499866",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[541fa1bbe08ed7bcda32b33e5328c6259d03e790](https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790)" to "[6c67908838f12bf11e9c986ba5c13ff9b758dc13](https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13)".



---

archive/issue_comments_499867.json:
```json
{
    "body": "<a id='comment:62'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13\">6c67908</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr></table>\n",
    "created_at": "2021-11-26T21:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499867",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:62'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13">6c67908</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr></table>




---

archive/issue_comments_499868.json:
```json
{
    "body": "<a id='comment:63'></a>\nRebased, so this is now ready for review.",
    "created_at": "2021-11-26T21:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499868",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:63'></a>
Rebased, so this is now ready for review.



---

archive/issue_comments_499869.json:
```json
{
    "body": "**Changing work issues** from \"rebase on #31385\" to \"\".",
    "created_at": "2021-11-26T21:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499869",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing work issues** from "rebase on #31385" to "".



---

archive/issue_events_376144.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-11-26T21:40:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376144"
}
```



---

archive/issue_events_376145.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-11-26T21:40:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376145"
}
```



---

archive/issue_events_376146.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376146"
}
```



---

archive/issue_events_376147.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376147"
}
```



---

archive/issue_comments_499870.json:
```json
{
    "body": "<a id='comment:64'></a>\nStalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499870",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:64'></a>
Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_comments_499871.json:
```json
{
    "body": "<a id='comment:65'></a>\nYes, I would appreciate if this ticket could be reviewed!",
    "created_at": "2021-12-19T20:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499871",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:65'></a>
Yes, I would appreciate if this ticket could be reviewed!



---

archive/issue_comments_499872.json:
```json
{
    "body": "**Changing commit** from \"[6c67908838f12bf11e9c986ba5c13ff9b758dc13](https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13)\" to \"[a7b1e818d0a0a8da264017dbc81be2984bd56d57](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)\".",
    "created_at": "2022-01-03T12:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499872",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[6c67908838f12bf11e9c986ba5c13ff9b758dc13](https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13)" to "[a7b1e818d0a0a8da264017dbc81be2984bd56d57](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)".



---

archive/issue_comments_499873.json:
```json
{
    "body": "<a id='comment:66'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11b45bda2e31e3025a3be9ab9e5bf571f527466c\">11b45bd</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57\">a7b1e81</a></td><td><code>Improve typing</code></td></tr></table>\n",
    "created_at": "2022-01-03T12:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499873",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:66'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11b45bda2e31e3025a3be9ab9e5bf571f527466c">11b45bd</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57">a7b1e81</a></td><td><code>Improve typing</code></td></tr></table>




---

archive/issue_comments_499874.json:
```json
{
    "body": "**Changing dependencies** from \"#31385\" to \"\".",
    "created_at": "2022-01-03T12:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499874",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#31385" to "".



---

archive/issue_comments_499875.json:
```json
{
    "body": "<a id='comment:69'></a>\nThanks for copying me Matthias. I was aware of this ticket and I guess it will at least remove some pesky doctests. Otherwise it will just make me move some patch from one file to another.\n\n`is_package_installed_and_updated` is one of those things I am patiently waiting for the modularisation of sage to kill. In the meantime I am patching an alternative mechanism anyway.",
    "created_at": "2022-01-10T04:20:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499875",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:69'></a>
Thanks for copying me Matthias. I was aware of this ticket and I guess it will at least remove some pesky doctests. Otherwise it will just make me move some patch from one file to another.

`is_package_installed_and_updated` is one of those things I am patiently waiting for the modularisation of sage to kill. In the meantime I am patching an alternative mechanism anyway.



---

archive/issue_events_376148.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-01-10T04:25:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376148"
}
```



---

archive/issue_events_376149.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-01-10T04:25:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376149"
}
```



---

archive/issue_comments_499876.json:
```json
{
    "body": "<a id='comment:70'></a>\nOther than that, if you copied me for the review, it all looks good and sensible to me.",
    "created_at": "2022-01-10T04:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499876",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:70'></a>
Other than that, if you copied me for the review, it all looks good and sensible to me.



---

archive/issue_comments_499877.json:
```json
{
    "body": "**Reviewer:** Fran\u00e7ois Bissey",
    "created_at": "2022-01-10T04:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499877",
    "user": "https://github.com/kiwifb"
}
```

**Reviewer:** Fran√ßois Bissey



---

archive/issue_comments_499878.json:
```json
{
    "body": "<a id='comment:71'></a>\nThanks for the review!",
    "created_at": "2022-01-10T12:46:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499878",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:71'></a>
Thanks for the review!



---

archive/issue_comments_499879.json:
```json
{
    "body": "**Changing branch** from \"[public/build/remove_optional_extension](https://github.com/sagemath/sagetrac-mirror/tree/public/build/remove_optional_extension)\" to \"[a7b1e818d0a0a8da264017dbc81be2984bd56d57](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)\".",
    "created_at": "2022-01-31T23:31:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-499879",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/build/remove_optional_extension](https://github.com/sagemath/sagetrac-mirror/tree/public/build/remove_optional_extension)" to "[a7b1e818d0a0a8da264017dbc81be2984bd56d57](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)".



---

archive/issue_events_376150.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-31T23:31:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376150"
}
```



---

archive/issue_events_376151.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3abe1a7938ff00196c1d8e9c35a6714d7a8d60f8",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-01-31T23:31:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-376151"
}
```
