# Issue 31013: Remove unused class from sage_setup.optional extension

archive/issues_030776.json:
```json
{
    "assignees": [],
    "body": "The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). \nThe only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package`.\n\nRelated: #28815\n\nCC:  @mkoeppe @kiwifb\n\nKeywords: **sd111**\n\nBranch/Commit: **[`a7b1e81`](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)**\n\nReviewer: **Fran\u00e7ois Bissey**\n\nAuthor: **Tobias Diez**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31013_\n\n",
    "closed_at": "2022-01-31T23:31:41Z",
    "created_at": "2020-12-05T18:36:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Remove unused class from sage_setup.optional extension",
    "type": "issue",
    "updated_at": "2022-01-31T23:31:41Z",
    "url": "https://github.com/sagemath/sage/issues/31013",
    "user": "https://github.com/tobiasdiez"
}
```
The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). 
The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package`.

Related: #28815

CC:  @mkoeppe @kiwifb

Keywords: **sd111**

Branch/Commit: **[`a7b1e81`](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)**

Reviewer: **Fran√ßois Bissey**

Author: **Tobias Diez**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/31013_





---

archive/issue_events_427697.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T18:36:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427697"
}
```



---

archive/issue_events_427698.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T18:36:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427698"
}
```



---

archive/issue_events_427699.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T18:36:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427699"
}
```



---

archive/issue_events_427700.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T18:36:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427700"
}
```



---

archive/issue_events_427701.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T18:36:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427701"
}
```



---

archive/issue_comments_497083.json:
```json
{
    "body": "Changed commit from **[`508075c`](https://github.com/sagemath/sagetrac-mirror/commit/508075cb9f6558c267c546f2fdff6cd1dac0cf83)** to **[`2492f1e`](https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c)**",
    "created_at": "2020-12-05T18:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497083",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`508075c`](https://github.com/sagemath/sagetrac-mirror/commit/508075cb9f6558c267c546f2fdff6cd1dac0cf83)** to **[`2492f1e`](https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c)**



---

archive/issue_comments_497084.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c\">2492f1e</a></td><td><code>Code cleanup</code></td></tr></table>\n",
    "created_at": "2020-12-05T18:37:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497084",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c">2492f1e</a></td><td><code>Code cleanup</code></td></tr></table>




---

archive/issue_comments_497085.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). \n The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package` (where also a bit of typing info is added).\n+\n+Related: #28815\n``````\n",
    "created_at": "2020-12-05T18:38:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497085",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). 
 The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package` (where also a bit of typing info is added).
+
+Related: #28815
``````




---

archive/issue_comments_497086.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nCan't make incompatible changes to the interface of a public function",
    "created_at": "2020-12-05T18:39:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497086",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

Can't make incompatible changes to the interface of a public function



---

archive/issue_comments_497087.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n(I'm referring to the `list_packages` function)",
    "created_at": "2020-12-05T18:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497087",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

(I'm referring to the `list_packages` function)



---

archive/issue_comments_497088.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIt's also conflicting with the changes in #30940 (which needs review)",
    "created_at": "2020-12-05T18:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497088",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

It's also conflicting with the changes in #30940 (which needs review)



---

archive/issue_comments_497089.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09\">649ffff</a></td><td><code>Fix build</code></td></tr></table>\n",
    "created_at": "2020-12-05T18:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497089",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09">649ffff</a></td><td><code>Fix build</code></td></tr></table>




---

archive/issue_comments_497090.json:
```json
{
    "body": "Changed commit from **[`2492f1e`](https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c)** to **[`649ffff`](https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09)**",
    "created_at": "2020-12-05T18:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497090",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2492f1e`](https://github.com/sagemath/sagetrac-mirror/commit/2492f1ec3e9258c8cb05df19fd90946c8a55932c)** to **[`649ffff`](https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09)**



---

archive/issue_comments_497091.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@mkoeppe](#comment:4):\n> Can't make incompatible changes to the interface of a public function\n\nSo one cannot change public facing functions at all? What is the policy/strategy for this? Introduce a new method, say `list_packages_typed`?\n\n> It's also conflicting with the changes in #30940 (which needs review)\n\nI wouldn't say it's conflicting, just results in easy-to-resolve merge conflicts.",
    "created_at": "2020-12-05T19:20:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497091",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@mkoeppe](#comment:4):
> Can't make incompatible changes to the interface of a public function

So one cannot change public facing functions at all? What is the policy/strategy for this? Introduce a new method, say `list_packages_typed`?

> It's also conflicting with the changes in #30940 (which needs review)

I wouldn't say it's conflicting, just results in easy-to-resolve merge conflicts.



---

archive/issue_comments_497092.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@tobiasdiez](#comment:8):\n> Replying to [@mkoeppe](#comment:4):\n> > Can't make incompatible changes to the interface of a public function\n\n> \n> So one cannot change public facing functions at all? What is the policy/strategy for this? Introduce a new method, say `list_packages_typed`?\n\nIt could be a new function (with deprecation for the old one), or an optional argument that controls the return type, ...\n\nBut in this particular case, it would probably be good enough to just give the new class dictionary-like behavior so that user code can continue to access the slots like a dictionary. Possibly with deprecation warning.",
    "created_at": "2020-12-05T19:33:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497092",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@tobiasdiez](#comment:8):
> Replying to [@mkoeppe](#comment:4):
> > Can't make incompatible changes to the interface of a public function

> 
> So one cannot change public facing functions at all? What is the policy/strategy for this? Introduce a new method, say `list_packages_typed`?

It could be a new function (with deprecation for the old one), or an optional argument that controls the return type, ...

But in this particular case, it would probably be good enough to just give the new class dictionary-like behavior so that user code can continue to access the slots like a dictionary. Possibly with deprecation warning.



---

archive/issue_comments_497093.json:
```json
{
    "body": "Changed commit from **[`649ffff`](https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09)** to **[`26b59ad`](https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4)**",
    "created_at": "2020-12-05T20:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497093",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`649ffff`](https://github.com/sagemath/sagetrac-mirror/commit/649ffff0142a666f541b1d7a90e3680bd408ba09)** to **[`26b59ad`](https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4)**



---

archive/issue_comments_497094.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4\">26b59ad</a></td><td><code>Implement __getitem__</code></td></tr></table>\n",
    "created_at": "2020-12-05T20:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497094",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4">26b59ad</a></td><td><code>Implement __getitem__</code></td></tr></table>




---

archive/issue_comments_497095.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@mkoeppe](#comment:9):\n> But in this particular case, it would probably be good enough to just give the new class dictionary-like behavior so that user code can continue to access the slots like a dictionary. Possibly with deprecation warning.\n> \n\nThat's a nice idea, implemented!",
    "created_at": "2020-12-05T20:16:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497095",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@mkoeppe](#comment:9):
> But in this particular case, it would probably be good enough to just give the new class dictionary-like behavior so that user code can continue to access the slots like a dictionary. Possibly with deprecation warning.
> 

That's a nice idea, implemented!



---

archive/issue_comments_497096.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nInstead of \"string-based access\", perhaps this should be called \"dict-like access\" in the deprecation messages?",
    "created_at": "2020-12-05T20:44:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497096",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

Instead of "string-based access", perhaps this should be called "dict-like access" in the deprecation messages?



---

archive/issue_comments_497097.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI think in this change you need to use `is_installed()` instead\n\n```\n--- a/src/bin/sage-list-packages\n+++ b/src/bin/sage-list-packages\n@@ -91,16 +91,16 @@ else:\n if WARN:\n     print(WARN)\n if args['installed_only']:\n-    L = [pkg for pkg in L if pkg['installed']]\n+    L = [pkg for pkg in L if pkg.installed]\n elif args['not_installed_only']:\n-    L = [pkg for pkg in L if not pkg['installed']]\n+    L = [pkg for pkg in L if not pkg.installed]\n```",
    "created_at": "2020-12-06T00:20:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497097",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

I think in this change you need to use `is_installed()` instead

```
--- a/src/bin/sage-list-packages
+++ b/src/bin/sage-list-packages
@@ -91,16 +91,16 @@ else:
 if WARN:
     print(WARN)
 if args['installed_only']:
-    L = [pkg for pkg in L if pkg['installed']]
+    L = [pkg for pkg in L if pkg.installed]
 elif args['not_installed_only']:
-    L = [pkg for pkg in L if not pkg['installed']]
+    L = [pkg for pkg in L if not pkg.installed]
```



---

archive/issue_events_427702.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-06T00:20:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427702"
}
```



---

archive/issue_events_427703.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-06T00:20:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427703"
}
```



---

archive/issue_events_427704.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-06T00:20:38Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "title_is": "Remove unused optional extension, improve interface of list_packages",
    "title_was": "Remove unused optional extension",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427704"
}
```



---

archive/issue_comments_497098.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497098",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_497099.json:
```json
{
    "body": "Changed keywords from none to **sd111**",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497099",
    "user": "https://github.com/mkoeppe"
}
```

Changed keywords from none to **sd111**



---

archive/issue_comments_497100.json:
```json
{
    "body": "Changed commit from **[`26b59ad`](https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4)** to **[`0c10be0`](https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a)**",
    "created_at": "2020-12-06T22:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497100",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`26b59ad`](https://github.com/sagemath/sagetrac-mirror/commit/26b59ad06672b1dc9b99c2bb22acce7c8b3110c4)** to **[`0c10be0`](https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a)**



---

archive/issue_comments_497101.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a\">0c10be0</a></td><td><code>Fix build</code></td></tr></table>\n",
    "created_at": "2020-12-06T22:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497101",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a">0c10be0</a></td><td><code>Fix build</code></td></tr></table>




---

archive/issue_comments_497102.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@mkoeppe](#comment:13):\n> I think in this change you need to use `is_installed()` instead\n\nIndeed, thanks!",
    "created_at": "2020-12-06T22:25:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497102",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@mkoeppe](#comment:13):
> I think in this change you need to use `is_installed()` instead

Indeed, thanks!



---

archive/issue_events_427705.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-06T22:25:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427705"
}
```



---

archive/issue_events_427706.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-06T22:25:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427706"
}
```



---

archive/issue_comments_497103.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@mkoeppe](#comment:16):\n> Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111\n\nI try to join, but I'm on vacation this week...",
    "created_at": "2020-12-06T22:25:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497103",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@mkoeppe](#comment:16):
> Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111

I try to join, but I'm on vacation this week...



---

archive/issue_comments_497104.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nNeeds rebase on latest beta",
    "created_at": "2020-12-07T00:15:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497104",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

Needs rebase on latest beta



---

archive/issue_events_427707.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-07T00:15:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427707"
}
```



---

archive/issue_events_427708.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-07T00:15:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427708"
}
```



---

archive/issue_comments_497105.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/008bfd2a74eb9e7e5eef165f4ad4b1a351af9122\">008bfd2</a></td><td><code>Merge branch 'u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available' of git://trac.sagemath.org/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd2269b6c4881cac87a683afe2e32cdea42016e7\">bd2269b</a></td><td><code>Finish merge</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa\">0213e20</a></td><td><code>Finish interface cleanup</code></td></tr></table>\n",
    "created_at": "2020-12-07T13:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497105",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/008bfd2a74eb9e7e5eef165f4ad4b1a351af9122">008bfd2</a></td><td><code>Merge branch 'u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available' of git://trac.sagemath.org/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd2269b6c4881cac87a683afe2e32cdea42016e7">bd2269b</a></td><td><code>Finish merge</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa">0213e20</a></td><td><code>Finish interface cleanup</code></td></tr></table>




---

archive/issue_comments_497106.json:
```json
{
    "body": "Changed commit from **[`0c10be0`](https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a)** to **[`0213e20`](https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa)**",
    "created_at": "2020-12-07T13:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497106",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0c10be0`](https://github.com/sagemath/sagetrac-mirror/commit/0c10be07ade50949f599b70ce255c2100bd60c6a)** to **[`0213e20`](https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa)**



---

archive/issue_comments_497107.json:
```json
{
    "body": "Changed commit from **[`0213e20`](https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa)** to **[`95ff8c1`](https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee)**",
    "created_at": "2020-12-07T13:13:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497107",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0213e20`](https://github.com/sagemath/sagetrac-mirror/commit/0213e20fd015b7d4da6da5493c7e73872e7fe1fa)** to **[`95ff8c1`](https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee)**



---

archive/issue_comments_497108.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee\">95ff8c1</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr></table>\n",
    "created_at": "2020-12-07T13:13:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497108",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee">95ff8c1</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr></table>




---

archive/issue_comments_497109.json:
```json
{
    "body": "Changed commit from **[`95ff8c1`](https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee)** to **[`1d72cc6`](https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3)**",
    "created_at": "2020-12-07T13:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497109",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`95ff8c1`](https://github.com/sagemath/sagetrac-mirror/commit/95ff8c1c58896d1232c6daa08edf3575c9bce1ee)** to **[`1d72cc6`](https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3)**



---

archive/issue_comments_497110.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3\">1d72cc6</a></td><td><code>Fix symlinks</code></td></tr></table>\n",
    "created_at": "2020-12-07T13:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497110",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3">1d72cc6</a></td><td><code>Fix symlinks</code></td></tr></table>




---

archive/issue_comments_497111.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI've now rebased on top of develop and on #30940.",
    "created_at": "2020-12-07T13:27:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497111",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:24" align="right">comment:24</div>

I've now rebased on top of develop and on #30940.



---

archive/issue_events_427709.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T13:27:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427709"
}
```



---

archive/issue_events_427710.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T13:27:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427710"
}
```



---

archive/issue_comments_497112.json:
```json
{
    "body": "Dependencies: **#30940**",
    "created_at": "2020-12-07T13:27:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497112",
    "user": "https://github.com/tobiasdiez"
}
```

Dependencies: **#30940**



---

archive/issue_events_427711.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-07T19:18:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427711"
}
```



---

archive/issue_events_427712.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-07T19:18:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427712"
}
```



---

archive/issue_comments_497113.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThis branch is seriously messed up... best to squash some of the intermediate commits",
    "created_at": "2020-12-07T19:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497113",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

This branch is seriously messed up... best to squash some of the intermediate commits



---

archive/issue_comments_497114.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI agree, everything should be squashed instead of merged for the final integration in `develop`/`master` - but that's going to happen anyway, right?",
    "created_at": "2020-12-07T19:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497114",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:27" align="right">comment:27</div>

I agree, everything should be squashed instead of merged for the final integration in `develop`/`master` - but that's going to happen anyway, right?



---

archive/issue_comments_497115.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nNo, the branches of the tickets are merged as is, not squashed, by the release manager",
    "created_at": "2020-12-07T19:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497115",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

No, the branches of the tickets are merged as is, not squashed, by the release manager



---

archive/issue_comments_497116.json:
```json
{
    "body": "Changed commit from **[`1d72cc6`](https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3)** to **[`4fc77ee`](https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229)**",
    "created_at": "2020-12-07T20:17:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497116",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1d72cc6`](https://github.com/sagemath/sagetrac-mirror/commit/1d72cc67169a2ecab5e34a0adda5e1bf7dfc77b3)** to **[`4fc77ee`](https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229)**



---

archive/issue_comments_497117.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229\">4fc77ee</a></td><td><code>Remove unused optional extension, improve interface of list_packages</code></td></tr></table>\n",
    "created_at": "2020-12-07T20:17:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497117",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229">4fc77ee</a></td><td><code>Remove unused optional extension, improve interface of list_packages</code></td></tr></table>




---

archive/issue_comments_497118.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@mkoeppe](#comment:28):\n> No, the branches of the tickets are merged as is, not squashed, by the release manager\n\nOk, I got the impression they are squashed by looking at https://github.com/sagemath/sage/commits/develop. I've now squashed everything.",
    "created_at": "2020-12-07T20:19:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497118",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@mkoeppe](#comment:28):
> No, the branches of the tickets are merged as is, not squashed, by the release manager

Ok, I got the impression they are squashed by looking at https://github.com/sagemath/sage/commits/develop. I've now squashed everything.



---

archive/issue_events_427713.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T20:19:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427713"
}
```



---

archive/issue_events_427714.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T20:19:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427714"
}
```



---

archive/issue_comments_497119.json:
```json
{
    "body": "Changed commit from **[`4fc77ee`](https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229)** to **[`9cfe6db`](https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042)**",
    "created_at": "2020-12-07T20:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497119",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4fc77ee`](https://github.com/sagemath/sagetrac-mirror/commit/4fc77eebe6d78927483b72d934efcda485ba9229)** to **[`9cfe6db`](https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042)**



---

archive/issue_comments_497120.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042\">9cfe6db</a></td><td><code>dict-like instead of string-based</code></td></tr></table>\n",
    "created_at": "2020-12-07T20:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497120",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042">9cfe6db</a></td><td><code>dict-like instead of string-based</code></td></tr></table>




---

archive/issue_comments_497121.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThe doctest of `__getitem__` is not formatted correctly",
    "created_at": "2020-12-07T23:34:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497121",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

The doctest of `__getitem__` is not formatted correctly



---

archive/issue_comments_497122.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e\">5185685</a></td><td><code>Fix formatting</code></td></tr></table>\n",
    "created_at": "2020-12-07T23:41:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497122",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e">5185685</a></td><td><code>Fix formatting</code></td></tr></table>




---

archive/issue_comments_497123.json:
```json
{
    "body": "Changed commit from **[`9cfe6db`](https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042)** to **[`5185685`](https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e)**",
    "created_at": "2020-12-07T23:41:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497123",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9cfe6db`](https://github.com/sagemath/sagetrac-mirror/commit/9cfe6db1b51858b13f24efa053d8c9d9e45b0042)** to **[`5185685`](https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e)**



---

archive/issue_comments_497124.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@mkoeppe](#comment:33):\n> The doctest of `__getitem__` is not formatted correctly\n\nHopefully fixed now. \n\n(doctest still don't run for me...e.g I now get RuntimeError: refusing to run doctests from the current directory '/mnt/d/Programming/sage' since untrusted users could put files in this directory, making it unsafe to run Sage code from)",
    "created_at": "2020-12-07T23:42:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497124",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@mkoeppe](#comment:33):
> The doctest of `__getitem__` is not formatted correctly

Hopefully fixed now. 

(doctest still don't run for me...e.g I now get RuntimeError: refusing to run doctests from the current directory '/mnt/d/Programming/sage' since untrusted users could put files in this directory, making it unsafe to run Sage code from)



---

archive/issue_comments_497125.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nBuild fails for me\n\n```\n  [sagelib-9.3.beta3]   Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1\n  [sagelib-9.3.beta3]   Discovering Python/Cython source code....\n  [sagelib-9.3.beta3]   ************************************************************************\n  [sagelib-9.3.beta3]   Traceback (most recent call last):\n  [sagelib-9.3.beta3]     File \"setup.py\", line 60, in <module>\n  [sagelib-9.3.beta3]       from sage.misc.package import is_package_installed_and_updated\n  [sagelib-9.3.beta3]     File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py\", line 177, in <module>\n  [sagelib-9.3.beta3]       class PackageInfo(NamedTuple):\n  [sagelib-9.3.beta3]   RuntimeError: __class__ not set defining 'PackageInfo' as <class 'sage.misc.package.PackageInfo'>. Was __classcell__ propagated to type.__new__?\n  [sagelib-9.3.beta3]   ************************************************************************\n  [sagelib-9.3.beta3]   Error building the Sage library\n  [sagelib-9.3.beta3]   ************************************************************************\n```",
    "created_at": "2020-12-08T01:14:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497125",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

Build fails for me

```
  [sagelib-9.3.beta3]   Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1
  [sagelib-9.3.beta3]   Discovering Python/Cython source code....
  [sagelib-9.3.beta3]   ************************************************************************
  [sagelib-9.3.beta3]   Traceback (most recent call last):
  [sagelib-9.3.beta3]     File "setup.py", line 60, in <module>
  [sagelib-9.3.beta3]       from sage.misc.package import is_package_installed_and_updated
  [sagelib-9.3.beta3]     File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py", line 177, in <module>
  [sagelib-9.3.beta3]       class PackageInfo(NamedTuple):
  [sagelib-9.3.beta3]   RuntimeError: __class__ not set defining 'PackageInfo' as <class 'sage.misc.package.PackageInfo'>. Was __classcell__ propagated to type.__new__?
  [sagelib-9.3.beta3]   ************************************************************************
  [sagelib-9.3.beta3]   Error building the Sage library
  [sagelib-9.3.beta3]   ************************************************************************
```



---

archive/issue_events_427715.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-08T01:14:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427715"
}
```



---

archive/issue_events_427716.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-08T01:14:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427716"
}
```



---

archive/issue_comments_497126.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed\">5472ee9</a></td><td><code>Fix build and tests</code></td></tr></table>\n",
    "created_at": "2020-12-08T09:48:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497126",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed">5472ee9</a></td><td><code>Fix build and tests</code></td></tr></table>




---

archive/issue_comments_497127.json:
```json
{
    "body": "Changed commit from **[`5185685`](https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e)** to **[`5472ee9`](https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed)**",
    "created_at": "2020-12-08T09:48:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497127",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5185685`](https://github.com/sagemath/sagetrac-mirror/commit/51856852aa79738387f338321f3b1f094c45395e)** to **[`5472ee9`](https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed)**



---

archive/issue_events_427717.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-08T09:57:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427717"
}
```



---

archive/issue_events_427718.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-08T09:57:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427718"
}
```



---

archive/issue_comments_497128.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@mkoeppe](#comment:36):\n> Build fails for me\n\nShould be fixed now.\n\nCould you please have a look at #30901 and #30748. It's really awkward for me not be able to test my own changes. Thanks!",
    "created_at": "2020-12-08T09:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497128",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@mkoeppe](#comment:36):
> Build fails for me

Should be fixed now.

Could you please have a look at #30901 and #30748. It's really awkward for me not be able to test my own changes. Thanks!



---

archive/issue_comments_497129.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\n\n```\n[sagelib-9.3.beta3] Discovering Python/Cython source code....\n[sagelib-9.3.beta3] ************************************************************************\n[sagelib-9.3.beta3] Traceback (most recent call last):\n[sagelib-9.3.beta3]   File \"setup.py\", line 60, in <module>\n[sagelib-9.3.beta3]     from sage.misc.package import is_package_installed_and_updated\n[sagelib-9.3.beta3]   File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py\", line 434, in <module>\n[sagelib-9.3.beta3]     all_packages = list_packages(local=True)\n[sagelib-9.3.beta3]   File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py\", line 329, in list_packages\n[sagelib-9.3.beta3]     pkg.name = p\n[sagelib-9.3.beta3] AttributeError: can't set attribute\n[sagelib-9.3.beta3] ************************************************************************\n```",
    "created_at": "2020-12-09T02:11:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497129",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">comment:39</div>


```
[sagelib-9.3.beta3] Discovering Python/Cython source code....
[sagelib-9.3.beta3] ************************************************************************
[sagelib-9.3.beta3] Traceback (most recent call last):
[sagelib-9.3.beta3]   File "setup.py", line 60, in <module>
[sagelib-9.3.beta3]     from sage.misc.package import is_package_installed_and_updated
[sagelib-9.3.beta3]   File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py", line 434, in <module>
[sagelib-9.3.beta3]     all_packages = list_packages(local=True)
[sagelib-9.3.beta3]   File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/misc/package.py", line 329, in list_packages
[sagelib-9.3.beta3]     pkg.name = p
[sagelib-9.3.beta3] AttributeError: can't set attribute
[sagelib-9.3.beta3] ************************************************************************
```



---

archive/issue_comments_497130.json:
```json
{
    "body": "Changed commit from **[`5472ee9`](https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed)** to **[`0bb7738`](https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d)**",
    "created_at": "2020-12-09T09:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497130",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5472ee9`](https://github.com/sagemath/sagetrac-mirror/commit/5472ee904b7da94378baa3f9e69916a0f35c95ed)** to **[`0bb7738`](https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d)**



---

archive/issue_comments_497131.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d\">0bb7738</a></td><td><code>Fix immutability</code></td></tr></table>\n",
    "created_at": "2020-12-09T09:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497131",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d">0bb7738</a></td><td><code>Fix immutability</code></td></tr></table>




---

archive/issue_comments_497132.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nSorry should have tested it after the merge. Should work now.",
    "created_at": "2020-12-09T10:01:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497132",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:41" align="right">comment:41</div>

Sorry should have tested it after the merge. Should work now.



---

archive/issue_comments_497133.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\n\n```diff\n-                deprecation(31013, \"dict-like access is deprecated, use e.g `pkg.name` instead of `pkg[name]`\")\n+                deprecation(31013, \"dict-like access is deprecated, use e.g `pkg.name` instead of `pkg['name']`\")\n```",
    "created_at": "2020-12-09T19:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497133",
    "user": "https://github.com/kliem"
}
```

<div id="comment:42" align="right">comment:42</div>


```diff
-                deprecation(31013, "dict-like access is deprecated, use e.g `pkg.name` instead of `pkg[name]`")
+                deprecation(31013, "dict-like access is deprecated, use e.g `pkg.name` instead of `pkg['name']`")
```



---

archive/issue_comments_497134.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\n\n```\nRunning doctests with ID 2020-12-09-21-48-42-bac7d593.\nGit branch: test/31013\nUsing --optional=4ti2,build,debian,dochtml,e_antic,lidia,lrslib,mcqd,memlimit,normaliz,pip,pynormaliz,pyroaringbitmap,python_igraph,rubiks,sage,sage_spkg,speaklater,texttable     \nDoctesting 1 file.\nsage -t --random-seed=0 src/sage/misc/package.py\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 194, in sage.misc.package.PackageInfo\nFailed example:\n    package = PackageInfo(\"test_package\")\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.PackageInfo[0]>\", line 1, in <module>\n        package = PackageInfo(\"test_package\")\n    NameError: name 'PackageInfo' is not defined\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 195, in sage.misc.package.PackageInfo\nFailed example:\n    package[\"name\"]\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.PackageInfo[1]>\", line 1, in <module>\n        package[\"name\"]\n    NameError: name 'package' is not defined\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 199, in sage.misc.package.PackageInfo\nFailed example:\n    package[0]\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.PackageInfo[2]>\", line 1, in <module>\n        package[Integer(0)]\n    NameError: name 'package' is not defined\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 263, in sage.misc.package.pkg_sources\nFailed example:\n    sage_conf_info.installed # optional - build\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.pkg_sources[5]>\", line 1, in <module>\n        sage_conf_info.installed # optional - build\n    AttributeError: 'PackageInfo' object has no attribute 'installed'\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 413, in sage.misc.package.is_package_installed\nFailed example:\n    for pkg in list_packages(pkg_sources=('pip'), local=True):  # optional - build\n        assert not is_package_installed(pkg), \"pip package is installed: {}\".format(pkg)\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute                                                    \n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.is_package_installed[3]>\", line 2, in <module>\n        assert not is_package_installed(pkg), \"pip package is installed: {}\".format(pkg)\n    AssertionError: pip package is installed: itsdangerous\n**********************************************************************\n3 items had failures:\n   3 of   4 in sage.misc.package.PackageInfo\n   1 of   5 in sage.misc.package.is_package_installed\n   1 of   9 in sage.misc.package.pkg_sources\n    [55 tests, 5 failures, 2.38 s]\n----------------------------------------------------------------------\nsage -t --random-seed=0 src/sage/misc/package.py  # 5 doctests failed\n```\n\nEverything else passes. Build as well.",
    "created_at": "2020-12-09T20:52:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497134",
    "user": "https://github.com/kliem"
}
```

<div id="comment:43" align="right">comment:43</div>


```
Running doctests with ID 2020-12-09-21-48-42-bac7d593.
Git branch: test/31013
Using --optional=4ti2,build,debian,dochtml,e_antic,lidia,lrslib,mcqd,memlimit,normaliz,pip,pynormaliz,pyroaringbitmap,python_igraph,rubiks,sage,sage_spkg,speaklater,texttable     
Doctesting 1 file.
sage -t --random-seed=0 src/sage/misc/package.py
**********************************************************************
File "src/sage/misc/package.py", line 194, in sage.misc.package.PackageInfo
Failed example:
    package = PackageInfo("test_package")
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.PackageInfo[0]>", line 1, in <module>
        package = PackageInfo("test_package")
    NameError: name 'PackageInfo' is not defined
**********************************************************************
File "src/sage/misc/package.py", line 195, in sage.misc.package.PackageInfo
Failed example:
    package["name"]
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.PackageInfo[1]>", line 1, in <module>
        package["name"]
    NameError: name 'package' is not defined
**********************************************************************
File "src/sage/misc/package.py", line 199, in sage.misc.package.PackageInfo
Failed example:
    package[0]
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.PackageInfo[2]>", line 1, in <module>
        package[Integer(0)]
    NameError: name 'package' is not defined
**********************************************************************
File "src/sage/misc/package.py", line 263, in sage.misc.package.pkg_sources
Failed example:
    sage_conf_info.installed # optional - build
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.pkg_sources[5]>", line 1, in <module>
        sage_conf_info.installed # optional - build
    AttributeError: 'PackageInfo' object has no attribute 'installed'
**********************************************************************
File "src/sage/misc/package.py", line 413, in sage.misc.package.is_package_installed
Failed example:
    for pkg in list_packages(pkg_sources=('pip'), local=True):  # optional - build
        assert not is_package_installed(pkg), "pip package is installed: {}".format(pkg)
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute                                                    
        exec(compiled, globs)
      File "<doctest sage.misc.package.is_package_installed[3]>", line 2, in <module>
        assert not is_package_installed(pkg), "pip package is installed: {}".format(pkg)
    AssertionError: pip package is installed: itsdangerous
**********************************************************************
3 items had failures:
   3 of   4 in sage.misc.package.PackageInfo
   1 of   5 in sage.misc.package.is_package_installed
   1 of   9 in sage.misc.package.pkg_sources
    [55 tests, 5 failures, 2.38 s]
----------------------------------------------------------------------
sage -t --random-seed=0 src/sage/misc/package.py  # 5 doctests failed
```

Everything else passes. Build as well.



---

archive/issue_events_427719.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-12-09T20:52:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427719"
}
```



---

archive/issue_events_427720.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-12-09T20:52:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427720"
}
```



---

archive/issue_comments_497135.json:
```json
{
    "body": "Changed commit from **[`0bb7738`](https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d)** to **[`6b82d90`](https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821)**",
    "created_at": "2020-12-10T17:45:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497135",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0bb7738`](https://github.com/sagemath/sagetrac-mirror/commit/0bb7738255072b03b52488f408fdc9a7cf8e5c1d)** to **[`6b82d90`](https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821)**



---

archive/issue_comments_497136.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0e4a907b904e2422a51e0ef035ea63c949cc1b4\">d0e4a90</a></td><td><code>sage.misc.package.PackageInfo: Improve wording of deprecation message, fix doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821\">6b82d90</a></td><td><code>sage.misc.package.list_packages: Align optional tags in doctests</code></td></tr></table>\n",
    "created_at": "2020-12-10T17:45:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497136",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0e4a907b904e2422a51e0ef035ea63c949cc1b4">d0e4a90</a></td><td><code>sage.misc.package.PackageInfo: Improve wording of deprecation message, fix doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821">6b82d90</a></td><td><code>sage.misc.package.list_packages: Align optional tags in doctests</code></td></tr></table>




---

archive/issue_comments_497137.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nI have fixed a few things but the assertion error remains to be fixed",
    "created_at": "2020-12-10T17:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497137",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

I have fixed a few things but the assertion error remains to be fixed



---

archive/issue_comments_497138.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nLatest #30940 also needs to be merged",
    "created_at": "2020-12-16T23:51:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497138",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:46" align="right">comment:46</div>

Latest #30940 also needs to be merged



---

archive/issue_comments_497139.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nThe dependency has been merged in 9.3.beta6. Needs rebase",
    "created_at": "2021-01-19T20:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497139",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

The dependency has been merged in 9.3.beta6. Needs rebase



---

archive/issue_comments_497140.json:
```json
{
    "body": "Changed dependencies from **#30940** to none",
    "created_at": "2021-01-19T20:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497140",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30940** to none



---

archive/issue_comments_497141.json:
```json
{
    "body": "Changed commit from **[`6b82d90`](https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821)** to **[`2eee858`](https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23)**",
    "created_at": "2021-01-19T21:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497141",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6b82d90`](https://github.com/sagemath/sagetrac-mirror/commit/6b82d90810dfa0c839143e0d248f8b8731dad821)** to **[`2eee858`](https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23)**



---

archive/issue_comments_497142.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b48edf797444e433a6873ea0a4edac53aa35a19a\">b48edf7</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23\">2eee858</a></td><td><code>Code cleanup</code></td></tr></table>\n",
    "created_at": "2021-01-19T21:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497142",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b48edf797444e433a6873ea0a4edac53aa35a19a">b48edf7</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23">2eee858</a></td><td><code>Code cleanup</code></td></tr></table>




---

archive/issue_events_427721.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-01-19T21:45:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427721"
}
```



---

archive/issue_events_427722.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-01-19T21:45:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427722"
}
```



---

archive/issue_comments_497143.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nLocally, all tests pass for me now. So this should be ready for review.",
    "created_at": "2021-01-19T21:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497143",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:49" align="right">comment:49</div>

Locally, all tests pass for me now. So this should be ready for review.



---

archive/issue_comments_497144.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nTests pass for me, too.\n\n```\nall_packages = list_packages(local=True)\n```\nIt was fine to executed this code at module load time in `sage_setup.optional_extension`,  but I don't think it is good to do so at load time of `sage.misc.package`.\n\nAlso `is_package_installed_and_updated` would need documentation + test as it is moved to sagelib",
    "created_at": "2021-01-30T23:16:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497144",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:50" align="right">comment:50</div>

Tests pass for me, too.

```
all_packages = list_packages(local=True)
```
It was fine to executed this code at module load time in `sage_setup.optional_extension`,  but I don't think it is good to do so at load time of `sage.misc.package`.

Also `is_package_installed_and_updated` would need documentation + test as it is moved to sagelib



---

archive/issue_events_427723.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-30T23:16:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427723"
}
```



---

archive/issue_events_427724.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-30T23:16:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427724"
}
```



---

archive/issue_comments_497145.json:
```json
{
    "body": "Changed commit from **[`2eee858`](https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23)** to **[`541fa1b`](https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790)**",
    "created_at": "2021-02-02T17:12:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497145",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2eee858`](https://github.com/sagemath/sagetrac-mirror/commit/2eee85882a27e5538a1139cd25384f19859a8e23)** to **[`541fa1b`](https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790)**



---

archive/issue_comments_497146.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790\">541fa1b</a></td><td><code>Add documentation, test and remove caching</code></td></tr></table>\n",
    "created_at": "2021-02-02T17:12:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497146",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790">541fa1b</a></td><td><code>Add documentation, test and remove caching</code></td></tr></table>




---

archive/issue_comments_497147.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\n> Also is_package_installed_and_updated would need documentation + test as it is moved to sagelib \n\nOk done.\n\nI've removed the caching completely, because this probably is best done at the level of `list_packages` anyway.",
    "created_at": "2021-02-02T17:13:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497147",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:52" align="right">comment:52</div>

> Also is_package_installed_and_updated would need documentation + test as it is moved to sagelib 

Ok done.

I've removed the caching completely, because this probably is best done at the level of `list_packages` anyway.



---

archive/issue_events_427725.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-02-02T17:14:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427725"
}
```



---

archive/issue_events_427726.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-02-02T17:14:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427726"
}
```



---

archive/issue_comments_497148.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nRemoving caching will probably make `setup.py` somewhat slower, so I am not sure this is a good idea.",
    "created_at": "2021-02-02T17:43:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497148",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:54" align="right">comment:54</div>

Removing caching will probably make `setup.py` somewhat slower, so I am not sure this is a good idea.



---

archive/issue_comments_497149.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nPerhaps it's best to split this ticket and only do the interface improvement for `list_packages` here.",
    "created_at": "2021-02-02T17:45:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497149",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:55" align="right">comment:55</div>

Perhaps it's best to split this ticket and only do the interface improvement for `list_packages` here.



---

archive/issue_events_427727.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-10T20:28:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427727"
}
```



---

archive/issue_events_427728.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-10T20:28:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427728"
}
```



---

archive/issue_comments_497150.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@mkoeppe](#comment:55):\n> Perhaps it's best to split this ticket \n\n... I have opened #31385 (Improve interface of `list_packages`)",
    "created_at": "2021-02-12T00:32:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497150",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@mkoeppe](#comment:55):
> Perhaps it's best to split this ticket 

... I have opened #31385 (Improve interface of `list_packages`)



---

archive/issue_comments_497151.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nThanks!",
    "created_at": "2021-02-12T08:56:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497151",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:58" align="right">comment:58</div>

Thanks!



---

archive/issue_comments_497152.json:
```json
{
    "body": "Work Issues: **rebase on #31385**",
    "created_at": "2021-02-12T20:58:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497152",
    "user": "https://github.com/mkoeppe"
}
```

Work Issues: **rebase on #31385**



---

archive/issue_events_427729.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-12T20:58:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "title_is": "Remove unused class from sage_setup.optional extension",
    "title_was": "Remove unused optional extension, improve interface of list_packages",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427729"
}
```



---

archive/issue_comments_497153.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). \n-The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package` (where also a bit of typing info is added).\n+The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package`.\n \n Related: #28815\n``````\n",
    "created_at": "2021-02-12T20:58:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497153",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 The code in `optional_extension` was mostly unused and is removed in this ticket (and similarly `extension.skip_build` was nowhere else set). 
-The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package` (where also a bit of typing info is added).
+The only still used method was `is_package_installed_and_updated` which is moved to `sage.misc.package`.
 
 Related: #28815
``````




---

archive/issue_comments_497154.json:
```json
{
    "body": "Dependencies: **#31385**",
    "created_at": "2021-02-12T20:58:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497154",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#31385**



---

archive/issue_events_427730.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427730"
}
```



---

archive/issue_events_427731.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427731"
}
```



---

archive/issue_comments_497155.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497155",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:60" align="right">comment:60</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_427732.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427732"
}
```



---

archive/issue_events_427733.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427733"
}
```



---

archive/issue_comments_497156.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497156",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:61" align="right">comment:61</div>

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_497157.json:
```json
{
    "body": "Changed commit from **[`541fa1b`](https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790)** to **[`6c67908`](https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13)**",
    "created_at": "2021-11-26T21:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497157",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`541fa1b`](https://github.com/sagemath/sagetrac-mirror/commit/541fa1bbe08ed7bcda32b33e5328c6259d03e790)** to **[`6c67908`](https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13)**



---

archive/issue_comments_497158.json:
```json
{
    "body": "<div id=\"comment:62\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13\">6c67908</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr></table>\n",
    "created_at": "2021-11-26T21:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497158",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:62"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13">6c67908</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr></table>




---

archive/issue_comments_497159.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nRebased, so this is now ready for review.",
    "created_at": "2021-11-26T21:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497159",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:63" align="right">comment:63</div>

Rebased, so this is now ready for review.



---

archive/issue_comments_497160.json:
```json
{
    "body": "Changed work issues from **rebase on #31385** to none",
    "created_at": "2021-11-26T21:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497160",
    "user": "https://github.com/tobiasdiez"
}
```

Changed work issues from **rebase on #31385** to none



---

archive/issue_events_427734.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-11-26T21:40:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427734"
}
```



---

archive/issue_events_427735.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-11-26T21:40:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427735"
}
```



---

archive/issue_events_427736.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427736"
}
```



---

archive/issue_events_427737.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427737"
}
```



---

archive/issue_comments_497161.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nStalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497161",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:64" align="right">comment:64</div>

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_comments_497162.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nYes, I would appreciate if this ticket could be reviewed!",
    "created_at": "2021-12-19T20:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497162",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:65" align="right">comment:65</div>

Yes, I would appreciate if this ticket could be reviewed!



---

archive/issue_comments_497163.json:
```json
{
    "body": "Changed commit from **[`6c67908`](https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13)** to **[`a7b1e81`](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)**",
    "created_at": "2022-01-03T12:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497163",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6c67908`](https://github.com/sagemath/sagetrac-mirror/commit/6c67908838f12bf11e9c986ba5c13ff9b758dc13)** to **[`a7b1e81`](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)**



---

archive/issue_comments_497164.json:
```json
{
    "body": "<div id=\"comment:66\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11b45bda2e31e3025a3be9ab9e5bf571f527466c\">11b45bd</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57\">a7b1e81</a></td><td><code>Improve typing</code></td></tr></table>\n",
    "created_at": "2022-01-03T12:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497164",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:66"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11b45bda2e31e3025a3be9ab9e5bf571f527466c">11b45bd</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/remove_optional_extension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57">a7b1e81</a></td><td><code>Improve typing</code></td></tr></table>




---

archive/issue_comments_497165.json:
```json
{
    "body": "Changed dependencies from **#31385** to none",
    "created_at": "2022-01-03T12:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497165",
    "user": "https://github.com/tobiasdiez"
}
```

Changed dependencies from **#31385** to none



---

archive/issue_comments_497166.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nThanks for copying me Matthias. I was aware of this ticket and I guess it will at least remove some pesky doctests. Otherwise it will just make me move some patch from one file to another.\n\n`is_package_installed_and_updated` is one of those things I am patiently waiting for the modularisation of sage to kill. In the meantime I am patching an alternative mechanism anyway.",
    "created_at": "2022-01-10T04:20:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497166",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:69" align="right">comment:69</div>

Thanks for copying me Matthias. I was aware of this ticket and I guess it will at least remove some pesky doctests. Otherwise it will just make me move some patch from one file to another.

`is_package_installed_and_updated` is one of those things I am patiently waiting for the modularisation of sage to kill. In the meantime I am patching an alternative mechanism anyway.



---

archive/issue_events_427738.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-01-10T04:25:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427738"
}
```



---

archive/issue_events_427739.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-01-10T04:25:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427739"
}
```



---

archive/issue_comments_497167.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nOther than that, if you copied me for the review, it all looks good and sensible to me.",
    "created_at": "2022-01-10T04:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497167",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:70" align="right">comment:70</div>

Other than that, if you copied me for the review, it all looks good and sensible to me.



---

archive/issue_comments_497168.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2022-01-10T04:25:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497168",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **Fran√ßois Bissey**



---

archive/issue_comments_497169.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nThanks for the review!",
    "created_at": "2022-01-10T12:46:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497169",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:71" align="right">comment:71</div>

Thanks for the review!



---

archive/issue_comments_497170.json:
```json
{
    "body": "Changed branch from **[public/build/remove_optional_extension](https://github.com/sagemath/sagetrac-mirror/tree/public/build/remove_optional_extension)** to **[`a7b1e81`](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)**",
    "created_at": "2022-01-31T23:31:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31013#issuecomment-497170",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/build/remove_optional_extension](https://github.com/sagemath/sagetrac-mirror/tree/public/build/remove_optional_extension)** to **[`a7b1e81`](https://github.com/sagemath/sagetrac-mirror/commit/a7b1e818d0a0a8da264017dbc81be2984bd56d57)**



---

archive/issue_events_427740.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-31T23:31:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427740"
}
```



---

archive/issue_events_427741.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3abe1a7938ff00196c1d8e9c35a6714d7a8d60f8",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-01-31T23:31:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31013",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31013#event-427741"
}
```
