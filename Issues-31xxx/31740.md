# Issue 31740: Meta-ticket: Families, posets, complexes of manifold subsets

archive/issues_031503.json:
```json
{
    "body": "New subsets:\n\n- #31674 Make open subsets of immersed/embedded submanifolds immersed/embedded submanifolds *(merged in Sage 9.4.beta1)*\n- #31677 Open subsets of arbitrary subsets of manifolds *(merged in Sage 9.4.beta1)*\n- #31653 Images of continuous maps and embedded submanifolds as manifold subsets *(merged in Sage 9.4.beta1)*\n- #31765 `DegenerateManifold`: update subsets code\n- #31644 Topological closure of manifold subsets, methods `ManifoldSubset.closure`, `is_closed`, `declare_closed` *(merged in Sage 9.4.beta4)*\n- #31757 Topological interior of manifold subsets\n- #31745 Images of differentiable maps\n- #31688 Pullbacks (preimages) of manifold subsets under continuous maps *(merged in Sage 9.4.beta5)*\n- #31724 `ManifoldFiniteSubset`\n- #31685 `ContinuousMap.image`: if map is an isomorphism and `domain_subset` is open, create a submanifold\n- #31743 Charts, transitions, subsets with restrictions defined using `NNC_Polyhedron`\n\n`RealSet` (see also Meta-ticket #20877):\n\n- #30832 Connect `RealSet` to `sage.manifolds` *(merged in Sage 9.4.beta4)*\n- #31878 Replace `OpenInterval`, `RealLine` instances by instances of a subclass of `DifferentiableManifold`+`RealSet`\n- #21243 `RealSet`: add `closure` and `interior` methods *(merged in Sage 9.4.beta4)*\n- #31881 `RealSet`: Extend constructors so that they can build manifold objects *(merged in Sage 9.4.rc0)*\n\nFamilies and posets of manifold subsets:\n\n- #31680 Poset of manifold subsets *(merged in Sage 9.4.beta3)*\n- #31718 `ManifoldSubset`: Change some methods to generators *(merged in Sage 9.4.beta3)*\n- #31732 `ManifoldSubset`: New methods `declare_empty`, `declare_nonempty`, `is_empty`, `has_defined_points`, `open_cover_family` *(merged in Sage 9.4.beta3)*\n- #31727 `ManifoldSubset`: Add methods `subset_family`, `superset_family`, `open_superset_family`; deprecate method `list_of_subsets` *(merged in Sage 9.4.beta3)*\n- #31736 `ManifoldSubset`: New methods `declare_equal`, `equal_subsets`, `equal_subset_family` *(merged in Sage 9.4.beta3)*\n- #31763 `ManifoldSubset`: New methods `declare_subset`, `declare_superset` *(merged in Sage 9.4.beta3)*\n- #31764 `ManifoldSubset`: `union`, `intersection`, `declare_{union,intersection}` with arbitrary number of arguments *(merged in Sage 9.4.beta3)*\n- #31798 `ManifoldSubset.difference`, `complement` *(merged in Sage 9.4.beta3)*\n- #31766 `ManifoldSubset`: Replace use of `_top_subsets` by a generator\n- #31738 `ManifoldSubset.intersection`: Compute more supersets\n- #31682 manifolds: Add `_test_...` methods that check invariants of subset relations\n- #30263 `declare_union` yields wrong results\n\nGeometric datastructure tools:\n- #32170 Containers for families of geometric objects\n\nTopological tools:\n\n- #31741 `ManifoldSubset.separating_open_supersets`\n- #31744 `ManifoldSubset`: Propagate emptiness/nonemptiness using LP\n\n`Set_base` and `ConvexSet_base`:\n\n- #31916 `{Polyhedron, ConvexRationalPolyhedralCone}.{interior, relative_interior}` *(merged in Sage 9.4.beta4)*\n- #31919 ABC for convex sets *(merged in Sage 9.4.beta4)*\n- #31959 `PolyhedronFace`: Make it a subclass of `ConvexSet_closed` *(merged in Sage 9.4.beta4)*\n- #31990 `ConvexSet_base`: Add methods `an_element`, `some_elements` *(merged in Sage 9.4.beta5)*\n- #32013 Initialize a `Set` from a `ConvexSet_base` instance *(merged in Sage 9.4.beta6)*\n- #32089 `ConditionSet` *(merged in Sage 9.4.beta6)*\n\nApplication to polyhedra and optimization:\n\n- #31659 `Polyhedron.affine_hull_manifold` *(merged in Sage 9.4.beta3)*\n- #31660 `Polyhedron.relative_interior_manifold`\n- #31728 `manifolds.Sphere`: Make relation to simplicial spheres more concrete\n- #31742 `MixedIntegerLinearProgram.ambient_manifold`, `feasible_subset`, `objective_scalar_field`, `optimal_subset`\n- #31376 Complex of differentiable manifolds associated with active sets of nonlinear optimization problems\n- #31751 Reformulations of optimization problems as continuous maps on manifolds\n\nCC:  @mjungmath @egourgoulhon @tscrim @yuan-zhou\n\nStatus: new\n\nIssue created by migration from https://trac.sagemath.org/ticket/31740\n\n",
    "created_at": "2021-04-27T12:13:08Z",
    "labels": [
        "component: manifolds"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Meta-ticket: Families, posets, complexes of manifold subsets",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31740",
    "user": "https://github.com/mkoeppe"
}
```
New subsets:

- #31674 Make open subsets of immersed/embedded submanifolds immersed/embedded submanifolds *(merged in Sage 9.4.beta1)*
- #31677 Open subsets of arbitrary subsets of manifolds *(merged in Sage 9.4.beta1)*
- #31653 Images of continuous maps and embedded submanifolds as manifold subsets *(merged in Sage 9.4.beta1)*
- #31765 `DegenerateManifold`: update subsets code
- #31644 Topological closure of manifold subsets, methods `ManifoldSubset.closure`, `is_closed`, `declare_closed` *(merged in Sage 9.4.beta4)*
- #31757 Topological interior of manifold subsets
- #31745 Images of differentiable maps
- #31688 Pullbacks (preimages) of manifold subsets under continuous maps *(merged in Sage 9.4.beta5)*
- #31724 `ManifoldFiniteSubset`
- #31685 `ContinuousMap.image`: if map is an isomorphism and `domain_subset` is open, create a submanifold
- #31743 Charts, transitions, subsets with restrictions defined using `NNC_Polyhedron`

`RealSet` (see also Meta-ticket #20877):

- #30832 Connect `RealSet` to `sage.manifolds` *(merged in Sage 9.4.beta4)*
- #31878 Replace `OpenInterval`, `RealLine` instances by instances of a subclass of `DifferentiableManifold`+`RealSet`
- #21243 `RealSet`: add `closure` and `interior` methods *(merged in Sage 9.4.beta4)*
- #31881 `RealSet`: Extend constructors so that they can build manifold objects *(merged in Sage 9.4.rc0)*

Families and posets of manifold subsets:

- #31680 Poset of manifold subsets *(merged in Sage 9.4.beta3)*
- #31718 `ManifoldSubset`: Change some methods to generators *(merged in Sage 9.4.beta3)*
- #31732 `ManifoldSubset`: New methods `declare_empty`, `declare_nonempty`, `is_empty`, `has_defined_points`, `open_cover_family` *(merged in Sage 9.4.beta3)*
- #31727 `ManifoldSubset`: Add methods `subset_family`, `superset_family`, `open_superset_family`; deprecate method `list_of_subsets` *(merged in Sage 9.4.beta3)*
- #31736 `ManifoldSubset`: New methods `declare_equal`, `equal_subsets`, `equal_subset_family` *(merged in Sage 9.4.beta3)*
- #31763 `ManifoldSubset`: New methods `declare_subset`, `declare_superset` *(merged in Sage 9.4.beta3)*
- #31764 `ManifoldSubset`: `union`, `intersection`, `declare_{union,intersection}` with arbitrary number of arguments *(merged in Sage 9.4.beta3)*
- #31798 `ManifoldSubset.difference`, `complement` *(merged in Sage 9.4.beta3)*
- #31766 `ManifoldSubset`: Replace use of `_top_subsets` by a generator
- #31738 `ManifoldSubset.intersection`: Compute more supersets
- #31682 manifolds: Add `_test_...` methods that check invariants of subset relations
- #30263 `declare_union` yields wrong results

Geometric datastructure tools:
- #32170 Containers for families of geometric objects

Topological tools:

- #31741 `ManifoldSubset.separating_open_supersets`
- #31744 `ManifoldSubset`: Propagate emptiness/nonemptiness using LP

`Set_base` and `ConvexSet_base`:

- #31916 `{Polyhedron, ConvexRationalPolyhedralCone}.{interior, relative_interior}` *(merged in Sage 9.4.beta4)*
- #31919 ABC for convex sets *(merged in Sage 9.4.beta4)*
- #31959 `PolyhedronFace`: Make it a subclass of `ConvexSet_closed` *(merged in Sage 9.4.beta4)*
- #31990 `ConvexSet_base`: Add methods `an_element`, `some_elements` *(merged in Sage 9.4.beta5)*
- #32013 Initialize a `Set` from a `ConvexSet_base` instance *(merged in Sage 9.4.beta6)*
- #32089 `ConditionSet` *(merged in Sage 9.4.beta6)*

Application to polyhedra and optimization:

- #31659 `Polyhedron.affine_hull_manifold` *(merged in Sage 9.4.beta3)*
- #31660 `Polyhedron.relative_interior_manifold`
- #31728 `manifolds.Sphere`: Make relation to simplicial spheres more concrete
- #31742 `MixedIntegerLinearProgram.ambient_manifold`, `feasible_subset`, `objective_scalar_field`, `optimal_subset`
- #31376 Complex of differentiable manifolds associated with active sets of nonlinear optimization problems
- #31751 Reformulations of optimization problems as continuous maps on manifolds

CC:  @mjungmath @egourgoulhon @tscrim @yuan-zhou

Status: new

Issue created by migration from https://trac.sagemath.org/ticket/31740





---

archive/issue_comments_449954.json:
```json
{
    "body": "<a id='comment:13'></a>For me, it gets harder and harder to keep track of the actual changes taking place in a particular ticket since there are a lot of cross-dependencies and no positively reviewed tickets have been merged lately, meaning the changes swiftly accumulate.\n\nIt might be helpful to state the ticket number in the commits which would make it easier to track the differences down, at least for me.\n\nOr perhaps there is a nice git feature I am not aware of?",
    "created_at": "2021-05-08T23:47:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31740#issuecomment-449954",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:13'></a>For me, it gets harder and harder to keep track of the actual changes taking place in a particular ticket since there are a lot of cross-dependencies and no positively reviewed tickets have been merged lately, meaning the changes swiftly accumulate.

It might be helpful to state the ticket number in the commits which would make it easier to track the differences down, at least for me.

Or perhaps there is a nice git feature I am not aware of?



---

archive/issue_comments_449955.json:
```json
{
    "body": "<a id='comment:14'></a>`git log --first-parent` goes a long way",
    "created_at": "2021-05-09T00:44:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31740#issuecomment-449955",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>`git log --first-parent` goes a long way



---

archive/issue_comments_449956.json:
```json
{
    "body": "<a id='comment:16'></a>I think it would be nice to have something like `powerset` and `topology` that dynamically keep track of whether a (open) subset is contained in it.\n\nThis might also be a good opportunity to shift all this `open_covers` and `subsets` business to those classes and decouple it more from the manifold code. We can consider doing a similar thing for atlases, too. I can imagine that these changes could make pickling of manifolds easier.\n\nThis comes handy especially for sheaves, since it would allow to see them as (lazy) families indexed by `topology`.\n\nOpinions?",
    "created_at": "2021-05-16T11:14:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31740#issuecomment-449956",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:16'></a>I think it would be nice to have something like `powerset` and `topology` that dynamically keep track of whether a (open) subset is contained in it.

This might also be a good opportunity to shift all this `open_covers` and `subsets` business to those classes and decouple it more from the manifold code. We can consider doing a similar thing for atlases, too. I can imagine that these changes could make pickling of manifolds easier.

This comes handy especially for sheaves, since it would allow to see them as (lazy) families indexed by `topology`.

Opinions?



---

archive/issue_comments_449957.json:
```json
{
    "body": "<a id='comment:17'></a>In principle, this could also lead to the more general notion of topological spaces. Manifolds are then nothing but topological spaces equipped with an atlas (roughly).\n\nBut to get there eventually, we need a lot of refactoring, i.e. something for the further future.",
    "created_at": "2021-05-16T13:09:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31740#issuecomment-449957",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:17'></a>In principle, this could also lead to the more general notion of topological spaces. Manifolds are then nothing but topological spaces equipped with an atlas (roughly).

But to get there eventually, we need a lot of refactoring, i.e. something for the further future.



---

archive/issue_comments_449958.json:
```json
{
    "body": "<a id='comment:18'></a>This is also good for subset topologies in case of e.g. embedded manifolds.",
    "created_at": "2021-05-16T13:40:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31740#issuecomment-449958",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:18'></a>This is also good for subset topologies in case of e.g. embedded manifolds.



---

archive/issue_comments_449959.json:
```json
{
    "body": "<a id='comment:19'></a>See also #31785 \"Category of open subsets of a topological space\".",
    "created_at": "2021-05-16T18:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31740",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31740#issuecomment-449959",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>See also #31785 "Category of open subsets of a topological space".



---

archive/issue_events_083708.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:07:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31740",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31740#event-83708"
}
```



---

archive/issue_events_083709.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31740",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31740#event-83709"
}
```



---

archive/issue_events_083710.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31740",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31740#event-83710"
}
```



---

archive/issue_events_083711.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31740",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31740#event-83711"
}
```



---

archive/issue_events_083712.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31740",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31740#event-83712"
}
```



---

archive/issue_events_083713.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31740",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31740#event-83713"
}
```



---

archive/issue_events_083714.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31740",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31740#event-83714"
}
```
