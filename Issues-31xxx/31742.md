# Issue 31742: MixedIntegerLinearProgram.ambient_manifold, feasible_subset, objective_scalar_field, optimal_subset

archive/issues_031505.json:
```json
{
    "body": "We define some convenience methods that make it easy to construct manifold objects corresponding to linear and mixed-integer linear optimization problems.\n\nThe ambient manifold is just a Euclidean space, using the (formatted) variable names of the frontend.  We also define a backend chart using the variable names that the MILP backend uses.\n\nAdding variables to the MILP will define a `ContinuousMap` that injects the previous MILP into the new one.\n\nAdding constraints to the MILP will set up a subset.\n\n\n\nCC:  @egourgoulhon @mjungmath @tscrim @yuan-zhou\n\nBranch: [u/mkoeppe/mixedintegerlinearprogram_ambient_manifold__feasible_subset__objective_scalar_field__optimal_subset](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/mixedintegerlinearprogram_ambient_manifold__feasible_subset__objective_scalar_field__optimal_subset)\n\nCommit: [1c7a69772c51deaa5898d2cf5d5b1a888c7c7c94](https://github.com/sagemath/sagetrac-mirror/commit/1c7a69772c51deaa5898d2cf5d5b1a888c7c7c94)\n\nStatus: new\n\nIssue created by migration from https://trac.sagemath.org/ticket/31742\n\n",
    "created_at": "2021-04-27T20:21:41Z",
    "labels": [
        "component: manifolds"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "MixedIntegerLinearProgram.ambient_manifold, feasible_subset, objective_scalar_field, optimal_subset",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31742",
    "user": "https://github.com/mkoeppe"
}
```
We define some convenience methods that make it easy to construct manifold objects corresponding to linear and mixed-integer linear optimization problems.

The ambient manifold is just a Euclidean space, using the (formatted) variable names of the frontend.  We also define a backend chart using the variable names that the MILP backend uses.

Adding variables to the MILP will define a `ContinuousMap` that injects the previous MILP into the new one.

Adding constraints to the MILP will set up a subset.



CC:  @egourgoulhon @mjungmath @tscrim @yuan-zhou

Branch: [u/mkoeppe/mixedintegerlinearprogram_ambient_manifold__feasible_subset__objective_scalar_field__optimal_subset](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/mixedintegerlinearprogram_ambient_manifold__feasible_subset__objective_scalar_field__optimal_subset)

Commit: [1c7a69772c51deaa5898d2cf5d5b1a888c7c7c94](https://github.com/sagemath/sagetrac-mirror/commit/1c7a69772c51deaa5898d2cf5d5b1a888c7c7c94)

Status: new

Issue created by migration from https://trac.sagemath.org/ticket/31742





---

archive/issue_comments_631744.json:
```json
{
    "body": "Branch: [u/mkoeppe/mixedintegerlinearprogram_ambient_manifold__feasible_subset__objective_scalar_field__optimal_subset](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/mixedintegerlinearprogram_ambient_manifold__feasible_subset__objective_scalar_field__optimal_subset)",
    "created_at": "2021-04-28T02:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31742#issuecomment-631744",
    "user": "https://github.com/mkoeppe"
}
```

Branch: [u/mkoeppe/mixedintegerlinearprogram_ambient_manifold__feasible_subset__objective_scalar_field__optimal_subset](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/mixedintegerlinearprogram_ambient_manifold__feasible_subset__objective_scalar_field__optimal_subset)



---

archive/issue_comments_631745.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[3270098](https://github.com/sagemath/sagetrac-mirror/commit/3270098e0c8a43651a983acb0599f66541c22f60)|`MixedIntegerLinearProgram: New init arg 'name'`|\n|[a001f20](https://github.com/sagemath/sagetrac-mirror/commit/a001f2072d35f8e9b95e2cf9e9c2908a933fe153)|`MixedIntegerLinearProgram.interactive_lp_problem: Factor out helper functions _backend_variable_names etc`|\n|[616dc06](https://github.com/sagemath/sagetrac-mirror/commit/616dc06bdd5325f26c603d47a02d3c3ab5845a13)|`MixedIntegerLinearProgram.ambient_manifold: New`|",
    "created_at": "2021-04-28T04:36:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31742#issuecomment-631745",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[3270098](https://github.com/sagemath/sagetrac-mirror/commit/3270098e0c8a43651a983acb0599f66541c22f60)|`MixedIntegerLinearProgram: New init arg 'name'`|
|[a001f20](https://github.com/sagemath/sagetrac-mirror/commit/a001f2072d35f8e9b95e2cf9e9c2908a933fe153)|`MixedIntegerLinearProgram.interactive_lp_problem: Factor out helper functions _backend_variable_names etc`|
|[616dc06](https://github.com/sagemath/sagetrac-mirror/commit/616dc06bdd5325f26c603d47a02d3c3ab5845a13)|`MixedIntegerLinearProgram.ambient_manifold: New`|



---

archive/issue_comments_631746.json:
```json
{
    "body": "Commit: [616dc06bdd5325f26c603d47a02d3c3ab5845a13](https://github.com/sagemath/sagetrac-mirror/commit/616dc06bdd5325f26c603d47a02d3c3ab5845a13)",
    "created_at": "2021-04-28T04:36:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31742#issuecomment-631746",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Commit: [616dc06bdd5325f26c603d47a02d3c3ab5845a13](https://github.com/sagemath/sagetrac-mirror/commit/616dc06bdd5325f26c603d47a02d3c3ab5845a13)



---

archive/issue_comments_631747.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[b1b29a5](https://github.com/sagemath/sagetrac-mirror/commit/b1b29a5bf3c7f5e01358fb0179a9717ab695ed69)|`MixedIntegerLinearProgram.ambient_manifold: New`|",
    "created_at": "2021-04-28T05:52:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31742#issuecomment-631747",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[b1b29a5](https://github.com/sagemath/sagetrac-mirror/commit/b1b29a5bf3c7f5e01358fb0179a9717ab695ed69)|`MixedIntegerLinearProgram.ambient_manifold: New`|



---

archive/issue_comments_631748.json:
```json
{
    "body": "Changing commit from \"[616dc06bdd5325f26c603d47a02d3c3ab5845a13](https://github.com/sagemath/sagetrac-mirror/commit/616dc06bdd5325f26c603d47a02d3c3ab5845a13)\" to \"[b1b29a5bf3c7f5e01358fb0179a9717ab695ed69](https://github.com/sagemath/sagetrac-mirror/commit/b1b29a5bf3c7f5e01358fb0179a9717ab695ed69)\"",
    "created_at": "2021-04-28T05:52:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31742#issuecomment-631748",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[616dc06bdd5325f26c603d47a02d3c3ab5845a13](https://github.com/sagemath/sagetrac-mirror/commit/616dc06bdd5325f26c603d47a02d3c3ab5845a13)" to "[b1b29a5bf3c7f5e01358fb0179a9717ab695ed69](https://github.com/sagemath/sagetrac-mirror/commit/b1b29a5bf3c7f5e01358fb0179a9717ab695ed69)"



---

archive/issue_comments_631749.json:
```json
{
    "body": "Changing commit from \"[b1b29a5bf3c7f5e01358fb0179a9717ab695ed69](https://github.com/sagemath/sagetrac-mirror/commit/b1b29a5bf3c7f5e01358fb0179a9717ab695ed69)\" to \"[1c7a69772c51deaa5898d2cf5d5b1a888c7c7c94](https://github.com/sagemath/sagetrac-mirror/commit/1c7a69772c51deaa5898d2cf5d5b1a888c7c7c94)\"",
    "created_at": "2021-04-28T05:55:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31742#issuecomment-631749",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[b1b29a5bf3c7f5e01358fb0179a9717ab695ed69](https://github.com/sagemath/sagetrac-mirror/commit/b1b29a5bf3c7f5e01358fb0179a9717ab695ed69)" to "[1c7a69772c51deaa5898d2cf5d5b1a888c7c7c94](https://github.com/sagemath/sagetrac-mirror/commit/1c7a69772c51deaa5898d2cf5d5b1a888c7c7c94)"



---

archive/issue_comments_631750.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n|[1c7a697](https://github.com/sagemath/sagetrac-mirror/commit/1c7a69772c51deaa5898d2cf5d5b1a888c7c7c94)|`MixedIntegerLinearProgram.ambient_manifold: Add docstring`|",
    "created_at": "2021-04-28T05:55:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31742#issuecomment-631750",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|
|[1c7a697](https://github.com/sagemath/sagetrac-mirror/commit/1c7a69772c51deaa5898d2cf5d5b1a888c7c7c94)|`MixedIntegerLinearProgram.ambient_manifold: Add docstring`|



---

archive/issue_comments_631751.json:
```json
{
    "body": "<a id='comment:5'></a>\nPerhaps the strange variable names for the backend, constructed in `MIPVariable.__getitem__`, should be changed to the format that `_format_backend_variable_name` uses.\n\n```\nsage: M2.<x> = MixedIntegerLinearProgram()                                                                                                               \nsage: x[1,2]                                                                                                                                             \nx_0\nsage: x[3,4]                                                                                                                                             \nx_1\nsage: M2.get_backend().col_name(0)                                                                                                                       \n'x[(1, 2)]'\n```\nThis variable name is not compatible with LP (http://lpsolve.sourceforge.net/5.0/CPLEX-format.htm) or MPS file format (https://www.gurobi.com/documentation/9.1/refman/mps_format.html).\nSo changing this to something that has a chance to work with these file formats, such as `x_1_2`, would be an improvement.",
    "created_at": "2021-04-28T06:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31742#issuecomment-631751",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Perhaps the strange variable names for the backend, constructed in `MIPVariable.__getitem__`, should be changed to the format that `_format_backend_variable_name` uses.

```
sage: M2.<x> = MixedIntegerLinearProgram()                                                                                                               
sage: x[1,2]                                                                                                                                             
x_0
sage: x[3,4]                                                                                                                                             
x_1
sage: M2.get_backend().col_name(0)                                                                                                                       
'x[(1, 2)]'
```
This variable name is not compatible with LP (http://lpsolve.sourceforge.net/5.0/CPLEX-format.htm) or MPS file format (https://www.gurobi.com/documentation/9.1/refman/mps_format.html).
So changing this to something that has a chance to work with these file formats, such as `x_1_2`, would be an improvement.



---

archive/issue_comments_631752.json:
```json
{
    "body": "<a id='comment:6'></a>\nopened #31791 (`MIPVariable`: Better names for backend variable names)",
    "created_at": "2021-05-07T18:13:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31742#issuecomment-631752",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
opened #31791 (`MIPVariable`: Better names for backend variable names)



---

archive/issue_events_094238.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31742",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31742#event-94238"
}
```



---

archive/issue_events_094239.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31742",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31742#event-94239"
}
```



---

archive/issue_events_094240.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31742",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31742#event-94240"
}
```



---

archive/issue_events_094241.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31742",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31742#event-94241"
}
```



---

archive/issue_events_094242.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31742",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31742#event-94242"
}
```



---

archive/issue_events_094243.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31742",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31742#event-94243"
}
```



---

archive/issue_events_094244.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31742",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31742#event-94244"
}
```
