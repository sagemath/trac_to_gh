# Issue 31373: Upgrade ipython to 7.20.0 and jedi to 0.18.0

archive/issues_031136.json:
```json
{
    "body": "This ticket upgrade ipython to 7.20.0 and jedi to 0.18.0.\n\nThis keeps the interactive shell from crashing when hitting tab completion after:\n\n```\nsage: P = polytopes.cube()\nsage: P.f_vector(\n```\n\nStill an error is raised after this ticket, but the session restores itself.\n\nBranch: [3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)\n\nReviewer: Matthias Koeppe\n\nAuthor: Jonathan Kliem\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31373\n\n",
    "closed_at": "2021-03-09T00:01:35Z",
    "created_at": "2021-02-10T08:09:16Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Upgrade ipython to 7.20.0 and jedi to 0.18.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31373",
    "user": "https://github.com/kliem"
}
```
This ticket upgrade ipython to 7.20.0 and jedi to 0.18.0.

This keeps the interactive shell from crashing when hitting tab completion after:

```
sage: P = polytopes.cube()
sage: P.f_vector(
```

Still an error is raised after this ticket, but the session restores itself.

Branch: [3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)

Reviewer: Matthias Koeppe

Author: Jonathan Kliem

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31373





---

archive/issue_comments_623190.json:
```json
{
    "body": "Branch: [public/31373](https://github.com/sagemath/sagetrac-mirror/tree/public/31373)",
    "created_at": "2021-02-10T08:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31373#issuecomment-623190",
    "user": "https://github.com/kliem"
}
```

Branch: [public/31373](https://github.com/sagemath/sagetrac-mirror/tree/public/31373)



---

archive/issue_comments_623191.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[3b7d7e5](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)|`upgrade jedi and ipython`|",
    "created_at": "2021-02-10T08:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31373#issuecomment-623191",
    "user": "https://github.com/kliem"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                          |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[3b7d7e5](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)|`upgrade jedi and ipython`|



---

archive/issue_comments_623192.json:
```json
{
    "body": "Commit: [3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)",
    "created_at": "2021-02-10T08:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31373#issuecomment-623192",
    "user": "https://github.com/kliem"
}
```

Commit: [3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)



---

archive/issue_comments_623193.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-02-10T08:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31373#issuecomment-623193",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_623194.json:
```json
{
    "body": "<a id='comment:2'></a>\nExcept for\n\n```\nsage -t --long --random-seed=0 src/sage/interfaces/singular.py  # Killed due to segmentation fault\n```\nall tests pass locally.",
    "created_at": "2021-02-10T09:57:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31373#issuecomment-623194",
    "user": "https://github.com/kliem"
}
```

<a id='comment:2'></a>
Except for

```
sage -t --long --random-seed=0 src/sage/interfaces/singular.py  # Killed due to segmentation fault
```
all tests pass locally.



---

archive/issue_comments_623195.json:
```json
{
    "body": "Reviewer: https://github.com/kliem/sage/pull/37/checks",
    "created_at": "2021-02-10T09:58:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31373#issuecomment-623195",
    "user": "https://github.com/kliem"
}
```

Reviewer: https://github.com/kliem/sage/pull/37/checks



---

archive/issue_comments_623196.json:
```json
{
    "body": "<a id='comment:4'></a>\nThis update seems fine.",
    "created_at": "2021-02-11T23:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31373#issuecomment-623196",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
This update seems fine.



---

archive/issue_comments_623197.json:
```json
{
    "body": "Changing reviewer from \"https://github.com/kliem/sage/pull/37/checks\" to \"Matthias Koeppe\"",
    "created_at": "2021-02-11T23:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31373#issuecomment-623197",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "https://github.com/kliem/sage/pull/37/checks" to "Matthias Koeppe"



---

archive/issue_comments_623198.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-02-11T23:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31373#issuecomment-623198",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_623199.json:
```json
{
    "body": "Changing branch from \"[public/31373](https://github.com/sagemath/sagetrac-mirror/tree/public/31373)\" to \"[3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)\"",
    "created_at": "2021-03-09T00:01:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31373#issuecomment-623199",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[public/31373](https://github.com/sagemath/sagetrac-mirror/tree/public/31373)" to "[3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)"



---

archive/issue_comments_623200.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-03-09T00:01:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31373#issuecomment-623200",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_092549.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-09T00:01:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31373",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31373#event-92549"
}
```



---

archive/issue_comments_623201.json:
```json
{
    "body": "<a id='comment:6'></a>\nOh no! This broke support for Python 3.6 - as on `ubuntu-bionic-standard` - https://github.com/mkoeppe/sage/runs/2070658697\n\n```\nInstalling ipython-7.20.0\n\nIPython 7.17+ supports Python 3.7 and above, following NEP 29.\nWhen using Python 2.7, please install IPython 5.x LTS Long Term Support version.\nPython 3.3 and 3.4 were supported up to IPython 6.x.\nPython 3.5 was supported with IPython 7.0 to 7.9.\nPython 3.6 was supported with IPython up to 7.16.\n\nSee IPython `README.rst` file for more information:\n\n    https://github.com/ipython/ipython/blob/master/README.rst\n\nPython sys.version_info(major=3, minor=6, micro=9, releaselevel='final', serial=0) detected.\n```",
    "created_at": "2021-03-10T01:22:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31373#issuecomment-623201",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Oh no! This broke support for Python 3.6 - as on `ubuntu-bionic-standard` - https://github.com/mkoeppe/sage/runs/2070658697

```
Installing ipython-7.20.0

IPython 7.17+ supports Python 3.7 and above, following NEP 29.
When using Python 2.7, please install IPython 5.x LTS Long Term Support version.
Python 3.3 and 3.4 were supported up to IPython 6.x.
Python 3.5 was supported with IPython 7.0 to 7.9.
Python 3.6 was supported with IPython up to 7.16.

See IPython `README.rst` file for more information:

    https://github.com/ipython/ipython/blob/master/README.rst

Python sys.version_info(major=3, minor=6, micro=9, releaselevel='final', serial=0) detected.
```



---

archive/issue_comments_623202.json:
```json
{
    "body": "Changing commit from \"[3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)\" to \"\"",
    "created_at": "2021-03-10T01:22:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31373#issuecomment-623202",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "[3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)" to ""



---

archive/issue_comments_623203.json:
```json
{
    "body": "<a id='comment:7'></a>\nFollow-up = #31476",
    "created_at": "2021-03-10T01:29:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31373#issuecomment-623203",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Follow-up = #31476
