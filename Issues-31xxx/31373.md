# Issue 31373: Upgrade ipython to 7.20.0 and jedi to 0.18.0

archive/issues_031136.json:
```json
{
    "assignees": [],
    "body": "This ticket upgrade ipython to 7.20.0 and jedi to 0.18.0.\n\nThis keeps the interactive shell from crashing when hitting tab completion after:\n\n```\nsage: P = polytopes.cube()\nsage: P.f_vector(\n```\n\nStill an error is raised after this ticket, but the session restores itself.\n\nBranch: **[3b7d7e5](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **Jonathan Kliem**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31373_\n\n",
    "closed_at": "2021-03-09T00:01:35Z",
    "created_at": "2021-02-10T08:09:16Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade ipython to 7.20.0 and jedi to 0.18.0",
    "type": "issue",
    "updated_at": "2021-03-10T01:29:52Z",
    "url": "https://github.com/sagemath/sage/issues/31373",
    "user": "https://github.com/kliem"
}
```
This ticket upgrade ipython to 7.20.0 and jedi to 0.18.0.

This keeps the interactive shell from crashing when hitting tab completion after:

```
sage: P = polytopes.cube()
sage: P.f_vector(
```

Still an error is raised after this ticket, but the session restores itself.

Branch: **[3b7d7e5](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)**

Reviewer: **Matthias Koeppe**

Author: **Jonathan Kliem**

_Issue created by migration from https://trac.sagemath.org/ticket/31373_





---

archive/issue_events_414138.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-02-10T08:09:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31373#event-414138"
}
```



---

archive/issue_events_414139.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-02-10T08:09:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31373#event-414139"
}
```



---

archive/issue_events_414140.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-02-10T08:09:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31373#event-414140"
}
```



---

archive/issue_events_414141.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-02-10T08:09:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31373#event-414141"
}
```



---

archive/issue_comments_506210.json:
```json
{
    "body": "Branch: **[public/31373](https://github.com/sagemath/sagetrac-mirror/tree/public/31373)**",
    "created_at": "2021-02-10T08:10:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31373#issuecomment-506210",
    "user": "https://github.com/kliem"
}
```

Branch: **[public/31373](https://github.com/sagemath/sagetrac-mirror/tree/public/31373)**



---

archive/issue_comments_506211.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d\">3b7d7e5</a></td><td><code>upgrade jedi and ipython</code></td></tr></table>\n",
    "created_at": "2021-02-10T08:10:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31373#issuecomment-506211",
    "user": "https://github.com/kliem"
}
```

<div id="comment:1" align="right">Comment 1</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d">3b7d7e5</a></td><td><code>upgrade jedi and ipython</code></td></tr></table>




---

archive/issue_comments_506212.json:
```json
{
    "body": "Commit: **[3b7d7e5](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)**",
    "created_at": "2021-02-10T08:10:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31373#issuecomment-506212",
    "user": "https://github.com/kliem"
}
```

Commit: **[3b7d7e5](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)**



---

archive/issue_events_414142.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-02-10T08:10:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31373#event-414142"
}
```



---

archive/issue_comments_506213.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nExcept for\n\n```\nsage -t --long --random-seed=0 src/sage/interfaces/singular.py  # Killed due to segmentation fault\n```\nall tests pass locally.",
    "created_at": "2021-02-10T09:57:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31373#issuecomment-506213",
    "user": "https://github.com/kliem"
}
```

<div id="comment:2" align="right">Comment 2</div>

Except for

```
sage -t --long --random-seed=0 src/sage/interfaces/singular.py  # Killed due to segmentation fault
```
all tests pass locally.



---

archive/issue_comments_506214.json:
```json
{
    "body": "Reviewer: **https://github.com/kliem/sage/pull/37/checks**",
    "created_at": "2021-02-10T09:58:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31373#issuecomment-506214",
    "user": "https://github.com/kliem"
}
```

Reviewer: **https://github.com/kliem/sage/pull/37/checks**



---

archive/issue_comments_506215.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nThis update seems fine.",
    "created_at": "2021-02-11T23:09:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31373#issuecomment-506215",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">Comment 4</div>

This update seems fine.



---

archive/issue_comments_506216.json:
```json
{
    "body": "Changed reviewer from **https://github.com/kliem/sage/pull/37/checks** to **Matthias Koeppe**",
    "created_at": "2021-02-11T23:09:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31373#issuecomment-506216",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/kliem/sage/pull/37/checks** to **Matthias Koeppe**



---

archive/issue_events_414143.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-11T23:09:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31373#event-414143"
}
```



---

archive/issue_events_414144.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-11T23:09:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31373#event-414144"
}
```



---

archive/issue_comments_506217.json:
```json
{
    "body": "Changed branch from **[public/31373](https://github.com/sagemath/sagetrac-mirror/tree/public/31373)** to **[3b7d7e5](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)**",
    "created_at": "2021-03-09T00:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31373#issuecomment-506217",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/31373](https://github.com/sagemath/sagetrac-mirror/tree/public/31373)** to **[3b7d7e5](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)**



---

archive/issue_events_414145.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-09T00:01:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31373#event-414145"
}
```



---

archive/issue_events_414146.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "64c1336fc356f17406c579e2471e0fa92f0e9123",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-03-09T00:01:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31373#event-414146"
}
```



---

archive/issue_comments_506218.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nOh no! This broke support for Python 3.6 - as on `ubuntu-bionic-standard` - https://github.com/mkoeppe/sage/runs/2070658697\n\n```\nInstalling ipython-7.20.0\n\nIPython 7.17+ supports Python 3.7 and above, following NEP 29.\nWhen using Python 2.7, please install IPython 5.x LTS Long Term Support version.\nPython 3.3 and 3.4 were supported up to IPython 6.x.\nPython 3.5 was supported with IPython 7.0 to 7.9.\nPython 3.6 was supported with IPython up to 7.16.\n\nSee IPython `README.rst` file for more information:\n\n    https://github.com/ipython/ipython/blob/master/README.rst\n\nPython sys.version_info(major=3, minor=6, micro=9, releaselevel='final', serial=0) detected.\n```",
    "created_at": "2021-03-10T01:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31373#issuecomment-506218",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">Comment 6</div>

Oh no! This broke support for Python 3.6 - as on `ubuntu-bionic-standard` - https://github.com/mkoeppe/sage/runs/2070658697

```
Installing ipython-7.20.0

IPython 7.17+ supports Python 3.7 and above, following NEP 29.
When using Python 2.7, please install IPython 5.x LTS Long Term Support version.
Python 3.3 and 3.4 were supported up to IPython 6.x.
Python 3.5 was supported with IPython 7.0 to 7.9.
Python 3.6 was supported with IPython up to 7.16.

See IPython `README.rst` file for more information:

    https://github.com/ipython/ipython/blob/master/README.rst

Python sys.version_info(major=3, minor=6, micro=9, releaselevel='final', serial=0) detected.
```



---

archive/issue_comments_506219.json:
```json
{
    "body": "Changed commit from **[3b7d7e5](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)** to none",
    "created_at": "2021-03-10T01:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31373#issuecomment-506219",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[3b7d7e5](https://github.com/sagemath/sagetrac-mirror/commit/3b7d7e5ea3e260a80a2ccb2af8025ed4ddb1bd3d)** to none



---

archive/issue_comments_506220.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nFollow-up = #31476",
    "created_at": "2021-03-10T01:29:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31373#issuecomment-506220",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">Comment 7</div>

Follow-up = #31476
