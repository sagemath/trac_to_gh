# Issue 31150: refresh riemann_surface.py

archive/issues_030913.json:
```json
{
    "body": "* fix some lgtm warnings\n* rather large set of pep8 changes\n* some other code details\n\nCC:  @tscrim @slel @dcoudert\n\nBranch/Commit: f3b6a28f0c84e1dd9cbfe9439fed0d3ffe364c9e\n\nReviewer: David Coudert\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31150\n\n",
    "closed_at": "2021-01-17T13:45:53Z",
    "created_at": "2021-01-02T12:59:03Z",
    "labels": [
        "component: algebraic geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "refresh riemann_surface.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31150",
    "user": "https://github.com/fchapoton"
}
```
* fix some lgtm warnings
* rather large set of pep8 changes
* some other code details

CC:  @tscrim @slel @dcoudert

Branch/Commit: f3b6a28f0c84e1dd9cbfe9439fed0d3ffe364c9e

Reviewer: David Coudert

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31150





---

archive/issue_comments_618047.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-01-02T12:59:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31150#issuecomment-618047",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_618048.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/31150\"",
    "created_at": "2021-01-02T12:59:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31150#issuecomment-618048",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/31150"



---

archive/issue_comments_618049.json:
```json
{
    "body": "Changing commit from \"\" to \"05e1d84e3d715d50b42284f0a13a225b9963ae88\"",
    "created_at": "2021-01-02T12:59:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31150#issuecomment-618049",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "05e1d84e3d715d50b42284f0a13a225b9963ae88"



---

archive/issue_comments_618050.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[05e1d84](https://git.sagemath.org/sage.git/commit/?id=05e1d84e3d715d50b42284f0a13a225b9963ae88)|`refresh riemann_surface.py`|",
    "created_at": "2021-01-02T12:59:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31150#issuecomment-618050",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[05e1d84](https://git.sagemath.org/sage.git/commit/?id=05e1d84e3d715d50b42284f0a13a225b9963ae88)|`refresh riemann_surface.py`|



---

archive/issue_comments_618051.json:
```json
{
    "body": "<a id='comment:3'></a>\ngreen bot, please review",
    "created_at": "2021-01-04T13:39:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31150#issuecomment-618051",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
green bot, please review



---

archive/issue_comments_618052.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Coudert\"",
    "created_at": "2021-01-04T14:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31150#issuecomment-618052",
    "user": "https://github.com/dcoudert"
}
```

Changing reviewer from "" to "David Coudert"



---

archive/issue_comments_618053.json:
```json
{
    "body": "<a id='comment:4'></a>\nI know this ticket is about coding style and not optimizing the code, but in `return [(c.real_part(), c.imag_part()) for c in cpoints + extra_points]`:\n- Why using `(c.real_part(), c.imag_part())` and not directly `tuple(c)` which gives the same result (I think) ?\n- could be good to use `itertools.chain` to avoid `cpoints + extra_points` ?\n\n\nThis block is not align on 80 columns\n\n```diff\n+    # we check that the singularities lie at (1:0:0),(0:1:0),(0:0:1)\n+    # by checking that the eliminations of x, y, z result in (principal) ideals\n+    # generated by a monomial. This is a sufficient condition, but not completely necessary.\n+    # It's cheap to check, though.\n```\n\n\nIn `normalize_pairs`, you missed some corrections ;)\n\n```diff\n-            R=[]\n-            for i in range(len(L)-1):\n+            R = []\n+            for i in range(len(L) - 1):\n                 if L[i][0]<L[i+1][0]:\n-                    R.append((L[i],L[i+1]))\n+                    R.append((L[i], L[i+1]))\n                 else:\n                     R.append((L[i+1],L[i]))\n             return R\n```\n\nWhy not using `R.nrows()` and `R.ncols()` in\n\n```diff\n+        if not(len(R.rows()) == 2 * g == len(R.columns())):\n```",
    "created_at": "2021-01-04T14:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31150#issuecomment-618053",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>
I know this ticket is about coding style and not optimizing the code, but in `return [(c.real_part(), c.imag_part()) for c in cpoints + extra_points]`:
- Why using `(c.real_part(), c.imag_part())` and not directly `tuple(c)` which gives the same result (I think) ?
- could be good to use `itertools.chain` to avoid `cpoints + extra_points` ?


This block is not align on 80 columns

```diff
+    # we check that the singularities lie at (1:0:0),(0:1:0),(0:0:1)
+    # by checking that the eliminations of x, y, z result in (principal) ideals
+    # generated by a monomial. This is a sufficient condition, but not completely necessary.
+    # It's cheap to check, though.
```


In `normalize_pairs`, you missed some corrections ;)

```diff
-            R=[]
-            for i in range(len(L)-1):
+            R = []
+            for i in range(len(L) - 1):
                 if L[i][0]<L[i+1][0]:
-                    R.append((L[i],L[i+1]))
+                    R.append((L[i], L[i+1]))
                 else:
                     R.append((L[i+1],L[i]))
             return R
```

Why not using `R.nrows()` and `R.ncols()` in

```diff
+        if not(len(R.rows()) == 2 * g == len(R.columns())):
```



---

archive/issue_comments_618054.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------|\n|[f3b6a28](https://git.sagemath.org/sage.git/commit/?id=f3b6a28f0c84e1dd9cbfe9439fed0d3ffe364c9e)|`a few more details`|",
    "created_at": "2021-01-04T16:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31150#issuecomment-618054",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
|[f3b6a28](https://git.sagemath.org/sage.git/commit/?id=f3b6a28f0c84e1dd9cbfe9439fed0d3ffe364c9e)|`a few more details`|



---

archive/issue_comments_618055.json:
```json
{
    "body": "Changing commit from \"05e1d84e3d715d50b42284f0a13a225b9963ae88\" to \"f3b6a28f0c84e1dd9cbfe9439fed0d3ffe364c9e\"",
    "created_at": "2021-01-04T16:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31150#issuecomment-618055",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "05e1d84e3d715d50b42284f0a13a225b9963ae88" to "f3b6a28f0c84e1dd9cbfe9439fed0d3ffe364c9e"



---

archive/issue_comments_618056.json:
```json
{
    "body": "<a id='comment:6'></a>\nvoila. ca ira comme ca ?\n\nJe suis pas trop fan de itertools.",
    "created_at": "2021-01-04T16:22:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31150#issuecomment-618056",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
voila. ca ira comme ca ?

Je suis pas trop fan de itertools.



---

archive/issue_comments_618057.json:
```json
{
    "body": "<a id='comment:7'></a>\nLGTM.\n\nPour itertools, je pousse pas. Si les 2 listes sont longues, ca vaut le cout de faire un chainage ou tout autre solution pour \u00e9viter le merge, mais sinon, c'est assez n\u00e9gligeable.",
    "created_at": "2021-01-04T16:36:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31150#issuecomment-618057",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>
LGTM.

Pour itertools, je pousse pas. Si les 2 listes sont longues, ca vaut le cout de faire un chainage ou tout autre solution pour éviter le merge, mais sinon, c'est assez négligeable.



---

archive/issue_comments_618058.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-01-04T16:36:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31150#issuecomment-618058",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_081380.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-17T13:45:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31150",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31150#event-81380"
}
```



---

archive/issue_comments_618059.json:
```json
{
    "body": "Changing branch from \"u/chapoton/31150\" to \"f3b6a28f0c84e1dd9cbfe9439fed0d3ffe364c9e\"",
    "created_at": "2021-01-17T13:45:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31150#issuecomment-618059",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/chapoton/31150" to "f3b6a28f0c84e1dd9cbfe9439fed0d3ffe364c9e"



---

archive/issue_comments_618060.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-01-17T13:45:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31150#issuecomment-618060",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
