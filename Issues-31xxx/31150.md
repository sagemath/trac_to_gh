# Issue 31150: refresh riemann_surface.py

archive/issues_030913.json:
```json
{
    "assignees": [],
    "body": "* fix some lgtm warnings\n* rather large set of pep8 changes\n* some other code details\n\nCC:  @tscrim @slel @dcoudert\n\nBranch/Commit: **[`f3b6a28`](https://github.com/sagemath/sagetrac-mirror/commit/f3b6a28f0c84e1dd9cbfe9439fed0d3ffe364c9e)**\n\nReviewer: **David Coudert**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nComponent: **algebraic geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31150_\n\n",
    "closed_at": "2021-01-17T13:45:53Z",
    "created_at": "2021-01-02T12:59:03Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "refresh riemann_surface.py",
    "type": "issue",
    "updated_at": "2021-01-17T13:45:53Z",
    "url": "https://github.com/sagemath/sage/issues/31150",
    "user": "https://github.com/fchapoton"
}
```
* fix some lgtm warnings
* rather large set of pep8 changes
* some other code details

CC:  @tscrim @slel @dcoudert

Branch/Commit: **[`f3b6a28`](https://github.com/sagemath/sagetrac-mirror/commit/f3b6a28f0c84e1dd9cbfe9439fed0d3ffe364c9e)**

Reviewer: **David Coudert**

Author: **Frédéric Chapoton**

Component: **algebraic geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/31150_





---

archive/issue_events_429463.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-01-02T12:59:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31150#event-429463"
}
```



---

archive/issue_events_429464.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-01-02T12:59:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "c: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31150#event-429464"
}
```



---

archive/issue_events_429465.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-01-02T12:59:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31150#event-429465"
}
```



---

archive/issue_events_429466.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-01-02T12:59:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31150#event-429466"
}
```



---

archive/issue_events_429467.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-01-02T12:59:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31150#event-429467"
}
```



---

archive/issue_comments_499262.json:
```json
{
    "body": "Branch: **[u/chapoton/31150](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/31150)**",
    "created_at": "2021-01-02T12:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31150#issuecomment-499262",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/31150](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/31150)**



---

archive/issue_comments_499263.json:
```json
{
    "body": "Commit: **[`05e1d84`](https://github.com/sagemath/sagetrac-mirror/commit/05e1d84e3d715d50b42284f0a13a225b9963ae88)**",
    "created_at": "2021-01-02T12:59:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31150#issuecomment-499263",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`05e1d84`](https://github.com/sagemath/sagetrac-mirror/commit/05e1d84e3d715d50b42284f0a13a225b9963ae88)**



---

archive/issue_comments_499264.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05e1d84e3d715d50b42284f0a13a225b9963ae88\"><code>05e1d84</code></a></td><td><code>refresh riemann_surface.py</code></td></tr></table>\n",
    "created_at": "2021-01-02T12:59:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31150#issuecomment-499264",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05e1d84e3d715d50b42284f0a13a225b9963ae88"><code>05e1d84</code></a></td><td><code>refresh riemann_surface.py</code></td></tr></table>




---

archive/issue_comments_499265.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\ngreen bot, please review",
    "created_at": "2021-01-04T13:39:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31150#issuecomment-499265",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">comment:3</div>

green bot, please review



---

archive/issue_comments_499266.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2021-01-04T14:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31150#issuecomment-499266",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_499267.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI know this ticket is about coding style and not optimizing the code, but in `return [(c.real_part(), c.imag_part()) for c in cpoints + extra_points]`:\n- Why using `(c.real_part(), c.imag_part())` and not directly `tuple(c)` which gives the same result (I think) ?\n- could be good to use `itertools.chain` to avoid `cpoints + extra_points` ?\n\n\nThis block is not align on 80 columns\n\n```diff\n+    # we check that the singularities lie at (1:0:0),(0:1:0),(0:0:1)\n+    # by checking that the eliminations of x, y, z result in (principal) ideals\n+    # generated by a monomial. This is a sufficient condition, but not completely necessary.\n+    # It's cheap to check, though.\n```\n\n\nIn `normalize_pairs`, you missed some corrections ;)\n\n```diff\n-            R=[]\n-            for i in range(len(L)-1):\n+            R = []\n+            for i in range(len(L) - 1):\n                 if L[i][0]<L[i+1][0]:\n-                    R.append((L[i],L[i+1]))\n+                    R.append((L[i], L[i+1]))\n                 else:\n                     R.append((L[i+1],L[i]))\n             return R\n```\n\nWhy not using `R.nrows()` and `R.ncols()` in\n\n```diff\n+        if not(len(R.rows()) == 2 * g == len(R.columns())):\n```",
    "created_at": "2021-01-04T14:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31150#issuecomment-499267",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:4" align="right">comment:4</div>

I know this ticket is about coding style and not optimizing the code, but in `return [(c.real_part(), c.imag_part()) for c in cpoints + extra_points]`:
- Why using `(c.real_part(), c.imag_part())` and not directly `tuple(c)` which gives the same result (I think) ?
- could be good to use `itertools.chain` to avoid `cpoints + extra_points` ?


This block is not align on 80 columns

```diff
+    # we check that the singularities lie at (1:0:0),(0:1:0),(0:0:1)
+    # by checking that the eliminations of x, y, z result in (principal) ideals
+    # generated by a monomial. This is a sufficient condition, but not completely necessary.
+    # It's cheap to check, though.
```


In `normalize_pairs`, you missed some corrections ;)

```diff
-            R=[]
-            for i in range(len(L)-1):
+            R = []
+            for i in range(len(L) - 1):
                 if L[i][0]<L[i+1][0]:
-                    R.append((L[i],L[i+1]))
+                    R.append((L[i], L[i+1]))
                 else:
                     R.append((L[i+1],L[i]))
             return R
```

Why not using `R.nrows()` and `R.ncols()` in

```diff
+        if not(len(R.rows()) == 2 * g == len(R.columns())):
```



---

archive/issue_comments_499268.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3b6a28f0c84e1dd9cbfe9439fed0d3ffe364c9e\"><code>f3b6a28</code></a></td><td><code>a few more details</code></td></tr></table>\n",
    "created_at": "2021-01-04T16:19:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31150#issuecomment-499268",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3b6a28f0c84e1dd9cbfe9439fed0d3ffe364c9e"><code>f3b6a28</code></a></td><td><code>a few more details</code></td></tr></table>




---

archive/issue_comments_499269.json:
```json
{
    "body": "Changed commit from **[`05e1d84`](https://github.com/sagemath/sagetrac-mirror/commit/05e1d84e3d715d50b42284f0a13a225b9963ae88)** to **[`f3b6a28`](https://github.com/sagemath/sagetrac-mirror/commit/f3b6a28f0c84e1dd9cbfe9439fed0d3ffe364c9e)**",
    "created_at": "2021-01-04T16:19:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31150#issuecomment-499269",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`05e1d84`](https://github.com/sagemath/sagetrac-mirror/commit/05e1d84e3d715d50b42284f0a13a225b9963ae88)** to **[`f3b6a28`](https://github.com/sagemath/sagetrac-mirror/commit/f3b6a28f0c84e1dd9cbfe9439fed0d3ffe364c9e)**



---

archive/issue_comments_499270.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nvoila. ca ira comme ca ?\n\nJe suis pas trop fan de itertools.",
    "created_at": "2021-01-04T16:22:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31150#issuecomment-499270",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">comment:6</div>

voila. ca ira comme ca ?

Je suis pas trop fan de itertools.



---

archive/issue_comments_499271.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nLGTM.\n\nPour itertools, je pousse pas. Si les 2 listes sont longues, ca vaut le cout de faire un chainage ou tout autre solution pour \u00e9viter le merge, mais sinon, c'est assez n\u00e9gligeable.",
    "created_at": "2021-01-04T16:36:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31150#issuecomment-499271",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:7" align="right">comment:7</div>

LGTM.

Pour itertools, je pousse pas. Si les 2 listes sont longues, ca vaut le cout de faire un chainage ou tout autre solution pour éviter le merge, mais sinon, c'est assez négligeable.



---

archive/issue_events_429468.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-01-04T16:36:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31150#event-429468"
}
```



---

archive/issue_events_429469.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-01-04T16:36:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31150#event-429469"
}
```



---

archive/issue_events_429470.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-17T13:45:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31150#event-429470"
}
```



---

archive/issue_events_429471.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "895711461de6f695422d8532cec820e3c34cce61",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-01-17T13:45:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31150#event-429471"
}
```



---

archive/issue_comments_499272.json:
```json
{
    "body": "Changed branch from **[u/chapoton/31150](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/31150)** to **[`f3b6a28`](https://github.com/sagemath/sagetrac-mirror/commit/f3b6a28f0c84e1dd9cbfe9439fed0d3ffe364c9e)**",
    "created_at": "2021-01-17T13:45:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31150",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31150#issuecomment-499272",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/31150](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/31150)** to **[`f3b6a28`](https://github.com/sagemath/sagetrac-mirror/commit/f3b6a28f0c84e1dd9cbfe9439fed0d3ffe364c9e)**
