# Issue 31263: Broken `sage -b`

archive/issues_031026.json:
```json
{
    "body": "#30622 broke `sage -b`.\n\nCC:  @mkoeppe\n\nBranch/Commit: dff846c11bce847f883a866dcc9c85b67932f7aa\n\nReviewer: Matthias Koeppe\n\nAuthor: Jonathan Kliem\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31263\n\n",
    "closed_at": "2021-01-31T20:53:55Z",
    "created_at": "2021-01-19T12:00:49Z",
    "labels": [
        "component: build",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Broken `sage -b`",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31263",
    "user": "https://github.com/kliem"
}
```
#30622 broke `sage -b`.

CC:  @mkoeppe

Branch/Commit: dff846c11bce847f883a866dcc9c85b67932f7aa

Reviewer: Matthias Koeppe

Author: Jonathan Kliem

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31263





---

archive/issue_comments_620329.json:
```json
{
    "body": "<a id='comment:1'></a>\n\n```\nkliem@cofio:~/localhome/sage$ sage -b\nMakefile:25: *** This Makefile needs to be invoked by build/make/install.  Stop.\n```",
    "created_at": "2021-01-19T12:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31263#issuecomment-620329",
    "user": "https://github.com/kliem"
}
```

<a id='comment:1'></a>

```
kliem@cofio:~/localhome/sage$ sage -b
Makefile:25: *** This Makefile needs to be invoked by build/make/install.  Stop.
```



---

archive/issue_comments_620330.json:
```json
{
    "body": "<a id='comment:2'></a>\nindeed, this is rather annoying",
    "created_at": "2021-01-19T14:16:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31263#issuecomment-620330",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
indeed, this is rather annoying



---

archive/issue_comments_620331.json:
```json
{
    "body": "Changing commit from \"\" to \"fec4b0622eeb4f55f14cc6a3da6e5a832b44d006\"",
    "created_at": "2021-01-19T14:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31263#issuecomment-620331",
    "user": "https://github.com/kliem"
}
```

Changing commit from "" to "fec4b0622eeb4f55f14cc6a3da6e5a832b44d006"



---

archive/issue_comments_620332.json:
```json
{
    "body": "Changing branch from \"\" to \"public/31263\"",
    "created_at": "2021-01-19T14:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31263#issuecomment-620332",
    "user": "https://github.com/kliem"
}
```

Changing branch from "" to "public/31263"



---

archive/issue_comments_620333.json:
```json
{
    "body": "Changing author from \"\" to \"Jonathan Kliem\"",
    "created_at": "2021-01-19T14:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31263#issuecomment-620333",
    "user": "https://github.com/kliem"
}
```

Changing author from "" to "Jonathan Kliem"



---

archive/issue_comments_620334.json:
```json
{
    "body": "<a id='comment:3'></a>\nNew commits:\n|                                                                                                                                          |                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[fec4b06](https://git.sagemath.org/sage.git/commit?id=fec4b0622eeb4f55f14cc6a3da6e5a832b44d006)|`fix sage -b after 30622`|",
    "created_at": "2021-01-19T14:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31263#issuecomment-620334",
    "user": "https://github.com/kliem"
}
```

<a id='comment:3'></a>
New commits:
|                                                                                                                                          |                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[fec4b06](https://git.sagemath.org/sage.git/commit?id=fec4b0622eeb4f55f14cc6a3da6e5a832b44d006)|`fix sage -b after 30622`|



---

archive/issue_comments_620335.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-01-19T14:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31263#issuecomment-620335",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_620336.json:
```json
{
    "body": "<a id='comment:4'></a>\nI think a better fix would be to actually go through `build/make/install`",
    "created_at": "2021-01-19T17:08:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31263#issuecomment-620336",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
I think a better fix would be to actually go through `build/make/install`



---

archive/issue_comments_620337.json:
```json
{
    "body": "Changing commit from \"fec4b0622eeb4f55f14cc6a3da6e5a832b44d006\" to \"dff846c11bce847f883a866dcc9c85b67932f7aa\"",
    "created_at": "2021-01-19T17:35:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31263#issuecomment-620337",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fec4b0622eeb4f55f14cc6a3da6e5a832b44d006" to "dff846c11bce847f883a866dcc9c85b67932f7aa"



---

archive/issue_comments_620338.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[dff846c](https://git.sagemath.org/sage.git/commit/?id=dff846c11bce847f883a866dcc9c85b67932f7aa)|`go through make/build/install`|",
    "created_at": "2021-01-19T17:35:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31263#issuecomment-620338",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[dff846c](https://git.sagemath.org/sage.git/commit/?id=dff846c11bce847f883a866dcc9c85b67932f7aa)|`go through make/build/install`|



---

archive/issue_comments_620339.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [mkoeppe](#comment%3A4):\n> I think a better fix would be to actually go through `build/make/install`\n\n\nOk. Seems cleaner and seems to work for me.",
    "created_at": "2021-01-19T17:35:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31263#issuecomment-620339",
    "user": "https://github.com/kliem"
}
```

<a id='comment:6'></a>
Replying to [mkoeppe](#comment%3A4):
> I think a better fix would be to actually go through `build/make/install`


Ok. Seems cleaner and seems to work for me.



---

archive/issue_comments_620340.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-01-19T19:00:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31263#issuecomment-620340",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "Matthias Koeppe"



---

archive/issue_comments_620341.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-01-19T19:00:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31263#issuecomment-620341",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_620342.json:
```json
{
    "body": "<a id='comment:8'></a>\nThank you.",
    "created_at": "2021-01-19T19:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31263#issuecomment-620342",
    "user": "https://github.com/kliem"
}
```

<a id='comment:8'></a>
Thank you.



---

archive/issue_comments_620343.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-01-31T20:53:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31263#issuecomment-620343",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_081745.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-31T20:53:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31263#event-81745"
}
```



---

archive/issue_comments_620344.json:
```json
{
    "body": "Changing branch from \"public/31263\" to \"dff846c11bce847f883a866dcc9c85b67932f7aa\"",
    "created_at": "2021-01-31T20:53:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31263",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31263#issuecomment-620344",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/31263" to "dff846c11bce847f883a866dcc9c85b67932f7aa"
