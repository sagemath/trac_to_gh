# Issue 31443: update eclib and improve interface for elliptic curve saturation

archive/issues_031206.json:
```json
{
    "assignees": [],
    "body": "I recently made a new version of eclib, which will only affect the saturation of points on elliptic curves over Q.  The interface for this (in the `saturation()` method for elliptic curves over Q) has some problems.  Mainly, it does not do a good job of choosing the real precision which mwrank should work at, and also (due to shortcomings in eclib which are now improved) (1) when saturation at one prime fails owing to precision being too low, Sage has no way to do something sensible such as raise an error, or put the call into a loop in which the precision is increased; (2) there is no way to saturate at a single prime, or a range of primes, only at all primes or all primes except 2 or all primes up to some bound.  The new eclib version allows for a first and last prime at which saturation should be done.  The rationale here is that if you have saturated points on one curve and map them to another using an isogeny, then the image points will automatically be saturated at all primes dividing the isogeny degree.\n\nI don't see a sensible way to deal with this in two parts, so I'll make a new eclib spkg (if that is what they are still called) and make the code changes to saturation at the same time.\n\nIncidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).\n\nNew eclib source tarball at [https://github.com/JohnCremona/eclib/releases/download/20210625/eclib-20210625.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210625/eclib-20210625.tar.bz2)\n\n**CC:**  @slel @collares @orlitzky @isuruf @kiwifb @antonio-rojas\n\n**Keywords:** eclib elliptic curve saturation\n\n**Branch:** [789550ca04c94acfb1e803251538996a34962038](https://github.com/sagemath/sagetrac-mirror/commit/789550ca04c94acfb1e803251538996a34962038)\n\n**Upstream:** Fixed upstream, in a later stable release.\n\n**Reviewer:** Dima Pasechnik, Matthias Koeppe\n\n**Author:** John Cremona, Dima Pasechnik\n\nIssue created by migration from https://trac.sagemath.org/ticket/31443\n\n",
    "closed_at": "2021-06-29T23:08:47Z",
    "created_at": "2021-03-01T17:03:03Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "update eclib and improve interface for elliptic curve saturation",
    "type": "issue",
    "updated_at": "2021-07-08T20:25:42Z",
    "url": "https://github.com/sagemath/sage/issues/31443",
    "user": "https://github.com/JohnCremona"
}
```
I recently made a new version of eclib, which will only affect the saturation of points on elliptic curves over Q.  The interface for this (in the `saturation()` method for elliptic curves over Q) has some problems.  Mainly, it does not do a good job of choosing the real precision which mwrank should work at, and also (due to shortcomings in eclib which are now improved) (1) when saturation at one prime fails owing to precision being too low, Sage has no way to do something sensible such as raise an error, or put the call into a loop in which the precision is increased; (2) there is no way to saturate at a single prime, or a range of primes, only at all primes or all primes except 2 or all primes up to some bound.  The new eclib version allows for a first and last prime at which saturation should be done.  The rationale here is that if you have saturated points on one curve and map them to another using an isogeny, then the image points will automatically be saturated at all primes dividing the isogeny degree.

I don't see a sensible way to deal with this in two parts, so I'll make a new eclib spkg (if that is what they are still called) and make the code changes to saturation at the same time.

Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).

New eclib source tarball at [https://github.com/JohnCremona/eclib/releases/download/20210625/eclib-20210625.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210625/eclib-20210625.tar.bz2)

**CC:**  @slel @collares @orlitzky @isuruf @kiwifb @antonio-rojas

**Keywords:** eclib elliptic curve saturation

**Branch:** [789550ca04c94acfb1e803251538996a34962038](https://github.com/sagemath/sagetrac-mirror/commit/789550ca04c94acfb1e803251538996a34962038)

**Upstream:** Fixed upstream, in a later stable release.

**Reviewer:** Dima Pasechnik, Matthias Koeppe

**Author:** John Cremona, Dima Pasechnik

Issue created by migration from https://trac.sagemath.org/ticket/31443





---

archive/issue_events_381335.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2021-03-01T17:03:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381335"
}
```



---

archive/issue_events_381336.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2021-03-01T17:03:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "08517b",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381336"
}
```



---

archive/issue_events_381337.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2021-03-01T17:03:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381337"
}
```



---

archive/issue_comments_507585.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n-I recently made a new version of eclib, which will only affect the saturation of points on elliptic curves over Q.  The interface for this (in the saturation() method for elliptic curves over Q) has some problems.  Mainly, it does not do a good job of choosing the real precision which mwrank should work at, and also (due to shortcomings in eclib which are now improved) (1) when saturation at one prime fails owing to precision being to low, Sage has no way to do something sensible such as raise an error, or put the call into a loop in which the precision is increased; (2) there is no way to saturate at a single prime, or a range of primes, only at all primes or all primes except 2 or all primes up to some bound.  The new eclib version allows for a first and last prime at which saturation should be done.  The rationale here is that if you have saturated points on one curve and map them to another using an isogeny, then the image points will autimatically be saturated at all primes dividing the isogeny degree.\n+I recently made a new version of eclib, which will only affect the saturation of points on elliptic curves over Q.  The interface for this (in the `saturation()` method for elliptic curves over Q) has some problems.  Mainly, it does not do a good job of choosing the real precision which mwrank should work at, and also (due to shortcomings in eclib which are now improved) (1) when saturation at one prime fails owing to precision being too low, Sage has no way to do something sensible such as raise an error, or put the call into a loop in which the precision is increased; (2) there is no way to saturate at a single prime, or a range of primes, only at all primes or all primes except 2 or all primes up to some bound.  The new eclib version allows for a first and last prime at which saturation should be done.  The rationale here is that if you have saturated points on one curve and map them to another using an isogeny, then the image points will automatically be saturated at all primes dividing the isogeny degree.\n \n-I don't see a sensible wway to dedeal with this in two parts, so I'll make a new eclib spkg (if that is what they are still called) and make the code changes to saturation at the same time.\n+I don't see a sensible way to deal with this in two parts, so I'll make a new eclib spkg (if that is what they are still called) and make the code changes to saturation at the same time.\n \n Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).\n``````\n",
    "created_at": "2021-03-02T03:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507585",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
-I recently made a new version of eclib, which will only affect the saturation of points on elliptic curves over Q.  The interface for this (in the saturation() method for elliptic curves over Q) has some problems.  Mainly, it does not do a good job of choosing the real precision which mwrank should work at, and also (due to shortcomings in eclib which are now improved) (1) when saturation at one prime fails owing to precision being to low, Sage has no way to do something sensible such as raise an error, or put the call into a loop in which the precision is increased; (2) there is no way to saturate at a single prime, or a range of primes, only at all primes or all primes except 2 or all primes up to some bound.  The new eclib version allows for a first and last prime at which saturation should be done.  The rationale here is that if you have saturated points on one curve and map them to another using an isogeny, then the image points will autimatically be saturated at all primes dividing the isogeny degree.
+I recently made a new version of eclib, which will only affect the saturation of points on elliptic curves over Q.  The interface for this (in the `saturation()` method for elliptic curves over Q) has some problems.  Mainly, it does not do a good job of choosing the real precision which mwrank should work at, and also (due to shortcomings in eclib which are now improved) (1) when saturation at one prime fails owing to precision being too low, Sage has no way to do something sensible such as raise an error, or put the call into a loop in which the precision is increased; (2) there is no way to saturate at a single prime, or a range of primes, only at all primes or all primes except 2 or all primes up to some bound.  The new eclib version allows for a first and last prime at which saturation should be done.  The rationale here is that if you have saturated points on one curve and map them to another using an isogeny, then the image points will automatically be saturated at all primes dividing the isogeny degree.
 
-I don't see a sensible wway to dedeal with this in two parts, so I'll make a new eclib spkg (if that is what they are still called) and make the code changes to saturation at the same time.
+I don't see a sensible way to deal with this in two parts, so I'll make a new eclib spkg (if that is what they are still called) and make the code changes to saturation at the same time.
 
 Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).
``````




---

archive/issue_comments_507586.json:
```json
{
    "body": "**Commit:** [69c3195d7adee86991ae3b9a47081f3222178d18](https://github.com/sagemath/sagetrac-mirror/commit/69c3195d7adee86991ae3b9a47081f3222178d18)",
    "created_at": "2021-03-11T16:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507586",
    "user": "https://github.com/JohnCremona"
}
```

**Commit:** [69c3195d7adee86991ae3b9a47081f3222178d18](https://github.com/sagemath/sagetrac-mirror/commit/69c3195d7adee86991ae3b9a47081f3222178d18)



---

archive/issue_comments_507587.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,3 +3,5 @@\n I don't see a sensible way to deal with this in two parts, so I'll make a new eclib spkg (if that is what they are still called) and make the code changes to saturation at the same time.\n \n Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).\n+\n+New eclib source tarball at [https://johncremona.github.io/ftp/eclib-20210310.tar.bz2](https://johncremona.github.io/ftp/eclib-20210310.tar.bz2)\n``````\n",
    "created_at": "2021-03-11T16:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507587",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,3 +3,5 @@
 I don't see a sensible way to deal with this in two parts, so I'll make a new eclib spkg (if that is what they are still called) and make the code changes to saturation at the same time.
 
 Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).
+
+New eclib source tarball at [https://johncremona.github.io/ftp/eclib-20210310.tar.bz2](https://johncremona.github.io/ftp/eclib-20210310.tar.bz2)
``````




---

archive/issue_comments_507588.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"eclib elliptic curve saturation\".",
    "created_at": "2021-03-11T16:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507588",
    "user": "https://github.com/JohnCremona"
}
```

**Changing keywords** from "" to "eclib elliptic curve saturation".



---

archive/issue_events_381338.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2021-03-11T16:24:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381338"
}
```



---

archive/issue_comments_507589.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nHere's the updated `eclib` version `v20210310` (see tarball link above) together with the necessary changes to the interface in `src/sage/libs/eclib`, and also a much simplified (and improved) `saturation()` method in `sage/schemes/elliptic_curves/ell_rational_field`.\n\nThis was a symbiotic procedure, in the sense that as I modified the interface code and tested, I found issues which had to be fixed on the `eclib` side.\n\nThe main changes for `eclib` are:  various efficiency improvements in the sieve used to p-saturation for an individual prime p;  much better division of a point by p (when it is p times a smaller point), by default using division polynomials instead of floating point methods, though I did also improve the f.p. approach to set the precision appropriately (instead of just relying on the user to do so) which fixed the immediate hard cases I had;  reducing the saturation index bound when the subgroup is enlarged.  I also made some improvements to the construction of a newform from an elliptic curve which will avoid the normalisation problems with modular symbols (which I had already fixed on the Sage side, but this is more robust).\n\nI will post here some elliptic curves whose saturation is now faster and/or better.  There are plenty of examples in the old doctests, but the really hard cases are not very suitable for doctests as they involve hundreds (or thousands) of digits, or take 15 minutes.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2215893710051b3a0891e3dd06527a076d3600b3\">2215893</a></td><td><code>#31443: update eclib package metadata</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25549670286c71f7a7fb74b9767c54130d7c1285\">2554967</a></td><td><code>#31443: update eclib package metadata again</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1dfacfe172f9c82da90a7ff7e76cba990a05613\">e1dfacf</a></td><td><code>#31443: adapt eclib library interface for version v20210310</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69c3195d7adee86991ae3b9a47081f3222178d18\">69c3195</a></td><td><code>#31443: simplify/improve saturation method for elliptic curves over Q</code></td></tr></table>\n",
    "created_at": "2021-03-11T16:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507589",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:2'>**Comment 2:**</a>
Here's the updated `eclib` version `v20210310` (see tarball link above) together with the necessary changes to the interface in `src/sage/libs/eclib`, and also a much simplified (and improved) `saturation()` method in `sage/schemes/elliptic_curves/ell_rational_field`.

This was a symbiotic procedure, in the sense that as I modified the interface code and tested, I found issues which had to be fixed on the `eclib` side.

The main changes for `eclib` are:  various efficiency improvements in the sieve used to p-saturation for an individual prime p;  much better division of a point by p (when it is p times a smaller point), by default using division polynomials instead of floating point methods, though I did also improve the f.p. approach to set the precision appropriately (instead of just relying on the user to do so) which fixed the immediate hard cases I had;  reducing the saturation index bound when the subgroup is enlarged.  I also made some improvements to the construction of a newform from an elliptic curve which will avoid the normalisation problems with modular symbols (which I had already fixed on the Sage side, but this is more robust).

I will post here some elliptic curves whose saturation is now faster and/or better.  There are plenty of examples in the old doctests, but the really hard cases are not very suitable for doctests as they involve hundreds (or thousands) of digits, or take 15 minutes.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2215893710051b3a0891e3dd06527a076d3600b3">2215893</a></td><td><code>#31443: update eclib package metadata</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25549670286c71f7a7fb74b9767c54130d7c1285">2554967</a></td><td><code>#31443: update eclib package metadata again</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1dfacfe172f9c82da90a7ff7e76cba990a05613">e1dfacf</a></td><td><code>#31443: adapt eclib library interface for version v20210310</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69c3195d7adee86991ae3b9a47081f3222178d18">69c3195</a></td><td><code>#31443: simplify/improve saturation method for elliptic curves over Q</code></td></tr></table>




---

archive/issue_comments_507590.json:
```json
{
    "body": "**Branch:** [u/cremona/31443-eclib-saturation](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/31443-eclib-saturation)",
    "created_at": "2021-03-11T16:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507590",
    "user": "https://github.com/JohnCremona"
}
```

**Branch:** [u/cremona/31443-eclib-saturation](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/31443-eclib-saturation)



---

archive/issue_comments_507591.json:
```json
{
    "body": "**Author:** John Cremona",
    "created_at": "2021-03-11T16:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507591",
    "user": "https://github.com/JohnCremona"
}
```

**Author:** John Cremona



---

archive/issue_comments_507592.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nAn example where the point P is 3*Q but E.saturation([P]) used to fail.\n\nIn Sage 9.2:\n\n```\nE = EllipticCurve([0, 1, 0, -3532341, 2671895459])\nQ = E([188751344014/116704809 , 43530702836852015/1260762051627])\nP = 3*Q\nE.saturation([P]) # fails\n```\neven after `mwrank_set_precision(2000)`, which is slow.  But with the new version (and no precision adjustment necessary, as the new method is exact):\n\n```\nsage: E.saturation([P])                                                                                                                               \n([(188751344014/116704809 : 43530702836852015/1260762051627 : 1)],\n 3,\n 22.2351273597058)\n```\nand this is instantaneous.\n\nAn example you will probably not want to run to completion:\n\n```\nsage: E = EllipticCurve([0,1,1,-9872,374262])                                                                                                         \nsage: pts = E.gens(sat_bound=0)                                                                                                                       \nsage: pts                                                                                                                                             \n[(-88 : 754 : 1), (-42 : 846 : 1), (-25 : 778 : 1), (57 : -1 : 1)]\nsage: %time E.saturation(pts, verbose=True)\n```\nUnder 9.2 it reports that the saturation index bound is 86682 but that it will not go past 10000 -- you can override this if you want, but even going up to 10000 takes a long time.  With the new code, it does not reduce the bound (since the default is supposed to be that it goes all the way up to the bound necessary to prove saturation) and takes about 15 minutes.",
    "created_at": "2021-03-11T16:46:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507592",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:3'>**Comment 3:**</a>
An example where the point P is 3*Q but E.saturation([P]) used to fail.

In Sage 9.2:

```
E = EllipticCurve([0, 1, 0, -3532341, 2671895459])
Q = E([188751344014/116704809 , 43530702836852015/1260762051627])
P = 3*Q
E.saturation([P]) # fails
```
even after `mwrank_set_precision(2000)`, which is slow.  But with the new version (and no precision adjustment necessary, as the new method is exact):

```
sage: E.saturation([P])                                                                                                                               
([(188751344014/116704809 : 43530702836852015/1260762051627 : 1)],
 3,
 22.2351273597058)
```
and this is instantaneous.

An example you will probably not want to run to completion:

```
sage: E = EllipticCurve([0,1,1,-9872,374262])                                                                                                         
sage: pts = E.gens(sat_bound=0)                                                                                                                       
sage: pts                                                                                                                                             
[(-88 : 754 : 1), (-42 : 846 : 1), (-25 : 778 : 1), (57 : -1 : 1)]
sage: %time E.saturation(pts, verbose=True)
```
Under 9.2 it reports that the saturation index bound is 86682 but that it will not go past 10000 -- you can override this if you want, but even going up to 10000 takes a long time.  With the new code, it does not reduce the bound (since the default is supposed to be that it goes all the way up to the bound necessary to prove saturation) and takes about 15 minutes.



---

archive/issue_comments_507593.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nIn fact the second example is even more stupid in 9.2 since after proving p-saturation at all p up to 10979, with no errors or problems at all, it adds 1000 to the bound and starts again proving p-saturation from 2 up to 11981.  As each of these runs takes several minutes, it will take a long time to get up to 86682 this way.  One issue (now addressed) is that eclib did not have a parameter specifying which p to start at, if you wanted to resume saturating at any point except 2 or 3 (there was only an option to skip p=2).  But more seriously, the saturation was being repeated not because of any problem which has arisen, just because of the artificial lowering of the bound.  The old version could do the job by setting `max_prime` to 86682 but that takes a lot longer than the new version.",
    "created_at": "2021-03-11T17:12:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507593",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:4'>**Comment 4:**</a>
In fact the second example is even more stupid in 9.2 since after proving p-saturation at all p up to 10979, with no errors or problems at all, it adds 1000 to the bound and starts again proving p-saturation from 2 up to 11981.  As each of these runs takes several minutes, it will take a long time to get up to 86682 this way.  One issue (now addressed) is that eclib did not have a parameter specifying which p to start at, if you wanted to resume saturating at any point except 2 or 3 (there was only an option to skip p=2).  But more seriously, the saturation was being repeated not because of any problem which has arisen, just because of the artificial lowering of the bound.  The old version could do the job by setting `max_prime` to 86682 but that takes a lot longer than the new version.



---

archive/issue_comments_507594.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nNeeds rebasing",
    "created_at": "2021-03-15T19:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507594",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:6'>**Comment 6:**</a>
Needs rebasing



---

archive/issue_events_381339.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2021-03-15T19:01:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381339"
}
```



---

archive/issue_events_381340.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2021-03-15T19:01:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381340"
}
```



---

archive/issue_comments_507595.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f0b74f20bb3e444fc1fdfa3fb92b33c5b5cb06e\">1f0b74f</a></td><td><code>#31443: update eclib package metadata</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5fce79f65d4a5071a5fccd210a99cd07bdc8b30d\">5fce79f</a></td><td><code>#31443: update eclib package metadata again</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a46b6f9d9b3b2fb8a9ba0587dd6b71991cd0fec9\">a46b6f9</a></td><td><code>#31443: adapt eclib library interface for version v20210310</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/453c793d1f17096695d7ee2cf53d6e0c9c462338\">453c793</a></td><td><code>#31443: simplify/improve saturation method for elliptic curves over Q</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ba267ac16722b3eee43d2b4ed73840c366a8bec\">4ba267a</a></td><td><code>#31443: fix two doctest output now that eclib no longer gives incorrect results</code></td></tr></table>\n",
    "created_at": "2021-03-16T14:29:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507595",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>**Comment 7:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f0b74f20bb3e444fc1fdfa3fb92b33c5b5cb06e">1f0b74f</a></td><td><code>#31443: update eclib package metadata</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5fce79f65d4a5071a5fccd210a99cd07bdc8b30d">5fce79f</a></td><td><code>#31443: update eclib package metadata again</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a46b6f9d9b3b2fb8a9ba0587dd6b71991cd0fec9">a46b6f9</a></td><td><code>#31443: adapt eclib library interface for version v20210310</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/453c793d1f17096695d7ee2cf53d6e0c9c462338">453c793</a></td><td><code>#31443: simplify/improve saturation method for elliptic curves over Q</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ba267ac16722b3eee43d2b4ed73840c366a8bec">4ba267a</a></td><td><code>#31443: fix two doctest output now that eclib no longer gives incorrect results</code></td></tr></table>




---

archive/issue_comments_507596.json:
```json
{
    "body": "**Changing commit** from \"[69c3195d7adee86991ae3b9a47081f3222178d18](https://github.com/sagemath/sagetrac-mirror/commit/69c3195d7adee86991ae3b9a47081f3222178d18)\" to \"[4ba267ac16722b3eee43d2b4ed73840c366a8bec](https://github.com/sagemath/sagetrac-mirror/commit/4ba267ac16722b3eee43d2b4ed73840c366a8bec)\".",
    "created_at": "2021-03-16T14:29:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507596",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[69c3195d7adee86991ae3b9a47081f3222178d18](https://github.com/sagemath/sagetrac-mirror/commit/69c3195d7adee86991ae3b9a47081f3222178d18)" to "[4ba267ac16722b3eee43d2b4ed73840c366a8bec](https://github.com/sagemath/sagetrac-mirror/commit/4ba267ac16722b3eee43d2b4ed73840c366a8bec)".



---

archive/issue_events_381341.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2021-03-16T14:31:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381341"
}
```



---

archive/issue_events_381342.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2021-03-16T14:31:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381342"
}
```



---

archive/issue_comments_507597.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nI rebased, fixed a merge conflict and two doctest outputs which were there to illustrate how it used to be true that you could get wrong results from eclib by choosing a parameter too small, but now eclib adjusts itself automatically so such an illustration is not possible.",
    "created_at": "2021-03-16T14:31:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507597",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:8'>**Comment 8:**</a>
I rebased, fixed a merge conflict and two doctest outputs which were there to illustrate how it used to be true that you could get wrong results from eclib by choosing a parameter too small, but now eclib adjusts itself automatically so such an illustration is not possible.



---

archive/issue_comments_507598.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\n`checksums.ini` needs a new field `upstream_url`, as explained in https://wiki.sagemath.org/ReleaseTours/sage-9.1#For_developers-1",
    "created_at": "2021-03-16T17:23:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507598",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'>**Comment 9:**</a>
`checksums.ini` needs a new field `upstream_url`, as explained in https://wiki.sagemath.org/ReleaseTours/sage-9.1#For_developers-1



---

archive/issue_comments_507599.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nReplying to [@mkoeppe](#comment%3A9):\n> `checksums.ini` needs a new field `upstream_url`, as explained in https://wiki.sagemath.org/ReleaseTours/sage-9.1#For_developers-1\n\nThanks, I will look at that tomorrow.  I did re-read the packaging instructions to refresh my memory and found some new stuff, but the contents of checksums.ini is whatever was put there by whatever the instructions told me to do.  (I have been updating the eclib package since about 2008...)",
    "created_at": "2021-03-16T17:49:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507599",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:10'>**Comment 10:**</a>
Replying to [@mkoeppe](#comment%3A9):
> `checksums.ini` needs a new field `upstream_url`, as explained in https://wiki.sagemath.org/ReleaseTours/sage-9.1#For_developers-1

Thanks, I will look at that tomorrow.  I did re-read the packaging instructions to refresh my memory and found some new stuff, but the contents of checksums.ini is whatever was put there by whatever the instructions told me to do.  (I have been updating the eclib package since about 2008...)



---

archive/issue_comments_507600.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\n(The packaging documentation has been updated in #30895 during the 9.3 cycle; it's not in the online copy of the Sage documentation yet.)",
    "created_at": "2021-03-16T18:02:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507600",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'>**Comment 11:**</a>
(The packaging documentation has been updated in #30895 during the 9.3 cycle; it's not in the online copy of the Sage documentation yet.)



---

archive/issue_comments_507601.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nI added the line (literally)\nupstream_url=https://github.com/JohnCremona/eclib/archive/VERSION.tar.gz\nto build/pkgs/eclib/checksums.ini and then did \n./sage --package fix-checksum eclib\nthough the response was\nChecksum of eclib (tarball eclib-20210310.tar.bz2) unchanged\n\nI'll update the branch in a minute, but I suspect that Sage will not like the fact that the upstream tarball (which is a tar.gz file created by github) is not the same as the tarball I put into upstream/ (and in the link on this ticket) which was created using make dist-bzip2.\n\nIf they need to be identical then I'll replace the actual tarball and then the checksum really will change.\n\nThe developers guide instructions are not at all clear.  For example, I had assumed that one was suppose to replace the string 'VERSION' with the actual version number.  Or is it supposed to be literally the string 'VERSION' which will be replaced by the content of the file package-version.txt?  If that is the case I'll need to make another adjustment.",
    "created_at": "2021-03-17T10:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507601",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:12'>**Comment 12:**</a>
I added the line (literally)
upstream_url=https://github.com/JohnCremona/eclib/archive/VERSION.tar.gz
to build/pkgs/eclib/checksums.ini and then did 
./sage --package fix-checksum eclib
though the response was
Checksum of eclib (tarball eclib-20210310.tar.bz2) unchanged

I'll update the branch in a minute, but I suspect that Sage will not like the fact that the upstream tarball (which is a tar.gz file created by github) is not the same as the tarball I put into upstream/ (and in the link on this ticket) which was created using make dist-bzip2.

If they need to be identical then I'll replace the actual tarball and then the checksum really will change.

The developers guide instructions are not at all clear.  For example, I had assumed that one was suppose to replace the string 'VERSION' with the actual version number.  Or is it supposed to be literally the string 'VERSION' which will be replaced by the content of the file package-version.txt?  If that is the case I'll need to make another adjustment.



---

archive/issue_comments_507602.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4752618381fc589d3b992d67cd29e9a9c7086d5\">f475261</a></td><td><code>added upstream_url to eclib's checksums.ini</code></td></tr></table>\n",
    "created_at": "2021-03-17T10:14:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507602",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>**Comment 13:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4752618381fc589d3b992d67cd29e9a9c7086d5">f475261</a></td><td><code>added upstream_url to eclib's checksums.ini</code></td></tr></table>




---

archive/issue_comments_507603.json:
```json
{
    "body": "**Changing commit** from \"[4ba267ac16722b3eee43d2b4ed73840c366a8bec](https://github.com/sagemath/sagetrac-mirror/commit/4ba267ac16722b3eee43d2b4ed73840c366a8bec)\" to \"[f4752618381fc589d3b992d67cd29e9a9c7086d5](https://github.com/sagemath/sagetrac-mirror/commit/f4752618381fc589d3b992d67cd29e9a9c7086d5)\".",
    "created_at": "2021-03-17T10:14:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507603",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[4ba267ac16722b3eee43d2b4ed73840c366a8bec](https://github.com/sagemath/sagetrac-mirror/commit/4ba267ac16722b3eee43d2b4ed73840c366a8bec)" to "[f4752618381fc589d3b992d67cd29e9a9c7086d5](https://github.com/sagemath/sagetrac-mirror/commit/f4752618381fc589d3b992d67cd29e9a9c7086d5)".



---

archive/issue_comments_507604.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nNow I also did what I thought I should have done, namely change package-version.txt to be v20210310' (before it did not have the v but github puts the v in as the relevant tag is v20210310), and change the first line of checksum.ini to tarball=eclib-VERSION.tar.gz.  I put an actual download from github of the tarball into upstream/;  since github calls the file just v20210310.tar.gz I added the prefix 'eclib-'.  Then \n\n```\n./sage --package fix-checksum eclib\n```\ndid change the checksums.  I then did \n\n```\n./sage -package update eclib v20210310\n```\nand then\n\n```\n./sage -f eclib\n```\nbut this failed quickly with\n\n```\n[eclib-v20210310] Package 'eclib' is currently not installed\n[eclib-v20210310] No legacy uninstaller found for 'eclib'; nothing to do\n[eclib-v20210310] Deleting old versions of eclib libraries, which\n[eclib-v20210310] would interfere with new builds...\n[eclib-v20210310] Deleting old include directory...\n[eclib-v20210310] --with-flint=/home/john/sage/local\n[eclib-v20210310] Configuring eclib-v20210310\n[eclib-v20210310] /home/john/sage/build/bin/sage-dist-helpers: line 163: ./configure: No such file or directory\n[eclib-v20210310] /home/john/sage/build/bin/sage-dist-helpers: line 165: ./configure: No such file or directory\n[eclib-v20210310] ******************************************************************************************************************************************************\n[eclib-v20210310] Error configuring eclib-v20210310\n```\n\nI know that the recent packaging changes are supposed to make the procedure easier, but it is only easy when you know how and the instructions are clearly not adequately telling *me* what to do.  Help!",
    "created_at": "2021-03-17T10:32:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507604",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:14'>**Comment 14:**</a>
Now I also did what I thought I should have done, namely change package-version.txt to be v20210310' (before it did not have the v but github puts the v in as the relevant tag is v20210310), and change the first line of checksum.ini to tarball=eclib-VERSION.tar.gz.  I put an actual download from github of the tarball into upstream/;  since github calls the file just v20210310.tar.gz I added the prefix 'eclib-'.  Then 

```
./sage --package fix-checksum eclib
```
did change the checksums.  I then did 

```
./sage -package update eclib v20210310
```
and then

```
./sage -f eclib
```
but this failed quickly with

```
[eclib-v20210310] Package 'eclib' is currently not installed
[eclib-v20210310] No legacy uninstaller found for 'eclib'; nothing to do
[eclib-v20210310] Deleting old versions of eclib libraries, which
[eclib-v20210310] would interfere with new builds...
[eclib-v20210310] Deleting old include directory...
[eclib-v20210310] --with-flint=/home/john/sage/local
[eclib-v20210310] Configuring eclib-v20210310
[eclib-v20210310] /home/john/sage/build/bin/sage-dist-helpers: line 163: ./configure: No such file or directory
[eclib-v20210310] /home/john/sage/build/bin/sage-dist-helpers: line 165: ./configure: No such file or directory
[eclib-v20210310] ******************************************************************************************************************************************************
[eclib-v20210310] Error configuring eclib-v20210310
```

I know that the recent packaging changes are supposed to make the procedure easier, but it is only easy when you know how and the instructions are clearly not adequately telling *me* what to do.  Help!



---

archive/issue_comments_507605.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nYou should use a configured tarball (created by `make dist`, typically. It would have `./configure` script then ready), not the raw [GitHub](../wiki/GitHub) tarball, in `upstream_url=` field of `checksums.ini`.\n\nThen `./sage -f` should go through.",
    "created_at": "2021-03-17T11:07:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507605",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'>**Comment 15:**</a>
You should use a configured tarball (created by `make dist`, typically. It would have `./configure` script then ready), not the raw [GitHub](../wiki/GitHub) tarball, in `upstream_url=` field of `checksums.ini`.

Then `./sage -f` should go through.



---

archive/issue_comments_507606.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\nthis patch makes it work:\n\n```diff\n--- a/build/pkgs/eclib/checksums.ini\n+++ b/build/pkgs/eclib/checksums.ini\n@@ -1,5 +1,5 @@\n-tarball=eclib-20210310.tar.bz2\n+tarball=eclib-VERSION.tar.bz2\n sha1=73437ac8deae94f00e7713405b3251d9c81f95e4\n md5=4ac988bc46869866f076f7bea0fdaa6b\n cksum=2130748042\n-upstream_url=https://github.com/JohnCremona/eclib/archive/VERSION.tar.gz\n+upstream_url=https://johncremona.github.io/ftp/eclib-VERSION.tar.bz2\n```\n\n(needless to say, Sage's ./configure must be run with `--enable-download-from-upstream-url` for this tarball-downloading machinery to work)",
    "created_at": "2021-03-17T11:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507606",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'>**Comment 16:**</a>
this patch makes it work:

```diff
--- a/build/pkgs/eclib/checksums.ini
+++ b/build/pkgs/eclib/checksums.ini
@@ -1,5 +1,5 @@
-tarball=eclib-20210310.tar.bz2
+tarball=eclib-VERSION.tar.bz2
 sha1=73437ac8deae94f00e7713405b3251d9c81f95e4
 md5=4ac988bc46869866f076f7bea0fdaa6b
 cksum=2130748042
-upstream_url=https://github.com/JohnCremona/eclib/archive/VERSION.tar.gz
+upstream_url=https://johncremona.github.io/ftp/eclib-VERSION.tar.bz2
```

(needless to say, Sage's ./configure must be run with `--enable-download-from-upstream-url` for this tarball-downloading machinery to work)



---

archive/issue_comments_507607.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nIs this a non-backward compatible change in Sage's interface to eclib (many distros have versions of eclibs available, and they are used by default).\nIf so, we also need to modify `build/pkgs/eclib/spkg-configure.m4` to take this into account. \n\nA quick fix would be to assume that pkg-config will now work with eclib, simpifying  build/pkgs/eclib/spkg-configure.m4 a lot.",
    "created_at": "2021-03-17T11:28:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507607",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'>**Comment 17:**</a>
Is this a non-backward compatible change in Sage's interface to eclib (many distros have versions of eclibs available, and they are used by default).
If so, we also need to modify `build/pkgs/eclib/spkg-configure.m4` to take this into account. 

A quick fix would be to assume that pkg-config will now work with eclib, simpifying  build/pkgs/eclib/spkg-configure.m4 a lot.



---

archive/issue_comments_507608.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\nI typed a long reply to that which just got zapped before I submitted the changes...\n\nYes, all previous versions of eclib will NOT work after these changes.  So YES, we need to provide a method to check the version.  The current m4 script cannot do that (the function version() it runs dates from before eclib had versin numbers and just displays compilation date and time).  I can easily provide a function to return the version (which autotools defines as the macro VERSION).  Perhaps more helpful would be a function to return the triple of integers (year, month, day), and also a function to compare the current version with a given (y,m,d) triple and return true iff the current version is equal or later than it.   Then the little program constructed and run by the m4 could run (say) compare_eclib_version(2021, 3, 10) which would return true if and only if the actual version was equal or later than this.  How does that sound?\n\nIn any case I can see that today will see a new version released with these functions in it, probably called 'v20210317'.",
    "created_at": "2021-03-17T11:54:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507608",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:18'>**Comment 18:**</a>
I typed a long reply to that which just got zapped before I submitted the changes...

Yes, all previous versions of eclib will NOT work after these changes.  So YES, we need to provide a method to check the version.  The current m4 script cannot do that (the function version() it runs dates from before eclib had versin numbers and just displays compilation date and time).  I can easily provide a function to return the version (which autotools defines as the macro VERSION).  Perhaps more helpful would be a function to return the triple of integers (year, month, day), and also a function to compare the current version with a given (y,m,d) triple and return true iff the current version is equal or later than it.   Then the little program constructed and run by the m4 could run (say) compare_eclib_version(2021, 3, 10) which would return true if and only if the actual version was equal or later than this.  How does that sound?

In any case I can see that today will see a new version released with these functions in it, probably called 'v20210317'.



---

archive/issue_comments_507609.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\n`pkg-config` is standard, distros that don't use it consistently have only themselves to blame.\nWith `pkg-config`, it's as simple as with `fplll`, say, see\nhttps://github.com/sagemath/sage/blob/develop/build/pkgs/fplll/spkg-configure.m4\n\nProbably the separate check for `mwrank` should be kept, though. Can you add `--version` and/or `-v` option to `mwrank`, so that `mwrank -v` prints its version (make it equal to \nthe `eclib` version) and exits?\n\nTheoretically, there could be a situation that versions of mwrank and eclib are not the same on the system, so `mwrank -v` will allow to check for this consistency.",
    "created_at": "2021-03-17T12:43:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507609",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'>**Comment 19:**</a>
`pkg-config` is standard, distros that don't use it consistently have only themselves to blame.
With `pkg-config`, it's as simple as with `fplll`, say, see
https://github.com/sagemath/sage/blob/develop/build/pkgs/fplll/spkg-configure.m4

Probably the separate check for `mwrank` should be kept, though. Can you add `--version` and/or `-v` option to `mwrank`, so that `mwrank -v` prints its version (make it equal to 
the `eclib` version) and exits?

Theoretically, there could be a situation that versions of mwrank and eclib are not the same on the system, so `mwrank -v` will allow to check for this consistency.



---

archive/issue_comments_507610.json:
```json
{
    "body": "**Upstream:** Reported upstream. No feedback yet.",
    "created_at": "2021-03-17T13:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507610",
    "user": "https://github.com/dimpase"
}
```

**Upstream:** Reported upstream. No feedback yet.



---

archive/issue_comments_507611.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nReplying to [@dimpase](#comment%3A19):\n\n> \n> Theoretically, there could be a situation that versions of mwrank and eclib are not the same on the system, so `mwrank -v` will allow to check for this consistency.\n\ncopied this suggestion to https://github.com/JohnCremona/eclib/issues/67",
    "created_at": "2021-03-17T13:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507611",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'>**Comment 20:**</a>
Replying to [@dimpase](#comment%3A19):

> 
> Theoretically, there could be a situation that versions of mwrank and eclib are not the same on the system, so `mwrank -v` will allow to check for this consistency.

copied this suggestion to https://github.com/JohnCremona/eclib/issues/67



---

archive/issue_comments_507612.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nThat makes sense -- and I had mentioned this in the posting which disappeared.  But I thought I had done this last time you (Dima) suggested it.\n\nIt makes little sense to talk about mwrank versions as different from eclib versions.  mwrank is just the name of one of the executables built by eclib.  But it does seem reasonable to use `mwrank --version` as a way for a system to tell which eclib version is installed.  That is something different from your pkg-config suggestion though -- and eclib does have a file `eclib.pc`.\n\nNow I will also comment on your eclib issue.",
    "created_at": "2021-03-17T13:54:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507612",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:21'>**Comment 21:**</a>
That makes sense -- and I had mentioned this in the posting which disappeared.  But I thought I had done this last time you (Dima) suggested it.

It makes little sense to talk about mwrank versions as different from eclib versions.  mwrank is just the name of one of the executables built by eclib.  But it does seem reasonable to use `mwrank --version` as a way for a system to tell which eclib version is installed.  That is something different from your pkg-config suggestion though -- and eclib does have a file `eclib.pc`.

Now I will also comment on your eclib issue.



---

archive/issue_comments_507613.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nReplying to [@JohnCremona](#comment%3A21):\n> That makes sense -- and I had mentioned this in the poting which disappeared.  But I thought I had done this last time you (Dima) suggested it.\n> \n> It makes little sense to talk about mwrank versions as different from eclib versions.\n\nSay, one installs `mwrank` using an old eclib in `/usr/local/bin`, and has it shadow the new one `mwrank` in `/usr/bin`. We see such fun not quite bugs creeping up once in a while. \n\nComparing versions of eclib and mwrank is an extra check that won't hurt. `pkg-config` is useful in Python, as there is a Python interface to it (already used in Sage quite a bit\nto simplify the dread of getting the right libraries etc).",
    "created_at": "2021-03-17T14:31:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507613",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'>**Comment 22:**</a>
Replying to [@JohnCremona](#comment%3A21):
> That makes sense -- and I had mentioned this in the poting which disappeared.  But I thought I had done this last time you (Dima) suggested it.
> 
> It makes little sense to talk about mwrank versions as different from eclib versions.

Say, one installs `mwrank` using an old eclib in `/usr/local/bin`, and has it shadow the new one `mwrank` in `/usr/bin`. We see such fun not quite bugs creeping up once in a while. 

Comparing versions of eclib and mwrank is an extra check that won't hurt. `pkg-config` is useful in Python, as there is a Python interface to it (already used in Sage quite a bit
to simplify the dread of getting the right libraries etc).



---

archive/issue_comments_507614.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\nOK, so my current branch allows `mwrank -V` and outputs (e.g.) v20210317 and exits.  None of my command-line options are multi-character and I am not going to change that now; as I said, '-v' is already taken.\n\nSo now we have pkg-config which reports the version, and also mwrank -V which does too.\n\nAll this still seems to be a lot of unnecessary both to me.  Sage provides an mwrank executable via 'sage -mwrank' purely as a convenience to anyone out there (if there is anyone) who wants to install mwrank, as for such people I can say \"install Sage and you'll get mwrank\".  That has been true for a decade or more, and now I can also say \"use your distro package manager to install eclib, and you'll get mwrank\".  For historical reasons, Sage allows access to the mwrank binary in some of the elliptic curve functions, and also allows %mwrank to get a not very friendly user interface to mwrank (with no prompts).  Both of these are really unnecessary and we could save some hassle by getting rid of them.\n\nThe point of what I am saying is that it matters not at all if anyone has a version of mwrank on their system which is not the same as the one provided by the eclib which Sage is using.  A lot of the sage-eclib interface (including everything relevant to this ticket) is not about mwrank as such.\n\nCan someone now explain to me how to change the m4 file to make use of the pkg-config thing?   I think it would be quite reasonable to insist that the version installed on the system is *exactly* the version specified, not just \"this or any later version\", since I have enough to worry about without having to think about backwards compatibility.  I'm also fairly sure that there is no-one in the world (except me) who installs eclib except as part of Sage anyway.",
    "created_at": "2021-03-17T14:43:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507614",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:23'>**Comment 23:**</a>
OK, so my current branch allows `mwrank -V` and outputs (e.g.) v20210317 and exits.  None of my command-line options are multi-character and I am not going to change that now; as I said, '-v' is already taken.

So now we have pkg-config which reports the version, and also mwrank -V which does too.

All this still seems to be a lot of unnecessary both to me.  Sage provides an mwrank executable via 'sage -mwrank' purely as a convenience to anyone out there (if there is anyone) who wants to install mwrank, as for such people I can say "install Sage and you'll get mwrank".  That has been true for a decade or more, and now I can also say "use your distro package manager to install eclib, and you'll get mwrank".  For historical reasons, Sage allows access to the mwrank binary in some of the elliptic curve functions, and also allows %mwrank to get a not very friendly user interface to mwrank (with no prompts).  Both of these are really unnecessary and we could save some hassle by getting rid of them.

The point of what I am saying is that it matters not at all if anyone has a version of mwrank on their system which is not the same as the one provided by the eclib which Sage is using.  A lot of the sage-eclib interface (including everything relevant to this ticket) is not about mwrank as such.

Can someone now explain to me how to change the m4 file to make use of the pkg-config thing?   I think it would be quite reasonable to insist that the version installed on the system is *exactly* the version specified, not just "this or any later version", since I have enough to worry about without having to think about backwards compatibility.  I'm also fairly sure that there is no-one in the world (except me) who installs eclib except as part of Sage anyway.



---

archive/issue_comments_507615.json:
```json
{
    "body": "**Changing commit** from \"[f4752618381fc589d3b992d67cd29e9a9c7086d5](https://github.com/sagemath/sagetrac-mirror/commit/f4752618381fc589d3b992d67cd29e9a9c7086d5)\" to \"[1bac7138020240bd3b6944e85bfc28676dcca6f1](https://github.com/sagemath/sagetrac-mirror/commit/1bac7138020240bd3b6944e85bfc28676dcca6f1)\".",
    "created_at": "2021-03-17T15:55:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507615",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[f4752618381fc589d3b992d67cd29e9a9c7086d5](https://github.com/sagemath/sagetrac-mirror/commit/f4752618381fc589d3b992d67cd29e9a9c7086d5)" to "[1bac7138020240bd3b6944e85bfc28676dcca6f1](https://github.com/sagemath/sagetrac-mirror/commit/1bac7138020240bd3b6944e85bfc28676dcca6f1)".



---

archive/issue_comments_507616.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1bac7138020240bd3b6944e85bfc28676dcca6f1\">1bac713</a></td><td><code>more changes to eclib build setup</code></td></tr></table>\n",
    "created_at": "2021-03-17T15:55:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507616",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>**Comment 24:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1bac7138020240bd3b6944e85bfc28676dcca6f1">1bac713</a></td><td><code>more changes to eclib build setup</code></td></tr></table>




---

archive/issue_comments_507617.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).\n \n-New eclib source tarball at [https://johncremona.github.io/ftp/eclib-20210310.tar.bz2](https://johncremona.github.io/ftp/eclib-20210310.tar.bz2)\n+New eclib source tarball at [https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2](https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2)\n``````\n",
    "created_at": "2021-03-17T15:59:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507617",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).
 
-New eclib source tarball at [https://johncremona.github.io/ftp/eclib-20210310.tar.bz2](https://johncremona.github.io/ftp/eclib-20210310.tar.bz2)
+New eclib source tarball at [https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2](https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2)
``````




---

archive/issue_comments_507618.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nThe latest version + updated tarball for eclib-v20210317 is closer.  For me this works in that I could (re)install eclib using `./sage -f eclib` (I know there is a new way to do that but this worked), where I had put a copy of the updated tarball into upstream so it did no downloading.\n\nI made some changes to the `m4` file, but I have not tested to see if that works, and it does not try to compare the version number with what `mwrank -V` gives out.  I guess that I should at least install this eclib version on my system and then try to configure sage from scratch to see if it likes my system version.  I would be very happy if someone else would like to improve the `m4` file.",
    "created_at": "2021-03-17T15:59:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507618",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:25'>**Comment 25:**</a>
The latest version + updated tarball for eclib-v20210317 is closer.  For me this works in that I could (re)install eclib using `./sage -f eclib` (I know there is a new way to do that but this worked), where I had put a copy of the updated tarball into upstream so it did no downloading.

I made some changes to the `m4` file, but I have not tested to see if that works, and it does not try to compare the version number with what `mwrank -V` gives out.  I guess that I should at least install this eclib version on my system and then try to configure sage from scratch to see if it likes my system version.  I would be very happy if someone else would like to improve the `m4` file.



---

archive/issue_comments_507619.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\nI'll look at the m4 file tonight.",
    "created_at": "2021-03-17T18:06:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507619",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'>**Comment 26:**</a>
I'll look at the m4 file tonight.



---

archive/issue_comments_507620.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\nThe Sage configure system is mysterious to me.  For example, I have flint-2.7.1 installed but the configure script outputs\n\n```\nflint-2.6.3:                                 no suitable system package; will be installed as an SPKG\n```\nI think it might be the case that as eclib lists ntl, flint and pari as prerequisites, it will build eclib if any of those three are also going to be built.  That is why  I was looking at the output for these.  I was not surprised to see that it wanted to build NTL since my installed NTL was old -- I am now building ntl-11.4.4.  (I am in the habit of installing eclib's dependencies by building from source.)  Similarly with pari.  Sage wants pari-2.11.4.p1 which I assume is 2.11.4 with some patching (why?).  I have a 2.11.3 and 2.12.0.alpha but the last stable release is 2.13.1 so shoule Sage not upgrade?",
    "created_at": "2021-03-18T09:16:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507620",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:27'>**Comment 27:**</a>
The Sage configure system is mysterious to me.  For example, I have flint-2.7.1 installed but the configure script outputs

```
flint-2.6.3:                                 no suitable system package; will be installed as an SPKG
```
I think it might be the case that as eclib lists ntl, flint and pari as prerequisites, it will build eclib if any of those three are also going to be built.  That is why  I was looking at the output for these.  I was not surprised to see that it wanted to build NTL since my installed NTL was old -- I am now building ntl-11.4.4.  (I am in the habit of installing eclib's dependencies by building from source.)  Similarly with pari.  Sage wants pari-2.11.4.p1 which I assume is 2.11.4 with some patching (why?).  I have a 2.11.3 and 2.12.0.alpha but the last stable release is 2.13.1 so shoule Sage not upgrade?



---

archive/issue_comments_507621.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\nReplying to [@JohnCremona](#comment%3A27):\n> The Sage configure system is mysterious to me.  For example, I have flint-2.7.1 installed but the configure script outputs\n> \n> ```\n> flint-2.6.3:                                 no suitable system package; will be installed as an SPKG\n> ```\n> I think it might be the case that as eclib lists ntl, flint and pari as prerequisites, it will build eclib if any of those three are also going to be built. \n\nthis is correct. Also, Sage is still on flint 2.6.3, see #31069\n\nmore details can be found in the top-level config.log\n\n> That is why  I was looking at the output for these.  I was not surprised to see that it wanted to build NTL since my installed NTL was old -- I am now building ntl-11.4.4.  (I am in the habit of installing eclib's dependencies by building from source.)\n\nYou might be willing to install them in /usr/local, then they will be picked up by \n./configure, and (hopefully) used.\n\n\n>  Similarly with pari.  Sage wants pari-2.11.4.p1 which I assume is 2.11.4 with some patching (why?).  I have a 2.11.3 and 2.12.0.alpha but the last stable release is 2.13.1 so shoule Sage not upgrade?\n\nPari upgrade to 2.13 is not yet done, see #30906 - needs review.\n\nAs to what exactly is amiss in your current Pari, it can be seen in the top-level config log. There were several bugs in Pari 2.11 - were they all fixed in 2.11.4?\nI don't recall right away, there was a problematic Pari 2.12 release, perhaps something from there needed to be backported...",
    "created_at": "2021-03-18T11:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507621",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'>**Comment 28:**</a>
Replying to [@JohnCremona](#comment%3A27):
> The Sage configure system is mysterious to me.  For example, I have flint-2.7.1 installed but the configure script outputs
> 
> ```
> flint-2.6.3:                                 no suitable system package; will be installed as an SPKG
> ```
> I think it might be the case that as eclib lists ntl, flint and pari as prerequisites, it will build eclib if any of those three are also going to be built. 

this is correct. Also, Sage is still on flint 2.6.3, see #31069

more details can be found in the top-level config.log

> That is why  I was looking at the output for these.  I was not surprised to see that it wanted to build NTL since my installed NTL was old -- I am now building ntl-11.4.4.  (I am in the habit of installing eclib's dependencies by building from source.)

You might be willing to install them in /usr/local, then they will be picked up by 
./configure, and (hopefully) used.


>  Similarly with pari.  Sage wants pari-2.11.4.p1 which I assume is 2.11.4 with some patching (why?).  I have a 2.11.3 and 2.12.0.alpha but the last stable release is 2.13.1 so shoule Sage not upgrade?

Pari upgrade to 2.13 is not yet done, see #30906 - needs review.

As to what exactly is amiss in your current Pari, it can be seen in the top-level config log. There were several bugs in Pari 2.11 - were they all fixed in 2.11.4?
I don't recall right away, there was a problematic Pari 2.12 release, perhaps something from there needed to be backported...



---

archive/issue_comments_507622.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\nThanks for the detailed comments.  I do install stuff in /usr/local, currently I have a problem with FLINT-2.7.2 whose \"make check\" now fails after I upgraded MPIR to 3.0.0 and MPFR to 4.0.0.\n\nI will look at those two tickets, especially the pari one.  Meanwhile I don't mind at all if Sage builds its own eclib, as in any case that will be essential now at least until there are any distros with my current version (which I have not yet tagged or released anyway).",
    "created_at": "2021-03-18T12:17:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507622",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:29'>**Comment 29:**</a>
Thanks for the detailed comments.  I do install stuff in /usr/local, currently I have a problem with FLINT-2.7.2 whose "make check" now fails after I upgraded MPIR to 3.0.0 and MPFR to 4.0.0.

I will look at those two tickets, especially the pari one.  Meanwhile I don't mind at all if Sage builds its own eclib, as in any case that will be essential now at least until there are any distros with my current version (which I have not yet tagged or released anyway).



---

archive/issue_comments_507623.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\nthe tarball URL is still wrong. (the one in checksums.ini)",
    "created_at": "2021-03-18T12:29:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507623",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:30'>**Comment 30:**</a>
the tarball URL is still wrong. (the one in checksums.ini)



---

archive/issue_comments_507624.json:
```json
{
    "body": "<a id='comment:31'>**Comment 31:**</a>\nthere is also rubbish in the branch, a file named `t`.",
    "created_at": "2021-03-18T12:30:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507624",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'>**Comment 31:**</a>
there is also rubbish in the branch, a file named `t`.



---

archive/issue_comments_507625.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. No feedback yet.\" to \"Fixed upstream, in a later stable release.\".",
    "created_at": "2021-03-18T12:36:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507625",
    "user": "https://github.com/dimpase"
}
```

**Changing upstream** from "Reported upstream. No feedback yet." to "Fixed upstream, in a later stable release.".



---

archive/issue_comments_507626.json:
```json
{
    "body": "<a id='comment:33'>**Comment 33:**</a>\nSorry about that, but at least these are things I can easily fix...done, but trac is not allowing me to push the revised branch.  I also updated the tarball at \u200bhttps://johncremona.github.io/ftp/eclib-v20210317.tar.bz2 (in case you had already downloaded it).",
    "created_at": "2021-03-18T13:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507626",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:33'>**Comment 33:**</a>
Sorry about that, but at least these are things I can easily fix...done, but trac is not allowing me to push the revised branch.  I also updated the tarball at ​https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2 (in case you had already downloaded it).



---

archive/issue_comments_507627.json:
```json
{
    "body": "<a id='comment:34'>**Comment 34:**</a>\nLooking at my config.log, working backwards, I see that it wants to install eclib since it is installing ntl, it wants to install ntl (despite a new version being in /usr/local) because it is installing gmp/mpir, and it is installing gmp because it found no suitable system package, while for mpir it did find my new install and will not try to install that.  But I *do* have gmp installed (libgmp-dev on ubuntu, package version 2:6.2.0+dsfg-4 on ubuntu 20.04).  Dare I suggest that the configure script is incorrectly determining that gmp is not available?",
    "created_at": "2021-03-18T14:22:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507627",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:34'>**Comment 34:**</a>
Looking at my config.log, working backwards, I see that it wants to install eclib since it is installing ntl, it wants to install ntl (despite a new version being in /usr/local) because it is installing gmp/mpir, and it is installing gmp because it found no suitable system package, while for mpir it did find my new install and will not try to install that.  But I *do* have gmp installed (libgmp-dev on ubuntu, package version 2:6.2.0+dsfg-4 on ubuntu 20.04).  Dare I suggest that the configure script is incorrectly determining that gmp is not available?



---

archive/issue_comments_507628.json:
```json
{
    "body": "<a id='comment:35'>**Comment 35:**</a>\nby the way, why do you prepend `v` to to the version? This is an extra hassle. If it's just a number, or something like a.b.c, with a, b, c nonneg. integers, it's more stanard.",
    "created_at": "2021-03-18T14:23:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507628",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:35'>**Comment 35:**</a>
by the way, why do you prepend `v` to to the version? This is an extra hassle. If it's just a number, or something like a.b.c, with a, b, c nonneg. integers, it's more stanard.



---

archive/issue_comments_507629.json:
```json
{
    "body": "<a id='comment:36'>**Comment 36:**</a>\nReplying to [@JohnCremona](#comment%3A34):\n> Looking at my config.log, working backwards, I see that it wants to install eclib since it is installing ntl, it wants to install ntl (despite a new version being in /usr/local) because it is installing gmp/mpir, and it is installing gmp because it found no suitable system package, while for mpir it did find my new install and will not try to install that.  But I *do* have gmp installed (libgmp-dev on ubuntu, package version 2:6.2.0+dsfg-4 on ubuntu 20.04).  Dare I suggest that the configure script is incorrectly determining that gmp is not available?\n\nHmm, if you already have mpir/gmp installed in your Sage install, then ./configure will assume you want to keep it (and thus everything that depends upon it will be built).\n\n```\nmake gmp-clean mpir-clean \n```\nshould clean these up, so that the system GMP is picked up by ./configure",
    "created_at": "2021-03-18T14:25:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507629",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:36'>**Comment 36:**</a>
Replying to [@JohnCremona](#comment%3A34):
> Looking at my config.log, working backwards, I see that it wants to install eclib since it is installing ntl, it wants to install ntl (despite a new version being in /usr/local) because it is installing gmp/mpir, and it is installing gmp because it found no suitable system package, while for mpir it did find my new install and will not try to install that.  But I *do* have gmp installed (libgmp-dev on ubuntu, package version 2:6.2.0+dsfg-4 on ubuntu 20.04).  Dare I suggest that the configure script is incorrectly determining that gmp is not available?

Hmm, if you already have mpir/gmp installed in your Sage install, then ./configure will assume you want to keep it (and thus everything that depends upon it will be built).

```
make gmp-clean mpir-clean 
```
should clean these up, so that the system GMP is picked up by ./configure



---

archive/issue_comments_507630.json:
```json
{
    "body": "**Changing branch** from \"[u/cremona/31443-eclib-saturation](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/31443-eclib-saturation)\" to \"[public/packages/eclib/31443](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/eclib/31443)\".",
    "created_at": "2021-03-18T14:34:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507630",
    "user": "https://github.com/dimpase"
}
```

**Changing branch** from "[u/cremona/31443-eclib-saturation](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/31443-eclib-saturation)" to "[public/packages/eclib/31443](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/eclib/31443)".



---

archive/issue_comments_507631.json:
```json
{
    "body": "<a id='comment:37'>**Comment 37:**</a>\nhere are my updates, with fixed m4 etc.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/573bcf604b3ab69d19716b47627f3b378b0c081f\">573bcf6</a></td><td><code>fix m4 and tar URL, remove junk</code></td></tr></table>\n",
    "created_at": "2021-03-18T14:34:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507631",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'>**Comment 37:**</a>
here are my updates, with fixed m4 etc.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/573bcf604b3ab69d19716b47627f3b378b0c081f">573bcf6</a></td><td><code>fix m4 and tar URL, remove junk</code></td></tr></table>




---

archive/issue_comments_507632.json:
```json
{
    "body": "**Changing commit** from \"[1bac7138020240bd3b6944e85bfc28676dcca6f1](https://github.com/sagemath/sagetrac-mirror/commit/1bac7138020240bd3b6944e85bfc28676dcca6f1)\" to \"[573bcf604b3ab69d19716b47627f3b378b0c081f](https://github.com/sagemath/sagetrac-mirror/commit/573bcf604b3ab69d19716b47627f3b378b0c081f)\".",
    "created_at": "2021-03-18T14:34:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507632",
    "user": "https://github.com/dimpase"
}
```

**Changing commit** from "[1bac7138020240bd3b6944e85bfc28676dcca6f1](https://github.com/sagemath/sagetrac-mirror/commit/1bac7138020240bd3b6944e85bfc28676dcca6f1)" to "[573bcf604b3ab69d19716b47627f3b378b0c081f](https://github.com/sagemath/sagetrac-mirror/commit/573bcf604b3ab69d19716b47627f3b378b0c081f)".



---

archive/issue_comments_507633.json:
```json
{
    "body": "<a id='comment:38'>**Comment 38:**</a>\nI guess if the tarfile has changed then the checksums should be updated too.",
    "created_at": "2021-03-18T14:35:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507633",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:38'>**Comment 38:**</a>
I guess if the tarfile has changed then the checksums should be updated too.



---

archive/issue_comments_507634.json:
```json
{
    "body": "<a id='comment:39'>**Comment 39:**</a>\nI have nbot yet managed to push my branch, but I'll try again only after merging your fix for the mp4.\n\nMy version numbers did not use to have the v in them, I added that yesterday for some reason.  I will revert that -- I think it was because my tag did have the v, so th tarball github creates has the v, an I thought I would be linking to that -- but we are not.  This will require a fresh tarball, but that will not take long.\n\nThe configure tests I have been running are on a fresh download from trac, not an existing build, so *nothing* has been built in it yet!  eclib itself detects gmp, and when I run ldd on my latest version of the shared libec library I see\n\n```\nlibgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007f23ee737000)\n```\nso I don't know why Sage's configure does not find it.  I do build mpir in its gmp-compat mode, so as well as the system library as above, in /usr/local/lib I have both libmpir and libgmp both installed when I do 'make install' on mpir.",
    "created_at": "2021-03-18T14:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507634",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:39'>**Comment 39:**</a>
I have nbot yet managed to push my branch, but I'll try again only after merging your fix for the mp4.

My version numbers did not use to have the v in them, I added that yesterday for some reason.  I will revert that -- I think it was because my tag did have the v, so th tarball github creates has the v, an I thought I would be linking to that -- but we are not.  This will require a fresh tarball, but that will not take long.

The configure tests I have been running are on a fresh download from trac, not an existing build, so *nothing* has been built in it yet!  eclib itself detects gmp, and when I run ldd on my latest version of the shared libec library I see

```
libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007f23ee737000)
```
so I don't know why Sage's configure does not find it.  I do build mpir in its gmp-compat mode, so as well as the system library as above, in /usr/local/lib I have both libmpir and libgmp both installed when I do 'make install' on mpir.



---

archive/issue_comments_507635.json:
```json
{
    "body": "<a id='comment:40'>**Comment 40:**</a>\nMaybe `./configure --with-mp=gmp` can help?",
    "created_at": "2021-03-18T15:00:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507635",
    "user": "https://github.com/slel"
}
```

<a id='comment:40'>**Comment 40:**</a>
Maybe `./configure --with-mp=gmp` can help?



---

archive/issue_comments_507636.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).\n \n-New eclib source tarball at [https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2](https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2)\n+New eclib source tarball at [https://johncremona.github.io/ftp/eclib-20210318.tar.bz2](https://johncremona.github.io/ftp/eclib-20210318.tar.bz2)\n``````\n",
    "created_at": "2021-03-18T15:36:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507636",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).
 
-New eclib source tarball at [https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2](https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2)
+New eclib source tarball at [https://johncremona.github.io/ftp/eclib-20210318.tar.bz2](https://johncremona.github.io/ftp/eclib-20210318.tar.bz2)
``````




---

archive/issue_comments_507637.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).\n \n-New eclib source tarball at [https://johncremona.github.io/ftp/eclib-20210318.tar.bz2](https://johncremona.github.io/ftp/eclib-20210318.tar.bz2)\n+New eclib source tarball at [https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2](https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2)\n``````\n",
    "created_at": "2021-03-18T15:39:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507637",
    "user": "https://github.com/dimpase"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).
 
-New eclib source tarball at [https://johncremona.github.io/ftp/eclib-20210318.tar.bz2](https://johncremona.github.io/ftp/eclib-20210318.tar.bz2)
+New eclib source tarball at [https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2](https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2)
``````




---

archive/issue_comments_507638.json:
```json
{
    "body": "<a id='comment:42'>**Comment 42:**</a>\nReplying to [@JohnCremona](#comment%3A39):\n  eclib itself detects gmp, and when I run ldd on my latest version of the shared libec library I see\n> \n> ```\n> libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007f23ee737000)\n> ```\n> so I don't know why Sage's configure does not find it.  I do build mpir in its gmp-compat mode, so as well as the system library as above, in /usr/local/lib I have both libmpir and libgmp both installed when I do 'make install' on mpir.\n\nSage most probably finds mpir in /usr/local first, and then rejects it for some reason.\nPlease post top-level config.log\n(This is a configuration noone tried since few years, I guess. MPIR is semi-abandoned,\nI don't know why we have not downgraded it to experimental yet)",
    "created_at": "2021-03-18T15:39:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507638",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:42'>**Comment 42:**</a>
Replying to [@JohnCremona](#comment%3A39):
  eclib itself detects gmp, and when I run ldd on my latest version of the shared libec library I see
> 
> ```
> libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007f23ee737000)
> ```
> so I don't know why Sage's configure does not find it.  I do build mpir in its gmp-compat mode, so as well as the system library as above, in /usr/local/lib I have both libmpir and libgmp both installed when I do 'make install' on mpir.

Sage most probably finds mpir in /usr/local first, and then rejects it for some reason.
Please post top-level config.log
(This is a configuration noone tried since few years, I guess. MPIR is semi-abandoned,
I don't know why we have not downgraded it to experimental yet)



---

archive/issue_comments_507639.json:
```json
{
    "body": "<a id='comment:43'>**Comment 43:**</a>\nI wil try that configure suggestion, thanks.\n\nMeanwhile I have updated the branch with yet another version of the tarball, checksums etc, 20210318 (no v) but for some reason I cannot now push to trac, either to u/cremona/31443-eclib-saturation (by old branch) or public/packages/eclib/31443.  In both cases I see\n\n```\nfatal: remote error: access denied or repository not exported: /sage.git\n```\nI have changed nothing with my ssh setup (no new keys, etc).  Suggestions?",
    "created_at": "2021-03-18T15:39:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507639",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:43'>**Comment 43:**</a>
I wil try that configure suggestion, thanks.

Meanwhile I have updated the branch with yet another version of the tarball, checksums etc, 20210318 (no v) but for some reason I cannot now push to trac, either to u/cremona/31443-eclib-saturation (by old branch) or public/packages/eclib/31443.  In both cases I see

```
fatal: remote error: access denied or repository not exported: /sage.git
```
I have changed nothing with my ssh setup (no new keys, etc).  Suggestions?



---

archive/issue_comments_507640.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).\n \n-New eclib source tarball at [https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2](https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2)\n+New eclib source tarball at [https://johncremona.github.io/ftp/eclib-20210318.tar.bz2](https://johncremona.github.io/ftp/eclib-20210318.tar.bz2)\n``````\n",
    "created_at": "2021-03-18T15:39:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507640",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).
 
-New eclib source tarball at [https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2](https://johncremona.github.io/ftp/eclib-v20210317.tar.bz2)
+New eclib source tarball at [https://johncremona.github.io/ftp/eclib-20210318.tar.bz2](https://johncremona.github.io/ftp/eclib-20210318.tar.bz2)
``````




---

archive/issue_comments_507641.json:
```json
{
    "body": "<a id='comment:44'>**Comment 44:**</a>\nReplying to [@dimpase](#comment%3A42):\n> Replying to [@JohnCremona](#comment%3A39):\n>   eclib itself detects gmp, and when I run ldd on my latest version of the shared libec library I see\n> > \n> > ```\n> > libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007f23ee737000)\n> > ```\n> > so I don't know why Sage's configure does not find it.  I do build mpir in its gmp-compat mode, so as well as the system library as above, in /usr/local/lib I have both libmpir and libgmp both installed when I do 'make install' on mpir.\n\n> \n> Sage most probably finds mpir in /usr/local first, and then rejects it for some reason.\n> Please post top-level config.log\n> (This is a configuration noone tried since few years, I guess. MPIR is semi-abandoned,\n> I don't know why we have not downgraded it to experimental yet)\n> \n\nI am not tied at all to MPIR, I started using it when Bill Hart was in Warwick.  But it will simplify m life a bit to just use ordinary gmp, so I will uninstall mpir and hope that this will fix things.",
    "created_at": "2021-03-18T15:41:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507641",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:44'>**Comment 44:**</a>
Replying to [@dimpase](#comment%3A42):
> Replying to [@JohnCremona](#comment%3A39):
>   eclib itself detects gmp, and when I run ldd on my latest version of the shared libec library I see
> > 
> > ```
> > libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007f23ee737000)
> > ```
> > so I don't know why Sage's configure does not find it.  I do build mpir in its gmp-compat mode, so as well as the system library as above, in /usr/local/lib I have both libmpir and libgmp both installed when I do 'make install' on mpir.

> 
> Sage most probably finds mpir in /usr/local first, and then rejects it for some reason.
> Please post top-level config.log
> (This is a configuration noone tried since few years, I guess. MPIR is semi-abandoned,
> I don't know why we have not downgraded it to experimental yet)
> 

I am not tied at all to MPIR, I started using it when Bill Hart was in Warwick.  But it will simplify m life a bit to just use ordinary gmp, so I will uninstall mpir and hope that this will fix things.



---

archive/issue_comments_507642.json:
```json
{
    "body": "<a id='comment:45'>**Comment 45:**</a>\ndo you by any chance use `git trac` extension?",
    "created_at": "2021-03-18T15:49:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507642",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:45'>**Comment 45:**</a>
do you by any chance use `git trac` extension?



---

archive/issue_comments_507643.json:
```json
{
    "body": "<a id='comment:46'>**Comment 46:**</a>\nReplying to [@dimpase](#comment%3A45):\n> do you by any chance use `git trac` extension?\n\nNo",
    "created_at": "2021-03-18T15:52:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507643",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:46'>**Comment 46:**</a>
Replying to [@dimpase](#comment%3A45):
> do you by any chance use `git trac` extension?

No



---

archive/issue_comments_507644.json:
```json
{
    "body": "<a id='comment:47'>**Comment 47:**</a>\nwhat do you get if you run `ssh git@trac.sagemath.org` ?\nYou'd see something like \n\n```\nhello <username>, this is git@trac running gitolite3 3.5.3.1-2 (Debian) on git 1.9.1\n\n R W\tsage\nConnection to trac.sagemath.org closed.\n```",
    "created_at": "2021-03-18T15:58:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507644",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:47'>**Comment 47:**</a>
what do you get if you run `ssh git@trac.sagemath.org` ?
You'd see something like 

```
hello <username>, this is git@trac running gitolite3 3.5.3.1-2 (Debian) on git 1.9.1

 R W	sage
Connection to trac.sagemath.org closed.
```



---

archive/issue_comments_507645.json:
```json
{
    "body": "<a id='comment:48'>**Comment 48:**</a>\nReplying to [@dimpase](#comment%3A47):\n> what do you get if you run `ssh git@trac.sagemath.org` ?\n> You'd see something like \n> \n> ```\n> hello <username>, this is git@trac running gitolite3 3.5.3.1-2 (Debian) on git 1.9.1\n> \n>  R W\tsage\n> Connection to trac.sagemath.org closed.\n> ```\n\nI get this:\n\n```\n$ ssh git@trac.sagemath.org\nX11 forwarding request failed on channel 0\nPTY allocation request failed on channel 0\nhello cremona, this is git@trac running gitolite3 3.5.3.1-2 (Debian) on git 1.9.1\n\n R W\tsage\nConnection to trac.sagemath.org closed.\n```\nwhich looks OK to me.",
    "created_at": "2021-03-18T16:10:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507645",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:48'>**Comment 48:**</a>
Replying to [@dimpase](#comment%3A47):
> what do you get if you run `ssh git@trac.sagemath.org` ?
> You'd see something like 
> 
> ```
> hello <username>, this is git@trac running gitolite3 3.5.3.1-2 (Debian) on git 1.9.1
> 
>  R W	sage
> Connection to trac.sagemath.org closed.
> ```

I get this:

```
$ ssh git@trac.sagemath.org
X11 forwarding request failed on channel 0
PTY allocation request failed on channel 0
hello cremona, this is git@trac running gitolite3 3.5.3.1-2 (Debian) on git 1.9.1

 R W	sage
Connection to trac.sagemath.org closed.
```
which looks OK to me.



---

archive/issue_comments_507646.json:
```json
{
    "body": "<a id='comment:49'>**Comment 49:**</a>\nWhen I uninstalled MPIR I managed to so seriously break my system that gcc did not work.  I even reinstalled ubuntu's gmp and gcc but they still did not work.  So I reinstalled MPIR, which puts libgmp files (as well as libmpir files) into /usr/local, and now gcc works.  Bizarre.",
    "created_at": "2021-03-18T16:20:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507646",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:49'>**Comment 49:**</a>
When I uninstalled MPIR I managed to so seriously break my system that gcc did not work.  I even reinstalled ubuntu's gmp and gcc but they still did not work.  So I reinstalled MPIR, which puts libgmp files (as well as libmpir files) into /usr/local, and now gcc works.  Bizarre.



---

archive/issue_comments_507647.json:
```json
{
    "body": "<a id='comment:50'>**Comment 50:**</a>\nWhat does `git remote -v` say for this repo?",
    "created_at": "2021-03-18T16:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507647",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:50'>**Comment 50:**</a>
What does `git remote -v` say for this repo?



---

archive/issue_comments_507648.json:
```json
{
    "body": "<a id='comment:51'>**Comment 51:**</a>\nReplying to [@JohnCremona](#comment%3A49):\n> When I uninstalled MPIR I managed to so seriously break my system that gcc did not work.  I even reinstalled ubuntu's gmp and gcc but they still did not work.  So I reinstalled MPIR, which puts libgmp files (as well as libmpir files) into /usr/local, and now gcc works.  Bizarre.\n\ngmp is a build dependency of gcc, so not too bizzare. \n\nHowever, system packages should not depend on anything in /usr/local, so perhaps something was not properly flushed...",
    "created_at": "2021-03-18T16:37:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507648",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:51'>**Comment 51:**</a>
Replying to [@JohnCremona](#comment%3A49):
> When I uninstalled MPIR I managed to so seriously break my system that gcc did not work.  I even reinstalled ubuntu's gmp and gcc but they still did not work.  So I reinstalled MPIR, which puts libgmp files (as well as libmpir files) into /usr/local, and now gcc works.  Bizarre.

gmp is a build dependency of gcc, so not too bizzare. 

However, system packages should not depend on anything in /usr/local, so perhaps something was not properly flushed...



---

archive/issue_comments_507649.json:
```json
{
    "body": "<a id='comment:52'>**Comment 52:**</a>\nReplying to [@dimpase](#comment%3A50):\n> What does `git remote -v` say for this repo?\n\n\n```\n$ git remote -v\ntrac\tgit://trac.sagemath.org/sage.git (fetch)\ntrac\tgit://trac.sagemath.org/sage.git (push)\n```\nThis is a repo I downloaded yesterday, have made some changes to (in build/ and whatever else the branch on this ticket touches such as src/libs/eclib) but have never actually built, only run ./bootstrap and ./configure.\n\n./configure *does* now report that it can use the system gmp -- this is only true after rerunning ./bootstrap *and* adding --with-mp=pir on the configure command line.  That is progress.  But it still does not like my NTL.  Here's a bit of config.log:\n\n```\n## ----------------------------------------------------- ##\n## Checking whether SageMath should install SPKG mpir... ##\n## ----------------------------------------------------- ##\nconfigure:10351: no suitable system package found for SPKG mpir\nconfigure:10371: result: using mpir SPKG (via --with-mp=mpir)\n## ---------------------------------------------------- ##\n## Checking whether SageMath should install SPKG gmp... ##\n## ---------------------------------------------------- ##\nconfigure:10526: will use system package and not install SPKG gmp\n## ----------------------------------------------------- ##\n## Checking whether SageMath should install SPKG mpfr... ##\n## ----------------------------------------------------- ##\nconfigure:10624: checking installing gmp/mpir? \nconfigure:10627: result: yes; install mpfr as well\nconfigure:10715: no suitable system package found for SPKG mpfr\nconfigure:10733: result: using Sage's mpfr SPKG\n## ---------------------------------------------------- ##\n## Checking whether SageMath should install SPKG ntl... ##\n## ---------------------------------------------------- ##\nconfigure:10814: checking installing gmp/mpir? \nconfigure:10817: result: yes; install ntl as well\nconfigure:10929: no suitable system package found for SPKG ntl\n## ------------------------------------------------------ ##\n## Checking whether SageMath should install SPKG flint... ##\n## ------------------------------------------------------ ##\nconfigure:11136: checking installing mpfr or ntl? \nconfigure:11139: result: yes; install flint as well\nconfigure:11324: no suitable system package found for SPKG flint\nconfigure:11342: result: using Sage's flint SPKG\n## ---------------------------------------------------- ##\n## Checking whether SageMath should install SPKG arb... ##\n## ---------------------------------------------------- ##\nconfigure:11424: checking installing flint? \nconfigure:11427: result: yes; install arb as well\nconfigure:11544: no suitable system package found for SPKG arb\n```\n\nThis is so inconsistent!",
    "created_at": "2021-03-18T16:37:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507649",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:52'>**Comment 52:**</a>
Replying to [@dimpase](#comment%3A50):
> What does `git remote -v` say for this repo?


```
$ git remote -v
trac	git://trac.sagemath.org/sage.git (fetch)
trac	git://trac.sagemath.org/sage.git (push)
```
This is a repo I downloaded yesterday, have made some changes to (in build/ and whatever else the branch on this ticket touches such as src/libs/eclib) but have never actually built, only run ./bootstrap and ./configure.

./configure *does* now report that it can use the system gmp -- this is only true after rerunning ./bootstrap *and* adding --with-mp=pir on the configure command line.  That is progress.  But it still does not like my NTL.  Here's a bit of config.log:

```
## ----------------------------------------------------- ##
## Checking whether SageMath should install SPKG mpir... ##
## ----------------------------------------------------- ##
configure:10351: no suitable system package found for SPKG mpir
configure:10371: result: using mpir SPKG (via --with-mp=mpir)
## ---------------------------------------------------- ##
## Checking whether SageMath should install SPKG gmp... ##
## ---------------------------------------------------- ##
configure:10526: will use system package and not install SPKG gmp
## ----------------------------------------------------- ##
## Checking whether SageMath should install SPKG mpfr... ##
## ----------------------------------------------------- ##
configure:10624: checking installing gmp/mpir? 
configure:10627: result: yes; install mpfr as well
configure:10715: no suitable system package found for SPKG mpfr
configure:10733: result: using Sage's mpfr SPKG
## ---------------------------------------------------- ##
## Checking whether SageMath should install SPKG ntl... ##
## ---------------------------------------------------- ##
configure:10814: checking installing gmp/mpir? 
configure:10817: result: yes; install ntl as well
configure:10929: no suitable system package found for SPKG ntl
## ------------------------------------------------------ ##
## Checking whether SageMath should install SPKG flint... ##
## ------------------------------------------------------ ##
configure:11136: checking installing mpfr or ntl? 
configure:11139: result: yes; install flint as well
configure:11324: no suitable system package found for SPKG flint
configure:11342: result: using Sage's flint SPKG
## ---------------------------------------------------- ##
## Checking whether SageMath should install SPKG arb... ##
## ---------------------------------------------------- ##
configure:11424: checking installing flint? 
configure:11427: result: yes; install arb as well
configure:11544: no suitable system package found for SPKG arb
```

This is so inconsistent!



---

archive/issue_comments_507650.json:
```json
{
    "body": "<a id='comment:53'>**Comment 53:**</a>\nReplying to [@dimpase](#comment%3A51):\n> Replying to [@JohnCremona](#comment%3A49):\n> > When I uninstalled MPIR I managed to so seriously break my system that gcc did not work.  I even reinstalled ubuntu's gmp and gcc but they still did not work.  So I reinstalled MPIR, which puts libgmp files (as well as libmpir files) into /usr/local, and now gcc works.  Bizarre.\n\n> \n> gmp is a build dependency of gcc, so not too bizzare. \n\nI think it *is* bizarre since I reinstalled the system gmp and gcc and after that gcc did not work, while after reinstalling my own mpir build gcc does work.\n\n> \n> However, system packages should not depend on anything in /usr/local, so perhaps something was not properly flushed...\n> \n\nI don't know exactly what that means or how to fix it.\n\nThe only reason I am in this  mess is that I was trying to improve Sage for Sage users by improving eclib (no-one else uses it).  I have now spent several days on all this package installation nonsense, which used to be very simple but is now in some in-between state where things only half work.  And now I cannot even push my branch to trac for some other stupid reason.  I did push it to my github fork https://github.com/JohnCremona/sage/tree/31443-eclib-saturation\n\nbut I have had enough of all this.  I may come back to it next week, but I have others things to do.",
    "created_at": "2021-03-18T16:47:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507650",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:53'>**Comment 53:**</a>
Replying to [@dimpase](#comment%3A51):
> Replying to [@JohnCremona](#comment%3A49):
> > When I uninstalled MPIR I managed to so seriously break my system that gcc did not work.  I even reinstalled ubuntu's gmp and gcc but they still did not work.  So I reinstalled MPIR, which puts libgmp files (as well as libmpir files) into /usr/local, and now gcc works.  Bizarre.

> 
> gmp is a build dependency of gcc, so not too bizzare. 

I think it *is* bizarre since I reinstalled the system gmp and gcc and after that gcc did not work, while after reinstalling my own mpir build gcc does work.

> 
> However, system packages should not depend on anything in /usr/local, so perhaps something was not properly flushed...
> 

I don't know exactly what that means or how to fix it.

The only reason I am in this  mess is that I was trying to improve Sage for Sage users by improving eclib (no-one else uses it).  I have now spent several days on all this package installation nonsense, which used to be very simple but is now in some in-between state where things only half work.  And now I cannot even push my branch to trac for some other stupid reason.  I did push it to my github fork https://github.com/JohnCremona/sage/tree/31443-eclib-saturation

but I have had enough of all this.  I may come back to it next week, but I have others things to do.



---

archive/issue_comments_507651.json:
```json
{
    "body": "<a id='comment:54'>**Comment 54:**</a>\nReplying to [@JohnCremona](#comment%3A52):\n> Replying to [@dimpase](#comment%3A50):\n> > What does `git remote -v` say for this repo?\n\n> \n> ```\n> $ git remote -v\n> trac\tgit://trac.sagemath.org/sage.git (fetch)\n> trac\tgit://trac.sagemath.org/sage.git (push)\n> ```\n\nremove these `git://` things - you are not using `ssh` while pushing to a `git://` URL. `git://` is a \"native\" git protocol that does authentication via a password, I have no idea how you actually managed to push from this machine earlier. That is, run \n\n```\ngit remote rm trac\ngit remote add trac git@trac.sagemath.org:sage.git\n```\n\n\n>I think it *is* bizarre since I reinstalled the system gmp and gcc and after that gcc did not work, while after reinstalling my own mpir build gcc does work.\n\n>> However, system packages should not depend on anything in /usr/local, so perhaps  something was not properly flushed...\n\n> I don't know exactly what that means or how to fix it.\n\nI don't know either, I've never seen this before --- I only know that your gcc toolchain is messed up (and this doesn't have much to do with Sage). It might be as simple as looging out and back in, or perhaps a reboot, bit it really no Sage's fault.\n\n> And now I cannot even push my branch to trac for some other stupid reason.\n\nwhich this is not Sage's fault (other that Sage messes up with MPIR for far too long :-)).\n\n\nI think your packages is in a good shape, I will finish up the branch and put it up for review.",
    "created_at": "2021-03-18T18:55:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507651",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:54'>**Comment 54:**</a>
Replying to [@JohnCremona](#comment%3A52):
> Replying to [@dimpase](#comment%3A50):
> > What does `git remote -v` say for this repo?

> 
> ```
> $ git remote -v
> trac	git://trac.sagemath.org/sage.git (fetch)
> trac	git://trac.sagemath.org/sage.git (push)
> ```

remove these `git://` things - you are not using `ssh` while pushing to a `git://` URL. `git://` is a "native" git protocol that does authentication via a password, I have no idea how you actually managed to push from this machine earlier. That is, run 

```
git remote rm trac
git remote add trac git@trac.sagemath.org:sage.git
```


>I think it *is* bizarre since I reinstalled the system gmp and gcc and after that gcc did not work, while after reinstalling my own mpir build gcc does work.

>> However, system packages should not depend on anything in /usr/local, so perhaps  something was not properly flushed...

> I don't know exactly what that means or how to fix it.

I don't know either, I've never seen this before --- I only know that your gcc toolchain is messed up (and this doesn't have much to do with Sage). It might be as simple as looging out and back in, or perhaps a reboot, bit it really no Sage's fault.

> And now I cannot even push my branch to trac for some other stupid reason.

which this is not Sage's fault (other that Sage messes up with MPIR for far too long :-)).


I think your packages is in a good shape, I will finish up the branch and put it up for review.



---

archive/issue_comments_507652.json:
```json
{
    "body": "**Changing commit** from \"[573bcf604b3ab69d19716b47627f3b378b0c081f](https://github.com/sagemath/sagetrac-mirror/commit/573bcf604b3ab69d19716b47627f3b378b0c081f)\" to \"[926670fc33cc68d86bf002db4acb45c63f4df9ef](https://github.com/sagemath/sagetrac-mirror/commit/926670fc33cc68d86bf002db4acb45c63f4df9ef)\".",
    "created_at": "2021-03-18T22:20:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507652",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[573bcf604b3ab69d19716b47627f3b378b0c081f](https://github.com/sagemath/sagetrac-mirror/commit/573bcf604b3ab69d19716b47627f3b378b0c081f)" to "[926670fc33cc68d86bf002db4acb45c63f4df9ef](https://github.com/sagemath/sagetrac-mirror/commit/926670fc33cc68d86bf002db4acb45c63f4df9ef)".



---

archive/issue_comments_507653.json:
```json
{
    "body": "<a id='comment:55'>**Comment 55:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7db4910ebff9e37ccbdadebf0a4e365e064d0c3a\">7db4910</a></td><td><code>remove dud empty file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28408fc22d9d9525460e74492f9193e54a20bb15\">28408fc</a></td><td><code>correct upstream_url for eclib</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d32295ffeab20af1781b903fad1139c50527d94d\">d32295f</a></td><td><code>fix spkg-configure for eclib</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a90432220bf69426b4f5c82562891292b07a1b2\">5a90432</a></td><td><code>updated eclib build files to 20210318</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/926670fc33cc68d86bf002db4acb45c63f4df9ef\">926670f</a></td><td><code>Merge remote-tracking branch 'jc/31443-eclib-saturation' into public/packages/eclib/31443</code></td></tr></table>\n",
    "created_at": "2021-03-18T22:20:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507653",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:55'>**Comment 55:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7db4910ebff9e37ccbdadebf0a4e365e064d0c3a">7db4910</a></td><td><code>remove dud empty file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28408fc22d9d9525460e74492f9193e54a20bb15">28408fc</a></td><td><code>correct upstream_url for eclib</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d32295ffeab20af1781b903fad1139c50527d94d">d32295f</a></td><td><code>fix spkg-configure for eclib</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a90432220bf69426b4f5c82562891292b07a1b2">5a90432</a></td><td><code>updated eclib build files to 20210318</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/926670fc33cc68d86bf002db4acb45c63f4df9ef">926670f</a></td><td><code>Merge remote-tracking branch 'jc/31443-eclib-saturation' into public/packages/eclib/31443</code></td></tr></table>




---

archive/issue_comments_507654.json:
```json
{
    "body": "<a id='comment:56'>**Comment 56:**</a>\nThanks to everyone for their patience.  I have no idea how I got the trac remote set up so weirdly on this new clone.  On my main sage clone it looked like \n\n```\ntrac\tgit://trac.sagemath.org/sage.git (fetch)\ntrac\tgit@trac.sagemath.org:sage.git (push)\n```\nwhich had been working, apparantly, but I have now sorted that one out too.  So I could finally push my branch to u/cremona/31443-eclib-saturation though that was  made reduandant thanks to Dima's help.",
    "created_at": "2021-03-19T09:14:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507654",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:56'>**Comment 56:**</a>
Thanks to everyone for their patience.  I have no idea how I got the trac remote set up so weirdly on this new clone.  On my main sage clone it looked like 

```
trac	git://trac.sagemath.org/sage.git (fetch)
trac	git@trac.sagemath.org:sage.git (push)
```
which had been working, apparantly, but I have now sorted that one out too.  So I could finally push my branch to u/cremona/31443-eclib-saturation though that was  made reduandant thanks to Dima's help.



---

archive/issue_comments_507655.json:
```json
{
    "body": "<a id='comment:57'>**Comment 57:**</a>\nReplying to [@JohnCremona](#comment%3A56):\n> Thanks to everyone for their patience.  I have no idea how I got the trac remote set up so weirdly on this new clone.  On my main sage clone it looked like \n> \n> ```\n> trac\tgit://trac.sagemath.org/sage.git (fetch)\n> trac\tgit@trac.sagemath.org:sage.git (push)\n> ```\n> which had been working, \n\nthis is fine - git:// works for fetch, this does not need authentication,\nand the push url is OK here, it is an ssh one.\n\ngit:// sometimes does not work through firewalls (if they are not too well set up)",
    "created_at": "2021-03-19T09:25:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507655",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:57'>**Comment 57:**</a>
Replying to [@JohnCremona](#comment%3A56):
> Thanks to everyone for their patience.  I have no idea how I got the trac remote set up so weirdly on this new clone.  On my main sage clone it looked like 
> 
> ```
> trac	git://trac.sagemath.org/sage.git (fetch)
> trac	git@trac.sagemath.org:sage.git (push)
> ```
> which had been working, 

this is fine - git:// works for fetch, this does not need authentication,
and the push url is OK here, it is an ssh one.

git:// sometimes does not work through firewalls (if they are not too well set up)



---

archive/issue_comments_507656.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2021-03-19T10:15:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507656",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_comments_507657.json:
```json
{
    "body": "**Changing author** from \"John Cremona\" to \"John Cremona, Dima Pasechnik\".",
    "created_at": "2021-03-19T10:15:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507657",
    "user": "https://github.com/dimpase"
}
```

**Changing author** from "John Cremona" to "John Cremona, Dima Pasechnik".



---

archive/issue_comments_507658.json:
```json
{
    "body": "<a id='comment:58'>**Comment 58:**</a>\nthis looks good,perhaps someone who knowns autoconf can review my changes to spkg-configure.m4",
    "created_at": "2021-03-19T10:15:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507658",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:58'>**Comment 58:**</a>
this looks good,perhaps someone who knowns autoconf can review my changes to spkg-configure.m4



---

archive/issue_comments_507659.json:
```json
{
    "body": "<a id='comment:59'>**Comment 59:**</a>\nReplying to [@JohnCremona](#comment%3A23):\n> I think it would be quite reasonable to insist that the version installed on the system is *exactly* the version specified, not just \"this or any later version\", since I have enough to worry about without having to think about backwards compatibility.  I'm also fairly sure that there is no-one in the world (except me) who installs eclib except as part of Sage anyway.\n\nThere is also a possible middle ground - you could set an upper bound as well such as `<= 20231231`. \n\nDoes the new version of `eclib` work with old version of Sage?\n\nDownstream distributors of sage could perhaps comment whether fixing the eclib version creates additional burden for them.",
    "created_at": "2021-03-19T17:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507659",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:59'>**Comment 59:**</a>
Replying to [@JohnCremona](#comment%3A23):
> I think it would be quite reasonable to insist that the version installed on the system is *exactly* the version specified, not just "this or any later version", since I have enough to worry about without having to think about backwards compatibility.  I'm also fairly sure that there is no-one in the world (except me) who installs eclib except as part of Sage anyway.

There is also a possible middle ground - you could set an upper bound as well such as `<= 20231231`. 

Does the new version of `eclib` work with old version of Sage?

Downstream distributors of sage could perhaps comment whether fixing the eclib version creates additional burden for them.



---

archive/issue_comments_507660.json:
```json
{
    "body": "<a id='comment:60'>**Comment 60:**</a>\nReplying to [@mkoeppe](#comment%3A59):\n\n> Downstream distributors of sage could perhaps comment whether fixing the eclib version creates additional burden for them.\n\nI don't use sage's build system, so personally I don't care which eclib version the m4 file expects. I always make sure that the versions of eclib and sagelib in our repos are compatible.",
    "created_at": "2021-03-19T17:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507660",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:60'>**Comment 60:**</a>
Replying to [@mkoeppe](#comment%3A59):

> Downstream distributors of sage could perhaps comment whether fixing the eclib version creates additional burden for them.

I don't use sage's build system, so personally I don't care which eclib version the m4 file expects. I always make sure that the versions of eclib and sagelib in our repos are compatible.



---

archive/issue_comments_507661.json:
```json
{
    "body": "<a id='comment:61'>**Comment 61:**</a>\nNo, the new version of eclib will not work with older sages: the sage code changes here in the eclib interface are necesary.\n\nI just push a tag '20210318' to eclib on github and will make a release with the same name.\n\nFrom what I have been discovering about dependencies in Sage's own build system, since Sage has a patched version of pari it will always build any package with pari as a dependency.  But eclib works fine with the latest stable release of pari (2.11.2) so I don't think that distro package managers will be bothered: they can upgrade their eclib to 20210318 at the same time as upgrading sage to 9.3, assuming that this ticket is merged into 9.3.",
    "created_at": "2021-03-19T17:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507661",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:61'>**Comment 61:**</a>
No, the new version of eclib will not work with older sages: the sage code changes here in the eclib interface are necesary.

I just push a tag '20210318' to eclib on github and will make a release with the same name.

From what I have been discovering about dependencies in Sage's own build system, since Sage has a patched version of pari it will always build any package with pari as a dependency.  But eclib works fine with the latest stable release of pari (2.11.2) so I don't think that distro package managers will be bothered: they can upgrade their eclib to 20210318 at the same time as upgrading sage to 9.3, assuming that this ticket is merged into 9.3.



---

archive/issue_comments_507662.json:
```json
{
    "body": "<a id='comment:62'>**Comment 62:**</a>\nI can pin a version for sage-9.2 and a different one for beta and future 9.3 in Gentoo.",
    "created_at": "2021-03-19T20:03:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507662",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:62'>**Comment 62:**</a>
I can pin a version for sage-9.2 and a different one for beta and future 9.3 in Gentoo.



---

archive/issue_comments_507663.json:
```json
{
    "body": "<a id='comment:63'>**Comment 63:**</a>\nReplying to [@JohnCremona](#comment%3A61):\n> No, the new version of eclib will not work with older sages: the sage code changes here in the eclib interface are necesary.\n> \n> I just push a tag '20210318' to eclib on github and will make a release with the same name.\n> \n> From what I have been discovering about dependencies in Sage's own build system, since Sage has a patched version of pari it will always build any package with pari as a dependency.\n\nno, this is not correct. There are versions of Pari 2.11 around on some Linux distributions which are accepted by Sage and may be used. Sage's patches to Pari are needed for Cygwin.",
    "created_at": "2021-03-19T20:24:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507663",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:63'>**Comment 63:**</a>
Replying to [@JohnCremona](#comment%3A61):
> No, the new version of eclib will not work with older sages: the sage code changes here in the eclib interface are necesary.
> 
> I just push a tag '20210318' to eclib on github and will make a release with the same name.
> 
> From what I have been discovering about dependencies in Sage's own build system, since Sage has a patched version of pari it will always build any package with pari as a dependency.

no, this is not correct. There are versions of Pari 2.11 around on some Linux distributions which are accepted by Sage and may be used. Sage's patches to Pari are needed for Cygwin.



---

archive/issue_comments_507664.json:
```json
{
    "body": "<a id='comment:64'>**Comment 64:**</a>\nBy the way, about eclib's 3 dependencies:  \n\n- NTL is vital, used in many ways throughout.  \n\n- FLINT is optional -- eclib can be configured and built without it, though I am not sure when I tested that.  The only difference would be in the speed of certain parts of linear algebra mod p which are used by Sage only in some modular symbols code.  That would still work without the FLINT use but larger examples (large enough to take hours anyway) would be slower.  It will be easy to write that using NTL instead, which I will do and if the performance is no worse than using FLINT then I will consider removing the FLINT version and hance that dependency.\n\n- pari could be made optional, though there seems little point in  that. Until version 20190909, the only difference would have been that without it integer factorization would only use trial division.  Since the 2021 releases eclib also uses libpari's ellap function for point-counting on elliptic curves mod p.  I could  make that optional too since eclib can do its own point counting (it is just slower).",
    "created_at": "2021-03-21T15:18:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507664",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:64'>**Comment 64:**</a>
By the way, about eclib's 3 dependencies:  

- NTL is vital, used in many ways throughout.  

- FLINT is optional -- eclib can be configured and built without it, though I am not sure when I tested that.  The only difference would be in the speed of certain parts of linear algebra mod p which are used by Sage only in some modular symbols code.  That would still work without the FLINT use but larger examples (large enough to take hours anyway) would be slower.  It will be easy to write that using NTL instead, which I will do and if the performance is no worse than using FLINT then I will consider removing the FLINT version and hance that dependency.

- pari could be made optional, though there seems little point in  that. Until version 20190909, the only difference would have been that without it integer factorization would only use trial division.  Since the 2021 releases eclib also uses libpari's ellap function for point-counting on elliptic curves mod p.  I could  make that optional too since eclib can do its own point counting (it is just slower).



---

archive/issue_comments_507665.json:
```json
{
    "body": "<a id='comment:65'>**Comment 65:**</a>\nReplying to [@JohnCremona](#comment%3A61):\n> I just push a tag '20210318' to eclib on github and will make a release with the same name.\n\nYou may want to put the release tarball there.",
    "created_at": "2021-03-21T16:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507665",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:65'>**Comment 65:**</a>
Replying to [@JohnCremona](#comment%3A61):
> I just push a tag '20210318' to eclib on github and will make a release with the same name.

You may want to put the release tarball there.



---

archive/issue_comments_507666.json:
```json
{
    "body": "<a id='comment:66'>**Comment 66:**</a>\nReplying to [@mkoeppe](#comment%3A65):\n> Replying to [@JohnCremona](#comment%3A61):\n> > I just push a tag '20210318' to eclib on github and will make a release with the same name.\n\n> \n> You may want to put the release tarball there.\n\nGithub makes a tarball whenever one makes a release, and it is at https://github.com/JohnCremona/eclib/releases/tag/20210318\nbut I don't think that it is identical in content to what one gets from autotools \"make dist\".  I would certainly prefer to having the tarball there instead of making a separate one and putting it on my own web page.",
    "created_at": "2021-03-21T17:46:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507666",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:66'>**Comment 66:**</a>
Replying to [@mkoeppe](#comment%3A65):
> Replying to [@JohnCremona](#comment%3A61):
> > I just push a tag '20210318' to eclib on github and will make a release with the same name.

> 
> You may want to put the release tarball there.

Github makes a tarball whenever one makes a release, and it is at https://github.com/JohnCremona/eclib/releases/tag/20210318
but I don't think that it is identical in content to what one gets from autotools "make dist".  I would certainly prefer to having the tarball there instead of making a separate one and putting it on my own web page.



---

archive/issue_comments_507667.json:
```json
{
    "body": "<a id='comment:67'>**Comment 67:**</a>\nThat's right. What GitHub puts there is not a proper release tarball; it is merely an archive of what's in the repository. \n\nYou can use the \"edit\" button on the release page to upload the actual release tarball there.",
    "created_at": "2021-03-21T18:11:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507667",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:67'>**Comment 67:**</a>
That's right. What GitHub puts there is not a proper release tarball; it is merely an archive of what's in the repository. 

You can use the "edit" button on the release page to upload the actual release tarball there.



---

archive/issue_comments_507668.json:
```json
{
    "body": "<a id='comment:68'>**Comment 68:**</a>\nReplying to [@mkoeppe](#comment%3A67):\n> That's right. What GitHub puts there is not a proper release tarball; it is merely an archive of what's in the repository. \n> \n> You can use the \"edit\" button on the release page to upload the actual release tarball there. \n\nAh I didn't know that . Thanks, I will do. Then Ill need to change vhecksums.ini again with the changed URL.",
    "created_at": "2021-03-21T18:15:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507668",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:68'>**Comment 68:**</a>
Replying to [@mkoeppe](#comment%3A67):
> That's right. What GitHub puts there is not a proper release tarball; it is merely an archive of what's in the repository. 
> 
> You can use the "edit" button on the release page to upload the actual release tarball there. 

Ah I didn't know that . Thanks, I will do. Then Ill need to change vhecksums.ini again with the changed URL.



---

archive/issue_comments_507669.json:
```json
{
    "body": "<a id='comment:69'>**Comment 69:**</a>\nReplying to [@JohnCremona](#comment%3A64):\n> about eclib's 3 dependencies:  \n\nThanks for sharing this information. At the moment, and also for the Sage 9.4 release cycle (#29705), all of these three libraries are essential standard components of Sage; so from the viewpoint of Sage there is no immediate need to worry about making any of these dependencies optional.",
    "created_at": "2021-03-21T18:39:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507669",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:69'>**Comment 69:**</a>
Replying to [@JohnCremona](#comment%3A64):
> about eclib's 3 dependencies:  

Thanks for sharing this information. At the moment, and also for the Sage 9.4 release cycle (#29705), all of these three libraries are essential standard components of Sage; so from the viewpoint of Sage there is no immediate need to worry about making any of these dependencies optional.



---

archive/issue_comments_507670.json:
```json
{
    "body": "<a id='comment:70'>**Comment 70:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d9e70a118b4cce4d2b526129a880ca7f4822485\">5d9e70a</a></td><td><code>#31443: updated upstream tarball URL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b64fed5ba394314edc1e0200bb6e194a5fa00f2\">8b64fed</a></td><td><code>Merge remote-tracking branch 'trac/public/packages/eclib/31443' into 31443-eclib-saturation</code></td></tr></table>\n",
    "created_at": "2021-03-22T08:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507670",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:70'>**Comment 70:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d9e70a118b4cce4d2b526129a880ca7f4822485">5d9e70a</a></td><td><code>#31443: updated upstream tarball URL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b64fed5ba394314edc1e0200bb6e194a5fa00f2">8b64fed</a></td><td><code>Merge remote-tracking branch 'trac/public/packages/eclib/31443' into 31443-eclib-saturation</code></td></tr></table>




---

archive/issue_comments_507671.json:
```json
{
    "body": "**Changing commit** from \"[926670fc33cc68d86bf002db4acb45c63f4df9ef](https://github.com/sagemath/sagetrac-mirror/commit/926670fc33cc68d86bf002db4acb45c63f4df9ef)\" to \"[8b64fed5ba394314edc1e0200bb6e194a5fa00f2](https://github.com/sagemath/sagetrac-mirror/commit/8b64fed5ba394314edc1e0200bb6e194a5fa00f2)\".",
    "created_at": "2021-03-22T08:44:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507671",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[926670fc33cc68d86bf002db4acb45c63f4df9ef](https://github.com/sagemath/sagetrac-mirror/commit/926670fc33cc68d86bf002db4acb45c63f4df9ef)" to "[8b64fed5ba394314edc1e0200bb6e194a5fa00f2](https://github.com/sagemath/sagetrac-mirror/commit/8b64fed5ba394314edc1e0200bb6e194a5fa00f2)".



---

archive/issue_comments_507672.json:
```json
{
    "body": "<a id='comment:71'>**Comment 71:**</a>\nI put the proper release tarball onto github and updated both the link on this ticket and the last line of checksums.ini.  The latter now reads\n\n```\nupstream_url=https://github.com/JohnCremona/eclib/releases/download/VERSION/eclib-VERSION.tar.bz2\n```\nwith \"VERSION\" twice since the version string \"20210318\" appears twice in the URL.  I hope that Sage can handle that.",
    "created_at": "2021-03-22T08:47:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507672",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:71'>**Comment 71:**</a>
I put the proper release tarball onto github and updated both the link on this ticket and the last line of checksums.ini.  The latter now reads

```
upstream_url=https://github.com/JohnCremona/eclib/releases/download/VERSION/eclib-VERSION.tar.bz2
```
with "VERSION" twice since the version string "20210318" appears twice in the URL.  I hope that Sage can handle that.



---

archive/issue_comments_507673.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,5 @@\n \n Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).\n \n-New eclib source tarball at [https://johncremona.github.io/ftp/eclib-20210318.tar.bz2](https://johncremona.github.io/ftp/eclib-20210318.tar.bz2)\n+New eclib source tarball at \n+[https://github.com/JohnCremona/eclib/releases/download/20210318/eclib-20210318.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210318/eclib-20210318.tar.bz2)\n``````\n",
    "created_at": "2021-03-22T08:47:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507673",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,5 @@
 
 Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).
 
-New eclib source tarball at [https://johncremona.github.io/ftp/eclib-20210318.tar.bz2](https://johncremona.github.io/ftp/eclib-20210318.tar.bz2)
+New eclib source tarball at 
+[https://github.com/JohnCremona/eclib/releases/download/20210318/eclib-20210318.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210318/eclib-20210318.tar.bz2)
``````




---

archive/issue_comments_507674.json:
```json
{
    "body": "<a id='comment:72'>**Comment 72:**</a>\nReplying to [@mkoeppe](#comment%3A69):\n> Replying to [@JohnCremona](#comment%3A64):\n> > about eclib's 3 dependencies:  \n\n> \n> Thanks for sharing this information. At the moment, and also for the Sage 9.4 release cycle (#29705), all of these three libraries are essential standard components of Sage; so from the viewpoint of Sage there is no immediate need to worry about making any of these dependencies optional. \n\nI realize that Sage itself will carry on using FLINT, but it would help me not to have to build it on machines I use, and also it would make it slightly more likely that someone building Sage would not need to build eclib.\n\nFor the record, I now have a branch which uses an NTL function instead of eclib's own for reduction of dense matrices modulo a small (int or long) prime p when FLINT_LEVEL=0 -- i.e. for when FLINT is not available, or configure has been given --without-flint.   Testing shows that this is reasonable -- much better than using eclib's own naive function -- though slower than using FLINT.  So it will be there in some future release, which might make without-flint the default, but there is no urgency.",
    "created_at": "2021-03-22T08:49:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507674",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:72'>**Comment 72:**</a>
Replying to [@mkoeppe](#comment%3A69):
> Replying to [@JohnCremona](#comment%3A64):
> > about eclib's 3 dependencies:  

> 
> Thanks for sharing this information. At the moment, and also for the Sage 9.4 release cycle (#29705), all of these three libraries are essential standard components of Sage; so from the viewpoint of Sage there is no immediate need to worry about making any of these dependencies optional. 

I realize that Sage itself will carry on using FLINT, but it would help me not to have to build it on machines I use, and also it would make it slightly more likely that someone building Sage would not need to build eclib.

For the record, I now have a branch which uses an NTL function instead of eclib's own for reduction of dense matrices modulo a small (int or long) prime p when FLINT_LEVEL=0 -- i.e. for when FLINT is not available, or configure has been given --without-flint.   Testing shows that this is reasonable -- much better than using eclib's own naive function -- though slower than using FLINT.  So it will be there in some future release, which might make without-flint the default, but there is no urgency.



---

archive/issue_comments_507675.json:
```json
{
    "body": "**Changing reviewer** from \"Dima Pasechnik\" to \"Dima Pasechnik, https://github.com/mkoeppe/sage/actions/runs/680630789\".",
    "created_at": "2021-03-23T18:46:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507675",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "Dima Pasechnik" to "Dima Pasechnik, https://github.com/mkoeppe/sage/actions/runs/680630789".



---

archive/issue_comments_507676.json:
```json
{
    "body": "**Changing reviewer** from \"Dima Pasechnik, https://github.com/mkoeppe/sage/actions/runs/680630789\" to \"Dima Pasechnik, Matthias Koeppe\".",
    "created_at": "2021-03-24T16:05:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507676",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "Dima Pasechnik, https://github.com/mkoeppe/sage/actions/runs/680630789" to "Dima Pasechnik, Matthias Koeppe".



---

archive/issue_events_381343.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T16:05:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381343"
}
```



---

archive/issue_events_381344.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T16:05:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381344"
}
```



---

archive/issue_comments_507677.json:
```json
{
    "body": "<a id='comment:74'>**Comment 74:**</a>\nThe tests at https://github.com/mkoeppe/sage/actions/runs/680630789 have run successfully. LGTM.",
    "created_at": "2021-03-24T16:05:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507677",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:74'>**Comment 74:**</a>
The tests at https://github.com/mkoeppe/sage/actions/runs/680630789 have run successfully. LGTM.



---

archive/issue_comments_507678.json:
```json
{
    "body": "<a id='comment:75'>**Comment 75:**</a>\nThanks to all for the reviewing and other help.",
    "created_at": "2021-03-24T16:22:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507678",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:75'>**Comment 75:**</a>
Thanks to all for the reviewing and other help.



---

archive/issue_comments_507679.json:
```json
{
    "body": "<a id='comment:76'>**Comment 76:**</a>\nI found a bug in some eclib code which has the effect of making the \"saturation index bound\" much larger than necessary.  In the example I mentioned above (Comment 3) the bound is no longer ~86000 but ony ~11800, taking the time to saturate that example down from 15 minutes (which was many hours before I started) to under a minute.\n\nWhat this means is that is that there will be yet another eclib release soon (I am hoping for tomorrow), so I am quite relaxed about whether this version gets into 9.3, despite having a positive review a week ago.\n\nBy the way, the bug was found while comparing results with Bill Allombert (pari developer) who is implementing the same stuff in pari/gp.  By the time he has finished and newer versions of pari are in Sage, Sage will hardly need eclib at all...hooray!",
    "created_at": "2021-03-31T14:05:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507679",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:76'>**Comment 76:**</a>
I found a bug in some eclib code which has the effect of making the "saturation index bound" much larger than necessary.  In the example I mentioned above (Comment 3) the bound is no longer ~86000 but ony ~11800, taking the time to saturate that example down from 15 minutes (which was many hours before I started) to under a minute.

What this means is that is that there will be yet another eclib release soon (I am hoping for tomorrow), so I am quite relaxed about whether this version gets into 9.3, despite having a positive review a week ago.

By the way, the bug was found while comparing results with Bill Allombert (pari developer) who is implementing the same stuff in pari/gp.  By the time he has finished and newer versions of pari are in Sage, Sage will hardly need eclib at all...hooray!



---

archive/issue_comments_507680.json:
```json
{
    "body": "<a id='comment:77'>**Comment 77:**</a>\nMoving this ticket to 9.4, as it seems unlikely that it will be merged in 9.3, which is in the release candidate stage",
    "created_at": "2021-04-02T20:21:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507680",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:77'>**Comment 77:**</a>
Moving this ticket to 9.4, as it seems unlikely that it will be merged in 9.3, which is in the release candidate stage



---

archive/issue_events_381345.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-02T20:21:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381345"
}
```



---

archive/issue_events_381346.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-02T20:21:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381346"
}
```



---

archive/issue_comments_507681.json:
```json
{
    "body": "<a id='comment:78'>**Comment 78:**</a>\nI am about to update this with eclib version 20210408.",
    "created_at": "2021-04-09T08:02:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507681",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:78'>**Comment 78:**</a>
I am about to update this with eclib version 20210408.



---

archive/issue_comments_507682.json:
```json
{
    "body": "<a id='comment:79'>**Comment 79:**</a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17e91cae43bdd50b29fa4128c91097167c64e038\">17e91ca</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 31443-eclib-saturation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f18fa6301c06a460cbae692d0f90eb332f3ef196\">f18fa63</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 31443-eclib-saturation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f564931ed03e8a1d93dab328f256f30353ded1f6\">f564931</a></td><td><code>updated eclib package version to 20210408 and checksums</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07c5a20f8cfe7323fc5afb4c9a7a77472ac4d0b8\">07c5a20</a></td><td><code>correct a docstring after eclib upgrade</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c4c115055b81b47860da66dbe0b0dde7bb55069\">8c4c115</a></td><td><code>Merge branch 'public/packages/eclib/31443' of trac.sagemath.org:sage into 31443-eclib-saturation</code></td></tr></table>\n",
    "created_at": "2021-04-09T09:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507682",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:79'>**Comment 79:**</a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17e91cae43bdd50b29fa4128c91097167c64e038">17e91ca</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 31443-eclib-saturation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f18fa6301c06a460cbae692d0f90eb332f3ef196">f18fa63</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 31443-eclib-saturation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f564931ed03e8a1d93dab328f256f30353ded1f6">f564931</a></td><td><code>updated eclib package version to 20210408 and checksums</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07c5a20f8cfe7323fc5afb4c9a7a77472ac4d0b8">07c5a20</a></td><td><code>correct a docstring after eclib upgrade</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c4c115055b81b47860da66dbe0b0dde7bb55069">8c4c115</a></td><td><code>Merge branch 'public/packages/eclib/31443' of trac.sagemath.org:sage into 31443-eclib-saturation</code></td></tr></table>




---

archive/issue_comments_507683.json:
```json
{
    "body": "**Changing commit** from \"[8b64fed5ba394314edc1e0200bb6e194a5fa00f2](https://github.com/sagemath/sagetrac-mirror/commit/8b64fed5ba394314edc1e0200bb6e194a5fa00f2)\" to \"[8c4c115055b81b47860da66dbe0b0dde7bb55069](https://github.com/sagemath/sagetrac-mirror/commit/8c4c115055b81b47860da66dbe0b0dde7bb55069)\".",
    "created_at": "2021-04-09T09:49:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507683",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[8b64fed5ba394314edc1e0200bb6e194a5fa00f2](https://github.com/sagemath/sagetrac-mirror/commit/8b64fed5ba394314edc1e0200bb6e194a5fa00f2)" to "[8c4c115055b81b47860da66dbe0b0dde7bb55069](https://github.com/sagemath/sagetrac-mirror/commit/8c4c115055b81b47860da66dbe0b0dde7bb55069)".



---

archive/issue_events_381347.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2021-04-09T09:49:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381347"
}
```



---

archive/issue_events_381348.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2021-04-09T09:49:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381348"
}
```



---

archive/issue_comments_507684.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,4 +5,4 @@\n Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).\n \n New eclib source tarball at \n-[https://github.com/JohnCremona/eclib/releases/download/20210318/eclib-20210318.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210318/eclib-20210318.tar.bz2)\n+[https://github.com/JohnCremona/eclib/releases/download/20210408/eclib-20210318.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210408/eclib-20210318.tar.bz2)\n``````\n",
    "created_at": "2021-04-09T09:52:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507684",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,4 +5,4 @@
 Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).
 
 New eclib source tarball at 
-[https://github.com/JohnCremona/eclib/releases/download/20210318/eclib-20210318.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210318/eclib-20210318.tar.bz2)
+[https://github.com/JohnCremona/eclib/releases/download/20210408/eclib-20210318.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210408/eclib-20210318.tar.bz2)
``````




---

archive/issue_comments_507685.json:
```json
{
    "body": "<a id='comment:80'>**Comment 80:**</a>\nUpdated tarball to eclib-20210408.  This has a bugfix but is otherwise compatible with the previous version.  The onlt Sage files changed are the package version and checksums, and one docstring (which used to say that one example took 45 minutes, but now it only takes 40 seconds.  In Sage-9.3 it will take many hours)",
    "created_at": "2021-04-09T09:52:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507685",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:80'>**Comment 80:**</a>
Updated tarball to eclib-20210408.  This has a bugfix but is otherwise compatible with the previous version.  The onlt Sage files changed are the package version and checksums, and one docstring (which used to say that one example took 45 minutes, but now it only takes 40 seconds.  In Sage-9.3 it will take many hours)



---

archive/issue_comments_507686.json:
```json
{
    "body": "<a id='comment:81'>**Comment 81:**</a>\nThe version check in `build/pkgs/eclib/spkg-configure.m4` needs to be updated to match the new version string.\n\nI also spotted a typo \"casue\" in `sage/libs/eclib/interface.py`.",
    "created_at": "2021-04-09T11:13:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507686",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:81'>**Comment 81:**</a>
The version check in `build/pkgs/eclib/spkg-configure.m4` needs to be updated to match the new version string.

I also spotted a typo "casue" in `sage/libs/eclib/interface.py`.



---

archive/issue_comments_507687.json:
```json
{
    "body": "<a id='comment:82'>**Comment 82:**</a>\nReplying to [@orlitzky](#comment%3A81):\n> The version check in `build/pkgs/eclib/spkg-configure.m4` needs to be updated to match the new version string.\n> \n> I also spotted a typo \"casue\" in `sage/libs/eclib/interface.py`.\n\nThanks, I will fix both right away.",
    "created_at": "2021-04-09T11:21:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507687",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:82'>**Comment 82:**</a>
Replying to [@orlitzky](#comment%3A81):
> The version check in `build/pkgs/eclib/spkg-configure.m4` needs to be updated to match the new version string.
> 
> I also spotted a typo "casue" in `sage/libs/eclib/interface.py`.

Thanks, I will fix both right away.



---

archive/issue_comments_507688.json:
```json
{
    "body": "<a id='comment:83'>**Comment 83:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b1dedb02560d1b3fce444e5f88ac14f42786ce9\">9b1dedb</a></td><td><code>correct typo and update eclib's m4 script</code></td></tr></table>\n",
    "created_at": "2021-04-09T11:23:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507688",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:83'>**Comment 83:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b1dedb02560d1b3fce444e5f88ac14f42786ce9">9b1dedb</a></td><td><code>correct typo and update eclib's m4 script</code></td></tr></table>




---

archive/issue_comments_507689.json:
```json
{
    "body": "**Changing commit** from \"[8c4c115055b81b47860da66dbe0b0dde7bb55069](https://github.com/sagemath/sagetrac-mirror/commit/8c4c115055b81b47860da66dbe0b0dde7bb55069)\" to \"[9b1dedb02560d1b3fce444e5f88ac14f42786ce9](https://github.com/sagemath/sagetrac-mirror/commit/9b1dedb02560d1b3fce444e5f88ac14f42786ce9)\".",
    "created_at": "2021-04-09T11:23:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507689",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[8c4c115055b81b47860da66dbe0b0dde7bb55069](https://github.com/sagemath/sagetrac-mirror/commit/8c4c115055b81b47860da66dbe0b0dde7bb55069)" to "[9b1dedb02560d1b3fce444e5f88ac14f42786ce9](https://github.com/sagemath/sagetrac-mirror/commit/9b1dedb02560d1b3fce444e5f88ac14f42786ce9)".



---

archive/issue_comments_507690.json:
```json
{
    "body": "<a id='comment:84'>**Comment 84:**</a>\nUpdated tarball to 20210415, version + checksums + m4 script.  Some bugfixes compared with version 20210408.  No more Sage code changes needed.",
    "created_at": "2021-04-15T13:31:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507690",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:84'>**Comment 84:**</a>
Updated tarball to 20210415, version + checksums + m4 script.  Some bugfixes compared with version 20210408.  No more Sage code changes needed.



---

archive/issue_comments_507691.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,5 +4,4 @@\n \n Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).\n \n-New eclib source tarball at \n-[https://github.com/JohnCremona/eclib/releases/download/20210408/eclib-20210318.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210408/eclib-20210318.tar.bz2)\n+New eclib source tarball at [https://github.com/JohnCremona/eclib/releases/download/20210415/eclib-20210415.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210415/eclib-20210415.tar.bz2)\n``````\n",
    "created_at": "2021-04-15T13:31:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507691",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,5 +4,4 @@
 
 Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).
 
-New eclib source tarball at 
-[https://github.com/JohnCremona/eclib/releases/download/20210408/eclib-20210318.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210408/eclib-20210318.tar.bz2)
+New eclib source tarball at [https://github.com/JohnCremona/eclib/releases/download/20210415/eclib-20210415.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210415/eclib-20210415.tar.bz2)
``````




---

archive/issue_comments_507692.json:
```json
{
    "body": "<a id='comment:85'>**Comment 85:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/53a03054b050dcb5b7c11ea972be272d8cd56618\">53a0305</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 31443-eclib-saturation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3dca4e6c927053770c5e938f5a59be9047602cde\">3dca4e6</a></td><td><code>#31443: undated pkg info for 20210415</code></td></tr></table>\n",
    "created_at": "2021-04-15T14:21:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507692",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:85'>**Comment 85:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/53a03054b050dcb5b7c11ea972be272d8cd56618">53a0305</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 31443-eclib-saturation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3dca4e6c927053770c5e938f5a59be9047602cde">3dca4e6</a></td><td><code>#31443: undated pkg info for 20210415</code></td></tr></table>




---

archive/issue_comments_507693.json:
```json
{
    "body": "**Changing commit** from \"[9b1dedb02560d1b3fce444e5f88ac14f42786ce9](https://github.com/sagemath/sagetrac-mirror/commit/9b1dedb02560d1b3fce444e5f88ac14f42786ce9)\" to \"[3dca4e6c927053770c5e938f5a59be9047602cde](https://github.com/sagemath/sagetrac-mirror/commit/3dca4e6c927053770c5e938f5a59be9047602cde)\".",
    "created_at": "2021-04-15T14:21:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507693",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[9b1dedb02560d1b3fce444e5f88ac14f42786ce9](https://github.com/sagemath/sagetrac-mirror/commit/9b1dedb02560d1b3fce444e5f88ac14f42786ce9)" to "[3dca4e6c927053770c5e938f5a59be9047602cde](https://github.com/sagemath/sagetrac-mirror/commit/3dca4e6c927053770c5e938f5a59be9047602cde)".



---

archive/issue_comments_507694.json:
```json
{
    "body": "<a id='comment:86'>**Comment 86:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ed01dcf3e9c5a3b400395f98dee36e6c2a45a19\">0ed01dc</a></td><td><code>Merge branch 'develop' into 31443-eclib-saturation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9443892b2e86d4edf4f040fa7b1736583ab4c29a\">9443892</a></td><td><code>#31443: updated eclib tarball to 20210503</code></td></tr></table>\n",
    "created_at": "2021-05-05T08:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507694",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:86'>**Comment 86:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ed01dcf3e9c5a3b400395f98dee36e6c2a45a19">0ed01dc</a></td><td><code>Merge branch 'develop' into 31443-eclib-saturation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9443892b2e86d4edf4f040fa7b1736583ab4c29a">9443892</a></td><td><code>#31443: updated eclib tarball to 20210503</code></td></tr></table>




---

archive/issue_comments_507695.json:
```json
{
    "body": "**Changing commit** from \"[3dca4e6c927053770c5e938f5a59be9047602cde](https://github.com/sagemath/sagetrac-mirror/commit/3dca4e6c927053770c5e938f5a59be9047602cde)\" to \"[9443892b2e86d4edf4f040fa7b1736583ab4c29a](https://github.com/sagemath/sagetrac-mirror/commit/9443892b2e86d4edf4f040fa7b1736583ab4c29a)\".",
    "created_at": "2021-05-05T08:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507695",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[3dca4e6c927053770c5e938f5a59be9047602cde](https://github.com/sagemath/sagetrac-mirror/commit/3dca4e6c927053770c5e938f5a59be9047602cde)" to "[9443892b2e86d4edf4f040fa7b1736583ab4c29a](https://github.com/sagemath/sagetrac-mirror/commit/9443892b2e86d4edf4f040fa7b1736583ab4c29a)".



---

archive/issue_comments_507696.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).\n \n-New eclib source tarball at [https://github.com/JohnCremona/eclib/releases/download/20210415/eclib-20210415.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210415/eclib-20210415.tar.bz2)\n+New eclib source tarball at [https://github.com/JohnCremona/eclib/releases/download/20210503/eclib-20210503.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210503/eclib-20210503.tar.bz2)\n``````\n",
    "created_at": "2021-05-05T08:03:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507696",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).
 
-New eclib source tarball at [https://github.com/JohnCremona/eclib/releases/download/20210415/eclib-20210415.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210415/eclib-20210415.tar.bz2)
+New eclib source tarball at [https://github.com/JohnCremona/eclib/releases/download/20210503/eclib-20210503.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210503/eclib-20210503.tar.bz2)
``````




---

archive/issue_comments_507697.json:
```json
{
    "body": "<a id='comment:87'>**Comment 87:**</a>\nI am taking the opportunity of the delay to make a small additional update to the eclib tarball (release 20210503), with a minor bugfix.  This version also keep debian happy on all its test platforms.  No further Sage code changes outside build/pks/eclib.",
    "created_at": "2021-05-05T08:03:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507697",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:87'>**Comment 87:**</a>
I am taking the opportunity of the delay to make a small additional update to the eclib tarball (release 20210503), with a minor bugfix.  This version also keep debian happy on all its test platforms.  No further Sage code changes outside build/pks/eclib.



---

archive/issue_comments_507698.json:
```json
{
    "body": "<a id='comment:88'>**Comment 88:**</a>\nIs this tested with #30801 (upgrade to Pari 2.13.1) ?",
    "created_at": "2021-05-12T22:29:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507698",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:88'>**Comment 88:**</a>
Is this tested with #30801 (upgrade to Pari 2.13.1) ?



---

archive/issue_comments_507699.json:
```json
{
    "body": "<a id='comment:89'>**Comment 89:**</a>\nReplying to [@dimpase](#comment%3A88):\n> Is this tested with #30801 (upgrade to Pari 2.13.1) ?\n\nI've been shipping both downstream for a while without issues",
    "created_at": "2021-05-13T05:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507699",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:89'>**Comment 89:**</a>
Replying to [@dimpase](#comment%3A88):
> Is this tested with #30801 (upgrade to Pari 2.13.1) ?

I've been shipping both downstream for a while without issues



---

archive/issue_comments_507700.json:
```json
{
    "body": "<a id='comment:90'>**Comment 90:**</a>\nReplying to [@antonio-rojas](#comment%3A89):\n> Replying to [@dimpase](#comment%3A88):\n> > Is this tested with #30801 (upgrade to Pari 2.13.1) ?\n\n> \n> I've been shipping both downstream for a while without issues\n\nI have been using recent pari version for eclib development, though eclib does not use very much of pari and nothing at all new.",
    "created_at": "2021-05-13T15:58:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507700",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:90'>**Comment 90:**</a>
Replying to [@antonio-rojas](#comment%3A89):
> Replying to [@dimpase](#comment%3A88):
> > Is this tested with #30801 (upgrade to Pari 2.13.1) ?

> 
> I've been shipping both downstream for a while without issues

I have been using recent pari version for eclib development, though eclib does not use very much of pari and nothing at all new.



---

archive/issue_comments_507701.json:
```json
{
    "body": "<a id='comment:91'>**Comment 91:**</a>\nOK, fine.",
    "created_at": "2021-05-13T23:02:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507701",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:91'>**Comment 91:**</a>
OK, fine.



---

archive/issue_events_381349.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-05-13T23:02:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381349"
}
```



---

archive/issue_events_381350.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-05-13T23:02:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381350"
}
```



---

archive/issue_comments_507702.json:
```json
{
    "body": "<a id='comment:92'>**Comment 92:**</a>\nIs there a reason why this was not included in 9.4.beta0?",
    "created_at": "2021-05-27T09:09:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507702",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:92'>**Comment 92:**</a>
Is there a reason why this was not included in 9.4.beta0?



---

archive/issue_comments_507703.json:
```json
{
    "body": "<a id='comment:93'>**Comment 93:**</a>\nI'm pretty sure it's simply a matter of backlog\nas many tickets have had positive review for a while.",
    "created_at": "2021-05-27T10:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507703",
    "user": "https://github.com/slel"
}
```

<a id='comment:93'>**Comment 93:**</a>
I'm pretty sure it's simply a matter of backlog
as many tickets have had positive review for a while.



---

archive/issue_comments_507704.json:
```json
{
    "body": "<a id='comment:94'>**Comment 94:**</a>\nPDF docs don't build\n\n```\n[docpdf] ! Undefined control sequence.\n[docpdf] l.19194 ...q\\) of good reduction such that \\(E(\\FF\n[docpdf]                                                   _q)\\) has\n[docpdf] ? \n[docpdf] ! Emergency stop.\n```",
    "created_at": "2021-05-30T09:16:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507704",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:94'>**Comment 94:**</a>
PDF docs don't build

```
[docpdf] ! Undefined control sequence.
[docpdf] l.19194 ...q\) of good reduction such that \(E(\FF
[docpdf]                                                   _q)\) has
[docpdf] ? 
[docpdf] ! Emergency stop.
```



---

archive/issue_events_381351.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-30T09:16:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381351"
}
```



---

archive/issue_events_381352.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-30T09:16:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381352"
}
```



---

archive/issue_comments_507705.json:
```json
{
    "body": "<a id='comment:95'>**Comment 95:**</a>\nChange `\\FF_q` to `\\GF{q}`:\n\n```diff\n-        modulo primes `q` of good reduction such that `E(\\FF_q)` has\n+        modulo primes `q` of good reduction such that `E(\\GF{q})` has\n```",
    "created_at": "2021-05-30T13:44:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507705",
    "user": "https://github.com/slel"
}
```

<a id='comment:95'>**Comment 95:**</a>
Change `\FF_q` to `\GF{q}`:

```diff
-        modulo primes `q` of good reduction such that `E(\FF_q)` has
+        modulo primes `q` of good reduction such that `E(\GF{q})` has
```



---

archive/issue_comments_507706.json:
```json
{
    "body": "**Changing commit** from \"[9443892b2e86d4edf4f040fa7b1736583ab4c29a](https://github.com/sagemath/sagetrac-mirror/commit/9443892b2e86d4edf4f040fa7b1736583ab4c29a)\" to \"[b50d9c6047c1ad5167af7db8a8127f72ab18a853](https://github.com/sagemath/sagetrac-mirror/commit/b50d9c6047c1ad5167af7db8a8127f72ab18a853)\".",
    "created_at": "2021-05-31T06:53:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507706",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[9443892b2e86d4edf4f040fa7b1736583ab4c29a](https://github.com/sagemath/sagetrac-mirror/commit/9443892b2e86d4edf4f040fa7b1736583ab4c29a)" to "[b50d9c6047c1ad5167af7db8a8127f72ab18a853](https://github.com/sagemath/sagetrac-mirror/commit/b50d9c6047c1ad5167af7db8a8127f72ab18a853)".



---

archive/issue_comments_507707.json:
```json
{
    "body": "<a id='comment:96'>**Comment 96:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d193588ff7e20f3a1bf01b62254fe613281445a9\">d193588</a></td><td><code>Merge tag '9.3' of github.com:sagemath/sage into public/packages/eclib/31443</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b50d9c6047c1ad5167af7db8a8127f72ab18a853\">b50d9c6</a></td><td><code>Fix doc building</code></td></tr></table>\n",
    "created_at": "2021-05-31T06:53:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507707",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:96'>**Comment 96:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d193588ff7e20f3a1bf01b62254fe613281445a9">d193588</a></td><td><code>Merge tag '9.3' of github.com:sagemath/sage into public/packages/eclib/31443</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b50d9c6047c1ad5167af7db8a8127f72ab18a853">b50d9c6</a></td><td><code>Fix doc building</code></td></tr></table>




---

archive/issue_comments_507708.json:
```json
{
    "body": "<a id='comment:97'>**Comment 97:**</a>\nReplying to [@slel](#comment%3A95):\n> Change `\\FF_q` to `\\GF{q}`:\n> \n> ```diff\n> -        modulo primes `q` of good reduction such that `E(\\FF_q)` has\n> +        modulo primes `q` of good reduction such that `E(\\GF{q})` has\n> ```\n\nThanks for fixing this.",
    "created_at": "2021-06-01T07:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507708",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:97'>**Comment 97:**</a>
Replying to [@slel](#comment%3A95):
> Change `\FF_q` to `\GF{q}`:
> 
> ```diff
> -        modulo primes `q` of good reduction such that `E(\FF_q)` has
> +        modulo primes `q` of good reduction such that `E(\GF{q})` has
> ```

Thanks for fixing this.



---

archive/issue_events_381353.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-06-01T08:52:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381353"
}
```



---

archive/issue_events_381354.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-06-01T08:52:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381354"
}
```



---

archive/issue_comments_507709.json:
```json
{
    "body": "<a id='comment:98'>**Comment 98:**</a>\nThanks Isuru for sending a commit implementing the suggested doc fix.\n\nBack to needs review I guess. Or should it be rebased on 9.4.beta0?",
    "created_at": "2021-06-01T08:52:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507709",
    "user": "https://github.com/slel"
}
```

<a id='comment:98'>**Comment 98:**</a>
Thanks Isuru for sending a commit implementing the suggested doc fix.

Back to needs review I guess. Or should it be rebased on 9.4.beta0?



---

archive/issue_events_381355.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-06-02T08:53:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381355"
}
```



---

archive/issue_events_381356.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-06-02T08:53:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381356"
}
```



---

archive/issue_comments_507710.json:
```json
{
    "body": "<a id='comment:99'>**Comment 99:**</a>\nlgtm",
    "created_at": "2021-06-02T08:53:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507710",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:99'>**Comment 99:**</a>
lgtm



---

archive/issue_events_381357.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-20T08:14:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381357"
}
```



---

archive/issue_events_381358.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-20T08:14:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381358"
}
```



---

archive/issue_comments_507711.json:
```json
{
    "body": "**Changing branch** from \"[public/packages/eclib/31443](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/eclib/31443)\" to \"[b50d9c6047c1ad5167af7db8a8127f72ab18a853](https://github.com/sagemath/sagetrac-mirror/commit/b50d9c6047c1ad5167af7db8a8127f72ab18a853)\".",
    "created_at": "2021-06-20T08:14:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507711",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/packages/eclib/31443](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/eclib/31443)" to "[b50d9c6047c1ad5167af7db8a8127f72ab18a853](https://github.com/sagemath/sagetrac-mirror/commit/b50d9c6047c1ad5167af7db8a8127f72ab18a853)".



---

archive/issue_comments_507712.json:
```json
{
    "body": "**Changing commit** from \"[b50d9c6047c1ad5167af7db8a8127f72ab18a853](https://github.com/sagemath/sagetrac-mirror/commit/b50d9c6047c1ad5167af7db8a8127f72ab18a853)\" to \"\".",
    "created_at": "2021-06-20T13:34:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507712",
    "user": "https://github.com/vbraun"
}
```

**Changing commit** from "[b50d9c6047c1ad5167af7db8a8127f72ab18a853](https://github.com/sagemath/sagetrac-mirror/commit/b50d9c6047c1ad5167af7db8a8127f72ab18a853)" to "".



---

archive/issue_comments_507713.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\nOn 32-bit:\n\n```\n**********************************************************************\nFile \"src/sage/libs/eclib/interface.py\", line 555, in sage.libs.eclib.interface.mwrank_EllipticCurve.saturate\nFailed example:\n    E.gens()\nExpected:\n    [[-1001107, -4004428, 1]]\nGot:\n    Attempt to convert -2004462486322 to long fails!\n    [[-1001107, -4004428, 1]]\n**********************************************************************\n1 item had failures:\n   1 of   9 in sage.libs.eclib.interface.mwrank_EllipticCurve.saturate\n    [192 tests, 1 failure, 18.73 s]\n----------------------------------------------------------------------\nsage -t --long --random-seed=0 src/sage/libs/eclib/interface.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2021-06-20T13:34:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507713",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:1'>**Comment 1:**</a>
On 32-bit:

```
**********************************************************************
File "src/sage/libs/eclib/interface.py", line 555, in sage.libs.eclib.interface.mwrank_EllipticCurve.saturate
Failed example:
    E.gens()
Expected:
    [[-1001107, -4004428, 1]]
Got:
    Attempt to convert -2004462486322 to long fails!
    [[-1001107, -4004428, 1]]
**********************************************************************
1 item had failures:
   1 of   9 in sage.libs.eclib.interface.mwrank_EllipticCurve.saturate
    [192 tests, 1 failure, 18.73 s]
----------------------------------------------------------------------
sage -t --long --random-seed=0 src/sage/libs/eclib/interface.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_507714.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/926670fc33cc68d86bf002db4acb45c63f4df9ef\">926670f</a></td><td><code>Merge remote-tracking branch 'jc/31443-eclib-saturation' into public/packages/eclib/31443</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b64fed5ba394314edc1e0200bb6e194a5fa00f2\">8b64fed</a></td><td><code>Merge remote-tracking branch 'trac/public/packages/eclib/31443' into 31443-eclib-saturation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c4c115055b81b47860da66dbe0b0dde7bb55069\">8c4c115</a></td><td><code>Merge branch 'public/packages/eclib/31443' of trac.sagemath.org:sage into 31443-eclib-saturation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b1dedb02560d1b3fce444e5f88ac14f42786ce9\">9b1dedb</a></td><td><code>correct typo and update eclib's m4 script</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/53a03054b050dcb5b7c11ea972be272d8cd56618\">53a0305</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 31443-eclib-saturation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3dca4e6c927053770c5e938f5a59be9047602cde\">3dca4e6</a></td><td><code>#31443: undated pkg info for 20210415</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ed01dcf3e9c5a3b400395f98dee36e6c2a45a19\">0ed01dc</a></td><td><code>Merge branch 'develop' into 31443-eclib-saturation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9443892b2e86d4edf4f040fa7b1736583ab4c29a\">9443892</a></td><td><code>#31443: updated eclib tarball to 20210503</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d193588ff7e20f3a1bf01b62254fe613281445a9\">d193588</a></td><td><code>Merge tag '9.3' of github.com:sagemath/sage into public/packages/eclib/31443</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b50d9c6047c1ad5167af7db8a8127f72ab18a853\">b50d9c6</a></td><td><code>Fix doc building</code></td></tr></table>\n",
    "created_at": "2021-06-20T13:34:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507714",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'>**Comment 2:**</a>
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/926670fc33cc68d86bf002db4acb45c63f4df9ef">926670f</a></td><td><code>Merge remote-tracking branch 'jc/31443-eclib-saturation' into public/packages/eclib/31443</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b64fed5ba394314edc1e0200bb6e194a5fa00f2">8b64fed</a></td><td><code>Merge remote-tracking branch 'trac/public/packages/eclib/31443' into 31443-eclib-saturation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c4c115055b81b47860da66dbe0b0dde7bb55069">8c4c115</a></td><td><code>Merge branch 'public/packages/eclib/31443' of trac.sagemath.org:sage into 31443-eclib-saturation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b1dedb02560d1b3fce444e5f88ac14f42786ce9">9b1dedb</a></td><td><code>correct typo and update eclib's m4 script</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/53a03054b050dcb5b7c11ea972be272d8cd56618">53a0305</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 31443-eclib-saturation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3dca4e6c927053770c5e938f5a59be9047602cde">3dca4e6</a></td><td><code>#31443: undated pkg info for 20210415</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ed01dcf3e9c5a3b400395f98dee36e6c2a45a19">0ed01dc</a></td><td><code>Merge branch 'develop' into 31443-eclib-saturation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9443892b2e86d4edf4f040fa7b1736583ab4c29a">9443892</a></td><td><code>#31443: updated eclib tarball to 20210503</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d193588ff7e20f3a1bf01b62254fe613281445a9">d193588</a></td><td><code>Merge tag '9.3' of github.com:sagemath/sage into public/packages/eclib/31443</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b50d9c6047c1ad5167af7db8a8127f72ab18a853">b50d9c6</a></td><td><code>Fix doc building</code></td></tr></table>




---

archive/issue_comments_507715.json:
```json
{
    "body": "**Commit:** [b50d9c6047c1ad5167af7db8a8127f72ab18a853](https://github.com/sagemath/sagetrac-mirror/commit/b50d9c6047c1ad5167af7db8a8127f72ab18a853)",
    "created_at": "2021-06-20T13:34:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507715",
    "user": "https://github.com/vbraun"
}
```

**Commit:** [b50d9c6047c1ad5167af7db8a8127f72ab18a853](https://github.com/sagemath/sagetrac-mirror/commit/b50d9c6047c1ad5167af7db8a8127f72ab18a853)



---

archive/issue_comments_507716.json:
```json
{
    "body": "**Changing branch** from \"[b50d9c6047c1ad5167af7db8a8127f72ab18a853](https://github.com/sagemath/sagetrac-mirror/commit/b50d9c6047c1ad5167af7db8a8127f72ab18a853)\" to \"[public/packages/eclib/31443](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/eclib/31443)\".",
    "created_at": "2021-06-20T13:34:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507716",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[b50d9c6047c1ad5167af7db8a8127f72ab18a853](https://github.com/sagemath/sagetrac-mirror/commit/b50d9c6047c1ad5167af7db8a8127f72ab18a853)" to "[public/packages/eclib/31443](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/eclib/31443)".



---

archive/issue_comments_507717.json:
```json
{
    "body": "<a id='comment:103'>**Comment 103:**</a>\nReplying to [@vbraun](#comment%3A101):\n> On 32-bit:\n> \n> ```\n> **********************************************************************\n> File \"src/sage/libs/eclib/interface.py\", line 555, in sage.libs.eclib.interface.mwrank_EllipticCurve.saturate\n> Failed example:\n>     E.gens()\n> Expected:\n>     [[-1001107, -4004428, 1]]\n> Got:\n>     Attempt to convert -2004462486322 to long fails!\n>     [[-1001107, -4004428, 1]]\n> **********************************************************************\n> 1 item had failures:\n>    1 of   9 in sage.libs.eclib.interface.mwrank_EllipticCurve.saturate\n>     [192 tests, 1 failure, 18.73 s]\n> ----------------------------------------------------------------------\n> sage -t --long --random-seed=0 src/sage/libs/eclib/interface.py  # 1 doctest failed\n> ----------------------------------------------------------------------\n> ```\n\nAre we still supporting 32-bit?  What if an upstream package does not support it?  I have no way to test eclib on 32-bit.",
    "created_at": "2021-06-21T07:56:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507717",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:103'>**Comment 103:**</a>
Replying to [@vbraun](#comment%3A101):
> On 32-bit:
> 
> ```
> **********************************************************************
> File "src/sage/libs/eclib/interface.py", line 555, in sage.libs.eclib.interface.mwrank_EllipticCurve.saturate
> Failed example:
>     E.gens()
> Expected:
>     [[-1001107, -4004428, 1]]
> Got:
>     Attempt to convert -2004462486322 to long fails!
>     [[-1001107, -4004428, 1]]
> **********************************************************************
> 1 item had failures:
>    1 of   9 in sage.libs.eclib.interface.mwrank_EllipticCurve.saturate
>     [192 tests, 1 failure, 18.73 s]
> ----------------------------------------------------------------------
> sage -t --long --random-seed=0 src/sage/libs/eclib/interface.py  # 1 doctest failed
> ----------------------------------------------------------------------
> ```

Are we still supporting 32-bit?  What if an upstream package does not support it?  I have no way to test eclib on 32-bit.



---

archive/issue_comments_507718.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\none can test on 32-bit using [GitHub](../wiki/GitHub) Actions (this would be very easy to set up for standalone eclib),\nand we still support 32-bit, see  http://www.mirrorservice.org/sites/www.sagemath.org/linux/32bit/index.html",
    "created_at": "2021-06-21T09:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507718",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'>**Comment 4:**</a>
one can test on 32-bit using [GitHub](../wiki/GitHub) Actions (this would be very easy to set up for standalone eclib),
and we still support 32-bit, see  http://www.mirrorservice.org/sites/www.sagemath.org/linux/32bit/index.html



---

archive/issue_comments_507719.json:
```json
{
    "body": "<a id='comment:105'>**Comment 105:**</a>\nReplying to [@dimpase](#comment%3A104):\n> one can test on 32-bit using [GitHub](../wiki/GitHub) Actions (this would be very easy to set up for standalone eclib),\n> and we still support 32-bit, see  http://www.mirrorservice.org/sites/www.sagemath.org/linux/32bit/index.html\n\nThanks, Dima.  If you ever feel like helping me set up [GitHub](../wiki/GitHub) actions for eclib, that would be good. I have been using Travis.",
    "created_at": "2021-06-21T10:26:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507719",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:105'>**Comment 105:**</a>
Replying to [@dimpase](#comment%3A104):
> one can test on 32-bit using [GitHub](../wiki/GitHub) Actions (this would be very easy to set up for standalone eclib),
> and we still support 32-bit, see  http://www.mirrorservice.org/sites/www.sagemath.org/linux/32bit/index.html

Thanks, Dima.  If you ever feel like helping me set up [GitHub](../wiki/GitHub) actions for eclib, that would be good. I have been using Travis.



---

archive/issue_comments_507720.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nThere is nothing special about the one example which triggers that error on 32-bit machines, and I will just change it to a smaller one.  This version of eclib contains may improvements to the code for saturation so it was tempting to put in a non-trivial example in this doctest but it is not necessary.",
    "created_at": "2021-06-23T15:31:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507720",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:6'>**Comment 6:**</a>
There is nothing special about the one example which triggers that error on 32-bit machines, and I will just change it to a smaller one.  This version of eclib contains may improvements to the code for saturation so it was tempting to put in a non-trivial example in this doctest but it is not necessary.



---

archive/issue_comments_507721.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nhow does one trigger it?\nperhaps put this into spkg-check?",
    "created_at": "2021-06-23T17:00:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507721",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'>**Comment 7:**</a>
how does one trigger it?
perhaps put this into spkg-check?



---

archive/issue_comments_507722.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nthere is also a way to make the test output dependent on the cpu, look up special tags 8n the code, `# 32-bit` if i recall right",
    "created_at": "2021-06-23T17:03:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507722",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'>**Comment 8:**</a>
there is also a way to make the test output dependent on the cpu, look up special tags 8n the code, `# 32-bit` if i recall right



---

archive/issue_comments_507723.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nYes I know about having 32-bit tests, when I started Sage development I had a 32-bit machine.  But now I have not yet been able to build a 32-bit eclib (it is not enough to add -m32 to the compiler flags, it seems, and it might need a 32-bit version of the dependent libraries too).\n\nThe only purpose of this test is to show that saturation may not change anything.  I'll patch it to use this smaller example instead:\n\n```\nsage: E = mwrank_EllipticCurve([0, 0, 0, -391, 0])                                                                                                                                                                           \nsage: E.gens()                                                                                                                                                                                                               \n[[196, 2730, 1]]\nsage: E.saturate()                                                                                                                                                                                                           \nsage: E.gens()                                                                                                                                                                                                               \n[[196, 2730, 1]]\n```",
    "created_at": "2021-06-24T07:38:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507723",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:9'>**Comment 9:**</a>
Yes I know about having 32-bit tests, when I started Sage development I had a 32-bit machine.  But now I have not yet been able to build a 32-bit eclib (it is not enough to add -m32 to the compiler flags, it seems, and it might need a 32-bit version of the dependent libraries too).

The only purpose of this test is to show that saturation may not change anything.  I'll patch it to use this smaller example instead:

```
sage: E = mwrank_EllipticCurve([0, 0, 0, -391, 0])                                                                                                                                                                           
sage: E.gens()                                                                                                                                                                                                               
[[196, 2730, 1]]
sage: E.saturate()                                                                                                                                                                                                           
sage: E.gens()                                                                                                                                                                                                               
[[196, 2730, 1]]
```



---

archive/issue_comments_507724.json:
```json
{
    "body": "<a id='comment:0'>**Comment 0:**</a>\nI've just built Sage 9.4.beta3 with this ticket on a 32-bit box, and checked that the following works:\n\n```diff\n--- a/src/sage/libs/eclib/interface.py\n+++ b/src/sage/libs/eclib/interface.py\n@@ -553,7 +553,9 @@ class mwrank_EllipticCurve(SageObject):\n \n             sage: E = mwrank_EllipticCurve([0, 0, 0, -1002231243161, 0])\n             sage: E.gens()\n-            [[-1001107, -4004428, 1]]\n+            [[-1001107, -4004428, 1]] # 64-bit\n+            ...                       # 32-bit\n+            [[-1001107, -4004428, 1]] # 32-bit\n             sage: E.saturate()\n             sage: E.gens()\n             [[-1001107, -4004428, 1]]\n```\n\nI can give you access to the box (well, it's old and slow) if you send me your public ssh key.",
    "created_at": "2021-06-24T10:04:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507724",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:0'>**Comment 0:**</a>
I've just built Sage 9.4.beta3 with this ticket on a 32-bit box, and checked that the following works:

```diff
--- a/src/sage/libs/eclib/interface.py
+++ b/src/sage/libs/eclib/interface.py
@@ -553,7 +553,9 @@ class mwrank_EllipticCurve(SageObject):
 
             sage: E = mwrank_EllipticCurve([0, 0, 0, -1002231243161, 0])
             sage: E.gens()
-            [[-1001107, -4004428, 1]]
+            [[-1001107, -4004428, 1]] # 64-bit
+            ...                       # 32-bit
+            [[-1001107, -4004428, 1]] # 32-bit
             sage: E.saturate()
             sage: E.gens()
             [[-1001107, -4004428, 1]]
```

I can give you access to the box (well, it's old and slow) if you send me your public ssh key.



---

archive/issue_comments_507725.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7bed91d083c7a6b97b37a4af18579be9cedb80e2\">7bed91d</a></td><td><code>allow 32-bit boxes to complain</code></td></tr></table>\n",
    "created_at": "2021-06-24T10:07:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507725",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:1'>**Comment 1:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7bed91d083c7a6b97b37a4af18579be9cedb80e2">7bed91d</a></td><td><code>allow 32-bit boxes to complain</code></td></tr></table>




---

archive/issue_comments_507726.json:
```json
{
    "body": "**Changing commit** from \"[b50d9c6047c1ad5167af7db8a8127f72ab18a853](https://github.com/sagemath/sagetrac-mirror/commit/b50d9c6047c1ad5167af7db8a8127f72ab18a853)\" to \"[7bed91d083c7a6b97b37a4af18579be9cedb80e2](https://github.com/sagemath/sagetrac-mirror/commit/7bed91d083c7a6b97b37a4af18579be9cedb80e2)\".",
    "created_at": "2021-06-24T10:07:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507726",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[b50d9c6047c1ad5167af7db8a8127f72ab18a853](https://github.com/sagemath/sagetrac-mirror/commit/b50d9c6047c1ad5167af7db8a8127f72ab18a853)" to "[7bed91d083c7a6b97b37a4af18579be9cedb80e2](https://github.com/sagemath/sagetrac-mirror/commit/7bed91d083c7a6b97b37a4af18579be9cedb80e2)".



---

archive/issue_events_381359.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-06-24T10:07:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381359"
}
```



---

archive/issue_events_381360.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-06-24T10:08:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381360"
}
```



---

archive/issue_events_381361.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-06-24T10:08:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381361"
}
```



---

archive/issue_events_381362.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2021-06-24T13:25:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381362"
}
```



---

archive/issue_events_381363.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2021-06-24T13:25:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381363"
}
```



---

archive/issue_comments_507727.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nI am tempted let this stand as is, but the warning line which 32-bit machines output could be fatal in that the code has attempted to convert a multiprecision integer to a long int (which is 64-bit or 32-bit, depending), and fails since 2004462486322 has 41 bits.  The conversion function returns 0. So the output cannot be trusted, though here it does not give an incorrect result.\n\nI have tracked down exactly where in eclib code this conversion happens.  It is in a new piece of code in this version of eclib.  It may occur when there are primes of bad reduction greater than (about) 2^31 (or 2^63).  A better solution which I can do here is to use multiprecision integers in one place where I did not, so I will make that change and make a new eclib version.\n\nThanks anyway, Dima.",
    "created_at": "2021-06-24T13:25:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507727",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:4'>**Comment 4:**</a>
I am tempted let this stand as is, but the warning line which 32-bit machines output could be fatal in that the code has attempted to convert a multiprecision integer to a long int (which is 64-bit or 32-bit, depending), and fails since 2004462486322 has 41 bits.  The conversion function returns 0. So the output cannot be trusted, though here it does not give an incorrect result.

I have tracked down exactly where in eclib code this conversion happens.  It is in a new piece of code in this version of eclib.  It may occur when there are primes of bad reduction greater than (about) 2^31 (or 2^63).  A better solution which I can do here is to use multiprecision integers in one place where I did not, so I will make that change and make a new eclib version.

Thanks anyway, Dima.



---

archive/issue_comments_507728.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7bed91d083c7a6b97b37a4af18579be9cedb80e2\">7bed91d</a></td><td><code>allow 32-bit boxes to complain</code></td></tr></table>\n",
    "created_at": "2021-06-25T10:37:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507728",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:5'>**Comment 5:**</a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7bed91d083c7a6b97b37a4af18579be9cedb80e2">7bed91d</a></td><td><code>allow 32-bit boxes to complain</code></td></tr></table>




---

archive/issue_comments_507729.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).\n \n-New eclib source tarball at [https://github.com/JohnCremona/eclib/releases/download/20210503/eclib-20210503.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210503/eclib-20210503.tar.bz2)\n+New eclib source tarball at [https://github.com/JohnCremona/eclib/releases/download/20210625/eclib-20210625.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210625/eclib-20210625.tar.bz2)\n``````\n",
    "created_at": "2021-06-25T10:37:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507729",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 Incidentally, Sage has its own implementation of the same underlying algorithm for elliptic curves over number fields, as as well as all the above, there should be a parameter called 'implementation' which could be either 'sage' or 'eclib' (or 'pari' before long).
 
-New eclib source tarball at [https://github.com/JohnCremona/eclib/releases/download/20210503/eclib-20210503.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210503/eclib-20210503.tar.bz2)
+New eclib source tarball at [https://github.com/JohnCremona/eclib/releases/download/20210625/eclib-20210625.tar.bz2](https://github.com/JohnCremona/eclib/releases/download/20210625/eclib-20210625.tar.bz2)
``````




---

archive/issue_comments_507730.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nI'll revert that cosmetic 32-bit fix since after fixing the underlying issue in eclib (new version 20210625) it will not be needed.  New patch up soon.",
    "created_at": "2021-06-25T10:38:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507730",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:6'>**Comment 6:**</a>
I'll revert that cosmetic 32-bit fix since after fixing the underlying issue in eclib (new version 20210625) it will not be needed.  New patch up soon.



---

archive/issue_comments_507731.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c5b93b54fc3286b744b593fb0f1d2d77ec460d8\">2c5b93b</a></td><td><code>Merge branch 'develop' into eclib31443</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1871cab5ff4d6d1e99dccf702fd4705a7a6d056\">c1871ca</a></td><td><code>Merge branch 'public/packages/eclib/31443' of trac.sagemath.org:sage into eclib31443</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/789550ca04c94acfb1e803251538996a34962038\">789550c</a></td><td><code>31443 updated for eclib version 20210625</code></td></tr></table>\n",
    "created_at": "2021-06-25T12:51:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507731",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>**Comment 7:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c5b93b54fc3286b744b593fb0f1d2d77ec460d8">2c5b93b</a></td><td><code>Merge branch 'develop' into eclib31443</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1871cab5ff4d6d1e99dccf702fd4705a7a6d056">c1871ca</a></td><td><code>Merge branch 'public/packages/eclib/31443' of trac.sagemath.org:sage into eclib31443</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/789550ca04c94acfb1e803251538996a34962038">789550c</a></td><td><code>31443 updated for eclib version 20210625</code></td></tr></table>




---

archive/issue_comments_507732.json:
```json
{
    "body": "**Changing commit** from \"[7bed91d083c7a6b97b37a4af18579be9cedb80e2](https://github.com/sagemath/sagetrac-mirror/commit/7bed91d083c7a6b97b37a4af18579be9cedb80e2)\" to \"[789550ca04c94acfb1e803251538996a34962038](https://github.com/sagemath/sagetrac-mirror/commit/789550ca04c94acfb1e803251538996a34962038)\".",
    "created_at": "2021-06-25T12:51:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507732",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[7bed91d083c7a6b97b37a4af18579be9cedb80e2](https://github.com/sagemath/sagetrac-mirror/commit/7bed91d083c7a6b97b37a4af18579be9cedb80e2)" to "[789550ca04c94acfb1e803251538996a34962038](https://github.com/sagemath/sagetrac-mirror/commit/789550ca04c94acfb1e803251538996a34962038)".



---

archive/issue_comments_507733.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nThis version should pass OK on 32-bit and 64.",
    "created_at": "2021-06-25T14:05:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507733",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:8'>**Comment 8:**</a>
This version should pass OK on 32-bit and 64.



---

archive/issue_events_381364.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2021-06-25T14:05:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381364"
}
```



---

archive/issue_events_381365.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2021-06-25T14:05:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381365"
}
```



---

archive/issue_events_381366.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-06-25T19:32:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381366"
}
```



---

archive/issue_events_381367.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-06-25T19:32:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381367"
}
```



---

archive/issue_comments_507734.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nboth on 32 and 64 bits I get this error:\n\n```\nsage -t --random-seed=0 src/sage/rings/number_field/number_field_ideal.py\n**********************************************************************\nFile \"src/sage/rings/number_field/number_field_ideal.py\", line 2199, in sage.rings.number_field.number_field_ideal.NumberFieldFractionalIdeal.invertible_residues\nFailed example:\n    list(K.ideal(8).invertible_residues())[:5]\nExpected:\n    [1, a - 1, -3*a, -2*a + 3, -a - 1]\nGot:\n    [1, a + 2, 3*a + 3, -2*a + 3, a]\n```\n\nbut this does not seem to be related to eclib. Positive review.",
    "created_at": "2021-06-25T19:32:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507734",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'>**Comment 9:**</a>
both on 32 and 64 bits I get this error:

```
sage -t --random-seed=0 src/sage/rings/number_field/number_field_ideal.py
**********************************************************************
File "src/sage/rings/number_field/number_field_ideal.py", line 2199, in sage.rings.number_field.number_field_ideal.NumberFieldFractionalIdeal.invertible_residues
Failed example:
    list(K.ideal(8).invertible_residues())[:5]
Expected:
    [1, a - 1, -3*a, -2*a + 3, -a - 1]
Got:
    [1, a + 2, 3*a + 3, -2*a + 3, a]
```

but this does not seem to be related to eclib. Positive review.



---

archive/issue_comments_507735.json:
```json
{
    "body": "<a id='comment:0'>**Comment 0:**</a>\nThanks -- and you are right, that error cannot have anything to do with eclib.  Though I wrote that function and test -- it uses pari.  Probably a good idea to sort the result of this method (which just calls a more general one which returns an iterator).",
    "created_at": "2021-06-25T20:15:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507735",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:0'>**Comment 0:**</a>
Thanks -- and you are right, that error cannot have anything to do with eclib.  Though I wrote that function and test -- it uses pari.  Probably a good idea to sort the result of this method (which just calls a more general one which returns an iterator).



---

archive/issue_comments_507736.json:
```json
{
    "body": "<a id='comment:121'>**Comment 121:**</a>\nReplying to [@JohnCremona](#comment%3A120):\n> Thanks -- and you are right, that error cannot have anything to do with eclib.  Though I wrote that function and test -- it uses pari.  Probably a good idea to sort the result of this method (which just calls a more general one which returns an iterator).\n\nit is not just sorting - the sets are not the same!",
    "created_at": "2021-06-25T20:28:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507736",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:121'>**Comment 121:**</a>
Replying to [@JohnCremona](#comment%3A120):
> Thanks -- and you are right, that error cannot have anything to do with eclib.  Though I wrote that function and test -- it uses pari.  Probably a good idea to sort the result of this method (which just calls a more general one which returns an iterator).

it is not just sorting - the sets are not the same!



---

archive/issue_comments_507737.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nA better test would be that the list contains 48 elements, namely x+y*a for x,y in range(8) not both even, up to congruence mod 8. Which is a bit messy, but writing such a test now would save having to go through all this again next time there's any change in pari.  Say\n\n```\nsage: L = K.ideal(8).invertible_residues()                                                                                                                                       \nsage: L1 = {(x%8,y%8) for x,y in L}                                                                                                                                              \nsage: L2 = {(x,y) for x in range(8) for y in range(8) if (x%2,y%2) != (0,0)}                                                                                                     \nsage: assert L1==L2 \n```\nor just\n\n```\nsage: {(x%8,y%8) for x,y in K.ideal(8).invertible_residues()} == {(x,y) for x in range(8) for y in range(8) if (x%2,y%2) != (0,0)}                                               \nTrue\n```\n\n-- but on a separate ticket!",
    "created_at": "2021-06-26T13:30:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507737",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:2'>**Comment 2:**</a>
A better test would be that the list contains 48 elements, namely x+y*a for x,y in range(8) not both even, up to congruence mod 8. Which is a bit messy, but writing such a test now would save having to go through all this again next time there's any change in pari.  Say

```
sage: L = K.ideal(8).invertible_residues()                                                                                                                                       
sage: L1 = {(x%8,y%8) for x,y in L}                                                                                                                                              
sage: L2 = {(x,y) for x in range(8) for y in range(8) if (x%2,y%2) != (0,0)}                                                                                                     
sage: assert L1==L2 
```
or just

```
sage: {(x%8,y%8) for x,y in K.ideal(8).invertible_residues()} == {(x,y) for x in range(8) for y in range(8) if (x%2,y%2) != (0,0)}                                               
True
```

-- but on a separate ticket!



---

archive/issue_comments_507738.json:
```json
{
    "body": "**Changing branch** from \"[public/packages/eclib/31443](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/eclib/31443)\" to \"[789550ca04c94acfb1e803251538996a34962038](https://github.com/sagemath/sagetrac-mirror/commit/789550ca04c94acfb1e803251538996a34962038)\".",
    "created_at": "2021-06-29T23:08:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507738",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/packages/eclib/31443](https://github.com/sagemath/sagetrac-mirror/tree/public/packages/eclib/31443)" to "[789550ca04c94acfb1e803251538996a34962038](https://github.com/sagemath/sagetrac-mirror/commit/789550ca04c94acfb1e803251538996a34962038)".



---

archive/issue_events_381368.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-29T23:08:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381368"
}
```



---

archive/issue_events_381369.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "af77aabbc70586005d90881b7174ecae88f18837",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-06-29T23:08:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31443#event-381369"
}
```



---

archive/issue_comments_507739.json:
```json
{
    "body": "**Changing commit** from \"[789550ca04c94acfb1e803251538996a34962038](https://github.com/sagemath/sagetrac-mirror/commit/789550ca04c94acfb1e803251538996a34962038)\" to \"\".",
    "created_at": "2021-07-02T07:13:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507739",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[789550ca04c94acfb1e803251538996a34962038](https://github.com/sagemath/sagetrac-mirror/commit/789550ca04c94acfb1e803251538996a34962038)" to "".



---

archive/issue_comments_507740.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nThis update appears to have broken `ubuntu-trusty`. https://github.com/sagemath/sage/runs/2967004002?check_suite_focus=true\n\n```\n/bin/bash ../libtool  --tag=CXX   --mode=compile g++ -std=gnu++11 -DPACKAGE_NAME=\\\"eclib\\\" -DPACKAGE_TARNAME=\\\"eclib\\\" -DPACKAGE_VERSION=\\\"20210625\\\" -DPACKAGE_STRING=\\\"eclib\\ 20210625\\\" -DPACKAGE_BUGREPORT=\\\"john.cremona@gmail.com\\\" -DPACKAGE_URL=\\\"\\\" -DPACKAGE=\\\"eclib\\\" -DVERSION=\\\"20210625\\\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\\\".libs/\\\" -DHAVE_CXX11=1 -DHAVE_PTHREAD_PRIO_INHERIT=1 -DHAVE_PTHREAD=1 -DHAVE_ALLOCA_H=1 -DHAVE_ALLOCA=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_UNISTD_H=1 -DHAVE__BOOL=1 -DHAVE_STDBOOL_H=1 -Drestrict=__restrict -DHAVE_MEMMOVE=1 -DHAVE_MEMSET=1 -DHAVE_STRCHR=1 -I.  -DFLINT_LEVEL=1 -I/sage/local/include -I/sage/local/include -I/sage/local/include   -pthread   -O2 -g  -c -o isogs.lo isogs.cc\nlibtool: compile:  g++ -std=gnu++11 -DPACKAGE_NAME=\\\"eclib\\\" -DPACKAGE_TARNAME=\\\"eclib\\\" -DPACKAGE_VERSION=\\\"20210625\\\" \"-DPACKAGE_STRING=\\\"eclib 20210625\\\"\" -DPACKAGE_BUGREPORT=\\\"john.cremona@gmail.com\\\" -DPACKAGE_URL=\\\"\\\" -DPACKAGE=\\\"eclib\\\" -DVERSION=\\\"20210625\\\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\\\".libs/\\\" -DHAVE_CXX11=1 -DHAVE_PTHREAD_PRIO_INHERIT=1 -DHAVE_PTHREAD=1 -DHAVE_ALLOCA_H=1 -DHAVE_ALLOCA=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_UNISTD_H=1 -DHAVE__BOOL=1 -DHAVE_STDBOOL_H=1 -Drestrict=__restrict -DHAVE_MEMMOVE=1 -DHAVE_MEMSET=1 -DHAVE_STRCHR=1 -I. -DFLINT_LEVEL=1 -I/sage/local/include -I/sage/local/include -I/sage/local/include -pthread -O2 -g -c isogs.cc  -fPIC -DPIC -o .libs/isogs.o\nIn file included from /usr/include/c++/4.8/algorithm:62:0,\n                 from ./eclib/interface.h:43,\n                 from ./eclib/arith.h:27,\n                 from ./eclib/marith.h:27,\n                 from ./eclib/gf.h:29,\n                 from ./eclib/polys.h:31,\n                 from ./eclib/points.h:30,\n                 from points.cc:26:\n/usr/include/c++/4.8/bits/stl_algo.h: In instantiation of '_RandomAccessIterator std::__unguarded_partition(_RandomAccessIterator, _RandomAccessIterator, const _Tp&, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Point*, std::vector<Point> >; _Tp = Point; _Compare = Point_comparer]':\n/usr/include/c++/4.8/bits/stl_algo.h:2296:78:   required from '_RandomAccessIterator std::__unguarded_partition_pivot(_RandomAccessIterator, _RandomAccessIterator, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Point*, std::vector<Point> >; _Compare = Point_comparer]'\n/usr/include/c++/4.8/bits/stl_algo.h:2337:62:   required from 'void std::__introsort_loop(_RandomAccessIterator, _RandomAccessIterator, _Size, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Point*, std::vector<Point> >; _Size = long int; _Compare = Point_comparer]'\n/usr/include/c++/4.8/bits/stl_algo.h:5499:44:   required from 'void std::sort(_RAIter, _RAIter, _Compare) [with _RAIter = __gnu_cxx::__normal_iterator<Point*, std::vector<Point> >; _Compare = Point_comparer]'\npoints.cc:404:53:   required from here\n/usr/include/c++/4.8/bits/stl_algo.h:2263:35: error: no match for call to '(Point_comparer) (Point&, const Point&)'\n    while (__comp(*__first, __pivot))\n                                   ^\npoints.cc:307:8: note: candidate is:\n struct Point_comparer {\n        ^\npoints.cc:308:8: note: bool Point_comparer::operator()(Point&, Point&)\n   bool operator()(Point& P, Point& Q)\n        ^\npoints.cc:308:8: note:   no known conversion for argument 2 from 'const Point' to 'Point&'\nIn file included from /usr/include/c++/4.8/algorithm:62:0,\n                 from ./eclib/interface.h:43,\n                 from ./eclib/arith.h:27,\n                 from ./eclib/marith.h:27,\n                 from ./eclib/gf.h:29,\n                 from ./eclib/polys.h:31,\n                 from ./eclib/points.h:30,\n                 from points.cc:26:\n/usr/include/c++/4.8/bits/stl_algo.h:2266:34: error: no match for call to '(Point_comparer) (const Point&, Point&)'\n    while (__comp(__pivot, *__last))\n                                  ^\npoints.cc:307:8: note: candidate is:\n struct Point_comparer {\n        ^\npoints.cc:308:8: note: bool Point_comparer::operator()(Point&, Point&)\n   bool operator()(Point& P, Point& Q)\n        ^\npoints.cc:308:8: note:   no known conversion for argument 1 from 'const Point' to 'Point&'\nmake[4]: *** [points.lo] Error 1\n```",
    "created_at": "2021-07-02T07:13:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507740",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'>**Comment 4:**</a>
This update appears to have broken `ubuntu-trusty`. https://github.com/sagemath/sage/runs/2967004002?check_suite_focus=true

```
/bin/bash ../libtool  --tag=CXX   --mode=compile g++ -std=gnu++11 -DPACKAGE_NAME=\"eclib\" -DPACKAGE_TARNAME=\"eclib\" -DPACKAGE_VERSION=\"20210625\" -DPACKAGE_STRING=\"eclib\ 20210625\" -DPACKAGE_BUGREPORT=\"john.cremona@gmail.com\" -DPACKAGE_URL=\"\" -DPACKAGE=\"eclib\" -DVERSION=\"20210625\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DHAVE_CXX11=1 -DHAVE_PTHREAD_PRIO_INHERIT=1 -DHAVE_PTHREAD=1 -DHAVE_ALLOCA_H=1 -DHAVE_ALLOCA=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_UNISTD_H=1 -DHAVE__BOOL=1 -DHAVE_STDBOOL_H=1 -Drestrict=__restrict -DHAVE_MEMMOVE=1 -DHAVE_MEMSET=1 -DHAVE_STRCHR=1 -I.  -DFLINT_LEVEL=1 -I/sage/local/include -I/sage/local/include -I/sage/local/include   -pthread   -O2 -g  -c -o isogs.lo isogs.cc
libtool: compile:  g++ -std=gnu++11 -DPACKAGE_NAME=\"eclib\" -DPACKAGE_TARNAME=\"eclib\" -DPACKAGE_VERSION=\"20210625\" "-DPACKAGE_STRING=\"eclib 20210625\"" -DPACKAGE_BUGREPORT=\"john.cremona@gmail.com\" -DPACKAGE_URL=\"\" -DPACKAGE=\"eclib\" -DVERSION=\"20210625\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DHAVE_CXX11=1 -DHAVE_PTHREAD_PRIO_INHERIT=1 -DHAVE_PTHREAD=1 -DHAVE_ALLOCA_H=1 -DHAVE_ALLOCA=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_UNISTD_H=1 -DHAVE__BOOL=1 -DHAVE_STDBOOL_H=1 -Drestrict=__restrict -DHAVE_MEMMOVE=1 -DHAVE_MEMSET=1 -DHAVE_STRCHR=1 -I. -DFLINT_LEVEL=1 -I/sage/local/include -I/sage/local/include -I/sage/local/include -pthread -O2 -g -c isogs.cc  -fPIC -DPIC -o .libs/isogs.o
In file included from /usr/include/c++/4.8/algorithm:62:0,
                 from ./eclib/interface.h:43,
                 from ./eclib/arith.h:27,
                 from ./eclib/marith.h:27,
                 from ./eclib/gf.h:29,
                 from ./eclib/polys.h:31,
                 from ./eclib/points.h:30,
                 from points.cc:26:
/usr/include/c++/4.8/bits/stl_algo.h: In instantiation of '_RandomAccessIterator std::__unguarded_partition(_RandomAccessIterator, _RandomAccessIterator, const _Tp&, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Point*, std::vector<Point> >; _Tp = Point; _Compare = Point_comparer]':
/usr/include/c++/4.8/bits/stl_algo.h:2296:78:   required from '_RandomAccessIterator std::__unguarded_partition_pivot(_RandomAccessIterator, _RandomAccessIterator, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Point*, std::vector<Point> >; _Compare = Point_comparer]'
/usr/include/c++/4.8/bits/stl_algo.h:2337:62:   required from 'void std::__introsort_loop(_RandomAccessIterator, _RandomAccessIterator, _Size, _Compare) [with _RandomAccessIterator = __gnu_cxx::__normal_iterator<Point*, std::vector<Point> >; _Size = long int; _Compare = Point_comparer]'
/usr/include/c++/4.8/bits/stl_algo.h:5499:44:   required from 'void std::sort(_RAIter, _RAIter, _Compare) [with _RAIter = __gnu_cxx::__normal_iterator<Point*, std::vector<Point> >; _Compare = Point_comparer]'
points.cc:404:53:   required from here
/usr/include/c++/4.8/bits/stl_algo.h:2263:35: error: no match for call to '(Point_comparer) (Point&, const Point&)'
    while (__comp(*__first, __pivot))
                                   ^
points.cc:307:8: note: candidate is:
 struct Point_comparer {
        ^
points.cc:308:8: note: bool Point_comparer::operator()(Point&, Point&)
   bool operator()(Point& P, Point& Q)
        ^
points.cc:308:8: note:   no known conversion for argument 2 from 'const Point' to 'Point&'
In file included from /usr/include/c++/4.8/algorithm:62:0,
                 from ./eclib/interface.h:43,
                 from ./eclib/arith.h:27,
                 from ./eclib/marith.h:27,
                 from ./eclib/gf.h:29,
                 from ./eclib/polys.h:31,
                 from ./eclib/points.h:30,
                 from points.cc:26:
/usr/include/c++/4.8/bits/stl_algo.h:2266:34: error: no match for call to '(Point_comparer) (const Point&, Point&)'
    while (__comp(__pivot, *__last))
                                  ^
points.cc:307:8: note: candidate is:
 struct Point_comparer {
        ^
points.cc:308:8: note: bool Point_comparer::operator()(Point&, Point&)
   bool operator()(Point& P, Point& Q)
        ^
points.cc:308:8: note:   no known conversion for argument 1 from 'const Point' to 'Point&'
make[4]: *** [points.lo] Error 1
```



---

archive/issue_comments_507741.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nLooks like `Point_comparer::operator()(Point&, Point&)` needs some const-correctness",
    "created_at": "2021-07-02T07:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507741",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'>**Comment 5:**</a>
Looks like `Point_comparer::operator()(Point&, Point&)` needs some const-correctness



---

archive/issue_comments_507742.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nI will look at that but I hope we will not have to reopen this ticket. The code has passed with both gcc and clang using github-actions.\n\nThe Point_comparer is used to sort lists of torsion points (finite order) and uses the point's order as the first comparator, but calling order(P) has a side-effect of caching the order in P if it was not already there, so cannot be called on a const point.  Of course I could use copies within the comparer.\n\nWould this change get around the issue?\n\n```\ndiff --git a/libsrc/points.cc b/libsrc/points.cc\nindex 1c612f4..714b73d 100644\n--- a/libsrc/points.cc\n+++ b/libsrc/points.cc\n@@ -305,8 +305,9 @@ vector<Point> points_from_x(Curvedata &E, const bigrational& x)\n // (4) y-coordinate\n \n struct Point_comparer {\n-  bool operator()(Point& P, Point& Q)\n+  bool operator()(const Point& P0, const Point& Q0)\n   {\n+    Point P(P0), Q(Q0); // take copies as args must be const but order() requires non-const\n     int s = order(P)-order(Q);\n     if(s) return (s<0); // true if P has smaller order\n     bigint t = P.getZ()-Q.getZ();\n```\n\n\"trusty\" is ubuntu 14.04 I think....",
    "created_at": "2021-07-02T10:09:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507742",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:6'>**Comment 6:**</a>
I will look at that but I hope we will not have to reopen this ticket. The code has passed with both gcc and clang using github-actions.

The Point_comparer is used to sort lists of torsion points (finite order) and uses the point's order as the first comparator, but calling order(P) has a side-effect of caching the order in P if it was not already there, so cannot be called on a const point.  Of course I could use copies within the comparer.

Would this change get around the issue?

```
diff --git a/libsrc/points.cc b/libsrc/points.cc
index 1c612f4..714b73d 100644
--- a/libsrc/points.cc
+++ b/libsrc/points.cc
@@ -305,8 +305,9 @@ vector<Point> points_from_x(Curvedata &E, const bigrational& x)
 // (4) y-coordinate
 
 struct Point_comparer {
-  bool operator()(Point& P, Point& Q)
+  bool operator()(const Point& P0, const Point& Q0)
   {
+    Point P(P0), Q(Q0); // take copies as args must be const but order() requires non-const
     int s = order(P)-order(Q);
     if(s) return (s<0); // true if P has smaller order
     bigint t = P.getZ()-Q.getZ();
```

"trusty" is ubuntu 14.04 I think....



---

archive/issue_comments_507743.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nThanks, this patch fixes it. I have opened #32101 - I would just put this in as a patch.\n\nYes, `ubuntu-trusty` is ancient and we will likely drop support for it at some point (a recent discussion appeared in #32074).",
    "created_at": "2021-07-02T17:42:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507743",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'>**Comment 7:**</a>
Thanks, this patch fixes it. I have opened #32101 - I would just put this in as a patch.

Yes, `ubuntu-trusty` is ancient and we will likely drop support for it at some point (a recent discussion appeared in #32074).



---

archive/issue_comments_507744.json:
```json
{
    "body": "<a id='comment:128'>**Comment 128:**</a>\nReplying to [@dimpase](#comment%3A119):\n> both on 32 and 64 bits I get this error:\n> \n> ```\n> sage -t --random-seed=0 src/sage/rings/number_field/number_field_ideal.py\n> **********************************************************************\n> File \"src/sage/rings/number_field/number_field_ideal.py\", line 2199, in sage.rings.number_field.number_field_ideal.NumberFieldFractionalIdeal.invertible_residues\n> Failed example:\n>     list(K.ideal(8).invertible_residues())[:5]\n> Expected:\n>     [1, a - 1, -3*a, -2*a + 3, -a - 1]\n> Got:\n>     [1, a + 2, 3*a + 3, -2*a + 3, a]\n> ```\n\nThis is now #32165.",
    "created_at": "2021-07-08T20:25:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31443#issuecomment-507744",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:128'>**Comment 128:**</a>
Replying to [@dimpase](#comment%3A119):
> both on 32 and 64 bits I get this error:
> 
> ```
> sage -t --random-seed=0 src/sage/rings/number_field/number_field_ideal.py
> **********************************************************************
> File "src/sage/rings/number_field/number_field_ideal.py", line 2199, in sage.rings.number_field.number_field_ideal.NumberFieldFractionalIdeal.invertible_residues
> Failed example:
>     list(K.ideal(8).invertible_residues())[:5]
> Expected:
>     [1, a - 1, -3*a, -2*a + 3, -a - 1]
> Got:
>     [1, a + 2, 3*a + 3, -2*a + 3, a]
> ```

This is now #32165.
