# Issue 31892: Conic parametrization broken

archive/issues_031655.json:
```json
{
    "assignees": [],
    "body": "The final output here is wrong:\n\n```\nsage: c = Conic(GF(2), [1,1,1,1,1,0])\n....: \nsage: c.parametrization()\n(Scheme morphism:\n   From: Projective Space of dimension 1 over Finite Field of size 2\n   To:   Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z\n   Defn: Defined on coordinates by sending (x : y) to\n         (x*y + y^2 : x^2 + x*y : x^2 + x*y + y^2),\n Scheme morphism:\n   From: Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z\n   To:   Projective Space of dimension 1 over Finite Field of size 2\n   Defn: Defined on coordinates by sending (x : y : z) to\n         (y : x))\nsage: f, g = c.parametrization()\nsage: (g*f).is_one()\nFalse\n```\nThe same here:\n\n```\nsage: R.<x,y,z> = QQ[]                                                                                                                                                              \nsage: C = Curve(7*x^2 + 2*y*z + z^2)                                                                                                                                                \nsage: f, g = C.parametrization(); f,g                                                                                                                                               \n(Scheme morphism:\n   From: Projective Space of dimension 1 over Rational Field\n   To:   Projective Conic Curve over Rational Field defined by 7*x^2 + 2*y*z + z^2\n   Defn: Defined on coordinates by sending (x : y) to\n         (-2*x*y : x^2 + 7*y^2 : -2*x^2),\n Scheme morphism:\n   From: Projective Conic Curve over Rational Field defined by 7*x^2 + 2*y*z + z^2\n   To:   Projective Space of dimension 1 over Rational Field\n   Defn: Defined on coordinates by sending (x : y : z) to\n         (-1/2*x : 1/7*y + 1/14*z))\nsage: (g*f).is_one()                                                                                                                                                                \nFalse\nsage: g([0, -1, 2])                                                                                                                                                                 \n...\nValueError: [0, 0] does not define a valid point since all entries are 0\nsage: p = g.domain().defining_polynomial()                                                                                                                                          \nsage: p([0, -1, 2])                                                                                                                                                                 \n0\n```\n\nDepends on #33953\n\nCC:  @mstreng @JohnCremona\n\nBranch/Commit: **[b2af690](https://github.com/sagemath/sagetrac-mirror/commit/b2af690766e1439a85eb9ad38bc1cca330b12ef0)**\n\nReviewer: **Marco Streng**\n\nAuthor: **Kwankyu Lee**\n\nComponent: **algebraic geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31892_\n\n",
    "closed_at": "2022-10-23T20:49:33Z",
    "created_at": "2021-06-01T13:03:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Conic parametrization broken",
    "type": "issue",
    "updated_at": "2022-10-23T20:49:33Z",
    "url": "https://github.com/sagemath/sage/issues/31892",
    "user": "https://github.com/kliem"
}
```
The final output here is wrong:

```
sage: c = Conic(GF(2), [1,1,1,1,1,0])
....: 
sage: c.parametrization()
(Scheme morphism:
   From: Projective Space of dimension 1 over Finite Field of size 2
   To:   Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z
   Defn: Defined on coordinates by sending (x : y) to
         (x*y + y^2 : x^2 + x*y : x^2 + x*y + y^2),
 Scheme morphism:
   From: Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z
   To:   Projective Space of dimension 1 over Finite Field of size 2
   Defn: Defined on coordinates by sending (x : y : z) to
         (y : x))
sage: f, g = c.parametrization()
sage: (g*f).is_one()
False
```
The same here:

```
sage: R.<x,y,z> = QQ[]                                                                                                                                                              
sage: C = Curve(7*x^2 + 2*y*z + z^2)                                                                                                                                                
sage: f, g = C.parametrization(); f,g                                                                                                                                               
(Scheme morphism:
   From: Projective Space of dimension 1 over Rational Field
   To:   Projective Conic Curve over Rational Field defined by 7*x^2 + 2*y*z + z^2
   Defn: Defined on coordinates by sending (x : y) to
         (-2*x*y : x^2 + 7*y^2 : -2*x^2),
 Scheme morphism:
   From: Projective Conic Curve over Rational Field defined by 7*x^2 + 2*y*z + z^2
   To:   Projective Space of dimension 1 over Rational Field
   Defn: Defined on coordinates by sending (x : y : z) to
         (-1/2*x : 1/7*y + 1/14*z))
sage: (g*f).is_one()                                                                                                                                                                
False
sage: g([0, -1, 2])                                                                                                                                                                 
...
ValueError: [0, 0] does not define a valid point since all entries are 0
sage: p = g.domain().defining_polynomial()                                                                                                                                          
sage: p([0, -1, 2])                                                                                                                                                                 
0
```

Depends on #33953

CC:  @mstreng @JohnCremona

Branch/Commit: **[b2af690](https://github.com/sagemath/sagetrac-mirror/commit/b2af690766e1439a85eb9ad38bc1cca330b12ef0)**

Reviewer: **Marco Streng**

Author: **Kwankyu Lee**

Component: **algebraic geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/31892_





---

archive/issue_events_439738.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-06-01T13:03:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439738"
}
```



---

archive/issue_events_439739.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-06-01T13:03:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "c: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439739"
}
```



---

archive/issue_events_439740.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-06-01T13:03:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439740"
}
```



---

archive/issue_events_439741.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-06-01T13:03:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439741"
}
```



---

archive/issue_comments_512689.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThere is an actual mathematical issue here.  The map from `P^2` to the conic is defined everywhere by a single triple of polynomials, but the map from the conic to `P^1` cannot be defined by a single pair.\n\nFor example the familiar easiest example `X^2 + Y^2 = Z^2`\n\nis parametrized by mapping `(u : v)` to\n\n`(x : y : z) = (u^2 - v^2 : 2 u v : u^2 + v^2)`,\n\nbut the reverse map is given by mapping `(x : y : z)` to\n\n`(u : v) = (x + z : y) = (y : z - x)`\n\nwhere\n\n- the first formula `(x + z : y)` is defined away from `(-1 : 0 : 1)`\n- and the second `(y : z - x)` away from `(1 : 0 : 1)`,\n- and where they are both defined they agree.\n\nThat's the way maps between curves works.\n\nMaps betwee (Sage) Schemes should be capable of being defined on patches like this.\n\nThe docstring for the method `parametrization()` does have the\n\n```\nWarning \"The second map is currently broken\nand neither the inverse nor well-defined.\"\n```\nwhich while not being grammatical does give a warning.",
    "created_at": "2021-07-08T08:06:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512689",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:2" align="right">comment:2</div>

There is an actual mathematical issue here.  The map from `P^2` to the conic is defined everywhere by a single triple of polynomials, but the map from the conic to `P^1` cannot be defined by a single pair.

For example the familiar easiest example `X^2 + Y^2 = Z^2`

is parametrized by mapping `(u : v)` to

`(x : y : z) = (u^2 - v^2 : 2 u v : u^2 + v^2)`,

but the reverse map is given by mapping `(x : y : z)` to

`(u : v) = (x + z : y) = (y : z - x)`

where

- the first formula `(x + z : y)` is defined away from `(-1 : 0 : 1)`
- and the second `(y : z - x)` away from `(1 : 0 : 1)`,
- and where they are both defined they agree.

That's the way maps between curves works.

Maps betwee (Sage) Schemes should be capable of being defined on patches like this.

The docstring for the method `parametrization()` does have the

```
Warning "The second map is currently broken
and neither the inverse nor well-defined."
```
which while not being grammatical does give a warning.



---

archive/issue_events_439742.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439742"
}
```



---

archive/issue_events_439743.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439743"
}
```



---

archive/issue_events_439744.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:12:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439744"
}
```



---

archive/issue_events_439745.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:12:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439745"
}
```



---

archive/issue_comments_512690.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThe inverse is correct in both examples at this ticket description, but the way it works in [SageMath](../wiki/SageMath) is a little bit broken.\n\nHere's what I get in version 9.5. I'm using `paramatrization(P)` in order to replicate the ticket description's example, because `parametrization` is randomized if you don't specify a point.\n\n```\nsage: C = Conic(GF(2), [1,1,1,1,1,0])                                           \nsage: P = C([0,0,1])                                                            \nsage: (f, g) = C.parametrization(P); (f, g)                                     \n(Scheme morphism:\n   From: Projective Space of dimension 1 over Finite Field of size 2\n   To:   Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z\n   Defn: Defined on coordinates by sending (x : y) to\n         (x*y + y^2 : x^2 + x*y : x^2 + x*y + y^2),\n Scheme morphism:\n   From: Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z\n   To:   Projective Space of dimension 1 over Finite Field of size 2\n   Defn: Defined on coordinates by sending (x : y : z) to\n         (y : x))\nsage: g.representatives()                                                                       \n[Scheme morphism:\n   From: Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z\n   To:   Projective Space of dimension 1 over Finite Field of size 2\n   Defn: Defined on coordinates by sending (x : y : z) to\n         (y : x),\n Scheme morphism:\n   From: Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z\n   To:   Projective Space of dimension 1 over Finite Field of size 2\n   Defn: Defined on coordinates by sending (x : y : z) to\n         (x + y + z : y + z)]\nsage: g*f                                                                       \nScheme endomorphism of Projective Space of dimension 1 over Finite Field of size 2\n  Defn: Defined on coordinates by sending (x : y) to\n        (x^2 + x*y : x*y + y^2)\nsage: f*g                                                                       \nScheme endomorphism of Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z\n  Defn: Defined on coordinates by sending (x : y : z) to\n        (x^2 + x*y : x*y + y^2 : x^2 + x*y + y^2)\nsage: P1 = f.domain()\nsage: P1.hom(P1.gens(), P1) == g*f                             \nTrue\n```\nYou can see from the output of `representatives` that `g` really knows that the first formula is not defined at all points and hence there is a second formula stored inside `g`, which does work in `(0:0:1)`. This agrees with what John [explained](#comment:2). Moreover, we have `(x^2+xy : xy + y^2) = (x(x+y) : y(x+y)) = (x : y)`, so the output of `g*f` really is the identity map, and the same holds for `f*g`. So this is correct so far. Then the following is all incorrect:\n\n```\ng(P)\nValueError: [0, 0] does not define a valid point since all entries are 0\n(g*f).is_one()\nFalse\n(f*g).is_one()\nFalse\nsage: C.Hom(C).one() == f*g\nFalse\nsage: (x,y,z) = C.gens(); C.hom([x,y,z],C) == f*g                                                   \nFalse\n```\nSomething indeed needs to be done about this. The following indicates that we are very close.\n\n```\nsage: g.representatives()[1](P)\n(1 : 1)\nsage: (f*g).representatives()[0]                                                                \nScheme endomorphism of Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z\n  Defn: Defined on coordinates by sending (x : y : z) to\n        (x : y : z)\n```\nHere are some other things that don't work:\n\n```\nsage: (f*g).representatives()[0].is_one()\nFalse\nsage: C.Hom(C).one().is_one()\nTypeError: ...\nsage: (g*f).representatives()                                                                   \nAttributeError: ...\n```\nBut I don't know enough about the inner workings of [SageMath](../wiki/SageMath) schemes to fix it.\n\nps. The warning [mentioned](#comment:2) by John refers to this ticket, so there seems to be no reason to doubt the output of parametrization.",
    "created_at": "2022-03-29T18:12:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512690",
    "user": "https://github.com/mstreng"
}
```

<div id="comment:5" align="right">comment:5</div>

The inverse is correct in both examples at this ticket description, but the way it works in [SageMath](../wiki/SageMath) is a little bit broken.

Here's what I get in version 9.5. I'm using `paramatrization(P)` in order to replicate the ticket description's example, because `parametrization` is randomized if you don't specify a point.

```
sage: C = Conic(GF(2), [1,1,1,1,1,0])                                           
sage: P = C([0,0,1])                                                            
sage: (f, g) = C.parametrization(P); (f, g)                                     
(Scheme morphism:
   From: Projective Space of dimension 1 over Finite Field of size 2
   To:   Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z
   Defn: Defined on coordinates by sending (x : y) to
         (x*y + y^2 : x^2 + x*y : x^2 + x*y + y^2),
 Scheme morphism:
   From: Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z
   To:   Projective Space of dimension 1 over Finite Field of size 2
   Defn: Defined on coordinates by sending (x : y : z) to
         (y : x))
sage: g.representatives()                                                                       
[Scheme morphism:
   From: Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z
   To:   Projective Space of dimension 1 over Finite Field of size 2
   Defn: Defined on coordinates by sending (x : y : z) to
         (y : x),
 Scheme morphism:
   From: Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z
   To:   Projective Space of dimension 1 over Finite Field of size 2
   Defn: Defined on coordinates by sending (x : y : z) to
         (x + y + z : y + z)]
sage: g*f                                                                       
Scheme endomorphism of Projective Space of dimension 1 over Finite Field of size 2
  Defn: Defined on coordinates by sending (x : y) to
        (x^2 + x*y : x*y + y^2)
sage: f*g                                                                       
Scheme endomorphism of Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z
  Defn: Defined on coordinates by sending (x : y : z) to
        (x^2 + x*y : x*y + y^2 : x^2 + x*y + y^2)
sage: P1 = f.domain()
sage: P1.hom(P1.gens(), P1) == g*f                             
True
```
You can see from the output of `representatives` that `g` really knows that the first formula is not defined at all points and hence there is a second formula stored inside `g`, which does work in `(0:0:1)`. This agrees with what John [explained](#comment:2). Moreover, we have `(x^2+xy : xy + y^2) = (x(x+y) : y(x+y)) = (x : y)`, so the output of `g*f` really is the identity map, and the same holds for `f*g`. So this is correct so far. Then the following is all incorrect:

```
g(P)
ValueError: [0, 0] does not define a valid point since all entries are 0
(g*f).is_one()
False
(f*g).is_one()
False
sage: C.Hom(C).one() == f*g
False
sage: (x,y,z) = C.gens(); C.hom([x,y,z],C) == f*g                                                   
False
```
Something indeed needs to be done about this. The following indicates that we are very close.

```
sage: g.representatives()[1](P)
(1 : 1)
sage: (f*g).representatives()[0]                                                                
Scheme endomorphism of Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z
  Defn: Defined on coordinates by sending (x : y : z) to
        (x : y : z)
```
Here are some other things that don't work:

```
sage: (f*g).representatives()[0].is_one()
False
sage: C.Hom(C).one().is_one()
TypeError: ...
sage: (g*f).representatives()                                                                   
AttributeError: ...
```
But I don't know enough about the inner workings of [SageMath](../wiki/SageMath) schemes to fix it.

ps. The warning [mentioned](#comment:2) by John refers to this ticket, so there seems to be no reason to doubt the output of parametrization.



---

archive/issue_comments_512691.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-`src/sage/schemes/plane_conics/con_field.py` documents mathematically incorrect behavior:\n+`src/sage/schemes/plane_conics/con_field.py` documents ~~mathematically~~ incorrect behavior:\n \n ```\n             sage: c = Conic(GF(2), [1,1,1,1,1,0])\n@@ -17,17 +17,17 @@\n                     (y : x))\n ```\n \n-The second map is supposed to be an inverse, however it is not even well-defined (`(0 : 0 : 1)`). The correct inverse should be:\n-`Defined on coordinates by sending (x : y : z) to (x + z : y + z)`\n+The second map is ~~supposed to be~~ an inverse~~, however it is not even well-defined (`(0 : 0 : 1)`). The correct inverse should be:\n+`Defined on coordinates by sending (x : y : z) to (x + z : y + z)`~~\n \n-This is a perfect example how a simple sanity check\n+~~This is a perfect example how a simple sanity check~~\n \n ```\n sage: f, g = c.parametrization()\n sage: (g*f).is_one()\n ...\n ```\n-or similar can prevent things like this.\n+~~or similar can prevent things like this.~~\n \n On the other hand, printed out information is not always checked by hand.\n \n``````\n",
    "created_at": "2022-03-29T18:12:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512691",
    "user": "https://github.com/mstreng"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-`src/sage/schemes/plane_conics/con_field.py` documents mathematically incorrect behavior:
+`src/sage/schemes/plane_conics/con_field.py` documents ~~mathematically~~ incorrect behavior:
 
 ```
             sage: c = Conic(GF(2), [1,1,1,1,1,0])
@@ -17,17 +17,17 @@
                     (y : x))
 ```
 
-The second map is supposed to be an inverse, however it is not even well-defined (`(0 : 0 : 1)`). The correct inverse should be:
-`Defined on coordinates by sending (x : y : z) to (x + z : y + z)`
+The second map is ~~supposed to be~~ an inverse~~, however it is not even well-defined (`(0 : 0 : 1)`). The correct inverse should be:
+`Defined on coordinates by sending (x : y : z) to (x + z : y + z)`~~
 
-This is a perfect example how a simple sanity check
+~~This is a perfect example how a simple sanity check~~
 
 ```
 sage: f, g = c.parametrization()
 sage: (g*f).is_one()
 ...
 ```
-or similar can prevent things like this.
+~~or similar can prevent things like this.~~
 
 On the other hand, printed out information is not always checked by hand.
 
``````




---

archive/issue_comments_512692.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -29,8 +29,6 @@\n ```\n ~~or similar can prevent things like this.~~\n \n-On the other hand, printed out information is not always checked by hand.\n-\n The bug is not limited to finite fields:\n \n ```\n``````\n",
    "created_at": "2022-03-29T18:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512692",
    "user": "https://github.com/mstreng"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -29,8 +29,6 @@
 ```
 ~~or similar can prevent things like this.~~
 
-On the other hand, printed out information is not always checked by hand.
-
 The bug is not limited to finite fields:
 
 ```
``````




---

archive/issue_comments_512693.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nSee #33603: Fix Conic doctests.",
    "created_at": "2022-03-30T15:08:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512693",
    "user": "https://github.com/mstreng"
}
```

<div id="comment:7" align="right">comment:7</div>

See #33603: Fix Conic doctests.



---

archive/issue_events_439746.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439746"
}
```



---

archive/issue_events_439747.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439747"
}
```



---

archive/issue_events_439748.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-06-05T13:40:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439748"
}
```



---

archive/issue_comments_512694.json:
```json
{
    "body": "Branch: **[u/klee/31892](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/31892)**",
    "created_at": "2022-06-05T13:40:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512694",
    "user": "https://github.com/kwankyu"
}
```

Branch: **[u/klee/31892](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/31892)**



---

archive/issue_comments_512695.json:
```json
{
    "body": "Author: **Kwankyu Lee**",
    "created_at": "2022-06-05T13:40:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512695",
    "user": "https://github.com/kwankyu"
}
```

Author: **Kwankyu Lee**



---

archive/issue_comments_512696.json:
```json
{
    "body": "Commit: **[9b0ba8f](https://github.com/sagemath/sagetrac-mirror/commit/9b0ba8fbd1501f03548d2eab228c6f6c868ae4e3)**",
    "created_at": "2022-06-05T13:41:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512696",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[9b0ba8f](https://github.com/sagemath/sagetrac-mirror/commit/9b0ba8fbd1501f03548d2eab228c6f6c868ae4e3)**



---

archive/issue_comments_512697.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b0ba8fbd1501f03548d2eab228c6f6c868ae4e3\">9b0ba8f</a></td><td><code>Refactor identity morphism</code></td></tr></table>\n",
    "created_at": "2022-06-05T13:41:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512697",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b0ba8fbd1501f03548d2eab228c6f6c868ae4e3">9b0ba8f</a></td><td><code>Refactor identity morphism</code></td></tr></table>




---

archive/issue_comments_512698.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nPart of the issue is fixed incidentally by #33953.\n\nThe branch fixes other issues related with the identity morphisms.",
    "created_at": "2022-06-05T13:43:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512698",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:11" align="right">comment:11</div>

Part of the issue is fixed incidentally by #33953.

The branch fixes other issues related with the identity morphisms.



---

archive/issue_comments_512699.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e9b7d378f55b53d7795ae2d6a6afa6e254b58ed\">7e9b7d3</a></td><td><code>Fix some doctests</code></td></tr></table>\n",
    "created_at": "2022-06-05T13:55:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512699",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e9b7d378f55b53d7795ae2d6a6afa6e254b58ed">7e9b7d3</a></td><td><code>Fix some doctests</code></td></tr></table>




---

archive/issue_comments_512700.json:
```json
{
    "body": "Changed commit from **[9b0ba8f](https://github.com/sagemath/sagetrac-mirror/commit/9b0ba8fbd1501f03548d2eab228c6f6c868ae4e3)** to **[7e9b7d3](https://github.com/sagemath/sagetrac-mirror/commit/7e9b7d378f55b53d7795ae2d6a6afa6e254b58ed)**",
    "created_at": "2022-06-05T13:55:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512700",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9b0ba8f](https://github.com/sagemath/sagetrac-mirror/commit/9b0ba8fbd1501f03548d2eab228c6f6c868ae4e3)** to **[7e9b7d3](https://github.com/sagemath/sagetrac-mirror/commit/7e9b7d378f55b53d7795ae2d6a6afa6e254b58ed)**



---

archive/issue_comments_512701.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,35 +1,24 @@\n-`src/sage/schemes/plane_conics/con_field.py` documents ~~mathematically~~ incorrect behavior:\n+The final output here is wrong:\n \n ```\n-            sage: c = Conic(GF(2), [1,1,1,1,1,0])\n-            sage: c.parametrization()\n-            (Scheme morphism:\n-              From: Projective Space of dimension 1 over Finite Field of size 2\n-              To:   Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y\n-            + y^2 + x*z + y*z\n-              Defn: Defined on coordinates by sending (x : y) to\n-                    (x*y + y^2 : x^2 + x*y : x^2 + x*y + y^2),\n-             Scheme morphism:\n-              From: Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y\n-            + y^2 + x*z + y*z\n-              To:   Projective Space of dimension 1 over Finite Field of size 2\n-              Defn: Defined on coordinates by sending (x : y : z) to\n-                    (y : x))\n-```\n-\n-The second map is ~~supposed to be~~ an inverse~~, however it is not even well-defined (`(0 : 0 : 1)`). The correct inverse should be:\n-`Defined on coordinates by sending (x : y : z) to (x + z : y + z)`~~\n-\n-~~This is a perfect example how a simple sanity check~~\n-\n-```\n+sage: c = Conic(GF(2), [1,1,1,1,1,0])\n+....: \n+sage: c.parametrization()\n+(Scheme morphism:\n+   From: Projective Space of dimension 1 over Finite Field of size 2\n+   To:   Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z\n+   Defn: Defined on coordinates by sending (x : y) to\n+         (x*y + y^2 : x^2 + x*y : x^2 + x*y + y^2),\n+ Scheme morphism:\n+   From: Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z\n+   To:   Projective Space of dimension 1 over Finite Field of size 2\n+   Defn: Defined on coordinates by sending (x : y : z) to\n+         (y : x))\n sage: f, g = c.parametrization()\n sage: (g*f).is_one()\n-...\n+False\n ```\n-~~or similar can prevent things like this.~~\n-\n-The bug is not limited to finite fields:\n+The same here:\n \n ```\n sage: R.<x,y,z> = QQ[]                                                                                                                                                              \n``````\n",
    "created_at": "2022-06-05T14:02:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512701",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,35 +1,24 @@
-`src/sage/schemes/plane_conics/con_field.py` documents ~~mathematically~~ incorrect behavior:
+The final output here is wrong:
 
 ```
-            sage: c = Conic(GF(2), [1,1,1,1,1,0])
-            sage: c.parametrization()
-            (Scheme morphism:
-              From: Projective Space of dimension 1 over Finite Field of size 2
-              To:   Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y
-            + y^2 + x*z + y*z
-              Defn: Defined on coordinates by sending (x : y) to
-                    (x*y + y^2 : x^2 + x*y : x^2 + x*y + y^2),
-             Scheme morphism:
-              From: Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y
-            + y^2 + x*z + y*z
-              To:   Projective Space of dimension 1 over Finite Field of size 2
-              Defn: Defined on coordinates by sending (x : y : z) to
-                    (y : x))
-```
-
-The second map is ~~supposed to be~~ an inverse~~, however it is not even well-defined (`(0 : 0 : 1)`). The correct inverse should be:
-`Defined on coordinates by sending (x : y : z) to (x + z : y + z)`~~
-
-~~This is a perfect example how a simple sanity check~~
-
-```
+sage: c = Conic(GF(2), [1,1,1,1,1,0])
+....: 
+sage: c.parametrization()
+(Scheme morphism:
+   From: Projective Space of dimension 1 over Finite Field of size 2
+   To:   Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z
+   Defn: Defined on coordinates by sending (x : y) to
+         (x*y + y^2 : x^2 + x*y : x^2 + x*y + y^2),
+ Scheme morphism:
+   From: Projective Conic Curve over Finite Field of size 2 defined by x^2 + x*y + y^2 + x*z + y*z
+   To:   Projective Space of dimension 1 over Finite Field of size 2
+   Defn: Defined on coordinates by sending (x : y : z) to
+         (y : x))
 sage: f, g = c.parametrization()
 sage: (g*f).is_one()
-...
+False
 ```
-~~or similar can prevent things like this.~~
-
-The bug is not limited to finite fields:
+The same here:
 
 ```
 sage: R.<x,y,z> = QQ[]                                                                                                                                                              
``````




---

archive/issue_comments_512702.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nWith #33953, this `g([0, -1, 2])` gives the correct answer.",
    "created_at": "2022-06-05T14:03:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512702",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:14" align="right">comment:14</div>

With #33953, this `g([0, -1, 2])` gives the correct answer.



---

archive/issue_comments_512703.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f89842e42290f3741bf85cfee37754d64c16e203\">f89842e</a></td><td><code>Fix more doctest errors</code></td></tr></table>\n",
    "created_at": "2022-06-05T14:31:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512703",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f89842e42290f3741bf85cfee37754d64c16e203">f89842e</a></td><td><code>Fix more doctest errors</code></td></tr></table>




---

archive/issue_comments_512704.json:
```json
{
    "body": "Changed commit from **[7e9b7d3](https://github.com/sagemath/sagetrac-mirror/commit/7e9b7d378f55b53d7795ae2d6a6afa6e254b58ed)** to **[f89842e](https://github.com/sagemath/sagetrac-mirror/commit/f89842e42290f3741bf85cfee37754d64c16e203)**",
    "created_at": "2022-06-05T14:31:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512704",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7e9b7d3](https://github.com/sagemath/sagetrac-mirror/commit/7e9b7d378f55b53d7795ae2d6a6afa6e254b58ed)** to **[f89842e](https://github.com/sagemath/sagetrac-mirror/commit/f89842e42290f3741bf85cfee37754d64c16e203)**



---

archive/issue_comments_512705.json:
```json
{
    "body": "Changed commit from **[f89842e](https://github.com/sagemath/sagetrac-mirror/commit/f89842e42290f3741bf85cfee37754d64c16e203)** to **[78ba3a9](https://github.com/sagemath/sagetrac-mirror/commit/78ba3a9ef3ececcf5a91c269210cbe7a4dafbb0a)**",
    "created_at": "2022-06-06T02:24:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512705",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f89842e](https://github.com/sagemath/sagetrac-mirror/commit/f89842e42290f3741bf85cfee37754d64c16e203)** to **[78ba3a9](https://github.com/sagemath/sagetrac-mirror/commit/78ba3a9ef3ececcf5a91c269210cbe7a4dafbb0a)**



---

archive/issue_comments_512706.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78ba3a9ef3ececcf5a91c269210cbe7a4dafbb0a\">78ba3a9</a></td><td><code>Fix morphism of conics</code></td></tr></table>\n",
    "created_at": "2022-06-06T02:24:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512706",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78ba3a9ef3ececcf5a91c269210cbe7a4dafbb0a">78ba3a9</a></td><td><code>Fix morphism of conics</code></td></tr></table>




---

archive/issue_comments_512707.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThe last commit contains fixes so that `g([0, -1, 2])` gives the correct answer.",
    "created_at": "2022-06-06T02:26:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512707",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:17" align="right">comment:17</div>

The last commit contains fixes so that `g([0, -1, 2])` gives the correct answer.



---

archive/issue_comments_512708.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nSorry for my ignorance, but I am unable to merge this ticket on top of [SageMath](../wiki/SageMath) 9.7.beta3 plus #28263 #32340 #33213 #33619 #33840 #33854 #33974 #33978 #33979 #33984 #33985 #33987 #33990 #33991 #33992 #33993 #33996 #34001 #34007 #34008 #34009 #34010 #34014 #34019 #34021 #34022 #34025 #34030 #34034 #34035 #34036 #34037 (all of them positively reviewed):\n\n```\n% git clone -c core.symlinks=true --branch develop --tags https://github.com/sagemath/sage.git\n[...]\n% cd sage\n% git-trac-merge 28263 32340 33213 33619 33840 33854 33974 33978 33979 33984 33985 33987 33990 33991 33992 33993 33996 34001 34007 34008 34009 34010 34014 34019 34021 34022 34025 34030 34034 34035 34036 34037\n[...]\n% git-trac-merge 31892\n\n#31892\nremote branch: u/klee/31892\n\nFrom git://trac.sagemath.org/sage\n * branch                  u/klee/31892 -> FETCH_HEAD\n\nAuto-merging src/sage/schemes/toric/homset.py\nAuto-merging src/sage/schemes/projective/projective_space.py\nAuto-merging src/sage/schemes/generic/scheme.py\nAuto-merging src/sage/schemes/generic/morphism.py\nCONFLICT (content): Merge conflict in src/sage/schemes/generic/morphism.py\nAutomatic merge failed; fix conflicts and then commit the result.\n% \n```",
    "created_at": "2022-06-21T14:21:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512708",
    "user": "https://github.com/GMS103"
}
```

<div id="comment:18" align="right">comment:18</div>

Sorry for my ignorance, but I am unable to merge this ticket on top of [SageMath](../wiki/SageMath) 9.7.beta3 plus #28263 #32340 #33213 #33619 #33840 #33854 #33974 #33978 #33979 #33984 #33985 #33987 #33990 #33991 #33992 #33993 #33996 #34001 #34007 #34008 #34009 #34010 #34014 #34019 #34021 #34022 #34025 #34030 #34034 #34035 #34036 #34037 (all of them positively reviewed):

```
% git clone -c core.symlinks=true --branch develop --tags https://github.com/sagemath/sage.git
[...]
% cd sage
% git-trac-merge 28263 32340 33213 33619 33840 33854 33974 33978 33979 33984 33985 33987 33990 33991 33992 33993 33996 34001 34007 34008 34009 34010 34014 34019 34021 34022 34025 34030 34034 34035 34036 34037
[...]
% git-trac-merge 31892

#31892
remote branch: u/klee/31892

From git://trac.sagemath.org/sage
 * branch                  u/klee/31892 -> FETCH_HEAD

Auto-merging src/sage/schemes/toric/homset.py
Auto-merging src/sage/schemes/projective/projective_space.py
Auto-merging src/sage/schemes/generic/scheme.py
Auto-merging src/sage/schemes/generic/morphism.py
CONFLICT (content): Merge conflict in src/sage/schemes/generic/morphism.py
Automatic merge failed; fix conflicts and then commit the result.
% 
```



---

archive/issue_comments_512709.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bc6d3f38d77473542024eb491303768fa04df68\">0bc6d3f</a></td><td><code>Merge branch 'develop'</code></td></tr></table>\n",
    "created_at": "2022-06-21T16:06:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512709",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bc6d3f38d77473542024eb491303768fa04df68">0bc6d3f</a></td><td><code>Merge branch 'develop'</code></td></tr></table>




---

archive/issue_comments_512710.json:
```json
{
    "body": "Changed commit from **[78ba3a9](https://github.com/sagemath/sagetrac-mirror/commit/78ba3a9ef3ececcf5a91c269210cbe7a4dafbb0a)** to **[0bc6d3f](https://github.com/sagemath/sagetrac-mirror/commit/0bc6d3f38d77473542024eb491303768fa04df68)**",
    "created_at": "2022-06-21T16:06:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512710",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[78ba3a9](https://github.com/sagemath/sagetrac-mirror/commit/78ba3a9ef3ececcf5a91c269210cbe7a4dafbb0a)** to **[0bc6d3f](https://github.com/sagemath/sagetrac-mirror/commit/0bc6d3f38d77473542024eb491303768fa04df68)**



---

archive/issue_comments_512711.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@GMS103](#comment:18):\n> Sorry for my ignorance, but I am unable to merge this ticket on top of [SageMath](../wiki/SageMath) 9.7.beta3 plus #28263 #32340 #33213 #33619 #33840 #33854 #33974 #33978 #33979 #33984 #33985 #33987 #33990 #33991 #33992 #33993 #33996 #34001 #34007 #34008 #34009 #34010 #34014 #34019 #34021 #34022 #34025 #34030 #34034 #34035 #34036 #34037 (all of them positively reviewed)\n\nUploaded the merge with 9.7.beta3. The release manager will decide which of conflicting positively reviewed tickets are merged first to the next beta.",
    "created_at": "2022-06-21T16:12:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512711",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@GMS103](#comment:18):
> Sorry for my ignorance, but I am unable to merge this ticket on top of [SageMath](../wiki/SageMath) 9.7.beta3 plus #28263 #32340 #33213 #33619 #33840 #33854 #33974 #33978 #33979 #33984 #33985 #33987 #33990 #33991 #33992 #33993 #33996 #34001 #34007 #34008 #34009 #34010 #34014 #34019 #34021 #34022 #34025 #34030 #34034 #34035 #34036 #34037 (all of them positively reviewed)

Uploaded the merge with 9.7.beta3. The release manager will decide which of conflicting positively reviewed tickets are merged first to the next beta.



---

archive/issue_comments_512712.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThanks for explaining.",
    "created_at": "2022-06-21T18:30:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512712",
    "user": "https://github.com/GMS103"
}
```

<div id="comment:21" align="right">comment:21</div>

Thanks for explaining.



---

archive/issue_comments_512713.json:
```json
{
    "body": "Changed commit from **[0bc6d3f](https://github.com/sagemath/sagetrac-mirror/commit/0bc6d3f38d77473542024eb491303768fa04df68)** to **[39ed047](https://github.com/sagemath/sagetrac-mirror/commit/39ed047be8cc09c0426d2cc18d9ec3c3574d3bc9)**",
    "created_at": "2022-07-25T08:04:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512713",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0bc6d3f](https://github.com/sagemath/sagetrac-mirror/commit/0bc6d3f38d77473542024eb491303768fa04df68)** to **[39ed047](https://github.com/sagemath/sagetrac-mirror/commit/39ed047be8cc09c0426d2cc18d9ec3c3574d3bc9)**



---

archive/issue_comments_512714.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/39ed047be8cc09c0426d2cc18d9ec3c3574d3bc9\">39ed047</a></td><td><code>Merge branch develop</code></td></tr></table>\n",
    "created_at": "2022-07-25T08:04:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512714",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/39ed047be8cc09c0426d2cc18d9ec3c3574d3bc9">39ed047</a></td><td><code>Merge branch develop</code></td></tr></table>




---

archive/issue_events_439749.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2022-08-26T14:12:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439749"
}
```



---

archive/issue_events_439750.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2022-08-26T14:12:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439750"
}
```



---

archive/issue_comments_512715.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI see that #33953 was changed 4 days ago. Does that mean that this ticket needs work as well?\n\nBy the way, this ticket fixes `(g*f).is_one()`, but leaves `(f*g).is_one()` incorrect. Could something be done about that at the same time, or would that need a separate ticket? With either example from the ticket description, I get\n\n```\nsage: (f*g).is_one()\nFalse\nsage: (f*g).representatives()[0]\nScheme endomorphism of Projective Conic Curve over ... defined by ...\n  Defn: Defined on coordinates by sending (x : y : z) to\n        (x : y : z)\n```\nThe first output should be `True`. The parametrization is correct as shown by the second output.",
    "created_at": "2022-08-26T14:12:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512715",
    "user": "https://github.com/mstreng"
}
```

<div id="comment:23" align="right">comment:23</div>

I see that #33953 was changed 4 days ago. Does that mean that this ticket needs work as well?

By the way, this ticket fixes `(g*f).is_one()`, but leaves `(f*g).is_one()` incorrect. Could something be done about that at the same time, or would that need a separate ticket? With either example from the ticket description, I get

```
sage: (f*g).is_one()
False
sage: (f*g).representatives()[0]
Scheme endomorphism of Projective Conic Curve over ... defined by ...
  Defn: Defined on coordinates by sending (x : y : z) to
        (x : y : z)
```
The first output should be `True`. The parametrization is correct as shown by the second output.



---

archive/issue_comments_512716.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@mstreng](#comment:23):\n> I see that #33953 was changed 4 days ago. Does that mean that this ticket needs work as well?\n\nYes. There is a merge conflict. I will soon push the merge with #33953.\n\n> By the way, this ticket fixes `(g*f).is_one()`, but leaves `(f*g).is_one()` incorrect. Could something be done about that at the same time, or would that need a separate ticket? \n\nRight. `(g*f).is_one()` works correctly because g*f is a morphism of a projective line, where equality check works correctly. `f*g` gives wrong result because correct equality check is not done(not implemented) for morphisms of projective subschemes.\n\nI suggest to open a separate ticket to solve the problem of `f*g`.",
    "created_at": "2022-08-26T15:35:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512716",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@mstreng](#comment:23):
> I see that #33953 was changed 4 days ago. Does that mean that this ticket needs work as well?

Yes. There is a merge conflict. I will soon push the merge with #33953.

> By the way, this ticket fixes `(g*f).is_one()`, but leaves `(f*g).is_one()` incorrect. Could something be done about that at the same time, or would that need a separate ticket? 

Right. `(g*f).is_one()` works correctly because g*f is a morphism of a projective line, where equality check works correctly. `f*g` gives wrong result because correct equality check is not done(not implemented) for morphisms of projective subschemes.

I suggest to open a separate ticket to solve the problem of `f*g`.



---

archive/issue_comments_512717.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/817e341d90a0b47e747bf1b7cb948c3421cb9520\">817e341</a></td><td><code>Merge branch 'develop' into t/33953/degree-morphism</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/736d44825f37dc0add60118e89da1964aaf89e1b\">736d448</a></td><td><code>Moving the main computation to be done on demand.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5285e67cfe80b7f42343373c40f92131b5d48c68\">5285e67</a></td><td><code>Moving Singular conversion code to libs/singular; converting resoltuion files to Python files.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5917129241b4f214506fe27f6a04ed14ea8bbb22\">5917129</a></td><td><code>Changing the doc for clarity and to add some more descriptions.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f1d1c306a1fb4ff7b17f8d27ed50c4e3b291ab0\">3f1d1c3</a></td><td><code>Merge branch 'develop' into t/33950/public/rings/free_multigraded_resolutions-33950</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab725f2de9f18cd692b6828e8978842c4a4b98b0\">ab725f2</a></td><td><code>Fix spaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dabe7655599e62e9815fe62b92024db3c29484d7\">dabe765</a></td><td><code>Merge branch 't/33950/public/rings/free_multigraded_resolutions-33950' into t/33953/degree-morphism</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3947c02c971518be4df1267b496b2498b7080bbd\">3947c02</a></td><td><code>Refactor conic curves</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac60efe8687e7f1659615a133b0dbba909d2dd1f\">ac60efe</a></td><td><code>Fixes for reviewer comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d7124e6decdbe943e5418bd034f60f8c91728b3\">1d7124e</a></td><td><code>Merge branch 't/33953/degree-morphism'</code></td></tr></table>\n",
    "created_at": "2022-08-26T15:36:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512717",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/817e341d90a0b47e747bf1b7cb948c3421cb9520">817e341</a></td><td><code>Merge branch 'develop' into t/33953/degree-morphism</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/736d44825f37dc0add60118e89da1964aaf89e1b">736d448</a></td><td><code>Moving the main computation to be done on demand.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5285e67cfe80b7f42343373c40f92131b5d48c68">5285e67</a></td><td><code>Moving Singular conversion code to libs/singular; converting resoltuion files to Python files.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5917129241b4f214506fe27f6a04ed14ea8bbb22">5917129</a></td><td><code>Changing the doc for clarity and to add some more descriptions.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f1d1c306a1fb4ff7b17f8d27ed50c4e3b291ab0">3f1d1c3</a></td><td><code>Merge branch 'develop' into t/33950/public/rings/free_multigraded_resolutions-33950</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab725f2de9f18cd692b6828e8978842c4a4b98b0">ab725f2</a></td><td><code>Fix spaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dabe7655599e62e9815fe62b92024db3c29484d7">dabe765</a></td><td><code>Merge branch 't/33950/public/rings/free_multigraded_resolutions-33950' into t/33953/degree-morphism</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3947c02c971518be4df1267b496b2498b7080bbd">3947c02</a></td><td><code>Refactor conic curves</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac60efe8687e7f1659615a133b0dbba909d2dd1f">ac60efe</a></td><td><code>Fixes for reviewer comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d7124e6decdbe943e5418bd034f60f8c91728b3">1d7124e</a></td><td><code>Merge branch 't/33953/degree-morphism'</code></td></tr></table>




---

archive/issue_comments_512718.json:
```json
{
    "body": "Changed commit from **[39ed047](https://github.com/sagemath/sagetrac-mirror/commit/39ed047be8cc09c0426d2cc18d9ec3c3574d3bc9)** to **[1d7124e](https://github.com/sagemath/sagetrac-mirror/commit/1d7124e6decdbe943e5418bd034f60f8c91728b3)**",
    "created_at": "2022-08-26T15:36:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512718",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[39ed047](https://github.com/sagemath/sagetrac-mirror/commit/39ed047be8cc09c0426d2cc18d9ec3c3574d3bc9)** to **[1d7124e](https://github.com/sagemath/sagetrac-mirror/commit/1d7124e6decdbe943e5418bd034f60f8c91728b3)**



---

archive/issue_events_439751.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-08-26T15:36:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439751"
}
```



---

archive/issue_events_439752.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-08-26T15:36:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439752"
}
```



---

archive/issue_comments_512719.json:
```json
{
    "body": "Dependencies: **#33953**",
    "created_at": "2022-08-26T15:36:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512719",
    "user": "https://github.com/kwankyu"
}
```

Dependencies: **#33953**



---

archive/issue_comments_512720.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@kwankyu](#comment:24):\n> I suggest to open a separate ticket to solve the problem of `f*g`.\n\nSince this is not a problem of conic parametrization.",
    "created_at": "2022-08-26T15:41:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512720",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@kwankyu](#comment:24):
> I suggest to open a separate ticket to solve the problem of `f*g`.

Since this is not a problem of conic parametrization.



---

archive/issue_comments_512721.json:
```json
{
    "body": "Changed commit from **[1d7124e](https://github.com/sagemath/sagetrac-mirror/commit/1d7124e6decdbe943e5418bd034f60f8c91728b3)** to **[c95d429](https://github.com/sagemath/sagetrac-mirror/commit/c95d42979c5f0a0c12b725fcb7f139f1954b3e80)**",
    "created_at": "2022-09-01T13:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512721",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1d7124e](https://github.com/sagemath/sagetrac-mirror/commit/1d7124e6decdbe943e5418bd034f60f8c91728b3)** to **[c95d429](https://github.com/sagemath/sagetrac-mirror/commit/c95d42979c5f0a0c12b725fcb7f139f1954b3e80)**



---

archive/issue_comments_512722.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c95d42979c5f0a0c12b725fcb7f139f1954b3e80\">c95d429</a></td><td><code>Refactor identity morphism</code></td></tr></table>\n",
    "created_at": "2022-09-01T13:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512722",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c95d42979c5f0a0c12b725fcb7f139f1954b3e80">c95d429</a></td><td><code>Refactor identity morphism</code></td></tr></table>




---

archive/issue_comments_512723.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nAll fixed.",
    "created_at": "2022-09-01T13:22:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512723",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:29" align="right">comment:29</div>

All fixed.



---

archive/issue_events_439753.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-09-01T13:24:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439753"
}
```



---

archive/issue_events_439754.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-09-01T13:24:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439754"
}
```



---

archive/issue_events_439755.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-09-01T13:24:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439755"
}
```



---

archive/issue_events_439756.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-09-01T13:24:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439756"
}
```



---

archive/issue_comments_512724.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9982f331afc48287f70eb4adf3895a9f49c98c7\">d9982f3</a></td><td><code>Extend to morphisms to affine spaces</code></td></tr></table>\n",
    "created_at": "2022-09-01T16:40:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512724",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9982f331afc48287f70eb4adf3895a9f49c98c7">d9982f3</a></td><td><code>Extend to morphisms to affine spaces</code></td></tr></table>




---

archive/issue_comments_512725.json:
```json
{
    "body": "Changed commit from **[c95d429](https://github.com/sagemath/sagetrac-mirror/commit/c95d42979c5f0a0c12b725fcb7f139f1954b3e80)** to **[d9982f3](https://github.com/sagemath/sagetrac-mirror/commit/d9982f331afc48287f70eb4adf3895a9f49c98c7)**",
    "created_at": "2022-09-01T16:40:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512725",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c95d429](https://github.com/sagemath/sagetrac-mirror/commit/c95d42979c5f0a0c12b725fcb7f139f1954b3e80)** to **[d9982f3](https://github.com/sagemath/sagetrac-mirror/commit/d9982f331afc48287f70eb4adf3895a9f49c98c7)**



---

archive/issue_comments_512726.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e66bb26d47f38e523e652b1ebfaecec4b3251ea9\">e66bb26</a></td><td><code>Minor edits</code></td></tr></table>\n",
    "created_at": "2022-09-01T16:55:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512726",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e66bb26d47f38e523e652b1ebfaecec4b3251ea9">e66bb26</a></td><td><code>Minor edits</code></td></tr></table>




---

archive/issue_comments_512727.json:
```json
{
    "body": "Changed commit from **[d9982f3](https://github.com/sagemath/sagetrac-mirror/commit/d9982f331afc48287f70eb4adf3895a9f49c98c7)** to **[e66bb26](https://github.com/sagemath/sagetrac-mirror/commit/e66bb26d47f38e523e652b1ebfaecec4b3251ea9)**",
    "created_at": "2022-09-01T16:55:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512727",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d9982f3](https://github.com/sagemath/sagetrac-mirror/commit/d9982f331afc48287f70eb4adf3895a9f49c98c7)** to **[e66bb26](https://github.com/sagemath/sagetrac-mirror/commit/e66bb26d47f38e523e652b1ebfaecec4b3251ea9)**



---

archive/issue_comments_512728.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nAdded Cremona's example :) Needs review.",
    "created_at": "2022-09-01T16:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512728",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:33" align="right">comment:33</div>

Added Cremona's example :) Needs review.



---

archive/issue_comments_512729.json:
```json
{
    "body": "Changed commit from **[e66bb26](https://github.com/sagemath/sagetrac-mirror/commit/e66bb26d47f38e523e652b1ebfaecec4b3251ea9)** to **[527c3a4](https://github.com/sagemath/sagetrac-mirror/commit/527c3a41ac435f17a5092c464d29b6ae5171b575)**",
    "created_at": "2022-09-11T02:51:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512729",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e66bb26](https://github.com/sagemath/sagetrac-mirror/commit/e66bb26d47f38e523e652b1ebfaecec4b3251ea9)** to **[527c3a4](https://github.com/sagemath/sagetrac-mirror/commit/527c3a41ac435f17a5092c464d29b6ae5171b575)**



---

archive/issue_comments_512730.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/527c3a41ac435f17a5092c464d29b6ae5171b575\">527c3a4</a></td><td><code>Merge branch 'develop' into t/31892/31892</code></td></tr></table>\n",
    "created_at": "2022-09-11T02:51:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512730",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/527c3a41ac435f17a5092c464d29b6ae5171b575">527c3a4</a></td><td><code>Merge branch 'develop' into t/31892/31892</code></td></tr></table>




---

archive/issue_comments_512731.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nRebased onto the latest develop branch, with the side purpose of checking trac after recent maintenance.",
    "created_at": "2022-09-11T02:54:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512731",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:35" align="right">comment:35</div>

Rebased onto the latest develop branch, with the side purpose of checking trac after recent maintenance.



---

archive/issue_comments_512732.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nTests pass. Code looks good. Just one thing before giving this a positive review:\n\nCould you change the following mathematically incorrect example?\n\n```\nsage: C = Curve(x^2 + y^2 - z^2)\nsage: A.<u> = AffineSpace(QQ, 1)\nsage: f = C.hom([(x + z)/y], A)\nsage: g = C.hom([y/(z - x)], A)\nsage: f == g\nTrue\n```\nThe reason: it relies on mathematically incorrect behaviour of [SageMath](../wiki/SageMath). There are no non-constant morphisms from C to A. Indeed, all non-constant morphisms from C to P<sup>1</sup> are surjective, hence do not land inside A. For example, f((1:0:1)) is not defined as an element of A. [SageMath](../wiki/SageMath) incorrectly claims that f is a morphism, as follows:\n\n```\nsage: R.<x,y,z> = QQ[]                                                                                                      \nsage: C = Curve(x^2 + y^2 - z^2)                                                                                            \nsage: A.<u> = AffineSpace(QQ, 1)                                                                                            \nsage: f = C.hom([(x + z)/y], A)                                                                                             \nsage: f                                                                                                                     \nScheme morphism:\n  From: Projective Conic Curve over Rational Field defined by x^2 + y^2 - z^2\n  To:   Affine Space of dimension 1 over Rational Field\n  Defn: Defined on coordinates by sending (x : y : z) to\n        ((x + z)/y)\nsage: f.parent()                                                                                                            \nSet of morphisms\n  From: Projective Conic Curve over Rational Field defined by x^2 + y^2 - z^2\n  To:   Affine Space of dimension 1 over Rational Field\n```\nThis behaviour is not introduced at this ticket, but was already there in e.g. [SageMath](../wiki/SageMath) 9.5, so you do not need to fix it. But we should not add examples to the documentation that rely on this incorrect behaviour.\nPerhaps you could change the example as follows:\n\n```\nsage: C = Curve(x^2 + y^2 - z^2)\nsage: P.<u,v> = ProjectiveSpace(QQ, 1)\nsage: f = C.hom([x + z, y], P)\nsage: g = C.hom([y, z - x], P)\nsage: f == g\nTrue\n```\nAnd/or you could give constant examples with codomain A. And perhaps you could also add an h for which f == h is False.",
    "created_at": "2022-10-14T10:16:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512732",
    "user": "https://github.com/mstreng"
}
```

<div id="comment:36" align="right">comment:36</div>

Tests pass. Code looks good. Just one thing before giving this a positive review:

Could you change the following mathematically incorrect example?

```
sage: C = Curve(x^2 + y^2 - z^2)
sage: A.<u> = AffineSpace(QQ, 1)
sage: f = C.hom([(x + z)/y], A)
sage: g = C.hom([y/(z - x)], A)
sage: f == g
True
```
The reason: it relies on mathematically incorrect behaviour of [SageMath](../wiki/SageMath). There are no non-constant morphisms from C to A. Indeed, all non-constant morphisms from C to P<sup>1</sup> are surjective, hence do not land inside A. For example, f((1:0:1)) is not defined as an element of A. [SageMath](../wiki/SageMath) incorrectly claims that f is a morphism, as follows:

```
sage: R.<x,y,z> = QQ[]                                                                                                      
sage: C = Curve(x^2 + y^2 - z^2)                                                                                            
sage: A.<u> = AffineSpace(QQ, 1)                                                                                            
sage: f = C.hom([(x + z)/y], A)                                                                                             
sage: f                                                                                                                     
Scheme morphism:
  From: Projective Conic Curve over Rational Field defined by x^2 + y^2 - z^2
  To:   Affine Space of dimension 1 over Rational Field
  Defn: Defined on coordinates by sending (x : y : z) to
        ((x + z)/y)
sage: f.parent()                                                                                                            
Set of morphisms
  From: Projective Conic Curve over Rational Field defined by x^2 + y^2 - z^2
  To:   Affine Space of dimension 1 over Rational Field
```
This behaviour is not introduced at this ticket, but was already there in e.g. [SageMath](../wiki/SageMath) 9.5, so you do not need to fix it. But we should not add examples to the documentation that rely on this incorrect behaviour.
Perhaps you could change the example as follows:

```
sage: C = Curve(x^2 + y^2 - z^2)
sage: P.<u,v> = ProjectiveSpace(QQ, 1)
sage: f = C.hom([x + z, y], P)
sage: g = C.hom([y, z - x], P)
sage: f == g
True
```
And/or you could give constant examples with codomain A. And perhaps you could also add an h for which f == h is False.



---

archive/issue_events_439757.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2022-10-14T10:16:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439757"
}
```



---

archive/issue_events_439758.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2022-10-14T10:16:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439758"
}
```



---

archive/issue_comments_512733.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c789509864ccf3c2a4e5ec3df0a9695e2091735d\">c789509</a></td><td><code>Merge branch 'develop' into t/31892/31892</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2af690766e1439a85eb9ad38bc1cca330b12ef0\">b2af690</a></td><td><code>Fix an errorneous example</code></td></tr></table>\n",
    "created_at": "2022-10-14T12:02:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512733",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c789509864ccf3c2a4e5ec3df0a9695e2091735d">c789509</a></td><td><code>Merge branch 'develop' into t/31892/31892</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2af690766e1439a85eb9ad38bc1cca330b12ef0">b2af690</a></td><td><code>Fix an errorneous example</code></td></tr></table>




---

archive/issue_comments_512734.json:
```json
{
    "body": "Changed commit from **[527c3a4](https://github.com/sagemath/sagetrac-mirror/commit/527c3a41ac435f17a5092c464d29b6ae5171b575)** to **[b2af690](https://github.com/sagemath/sagetrac-mirror/commit/b2af690766e1439a85eb9ad38bc1cca330b12ef0)**",
    "created_at": "2022-10-14T12:02:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512734",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[527c3a4](https://github.com/sagemath/sagetrac-mirror/commit/527c3a41ac435f17a5092c464d29b6ae5171b575)** to **[b2af690](https://github.com/sagemath/sagetrac-mirror/commit/b2af690766e1439a85eb9ad38bc1cca330b12ef0)**



---

archive/issue_events_439759.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-10-14T12:06:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439759"
}
```



---

archive/issue_events_439760.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2022-10-14T12:06:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439760"
}
```



---

archive/issue_comments_512735.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [Marco Streng](#comment:36):\n> Could you change the following mathematically incorrect example?\n> \n> ```\n> sage: C = Curve(x^2 + y^2 - z^2)\n> sage: A.<u> = AffineSpace(QQ, 1)\n> sage: f = C.hom([(x + z)/y], A)\n> sage: g = C.hom([y/(z - x)], A)\n> sage: f == g\n> True\n> ```\n> The reason: it relies on mathematically incorrect behaviour of [SageMath](../wiki/SageMath). There are no non-constant morphisms from C to A. Indeed, all non-constant morphisms from C to P<sup>1</sup> are surjective, hence do not land inside A. For example, f((1:0:1)) is not defined as an element of A. \n\nYou are right. I wonder how I transformed John's correct example to a wrong one!\n\n> Perhaps you could change the example as follows:\n> \n> ```\n> sage: C = Curve(x^2 + y^2 - z^2)\n> sage: P.<u,v> = ProjectiveSpace(QQ, 1)\n> sage: f = C.hom([x + z, y], P)\n> sage: g = C.hom([y, z - x], P)\n> sage: f == g\n> True\n> ```\n> and perhaps you could also add an h for which f == h is False.\n\nI did this. Thank you.",
    "created_at": "2022-10-14T12:06:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512735",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [Marco Streng](#comment:36):
> Could you change the following mathematically incorrect example?
> 
> ```
> sage: C = Curve(x^2 + y^2 - z^2)
> sage: A.<u> = AffineSpace(QQ, 1)
> sage: f = C.hom([(x + z)/y], A)
> sage: g = C.hom([y/(z - x)], A)
> sage: f == g
> True
> ```
> The reason: it relies on mathematically incorrect behaviour of [SageMath](../wiki/SageMath). There are no non-constant morphisms from C to A. Indeed, all non-constant morphisms from C to P<sup>1</sup> are surjective, hence do not land inside A. For example, f((1:0:1)) is not defined as an element of A. 

You are right. I wonder how I transformed John's correct example to a wrong one!

> Perhaps you could change the example as follows:
> 
> ```
> sage: C = Curve(x^2 + y^2 - z^2)
> sage: P.<u,v> = ProjectiveSpace(QQ, 1)
> sage: f = C.hom([x + z, y], P)
> sage: g = C.hom([y, z - x], P)
> sage: f == g
> True
> ```
> and perhaps you could also add an h for which f == h is False.

I did this. Thank you.



---

archive/issue_comments_512736.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nThanks to all (both) of you for working on this.",
    "created_at": "2022-10-14T13:41:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512736",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:39" align="right">comment:39</div>

Thanks to all (both) of you for working on this.



---

archive/issue_events_439761.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2022-10-20T13:05:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439761"
}
```



---

archive/issue_events_439762.json:
```json
{
    "actor": "https://github.com/mstreng",
    "created_at": "2022-10-20T13:05:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439762"
}
```



---

archive/issue_comments_512737.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [Marco Streng](#comment:36):\n> Just one thing before giving this a positive review\n\nThanks for fixing this. Looks good to me.",
    "created_at": "2022-10-20T13:05:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512737",
    "user": "https://github.com/mstreng"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [Marco Streng](#comment:36):
> Just one thing before giving this a positive review

Thanks for fixing this. Looks good to me.



---

archive/issue_comments_512738.json:
```json
{
    "body": "Reviewer: **Marco Streng**",
    "created_at": "2022-10-20T13:05:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512738",
    "user": "https://github.com/mstreng"
}
```

Reviewer: **Marco Streng**



---

archive/issue_comments_512739.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThanks for the review!",
    "created_at": "2022-10-21T00:45:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512739",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:42" align="right">comment:42</div>

Thanks for the review!



---

archive/issue_comments_512740.json:
```json
{
    "body": "Changed branch from **[u/klee/31892](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/31892)** to **[b2af690](https://github.com/sagemath/sagetrac-mirror/commit/b2af690766e1439a85eb9ad38bc1cca330b12ef0)**",
    "created_at": "2022-10-23T20:49:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31892#issuecomment-512740",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/klee/31892](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/31892)** to **[b2af690](https://github.com/sagemath/sagetrac-mirror/commit/b2af690766e1439a85eb9ad38bc1cca330b12ef0)**



---

archive/issue_events_439763.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-10-23T20:49:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439763"
}
```



---

archive/issue_events_439764.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "36ad46e7748205c2cf61d9c177e0a7e013fe6dd8",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-10-23T20:49:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31892",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31892#event-439764"
}
```
