# Issue 31619: Cholesky factorization and positive-definite testing over inexact rings

archive/issues_031382.json:
```json
{
    "assignees": [],
    "body": "As promised in #13674, I refactor some things to support `cholesky()` and `is_positive_definite()` over inexact rings. The main idea is to use the `block_ldlt()` method that supports inexact rings instead of `indefinite_factorization()` which does not.\n\nControversial bits:\n\n1. The `certificate` argument to `is_positive_definite()` has been removed. This lets us unify the interface and implementation with `is_positive_semidefinite()`. If the user wants the factorization (which is all the certificate was), he can still ask for it directly.\n\n2. I've left the `indefinite_factorization` method alone even though it is largely superseded by `block_ldlt(classical=True)`. Does anyone want to factorize complex matrices that are symmetric but not hermitian? How about symmetric matrices over finite fields where \"conjugate\" is meaningless? If not, we could deprecate/remove `indefinite_factorization()`. But I know little about what people do with matrices over finite fields.\n\n3. I've declared that every constant, non-relational symbolic expression is a square in `SR`. This is not really principled; it just sounds true, and makes `cholesky()` work with symbolic matrices whose entries are \"numbers\".\n\n\nDepends on #31808\n\nCC:  @dimpase @videlec @rbeezer @mwageringel @mezzarobba\n\nComponent: **linear algebra**\n\nAuthor: **Michael Orlitzky**\n\nBranch/Commit: **[`8986d7c`](https://github.com/sagemath/sagetrac-mirror/commit/8986d7cc441c9876c58910873c048849564706b1)**\n\nReviewer: **Travis Scrimshaw, Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31619_\n\n",
    "closed_at": "2021-06-06T13:18:19Z",
    "created_at": "2021-04-08T13:09:03Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Cholesky factorization and positive-definite testing over inexact rings",
    "type": "issue",
    "updated_at": "2021-06-06T13:18:19Z",
    "url": "https://github.com/sagemath/sage/issues/31619",
    "user": "https://github.com/orlitzky"
}
```
As promised in #13674, I refactor some things to support `cholesky()` and `is_positive_definite()` over inexact rings. The main idea is to use the `block_ldlt()` method that supports inexact rings instead of `indefinite_factorization()` which does not.

Controversial bits:

1. The `certificate` argument to `is_positive_definite()` has been removed. This lets us unify the interface and implementation with `is_positive_semidefinite()`. If the user wants the factorization (which is all the certificate was), he can still ask for it directly.

2. I've left the `indefinite_factorization` method alone even though it is largely superseded by `block_ldlt(classical=True)`. Does anyone want to factorize complex matrices that are symmetric but not hermitian? How about symmetric matrices over finite fields where "conjugate" is meaningless? If not, we could deprecate/remove `indefinite_factorization()`. But I know little about what people do with matrices over finite fields.

3. I've declared that every constant, non-relational symbolic expression is a square in `SR`. This is not really principled; it just sounds true, and makes `cholesky()` work with symbolic matrices whose entries are "numbers".


Depends on #31808

CC:  @dimpase @videlec @rbeezer @mwageringel @mezzarobba

Component: **linear algebra**

Author: **Michael Orlitzky**

Branch/Commit: **[`8986d7c`](https://github.com/sagemath/sagetrac-mirror/commit/8986d7cc441c9876c58910873c048849564706b1)**

Reviewer: **Travis Scrimshaw, Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/31619_





---

archive/issue_events_432933.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-04-08T13:09:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432933"
}
```



---

archive/issue_events_432934.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-04-08T13:09:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "c: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432934"
}
```



---

archive/issue_events_432935.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-04-08T13:09:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432935"
}
```



---

archive/issue_events_432936.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-04-08T13:09:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432936"
}
```



---

archive/issue_comments_508395.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI still need to go through the documentation carefully, but any early feedback would be welcome.",
    "created_at": "2021-04-08T13:14:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508395",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:1" align="right">comment:1</div>

I still need to go through the documentation carefully, but any early feedback would be welcome.



---

archive/issue_comments_508396.json:
```json
{
    "body": "Commit: **[`36b53ce`](https://github.com/sagemath/sagetrac-mirror/commit/36b53ced10bd195e038323a713964a6a9d6bbe28)**",
    "created_at": "2021-04-08T13:14:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508396",
    "user": "https://github.com/orlitzky"
}
```

Commit: **[`36b53ce`](https://github.com/sagemath/sagetrac-mirror/commit/36b53ced10bd195e038323a713964a6a9d6bbe28)**



---

archive/issue_comments_508397.json:
```json
{
    "body": "Author: **Michael Orlitzky**",
    "created_at": "2021-04-08T13:14:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508397",
    "user": "https://github.com/orlitzky"
}
```

Author: **Michael Orlitzky**



---

archive/issue_comments_508398.json:
```json
{
    "body": "Branch: **[u/mjo/ticket/31619](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/31619)**",
    "created_at": "2021-04-08T13:14:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508398",
    "user": "https://github.com/orlitzky"
}
```

Branch: **[u/mjo/ticket/31619](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/31619)**



---

archive/issue_events_432937.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-04-08T13:14:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432937"
}
```



---

archive/issue_comments_508399.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI am not sure about dropping the `certificate` from `is_positive_definite()`. I would lean towards adding one for `is_positive_semidefinite()` to make it consistent. At the very least, it will require a deprecation.\n\nI cannot comment on 2 or 3.\n\nI would change this block:\n\n```\n-        for d_i in d:\n-            if d_i.nrows() == 1:\n-                if semi:\n-                    if d_i < 0:\n-                        return False\n-                else:\n-                    if d_i <= 0:\n-                        return False\n-            else:\n-                # There's a 2x2 block\n-                return False\n-        return True\n+        if semi:\n+            return not any(d_i.nrows() > 1 or d_i < 0 for d_i in d)\n+        else:\n+            return not any(d_i.nrows() > 1 or d_i <= 0 for d_i in d)\n```\nAlso, would it be better to do `d_i[0,0]` so the actual entry is checked? Another alternative would be\n\n```\nreturn all(d_i.nrows() == 1 and d_i >= 0 for d_i in d)\n```\nand similarly for the positive definite case. IMO this is a more clear than the negative test.",
    "created_at": "2021-04-11T23:28:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508399",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:2" align="right">comment:2</div>

I am not sure about dropping the `certificate` from `is_positive_definite()`. I would lean towards adding one for `is_positive_semidefinite()` to make it consistent. At the very least, it will require a deprecation.

I cannot comment on 2 or 3.

I would change this block:

```
-        for d_i in d:
-            if d_i.nrows() == 1:
-                if semi:
-                    if d_i < 0:
-                        return False
-                else:
-                    if d_i <= 0:
-                        return False
-            else:
-                # There's a 2x2 block
-                return False
-        return True
+        if semi:
+            return not any(d_i.nrows() > 1 or d_i < 0 for d_i in d)
+        else:
+            return not any(d_i.nrows() > 1 or d_i <= 0 for d_i in d)
```
Also, would it be better to do `d_i[0,0]` so the actual entry is checked? Another alternative would be

```
return all(d_i.nrows() == 1 and d_i >= 0 for d_i in d)
```
and similarly for the positive definite case. IMO this is a more clear than the negative test.



---

archive/issue_comments_508400.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n2 - factorising symmetrical complex matrices might make sense over exact fields.\n\nFor finite fields conjugate often makes sense, e.g. if characteristic is p then taking p-th power is a field automorphism.",
    "created_at": "2021-04-12T00:24:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508400",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:3" align="right">comment:3</div>

2 - factorising symmetrical complex matrices might make sense over exact fields.

For finite fields conjugate often makes sense, e.g. if characteristic is p then taking p-th power is a field automorphism.



---

archive/issue_comments_508401.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@tscrim](#comment%3A2):\n> I am not sure about dropping the `certificate` from `is_positive_definite()`. I would lean towards adding one for `is_positive_semidefinite()` to make it consistent. At the very least, it will require a deprecation.\n> \n\nThe real problem here is that `certificate` is returning an implementation detail, namely the `indefinite_factorization()` that was computed to check the eigenvalues.In order to make `is_positive_definite()` numerically stable, I've already changed that implementation detail -- there's no indefinite factorization to return. I could return the `block_ldlt()` factorization, but if anyone is actually using the certificate, that's still going to mess them up. So the interface is broken either way. (And if no one was using `certificate`, it makes a lot more sense in the future for users to compute the factorization themselves.)\n\nA related problem is that the `certificate` argument to the superclass method can't always be honored in subclasses. There is no `certificate` argument for `RDF` or `CDF` matrices, for example. If `is_positive_definite()` is ever implemented for some other subclass using a C library, that C library is certainly not going to return an `indefinite_factorization()`, so what can we do if the user wants a certificate?\n\nIf we have to deprecate it first, then we have to continue using `indefinite_factorization()`, which means we can't make it numerically stable (or work with rings like `SR` and `RR`) until the deprecation period is over.",
    "created_at": "2021-04-14T13:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508401",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@tscrim](#comment%3A2):
> I am not sure about dropping the `certificate` from `is_positive_definite()`. I would lean towards adding one for `is_positive_semidefinite()` to make it consistent. At the very least, it will require a deprecation.
> 

The real problem here is that `certificate` is returning an implementation detail, namely the `indefinite_factorization()` that was computed to check the eigenvalues.In order to make `is_positive_definite()` numerically stable, I've already changed that implementation detail -- there's no indefinite factorization to return. I could return the `block_ldlt()` factorization, but if anyone is actually using the certificate, that's still going to mess them up. So the interface is broken either way. (And if no one was using `certificate`, it makes a lot more sense in the future for users to compute the factorization themselves.)

A related problem is that the `certificate` argument to the superclass method can't always be honored in subclasses. There is no `certificate` argument for `RDF` or `CDF` matrices, for example. If `is_positive_definite()` is ever implemented for some other subclass using a C library, that C library is certainly not going to return an `indefinite_factorization()`, so what can we do if the user wants a certificate?

If we have to deprecate it first, then we have to continue using `indefinite_factorization()`, which means we can't make it numerically stable (or work with rings like `SR` and `RR`) until the deprecation period is over.



---

archive/issue_comments_508402.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI would not be worried about `certificate`. The existing functionality is next to useless, so I don't expect any real uses out there.",
    "created_at": "2021-04-14T13:48:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508402",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">comment:5</div>

I would not be worried about `certificate`. The existing functionality is next to useless, so I don't expect any real uses out there.



---

archive/issue_comments_508403.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/527dd57bbe91f2501b5fd5eea91a123b23bc9735\"><code>527dd57</code></a></td><td><code>Trac #31619: clarify matrix _is_positive_definite_or_semidefinite().</code></td></tr></table>\n",
    "created_at": "2021-04-15T01:27:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508403",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/527dd57bbe91f2501b5fd5eea91a123b23bc9735"><code>527dd57</code></a></td><td><code>Trac #31619: clarify matrix _is_positive_definite_or_semidefinite().</code></td></tr></table>




---

archive/issue_comments_508404.json:
```json
{
    "body": "Changed commit from **[`36b53ce`](https://github.com/sagemath/sagetrac-mirror/commit/36b53ced10bd195e038323a713964a6a9d6bbe28)** to **[`527dd57`](https://github.com/sagemath/sagetrac-mirror/commit/527dd57bbe91f2501b5fd5eea91a123b23bc9735)**",
    "created_at": "2021-04-15T01:27:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508404",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`36b53ce`](https://github.com/sagemath/sagetrac-mirror/commit/36b53ced10bd195e038323a713964a6a9d6bbe28)** to **[`527dd57`](https://github.com/sagemath/sagetrac-mirror/commit/527dd57bbe91f2501b5fd5eea91a123b23bc9735)**



---

archive/issue_comments_508405.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@tscrim](#comment%3A2):\n>\n> Also, would it be better to do `d_i[0,0]` so the actual entry is checked?\n\nThat wasn't intentional so I'm glad you noticed it.\n\n\n> Another alternative would be\n> \n> ```\n> return all(d_i.nrows() == 1 and d_i >= 0 for d_i in d)\n> ```\n> and similarly for the positive definite case. IMO this is a more clear than the negative test.\n\nI went one further and replaced this with\n\n```python\n       import operator\n       op = operator.gt\n       if semi:\n           op = operator.ge\n       return all(d_i.nrows() == 1 and op(d_i[0,0], 0) for d_i in d)\n```\n\nto minimize duplication. It's a lot clearer now, thanks.",
    "created_at": "2021-04-15T01:30:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508405",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@tscrim](#comment%3A2):
>
> Also, would it be better to do `d_i[0,0]` so the actual entry is checked?

That wasn't intentional so I'm glad you noticed it.


> Another alternative would be
> 
> ```
> return all(d_i.nrows() == 1 and d_i >= 0 for d_i in d)
> ```
> and similarly for the positive definite case. IMO this is a more clear than the negative test.

I went one further and replaced this with

```python
       import operator
       op = operator.gt
       if semi:
           op = operator.ge
       return all(d_i.nrows() == 1 and op(d_i[0,0], 0) for d_i in d)
```

to minimize duplication. It's a lot clearer now, thanks.



---

archive/issue_comments_508406.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nOkay, I agree that we should remove the certificate. I would suggest making the `certificate=True` return a pair as before, but just return the `block_ldlt()` as the certificate with the deprecation message saying we changed. This is at least the minimal breakage and intrusive change to the current branch. How does that sound?",
    "created_at": "2021-04-15T07:28:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508406",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:8" align="right">comment:8</div>

Okay, I agree that we should remove the certificate. I would suggest making the `certificate=True` return a pair as before, but just return the `block_ldlt()` as the certificate with the deprecation message saying we changed. This is at least the minimal breakage and intrusive change to the current branch. How does that sound?



---

archive/issue_comments_508407.json:
```json
{
    "body": "Changed commit from **[`527dd57`](https://github.com/sagemath/sagetrac-mirror/commit/527dd57bbe91f2501b5fd5eea91a123b23bc9735)** to **[`ec32dea`](https://github.com/sagemath/sagetrac-mirror/commit/ec32dead7bfdff03a0d69a731449bce950cf8c78)**",
    "created_at": "2021-04-27T00:03:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508407",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`527dd57`](https://github.com/sagemath/sagetrac-mirror/commit/527dd57bbe91f2501b5fd5eea91a123b23bc9735)** to **[`ec32dea`](https://github.com/sagemath/sagetrac-mirror/commit/ec32dead7bfdff03a0d69a731449bce950cf8c78)**



---

archive/issue_comments_508408.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9d434d9b4975a5cad7c6c6f27e7d74c3f8d8ca5\"><code>e9d434d</code></a></td><td><code>Trac #31619: add \"classical\" argument to matrix block_ldlt().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7fa50ba5be99e75bfa2158ef5dbb8f7f3aa510cb\"><code>7fa50ba</code></a></td><td><code>Trac #31619: use block_ldlt() for inverse_positive_definite().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14b3be31497b47f096f4f3bb9f70455069c5ebc4\"><code>14b3be3</code></a></td><td><code>Trac #31619: support is_square() for constant non-relational expressions.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/538681d87dd2844574edb4a3dbc9c8ea09806873\"><code>538681d</code></a></td><td><code>Trac #31619: implement cholesky() using block_ldlt().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/085b5bb4a4eea204fc70116659026ca7b3b13a46\"><code>085b5bb</code></a></td><td><code>Trac #31619: cache the result of _block_ldlt().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba37459dbf2c66bcb7eeb93cf3859bd020237209\"><code>ba37459</code></a></td><td><code>Trac #31619: make _block_ldlt() a C method.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f673b5c242a2b83fabc1a5273aa822f5a526015e\"><code>f673b5c</code></a></td><td><code>Trac #31619: clarify matrix _is_positive_definite_or_semidefinite().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ee32f71a0a911ee42a8d40c9ddc3d73a1175325\"><code>0ee32f7</code></a></td><td><code>Trac #31619: clean up documentation for is_positive_definite().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ed1c44a56125dd9c2800051356aaf9ac4916f44\"><code>8ed1c44</code></a></td><td><code>Trac #31619: clean up cholesky() documentation.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec32dead7bfdff03a0d69a731449bce950cf8c78\"><code>ec32dea</code></a></td><td><code>Trac #31619: replace is_positive_definite(certificate=True).</code></td></tr></table>\n",
    "created_at": "2021-04-27T00:03:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508408",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9d434d9b4975a5cad7c6c6f27e7d74c3f8d8ca5"><code>e9d434d</code></a></td><td><code>Trac #31619: add "classical" argument to matrix block_ldlt().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7fa50ba5be99e75bfa2158ef5dbb8f7f3aa510cb"><code>7fa50ba</code></a></td><td><code>Trac #31619: use block_ldlt() for inverse_positive_definite().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14b3be31497b47f096f4f3bb9f70455069c5ebc4"><code>14b3be3</code></a></td><td><code>Trac #31619: support is_square() for constant non-relational expressions.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/538681d87dd2844574edb4a3dbc9c8ea09806873"><code>538681d</code></a></td><td><code>Trac #31619: implement cholesky() using block_ldlt().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/085b5bb4a4eea204fc70116659026ca7b3b13a46"><code>085b5bb</code></a></td><td><code>Trac #31619: cache the result of _block_ldlt().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba37459dbf2c66bcb7eeb93cf3859bd020237209"><code>ba37459</code></a></td><td><code>Trac #31619: make _block_ldlt() a C method.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f673b5c242a2b83fabc1a5273aa822f5a526015e"><code>f673b5c</code></a></td><td><code>Trac #31619: clarify matrix _is_positive_definite_or_semidefinite().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ee32f71a0a911ee42a8d40c9ddc3d73a1175325"><code>0ee32f7</code></a></td><td><code>Trac #31619: clean up documentation for is_positive_definite().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ed1c44a56125dd9c2800051356aaf9ac4916f44"><code>8ed1c44</code></a></td><td><code>Trac #31619: clean up cholesky() documentation.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec32dead7bfdff03a0d69a731449bce950cf8c78"><code>ec32dea</code></a></td><td><code>Trac #31619: replace is_positive_definite(certificate=True).</code></td></tr></table>




---

archive/issue_comments_508409.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nMaking this depend on #31594 so that I don't have to rebuild the copy of giac I already have installed.",
    "created_at": "2021-04-27T00:04:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508409",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:10" align="right">comment:10</div>

Making this depend on #31594 so that I don't have to rebuild the copy of giac I already have installed.



---

archive/issue_comments_508410.json:
```json
{
    "body": "Dependencies: **31594**",
    "created_at": "2021-04-27T00:04:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508410",
    "user": "https://github.com/orlitzky"
}
```

Dependencies: **31594**



---

archive/issue_comments_508411.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@tscrim](#comment%3A8):\n> Okay, I agree that we should remove the certificate. I would suggest making the `certificate=True` return a pair as before, but just return the `block_ldlt()` as the certificate with the deprecation message saying we changed. This is at least the minimal breakage and intrusive change to the current branch. How does that sound?\n\nI don't really like it, but I've added a commit that implements this to minimize the amount of back-and-forth that we have to do. I feel like a two-stage deprecation/removal cycle is just going to annoy people *twice* -- once when the format of the certificate changes on them, and then again when it goes away for real.\n\nI've also finally taken the time to go over the documentation of `is_positive_definite()` and `cholesky()`, updated in two new commits.",
    "created_at": "2021-04-27T00:09:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508411",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@tscrim](#comment%3A8):
> Okay, I agree that we should remove the certificate. I would suggest making the `certificate=True` return a pair as before, but just return the `block_ldlt()` as the certificate with the deprecation message saying we changed. This is at least the minimal breakage and intrusive change to the current branch. How does that sound?

I don't really like it, but I've added a commit that implements this to minimize the amount of back-and-forth that we have to do. I feel like a two-stage deprecation/removal cycle is just going to annoy people *twice* -- once when the format of the certificate changes on them, and then again when it goes away for real.

I've also finally taken the time to go over the documentation of `is_positive_definite()` and `cholesky()`, updated in two new commits.



---

archive/issue_comments_508412.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@dimpase](#comment%3A3):\n> 2 - factorising symmetrical complex matrices might make sense over exact fields.\n> \n> For finite fields conjugate often makes sense, e.g. if characteristic is p then taking p-th power is a field automorphism.\n> \n\nI'm not sure what to do about this. I agree that it makes sense, but I really don't want to make  `block_ldlt()` as awkward as `indefinite_factorization()` without a good reason.",
    "created_at": "2021-04-27T00:17:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508412",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@dimpase](#comment%3A3):
> 2 - factorising symmetrical complex matrices might make sense over exact fields.
> 
> For finite fields conjugate often makes sense, e.g. if characteristic is p then taking p-th power is a field automorphism.
> 

I'm not sure what to do about this. I agree that it makes sense, but I really don't want to make  `block_ldlt()` as awkward as `indefinite_factorization()` without a good reason.



---

archive/issue_comments_508413.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n`block_ldlt()` does work with many finite fields... the only issue is that you can't force it to use the standard transpose when the conjugate-transpose doesn't exist (when there's no `conjugate()` in the field).",
    "created_at": "2021-04-27T00:21:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508413",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:13" align="right">comment:13</div>

`block_ldlt()` does work with many finite fields... the only issue is that you can't force it to use the standard transpose when the conjugate-transpose doesn't exist (when there's no `conjugate()` in the field).



---

archive/issue_comments_508414.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@orlitzky](#comment%3A11):\n> Replying to [@tscrim](#comment%3A8):\n> > Okay, I agree that we should remove the certificate. I would suggest making the `certificate=True` return a pair as before, but just return the `block_ldlt()` as the certificate with the deprecation message saying we changed. This is at least the minimal breakage and intrusive change to the current branch. How does that sound?\n\n> \n> I don't really like it, but I've added a commit that implements this to minimize the amount of back-and-forth that we have to do. I feel like a two-stage deprecation/removal cycle is just going to annoy people *twice* -- once when the format of the certificate changes on them, and then again when it goes away for real.\n\nThank you. If they get annoyed twice, then they didn't read the deprecation message and it is their own fault IMO.\n\nI am happy with the current patch. Dima, how about you? (If I really wanted to quibble, we could change the `Returns` -> `Return` in `cholesky()` since we are modifying its docstring anyways. However, that can be done only if there is another commit.)",
    "created_at": "2021-04-28T02:32:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508414",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@orlitzky](#comment%3A11):
> Replying to [@tscrim](#comment%3A8):
> > Okay, I agree that we should remove the certificate. I would suggest making the `certificate=True` return a pair as before, but just return the `block_ldlt()` as the certificate with the deprecation message saying we changed. This is at least the minimal breakage and intrusive change to the current branch. How does that sound?

> 
> I don't really like it, but I've added a commit that implements this to minimize the amount of back-and-forth that we have to do. I feel like a two-stage deprecation/removal cycle is just going to annoy people *twice* -- once when the format of the certificate changes on them, and then again when it goes away for real.

Thank you. If they get annoyed twice, then they didn't read the deprecation message and it is their own fault IMO.

I am happy with the current patch. Dima, how about you? (If I really wanted to quibble, we could change the `Returns` -> `Return` in `cholesky()` since we are modifying its docstring anyways. However, that can be done only if there is another commit.)



---

archive/issue_comments_508415.json:
```json
{
    "body": "Changed dependencies from **31594** to **#31594**",
    "created_at": "2021-04-28T02:32:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508415",
    "user": "https://github.com/tscrim"
}
```

Changed dependencies from **31594** to **#31594**



---

archive/issue_comments_508416.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2021-04-28T02:32:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508416",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_508417.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Dima Pasechnik**",
    "created_at": "2021-04-28T17:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508417",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Dima Pasechnik**



---

archive/issue_events_432938.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-04-28T17:38:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432938"
}
```



---

archive/issue_events_432939.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-04-28T17:38:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432939"
}
```



---

archive/issue_comments_508418.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nlgtm",
    "created_at": "2021-04-28T17:38:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508418",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">comment:15</div>

lgtm



---

archive/issue_comments_508419.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThanks!",
    "created_at": "2021-04-29T00:28:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508419",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:16" align="right">comment:16</div>

Thanks!



---

archive/issue_events_432940.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-08T16:08:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432940"
}
```



---

archive/issue_events_432941.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-08T16:08:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432941"
}
```



---

archive/issue_comments_508420.json:
```json
{
    "body": "Changed commit from **[`ec32dea`](https://github.com/sagemath/sagetrac-mirror/commit/ec32dead7bfdff03a0d69a731449bce950cf8c78)** to **[`8986d7c`](https://github.com/sagemath/sagetrac-mirror/commit/8986d7cc441c9876c58910873c048849564706b1)**",
    "created_at": "2021-05-09T11:19:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508420",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ec32dea`](https://github.com/sagemath/sagetrac-mirror/commit/ec32dead7bfdff03a0d69a731449bce950cf8c78)** to **[`8986d7c`](https://github.com/sagemath/sagetrac-mirror/commit/8986d7cc441c9876c58910873c048849564706b1)**



---

archive/issue_comments_508421.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25f1588022beb67cab4bcb3631979726d2d2d6a5\"><code>25f1588</code></a></td><td><code>Trac #31619: add \"classical\" argument to matrix block_ldlt().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2af6d9d2e6883697429c48bd59718e20e5bdd07e\"><code>2af6d9d</code></a></td><td><code>Trac #31619: use block_ldlt() for inverse_positive_definite().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5adbac3780fd965a0fb4f40edf2b7061ef80fae\"><code>e5adbac</code></a></td><td><code>Trac #31619: support is_square() for constant non-relational expressions.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ac2754ea9354a7f8e2edf39890c52b5ebbf8465\"><code>5ac2754</code></a></td><td><code>Trac #31619: implement cholesky() using block_ldlt().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d40c7e0959ceaa616809b0b4513ee003f0bd934\"><code>7d40c7e</code></a></td><td><code>Trac #31619: cache the result of _block_ldlt().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69946458bc2cecb1a0e3df62586375793bd87f1b\"><code>6994645</code></a></td><td><code>Trac #31619: make _block_ldlt() a C method.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ba2be7faa15232232e04c54adc449f06e14b9fb\"><code>8ba2be7</code></a></td><td><code>Trac #31619: clarify matrix _is_positive_definite_or_semidefinite().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a883de3e231dd74257d96bad767aaa3e44ebe57\"><code>4a883de</code></a></td><td><code>Trac #31619: clean up documentation for is_positive_definite().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63e26e49c68072d814850be40ce12e88f2c1922d\"><code>63e26e4</code></a></td><td><code>Trac #31619: clean up cholesky() documentation.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8986d7cc441c9876c58910873c048849564706b1\"><code>8986d7c</code></a></td><td><code>Trac #31619: replace is_positive_definite(certificate=True).</code></td></tr></table>\n",
    "created_at": "2021-05-09T11:19:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508421",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25f1588022beb67cab4bcb3631979726d2d2d6a5"><code>25f1588</code></a></td><td><code>Trac #31619: add "classical" argument to matrix block_ldlt().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2af6d9d2e6883697429c48bd59718e20e5bdd07e"><code>2af6d9d</code></a></td><td><code>Trac #31619: use block_ldlt() for inverse_positive_definite().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5adbac3780fd965a0fb4f40edf2b7061ef80fae"><code>e5adbac</code></a></td><td><code>Trac #31619: support is_square() for constant non-relational expressions.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ac2754ea9354a7f8e2edf39890c52b5ebbf8465"><code>5ac2754</code></a></td><td><code>Trac #31619: implement cholesky() using block_ldlt().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d40c7e0959ceaa616809b0b4513ee003f0bd934"><code>7d40c7e</code></a></td><td><code>Trac #31619: cache the result of _block_ldlt().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69946458bc2cecb1a0e3df62586375793bd87f1b"><code>6994645</code></a></td><td><code>Trac #31619: make _block_ldlt() a C method.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ba2be7faa15232232e04c54adc449f06e14b9fb"><code>8ba2be7</code></a></td><td><code>Trac #31619: clarify matrix _is_positive_definite_or_semidefinite().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a883de3e231dd74257d96bad767aaa3e44ebe57"><code>4a883de</code></a></td><td><code>Trac #31619: clean up documentation for is_positive_definite().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63e26e49c68072d814850be40ce12e88f2c1922d"><code>63e26e4</code></a></td><td><code>Trac #31619: clean up cholesky() documentation.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8986d7cc441c9876c58910873c048849564706b1"><code>8986d7c</code></a></td><td><code>Trac #31619: replace is_positive_definite(certificate=True).</code></td></tr></table>




---

archive/issue_events_432942.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2021-05-09T11:19:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432942"
}
```



---

archive/issue_events_432943.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2021-05-09T11:19:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432943"
}
```



---

archive/issue_comments_508422.json:
```json
{
    "body": "Changed dependencies from **#31594** to none",
    "created_at": "2021-05-09T11:20:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508422",
    "user": "https://github.com/orlitzky"
}
```

Changed dependencies from **#31594** to none



---

archive/issue_comments_508423.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI dropped the dependency on #31594 because new (impossible to detect) giac versions are going to break some tests.",
    "created_at": "2021-05-09T11:20:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508423",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:19" align="right">comment:19</div>

I dropped the dependency on #31594 because new (impossible to detect) giac versions are going to break some tests.



---

archive/issue_events_432944.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-05-11T00:00:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432944"
}
```



---

archive/issue_events_432945.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-05-11T00:00:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432945"
}
```



---

archive/issue_events_432946.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-05-11T00:05:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432946"
}
```



---

archive/issue_events_432947.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-05-11T00:05:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432947"
}
```



---

archive/issue_comments_508424.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nSorry, I was too quick. Looks like there is an issue on 9.3.rc5 (that was not on 9.3.rc4) with the matrix constructed in line  12338, which causes the subsequent failures. This was almost certainly caused by #31628.",
    "created_at": "2021-05-11T00:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508424",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:21" align="right">comment:21</div>

Sorry, I was too quick. Looks like there is an issue on 9.3.rc5 (that was not on 9.3.rc4) with the matrix constructed in line  12338, which causes the subsequent failures. This was almost certainly caused by #31628.



---

archive/issue_events_432948.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-05-11T00:39:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432948"
}
```



---

archive/issue_events_432949.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-05-11T00:39:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432949"
}
```



---

archive/issue_comments_508425.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThe issue is from #31808. So this ticket is good, but we need to solve #31808 before this is merged.",
    "created_at": "2021-05-11T00:39:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508425",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">comment:22</div>

The issue is from #31808. So this ticket is good, but we need to solve #31808 before this is merged.



---

archive/issue_comments_508426.json:
```json
{
    "body": "Dependencies: **#31808**",
    "created_at": "2021-05-11T00:39:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508426",
    "user": "https://github.com/tscrim"
}
```

Dependencies: **#31808**



---

archive/issue_comments_508427.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThanks for taking care of that! The giac issues should now also be fixed, but there's no reason to mess with this ticket further.",
    "created_at": "2021-05-11T14:38:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508427",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:23" align="right">comment:23</div>

Thanks for taking care of that! The giac issues should now also be fixed, but there's no reason to mess with this ticket further.



---

archive/issue_events_432950.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-06T13:18:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432950"
}
```



---

archive/issue_events_432951.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "4200c96400c7b2c1c7ead50cdb9d006adc533a61",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-06-06T13:18:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31619#event-432951"
}
```



---

archive/issue_comments_508428.json:
```json
{
    "body": "Changed branch from **[u/mjo/ticket/31619](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/31619)** to **[`8986d7c`](https://github.com/sagemath/sagetrac-mirror/commit/8986d7cc441c9876c58910873c048849564706b1)**",
    "created_at": "2021-06-06T13:18:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31619",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31619#issuecomment-508428",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mjo/ticket/31619](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/31619)** to **[`8986d7c`](https://github.com/sagemath/sagetrac-mirror/commit/8986d7cc441c9876c58910873c048849564706b1)**
