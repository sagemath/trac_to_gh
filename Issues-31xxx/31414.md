# Issue 31414: validate input arguments of elimination_ideal

archive/issues_031177.json:
```json
{
    "body": "As explained in [ticket:31367#comment:1], this ticket adds a check that all the arguments passed to `elimination_ideal` are actually variables of the ring, to avoid silent problems like this:\n\n```\nage: R.<x,y,z> = QQ[]\nsage: R.ideal(x-y, z).elimination_ideal([y, R(0)])\nIdeal (x - y, z) of Multivariate Polynomial Ring in x, y, z over Rational Field\n```\n\nCC:  @davidayotte\n\nBranch/Commit: 28c1e2a41633178a4c62d423c999c948a920a26c\n\nReviewer: David Ayotte\n\nAuthor: Markus Wageringel\n\nDependencies: #29979\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31414\n\n",
    "closed_at": "2021-09-19T09:57:46Z",
    "created_at": "2021-02-17T19:00:20Z",
    "labels": [
        "component: commutative algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "validate input arguments of elimination_ideal",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31414",
    "user": "https://github.com/mwageringel"
}
```
As explained in [ticket:31367#comment:1], this ticket adds a check that all the arguments passed to `elimination_ideal` are actually variables of the ring, to avoid silent problems like this:

```
age: R.<x,y,z> = QQ[]
sage: R.ideal(x-y, z).elimination_ideal([y, R(0)])
Ideal (x - y, z) of Multivariate Polynomial Ring in x, y, z over Rational Field
```

CC:  @davidayotte

Branch/Commit: 28c1e2a41633178a4c62d423c999c948a920a26c

Reviewer: David Ayotte

Author: Markus Wageringel

Dependencies: #29979

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31414





---

archive/issue_comments_616418.json:
```json
{
    "body": "Changing author from \"\" to \"Markus Wageringel\"",
    "created_at": "2021-02-17T19:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616418",
    "user": "https://github.com/mwageringel"
}
```

Changing author from "" to "Markus Wageringel"



---

archive/issue_comments_616419.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-02-17T19:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616419",
    "user": "https://github.com/mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_616420.json:
```json
{
    "body": "Changing commit from \"\" to \"8ad70e6c63285b65b57b257c7f77d3a404173ad7\"",
    "created_at": "2021-02-17T19:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616420",
    "user": "https://github.com/mwageringel"
}
```

Changing commit from "" to "8ad70e6c63285b65b57b257c7f77d3a404173ad7"



---

archive/issue_comments_616421.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[0aba8a0](https://github.com/sagemath/sagetrac-mirror/commit/0aba8a061aa148ca448be2d8661744f27c485065)|`31367: fix elimination in case of quotient rings`|\n|[8ad70e6](https://github.com/sagemath/sagetrac-mirror/commit/8ad70e6c63285b65b57b257c7f77d3a404173ad7)|`31414: validate input arguments of elimination_ideal`|",
    "created_at": "2021-02-17T19:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616421",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[0aba8a0](https://github.com/sagemath/sagetrac-mirror/commit/0aba8a061aa148ca448be2d8661744f27c485065)|`31367: fix elimination in case of quotient rings`|
|[8ad70e6](https://github.com/sagemath/sagetrac-mirror/commit/8ad70e6c63285b65b57b257c7f77d3a404173ad7)|`31414: validate input arguments of elimination_ideal`|



---

archive/issue_comments_616422.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-mwageringel/31414\"",
    "created_at": "2021-02-17T19:12:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616422",
    "user": "https://github.com/mwageringel"
}
```

Changing branch from "" to "u/gh-mwageringel/31414"



---

archive/issue_comments_616423.json:
```json
{
    "body": "<a id='comment:2'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616423",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_100644.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31414#event-100644"
}
```



---

archive/issue_comments_616424.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-08T15:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616424",
    "user": "https://github.com/DavidAyotte"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_616425.json:
```json
{
    "body": "<a id='comment:3'></a>\nEverything looks good. I ran the doctest and everything passed except for an unrelated test in src/sage/rings/number_field/number_field_ideal.py which also fail on the develop branch (is there a ticket already open for this ?):\n\n```\nFile \"src/sage/rings/number_field/number_field_ideal.py\", line 2199, in sage.rings.number_field.number_field_ideal.NumberFieldFractionalIdeal.invertible_residues\nFailed example:\n    list(K.ideal(8).invertible_residues())[:5]\nExpected:\n    [1, a - 1, -3*a, -2*a + 3, -a - 1]\nGot:\n    [1, a + 2, 3*a + 3, -2*a + 3, a]\n**********************************************************************\n1 item had failures:\n   1 of  17 in sage.rings.number_field.number_field_ideal.NumberFieldFractionalIdeal.invertible_residues\n    [685 tests, 1 failure, 6.16 s]\n```\n\nNote that I tested this on version 9.4.beta4.",
    "created_at": "2021-07-08T15:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616425",
    "user": "https://github.com/DavidAyotte"
}
```

<a id='comment:3'></a>
Everything looks good. I ran the doctest and everything passed except for an unrelated test in src/sage/rings/number_field/number_field_ideal.py which also fail on the develop branch (is there a ticket already open for this ?):

```
File "src/sage/rings/number_field/number_field_ideal.py", line 2199, in sage.rings.number_field.number_field_ideal.NumberFieldFractionalIdeal.invertible_residues
Failed example:
    list(K.ideal(8).invertible_residues())[:5]
Expected:
    [1, a - 1, -3*a, -2*a + 3, -a - 1]
Got:
    [1, a + 2, 3*a + 3, -2*a + 3, a]
**********************************************************************
1 item had failures:
   1 of  17 in sage.rings.number_field.number_field_ideal.NumberFieldFractionalIdeal.invertible_residues
    [685 tests, 1 failure, 6.16 s]
```

Note that I tested this on version 9.4.beta4.



---

archive/issue_comments_616426.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Ayotte\"",
    "created_at": "2021-07-08T15:52:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616426",
    "user": "https://github.com/DavidAyotte"
}
```

Changing reviewer from "" to "David Ayotte"



---

archive/issue_comments_616427.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-07-08T18:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616427",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_616428.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------|\n|[34a233d](https://github.com/sagemath/sagetrac-mirror/commit/34a233d699b5c76e44cfb2643665136ccf59b437)|`pull in 32117`|\n|[cfe869b](https://github.com/sagemath/sagetrac-mirror/commit/cfe869b298c2fefd507c92a218e10acd2c2abbeb)|`modulo n better be for n > 0`|\n|[3752b9c](https://github.com/sagemath/sagetrac-mirror/commit/3752b9c83e87b679c271e67d1c027e8f9253e57e)|`some more remaining tests`|\n|[e6a697a](https://github.com/sagemath/sagetrac-mirror/commit/e6a697a3eb5d8a12feda9d3920b4830b618943ce)|`truely ignore ignored bounds for ZZ.random_element`|\n|[36c7c58](https://github.com/sagemath/sagetrac-mirror/commit/36c7c5884835e3f4a5fcb6ab370f54f01161f464)|`pull 32124`|\n|[be3e05f](https://github.com/sagemath/sagetrac-mirror/commit/be3e05fd8a41556347e3696bd9e79364dd4bfb52)|`29979: a few more fixes`|\n|[5f0f5dc](https://github.com/sagemath/sagetrac-mirror/commit/5f0f5dcff46772dcb33ea7c018f1d4c43e1db373)|`29979: mark failing tests as not tested`|\n|[bc1e14a](https://github.com/sagemath/sagetrac-mirror/commit/bc1e14a889b407b41792fedb0dce5266c93ae71a)|`29979: minor tweaks of doctests`|\n|[5330692](https://github.com/sagemath/sagetrac-mirror/commit/5330692057331ff01c0a9a2801532039c27ff1d7)|`minor style error`|\n|[28c1e2a](https://github.com/sagemath/sagetrac-mirror/commit/28c1e2a41633178a4c62d423c999c948a920a26c)|`31414: validate input arguments of elimination_ideal`|",
    "created_at": "2021-07-08T18:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616428",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. Last 10 new commits:
|                                                                                                                                           |               |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------|
|[34a233d](https://github.com/sagemath/sagetrac-mirror/commit/34a233d699b5c76e44cfb2643665136ccf59b437)|`pull in 32117`|
|[cfe869b](https://github.com/sagemath/sagetrac-mirror/commit/cfe869b298c2fefd507c92a218e10acd2c2abbeb)|`modulo n better be for n > 0`|
|[3752b9c](https://github.com/sagemath/sagetrac-mirror/commit/3752b9c83e87b679c271e67d1c027e8f9253e57e)|`some more remaining tests`|
|[e6a697a](https://github.com/sagemath/sagetrac-mirror/commit/e6a697a3eb5d8a12feda9d3920b4830b618943ce)|`truely ignore ignored bounds for ZZ.random_element`|
|[36c7c58](https://github.com/sagemath/sagetrac-mirror/commit/36c7c5884835e3f4a5fcb6ab370f54f01161f464)|`pull 32124`|
|[be3e05f](https://github.com/sagemath/sagetrac-mirror/commit/be3e05fd8a41556347e3696bd9e79364dd4bfb52)|`29979: a few more fixes`|
|[5f0f5dc](https://github.com/sagemath/sagetrac-mirror/commit/5f0f5dcff46772dcb33ea7c018f1d4c43e1db373)|`29979: mark failing tests as not tested`|
|[bc1e14a](https://github.com/sagemath/sagetrac-mirror/commit/bc1e14a889b407b41792fedb0dce5266c93ae71a)|`29979: minor tweaks of doctests`|
|[5330692](https://github.com/sagemath/sagetrac-mirror/commit/5330692057331ff01c0a9a2801532039c27ff1d7)|`minor style error`|
|[28c1e2a](https://github.com/sagemath/sagetrac-mirror/commit/28c1e2a41633178a4c62d423c999c948a920a26c)|`31414: validate input arguments of elimination_ideal`|



---

archive/issue_comments_616429.json:
```json
{
    "body": "Changing commit from \"8ad70e6c63285b65b57b257c7f77d3a404173ad7\" to \"28c1e2a41633178a4c62d423c999c948a920a26c\"",
    "created_at": "2021-07-08T18:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616429",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8ad70e6c63285b65b57b257c7f77d3a404173ad7" to "28c1e2a41633178a4c62d423c999c948a920a26c"



---

archive/issue_comments_616430.json:
```json
{
    "body": "Changing dependencies from \"#31367\" to \"#29979\"",
    "created_at": "2021-07-08T18:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616430",
    "user": "https://github.com/mwageringel"
}
```

Changing dependencies from "#31367" to "#29979"



---

archive/issue_comments_616431.json:
```json
{
    "body": "<a id='comment:5'></a>\nThank you for the review. To avoid a merge conflict, I have rebased onto #29979. Only the last commit is relevant to this ticket.\n\n\n\nReplying to [gh-DavidAyotte](#comment%3A3):\n> I ran the doctest and everything passed except for an unrelated test in src/sage/rings/number_field/number_field_ideal.py which also fail on the develop branch (is there a ticket already open for this ?):\n\n\nI cannot reproduce it on my end, but there have been discussions about this problem in [ticket:31443#comment:119] and [ticket:30801#comment:171]. Apparently, it depends on whether Pari comes from the system or not. I could not find a ticket specifically for this problem, though maybe I have missed it.",
    "created_at": "2021-07-08T18:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616431",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:5'></a>
Thank you for the review. To avoid a merge conflict, I have rebased onto #29979. Only the last commit is relevant to this ticket.



Replying to [gh-DavidAyotte](#comment%3A3):
> I ran the doctest and everything passed except for an unrelated test in src/sage/rings/number_field/number_field_ideal.py which also fail on the develop branch (is there a ticket already open for this ?):


I cannot reproduce it on my end, but there have been discussions about this problem in [ticket:31443#comment:119] and [ticket:30801#comment:171]. Apparently, it depends on whether Pari comes from the system or not. I could not find a ticket specifically for this problem, though maybe I have missed it.



---

archive/issue_comments_616432.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-08T18:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616432",
    "user": "https://github.com/mwageringel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_100645.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:07:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31414#event-100645"
}
```



---

archive/issue_events_100646.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:07:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31414#event-100646"
}
```



---

archive/issue_comments_616433.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-09-19T09:57:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616433",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_616434.json:
```json
{
    "body": "Changing branch from \"u/gh-mwageringel/31414\" to \"28c1e2a41633178a4c62d423c999c948a920a26c\"",
    "created_at": "2021-09-19T09:57:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31414#issuecomment-616434",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-mwageringel/31414" to "28c1e2a41633178a4c62d423c999c948a920a26c"



---

archive/issue_events_100647.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-09-19T09:57:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31414",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31414#event-100647"
}
```
