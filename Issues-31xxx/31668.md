# Issue 31668: Run TestSuite on polynomial rings

archive/issues_031431.json:
```json
{
    "assignees": [],
    "body": "#27364 fixes a bug that `_test_construction` should have found -- except `TestSuite` is not called at all for any multivariate polynomial rings. \n\nWe add a bunch of `TestSuite` calls for the rings constructed as examples in `polynomial_ring_constructor`.\n\nMany tests are failing; we skip these tests to make this ticket mergeable. In follow-up tickets, these failures should be fixed.\n\nRelated:\n- https://groups.google.com/g/sage-devel/c/vGzNJKAQWbs/m/nhm1iIPWAwAJ\n- https://groups.google.com/g/sage-devel/c/xiH9d4oBwaI/m/9Q0U1bUlAwAJ\n\n\nCC:  @tscrim @videlec @dkrenn @mwageringel @mezzarobba @yuan-zhou @novoselt @nbruin\n\nBranch/Commit: **[u/mkoeppe/run_testsuite_on_polynomial_rings](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/run_testsuite_on_polynomial_rings) @ [73dfeb8](https://github.com/sagemath/sagetrac-mirror/commit/73dfeb8fb1cdc6f14152fb3a3cbb28a6828049a3)**\n\nReviewer: **Vincent Delecroix, Travis Scrimshaw**\n\nAuthor: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31668_\n\n",
    "created_at": "2021-04-13T18:17:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20commutative%20algebra",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/positive%20review"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Run TestSuite on polynomial rings",
    "type": "issue",
    "updated_at": "2023-01-10T06:10:30Z",
    "url": "https://github.com/sagemath/sage/issues/31668",
    "user": "https://github.com/mkoeppe"
}
```
#27364 fixes a bug that `_test_construction` should have found -- except `TestSuite` is not called at all for any multivariate polynomial rings. 

We add a bunch of `TestSuite` calls for the rings constructed as examples in `polynomial_ring_constructor`.

Many tests are failing; we skip these tests to make this ticket mergeable. In follow-up tickets, these failures should be fixed.

Related:
- https://groups.google.com/g/sage-devel/c/vGzNJKAQWbs/m/nhm1iIPWAwAJ
- https://groups.google.com/g/sage-devel/c/xiH9d4oBwaI/m/9Q0U1bUlAwAJ


CC:  @tscrim @videlec @dkrenn @mwageringel @mezzarobba @yuan-zhou @novoselt @nbruin

Branch/Commit: **[u/mkoeppe/run_testsuite_on_polynomial_rings](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/run_testsuite_on_polynomial_rings) @ [73dfeb8](https://github.com/sagemath/sagetrac-mirror/commit/73dfeb8fb1cdc6f14152fb3a3cbb28a6828049a3)**

Reviewer: **Vincent Delecroix, Travis Scrimshaw**

Author: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/31668_





---

archive/issue_events_404528.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-13T18:17:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404528"
}
```



---

archive/issue_events_404529.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-13T18:17:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20commutative%20algebra",
    "label_color": "0000ff",
    "label_name": "component: commutative algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404529"
}
```



---

archive/issue_events_404530.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-13T18:17:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404530"
}
```



---

archive/issue_events_404531.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-13T18:17:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404531"
}
```



---

archive/issue_comments_512299.json:
```json
{
    "body": "Branch: **[u/mkoeppe/run_testsuite_on_polynomial_rings](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/run_testsuite_on_polynomial_rings)**",
    "created_at": "2021-04-13T18:32:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512299",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/run_testsuite_on_polynomial_rings](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/run_testsuite_on_polynomial_rings)**



---

archive/issue_comments_512300.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\n\n```\nsage -t --random-seed=0 src/sage/rings/polynomial/polynomial_ring_constructor.py  # 12 doctests failed\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c23ae6910ba9802d104e4d233b8bab7385df69a2\">c23ae69</a></td><td><code>src/sage/rings/polynomial/polynomial_ring_constructor.py: Add TestSuite calls</code></td></tr></table>\n",
    "created_at": "2021-04-13T18:34:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512300",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'>Comment 2:</a>

```
sage -t --random-seed=0 src/sage/rings/polynomial/polynomial_ring_constructor.py  # 12 doctests failed
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c23ae6910ba9802d104e4d233b8bab7385df69a2">c23ae69</a></td><td><code>src/sage/rings/polynomial/polynomial_ring_constructor.py: Add TestSuite calls</code></td></tr></table>




---

archive/issue_comments_512301.json:
```json
{
    "body": "Commit: **[c23ae69](https://github.com/sagemath/sagetrac-mirror/commit/c23ae6910ba9802d104e4d233b8bab7385df69a2)**",
    "created_at": "2021-04-13T18:34:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512301",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[c23ae69](https://github.com/sagemath/sagetrac-mirror/commit/c23ae6910ba9802d104e4d233b8bab7385df69a2)**



---

archive/issue_comments_512302.json:
```json
{
    "body": "Dependencies: **#27364**",
    "created_at": "2021-04-13T18:36:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512302",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#27364**



---

archive/issue_comments_512303.json:
```json
{
    "body": "Author: **Matthias Koeppe, ...**",
    "created_at": "2021-04-26T17:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512303",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe, ...**



---

archive/issue_comments_512304.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nOne more test to add here (from #27261): check that multipolynomial substitution works consistently and return objects in the right parent\n\n```\ndef test(base_ring):\n    R = base_ring['x, y']\n    S = base_ring['q, r']\n    x, y = R.gens()\n    q, r = S.gens()\n    polys = [R.zero(), R.one(), x, y, x + y]\n    assert all(p.subs(x=0).parent() is R for p in polys)\n    assert all(p.subs(y=0).parent() is R for p in polys)\n    assert all(p.subs(x=0, y=0).parent() is base_ring for p in polys)\n    assert all(p.subs(x=q, y=r).parent() is S for p in polys)\n```",
    "created_at": "2021-05-19T07:02:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512304",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'>Comment 6:</a>
One more test to add here (from #27261): check that multipolynomial substitution works consistently and return objects in the right parent

```
def test(base_ring):
    R = base_ring['x, y']
    S = base_ring['q, r']
    x, y = R.gens()
    q, r = S.gens()
    polys = [R.zero(), R.one(), x, y, x + y]
    assert all(p.subs(x=0).parent() is R for p in polys)
    assert all(p.subs(y=0).parent() is R for p in polys)
    assert all(p.subs(x=0, y=0).parent() is base_ring for p in polys)
    assert all(p.subs(x=q, y=r).parent() is S for p in polys)
```



---

archive/issue_comments_512305.json:
```json
{
    "body": "Changed commit from **[c23ae69](https://github.com/sagemath/sagetrac-mirror/commit/c23ae6910ba9802d104e4d233b8bab7385df69a2)** to **[b4978ea](https://github.com/sagemath/sagetrac-mirror/commit/b4978ea8f2677ddc68bdc23392aeeeff0f887c10)**",
    "created_at": "2021-05-24T00:33:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512305",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c23ae69](https://github.com/sagemath/sagetrac-mirror/commit/c23ae6910ba9802d104e4d233b8bab7385df69a2)** to **[b4978ea](https://github.com/sagemath/sagetrac-mirror/commit/b4978ea8f2677ddc68bdc23392aeeeff0f887c10)**



---

archive/issue_comments_512306.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f0c05b731201eea8f6f0f34634241fbf3f619e8\">8f0c05b</a></td><td><code>src/sage/rings/polynomial/polynomial_ring_constructor.py: Add TestSuite calls</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4978ea8f2677ddc68bdc23392aeeeff0f887c10\">b4978ea</a></td><td><code>MPolynomial_element._test_subs: New</code></td></tr></table>\n",
    "created_at": "2021-05-24T00:33:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512306",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>Comment 8:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f0c05b731201eea8f6f0f34634241fbf3f619e8">8f0c05b</a></td><td><code>src/sage/rings/polynomial/polynomial_ring_constructor.py: Add TestSuite calls</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4978ea8f2677ddc68bdc23392aeeeff0f887c10">b4978ea</a></td><td><code>MPolynomial_element._test_subs: New</code></td></tr></table>




---

archive/issue_comments_512307.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0467ec455a298f37bc8e455c90dba5965600f5c8\">0467ec4</a></td><td><code>MPolynomialRing_base.some_elements: New</code></td></tr></table>\n",
    "created_at": "2021-05-24T00:48:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512307",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>Comment 9:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0467ec455a298f37bc8e455c90dba5965600f5c8">0467ec4</a></td><td><code>MPolynomialRing_base.some_elements: New</code></td></tr></table>




---

archive/issue_comments_512308.json:
```json
{
    "body": "Changed commit from **[b4978ea](https://github.com/sagemath/sagetrac-mirror/commit/b4978ea8f2677ddc68bdc23392aeeeff0f887c10)** to **[0467ec4](https://github.com/sagemath/sagetrac-mirror/commit/0467ec455a298f37bc8e455c90dba5965600f5c8)**",
    "created_at": "2021-05-24T00:48:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512308",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b4978ea](https://github.com/sagemath/sagetrac-mirror/commit/b4978ea8f2677ddc68bdc23392aeeeff0f887c10)** to **[0467ec4](https://github.com/sagemath/sagetrac-mirror/commit/0467ec455a298f37bc8e455c90dba5965600f5c8)**



---

archive/issue_comments_512309.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07f710ad10f9b9be4bfd81010fe50d1332176af3\">07f710a</a></td><td><code>MPolynomialRing_base.some_elements: New</code></td></tr></table>\n",
    "created_at": "2021-05-24T00:51:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512309",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'>Comment 10:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07f710ad10f9b9be4bfd81010fe50d1332176af3">07f710a</a></td><td><code>MPolynomialRing_base.some_elements: New</code></td></tr></table>




---

archive/issue_comments_512310.json:
```json
{
    "body": "Changed commit from **[0467ec4](https://github.com/sagemath/sagetrac-mirror/commit/0467ec455a298f37bc8e455c90dba5965600f5c8)** to **[07f710a](https://github.com/sagemath/sagetrac-mirror/commit/07f710ad10f9b9be4bfd81010fe50d1332176af3)**",
    "created_at": "2021-05-24T00:51:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512310",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0467ec4](https://github.com/sagemath/sagetrac-mirror/commit/0467ec455a298f37bc8e455c90dba5965600f5c8)** to **[07f710a](https://github.com/sagemath/sagetrac-mirror/commit/07f710ad10f9b9be4bfd81010fe50d1332176af3)**



---

archive/issue_comments_512311.json:
```json
{
    "body": "Changed dependencies from **#27364** to none",
    "created_at": "2021-05-24T01:29:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512311",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#27364** to none



---

archive/issue_comments_512312.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@videlec](#comment%3A6):\n> One more test to add here (from #27261): check that multipolynomial substitution works consistently and return objects in the right parent\n> \n> ```\n> def test(base_ring):\n>     R = base_ring['x, y']\n>     S = base_ring['q, r']\n>     x, y = R.gens()\n>     q, r = S.gens()\n>     polys = [R.zero(), R.one(), x, y, x + y]\n>     assert all(p.subs(x=0).parent() is R for p in polys)\n>     assert all(p.subs(y=0).parent() is R for p in polys)\n>     assert all(p.subs(x=0, y=0).parent() is base_ring for p in polys)\n>     assert all(p.subs(x=q, y=r).parent() is S for p in polys)\n> ```\n\nI disagree with this logic - why the parent of the result depends on values used for substitution? If one always wants \"the minimal parent\", then after plugging in `x=0` one can end up in `base_ring[y]`. When the variables and their substitution values are computed in some fashion and then substituted into a bunch of different polynomials it is inconvenient that the result may have different type and so one has to consider multiple cases. I hit it because toric code breaks on certain examples because of this issue.",
    "created_at": "2021-05-24T01:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512312",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@videlec](#comment%3A6):
> One more test to add here (from #27261): check that multipolynomial substitution works consistently and return objects in the right parent
> 
> ```
> def test(base_ring):
>     R = base_ring['x, y']
>     S = base_ring['q, r']
>     x, y = R.gens()
>     q, r = S.gens()
>     polys = [R.zero(), R.one(), x, y, x + y]
>     assert all(p.subs(x=0).parent() is R for p in polys)
>     assert all(p.subs(y=0).parent() is R for p in polys)
>     assert all(p.subs(x=0, y=0).parent() is base_ring for p in polys)
>     assert all(p.subs(x=q, y=r).parent() is S for p in polys)
> ```

I disagree with this logic - why the parent of the result depends on values used for substitution? If one always wants "the minimal parent", then after plugging in `x=0` one can end up in `base_ring[y]`. When the variables and their substitution values are computed in some fashion and then substituted into a bunch of different polynomials it is inconvenient that the result may have different type and so one has to consider multiple cases. I hit it because toric code breaks on certain examples because of this issue.



---

archive/issue_comments_512313.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/235f64ed0a851cf4062c544bab552063700927c6\">235f64e</a></td><td><code>src/sage/rings/polynomial/pbori/pbori.pyx: Skip failing test _test_zero_divisors</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1b3ea5ca7689ff22b1012060a431fd4f1e186bb\">f1b3ea5</a></td><td><code>PolynomialFunctor: Keep track of implementation</code></td></tr></table>\n",
    "created_at": "2021-05-24T02:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512313",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>Comment 13:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/235f64ed0a851cf4062c544bab552063700927c6">235f64e</a></td><td><code>src/sage/rings/polynomial/pbori/pbori.pyx: Skip failing test _test_zero_divisors</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1b3ea5ca7689ff22b1012060a431fd4f1e186bb">f1b3ea5</a></td><td><code>PolynomialFunctor: Keep track of implementation</code></td></tr></table>




---

archive/issue_comments_512314.json:
```json
{
    "body": "Changed commit from **[07f710a](https://github.com/sagemath/sagetrac-mirror/commit/07f710ad10f9b9be4bfd81010fe50d1332176af3)** to **[f1b3ea5](https://github.com/sagemath/sagetrac-mirror/commit/f1b3ea5ca7689ff22b1012060a431fd4f1e186bb)**",
    "created_at": "2021-05-24T02:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512314",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[07f710a](https://github.com/sagemath/sagetrac-mirror/commit/07f710ad10f9b9be4bfd81010fe50d1332176af3)** to **[f1b3ea5](https://github.com/sagemath/sagetrac-mirror/commit/f1b3ea5ca7689ff22b1012060a431fd4f1e186bb)**



---

archive/issue_events_404532.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-24T02:09:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404532"
}
```



---

archive/issue_events_404533.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-24T02:09:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404533"
}
```



---

archive/issue_comments_512315.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nReplying to [@novoselt](#comment%3A12):\n> Replying to [@videlec](#comment%3A6):\n> > \n> > ```\n> > def test(base_ring):\n> >     R = base_ring['x, y']\n> >     S = base_ring['q, r']\n> >     x, y = R.gens()\n> >     q, r = S.gens()\n> >     polys = [R.zero(), R.one(), x, y, x + y]\n> >     assert all(p.subs(x=0).parent() is R for p in polys)\n> >     assert all(p.subs(y=0).parent() is R for p in polys)\n> >     assert all(p.subs(x=0, y=0).parent() is base_ring for p in polys)\n> >     assert all(p.subs(x=q, y=r).parent() is S for p in polys)\n> > ```\n\n> \n> I disagree with this logic - why the parent of the result depends on values used for substitution? \n\nJust a quick comment -- the above only demonstrates that the parent of the result depends on the parents of the substituted values (not the values themselves), and which subset is substituted.",
    "created_at": "2021-05-24T02:25:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512315",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'>Comment 15:</a>
Replying to [@novoselt](#comment%3A12):
> Replying to [@videlec](#comment%3A6):
> > 
> > ```
> > def test(base_ring):
> >     R = base_ring['x, y']
> >     S = base_ring['q, r']
> >     x, y = R.gens()
> >     q, r = S.gens()
> >     polys = [R.zero(), R.one(), x, y, x + y]
> >     assert all(p.subs(x=0).parent() is R for p in polys)
> >     assert all(p.subs(y=0).parent() is R for p in polys)
> >     assert all(p.subs(x=0, y=0).parent() is base_ring for p in polys)
> >     assert all(p.subs(x=q, y=r).parent() is S for p in polys)
> > ```

> 
> I disagree with this logic - why the parent of the result depends on values used for substitution? 

Just a quick comment -- the above only demonstrates that the parent of the result depends on the parents of the substituted values (not the values themselves), and which subset is substituted.



---

archive/issue_comments_512316.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nReplying to [@mkoeppe](#comment%3A15):\n> Replying to [@novoselt](#comment%3A12):\n> > Replying to [@videlec](#comment%3A6):\n> > > \n> > > ```\n> > > def test(base_ring):\n> > >     R = base_ring['x, y']\n> > >     S = base_ring['q, r']\n> > >     x, y = R.gens()\n> > >     q, r = S.gens()\n> > >     polys = [R.zero(), R.one(), x, y, x + y]\n> > >     assert all(p.subs(x=0).parent() is R for p in polys)\n> > >     assert all(p.subs(y=0).parent() is R for p in polys)\n> > >     assert all(p.subs(x=0, y=0).parent() is base_ring for p in polys)\n> > >     assert all(p.subs(x=q, y=r).parent() is S for p in polys)\n> > > ```\n\n> > \n> > I disagree with this logic - why the parent of the result depends on values used for substitution? \n\n> \n> Just a quick comment -- the above only demonstrates that the parent of the result depends on the parents of the substituted values (not the values themselves), and which subset is substituted.\n\nAnd more precisely, the rule for substitution is:\n- if the substitution is \"partial\" then the omitted variables are set to themselves\n- for a full substitution, the result of the parent is set to be the common_parent of the base_ring of the polynomial ring and the parents of values to be substituted",
    "created_at": "2021-05-24T06:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512316",
    "user": "https://github.com/videlec"
}
```

<a id='comment:16'>Comment 16:</a>
Replying to [@mkoeppe](#comment%3A15):
> Replying to [@novoselt](#comment%3A12):
> > Replying to [@videlec](#comment%3A6):
> > > 
> > > ```
> > > def test(base_ring):
> > >     R = base_ring['x, y']
> > >     S = base_ring['q, r']
> > >     x, y = R.gens()
> > >     q, r = S.gens()
> > >     polys = [R.zero(), R.one(), x, y, x + y]
> > >     assert all(p.subs(x=0).parent() is R for p in polys)
> > >     assert all(p.subs(y=0).parent() is R for p in polys)
> > >     assert all(p.subs(x=0, y=0).parent() is base_ring for p in polys)
> > >     assert all(p.subs(x=q, y=r).parent() is S for p in polys)
> > > ```

> > 
> > I disagree with this logic - why the parent of the result depends on values used for substitution? 

> 
> Just a quick comment -- the above only demonstrates that the parent of the result depends on the parents of the substituted values (not the values themselves), and which subset is substituted.

And more precisely, the rule for substitution is:
- if the substitution is "partial" then the omitted variables are set to themselves
- for a full substitution, the result of the parent is set to be the common_parent of the base_ring of the polynomial ring and the parents of values to be substituted



---

archive/issue_comments_512317.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nNote that the parents of substituted polynomials should be fixed in #27261. We can either set it as a dependency of this ticket or I can split this part from #27261 into an independent ticket.",
    "created_at": "2021-05-24T06:45:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512317",
    "user": "https://github.com/videlec"
}
```

<a id='comment:17'>Comment 17:</a>
Note that the parents of substituted polynomials should be fixed in #27261. We can either set it as a dependency of this ticket or I can split this part from #27261 into an independent ticket.



---

archive/issue_comments_512318.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ec3a7310e0476cd8fd7665c08795ef73fe3f518\">5ec3a73</a></td><td><code>src/sage/rings/polynomial/polynomial_ring_constructor.py: Skip the failing TestSuite tests</code></td></tr></table>\n",
    "created_at": "2021-05-24T06:46:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512318",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>Comment 18:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ec3a7310e0476cd8fd7665c08795ef73fe3f518">5ec3a73</a></td><td><code>src/sage/rings/polynomial/polynomial_ring_constructor.py: Skip the failing TestSuite tests</code></td></tr></table>




---

archive/issue_comments_512319.json:
```json
{
    "body": "Changed commit from **[f1b3ea5](https://github.com/sagemath/sagetrac-mirror/commit/f1b3ea5ca7689ff22b1012060a431fd4f1e186bb)** to **[5ec3a73](https://github.com/sagemath/sagetrac-mirror/commit/5ec3a7310e0476cd8fd7665c08795ef73fe3f518)**",
    "created_at": "2021-05-24T06:46:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512319",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f1b3ea5](https://github.com/sagemath/sagetrac-mirror/commit/f1b3ea5ca7689ff22b1012060a431fd4f1e186bb)** to **[5ec3a73](https://github.com/sagemath/sagetrac-mirror/commit/5ec3a7310e0476cd8fd7665c08795ef73fe3f518)**



---

archive/issue_events_404534.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-24T06:49:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404534"
}
```



---

archive/issue_comments_512320.json:
```json
{
    "body": "Changed author from **Matthias Koeppe, ...** to **Matthias Koeppe**",
    "created_at": "2021-05-24T06:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512320",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Matthias Koeppe, ...** to **Matthias Koeppe**



---

archive/issue_comments_512321.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nReplying to [@videlec](#comment%3A17):\n> Note that the parents of substituted polynomials should be fixed in #27261. We can either set it as a dependency of this ticket or I can split this part from #27261 into an independent ticket.\n\nI have prepared the present ticket for inclusion by disabling the failing tests.\n\nReady for review",
    "created_at": "2021-05-24T06:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512321",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'>Comment 20:</a>
Replying to [@videlec](#comment%3A17):
> Note that the parents of substituted polynomials should be fixed in #27261. We can either set it as a dependency of this ticket or I can split this part from #27261 into an independent ticket.

I have prepared the present ticket for inclusion by disabling the failing tests.

Ready for review



---

archive/issue_comments_512322.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nWhy something that specific is needed in `rings/polynomial/polynomial_ring.py`?\n\n```\ndef construction(self):\n    ...\n    implementation = None\n    if 'NTL' in self._implementation_repr:\n        implementation = 'NTL'\n    ...\n```\n\nOn multi-variate polynomials with a single variable this test should fail\n\n```\n            # substituting one variable (in a polynomial ring with variables) with 0\n            d = {str(gens[0]): 0}\n            tester.assertEqual(self.subs(**d).parent(), self.parent())\n```",
    "created_at": "2021-05-24T07:04:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512322",
    "user": "https://github.com/videlec"
}
```

<a id='comment:21'>Comment 21:</a>
Why something that specific is needed in `rings/polynomial/polynomial_ring.py`?

```
def construction(self):
    ...
    implementation = None
    if 'NTL' in self._implementation_repr:
        implementation = 'NTL'
    ...
```

On multi-variate polynomials with a single variable this test should fail

```
            # substituting one variable (in a polynomial ring with variables) with 0
            d = {str(gens[0]): 0}
            tester.assertEqual(self.subs(**d).parent(), self.parent())
```



---

archive/issue_comments_512323.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2021-05-24T07:04:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512323",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_comments_512324.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nReplying to [@videlec](#comment%3A21):\n> Why something that specific is needed in `rings/polynomial/polynomial_ring.py`?\n> \n> ```\n> def construction(self):\n>     ...\n>     implementation = None\n>     if 'NTL' in self._implementation_repr:\n>         implementation = 'NTL'\n>     ...\n> ```\n\nThis is obviously not a complete solution. The parents don't keep track in a clean way what the implementation is. I have some other experimental code that tries to decode the element class, but it's all not very satisfying.",
    "created_at": "2021-05-24T07:06:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512324",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'>Comment 23:</a>
Replying to [@videlec](#comment%3A21):
> Why something that specific is needed in `rings/polynomial/polynomial_ring.py`?
> 
> ```
> def construction(self):
>     ...
>     implementation = None
>     if 'NTL' in self._implementation_repr:
>         implementation = 'NTL'
>     ...
> ```

This is obviously not a complete solution. The parents don't keep track in a clean way what the implementation is. I have some other experimental code that tries to decode the element class, but it's all not very satisfying.



---

archive/issue_comments_512325.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nReplying to [@mkoeppe](#comment%3A23):\n> Replying to [@videlec](#comment%3A21):\n> > Why something that specific is needed in `rings/polynomial/polynomial_ring.py`?\n> > \n> > ```\n> > def construction(self):\n> >     ...\n> >     implementation = None\n> >     if 'NTL' in self._implementation_repr:\n> >         implementation = 'NTL'\n> >     ...\n> > ```\n\n> \n> This is obviously not a complete solution. The parents don't keep track in a clean way what the implementation is. I have some other experimental code that tries to decode the element class, but it's all not very satisfying.\n\nCertainly not optimal, but something similar is implemented for `MatrixSpace` (from `matrix/matrix_class.py`) via `_has_default_implementation`.",
    "created_at": "2021-05-24T07:10:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512325",
    "user": "https://github.com/videlec"
}
```

<a id='comment:24'>Comment 24:</a>
Replying to [@mkoeppe](#comment%3A23):
> Replying to [@videlec](#comment%3A21):
> > Why something that specific is needed in `rings/polynomial/polynomial_ring.py`?
> > 
> > ```
> > def construction(self):
> >     ...
> >     implementation = None
> >     if 'NTL' in self._implementation_repr:
> >         implementation = 'NTL'
> >     ...
> > ```

> 
> This is obviously not a complete solution. The parents don't keep track in a clean way what the implementation is. I have some other experimental code that tries to decode the element class, but it's all not very satisfying.

Certainly not optimal, but something similar is implemented for `MatrixSpace` (from `matrix/matrix_class.py`) via `_has_default_implementation`.



---

archive/issue_comments_512326.json:
```json
{
    "body": "Changed commit from **[5ec3a73](https://github.com/sagemath/sagetrac-mirror/commit/5ec3a7310e0476cd8fd7665c08795ef73fe3f518)** to **[64cfc50](https://github.com/sagemath/sagetrac-mirror/commit/64cfc5052f5cae294ed7002c6d5743a06c7760e2)**",
    "created_at": "2021-05-24T07:12:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512326",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5ec3a73](https://github.com/sagemath/sagetrac-mirror/commit/5ec3a7310e0476cd8fd7665c08795ef73fe3f518)** to **[64cfc50](https://github.com/sagemath/sagetrac-mirror/commit/64cfc5052f5cae294ed7002c6d5743a06c7760e2)**



---

archive/issue_comments_512327.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64cfc5052f5cae294ed7002c6d5743a06c7760e2\">64cfc50</a></td><td><code>MPolynomial_element._test_subs: Test substituting 1 variable only in rings with > 1 variable</code></td></tr></table>\n",
    "created_at": "2021-05-24T07:12:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512327",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:25'>Comment 25:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64cfc5052f5cae294ed7002c6d5743a06c7760e2">64cfc50</a></td><td><code>MPolynomial_element._test_subs: Test substituting 1 variable only in rings with > 1 variable</code></td></tr></table>




---

archive/issue_comments_512328.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nReplying to [@videlec](#comment%3A24):\n> Certainly not optimal, but something similar is implemented for `MatrixSpace` (from `matrix/matrix_class.py`) via `_has_default_implementation`.\n\nThanks for the pointer. \n\nPerhaps something for a follow-up ticket?",
    "created_at": "2021-05-24T07:15:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512328",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'>Comment 26:</a>
Replying to [@videlec](#comment%3A24):
> Certainly not optimal, but something similar is implemented for `MatrixSpace` (from `matrix/matrix_class.py`) via `_has_default_implementation`.

Thanks for the pointer. 

Perhaps something for a follow-up ticket?



---

archive/issue_comments_512329.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nReplying to [@mkoeppe](#comment%3A26):\n> Replying to [@videlec](#comment%3A24):\n> > Certainly not optimal, but something similar is implemented for `MatrixSpace` (from `matrix/matrix_class.py`) via `_has_default_implementation`.\n\n> \n> Thanks for the pointer. \n> \n> Perhaps something for a follow-up ticket?\n\nDefinitely: this is #31852. I was not convinced by the solution I used for `MatrixClass`. I secretly hoped that you had some alternative.",
    "created_at": "2021-05-24T07:30:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512329",
    "user": "https://github.com/videlec"
}
```

<a id='comment:27'>Comment 27:</a>
Replying to [@mkoeppe](#comment%3A26):
> Replying to [@videlec](#comment%3A24):
> > Certainly not optimal, but something similar is implemented for `MatrixSpace` (from `matrix/matrix_class.py`) via `_has_default_implementation`.

> 
> Thanks for the pointer. 
> 
> Perhaps something for a follow-up ticket?

Definitely: this is #31852. I was not convinced by the solution I used for `MatrixClass`. I secretly hoped that you had some alternative.



---

archive/issue_comments_512330.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nAlso, the test suite does not catch invalid substitution such as\n\n```\nsage: QQ['x,y'].gen(0).subs(x=QQ['t'].gen())  # not intended to work\nt\n```",
    "created_at": "2021-05-24T07:33:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512330",
    "user": "https://github.com/videlec"
}
```

<a id='comment:28'>Comment 28:</a>
Also, the test suite does not catch invalid substitution such as

```
sage: QQ['x,y'].gen(0).subs(x=QQ['t'].gen())  # not intended to work
t
```



---

archive/issue_comments_512331.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nReplying to [@videlec](#comment%3A16):\n> Replying to [@mkoeppe](#comment%3A15):\n> > Replying to [@novoselt](#comment%3A12):\n> > > I disagree with this logic - why the parent of the result depends on values used for substitution? \n\n> > \n> > Just a quick comment -- the above only demonstrates that the parent of the result depends on the parents of the substituted values (not the values themselves), and which subset is substituted.\n\n> \n> And more precisely, the rule for substitution is:\n> - if the substitution is \"partial\" then the omitted variables are set to themselves\n> - for a full substitution, the result of the parent is set to be the common_parent of the base_ring of the polynomial ring and the parents of values to be substituted\n\nWhat is \"partial\"? How about this one:\n\n```\nsage: R.<x, y> = QQ[]\nsage: parent(x.subs(x=1))\nMultivariate Polynomial Ring in x, y over Rational Field\nsage: R.<x, y> = QQ[\"a, b\"][]\nsage: parent(x.subs(x=1))\nMultivariate Polynomial Ring in a, b over Rational Field\n```\nI also think that it makes sense to have the same results here\n\n```\nsage; R.<x, y> = QQ[\"a, b\"][]\nsage: p = x + y\nsage: parent(p.subs(x=1, y=2))\nMultivariate Polynomial Ring in a, b over Rational Field\nsage: parent(p.subs(x=1).subs(y=2))\nMultivariate Polynomial Ring in x, y over Multivariate Polynomial Ring in a, b over Rational Field\n```",
    "created_at": "2021-05-24T14:55:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512331",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:29'>Comment 29:</a>
Replying to [@videlec](#comment%3A16):
> Replying to [@mkoeppe](#comment%3A15):
> > Replying to [@novoselt](#comment%3A12):
> > > I disagree with this logic - why the parent of the result depends on values used for substitution? 

> > 
> > Just a quick comment -- the above only demonstrates that the parent of the result depends on the parents of the substituted values (not the values themselves), and which subset is substituted.

> 
> And more precisely, the rule for substitution is:
> - if the substitution is "partial" then the omitted variables are set to themselves
> - for a full substitution, the result of the parent is set to be the common_parent of the base_ring of the polynomial ring and the parents of values to be substituted

What is "partial"? How about this one:

```
sage: R.<x, y> = QQ[]
sage: parent(x.subs(x=1))
Multivariate Polynomial Ring in x, y over Rational Field
sage: R.<x, y> = QQ["a, b"][]
sage: parent(x.subs(x=1))
Multivariate Polynomial Ring in a, b over Rational Field
```
I also think that it makes sense to have the same results here

```
sage; R.<x, y> = QQ["a, b"][]
sage: p = x + y
sage: parent(p.subs(x=1, y=2))
Multivariate Polynomial Ring in a, b over Rational Field
sage: parent(p.subs(x=1).subs(y=2))
Multivariate Polynomial Ring in x, y over Multivariate Polynomial Ring in a, b over Rational Field
```



---

archive/issue_comments_512332.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nReplying to [@novoselt](#comment%3A29):\n> Replying to [@videlec](#comment%3A16):\n> > Replying to [@mkoeppe](#comment%3A15):\n> > > Replying to [@novoselt](#comment%3A12):\n> > > > I disagree with this logic - why the parent of the result depends on values used for substitution? \n\n> > > \n> > > Just a quick comment -- the above only demonstrates that the parent of the result depends on the parents of the substituted values (not the values themselves), and which subset is substituted.\n\n> > \n> > And more precisely, the rule for substitution is:\n> > - if the substitution is \"partial\" then the omitted variables are set to themselves\n> > - for a full substitution, the result of the parent is set to be the common_parent of the base_ring of the polynomial ring and the parents of values to be substituted\n\n> \n> What is \"partial\"?\n\nPartial is when you do not substitute all variables. On `QQ[x,y]` if you only specify the value of `x`, let say `x=1` then `y` is set to `y`. In other words `p.subs(x=1)` is equivalent to `p(1, y)`. All the examples you wrote are perfectly valid and will be supported in the same way. The only example that is wrong and I want to disable is in [comment:28](#comment%3A28).",
    "created_at": "2021-05-24T17:40:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512332",
    "user": "https://github.com/videlec"
}
```

<a id='comment:30'>Comment 30:</a>
Replying to [@novoselt](#comment%3A29):
> Replying to [@videlec](#comment%3A16):
> > Replying to [@mkoeppe](#comment%3A15):
> > > Replying to [@novoselt](#comment%3A12):
> > > > I disagree with this logic - why the parent of the result depends on values used for substitution? 

> > > 
> > > Just a quick comment -- the above only demonstrates that the parent of the result depends on the parents of the substituted values (not the values themselves), and which subset is substituted.

> > 
> > And more precisely, the rule for substitution is:
> > - if the substitution is "partial" then the omitted variables are set to themselves
> > - for a full substitution, the result of the parent is set to be the common_parent of the base_ring of the polynomial ring and the parents of values to be substituted

> 
> What is "partial"?

Partial is when you do not substitute all variables. On `QQ[x,y]` if you only specify the value of `x`, let say `x=1` then `y` is set to `y`. In other words `p.subs(x=1)` is equivalent to `p(1, y)`. All the examples you wrote are perfectly valid and will be supported in the same way. The only example that is wrong and I want to disable is in [comment:28](#comment%3A28).



---

archive/issue_comments_512333.json:
```json
{
    "body": "Changed commit from **[64cfc50](https://github.com/sagemath/sagetrac-mirror/commit/64cfc5052f5cae294ed7002c6d5743a06c7760e2)** to **[8b09245](https://github.com/sagemath/sagetrac-mirror/commit/8b09245398437d24b7aab7a1aa472545067dbbfc)**",
    "created_at": "2021-05-24T18:17:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512333",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[64cfc50](https://github.com/sagemath/sagetrac-mirror/commit/64cfc5052f5cae294ed7002c6d5743a06c7760e2)** to **[8b09245](https://github.com/sagemath/sagetrac-mirror/commit/8b09245398437d24b7aab7a1aa472545067dbbfc)**



---

archive/issue_comments_512334.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b09245398437d24b7aab7a1aa472545067dbbfc\">8b09245</a></td><td><code>MPolynomial_element._test_subs: Check that partial substitution by elements from another ring raises an exception</code></td></tr></table>\n",
    "created_at": "2021-05-24T18:17:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512334",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:31'>Comment 31:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b09245398437d24b7aab7a1aa472545067dbbfc">8b09245</a></td><td><code>MPolynomial_element._test_subs: Check that partial substitution by elements from another ring raises an exception</code></td></tr></table>




---

archive/issue_comments_512335.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da2beaaee15c03b7b00600e60eeac41499b6483f\">da2beaa</a></td><td><code>Move _test_subs to superclass MPolynomial</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2529a15095b686dcb28b17e18e4565bbb5308df7\">2529a15</a></td><td><code>BooleanPolynomialRing: Disable another failing TestSuite test</code></td></tr></table>\n",
    "created_at": "2021-05-24T18:36:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512335",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:32'>Comment 32:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da2beaaee15c03b7b00600e60eeac41499b6483f">da2beaa</a></td><td><code>Move _test_subs to superclass MPolynomial</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2529a15095b686dcb28b17e18e4565bbb5308df7">2529a15</a></td><td><code>BooleanPolynomialRing: Disable another failing TestSuite test</code></td></tr></table>




---

archive/issue_comments_512336.json:
```json
{
    "body": "Changed commit from **[8b09245](https://github.com/sagemath/sagetrac-mirror/commit/8b09245398437d24b7aab7a1aa472545067dbbfc)** to **[2529a15](https://github.com/sagemath/sagetrac-mirror/commit/2529a15095b686dcb28b17e18e4565bbb5308df7)**",
    "created_at": "2021-05-24T18:36:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512336",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8b09245](https://github.com/sagemath/sagetrac-mirror/commit/8b09245398437d24b7aab7a1aa472545067dbbfc)** to **[2529a15](https://github.com/sagemath/sagetrac-mirror/commit/2529a15095b686dcb28b17e18e4565bbb5308df7)**



---

archive/issue_comments_512337.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nThe example from comment 28 is now tested",
    "created_at": "2021-05-24T18:38:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512337",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'>Comment 33:</a>
The example from comment 28 is now tested



---

archive/issue_comments_512338.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,7 @@\n \n We add a bunch of `TestSuite` calls for the rings constructed as examples in `polynomial_ring_constructor`.\n \n+Many tests are failing; we skip these tests to make this ticket mergeable. In follow-up tickets, these failures should be fixed.\n+\n+\n+\n``````\n",
    "created_at": "2021-05-24T18:42:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512338",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,7 @@
 
 We add a bunch of `TestSuite` calls for the rings constructed as examples in `polynomial_ring_constructor`.
 
+Many tests are failing; we skip these tests to make this ticket mergeable. In follow-up tickets, these failures should be fixed.
+
+
+
``````




---

archive/issue_comments_512339.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nAs expected, `QQ[x,y]` now fails its test suite. Great.\n\n```\nsage -t --long --random-seed=0 src/sage/rings/ring.pyx  # 2 doctests failed\nsage -t --long --random-seed=0 src/sage/rings/polynomial/polynomial_ring_constructor.py  # 4 doctests failed\n```",
    "created_at": "2021-05-24T21:29:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512339",
    "user": "https://github.com/videlec"
}
```

<a id='comment:35'>Comment 35:</a>
As expected, `QQ[x,y]` now fails its test suite. Great.

```
sage -t --long --random-seed=0 src/sage/rings/ring.pyx  # 2 doctests failed
sage -t --long --random-seed=0 src/sage/rings/polynomial/polynomial_ring_constructor.py  # 4 doctests failed
```



---

archive/issue_events_404535.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-05-24T21:29:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404535"
}
```



---

archive/issue_events_404536.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-05-24T21:29:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404536"
}
```



---

archive/issue_comments_512340.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/778d61e70c95f53cfe74d59fca94cbdfab9466a8\">778d61e</a></td><td><code>src/sage/rings{ring.pyx,polynomial/polynomial_ring_constructor.py}: Skip failing TestSuite tests</code></td></tr></table>\n",
    "created_at": "2021-05-24T22:37:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512340",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:36'>Comment 36:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/778d61e70c95f53cfe74d59fca94cbdfab9466a8">778d61e</a></td><td><code>src/sage/rings{ring.pyx,polynomial/polynomial_ring_constructor.py}: Skip failing TestSuite tests</code></td></tr></table>




---

archive/issue_comments_512341.json:
```json
{
    "body": "Changed commit from **[2529a15](https://github.com/sagemath/sagetrac-mirror/commit/2529a15095b686dcb28b17e18e4565bbb5308df7)** to **[778d61e](https://github.com/sagemath/sagetrac-mirror/commit/778d61e70c95f53cfe74d59fca94cbdfab9466a8)**",
    "created_at": "2021-05-24T22:37:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512341",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2529a15](https://github.com/sagemath/sagetrac-mirror/commit/2529a15095b686dcb28b17e18e4565bbb5308df7)** to **[778d61e](https://github.com/sagemath/sagetrac-mirror/commit/778d61e70c95f53cfe74d59fca94cbdfab9466a8)**



---

archive/issue_events_404537.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-24T22:38:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404537"
}
```



---

archive/issue_events_404538.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-24T22:38:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404538"
}
```



---

archive/issue_comments_512342.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,5 +4,7 @@\n \n Many tests are failing; we skip these tests to make this ticket mergeable. In follow-up tickets, these failures should be fixed.\n \n+Related:\n+- https://groups.google.com/g/sage-devel/c/vGzNJKAQWbs/m/nhm1iIPWAwAJ\n+- https://groups.google.com/g/sage-devel/c/xiH9d4oBwaI/m/9Q0U1bUlAwAJ\n \n-\n``````\n",
    "created_at": "2021-05-24T22:39:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512342",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,5 +4,7 @@
 
 Many tests are failing; we skip these tests to make this ticket mergeable. In follow-up tickets, these failures should be fixed.
 
+Related:
+- https://groups.google.com/g/sage-devel/c/vGzNJKAQWbs/m/nhm1iIPWAwAJ
+- https://groups.google.com/g/sage-devel/c/xiH9d4oBwaI/m/9Q0U1bUlAwAJ
 
-
``````




---

archive/issue_comments_512343.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nReplying to [@mkoeppe](#comment%3A23):\n> Replying to [@videlec](#comment%3A21):\n> > Why something that specific is needed in `rings/polynomial/polynomial_ring.py`?\n> > \n> > ```\n> > def construction(self):\n> >     ...\n> >     implementation = None\n> >     if 'NTL' in self._implementation_repr:\n> >         implementation = 'NTL'\n> >     ...\n> > ```\n\n> \n> This is obviously not a complete solution. The parents don't keep track in a clean way what the implementation is. I have some other experimental code that tries to decode the element class, but it's all not very satisfying.\n\nCould you at least add a `# NOTE:` to this code and possibly add a pointer to the ticket #31852.",
    "created_at": "2021-05-28T07:37:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512343",
    "user": "https://github.com/videlec"
}
```

<a id='comment:39'>Comment 39:</a>
Replying to [@mkoeppe](#comment%3A23):
> Replying to [@videlec](#comment%3A21):
> > Why something that specific is needed in `rings/polynomial/polynomial_ring.py`?
> > 
> > ```
> > def construction(self):
> >     ...
> >     implementation = None
> >     if 'NTL' in self._implementation_repr:
> >         implementation = 'NTL'
> >     ...
> > ```

> 
> This is obviously not a complete solution. The parents don't keep track in a clean way what the implementation is. I have some other experimental code that tries to decode the element class, but it's all not very satisfying.

Could you at least add a `# NOTE:` to this code and possibly add a pointer to the ticket #31852.



---

archive/issue_comments_512344.json:
```json
{
    "body": "Changed commit from **[778d61e](https://github.com/sagemath/sagetrac-mirror/commit/778d61e70c95f53cfe74d59fca94cbdfab9466a8)** to **[2e6a91b](https://github.com/sagemath/sagetrac-mirror/commit/2e6a91b8576d35589cf22fc3bb7eeac95546918c)**",
    "created_at": "2021-05-29T02:24:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512344",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[778d61e](https://github.com/sagemath/sagetrac-mirror/commit/778d61e70c95f53cfe74d59fca94cbdfab9466a8)** to **[2e6a91b](https://github.com/sagemath/sagetrac-mirror/commit/2e6a91b8576d35589cf22fc3bb7eeac95546918c)**



---

archive/issue_comments_512345.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e6a91b8576d35589cf22fc3bb7eeac95546918c\">2e6a91b</a></td><td><code>PolynomialRing_integral_domain.construction: Add doctest and implementation note</code></td></tr></table>\n",
    "created_at": "2021-05-29T02:24:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512345",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:40'>Comment 40:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e6a91b8576d35589cf22fc3bb7eeac95546918c">2e6a91b</a></td><td><code>PolynomialRing_integral_domain.construction: Add doctest and implementation note</code></td></tr></table>




---

archive/issue_comments_512346.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nTiny doctest issue in the tests you introduced\n\n```\nsage -t --long --random-seed=0 src/sage/rings/polynomial/polynomial_ring.py\n**********************************************************************\nFile \"src/sage/rings/polynomial/polynomial_ring.py\", line 1964, in sage.rings.polynomial.polynomial_ring.PolynomialRing_commutative.construction\nFailed example:\n    R = PRing(ZZ, 'x'); R\nExpected nothing\nGot:\n    Univariate Polynomial Ring in x over Integer Ring\n**********************************************************************\nFile \"src/sage/rings/polynomial/polynomial_ring.py\", line 1970, in sage.rings.polynomial.polynomial_ring.PolynomialRing_commutative.construction\nFailed example:\n    R = PRing(ZZ, 'x', implementation='NTL'); R\nExpected nothing\nGot:\n    Univariate Polynomial Ring in x over Integer Ring (using NTL)\n**********************************************************************\n```",
    "created_at": "2021-05-30T08:07:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512346",
    "user": "https://github.com/videlec"
}
```

<a id='comment:41'>Comment 41:</a>
Tiny doctest issue in the tests you introduced

```
sage -t --long --random-seed=0 src/sage/rings/polynomial/polynomial_ring.py
**********************************************************************
File "src/sage/rings/polynomial/polynomial_ring.py", line 1964, in sage.rings.polynomial.polynomial_ring.PolynomialRing_commutative.construction
Failed example:
    R = PRing(ZZ, 'x'); R
Expected nothing
Got:
    Univariate Polynomial Ring in x over Integer Ring
**********************************************************************
File "src/sage/rings/polynomial/polynomial_ring.py", line 1970, in sage.rings.polynomial.polynomial_ring.PolynomialRing_commutative.construction
Failed example:
    R = PRing(ZZ, 'x', implementation='NTL'); R
Expected nothing
Got:
    Univariate Polynomial Ring in x over Integer Ring (using NTL)
**********************************************************************
```



---

archive/issue_events_404539.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-05-30T08:07:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404539"
}
```



---

archive/issue_events_404540.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-05-30T08:07:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404540"
}
```



---

archive/issue_comments_512347.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55b29808ee9b204ee2e8adf9321e632bd9718d90\">55b2980</a></td><td><code>src/sage/rings/polynomial/polynomial_ring.py: Fix up doctests</code></td></tr></table>\n",
    "created_at": "2021-05-30T08:13:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512347",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:43'>Comment 43:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55b29808ee9b204ee2e8adf9321e632bd9718d90">55b2980</a></td><td><code>src/sage/rings/polynomial/polynomial_ring.py: Fix up doctests</code></td></tr></table>




---

archive/issue_comments_512348.json:
```json
{
    "body": "Changed commit from **[2e6a91b](https://github.com/sagemath/sagetrac-mirror/commit/2e6a91b8576d35589cf22fc3bb7eeac95546918c)** to **[55b2980](https://github.com/sagemath/sagetrac-mirror/commit/55b29808ee9b204ee2e8adf9321e632bd9718d90)**",
    "created_at": "2021-05-30T08:13:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512348",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2e6a91b](https://github.com/sagemath/sagetrac-mirror/commit/2e6a91b8576d35589cf22fc3bb7eeac95546918c)** to **[55b2980](https://github.com/sagemath/sagetrac-mirror/commit/55b29808ee9b204ee2e8adf9321e632bd9718d90)**



---

archive/issue_events_404541.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-30T08:13:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404541"
}
```



---

archive/issue_events_404542.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-30T08:13:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404542"
}
```



---

archive/issue_comments_512349.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nCan we get this in please? The patchbot failures are unrelated",
    "created_at": "2021-06-06T21:12:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512349",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'>Comment 45:</a>
Can we get this in please? The patchbot failures are unrelated



---

archive/issue_events_404543.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-06-06T21:24:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404543"
}
```



---

archive/issue_events_404544.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-06-06T21:24:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404544"
}
```



---

archive/issue_comments_512350.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nSure. I did not receive any notification e-mail for your comments 43 and 44 in the ticket.",
    "created_at": "2021-06-06T21:24:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512350",
    "user": "https://github.com/videlec"
}
```

<a id='comment:46'>Comment 46:</a>
Sure. I did not receive any notification e-mail for your comments 43 and 44 in the ticket.



---

archive/issue_comments_512351.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nThanks!",
    "created_at": "2021-06-06T21:25:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512351",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'>Comment 47:</a>
Thanks!



---

archive/issue_events_404545.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-06-06T22:34:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404545"
}
```



---

archive/issue_events_404546.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-06-06T22:34:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404546"
}
```



---

archive/issue_comments_512352.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nI don't really like having those `TestSuite` calls in the main part of the documentation for the likely very heavily used and read `PolynomialRing`. It adds a lot of clutter and will be confusing for any non-developer. These should all occur in after the `TESTS:` line, and I feel they are best grouped together so it is easier to tell if we have full coverage rather than spread across the file.",
    "created_at": "2021-06-06T22:34:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512352",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:48'>Comment 48:</a>
I don't really like having those `TestSuite` calls in the main part of the documentation for the likely very heavily used and read `PolynomialRing`. It adds a lot of clutter and will be confusing for any non-developer. These should all occur in after the `TESTS:` line, and I feel they are best grouped together so it is easier to tell if we have full coverage rather than spread across the file.



---

archive/issue_comments_512353.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nSorry, I will not work on changing this",
    "created_at": "2021-06-06T22:41:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512353",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'>Comment 49:</a>
Sorry, I will not work on changing this



---

archive/issue_events_404547.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404547"
}
```



---

archive/issue_events_404548.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404548"
}
```



---

archive/issue_events_404549.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404549"
}
```



---

archive/issue_events_404550.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404550"
}
```



---

archive/issue_events_404551.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404551"
}
```



---

archive/issue_events_404552.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404552"
}
```



---

archive/issue_events_404553.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404553"
}
```



---

archive/issue_events_404554.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404554"
}
```



---

archive/issue_comments_512354.json:
```json
{
    "body": "Changed commit from **[55b2980](https://github.com/sagemath/sagetrac-mirror/commit/55b29808ee9b204ee2e8adf9321e632bd9718d90)** to **[c0026d3](https://github.com/sagemath/sagetrac-mirror/commit/c0026d342809c3769d2931724d2bebe8bcb328b8)**",
    "created_at": "2023-01-07T20:15:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512354",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[55b2980](https://github.com/sagemath/sagetrac-mirror/commit/55b29808ee9b204ee2e8adf9321e632bd9718d90)** to **[c0026d3](https://github.com/sagemath/sagetrac-mirror/commit/c0026d342809c3769d2931724d2bebe8bcb328b8)**



---

archive/issue_comments_512355.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c92baab8d141bc38d95bfe71f06ff3980c36e5c\">0c92baa</a></td><td><code>src/sage/rings/polynomial/pbori/pbori.pyx: Skip failing test _test_zero_divisors</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e270c79c240adbed53b68641d4cb4900549f9d81\">e270c79</a></td><td><code>PolynomialFunctor: Keep track of implementation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4e5ab12fa307f1a56474b91942a844361d80ca2\">b4e5ab1</a></td><td><code>src/sage/rings/polynomial/polynomial_ring_constructor.py: Skip the failing TestSuite tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98093fe118198c388aed181da253b8d4c00823c7\">98093fe</a></td><td><code>MPolynomial_element._test_subs: Test substituting 1 variable only in rings with > 1 variable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b2046788112ff48927e91bf75082eea1369e602\">6b20467</a></td><td><code>MPolynomial_element._test_subs: Check that partial substitution by elements from another ring raises an exception</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05d9cda4d74718dcfe9e4faac55222a670f5f443\">05d9cda</a></td><td><code>Move _test_subs to superclass MPolynomial</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b348a40338a8a070ad74741f98db0c339341024\">0b348a4</a></td><td><code>BooleanPolynomialRing: Disable another failing TestSuite test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94f04516d060831a4cd8dac37c8a5a58d816842e\">94f0451</a></td><td><code>src/sage/rings{ring.pyx,polynomial/polynomial_ring_constructor.py}: Skip failing TestSuite tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c584ca086ef240c8f916dd90d4828238c587f6ee\">c584ca0</a></td><td><code>PolynomialRing_integral_domain.construction: Add doctest and implementation note</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0026d342809c3769d2931724d2bebe8bcb328b8\">c0026d3</a></td><td><code>src/sage/rings/polynomial/polynomial_ring.py: Fix up doctests</code></td></tr></table>\n",
    "created_at": "2023-01-07T20:15:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512355",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:54'>Comment 54:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c92baab8d141bc38d95bfe71f06ff3980c36e5c">0c92baa</a></td><td><code>src/sage/rings/polynomial/pbori/pbori.pyx: Skip failing test _test_zero_divisors</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e270c79c240adbed53b68641d4cb4900549f9d81">e270c79</a></td><td><code>PolynomialFunctor: Keep track of implementation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4e5ab12fa307f1a56474b91942a844361d80ca2">b4e5ab1</a></td><td><code>src/sage/rings/polynomial/polynomial_ring_constructor.py: Skip the failing TestSuite tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98093fe118198c388aed181da253b8d4c00823c7">98093fe</a></td><td><code>MPolynomial_element._test_subs: Test substituting 1 variable only in rings with > 1 variable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b2046788112ff48927e91bf75082eea1369e602">6b20467</a></td><td><code>MPolynomial_element._test_subs: Check that partial substitution by elements from another ring raises an exception</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05d9cda4d74718dcfe9e4faac55222a670f5f443">05d9cda</a></td><td><code>Move _test_subs to superclass MPolynomial</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b348a40338a8a070ad74741f98db0c339341024">0b348a4</a></td><td><code>BooleanPolynomialRing: Disable another failing TestSuite test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94f04516d060831a4cd8dac37c8a5a58d816842e">94f0451</a></td><td><code>src/sage/rings{ring.pyx,polynomial/polynomial_ring_constructor.py}: Skip failing TestSuite tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c584ca086ef240c8f916dd90d4828238c587f6ee">c584ca0</a></td><td><code>PolynomialRing_integral_domain.construction: Add doctest and implementation note</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0026d342809c3769d2931724d2bebe8bcb328b8">c0026d3</a></td><td><code>src/sage/rings/polynomial/polynomial_ring.py: Fix up doctests</code></td></tr></table>




---

archive/issue_comments_512356.json:
```json
{
    "body": "Changed commit from **[c0026d3](https://github.com/sagemath/sagetrac-mirror/commit/c0026d342809c3769d2931724d2bebe8bcb328b8)** to **[074f6a8](https://github.com/sagemath/sagetrac-mirror/commit/074f6a8722481ee20baf020aea4ed43d064ef9ac)**",
    "created_at": "2023-01-07T20:33:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512356",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c0026d3](https://github.com/sagemath/sagetrac-mirror/commit/c0026d342809c3769d2931724d2bebe8bcb328b8)** to **[074f6a8](https://github.com/sagemath/sagetrac-mirror/commit/074f6a8722481ee20baf020aea4ed43d064ef9ac)**



---

archive/issue_comments_512357.json:
```json
{
    "body": "<a id='comment:55'>Comment 55:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/074f6a8722481ee20baf020aea4ed43d064ef9ac\">074f6a8</a></td><td><code>src/sage/rings/polynomial/polynomial_ring_constructor.py: Move added TestSuite calls to the end of the TESTS section</code></td></tr></table>\n",
    "created_at": "2023-01-07T20:33:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512357",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:55'>Comment 55:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/074f6a8722481ee20baf020aea4ed43d064ef9ac">074f6a8</a></td><td><code>src/sage/rings/polynomial/polynomial_ring_constructor.py: Move added TestSuite calls to the end of the TESTS section</code></td></tr></table>




---

archive/issue_events_404555.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-07T20:34:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404555"
}
```



---

archive/issue_events_404556.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-07T20:34:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404556"
}
```



---

archive/issue_comments_512358.json:
```json
{
    "body": "<a id='comment:57'>Comment 57:</a>\nReplying to [Travis Scrimshaw](#comment%3A48):\n> I don't really like having those `TestSuite` calls in the main part of the documentation for the likely very heavily used and read `PolynomialRing`. It adds a lot of clutter and will be confusing for any non-developer. These should all occur in after the `TESTS:` line, and I feel they are best grouped together so it is easier to tell if we have full coverage rather than spread across the file.\n\nI've made this change now to get this ticket unstuck",
    "created_at": "2023-01-07T20:34:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512358",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:57'>Comment 57:</a>
Replying to [Travis Scrimshaw](#comment%3A48):
> I don't really like having those `TestSuite` calls in the main part of the documentation for the likely very heavily used and read `PolynomialRing`. It adds a lot of clutter and will be confusing for any non-developer. These should all occur in after the `TESTS:` line, and I feel they are best grouped together so it is easier to tell if we have full coverage rather than spread across the file.

I've made this change now to get this ticket unstuck



---

archive/issue_comments_512359.json:
```json
{
    "body": "<a id='comment:58'>Comment 58:</a>\n\n```\nsage -t --random-seed=251094416156828386553025816452480998642 sage/sets/image_set.py\n**********************************************************************\nFile \"sage/sets/image_set.py\", line 81, in sage.sets.image_set.ImageSubobject.__init__\nFailed example:\n    TestSuite(Im).run(skip=['_test_an_element', '_test_pickling',\n                            '_test_some_elements'])\nExpected nothing\nGot:\n      Failure in _test_subs:\n      Traceback (most recent call last):\n        File \"/__w/sagetrac-mirror/sagetrac-mirror/src/sage/misc/sage_unittest.py\", line 297, in run\n          test_method(tester=tester)\n        File \"sage/rings/polynomial/multi_polynomial.pyx\", line 2595, in sage.rings.polynomial.multi_polynomial.MPolynomial._test_subs\n          tester.assertEqual(self.subs(**d).parent(), self.parent().base_ring())\n        File \"/usr/lib/python3.8/unittest/case.py\", line 912, in assertEqual\n          assertion_func(first, second, msg=msg)\n        File \"/usr/lib/python3.8/unittest/case.py\", line 905, in _baseAssertEqual\n          raise self.failureException(msg)\n      AssertionError: Multivariate Polynomial Ring in x, y over Rational Field != Rational Field\n      ------------------------------------------------------------\n      The following tests failed: _test_subs\n    Failure in _test_elements\n    The following tests failed: _test_elements\n```",
    "created_at": "2023-01-07T23:44:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512359",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:58'>Comment 58:</a>

```
sage -t --random-seed=251094416156828386553025816452480998642 sage/sets/image_set.py
**********************************************************************
File "sage/sets/image_set.py", line 81, in sage.sets.image_set.ImageSubobject.__init__
Failed example:
    TestSuite(Im).run(skip=['_test_an_element', '_test_pickling',
                            '_test_some_elements'])
Expected nothing
Got:
      Failure in _test_subs:
      Traceback (most recent call last):
        File "/__w/sagetrac-mirror/sagetrac-mirror/src/sage/misc/sage_unittest.py", line 297, in run
          test_method(tester=tester)
        File "sage/rings/polynomial/multi_polynomial.pyx", line 2595, in sage.rings.polynomial.multi_polynomial.MPolynomial._test_subs
          tester.assertEqual(self.subs(**d).parent(), self.parent().base_ring())
        File "/usr/lib/python3.8/unittest/case.py", line 912, in assertEqual
          assertion_func(first, second, msg=msg)
        File "/usr/lib/python3.8/unittest/case.py", line 905, in _baseAssertEqual
          raise self.failureException(msg)
      AssertionError: Multivariate Polynomial Ring in x, y over Rational Field != Rational Field
      ------------------------------------------------------------
      The following tests failed: _test_subs
    Failure in _test_elements
    The following tests failed: _test_elements
```



---

archive/issue_comments_512360.json:
```json
{
    "body": "<a id='comment:59'>Comment 59:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73dfeb8fb1cdc6f14152fb3a3cbb28a6828049a3\">73dfeb8</a></td><td><code>src/sage/sets/image_set.py: Skip a failing test</code></td></tr></table>\n",
    "created_at": "2023-01-07T23:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512360",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:59'>Comment 59:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73dfeb8fb1cdc6f14152fb3a3cbb28a6828049a3">73dfeb8</a></td><td><code>src/sage/sets/image_set.py: Skip a failing test</code></td></tr></table>




---

archive/issue_comments_512361.json:
```json
{
    "body": "Changed commit from **[074f6a8](https://github.com/sagemath/sagetrac-mirror/commit/074f6a8722481ee20baf020aea4ed43d064ef9ac)** to **[73dfeb8](https://github.com/sagemath/sagetrac-mirror/commit/73dfeb8fb1cdc6f14152fb3a3cbb28a6828049a3)**",
    "created_at": "2023-01-07T23:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512361",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[074f6a8](https://github.com/sagemath/sagetrac-mirror/commit/074f6a8722481ee20baf020aea4ed43d064ef9ac)** to **[73dfeb8](https://github.com/sagemath/sagetrac-mirror/commit/73dfeb8fb1cdc6f14152fb3a3cbb28a6828049a3)**



---

archive/issue_events_404557.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2023-01-10T04:36:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404557"
}
```



---

archive/issue_events_404558.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2023-01-10T04:36:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31668#event-404558"
}
```



---

archive/issue_comments_512362.json:
```json
{
    "body": "<a id='comment:60'>Comment 60:</a>\nThank you. The patchbot failure seems unrelated; tests pass locally for me.",
    "created_at": "2023-01-10T04:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512362",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:60'>Comment 60:</a>
Thank you. The patchbot failure seems unrelated; tests pass locally for me.



---

archive/issue_comments_512363.json:
```json
{
    "body": "Changed reviewer from **Vincent Delecroix** to **Vincent Delecroix, Travis Scrimshaw**",
    "created_at": "2023-01-10T04:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512363",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **Vincent Delecroix** to **Vincent Delecroix, Travis Scrimshaw**



---

archive/issue_comments_512364.json:
```json
{
    "body": "<a id='comment:61'>Comment 61:</a>\nThanks!",
    "created_at": "2023-01-10T06:10:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31668#issuecomment-512364",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:61'>Comment 61:</a>
Thanks!
