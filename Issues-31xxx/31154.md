# Issue 31154: Edges and report distances in Breadth First Search in c_graph.pyx

archive/issues_030917.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nCurrently, reporting of distances is reported in the python implementation only. We enable this in the cython implementation in `c_graph.pyx`.\n\nLikewise for returning the edges of the BFS tree.\n\nTo compare:\n\n```\nsage: def comp(): \n....:     for n in [5, 10, 50, 100, 500, 1000]:  \n....:         G = graphs.Grid2dGraph(n, n)  \n....:         print(G) \n....:         %timeit _ = list(G.breadth_first_search(start=(0, 0), report_distance=False)) \n....:         %timeit _ = list(G.breadth_first_search(start=(0, 0), report_distance=True)) \n....:         %timeit _ = list(G.breadth_first_search(start=(0, 0), edges=True)) \n```\n\nBefore:\n\n```  \nsage: comp()                                                                                                                                                                                                                                                                                                                                                               \n2D Grid Graph for [5, 5]\n5.69 \u00b5s \u00b1 67 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n36.2 \u00b5s \u00b1 411 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n35.8 \u00b5s \u00b1 465 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n2D Grid Graph for [10, 10]\n16.2 \u00b5s \u00b1 22.8 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n140 \u00b5s \u00b1 639 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n138 \u00b5s \u00b1 326 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n2D Grid Graph for [50, 50]\n492 \u00b5s \u00b1 5.91 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n4.15 ms \u00b1 26 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n4.07 ms \u00b1 18 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n2D Grid Graph for [100, 100]\n2.68 ms \u00b1 24.7 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n18.1 ms \u00b1 41.2 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n17.9 ms \u00b1 13.1 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n2D Grid Graph for [500, 500]\n89.4 ms \u00b1 665 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n649 ms \u00b1 5.74 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n618 ms \u00b1 7.9 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n2D Grid Graph for [1000, 1000]\n452 ms \u00b1 5.52 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n3.17 s \u00b1 11.5 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n3.12 s \u00b1 91 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n```\n\nAfter:\n\n```\nsage: comp()\n2D Grid Graph for [5, 5]\n5.76 \u00b5s \u00b1 7.01 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n6.3 \u00b5s \u00b1 52.8 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n7.25 \u00b5s \u00b1 19.7 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n2D Grid Graph for [10, 10]\n15.5 \u00b5s \u00b1 17.6 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n18.2 \u00b5s \u00b1 138 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n21.8 \u00b5s \u00b1 13.4 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n2D Grid Graph for [50, 50]\n461 \u00b5s \u00b1 1.87 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n535 \u00b5s \u00b1 1.61 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n703 \u00b5s \u00b1 3.01 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n2D Grid Graph for [100, 100]\n2.55 ms \u00b1 12.9 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n3.19 ms \u00b1 10.3 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n4.11 ms \u00b1 10.7 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n2D Grid Graph for [500, 500]\n86.3 ms \u00b1 441 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n159 ms \u00b1 973 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n139 ms \u00b1 337 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n2D Grid Graph for [1000, 1000]\n456 ms \u00b1 3.09 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n694 ms \u00b1 4.35 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n703 ms \u00b1 1.79 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n```\n\nThe small improvement in the first case is due to using `yield from`.\n\nDepends on #31129\n\nCC:  @dcoudert\n\nComponent: **graph theory**\n\nKeywords: **BFS, distances**\n\nAuthor: **Jonathan Kliem**\n\nBranch/Commit: **[`025a4f9`](https://github.com/sagemath/sagetrac-mirror/commit/025a4f919e897677fa259819a8569c539e53b7fd)**\n\nReviewer: **David Coudert**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31154_\n\n",
    "closed_at": "2021-01-17T13:45:51Z",
    "created_at": "2021-01-02T16:54:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Edges and report distances in Breadth First Search in c_graph.pyx",
    "type": "issue",
    "updated_at": "2021-01-17T13:45:51Z",
    "url": "https://github.com/sagemath/sage/issues/31154",
    "user": "https://github.com/kliem"
}
```
<div id="comment:0"></div>

Currently, reporting of distances is reported in the python implementation only. We enable this in the cython implementation in `c_graph.pyx`.

Likewise for returning the edges of the BFS tree.

To compare:

```
sage: def comp(): 
....:     for n in [5, 10, 50, 100, 500, 1000]:  
....:         G = graphs.Grid2dGraph(n, n)  
....:         print(G) 
....:         %timeit _ = list(G.breadth_first_search(start=(0, 0), report_distance=False)) 
....:         %timeit _ = list(G.breadth_first_search(start=(0, 0), report_distance=True)) 
....:         %timeit _ = list(G.breadth_first_search(start=(0, 0), edges=True)) 
```

Before:

```  
sage: comp()                                                                                                                                                                                                                                                                                                                                                               
2D Grid Graph for [5, 5]
5.69 µs ± 67 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
36.2 µs ± 411 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
35.8 µs ± 465 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
2D Grid Graph for [10, 10]
16.2 µs ± 22.8 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
140 µs ± 639 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
138 µs ± 326 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
2D Grid Graph for [50, 50]
492 µs ± 5.91 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
4.15 ms ± 26 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
4.07 ms ± 18 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
2D Grid Graph for [100, 100]
2.68 ms ± 24.7 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
18.1 ms ± 41.2 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
17.9 ms ± 13.1 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
2D Grid Graph for [500, 500]
89.4 ms ± 665 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
649 ms ± 5.74 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
618 ms ± 7.9 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
2D Grid Graph for [1000, 1000]
452 ms ± 5.52 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
3.17 s ± 11.5 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
3.12 s ± 91 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
```

After:

```
sage: comp()
2D Grid Graph for [5, 5]
5.76 µs ± 7.01 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
6.3 µs ± 52.8 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
7.25 µs ± 19.7 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
2D Grid Graph for [10, 10]
15.5 µs ± 17.6 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
18.2 µs ± 138 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
21.8 µs ± 13.4 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
2D Grid Graph for [50, 50]
461 µs ± 1.87 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
535 µs ± 1.61 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
703 µs ± 3.01 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
2D Grid Graph for [100, 100]
2.55 ms ± 12.9 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
3.19 ms ± 10.3 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
4.11 ms ± 10.7 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
2D Grid Graph for [500, 500]
86.3 ms ± 441 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
159 ms ± 973 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
139 ms ± 337 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
2D Grid Graph for [1000, 1000]
456 ms ± 3.09 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
694 ms ± 4.35 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
703 ms ± 1.79 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
```

The small improvement in the first case is due to using `yield from`.

Depends on #31129

CC:  @dcoudert

Component: **graph theory**

Keywords: **BFS, distances**

Author: **Jonathan Kliem**

Branch/Commit: **[`025a4f9`](https://github.com/sagemath/sagetrac-mirror/commit/025a4f919e897677fa259819a8569c539e53b7fd)**

Reviewer: **David Coudert**

_Issue created by migration from https://trac.sagemath.org/ticket/31154_





---

archive/issue_events_426354.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-01-02T16:54:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31154#event-426354"
}
```



---

archive/issue_events_426355.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-01-02T16:54:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31154#event-426355"
}
```



---

archive/issue_events_426356.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-01-02T16:54:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31154#event-426356"
}
```



---

archive/issue_events_426357.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-01-02T16:54:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31154#event-426357"
}
```



---

archive/issue_events_426358.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-01-02T16:54:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31154#event-426358"
}
```



---

archive/issue_events_426359.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-01-02T16:54:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31154#event-426359"
}
```



---

archive/issue_comments_499141.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nIt's nice that the extra cost of pushing pairs even when `report_distance` is `False` is compensated by the `yield from...`.\n\nWe could also report edges. It suffices to store in second the parent in the BFS instead of the distance. The extra cost of testing if `edges` is true before pushing to the queue is rather limited.",
    "created_at": "2021-01-02T17:35:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499141",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:2" align="right">comment:2</div>

It's nice that the extra cost of pushing pairs even when `report_distance` is `False` is compensated by the `yield from...`.

We could also report edges. It suffices to store in second the parent in the BFS instead of the distance. The extra cost of testing if `edges` is true before pushing to the queue is rather limited.



---

archive/issue_comments_499142.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2021-01-02T17:35:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499142",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_499143.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nWhy are you using `smallInteger` for distances ? does it really make a difference ?",
    "created_at": "2021-01-02T17:57:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499143",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:3" align="right">comment:3</div>

Why are you using `smallInteger` for distances ? does it really make a difference ?



---

archive/issue_comments_499144.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nActually, I can't measure a difference for pushing pairs or not. It doesn't seem to make a difference at all. After all it's super easy C stuff (if you try to push a tuple as a pair and hope for cython to do the right thing, that is going to make a difference in the wrong way).\n\n`yield from` is a bit fast that's it.",
    "created_at": "2021-01-02T18:22:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499144",
    "user": "https://github.com/kliem"
}
```

<div id="comment:4" align="right">comment:4</div>

Actually, I can't measure a difference for pushing pairs or not. It doesn't seem to make a difference at all. After all it's super easy C stuff (if you try to push a tuple as a pair and hope for cython to do the right thing, that is going to make a difference in the wrong way).

`yield from` is a bit fast that's it.



---

archive/issue_comments_499145.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@dcoudert](#comment%3A3):\n> Why are you using `smallInteger` for distances ? does it really make a difference ?\n\n`Integer` is lots slower. `smallInteger` is exactly for this use case. Creating an integer from an `int/long`.\n\nTimings with replacing `smallInteger` by `Integer`:\n\n```\nsage: comp()                                                                                                                                                                                                                                                                                                                                                               \n2D Grid Graph for [5, 5]\n5.67 \u00b5s \u00b1 254 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n8.34 \u00b5s \u00b1 114 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n2D Grid Graph for [10, 10]\n15.9 \u00b5s \u00b1 73.5 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n26.1 \u00b5s \u00b1 98.9 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n2D Grid Graph for [50, 50]\n470 \u00b5s \u00b1 6.86 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n1.09 ms \u00b1 8.04 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n2D Grid Graph for [100, 100]\n2.59 ms \u00b1 20.5 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n5.8 ms \u00b1 8.76 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n2D Grid Graph for [500, 500]\n91.1 ms \u00b1 1.26 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n182 ms \u00b1 638 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n2D Grid Graph for [1000, 1000]\n445 ms \u00b1 9.32 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n734 ms \u00b1 9.12 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n```",
    "created_at": "2021-01-02T18:35:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499145",
    "user": "https://github.com/kliem"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@dcoudert](#comment%3A3):
> Why are you using `smallInteger` for distances ? does it really make a difference ?

`Integer` is lots slower. `smallInteger` is exactly for this use case. Creating an integer from an `int/long`.

Timings with replacing `smallInteger` by `Integer`:

```
sage: comp()                                                                                                                                                                                                                                                                                                                                                               
2D Grid Graph for [5, 5]
5.67 µs ± 254 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
8.34 µs ± 114 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
2D Grid Graph for [10, 10]
15.9 µs ± 73.5 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
26.1 µs ± 98.9 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
2D Grid Graph for [50, 50]
470 µs ± 6.86 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
1.09 ms ± 8.04 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
2D Grid Graph for [100, 100]
2.59 ms ± 20.5 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
5.8 ms ± 8.76 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
2D Grid Graph for [500, 500]
91.1 ms ± 1.26 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
182 ms ± 638 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
2D Grid Graph for [1000, 1000]
445 ms ± 9.32 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
734 ms ± 9.12 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
```



---

archive/issue_comments_499146.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe distance assume weight 1 for each edge.\n\nIs there any use case in having the distances and the edges? Currently `report_distance` is ignored when `edges` is true.",
    "created_at": "2021-01-02T18:40:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499146",
    "user": "https://github.com/kliem"
}
```

<div id="comment:6" align="right">comment:6</div>

The distance assume weight 1 for each edge.

Is there any use case in having the distances and the edges? Currently `report_distance` is ignored when `edges` is true.



---

archive/issue_comments_499147.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n`smallInteger`: this is good to know\n\nreport distances and edges: we can certainly find a use case where it is useful to return both. Is it slower to push tuples instead of pairs ?",
    "created_at": "2021-01-02T18:45:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499147",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:7" align="right">comment:7</div>

`smallInteger`: this is good to know

report distances and edges: we can certainly find a use case where it is useful to return both. Is it slower to push tuples instead of pairs ?



---

archive/issue_comments_499148.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@dcoudert](#comment%3A7):\n> `smallInteger`: this is good to know\n\nI was told on my very first ticket about it.\n> \n> report distances and edges: we can certainly find a use case where it is useful to return both. Is it slower to push tuples instead of pairs ?\n\nI'll try.",
    "created_at": "2021-01-02T19:26:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499148",
    "user": "https://github.com/kliem"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@dcoudert](#comment%3A7):
> `smallInteger`: this is good to know

I was told on my very first ticket about it.
> 
> report distances and edges: we can certainly find a use case where it is useful to return both. Is it slower to push tuples instead of pairs ?

I'll try.



---

archive/issue_comments_499149.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nApparently, I took the timings in some intermediate step where `report_distances=True` did not do anything. Things are slower now, but `smallInteger` is still better than `Integer`.",
    "created_at": "2021-01-02T21:06:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499149",
    "user": "https://github.com/kliem"
}
```

<div id="comment:9" align="right">comment:9</div>

Apparently, I took the timings in some intermediate step where `report_distances=True` did not do anything. Things are slower now, but `smallInteger` is still better than `Integer`.



---

archive/issue_comments_499150.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -40,23 +40,23 @@\n ```\n sage: comp()                                                                                                                                                                                                                                                                                                                                                               \n 2D Grid Graph for [5, 5]\n-5.48 \u00b5s \u00b1 7.2 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n-5.49 \u00b5s \u00b1 18.9 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+5.54 \u00b5s \u00b1 59.7 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+6.23 \u00b5s \u00b1 21.9 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n 2D Grid Graph for [10, 10]\n-15.2 \u00b5s \u00b1 35.3 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n-15.3 \u00b5s \u00b1 95.4 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+15.9 \u00b5s \u00b1 20.7 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+18.3 \u00b5s \u00b1 34.2 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n 2D Grid Graph for [50, 50]\n-449 \u00b5s \u00b1 1.61 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n-450 \u00b5s \u00b1 2.84 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n+486 \u00b5s \u00b1 5.39 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n+553 \u00b5s \u00b1 5.21 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n 2D Grid Graph for [100, 100]\n-2.51 ms \u00b1 16.7 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n-2.53 ms \u00b1 39.1 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n+2.61 ms \u00b1 21.2 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n+3.23 ms \u00b1 12.8 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n 2D Grid Graph for [500, 500]\n-85.4 ms \u00b1 301 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n-85 ms \u00b1 109 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n+89.6 ms \u00b1 72.1 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n+160 ms \u00b1 459 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n 2D Grid Graph for [1000, 1000]\n-431 ms \u00b1 6.59 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n-433 ms \u00b1 10 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n+449 ms \u00b1 857 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n+686 ms \u00b1 10.8 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n ```\n \n The small improvement in the first case is due to using `yield from`.\n``````\n",
    "created_at": "2021-01-02T21:06:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499150",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -40,23 +40,23 @@
 ```
 sage: comp()                                                                                                                                                                                                                                                                                                                                                               
 2D Grid Graph for [5, 5]
-5.48 µs ± 7.2 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
-5.49 µs ± 18.9 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+5.54 µs ± 59.7 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+6.23 µs ± 21.9 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
 2D Grid Graph for [10, 10]
-15.2 µs ± 35.3 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
-15.3 µs ± 95.4 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+15.9 µs ± 20.7 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+18.3 µs ± 34.2 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
 2D Grid Graph for [50, 50]
-449 µs ± 1.61 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
-450 µs ± 2.84 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
+486 µs ± 5.39 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
+553 µs ± 5.21 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
 2D Grid Graph for [100, 100]
-2.51 ms ± 16.7 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
-2.53 ms ± 39.1 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
+2.61 ms ± 21.2 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
+3.23 ms ± 12.8 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
 2D Grid Graph for [500, 500]
-85.4 ms ± 301 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
-85 ms ± 109 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
+89.6 ms ± 72.1 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
+160 ms ± 459 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
 2D Grid Graph for [1000, 1000]
-431 ms ± 6.59 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
-433 ms ± 10 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
+449 ms ± 857 µs per loop (mean ± std. dev. of 7 runs, 1 loop each)
+686 ms ± 10.8 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
 ```
 
 The small improvement in the first case is due to using `yield from`.
``````




---

archive/issue_comments_499151.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@kliem](#comment%3A4):\n> Actually, I can't measure a difference for pushing pairs or not. It doesn't seem to make a difference at all. After all it's super easy C stuff (if you try to push a tuple as a pair and hope for cython to do the right thing, that is going to make a difference in the wrong way).\n> \n> `yield from` is a bit fast that's it.\n\nActually you are right, there is a small penalty for pushing pairs. Something like 5 percent.",
    "created_at": "2021-01-02T21:13:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499151",
    "user": "https://github.com/kliem"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@kliem](#comment%3A4):
> Actually, I can't measure a difference for pushing pairs or not. It doesn't seem to make a difference at all. After all it's super easy C stuff (if you try to push a tuple as a pair and hope for cython to do the right thing, that is going to make a difference in the wrong way).
> 
> `yield from` is a bit fast that's it.

Actually you are right, there is a small penalty for pushing pairs. Something like 5 percent.



---

archive/issue_comments_499152.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d71b87400cc858ecbb03772bbdd89292e784b7a8\"><code>d71b874</code></a></td><td><code>use two fifos</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0113bb2b8fd60f0d4f32e801db9a239b7998e91\"><code>d0113bb</code></a></td><td><code>easier structure</code></td></tr></table>\n",
    "created_at": "2021-01-02T21:39:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499152",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d71b87400cc858ecbb03772bbdd89292e784b7a8"><code>d71b874</code></a></td><td><code>use two fifos</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0113bb2b8fd60f0d4f32e801db9a239b7998e91"><code>d0113bb</code></a></td><td><code>easier structure</code></td></tr></table>




---

archive/issue_comments_499153.json:
```json
{
    "body": "Changed commit from **[`890ed51`](https://github.com/sagemath/sagetrac-mirror/commit/890ed51eb3f334ba4363c36bbb4c2ea2c2676ffe)** to **[`d0113bb`](https://github.com/sagemath/sagetrac-mirror/commit/d0113bb2b8fd60f0d4f32e801db9a239b7998e91)**",
    "created_at": "2021-01-02T21:39:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499153",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`890ed51`](https://github.com/sagemath/sagetrac-mirror/commit/890ed51eb3f334ba4363c36bbb4c2ea2c2676ffe)** to **[`d0113bb`](https://github.com/sagemath/sagetrac-mirror/commit/d0113bb2b8fd60f0d4f32e801db9a239b7998e91)**



---

archive/issue_comments_499154.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -40,23 +40,23 @@\n ```\n sage: comp()                                                                                                                                                                                                                                                                                                                                                               \n 2D Grid Graph for [5, 5]\n-5.54 \u00b5s \u00b1 59.7 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n-6.23 \u00b5s \u00b1 21.9 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+5.51 \u00b5s \u00b1 9.43 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+6.11 \u00b5s \u00b1 38.4 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n 2D Grid Graph for [10, 10]\n-15.9 \u00b5s \u00b1 20.7 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n-18.3 \u00b5s \u00b1 34.2 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+15.7 \u00b5s \u00b1 126 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+18.1 \u00b5s \u00b1 67.9 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n 2D Grid Graph for [50, 50]\n-486 \u00b5s \u00b1 5.39 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n-553 \u00b5s \u00b1 5.21 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n+461 \u00b5s \u00b1 5.53 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n+542 \u00b5s \u00b1 3.52 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n 2D Grid Graph for [100, 100]\n-2.61 ms \u00b1 21.2 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n-3.23 ms \u00b1 12.8 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n+2.55 ms \u00b1 12.3 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n+3.24 ms \u00b1 43.7 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n 2D Grid Graph for [500, 500]\n-89.6 ms \u00b1 72.1 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n-160 ms \u00b1 459 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n+86.4 ms \u00b1 951 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n+156 ms \u00b1 1.15 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n 2D Grid Graph for [1000, 1000]\n-449 ms \u00b1 857 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n-686 ms \u00b1 10.8 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n+435 ms \u00b1 3.41 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n+664 ms \u00b1 4.56 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n ```\n \n The small improvement in the first case is due to using `yield from`.\n``````\n",
    "created_at": "2021-01-02T21:40:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499154",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -40,23 +40,23 @@
 ```
 sage: comp()                                                                                                                                                                                                                                                                                                                                                               
 2D Grid Graph for [5, 5]
-5.54 µs ± 59.7 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
-6.23 µs ± 21.9 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+5.51 µs ± 9.43 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+6.11 µs ± 38.4 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
 2D Grid Graph for [10, 10]
-15.9 µs ± 20.7 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
-18.3 µs ± 34.2 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+15.7 µs ± 126 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+18.1 µs ± 67.9 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
 2D Grid Graph for [50, 50]
-486 µs ± 5.39 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
-553 µs ± 5.21 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
+461 µs ± 5.53 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
+542 µs ± 3.52 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
 2D Grid Graph for [100, 100]
-2.61 ms ± 21.2 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
-3.23 ms ± 12.8 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
+2.55 ms ± 12.3 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
+3.24 ms ± 43.7 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
 2D Grid Graph for [500, 500]
-89.6 ms ± 72.1 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
-160 ms ± 459 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
+86.4 ms ± 951 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
+156 ms ± 1.15 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
 2D Grid Graph for [1000, 1000]
-449 ms ± 857 µs per loop (mean ± std. dev. of 7 runs, 1 loop each)
-686 ms ± 10.8 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
+435 ms ± 3.41 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
+664 ms ± 4.56 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
 ```
 
 The small improvement in the first case is due to using `yield from`.
``````




---

archive/issue_comments_499155.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nSlighly better by simplifying things.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d71b87400cc858ecbb03772bbdd89292e784b7a8\"><code>d71b874</code></a></td><td><code>use two fifos</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0113bb2b8fd60f0d4f32e801db9a239b7998e91\"><code>d0113bb</code></a></td><td><code>easier structure</code></td></tr></table>\n",
    "created_at": "2021-01-02T21:40:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499155",
    "user": "https://github.com/kliem"
}
```

<div id="comment:12" align="right">comment:12</div>

Slighly better by simplifying things.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d71b87400cc858ecbb03772bbdd89292e784b7a8"><code>d71b874</code></a></td><td><code>use two fifos</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0113bb2b8fd60f0d4f32e801db9a239b7998e91"><code>d0113bb</code></a></td><td><code>easier structure</code></td></tr></table>




---

archive/issue_comments_499156.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI like the way you count maintain the distance. it's smart.\n\nWhat is surprising is that reporting distance takes roughly 30% more time. The only difference in the code is in the return statement.",
    "created_at": "2021-01-02T22:20:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499156",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:13" align="right">comment:13</div>

I like the way you count maintain the distance. it's smart.

What is surprising is that reporting distance takes roughly 30% more time. The only difference in the code is in the return statement.



---

archive/issue_events_426360.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-01-02T22:33:14Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "title_is": "Edges and report distances in Breadth First Search in c_graph.pyx",
    "title_was": "Report distances in Breadth First Search in c_graph.pyx",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31154#event-426360"
}
```



---

archive/issue_comments_499157.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n Currently, reporting of distances is reported in the python implementation only. We enable this in the cython implementation in `c_graph.pyx`.\n+\n+Likewise for returning the edges of the BFS tree.\n \n To compare:\n \n@@ -9,54 +11,67 @@\n ....:         print(G) \n ....:         %timeit _ = list(G.breadth_first_search(start=(0, 0), report_distance=False)) \n ....:         %timeit _ = list(G.breadth_first_search(start=(0, 0), report_distance=True)) \n+....:         %timeit _ = list(G.breadth_first_search(start=(0, 0), edges=True)) \n ```\n \n Before:\n \n-```                                                                                                                                                                          \n+```  \n sage: comp()                                                                                                                                                                                                                                                                                                                                                               \n 2D Grid Graph for [5, 5]\n 5.69 \u00b5s \u00b1 67 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n-36.3 \u00b5s \u00b1 67 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n+36.2 \u00b5s \u00b1 411 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n+35.8 \u00b5s \u00b1 465 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n 2D Grid Graph for [10, 10]\n 16.2 \u00b5s \u00b1 22.8 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n-143 \u00b5s \u00b1 945 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n+140 \u00b5s \u00b1 639 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n+138 \u00b5s \u00b1 326 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n 2D Grid Graph for [50, 50]\n 492 \u00b5s \u00b1 5.91 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n-4.32 ms \u00b1 48.1 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n+4.15 ms \u00b1 26 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n+4.07 ms \u00b1 18 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n 2D Grid Graph for [100, 100]\n 2.68 ms \u00b1 24.7 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n-18.6 ms \u00b1 81.1 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n+18.1 ms \u00b1 41.2 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n+17.9 ms \u00b1 13.1 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n 2D Grid Graph for [500, 500]\n 89.4 ms \u00b1 665 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n-655 ms \u00b1 4.93 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n+649 ms \u00b1 5.74 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n+618 ms \u00b1 7.9 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n 2D Grid Graph for [1000, 1000]\n 452 ms \u00b1 5.52 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n-3.26 s \u00b1 57.1 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n+3.17 s \u00b1 11.5 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n+3.12 s \u00b1 91 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n ```\n \n After:\n \n ```\n-sage: comp()                                                                                                                                                                                                                                                                                                                                                               \n+sage: comp()\n 2D Grid Graph for [5, 5]\n-5.51 \u00b5s \u00b1 9.43 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n-6.11 \u00b5s \u00b1 38.4 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+5.76 \u00b5s \u00b1 7.01 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+6.3 \u00b5s \u00b1 52.8 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+7.25 \u00b5s \u00b1 19.7 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n 2D Grid Graph for [10, 10]\n-15.7 \u00b5s \u00b1 126 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n-18.1 \u00b5s \u00b1 67.9 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+15.5 \u00b5s \u00b1 17.6 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+18.2 \u00b5s \u00b1 138 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n+21.8 \u00b5s \u00b1 13.4 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n 2D Grid Graph for [50, 50]\n-461 \u00b5s \u00b1 5.53 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n-542 \u00b5s \u00b1 3.52 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n+461 \u00b5s \u00b1 1.87 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n+535 \u00b5s \u00b1 1.61 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n+703 \u00b5s \u00b1 3.01 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n 2D Grid Graph for [100, 100]\n-2.55 ms \u00b1 12.3 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n-3.24 ms \u00b1 43.7 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n+2.55 ms \u00b1 12.9 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n+3.19 ms \u00b1 10.3 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n+4.11 ms \u00b1 10.7 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n 2D Grid Graph for [500, 500]\n-86.4 ms \u00b1 951 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n-156 ms \u00b1 1.15 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n+86.3 ms \u00b1 441 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n+159 ms \u00b1 973 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n+139 ms \u00b1 337 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n 2D Grid Graph for [1000, 1000]\n-435 ms \u00b1 3.41 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n-664 ms \u00b1 4.56 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n+456 ms \u00b1 3.09 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n+694 ms \u00b1 4.35 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n+703 ms \u00b1 1.79 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n ```\n \n The small improvement in the first case is due to using `yield from`.\n``````\n",
    "created_at": "2021-01-02T22:33:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499157",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 Currently, reporting of distances is reported in the python implementation only. We enable this in the cython implementation in `c_graph.pyx`.
+
+Likewise for returning the edges of the BFS tree.
 
 To compare:
 
@@ -9,54 +11,67 @@
 ....:         print(G) 
 ....:         %timeit _ = list(G.breadth_first_search(start=(0, 0), report_distance=False)) 
 ....:         %timeit _ = list(G.breadth_first_search(start=(0, 0), report_distance=True)) 
+....:         %timeit _ = list(G.breadth_first_search(start=(0, 0), edges=True)) 
 ```
 
 Before:
 
-```                                                                                                                                                                          
+```  
 sage: comp()                                                                                                                                                                                                                                                                                                                                                               
 2D Grid Graph for [5, 5]
 5.69 µs ± 67 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
-36.3 µs ± 67 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
+36.2 µs ± 411 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
+35.8 µs ± 465 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
 2D Grid Graph for [10, 10]
 16.2 µs ± 22.8 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
-143 µs ± 945 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
+140 µs ± 639 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
+138 µs ± 326 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
 2D Grid Graph for [50, 50]
 492 µs ± 5.91 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
-4.32 ms ± 48.1 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
+4.15 ms ± 26 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
+4.07 ms ± 18 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
 2D Grid Graph for [100, 100]
 2.68 ms ± 24.7 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
-18.6 ms ± 81.1 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
+18.1 ms ± 41.2 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
+17.9 ms ± 13.1 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
 2D Grid Graph for [500, 500]
 89.4 ms ± 665 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
-655 ms ± 4.93 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
+649 ms ± 5.74 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
+618 ms ± 7.9 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
 2D Grid Graph for [1000, 1000]
 452 ms ± 5.52 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
-3.26 s ± 57.1 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
+3.17 s ± 11.5 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
+3.12 s ± 91 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
 ```
 
 After:
 
 ```
-sage: comp()                                                                                                                                                                                                                                                                                                                                                               
+sage: comp()
 2D Grid Graph for [5, 5]
-5.51 µs ± 9.43 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
-6.11 µs ± 38.4 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+5.76 µs ± 7.01 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+6.3 µs ± 52.8 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+7.25 µs ± 19.7 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
 2D Grid Graph for [10, 10]
-15.7 µs ± 126 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
-18.1 µs ± 67.9 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+15.5 µs ± 17.6 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+18.2 µs ± 138 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
+21.8 µs ± 13.4 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
 2D Grid Graph for [50, 50]
-461 µs ± 5.53 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
-542 µs ± 3.52 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
+461 µs ± 1.87 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
+535 µs ± 1.61 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
+703 µs ± 3.01 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
 2D Grid Graph for [100, 100]
-2.55 ms ± 12.3 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
-3.24 ms ± 43.7 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
+2.55 ms ± 12.9 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
+3.19 ms ± 10.3 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
+4.11 ms ± 10.7 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
 2D Grid Graph for [500, 500]
-86.4 ms ± 951 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
-156 ms ± 1.15 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
+86.3 ms ± 441 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
+159 ms ± 973 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
+139 ms ± 337 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
 2D Grid Graph for [1000, 1000]
-435 ms ± 3.41 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
-664 ms ± 4.56 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
+456 ms ± 3.09 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
+694 ms ± 4.35 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
+703 ms ± 1.79 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
 ```
 
 The small improvement in the first case is due to using `yield from`.
``````




---

archive/issue_comments_499158.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58f3405be1f4f42b27497e9fa0450e174752a4e8\"><code>58f3405</code></a></td><td><code>edges in BFS in c_graph.pyx</code></td></tr></table>\n",
    "created_at": "2021-01-02T22:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499158",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58f3405be1f4f42b27497e9fa0450e174752a4e8"><code>58f3405</code></a></td><td><code>edges in BFS in c_graph.pyx</code></td></tr></table>




---

archive/issue_comments_499159.json:
```json
{
    "body": "Changed commit from **[`d0113bb`](https://github.com/sagemath/sagetrac-mirror/commit/d0113bb2b8fd60f0d4f32e801db9a239b7998e91)** to **[`58f3405`](https://github.com/sagemath/sagetrac-mirror/commit/58f3405be1f4f42b27497e9fa0450e174752a4e8)**",
    "created_at": "2021-01-02T22:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499159",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d0113bb`](https://github.com/sagemath/sagetrac-mirror/commit/d0113bb2b8fd60f0d4f32e801db9a239b7998e91)** to **[`58f3405`](https://github.com/sagemath/sagetrac-mirror/commit/58f3405be1f4f42b27497e9fa0450e174752a4e8)**



---

archive/issue_comments_499160.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@dcoudert](#comment%3A13):\n> I like the way you count maintain the distance. it's smart.\n> \n> What is surprising is that reporting distance takes roughly 30% more time. The only difference in the code is in the return statement. \n\nNow that you point this out, I find it surprisingly to.\n\nHowever, I believe this is out of reach:\n\n```\nsage: cython(''' \n....: def tester(int n): \n....:     cdef int i \n....:     for i in range(n): \n....:         yield i \n....:          \n....: def tester2(int n): \n....:     cdef int i \n....:     for i in range(n): \n....:         yield (i, 1) \n....: ''')                                                                                                                                                                                                                                                                                                                                                                 \n\nsage:                                                                                                                                                                                                                                                                                                                                                                      \nsage: %timeit list(tester(100))                                                                                                                                                                                                                                                                                                                                            \n2.3 \u00b5s \u00b1 15.9 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit list(tester2(100))                                                                                                                                                                                                                                                                                                                                           \n3.97 \u00b5s \u00b1 5.07 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit list(tester(200))                                                                                                                                                                                                                                                                                                                                            \n4.15 \u00b5s \u00b1 29.6 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\nsage: %timeit list(tester2(200))                                                                                                                                                                                                                                                                                                                                           \n7.94 \u00b5s \u00b1 52.7 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n```",
    "created_at": "2021-01-02T22:42:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499160",
    "user": "https://github.com/kliem"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@dcoudert](#comment%3A13):
> I like the way you count maintain the distance. it's smart.
> 
> What is surprising is that reporting distance takes roughly 30% more time. The only difference in the code is in the return statement. 

Now that you point this out, I find it surprisingly to.

However, I believe this is out of reach:

```
sage: cython(''' 
....: def tester(int n): 
....:     cdef int i 
....:     for i in range(n): 
....:         yield i 
....:          
....: def tester2(int n): 
....:     cdef int i 
....:     for i in range(n): 
....:         yield (i, 1) 
....: ''')                                                                                                                                                                                                                                                                                                                                                                 

sage:                                                                                                                                                                                                                                                                                                                                                                      
sage: %timeit list(tester(100))                                                                                                                                                                                                                                                                                                                                            
2.3 µs ± 15.9 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit list(tester2(100))                                                                                                                                                                                                                                                                                                                                           
3.97 µs ± 5.07 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit list(tester(200))                                                                                                                                                                                                                                                                                                                                            
4.15 µs ± 29.6 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit list(tester2(200))                                                                                                                                                                                                                                                                                                                                           
7.94 µs ± 52.7 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
```



---

archive/issue_comments_499161.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI agree. We already have a huge speedup. \n\nSome details, missing `:` (several times):\n\n```diff\n-        - ``report_distance`` -- boolean (default ``False``); if ``True``,\n+        - ``report_distance`` -- boolean (default: ``False``); if ``True``,\n```\n\n```diff\n-        - ``edges`` -- boolean (default ``False``); whether to return the edges\n+        - ``edges`` -- boolean (default: ``False``); whether to return the edges\n```",
    "created_at": "2021-01-03T09:30:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499161",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:17" align="right">comment:17</div>

I agree. We already have a huge speedup. 

Some details, missing `:` (several times):

```diff
-        - ``report_distance`` -- boolean (default ``False``); if ``True``,
+        - ``report_distance`` -- boolean (default: ``False``); if ``True``,
```

```diff
-        - ``edges`` -- boolean (default ``False``); whether to return the edges
+        - ``edges`` -- boolean (default: ``False``); whether to return the edges
```



---

archive/issue_comments_499162.json:
```json
{
    "body": "Changed commit from **[`58f3405`](https://github.com/sagemath/sagetrac-mirror/commit/58f3405be1f4f42b27497e9fa0450e174752a4e8)** to **[`025a4f9`](https://github.com/sagemath/sagetrac-mirror/commit/025a4f919e897677fa259819a8569c539e53b7fd)**",
    "created_at": "2021-01-03T20:43:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499162",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`58f3405`](https://github.com/sagemath/sagetrac-mirror/commit/58f3405be1f4f42b27497e9fa0450e174752a4e8)** to **[`025a4f9`](https://github.com/sagemath/sagetrac-mirror/commit/025a4f919e897677fa259819a8569c539e53b7fd)**



---

archive/issue_comments_499163.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/025a4f919e897677fa259819a8569c539e53b7fd\"><code>025a4f9</code></a></td><td><code>missing colons when specifying defaults</code></td></tr></table>\n",
    "created_at": "2021-01-03T20:43:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499163",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/025a4f919e897677fa259819a8569c539e53b7fd"><code>025a4f9</code></a></td><td><code>missing colons when specifying defaults</code></td></tr></table>




---

archive/issue_comments_499164.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@dcoudert](#comment%3A17):\n> I agree. We already have a huge speedup. \n> \n> Some details, missing `:` (several times):\n> \n> ```diff\n> -        - ``report_distance`` -- boolean (default ``False``); if ``True``,\n> +        - ``report_distance`` -- boolean (default: ``False``); if ``True``,\n> ```\n> \n> ```diff\n> -        - ``edges`` -- boolean (default ``False``); whether to return the edges\n> +        - ``edges`` -- boolean (default: ``False``); whether to return the edges\n> ```\n\nCopy/paste. Changed it for every instance in the touched files.",
    "created_at": "2021-01-03T20:45:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499164",
    "user": "https://github.com/kliem"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@dcoudert](#comment%3A17):
> I agree. We already have a huge speedup. 
> 
> Some details, missing `:` (several times):
> 
> ```diff
> -        - ``report_distance`` -- boolean (default ``False``); if ``True``,
> +        - ``report_distance`` -- boolean (default: ``False``); if ``True``,
> ```
> 
> ```diff
> -        - ``edges`` -- boolean (default ``False``); whether to return the edges
> +        - ``edges`` -- boolean (default: ``False``); whether to return the edges
> ```

Copy/paste. Changed it for every instance in the touched files.



---

archive/issue_comments_499165.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nLGTM. Thank you !",
    "created_at": "2021-01-03T22:02:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499165",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:20" align="right">comment:20</div>

LGTM. Thank you !



---

archive/issue_events_426361.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-01-03T22:02:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31154#event-426361"
}
```



---

archive/issue_events_426362.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2021-01-03T22:02:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31154#event-426362"
}
```



---

archive/issue_comments_499166.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThanks for reviewing.",
    "created_at": "2021-01-06T09:33:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499166",
    "user": "https://github.com/kliem"
}
```

<div id="comment:21" align="right">comment:21</div>

Thanks for reviewing.



---

archive/issue_events_426363.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-17T13:45:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31154#event-426363"
}
```



---

archive/issue_events_426364.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "4129f48ddc31f7c827ff1dde6f1df12dd9f02302",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-01-17T13:45:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31154#event-426364"
}
```



---

archive/issue_comments_499167.json:
```json
{
    "body": "Changed branch from **[u/gh-kliem/improved_distances_in_breadth_first_search](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/improved_distances_in_breadth_first_search)** to **[`025a4f9`](https://github.com/sagemath/sagetrac-mirror/commit/025a4f919e897677fa259819a8569c539e53b7fd)**",
    "created_at": "2021-01-17T13:45:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31154#issuecomment-499167",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-kliem/improved_distances_in_breadth_first_search](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/improved_distances_in_breadth_first_search)** to **[`025a4f9`](https://github.com/sagemath/sagetrac-mirror/commit/025a4f919e897677fa259819a8569c539e53b7fd)**
