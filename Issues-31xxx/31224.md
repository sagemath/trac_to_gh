# Issue 31224: Add surface-dynamics as a pip package

archive/issues_030987.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nSee #31164. Upstream code at https://gitlab.com/videlec/surface_dynamics and https://pypi.org/project/surface-dynamics/.\n\n---\n\nUpdated links (2021-08-15):\n\n- code: https://github.com/flatsurf/surface-dynamics\n- docs: https://flatsurf.github.io/surface-dynamics/\n- pypi: https://pypi.org/project/surface-dynamics/\n\n\nCC:  @mkoeppe\n\nComponent: **packages: optional**\n\nAuthor: **Vincent Delecroix**\n\nBranch: **[`3a807c0`](https://github.com/sagemath/sagetrac-mirror/commit/3a807c00d47da76de65cd657aa8c662accea9a4f)**\n\nReviewer: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31224_\n\n",
    "closed_at": "2021-01-24T10:37:16Z",
    "created_at": "2021-01-12T10:24:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add surface-dynamics as a pip package",
    "type": "issue",
    "updated_at": "2021-08-15T13:02:16Z",
    "url": "https://github.com/sagemath/sage/issues/31224",
    "user": "https://github.com/videlec"
}
```
<div id="comment:0"></div>

See #31164. Upstream code at https://gitlab.com/videlec/surface_dynamics and https://pypi.org/project/surface-dynamics/.

---

Updated links (2021-08-15):

- code: https://github.com/flatsurf/surface-dynamics
- docs: https://flatsurf.github.io/surface-dynamics/
- pypi: https://pypi.org/project/surface-dynamics/


CC:  @mkoeppe

Component: **packages: optional**

Author: **Vincent Delecroix**

Branch: **[`3a807c0`](https://github.com/sagemath/sagetrac-mirror/commit/3a807c00d47da76de65cd657aa8c662accea9a4f)**

Reviewer: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/31224_





---

archive/issue_events_427179.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-01-12T10:24:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31224#event-427179"
}
```



---

archive/issue_events_427180.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-01-12T10:24:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "0000b0",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31224#event-427180"
}
```



---

archive/issue_events_427181.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-01-12T10:24:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31224#event-427181"
}
```



---

archive/issue_events_427182.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-01-12T10:24:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31224#event-427182"
}
```



---

archive/issue_comments_500170.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,2 @@\n-See #31164. Upstream code at https://gitlab.com/videlec/surface_dynamics\n+See #31164. Upstream code at https://gitlab.com/videlec/surface_dynamics and https://pypi.org/project/surface-dynamics/.\n \n``````\n",
    "created_at": "2021-01-12T10:25:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500170",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,2 @@
-See #31164. Upstream code at https://gitlab.com/videlec/surface_dynamics
+See #31164. Upstream code at https://gitlab.com/videlec/surface_dynamics and https://pypi.org/project/surface-dynamics/.
 
``````




---

archive/issue_events_427183.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-01-12T10:34:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31224#event-427183"
}
```



---

archive/issue_comments_500171.json:
```json
{
    "body": "Commit: **[`35e214c`](https://github.com/sagemath/sagetrac-mirror/commit/35e214cffb746ad06eeb0a24455668ad3d0a5c46)**",
    "created_at": "2021-01-12T10:34:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500171",
    "user": "https://github.com/videlec"
}
```

Commit: **[`35e214c`](https://github.com/sagemath/sagetrac-mirror/commit/35e214cffb746ad06eeb0a24455668ad3d0a5c46)**



---

archive/issue_comments_500172.json:
```json
{
    "body": "Branch: **[u/vdelecroix/31224](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/31224)**",
    "created_at": "2021-01-12T10:34:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500172",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/31224](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/31224)**



---

archive/issue_comments_500173.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35e214cffb746ad06eeb0a24455668ad3d0a5c46\"><code>35e214c</code></a></td><td><code>31224: add surface-dynamics as an optional pip package</code></td></tr></table>\n",
    "created_at": "2021-01-12T10:34:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500173",
    "user": "https://github.com/videlec"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35e214cffb746ad06eeb0a24455668ad3d0a5c46"><code>35e214c</code></a></td><td><code>31224: add surface-dynamics as an optional pip package</code></td></tr></table>




---

archive/issue_comments_500174.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nPlease change SPKG.txt to SPKG.rst; also the title should start with `surface_dynamics` (underscore, not dash -- this is the SPKG name)\n\nAnd a `requirements.txt` file needs to be added - see https://doc.sagemath.org/html/en/developer/packaging.html#package-source-types",
    "created_at": "2021-01-12T17:08:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500174",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

Please change SPKG.txt to SPKG.rst; also the title should start with `surface_dynamics` (underscore, not dash -- this is the SPKG name)

And a `requirements.txt` file needs to be added - see https://doc.sagemath.org/html/en/developer/packaging.html#package-source-types



---

archive/issue_comments_500175.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1dad153248df6d4c9dfa16e683d1eb9ef3e2ee2e\"><code>1dad153</code></a></td><td><code>31224: add surface-dynamics as an optional pip package</code></td></tr></table>\n",
    "created_at": "2021-01-12T20:35:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500175",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1dad153248df6d4c9dfa16e683d1eb9ef3e2ee2e"><code>1dad153</code></a></td><td><code>31224: add surface-dynamics as an optional pip package</code></td></tr></table>




---

archive/issue_comments_500176.json:
```json
{
    "body": "Changed commit from **[`35e214c`](https://github.com/sagemath/sagetrac-mirror/commit/35e214cffb746ad06eeb0a24455668ad3d0a5c46)** to **[`1dad153`](https://github.com/sagemath/sagetrac-mirror/commit/1dad153248df6d4c9dfa16e683d1eb9ef3e2ee2e)**",
    "created_at": "2021-01-12T20:35:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500176",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`35e214c`](https://github.com/sagemath/sagetrac-mirror/commit/35e214cffb746ad06eeb0a24455668ad3d0a5c46)** to **[`1dad153`](https://github.com/sagemath/sagetrac-mirror/commit/1dad153248df6d4c9dfa16e683d1eb9ef3e2ee2e)**



---

archive/issue_comments_500177.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThanks. Done.",
    "created_at": "2021-01-12T20:39:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500177",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

Thanks. Done.



---

archive/issue_comments_500178.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2021-01-12T22:43:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500178",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_events_427184.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-12T22:43:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31224#event-427184"
}
```



---

archive/issue_events_427185.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-12T22:43:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31224#event-427185"
}
```



---

archive/issue_events_427186.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-16T16:47:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31224#event-427186"
}
```



---

archive/issue_events_427187.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-16T16:47:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31224#event-427187"
}
```



---

archive/issue_comments_500179.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThis (and probably other packages just added) will need additional dependencies - see https://github.com/mkoeppe/sage/runs/1712141788?check_suite_focus=true\n\n```\n[surface_dynamics] installing. Log file: /sage/logs/pkgs/surface_dynamics.log\n  [surface_dynamics] error installing, exit status 1. End of log file:\n  [surface_dynamics]   Collecting surface_dynamics\n  [surface_dynamics]     Downloading surface_dynamics-0.4.5.tar.gz (11.3 MB)\n  [surface_dynamics]       ERROR: Command errored out with exit status 1:\n  [surface_dynamics]        command: /sage/local/bin/python3 -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/tmp/pip-install-09x74vlr/surface-dynamics_62aa1d77ac5249259cfc2622814d3adf/setup.py'\"'\"'; __file__='\"'\"'/tmp/pip-install-09x74vlr/surface-dynamics_62aa1d77ac5249259cfc2622814d3adf/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' egg_info --egg-base /tmp/pip-pip-egg-info-0g71blv2\n  [surface_dynamics]            cwd: /tmp/pip-install-09x74vlr/surface-dynamics_62aa1d77ac5249259cfc2622814d3adf/\n  [surface_dynamics]       Complete output (15 lines):\n  [surface_dynamics]       Traceback (most recent call last):\n  [surface_dynamics]         File \"/tmp/pip-install-09x74vlr/surface-dynamics_62aa1d77ac5249259cfc2622814d3adf/setup.py\", line 8, in <module>\n  [surface_dynamics]           import sage.all\n  [surface_dynamics]       ModuleNotFoundError: No module named 'sage'\n  [surface_dynamics]       \n  [surface_dynamics]       During handling of the above exception, another exception occurred:\n  [surface_dynamics]       \n  [surface_dynamics]       Traceback (most recent call last):\n  [surface_dynamics]         File \"<string>\", line 1, in <module>\n  [surface_dynamics]         File \"/tmp/pip-install-09x74vlr/surface-dynamics_62aa1d77ac5249259cfc2622814d3adf/setup.py\", line 10, in <module>\n  [surface_dynamics]           raise ValueError(\"this package currently installs only inside SageMath (http://www.sagemath.org)\\n\"\n  [surface_dynamics]       ValueError: this package currently installs only inside SageMath (http://www.sagemath.org)\n  [surface_dynamics]       If you are using Ubuntu with Sage installed from the official apt repository, run\n  [surface_dynamics]       first in a console \"$ source /usr/share/sagemath/bin/sage-env\"\n  [surface_dynamics]       \n  [surface_dynamics]       ----------------------------------------\n  [surface_dynamics]   ERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\n```",
    "created_at": "2021-01-16T16:47:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500179",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

This (and probably other packages just added) will need additional dependencies - see https://github.com/mkoeppe/sage/runs/1712141788?check_suite_focus=true

```
[surface_dynamics] installing. Log file: /sage/logs/pkgs/surface_dynamics.log
  [surface_dynamics] error installing, exit status 1. End of log file:
  [surface_dynamics]   Collecting surface_dynamics
  [surface_dynamics]     Downloading surface_dynamics-0.4.5.tar.gz (11.3 MB)
  [surface_dynamics]       ERROR: Command errored out with exit status 1:
  [surface_dynamics]        command: /sage/local/bin/python3 -c 'import sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-install-09x74vlr/surface-dynamics_62aa1d77ac5249259cfc2622814d3adf/setup.py'"'"'; __file__='"'"'/tmp/pip-install-09x74vlr/surface-dynamics_62aa1d77ac5249259cfc2622814d3adf/setup.py'"'"';f=getattr(tokenize, '"'"'open'"'"', open)(__file__);code=f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /tmp/pip-pip-egg-info-0g71blv2
  [surface_dynamics]            cwd: /tmp/pip-install-09x74vlr/surface-dynamics_62aa1d77ac5249259cfc2622814d3adf/
  [surface_dynamics]       Complete output (15 lines):
  [surface_dynamics]       Traceback (most recent call last):
  [surface_dynamics]         File "/tmp/pip-install-09x74vlr/surface-dynamics_62aa1d77ac5249259cfc2622814d3adf/setup.py", line 8, in <module>
  [surface_dynamics]           import sage.all
  [surface_dynamics]       ModuleNotFoundError: No module named 'sage'
  [surface_dynamics]       
  [surface_dynamics]       During handling of the above exception, another exception occurred:
  [surface_dynamics]       
  [surface_dynamics]       Traceback (most recent call last):
  [surface_dynamics]         File "<string>", line 1, in <module>
  [surface_dynamics]         File "/tmp/pip-install-09x74vlr/surface-dynamics_62aa1d77ac5249259cfc2622814d3adf/setup.py", line 10, in <module>
  [surface_dynamics]           raise ValueError("this package currently installs only inside SageMath (http://www.sagemath.org)\n"
  [surface_dynamics]       ValueError: this package currently installs only inside SageMath (http://www.sagemath.org)
  [surface_dynamics]       If you are using Ubuntu with Sage installed from the official apt repository, run
  [surface_dynamics]       first in a console "$ source /usr/share/sagemath/bin/sage-env"
  [surface_dynamics]       
  [surface_dynamics]       ----------------------------------------
  [surface_dynamics]   ERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.
```



---

archive/issue_comments_500180.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHow do I set sage Python library as a dependency!?",
    "created_at": "2021-01-16T17:00:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500180",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">comment:8</div>

How do I set sage Python library as a dependency!?



---

archive/issue_comments_500181.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nFor this very specific package, it is needed at install time (Cython compilation). For pure Python it will only be a runtime dependency.",
    "created_at": "2021-01-16T17:01:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500181",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

For this very specific package, it is needed at install time (Cython compilation). For pure Python it will only be a runtime dependency.



---

archive/issue_comments_500182.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI think an order-only dependency on `$(SAGE_RUNTIME)` will do the trick.\nSee `build/pkgs/sage_numerical_backends_coin/dependencies` for an example.",
    "created_at": "2021-01-16T17:09:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500182",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

I think an order-only dependency on `$(SAGE_RUNTIME)` will do the trick.
See `build/pkgs/sage_numerical_backends_coin/dependencies` for an example.



---

archive/issue_comments_500183.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nIt is written `$(SAGERUNTIME)` in this file, not `$(SAGE_RUNTIME)`... Where is it misspelled?",
    "created_at": "2021-01-16T17:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500183",
    "user": "https://github.com/videlec"
}
```

<div id="comment:11" align="right">comment:11</div>

It is written `$(SAGERUNTIME)` in this file, not `$(SAGE_RUNTIME)`... Where is it misspelled?



---

archive/issue_comments_500184.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n`SAGERUNTIME` is correct. Sorry for the confusion",
    "created_at": "2021-01-16T17:24:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500184",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

`SAGERUNTIME` is correct. Sorry for the confusion



---

archive/issue_comments_500185.json:
```json
{
    "body": "Changed commit from **[`1dad153`](https://github.com/sagemath/sagetrac-mirror/commit/1dad153248df6d4c9dfa16e683d1eb9ef3e2ee2e)** to **[`7e0a7df`](https://github.com/sagemath/sagetrac-mirror/commit/7e0a7df145b56090ec17b3bdd62d93540f961a0f)**",
    "created_at": "2021-01-16T17:26:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500185",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1dad153`](https://github.com/sagemath/sagetrac-mirror/commit/1dad153248df6d4c9dfa16e683d1eb9ef3e2ee2e)** to **[`7e0a7df`](https://github.com/sagemath/sagetrac-mirror/commit/7e0a7df145b56090ec17b3bdd62d93540f961a0f)**



---

archive/issue_comments_500186.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e0a7df145b56090ec17b3bdd62d93540f961a0f\"><code>7e0a7df</code></a></td><td><code>31224: SAGERUNTIME dependency</code></td></tr></table>\n",
    "created_at": "2021-01-16T17:26:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500186",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e0a7df145b56090ec17b3bdd62d93540f961a0f"><code>7e0a7df</code></a></td><td><code>31224: SAGERUNTIME dependency</code></td></tr></table>




---

archive/issue_events_427188.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-01-16T17:26:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31224#event-427188"
}
```



---

archive/issue_events_427189.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2021-01-16T17:26:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31224#event-427189"
}
```



---

archive/issue_comments_500187.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nWouldn't it be safer with a normal dependency? Namely I have Cython inheritance there. If a Cython object such as `sage.structure.element.Element` is changed in the Sage library, it might end up with wrong compiled Cython code.",
    "created_at": "2021-01-16T17:28:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500187",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">comment:15</div>

Wouldn't it be safer with a normal dependency? Namely I have Cython inheritance there. If a Cython object such as `sage.structure.element.Element` is changed in the Sage library, it might end up with wrong compiled Cython code.



---

archive/issue_comments_500188.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThe problem with a normal dependency is that `sagelib` is always built (dependency on `FORCE` in `build/pkgs/sagelib/dependencies`), which would trigger an unconditional rebuild of this package. That's why I have included a number of key sage source files in `build/pkgs/sage_numerical_backends_coin/dependencies`. (See #29711 for a related discussion)",
    "created_at": "2021-01-16T17:39:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500188",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

The problem with a normal dependency is that `sagelib` is always built (dependency on `FORCE` in `build/pkgs/sagelib/dependencies`), which would trigger an unconditional rebuild of this package. That's why I have included a number of key sage source files in `build/pkgs/sage_numerical_backends_coin/dependencies`. (See #29711 for a related discussion)



---

archive/issue_comments_500189.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nGreat: `$(SAGE_SRC)/sage/cpython/string.pxd` is allowed!",
    "created_at": "2021-01-16T18:00:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500189",
    "user": "https://github.com/videlec"
}
```

<div id="comment:17" align="right">comment:17</div>

Great: `$(SAGE_SRC)/sage/cpython/string.pxd` is allowed!



---

archive/issue_comments_500190.json:
```json
{
    "body": "Changed commit from **[`7e0a7df`](https://github.com/sagemath/sagetrac-mirror/commit/7e0a7df145b56090ec17b3bdd62d93540f961a0f)** to **[`3a807c0`](https://github.com/sagemath/sagetrac-mirror/commit/3a807c00d47da76de65cd657aa8c662accea9a4f)**",
    "created_at": "2021-01-16T18:06:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500190",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7e0a7df`](https://github.com/sagemath/sagetrac-mirror/commit/7e0a7df145b56090ec17b3bdd62d93540f961a0f)** to **[`3a807c0`](https://github.com/sagemath/sagetrac-mirror/commit/3a807c00d47da76de65cd657aa8c662accea9a4f)**



---

archive/issue_comments_500191.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a807c00d47da76de65cd657aa8c662accea9a4f\"><code>3a807c0</code></a></td><td><code>31224: dependency on sage sources</code></td></tr></table>\n",
    "created_at": "2021-01-16T18:06:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500191",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a807c00d47da76de65cd657aa8c662accea9a4f"><code>3a807c0</code></a></td><td><code>31224: dependency on sage sources</code></td></tr></table>




---

archive/issue_events_427190.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-16T18:10:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31224#event-427190"
}
```



---

archive/issue_events_427191.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-16T18:10:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31224#event-427191"
}
```



---

archive/issue_comments_500192.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nLooking great.",
    "created_at": "2021-01-16T18:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500192",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

Looking great.



---

archive/issue_comments_500193.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/31224](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/31224)** to **[`3a807c0`](https://github.com/sagemath/sagetrac-mirror/commit/3a807c00d47da76de65cd657aa8c662accea9a4f)**",
    "created_at": "2021-01-24T10:37:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500193",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vdelecroix/31224](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/31224)** to **[`3a807c0`](https://github.com/sagemath/sagetrac-mirror/commit/3a807c00d47da76de65cd657aa8c662accea9a4f)**



---

archive/issue_events_427192.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-24T10:37:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31224#event-427192"
}
```



---

archive/issue_events_427193.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "d9745ca3e1fd3be6939b5c6fc708023334de8ef7",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-01-24T10:37:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31224#event-427193"
}
```



---

archive/issue_comments_500194.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,10 @@\n See #31164. Upstream code at https://gitlab.com/videlec/surface_dynamics and https://pypi.org/project/surface-dynamics/.\n \n+---\n+\n+Updated links (2021-08-15):\n+\n+- code: https://github.com/flatsurf/surface-dynamics\n+- docs: https://flatsurf.github.io/surface-dynamics/\n+- pypi: https://pypi.org/project/surface-dynamics/\n+\n``````\n",
    "created_at": "2021-08-15T13:02:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500194",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,10 @@
 See #31164. Upstream code at https://gitlab.com/videlec/surface_dynamics and https://pypi.org/project/surface-dynamics/.
 
+---
+
+Updated links (2021-08-15):
+
+- code: https://github.com/flatsurf/surface-dynamics
+- docs: https://flatsurf.github.io/surface-dynamics/
+- pypi: https://pypi.org/project/surface-dynamics/
+
``````




---

archive/issue_comments_500195.json:
```json
{
    "body": "Changed commit from **[`3a807c0`](https://github.com/sagemath/sagetrac-mirror/commit/3a807c00d47da76de65cd657aa8c662accea9a4f)** to none",
    "created_at": "2021-08-15T13:02:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31224#issuecomment-500195",
    "user": "https://github.com/slel"
}
```

Changed commit from **[`3a807c0`](https://github.com/sagemath/sagetrac-mirror/commit/3a807c00d47da76de65cd657aa8c662accea9a4f)** to none
