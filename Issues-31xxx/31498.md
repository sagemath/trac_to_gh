# Issue 31498: upgrade GAP to 4.11.1 or newer

archive/issues_031261.json:
```json
{
    "assignees": [],
    "body": "the current GAP release is 4.11.1. Time to upgrade - previous upgrade\nwas in #29314.\n\nHere we also upgrade libsemigroups, in lockstep with GAP, to 1.1.0.\n\nGAP tarball is now hosted on [GitHub](../wiki/GitHub); we also need to install more GAP packages to satsify needs of updated GAP package digraph and semigroups. \n\nFinally, we fix a bug in TestSuite for abelian groups\n\nCC:  @antonio-rojas @embray @kiwifb @mkoeppe @slel @tobihan @videlec\n\nKeywords: **upgrade, gap**\n\nBranch: **[82f3fa7](https://github.com/sagemath/sagetrac-mirror/commit/82f3fa7bcc0e73c85690a0886a67c5d8cd2e5c2b)**\n\nReviewer: **Volker Braun, Travis Scrimshaw**\n\nAuthor: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31498_\n\n",
    "closed_at": "2021-06-20T08:14:22Z",
    "created_at": "2021-03-15T11:40:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "upgrade GAP to 4.11.1 or newer",
    "type": "issue",
    "updated_at": "2021-06-20T21:39:42Z",
    "url": "https://github.com/sagemath/sage/issues/31498",
    "user": "https://github.com/dimpase"
}
```
the current GAP release is 4.11.1. Time to upgrade - previous upgrade
was in #29314.

Here we also upgrade libsemigroups, in lockstep with GAP, to 1.1.0.

GAP tarball is now hosted on [GitHub](../wiki/GitHub); we also need to install more GAP packages to satsify needs of updated GAP package digraph and semigroups. 

Finally, we fix a bug in TestSuite for abelian groups

CC:  @antonio-rojas @embray @kiwifb @mkoeppe @slel @tobihan @videlec

Keywords: **upgrade, gap**

Branch: **[82f3fa7](https://github.com/sagemath/sagetrac-mirror/commit/82f3fa7bcc0e73c85690a0886a67c5d8cd2e5c2b)**

Reviewer: **Volker Braun, Travis Scrimshaw**

Author: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/31498_





---

archive/issue_events_415968.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-03-15T11:40:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31498#event-415968"
}
```



---

archive/issue_events_415969.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-03-15T11:40:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31498#event-415969"
}
```



---

archive/issue_events_415970.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-03-15T11:40:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31498#event-415970"
}
```



---

archive/issue_events_415971.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-03-15T11:40:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31498#event-415971"
}
```



---

archive/issue_comments_508689.json:
```json
{
    "body": "Changed keywords from **** to **upgrade, gap**",
    "created_at": "2021-03-16T01:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508689",
    "user": "https://github.com/slel"
}
```

Changed keywords from **** to **upgrade, gap**



---

archive/issue_comments_508690.json:
```json
{
    "body": "Commit: **[37466dd](https://github.com/sagemath/sagetrac-mirror/commit/37466dd9a122c4aade0f412313f53c59151e82c5)**",
    "created_at": "2021-05-13T21:51:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508690",
    "user": "https://github.com/dimpase"
}
```

Commit: **[37466dd](https://github.com/sagemath/sagetrac-mirror/commit/37466dd9a122c4aade0f412313f53c59151e82c5)**



---

archive/issue_comments_508691.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2021-05-13T21:51:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508691",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_comments_508692.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37466dd9a122c4aade0f412313f53c59151e82c5\">37466dd</a></td><td><code>GAP version bump to 4.11.1</code></td></tr></table>\n",
    "created_at": "2021-05-13T21:51:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508692",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'>Comment 2:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37466dd9a122c4aade0f412313f53c59151e82c5">37466dd</a></td><td><code>GAP version bump to 4.11.1</code></td></tr></table>




---

archive/issue_comments_508693.json:
```json
{
    "body": "Branch: **[u/dimpase/packages/gap4111](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gap4111)**",
    "created_at": "2021-05-13T21:51:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508693",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/packages/gap4111](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gap4111)**



---

archive/issue_comments_508694.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8367f8e8422c2859418e084ff70f05b0f5f7bd97\">8367f8e</a></td><td><code>ctbl versions now numbered</code></td></tr></table>\n",
    "created_at": "2021-05-13T23:04:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508694",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'>Comment 3:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8367f8e8422c2859418e084ff70f05b0f5f7bd97">8367f8e</a></td><td><code>ctbl versions now numbered</code></td></tr></table>




---

archive/issue_comments_508695.json:
```json
{
    "body": "Changed commit from **[37466dd](https://github.com/sagemath/sagetrac-mirror/commit/37466dd9a122c4aade0f412313f53c59151e82c5)** to **[8367f8e](https://github.com/sagemath/sagetrac-mirror/commit/8367f8e8422c2859418e084ff70f05b0f5f7bd97)**",
    "created_at": "2021-05-13T23:04:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508695",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[37466dd](https://github.com/sagemath/sagetrac-mirror/commit/37466dd9a122c4aade0f412313f53c59151e82c5)** to **[8367f8e](https://github.com/sagemath/sagetrac-mirror/commit/8367f8e8422c2859418e084ff70f05b0f5f7bd97)**



---

archive/issue_comments_508696.json:
```json
{
    "body": "Changed commit from **[8367f8e](https://github.com/sagemath/sagetrac-mirror/commit/8367f8e8422c2859418e084ff70f05b0f5f7bd97)** to **[246664d](https://github.com/sagemath/sagetrac-mirror/commit/246664d79f4267f2ee9566bd25f26da772a3d4db)**",
    "created_at": "2021-05-14T08:45:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508696",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8367f8e](https://github.com/sagemath/sagetrac-mirror/commit/8367f8e8422c2859418e084ff70f05b0f5f7bd97)** to **[246664d](https://github.com/sagemath/sagetrac-mirror/commit/246664d79f4267f2ee9566bd25f26da772a3d4db)**



---

archive/issue_comments_508697.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d113f87ceac81f8f08345eb0f389bb31865c18f\">1d113f8</a></td><td><code>update libsemigroup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/246664d79f4267f2ee9566bd25f26da772a3d4db\">246664d</a></td><td><code>more GAP packages are deps</code></td></tr></table>\n",
    "created_at": "2021-05-14T08:45:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508697",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>Comment 4:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d113f87ceac81f8f08345eb0f389bb31865c18f">1d113f8</a></td><td><code>update libsemigroup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/246664d79f4267f2ee9566bd25f26da772a3d4db">246664d</a></td><td><code>more GAP packages are deps</code></td></tr></table>




---

archive/issue_comments_508698.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nwhat remains is to fix this weird error - something is emitting that string of `*` whcih overrides the test output. Not reproducible at `sage:` prompt:\n\n```\nFile \"src/sage/tests/gap_packages.py\", line 8, in sage.tests.gap_packages\nFailed example:\n    test_packages(pkgs, only_failures=True)    # optional - gap_packages\nExpected:\n    ...\n      Status   Package   GAP Output\n    +--------+---------+------------+\nGot:\n      Status   Package   GAP Output\n    +--------+---------+------------+\n**********************************************************************\n```\n\nbut\n\n```\nsage: from sage.tests.gap_packages import all_installed_packages, test_packages                                                                                                                                                                                                   \nsage: pkgs = all_installed_packages(ignore_dot_gap=True)                                                                                                                                                                                                                          \nsage: test_packages(pkgs, only_failures=True)                                                                                                                                                                                                                                     \n  Status   Package   GAP Output\n+--------+---------+------------+\nsage:   \n```",
    "created_at": "2021-05-14T08:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508698",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'>Comment 5:</a>
what remains is to fix this weird error - something is emitting that string of `*` whcih overrides the test output. Not reproducible at `sage:` prompt:

```
File "src/sage/tests/gap_packages.py", line 8, in sage.tests.gap_packages
Failed example:
    test_packages(pkgs, only_failures=True)    # optional - gap_packages
Expected:
    ...
      Status   Package   GAP Output
    +--------+---------+------------+
Got:
      Status   Package   GAP Output
    +--------+---------+------------+
**********************************************************************
```

but

```
sage: from sage.tests.gap_packages import all_installed_packages, test_packages                                                                                                                                                                                                   
sage: pkgs = all_installed_packages(ignore_dot_gap=True)                                                                                                                                                                                                                          
sage: test_packages(pkgs, only_failures=True)                                                                                                                                                                                                                                     
  Status   Package   GAP Output
+--------+---------+------------+
sage:   
```



---

archive/issue_comments_508699.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [@dimpase](#comment%3A5):\n> what remains is to fix this weird error - something is emitting that string of `*` whcih overrides the test output.\n\nIsn't that just the usual test failure output? It seems to me that the actual issue is the \"...\" wildcard on the first line - there is no newline before the \"Status\" line so it doesn't match.",
    "created_at": "2021-05-14T09:09:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508699",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [@dimpase](#comment%3A5):
> what remains is to fix this weird error - something is emitting that string of `*` whcih overrides the test output.

Isn't that just the usual test failure output? It seems to me that the actual issue is the "..." wildcard on the first line - there is no newline before the "Status" line so it doesn't match.



---

archive/issue_comments_508700.json:
```json
{
    "body": "Changed commit from **[246664d](https://github.com/sagemath/sagetrac-mirror/commit/246664d79f4267f2ee9566bd25f26da772a3d4db)** to **[7170197](https://github.com/sagemath/sagetrac-mirror/commit/717019729bb9e8a713b57fcdeb18420ec838a7f3)**",
    "created_at": "2021-05-14T09:19:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508700",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[246664d](https://github.com/sagemath/sagetrac-mirror/commit/246664d79f4267f2ee9566bd25f26da772a3d4db)** to **[7170197](https://github.com/sagemath/sagetrac-mirror/commit/717019729bb9e8a713b57fcdeb18420ec838a7f3)**



---

archive/issue_comments_508701.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/717019729bb9e8a713b57fcdeb18420ec838a7f3\">7170197</a></td><td><code>modify the test so that Sage's \"table\" is not used</code></td></tr></table>\n",
    "created_at": "2021-05-14T09:19:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508701",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/717019729bb9e8a713b57fcdeb18420ec838a7f3">7170197</a></td><td><code>modify the test so that Sage's "table" is not used</code></td></tr></table>




---

archive/issue_comments_508702.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nanother test to fix:\n\n```\nsage -t --warn-long 50.1 --random-seed=0 src/sage/groups/abelian_gps/abelian_group_gap.py\n**********************************************************************\nFile \"src/sage/groups/abelian_gps/abelian_group_gap.py\", line 201, in sage.groups.abelian_gps.abelian_group_gap.AbelianGroupElement_polycyclic\nFailed example:\n    TestSuite(G.an_element()).run()       # optional - gap_packages\nExpected nothing\nGot:\n    Failure in _test_pickling:\n    Traceback (most recent call last):\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"sage/structure/sage_object.pyx\", line 647, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:5023)\n        tester.assertEqual(loads(dumps(self)), self)\n      File \"sage/misc/persist.pyx\", line 935, in sage.misc.persist.loads (build/cythonized/sage/misc/persist.c:7536)\n        return unpickler.load()\n      File \"sage/structure/parent.pyx\", line 898, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9335)\n        return mor._call_(x)\n      File \"sage/structure/coerce_maps.pyx\", line 161, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4622)\n        raise\n      File \"sage/structure/coerce_maps.pyx\", line 156, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4514)\n        return C._element_constructor(x)\n      File \"/home/scratch2/dimpase/sage/sage/local/lib64/python3.8/site-packages/sage/groups/abelian_gps/abelian_group_gap.py\", line 368, in _element_constructor_\n        x *= gens_gap[i]**(exp[i] % orders[i])\n      File \"sage/rings/integer.pyx\", line 3413, in sage.rings.integer.Integer.__mod__ (build/cythonized/sage/rings/integer.c:22616)\n        raise ZeroDivisionError(\"Integer modulo by zero\")\n    ZeroDivisionError: Integer modulo by zero\n    ------------------------------------------------------------\n    The following tests failed: _test_pickling\n**********************************************************************\n```",
    "created_at": "2021-05-14T09:20:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508702",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'>Comment 8:</a>
another test to fix:

```
sage -t --warn-long 50.1 --random-seed=0 src/sage/groups/abelian_gps/abelian_group_gap.py
**********************************************************************
File "src/sage/groups/abelian_gps/abelian_group_gap.py", line 201, in sage.groups.abelian_gps.abelian_group_gap.AbelianGroupElement_polycyclic
Failed example:
    TestSuite(G.an_element()).run()       # optional - gap_packages
Expected nothing
Got:
    Failure in _test_pickling:
    Traceback (most recent call last):
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "sage/structure/sage_object.pyx", line 647, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:5023)
        tester.assertEqual(loads(dumps(self)), self)
      File "sage/misc/persist.pyx", line 935, in sage.misc.persist.loads (build/cythonized/sage/misc/persist.c:7536)
        return unpickler.load()
      File "sage/structure/parent.pyx", line 898, in sage.structure.parent.Parent.__call__ (build/cythonized/sage/structure/parent.c:9335)
        return mor._call_(x)
      File "sage/structure/coerce_maps.pyx", line 161, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4622)
        raise
      File "sage/structure/coerce_maps.pyx", line 156, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (build/cythonized/sage/structure/coerce_maps.c:4514)
        return C._element_constructor(x)
      File "/home/scratch2/dimpase/sage/sage/local/lib64/python3.8/site-packages/sage/groups/abelian_gps/abelian_group_gap.py", line 368, in _element_constructor_
        x *= gens_gap[i]**(exp[i] % orders[i])
      File "sage/rings/integer.pyx", line 3413, in sage.rings.integer.Integer.__mod__ (build/cythonized/sage/rings/integer.c:22616)
        raise ZeroDivisionError("Integer modulo by zero")
    ZeroDivisionError: Integer modulo by zero
    ------------------------------------------------------------
    The following tests failed: _test_pickling
**********************************************************************
```



---

archive/issue_comments_508703.json:
```json
{
    "body": "Changed commit from **[7170197](https://github.com/sagemath/sagetrac-mirror/commit/717019729bb9e8a713b57fcdeb18420ec838a7f3)** to **[5c885dd](https://github.com/sagemath/sagetrac-mirror/commit/5c885dd62363bbc63e88c2dc2473a783bf2c4035)**",
    "created_at": "2021-05-14T11:49:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508703",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7170197](https://github.com/sagemath/sagetrac-mirror/commit/717019729bb9e8a713b57fcdeb18420ec838a7f3)** to **[5c885dd](https://github.com/sagemath/sagetrac-mirror/commit/5c885dd62363bbc63e88c2dc2473a783bf2c4035)**



---

archive/issue_comments_508704.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c885dd62363bbc63e88c2dc2473a783bf2c4035\">5c885dd</a></td><td><code>do not take \"mod 0\", skip \"mod\"</code></td></tr></table>\n",
    "created_at": "2021-05-14T11:49:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508704",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>Comment 9:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c885dd62363bbc63e88c2dc2473a783bf2c4035">5c885dd</a></td><td><code>do not take "mod 0", skip "mod"</code></td></tr></table>




---

archive/issue_events_415972.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-05-14T12:14:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31498#event-415972"
}
```



---

archive/issue_comments_508705.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,8 @@\n-the current GAP release is 4.11.1. Time to upgrade.\n+the current GAP release is 4.11.1. Time to upgrade - previous upgrade\n+was in #29314.\n+\n+Here we also upgrade libsemigroups, in lockstep with GAP, to 1.1.0.\n+\n+GAP tarball is now hosted on [GitHub](../wiki/GitHub); we also need to install more GAP packages to satsify needs of updated GAP package digraph and semigroups. \n+\n+Finally, we fix a bug in TestSuite for abelian groups\n``````\n",
    "created_at": "2021-05-14T12:14:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508705",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,8 @@
-the current GAP release is 4.11.1. Time to upgrade.
+the current GAP release is 4.11.1. Time to upgrade - previous upgrade
+was in #29314.
+
+Here we also upgrade libsemigroups, in lockstep with GAP, to 1.1.0.
+
+GAP tarball is now hosted on [GitHub](../wiki/GitHub); we also need to install more GAP packages to satsify needs of updated GAP package digraph and semigroups. 
+
+Finally, we fix a bug in TestSuite for abelian groups
``````




---

archive/issue_comments_508706.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nplease review...",
    "created_at": "2021-05-27T11:15:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508706",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'>Comment 11:</a>
please review...



---

archive/issue_comments_508707.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nI won't lie, I am not quite ready for this in sage-on-gentoo. I have been under rather heavy stress so far this year and I am not doing as much as I want.",
    "created_at": "2021-05-27T11:31:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508707",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:12'>Comment 12:</a>
I won't lie, I am not quite ready for this in sage-on-gentoo. I have been under rather heavy stress so far this year and I am not doing as much as I want.



---

archive/issue_events_415973.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-30T09:24:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31498#event-415973"
}
```



---

archive/issue_events_415974.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-30T09:24:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31498#event-415974"
}
```



---

archive/issue_comments_508708.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nTell me about it ;-) \n\nBut I think we should have people bang away at this asap and not later in the release cycle.",
    "created_at": "2021-05-30T09:24:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508708",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:13'>Comment 13:</a>
Tell me about it ;-) 

But I think we should have people bang away at this asap and not later in the release cycle.



---

archive/issue_comments_508709.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nThanks!",
    "created_at": "2021-05-30T11:54:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508709",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'>Comment 14:</a>
Thanks!



---

archive/issue_comments_508710.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2021-05-30T16:02:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508710",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_comments_508711.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nThere is a small merge conflict with #31489, and a failure\n\n```\nsage -t --long --warn-long 43.1 --random-seed=0 src/sage/tests/gap_packages.py\n**********************************************************************\nFile \"src/sage/tests/gap_packages.py\", line 9, in sage.tests.gap_packages\nFailed example:\n    for p in pkgs:\n        pkg = p.split('-')[0]\n        if not libgap.LoadPackage(pkg):\n            raise\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.tests.gap_packages[3]>\", line 4, in <module>\n        raise\n    RuntimeError: No active exception to reraise\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.tests.gap_packages\n    [12 tests, 1 failure, 0.26 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 43.1 --random-seed=0 src/sage/tests/gap_packages.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2021-05-30T16:57:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508711",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'>Comment 16:</a>
There is a small merge conflict with #31489, and a failure

```
sage -t --long --warn-long 43.1 --random-seed=0 src/sage/tests/gap_packages.py
**********************************************************************
File "src/sage/tests/gap_packages.py", line 9, in sage.tests.gap_packages
Failed example:
    for p in pkgs:
        pkg = p.split('-')[0]
        if not libgap.LoadPackage(pkg):
            raise
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.tests.gap_packages[3]>", line 4, in <module>
        raise
    RuntimeError: No active exception to reraise
**********************************************************************
1 item had failures:
   1 of   6 in sage.tests.gap_packages
    [12 tests, 1 failure, 0.26 s]
----------------------------------------------------------------------
sage -t --long --warn-long 43.1 --random-seed=0 src/sage/tests/gap_packages.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_events_415975.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-30T16:57:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31498#event-415975"
}
```



---

archive/issue_events_415976.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-30T16:57:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31498#event-415976"
}
```



---

archive/issue_comments_508712.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nReplying to [@vbraun](#comment%3A16):\n> There is a small merge conflict with #31489, and a failure\n> \n> ```\n> sage -t --long --warn-long 43.1 --random-seed=0 src/sage/tests/gap_packages.py\n> ...\n> ```\n\nI only see this if I manually uninstall gap_packages. But this meant to be with them installed?\n\n```\n96396e238d4 (Volker Braun     2013-07-22 17:05:24 -0400   2) Test the optional GAP packages\n```\n\nGAP doesn't have a clean way to uninstall packages. \n\nI can rebase over  #31489 if it helps.",
    "created_at": "2021-06-01T10:27:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508712",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'>Comment 17:</a>
Replying to [@vbraun](#comment%3A16):
> There is a small merge conflict with #31489, and a failure
> 
> ```
> sage -t --long --warn-long 43.1 --random-seed=0 src/sage/tests/gap_packages.py
> ...
> ```

I only see this if I manually uninstall gap_packages. But this meant to be with them installed?

```
96396e238d4 (Volker Braun     2013-07-22 17:05:24 -0400   2) Test the optional GAP packages
```

GAP doesn't have a clean way to uninstall packages. 

I can rebase over  #31489 if it helps.



---

archive/issue_comments_508713.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nthese test_packages stuff is a mess. We have two different functions\nthat both claim to `Return list of all installed packages.`,  `test_packages()`, and `all_installed_packages()` which differ in the output format - the former outputs `table` (sic!)\nand the latter does not check whether these packages actually may be loaded (so it's largely meaningless).\n\nMay we do it on another ticket?",
    "created_at": "2021-06-01T11:24:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508713",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'>Comment 18:</a>
these test_packages stuff is a mess. We have two different functions
that both claim to `Return list of all installed packages.`,  `test_packages()`, and `all_installed_packages()` which differ in the output format - the former outputs `table` (sic!)
and the latter does not check whether these packages actually may be loaded (so it's largely meaningless).

May we do it on another ticket?



---

archive/issue_comments_508714.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9ac5062cbbe188c65be9260d8f6ff53f359fe55\">a9ac506</a></td><td><code>GAP version bump to 4.11.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8c87d4196f4f0ca07935d50064c0b0ad4473644\">f8c87d4</a></td><td><code>ctbl versions now numbered</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2bc010c38469af596bdb9cd50ddec9225f9a559\">a2bc010</a></td><td><code>update libsemigroup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40e610522cf2870ac959475ea23a771eda1dec38\">40e6105</a></td><td><code>more GAP packages are deps</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d44ad07a234717968c57f20a1601ca8a007aa30\">8d44ad0</a></td><td><code>modify the test so that Sage's \"table\" is not used</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05b434a068ad174c7c235294e7630654c78203a5\">05b434a</a></td><td><code>do not take \"mod 0\", skip \"mod\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ee7b5801bb4e4fe29b22de4acf28b2f8b01ab02\">7ee7b58</a></td><td><code>better fix for the test</code></td></tr></table>\n",
    "created_at": "2021-06-01T23:46:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508714",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'>Comment 19:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9ac5062cbbe188c65be9260d8f6ff53f359fe55">a9ac506</a></td><td><code>GAP version bump to 4.11.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8c87d4196f4f0ca07935d50064c0b0ad4473644">f8c87d4</a></td><td><code>ctbl versions now numbered</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2bc010c38469af596bdb9cd50ddec9225f9a559">a2bc010</a></td><td><code>update libsemigroup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40e610522cf2870ac959475ea23a771eda1dec38">40e6105</a></td><td><code>more GAP packages are deps</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d44ad07a234717968c57f20a1601ca8a007aa30">8d44ad0</a></td><td><code>modify the test so that Sage's "table" is not used</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05b434a068ad174c7c235294e7630654c78203a5">05b434a</a></td><td><code>do not take "mod 0", skip "mod"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ee7b5801bb4e4fe29b22de4acf28b2f8b01ab02">7ee7b58</a></td><td><code>better fix for the test</code></td></tr></table>




---

archive/issue_comments_508715.json:
```json
{
    "body": "Changed commit from **[5c885dd](https://github.com/sagemath/sagetrac-mirror/commit/5c885dd62363bbc63e88c2dc2473a783bf2c4035)** to **[7ee7b58](https://github.com/sagemath/sagetrac-mirror/commit/7ee7b5801bb4e4fe29b22de4acf28b2f8b01ab02)**",
    "created_at": "2021-06-01T23:46:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508715",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5c885dd](https://github.com/sagemath/sagetrac-mirror/commit/5c885dd62363bbc63e88c2dc2473a783bf2c4035)** to **[7ee7b58](https://github.com/sagemath/sagetrac-mirror/commit/7ee7b5801bb4e4fe29b22de4acf28b2f8b01ab02)**



---

archive/issue_events_415977.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-06-01T23:50:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31498#event-415977"
}
```



---

archive/issue_events_415978.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-06-01T23:50:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31498#event-415978"
}
```



---

archive/issue_comments_508716.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nI believe the test is fixed now.",
    "created_at": "2021-06-01T23:50:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508716",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'>Comment 20:</a>
I believe the test is fixed now.



---

archive/issue_comments_508717.json:
```json
{
    "body": "Dependencies: **#31489**",
    "created_at": "2021-06-02T00:01:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508717",
    "user": "https://github.com/dimpase"
}
```

Dependencies: **#31489**



---

archive/issue_comments_508718.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/101bd7451120e1a7972433f1c968ad62e5b266dc\">101bd74</a></td><td><code>use the change from #31489</code></td></tr></table>\n",
    "created_at": "2021-06-02T00:02:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508718",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'>Comment 22:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/101bd7451120e1a7972433f1c968ad62e5b266dc">101bd74</a></td><td><code>use the change from #31489</code></td></tr></table>




---

archive/issue_comments_508719.json:
```json
{
    "body": "Changed commit from **[7ee7b58](https://github.com/sagemath/sagetrac-mirror/commit/7ee7b5801bb4e4fe29b22de4acf28b2f8b01ab02)** to **[101bd74](https://github.com/sagemath/sagetrac-mirror/commit/101bd7451120e1a7972433f1c968ad62e5b266dc)**",
    "created_at": "2021-06-02T00:02:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508719",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7ee7b58](https://github.com/sagemath/sagetrac-mirror/commit/7ee7b5801bb4e4fe29b22de4acf28b2f8b01ab02)** to **[101bd74](https://github.com/sagemath/sagetrac-mirror/commit/101bd7451120e1a7972433f1c968ad62e5b266dc)**



---

archive/issue_comments_508720.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nOK, now it depends on #31489 and should cleanly merge: the only change from #31489 is done in [comment:22](#comment%3A22)",
    "created_at": "2021-06-02T00:03:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508720",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'>Comment 23:</a>
OK, now it depends on #31489 and should cleanly merge: the only change from #31489 is done in [comment:22](#comment%3A22)



---

archive/issue_comments_508721.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nI have not merged the full branch of #31489 here, though.",
    "created_at": "2021-06-02T00:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508721",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'>Comment 24:</a>
I have not merged the full branch of #31489 here, though.



---

archive/issue_comments_508722.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96df4584db2d6d30808499689b7ddff3ca00df41\">96df458</a></td><td><code>GAP version bump to 4.11.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91a695f7faf3dd34e3721d265561d647095c1987\">91a695f</a></td><td><code>ctbl versions now numbered</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79b3bdeff23b0c9932bb748e5da6d47d92bc9898\">79b3bde</a></td><td><code>update libsemigroup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1116073880233fe0b3377aaae33c85401da69ec4\">1116073</a></td><td><code>more GAP packages are deps</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7469042d7e6fa6dda64e23a26ed571c3c38d7c9a\">7469042</a></td><td><code>modify the test so that Sage's \"table\" is not used</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82f3fa7bcc0e73c85690a0886a67c5d8cd2e5c2b\">82f3fa7</a></td><td><code>better fix for the test</code></td></tr></table>\n",
    "created_at": "2021-06-08T15:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508722",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:25'>Comment 25:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96df4584db2d6d30808499689b7ddff3ca00df41">96df458</a></td><td><code>GAP version bump to 4.11.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91a695f7faf3dd34e3721d265561d647095c1987">91a695f</a></td><td><code>ctbl versions now numbered</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79b3bdeff23b0c9932bb748e5da6d47d92bc9898">79b3bde</a></td><td><code>update libsemigroup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1116073880233fe0b3377aaae33c85401da69ec4">1116073</a></td><td><code>more GAP packages are deps</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7469042d7e6fa6dda64e23a26ed571c3c38d7c9a">7469042</a></td><td><code>modify the test so that Sage's "table" is not used</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82f3fa7bcc0e73c85690a0886a67c5d8cd2e5c2b">82f3fa7</a></td><td><code>better fix for the test</code></td></tr></table>




---

archive/issue_comments_508723.json:
```json
{
    "body": "Changed commit from **[101bd74](https://github.com/sagemath/sagetrac-mirror/commit/101bd7451120e1a7972433f1c968ad62e5b266dc)** to **[82f3fa7](https://github.com/sagemath/sagetrac-mirror/commit/82f3fa7bcc0e73c85690a0886a67c5d8cd2e5c2b)**",
    "created_at": "2021-06-08T15:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508723",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[101bd74](https://github.com/sagemath/sagetrac-mirror/commit/101bd7451120e1a7972433f1c968ad62e5b266dc)** to **[82f3fa7](https://github.com/sagemath/sagetrac-mirror/commit/82f3fa7bcc0e73c85690a0886a67c5d8cd2e5c2b)**



---

archive/issue_comments_508724.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nrebased on 9.4.beta1",
    "created_at": "2021-06-08T15:41:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508724",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'>Comment 26:</a>
rebased on 9.4.beta1



---

archive/issue_comments_508725.json:
```json
{
    "body": "Changed dependencies from **#31489** to none",
    "created_at": "2021-06-08T15:42:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508725",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **#31489** to none



---

archive/issue_events_415979.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-06-11T03:46:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31498#event-415979"
}
```



---

archive/issue_events_415980.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-06-11T03:46:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31498#event-415980"
}
```



---

archive/issue_comments_508726.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nLet's try to get this into the next beta.",
    "created_at": "2021-06-11T03:46:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508726",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'>Comment 28:</a>
Let's try to get this into the next beta.



---

archive/issue_comments_508727.json:
```json
{
    "body": "Changed reviewer from **Volker Braun** to **Volker Braun, Travis Scrimshaw**",
    "created_at": "2021-06-11T03:46:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508727",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **Volker Braun** to **Volker Braun, Travis Scrimshaw**



---

archive/issue_events_415981.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-20T08:14:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31498#event-415981"
}
```



---

archive/issue_events_415982.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "05de38954aa6a1f6ecbe4ff34e961515f1a73b2a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-06-20T08:14:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31498#event-415982"
}
```



---

archive/issue_comments_508728.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/gap4111](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gap4111)** to **[82f3fa7](https://github.com/sagemath/sagetrac-mirror/commit/82f3fa7bcc0e73c85690a0886a67c5d8cd2e5c2b)**",
    "created_at": "2021-06-20T08:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508728",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/packages/gap4111](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gap4111)** to **[82f3fa7](https://github.com/sagemath/sagetrac-mirror/commit/82f3fa7bcc0e73c85690a0886a67c5d8cd2e5c2b)**



---

archive/issue_comments_508729.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nI am a bit dumbfounded by this upgrade in a way. There are strange particulars to it in sage-on-gentoo. I cannot build the doc.\n\n```\n[categorie] /var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/categories/finite_coxeter_groups.py:docstring of sage.categories.finite_coxeter_groups.FiniteCoxeterGroups.ParentMethods.permutahedron:50: WARNING: Exception occurred in plotting finite_coxeter_groups-1\n[categorie]  from /var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/doc/en/reference/categories/sage/categories/finite_coxeter_groups.rst:\n[categorie] Traceback (most recent call last):\n[categorie]   File \"/usr/lib/python3.9/site-packages/matplotlib/sphinxext/plot_directive.py\", line 483, in run_code\n[categorie]     exec(code, ns)\n[categorie]   File \"<string>\", line 1, in <module>\n[categorie]   File \"sage/misc/lazy_import.pyx\", line 362, in sage.misc.lazy_import.LazyImport.__call__ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/misc/lazy_import.c:4041)\n[categorie]     return self.get_object()(*args, **kwds)\n[categorie]   File \"/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/combinat/root_system/coxeter_group.py\", line 135, in CoxeterGroup\n[categorie]     return CoxeterMatrixGroup(cartan_type, base_ring, index_set)\n[categorie]   File \"sage/misc/classcall_metaclass.pyx\", line 322, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/misc/classcall_metaclass.c:1743)\n[categorie]     return cls.classcall(cls, *args, **kwds)\n[categorie]   File \"/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/groups/matrix_gps/coxeter_group.py\", line 230, in __classcall_private__\n[categorie]     return super(CoxeterMatrixGroup, cls).__classcall__(cls,\n[categorie]   File \"sage/misc/cachefunc.pyx\", line 1001, in sage.misc.cachefunc.CachedFunction.__call__ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/misc/cachefunc.c:6087)\n[categorie]     w = self.f(*args, **kwds)\n[categorie]   File \"/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/structure/unique_representation.py\", line 1007, in __classcall__\n[categorie]     instance = typecall(cls, *args, **options)\n[categorie]   File \"sage/misc/classcall_metaclass.pyx\", line 486, in sage.misc.classcall_metaclass.typecall (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/misc/classcall_metaclass.c:2207)\n[categorie]     return (<PyTypeObject*>type).tp_call(cls, args, kwds)\n[categorie]   File \"/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/groups/matrix_gps/coxeter_group.py\", line 273, in __init__\n[categorie]     one = MS.one()\n[categorie]   File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/misc/cachefunc.c:12918)\n[categorie]     self.cache = f(self._instance)\n[categorie]   File \"/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/matrix/matrix_space.py\", line 1608, in identity_matrix\n[categorie]     A = self.zero_matrix().__copy__()\n[categorie]   File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/misc/cachefunc.c:12918)\n[categorie]     self.cache = f(self._instance)\n[categorie]   File \"/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/matrix/matrix_space.py\", line 1766, in zero_matrix\n[categorie]     zero = self.base_ring().zero()\n[categorie]   File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/misc/cachefunc.c:12918)\n[categorie]     self.cache = f(self._instance)\n[categorie]   File \"/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/rings/universal_cyclotomic_field.py\", line 1397, in zero\n[categorie]     return self.element_class(self, libgap.zero())\n[categorie]   File \"sage/libs/gap/libgap.pyx\", line 618, in sage.libs.gap.libgap.Gap.zero (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/libs/gap/libgap.c:6277)\n[categorie]     return self(0)\n[categorie]   File \"sage/structure/parent.pyx\", line 898, in sage.structure.parent.Parent.__call__ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/structure/parent.c:9342)\n[categorie]     return mor._call_(x)\n[categorie]   File \"sage/structure/coerce_maps.pyx\", line 161, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/structure/coerce_maps.c:4628)\n[categorie]     raise\n[categorie]   File \"sage/structure/coerce_maps.pyx\", line 156, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/structure/coerce_maps.c:4520)\n[categorie]     return C._element_constructor(x)\n[categorie]   File \"sage/libs/gap/libgap.pyx\", line 298, in sage.libs.gap.libgap.Gap._element_constructor_ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/libs/gap/libgap.c:3391)\n[categorie]     initialize()\n[categorie]   File \"sage/libs/gap/util.pyx\", line 314, in sage.libs.gap.util.initialize (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/libs/gap/util.c:5897)\n[categorie]     with atomic_write(workspace) as f:\n[categorie]   File \"sage/libs/gap/util.pyx\", line 316, in sage.libs.gap.util.initialize (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/libs/gap/util.c:5852)\n[categorie]     gap_eval('SaveWorkspace(\"{0}\")'.format(f.name))\n[categorie]   File \"sage/libs/gap/util.pyx\", line 398, in sage.libs.gap.util.gap_eval (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/libs/gap/util.c:6068)\n[categorie]     GAP_Enter()\n[categorie] sage.libs.gap.util.GAPError: Error, reached the pre-set memory limit\n[categorie] (change it with the -o command line option)\n[graphs   ] The inventory files are in ../../build_doc/inventory/en/reference/graphs.\nBuild finished. The built documents can be found in /var/tmp/portage/sci-mathematics/sage-9999/work/build_doc/inventory/en/reference/graphs\n[functions] building [inventory]: targets for 20 source files that are out of date\n[functions] updating environment: [new config] 20 added, 0 changed, 0 removed\n[finite_ri] The inventory files are in ../../build_doc/inventory/en/reference/finite_rings.\nBuild finished. The built documents can be found in /var/tmp/portage/sci-mathematics/sage-9999/work/build_doc/inventory/en/reference/finite_rings\n[function_] The inventory files are in ../../build_doc/inventory/en/reference/function_fields.\nBuild finished. The built documents can be found in /var/tmp/portage/sci-mathematics/sage-9999/work/build_doc/inventory/en/reference/function_fields\n[game_theo] building [inventory]: targets for 6 source files that are out of date\n[game_theo] updating environment: [new config] 6 added, 0 changed, 0 removed\n[games    ] building [inventory]: targets for 5 source files that are out of date\n[games    ] updating environment: [new config] 5 added, 0 changed, 0 removed\n[game_theo] The inventory files are in ../../build_doc/inventory/en/reference/game_theory.\nBuild finished. The built documents can be found in /var/tmp/portage/sci-mathematics/sage-9999/work/build_doc/inventory/en/reference/game_theory\n[categorie] The inventory files are in ../../build_doc/inventory/en/reference/categories.\nError building the documentation.\nTraceback (most recent call last):\n  File \"/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/sage_docbuild/__main__.py\", line 2, in <module>\n    main()\n  File \"/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/sage_docbuild/__init__.py\", line 1813, in main\n    builder()\n  File \"/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/sage_docbuild/__init__.py\", line 345, in _wrapper\n    getattr(get_builder(document), 'inventory')(*args, **kwds)\n  File \"/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/sage_docbuild/__init__.py\", line 582, in _wrapper\n    self._build_everything_except_bibliography(format, *args, **kwds)\n  File \"/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/sage_docbuild/__init__.py\", line 565, in _build_everything_except_bibliography\n    build_many(build_ref_doc, non_references)\n  File \"/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/sage_docbuild/__init__.py\", line 297, in build_many\n    _build_many(target, args, processes=processes)\n  File \"/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/sage_docbuild/utils.py\", line 289, in build_many\n    raise worker_exc.original_exception\nOSError: /var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/categories/finite_coxeter_groups.py:docstring of sage.categories.finite_coxeter_groups.FiniteCoxeterGroups.ParentMethods.permutahedron:50: WARNING: Exception occurred in plotting finite_coxeter_groups-1\n```\nIn sage-on-gentoo, I do separate gap packages and the source of error is more precisely ctbllib-1.3.1+ (I say + because there is a 1.3.2 now in its upstream and the result is the same with it). If I downgrade ctbllib to 1.2_p2 the documentation builds.\n\nThe error message suggests to increase the memory limit. This is set somewhere in `sage/interface/gap.py` and I pushed it from the current `400MB` to `2000MB` without improvement.\n\nI am probably missing something but what?",
    "created_at": "2021-06-20T10:57:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508729",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:30'>Comment 30:</a>
I am a bit dumbfounded by this upgrade in a way. There are strange particulars to it in sage-on-gentoo. I cannot build the doc.

```
[categorie] /var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/categories/finite_coxeter_groups.py:docstring of sage.categories.finite_coxeter_groups.FiniteCoxeterGroups.ParentMethods.permutahedron:50: WARNING: Exception occurred in plotting finite_coxeter_groups-1
[categorie]  from /var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/doc/en/reference/categories/sage/categories/finite_coxeter_groups.rst:
[categorie] Traceback (most recent call last):
[categorie]   File "/usr/lib/python3.9/site-packages/matplotlib/sphinxext/plot_directive.py", line 483, in run_code
[categorie]     exec(code, ns)
[categorie]   File "<string>", line 1, in <module>
[categorie]   File "sage/misc/lazy_import.pyx", line 362, in sage.misc.lazy_import.LazyImport.__call__ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/misc/lazy_import.c:4041)
[categorie]     return self.get_object()(*args, **kwds)
[categorie]   File "/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/combinat/root_system/coxeter_group.py", line 135, in CoxeterGroup
[categorie]     return CoxeterMatrixGroup(cartan_type, base_ring, index_set)
[categorie]   File "sage/misc/classcall_metaclass.pyx", line 322, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/misc/classcall_metaclass.c:1743)
[categorie]     return cls.classcall(cls, *args, **kwds)
[categorie]   File "/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/groups/matrix_gps/coxeter_group.py", line 230, in __classcall_private__
[categorie]     return super(CoxeterMatrixGroup, cls).__classcall__(cls,
[categorie]   File "sage/misc/cachefunc.pyx", line 1001, in sage.misc.cachefunc.CachedFunction.__call__ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/misc/cachefunc.c:6087)
[categorie]     w = self.f(*args, **kwds)
[categorie]   File "/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/structure/unique_representation.py", line 1007, in __classcall__
[categorie]     instance = typecall(cls, *args, **options)
[categorie]   File "sage/misc/classcall_metaclass.pyx", line 486, in sage.misc.classcall_metaclass.typecall (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/misc/classcall_metaclass.c:2207)
[categorie]     return (<PyTypeObject*>type).tp_call(cls, args, kwds)
[categorie]   File "/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/groups/matrix_gps/coxeter_group.py", line 273, in __init__
[categorie]     one = MS.one()
[categorie]   File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/misc/cachefunc.c:12918)
[categorie]     self.cache = f(self._instance)
[categorie]   File "/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/matrix/matrix_space.py", line 1608, in identity_matrix
[categorie]     A = self.zero_matrix().__copy__()
[categorie]   File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/misc/cachefunc.c:12918)
[categorie]     self.cache = f(self._instance)
[categorie]   File "/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/matrix/matrix_space.py", line 1766, in zero_matrix
[categorie]     zero = self.base_ring().zero()
[categorie]   File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/misc/cachefunc.c:12918)
[categorie]     self.cache = f(self._instance)
[categorie]   File "/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/rings/universal_cyclotomic_field.py", line 1397, in zero
[categorie]     return self.element_class(self, libgap.zero())
[categorie]   File "sage/libs/gap/libgap.pyx", line 618, in sage.libs.gap.libgap.Gap.zero (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/libs/gap/libgap.c:6277)
[categorie]     return self(0)
[categorie]   File "sage/structure/parent.pyx", line 898, in sage.structure.parent.Parent.__call__ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/structure/parent.c:9342)
[categorie]     return mor._call_(x)
[categorie]   File "sage/structure/coerce_maps.pyx", line 161, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/structure/coerce_maps.c:4628)
[categorie]     raise
[categorie]   File "sage/structure/coerce_maps.pyx", line 156, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/structure/coerce_maps.c:4520)
[categorie]     return C._element_constructor(x)
[categorie]   File "sage/libs/gap/libgap.pyx", line 298, in sage.libs.gap.libgap.Gap._element_constructor_ (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/libs/gap/libgap.c:3391)
[categorie]     initialize()
[categorie]   File "sage/libs/gap/util.pyx", line 314, in sage.libs.gap.util.initialize (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/libs/gap/util.c:5897)
[categorie]     with atomic_write(workspace) as f:
[categorie]   File "sage/libs/gap/util.pyx", line 316, in sage.libs.gap.util.initialize (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/libs/gap/util.c:5852)
[categorie]     gap_eval('SaveWorkspace("{0}")'.format(f.name))
[categorie]   File "sage/libs/gap/util.pyx", line 398, in sage.libs.gap.util.gap_eval (/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/cythonized/sage/libs/gap/util.c:6068)
[categorie]     GAP_Enter()
[categorie] sage.libs.gap.util.GAPError: Error, reached the pre-set memory limit
[categorie] (change it with the -o command line option)
[graphs   ] The inventory files are in ../../build_doc/inventory/en/reference/graphs.
Build finished. The built documents can be found in /var/tmp/portage/sci-mathematics/sage-9999/work/build_doc/inventory/en/reference/graphs
[functions] building [inventory]: targets for 20 source files that are out of date
[functions] updating environment: [new config] 20 added, 0 changed, 0 removed
[finite_ri] The inventory files are in ../../build_doc/inventory/en/reference/finite_rings.
Build finished. The built documents can be found in /var/tmp/portage/sci-mathematics/sage-9999/work/build_doc/inventory/en/reference/finite_rings
[function_] The inventory files are in ../../build_doc/inventory/en/reference/function_fields.
Build finished. The built documents can be found in /var/tmp/portage/sci-mathematics/sage-9999/work/build_doc/inventory/en/reference/function_fields
[game_theo] building [inventory]: targets for 6 source files that are out of date
[game_theo] updating environment: [new config] 6 added, 0 changed, 0 removed
[games    ] building [inventory]: targets for 5 source files that are out of date
[games    ] updating environment: [new config] 5 added, 0 changed, 0 removed
[game_theo] The inventory files are in ../../build_doc/inventory/en/reference/game_theory.
Build finished. The built documents can be found in /var/tmp/portage/sci-mathematics/sage-9999/work/build_doc/inventory/en/reference/game_theory
[categorie] The inventory files are in ../../build_doc/inventory/en/reference/categories.
Error building the documentation.
Traceback (most recent call last):
  File "/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/sage_docbuild/__main__.py", line 2, in <module>
    main()
  File "/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/sage_docbuild/__init__.py", line 1813, in main
    builder()
  File "/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/sage_docbuild/__init__.py", line 345, in _wrapper
    getattr(get_builder(document), 'inventory')(*args, **kwds)
  File "/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/sage_docbuild/__init__.py", line 582, in _wrapper
    self._build_everything_except_bibliography(format, *args, **kwds)
  File "/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/sage_docbuild/__init__.py", line 565, in _build_everything_except_bibliography
    build_many(build_ref_doc, non_references)
  File "/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/sage_docbuild/__init__.py", line 297, in build_many
    _build_many(target, args, processes=processes)
  File "/var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/sage_docbuild/utils.py", line 289, in build_many
    raise worker_exc.original_exception
OSError: /var/tmp/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_9/build/lib/sage/categories/finite_coxeter_groups.py:docstring of sage.categories.finite_coxeter_groups.FiniteCoxeterGroups.ParentMethods.permutahedron:50: WARNING: Exception occurred in plotting finite_coxeter_groups-1
```
In sage-on-gentoo, I do separate gap packages and the source of error is more precisely ctbllib-1.3.1+ (I say + because there is a 1.3.2 now in its upstream and the result is the same with it). If I downgrade ctbllib to 1.2_p2 the documentation builds.

The error message suggests to increase the memory limit. This is set somewhere in `sage/interface/gap.py` and I pushed it from the current `400MB` to `2000MB` without improvement.

I am probably missing something but what?



---

archive/issue_comments_508730.json:
```json
{
    "body": "Changed commit from **[82f3fa7](https://github.com/sagemath/sagetrac-mirror/commit/82f3fa7bcc0e73c85690a0886a67c5d8cd2e5c2b)** to none",
    "created_at": "2021-06-20T10:57:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508730",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[82f3fa7](https://github.com/sagemath/sagetrac-mirror/commit/82f3fa7bcc0e73c85690a0886a67c5d8cd2e5c2b)** to none



---

archive/issue_comments_508731.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nWhats the output of `_get_gap_memory_pool_size_MB`? \n\nGAP needs swap due to how they reserve the memory pool.",
    "created_at": "2021-06-20T13:26:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508731",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:31'>Comment 31:</a>
Whats the output of `_get_gap_memory_pool_size_MB`? 

GAP needs swap due to how they reserve the memory pool.



---

archive/issue_comments_508732.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nReplying to [@vbraun](#comment%3A31):\n> Whats the output of `_get_gap_memory_pool_size_MB`? \n> \n> GAP needs swap due to how they reserve the memory pool.\n\n568MB if I leave it to the default. With the changes for my last attempt, it should be 2001MB. But what puzzles me is the influence of `ctbllib`. So, I am wondering if the message is in fact unhelpful for the issue at hand.",
    "created_at": "2021-06-20T21:39:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31498#issuecomment-508732",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:32'>Comment 32:</a>
Replying to [@vbraun](#comment%3A31):
> Whats the output of `_get_gap_memory_pool_size_MB`? 
> 
> GAP needs swap due to how they reserve the memory pool.

568MB if I leave it to the default. With the changes for my last attempt, it should be 2001MB. But what puzzles me is the influence of `ctbllib`. So, I am wondering if the message is in fact unhelpful for the issue at hand.
