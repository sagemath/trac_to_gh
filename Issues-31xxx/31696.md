# Issue 31696: Sphinx/docutils update for Sage 9.4

archive/issues_031459.json:
```json
{
    "body": "We are at 3.1.2, current is 4.0.1\n\nhttps://repology.org/projects/p/?inrepo=sagemath\n\n\n**CC:**  @kiwifb @antonio-rojas @jhpalmieri @slel\n\n**Branch/Commit:** [bc84af8c795b7da433d2000afc3626ee65ba28b8](https://github.com/sagemath/sagetrac-mirror/commit/bc84af8c795b7da433d2000afc3626ee65ba28b8)\n\n**Reviewer:** John Palmieri\n\n**Author:** Antonio Rojas\n\n**Dependencies:** #30551\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31696\n\n",
    "closed_at": "2021-06-29T23:08:40Z",
    "created_at": "2021-04-19T19:56:29Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Sphinx/docutils update for Sage 9.4",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31696",
    "user": "https://github.com/mkoeppe"
}
```
We are at 3.1.2, current is 4.0.1

https://repology.org/projects/p/?inrepo=sagemath


**CC:**  @kiwifb @antonio-rojas @jhpalmieri @slel

**Branch/Commit:** [bc84af8c795b7da433d2000afc3626ee65ba28b8](https://github.com/sagemath/sagetrac-mirror/commit/bc84af8c795b7da433d2000afc3626ee65ba28b8)

**Reviewer:** John Palmieri

**Author:** Antonio Rojas

**Dependencies:** #30551

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/31696





---

archive/issue_comments_630886.json:
```json
{
    "body": "**Dependencies:** #30551",
    "created_at": "2021-04-19T20:04:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630886",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #30551



---

archive/issue_events_094068.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "rename": {
        "from": "Sphinx update for Sage 9.4",
        "to": "Sphinx/docutils update for Sage 9.4"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31696#event-94068"
}
```



---

archive/issue_comments_630887.json:
```json
{
    "body": "**Branch:** [u/arojas/sphinx_docutils_update_for_sage_9_4](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/sphinx_docutils_update_for_sage_9_4)",
    "created_at": "2021-05-10T18:15:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630887",
    "user": "https://github.com/antonio-rojas"
}
```

**Branch:** [u/arojas/sphinx_docutils_update_for_sage_9_4](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/sphinx_docutils_update_for_sage_9_4)



---

archive/issue_comments_630888.json:
```json
{
    "body": "**Commit:** [ad51564265ddef74f7feb5b7de32b2590a38308b](https://github.com/sagemath/sagetrac-mirror/commit/ad51564265ddef74f7feb5b7de32b2590a38308b)",
    "created_at": "2021-05-10T18:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630888",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [ad51564265ddef74f7feb5b7de32b2590a38308b](https://github.com/sagemath/sagetrac-mirror/commit/ad51564265ddef74f7feb5b7de32b2590a38308b)



---

archive/issue_comments_630889.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8272c0bb80ef219597a3968ae1e6182ebc8f943\">c8272c0</a></td><td><code>Sync autodoc with upstream to fix deprecation warnings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ed5bd7eab075e0ed3df2333b4ed5dec7bb793f8\">1ed5bd7</a></td><td><code>Remove duplicate modules, which throw a warning with sphinx 4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad51564265ddef74f7feb5b7de32b2590a38308b\">ad51564</a></td><td><code>Upgrade sphinx to 4.0.0</code></td></tr></table>\n",
    "created_at": "2021-05-10T18:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630889",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8272c0bb80ef219597a3968ae1e6182ebc8f943">c8272c0</a></td><td><code>Sync autodoc with upstream to fix deprecation warnings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ed5bd7eab075e0ed3df2333b4ed5dec7bb793f8">1ed5bd7</a></td><td><code>Remove duplicate modules, which throw a warning with sphinx 4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad51564265ddef74f7feb5b7de32b2590a38308b">ad51564</a></td><td><code>Upgrade sphinx to 4.0.0</code></td></tr></table>




---

archive/issue_comments_630890.json:
```json
{
    "body": "**Changing commit** from \"[ad51564265ddef74f7feb5b7de32b2590a38308b](https://github.com/sagemath/sagetrac-mirror/commit/ad51564265ddef74f7feb5b7de32b2590a38308b)\" to \"[b9e390f8402202ab61b8b313a990e4e4b862edc4](https://github.com/sagemath/sagetrac-mirror/commit/b9e390f8402202ab61b8b313a990e4e4b862edc4)\".",
    "created_at": "2021-05-10T18:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630890",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ad51564265ddef74f7feb5b7de32b2590a38308b](https://github.com/sagemath/sagetrac-mirror/commit/ad51564265ddef74f7feb5b7de32b2590a38308b)" to "[b9e390f8402202ab61b8b313a990e4e4b862edc4](https://github.com/sagemath/sagetrac-mirror/commit/b9e390f8402202ab61b8b313a990e4e4b862edc4)".



---

archive/issue_comments_630891.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9e390f8402202ab61b8b313a990e4e4b862edc4\">b9e390f</a></td><td><code>Upgrade sphinx to 4.0.1</code></td></tr></table>\n",
    "created_at": "2021-05-10T18:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630891",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9e390f8402202ab61b8b313a990e4e4b862edc4">b9e390f</a></td><td><code>Upgrade sphinx to 4.0.1</code></td></tr></table>




---

archive/issue_comments_630892.json:
```json
{
    "body": "<a id='comment:5'></a>\nPushed the sphinx 4 update, with the usual batch of deprecation fixes. We should really try to get rid of the custom autodoc fork, most of the breakage comes from it getting out of sync with upstream.",
    "created_at": "2021-05-10T18:24:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630892",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:5'></a>
Pushed the sphinx 4 update, with the usual batch of deprecation fixes. We should really try to get rid of the custom autodoc fork, most of the breakage comes from it getting out of sync with upstream.



---

archive/issue_comments_630893.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-We are at 3.1.2, current is 3.5.4\n+We are at 3.1.2, current is 4.0.1\n \n https://repology.org/projects/p/?inrepo=sagemath\n \n``````\n",
    "created_at": "2021-05-10T18:24:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630893",
    "user": "https://github.com/antonio-rojas"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-We are at 3.1.2, current is 3.5.4
+We are at 3.1.2, current is 4.0.1
 
 https://repology.org/projects/p/?inrepo=sagemath
 
``````




---

archive/issue_comments_630894.json:
```json
{
    "body": "**Changing commit** from \"[b9e390f8402202ab61b8b313a990e4e4b862edc4](https://github.com/sagemath/sagetrac-mirror/commit/b9e390f8402202ab61b8b313a990e4e4b862edc4)\" to \"[d5a374a612539fe8ca71ada9d8f82b8290dd4a04](https://github.com/sagemath/sagetrac-mirror/commit/d5a374a612539fe8ca71ada9d8f82b8290dd4a04)\".",
    "created_at": "2021-05-11T15:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630894",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b9e390f8402202ab61b8b313a990e4e4b862edc4](https://github.com/sagemath/sagetrac-mirror/commit/b9e390f8402202ab61b8b313a990e4e4b862edc4)" to "[d5a374a612539fe8ca71ada9d8f82b8290dd4a04](https://github.com/sagemath/sagetrac-mirror/commit/d5a374a612539fe8ca71ada9d8f82b8290dd4a04)".



---

archive/issue_comments_630895.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5a374a612539fe8ca71ada9d8f82b8290dd4a04\">d5a374a</a></td><td><code>Clear LANGUAGE too</code></td></tr></table>\n",
    "created_at": "2021-05-11T15:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630895",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5a374a612539fe8ca71ada9d8f82b8290dd4a04">d5a374a</a></td><td><code>Clear LANGUAGE too</code></td></tr></table>




---

archive/issue_comments_630896.json:
```json
{
    "body": "**Changing commit** from \"[d5a374a612539fe8ca71ada9d8f82b8290dd4a04](https://github.com/sagemath/sagetrac-mirror/commit/d5a374a612539fe8ca71ada9d8f82b8290dd4a04)\" to \"[285ea99487b9dcf8fa917df21a235e5275732e77](https://github.com/sagemath/sagetrac-mirror/commit/285ea99487b9dcf8fa917df21a235e5275732e77)\".",
    "created_at": "2021-05-11T16:03:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630896",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d5a374a612539fe8ca71ada9d8f82b8290dd4a04](https://github.com/sagemath/sagetrac-mirror/commit/d5a374a612539fe8ca71ada9d8f82b8290dd4a04)" to "[285ea99487b9dcf8fa917df21a235e5275732e77](https://github.com/sagemath/sagetrac-mirror/commit/285ea99487b9dcf8fa917df21a235e5275732e77)".



---

archive/issue_comments_630897.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/285ea99487b9dcf8fa917df21a235e5275732e77\">285ea99</a></td><td><code>Update test for different sphinx output</code></td></tr></table>\n",
    "created_at": "2021-05-11T16:03:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630897",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/285ea99487b9dcf8fa917df21a235e5275732e77">285ea99</a></td><td><code>Update test for different sphinx output</code></td></tr></table>




---

archive/issue_comments_630898.json:
```json
{
    "body": "**Changing commit** from \"[285ea99487b9dcf8fa917df21a235e5275732e77](https://github.com/sagemath/sagetrac-mirror/commit/285ea99487b9dcf8fa917df21a235e5275732e77)\" to \"[5bf10ddda635e5cec09d539938a7b950befb5234](https://github.com/sagemath/sagetrac-mirror/commit/5bf10ddda635e5cec09d539938a7b950befb5234)\".",
    "created_at": "2021-06-05T07:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630898",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[285ea99487b9dcf8fa917df21a235e5275732e77](https://github.com/sagemath/sagetrac-mirror/commit/285ea99487b9dcf8fa917df21a235e5275732e77)" to "[5bf10ddda635e5cec09d539938a7b950befb5234](https://github.com/sagemath/sagetrac-mirror/commit/5bf10ddda635e5cec09d539938a7b950befb5234)".



---

archive/issue_comments_630899.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e74c40fac4ea81a494ff48f182891f87501595b3\">e74c40f</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into t/31696/sphinx_docutils_update_for_sage_9_4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bf10ddda635e5cec09d539938a7b950befb5234\">5bf10dd</a></td><td><code>Update docutils to 0.17.1</code></td></tr></table>\n",
    "created_at": "2021-06-05T07:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630899",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e74c40fac4ea81a494ff48f182891f87501595b3">e74c40f</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into t/31696/sphinx_docutils_update_for_sage_9_4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bf10ddda635e5cec09d539938a7b950befb5234">5bf10dd</a></td><td><code>Update docutils to 0.17.1</code></td></tr></table>




---

archive/issue_comments_630900.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2021-06-05T07:04:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630900",
    "user": "https://github.com/antonio-rojas"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_630901.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [arojas](#comment%3A5):\n> Pushed the sphinx 4 update, with the usual batch of deprecation fixes. We should really try to get rid of the custom autodoc fork, most of the breakage comes from it getting out of sync with upstream.\n\n\nFor the custom autodoc fork, we should just open a ticket and see what needs fixing when we remove it. May be not for 9.4, but we need to work on this.",
    "created_at": "2021-06-05T07:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630901",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:10'></a>
Replying to [arojas](#comment%3A5):
> Pushed the sphinx 4 update, with the usual batch of deprecation fixes. We should really try to get rid of the custom autodoc fork, most of the breakage comes from it getting out of sync with upstream.


For the custom autodoc fork, we should just open a ticket and see what needs fixing when we remove it. May be not for 9.4, but we need to work on this.



---

archive/issue_comments_630902.json:
```json
{
    "body": "<a id='comment:11'></a>\nBuilding the documentation fails for me with `WARNING: rST localisation for language \"hu\" not found.`",
    "created_at": "2021-06-08T18:26:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630902",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:11'></a>
Building the documentation fails for me with `WARNING: rST localisation for language "hu" not found.`



---

archive/issue_comments_630903.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [fbissey](#comment%3A10):\n> Replying to [arojas](#comment%3A5):\n> > Pushed the sphinx 4 update, with the usual batch of deprecation fixes. We should really try to get rid of the custom autodoc fork, most of the breakage comes from it getting out of sync with upstream.\n\n> \n> For the custom autodoc fork, we should just open a ticket and see what needs fixing when we remove it. May be not for 9.4, but we need to work on this.\n\n\nHow about #30893?",
    "created_at": "2021-06-08T19:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630903",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:12'></a>
Replying to [fbissey](#comment%3A10):
> Replying to [arojas](#comment%3A5):
> > Pushed the sphinx 4 update, with the usual batch of deprecation fixes. We should really try to get rid of the custom autodoc fork, most of the breakage comes from it getting out of sync with upstream.

> 
> For the custom autodoc fork, we should just open a ticket and see what needs fixing when we remove it. May be not for 9.4, but we need to work on this.


How about #30893?



---

archive/issue_comments_630904.json:
```json
{
    "body": "**Changing commit** from \"[5bf10ddda635e5cec09d539938a7b950befb5234](https://github.com/sagemath/sagetrac-mirror/commit/5bf10ddda635e5cec09d539938a7b950befb5234)\" to \"[52725203ad5af01d8b503c99dea1ca6f11ade854](https://github.com/sagemath/sagetrac-mirror/commit/52725203ad5af01d8b503c99dea1ca6f11ade854)\".",
    "created_at": "2021-06-12T12:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630904",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5bf10ddda635e5cec09d539938a7b950befb5234](https://github.com/sagemath/sagetrac-mirror/commit/5bf10ddda635e5cec09d539938a7b950befb5234)" to "[52725203ad5af01d8b503c99dea1ca6f11ade854](https://github.com/sagemath/sagetrac-mirror/commit/52725203ad5af01d8b503c99dea1ca6f11ade854)".



---

archive/issue_comments_630905.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52725203ad5af01d8b503c99dea1ca6f11ade854\">5272520</a></td><td><code>Ignore warnings from docutils about missing rST localisation</code></td></tr></table>\n",
    "created_at": "2021-06-12T12:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630905",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52725203ad5af01d8b503c99dea1ca6f11ade854">5272520</a></td><td><code>Ignore warnings from docutils about missing rST localisation</code></td></tr></table>




---

archive/issue_comments_630906.json:
```json
{
    "body": "<a id='comment:14'></a>\nThank you, that fixes the html build problems. The PDF documentation doesn't build though: the Japanese documents fail with\n\n```\n\n! Class jsbook Error: You are running upLaTeX.\n(jsbook)              Please use pLaTeX instead, or add 'uplatex' to\n(jsbook)              the class option list.\n\nSee the jsbook class documentation for explanation.\nType  H <return>  for immediate help.\n ...                                              \n                                                  \nl.229       {\\@ehc}\n                   \n? \n! Emergency stop.\n ...                                              \n                                                  \nl.229       {\\@ehc}\n```",
    "created_at": "2021-06-15T00:49:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630906",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:14'></a>
Thank you, that fixes the html build problems. The PDF documentation doesn't build though: the Japanese documents fail with

```

! Class jsbook Error: You are running upLaTeX.
(jsbook)              Please use pLaTeX instead, or add 'uplatex' to
(jsbook)              the class option list.

See the jsbook class documentation for explanation.
Type  H <return>  for immediate help.
 ...                                              
                                                  
l.229       {\@ehc}
                   
? 
! Emergency stop.
 ...                                              
                                                  
l.229       {\@ehc}
```



---

archive/issue_comments_630907.json:
```json
{
    "body": "<a id='comment:15'></a>\nLooks like https://github.com/sphinx-doc/sphinx/commit/1d9eeedde306cfb013850b4621c32cdd47e46bff\n\nAnyway, this is where I give up. I never build PDF docs myself so I'm not really motivated to keep digging into this.",
    "created_at": "2021-06-18T18:41:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630907",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:15'></a>
Looks like https://github.com/sphinx-doc/sphinx/commit/1d9eeedde306cfb013850b4621c32cdd47e46bff

Anyway, this is where I give up. I never build PDF docs myself so I'm not really motivated to keep digging into this.



---

archive/issue_comments_630908.json:
```json
{
    "body": "**Changing branch** from \"[u/arojas/sphinx_docutils_update_for_sage_9_4](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/sphinx_docutils_update_for_sage_9_4)\" to \"[u/jhpalmieri/sphinx_docutils_update_for_sage_9_4](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sphinx_docutils_update_for_sage_9_4)\".",
    "created_at": "2021-06-18T21:38:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630908",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing branch** from "[u/arojas/sphinx_docutils_update_for_sage_9_4](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/sphinx_docutils_update_for_sage_9_4)" to "[u/jhpalmieri/sphinx_docutils_update_for_sage_9_4](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sphinx_docutils_update_for_sage_9_4)".



---

archive/issue_comments_630909.json:
```json
{
    "body": "**Changing commit** from \"[52725203ad5af01d8b503c99dea1ca6f11ade854](https://github.com/sagemath/sagetrac-mirror/commit/52725203ad5af01d8b503c99dea1ca6f11ade854)\" to \"[bc84af8c795b7da433d2000afc3626ee65ba28b8](https://github.com/sagemath/sagetrac-mirror/commit/bc84af8c795b7da433d2000afc3626ee65ba28b8)\".",
    "created_at": "2021-06-18T21:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630909",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing commit** from "[52725203ad5af01d8b503c99dea1ca6f11ade854](https://github.com/sagemath/sagetrac-mirror/commit/52725203ad5af01d8b503c99dea1ca6f11ade854)" to "[bc84af8c795b7da433d2000afc3626ee65ba28b8](https://github.com/sagemath/sagetrac-mirror/commit/bc84af8c795b7da433d2000afc3626ee65ba28b8)".



---

archive/issue_comments_630910.json:
```json
{
    "body": "**Author:** Antonio Rojas",
    "created_at": "2021-06-18T21:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630910",
    "user": "https://github.com/jhpalmieri"
}
```

**Author:** Antonio Rojas



---

archive/issue_comments_630911.json:
```json
{
    "body": "<a id='comment:17'></a>\nThis works for me. Please test. I am happy to positively review everything but my own contribution.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc84af8c795b7da433d2000afc3626ee65ba28b8\">bc84af8</a></td><td><code>trac 31696: fixes for Japanese documentation, PDF build</code></td></tr></table>\n",
    "created_at": "2021-06-18T21:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630911",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:17'></a>
This works for me. Please test. I am happy to positively review everything but my own contribution.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc84af8c795b7da433d2000afc3626ee65ba28b8">bc84af8</a></td><td><code>trac 31696: fixes for Japanese documentation, PDF build</code></td></tr></table>




---

archive/issue_comments_630912.json:
```json
{
    "body": "**Reviewer:** John Palmieri",
    "created_at": "2021-06-18T21:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630912",
    "user": "https://github.com/jhpalmieri"
}
```

**Reviewer:** John Palmieri



---

archive/issue_comments_630913.json:
```json
{
    "body": "<a id='comment:18'></a>\nIn fact I don't think all of my changes were necessary, but we don't need to include stuff about the French documentation in `doc/ja/...`.",
    "created_at": "2021-06-18T21:42:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630913",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:18'></a>
In fact I don't think all of my changes were necessary, but we don't need to include stuff about the French documentation in `doc/ja/...`.



---

archive/issue_comments_630914.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-06-22T21:03:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630914",
    "user": "https://github.com/antonio-rojas"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_630915.json:
```json
{
    "body": "<a id='comment:19'></a>\nPDF build works for me, setting to positive review as per[comment:17](#comment%3A17)",
    "created_at": "2021-06-22T21:03:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630915",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:19'></a>
PDF build works for me, setting to positive review as per[comment:17](#comment%3A17)



---

archive/issue_comments_630916.json:
```json
{
    "body": "**Changing branch** from \"[u/jhpalmieri/sphinx_docutils_update_for_sage_9_4](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sphinx_docutils_update_for_sage_9_4)\" to \"[bc84af8c795b7da433d2000afc3626ee65ba28b8](https://github.com/sagemath/sagetrac-mirror/commit/bc84af8c795b7da433d2000afc3626ee65ba28b8)\".",
    "created_at": "2021-06-29T23:08:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630916",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jhpalmieri/sphinx_docutils_update_for_sage_9_4](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sphinx_docutils_update_for_sage_9_4)" to "[bc84af8c795b7da433d2000afc3626ee65ba28b8](https://github.com/sagemath/sagetrac-mirror/commit/bc84af8c795b7da433d2000afc3626ee65ba28b8)".



---

archive/issue_comments_630917.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2021-06-29T23:08:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-630917",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_events_094069.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-29T23:08:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31696#event-94069"
}
```
