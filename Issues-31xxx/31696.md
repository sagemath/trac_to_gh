# Issue 31696: Sphinx/docutils update for Sage 9.4

archive/issues_031459.json:
```json
{
    "assignees": [],
    "body": "We are at 3.1.2, current is 4.0.1\n\nhttps://repology.org/projects/p/?inrepo=sagemath\n\n\nDepends on #30551\n\nCC:  @kiwifb @antonio-rojas @jhpalmieri @slel\n\nBranch/Commit: **[bc84af8](https://github.com/sagemath/sagetrac-mirror/commit/bc84af8c795b7da433d2000afc3626ee65ba28b8)**\n\nReviewer: **John Palmieri**\n\nAuthor: **Antonio Rojas**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31696_\n\n",
    "closed_at": "2021-06-29T23:08:40Z",
    "created_at": "2021-04-19T19:56:29Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Sphinx/docutils update for Sage 9.4",
    "type": "issue",
    "updated_at": "2021-06-29T23:08:40Z",
    "url": "https://github.com/sagemath/sage/issues/31696",
    "user": "https://github.com/mkoeppe"
}
```
We are at 3.1.2, current is 4.0.1

https://repology.org/projects/p/?inrepo=sagemath


Depends on #30551

CC:  @kiwifb @antonio-rojas @jhpalmieri @slel

Branch/Commit: **[bc84af8](https://github.com/sagemath/sagetrac-mirror/commit/bc84af8c795b7da433d2000afc3626ee65ba28b8)**

Reviewer: **John Palmieri**

Author: **Antonio Rojas**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/31696_





---

archive/issue_events_437262.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-19T19:56:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31696#event-437262"
}
```



---

archive/issue_events_437263.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-19T19:56:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31696#event-437263"
}
```



---

archive/issue_events_437264.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-19T19:56:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31696#event-437264"
}
```



---

archive/issue_events_437265.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-19T19:56:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31696#event-437265"
}
```



---

archive/issue_comments_510008.json:
```json
{
    "body": "Dependencies: **#30551**",
    "created_at": "2021-04-19T20:04:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510008",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#30551**



---

archive/issue_events_437266.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-19T20:04:46Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "title_is": "Sphinx/docutils update for Sage 9.4",
    "title_was": "Sphinx update for Sage 9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31696#event-437266"
}
```



---

archive/issue_comments_510009.json:
```json
{
    "body": "Branch: **[u/arojas/sphinx_docutils_update_for_sage_9_4](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/sphinx_docutils_update_for_sage_9_4)**",
    "created_at": "2021-05-10T18:15:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510009",
    "user": "https://github.com/antonio-rojas"
}
```

Branch: **[u/arojas/sphinx_docutils_update_for_sage_9_4](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/sphinx_docutils_update_for_sage_9_4)**



---

archive/issue_comments_510010.json:
```json
{
    "body": "Commit: **[ad51564](https://github.com/sagemath/sagetrac-mirror/commit/ad51564265ddef74f7feb5b7de32b2590a38308b)**",
    "created_at": "2021-05-10T18:18:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510010",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[ad51564](https://github.com/sagemath/sagetrac-mirror/commit/ad51564265ddef74f7feb5b7de32b2590a38308b)**



---

archive/issue_comments_510011.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8272c0bb80ef219597a3968ae1e6182ebc8f943\">c8272c0</a></td><td><code>Sync autodoc with upstream to fix deprecation warnings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ed5bd7eab075e0ed3df2333b4ed5dec7bb793f8\">1ed5bd7</a></td><td><code>Remove duplicate modules, which throw a warning with sphinx 4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad51564265ddef74f7feb5b7de32b2590a38308b\">ad51564</a></td><td><code>Upgrade sphinx to 4.0.0</code></td></tr></table>\n",
    "created_at": "2021-05-10T18:18:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510011",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8272c0bb80ef219597a3968ae1e6182ebc8f943">c8272c0</a></td><td><code>Sync autodoc with upstream to fix deprecation warnings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ed5bd7eab075e0ed3df2333b4ed5dec7bb793f8">1ed5bd7</a></td><td><code>Remove duplicate modules, which throw a warning with sphinx 4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad51564265ddef74f7feb5b7de32b2590a38308b">ad51564</a></td><td><code>Upgrade sphinx to 4.0.0</code></td></tr></table>




---

archive/issue_comments_510012.json:
```json
{
    "body": "Changed commit from **[ad51564](https://github.com/sagemath/sagetrac-mirror/commit/ad51564265ddef74f7feb5b7de32b2590a38308b)** to **[b9e390f](https://github.com/sagemath/sagetrac-mirror/commit/b9e390f8402202ab61b8b313a990e4e4b862edc4)**",
    "created_at": "2021-05-10T18:22:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510012",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ad51564](https://github.com/sagemath/sagetrac-mirror/commit/ad51564265ddef74f7feb5b7de32b2590a38308b)** to **[b9e390f](https://github.com/sagemath/sagetrac-mirror/commit/b9e390f8402202ab61b8b313a990e4e4b862edc4)**



---

archive/issue_comments_510013.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9e390f8402202ab61b8b313a990e4e4b862edc4\">b9e390f</a></td><td><code>Upgrade sphinx to 4.0.1</code></td></tr></table>\n",
    "created_at": "2021-05-10T18:22:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510013",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9e390f8402202ab61b8b313a990e4e4b862edc4">b9e390f</a></td><td><code>Upgrade sphinx to 4.0.1</code></td></tr></table>




---

archive/issue_comments_510014.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nPushed the sphinx 4 update, with the usual batch of deprecation fixes. We should really try to get rid of the custom autodoc fork, most of the breakage comes from it getting out of sync with upstream.",
    "created_at": "2021-05-10T18:24:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510014",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:5" align="right">comment:5</div>

Pushed the sphinx 4 update, with the usual batch of deprecation fixes. We should really try to get rid of the custom autodoc fork, most of the breakage comes from it getting out of sync with upstream.



---

archive/issue_comments_510015.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-We are at 3.1.2, current is 3.5.4\n+We are at 3.1.2, current is 4.0.1\n \n https://repology.org/projects/p/?inrepo=sagemath\n \n``````\n",
    "created_at": "2021-05-10T18:24:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510015",
    "user": "https://github.com/antonio-rojas"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-We are at 3.1.2, current is 3.5.4
+We are at 3.1.2, current is 4.0.1
 
 https://repology.org/projects/p/?inrepo=sagemath
 
``````




---

archive/issue_comments_510016.json:
```json
{
    "body": "Changed commit from **[b9e390f](https://github.com/sagemath/sagetrac-mirror/commit/b9e390f8402202ab61b8b313a990e4e4b862edc4)** to **[d5a374a](https://github.com/sagemath/sagetrac-mirror/commit/d5a374a612539fe8ca71ada9d8f82b8290dd4a04)**",
    "created_at": "2021-05-11T15:34:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510016",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b9e390f](https://github.com/sagemath/sagetrac-mirror/commit/b9e390f8402202ab61b8b313a990e4e4b862edc4)** to **[d5a374a](https://github.com/sagemath/sagetrac-mirror/commit/d5a374a612539fe8ca71ada9d8f82b8290dd4a04)**



---

archive/issue_comments_510017.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5a374a612539fe8ca71ada9d8f82b8290dd4a04\">d5a374a</a></td><td><code>Clear LANGUAGE too</code></td></tr></table>\n",
    "created_at": "2021-05-11T15:34:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510017",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5a374a612539fe8ca71ada9d8f82b8290dd4a04">d5a374a</a></td><td><code>Clear LANGUAGE too</code></td></tr></table>




---

archive/issue_comments_510018.json:
```json
{
    "body": "Changed commit from **[d5a374a](https://github.com/sagemath/sagetrac-mirror/commit/d5a374a612539fe8ca71ada9d8f82b8290dd4a04)** to **[285ea99](https://github.com/sagemath/sagetrac-mirror/commit/285ea99487b9dcf8fa917df21a235e5275732e77)**",
    "created_at": "2021-05-11T16:03:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510018",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d5a374a](https://github.com/sagemath/sagetrac-mirror/commit/d5a374a612539fe8ca71ada9d8f82b8290dd4a04)** to **[285ea99](https://github.com/sagemath/sagetrac-mirror/commit/285ea99487b9dcf8fa917df21a235e5275732e77)**



---

archive/issue_comments_510019.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/285ea99487b9dcf8fa917df21a235e5275732e77\">285ea99</a></td><td><code>Update test for different sphinx output</code></td></tr></table>\n",
    "created_at": "2021-05-11T16:03:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510019",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/285ea99487b9dcf8fa917df21a235e5275732e77">285ea99</a></td><td><code>Update test for different sphinx output</code></td></tr></table>




---

archive/issue_comments_510020.json:
```json
{
    "body": "Changed commit from **[285ea99](https://github.com/sagemath/sagetrac-mirror/commit/285ea99487b9dcf8fa917df21a235e5275732e77)** to **[5bf10dd](https://github.com/sagemath/sagetrac-mirror/commit/5bf10ddda635e5cec09d539938a7b950befb5234)**",
    "created_at": "2021-06-05T07:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510020",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[285ea99](https://github.com/sagemath/sagetrac-mirror/commit/285ea99487b9dcf8fa917df21a235e5275732e77)** to **[5bf10dd](https://github.com/sagemath/sagetrac-mirror/commit/5bf10ddda635e5cec09d539938a7b950befb5234)**



---

archive/issue_comments_510021.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e74c40fac4ea81a494ff48f182891f87501595b3\">e74c40f</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into t/31696/sphinx_docutils_update_for_sage_9_4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bf10ddda635e5cec09d539938a7b950befb5234\">5bf10dd</a></td><td><code>Update docutils to 0.17.1</code></td></tr></table>\n",
    "created_at": "2021-06-05T07:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510021",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e74c40fac4ea81a494ff48f182891f87501595b3">e74c40f</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into t/31696/sphinx_docutils_update_for_sage_9_4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bf10ddda635e5cec09d539938a7b950befb5234">5bf10dd</a></td><td><code>Update docutils to 0.17.1</code></td></tr></table>




---

archive/issue_events_437267.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2021-06-05T07:04:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31696#event-437267"
}
```



---

archive/issue_comments_510022.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@antonio-rojas](#comment:5):\n> Pushed the sphinx 4 update, with the usual batch of deprecation fixes. We should really try to get rid of the custom autodoc fork, most of the breakage comes from it getting out of sync with upstream.\n\nFor the custom autodoc fork, we should just open a ticket and see what needs fixing when we remove it. May be not for 9.4, but we need to work on this.",
    "created_at": "2021-06-05T07:34:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510022",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@antonio-rojas](#comment:5):
> Pushed the sphinx 4 update, with the usual batch of deprecation fixes. We should really try to get rid of the custom autodoc fork, most of the breakage comes from it getting out of sync with upstream.

For the custom autodoc fork, we should just open a ticket and see what needs fixing when we remove it. May be not for 9.4, but we need to work on this.



---

archive/issue_comments_510023.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nBuilding the documentation fails for me with `WARNING: rST localisation for language \"hu\" not found.`",
    "created_at": "2021-06-08T18:26:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510023",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:11" align="right">comment:11</div>

Building the documentation fails for me with `WARNING: rST localisation for language "hu" not found.`



---

archive/issue_comments_510024.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@kiwifb](#comment:10):\n> Replying to [@antonio-rojas](#comment:5):\n> > Pushed the sphinx 4 update, with the usual batch of deprecation fixes. We should really try to get rid of the custom autodoc fork, most of the breakage comes from it getting out of sync with upstream.\n\n> \n> For the custom autodoc fork, we should just open a ticket and see what needs fixing when we remove it. May be not for 9.4, but we need to work on this.\n\nHow about #30893?",
    "created_at": "2021-06-08T19:02:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510024",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@kiwifb](#comment:10):
> Replying to [@antonio-rojas](#comment:5):
> > Pushed the sphinx 4 update, with the usual batch of deprecation fixes. We should really try to get rid of the custom autodoc fork, most of the breakage comes from it getting out of sync with upstream.

> 
> For the custom autodoc fork, we should just open a ticket and see what needs fixing when we remove it. May be not for 9.4, but we need to work on this.

How about #30893?



---

archive/issue_comments_510025.json:
```json
{
    "body": "Changed commit from **[5bf10dd](https://github.com/sagemath/sagetrac-mirror/commit/5bf10ddda635e5cec09d539938a7b950befb5234)** to **[5272520](https://github.com/sagemath/sagetrac-mirror/commit/52725203ad5af01d8b503c99dea1ca6f11ade854)**",
    "created_at": "2021-06-12T12:24:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510025",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5bf10dd](https://github.com/sagemath/sagetrac-mirror/commit/5bf10ddda635e5cec09d539938a7b950befb5234)** to **[5272520](https://github.com/sagemath/sagetrac-mirror/commit/52725203ad5af01d8b503c99dea1ca6f11ade854)**



---

archive/issue_comments_510026.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52725203ad5af01d8b503c99dea1ca6f11ade854\">5272520</a></td><td><code>Ignore warnings from docutils about missing rST localisation</code></td></tr></table>\n",
    "created_at": "2021-06-12T12:24:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510026",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52725203ad5af01d8b503c99dea1ca6f11ade854">5272520</a></td><td><code>Ignore warnings from docutils about missing rST localisation</code></td></tr></table>




---

archive/issue_comments_510027.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThank you, that fixes the html build problems. The PDF documentation doesn't build though: the Japanese documents fail with\n\n```\n\n! Class jsbook Error: You are running upLaTeX.\n(jsbook)              Please use pLaTeX instead, or add 'uplatex' to\n(jsbook)              the class option list.\n\nSee the jsbook class documentation for explanation.\nType  H <return>  for immediate help.\n ...                                              \n                                                  \nl.229       {\\@ehc}\n                   \n? \n! Emergency stop.\n ...                                              \n                                                  \nl.229       {\\@ehc}\n```",
    "created_at": "2021-06-15T00:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510027",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:14" align="right">comment:14</div>

Thank you, that fixes the html build problems. The PDF documentation doesn't build though: the Japanese documents fail with

```

! Class jsbook Error: You are running upLaTeX.
(jsbook)              Please use pLaTeX instead, or add 'uplatex' to
(jsbook)              the class option list.

See the jsbook class documentation for explanation.
Type  H <return>  for immediate help.
 ...                                              
                                                  
l.229       {\@ehc}
                   
? 
! Emergency stop.
 ...                                              
                                                  
l.229       {\@ehc}
```



---

archive/issue_comments_510028.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nLooks like https://github.com/sphinx-doc/sphinx/commit/1d9eeedde306cfb013850b4621c32cdd47e46bff\n\nAnyway, this is where I give up. I never build PDF docs myself so I'm not really motivated to keep digging into this.",
    "created_at": "2021-06-18T18:41:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510028",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:15" align="right">comment:15</div>

Looks like https://github.com/sphinx-doc/sphinx/commit/1d9eeedde306cfb013850b4621c32cdd47e46bff

Anyway, this is where I give up. I never build PDF docs myself so I'm not really motivated to keep digging into this.



---

archive/issue_comments_510029.json:
```json
{
    "body": "Changed branch from **[u/arojas/sphinx_docutils_update_for_sage_9_4](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/sphinx_docutils_update_for_sage_9_4)** to **[u/jhpalmieri/sphinx_docutils_update_for_sage_9_4](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sphinx_docutils_update_for_sage_9_4)**",
    "created_at": "2021-06-18T21:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510029",
    "user": "https://github.com/jhpalmieri"
}
```

Changed branch from **[u/arojas/sphinx_docutils_update_for_sage_9_4](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/sphinx_docutils_update_for_sage_9_4)** to **[u/jhpalmieri/sphinx_docutils_update_for_sage_9_4](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sphinx_docutils_update_for_sage_9_4)**



---

archive/issue_comments_510030.json:
```json
{
    "body": "Changed commit from **[5272520](https://github.com/sagemath/sagetrac-mirror/commit/52725203ad5af01d8b503c99dea1ca6f11ade854)** to **[bc84af8](https://github.com/sagemath/sagetrac-mirror/commit/bc84af8c795b7da433d2000afc3626ee65ba28b8)**",
    "created_at": "2021-06-18T21:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510030",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[5272520](https://github.com/sagemath/sagetrac-mirror/commit/52725203ad5af01d8b503c99dea1ca6f11ade854)** to **[bc84af8](https://github.com/sagemath/sagetrac-mirror/commit/bc84af8c795b7da433d2000afc3626ee65ba28b8)**



---

archive/issue_comments_510031.json:
```json
{
    "body": "Author: **Antonio Rojas**",
    "created_at": "2021-06-18T21:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510031",
    "user": "https://github.com/jhpalmieri"
}
```

Author: **Antonio Rojas**



---

archive/issue_comments_510032.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThis works for me. Please test. I am happy to positively review everything but my own contribution.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc84af8c795b7da433d2000afc3626ee65ba28b8\">bc84af8</a></td><td><code>trac 31696: fixes for Japanese documentation, PDF build</code></td></tr></table>\n",
    "created_at": "2021-06-18T21:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510032",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:17" align="right">comment:17</div>

This works for me. Please test. I am happy to positively review everything but my own contribution.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc84af8c795b7da433d2000afc3626ee65ba28b8">bc84af8</a></td><td><code>trac 31696: fixes for Japanese documentation, PDF build</code></td></tr></table>




---

archive/issue_comments_510033.json:
```json
{
    "body": "Reviewer: **John Palmieri**",
    "created_at": "2021-06-18T21:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510033",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri**



---

archive/issue_comments_510034.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nIn fact I don't think all of my changes were necessary, but we don't need to include stuff about the French documentation in `doc/ja/...`.",
    "created_at": "2021-06-18T21:42:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510034",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:18" align="right">comment:18</div>

In fact I don't think all of my changes were necessary, but we don't need to include stuff about the French documentation in `doc/ja/...`.



---

archive/issue_events_437268.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2021-06-22T21:03:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31696#event-437268"
}
```



---

archive/issue_events_437269.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2021-06-22T21:03:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31696#event-437269"
}
```



---

archive/issue_comments_510035.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nPDF build works for me, setting to positive review as per [comment:17](#comment:17)",
    "created_at": "2021-06-22T21:03:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510035",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:19" align="right">comment:19</div>

PDF build works for me, setting to positive review as per [comment:17](#comment:17)



---

archive/issue_comments_510036.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/sphinx_docutils_update_for_sage_9_4](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sphinx_docutils_update_for_sage_9_4)** to **[bc84af8](https://github.com/sagemath/sagetrac-mirror/commit/bc84af8c795b7da433d2000afc3626ee65ba28b8)**",
    "created_at": "2021-06-29T23:08:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31696#issuecomment-510036",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jhpalmieri/sphinx_docutils_update_for_sage_9_4](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sphinx_docutils_update_for_sage_9_4)** to **[bc84af8](https://github.com/sagemath/sagetrac-mirror/commit/bc84af8c795b7da433d2000afc3626ee65ba28b8)**



---

archive/issue_events_437270.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-29T23:08:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31696#event-437270"
}
```



---

archive/issue_events_437271.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "075b352b88e6c3de4f45f67dacad0cb1255173c3",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-06-29T23:08:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31696",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31696#event-437271"
}
```
